/*! For license information please see main.85b53296.js.LICENSE.txt */
!function(){var e={9932:function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(7313),o=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,s=e.height,l=void 0===s?24:s,u=e.style,c=void 0===u?{}:u,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},3050:function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(7313),o=(r=a)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,a=void 0===r?24:r,s=e.height,l=void 0===s?24:s,u=e.style,c=void 0===u?{}:u,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return o.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:a,height:l},c)},h),o.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},6123:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var o=i.apply(null,n);o&&e.push(o)}}else if("object"===a){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},9080:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,a=Object.keys,o=Array.isArray;function s(e,t){return"object"!=typeof t||a(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?a:Reflect.ownKeys)(t).forEach((function(n){f(e,n,t[n])}))}var d=Object.defineProperty;function f(e,t,n,r){d(e,t,s(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var v=Object.getOwnPropertyDescriptor,m=[].slice;function g(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function _(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var a=x(e,t[r]);n.push(a)}return n}var o=t.indexOf(".");if(-1!==o){var s=e[t.substr(0,o)];return null==s?void 0:x(s,t.substr(o+1))}}function E(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)E(e,t[r],n[r])}else{var a,s,l=t.indexOf(".");-1!==l?(a=t.substr(0,l),""===(s=t.substr(l+1))?void 0===n?o(e)&&!isNaN(parseInt(a))?e.splice(a,1):delete e[a]:e[a]=n:E(l=(l=e[a])&&c(e,a)?l:e[a]={},s,n)):void 0===n?o(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function w(e){var t,n={};for(t in e)c(e,t)&&(n[t]=e[t]);return n}var T=[].concat;function S(e){return T.apply([],e)}var k="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return i[e]})),C=new Set(k.map((function(e){return i[e]}))),A=null;function I(e){return A=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=A.get(t);if(n)return n;if(o(t)){n=[],A.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(C.has(t.constructor))n=t;else{var a,s=l(t);for(a in n=s===Object.prototype?{}:Object.create(s),A.set(t,n),t)c(t,a)&&(n[a]=e(t[a]))}return n}(e),A=null,e}var O={}.toString;function P(e){return O.call(e).slice(8,-1)}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof M?function(e){var t;return null!=e&&(t=e[M])&&t.apply(e)}:function(){return null};function N(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function L(e){var t,n,r,i;if(1===arguments.length){if(o(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(i=R(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var F="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},B=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(e,t){this.name=e,this.message=t}function j(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function z(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=j(e,t)}function V(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=j(e,this.failures)}p(H).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(z).from(H),p(V).from(H);var G=B.reduce((function(e,t){return e[t]=t+"Error",e}),{}),W=H,X=B.reduce((function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=U[t]||n,this.inner=null)}return p(r).from(W),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Y=le.reduce((function(e,t){return e[t+"Error"]=X[t],e}),{}),K=B.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=X[t]),e}),{});function q(){}function $(e){return e}function Z(e,t){return null==e||e===$?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function J(e,t){return e===q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==a?a:n}}function ee(e,t){return e===q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===q?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,a=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Q(i,this.onsuccess):i),a&&(this.onerror=this.onerror?Q(a,this.onerror):a),void 0===r?void 0===n?void 0:n:s(r,n)}}function ne(e,t){return e===q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,a=new Array(i);i--;)a[i]=arguments[i];return n.then((function(){return t.apply(r,a)}))}return t.apply(this,arguments)}}K.ModifyError=z,K.DexieError=H,K.BulkError=V;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ae(e){ie=e}var oe={},se=100,le=(k="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),k[0]),ue=(B=k[1],k=k[2],B=B&&B.then,le&&le.constructor),ce=!!k,he=function(e,t){be.push([e,t]),fe&&(queueMicrotask(Ie),fe=!1)},de=!0,fe=!0,pe=[],ve=[],me=$,ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:q,pgp:!1,env:{},finalize:q},ye=ge,be=[],_e=0,xe=[];function Ee(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ye;if("function"!=typeof e){if(e!==oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Oe();n&&"function"==typeof n.then?e(t,(function(e,t){n instanceof Ee?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,ke(t)),r&&Pe()}}),Se.bind(null,t))}catch(n){Se(t,n)}}(this,e)}var we={get:function(){var e=ye,t=Ue;function n(n,r){var i=this,a=!e.global&&(e!==ye||t!==Ue),o=a&&!Ve(),s=new Ee((function(t,s){Ce(i,new Te(qe(n,e,a,o),qe(r,e,a,o),t,s,e))}));return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=oe,n},set:function(e){f(this,"then",e&&e.prototype===oe?we:{get:function(){return e},set:we.set})}};function Te(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Se(e,t){var n,r;ve.push(t),null===e._state&&(n=e._lib&&Oe(),t=me(t),e._state=!1,e._value=t,r=e,pe.some((function(e){return e._value===r._value}))||pe.push(r),ke(e),n&&Pe())}function ke(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ce(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===_e&&(++_e,he((function(){0==--_e&&Me()}),[]))}function Ce(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++_e,he(Ae,[n,e,t])}else e._listeners.push(t)}function Ae(e,t,n){try{var r,i=t._value;!t._state&&ve.length&&(ve=[]),r=ie&&t._consoleTask?t._consoleTask.run((function(){return e(i)})):e(i),t._state||-1!==ve.indexOf(i)||function(e){for(var t=pe.length;t;)if(pe[--t]._value===e._value)return pe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--_e&&Me(),--n.psd.ref||n.psd.finalize()}}function Ie(){Ke(ge,(function(){Oe()&&Pe()}))}function Oe(){var e=de;return fe=de=!1,e}function Pe(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);fe=de=!0}function Me(){var e=pe;pe=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=xe.slice(0),n=t.length;n;)t[--n]()}function Re(e){return new Ee(oe,!1,e)}function Ne(e,t){var n=ye;return function(){var r=Oe(),i=ye;try{return Xe(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{Xe(i,!1),r&&Pe()}}}h(Ee.prototype,{then:we,_then:function(e,t){Ce(this,new Te(null,null,e,t,ye))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?n:Re)(e)})):this.then(null,(function(e){return(e&&e.name===t?n:Re)(e)}))},finally:function(e){return this.then((function(t){return Ee.resolve(e()).then((function(){return t}))}),(function(t){return Ee.resolve(e()).then((function(){return Re(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new Ee((function(r,i){var a=setTimeout((function(){return i(new X.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,a))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),ge.env=Ye(),h(Ee,{all:function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,a){return Ee.resolve(i).then((function(n){e[a]=n,--r||t(e)}),n)}))}))},resolve:function(e){return e instanceof Ee?e:e&&"function"==typeof e.then?new Ee((function(t,n){e.then(t,n)})):new Ee(oe,!0,e)},reject:Re,race:function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){e.map((function(e){return Ee.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ye},set:function(e){return ye=e}},totalEchoes:{get:function(){return Ue}},newPSD:je,usePSD:Ke,scheduler:{get:function(){return he},set:function(e){he=e}},rejectionMapper:{get:function(){return me},set:function(e){me=e}},follow:function(e,t){return new Ee((function(n,r){return je((function(t,n){var r=ye;r.unhandleds=[],r.onunhandled=n,r.finalize=Q((function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},xe.push((function t(){e(),xe.splice(xe.indexOf(t),1)})),++_e,he((function(){0==--_e&&Me()}),[])}),r.finalize),e()}),t,n,r)}))}}),ue&&(ue.allSettled&&f(Ee,"allSettled",(function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Ee.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ue.any&&"undefined"!=typeof AggregateError&&f(Ee,"any",(function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,a){return Ee.resolve(e).then((function(e){return t(e)}),(function(e){i[a]=e,--r||n(new AggregateError(i))}))}))}))})));var De={awaits:0,echoes:0,id:0},Le=0,Fe=[],Be=0,Ue=0,He=0;function je(e,t,n,r){var i=ye,a=Object.create(i);return a.parent=i,a.ref=0,a.global=!1,a.id=++He,ge.env,a.env=ce?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},t&&s(a,t),++i.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ke(a,e,n,r),0===a.ref&&a.finalize(),r}function ze(){return De.id||(De.id=++Le),++De.awaits,De.echoes+=se,De.id}function Ve(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=De.awaits*se,!0)}function Ge(e){return De.echoes&&e&&e.constructor===ue?(ze(),e.then((function(e){return Ve(),e}),(function(e){return Ve(),Ze(e)}))):e}function We(){var e=Fe[Fe.length-1];Fe.pop(),Xe(e,!1)}function Xe(e,t){var n,r=ye;(t?!De.echoes||Be++&&e===ye:!Be||--Be&&e===ye)||queueMicrotask(t?function(e){++Ue,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),Fe.push(ye),Xe(e,!0)}.bind(null,e):We),e!==ye&&(ye=e,r===ge&&(ge.env=Ye()),ce&&(n=ge.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ye(){var e=i.Promise;return ce?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ke(e,t,n,r,i){var a=ye;try{return Xe(e,!0),t(n,r,i)}finally{Xe(a,!1)}}function qe(e,t,n,r){return"function"!=typeof e?e:function(){var i=ye;n&&ze(),Xe(t,!0);try{return e.apply(this,arguments)}finally{Xe(i,!1),r&&queueMicrotask(Ve)}}}function $e(e){Promise===ue&&0===De.echoes?0===Be?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+B).indexOf("[native code]")&&(ze=Ve=q);var Ze=Ee.reject,Qe=String.fromCharCode(65535),Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function at(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var ot={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=I(t))[e],t}}function lt(){throw X.Type()}function ut(e,t){try{var n=ct(e),r=ct(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}(ht(e),ht(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,a=0;a<i;++a){var o=ut(e[a],t[a]);if(0!==o)return o}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ct(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=P(e))?"binary":e}function ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var dt=(ft.prototype._trans=function(e,t,n){var r=this._tx||ye.trans,i=this.name,a=ie&&"undefined"!=typeof console&&console.createTask&&void 0;function o(e,n,r){if(!r.schema[i])throw new X.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var s=Oe();try{var l=r&&r.db._novip===this.db._novip?r===ye.trans?r._promise(e,o,n):je((function(){return r._promise(e,o,n)}),{trans:r,transless:ye.transless||ye}):function t(n,r,i,a){if(n.idbdb&&(n._state.openComplete||ye.letThrough||n._vip)){var o=n._createTransaction(r,i,n._dbSchema);try{o.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===G.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(n.close({disableAutoOpen:!1}),n.open().then((function(){return t(n,r,i,a)}))):Ze(e)}return o._promise(r,(function(e,t){return je((function(){return ye.trans=o,a(e,t,o)}))})).then((function(e){if("readwrite"===r)try{o.idbtrans.commit()}catch(e){}return"readonly"===r?e:o._completion.then((function(){return e}))}))}if(n._state.openComplete)return Ze(new X.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return Ze(new X.DatabaseClosed);n.open().catch(q)}return n._state.dbReadyPromise.then((function(){return t(n,r,i,a)}))}(this.db,e,[this.name],o);return a&&(l._consoleTask=a,l=l.catch((function(e){return Ze(e)}))),l}finally{s&&Pe()}},ft.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?Ze(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},ft.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(o(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=a(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((function(t){return e[t]})))}var i=this.schema.idxByName,s=this.db._deps.indexedDB;function l(e,t){return 0===s.cmp(e,t)}var u=t.reduce((function(t,n){var r=t[0],a=t[1],s=(t=i[n],e[n]);return[r||t,r||!t?at(a,t&&t.multi?function(e){return e=x(e,n),o(e)&&e.some((function(e){return l(s,e)}))}:function(e){return l(s,x(e,n))}):a]}),[null,null]);return r=u[0],u=u[1],r?this.where(r.name).equals(e[r.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")},ft.prototype.filter=function(e){return this.toCollection().and(e)},ft.prototype.count=function(e){return this.toCollection().count(e)},ft.prototype.offset=function(e){return this.toCollection().offset(e)},ft.prototype.limit=function(e){return this.toCollection().limit(e)},ft.prototype.each=function(e){return this.toCollection().each(e)},ft.prototype.toArray=function(e){return this.toCollection().toArray(e)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,o(e)?"[".concat(e.join("+"),"]"):e))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function a(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(a,n=t),Object.defineProperty(a.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),a.prototype.table=function(){return i},t=a);for(var o=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach((function(e){return o.add(e)}));function u(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!o.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},ft.prototype.defineClass=function(){return this.mapToClass((function(e){s(this,e)}))},ft.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=st(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[o]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{E(e,a,t)}catch(t){}return t}))},ft.prototype.update=function(e,t){return"object"!=typeof e||o(e)?this.where(":id").equals(e).modify(t):void 0===(e=x(e,this.schema.primKey.keyPath))?Ze(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ft.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,a=r.keyPath,o=e;return a&&i&&(o=st(a)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[o],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(a)try{E(e,a,t)}catch(t){}return t}))},ft.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},ft.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:ot})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},ft.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},ft.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:s,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new V("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},ft.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,a=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var o=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:s,wantResults:a}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return a?n:i;throw new V("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(o," operations failed"),e)}))}))},ft.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map((function(e){return e.key})),i=e.map((function(e){return e.changes})),a=[];return this._trans("readwrite",(function(o){return n.getMany({trans:o,keys:r,cache:"clone"}).then((function(s){var l=[],u=[];e.forEach((function(e,n){var r=e.key,i=e.changes,o=s[n];if(o){for(var c=0,h=Object.keys(i);c<h.length;c++){var d=h[c],f=i[d];if(d===t.schema.primKey.keyPath){if(0!==ut(f,r))throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else E(o,d,f)}a.push(n),l.push(r),u.push(o)}}));var c=l.length;return n.mutate({trans:o,type:"put",keys:l,values:u,updates:{keys:r,changeSpecs:i}}).then((function(e){var n=e.numFailures,r=e.failures;if(0===n)return c;for(var i=0,o=Object.keys(r);i<o.length;i++){var s,l=o[i],u=a[Number(l)];null!=u&&(s=r[l],delete r[l],r[u]=s)}throw new V("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)}))}))}))},ft.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new V("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)}))},ft);function ft(){}function pt(e){function t(t,r){if(r){for(var i=arguments.length,a=new Array(i-1);--i;)a[i-1]=arguments[i];return n[t].subscribe.apply(null,a),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(e,r,i){if("object"!=typeof e){var l;r=r||ne;var u={subscribers:[],fire:i=i||q,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=r(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter((function(t){return t!==e})),u.fire=u.subscribers.reduce(r,i)}};return n[e]=t[e]=u}a(l=e).forEach((function(e){var t=l[e];if(o(t))s(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new X.InvalidArgument("Invalid event config");var n=s(e,$,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){_((function(){e.apply(null,t)}))}))}))}}))}}function vt(e,t){return p(t).from({prototype:e}),t}function mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function gt(e,t){e.filter=at(e.filter,t)}function yt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return at(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function _t(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function xt(e,t,n,r){var i=e.replayFilter?at(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},o=function(e,n,r){var o,s;i&&!i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"===(s=""+(o=n.primaryKey))&&(s=""+new Uint8Array(o)),c(a,s)||(a[s]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(o,n),Et(_t(e,r,n),e.algorithm,o,!e.keysOnly&&e.valueMapper)])}return Et(_t(e,r,n),at(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Et(e,t,n,r){var i=Ne(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=q}),(function(t){e.fail(t),n=q}))||i(e.value,e,(function(e){return n=e})),n()}))}))}k=Symbol();var wt=(Tt.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(o(t))return r(r([],o(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch(e){return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(o(n))return o(e)?e.filter((function(e){return!n.includes(e)})).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch(e){return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Tt);function Tt(e){Object.assign(this,e)}var St=(kt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,Ze.bind(null,n.error)):n.table._trans("readonly",e).then(t)},kt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,Ze.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},kt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=at(t.algorithm,e)},kt.prototype._iterate=function(e,t){return xt(this._ctx,e,t,this._ctx.table.core)},kt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},kt.prototype.raw=function(){return this._ctx.valueMapper=null,this},kt.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return xt(t,e,n,t.table.core)}))},kt.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(mt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return xt(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},kt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var o="next"===this._ctx.dir?1:-1;function s(e,t){return(e=a(e,i))<(t=a(t,i))?-o:t<e?o:0}return this.toArray((function(e){return e.sort(s)})).then(t)},kt.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&mt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){return e=e.result,r?e.map(r):e}))}var a=[];return xt(n,(function(e){return a.push(e)}),e,n.table.core).then((function(){return a}))}),e)},kt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,mt(t)?yt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n((function(){e.advance(t),t=0})),!1)}})):yt(t,(function(){var t=e;return function(){return--t<0}}))),this},kt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),yt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this},kt.prototype.until=function(e,t){return gt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},kt.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},kt.prototype.last=function(e){return this.reverse().first(e)},kt.prototype.filter=function(e){var t;return gt(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=at(t.isMatch,e),this},kt.prototype.and=function(e){return this.filter(e)},kt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},kt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},kt.prototype.desc=function(){return this.reverse()},kt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},kt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},kt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},kt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},kt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&mt(t,!0)&&0<t.limit)return this._read((function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},kt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},kt.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},kt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},kt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return gt(this._ctx,(function(e){var n=e.primaryKey.toString();return e=c(t,n),t[n]=!0,!e})),this},kt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i,o,s;function l(e,t){var n=t.failures;t=t.numFailures,v+=e-t;for(var r=0,i=a(n);r<i.length;r++){var o=i[r];p.push(n[o])}}s="function"==typeof e?e:(i=a(e),o=i.length,function(t){for(var n=!1,r=0;r<o;++r){var a=i[r],s=e[a],l=x(t,a);s instanceof wt?(E(t,a,s.execute(l)),n=!0):l!==s&&(E(t,a,s),n=!0)}return n});var u=n.table.core,c=u.schema.primaryKey,h=c.outbound,d=c.extractKey,f=t.db._options.modifyChunkSize||200,p=[],v=0,m=[];return t.clone().primaryKeys().then((function(t){function i(n){var o=Math.min(f,t.length-n);return u.getMany({trans:r,keys:t.slice(n,n+o),cache:"immutable"}).then((function(c){for(var p=[],v=[],m=h?[]:null,g=[],y=0;y<o;++y){var b=c[y],_={value:I(b),primKey:t[n+y]};!1!==s.call(_,_.value,_)&&(null==_.value?g.push(t[n+y]):h||0===ut(d(b),d(_.value))?(v.push(_.value),h&&m.push(t[n+y])):(g.push(t[n+y]),p.push(_.value)))}return Promise.resolve(0<p.length&&u.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);l(p.length,e)}))).then((function(){return(0<v.length||a&&"object"==typeof e)&&u.mutate({trans:r,type:"put",keys:m,values:v,criteria:a,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<n}).then((function(e){return l(v.length,e)}))})).then((function(){return(0<g.length||a&&e===Ct)&&u.mutate({trans:r,type:"delete",keys:g,criteria:a,isAdditionalChunk:0<n}).then((function(e){return l(g.length,e)}))})).then((function(){return t.length>n+o&&i(n+f)}))}))}var a=mt(n)&&n.limit===1/0&&("function"!=typeof e||e===Ct)&&{index:n.index,range:n.range};return i(0).then((function(){if(0<p.length)throw new z("Error modifying one or more objects",p,v,m);return t.length}))}))}))},kt.prototype.delete=function(){var e=this._ctx,t=e.range;return mt(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-e);return t-e}))}))})):this.modify(Ct)},kt);function kt(){}var Ct=function(e,t){return t.value=null};function At(e,t){return e<t?-1:e===t?0:1}function It(e,t){return t<e?-1:e===t?0:1}function Ot(e,t,n){return(e=e instanceof Dt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Pt(e){return new e.Collection(e,(function(){return Nt("")})).limit(0)}function Mt(e,t,n,r){var i,a,o,s,l,u,c,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return Ot(e,et);function d(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},a="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},o="next"===e?At:It;var t=n.map((function(e){return{lower:a(e),upper:i(e)}})).sort((function(e,t){return o(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c="next"===(u=e)?"":r}d("next"),(e=new e.Collection(e,(function(){return Rt(s[0],l[h-1]+r)})))._ondirectionchange=function(e){d(e)};var f=0;return e._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var d=a(i);if(t(d,l,f))return!0;for(var p=null,v=f;v<h;++v){var m=function(e,t,n,r,i,a){for(var o=Math.min(e.length,r.length),s=-1,l=0;l<o;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=s?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return o<r.length&&"next"===a?e+n.substr(e.length):o<e.length&&"prev"===a?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}(i,d,s[v],l[v],o,u);null===m&&null===p?f=v+1:(null===p||0<o(p,m))&&(p=m)}return n(null!==p?function(){e.continue(p+c)}:r),!1})),e}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Nt(e){return{type:1,lower:e,upper:e}}var Dt=(Object.defineProperty(Lt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Pt(this):new this.Collection(this,(function(){return Rt(e,t,!n,!r)}))}catch(e){return Ot(this,Je)}},Lt.prototype.equals=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Nt(e)}))},Lt.prototype.above=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(e,void 0,!0)}))},Lt.prototype.aboveOrEqual=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(e,void 0,!1)}))},Lt.prototype.below=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(void 0,e,!1,!0)}))},Lt.prototype.belowOrEqual=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(void 0,e)}))},Lt.prototype.startsWith=function(e){return"string"!=typeof e?Ot(this,et):this.between(e,e+Qe,!0,!0)},Lt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Mt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Qe)},Lt.prototype.equalsIgnoreCase=function(e){return Mt(this,(function(e,t){return e===t[0]}),[e],"")},Lt.prototype.anyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Mt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},Lt.prototype.startsWithAnyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Mt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Qe)},Lt.prototype.anyOf=function(){var e=this,t=L.apply(D,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Ot(this,Je)}if(0===t.length)return Pt(this);var r=new this.Collection(this,(function(){return Rt(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,a){for(var o=e.key;0<n(o,t[i]);)if(++i===t.length)return r(a),!1;return 0===n(o,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},Lt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lt.prototype.noneOf=function(){var e=L.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ot(this,Je)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Lt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,a=this._descending,o=this._min,s=this._max;if(0===e.length)return Pt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Ot(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function d(e,t){return h(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var a=e[n];if(r(t[0],a[1])<0&&0<r(t[1],a[0])){a[0]=o(a[0],t[0]),a[1]=s(a[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(d)}catch(e){return Ot(this,Je)}var f=0,p=c?function(e){return 0<i(e,l[f][1])}:function(e){return 0<=i(e,l[f][1])},v=u?function(e){return 0<a(e,l[f][0])}:function(e){return 0<=a(e,l[f][0])},m=p;return(e=new this.Collection(this,(function(){return Rt(l[0][0],l[l.length-1][1],!u,!c)})))._ondirectionchange=function(e){h="next"===e?(m=p,i):(m=v,a),l.sort(d)},e._addAlgorithm((function(e,t,r){for(var a,o=e.key;m(o);)if(++f===l.length)return t(r),!1;return!p(a=o)&&!v(a)||(0===n._cmp(o,l[f][1])||0===n._cmp(o,l[f][0])||t((function(){h===i?e.continue(l[f][0]):e.continue(l[f][1])})),!1)})),e},Lt.prototype.startsWithAnyOf=function(){var e=L.apply(D,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Pt(this):this.inAnyRange(e.map((function(e){return[e,e+Qe]}))):Ot(this,"startsWithAnyOf() only works with strings")},Lt);function Lt(){}function Ft(e){return Ne((function(t){return Bt(t),e(t.target.error),!1}))}function Bt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ut="storagemutated",Ht="x-storagemutated-1",jt=pt(null,Ut),zt=(Vt.prototype._lock=function(){return b(!ye.global),++this._reculock,1!==this._reculock||ye.global||(ye.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(b(!ye.global),0==--this._reculock)for(ye.global||(ye.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ke(e[1],e[0])}catch(e){}}return this},Vt.prototype._locked=function(){return this._reculock&&ye.lockOwnerFor!==this},Vt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new X.DatabaseClosed(r);case"MissingAPIError":throw new X.MissingAPI(r.message,r);default:throw new X.OpenFailed(r)}if(!this.active)throw new X.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne((function(n){Bt(n),t._reject(e.error)})),e.onabort=Ne((function(n){Bt(n),t.active&&t._reject(new X.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ne((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&jt.storagemutated.fire(e.mutatedParts)})),this},Vt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return Ze(new X.ReadOnly("Transaction is readonly"));if(!this.active)return Ze(new X.TransactionInactive);if(this._locked())return new Ee((function(i,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,a)},ye])}));if(n)return je((function(){var e=new Ee((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ee((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(e){var t,n=this._root(),r=Ee.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new Ee((function(e,t){r.then((function(t){return n._waitingQueue.push(Ne(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Ne(t.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},Vt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new X.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Vt);function Vt(){}function Gt(e,t,n,r,i,a,o){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:a,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+Wt(t)}}function Wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Xt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce((function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e}),{}))};var r}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(e){return Yt=function(){return Qe},Qe}};function Kt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return x(e,t)}:function(t){return x(t,e)};var t}function qt(e){return[].slice.call(e)}var $t=0;function Zt(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Qt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,a=e.keys,o=e.values,s=e.range;return new Promise((function(e,l){e=Ne(e);var u=t.objectStore(n),c=null==u.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d,f=(a||o||{length:1}).length;if(a&&o&&a.length!==o.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++g,Bt(e)}var v=[],m=[],g=0;if("deleteRange"===i){if(4===s.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===s.type?v.push(d=u.clear()):v.push(d=u.delete(r(s)))}else{var y=(c=h?c?[o,a]:[o,null]:[a,null])[0],b=c[1];if(h)for(var _=0;_<f;++_)v.push(d=b&&void 0!==b[_]?u[i](y[_],b[_]):u[i](y[_])),d.onerror=p;else for(_=0;_<f;++_)v.push(d=u[i](y[_])),d.onerror=p}function x(t){t=t.target.result,v.forEach((function(e,t){return null!=e.error&&(m[t]=e.error)})),e({numFailures:g,failures:m,results:"delete"===i?a:v.map((function(e){return e.result})),lastResult:t})}d.onerror=function(e){p(e),x(e)},d.onsuccess=x}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Ne(e);for(var a,o=t.objectStore(n),s=r.length,l=new Array(s),u=0,c=0,h=function(t){t=t.target,l[t._pos]=t.result,++c===u&&e(l)},d=Ft(i),f=0;f<s;++f)null!=r[f]&&((a=o.get(r[f]))._pos=f,a.onsuccess=h,a.onerror=d,++u);0===u&&e(l)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Ne(e);var a=t.objectStore(n).get(r);a.onsuccess=function(t){return e(t.target.result)},a.onerror=Ft(i)}))},query:(t=c,function(e){return new Promise((function(i,a){i=Ne(i);var o,s,l,u=e.trans,c=e.values,h=e.limit,d=e.query,f=h===1/0?void 0:h,p=d.index;if(d=d.range,u=u.objectStore(n),p=p.isPrimaryKey?u:u.index(p.name),d=r(d),0===h)return i({result:[]});t?((f=c?p.getAll(d,f):p.getAllKeys(d,f)).onsuccess=function(e){return i({result:e.target.result})},f.onerror=Ft(a)):(o=0,s=!c&&"openKeyCursor"in p?p.openKeyCursor(d):p.openCursor(d),l=[],s.onsuccess=function(e){var t=s.result;return t?(l.push(c?t.value:t.primaryKey),++o===h?i({result:l}):void t.continue()):i({result:l})},s.onerror=Ft(a))}))}),openCursor:function(e){var t=e.trans,i=e.values,a=e.query,o=e.reverse,s=e.unique;return new Promise((function(e,l){e=Ne(e);var u=a.index,c=a.range,h=t.objectStore(n),d=(h=u.isPrimaryKey?h:h.index(u.name),u=o?s?"prevunique":"prev":s?"nextunique":"next",!i&&"openKeyCursor"in h?h.openKeyCursor(r(c),u):h.openCursor(r(c),u));d.onerror=Ft(l),d.onsuccess=Ne((function(n){var r,i,a,o,s=d.result;s?(s.___id=++$t,s.done=!1,r=s.continue.bind(s),i=(i=s.continuePrimaryKey)&&i.bind(s),a=s.advance.bind(s),o=function(){throw new Error("Cursor not stopped")},s.trans=t,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=Ne(l),s.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},s.start=function(e){function t(){if(d.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var n=new Promise((function(e,t){e=Ne(e),d.onerror=Ft(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=o,e(t)}}));return d.onsuccess=Ne((function(e){d.onsuccess=t,t()})),s.continue=r,s.continuePrimaryKey=i,s.advance=a,t(),n},e(s)):e(null)}),l)}))},count:function(e){var t=e.query,i=e.trans,a=t.index,o=t.range;return new Promise((function(e,t){var s=i.objectStore(n),l=a.isPrimaryKey?s:s.index(a.name);(l=(s=r(o))?l.count(s):l.count()).onsuccess=Ne((function(t){return e(t.target.result)})),l.onerror=Ft(t)}))}}}var a,s,l,u=(s=n,l=qt((a=e).objectStoreNames),{schema:{name:a.name,tables:l.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=o(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Kt(t)},indexes:qt(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:o(e),keyPath:e,unique:n,multiEntry:r,extractKey:Kt(e)},i[Zt(e)]=r})),getIndexByKeyPath:function(e){return i[Zt(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[Zt(t)]=n.primaryKey),n}))},hasGetAll:0<l.length&&"getAll"in s.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(n=u.schema,u.hasGetAll),h=(u=n.tables.map(i),{});return u.forEach((function(e){return h[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!h[e])throw new Error("Table '".concat(e,"' not found"));return h[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:n}}function Jt(e,n,r,i){var a=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Qt(n,a,i),e.dbcore.reduce((function(e,n){return n=n.create,t(t({},e),n(e))}),i))}}function en(e,t){var n=t.db;t=Jt(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function tn(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=function e(t,n){return v(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function nn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function rn(e,t){return e._cfg.version-t._cfg.version}function an(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Xt("$meta",fn("")[0],[]),e._storeNames.push("$meta"));var o=e._createTransaction("readwrite",e._storeNames,i);o.create(n),o._completion.catch(r);var s=o._reject.bind(o),l=ye.transless||ye;je((function(){return ye.trans=o,ye.transless=l,0!==t?(en(e,n),u=t,((r=o).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(e){return null!=e?e:u})):Ee.resolve(u)).then((function(t){return i=t,s=o,l=n,u=[],t=(r=e)._versions,c=r._dbSchema=hn(0,r.idbdb,l),0!==(t=t.filter((function(e){return e._cfg.version>=i}))).length?(t.forEach((function(e){u.push((function(){var t=c,n=e._cfg.dbschema;dn(r,t,l),dn(r,n,l),c=r._dbSchema=n;var o=sn(t,n);o.add.forEach((function(e){ln(l,e[0],e[1].primKey,e[1].indexes)})),o.change.forEach((function(e){if(e.recreate)throw new X.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach((function(e){return cn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),cn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>i){en(r,l),s._memoizedTables={};var h=w(n);o.del.forEach((function(e){h[e]=t[e]})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],a(h),h),s.schema=h;var d,f=F(u);return f&&ze(),o=Ee.follow((function(){var e;(d=u(s))&&f&&(e=Ve.bind(null,null),d.then(e,e))})),d&&"function"==typeof d.then?Ee.resolve(d):o.then((function(){return d}))}})),u.push((function(t){var n,i,a=e._cfg.dbschema;n=a,i=t,[].slice.call(i.db.objectStoreNames).forEach((function(e){return null==n[e]&&i.db.deleteObjectStore(e)})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),s.schema=r._dbSchema})),u.push((function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return u.length?Ee.resolve(u.shift()(s.idbtrans)).then(e):Ee.resolve()}().then((function(){un(c,l)}))):Ee.resolve();var r,i,s,l,u,c})).catch(s)):(a(i).forEach((function(e){ln(n,e,i[e].primKey,i[e].indexes)})),en(e,n),void Ee.follow((function(){return e.on.populate.fire(o)})).catch(s));var r,u}))}function on(e,t){un(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);dn(e,e._dbSchema,t);for(var r=0,i=sn(n,e._dbSchema).change;r<i.length;r++){var a=function(e){if(e.change.length||e.recreate)return{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(e){cn(n,e)}))}(i[r]);if("object"==typeof a)return a.value}}function sn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],a=t[n];if(i){var o={name:n,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||i.primKey.auto!==a.primKey.auto)o.recreate=!0,r.change.push(o);else{var s=i.idxByName,l=a.idxByName,u=void 0;for(u in s)l[u]||o.del.push(u);for(u in l){var c=s[u],h=l[u];c?c.src!==h.src&&o.change.push(h):o.add.push(h)}(0<o.del.length||0<o.add.length||0<o.change.length)&&r.change.push(o)}}else r.add.push([n,a])}return r}function ln(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return cn(i,e)})),i}function un(e,t){a(e).forEach((function(n){t.db.objectStoreNames.contains(n)||ln(t,n,e[n].primKey,e[n].indexes)}))}function cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return g(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=Gt(Wt(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),a=[],o=0;o<t.indexNames.length;++o){var s=(l=t.index(t.indexNames[o])).keyPath,l=Gt(l.name,s,!!l.unique,!!l.multiEntry,!1,s&&"string"!=typeof s,!1);a.push(l)}r[e]=Xt(e,i,a)})),r}function dn(e,t,n){for(var r=n.db.objectStoreNames,a=0;a<r.length;++a){var o=r[a],s=n.objectStore(o);e._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,h="string"==typeof c?c:"["+g(c).join("+")+"]";!t[o]||(c=t[o].idxByName[h])&&(c.name=u,delete t[o].idxByName[h],t[o].idxByName[u]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fn(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Gt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),o(r),0===t)}))}var pn=(vn.prototype._parseStoresSpec=function(e,t){a(e).forEach((function(n){if(null!==e[n]){var r=fn(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new X.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")})),t[n]=Xt(n,i,r)}}))},vn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach((function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)})),t._dbSchema=r,nn(t,[t._allTables,t,t.Transaction.prototype]),tn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],a(r),r),t._storeNames=a(r),this},vn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||q,e),this},vn);function vn(){}function mn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new tr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function gn(e){return e&&"function"==typeof e.databases}function yn(e){return je((function(){return ye.letThrough=!0,e()}))}function bn(e){return!("from"in e)}var _n=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&s(r,t),r}s(this,arguments.length?{d:1,from:t,to:1<arguments.length?n:t}:{d:0})};function xn(e,t,n){var r=ut(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return s(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ut(n,e.from)<0)return i?xn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Sn(e);if(0<ut(t,e.to))return r?xn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Sn(e);ut(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ut(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&En(e,i),r&&n&&En(e,r)}}function En(e,t){bn(t)||function e(t,n){var r=n.from,i=n.to,a=n.l;n=n.r,xn(t,r,i),a&&e(t,a),n&&e(t,n)}(e,t)}function wn(e,t){var n=Tn(t),r=n.next();if(r.done)return!1;for(var i=r.value,a=Tn(e),o=a.next(i.from),s=o.value;!r.done&&!o.done;){if(ut(s.from,i.to)<=0&&0<=ut(s.to,i.from))return!0;ut(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(o=a.next(i.from)).value}return!1}function Tn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ut(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ut(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),a=1<i?"r":i<-1?"l":"";a&&(n="r"==a?"l":"r",r=t({},e),i=e[a],e.from=i.from,e.to=i.to,e[a]=i[a],r[a]=i[n],(e[n]=r).d=kn(r)),e.d=kn(e)}function kn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cn(e,t){return a(t).forEach((function(n){e[n]?En(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)c(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||C.has(r.constructor)?r:e(r));return i}(t[n])})),e}function An(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&wn(t[n],e[n])}))}h(_n.prototype,((B={add:function(e){return En(this,e),this},addKey:function(e){return xn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return xn(t,e,e)})),this},hasKey:function(e){var t=Tn(this).next(e).value;return t&&ut(t.from,e)<=0&&0<=ut(t.to,e)}})[M]=function(){return Tn(this)},B));var In={},On={},Pn=!1;function Mn(e){Cn(On,e),Pn||(Pn=!0,setTimeout((function(){Pn=!1,Rn(On,!(On={}))}),0))}function Rn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(In);r<i.length;r++)Nn(o=i[r],e,n,t);else for(var a in e){var o,s=/^idb\:\/\/(.*)\/(.*)\//.exec(a);s&&(a=s[1],s=s[2],(o=In["idb://".concat(a,"/").concat(s)])&&Nn(o,e,n,t))}n.forEach((function(e){return e()}))}function Nn(e,t,n,r){for(var i=[],a=0,o=Object.entries(e.queries.query);a<o.length;a++){for(var s=o[a],l=s[0],u=[],c=0,h=s[1];c<h.length;c++){var d=h[c];An(t,d.obsSet)?d.subscribers.forEach((function(e){return n.add(e)})):r&&u.push(d)}r&&i.push([l,u])}if(r)for(var f=0,p=i;f<p.length;f++){var v=p[f];l=v[0],u=v[1],e.queries.query[l]=u}}function Dn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?Ze(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),o=!1;function s(){if(t.openCanceller!==r)throw new X.DatabaseClosed("db.open() was cancelled")}function l(){return new Ee((function(r,u){if(s(),!n)throw new X.MissingAPI;var c=e.name,f=t.autoSchema||!i?n.open(c):n.open(c,i);if(!f)throw new X.MissingAPI;f.onerror=Ft(u),f.onblocked=Ne(e._fireOnBlocked),f.onupgradeneeded=Ne((function(r){var i;h=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=Bt,h.abort(),f.result.close(),(i=n.deleteDatabase(c)).onsuccess=i.onerror=Ne((function(){u(new X.NoSuchDatabase("Database ".concat(c," doesnt exist")))}))):(h.onerror=Ft(u),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,d=r<1,e.idbdb=f.result,o&&on(e,h),an(e,r/10,h,u))}),u),f.onsuccess=Ne((function(){h=null;var n,s,u,p,v,m=e.idbdb=f.result,y=g(m.objectStoreNames);if(0<y.length)try{var b=m.transaction(1===(p=y).length?p[0]:p,"readonly");if(t.autoSchema)s=m,u=b,(n=e).verno=s.version/10,u=n._dbSchema=hn(0,s,u),n._storeNames=g(s.objectStoreNames,0),tn(n,[n._allTables],a(u),u);else if(dn(e,e._dbSchema,b),((v=sn(hn(0,(v=e).idbdb,b),v._dbSchema)).add.length||v.change.some((function(e){return e.add.length||e.change.length})))&&!o)return m.close(),i=m.version+1,o=!0,r(l());en(e,b)}catch(n){}tt.push(e),m.onversionchange=Ne((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),m.onclose=Ne((function(t){e.on("close").fire(t)})),d&&(v=e._deps,b=c,m=v.indexedDB,v=v.IDBKeyRange,gn(m)||b===nt||mn(m,v).put({name:b}).catch(q)),r()}),u)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,l();break;case"VersionError":if(0<i)return i=0,l()}return Ee.reject(e)}))}var u,c=t.dbReadyResolve,h=null,d=!1;return Ee.race([r,("undefined"==typeof navigator?Ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}u=setInterval(t,100),t()})).finally((function(){return clearInterval(u)})):Promise.resolve()).then(l)]).then((function(){return s(),t.onReadyBeingFired=[],Ee.resolve(yn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,q);return t.onReadyBeingFired=[],Ee.resolve(yn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{h&&h.abort()}catch(n){}return r===t.openCanceller&&e._close(),Ze(n)})).finally((function(){t.openComplete=!0,c()})).then((function(){var t;return d&&(t={},e.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new _n(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new _n(-1/0,[[[]]])})),jt(Ut).fire(t),Rn(t,!0)),e}))}function Ln(e){function t(t){return e.next(t)}var n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):o(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Fn(e,t,n){for(var r=o(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Bn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,a={},o=[];function s(e,n,r){var i=Zt(e),l=a[i]=a[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<n;return c=t(t({},r),{name:c?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:c,keyTail:n,keyLength:u,extractKey:Kt(e),unique:!c&&r.unique}),l.push(c),c.isPrimaryKey||o.push(c),1<u&&s(2===u?e[0]:e.slice(0,u-1),n+1,r),l.sort((function(e,t){return e.keyTail-t.keyTail})),c}n=s(i.primaryKey.keyPath,0,i.primaryKey),a[":id"]=[n];for(var l=0,u=i.indexes;l<u.length;l++){var c=u[l];s(c.keyPath,0,c)}function h(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Fn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Fn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:o,getIndexByKeyPath:function(e){return(e=a[Zt(e)])&&e[0]}}),count:function(e){return r.count(h(e))},query:function(e){return r.query(h(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,a=n.isVirtual,o=n.keyLength;return a?r.openCursor(h(t)).then((function(e){return e&&s(e)})):r.openCursor(t);function s(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Fn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,o).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Fn(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===o?e[0]:e.slice(0,o)}},value:{get:function(){return n.value}}})}}})}})}};function Un(e,t,n,r){return n=n||{},r=r||"",a(e).forEach((function(i){var a,o,s;c(t,i)?(a=e[i],o=t[i],"object"==typeof a&&"object"==typeof o&&a&&o?(s=P(a))!==P(o)?n[r+i]=t[i]:"Object"===s?Un(a,o,n,r+i+"."):a!==o&&(n[r+i]=t[i]):a!==o&&(n[r+i]=t[i])):n[r+i]=void 0})),a(t).forEach((function(i){c(e,i)||(n[r+i]=t[i])})),n}function Hn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var jn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ye.trans,s=o.table(n).hook,l=s.deleting,u=s.creating,h=s.updating;switch(e.type){case"add":if(u.fire===q)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"put":if(u.fire===q&&h.fire===q)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"delete":if(l.fire===q)break;return o._promise("readwrite",(function(){return d(e)}),!0);case"deleteRange":if(l.fire===q)break;return o._promise("readwrite",(function(){return function e(n,r,o){return i.query({trans:n,values:!1,query:{index:a,range:r},limit:o}).then((function(i){var a=i.result;return d({type:"delete",keys:a,trans:n}).then((function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):a.length<o?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:a[a.length-1],lowerOpen:!0}),o)}))}))}(e.trans,e.range,1e4)}),!0)}return i.mutate(e);function d(e){var n,o,s,d=ye.trans,f=e.keys||Hn(a,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,s=f,("add"===(o=e).type?Promise.resolve([]):n.getMany({trans:o.trans,keys:s,cache:"immutable"})).then((function(t){var n=f.map((function(n,r){var i,o,s,f=t[r],p={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(p,n,f,d):"add"===e.type||void 0===f?(i=u.fire.call(p,n,e.values[r],d),null==n&&null!=i&&(e.keys[r]=n=i,a.outbound||E(e.values[r],a.keyPath,n))):(i=Un(f,e.values[r]),(o=h.fire.call(p,i,n,f,d))&&(s=e.values[r],Object.keys(o).forEach((function(e){c(s,e)?s[e]=o[e]:E(s,e,o[e])})))),p}));return i.mutate(e).then((function(r){for(var i=r.failures,a=r.results,o=r.numFailures,s=(r=r.lastResult,0);s<f.length;++s){var l=(a||f)[s],u=n[s];null==l?u.onerror&&u.onerror(i[s]):u.onsuccess&&u.onsuccess("put"===e.type&&t[s]?e.values[s]:l)}return{failures:i,results:a,numFailures:o,lastResult:r}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function zn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,a=0;i<t.keys.length&&a<e.length;++i)0===ut(t.keys[i],e[a])&&(r.push(n?I(t.values[i]):t.values[i]),++a);return r.length===e.length?r:null}catch(e){return null}}var Vn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=zn(e.keys,e.trans._cache,"clone"===e.cache);return t?Ee.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?I(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Gn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Wn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Xn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new _n(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ye.subscr&&"readonly"!==n)throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ye.querier));return e.transaction(t,n,r)},table:function(i){var s=e.table(i),l=s.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,d=u.outbound,f=u.autoIncrement&&c.filter((function(e){return e.compound&&e.keyPath.includes(u.keyPath)})),p=t(t({},s),{mutate:function(e){function t(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),p[e]||(p[e]=new _n)}var a,c,h,d=e.trans,p=e.mutatedParts||(e.mutatedParts={}),v=t(""),m=t(":dels"),g=e.type,y="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[Hn(u,e).filter((function(e){return e})),e.values]:[],b=y[0],_=y[1];return y=e.trans._cache,o(b)?(v.addKeys(b),(y="delete"===g||b.length===_.length?zn(b,y):null)||m.addKeys(b),(y||_)&&(a=t,c=y,h=_,l.indexes.forEach((function(e){var t=a(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&o(n)?n.forEach((function(e){return t.addKey(e)})):t.addKey(n)}(c||h).forEach((function(e,t){var i=c&&n(c[t]);0!==ut(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))}))})))):b?(_={from:b.lower,to:b.upper},m.add(_),v.add(_)):(v.add(r),m.add(r),l.indexes.forEach((function(e){return t(e.name).add(r)}))),s.mutate(e).then((function(n){return!b||"add"!==e.type&&"put"!==e.type||(v.addKeys(n.results),f&&f.forEach((function(r){var i=e.values.map((function(e){return r.extractKey(e)})),a=r.keyPath.findIndex((function(e){return e===u.keyPath}));n.results.forEach((function(e){return i[a]=e})),t(r.name).addKeys(i)}))),d.mutatedParts=Cn(d.mutatedParts||{},p),n}))}}),v=(c=function(t){t=(n=t.query).index;var n=n.range;return[t,new _n(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[u,new _n(e.key)]},getMany:function(e){return[u,(new _n).addKeys(e.keys)]},count:c,query:c,openCursor:c});return a(v).forEach((function(e){p[e]=function(a){var o=!!(p=ye.subscr),l=Gn(ye,s)&&Wn(e,a)?a.obsSet={}:p;if(o){var u=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new _n)},c=u(""),f=u(":dels"),p=(o=(p=v[e](a))[0],p[1]);if(("query"===e&&o.isPrimaryKey&&!a.values?f:u(o.name||"")).add(p),!o.isPrimaryKey){if("count"!==e){var m="query"===e&&d&&a.values&&s.query(t(t({},a),{values:!1}));return s[e].apply(this,arguments).then((function(t){if("query"===e){if(d&&a.values)return m.then((function(e){return e=e.result,c.addKeys(e),t}));var n=a.values?t.result.map(h):t.result;(a.values?c:f).addKeys(n)}else if("openCursor"===e){var r=t,i=a.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return i&&c.addKey(r.primaryKey),r.value}}})}return t}))}f.add(r)}}return s[e].apply(this,arguments)}})),p}})}};function Yn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),o(n.keys)&&(n.keys=n.keys.filter((function(e,t){return!(t in r.failures)}))),"values"in n&&o(n.values)&&(n.values=n.values.filter((function(e,t){return!(t in r.failures)}))),n)}function Kn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ut(n,r.lower):0<=ut(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ut(e,t.upper)<0:ut(e,t.upper)<=0));var n,r}function qn(e,t,n,r,i,a){if(!n||0===n.length)return e;var s=t.query.index,l=s.multiEntry,u=t.query.range,c=r.schema.primaryKey.extractKey,h=s.extractKey,d=(s.lowLevelIndex||s).extractKey;return n=n.reduce((function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var a=new _n,s=n.values.length-1;0<=s;--s){var d,f=n.values[s],p=c(f);a.hasKey(p)||(d=h(f),(l&&o(d)?d.some((function(e){return Kn(e,u)})):Kn(d,u))&&(a.addKey(p),i.push(f)))}switch(n.type){case"add":r=e.concat(t.values?i:i.map((function(e){return c(e)})));break;case"put":var v=(new _n).addKeys(n.values.map((function(e){return c(e)})));r=e.filter((function(e){return!v.hasKey(t.values?c(e):e)})).concat(t.values?i:i.map((function(e){return c(e)})));break;case"delete":var m=(new _n).addKeys(n.keys);r=e.filter((function(e){return!m.hasKey(t.values?c(e):e)}));break;case"deleteRange":var g=n.range;r=e.filter((function(e){return!Kn(c(e),g)}))}return r}),e),n===e?e:(n.sort((function(e,t){return ut(d(e),d(t))||ut(c(e),c(t))})),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),a?Object.freeze(n):n)}function $n(e,t){return 0===ut(e.lower,t.lower)&&0===ut(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function Zn(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Qn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",(function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout((function(){0===r.subscribers.size&&N(i,r)}),3e3))}))}var Jn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var a,o,s=e.transaction(t,r,i);return"readwrite"===r&&(o=(a=new AbortController).signal,i=function(i){return function(){if(a.abort(),"readwrite"===r){for(var o=new Set,l=0,u=t;l<u.length;l++){var c=u[l],h=In["idb://".concat(n,"/").concat(c)];if(h){var d=e.table(c),f=h.optimisticOps.filter((function(e){return e.trans===s}));if(s._explicit&&i&&s.mutatedParts)for(var p=0,v=Object.values(h.queries.query);p<v.length;p++)for(var m=0,g=(_=v[p]).slice();m<g.length;m++)An((x=g[m]).obsSet,s.mutatedParts)&&(N(_,x),x.subscribers.forEach((function(e){return o.add(e)})));else if(0<f.length){h.optimisticOps=h.optimisticOps.filter((function(e){return e.trans!==s}));for(var y=0,b=Object.values(h.queries.query);y<b.length;y++)for(var _,x,E,w=0,T=(_=b[y]).slice();w<T.length;w++)null!=(x=T[w]).res&&s.mutatedParts&&(i&&!x.dirty?(E=Object.isFrozen(x.res),E=qn(x.res,x.req,f,d,x,E),x.dirty?(N(_,x),x.subscribers.forEach((function(e){return o.add(e)}))):E!==x.res&&(x.res=E,x.promise=Ee.resolve({result:E}))):(x.dirty&&N(_,x),x.subscribers.forEach((function(e){return o.add(e)}))))}}}o.forEach((function(e){return e()}))}}},s.addEventListener("abort",i(!1),{signal:o}),s.addEventListener("error",i(!1),{signal:o}),s.addEventListener("complete",i(!0),{signal:o})),s},table:function(r){var i=e.table(r),a=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var o=ye.trans;if(a.outbound||"disabled"===o.db._options.cache||o.explicit)return i.mutate(e);var s=In["idb://".concat(n,"/").concat(r)];return s?(o=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Hn(a,e).some((function(e){return null==e})))?(s.optimisticOps.push(e),e.mutatedParts&&Mn(e.mutatedParts),o.then((function(t){0<t.numFailures&&(N(s.optimisticOps,e),(t=Yn(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&Mn(e.mutatedParts))})),o.catch((function(){N(s.optimisticOps,e),e.mutatedParts&&Mn(e.mutatedParts)}))):o.then((function(n){var r=Yn(0,t(t({},e),{values:e.values.map((function(e,r){var i;return E(e=null!==(i=a.keyPath)&&void 0!==i&&i.includes(".")?I(e):t({},e),a.keyPath,n.results[r]),e}))}),n);s.optimisticOps.push(r),queueMicrotask((function(){return e.mutatedParts&&Mn(e.mutatedParts)}))})),o):i.mutate(e)},query:function(e){if(!Gn(ye,i)||!Wn("query",e))return i.query(e);var t="immutable"===(null===(s=ye.trans)||void 0===s?void 0:s.db._options.cache),a=(u=ye).requery,o=u.signal,s=function(e,t,n,r){var i=In["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var a=t[(r.query?r.query.index.name:null)||""];if(!a)return[null,!1,i,null];switch(n){case"query":var o=a.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&$n(e.req.query.range,r.query.range)}));return o?[o,!0,i,a]:[a.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&Zn(e.req.query.range,r.query.range)})),!1,i,a];case"count":return o=a.find((function(e){return $n(e.req.query.range,r.query.range)})),[o,!!o,i,a]}}(n,r,"query",e),l=s[0],u=s[1],c=s[2],h=s[3];return l&&u?l.obsSet=e.obsSet:(u=i.query(e).then((function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=I(n);return e})).catch((function(e){return h&&l&&N(h,l),Promise.reject(e)})),l={obsSet:e.obsSet,promise:u,subscribers:new Set,type:"query",req:e,dirty:!1},h?h.push(l):(h=[l],(c=c||(In["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=h)),Qn(l,h,a,o),l.promise.then((function(n){return{result:qn(n.result,e,null==c?void 0:c.optimisticOps,i,l,t)}}))}})}})}};function er(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var tr=(nr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},nr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ye.letThrough||this._vip)?e():new Ee((function(e,n){if(t._state.openComplete)return n(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new X.DatabaseClosed);t.open().catch(q)}t._state.dbReadyPromise.then(e,n)})).then(e)},nr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort((function(e,t){return e.level-t.level})),this},nr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},nr.prototype.open=function(){var e=this;return Ke(ge,(function(){return Dn(e)}))},nr.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ee((function(t){e.dbReadyResolve=t})),e.openCanceller=new Ee((function(t,n){e.cancelOpen=n})))},nr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new X.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new Ee((function(i,a){function o(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ne((function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,gn(r)||n===nt||mn(r,e).delete(n).catch(q),i()})),n.onerror=Ft(a),n.onblocked=t._fireOnBlocked}if(n)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(o):o()}))},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return null!==this.idbdb},nr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var e=this;return a(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,S(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},nr.prototype._transaction=function(e,t,n){var r=this,i=ye.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var a,o,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(o=t.map((function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===rt)a=rt;else{if("rw"!=e&&e!=it)throw new X.InvalidArgument("Invalid transaction mode: "+e);a=it}if(i){if(i.mode===rt&&a===it){if(!s)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&o.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,(function(e,t){t(n)})):Ze(n)}var l=function e(t,n,r,i,a){return Ee.resolve().then((function(){var o=ye.transless||ye,s=t._createTransaction(n,r,t._dbSchema,i);if(s.explicit=!0,o={trans:s,transless:o},i)s.idbtrans=i.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(o){return o.name===G.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,null,a)}))):Ze(o)}var l,u=F(a);return u&&ze(),o=Ee.follow((function(){var e;(l=a.call(s,s))&&(u?(e=Ve.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Ln(l)))}),o),(l&&"function"==typeof l.then?Ee.resolve(l).then((function(e){return s.active?e:Ze(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):o.then((function(){return l}))).then((function(e){return i&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),Ze(e)}))}))}.bind(null,this,a,o,i,n);return i?i._promise(a,l,"lock"):ye.trans?Ke(ye.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},nr.prototype.table=function(e){if(!c(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nr);function nr(e,n){var r=this;this._middlewares={},this.verno=0;var i=nr.dependencies;this._options=n=t({addons:nr.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var a,o,s,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:q,dbReadyPromise:null,cancelOpen:q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};c.dbReadyPromise=new Ee((function(e){c.dbReadyResolve=e})),c.openCanceller=new Ee((function(e,t){c.cancelOpen=t})),this._state=c,this.name=e,this.on=pt(this,"populate","blocked","versionchange","close",{ready:[re,q]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(function(e){return function(t,n){nr.vip((function(){var i,a=r._state;a.openComplete?(a.dbOpenError||Ee.resolve().then(t),n&&e(t)):a.onReadyBeingFired?(a.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e((function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)})))}))}})),this.Collection=(a=this,vt(St.prototype,(function(e,t){this.db=a;var n=ot,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==$?e:null}}))),this.Table=(o=this,vt(dt.prototype,(function(e,t,n){this.db=o,this._tx=n,this.name=e,this.schema=t,this.hook=o._allTables[e]?o._allTables[e].hook:pt(null,{creating:[J,q],reading:[Z,$],updating:[te,q],deleting:[ee,q]})}))),this.Transaction=(s=this,vt(zt.prototype,(function(e,t,n,r,i){var a=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee((function(e,t){a._resolve=e,a._reject=t})),this._completion.then((function(){a.active=!1,a.on.complete.fire()}),(function(e){var t=a.active;return a.active=!1,a.on.error.fire(e),a.parent?a.parent._reject(e):t&&a.idbtrans&&a.idbtrans.abort(),Ze(e)}))}))),this.Version=(l=this,vt(pn.prototype,(function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(u=this,vt(Dt.prototype,(function(e,t,n){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ut,this._descending=function(e,t){return ut(t,e)},this._max=function(e,t){return 0<ut(e,t)?e:t},this._min=function(e,t){return ut(e,t)<0?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI}))),this.on("versionchange",(function(e){e.newVersion,r.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||(e.newVersion,e.oldVersion)})),this._maxKey=Yt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Vn),this.use(Jn),this.use(Xn),this.use(Bn),this.use(jn);var h=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return er(r.table(e),h)};var i=Reflect.get(e,t,n);return i instanceof dt?er(i,h):"tables"===t?i.map((function(e){return er(e,h)})):"_createTransaction"===t?function(){return er(i.apply(this,arguments),h)}:i}});this.vip=h,i.forEach((function(e){return e(r)}))}B="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rr,ir=(ar.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},ar.prototype[B]=function(){return this},ar);function ar(e){this._subscribe=e}try{rr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(k){rr={indexedDB:null,IDBKeyRange:null}}function or(e){var t,n=!1,r=new ir((function(r){var i,a=F(e),o=!1,s={},l={},u={get closed(){return o},unsubscribe:function(){o||(o=!0,i&&i.abort(),h&&jt.storagemutated.unsubscribe(f))}};r.start&&r.start(u);var h=!1,d=function(){return $e(p)},f=function(e){Cn(s,e),An(l,s)&&d()},p=function(){var u,p,v;!o&&rr.indexedDB&&(s={},u={},i&&i.abort(),i=new AbortController,v=function(t){var n=Oe();try{a&&ze();var r=je(e,t);return r=a?r.finally(Ve):r}finally{n&&Pe()}}(p={subscr:u,signal:i.signal,requery:d,querier:e,trans:null}),Promise.resolve(v).then((function(e){n=!0,t=e,o||p.signal.aborted||(s={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||h||(jt(Ut,f),h=!0),$e((function(){return!o&&r.next&&r.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||o||$e((function(){o||r.error&&r.error(e)}))})))};return setTimeout(d,0),u}));return r.hasValue=function(){return n},r.getValue=function(){return t},r}var sr=tr;function lr(e){var t=cr;try{cr=!0,jt.storagemutated.fire(e),Rn(e,!0)}finally{cr=t}}h(sr,t(t({},K),{delete:function(e){return new sr(e,{addons:[]}).delete()},exists:function(e){return new sr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return n=(t=sr.dependencies).indexedDB,t=t.IDBKeyRange,(gn(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==nt}))})):mn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return Ze(new X.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return ye.trans?Ke(ye.transless,e):e()},vip:yn,async:function(e){return function(){try{var t=Ln(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ee.resolve(t)}catch(t){return Ze(t)}}},spawn:function(e,t,n){try{var r=Ln(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ee.resolve(r)}catch(e){return Ze(e)}},currentTransaction:{get:function(){return ye.trans||null}},waitFor:function(e,t){return t=Ee.resolve("function"==typeof e?sr.ignoreTransaction(e):e).timeout(t||6e4),ye.trans?ye.trans.waitFor(t):t},Promise:Ee,debug:{get:function(){return ie},set:function(e){ae(e)}},derive:p,extend:s,props:h,override:y,Events:pt,on:jt,liveQuery:or,extendObservabilitySet:Cn,getByKeyPath:x,setByKeyPath:E,delByKeyPath:function(e,t){"string"==typeof t?E(e,t,void 0):"length"in t&&[].map.call(t,(function(t){E(e,t,void 0)}))},shallowClone:w,deepClone:I,getObjectDiff:Un,cmp:ut,asap:_,minKey:-1/0,addons:[],connections:tt,errnames:G,dependencies:rr,cache:In,semVer:"4.0.8",version:"4.0.8".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),sr.maxKey=Yt(sr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(jt(Ut,(function(e){cr||(e=new CustomEvent(Ht,{detail:e}),cr=!0,dispatchEvent(e),cr=!1)})),addEventListener(Ht,(function(e){e=e.detail,cr||lr(e)})));var ur,cr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(ur=new BroadcastChannel(Ht)).onmessage=function(e){return e.data&&lr(e.data)}})(),"function"==typeof ur.unref&&ur.unref(),jt(Ut,(function(e){cr||ur.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!tr.disableBfCache&&e.persisted){null!=ur&&ur.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!tr.disableBfCache&&e.persisted&&(hr(),lr({all:new _n(-1/0,[[]])}))}))),Ee.rejectionMapper=function(e,t){return!e||e instanceof H||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Y[e.name]?e:(t=new Y[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},ae(ie),t(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:or,Entity:lt,cmp:ut,PropModSymbol:k,PropModification:wt,replacePrefix:function(e,t){return new wt({replacePrefix:[e,t]})},add:function(e){return new wt({add:e})},remove:function(e){return new wt({remove:e})},default:tr,RangeSet:_n,mergeRanges:En,rangesOverlap:wn}),{default:tr}),tr}()},6583:function(e){"use strict";function t(e,t,r){r=r||2;var a,o,s,l,h,d,p,v=t&&t.length,m=v?t[0]*r:e.length,g=n(e,0,m,r,!0),y=[];if(!g||g.next===g.prev)return y;if(v&&(g=function(e,t,r,i){var a,o,s,l=[];for(a=0,o=t.length;a<o;a++)(s=n(e,t[a]*i,a<o-1?t[a+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),l.push(f(s));for(l.sort(u),a=0;a<l.length;a++)r=c(l[a],r);return r}(e,t,g,r)),e.length>80*r){a=s=e[0],o=l=e[1];for(var b=r;b<m;b+=r)(h=e[b])<a&&(a=h),(d=e[b+1])<o&&(o=d),h>s&&(s=h),d>l&&(l=d);p=0!==(p=Math.max(s-a,l-o))?32767/p:0}return i(g,y,r,a,o,p,0),y}function n(e,t,n,r,i){var a,o;if(i===k(e,t,n,r)>0)for(a=t;a<n;a+=r)o=w(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=w(a,e[a],e[a+1],o);return o&&g(o,o.next)&&(T(o),o=o.next),o}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,u,c,h,f){if(e){!f&&h&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1)}(i)}(e,u,c,h);for(var p,v,m=e;e.prev!==e.next;)if(p=e.prev,v=e.next,h?o(e,u,c,h):a(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(v.i/n|0),T(e),e=v.next,m=v.next;else if((e=v)===m){f?1===f?i(e=s(r(e),t,n),t,n,u,c,h,2):2===f&&l(e,t,n,u,c,h):i(r(e),t,n,u,c,h,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=t.x,a=n.x,o=r.x,s=t.y,l=n.y,u=r.y,c=i<a?i<o?i:o:a<o?a:o,h=s<l?s<u?s:u:l<u?l:u,d=i>a?i>o?i:o:a>o?a:o,f=s>l?s>u?s:u:l>u?l:u,v=r.next;v!==t;){if(v.x>=c&&v.x<=d&&v.y>=h&&v.y<=f&&p(i,s,a,l,o,u,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function o(e,t,n,r){var i=e.prev,a=e,o=e.next;if(m(i,a,o)>=0)return!1;for(var s=i.x,l=a.x,u=o.x,c=i.y,h=a.y,f=o.y,v=s<l?s<u?s:u:l<u?l:u,g=c<h?c<f?c:f:h<f?h:f,y=s>l?s>u?s:u:l>u?l:u,b=c>h?c>f?c:f:h>f?h:f,_=d(v,g,t,n,r),x=d(y,b,t,n,r),E=e.prevZ,w=e.nextZ;E&&E.z>=_&&w&&w.z<=x;){if(E.x>=v&&E.x<=y&&E.y>=g&&E.y<=b&&E!==i&&E!==o&&p(s,c,l,h,u,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,w.x>=v&&w.x<=y&&w.y>=g&&w.y<=b&&w!==i&&w!==o&&p(s,c,l,h,u,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;E&&E.z>=_;){if(E.x>=v&&E.x<=y&&E.y>=g&&E.y<=b&&E!==i&&E!==o&&p(s,c,l,h,u,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=x;){if(w.x>=v&&w.x<=y&&w.y>=g&&w.y<=b&&w!==i&&w!==o&&p(s,c,l,h,u,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function s(e,t,n){var i=e;do{var a=i.prev,o=i.next.next;!g(a,o)&&y(a,i,i.next,o)&&x(a,o)&&x(o,a)&&(t.push(a.i/n|0),t.push(i.i/n|0),t.push(o.i/n|0),T(i),T(i.next),i=e=o),i=i.next}while(i!==e);return r(i)}function l(e,t,n,a,o,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=E(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,t,n,a,o,s,0),void i(c,t,n,a,o,s,0)}u=u.next}l=l.next}while(l!==e)}function u(e,t){return e.x-t.x}function c(e,t){var n=function(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o&&(o=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&p(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&(l=Math.abs(a-r.y)/(i-r.x),x(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var i=E(n,e);return r(i,i.next),r(n,n.next)}function h(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,a,o,s){return(i-o)*(t-s)>=(e-o)*(a-s)&&(e-o)*(r-s)>=(n-o)*(t-s)&&(n-o)*(a-s)>=(i-o)*(r-s)}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){var i=_(m(e,t,n)),a=_(m(e,t,r)),o=_(m(n,r,e)),s=_(m(n,r,t));return i!==a&&o!==s||(!(0!==i||!b(e,n,t))||(!(0!==a||!b(e,r,t))||(!(0!==o||!b(n,e,r))||!(0!==s||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function x(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function E(e,t){var n=new S(e.i,e.x,e.y),r=new S(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function w(e,t,n,r){var i=new S(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(k(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(k(e,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},548:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,r,a,o){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,a||e,o),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function o(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,a=r.length,o=new Array(a);i<a;i++)o[i]=r[i].fn;return o},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,a,o){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,a),!0;case 6:return c.fn.call(c.context,t,r,i,a,o),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var a=n?n+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||o(this,a);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[a]=1===u.length?u[0]:u:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&o(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},1725:function(e,t,n){var r=n(781)(n(7289),"DataView");e.exports=r},9748:function(e,t,n){var r=n(6545),i=n(9843),a=n(6266),o=n(7364),s=n(4156);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},5745:function(e,t,n){var r=n(329),i=n(9666),a=n(2523),o=n(4397),s=n(3316);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},8579:function(e,t,n){var r=n(781)(n(7289),"Map");e.exports=r},3109:function(e,t,n){var r=n(9e3),i=n(7240),a=n(3414),o=n(7140),s=n(5429);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=a,l.prototype.has=o,l.prototype.set=s,e.exports=l},9946:function(e,t,n){var r=n(781)(n(7289),"Promise");e.exports=r},4199:function(e,t,n){var r=n(781)(n(7289),"Set");e.exports=r},4526:function(e,t,n){var r=n(3109),i=n(5845),a=n(5544);function o(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}o.prototype.add=o.prototype.push=i,o.prototype.has=a,e.exports=o},7016:function(e,t,n){var r=n(5745),i=n(3653),a=n(3359),o=n(2571),s=n(1698),l=n(5883);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=a,u.prototype.get=o,u.prototype.has=s,u.prototype.set=l,e.exports=u},8624:function(e,t,n){var r=n(7289).Symbol;e.exports=r},6759:function(e,t,n){var r=n(7289).Uint8Array;e.exports=r},3289:function(e,t,n){var r=n(781)(n(7289),"WeakMap");e.exports=r},4235:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},4951:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}},3200:function(e,t,n){var r=n(4499),i=n(2794),a=n(5585),o=n(667),s=n(674),l=n(3153),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),c=!n&&i(e),h=!n&&!c&&o(e),d=!n&&!c&&!h&&l(e),f=n||c||h||d,p=f?r(e.length,String):[],v=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},5434:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},5349:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},9330:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7347:function(e,t,n){var r=n(6351),i=n(3666),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var o=e[t];a.call(e,t)&&i(o,n)&&(void 0!==n||t in e)||r(e,t,n)}},9194:function(e,t,n){var r=n(3666);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},3035:function(e,t,n){var r=n(7538),i=n(6385);e.exports=function(e,t){return e&&r(t,i(t),e)}},6045:function(e,t,n){var r=n(7538),i=n(7086);e.exports=function(e,t){return e&&r(t,i(t),e)}},6351:function(e,t,n){var r=n(1438);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},6476:function(e,t,n){var r=n(7016),i=n(4235),a=n(7347),o=n(3035),s=n(6045),l=n(8087),u=n(2594),c=n(2497),h=n(4742),d=n(7253),f=n(5508),p=n(8466),v=n(7633),m=n(7355),g=n(6484),y=n(5585),b=n(667),_=n(5874),x=n(1845),E=n(1859),w=n(6385),T=n(7086),S="[object Arguments]",k="[object Function]",C="[object Object]",A={};A[S]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[C]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[k]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,I,O,P,M){var R,N=1&n,D=2&n,L=4&n;if(I&&(R=P?I(t,O,P,M):I(t)),void 0!==R)return R;if(!x(t))return t;var F=y(t);if(F){if(R=v(t),!N)return u(t,R)}else{var B=p(t),U=B==k||"[object GeneratorFunction]"==B;if(b(t))return l(t,N);if(B==C||B==S||U&&!P){if(R=D||U?{}:g(t),!N)return D?h(t,s(R,t)):c(t,o(R,t))}else{if(!A[B])return P?t:{};R=m(t,B,N)}}M||(M=new r);var H=M.get(t);if(H)return H;M.set(t,R),E(t)?t.forEach((function(r){R.add(e(r,n,I,r,t,M))})):_(t)&&t.forEach((function(r,i){R.set(i,e(r,n,I,i,t,M))}));var j=F?void 0:(L?D?f:d:D?T:w)(t);return i(j||t,(function(r,i){j&&(r=t[i=r]),a(R,i,e(r,n,I,i,t,M))})),R}},8303:function(e,t,n){var r=n(1845),i=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},2785:function(e,t,n){var r=n(5705),i=n(6428)(r);e.exports=i},5461:function(e,t,n){var r=n(2550)();e.exports=r},5705:function(e,t,n){var r=n(5461),i=n(6385);e.exports=function(e,t){return e&&r(e,t,i)}},207:function(e,t,n){var r=n(4534),i=n(925);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[i(t[n++])];return n&&n==a?e:void 0}},2606:function(e,t,n){var r=n(5349),i=n(5585);e.exports=function(e,t,n){var a=t(e);return i(e)?a:r(a,n(e))}},8665:function(e,t,n){var r=n(8624),i=n(3596),a=n(8186),o=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":o&&o in Object(e)?i(e):a(e)}},1966:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},1276:function(e,t,n){var r=n(8665),i=n(9752);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},7081:function(e,t,n){var r=n(9110),i=n(9752);e.exports=function e(t,n,a,o,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,a,o,e,s))}},9110:function(e,t,n){var r=n(7016),i=n(4132),a=n(9820),o=n(6353),s=n(8466),l=n(5585),u=n(667),c=n(3153),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var y=l(e),b=l(t),_=y?d:s(e),x=b?d:s(t),E=(_=_==h?f:_)==f,w=(x=x==h?f:x)==f,T=_==x;if(T&&u(e)){if(!u(t))return!1;y=!0,E=!1}if(T&&!E)return g||(g=new r),y||c(e)?i(e,t,n,v,m,g):a(e,t,_,n,v,m,g);if(!(1&n)){var S=E&&p.call(e,"__wrapped__"),k=w&&p.call(t,"__wrapped__");if(S||k){var C=S?e.value():e,A=k?t.value():t;return g||(g=new r),m(C,A,n,v,g)}}return!!T&&(g||(g=new r),o(e,t,n,v,m,g))}},7094:function(e,t,n){var r=n(8466),i=n(9752);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},9280:function(e,t,n){var r=n(7016),i=n(7081);e.exports=function(e,t,n,a){var o=n.length,s=o,l=!a;if(null==e)return!s;for(e=Object(e);o--;){var u=n[o];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<s;){var c=(u=n[o])[0],h=e[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in e))return!1}else{var f=new r;if(a)var p=a(h,d,c,e,t,f);if(!(void 0===p?i(d,h,3,a,f):p))return!1}}return!0}},3186:function(e,t,n){var r=n(375),i=n(5401),a=n(1845),o=n(2043),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!a(e)||i(e))&&(r(e)?d:s).test(o(e))}},8711:function(e,t,n){var r=n(8466),i=n(9752);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},7499:function(e,t,n){var r=n(8665),i=n(4276),a=n(9752),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1,e.exports=function(e){return a(e)&&i(e.length)&&!!o[r(e)]}},1186:function(e,t,n){var r=n(5662),i=n(8768),a=n(9908),o=n(5585),s=n(4445);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?o(e)?i(e[0],e[1]):r(e):s(e)}},3409:function(e,t,n){var r=n(6132),i=n(8723),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))a.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9130:function(e,t,n){var r=n(1845),i=n(6132),a=n(3481),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&o.call(e,s))&&n.push(s);return n}},1839:function(e,t,n){var r=n(2785),i=n(2114);e.exports=function(e,t){var n=-1,a=i(e)?Array(e.length):[];return r(e,(function(e,r,i){a[++n]=t(e,r,i)})),a}},5662:function(e,t,n){var r=n(9280),i=n(5113),a=n(2093);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},8768:function(e,t,n){var r=n(7081),i=n(9706),a=n(9775),o=n(8939),s=n(9253),l=n(2093),u=n(925);e.exports=function(e,t){return o(e)&&s(t)?l(u(e),t):function(n){var o=i(n,e);return void 0===o&&o===t?a(n,e):r(t,o,3)}}},1125:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},171:function(e,t,n){var r=n(207);e.exports=function(e){return function(t){return r(t,e)}}},4499:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1612:function(e,t,n){var r=n(8624),i=n(5434),a=n(5585),o=n(2060),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(a(t))return i(t,e)+"";if(o(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},6902:function(e){e.exports=function(e){return function(t){return e(t)}}},8905:function(e){e.exports=function(e,t){return e.has(t)}},7169:function(e,t,n){var r=n(9908);e.exports=function(e){return"function"==typeof e?e:r}},4534:function(e,t,n){var r=n(5585),i=n(8939),a=n(3002),o=n(1822);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:a(o(e))}},2604:function(e,t,n){var r=n(6759);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},8087:function(e,t,n){e=n.nmd(e);var r=n(7289),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i?r.Buffer:void 0,s=o?o.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},1893:function(e,t,n){var r=n(2604);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3360:function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},7981:function(e,t,n){var r=n(8624),i=r?r.prototype:void 0,a=i?i.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},5888:function(e,t,n){var r=n(2604);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},2594:function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},7538:function(e,t,n){var r=n(7347),i=n(6351);e.exports=function(e,t,n,a){var o=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=a?a(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),o?i(n,u,c):r(n,u,c)}return n}},2497:function(e,t,n){var r=n(7538),i=n(6504);e.exports=function(e,t){return r(e,i(e),t)}},4742:function(e,t,n){var r=n(7538),i=n(2757);e.exports=function(e,t){return r(e,i(e),t)}},7683:function(e,t,n){var r=n(7289)["__core-js_shared__"];e.exports=r},6428:function(e,t,n){var r=n(2114);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var a=n.length,o=t?a:-1,s=Object(n);(t?o--:++o<a)&&!1!==i(s[o],o,s););return n}}},2550:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}},1438:function(e,t,n){var r=n(781),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},4132:function(e,t,n){var r=n(4526),i=n(9330),a=n(8905);e.exports=function(e,t,n,o,s,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,v=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var g=e[p],y=t[p];if(o)var b=u?o(y,g,p,t,e,l):o(g,y,p,e,t,l);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!i(t,(function(e,t){if(!a(m,t)&&(g===e||s(g,e,n,o,l)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!s(g,y,n,o,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},9820:function(e,t,n){var r=n(8624),i=n(6759),a=n(3666),o=n(4132),s=n(258),l=n(3671),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var m=o(f(e),f(t),r,u,h,d);return d.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6353:function(e,t,n){var r=n(7253),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,o,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=l;++h<c;){var g=e[d=u[h]],y=t[d];if(a)var b=l?a(y,g,d,t,e,s):a(g,y,d,e,t,s);if(!(void 0===b?g===y||o(g,y,n,a,s):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return s.delete(e),s.delete(t),v}},2692:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7253:function(e,t,n){var r=n(2606),i=n(6504),a=n(6385);e.exports=function(e){return r(e,a,i)}},5508:function(e,t,n){var r=n(2606),i=n(2757),a=n(7086);e.exports=function(e){return r(e,a,i)}},6911:function(e,t,n){var r=n(1591);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},5113:function(e,t,n){var r=n(9253),i=n(6385);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var a=t[n],o=e[a];t[n]=[a,o,r(o)]}return t}},781:function(e,t,n){var r=n(3186),i=n(760);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},6116:function(e,t,n){var r=n(9698)(Object.getPrototypeOf,Object);e.exports=r},3596:function(e,t,n){var r=n(8624),i=Object.prototype,a=i.hasOwnProperty,o=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=a.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=o.call(e);return r&&(t?e[s]=n:delete e[s]),i}},6504:function(e,t,n){var r=n(4951),i=n(2554),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols,s=o?function(e){return null==e?[]:(e=Object(e),r(o(e),(function(t){return a.call(e,t)})))}:i;e.exports=s},2757:function(e,t,n){var r=n(5349),i=n(6116),a=n(6504),o=n(2554),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=i(e);return t}:o;e.exports=s},8466:function(e,t,n){var r=n(1725),i=n(8579),a=n(9946),o=n(4199),s=n(3289),l=n(8665),u=n(2043),c="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",v=u(r),m=u(i),g=u(a),y=u(o),b=u(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=c||a&&_(a.resolve())!=h||o&&_(new o)!=d||s&&_(new s)!=f)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return p;case m:return c;case g:return h;case y:return d;case b:return f}return t}),e.exports=_},760:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},1898:function(e,t,n){var r=n(4534),i=n(2794),a=n(5585),o=n(674),s=n(4276),l=n(925);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,h=!1;++u<c;){var d=l(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=c?h:!!(c=null==e?0:e.length)&&s(c)&&o(d,c)&&(a(e)||i(e))}},6545:function(e,t,n){var r=n(1353);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9843:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6266:function(e,t,n){var r=n(1353),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},7364:function(e,t,n){var r=n(1353),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},4156:function(e,t,n){var r=n(1353);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7633:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},7355:function(e,t,n){var r=n(2604),i=n(1893),a=n(3360),o=n(7981),s=n(5888);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return a(e);case"[object Symbol]":return o(e)}}},6484:function(e,t,n){var r=n(8303),i=n(6116),a=n(6132);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(i(e))}},674:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},8939:function(e,t,n){var r=n(5585),i=n(2060),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,o=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(o.test(e)||!a.test(e)||null!=t&&e in Object(t))}},1591:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5401:function(e,t,n){var r=n(7683),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6132:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9253:function(e,t,n){var r=n(1845);e.exports=function(e){return e===e&&!r(e)}},329:function(e){e.exports=function(){this.__data__=[],this.size=0}},9666:function(e,t,n){var r=n(9194),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},2523:function(e,t,n){var r=n(9194);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4397:function(e,t,n){var r=n(9194);e.exports=function(e){return r(this.__data__,e)>-1}},3316:function(e,t,n){var r=n(9194);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},9e3:function(e,t,n){var r=n(9748),i=n(5745),a=n(8579);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(a||i),string:new r}}},7240:function(e,t,n){var r=n(6911);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},3414:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).get(e)}},7140:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).has(e)}},5429:function(e,t,n){var r=n(6911);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},258:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},2093:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},3679:function(e,t,n){var r=n(2736);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},1353:function(e,t,n){var r=n(781)(Object,"create");e.exports=r},8723:function(e,t,n){var r=n(9698)(Object.keys,Object);e.exports=r},3481:function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},7785:function(e,t,n){e=n.nmd(e);var r=n(2692),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,o=a&&a.exports===i&&r.process,s=function(){try{var e=a&&a.require&&a.require("util").types;return e||o&&o.binding&&o.binding("util")}catch(t){}}();e.exports=s},8186:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9698:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7289:function(e,t,n){var r=n(2692),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},5845:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5544:function(e){e.exports=function(e){return this.__data__.has(e)}},3671:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3653:function(e,t,n){var r=n(5745);e.exports=function(){this.__data__=new r,this.size=0}},3359:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2571:function(e){e.exports=function(e){return this.__data__.get(e)}},1698:function(e){e.exports=function(e){return this.__data__.has(e)}},5883:function(e,t,n){var r=n(5745),i=n(8579),a=n(3109);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var o=n.__data__;if(!i||o.length<199)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(o)}return n.set(e,t),this.size=n.size,this}},3002:function(e,t,n){var r=n(3679),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,o=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(a,"$1"):n||e)})),t}));e.exports=o},925:function(e,t,n){var r=n(2060);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},2043:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},8504:function(e,t,n){var r=n(6476);e.exports=function(e){return r(e,5)}},3666:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},7827:function(e,t,n){var r=n(5705),i=n(7169);e.exports=function(e,t){return e&&r(e,i(t))}},9706:function(e,t,n){var r=n(207);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},9775:function(e,t,n){var r=n(1966),i=n(1898);e.exports=function(e,t){return null!=e&&i(e,t,r)}},9908:function(e){e.exports=function(e){return e}},2794:function(e,t,n){var r=n(1276),i=n(9752),a=Object.prototype,o=a.hasOwnProperty,s=a.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&o.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},5585:function(e){var t=Array.isArray;e.exports=t},2114:function(e,t,n){var r=n(375),i=n(4276);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},667:function(e,t,n){e=n.nmd(e);var r=n(7289),i=n(5535),a=t&&!t.nodeType&&t,o=a&&e&&!e.nodeType&&e,s=o&&o.exports===a?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},375:function(e,t,n){var r=n(8665),i=n(1845);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4276:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5874:function(e,t,n){var r=n(7094),i=n(6902),a=n(7785),o=a&&a.isMap,s=o?i(o):r;e.exports=s},1845:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9752:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},634:function(e,t,n){var r=n(8665),i=n(6116),a=n(9752),o=Function.prototype,s=Object.prototype,l=o.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},1859:function(e,t,n){var r=n(8711),i=n(6902),a=n(7785),o=a&&a.isSet,s=o?i(o):r;e.exports=s},5406:function(e,t,n){var r=n(8665),i=n(5585),a=n(9752);e.exports=function(e){return"string"==typeof e||!i(e)&&a(e)&&"[object String]"==r(e)}},2060:function(e,t,n){var r=n(8665),i=n(9752);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},3153:function(e,t,n){var r=n(7499),i=n(6902),a=n(7785),o=a&&a.isTypedArray,s=o?i(o):r;e.exports=s},6385:function(e,t,n){var r=n(3200),i=n(3409),a=n(2114);e.exports=function(e){return a(e)?r(e):i(e)}},7086:function(e,t,n){var r=n(3200),i=n(9130),a=n(2114);e.exports=function(e){return a(e)?r(e,!0):i(e)}},3428:function(e,t,n){var r=n(5434),i=n(1186),a=n(1839),o=n(5585);e.exports=function(e,t){return(o(e)?r:a)(e,i(t,3))}},2736:function(e,t,n){var r=n(3109);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},4445:function(e,t,n){var r=n(1125),i=n(171),a=n(8939),o=n(925);e.exports=function(e){return a(e)?r(o(e)):i(e)}},2554:function(e){e.exports=function(){return[]}},5535:function(e){e.exports=function(){return!1}},1822:function(e,t,n){var r=n(1612);e.exports=function(e){return null==e?"":r(e)}},1729:function(e,t,n){"use strict";var r=n(9165);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9605:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var a={};if("string"!==typeof e||0===e.length)return a;var o=/\+/g;e=e.split(n);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,h,d,f,p=e[u].replace(o,"%20"),v=p.indexOf(r);v>=0?(c=p.substr(0,v),h=p.substr(v+1)):(c=p,h=""),d=decodeURIComponent(c),f=decodeURIComponent(h),t(a,d)?Array.isArray(a[d])?a[d].push(f):a[d]=[a[d],f]:a[d]=f}return a}},3033:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(i){var a=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return a+encodeURIComponent(t(e))})).join(n):a+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},2902:function(e,t,n){"use strict";t.decode=t.parse=n(9605),t.encode=t.stringify=n(3033)},4738:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case a:case s:case o:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case m:case v:case l:return e;default:return t}}case i:return t}}}function E(e){return x(e)===h}t.isFragment=function(e){return x(e)===a},t.isMemo=function(e){return x(e)===v}},2715:function(e,t,n){"use strict";e.exports=n(4738)},534:function(e,t,n){"use strict";var r=n(7313),i=n(2224);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,s={};function l(e,t){u(e,t),u(e+"Capture",t)}function u(e,t){for(s[e]=t,e=0;e<t.length;e++)o.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,y);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var _=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),E=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),C=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var L,F=Object.assign;function B(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function H(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,s=a.length-1;1<=o&&0<=s&&i[o]!==a[s];)s--;for(;1<=o&&0<=s;o--,s--)if(i[o]!==a[s]){if(1!==o||1!==s)do{if(o--,0>--s||i[o]!==a[s]){var l="\n"+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?B(e):""}function j(e){switch(e.tag){case 5:return B(e.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1);case 11:return e=H(e.type.render,!1);case 1:return e=H(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case E:return"Portal";case S:return"Profiler";case T:return"StrictMode";case I:return"Suspense";case O:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case C:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function W(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function X(e){e._valueTracker||(e._valueTracker=function(e){var t=W(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Y(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=W(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function q(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Q(e,t){Z(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function J(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ue,ce,he=(ce=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ue=ue||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ue.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ce(e,t)}))}:ce);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ge=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ge[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var _e=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,we=null,Te=null;function Se(e){if(e=bi(e)){if("function"!==typeof Ee)throw Error(a(280));var t=e.stateNode;t&&(t=xi(t),Ee(e.stateNode,e.type,t))}}function ke(e){we?Te?Te.push(e):Te=[e]:we=e}function Ce(){if(we){var e=we,t=Te;if(Te=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Ie(){}var Oe=!1;function Pe(e,t,n){if(Oe)return e(t,n);Oe=!0;try{return Ae(e,t,n)}finally{Oe=!1,(null!==we||null!==Te)&&(Ie(),Ce())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(c)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ce){Re=!1}function De(e,t,n,r,i,a,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Le=!1,Fe=null,Be=!1,Ue=null,He={onError:function(e){Le=!0,Fe=e}};function je(e,t,n,r,i,a,o,s,l){Le=!1,Fe=null,De.apply(He,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function We(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Xe(e):null}function Xe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Xe(e);if(null!==t)return t;e=e.sibling}return null}var Ye=i.unstable_scheduleCallback,Ke=i.unstable_cancelCallback,qe=i.unstable_shouldYield,$e=i.unstable_requestPaint,Ze=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Je=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ut=64,ct=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var s=o&~i;0!==s?r=ht(s):0!==(a&=o)&&(r=ht(a))}else 0!==(o=n&~i)?r=ht(o):0!==a&&(r=ht(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ut;return 0===(4194240&(ut<<=1))&&(ut=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function _t(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,Et,wt,Tt,St,kt=!1,Ct=[],At=null,It=null,Ot=null,Pt=new Map,Mt=new Map,Rt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function Lt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void St(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Bt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);_e=r,n.target.dispatchEvent(r),_e=null,t.shift()}return!0}function Ut(e,t,n){Bt(e)&&n.delete(t)}function Ht(){kt=!1,null!==At&&Bt(At)&&(At=null),null!==It&&Bt(It)&&(It=null),null!==Ot&&Bt(Ot)&&(Ot=null),Pt.forEach(Ut),Mt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,kt||(kt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Ht)))}function zt(e){function t(t){return jt(t,e)}if(0<Ct.length){jt(Ct[0],e);for(var n=1;n<Ct.length;n++){var r=Ct[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&jt(At,e),null!==It&&jt(It,e),null!==Ot&&jt(Ot,e),Pt.forEach(t),Mt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var Vt=_.ReactCurrentBatchConfig,Gt=!0;function Wt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=1,Yt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Xt(e,t,n,r){var i=bt,a=Vt.transition;Vt.transition=null;try{bt=4,Yt(e,t,n,r)}finally{bt=i,Vt.transition=a}}function Yt(e,t,n,r){if(Gt){var i=qt(e,t,n,r);if(null===i)Gr(e,t,r,Kt,n),Dt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Lt(At,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return Ot=Lt(Ot,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Lt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Mt.set(a,Lt(Mt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Nt.indexOf(e)){for(;null!==i;){var a=bi(i);if(null!==a&&xt(a),null===(a=qt(e,t,n,r))&&Gr(e,t,r,Kt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Kt=null;function qt(e,t,n,r){if(Kt=null,null!==(e=yi(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Je:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Qt=null,Jt=null;function en(){if(Jt)return Jt;var e,t,n=Qt,r=n.length,i="value"in Zt?Zt.value:Zt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Jt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,sn,ln,un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cn=an(un),hn=F({},un,{view:0,detail:0}),dn=an(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=an(fn),vn=an(F({},fn,{dataTransfer:0})),mn=an(F({},hn,{relatedTarget:0})),gn=an(F({},un,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=an(yn),_n=an(F({},un,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return Tn}var kn=F({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cn=an(kn),An=an(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=an(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),On=an(F({},un,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=an(Pn),Rn=[9,13,27,32],Nn=c&&"CompositionEvent"in window,Dn=null;c&&"documentMode"in document&&(Dn=document.documentMode);var Ln=c&&"TextEvent"in window&&!Dn,Fn=c&&(!Nn||Dn&&8<Dn&&11>=Dn),Bn=String.fromCharCode(32),Un=!1;function Hn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Wn(e,t,n,r){ke(r),0<(t=Xr(t,"onChange")).length&&(n=new cn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Xn=null,Yn=null;function Kn(e){Br(e,0)}function qn(e){if(Y(_i(e)))return e}function $n(e,t){if("change"===e)return t}var Zn=!1;if(c){var Qn;if(c){var Jn="oninput"in document;if(!Jn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Jn="function"===typeof er.oninput}Qn=Jn}else Qn=!1;Zn=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Xn&&(Xn.detachEvent("onpropertychange",nr),Yn=Xn=null)}function nr(e){if("value"===e.propertyName&&qn(Yn)){var t=[];Wn(t,Yn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Yn=n,(Xn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return qn(Yn)}function ar(e,t){if("click"===e)return qn(t)}function or(e,t){if("input"===e||"change"===e)return qn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function ur(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function cr(e,t){var n,r=ur(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=ur(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=cr(n,a);var o=cr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=c&&"documentMode"in document&&11>=document.documentMode,mr=null,gr=null,yr=null,br=!1;function _r(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==K(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Xr(gr,"onSelect")).length&&(t=new cn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},wr={},Tr={};function Sr(e){if(wr[e])return wr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in Tr)return wr[e]=n[t];return e}c&&(Tr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var kr=Sr("animationend"),Cr=Sr("animationiteration"),Ar=Sr("animationstart"),Ir=Sr("transitionend"),Or=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Or.set(e,t),l(t,[e])}for(var Rr=0;Rr<Pr.length;Rr++){var Nr=Pr[Rr];Mr(Nr.toLowerCase(),"on"+(Nr[0].toUpperCase()+Nr.slice(1)))}Mr(kr,"onAnimationEnd"),Mr(Cr,"onAnimationIteration"),Mr(Ar,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Ir,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(je.apply(this,arguments),Le){if(!Le)throw Error(a(198));var c=Fe;Le=!1,Fe=null,Be||(Be=!0,Ue=c)}}(r,t,void 0,e),e.currentTarget=null}function Br(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==a&&i.isPropagationStopped())break e;Fr(i,s,u),a=l}else for(o=0;o<r.length;o++){if(l=(s=r[o]).instance,u=s.currentTarget,s=s.listener,l!==a&&i.isPropagationStopped())break e;Fr(i,s,u),a=l}}}if(Be)throw e=Ue,Be=!1,Ue=null,e}function Ur(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function Hr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Hr(t,!1,e),Hr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Hr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch($t(t)){case 1:var i=Wt;break;case 4:i=Xt;break;default:i=Yt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;o=o.return}for(;null!==s;){if(null===(o=yi(s)))return;if(5===(l=o.tag)||6===l){r=a=o;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=a,i=xe(n),o=[];e:{var s=Or.get(e);if(void 0!==s){var l=cn,u=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Cn;break;case"focusin":u="focus",l=mn;break;case"focusout":u="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case kr:case Cr:case Ar:l=gn;break;case Ir:l=On;break;case"scroll":l=dn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Me(p,d))&&c.push(Wr(p,v,f)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),o.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===_e||!(u=n.relatedTarget||n.fromElement)||!yi(u)&&!u[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?yi(u):null)&&(u!==(h=ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=pn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=An,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:_i(l),f=null==u?s:_i(u),(s=new c(v,p+"leave",l,n,i)).target=h,s.relatedTarget=f,v=null,yi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,v=c),h=v,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Yr(f))p++;for(f=0,v=d;v;v=Yr(v))f++;for(;0<p-f;)c=Yr(c),p--;for(;0<f-p;)d=Yr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Yr(c),d=Yr(d)}c=null}else c=null;null!==l&&Kr(o,s,l,c,!1),null!==u&&null!==h&&Kr(o,h,u,c,!0)}if("select"===(l=(s=r?_i(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=$n;else if(Gn(s))if(Zn)m=or;else{m=ir;var g=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Wn(o,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&ee(s,"number",s.value)),g=r?_i(r):window,e){case"focusin":(Gn(g)||"true"===g.contentEditable)&&(mr=g,gr=r,yr=null);break;case"focusout":yr=gr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,_r(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":_r(o,n,i)}var y;if(Nn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else zn?Hn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==b?"onCompositionEnd"===b&&zn&&(y=en()):(Qt="value"in(Zt=i)?Zt.value:Zt.textContent,zn=!0)),0<(g=Xr(r,b)).length&&(b=new _n(b,e,null,n,i),o.push({event:b,listeners:g}),y?b.data=y:null!==(y=jn(n))&&(b.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Bn);case"textInput":return(e=t.data)===Bn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Nn&&Hn(e,t)?(e=en(),Jt=Qt=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Xr(r,"onBeforeInput")).length&&(i=new _n("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=y))}Br(o,t)}))}function Wr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Xr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Me(e,n))&&r.unshift(Wr(e,a,i)),null!=(a=Me(e,t))&&r.push(Wr(e,a,i))),e=e.return}return r}function Yr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Me(n,a))&&o.unshift(Wr(n,l,s)):i||null!=(l=Me(n,a))&&o.push(Wr(n,l,s))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var qr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(qr,"\n").replace($r,"")}function Qr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(a(425))}function Jr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ui(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ci(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,vi="__reactEvents$"+hi,mi="__reactListeners$"+hi,gi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ci(e);null!==e;){if(n=e[di])return n;e=ci(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function _i(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function xi(e){return e[fi]||null}var Ei=[],wi=-1;function Ti(e){return{current:e}}function Si(e){0>wi||(e.current=Ei[wi],Ei[wi]=null,wi--)}function ki(e,t){wi++,Ei[wi]=e.current,e.current=t}var Ci={},Ai=Ti(Ci),Ii=Ti(!1),Oi=Ci;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ci;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Ii),Si(Ai)}function Ni(e,t,n){if(Ai.current!==Ci)throw Error(a(168));ki(Ai,t),ki(Ii,n)}function Di(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,V(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ci,Oi=Ai.current,ki(Ai,e),ki(Ii,Ii.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Di(e,t,Oi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ii),Si(Ai),ki(Ai,e)):Si(Ii),ki(Ii,n)}var Bi=null,Ui=!1,Hi=!1;function ji(e){null===Bi?Bi=[e]:Bi.push(e)}function zi(){if(!Hi&&null!==Bi){Hi=!0;var e=0,t=bt;try{var n=Bi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Bi=null,Ui=!1}catch(i){throw null!==Bi&&(Bi=Bi.slice(e+1)),Ye(Je,zi),i}finally{bt=t,Hi=!1}}return null}var Vi=[],Gi=0,Wi=null,Xi=0,Yi=[],Ki=0,qi=null,$i=1,Zi="";function Qi(e,t){Vi[Gi++]=Xi,Vi[Gi++]=Wi,Wi=e,Xi=t}function Ji(e,t,n){Yi[Ki++]=$i,Yi[Ki++]=Zi,Yi[Ki++]=qi,qi=e;var r=$i;e=Zi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Zi=a+e}else $i=1<<a|n<<i|r,Zi=e}function ea(e){null!==e.return&&(Qi(e,1),Ji(e,1,0))}function ta(e){for(;e===Wi;)Wi=Vi[--Gi],Vi[Gi]=null,Xi=Vi[--Gi],Vi[Gi]=null;for(;e===qi;)qi=Yi[--Ki],Yi[Ki]=null,Zi=Yi[--Ki],Yi[Ki]=null,$i=Yi[--Ki],Yi[Ki]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function sa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ui(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==qi?{id:$i,overflow:Zi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ua(e){if(ia){var t=ra;if(t){var n=t;if(!sa(e,t)){if(la(e))throw Error(a(418));t=ui(n.nextSibling);var r=na;t&&sa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function ca(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ha(e){if(e!==na)return!1;if(!ia)return ca(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(la(e))throw da(),Error(a(418));for(;t;)oa(e,t),t=ui(t.nextSibling)}if(ca(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ui(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ui(e.stateNode.nextSibling):null;return!0}function da(){for(var e=ra;e;)e=ui(e.nextSibling)}function fa(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=_.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=Ti(null),ya=null,ba=null,_a=null;function xa(){_a=ba=ya=null}function Ea(e){var t=ga.current;Si(ga),e._currentValue=t}function wa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ta(e,t){ya=e,_a=ba=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bs=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(_a!==e)if(e={context:e,memoizedValue:t,next:null},null===ba){if(null===ya)throw Error(a(308));ba=e,ya.dependencies={lanes:0,firstContext:e}}else ba=ba.next=e;return t}var ka=null;function Ca(e){null===ka?ka=[e]:ka.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ca(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ia(e,r)}function Ia(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Oa=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ma(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Na(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Al)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ia(e,n)}return null===(i=r.interleaved)?(t.next=t,Ca(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ia(e,n)}function Da(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Oa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===o?a=u:o.next=u,o=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==o&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==a){var h=i.baseState;for(o=0,c=u=l=null,s=a;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Oa=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,o|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ll|=o,e.lanes=o,e.memoizedState=h}}function Ba(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ha(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Na(e,a,i))&&(nu(t,e,i,r),Da(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=eu(),i=tu(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Na(e,a,i))&&(nu(t,e,i,r),Da(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=eu(),r=tu(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Na(e,i,r))&&(nu(t,e,r,n),Da(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,a))}function Va(e,t,n){var r=!1,i=Ci,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Mi(t)?Oi:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ci),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Wa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Mi(t)?Oi:Ai.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ha(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Xa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ya(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ka(e){return(0,e._init)(e._payload)}function qa(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Ru(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var a=n.type;return a===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===M&&Ka(a)===t.type)?((r=i(t,n.props)).ref=Xa(e,t,n),r.return=e,r):((r=Nu(n.type,n.key,n.props,null,e.mode,r)).ref=Xa(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,a){return null===t||7!==t.tag?((t=Du(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Nu(t.type,t.key,t.props,null,e.mode,n)).ref=Xa(e,null,t),n.return=e,n;case E:return(t=Bu(t,e.mode,n)).return=e,t;case M:return d(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Du(t,e.mode,n,null)).return=e,t;Ya(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?u(e,t,n,r):null;case E:return n.key===i?c(e,t,n,r):null;case M:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||D(n))return null!==i?null:h(e,t,n,r,null);Ya(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case E:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||D(r))return h(t,e=e.get(n)||null,r,i,null);Ya(t,r)}return null}function v(i,a,s,l){for(var u=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(i,h,s[v],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),ia&&Qi(i,v),u;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],l))&&(a=o(h,a,v),null===c?u=h:c.sibling=h,c=h);return ia&&Qi(i,v),u}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),ia&&Qi(i,v),u}function m(i,s,l,u){var c=D(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=l.next();null!==v&&!y.done;m++,y=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=f(i,v,y.value,u);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===h?c=b:h.sibling=b,h=b,v=g}if(y.done)return n(i,v),ia&&Qi(i,m),c;if(null===v){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return ia&&Qi(i,m),c}for(v=r(i,v);!y.done;m++,y=l.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),ia&&Qi(i,m),c}return function e(r,a,o,l){if("object"===typeof o&&null!==o&&o.type===w&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var u=o.key,c=a;null!==c;){if(c.key===u){if((u=o.type)===w){if(7===c.tag){n(r,c.sibling),(a=i(c,o.props.children)).return=r,r=a;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===M&&Ka(u)===c.type){n(r,c.sibling),(a=i(c,o.props)).ref=Xa(r,c,o),a.return=r,r=a;break e}n(r,c);break}t(r,c),c=c.sibling}o.type===w?((a=Du(o.props.children,r.mode,l,o.key)).return=r,r=a):((l=Nu(o.type,o.key,o.props,null,r.mode,l)).ref=Xa(r,a,o),l.return=r,r=l)}return s(r);case E:e:{for(c=o.key;null!==a;){if(a.key===c){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Bu(o,r.mode,l)).return=r,r=a}return s(r);case M:return e(r,a,(c=o._init)(o._payload),l)}if(te(o))return v(r,a,o,l);if(D(o))return m(r,a,o,l);Ya(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fu(o,r.mode,l)).return=r,r=a),s(r)):n(r,a)}}var $a=qa(!0),Za=qa(!1),Qa={},Ja=Ti(Qa),eo=Ti(Qa),to=Ti(Qa);function no(e){if(e===Qa)throw Error(a(174));return e}function ro(e,t){switch(ki(to,t),ki(eo,e),ki(Ja,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Ja),ki(Ja,t)}function io(){Si(Ja),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Ja.current),n=le(t,e.type);t!==n&&(ki(eo,e),ki(Ja,n))}function oo(e){eo.current===e&&(Si(Ja),Si(eo))}var so=Ti(0);function lo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uo=[];function co(){for(var e=0;e<uo.length;e++)uo[e]._workInProgressVersionPrimary=null;uo.length=0}var ho=_.ReactCurrentDispatcher,fo=_.ReactCurrentBatchConfig,po=0,vo=null,mo=null,go=null,yo=!1,bo=!1,_o=0,xo=0;function Eo(){throw Error(a(321))}function wo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function To(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ho.current=null===e||null===e.memoizedState?ss:ls,e=n(r,i),bo){o=0;do{if(bo=!1,_o=0,25<=o)throw Error(a(301));o+=1,go=mo=null,t.updateQueue=null,ho.current=us,e=n(r,i)}while(bo)}if(ho.current=os,t=null!==mo&&null!==mo.next,po=0,go=mo=vo=null,yo=!1,t)throw Error(a(300));return e}function So(){var e=0!==_o;return _o=0,e}function ko(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===go?vo.memoizedState=go=e:go=go.next=e,go}function Co(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===go?vo.memoizedState:go.next;if(null!==t)go=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===go?vo.memoizedState=go=e:go=go.next=e}return go}function Ao(e,t){return"function"===typeof t?t(e):t}function Io(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((po&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,vo.lanes|=h,Ll|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,sr(r,t.memoizedState)||(bs=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ll|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Oo(e){var t=Co(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);sr(o,t.memoizedState)||(bs=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Mo(e,t){var n=vo,r=Co(),i=t(),o=!sr(r.memoizedState,i);if(o&&(r.memoizedState=i,bs=!0),r=r.queue,Go(Do.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==go&&1&go.memoizedState.tag){if(n.flags|=2048,Uo(9,No.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(a(349));0!==(30&po)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function No(e,t,n,r){t.value=n,t.getSnapshot=r,Lo(t)&&Fo(e)}function Do(e,t,n){return n((function(){Lo(t)&&Fo(e)}))}function Lo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Fo(e){var t=Ia(e,1);null!==t&&nu(t,e,1,-1)}function Bo(e){var t=ko();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=ns.bind(null,vo,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ho(){return Co().memoizedState}function jo(e,t,n,r){var i=ko();vo.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Co();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&wo(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}vo.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function Vo(e,t){return jo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Wo(e,t){return zo(4,2,e,t)}function Xo(e,t){return zo(4,4,e,t)}function Yo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ko(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Yo.bind(null,t,e),n)}function qo(){}function $o(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Zo(e,t){var n=Co();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&wo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Qo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bs=!0),e.memoizedState=n):(sr(n,t)||(n=vt(),vo.lanes|=n,Ll|=n,e.baseState=!0),t)}function Jo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=fo.transition;fo.transition={};try{e(!1),t()}finally{bt=n,fo.transition=r}}function es(){return Co().memoizedState}function ts(e,t,n){var r=tu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},rs(e))is(t,n);else if(null!==(n=Aa(e,t,n,r))){nu(n,e,r,eu()),as(n,t,r)}}function ns(e,t,n){var r=tu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(rs(e))is(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,s=a(o,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,o)){var l=t.interleaved;return null===l?(i.next=i,Ca(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Aa(e,t,i,r))&&(nu(n,e,r,i=eu()),as(n,t,r))}}function rs(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function is(e,t){bo=yo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var os={readContext:Sa,useCallback:Eo,useContext:Eo,useEffect:Eo,useImperativeHandle:Eo,useInsertionEffect:Eo,useLayoutEffect:Eo,useMemo:Eo,useReducer:Eo,useRef:Eo,useState:Eo,useDebugValue:Eo,useDeferredValue:Eo,useTransition:Eo,useMutableSource:Eo,useSyncExternalStore:Eo,useId:Eo,unstable_isNewReconciler:!1},ss={readContext:Sa,useCallback:function(e,t){return ko().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:Vo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Yo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=ko();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ko();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ts.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ko().memoizedState=e},useState:Bo,useDebugValue:qo,useDeferredValue:function(e){return ko().memoizedState=e},useTransition:function(){var e=Bo(!1),t=e[0];return e=Jo.bind(null,e[1]),ko().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=ko();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Il)throw Error(a(349));0!==(30&po)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Vo(Do.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,No.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=ko(),t=Il.identifierPrefix;if(ia){var n=Zi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=_o++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=xo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ls={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Xo,useMemo:Zo,useReducer:Io,useRef:Ho,useState:function(){return Io(Ao)},useDebugValue:qo,useDeferredValue:function(e){return Qo(Co(),mo.memoizedState,e)},useTransition:function(){return[Io(Ao)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Mo,useId:es,unstable_isNewReconciler:!1},us={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Go,useImperativeHandle:Ko,useInsertionEffect:Wo,useLayoutEffect:Xo,useMemo:Zo,useReducer:Oo,useRef:Ho,useState:function(){return Oo(Ao)},useDebugValue:qo,useDeferredValue:function(e){var t=Co();return null===mo?t.memoizedState=e:Qo(t,mo.memoizedState,e)},useTransition:function(){return[Oo(Ao)[0],Co().memoizedState]},useMutableSource:Po,useSyncExternalStore:Mo,useId:es,unstable_isNewReconciler:!1};function cs(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function hs(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gl||(Gl=!0,Wl=r)},n}function ps(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Xl?Xl=new Set([this]):Xl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function vs(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Su.bind(null,e,t,n),t.then(e,e))}function ms(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Na(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=_.ReactCurrentOwner,bs=!1;function _s(e,t,n,r){t.child=null===e?Za(t,null,n,r):$a(t,e.child,n,r)}function xs(e,t,n,r,i){n=n.render;var a=t.ref;return Ta(t,i),r=To(e,t,n,r,a,i),n=So(),null===e||bs?(ia&&n&&ea(t),t.flags|=1,_s(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Es(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Mu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nu(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,ws(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Gs(e,t,i)}return t.flags|=1,(e=Ru(a,r)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(lr(a,r)&&e.ref===t.ref){if(bs=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gs(e,t,i);0!==(131072&e.flags)&&(bs=!0)}}return ks(e,t,n,r,i)}function Ts(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ki(Rl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ki(Rl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,ki(Rl,Ml),Ml|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,ki(Rl,Ml),Ml|=r;return _s(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function ks(e,t,n,r,i){var a=Mi(n)?Oi:Ai.current;return a=Pi(t,a),Ta(t,i),n=To(e,t,n,r,a,i),r=So(),null===e||bs?(ia&&r&&ea(t),t.flags|=1,_s(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gs(e,t,i))}function Cs(e,t,n,r,i){if(Mi(n)){var a=!0;Li(t)}else a=!1;if(Ta(t,i),null===t.stateNode)Vs(e,t),Va(t,n,r),Wa(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;"object"===typeof u&&null!==u?u=Sa(u):u=Pi(t,u=Mi(n)?Oi:Ai.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==r||l!==u)&&Ga(t,o,r,u),Oa=!1;var d=t.memoizedState;o.state=d,Fa(t,r,o,i),l=t.memoizedState,s!==r||d!==l||Ii.current||Oa?("function"===typeof c&&(Ha(t,n,c,r),l=t.memoizedState),(s=Oa||za(t,n,s,r,d,l,u))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ma(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),o.props=u,h=t.pendingProps,d=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=Sa(l):l=Pi(t,l=Mi(n)?Oi:Ai.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s!==h||d!==l)&&Ga(t,o,r,l),Oa=!1,d=t.memoizedState,o.state=d,Fa(t,r,o,i);var p=t.memoizedState;s!==h||d!==p||Ii.current||Oa?("function"===typeof f&&(Ha(t,n,f,r),p=t.memoizedState),(u=Oa||za(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return As(e,t,n,r,a,i)}function As(e,t,n,r,i,a){Ss(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gs(e,t,a);r=t.stateNode,ys.current=t;var s=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,s,a)):_s(e,t,s,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Ni(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ni(0,t.context,!1),ro(e,t.containerInfo)}function Os(e,t,n,r,i){return fa(),pa(i),t.flags|=256,_s(e,t,n,r),t.child}var Ps,Ms,Rs,Ns,Ds={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,o=so.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),ki(so,1&o),null===e)return ua(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lu(l,i,0,null),e=Du(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=Ds,e):Bs(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=hs(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lu({mode:"visible",children:r.children},i,0,null),(o=Du(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=Ds,o);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=hs(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),bs||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ia(e,i),nu(r,e,i,-1))}return vu(),Us(e,t,s,r=hs(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cu.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ui(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Yi[Ki++]=$i,Yi[Ki++]=Zi,Yi[Ki++]=qi,$i=e.id,Zi=e.overflow,qi=t),t=Bs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Ru(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Ru(r,s):(s=Du(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ds,i}return e=(s=e.child).sibling,i=Ru(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Bs(e,t){return(t=Lu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&pa(r),$a(t,e.child,null,n),(e=Bs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Hs(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),wa(e.return,t,n)}function js(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function zs(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(_s(e,t,r.children,n),0!==(2&(r=so.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Hs(e,n,t);else if(19===e.tag)Hs(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ki(so,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===lo(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===lo(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,a);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Ru(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Ru(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ws(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Xs(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ys(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xs(t),null;case 1:case 17:return Mi(t.type)&&Ri(),Xs(t),null;case 3:return r=t.stateNode,io(),Si(Ii),Si(Ai),co(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ha(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ou(aa),aa=null))),Ms(e,t),Xs(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Rs(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Xs(t),null}if(e=no(Ja.current),ha(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[di]=t,r[fi]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":$(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var l in ye(n,o),i=null,o)if(o.hasOwnProperty(l)){var u=o[l];"children"===l?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Qr(r.textContent,u,e),i=["children",""+u]):s.hasOwnProperty(l)&&null!=u&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":X(r),J(r,o,!0);break;case"textarea":X(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Jr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Dr.length;i++)Ur(Dr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":$(e,r),i=q(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ye(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?me(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&he(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&de(e,c):"number"===typeof c&&de(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(s.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Ur("scroll",e):null!=c&&b(e,o,c,l))}switch(n){case"input":X(e),J(e,r,!1);break;case"textarea":X(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Jr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Xs(t),null;case 6:if(e&&null!=t.stateNode)Ns(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Ja.current),ha(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Xs(t),null;case 13:if(Si(so),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))da(),fa(),t.flags|=98560,o=!1;else if(o=ha(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[di]=t}else fa(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Xs(t),o=!1}else null!==aa&&(ou(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&so.current)?0===Nl&&(Nl=3):vu())),null!==t.updateQueue&&(t.flags|=4),Xs(t),null);case 4:return io(),Ms(e,t),null===e&&zr(t.stateNode.containerInfo),Xs(t),null;case 10:return Ea(t.type._context),Xs(t),null;case 19:if(Si(so),null===(o=t.memoizedState))return Xs(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Ws(o,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=lo(e))){for(t.flags|=128,Ws(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ki(so,1&so.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>zl&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=lo(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ws(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!ia)return Xs(t),null}else 2*Ze()-o.renderingStartTime>zl&&1073741824!==n&&(t.flags|=128,r=!0,Ws(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=so.current,ki(so,r?1&n|2:1&n),t):(Xs(t),null);case 22:case 23:return hu(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Xs(t),6&t.subtreeFlags&&(t.flags|=8192)):Xs(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ks(e,t){switch(ta(t),t.tag){case 1:return Mi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Ii),Si(Ai),co(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(so),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fa()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(so),null;case 4:return io(),null;case 10:return Ea(t.type._context),null;case 22:case 23:return hu(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ms=function(){},Rs=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Ja.current);var a,o=null;switch(n){case"input":i=q(e,i),r=q(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Jr)}for(c in ye(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var l=i[c];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(s.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var u=r[c];if(l=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(null!=u||null!=l))if("style"===c)if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(o||(o=[]),o.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,l=l?l.__html:void 0,null!=u&&l!==u&&(o=o||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(o=o||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(s.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Ur("scroll",e),o||l===u||(o=[])):(o=o||[]).push(c,u))}n&&(o=o||[]).push("style",n);var c=o;(t.updateQueue=c)&&(t.flags|=4)}},Ns=function(e,t,n,r){n!==r&&(t.flags|=4)};var qs=!1,$s=!1,Zs="function"===typeof WeakSet?WeakSet:Set,Qs=null;function Js(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Tu(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Tu(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&el(t,n,a)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[vi],delete t[mi],delete t[gi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ol(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ol(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Jr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}var cl=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:$s||Js(n,t);case 6:var r=cl,i=hl;cl=null,dl(e,t,n),hl=i,null!==(cl=r)&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):cl.removeChild(n.stateNode));break;case 18:null!==cl&&(hl?(e=cl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),zt(e)):li(cl,n.stateNode));break;case 4:r=cl,i=hl,cl=n.stateNode.containerInfo,hl=!0,dl(e,t,n),cl=r,hl=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&el(n,t,o),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!$s&&(Js(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Tu(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,dl(e,t,n),$s=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zs),t.forEach((function(t){var r=Au.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:cl=l.stateNode,hl=!1;break e;case 3:case 4:cl=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===cl)throw Error(a(160));fl(o,s,i),cl=null,hl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Tu(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vl(t,e),gl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Tu(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Tu(e,e.return,m)}}break;case 1:vl(t,e),gl(e),512&r&&null!==n&&Js(n,n.return);break;case 5:if(vl(t,e),gl(e),512&r&&null!==n&&Js(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Tu(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,s=null!==n?n.memoizedProps:o,l=e.type,u=e.updateQueue;if(e.updateQueue=null,null!==u)try{"input"===l&&"radio"===o.type&&null!=o.name&&Z(i,o),be(l,s);var c=be(l,o);for(s=0;s<u.length;s+=2){var h=u[s],d=u[s+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,c)}switch(l){case"input":Q(i,o);break;case"textarea":ae(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[fi]=o}catch(m){Tu(e,e.return,m)}}break;case 6:if(vl(t,e),gl(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Tu(e,e.return,m)}}break;case 3:if(vl(t,e),gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Tu(e,e.return,m)}break;case 4:default:vl(t,e),gl(e);break;case 13:vl(t,e),gl(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Ze())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?($s=(c=$s)||h,vl(t,e),$s=c):vl(t,e),gl(e),8192&r){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!h&&0!==(1&e.mode))for(Qs=e,h=e.child;null!==h;){for(d=Qs=h;null!==Qs;){switch(p=(f=Qs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Js(f,f.return);var v=f.stateNode;if("function"===typeof v.componentWillUnmount){r=f,n=f.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Tu(r,n,m)}}break;case 5:Js(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Qs=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,c?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=d.stateNode,s=void 0!==(u=d.memoizedProps.style)&&null!==u&&u.hasOwnProperty("display")?u.display:null,l.style.display=ve("display",s))}catch(m){Tu(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Tu(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vl(t,e),gl(e),4&r&&pl(e);case 21:}}function gl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ol(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),ul(e,sl(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ll(e,sl(e),o);break;default:throw Error(a(161))}}catch(s){Tu(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qs=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Qs;){var i=Qs,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||qs;if(!o){var s=i.alternate,l=null!==s&&null!==s.memoizedState||$s;s=qs;var u=$s;if(qs=o,($s=l)&&!u)for(Qs=i;null!==Qs;)l=(o=Qs).child,22===o.tag&&null!==o.memoizedState?El(i):null!==l?(l.return=o,Qs=l):El(i);for(;null!==a;)Qs=a,bl(a,t,n),a=a.sibling;Qs=i,qs=s,$s=u}_l(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Qs=a):_l(e)}}function _l(e){for(;null!==Qs;){var t=Qs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ba(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ba(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(a(163))}$s||512&t.flags&&il(t)}catch(f){Tu(t,t.return,f)}}if(t===e){Qs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qs=n;break}Qs=t.return}}function xl(e){for(;null!==Qs;){var t=Qs;if(t===e){Qs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qs=n;break}Qs=t.return}}function El(e){for(;null!==Qs;){var t=Qs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Tu(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Tu(t,i,l)}}var a=t.return;try{il(t)}catch(l){Tu(t,a,l)}break;case 5:var o=t.return;try{il(t)}catch(l){Tu(t,o,l)}}}catch(l){Tu(t,t.return,l)}if(t===e){Qs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Qs=s;break}Qs=t.return}}var wl,Tl=Math.ceil,Sl=_.ReactCurrentDispatcher,kl=_.ReactCurrentOwner,Cl=_.ReactCurrentBatchConfig,Al=0,Il=null,Ol=null,Pl=0,Ml=0,Rl=Ti(0),Nl=0,Dl=null,Ll=0,Fl=0,Bl=0,Ul=null,Hl=null,jl=0,zl=1/0,Vl=null,Gl=!1,Wl=null,Xl=null,Yl=!1,Kl=null,ql=0,$l=0,Zl=null,Ql=-1,Jl=0;function eu(){return 0!==(6&Al)?Ze():-1!==Ql?Ql:Ql=Ze()}function tu(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Pl?Pl&-Pl:null!==va.transition?(0===Jl&&(Jl=vt()),Jl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function nu(e,t,n,r){if(50<$l)throw $l=0,Zl=null,Error(a(185));gt(e,n,r),0!==(2&Al)&&e===Il||(e===Il&&(0===(2&Al)&&(Fl|=n),4===Nl&&su(e,Pl)),ru(e,r),1===n&&0===Al&&0===(1&t.mode)&&(zl=Ze()+500,Ui&&zi()))}function ru(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),s=1<<o,l=i[o];-1===l?0!==(s&n)&&0===(s&r)||(i[o]=ft(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}}(e,t);var r=dt(e,e===Il?Pl:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(lu.bind(null,e)):ji(lu.bind(null,e)),oi((function(){0===(6&Al)&&zi()})),n=null;else{switch(_t(r)){case 1:n=Je;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Iu(n,iu.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function iu(e,t){if(Ql=-1,Jl=0,0!==(6&Al))throw Error(a(327));var n=e.callbackNode;if(Eu()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mu(e,r);else{t=r;var i=Al;Al|=2;var o=pu();for(Il===e&&Pl===t||(Vl=null,zl=Ze()+500,du(e,t));;)try{yu();break}catch(l){fu(e,l)}xa(),Sl.current=o,Al=i,null!==Ol?t=0:(Il=null,Pl=0,t=Nl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=au(e,i))),1===t)throw n=Dl,du(e,0),su(e,r),ru(e,Ze()),n;if(6===t)su(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!sr(a(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mu(e,r))&&(0!==(o=pt(e))&&(r=o,t=au(e,o))),1===t))throw n=Dl,du(e,0),su(e,r),ru(e,Ze()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xu(e,Hl,Vl);break;case 3:if(su(e,r),(130023424&r)===r&&10<(t=jl+500-Ze())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){eu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xu.bind(null,e,Hl,Vl),t);break}xu(e,Hl,Vl);break;case 4:if(su(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-ot(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Tl(r/1960))-r)){e.timeoutHandle=ri(xu.bind(null,e,Hl,Vl),r);break}xu(e,Hl,Vl);break;default:throw Error(a(329))}}}return ru(e,Ze()),e.callbackNode===n?iu.bind(null,e):null}function au(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(du(e,t).flags|=256),2!==(e=mu(e,t))&&(t=Hl,Hl=n,null!==t&&ou(t)),e}function ou(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function su(e,t){for(t&=~Bl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function lu(e){if(0!==(6&Al))throw Error(a(327));Eu();var t=dt(e,0);if(0===(1&t))return ru(e,Ze()),null;var n=mu(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Dl,du(e,0),su(e,t),ru(e,Ze()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xu(e,Hl,Vl),ru(e,Ze()),null}function uu(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(zl=Ze()+500,Ui&&zi())}}function cu(e){null!==Kl&&0===Kl.tag&&0===(6&Al)&&Eu();var t=Al;Al|=1;var n=Cl.transition,r=bt;try{if(Cl.transition=null,bt=1,e)return e()}finally{bt=r,Cl.transition=n,0===(6&(Al=t))&&zi()}}function hu(){Ml=Rl.current,Si(Rl)}function du(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ol)for(n=Ol.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Ii),Si(Ai),co();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(so);break;case 10:Ea(r.type._context);break;case 22:case 23:hu()}n=n.return}if(Il=e,Ol=e=Ru(e.current,null),Pl=Ml=t,Nl=0,Dl=null,Bl=Fl=Ll=0,Hl=Ul=null,null!==ka){for(t=0;t<ka.length;t++)if(null!==(r=(n=ka[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}ka=null}return e}function fu(e,t){for(;;){var n=Ol;try{if(xa(),ho.current=os,yo){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}yo=!1}if(po=0,go=mo=vo=null,bo=!1,_o=0,kl.current=null,null===n||null===n.return){Nl=1,Dl=t,Ol=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Pl,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=ms(s);if(null!==p){p.flags&=-257,gs(p,s,l,0,t),1&p.mode&&vs(o,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){vs(o,c,t),vu();break e}u=Error(a(426))}else if(ia&&1&l.mode){var g=ms(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),gs(g,s,l,0,t),pa(cs(u,l));break e}}o=u=cs(u,l),4!==Nl&&(Nl=2),null===Ul?Ul=[o]:Ul.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,fs(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Xl||!Xl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,ps(o,l,t));break e}}o=o.return}while(null!==o)}_u(n)}catch(_){t=_,Ol===n&&null!==n&&(Ol=n=n.return);continue}break}}function pu(){var e=Sl.current;return Sl.current=os,null===e?os:e}function vu(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===Il||0===(268435455&Ll)&&0===(268435455&Fl)||su(Il,Pl)}function mu(e,t){var n=Al;Al|=2;var r=pu();for(Il===e&&Pl===t||(Vl=null,du(e,t));;)try{gu();break}catch(i){fu(e,i)}if(xa(),Al=n,Sl.current=r,null!==Ol)throw Error(a(261));return Il=null,Pl=0,Nl}function gu(){for(;null!==Ol;)bu(Ol)}function yu(){for(;null!==Ol&&!qe();)bu(Ol)}function bu(e){var t=wl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?_u(e):Ol=t,kl.current=null}function _u(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ys(n,t,Ml)))return void(Ol=n)}else{if(null!==(n=Ks(n,t)))return n.flags&=32767,void(Ol=n);if(null===e)return Nl=6,void(Ol=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ol=t);Ol=t=e}while(null!==t);0===Nl&&(Nl=5)}function xu(e,t,n){var r=bt,i=Cl.transition;try{Cl.transition=null,bt=1,function(e,t,n,r){do{Eu()}while(null!==Kl);if(0!==(6&Al))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Il&&(Ol=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Iu(tt,(function(){return Eu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cl.transition,Cl.transition=null;var s=bt;bt=1;var l=Al;Al|=4,kl.current=null,function(e,t){if(ei=Gt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++h===r&&(u=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Qs=t;null!==Qs;)if(e=(t=Qs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qs=e;else for(;null!==Qs;){t=Qs;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(x){Tu(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Qs=e;break}Qs=t.return}v=tl,tl=!1}(e,n),ml(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,yl(n,e,i),$e(),Al=l,bt=s,Cl.transition=o}else e.current=n;if(Yl&&(Yl=!1,Kl=e,ql=i),o=e.pendingLanes,0===o&&(Xl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ru(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gl)throw Gl=!1,e=Wl,Wl=null,e;0!==(1&ql)&&0!==e.tag&&Eu(),o=e.pendingLanes,0!==(1&o)?e===Zl?$l++:($l=0,Zl=e):$l=0,zi()}(e,t,n,r)}finally{Cl.transition=i,bt=r}return null}function Eu(){if(null!==Kl){var e=_t(ql),t=Cl.transition,n=bt;try{if(Cl.transition=null,bt=16>e?16:e,null===Kl)var r=!1;else{if(e=Kl,Kl=null,ql=0,0!==(6&Al))throw Error(a(331));var i=Al;for(Al|=4,Qs=e.current;null!==Qs;){var o=Qs,s=o.child;if(0!==(16&Qs.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Qs=c;null!==Qs;){var h=Qs;switch(h.tag){case 0:case 11:case 15:nl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Qs=d;else for(;null!==Qs;){var f=(h=Qs).sibling,p=h.return;if(al(h),h===c){Qs=null;break}if(null!==f){f.return=p,Qs=f;break}Qs=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Qs=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Qs=s;else e:for(;null!==Qs;){if(0!==(2048&(o=Qs).flags))switch(o.tag){case 0:case 11:case 15:nl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Qs=y;break e}Qs=o.return}}var b=e.current;for(Qs=b;null!==Qs;){var _=(s=Qs).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Qs=_;else e:for(s=b;null!==Qs;){if(0!==(2048&(l=Qs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(E){Tu(l,l.return,E)}if(l===s){Qs=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Qs=x;break e}Qs=l.return}}if(Al=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(E){}r=!0}return r}finally{bt=n,Cl.transition=t}}return!1}function wu(e,t,n){e=Na(e,t=fs(0,t=cs(n,t),1),1),t=eu(),null!==e&&(gt(e,1,t),ru(e,t))}function Tu(e,t,n){if(3===e.tag)wu(e,e,n);else for(;null!==t;){if(3===t.tag){wu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Xl||!Xl.has(r))){t=Na(t,e=ps(t,e=cs(n,e),1),1),e=eu(),null!==t&&(gt(t,1,e),ru(t,e));break}}t=t.return}}function Su(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=eu(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===Nl||3===Nl&&(130023424&Pl)===Pl&&500>Ze()-jl?du(e,0):Bl|=n),ru(e,t)}function ku(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ct,0===(130023424&(ct<<=1))&&(ct=4194304)));var n=eu();null!==(e=Ia(e,t))&&(gt(e,t,n),ru(e,n))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),ku(e,n)}function Au(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),ku(e,n)}function Iu(e,t){return Ye(e,t)}function Ou(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pu(e,t,n,r){return new Ou(e,t,n,r)}function Mu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ru(e,t){var n=e.alternate;return null===n?((n=Pu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nu(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Mu(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return Du(n.children,i,o,t);case T:s=8,i|=8;break;case S:return(e=Pu(12,n,t,2|i)).elementType=S,e.lanes=o,e;case I:return(e=Pu(13,n,t,i)).elementType=I,e.lanes=o,e;case O:return(e=Pu(19,n,t,i)).elementType=O,e.lanes=o,e;case R:return Lu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:s=10;break e;case C:s=9;break e;case A:s=11;break e;case P:s=14;break e;case M:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Du(e,t,n,r){return(e=Pu(7,e,r,t)).lanes=n,e}function Lu(e,t,n,r){return(e=Pu(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Fu(e,t,n){return(e=Pu(6,e,null,t)).lanes=n,e}function Bu(e,t,n){return(t=Pu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hu(e,t,n,r,i,a,o,s,l){return e=new Uu(e,t,n,s,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pu(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function ju(e){if(!e)return Ci;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Di(e,n,t)}return t}function zu(e,t,n,r,i,a,o,s,l){return(e=Hu(n,r,!0,e,0,a,0,s,l)).context=ju(null),n=e.current,(a=Ra(r=eu(),i=tu(n))).callback=void 0!==t&&null!==t?t:null,Na(n,a,i),e.current.lanes=i,gt(e,i,r),ru(e,r),e}function Vu(e,t,n,r){var i=t.current,a=eu(),o=tu(i);return n=ju(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Na(i,t,o))&&(nu(e,i,o,a),Da(e,i,o)),o}function Gu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Wu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Xu(e,t){Wu(e,t),(e=e.alternate)&&Wu(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)bs=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bs=!1,function(e,t,n){switch(t.tag){case 3:Is(t),fa();break;case 5:ao(t);break;case 1:Mi(t.type)&&Li(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ki(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(ki(so,1&so.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(ki(so,1&so.current),null!==(e=Gs(e,t,n))?e.sibling:null);ki(so,1&so.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return zs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),ki(so,so.current),r)break;return null;case 22:case 23:return t.lanes=0,Ts(e,t,n)}return Gs(e,t,n)}(e,t,n);bs=0!==(131072&e.flags)}else bs=!1,ia&&0!==(1048576&t.flags)&&Ji(t,Xi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vs(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Ta(t,n),i=To(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(o=!0,Li(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Wa(t,r,e,n),t=As(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),_s(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mu(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(r),e=ma(r,e),i){case 0:t=ks(null,t,r,e,n);break e;case 1:t=Cs(null,t,r,e,n);break e;case 11:t=xs(null,t,r,e,n);break e;case 14:t=Es(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,ks(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ma(e,t),Fa(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Os(e,t,r,n,i=cs(Error(a(423)),t));break e}if(r!==i){t=Os(e,t,r,n,i=cs(Error(a(424)),t));break e}for(ra=ui(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Za(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fa(),r===i){t=Gs(e,t,n);break e}_s(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ua(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==o&&ni(r,o)&&(t.flags|=32),Ss(e,t),_s(e,t,s,n),t.child;case 6:return null===e&&ua(t),null;case 13:return Fs(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):_s(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xs(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return _s(e,t,t.pendingProps,n),t.child;case 8:case 12:return _s(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,ki(ga,r._currentValue),r._currentValue=s,null!==o)if(sr(o.value,s)){if(o.children===i.children&&!Ii.current){t=Gs(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Ra(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),wa(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),wa(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}_s(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ta(t,n),r=r(i=Sa(i)),t.flags|=1,_s(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),Es(e,t,r,i=ma(r.type,i),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Vs(e,t),t.tag=1,Mi(r)?(e=!0,Li(t)):e=!1,Ta(t,n),Va(t,r,i),Wa(t,r,i,n),As(null,t,r,!0,e,n);case 19:return zs(e,t,n);case 22:return Ts(e,t,n)}throw Error(a(156,t.tag))};var Yu="function"===typeof reportError?reportError:function(e){};function Ku(e){this._internalRoot=e}function qu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qu(){}function Ju(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var s=i;i=function(){var e=Gu(o);s.call(e)}}Vu(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gu(o);a.call(e)}}var o=zu(t,r,e,0,null,!1,0,"",Qu);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),cu(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Gu(l);s.call(e)}}var l=Hu(e,0,!1,null,0,!1,0,"",Qu);return e._reactRootContainer=l,e[pi]=l.current,zr(8===e.nodeType?e.parentNode:e),cu((function(){Vu(t,l,n,r)})),l}(n,t,e,i,r);return Gu(o)}qu.prototype.render=Ku.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vu(e,t,null,null)},qu.prototype.unmount=Ku.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;cu((function(){Vu(null,e,null,null)})),t[pi]=null}},qu.prototype.unstable_scheduleHydration=function(e){if(e){var t=Tt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ru(t,Ze()),0===(6&Al)&&(zl=Ze()+500,zi()))}break;case 13:cu((function(){var t=Ia(e,1);if(null!==t){var n=eu();nu(t,e,1,n)}})),Xu(e,1)}},Et=function(e){if(13===e.tag){var t=Ia(e,134217728);if(null!==t)nu(t,e,134217728,eu());Xu(e,134217728)}},wt=function(e){if(13===e.tag){var t=tu(e),n=Ia(e,t);if(null!==n)nu(n,e,t,eu());Xu(e,t)}},Tt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(a(90));Y(r),Q(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=uu,Ie=cu;var ec={usingClientEntryPoint:!1,Events:[bi,_i,xi,ke,Ce,uu]},tc={findFiberByHostInstance:yi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},nc={bundleType:tc.bundleType,version:tc.version,rendererPackageName:tc.rendererPackageName,rendererConfig:tc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=We(e))?null:e.stateNode},findFiberByHostInstance:tc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rc.isDisabled&&rc.supportsFiber)try{it=rc.inject(nc),at=rc}catch(ce){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ec,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$u(e))throw Error(a(299));var n=!1,r="",i=Yu;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Hu(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Ku(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=We(t))?null:e.stateNode},t.flushSync=function(e){return cu(e)},t.hydrate=function(e,t,n){if(!Zu(t))throw Error(a(200));return Ju(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Yu;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=zu(t,null,e,1,null!=n?n:null,i,0,o,s),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new qu(t)},t.render=function(e,t,n){if(!Zu(t))throw Error(a(200));return Ju(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zu(e))throw Error(a(40));return!!e._reactRootContainer&&(cu((function(){Ju(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=uu,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Ju(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),e.exports=n(534)},5918:function(e,t,n){"use strict";var r=n(7313),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,a={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=b.prototype=new y;_.constructor=b,v(_,g.prototype),_.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,w={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(a[i]=t[i]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];a.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===a[i]&&(a[i]=l[i]);return{$$typeof:n,type:e,key:o,ref:s,props:a,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,a,o){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===a?"."+A(l,0):a,x(o)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(o,t,i,"",(function(e){return e}))):null!=o&&(k(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(C,"$&/")+"/")+e)),t.push(o)),1;if(l=0,a=""===a?".":a+":",x(e))for(var u=0;u<e.length;u++){var c=a+A(s=e[u],u);l+=I(s,t,i,c,o)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,c=a+A(s,u++),o);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},R={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=o,t.PureComponent=b,t.StrictMode=a,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=w.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,i=n(7827),a=(r=i)&&r.__esModule?r:{default:r},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,a.default)(e,(function(e,n){var r={};(0,a.default)(e,(function(e,t){var n=s[t];n?r=o({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(7313),o=(r=a)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return a=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(c))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return o.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},o.default.createElement(e,i({},l.props,l.state)))},s(l,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(o.default.Component)};t.default=l},2610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(7313),o=(r=a)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return a=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(c))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return o.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},o.default.createElement(e,i({},l.props,l.state)))},s(l,a)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(o.default.Component)};t.default=l},8197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(5406)),i=s(n(7827)),a=s(n(634)),o=s(n(3428));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,o.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,a.default)(t)?(0,i.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},9584:function(e,t,n){"use strict";t.tz=void 0;var r=u(n(8197)),i=u(n(3417)),a=u(n(1299)),o=u(n(2610)),s=u(n(83)),l=u(n(6751));function u(e){return e&&e.__esModule?e:{default:e}}o.default,t.tz=o.default,s.default,l.default;var c=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];var s=(0,r.default)(n),l=(0,i.default)(e,s);return(0,a.default)(l)};t.ZP=c},6751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},3417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=o(n(7827)),i=o(n(8504)),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function o(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,i.default)(e.default)||{};return t.map((function(t){var i=e[t];return i&&(0,r.default)(i,(function(e,t){n[t]||(n[t]={}),n[t]=a({},n[t],i[t])})),t})),n};t.default=s},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>a(l,n))u<i&&0>a(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>a(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,_(e),!v)if(null!==r(u))v=!0,R(E);else{var t=r(c);null!==t&&N(x,t.startTime-e)}}function E(e,n){v=!1,m&&(m=!1,y(k),k=-1),p=!0;var a=f;try{for(_(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var s=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),_(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&N(x,h.startTime-n),l=!1}return l}finally{d=null,f=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,T=!1,S=null,k=-1,C=5,A=-1;function I(){return!(t.unstable_now()-A<C)}function O(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?w():(T=!1,S=null)}}else T=!1}if("function"===typeof b)w=function(){b(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=O,w=function(){M.postMessage(null)}}else w=function(){g(O,0)};function R(e){S=e,T||(T=!0,w())}function N(e,n){k=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:a,expirationTime:s=a+s,sortIndex:-1},a>o?(e.sortIndex=a,n(c,e),null===r(u)&&e===r(c)&&(m?(y(k),k=-1):m=!0,N(x,a-o))):(e.sortIndex=s,n(u,e),v||p||(v=!0,R(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},6036:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var a="object"==typeof n.g&&n.g;a.global!==a&&a.window!==a&&a.self;var o,s=2147483647,l=36,u=1,c=26,h=38,d=700,f=72,p=128,v="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,x=Math.floor,E=String.fromCharCode;function w(e){throw RangeError(b[e])}function T(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function S(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+T((e=e.replace(y,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],i=0,a=e.length;i<a;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<a?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function C(e){return T(e,(function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var r=0;for(e=n?x(e/d):e>>1,e+=x(e/t);e>_*c>>1;r+=l)e=x(e/_);return x(r+(_+1)*e/(e+h))}function O(e){var t,n,r,i,a,o,h,d,m,g,y,b=[],_=e.length,E=0,T=p,S=f;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&w("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(a=E,o=1,h=l;i>=_&&w("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||d>x((s-E)/o))&&w("overflow"),E+=d*o,!(d<(m=h<=S?u:h>=S+c?c:h-S));h+=l)o>x(s/(g=l-m))&&w("overflow"),o*=g;S=I(E-a,t=b.length+1,0==a),x(E/t)>s-T&&w("overflow"),T+=x(E/t),E%=t,b.splice(E++,0,T)}return C(b)}function P(e){var t,n,r,i,a,o,h,d,m,g,y,b,_,T,S,C=[];for(b=(e=k(e)).length,t=p,n=0,a=f,o=0;o<b;++o)(y=e[o])<128&&C.push(E(y));for(r=i=C.length,i&&C.push(v);r<b;){for(h=s,o=0;o<b;++o)(y=e[o])>=t&&y<h&&(h=y);for(h-t>x((s-n)/(_=r+1))&&w("overflow"),n+=(h-t)*_,t=h,o=0;o<b;++o)if((y=e[o])<t&&++n>s&&w("overflow"),y==t){for(d=n,m=l;!(d<(g=m<=a?u:m>=a+c?c:m-a));m+=l)S=d-g,T=l-g,C.push(E(A(g+S%T,0))),d=x(S/T);C.push(E(A(d,0))),a=I(n,_,r==i),n=0,++r}++n,++t}return C.join("")}o={version:"1.3.2",ucs2:{decode:k,encode:C},decode:O,encode:P,toASCII:function(e){return S(e,(function(e){return g.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return S(e,(function(e){return m.test(e)?O(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return o}.call(t,n,t,e))||(e.exports=r)}()},2770:function(e,t,n){"use strict";var r=n(6036),i=n(4070);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=b,t.DB=function(e,t){return b(e,!1,!0).resolve(t)},t.WU=function(e){i.isString(e)&&(e=b(e));return e instanceof a?e.format():a.prototype.format.call(e)};var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(2902);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof a)return e;var r=new a;return r.parse(e,t,n),r}a.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),s=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=o.exec(b);if(x){var E=(x=x[0]).toLowerCase();this.protocol=E,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||x&&m[x]||(b=b.substr(2),this.slashes=!0)}if(!m[x]&&(w||x&&!g[x])){for(var T,S,k=-1,C=0;C<d.length;C++){-1!==(A=b.indexOf(d[C]))&&(-1===k||A<k)&&(k=A)}-1!==(S=-1===k?b.lastIndexOf("@"):b.lastIndexOf("@",k))&&(T=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(T)),k=-1;for(C=0;C<h.length;C++){var A;-1!==(A=b.indexOf(h[C]))&&(-1===k||A<k)&&(k=A)}-1===k&&(k=b.length),this.host=b.slice(0,k),b=b.slice(k),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),P=(C=0,O.length);C<P;C++){var M=O[C];if(M&&!M.match(f)){for(var R="",N=0,D=M.length;N<D;N++)M.charCodeAt(N)>127?R+="x":R+=M[N];if(!R.match(f)){var L=O.slice(0,C),F=O.slice(C+1),B=M.match(p);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[E])for(C=0,P=c.length;C<P;C++){var j=c[C];if(-1!==b.indexOf(j)){var z=encodeURIComponent(j);z===j&&(z=escape(j)),b=b.split(j).join(z)}}var V=b.indexOf("#");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,G)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",a=!1,o="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(o=y.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==a?(a="//"+(a||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):a||(a=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+a+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(i.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var n=new a,r=Object.keys(this),o=0;o<r.length;o++){var s=r[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=_||b||n.host&&e.pathname,E=x,w=n.pathname&&n.pathname.split("/")||[],T=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===w[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(T)n.hostname=n.host=w.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,C=0,A=w.length;A>=0;A--)"."===(S=w[A])?w.splice(A,1):".."===S?(w.splice(A,1),C++):C&&(w.splice(A,1),C--);if(!x&&!E)for(;C--;C)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var I,O=""===w[0]||w[0]&&"/"===w[0].charAt(0);T&&(n.hostname=n.host=O?"":w.length?w.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(x=x||n.host&&w.length)&&!O&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},a.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},4070:function(e){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=e,n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".d46a1e01.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="dragonbones-web:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var s,l;if(void 0!==a)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+a){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+a),s.src=r),e[r]=[i];var d=function(t,n){s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(n)})),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},n.p="/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),s=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",s.name="ChunkLoadError",s.type=a,s.request=o,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],s=r[1],l=r[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);u<o.length;u++)a=o[u],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkdragonbones_web=self.webpackChunkdragonbones_web||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){"use strict";var e={};n.r(e),n.d(e,{BaseTextureCache:function(){return $v},BoundingBox:function(){return Yv},CanvasRenderTarget:function(){return em},DATA_URI:function(){return Nv},EventEmitter:function(){return Lp},ProgramCache:function(){return Kv},TextureCache:function(){return qv},clearTextureCache:function(){return Qv},correctBlendMode:function(){return Ov},createIndicesForQuads:function(){return Dv},decomposeDataUri:function(){return am},deprecation:function(){return Wp},destroyTextureCache:function(){return Zv},determineCrossOrigin:function(){return om},earcut:function(){return Fp},getBufferType:function(){return Lv},getCanvasBoundingBox:function(){return rm},getResolutionOfUrl:function(){return sm},hex2rgb:function(){return Sv},hex2string:function(){return kv},interleaveTypedArrays:function(){return Bv},isMobile:function(){return Dp},isPow2:function(){return Hv},isWebGLSupported:function(){return Kp},log2:function(){return jv},nextPow2:function(){return Uv},path:function(){return Vp},premultiplyBlendMode:function(){return Iv},premultiplyRgba:function(){return Pv},premultiplyTint:function(){return Mv},premultiplyTintToRgba:function(){return Rv},removeItems:function(){return zv},rgb2hex:function(){return Av},sayHello:function(){return Yp},sign:function(){return Vv},skipHello:function(){return Xp},string2hex:function(){return Cv},trimCanvas:function(){return im},uid:function(){return Wv},url:function(){return Up}});var t={};n.r(t),n.d(t,{ALPHA_MODES:function(){return lp},AbstractMultiResource:function(){return fb},AccessibilityManager:function(){return u_},AlphaFilter:function(){return Fb},AnimatedSprite:function(){return mw},Application:function(){return h_},ArrayResource:function(){return pb},Assets:function(){return q_},AssetsClass:function(){return K_},Attribute:function(){return Im},BLEND_MODES:function(){return Jf},BUFFER_BITS:function(){return Qf},BUFFER_TYPE:function(){return vp},BackgroundSystem:function(){return Mg},BaseImageResource:function(){return Ug},BasePrepare:function(){return cw},BaseRenderTexture:function(){return Bg},BaseTexture:function(){return Sm},BatchDrawCall:function(){return km},BatchGeometry:function(){return Dm},BatchRenderer:function(){return Ig},BatchShaderGenerator:function(){return Sg},BatchSystem:function(){return Rg},BatchTextureArray:function(){return kg},BitmapFont:function(){return Bw},BitmapFontData:function(){return Cw},BitmapText:function(){return Vw},BlobResource:function(){return vx},BlurFilter:function(){return jb},BlurFilterPass:function(){return Hb},Bounds:function(){return Sb},BrowserAdapter:function(){return mp},Buffer:function(){return Am},BufferResource:function(){return Em},BufferSystem:function(){return ub},CLEAR_MODES:function(){return up},COLOR_MASK_BITS:function(){return fp},Cache:function(){return y_},CanvasResource:function(){return vb},Circle:function(){return Vm},Color:function(){return Tv},ColorMatrixFilter:function(){return zb},CompressedTextureResource:function(){return mx},Container:function(){return Pb},ContextSystem:function(){return Dg},CountLimiter:function(){return tw},CubeResource:function(){return gb},DEG_TO_RAD:function(){return Bm},DRAW_MODES:function(){return ep},DisplacementFilter:function(){return Vb},DisplayObject:function(){return kb},ENV:function(){return $f},Ellipse:function(){return Gm},EventBoundary:function(){return t_},EventSystem:function(){return i_},ExtensionType:function(){return um},Extract:function(){return $x},FORMATS:function(){return tp},FORMATS_TO_COMPONENTS:function(){return jx},FXAAFilter:function(){return Gb},FederatedDisplayObject:function(){return o_},FederatedEvent:function(){return qb},FederatedMouseEvent:function(){return $b},FederatedPointerEvent:function(){return Zb},FederatedWheelEvent:function(){return Qb},FillStyle:function(){return xE},Filter:function(){return Pg},FilterState:function(){return qg},FilterSystem:function(){return Qg},Framebuffer:function(){return Fg},FramebufferSystem:function(){return ty},GC_MODES:function(){return cp},GLFramebuffer:function(){return Jg},GLProgram:function(){return Ty},GLTexture:function(){return Ky},GRAPHICS_CURVES:function(){return aE},GenerateTextureSystem:function(){return by},Geometry:function(){return Nm},GeometrySystem:function(){return ry},Graphics:function(){return SE},GraphicsData:function(){return mE},GraphicsGeometry:function(){return _E},HTMLText:function(){return qw},HTMLTextStyle:function(){return Yw},IGLUniformData:function(){return wy},INSTALLED:function(){return ym},INTERNAL_FORMATS:function(){return ox},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:function(){return sx},ImageBitmapResource:function(){return yb},ImageResource:function(){return Hg},LINE_CAP:function(){return rE},LINE_JOIN:function(){return nE},LineStyle:function(){return EE},LoaderParserPriority:function(){return x_},MASK_TYPES:function(){return dp},MIPMAP_MODES:function(){return sp},MSAA_QUALITY:function(){return pp},MaskData:function(){return sy},MaskSystem:function(){return ly},Matrix:function(){return Ym},Mesh:function(){return PE},MeshBatchUvs:function(){return CE},MeshGeometry:function(){return ME},MeshMaterial:function(){return RE},MultisampleSystem:function(){return sb},NineSlicePlane:function(){return FE},NoiseFilter:function(){return Wb},ObjectRenderer:function(){return Cg},ObjectRendererSystem:function(){return cb},ObservablePoint:function(){return ng},PI_2:function(){return Lm},PRECISION:function(){return hp},ParticleContainer:function(){return HE},ParticleRenderer:function(){return zE},PlaneGeometry:function(){return NE},PluginSystem:function(){return vy},Point:function(){return Hm},Polygon:function(){return Wm},Prepare:function(){return pw},Program:function(){return xg},ProjectionSystem:function(){return my},Quad:function(){return Yg},QuadUv:function(){return Kg},RAD_TO_DEG:function(){return Fm},RENDERER_TYPE:function(){return Zf},Rectangle:function(){return zm},RenderTexture:function(){return Wg},RenderTexturePool:function(){return Xg},RenderTextureSystem:function(){return Ey},Renderer:function(){return db},ResizePlugin:function(){return d_},Resource:function(){return xm},RopeGeometry:function(){return DE},RoundedRectangle:function(){return Xm},Runner:function(){return _m},SAMPLER_TYPES:function(){return ip},SCALE_MODES:function(){return ap},SHAPES:function(){return Um},SVGResource:function(){return _b},ScissorSystem:function(){return fy},Shader:function(){return Tg},ShaderSystem:function(){return Hy},SimpleMesh:function(){return BE},SimplePlane:function(){return LE},SimpleRope:function(){return UE},Sprite:function(){return Nb},SpriteMaskFilter:function(){return oy},Spritesheet:function(){return ww},StartupSystem:function(){return jy},State:function(){return gm},StateSystem:function(){return Vy},StencilSystem:function(){return py},SystemManager:function(){return Wy},TARGETS:function(){return np},TEXT_GRADIENT:function(){return VE},TYPES:function(){return rp},TYPES_TO_BYTES_PER_COMPONENT:function(){return Hx},TYPES_TO_BYTES_PER_PIXEL:function(){return zx},TemporaryDisplayObject:function(){return Cb},Text:function(){return ew},TextFormat:function(){return Aw},TextMetrics:function(){return XE},TextStyle:function(){return qE},Texture:function(){return Gg},TextureGCSystem:function(){return Yy},TextureMatrix:function(){return ay},TextureSystem:function(){return qy},TextureUvs:function(){return jg},Ticker:function(){return tb},TickerPlugin:function(){return nb},TilingSprite:function(){return yw},TilingSpriteRenderer:function(){return xw},TimeLimiter:function(){return vw},Transform:function(){return ig},TransformFeedback:function(){return wb},TransformFeedbackSystem:function(){return $y},UPDATE_PRIORITY:function(){return Qy},UniformGroup:function(){return wg},VERSION:function(){return Tb},VideoResource:function(){return Eb},ViewSystem:function(){return Zy},ViewableBuffer:function(){return fm},WRAP_MODES:function(){return op},XMLFormat:function(){return Iw},XMLStringFormat:function(){return Ow},accessibleTarget:function(){return s_},autoDetectFormat:function(){return Mw},autoDetectRenderer:function(){return ib},autoDetectResource:function(){return bm},cacheTextureArray:function(){return $_},checkDataUrl:function(){return E_},checkExtension:function(){return v_},checkMaxIfStatementsInShader:function(){return mm},convertToList:function(){return m_},copySearchParams:function(){return ax},createStringVariations:function(){return X_},createTexture:function(){return B_},createUBOElements:function(){return Ny},curves:function(){return iE},defaultFilterVertex:function(){return ob},defaultVertex:function(){return ab},detectAvif:function(){return Z_},detectCompressedTextures:function(){return ux},detectDefaults:function(){return ex},detectWebp:function(){return Q_},extensions:function(){return dm},filters:function(){return Xb},generateProgram:function(){return Iy},generateUniformBufferSync:function(){return Ly},getFontFamilyName:function(){return I_},getTestContext:function(){return hg},getUBOData:function(){return Dy},graphicsUtils:function(){return kE},groupD8:function(){return tg},isMobile:function(){return Dp},isSingleItem:function(){return b_},loadBitmapFont:function(){return Ww},loadDDS:function(){return Wx},loadImageBitmap:function(){return j_},loadJson:function(){return w_},loadKTX:function(){return Xx},loadSVG:function(){return G_},loadTextures:function(){return V_},loadTxt:function(){return T_},loadWebFont:function(){return O_},parseDDS:function(){return Dx},parseKTX:function(){return Vx},resolveCompressedTextureUrl:function(){return Yx},resolveTextureUrl:function(){return tx},settings:function(){return gp},spritesheetAsset:function(){return kw},uniformParsers:function(){return ag},unsafeEvalSupported:function(){return Fy},utils:function(){return e}});var r={};n.r(r),n.d(r,{hasBrowserEnv:function(){return yz},hasStandardBrowserEnv:function(){return _z},hasStandardBrowserWebWorkerEnv:function(){return xz},navigator:function(){return bz},origin:function(){return Ez}});var i,a=n(7313),o=n.t(a,2),s=n(1739);function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e){var t=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===u(t)?t:String(t)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c(r.key),r)}}function d(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Qp){return!1}}();return function(){var n,r=v(e);if(t){var i=v(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===u(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}(this,n)}}function y(e,t,n){return(t=c(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){return e.TEST="TEST",e.TEST_ASYNC="TEST_ASYNC",e.TOOLBAR_COMMAND="TOOLBAR_COMMAND",e.ADD_FILE="ADD_FILE",e.UPLOAD_FILE="UPLOAD_FILE",e}({}),_=function(e){return e.SAVE="SAVE",e.SAVE_LAYOUT="SAVE_LAYOUT",e}({}),x=function(e){return e.JPG="jpg",e.JPEG="jpeg",e.PNG="png",e.MP3="mp3",e.JSON="json",e.SVG="svg",e.SPRITE_SHEET="spriteSheet",e.SUB_TEXTURE="subTexture",e.MISSING_IMAGE="missingImage",e}({}),E=function(e){return e[e.Normal=0]="Normal",e[e.Add=1]="Add",e[e.Alpha=2]="Alpha",e[e.Darken=3]="Darken",e[e.Difference=4]="Difference",e[e.Erase=5]="Erase",e[e.HardLight=6]="HardLight",e[e.Invert=7]="Invert",e[e.Layer=8]="Layer",e[e.Lighten=9]="Lighten",e[e.Multiply=10]="Multiply",e[e.Overlay=11]="Overlay",e[e.Screen=12]="Screen",e[e.Subtract=13]="Subtract",e}({}),w=function(e){return e[e.IMAGE=0]="IMAGE",e[e.BOUND_BOX=1]="BOUND_BOX",e[e.MESH=2]="MESH",e[e.ARMATURE=3]="ARMATURE",e[e.SHAPE=4]="SHAPE",e[e.TEXT=5]="TEXT",e}({}),T=function(e){return e[e.AUTO=0]="AUTO",e[e.CLOCKWISE=1]="CLOCKWISE",e[e.COUNTER_CLOCKWISE=-1]="COUNTER_CLOCKWISE",e}({}),S=function(e){return e.X="x",e.Y="y",e.SCALE_X="scaleX",e.SCALE_Y="scaleY",e.ROTATION="rotation",e.COLOR="color",e.ALPHA="alpha",e.VISIBLE="visible",e.TEXT="text",e.SHAPE="shape",e.PROGRESS="progress",e.SKEW_X="skewX",e.SKEW_Y="skewY",e.PLAY="play",e.VOLUME="volume",e.EVENT="event",e.MIX="mix",e.DISPLAY_INDEX="displayIndex",e.Z_ORDER="zOrder",e.FFD="ffd",e.TRANSLATE="translate",e.SCALE="scale",e.ROTATE="rotate",e.IK="ik",e}({}),k=[S.X,S.Y,S.SCALE_X,S.SCALE_Y,S.ROTATION,S.SKEW_X,S.SKEW_Y,S.ALPHA,S.COLOR,S.VISIBLE,S.PLAY,S.PROGRESS,S.SHAPE,S.TEXT,S.VOLUME,S.TRANSLATE,S.SCALE,S.ROTATE],C=(y(i={},S.X,0),y(i,S.Y,0),y(i,S.SCALE_X,1),y(i,S.SCALE_Y,1),y(i,S.ROTATION,0),y(i,S.SKEW_X,0),y(i,S.SKEW_Y,0),y(i,S.ALPHA,1),y(i,S.COLOR,4294967295),y(i,S.VISIBLE,!0),y(i,S.PLAY,""),y(i,S.PROGRESS,1),y(i,S.SHAPE,void 0),y(i,S.TEXT,""),y(i,S.VOLUME,1),y(i,"width",0),y(i,"height",0),y(i,S.TRANSLATE,{x:0,y:0}),y(i,S.SCALE,{x:1,y:1}),y(i,S.ROTATE,{rotate:0}),y(i,S.FFD,{}),y(i,S.IK,{bendPositive:!0,weight:1}),i),A=function(e){return e.ARMATURE="Armature",e.ANIMATION="Animation",e.SLOT="Slot",e.BONE="Bone",e.SKIN="Skin",e.DISPLAY="Display",e.SUB_ARMATURE="SubArmature",e.BOUNDING_BOX="BoundingBox",e.JS="JS",e.IMAGE="Image",e.BUTTON="Button",e.INPUT="Input",e.TEXT="Text",e.RECT="Rect",e.SHAPE="Shape",e.DRAGONBONES="Dragonbones",e.PARTICLE="Particle",e.SHEET="Sheet",e.SOUNDCHANNEL="SoundChannel",e.VIDEO="Video",e.AUDIO="Audio",e.MICROPHONE="Microphone",e.GRAPHIC="Graphic",e.INSTANCE="Instance",e.MOVIE="Movie",e.MOVIECLIP="movieclip",e.SHOT="Shot",e}({}),I=function(e){return e[e.BONE=0]="BONE",e[e.SLOT=1]="SLOT",e[e.TIMELINE=2]="TIMELINE",e[e.ARMATURE=3]="ARMATURE",e}({}),O=function(e){return e.MODIFY_TIMELINE="MODIFY_TIMELINE",e.PRE_DELETE_FRAMES="PRE_DELETE_FRAMES",e.DELETE_FRAMES="DELETE_FRAMES",e.CHECK_OVERRIDE_FRAME="CHECK_OVERRIDE_FRAME",e.CHANGE_CHILD_ANIMATED_PROPERTY="CHANGE_CHILD_ANIMATED_PROPERTY",e.ADD_KEY="ADD_KEY",e.UPDATE_ANIMATED_PROPERTY="UPDATE_ANIMATED_PROPERTY",e.CACHE_ANIMATED_PROPERTY="CACHE_ANIMATED_PROPERTY",e.CALCULATE_ANIMATED_PROPERTY="CALCULATE_ANIMATED_PROPERTY",e.ADD_ANIMATION_INTERACTIVE="ADD_ANIMATION_INTERACTIVE",e.ADD_ANIMATION="ADD_ANIMATION",e.REMOVE_ANIMATION_INTERACTIVE="REMOVE_ANIMATION_INTERACTIVE",e.REMOVE_ANIMATION="REMOVE_ANIMATION",e.CLONE_ANIMATION_INTERACTIVE="CLONE_ANIMATION_INTERACTIVE",e.RENAME_ANIMATION_INTERACTIVE="RENAME_ANIMATION_INTERACTIVE",e.MODIEY_FRAMES_CURVE="ACTION_MODIEY_FRAMES_CURVE",e}({}),P=function(e){return e.REMOVE_ANIMATION="MUTATION_REMOVE_ANIMATION",e.ADD_ANIMATION="MUTATION_ADD_ANIMATION",e.ADD_ANIMATIONS="MUTATION_ADD_ANIMATIONS",e.DELETE_ANIMATIONS="MUTATION_DELETE_ANIMATIONS",e.SELECT_ANIMATION="MUTATION_SELECT_ANIMATION",e.RENAME_ANIMATION="MUTATION_RENAME_ANIMATION",e.AUTO_KEY="MUTATION_AUTO_KEY",e.DELETE_FRAMES="MUTATION_DELETE_FRAMES",e.MODIFY_FRAMES="MODIFY_FRAMES",e}({}),M=function(e){return e.ADD_FILE="ACTION_ADD_FILE",e.LOAD_DRAGON_BONES_DATA="ACTION_LOAD_DRAGON_BONES_DATA",e.LOAD_DRAGON_BONES_JSON_DATA="ACTION_LOAD_DRAGON_BONES_JSON_DATA",e}({}),R=function(e){return e.ADD_ASSET="MUTATION_ADD_ASSET",e.DEL_ASSET="MUTATION_DEL_ASSET",e}({}),N=function(e){return e.ADD_ARMATURES="MUTATION_ADD_ARMATURES",e.DELETE_ARMATURES="MUTATION_DELETE_ARMATURES",e.SELECT_ARMATURE="MUTATION_SELECT_ARMATURE",e.CHANGE_SLOT_ORDER="MUTATION_CHANGE_SLOT_ORDER",e.CACHE_SLOT_ORDER="MUTATION_CACHE_SLOT_ORDER",e.UPDATE_PROPERTIES="MUTATION_ARMATURE_UPDATE_PROPERTIES",e}({}),D=function(e){return e.CHANGE_SLOT_ORDER="ACTION_CHANGE_SLOT_ORDER",e.UPDATE_PROPERTIES="ACTION_ARMATURE_UPDATE_PROPERTIES",e.ADD_ARMATURE="ACTION_ADD_ARMATURE",e.DELETE_ARMATURES="ACTION_DELETE_ARMATURES",e}({}),L=function(e){return e.SELECT_ONE_SLOT="ACTION_SELECT_ONE_SLOT",e.SELECT_SLOTS="SELECT_SLOTS",e.TRANSFORM_START="TRANSFORM_START",e.TRANSFORM_END="TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="ACTION_SLOT_UPDATE_LOCAL_TRANSFORMS",e.ADD_SLOT="SLOT_ACTION_ADD_SLOT",e.ADD_DISPLAY="SLOT_ACTION_ADD_DISPLAY",e.SET_PARENT="SLOT_ACTION_SET_PARENT",e.DELETE_SLOTS="SLOT_ACTION_DELETE_SLOTS",e.PICK_SLOT_PARENT="ACTION_SLOT_PICK_SLOT_PARENT",e.PICK_SLOT_PARENT_END="ACTION_SLOT_PICK_SLOT_PARENT_END",e.UPDATE_PROPERTIES="ACTION_SLOT_UPDATE_PROPERTIES",e}({}),F=function(e){return e.OVER_SLOT="MUTATION_SLOT_OVER_SLOT",e.SELECT_SLOTS="MUTATION_SLOT_SELECT_SLOTS",e.TRANSFORM_START="MUTATION_SLOT_TRANSFORM_START",e.TRANSFORM_END="MUTATION_SLOT_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="MUTATION_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="MUTATION_SLOT_UPDATE_LOCAL_TRANSFORMS",e.ADD_SLOT="MUTATION_SLOT_ADD_SLOT",e.ADD_DISPLAY="MUTATION_SLOT_ADD_DISPLAY",e.UPDATE_PROPERTIES="MUTATION_SLOT_UPDATE_PROPERTIES",e.SET_PARENT="MUTATION_SLOT_SET_PARENT",e.DELETE_SLOTS="MUTATION_SLOT_DELETE_SLOTS",e.UPDATE_CACHE_PROPERTIES="MUTATION_SLOT_UPDATE_CACHE_PROPERTIES",e}({}),B=function(e){return e.UPDATE_MESH="ACTION_UPDATE_MESH",e.RESET_MESH="ACTION_RESET_MESH",e.ADD_RIG_BONE="ACTION_ADD_RIG_BONE",e.DELETE_RIG_BONES="ACTION_DELETE_RIG_BONES",e.SELECT_MESH_POINTS="ACTION_SELECT_MESH_POINTS",e.AUTO_WEIGHT="ACTION_AUTO_WEIGHT",e}({}),U=function(e){return e.SELECT_MESH_POINTS="MUTATION_SELECT_MESH_POINTS",e.UPDATE_MESH="MUTATION_UPDATE_MESH",e.UPDATE_CACHE_FFD="MUTATION_UPDATE_CACHE_FFD",e.UPDATE_RIG_BONE="MUTATION_UPDATE_RIG_BONE",e}({}),H=function(e){return e.UPDATE_PROPERTIES="MUTATION_DISPLAY_UPDATE_PROPERTIES",e.SELECT_DISPLAY="MUTATION_DISPLAY_SELECT_DISPLAY",e.SET_PARENT="MUTATION_DISPLAY_SET_PARENT",e}({}),j=function(e){return e.SET_PARENT="ACTION_DISPLAY_SET_PARENT",e}({}),z=function(e){return e.SELECT_ONE_BONE="ACTION_SELECT_ONE_BONE",e.SELECT_BONES="ACTION_BONE_SELECT_BONES",e.TRANSFORM_START="ACTION_BONE_TRANSFORM_START",e.TRANSFORM_END="ACTION_BONE_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="ACTION_BONE_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="ACTION_BONE_UPDATE_LOCAL_TRANSFORMS",e.UPDATE_GLOBAL_TRANSFORMS="ACTION_BONE_UPDATE_GLOBAL_TRANSFORMS",e.UPDATE_ROTATE_FRAME="ACTION_UPDATE_ROTATE_FRAME",e.ADD_BONE="ACTION_BONE_ADD_BONE",e.SET_PARENT="ACTION_BONE_SET_PARENT",e.ADD_IK_AT_TAIL="ACTION_BONE_ADD_IK_AT_TAIL",e.ADD_IK_BY_TARGET="ACTION_BONE_ADD_IK_BY_TARGET",e.DELETE_IKS="ACTION_BONE_DELETE_IKS",e.UPDATE_IK="ACTION_BONE_UPDATE_IK",e.PICK_IK_TARGET="ACTION_BONE_PICK_IK_TARGET",e.PICK_IK_TARGET_END="ACTION_BONE_PICK_IK_TARGET_END",e.DELETE_BONES="ACTION_BONE_DELETE_BONE",e.PICK_BONE_PARENT="ACTION_BONE_PICK_BONE_PARENT",e.PICK_BONE_PARENT_END="ACTION_BONE_PICK_BONE_PARENT_END",e}({}),V=function(e){return e.OVER_BONE="MUTATION_BONE_OVER_BONE",e.SELECT_BONES="MUTATION_BONE_SELECT_BONES",e.TRANSFORM_START="MUTATION_BONE_TRANSFORM_START",e.TRANSFORM_END="MUTATION_BONE_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="MUTATION_BONE_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="MUTATION_BONE_UPDATE_LOCAL_TRANSFORMS",e.UPDATE_CACHE_TRANSFORMS="MUTATION_BONE_UPDATE_CACHE_TRANSFORMS",e.UPDATE_PROPERTIES="MUTATION_BONE_UPDATE_PROPERTIES",e.ADD_BONE="MUTATION_BONE_ADD_BONE",e.SET_PARENT="MUTATION_BONE_SET_PARENT",e.ADD_IK="MUTATION_BONE_ADD_IK",e.UPDATE_IK="MUTATION_BONE_UPDATE_IK",e.UPDATE_CACHE_IK="MUTATION_BONE_UPDATE_CACHE_IK",e.DELETE_BONES="MUTATION_BONE_DELETE_BONES",e.DELETE_IKS="MUTATION_BONE_DELETE_IKS",e}({}),G=function(e){return e.SWITCH_MODE="MUTATION_SWITCH_MODE",e.SWITCH_TOOL="MUTATION_SWITCH_TOOL",e.CHANGE_BONE_SLOT_CONTROL="MUTATION_CHANGE_BONE_SLOT_CONTROL",e.OPEN_EXPORT_WINDOW="MUTATION_OPEN_EXPORT_WINDOW",e.CLOSE_EXPORT_WINDOW="MUTATION_CLOSE_EXPORT_WINDOW",e.OPEN_IMPORT_WINDOW="MUTATION_OPEN_IMPORT_WINDOW",e.CLOSE_IMPORT_WINDOW="MUTATION_CLOSE_IMPORT_WINDOW",e.OPEN_PREVIEW_WINDOW="MUTATION_OPEN_PREVIEW_WINDOW",e.CLOSE_PREVIEW_WINDOW="MUTATION_CLOSE_PREVIEW_WINDOW",e.UNDO="MUTATION_UNDO",e.REDO="MUTATION_REDO",e.UPDATE_MESH_TOOL="MUTATION_UPDATE_MESH_TOOL",e.UPDATE_MESH_TEMPLATE_OUTLINE="MUTATION_UPDATE_MESH_TEMPLATE_OUTLINE",e.SET_DEFAULT_TOOLTIP_TOP="MUTATION_SET_DEFAULT_TOOLTIP_TOP",e.SELECT_RIGGING_BONE="MUTATION_SELECT_RIGGING_BONE",e.FLAG_AUTO_WEIGHT="MUTATION_FLAG_AUTO_WEIGHT",e.LAYOUT_CHANGE="MUTATION_LAYOUT_CHANGE",e.UPDATE_LAYOUT="MUTATION_UPDATE_LAYOUT",e}({}),W=function(e){return e.UNDO="ACTION_UNDO",e.REDO="ACTION_REDO",e.CHANGE_BONE_SLOT_CONTROL="ACTION_CHANGE_BONE_SLOT_CONTROL",e.UPDATE_SIZE="UPDATE_SIZE",e.UPDATE_POSITION="UPDATE_POSITION",e.UPDATE_SCALE="UPDATE_SCALE",e.MOUSE_MOVE="MOUSE_MOVE",e.MOUSE_DOWN="MOUSE_DOWN1",e.MOUSE_UP="MOUSE_UP",e.RIGHT_DOWN="RIGHT_DOWN",e.RIGHT_UP="RIGHT_UP",e.DOUBLE_CLICK="DOUBLE_CLICK",e.MOUSE_OVER="MOUSE_OVER",e.MOUSE_OUT="MOUSE_OUT",e.SELECT_MOVE_START="SELECT_MOVE_START",e.SWITCH_MODE="SWITCH_MODE",e.SWITCH_TOOL="SWITCH_TOOL",e.SWITCH_FULL_SCREEN="SWITCH_FULL_SCREEN",e.RESET_SCALE="RESET_SCALE",e.LAYOUT_CHANGE="LAYOUT_CHANGE",e.SWITCH_AUTO_KEY="SWITCH_AUTO_KEY",e.SWITCH_AUTO_FIRST_FRAME="SWITCH_AUTO_FIRST_FRAME",e.LOCK_ITEMS="LOCK_ITEMS",e.HIDE_ITEMS="HIDE_ITEMS",e.EDIT_SHAPE="EDIT_SHAPE",e.EDIT_SHAPE_ANIMATION="EDIT_SHAPE_ANIMATION",e.OPEN_MESH_EDIT_TOOL="OPEN_MESH_EDIT_TOOL",e.CLOSE_MESH_EDIT_TOOL="CLOSE_MESH_EDIT_TOOL",e.OPEN_RIGGING_TOOL="OPEN_RIGGING_TOOL",e.CLOSE_RIGGING_TOOL="CLOSE_RIGGING_TOOL",e.DELETE_SELECTED_BONES_AND_SLOTS="ACTION_DELETE_SELECTED_BONES_AND_SLOTS",e.CLEAR_LOCAL_DATA="ACTION_CLEAR_LOCAL_DATA",e}({}),X=function(e){return e[e.POSE=0]="POSE",e[e.ANIMATION=1]="ANIMATION",e[e.DRAW_SHAPE=2]="DRAW_SHAPE",e[e.ANIMATION_DRAW_SHAPE=3]="ANIMATION_DRAW_SHAPE",e[e.ACTION=4]="ACTION",e}({}),Y=function(e){return e.CHANGE_NAME="CHANGE_NAME",e.CHANGE_AGE="changeAge",e.USER_LOGIN="USER_LOGIN",e.USER_LOGIN_SUCCESS="USER_LOGIN_SUCCESS",e.GET_USER_INFO="GET_USER_INFO",e.GET_USER_INFO_SUCCESS="GET_USER_INFO_SUCCESS",e.GET_USER_ASSETS="GET_USER_ASSETS",e.GET_USER_ASSETS_SUCCESS="GET_USER_ASSETS_SUCCESS",e.SAVE="SAVE",e.SAVE_SUCCESS="SAVE_SUCCESS",e.LOAD="LOAD",e.LOAD_SUCCESS="LOAD_SUCCESS",e.UPLOAD_FILE_TO_SERVER="UPLOAD_FILE_TO_SERVER",e.LOAD_ASSETS_COMPLETE="LOAD_ASSETS_COMPLETE",e}({}),K=function(e){return e.OVER_BONE="OVER_BONE",e.OUT_BONE="OUT_BONE",e.OVER_SLOT="OVER_SLOT",e.OUT_SLOT="OUT_SLOT",e.SELECT_ARMATURE="EVENT_SELECT_ARMATURE",e}({}),q=function(e){return e.OVER_FRAME="OVER_FRAME",e.UPDATE_FRAME_BLOCK_START="UPDATE_FRAME_BLOCK_START",e.UPDATE_FRAME_BLOCK_END="UPDATE_FRAME_BLOCK_END",e.MOVE_BLOCK="MOVE_BLOCK",e.SCALE_LEFT_BLOCK="SCALE_LEFT_BLOCK",e.SCALE_RIGHT_BLOCK="SCALE_RIGHT_BLOCK",e.PLAY="PLAY",e}({}),$=function(e){return e.SELECT_FRAME="SELECT_FRAME",e.UPDATE_SCALE="DOPESHEET_UPDATE_SCALE",e.UPDATE_OFFSET="DOPESHEET_UPDATE_OFFSET",e.UPDATE_LABEL_WIDTH="DOPESHEET_UPDATE_LABEL_WIDTH",e.UPDATE_SIZE="DOPESHEET_UPDATE_SIZE",e.UPDATE_FRAME="DOPESHEET_UPDATE_FRAME",e.SWITCH_FILTER="SWITCH_FILTER",e}({}),Z=function(e){return e[e.SELECT=0]="SELECT",e[e.ADD_BONE=1]="ADD_BONE",e[e.POSE_TOOL=2]="POSE_TOOL",e[e.WEIGHT_TOOL=3]="WEIGHT_TOOL",e[e.IK_PICK_TARGET_TOOL=4]="IK_PICK_TARGET_TOOL",e[e.PICK_BONE_PARENT_TOOL=5]="PICK_BONE_PARENT_TOOL",e[e.PICK_SLOT_PARENT_TOOL=6]="PICK_SLOT_PARENT_TOOL",e[e.MESH_EDIT_TOOL=7]="MESH_EDIT_TOOL",e[e.RIGGING_TOOL=8]="RIGGING_TOOL",e}({}),Q=function(e){return e[e.EDIT=0]="EDIT",e[e.ADD=1]="ADD",e[e.DELETE=2]="DELETE",e[e.DRAW=3]="DRAW",e}({}),J=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;this._retain(),y2.instance.eventBus.once(Y.LOAD_SUCCESS,(function(){e._release(!0)}),this),y2.instance.store.dispatch(Y.LOAD)}}]),n}(),ee=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;this._retain(),y2.instance.eventBus.once(Y.GET_USER_ASSETS_SUCCESS,(function(){e._release(!0)}),this),y2.instance.store.dispatch(Y.GET_USER_ASSETS)}}]),n}(),te=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;this._retain(),y2.instance.eventBus.once(Y.GET_USER_INFO_SUCCESS,(function(){e._release(!0)}),this),y2.instance.store.dispatch(Y.GET_USER_INFO)}}]),n}(),ne=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){}}]),n}(),re=JSON.parse('{"name":"main","isVertical":false,"mainIndex":0,"width":1600,"height":793,"children":[{"name":"box2","isVertical":false,"mainIndex":0,"width":1354,"height":793,"children":[{"name":"leftArea","isVertical":false,"mainIndex":0,"width":270,"height":793,"panels":[{"name":"libraryPanel","minWidth":245,"maxWidth":400},{"name":"outlinePanel","minWidth":245,"maxWidth":400},{"name":"scenePanel","minWidth":245,"maxWidth":400}],"panelIndex":0},{"name":"box3","isVertical":true,"mainIndex":0,"width":1083,"height":793,"children":[{"name":"box5","isVertical":false,"mainIndex":0,"width":1083,"height":793,"panels":[{"name":"stagePanel"}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0},{"name":"rightArea","isVertical":false,"mainIndex":0,"width":300,"height":793,"panels":[{"name":"propertyPanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}'),ie=n.t(re,2),ae=JSON.parse('{"name":"main","isVertical":true,"mainIndex":0,"width":1600,"height":793,"children":[{"name":"box2","isVertical":false,"mainIndex":0,"width":1600,"height":567,"children":[{"name":"scenePanel","isVertical":false,"mainIndex":0,"width":270,"height":567,"panels":[{"name":"outlinePanel","minWidth":245,"maxWidth":400},{"name":"scenePanel","minWidth":245,"maxWidth":400}],"panelIndex":0},{"name":"box3","isVertical":false,"mainIndex":0,"width":1329,"height":567,"children":[{"name":"box4","isVertical":false,"mainIndex":0,"width":1083,"height":567,"panels":[{"name":"stagePanel"}],"panelIndex":0},{"name":"propertyPanel","isVertical":false,"mainIndex":0,"width":245,"height":567,"panels":[{"name":"propertyPanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0},{"name":"dopesheetPanel","isVertical":false,"mainIndex":0,"width":1600,"height":225,"children":[{"name":"dopesheetPanel","isVertical":false,"mainIndex":0,"width":1353,"height":225,"panels":[{"name":"dopesheetPanel"}],"panelIndex":0},{"name":"animationPanel","isVertical":false,"mainIndex":0,"width":246,"height":225,"panels":[{"name":"animationPanel","minWidth":245,"maxWidth":400},{"name":"curvePanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0}'),oe=n.t(ae,2),se=function(e){return e[e.SPLIT_LINE=0]="SPLIT_LINE",e[e.PROPERTY_ITEM=1]="PROPERTY_ITEM",e}({}),le=function(e){return e[e.CONST=0]="CONST",e[e.BOOLEAN=1]="BOOLEAN",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.STRING=4]="STRING",e[e.ENUM=5]="ENUM",e[e.COLOR=6]="COLOR",e[e.ASSET_IMAGE=7]="ASSET_IMAGE",e[e.ASSET_SOUND=8]="ASSET_SOUND",e[e.ASSET_VIDEO=9]="ASSET_VIDEO",e[e.OBJECT=10]="OBJECT",e[e.ARRAY=11]="ARRAY",e[e.NONE=12]="NONE",e}({}),ue=function(e){return e.StringInput="StringInput",e.IntInput="IntInput",e.FloatInput="FloatInput",e.Label="Label",e.ObjectInput="ObjectInput",e.DropdownInput="DropdownInput",e.ColorInput="ColorInput",e.BooleanInput="BooleanInput",e.BooleanSwitch="BooleanSwitch",e.BooleanCheck="BooleanCheck",e.ButtonGroup="ButtonGroup",e.Button="Button",e.ButtonLabel="ButtonLabel",e.Gap="Gap",e.SliderInput="SliderInput",e.NumberSliderInput="NumberSliderInput",e.RiggingList="RiggingList",e}({}),ce="\u65b0\u5efa\u52a8\u753b",he="\u65b0\u5efa\u9aa8\u67b6",de={history:{enable:!1,branches:[],curBranch:""},config:{timeline:{MAX_GAP:40,MIN_GAP:10,TWO_LABEL_GAP:25,FIVE_LABEL_GAP:15,FONT_SIZE:10,SCALE_LEVEL:[1,2,4,10,20],LABEL_LEVEL:[1,2,5],ZOOM_RATE:.8,LABEL_HEIGHT:40,HIGH_FRAME_HEIGHT:Math.round(20),LOW_FRAME_HEIGHT:Math.round(12),POINTER_HEIGHT:Math.round(20)+1,TEXT_Y:4,FIRST_X:10,ITEM_HEIGHT:20,LABEL_LEFT_WIDTH:200}},user:{name:"",sex:1,age:1,phone:1,email:""},editor:{idGen:2e3,previewing:!1,lastModify:1,saveTime:1,layout:{poseLayout:ie,animationLayout:oe},over:{overBone:-1,overSlotId:-1,overFrameIds:[]},dopesheet:{autoKey:!0,autoFirstFrame:!0,filter:!0,curTime:0,scale:.262144,offset:0,labelLevel:5,scaleLevel:1,curGap:10,labelWidth:1,startIndex:0,endIndex:100,width:20,height:20},stage:{transforming:!1,ruleSize:20,width:0,height:0,showRule:!0,scale:1,x:0,y:0,mouseCanvasX:0,mouseCanvasY:0,mouseStageX:0,mouseStageY:0,cameraWidth:0,cameraHeight:0}},runtime:{editing:{editMode:X.POSE,stageTool:Z.SELECT,lastStageTool:Z.SELECT,editingArmatureId:101,selectedBoneIds:[],selectedSlotIds:[],selectedMeshPointIds:[],selectedAnimationId:1001,selectedFrameIds:[],lockBoneSlotIds:[],hideBoneSlotIds:[],selectedDisplayId:0,boneSlotControl:{boneVisible:!0,boneSelectEnable:!0,boneInheritEnable:!0,slotVisible:!0,slotSelectEnable:!0,slotInheritEnable:!0},meshEditTool:{curTool:Q.EDIT,autoOutlineNum:1,deformed:!0}},dragonbones:{name:"dragonbones-web",assetMap:{},armatureMap:{101:{id:101,name:"armature1",bones:{ids:[201],map:{201:{name:"root",id:201,parentId:0,length:0,transform:{x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0}}}},slots:{ids:[],map:{}},constraint:{ik:{}},skins:{ids:[],map:{}},animations:[]}},animationMap:{1001:{id:1001,name:"animation1"}}}},library:{files:{}}},fe=(Math.round(20),Math.round(12),Math.round(20),X.POSE,Z.SELECT,Z.SELECT,Q.EDIT,x.PNG,x.PNG,x.PNG,Math.PI,Math.PI,w.IMAGE,w.MESH,S.ROTATE,S.TRANSLATE,S.COLOR,S.DISPLAY_INDEX,S.EVENT,[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u5927\u5c0f",items:[{property:"height",type:le.INT,componentType:ue.IntInput,componentProp:{}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9ad8"}},{property:"width",type:le.INT,componentType:ue.IntInput,componentProp:{}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u5bbd"}}]},{type:se.PROPERTY_ITEM,label:"\u5750\u6807",items:[{property:"y",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"x",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"scaleX",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.01,fixed:2}}]}]),pe={name:"bone",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:fe},{name:"other",label:"\u5176\u4ed6",content:[{type:se.PROPERTY_ITEM,label:"\u6d4b\u8bd5\u4e0b\u62c9\u83dc\u5355",items:[{property:"test",type:le.STRING,componentType:ue.DropdownInput,componentProp:{itemFunName:"getTestItems",items:[{label:"aa",value:"aa"},{label:"bb",value:"bb"},{label:"cc",value:"cc"}]}}]}]}]},ve={name:"slot",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:fe}]},me={name:"armature",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"type",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9aa8\u67b6",width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5e27\u7387",items:[{property:"fps",type:le.CONST,componentType:ue.Label,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u9ed8\u8ba4\u64ad\u653e",items:[{property:"defaultAnimation",type:le.CONST,componentType:ue.DropdownInput,componentProp:{itemFunName:"getAllAnimationMenu"}}]}]},{name:"canvas",label:"\u753b\u5e03",content:[{type:se.PROPERTY_ITEM,label:"\u662f\u5426\u663e\u793a",items:[{property:"canvasShow",type:le.BOOLEAN,componentType:ue.BooleanSwitch,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"canvasY",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"canvasX",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u5927\u5c0f",items:[{property:"canvasHeight",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9ad8"}},{property:"canvasWidth",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u5bbd"}}]},{type:se.PROPERTY_ITEM,label:"\u80cc\u666f\u8272",items:[{property:"type",type:le.BOOLEAN,componentType:ue.BooleanSwitch,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u989c\u8272",items:[{property:"canvasColor",type:le.COLOR,componentType:ue.ColorInput,componentProp:{}}]}]}]};function ge(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=ge(e[n]);return t}if(e instanceof Object){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=ge(e[i]));return t}if("object"===typeof e){for(var a in t={},e)t[a]=ge(e[a]);return t}throw new Error("Unable to copy obj! Its type isn't supported.")}function ye(){ye=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof f?t:f,o=Object.create(a.prototype),s=new k(i||[]);return r(o,"_invoke",{value:E(e,n,s)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=c;var d={};function f(){}function p(){}function v(){}var m={};l(m,a,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==t&&n.call(y,a)&&(m=y);var b=v.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,s){var l=h(e[r],e,a);if("throw"!==l.type){var c=l.arg,d=c.value;return d&&"object"==u(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,o,s)}),(function(e){i("throw",e,o,s)})):t.resolve(d).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,s)}))}s(l.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return A()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(b),l(b,s,"Generator"),l(b,a,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(s&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function be(e,t,n,r,i,a,o){try{var s=e[a](o),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){be(a,r,i,o,s,"next",e)}function s(e){be(a,r,i,o,s,"throw",e)}o(void 0)}))}}var xe=n(9080),Ee=Symbol.for("Dexie"),we=globalThis[Ee]||(globalThis[Ee]=xe);if(xe.semVer!==we.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(xe.semVer," and ").concat(we.semVer));we.liveQuery,we.mergeRanges,we.rangesOverlap,we.RangeSet,we.cmp,we.Entity,we.PropModSymbol,we.PropModification,we.replacePrefix,we.add,we.remove;var Te=we,Se=function(){function e(t){l(this,e),this.db=void 0,this.dbName="dragonbonesLocalDB",this.dbVersion=1,this.fileTableId=0,this.maxFileId=100,this.curUser=void 0,e._sym}return d(e,[{key:"init",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Te(this.dbName),this.db=t,t.version(this.dbVersion).stores({tableMaxId:"++id, maxId",tableFiles:"++id, name, type, data, url, user, modifyTime",tableUser:"++id, name, &uuid",tableDocument:"++id, &name, lastModify, user, data"}),n=0,e.next=6,t.tableMaxId.where("id").above(0).first();case 6:if((r=e.sent)&&(n=r.maxId,this.maxFileId=n,this.fileTableId=r.id),0!==n){e.next=12;break}return e.next=11,this.addMaxId(this.maxFileId);case 11:this.fileTableId=e.sent;case 12:return e.next=14,this.getUserData();case 14:return i=e.sent,this.curUser=i,e.next=18,this.getFileByName("play_btn");case 18:if(e.sent){e.next=26;break}return e.next=22,this.addFile("play_btn","png","","https://s.vipkidstatic.com/vf/book/play_btn.png");case 22:return a=e.sent,e.next=25,this.getFileById(a);case 25:e.sent;case 26:return e.next=28,this.getFileByName("record_btn");case 28:if(e.sent){e.next=36;break}return e.next=32,this.addFile("record_btn","png","","https://s.vipkidstatic.com/vf/book/record_btn.png");case 32:return o=e.sent,e.next=35,this.getFileById(o);case 35:e.sent;case 36:return e.abrupt("return",i);case 37:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(){var e=_e(ye().mark((function e(t,n,r,i){var a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Date.now(),e.next=3,this.db.tableFiles.add({name:t,type:n,data:r,url:i,user:this.curUser.uuid,modifyTime:a});case 3:return o=e.sent,this.maxFileId=o,this.updateMaxFileId(o),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"addMaxId",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableMaxId.add({maxId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMaxFileId",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableMaxId.update(this.fileTableId,{maxId:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileByName",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.where("name").equals(t).toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileById",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFiles",value:function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFileById",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDocumentData",value:function(){var e=_e(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,this.getUserData();case 3:return i=e.sent,e.next=6,this.db.tableDocument.add({user:i.uuid,data:n,name:t,lastModify:r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDocumentDataById",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDocumentDataByName",value:function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.where("name").equals(t).first();case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateDocumentData",value:function(){var e=_e(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,this.getDocumentDataByName(t);case 3:if(i=e.sent){e.next=8;break}return e.next=7,this.addDocumentData(t,n);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,this.db.tableDocument.update(i.id,{data:n,lastModify:r});case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteDocumentDataById",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDocumentDataByName",value:function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocumentDataByName(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,this.db.tableDocument.delete(n.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableUser.where("id").above(0).first();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:return n="dragonbonesUser",r=this.getFingerPrint(),e.next=11,this.addUserData(n,r);case 11:return i=e.sent,e.abrupt("return",{id:i,name:n,uuid:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserData",value:function(){var e=_e(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableUser.add({name:t,uuid:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFingerPrint",value:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="dragonbonesWeb";t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.rotate(.05),t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17);var r=e.toDataURL().replace("data:image/png;base64,",""),i=atob(r);return this.bin2hex(i.slice(-16,-12))}},{key:"bin2hex",value:function(e){for(var t="",n=0;n<e.length;n++)t+=this.int16ToHex(e.charCodeAt(n));return t}},{key:"int16ToHex",value:function(e){return(e+65536).toString(16).substr(-4).toUpperCase()}},{key:"clearAll",value:function(){this.db.tableFiles.clear(),this.db.tableMaxId.clear(),this.db.tableUser.clear(),this.db.tableDocument.clear()}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e(e._sym)),e._instance}}]),e}();function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ce(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ae(e,t){if(e){if("string"===typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function Ie(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||Ce(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Se._instance=void 0,Se._sym=Symbol(1);var Me,Re=n(1168),Ne=Pe({},n.t(Re,2)),De=Ne.version,Le=Ne.render,Fe=Ne.unmountComponentAtNode;try{Number((De||"").split(".")[0])>=18&&(Me=Ne.createRoot)}catch(Qp){}function Be(e){var t=Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===u(t)&&(t.usingClientEntryPoint=e)}var Ue="__rc_react_root__";function He(e,t){Me?function(e,t){Be(!0);var n=t[Ue]||Me(t);Be(!1),n.render(e),t[Ue]=n}(e,t):function(e,t){Le(e,t)}(e,t)}function je(e){return ze.apply(this,arguments)}function ze(){return(ze=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[Ue])||void 0===e||e.unmount(),delete t[Ue]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){Fe(e)}function Ge(e){return We.apply(this,arguments)}function We(){return(We=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Me){e.next=2;break}return e.abrupt("return",je(t));case 2:Ve(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Xe=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function Ye(e,t,n){var r=a.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}var Ke={},qe=[];function $e(e,t){}function Ze(e,t){}function Qe(e,t,n){t||Ke[n]||(e(!1,n),Ke[n]=!0)}function Je(e,t){Qe($e,e,t)}Je.preMessage=function(e){qe.push(e)},Je.resetWarned=function(){Ke={}},Je.noteOnce=function(e,t){Qe(Ze,e,t)};var et=Je;var tt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=r.has(t);if(et(!o,"Warning: There may be circular references"),o)return!1;if(t===i)return!0;if(n&&a>1)return!1;r.add(t);var s=a+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l],s))return!1;return!0}if(t&&i&&"object"===u(t)&&"object"===u(i)){var c=Object.keys(t);return c.length===Object.keys(i).length&&c.every((function(n){return e(t[n],i[n],s)}))}return!1}(e,t)},nt=function(){function e(t){l(this,e),y(this,"instanceId",void 0),y(this,"cache",new Map),this.instanceId=t}return d(e,[{key:"get",value:function(e){return this.cache.get(e.join("%"))||null}},{key:"update",value:function(e,t){var n=e.join("%"),r=t(this.cache.get(n));null===r?this.cache.delete(n):this.cache.set(n,r)}}]),e}(),rt=nt,it="data-token-hash",at="data-css-hash",ot="__cssinjs_instance__";function st(){var e=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(at,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[ot]=t[ot]||e,t[ot]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(at,"]"))).forEach((function(t){var n,i=t.getAttribute(at);r[i]?t[ot]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[i]=!0}))}return new rt(e)}var lt=a.createContext({hashPriority:"low",cache:st(),defaultCache:!0}),ut=lt;function ct(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function ht(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var dt="data-rc-order",ft="rc-util-key",pt=new Map;function vt(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):ft}function mt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function gt(e){return Array.from((pt.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function yt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!ct())return null;var n=t.csp,r=t.prepend,i=document.createElement("style");i.setAttribute(dt,function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r)),null!==n&&void 0!==n&&n.nonce&&(i.nonce=null===n||void 0===n?void 0:n.nonce),i.innerHTML=e;var a=mt(t),o=a.firstChild;if(r){if("queue"===r){var s=gt(a).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(dt))}));if(s.length)return a.insertBefore(i,s[s.length-1].nextSibling),i}a.insertBefore(i,o)}else a.appendChild(i);return i}function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return gt(mt(t)).find((function(n){return n.getAttribute(vt(t))===e}))}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=bt(e,t);n&&mt(t).removeChild(n)}function xt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){var n=pt.get(e);if(!n||!ht(document,n)){var r=yt("",t),i=r.parentNode;pt.set(e,i),e.removeChild(r)}}(mt(n),n);var r=bt(t,n);if(r){var i,a,o;if(null!==(i=n.csp)&&void 0!==i&&i.nonce&&r.nonce!==(null===(a=n.csp)||void 0===a?void 0:a.nonce))r.nonce=null===(o=n.csp)||void 0===o?void 0:o.nonce;return r.innerHTML!==e&&(r.innerHTML=e),r}var s=yt(e,n);return s.setAttribute(vt(n),t),s}function Et(e){var t="";return Object.keys(e).forEach((function(n){var r=e[n];t+=n,r&&"object"===u(r)?t+=Et(r):t+=r})),t}var wt="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),Tt="903px";var St=void 0;function kt(){return void 0===St&&(St=function(e,t){if(ct()){var n;xt(e,wt);var r=document.createElement("div");r.style.position="fixed",r.style.left="0",r.style.top="0",null===t||void 0===t||t(r),document.body.appendChild(r);var i=getComputedStyle(r).width===Tt;return null===(n=r.parentNode)||void 0===n||n.removeChild(r),_t(wt),i}return!1}("@layer ".concat(wt," { .").concat(wt," { width: ").concat(Tt,"!important; } }"),(function(e){e.className=wt}))),St}function Ct(e){if(Array.isArray(e))return e}function At(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function It(e,t){return Ct(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,s=[],l=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(e,t)||Ae(e,t)||At()}var Ot=function(){return!1};function Pt(e,t,n,r){var i=a.useContext(ut).cache,o=[e].concat(Ie(t));Ot();return a.useMemo((function(){i.update(o,(function(e){var t=It(e||[],2),r=t[0];return[(void 0===r?0:r)+1,t[1]||n()]}))}),[o.join("_")]),a.useEffect((function(){return function(){i.update(o,(function(e){var t=It(e||[],2),n=t[0],i=void 0===n?0:n,a=t[1];return 0===i-1?(null===r||void 0===r||r(a,!1),null):[i-1,a]}))}}),o),i.get(o)[1]}var Mt={},Rt="css",Nt=new Map;function Dt(e,t){Nt.set(e,(Nt.get(e)||0)-1);var n=Array.from(Nt.keys()),r=n.filter((function(e){return(Nt.get(e)||0)<=0}));r.length<n.length&&r.forEach((function(e){!function(e,t){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(it,'="').concat(e,'"]')).forEach((function(e){var n;e[ot]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),Nt.delete(e)}))}function Lt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a.useContext)(ut).cache.instanceId,i=n.salt,o=void 0===i?"":i,s=n.override,l=void 0===s?Mt:s,u=n.formatToken,c=a.useMemo((function(){return Object.assign.apply(Object,[{}].concat(Ie(t)))}),[t]),h=a.useMemo((function(){return Et(c)}),[c]),d=a.useMemo((function(){return Et(l)}),[l]),f=Pt("token",[o,e.id,h,d],(function(){var t=Pe(Pe({},e.getDerivativeToken(c)),l);u&&(t=u(t));var n=function(e,t){return Xe("".concat(t,"_").concat(Et(e)))}(t,o);t._tokenKey=n,function(e){Nt.set(e,(Nt.get(e)||0)+1)}(n);var r="".concat(Rt,"-").concat(Xe(n));return t._hashId=r,[t,r]}),(function(e){Dt(e[0]._tokenKey,r)}));return f}function Ft(){return Ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ft.apply(this,arguments)}var Bt={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ut="comm",Ht="rule",jt="decl",zt="@import",Vt="@keyframes",Gt="@layer",Wt=Math.abs,Xt=String.fromCharCode;Object.assign;function Yt(e){return e.trim()}function Kt(e,t,n){return e.replace(t,n)}function qt(e,t){return e.indexOf(t)}function $t(e,t){return 0|e.charCodeAt(t)}function Zt(e,t,n){return e.slice(t,n)}function Qt(e){return e.length}function Jt(e){return e.length}function en(e,t){return t.push(e),e}function tn(e,t){for(var n="",r=Jt(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function nn(e,t,n,r){switch(e.type){case Gt:if(e.children.length)break;case zt:case jt:return e.return=e.return||e.value;case Ut:return"";case Vt:return e.return=e.value+"{"+tn(e.children,r)+"}";case Ht:e.value=e.props.join(",")}return Qt(n=tn(e.children,r))?e.return=e.value+"{"+n+"}":""}var rn=1,an=1,on=0,sn=0,ln=0,un="";function cn(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:rn,column:an,length:o,return:""}}function hn(){return ln=sn>0?$t(un,--sn):0,an--,10===ln&&(an=1,rn--),ln}function dn(){return ln=sn<on?$t(un,sn++):0,an++,10===ln&&(an=1,rn++),ln}function fn(){return $t(un,sn)}function pn(){return sn}function vn(e,t){return Zt(un,e,t)}function mn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function gn(e){return rn=an=1,on=Qt(un=e),sn=0,[]}function yn(e){return un="",e}function bn(e){return Yt(vn(sn-1,En(91===e?e+2:40===e?e+1:e)))}function _n(e){for(;(ln=fn())&&ln<33;)dn();return mn(e)>2||mn(ln)>3?"":" "}function xn(e,t){for(;--t&&dn()&&!(ln<48||ln>102||ln>57&&ln<65||ln>70&&ln<97););return vn(e,pn()+(t<6&&32==fn()&&32==dn()))}function En(e){for(;dn();)switch(ln){case e:return sn;case 34:case 39:34!==e&&39!==e&&En(ln);break;case 40:41===e&&En(e);break;case 92:dn()}return sn}function wn(e,t){for(;dn()&&e+ln!==57&&(e+ln!==84||47!==fn()););return"/*"+vn(t,sn-1)+"*"+Xt(47===e?e:dn())}function Tn(e){for(;!mn(fn());)dn();return vn(e,sn)}function Sn(e){return yn(kn("",null,null,null,[""],e=gn(e),0,[0],e))}function kn(e,t,n,r,i,a,o,s,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,v=1,m=1,g=1,y=0,b="",_=i,x=a,E=r,w=b;m;)switch(p=y,y=dn()){case 40:if(108!=p&&58==$t(w,h-1)){-1!=qt(w+=Kt(bn(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:w+=bn(y);break;case 9:case 10:case 13:case 32:w+=_n(p);break;case 92:w+=xn(pn()-1,7);continue;case 47:switch(fn()){case 42:case 47:en(An(wn(dn(),pn()),t,n),l);break;default:w+="/"}break;case 123*v:s[u++]=Qt(w)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==g&&(w=Kt(w,/\f/g,"")),f>0&&Qt(w)-h&&en(f>32?In(w+";",r,n,h-1):In(Kt(w," ","")+";",r,n,h-2),l);break;case 59:w+=";";default:if(en(E=Cn(w,t,n,u,c,i,s,b,_=[],x=[],h),a),123===y)if(0===c)kn(w,t,E,E,_,a,h,s,x);else switch(99===d&&110===$t(w,3)?100:d){case 100:case 108:case 109:case 115:kn(e,E,E,r&&en(Cn(e,E,E,0,0,i,s,b,i,_=[],h),x),i,x,h,s,r?_:x);break;default:kn(w,E,E,E,[""],x,0,s,x)}}u=c=f=0,v=g=1,b=w="",h=o;break;case 58:h=1+Qt(w),f=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==hn())continue;switch(w+=Xt(y),y*v){case 38:g=c>0?1:(w+="\f",-1);break;case 44:s[u++]=(Qt(w)-1)*g,g=1;break;case 64:45===fn()&&(w+=bn(dn())),d=fn(),c=h=Qt(b=w+=Tn(pn())),y++;break;case 45:45===p&&2==Qt(w)&&(v=0)}}return a}function Cn(e,t,n,r,i,a,o,s,l,u,c){for(var h=i-1,d=0===i?a:[""],f=Jt(d),p=0,v=0,m=0;p<r;++p)for(var g=0,y=Zt(e,h+1,h=Wt(v=o[p])),b=e;g<f;++g)(b=Yt(v>0?d[g]+" "+y:Kt(y,/&\f/g,d[g])))&&(l[m++]=b);return cn(e,t,n,0===i?Ht:s,l,u,c)}function An(e,t,n){return cn(e,t,n,Ut,Xt(ln),Zt(e,2,-2),0)}function In(e,t,n,r){return cn(e,t,n,jt,Zt(e,0,r),Zt(e,r+1,-1),r)}var On=ct(),Pn="_multi_value_";function Mn(e){return tn(Sn(e),nn).replace(/\{%%%\:[^;];}/g,";")}var Rn=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,a=r.injectHash,o=r.parentSelectors,s=n.hashId,l=n.layer,c=(n.path,n.hashPriority),h=n.transformers,d=void 0===h?[]:h,f=(n.linters,""),p={};function v(t){var r=t.getName(s);if(!p[r]){var i=It(e(t.style,n,{root:!1,parentSelectors:o}),1)[0];p[r]="@keyframes ".concat(t.getName(s)).concat(i)}}var m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);if(m.forEach((function(t){var r="string"!==typeof t||i?t:{};if("string"===typeof r)f+="".concat(r,"\n");else if(r._keyframe)v(r);else{var l=d.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(l).forEach((function(t){var r=l[t];if("object"!==u(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===u(e)&&e&&("_skip_check_"in e||Pn in e)}(r)){var h,d=function(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;Bt[e]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!==t&&void 0!==t&&t._keyframe&&(v(t),r=t.getName(s)),f+="".concat(n,":").concat(r,";")},m=null!==(h=null===r||void 0===r?void 0:r.value)&&void 0!==h?h:r;"object"===u(r)&&null!==r&&void 0!==r&&r[Pn]&&Array.isArray(m)?m.forEach((function(e){d(t,e)})):d(t,m)}else{var g=!1,y=t.trim(),b=!1;(i||a)&&s?y.startsWith("@")?g=!0:y=function(e,t,n){if(!t)return e;var r=".".concat(t),i="low"===n?":where(".concat(r,")"):r,a=e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",a=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(a).concat(i).concat(r.slice(a.length))].concat(Ie(n.slice(1))).join(" ")}));return a.join(",")}(t,s,c):!i||s||"&"!==y&&""!==y||(y="",b=!0);var _=It(e(r,n,{root:b,injectHash:g,parentSelectors:[].concat(Ie(o),[y])}),2),x=_[0],E=_[1];p=Pe(Pe({},p),E),f+="".concat(y).concat(x)}}))}})),i){if(l&&kt()){var g=l.split(","),y=g[g.length-1].trim();f="@layer ".concat(y," {").concat(f,"}"),g.length>1&&(f="@layer ".concat(l,"{%%%:%}").concat(f))}}else f="{".concat(f,"}");return[f,p]};function Nn(){return null}function Dn(e,t){var n=e.token,r=e.path,i=e.hashId,o=e.layer,s=e.nonce,l=a.useContext(ut),u=l.autoClear,c=(l.mock,l.defaultCache),h=l.hashPriority,d=l.container,f=l.ssrInline,p=l.transformers,v=l.linters,m=l.cache,g=n._tokenKey,b=[g].concat(Ie(r)),_=On;var x=Pt("style",b,(function(){var e=t(),n=It(Rn(e,{hashId:i,hashPriority:h,layer:o,path:r.join("-"),transformers:p,linters:v}),2),a=n[0],l=n[1],u=Mn(a),c=function(e,t){return Xe("".concat(e.join("%")).concat(t))}(b,u);if(_){var f={mark:at,prepend:"queue",attachTo:d},y="function"===typeof s?s():s;y&&(f.csp={nonce:y});var x=xt(u,c,f);x[ot]=m.instanceId,x.setAttribute(it,g),Object.keys(l).forEach((function(e){xt(Mn(l[e]),"_effect-".concat(e),f)}))}return[u,g,c]}),(function(e,t){var n=It(e,3)[2];(t||u)&&On&&_t(n,{mark:at})})),E=It(x,3),w=E[0],T=E[1],S=E[2];return function(e){var t,n;f&&!_&&c?t=a.createElement("style",Ft({},(y(n={},it,T),y(n,at,S),n),{dangerouslySetInnerHTML:{__html:w}})):t=a.createElement(Nn,null);return a.createElement(a.Fragment,null,t,e)}}var Ln=function(){function e(t,n){l(this,e),y(this,"name",void 0),y(this,"style",void 0),y(this,"_keyframe",!0),this.name=t,this.style=n}return d(e,[{key:"getName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e,"-").concat(this.name):this.name}}]),e}(),Fn=Ln;var Bn=function(){function e(){l(this,e),y(this,"cache",void 0),y(this,"keys",void 0),y(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return d(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return e.forEach((function(e){var t,n;i?i=null===(t=i)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.get(e):i=void 0})),null!==(t=i)&&void 0!==t&&t.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var i=this.keys.reduce((function(e,t){var n=It(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),a=It(i,1)[0];this.delete(a)}this.keys.push(t)}var o=this.cache;t.forEach((function(e,i){if(i===t.length-1)o.set(e,{value:[n,r.cacheCallTimes++]});else{var a=o.get(e);a?a.map||(a.map=new Map):o.set(e,{map:new Map}),o=o.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),i}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();y(Bn,"MAX_CACHE_SIZE",20),y(Bn,"MAX_CACHE_OFFSET",5);var Un=0,Hn=function(){function e(t){l(this,e),y(this,"derivatives",void 0),y(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=Un,0===t.length&&t.length,Un+=1}return d(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),jn=new Bn;function zn(e){var t=Array.isArray(e)?e:[e];return jn.has(t)||jn.set(t,new Hn(t)),jn.get(t)}function Vn(e){return e.notSplit=!0,e}Vn(["borderTop","borderBottom"]),Vn(["borderTop"]),Vn(["borderBottom"]),Vn(["borderLeft","borderRight"]),Vn(["borderLeft"]),Vn(["borderRight"]);var Gn=(0,a.createContext)({});function Wn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Xn=n(2715);function Yn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return a.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(Yn(e)):(0,Xn.isFragment)(e)&&e.props?n=n.concat(Yn(e.props.children,t)):n.push(e))})),n}var Kn="RC_FORM_INTERNAL_HOOKS",qn=function(){et(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},$n=a.createContext({getFieldValue:qn,getFieldsValue:qn,getFieldError:qn,getFieldWarning:qn,getFieldsError:qn,isFieldsTouched:qn,isFieldTouched:qn,isFieldValidating:qn,isFieldsValidating:qn,resetFields:qn,setFields:qn,setFieldValue:qn,setFieldsValue:qn,validateFields:qn,submit:qn,getInternalHooks:function(){return qn(),{dispatch:qn,initEntityValue:qn,registerField:qn,useSubscribe:qn,setInitialValues:qn,destroyForm:qn,setCallbacks:qn,registerWatch:qn,getFields:qn,setValidateMessages:qn,setPreserve:qn,getInitialValue:qn}}}),Zn=a.createContext(null);function Qn(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function Jn(){return Jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jn.apply(this,arguments)}function er(e){return er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},er(e)}function tr(e,t){return tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tr(e,t)}function nr(e,t,n){return nr=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Qp){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tr(i,n.prototype),i},nr.apply(null,arguments)}function rr(e){var t="function"===typeof Map?new Map:void 0;return rr=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return nr(e,arguments,er(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tr(r,e)},rr(e)}var ir=/%[sdj%]/g;function ar(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function or(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,a=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var o=e.replace(ir,(function(e){if("%%"===e)return"%";if(i>=a)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(AT){return"[Circular]"}break;default:return e}}));return o}return e}function sr(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function lr(e,t,n){var r=0,i=e.length;!function a(o){if(o&&o.length)n(o);else{var s=r;r+=1,s<i?t(e[s],a):n([])}}([])}var ur=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,tr(t,n),r}(rr(Error));function cr(e,t,n,r,i){if(t.first){var a=new Promise((function(t,a){var o=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);lr(o,n,(function(e){return r(e),e.length?a(new ur(e,ar(e))):t(i)}))}));return a.catch((function(e){return e})),a}var o=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],h=new Promise((function(t,a){var h=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?a(new ur(c,ar(c))):t(i)};s.length||(r(c),t(i)),s.forEach((function(t){var r=e[t];-1!==o.indexOf(t)?lr(r,n,h):function(e,t,n){var r=[],i=0,a=e.length;function o(e){r.push.apply(r,e||[]),++i===a&&n(r)}e.forEach((function(e){t(e,o)}))}(r,n,h)}))}));return h.catch((function(e){return e})),h}function hr(e,t){return function(n){var r,i;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function dr(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=Jn({},e[n],r):e[n]=r}return e}var fr,pr=function(e,t,n,r,i,a){!e.required||n.hasOwnProperty(e.field)&&!sr(t,a||e.type)||r.push(or(i.messages.required,e.fullField))},vr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,mr=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,gr={integer:function(e){return gr.number(e)&&parseInt(e,10)===e},float:function(e){return gr.number(e)&&!gr.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(Qp){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!gr.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(vr)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(function(){if(fr)return fr;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),a=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),o=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),l=function(e){return e&&e.exact?a:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+i+t(e)+")","g")};l.v4=function(e){return e&&e.exact?o:new RegExp(""+t(e)+n+t(e),"g")},l.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+i+t(e),"g")};var u=l.v4().source,c=l.v6().source;return fr=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+u+"|"+c+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"===typeof e&&!!e.match(mr)}},yr="enum",br={required:pr,whitespace:function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(or(i.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)pr(e,t,n,r,i);else{var a=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?gr[a](t)||r.push(or(i.messages.types[a],e.fullField,e.type)):a&&typeof t!==e.type&&r.push(or(i.messages.types[a],e.fullField,e.type))}},range:function(e,t,n,r,i){var a="number"===typeof e.len,o="number"===typeof e.min,s="number"===typeof e.max,l=t,u=null,c="number"===typeof t,h="string"===typeof t,d=Array.isArray(t);if(c?u="number":h?u="string":d&&(u="array"),!u)return!1;d&&(l=t.length),h&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?l!==e.len&&r.push(or(i.messages[u].len,e.fullField,e.len)):o&&!s&&l<e.min?r.push(or(i.messages[u].min,e.fullField,e.min)):s&&!o&&l>e.max?r.push(or(i.messages[u].max,e.fullField,e.max)):o&&s&&(l<e.min||l>e.max)&&r.push(or(i.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,i){e[yr]=Array.isArray(e[yr])?e[yr]:[],-1===e[yr].indexOf(t)&&r.push(or(i.messages[yr],e.fullField,e[yr].join(", ")))},pattern:function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(or(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(or(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},_r=function(e,t,n,r,i){var a=e.type,o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t,a)&&!e.required)return n();br.required(e,t,r,o,i,a),sr(t,a)||br.type(e,t,r,o,i)}n(o)},xr={string:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t,"string")&&!e.required)return n();br.required(e,t,r,a,i,"string"),sr(t,"string")||(br.type(e,t,r,a,i),br.range(e,t,r,a,i),br.pattern(e,t,r,a,i),!0===e.whitespace&&br.whitespace(e,t,r,a,i))}n(a)},method:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&br.type(e,t,r,a,i)}n(a)},number:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&(br.type(e,t,r,a,i),br.range(e,t,r,a,i))}n(a)},boolean:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&br.type(e,t,r,a,i)}n(a)},regexp:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),sr(t)||br.type(e,t,r,a,i)}n(a)},integer:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&(br.type(e,t,r,a,i),br.range(e,t,r,a,i))}n(a)},float:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&(br.type(e,t,r,a,i),br.range(e,t,r,a,i))}n(a)},array:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();br.required(e,t,r,a,i,"array"),void 0!==t&&null!==t&&(br.type(e,t,r,a,i),br.range(e,t,r,a,i))}n(a)},object:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&br.type(e,t,r,a,i)}n(a)},enum:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i),void 0!==t&&br.enum(e,t,r,a,i)}n(a)},pattern:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t,"string")&&!e.required)return n();br.required(e,t,r,a,i),sr(t,"string")||br.pattern(e,t,r,a,i)}n(a)},date:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t,"date")&&!e.required)return n();var o;if(br.required(e,t,r,a,i),!sr(t,"date"))o=t instanceof Date?t:new Date(t),br.type(e,o,r,a,i),o&&br.range(e,o.getTime(),r,a,i)}n(a)},url:_r,hex:_r,email:_r,required:function(e,t,n,r,i){var a=[],o=Array.isArray(t)?"array":typeof t;br.required(e,t,r,a,i,o),n(a)},any:function(e,t,n,r,i){var a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(sr(t)&&!e.required)return n();br.required(e,t,r,a,i)}n(a)}};function Er(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var wr=Er(),Tr=function(){function e(e){this.rules=null,this._messages=wr,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=dr(Er(),e)),this._messages},t.validate=function(t,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var a=t,o=n,s=r;if("function"===typeof o&&(s=o,o={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,a),Promise.resolve(a);if(o.messages){var l=this.messages();l===wr&&(l=Er()),dr(l,o.messages),o.messages=l}else o.messages=this.messages();var u={};(o.keys||Object.keys(this.rules)).forEach((function(e){var n=i.rules[e],r=a[e];n.forEach((function(n){var o=n;"function"===typeof o.transform&&(a===t&&(a=Jn({},a)),r=a[e]=o.transform(r)),(o="function"===typeof o?{validator:o}:Jn({},o)).validator=i.getValidationMethod(o),o.validator&&(o.field=e,o.fullField=o.fullField||e,o.type=i.getType(o),u[e]=u[e]||[],u[e].push({rule:o,value:r,source:a,field:e}))}))}));var c={};return cr(u,o,(function(t,n){var r,i=t.rule,s=("object"===i.type||"array"===i.type)&&("object"===typeof i.fields||"object"===typeof i.defaultField);function l(e,t){return Jn({},t,{fullField:i.fullField+"."+e,fullFields:i.fullFields?[].concat(i.fullFields,[e]):[e]})}function u(r){void 0===r&&(r=[]);var u=Array.isArray(r)?r:[r];!o.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==i.message&&(u=[].concat(i.message));var h=u.map(hr(i,a));if(o.first&&h.length)return c[i.field]=1,n(h);if(s){if(i.required&&!t.value)return void 0!==i.message?h=[].concat(i.message).map(hr(i,a)):o.error&&(h=[o.error(i,or(o.messages.required,i.field))]),n(h);var d={};i.defaultField&&Object.keys(t.value).map((function(e){d[e]=i.defaultField})),d=Jn({},d,t.rule.fields);var f={};Object.keys(d).forEach((function(e){var t=d[e],n=Array.isArray(t)?t:[t];f[e]=n.map(l.bind(null,e))}));var p=new e(f);p.messages(o.messages),t.rule.options&&(t.rule.options.messages=o.messages,t.rule.options.error=o.error),p.validate(t.value,t.rule.options||o,(function(e){var t=[];h&&h.length&&t.push.apply(t,h),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(h)}if(s=s&&(i.required||!i.required&&t.value),i.field=t.field,i.asyncValidator)r=i.asyncValidator(i,t.value,u,t.source,o);else if(i.validator){try{r=i.validator(i,t.value,u,t.source,o)}catch(h){console.error,o.suppressValidatorError||setTimeout((function(){throw h}),0),u(h.message)}!0===r?u():!1===r?u("function"===typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?u(r):r instanceof Error&&u(r.message)}r&&r.then&&r.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){!function(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var i=0;i<e.length;i++)r(e[i]);t.length?(n=ar(t),s(t,n)):s(null,a)}(e)}),a)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!xr.hasOwnProperty(e.type))throw new Error(or("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?xr.required:xr[this.getType(e)]||void 0},e}();Tr.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");xr[e]=t},Tr.warning=function(){},Tr.messages=wr,Tr.validators=xr;var Sr="'${name}' is not a valid ${type}",kr={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Sr,method:Sr,array:Sr,object:Sr,number:Sr,date:Sr,boolean:Sr,integer:Sr,float:Sr,regexp:Sr,email:Sr,url:Sr,hex:Sr},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function Cr(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function Ar(e){return Ct(e)||Ce(e)||Ae(e)||At()}function Ir(e,t,n,r){if(!t.length)return n;var i,a=Ar(t),o=a[0],s=a.slice(1);return i=e||"number"!==typeof o?Array.isArray(e)?Ie(e):Pe({},e):[],r&&void 0===n&&1===s.length?delete i[o][s[0]]:i[o]=Ir(i[o],s,n,r),i}function Or(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!Cr(e,t.slice(0,-1))?e:Ir(e,t,n,r)}function Pr(e){return Array.isArray(e)?function(e){return e.map((function(e){return Pr(e)}))}(e):"object"===u(e)&&null!==e?function(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=Pr(e[n]);return t}return e}(e):e}var Mr=Pr;function Rr(e){return Qn(e)}function Nr(e,t){var n={};return t.forEach((function(t){var r=Cr(e,t);n=Or(n,t,r)})),n}function Dr(e,t){return e&&e.some((function(e){return Ur(e,t)}))}function Lr(e){return"object"===u(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function Fr(e,t){var n=Array.isArray(e)?Ie(e):Pe({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],i=t[e],a=Lr(r)&&Lr(i);n[e]=a?Fr(r,i||{}):Mr(i)})),n):n}function Br(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return Fr(e,t)}),e)}function Ur(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function Hr(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===u(t.target)&&e in t.target?t.target[e]:t}function jr(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],a=t-n;return a>0?[].concat(Ie(e.slice(0,n)),[i],Ie(e.slice(n,t)),Ie(e.slice(t+1,r))):a<0?[].concat(Ie(e.slice(0,t)),Ie(e.slice(t+1,n+1)),[i],Ie(e.slice(n+1,r))):e}var zr=Tr;function Vr(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var Gr="CODE_LOGIC_ERROR";function Wr(e,t,n,r,i){return Xr.apply(this,arguments)}function Xr(){return Xr=_e(ye().mark((function e(t,n,r,i,o){var s,l,u,c,h,d,f,p,v;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(s=Pe({},r)).ruleIndex,zr.warning=function(){},s.validator&&(l=s.validator,s.validator=function(){try{return l.apply(void 0,arguments)}catch(e){return Promise.reject(Gr)}}),u=null,s&&"array"===s.type&&s.defaultField&&(u=s.defaultField,delete s.defaultField),c=new zr(y({},t,[s])),h=Br({},kr,i.validateMessages),c.messages(h),d=[],e.prev=10,e.next=13,Promise.resolve(c.validate(y({},t,n),Pe({},i)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),e.t0.errors&&(d=e.t0.errors.map((function(e,t){var n=e.message,r=n===Gr?h.default:n;return a.isValidElement(r)?a.cloneElement(r,{key:"error_".concat(t)}):r})));case 18:if(d.length||!u){e.next=23;break}return e.next=21,Promise.all(n.map((function(e,n){return Wr("".concat(t,".").concat(n),e,u,i,o)})));case 21:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Ie(e),Ie(t))}),[]));case 23:return p=Pe(Pe({},r),{},{name:t,enum:(r.enum||[]).join(", ")},o),v=d.map((function(e){return"string"===typeof e?Vr(e,p):e})),e.abrupt("return",v);case 26:case"end":return e.stop()}}),e,null,[[10,15]])}))),Xr.apply(this,arguments)}function Yr(e,t,n,r,i,a){var o,s=e.join("."),l=n.map((function(e,t){var n=e.validator,r=Pe(Pe({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var i=!1,a=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){et(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))}));i=a&&"function"===typeof a.then&&"function"===typeof a.catch,et(i,"`callback` is deprecated. Please return a promise instead."),i&&a.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,i=t.warningOnly,a=t.ruleIndex;return!!n===!!i?r-a:n?1:-1}));if(!0===i)o=new Promise(function(){var e=_e(ye().mark((function e(n,i){var o,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=0;case 1:if(!(o<l.length)){e.next=12;break}return u=l[o],e.next=5,Wr(s,t,u,r,a);case 5:if(!(c=e.sent).length){e.next=9;break}return i([{errors:c,rule:u}]),e.abrupt("return");case 9:o+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var u=l.map((function(e){return Wr(s,t,e,r,a).then((function(t){return{errors:t,rule:e}}))}));o=(i?function(e){return qr.apply(this,arguments)}(u):function(e){return Kr.apply(this,arguments)}(u)).then((function(e){return Promise.reject(e)}))}return o.catch((function(e){return e})),o}function Kr(){return(Kr=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Ie(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qr(){return(qr=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var $r=["name"],Zr=[];function Qr(e,t,n,r,i,a){return"function"===typeof e?e(t,n,"source"in a?{source:a.source}:{}):r!==i}var Jr=function(e){p(n,e);var t=g(n);function n(e){var r;(l(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.prevValidating=void 0,r.errors=Zr,r.warnings=Zr,r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,i=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,Rr(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Ie(void 0===n?[]:n),Ie(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,i=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(i):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.triggerMetaEvent=function(e){var t=r.props.onMetaChange;null===t||void 0===t||t(Pe(Pe({},r.getMeta()),{},{destroy:e}))},r.onStoreChange=function(e,t,n){var i=r.props,a=i.shouldUpdate,o=i.dependencies,s=void 0===o?[]:o,l=i.onReset,u=n.store,c=r.getNamePath(),h=r.getValue(e),d=r.getValue(u),f=t&&Dr(t,c);switch("valueUpdate"===n.type&&"external"===n.source&&h!==d&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Zr,r.warnings=Zr,r.triggerMetaEvent()),n.type){case"reset":if(!t||f)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=Zr,r.warnings=Zr,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(a)return void r.reRender();break;case"setField":if(f){var p=n.data;return"touched"in p&&(r.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(r.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(r.errors=p.errors||Zr),"warnings"in p&&(r.warnings=p.warnings||Zr),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(a&&!c.length&&Qr(a,e,u,h,d,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Rr).some((function(e){return Dr(n.relatedFields,e)})))return void r.reRender();break;default:if(f||(!s.length||c.length||a)&&Qr(a,e,u,h,d,n))return void r.reRender()}!0===a&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),i=e||{},a=i.triggerName,o=i.validateOnly,s=void 0!==o&&o,l=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,o=i.validateFirst,s=void 0!==o&&o,u=i.messageVariables,c=r.getRules();a&&(c=c.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||Qn(t).includes(a)})));var h=Yr(t,n,c,e,s,u);return h.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zr;if(r.validatePromise===l){var t;r.validatePromise=null;var n=[],i=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,a=void 0===r?Zr:r;t?i.push.apply(i,Ie(a)):n.push.apply(n,Ie(a))})),r.errors=n,r.warnings=i,r.triggerMetaEvent(),r.reRender()}})),h}));return s||(r.validatePromise=l,r.dirty=!0,r.errors=Zr,r.warnings=Zr,r.triggerMetaEvent(),r.reRender()),l},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(Kn).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}},r.getOnlyChild=function(e){if("function"===typeof e){var t=r.getMeta();return Pe(Pe({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=Yn(e);return 1===n.length&&a.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return Cr(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,i=t.validateTrigger,a=t.getValueFromEvent,o=t.normalize,s=t.valuePropName,l=t.getValueProps,u=t.fieldContext,c=void 0!==i?i:u.validateTrigger,h=r.getNamePath(),d=u.getInternalHooks,f=u.getFieldsValue,p=d(Kn).dispatch,v=r.getValue(),m=l||function(e){return y({},s,e)},g=e[n],b=Pe(Pe({},e),m(v));return b[n]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=a?a.apply(void 0,n):Hr.apply(void 0,[s].concat(n)),o&&(e=o(e,v,f(!0))),p({type:"updateValue",namePath:h,value:e}),g&&g.apply(void 0,n)},Qn(c||[]).forEach((function(e){var t=b[e];b[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&p({type:"validateField",namePath:h,triggerName:e})}})),b},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(Kn).initEntityValue)(m(r));return r}return d(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(Kn).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?e=i:a.isValidElement(i)?e=a.cloneElement(i,this.getControlled(i.props)):(et(!i,"`children` of Field is not validate ReactElement."),e=i),a.createElement(a.Fragment,{key:t},e)}}]),n}(a.Component);Jr.contextType=$n,Jr.defaultProps={trigger:"onChange",valuePropName:"value"};var ei=function(e){var t=e.name,n=Wn(e,$r),r=a.useContext($n),i=a.useContext(Zn),o=void 0!==t?Rr(t):void 0,s="keep";return n.isListField||(s="_".concat((o||[]).join("_"))),a.createElement(Jr,Ft({key:s,name:o,isListField:!!i},n,{fieldContext:r}))},ti=function(e){var t=e.name,n=e.initialValue,r=e.children,i=e.rules,o=e.validateTrigger,s=e.isListField,l=a.useContext($n),u=a.useContext(Zn),c=a.useRef({keys:[],id:0}).current,h=a.useMemo((function(){var e=Rr(l.prefixName)||[];return[].concat(Ie(e),Ie(Rr(t)))}),[l.prefixName,t]),d=a.useMemo((function(){return Pe(Pe({},l),{},{prefixName:h})}),[l,h]),f=a.useMemo((function(){return{getKey:function(e){var t=h.length,n=e[t];return[c.keys[n],e.slice(t+1)]}}}),[h]);if("function"!==typeof r)return et(!1,"Form.List only accepts function as children."),null;return a.createElement(Zn.Provider,{value:f},a.createElement($n.Provider,{value:d},a.createElement(ei,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:null!==s&&void 0!==s?s:!!u},(function(e,t){var n=e.value,i=void 0===n?[]:n,a=e.onChange,o=l.getFieldValue,s=function(){return o(h||[])||[]},u={add:function(e,t){var n=s();t>=0&&t<=n.length?(c.keys=[].concat(Ie(c.keys.slice(0,t)),[c.id],Ie(c.keys.slice(t))),a([].concat(Ie(n.slice(0,t)),[e],Ie(n.slice(t))))):(c.keys=[].concat(Ie(c.keys),[c.id]),a([].concat(Ie(n),[e]))),c.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(c.keys=c.keys.filter((function(e,t){return!n.has(t)})),a(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(c.keys=jr(c.keys,e,t),a(jr(n,e,t)))}}},d=i||[];return Array.isArray(d)||(d=[]),r(d.map((function(e,t){var n=c.keys[t];return void 0===n&&(c.keys[t]=c.id,n=c.keys[t],c.id+=1),{name:t,key:n,isListField:!0}})),u,t)}))))};var ni="__@field_split__";function ri(e){return e.map((function(e){return"".concat(u(e),":").concat(e)})).join(ni)}var ii=function(){function e(){l(this,e),this.kvs=new Map}return d(e,[{key:"set",value:function(e,t){this.kvs.set(ri(e),t)}},{key:"get",value:function(e){return this.kvs.get(ri(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(ri(e))}},{key:"map",value:function(e){return Ie(this.kvs.entries()).map((function(t){var n=It(t,2),r=n[0],i=n[1],a=r.split(ni);return e({key:a.map((function(e){var t=It(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),ai=ii,oi=["name"],si=d((function e(t){var n=this;l(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===Kn?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(et(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var r,i=Br({},e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;i=Or(i,n,Cr(e,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}},this.destroyForm=function(){var e=new ai;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=Cr(n.initialValues,e);return e.length?Mr(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(t,r,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new ai;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Rr(e);return t.get(n)||{INVALIDATE_NAME_PATH:Rr(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),i=[];return r.forEach((function(n){var r,a="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var o="getMeta"in n?n.getMeta():null;t(o)&&i.push(a)}else i.push(a)})),Nr(n.store,i.map(Rr))},this.getFieldValue=function(e){n.warningUnhooked();var t=Rr(e);return Cr(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:Rr(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=Rr(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=Rr(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,a=t[0],o=t[1],s=!1;0===t.length?i=null:1===t.length?Array.isArray(a)?(i=a.map(Rr),s=!1):(i=null,s=a):(i=a.map(Rr),s=o);var l=n.getFieldEntities(!0),u=function(e){return e.isFieldTouched()};if(!i)return s?l.every(u):l.some(u);var c=new ai;i.forEach((function(e){c.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&c.update(n,(function(t){return[].concat(Ie(t),[e])}))}))}));var h=function(e){return e.some(u)},d=c.map((function(e){return e.value}));return s?d.every(h):d.some(h)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Rr);return t.some((function(e){var t=e.getNamePath();return Dr(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new ai,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var i=t.get(r)||new Set;i.add({entity:e,value:n}),t.set(r,i)}}));var i;e.entities?i=e.entities:e.namePathList?(i=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=i).push.apply(n,Ie(Ie(r).map((function(e){return e.entity}))))}))):i=r,i.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))et(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var a=t.get(i);if(a&&a.size>1)et(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(a){var o=n.getFieldValue(i);e.skipExist&&void 0!==o||n.updateStore(Or(n.store,i,Ie(a)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(Br({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(Rr);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(Or(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var i=e.name,a=Wn(e,oi),o=Rr(i);r.push(o),"value"in a&&n.updateStore(Or(n.store,o,a.value)),n.notifyObservers(t,[o],{type:"setField",data:e})})),n.notifyWatch(r)},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=Pe(Pe({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===Cr(n.store,r)&&n.updateStore(Or(n.store,r,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(i)&&(!r||a.length>1)){var o=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==o&&n.fieldEntities.every((function(e){return!Ur(e.getNamePath(),t)}))){var s=n.store;n.updateStore(Or(s,t,o,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,a=e.triggerName;n.validateFields([i],{triggerName:a})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var i=Pe(Pe({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,i)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Ie(r))}),r},this.updateValue=function(e,t){var r=Rr(e),i=n.store;n.updateStore(Or(n.store,r,t)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var a=n.triggerDependenciesUpdate(i,r),o=n.callbacks.onValuesChange;o&&o(Nr(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Ie(a)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var r=Br(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.setFieldValue=function(e,t){n.setFields([{name:e,value:t}])},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],i=new ai;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Rr(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(i.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var a=new ai;t.forEach((function(e){var t=e.name,n=e.errors;a.set(t,n)})),i.forEach((function(e){e.errors=a.get(e.name)||e.errors}))}r(i.filter((function(t){var n=t.name;return Dr(e,n)})),i)}},this.validateFields=function(e,t){var r,i;n.warningUnhooked(),Array.isArray(e)||"string"===typeof e||"string"===typeof t?(r=e,i=t):i=e;var a=!!r,o=a?r.map(Rr):[],s=[];n.getFieldEntities(!0).forEach((function(e){var t;if(a||o.push(e.getNamePath()),(null===(t=i)||void 0===t?void 0:t.recursive)&&a){var l=e.getNamePath();l.every((function(e,t){return r[t]===e||void 0===r[t]}))&&o.push(l)}if(e.props.rules&&e.props.rules.length){var u=e.getNamePath();if(!a||Dr(o,u)){var c=e.validateRules(Pe({validateMessages:Pe(Pe({},kr),n.validateMessages)},i));s.push(c.then((function(){return{name:u,errors:[],warnings:[]}})).catch((function(e){var t,n=[],r=[];return null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,i=e.errors;t?r.push.apply(r,Ie(i)):n.push.apply(n,Ie(i))})),n.length?Promise.reject({name:u,errors:n,warnings:r}):{name:u,errors:n,warnings:r}})))}}}));var l=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,a){e.forEach((function(e,o){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[o]=e,n>0||(t&&a(r),i(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=l,l.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=l.then((function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(o),errorFields:t,outOfDate:n.lastValidatePromise!==l})}));return u.catch((function(e){return e})),n.triggerOnFieldsChange(o),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));var li=function(e){var t=a.useRef(),n=It(a.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new si((function(){n({})}));t.current=r.getForm()}return[t.current]},ui=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),ci=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,i=e.children,o=a.useContext(ui),s=a.useRef({});return a.createElement(ui.Provider,{value:Pe(Pe({},o),{},{validateMessages:Pe(Pe({},o.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:s.current}),o.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:s.current}),o.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=Pe(Pe({},s.current),{},y({},e,t))),o.registerForm(e,t)},unregisterForm:function(e){var t=Pe({},s.current);delete t[e],s.current=t,o.unregisterForm(e)}})},i)},hi=ui,di=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],fi=function(e,t){var n=e.name,r=e.initialValues,i=e.fields,o=e.form,s=e.preserve,l=e.children,c=e.component,h=void 0===c?"form":c,d=e.validateMessages,f=e.validateTrigger,p=void 0===f?"onChange":f,v=e.onValuesChange,m=e.onFieldsChange,g=e.onFinish,y=e.onFinishFailed,b=Wn(e,di),_=a.useContext(hi),x=It(li(o),1)[0],E=x.getInternalHooks(Kn),w=E.useSubscribe,T=E.setInitialValues,S=E.setCallbacks,k=E.setValidateMessages,C=E.setPreserve,A=E.destroyForm;a.useImperativeHandle(t,(function(){return x})),a.useEffect((function(){return _.registerForm(n,x),function(){_.unregisterForm(n)}}),[_,x,n]),k(Pe(Pe({},_.validateMessages),d)),S({onValuesChange:v,onFieldsChange:function(e){if(_.triggerFormChange(n,e),m){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];m.apply(void 0,[e].concat(r))}},onFinish:function(e){_.triggerFormFinish(n,e),g&&g(e)},onFinishFailed:y}),C(s);var I,O=a.useRef(null);T(r,!O.current),O.current||(O.current=!0),a.useEffect((function(){return A}),[]);var P="function"===typeof l;P?I=l(x.getFieldsValue(!0),x):I=l;w(!P);var M=a.useRef();a.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==u(e)||"object"!==u(t))return!1;var n=Object.keys(e),r=Object.keys(t);return Ie(new Set([].concat(n,r))).every((function(n){var r=e[n],i=t[n];return"function"===typeof r&&"function"===typeof i||r===i}))})(M.current||[],i||[])||x.setFields(i||[]),M.current=i}),[i,x]);var R=a.useMemo((function(){return Pe(Pe({},x),{},{validateTrigger:p})}),[x,p]),N=a.createElement($n.Provider,{value:R},I);return!1===h?N:a.createElement(h,Ft({},b,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),x.submit()},onReset:function(e){var t;e.preventDefault(),x.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),N)};function pi(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var vi=function(){};var mi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=void 0===r?[]:r,o=t[1],s=void 0===o?{}:o,l=function(e){return e&&!!e._init}(s)?{form:s}:s,u=l.form,c=It((0,a.useState)(),2),h=c[0],d=c[1],f=(0,a.useMemo)((function(){return pi(h)}),[h]),p=(0,a.useRef)(f);p.current=f;var v=(0,a.useContext)($n),m=u||v,g=m&&m._init,y=Rr(i),b=(0,a.useRef)(y);return b.current=y,vi(y),(0,a.useEffect)((function(){if(g){var e=m.getFieldsValue,t=(0,(0,m.getInternalHooks)(Kn).registerWatch)((function(e,t){var n=Cr(l.preserve?t:e,b.current),r=pi(n);p.current!==r&&(p.current=r,d(n))})),n=Cr(l.preserve?e(!0):e(),b.current);return d(n),t}}),[g]),h},gi=a.forwardRef(fi);gi.FormProvider=ci,gi.Field=ei,gi.List=ti,gi.useForm=li,gi.useWatch=mi;var yi={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},bi={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},_i={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},yi),timePickerLocale:Object.assign({},bi)},xi="${label} is not a valid ${type}",Ei={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:_i,TimePicker:bi,Calendar:_i,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:xi,method:xi,array:xi,object:xi,number:xi,date:xi,boolean:xi,integer:xi,float:xi,regexp:xi,email:xi,url:xi,hex:xi},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},wi=Object.assign({},Ei.Modal);function Ti(e){wi=e?Object.assign(Object.assign({},wi),e):Object.assign({},Ei.Modal)}function Si(){return wi}var ki=(0,a.createContext)(void 0);var Ci=function(e){var t=e.locale,n=void 0===t?{}:t,r=e.children;e._ANT_MARK__;a.useEffect((function(){return Ti(n&&n.Modal),function(){Ti()}}),[n]);var i=a.useMemo((function(){return Object.assign(Object.assign({},n),{exist:!0})}),[n]);return a.createElement(ki.Provider,{value:i},r)},Ai="5.5.0";function Ii(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Oi(e){return Math.min(1,Math.max(0,e))}function Pi(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Mi(e){return e<=1?"".concat(100*Number(e),"%"):e}function Ri(e){return 1===e.length?"0"+e:String(e)}function Ni(e,t,n){e=Ii(e,255),t=Ii(t,255),n=Ii(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=0,s=(r+i)/2;if(r===i)o=0,a=0;else{var l=r-i;switch(o=s>.5?l/(2-r-i):l/(r+i),r){case e:a=(t-n)/l+(t<n?6:0);break;case t:a=(n-e)/l+2;break;case n:a=(e-t)/l+4}a/=6}return{h:a,s:o,l:s}}function Di(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Li(e,t,n){e=Ii(e,255),t=Ii(t,255),n=Ii(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),a=0,o=r,s=r-i,l=0===r?0:s/r;if(r===i)a=0;else{switch(r){case e:a=(t-n)/s+(t<n?6:0);break;case t:a=(n-e)/s+2;break;case n:a=(e-t)/s+4}a/=6}return{h:a,s:l,v:o}}function Fi(e,t,n,r){var i=[Ri(Math.round(e).toString(16)),Ri(Math.round(t).toString(16)),Ri(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Bi(e){return Math.round(255*parseFloat(e)).toString(16)}function Ui(e){return Hi(e)/255}function Hi(e){return parseInt(e,16)}var ji={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function zi(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;return"string"===typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(ji[e])e=ji[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=Xi.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=Xi.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=Xi.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=Xi.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=Xi.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=Xi.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=Xi.hex8.exec(e),n)return{r:Hi(n[1]),g:Hi(n[2]),b:Hi(n[3]),a:Ui(n[4]),format:t?"name":"hex8"};if(n=Xi.hex6.exec(e),n)return{r:Hi(n[1]),g:Hi(n[2]),b:Hi(n[3]),format:t?"name":"hex"};if(n=Xi.hex4.exec(e),n)return{r:Hi(n[1]+n[1]),g:Hi(n[2]+n[2]),b:Hi(n[3]+n[3]),a:Ui(n[4]+n[4]),format:t?"name":"hex8"};if(n=Xi.hex3.exec(e),n)return{r:Hi(n[1]+n[1]),g:Hi(n[2]+n[2]),b:Hi(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(Yi(e.r)&&Yi(e.g)&&Yi(e.b)?(t=function(e,t,n){return{r:255*Ii(e,255),g:255*Ii(t,255),b:255*Ii(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):Yi(e.h)&&Yi(e.s)&&Yi(e.v)?(r=Mi(e.s),i=Mi(e.v),t=function(e,t,n){e=6*Ii(e,360),t=Ii(t,100),n=Ii(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,o,a,a,s,n][l],g:255*[s,n,n,o,a,a][l],b:255*[a,a,s,n,n,o][l]}}(e.h,r,i),o=!0,s="hsv"):Yi(e.h)&&Yi(e.s)&&Yi(e.l)&&(r=Mi(e.s),a=Mi(e.l),t=function(e,t,n){var r,i,a;if(e=Ii(e,360),t=Ii(t,100),n=Ii(n,100),0===t)i=n,a=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=Di(s,o,e+1/3),i=Di(s,o,e),a=Di(s,o,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Pi(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Vi="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Gi="[\\s|\\(]+(".concat(Vi,")[,|\\s]+(").concat(Vi,")[,|\\s]+(").concat(Vi,")\\s*\\)?"),Wi="[\\s|\\(]+(".concat(Vi,")[,|\\s]+(").concat(Vi,")[,|\\s]+(").concat(Vi,")[,|\\s]+(").concat(Vi,")\\s*\\)?"),Xi={CSS_UNIT:new RegExp(Vi),rgb:new RegExp("rgb"+Gi),rgba:new RegExp("rgba"+Wi),hsl:new RegExp("hsl"+Gi),hsla:new RegExp("hsla"+Wi),hsv:new RegExp("hsv"+Gi),hsva:new RegExp("hsva"+Wi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Yi(e){return Boolean(Xi.CSS_UNIT.exec(String(e)))}var Ki=2,qi=.16,$i=.05,Zi=.05,Qi=.15,Ji=5,ea=4,ta=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function na(e){var t=Li(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function ra(e){var t=e.r,n=e.g,r=e.b;return"#".concat(Fi(t,n,r,!1))}function ia(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-Ki*t:Math.round(e.h)+Ki*t:n?Math.round(e.h)+Ki*t:Math.round(e.h)-Ki*t)<0?r+=360:r>=360&&(r-=360),r}function aa(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-qi*t:t===ea?e.s+qi:e.s+$i*t)>1&&(r=1),n&&t===Ji&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function oa(e,t,n){var r;return(r=n?e.v+Zi*t:e.v-Qi*t)>1&&(r=1),Number(r.toFixed(2))}function sa(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=zi(e),i=Ji;i>0;i-=1){var a=na(r),o=ra(zi({h:ia(a,i,!0),s:aa(a,i,!0),v:oa(a,i,!0)}));n.push(o)}n.push(ra(r));for(var s=1;s<=ea;s+=1){var l=na(r),u=ra(zi({h:ia(l,s),s:aa(l,s),v:oa(l,s)}));n.push(u)}return"dark"===t.theme?ta.map((function(e){var r=e.index,i=e.opacity,a=ra(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(zi(t.backgroundColor||"#141414"),zi(n[r]),100*i));return a})):n}var la={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ua={},ca={};Object.keys(la).forEach((function(e){ua[e]=sa(la[e]),ua[e].primary=ua[e][5],ca[e]=sa(la[e],{theme:"dark",backgroundColor:"#141414"}),ca[e].primary=ca[e][5]}));ua.red,ua.volcano,ua.gold,ua.orange,ua.yellow,ua.lime,ua.green,ua.cyan;var ha=ua.blue,da=(ua.geekblue,ua.purple,ua.magenta,ua.grey,ua.grey,function(e){var t=e.controlHeight;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}});var fa={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},pa=Object.assign(Object.assign({},fa),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),va=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=zi(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=Pi(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=Li(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Li(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Ni(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Ni(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Fi(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var a=[Ri(Math.round(e).toString(16)),Ri(Math.round(t).toString(16)),Ri(Math.round(n).toString(16)),Ri(Bi(r))];return i&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Ii(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Ii(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Fi(this.r,this.g,this.b,!1),t=0,n=Object.entries(ji);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Oi(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Oi(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Oi(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Oi(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),a=n/100;return new e({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,a=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(new e(r));return a},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(new e({h:r,s:i,v:a})),a=(a+s)%1;return o},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],a=360/t,o=1;o<t;o++)i.push(new e({h:(r+o*a)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function ma(e,t){var n=t.generateColorPalettes,r=t.generateNeutralColorPalettes,i=e.colorSuccess,a=e.colorWarning,o=e.colorError,s=e.colorInfo,l=e.colorPrimary,u=e.colorBgBase,c=e.colorTextBase,h=n(l),d=n(i),f=n(a),p=n(o),v=n(s),m=r(u,c);return Object.assign(Object.assign({},m),{colorPrimaryBg:h[1],colorPrimaryBgHover:h[2],colorPrimaryBorder:h[3],colorPrimaryBorderHover:h[4],colorPrimaryHover:h[5],colorPrimary:h[6],colorPrimaryActive:h[7],colorPrimaryTextHover:h[8],colorPrimaryText:h[9],colorPrimaryTextActive:h[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:v[1],colorInfoBgHover:v[2],colorInfoBorder:v[3],colorInfoBorderHover:v[4],colorInfoHover:v[4],colorInfo:v[6],colorInfoActive:v[7],colorInfoTextHover:v[8],colorInfoText:v[9],colorInfoTextActive:v[10],colorBgMask:new va("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var ga=function(e){var t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e>16?16:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}};var ya=function(e,t){return new va(e).setAlpha(t).toRgbString()},ba=function(e,t){return new va(e).darken(t).toHexString()},_a=function(e){var t=sa(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},xa=function(e,t){var n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:ya(r,.88),colorTextSecondary:ya(r,.65),colorTextTertiary:ya(r,.45),colorTextQuaternary:ya(r,.25),colorFill:ya(r,.15),colorFillSecondary:ya(r,.06),colorFillTertiary:ya(r,.04),colorFillQuaternary:ya(r,.02),colorBgLayout:ba(n,4),colorBgContainer:ba(n,0),colorBgElevated:ba(n,0),colorBgSpotlight:ya(r,.85),colorBorder:ba(n,15),colorBorderSecondary:ba(n,6)}};var Ea=function(e){var t=function(e){var t=new Array(10).fill(null).map((function(t,n){var r=n-1,i=e*Math.pow(2.71828,r/5),a=n>1?Math.floor(i):Math.ceil(i);return 2*Math.floor(a/2)}));return t[1]=e,t.map((function(e){return{size:e,lineHeight:(e+8)/e}}))}(e),n=t.map((function(e){return e.size})),r=t.map((function(e){return e.lineHeight}));return{fontSizeSM:n[0],fontSize:n[1],fontSizeLG:n[2],fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:r[1],lineHeightLG:r[2],lineHeightSM:r[0],lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function wa(e){var t=Object.keys(fa).map((function(t){var n=sa(e[t]);return new Array(10).fill(1).reduce((function(e,r,i){return e["".concat(t,"-").concat(i+1)]=n[i],e["".concat(t).concat(i+1)]=n[i],e}),{})})).reduce((function(e,t){return e=Object.assign(Object.assign({},e),t)}),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),ma(e,{generateColorPalettes:_a,generateNeutralColorPalettes:xa})),Ea(e.fontSize)),function(e){var t=e.sizeUnit,n=e.sizeStep;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),da(e)),function(e){var t=e.motionUnit,n=e.motionBase,r=e.borderRadius,i=e.lineWidth;return Object.assign({motionDurationFast:"".concat((n+t).toFixed(1),"s"),motionDurationMid:"".concat((n+2*t).toFixed(1),"s"),motionDurationSlow:"".concat((n+3*t).toFixed(1),"s"),lineWidthBold:i+1},ga(r))}(e))}function Ta(e){return e>=0&&e<=255}var Sa=function(e,t){var n=new va(e).toRgb(),r=n.r,i=n.g,a=n.b;if(n.a<1)return e;for(var o=new va(t).toRgb(),s=o.r,l=o.g,u=o.b,c=.01;c<=1;c+=.01){var h=Math.round((r-s*(1-c))/c),d=Math.round((i-l*(1-c))/c),f=Math.round((a-u*(1-c))/c);if(Ta(h)&&Ta(d)&&Ta(f))return new va({r:h,g:d,b:f,a:Math.round(100*c)/100}).toRgbString()}return new va({r:r,g:i,b:a,a:1}).toRgbString()},ka=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Ca(e){var t=e.override,n=ka(e,["override"]),r=Object.assign({},t);Object.keys(pa).forEach((function(e){delete r[e]}));var i=Object.assign(Object.assign({},n),r),a=1200,o=1600;if(!1===i.motion){var s="0s";i.motionDurationFast=s,i.motionDurationMid=s,i.motionDurationSlow=s}return Object.assign(Object.assign(Object.assign({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Sa(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Sa(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Sa(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:4*i.lineWidth,lineWidth:i.lineWidth,controlOutlineWidth:2*i.lineWidth,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Sa(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:a,screenXLMin:a,screenXLMax:1599,screenXXL:o,screenXXLMin:o,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:"\n      0 1px 2px -2px ".concat(new va("rgba(0, 0, 0, 0.16)").toRgbString(),",\n      0 3px 6px 0 ").concat(new va("rgba(0, 0, 0, 0.12)").toRgbString(),",\n      0 5px 12px 4px ").concat(new va("rgba(0, 0, 0, 0.09)").toRgbString(),"\n    "),boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var Aa=zn(wa),Ia={token:pa,hashed:!0},Oa=a.createContext(Ia);function Pa(){var e=a.useContext(Oa),t=e.token,n=e.hashed,r=e.theme,i=e.components,o="".concat(Ai,"-").concat(n||""),s=r||Aa,l=It(Lt(s,[pa,t],{salt:o,override:Object.assign({override:t},i),formatToken:Ca}),2),u=l[0],c=l[1];return[s,u,n?c:""]}var Ma="anticon",Ra=a.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},iconPrefixCls:Ma}),Na=(Ra.Consumer,"-ant-".concat(Date.now(),"-").concat(Math.random()));function Da(e,t){var n=function(e,t){var n={},r=function(e,t){var n=e.clone();return(n=(null===t||void 0===t?void 0:t(n))||n).toRgbString()},i=function(e,t){var i=new va(e),a=sa(i.toRgbString());n["".concat(t,"-color")]=r(i),n["".concat(t,"-color-disabled")]=a[1],n["".concat(t,"-color-hover")]=a[4],n["".concat(t,"-color-active")]=a[6],n["".concat(t,"-color-outline")]=i.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=a[0],n["".concat(t,"-color-deprecated-border")]=a[2]};if(t.primaryColor){i(t.primaryColor,"primary");var a=new va(t.primaryColor),o=sa(a.toRgbString());o.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(a,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=r(a,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=r(a,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=r(a,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=r(a,(function(e){return e.setAlpha(.12*e.getAlpha())}));var s=new va(o[0]);n["primary-color-active-deprecated-f-30"]=r(s,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=r(s,(function(e){return e.darken(2)}))}t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info");var l=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(l.join("\n"),"\n  }\n  ").trim()}(e,t);ct()&&xt(n,"".concat(Na,"-dynamic-theme"))}var La=a.createContext(!1),Fa=function(e){var t=e.children,n=e.disabled,r=a.useContext(La);return a.createElement(La.Provider,{value:null!==n&&void 0!==n?n:r},t)},Ba=La,Ua=function(e){var t=a.useContext(za);return a.useMemo((function(){return e?"string"===typeof e?null!==e&&void 0!==e?e:t:e instanceof Function?e(t):t:t}),[e,t])},Ha=a.createContext(void 0),ja=function(e){var t=e.children,n=e.size,r=Ua(n);return a.createElement(Ha.Provider,{value:r},t)},za=Ha;var Va=function(){return{componentDisabled:(0,a.useContext)(Ba),componentSize:(0,a.useContext)(za)}};var Ga=n(6123),Wa=n.n(Ga);function Xa(e){return e instanceof HTMLElement||e instanceof SVGElement}function Ya(e){return Xa(e)?e:e instanceof a.Component?Re.findDOMNode(e):null}function Ka(e,t){"function"===typeof e?e(t):"object"===u(e)&&e&&"current"in e&&(e.current=t)}function qa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){Ka(t,e)}))}}function $a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ye((function(){return qa.apply(void 0,t)}),t,(function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))}function Za(e){var t,n,r=(0,Xn.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}var Qa=["children"],Ja=a.createContext({});function eo(e){var t=e.children,n=Wn(e,Qa);return a.createElement(Ja.Provider,{value:n},t)}var to=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),no=to;function ro(e){var t=a.useRef(!1),n=It(a.useState(e),2),r=n[0],i=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||i(e)}]}var io="none",ao="appear",oo="enter",so="leave",lo="none",uo="prepare",co="start",ho="active",fo="end",po="prepared";function vo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var mo=function(e,t){var n={animationend:vo("Animation","AnimationEnd"),transitionend:vo("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(ct(),"undefined"!==typeof window?window:{}),go={};if(ct()){var yo=document.createElement("div");go=yo.style}var bo={};function _o(e){if(bo[e])return bo[e];var t=mo[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var a=n[i];if(Object.prototype.hasOwnProperty.call(t,a)&&a in go)return bo[e]=t[a],bo[e]}return""}var xo=_o("animationend"),Eo=_o("transitionend"),wo=!(!xo||!Eo),To=xo||"animationend",So=Eo||"transitionend";function ko(e,t){if(!e)return null;if("object"===u(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var Co=function(e){var t=(0,a.useRef)(),n=(0,a.useRef)(e);n.current=e;var r=a.useCallback((function(e){n.current(e)}),[]);function i(e){e&&(e.removeEventListener(So,r),e.removeEventListener(To,r))}return a.useEffect((function(){return function(){i(t.current)}}),[]),[function(e){t.current&&t.current!==e&&i(t.current),e&&e!==t.current&&(e.addEventListener(So,r),e.addEventListener(To,r),t.current=e)},i]},Ao=ct()?a.useLayoutEffect:a.useEffect,Io=function(e){return+setTimeout(e,16)},Oo=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Io=function(e){return window.requestAnimationFrame(e)},Oo=function(e){return window.cancelAnimationFrame(e)});var Po=0,Mo=new Map;function Ro(e){Mo.delete(e)}var No=function(e){var t=Po+=1;return function n(r){if(0===r)Ro(t),e();else{var i=Io((function(){n(r-1)}));Mo.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};No.cancel=function(e){var t=Mo.get(e);return Ro(t),Oo(t)};var Do=No,Lo=[uo,co,ho,fo],Fo=[uo,po],Bo=!1,Uo=!0;function Ho(e){return e===ho||e===fo}var jo=function(e,t,n){var r=It(ro(lo),2),i=r[0],o=r[1],s=function(){var e=a.useRef(null);function t(){Do.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var a=Do((function(){i<=1?r({isCanceled:function(){return a!==e.current}}):n(r,i-1)}));e.current=a},t]}(),l=It(s,2),u=l[0],c=l[1];var h=t?Fo:Lo;return Ao((function(){if(i!==lo&&i!==fo){var e=h.indexOf(i),t=h[e+1],r=n(i);r===Bo?o(t,!0):t&&u((function(e){function n(){e.isCanceled()||o(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,i]),a.useEffect((function(){return function(){c()}}),[]),[function(){o(uo,!0)},i]};var zo=function(e){var t=e;"object"===u(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,i=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,l=e.forceRender,u=e.children,c=e.motionName,h=e.leavedClassName,d=e.eventProps,f=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(Ja).motion),p=(0,a.useRef)(),v=(0,a.useRef)();var m=function(e,t,n,r){var i=r.motionEnter,o=void 0===i||i,s=r.motionAppear,l=void 0===s||s,u=r.motionLeave,c=void 0===u||u,h=r.motionDeadline,d=r.motionLeaveImmediately,f=r.onAppearPrepare,p=r.onEnterPrepare,v=r.onLeavePrepare,m=r.onAppearStart,g=r.onEnterStart,b=r.onLeaveStart,_=r.onAppearActive,x=r.onEnterActive,E=r.onLeaveActive,w=r.onAppearEnd,T=r.onEnterEnd,S=r.onLeaveEnd,k=r.onVisibleChanged,C=It(ro(),2),A=C[0],I=C[1],O=It(ro(io),2),P=O[0],M=O[1],R=It(ro(null),2),N=R[0],D=R[1],L=(0,a.useRef)(!1),F=(0,a.useRef)(null);function B(){return n()}var U=(0,a.useRef)(!1);function H(){M(io,!0),D(null,!0)}function j(e){var t=B();if(!e||e.deadline||e.target===t){var n,r=U.current;P===ao&&r?n=null===w||void 0===w?void 0:w(t,e):P===oo&&r?n=null===T||void 0===T?void 0:T(t,e):P===so&&r&&(n=null===S||void 0===S?void 0:S(t,e)),P!==io&&r&&!1!==n&&H()}}var z=It(Co(j),1)[0],V=function(e){var t,n,r;switch(e){case ao:return y(t={},uo,f),y(t,co,m),y(t,ho,_),t;case oo:return y(n={},uo,p),y(n,co,g),y(n,ho,x),n;case so:return y(r={},uo,v),y(r,co,b),y(r,ho,E),r;default:return{}}},G=a.useMemo((function(){return V(P)}),[P]),W=It(jo(P,!e,(function(e){if(e===uo){var t=G[uo];return t?t(B()):Bo}var n;return Y in G&&D((null===(n=G[Y])||void 0===n?void 0:n.call(G,B(),null))||null),Y===ho&&(z(B()),h>0&&(clearTimeout(F.current),F.current=setTimeout((function(){j({deadline:!0})}),h))),Y===po&&H(),Uo})),2),X=W[0],Y=W[1],K=Ho(Y);U.current=K,Ao((function(){I(t);var n,r=L.current;L.current=!0,!r&&t&&l&&(n=ao),r&&t&&o&&(n=oo),(r&&!t&&c||!r&&d&&!t&&c)&&(n=so);var i=V(n);n&&(e||i[uo])?(M(n),X()):M(io)}),[t]),(0,a.useEffect)((function(){(P===ao&&!l||P===oo&&!o||P===so&&!c)&&M(io)}),[l,o,c]),(0,a.useEffect)((function(){return function(){L.current=!1,clearTimeout(F.current)}}),[]);var q=a.useRef(!1);(0,a.useEffect)((function(){A&&(q.current=!0),void 0!==A&&P===io&&((q.current||A)&&(null===k||void 0===k||k(A)),q.current=!0)}),[A,P]);var $=N;return G[uo]&&Y===co&&($=Pe({transition:"none"},$)),[P,Y,$,null!==A&&void 0!==A?A:t]}(f,i,(function(){try{return p.current instanceof HTMLElement?p.current:Ya(v.current)}catch(Qp){return null}}),e),g=It(m,4),b=g[0],_=g[1],x=g[2],E=g[3],w=a.useRef(E);E&&(w.current=!0);var T,S=a.useCallback((function(e){p.current=e,Ka(n,e)}),[n]),k=Pe(Pe({},d),{},{visible:i});if(u)if(b===io)T=E?u(Pe({},k),S):!s&&w.current&&h?u(Pe(Pe({},k),{},{className:h}),S):l||!s&&!h?u(Pe(Pe({},k),{},{style:{display:"none"}}),S):null;else{var C,A;_===uo?A="prepare":Ho(_)?A="active":_===co&&(A="start");var I=ko(c,"".concat(b,"-").concat(A));T=u(Pe(Pe({},k),{},{className:Wa()(ko(c,b),(C={},y(C,I,I&&A),y(C,c,"string"===typeof c),C)),style:x}),S)}else T=null;a.isValidElement(T)&&Za(T)&&(T.ref||(T=a.cloneElement(T,{ref:S})));return a.createElement(no,{ref:v},T)}));return n.displayName="CSSMotion",n}(wo),Vo="add",Go="keep",Wo="remove",Xo="removed";function Yo(e){var t;return Pe(Pe({},t=e&&"object"===u(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Ko(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(Yo)}var qo=["component","children","onVisibleChanged","onAllRemoved"],$o=["status"],Zo=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var Qo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zo,n=function(e){p(r,e);var n=g(r);function r(){var e;l(this,r);for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return y(m(e=n.call.apply(n,[this].concat(i))),"state",{keyEntities:[]}),y(m(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Pe(Pe({},e),{},{status:Xo})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==Xo})).length})),e}return d(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,s=r.onVisibleChanged,l=r.onAllRemoved,u=Wn(r,qo),c=i||a.Fragment,h={};return Zo.forEach((function(e){h[e]=u[e],delete u[e]})),delete u.keys,a.createElement(c,u,n.map((function(n){var r=n.status,i=Wn(n,$o),u=r===Vo||r===Go;return a.createElement(t,Ft({},h,{key:i.key,visible:u,eventProps:i,onVisibleChanged:function(t){(null===s||void 0===s||s(t,{key:i.key}),t)||0===e.removeKey(i.key)&&l&&l()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Ko(n),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,a=Ko(e),o=Ko(t);a.forEach((function(e){for(var t=!1,a=r;a<i;a+=1){var s=o[a];if(s.key===e.key){r<a&&(n=n.concat(o.slice(r,a).map((function(e){return Pe(Pe({},e),{},{status:Vo})}))),r=a),n.push(Pe(Pe({},s),{},{status:Go})),r+=1,t=!0;break}}t||n.push(Pe(Pe({},e),{},{status:Wo}))})),r<i&&(n=n.concat(o.slice(r).map((function(e){return Pe(Pe({},e),{},{status:Vo})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Wo}))).forEach((function(t){t.key===e&&(t.status=Go)}))})),n}(r,i);return{keyEntities:a.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Xo||e.status!==Wo}))}}}]),r}(a.Component);return y(n,"defaultProps",{component:"div"}),n}(wo),Jo=zo;function es(e){var t=e.children,n=It(Pa(),2)[1].motion,r=a.useRef(!1);return r.current=r.current||!1===n,r.current?a.createElement(eo,{motion:n},t):t}var ts,ns,rs={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},is=function(e){return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}},as=function(e){var t;return{a:(t={color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}},y(t,"&:active,\n  &:hover",{textDecoration:e.linkHoverDecoration,outline:0}),y(t,"&:focus",{textDecoration:e.linkFocusDecoration,outline:0}),y(t,"&[disabled]",{color:e.colorTextDisabled,cursor:"not-allowed"}),t)}},os=function(e,t){var n=e.fontFamily,r=e.fontSize,i='[class^="'.concat(t,'"], [class*=" ').concat(t,'"]');return y({},i,y({fontFamily:n,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}},i,{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}))},ss=function(e){return{outline:"".concat(e.lineWidthFocus,"px solid ").concat(e.colorPrimaryBorder),outlineOffset:1,transition:"outline-offset 0s, outline 0s"}},ls=function(e){return{"&:focus-visible":Object.assign({},ss(e))}},us=function(e,t){var n=It(Pa(),2);return Dn({theme:n[0],token:n[1],hashId:"",path:["ant-design-icons",e],nonce:function(){return null===t||void 0===t?void 0:t.nonce}},(function(){return[y({},".".concat(e),Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),y({},".".concat(e," .").concat(e,"-icon"),{display:"block"})))]}))},cs=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},hs=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"];function ds(){return ts||"ant"}function fs(){return ns||Ma}var ps=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(ds(),"-").concat(e):ds())},getIconPrefixCls:fs,getRootPrefixCls:function(){return ts||ds()}}},vs=function(e){var t=e.children,n=e.csp,r=e.autoInsertSpaceInButton,i=e.form,o=e.locale,s=e.componentSize,l=e.direction,u=e.space,c=e.virtual,h=e.dropdownMatchSelectWidth,d=e.popupMatchSelectWidth,f=e.popupOverflow,p=e.legacyLocale,v=e.parentContext,m=e.iconPrefixCls,g=e.theme,y=e.componentDisabled;var b=a.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var i=r||v.getPrefixCls("");return t?"".concat(i,"-").concat(t):i}),[v.getPrefixCls,e.prefixCls]),_=m||v.iconPrefixCls||Ma,x=_!==v.iconPrefixCls,E=n||v.csp,w=us(_,E),T=function(e,t){var n=e||{},r=!1!==n.inherit&&t?t:Ia,i=Ye((function(){if(!e)return t;var i=Object.assign({},r.components);return Object.keys(e.components||{}).forEach((function(t){i[t]=Object.assign(Object.assign({},i[t]),e.components[t])})),Object.assign(Object.assign(Object.assign({},r),n),{token:Object.assign(Object.assign({},r.token),n.token),components:i})}),[n,r],(function(e,t){return e.some((function(e,n){var r=t[n];return!tt(e,r,!0)}))}));return i}(g,v.theme);var S={csp:E,autoInsertSpaceInButton:r,locale:o||p,direction:l,space:u,virtual:c,popupMatchSelectWidth:null!==d&&void 0!==d?d:h,popupOverflow:f,getPrefixCls:b,iconPrefixCls:_,theme:T},k=Object.assign({},v);Object.keys(S).forEach((function(e){void 0!==S[e]&&(k[e]=S[e])})),hs.forEach((function(t){var n=e[t];n&&(k[t]=n)}));var C=Ye((function(){return k}),k,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),A=a.useMemo((function(){return{prefixCls:_,csp:E}}),[_,E]),I=x?w(t):t,O=a.useMemo((function(){var e,t,n;return Br({},(null===(e=Ei.Form)||void 0===e?void 0:e.defaultValidateMessages)||{},(null===(n=null===(t=C.locale)||void 0===t?void 0:t.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===i||void 0===i?void 0:i.validateMessages)||{})}),[C,null===i||void 0===i?void 0:i.validateMessages]);Object.keys(O).length>0&&(I=a.createElement(ci,{validateMessages:O},t)),o&&(I=a.createElement(Ci,{locale:o,_ANT_MARK__:"internalMark"},I)),(_||E)&&(I=a.createElement(Gn.Provider,{value:A},I)),s&&(I=a.createElement(ja,{size:s},I)),I=a.createElement(es,null,I);var P=a.useMemo((function(){var e=T||{},t=e.algorithm,n=e.token,r=cs(e,["algorithm","token"]),i=t&&(!Array.isArray(t)||t.length>0)?zn(t):void 0;return Object.assign(Object.assign({},r),{theme:i,token:Object.assign(Object.assign({},pa),n)})}),[T]);return g&&(I=a.createElement(Oa.Provider,{value:P},I)),void 0!==y&&(I=a.createElement(Fa,{disabled:y},I)),a.createElement(Ra.Provider,{value:C},I)},ms=function(e){var t=a.useContext(Ra),n=a.useContext(ki);return a.createElement(vs,Object.assign({parentContext:t,legacyLocale:n},e))};ms.ConfigContext=Ra,ms.SizeContext=za,ms.config=function(e){var t=e.prefixCls,n=e.iconPrefixCls,r=e.theme;void 0!==t&&(ts=t),void 0!==n&&(ns=n),r&&Da(ds(),r)},ms.useConfig=Va,Object.defineProperty(ms,"SizeContext",{get:function(){return za}});var gs=ms,ys={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function bs(e,t){et(e,"[@ant-design/icons] ".concat(t))}function _s(e){return"object"===u(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===u(e.icon)||"function"===typeof e.icon)}function xs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function Es(e,t,n){return n?a.createElement(e.tag,Pe(Pe({key:t},xs(e.attrs)),n),(e.children||[]).map((function(n,r){return Es(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):a.createElement(e.tag,Pe({key:t},xs(e.attrs)),(e.children||[]).map((function(n,r){return Es(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function ws(e){return sa(e)[0]}function Ts(e){return e?Array.isArray(e)?e:[e]:[]}var Ss={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},ks=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=(0,a.useContext)(Gn),n=t.csp,r=t.prefixCls,i=e;r&&(i=i.replace(/anticon/g,r)),(0,a.useEffect)((function(){xt(i,"@ant-design-icons",{prepend:!0,csp:n})}),[])},Cs=["icon","className","onClick","style","primaryColor","secondaryColor"],As={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Is=function(e){var t=e.icon,n=e.className,r=e.onClick,i=e.style,a=e.primaryColor,o=e.secondaryColor,s=Wn(e,Cs),l=As;if(a&&(l={primaryColor:a,secondaryColor:o||ws(a)}),ks(),bs(_s(t),"icon should be icon definiton, but got ".concat(t)),!_s(t))return null;var u=t;return u&&"function"===typeof u.icon&&(u=Pe(Pe({},u),{},{icon:u.icon(l.primaryColor,l.secondaryColor)})),Es(u.icon,"svg-".concat(u.name),Pe({className:n,onClick:r,style:i,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};Is.displayName="IconReact",Is.getTwoToneColors=function(){return Pe({},As)},Is.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;As.primaryColor=t,As.secondaryColor=n||ws(t),As.calculated=!!n};var Os=Is;function Ps(e){var t=It(Ts(e),2),n=t[0],r=t[1];return Os.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Ms=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Ps(ha.primary);var Rs=a.forwardRef((function(e,t){var n,r=e.className,i=e.icon,o=e.spin,s=e.rotate,l=e.tabIndex,u=e.onClick,c=e.twoToneColor,h=Wn(e,Ms),d=a.useContext(Gn),f=d.prefixCls,p=void 0===f?"anticon":f,v=d.rootClassName,m=Wa()(v,p,(y(n={},"".concat(p,"-").concat(i.name),!!i.name),y(n,"".concat(p,"-spin"),!!o||"loading"===i.name),n),r),g=l;void 0===g&&u&&(g=-1);var b=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,_=It(Ts(c),2),x=_[0],E=_[1];return a.createElement("span",Pe(Pe({role:"img","aria-label":i.name},h),{},{ref:t,tabIndex:g,onClick:u,className:m}),a.createElement(Os,{icon:i,primaryColor:x,secondaryColor:E,style:b}))}));Rs.displayName="AntdIcon",Rs.getTwoToneColor=function(){var e=Os.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Rs.setTwoToneColor=Ps;var Ns=Rs,Ds=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:ys}))};var Ls=a.forwardRef(Ds),Fs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Bs=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:Fs}))};var Us=a.forwardRef(Bs),Hs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},js=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:Hs}))};var zs=a.forwardRef(js),Vs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Gs=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:Vs}))};var Ws=a.forwardRef(Gs),Xs=function(e,t){var n=a.useContext(ki),r=a.useMemo((function(){var r,i=t||Ei[e],a=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:{};return Object.assign(Object.assign({},"function"===typeof i?i():i),a||{})}),[e,t,n]);return[r,a.useMemo((function(){var e=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!e?Ei.locale:e}),[n])]};function Ys(e,t){var n=Pe({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var Ks=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),a=i.width,o=i.height;if(a||o)return!0}}return!1},qs=a.isValidElement;function $s(e){return e&&qs(e)&&e.type===a.Fragment}function Zs(e,t){return function(e,t,n){return qs(e)?a.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}var Qs="undefined"!==typeof CSSINJS_STATISTIC,Js=!0;function el(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!Qs)return Object.assign.apply(Object,[{}].concat(t));Js=!1;var r={};return t.forEach((function(e){Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})}))})),Js=!0,r}var tl={};function nl(){}function rl(e,t,n,r){return function(i){var o=It(Pa(),3),s=o[0],l=o[1],u=o[2],c=(0,a.useContext)(Ra),h=c.getPrefixCls,d=c.iconPrefixCls,f=c.csp,p=h(),v={theme:s,token:l,hashId:u,nonce:function(){return null===f||void 0===f?void 0:f.nonce}};return Dn(Object.assign(Object.assign({},v),{path:["Shared",p]}),(function(){return[{"&":as(l)}]})),[Dn(Object.assign(Object.assign({},v),{path:[e,i,d]}),(function(){var a=function(e){var t,n=e,r=nl;return Qs&&(t=new Set,n=new Proxy(e,{get:function(e,n){return Js&&t.add(n),e[n]}}),r=function(e,n){tl[e]={global:Array.from(t),component:n}}),{token:n,keys:t,flush:r}}(l),o=a.token,s=a.flush,c="function"===typeof n?n(o):n,h=Object.assign(Object.assign({},c),l[e]),f=el(o,{componentCls:".".concat(i),prefixCls:i,iconCls:".".concat(d),antCls:".".concat(p)},h),v=t(f,{hashId:u,prefixCls:i,rootPrefixCls:p,iconPrefixCls:d,overrideComponentToken:l[e]});return s(e,h),[!1===(null===r||void 0===r?void 0:r.resetStyle)?null:os(l,i),v]})),u]}}var il=function(e){var t=e.componentCls,n=e.colorPrimary;return y({},t,{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(n,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}})},al=rl("Wave",(function(e){return[il(e)]}));function ol(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}function sl(e){return Number.isNaN(e)?0:e}var ll=function(e){var t=e.className,n=e.target,r=a.useRef(null),i=It(a.useState(null),2),o=i[0],s=i[1],l=It(a.useState([]),2),u=l[0],c=l[1],h=It(a.useState(0),2),d=h[0],f=h[1],p=It(a.useState(0),2),v=p[0],m=p[1],g=It(a.useState(0),2),y=g[0],b=g[1],_=It(a.useState(0),2),x=_[0],E=_[1],w=It(a.useState(!1),2),T=w[0],S=w[1],k={left:d,top:v,width:y,height:x,borderRadius:u.map((function(e){return"".concat(e,"px")})).join(" ")};function C(){var e=getComputedStyle(n);s(function(e){var t=getComputedStyle(e),n=t.borderTopColor,r=t.borderColor,i=t.backgroundColor;return ol(n)?n:ol(r)?r:ol(i)?i:null}(n));var t="static"===e.position,r=e.borderLeftWidth,i=e.borderTopWidth;f(t?n.offsetLeft:sl(-parseFloat(r))),m(t?n.offsetTop:sl(-parseFloat(i))),b(n.offsetWidth),E(n.offsetHeight);var a=e.borderTopLeftRadius,o=e.borderTopRightRadius,l=e.borderBottomLeftRadius,u=e.borderBottomRightRadius;c([a,o,u,l].map((function(e){return sl(parseFloat(e))})))}return o&&(k["--wave-color"]=o),a.useEffect((function(){if(n){var e,t=Do((function(){C(),S(!0)}));return"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(C)).observe(n),function(){Do.cancel(t),null===e||void 0===e||e.disconnect()}}}),[]),T?a.createElement(Jo,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:function(e,t){var n;if(t.deadline||"opacity"===t.propertyName){var i=null===(n=r.current)||void 0===n?void 0:n.parentElement;Ge(i).then((function(){null===i||void 0===i||i.remove()}))}return!1}},(function(e){var n=e.className;return a.createElement("div",{ref:r,className:Wa()(t,n),style:k})})):null};function ul(e,t){return function(){!function(e,t){var n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",null===e||void 0===e||e.insertBefore(n,null===e||void 0===e?void 0:e.firstChild),He(a.createElement(ll,{target:e,className:t}),n)}(e.current,t)}}var cl=function(e){var t=e.children,n=e.disabled,r=(0,a.useContext)(Ra).getPrefixCls,i=(0,a.useRef)(null),o=r("wave"),s=It(al(o),2)[1],l=ul(i,Wa()(o,s));return a.useEffect((function(){var e=i.current;if(e&&1===e.nodeType&&!n){var t=function(t){"INPUT"===t.target.tagName||!Ks(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||l()};return e.addEventListener("click",t,!0),function(){e.removeEventListener("click",t,!0)}}}),[n]),a.isValidElement(t)?Zs(t,{ref:Za(t)?qa(t.ref,i):i}):null!==t&&void 0!==t?t:null},hl=function(e){return y({},e.componentCls,{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}})},dl=function(e){var t=e.componentCls;return y({},t,y({display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}}},"".concat(t,"-item:empty"),{display:"none"}))},fl=rl("Space",(function(e){return[dl(e),hl(e)]}),(function(){return{}}),{resetStyle:!1}),pl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},vl=a.createContext(null),ml=function(e,t){var n=a.useContext(vl),r=a.useMemo((function(){var r;if(!n)return"";var i=n.compactDirection,a=n.isFirstItem,o=n.isLastItem,s="vertical"===i?"-vertical-":"-";return Wa()((y(r={},"".concat(e,"-compact").concat(s,"item"),!0),y(r,"".concat(e,"-compact").concat(s,"first-item"),a),y(r,"".concat(e,"-compact").concat(s,"last-item"),o),y(r,"".concat(e,"-compact").concat(s,"item-rtl"),"rtl"===t),r))}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}},gl=function(e){var t=e.children;return a.createElement(vl.Provider,{value:null},t)},yl=function(e){var t=e.children,n=pl(e,["children"]);return a.createElement(vl.Provider,{value:n},t)},bl=function(e){var t,n=a.useContext(Ra),r=n.getPrefixCls,i=n.direction,o=e.size,s=e.direction,l=e.block,u=e.prefixCls,c=e.className,h=e.rootClassName,d=e.children,f=pl(e,["size","direction","block","prefixCls","className","rootClassName","children"]),p=Ua((function(e){var t;return null!==(t=null!==o&&void 0!==o?o:e)&&void 0!==t?t:"middle"})),v=r("space-compact",u),m=It(fl(v),2),g=m[0],b=m[1],_=Wa()(v,b,(y(t={},"".concat(v,"-rtl"),"rtl"===i),y(t,"".concat(v,"-block"),l),y(t,"".concat(v,"-vertical"),"vertical"===s),t),c,h),x=a.useContext(vl),E=Yn(d),w=a.useMemo((function(){return E.map((function(e,t){var n=e&&e.key||"".concat(v,"-item-").concat(t);return a.createElement(yl,{key:n,compactSize:p,compactDirection:s,isFirstItem:0===t&&(!x||(null===x||void 0===x?void 0:x.isFirstItem)),isLastItem:t===E.length-1&&(!x||(null===x||void 0===x?void 0:x.isLastItem))},e)}))}),[o,E,x]);return 0===E.length?null:g(a.createElement("div",Object.assign({className:_},f),w))},_l={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},xl=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:_l}))};var El=a.forwardRef(xl),wl=(0,a.forwardRef)((function(e,t){var n=e.className,r=e.style,i=e.children,o=e.prefixCls,s=Wa()("".concat(o,"-icon"),n);return a.createElement("span",{ref:t,className:s,style:r},i)})),Tl=wl,Sl=(0,a.forwardRef)((function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.iconClassName,s=Wa()("".concat(n,"-loading-icon"),r);return a.createElement(Tl,{prefixCls:n,className:s,style:i,ref:t},a.createElement(El,{className:o}))})),kl=function(){return{width:0,opacity:0,transform:"scale(0)"}},Cl=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},Al=function(e){var t=e.prefixCls,n=e.loading,r=e.existIcon,i=e.className,o=e.style,s=!!n;return r?a.createElement(Sl,{prefixCls:t,className:i,style:o}):a.createElement(Jo,{visible:s,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:kl,onAppearActive:Cl,onEnterStart:kl,onEnterActive:Cl,onLeaveStart:Cl,onLeaveActive:kl},(function(e,n){var r=e.className,s=e.style;return a.createElement(Sl,{prefixCls:t,className:i,style:Object.assign(Object.assign({},o),s),ref:n,iconClassName:r})}))},Il=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ol=a.createContext(void 0),Pl=function(e){var t,n=a.useContext(Ra),r=n.getPrefixCls,i=n.direction,o=e.prefixCls,s=e.size,l=e.className,u=Il(e,["prefixCls","size","className"]),c=r("btn-group",o),h=It(Pa(),3)[2],d="";switch(s){case"large":d="lg";break;case"small":d="sm"}var f=Wa()(c,(y(t={},"".concat(c,"-").concat(d),d),y(t,"".concat(c,"-rtl"),"rtl"===i),t),l,h);return a.createElement(Ol.Provider,{value:s},a.createElement("div",Object.assign({},u,{className:f})))},Ml=/^[\u4e00-\u9fa5]{2}$/,Rl=Ml.test.bind(Ml);function Nl(e){return"text"===e||"link"===e}function Dl(e,t){var n=!1,r=[];return a.Children.forEach(e,(function(e){var t=typeof e,i="string"===t||"number"===t;if(n&&i){var a=r.length-1,o=r[a];r[a]="".concat(o).concat(e)}else r.push(e);n=i})),a.Children.map(r,(function(e){return function(e,t){if(null!==e&&void 0!==e){var n=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&"string"===typeof e.type&&Rl(e.props.children)?Zs(e,{children:e.props.children.split("").join(n)}):"string"===typeof e?Rl(e)?a.createElement("span",null,e.split("").join(n)):a.createElement("span",null,e):$s(e)?a.createElement("span",null,e):e}}(e,t)}))}function Ll(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0},n=e.componentCls,r="".concat(n,"-compact");return y({},r,Object.assign(Object.assign({},function(e,t,n){var r,i=n.focusElCls,a=n.focus,o=n.borderElCls?"> *":"",s=["hover",a?"focus":null,"active"].filter(Boolean).map((function(e){return"&:".concat(e," ").concat(o)})).join(",");return y(r={},"&-item:not(".concat(t,"-last-item)"),{marginInlineEnd:-e.lineWidth}),y(r,"&-item",Object.assign(Object.assign(y({},s,{zIndex:2}),i?y({},"&".concat(i),{zIndex:2}):{}),y({},"&[disabled] ".concat(o),{zIndex:0}))),r}(e,r,t)),function(e,t,n){var r,i=n.borderElCls,a=i?"> ".concat(i):"";return y(r={},"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item) ").concat(a),{borderRadius:0}),y(r,"&-item:not(".concat(t,"-last-item)").concat(t,"-first-item"),y({},"& ".concat(a,", &").concat(e,"-sm ").concat(a,", &").concat(e,"-lg ").concat(a),{borderStartEndRadius:0,borderEndEndRadius:0})),y(r,"&-item:not(".concat(t,"-first-item)").concat(t,"-last-item"),y({},"& ".concat(a,", &").concat(e,"-sm ").concat(a,", &").concat(e,"-lg ").concat(a),{borderStartStartRadius:0,borderEndStartRadius:0})),r}(n,r,t)))}function Fl(e){var t="".concat(e.componentCls,"-compact-vertical");return y({},t,Object.assign(Object.assign({},function(e,t){var n;return y(n={},"&-item:not(".concat(t,"-last-item)"),{marginBottom:-e.lineWidth}),y(n,"&-item",{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}),n}(e,t)),function(e,t){var n;return y(n={},"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item)"),{borderRadius:0}),y(n,"&-item".concat(t,"-first-item:not(").concat(t,"-last-item)"),y({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderEndEndRadius:0,borderEndStartRadius:0})),y(n,"&-item".concat(t,"-last-item:not(").concat(t,"-first-item)"),y({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderStartStartRadius:0,borderStartEndRadius:0})),n}(e.componentCls,t)))}var Bl=function(e,t){return y({},"> span, > ".concat(e),{"&:not(:last-child)":y({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineEndColor:t}}),"&:not(:first-child)":y({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineStartColor:t}})})},Ul=function(e){var t,n,r=e.componentCls,i=e.fontSize,a=e.lineWidth,o=e.colorPrimaryHover,s=e.colorErrorHover;return y({},"".concat(r,"-group"),[(n={position:"relative",display:"inline-flex"},y(n,"> span, > ".concat(r),{"&:not(:last-child)":y({},"&, & > ".concat(r),{borderStartEndRadius:0,borderEndEndRadius:0}),"&:not(:first-child)":y({marginInlineStart:-a},"&, & > ".concat(r),{borderStartStartRadius:0,borderEndStartRadius:0})}),y(n,r,(t={position:"relative",zIndex:1},y(t,"&:hover,\n          &:focus,\n          &:active",{zIndex:2}),y(t,"&[disabled]",{zIndex:0}),t)),y(n,"".concat(r,"-icon-only"),{fontSize:i}),n),Bl("".concat(r,"-primary"),o),Bl("".concat(r,"-danger"),s)])},Hl=function(e){var t,n=e.componentCls,r=e.iconCls;return y({},n,(y(t={outline:"none",position:"relative",display:"inline-block",fontWeight:e.buttonFontWeight,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:"".concat(e.lineWidth,"px ").concat(e.lineType," transparent"),cursor:"pointer",transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut),userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"}},"".concat(n,"-icon"),{lineHeight:0}),y(t,"&:not(".concat(n,"-icon-only) > ").concat(n,"-icon"),y({},"&".concat(n,"-loading-icon, &:not(:last-child)"),{marginInlineEnd:e.marginXS})),y(t,"> span + ".concat(r),{marginInlineStart:e.marginXS}),y(t,"> a",{color:"currentColor"}),y(t,"&:not(:disabled)",Object.assign({},ls(e))),y(t,"&-icon-only".concat(n,"-compact-item"),{flex:"none"}),y(t,"&-compact-item".concat(n,"-primary"),y({},"&:not([disabled]) + ".concat(n,"-compact-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:"calc(100% + ".concat(2*e.lineWidth,"px)"),backgroundColor:e.colorPrimaryHover,content:'""'}})),y(t,"&-compact-vertical-item",y({},"&".concat(n,"-primary"),y({},"&:not([disabled]) + ".concat(n,"-compact-vertical-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:"calc(100% + ".concat(2*e.lineWidth,"px)"),height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}))),t))},jl=function(e,t){return{"&:not(:disabled)":{"&:hover":e,"&:active":t}}},zl=function(e){return{minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}},Vl=function(e){return{borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}},Gl=function(e){return{cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}},Wl=function(e,t,n,r,i,a,o){return y({},"&".concat(e,"-background-ghost"),Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:n||void 0,boxShadow:"none"},jl(Object.assign({backgroundColor:"transparent"},a),Object.assign({backgroundColor:"transparent"},o))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:i||void 0}}))},Xl=function(e){return{"&:disabled":Object.assign({},Gl(e))}},Yl=function(e){return Object.assign({},Xl(e))},Kl=function(e){return{"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}},ql=function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yl(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlTmpOutline)}),jl({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),Wl(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),y({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},jl({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Wl(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),Xl(e))))},$l=function(e){var t,n=e.componentCls;return y(t={},"".concat(n,"-default"),ql(e)),y(t,"".concat(n,"-primary"),function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Yl(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlOutline)}),jl({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),Wl(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),y({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.colorErrorOutline)},jl({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),Wl(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Xl(e))))}(e)),y(t,"".concat(n,"-dashed"),function(e){return Object.assign(Object.assign({},ql(e)),{borderStyle:"dashed"})}(e)),y(t,"".concat(n,"-link"),function(e){return Object.assign(Object.assign(Object.assign({color:e.colorLink},jl({color:e.colorLinkHover},{color:e.colorLinkActive})),Kl(e)),y({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},jl({color:e.colorErrorHover},{color:e.colorErrorActive})),Kl(e))))}(e)),y(t,"".concat(n,"-text"),function(e){return Object.assign(Object.assign(Object.assign({},jl({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Kl(e)),y({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},Kl(e)),jl({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))))}(e)),y(t,"".concat(n,"-disabled"),function(e){return Object.assign(Object.assign({},Gl(e)),y({},"&".concat(e.componentCls,":hover"),Object.assign({},Gl(e))))}(e)),t},Zl=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.componentCls,a=e.controlHeight,o=e.fontSize,s=e.lineHeight,l=e.lineWidth,u=e.borderRadius,c=e.buttonPaddingHorizontal,h=e.iconCls,d=Math.max(0,(a-o*s)/2-l),f=c-l,p="".concat(i,"-icon-only");return[y({},"".concat(i).concat(r),(n={fontSize:o,height:a,padding:"".concat(d,"px ").concat(f,"px"),borderRadius:u},y(n,"&".concat(p),(t={width:a,paddingInlineStart:0,paddingInlineEnd:0},y(t,"&".concat(i,"-round"),{width:"auto"}),y(t,h,{fontSize:e.buttonIconOnlyFontSize}),t)),y(n,"&".concat(i,"-loading"),{opacity:e.opacityLoading,cursor:"default"}),y(n,"".concat(i,"-loading-icon"),{transition:"width ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", opacity ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut)}),n)),y({},"".concat(i).concat(i,"-circle").concat(r),zl(e)),y({},"".concat(i).concat(i,"-round").concat(r),Vl(e))]},Ql=function(e){return Zl(e)},Jl=function(e){var t=el(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return Zl(t,"".concat(e.componentCls,"-sm"))},eu=function(e){var t=el(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return Zl(t,"".concat(e.componentCls,"-lg"))},tu=function(e){var t=e.componentCls;return y({},t,y({},"&".concat(t,"-block"),{width:"100%"}))},nu=rl("Button",(function(e){var t=el(e,{colorOutlineDefault:e.controlTmpOutline,buttonPaddingHorizontal:e.paddingContentHorizontal,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[Hl(t),Jl(t),Ql(t),eu(t),tu(t),$l(t),Ul(t),Ll(e),Fl(e)]})),ru=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function iu(e){return"danger"===e?{danger:!0}:{type:e}}var au=function(e,t){var n,r=e.loading,i=void 0!==r&&r,o=e.prefixCls,s=e.type,l=void 0===s?"default":s,u=e.danger,c=e.shape,h=void 0===c?"default":c,d=e.size,f=e.styles,p=e.disabled,v=e.className,m=e.rootClassName,g=e.children,b=e.icon,_=e.ghost,x=void 0!==_&&_,E=e.block,w=void 0!==E&&E,T=e.htmlType,S=void 0===T?"button":T,k=e.classNames,C=ru(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames"]),A=(0,a.useContext)(Ra),I=A.getPrefixCls,O=A.autoInsertSpaceInButton,P=A.direction,M=I("btn",o),R=It(nu(M),2),N=R[0],D=R[1],L=(0,a.useContext)(Ba),F=null!==p&&void 0!==p?p:L,B=(0,a.useContext)(Ol),U=(0,a.useMemo)((function(){return function(e){if("object"===typeof e&&e){var t=null===e||void 0===e?void 0:e.delay;return{loading:!1,delay:Number.isNaN(t)||"number"!==typeof t?0:t}}return{loading:!!e,delay:0}}(i)}),[i]),H=It((0,a.useState)(U.loading),2),j=H[0],z=H[1],V=It((0,a.useState)(!1),2),G=V[0],W=V[1],X=qa(t,(0,a.createRef)()),Y=1===a.Children.count(g)&&!b&&!Nl(l);(0,a.useEffect)((function(){var e=null;return U.delay>0?e=setTimeout((function(){e=null,z(!0)}),U.delay):z(U.loading),function(){e&&(clearTimeout(e),e=null)}}),[U]),(0,a.useEffect)((function(){if(X&&X.current&&!1!==O){var e=X.current.textContent;Y&&Rl(e)?G||W(!0):G&&W(!1)}}),[X]);var K=function(t){var n=e.onClick;j||F?t.preventDefault():null===n||void 0===n||n(t)},q=!1!==O,$=ml(M,P),Z=$.compactSize,Q=$.compactItemClassnames,J={large:"lg",small:"sm",middle:void 0},ee=Ua((function(e){var t,n;return null!==(n=null!==(t=null!==Z&&void 0!==Z?Z:B)&&void 0!==t?t:d)&&void 0!==n?n:e})),te=ee&&J[ee]||"",ne=j?"loading":b,re=Ys(C,["navigate"]),ie=void 0!==re.href&&F,ae=Wa()(M,D,(y(n={},"".concat(M,"-").concat(h),"default"!==h&&h),y(n,"".concat(M,"-").concat(l),l),y(n,"".concat(M,"-").concat(te),te),y(n,"".concat(M,"-icon-only"),!g&&0!==g&&!!ne),y(n,"".concat(M,"-background-ghost"),x&&!Nl(l)),y(n,"".concat(M,"-loading"),j),y(n,"".concat(M,"-two-chinese-chars"),G&&q&&!j),y(n,"".concat(M,"-block"),w),y(n,"".concat(M,"-dangerous"),!!u),y(n,"".concat(M,"-rtl"),"rtl"===P),y(n,"".concat(M,"-disabled"),ie),n),Q,v,m),oe=b&&!j?a.createElement(Tl,{prefixCls:M,className:null===k||void 0===k?void 0:k.icon,style:null===f||void 0===f?void 0:f.icon},b):a.createElement(Al,{existIcon:!!b,prefixCls:M,loading:!!j}),se=g||0===g?Dl(g,Y&&q):null;if(void 0!==re.href)return N(a.createElement("a",Object.assign({},re,{className:ae,onClick:K,ref:X}),oe,se));var le=a.createElement("button",Object.assign({},C,{type:S,className:ae,onClick:K,disabled:F,ref:X}),oe,se);return Nl(l)||(le=a.createElement(cl,{disabled:!!j},le)),N(le)},ou=(0,a.forwardRef)(au);ou.Group=Pl,ou.__ANT_BUTTON=!0;var su=ou;function lu(e){return!(!e||!e.then)}var uu,cu=function(e){var t=e.type,n=e.children,r=e.prefixCls,i=e.buttonProps,o=e.close,s=e.autoFocus,l=e.emitEvent,u=e.quitOnNullishReturnValue,c=e.actionFn,h=a.useRef(!1),d=a.useRef(null),f=It(ro(!1),2),p=f[0],v=f[1],m=function(){null===o||void 0===o||o.apply(void 0,arguments)};a.useEffect((function(){var e=null;return s&&(e=setTimeout((function(){var e;null===(e=d.current)||void 0===e||e.focus()}))),function(){e&&clearTimeout(e)}}),[]);return a.createElement(su,Object.assign({},iu(t),{onClick:function(e){if(!h.current)if(h.current=!0,c){var t;if(l){if(t=c(e),u&&!lu(t))return h.current=!1,void m(e)}else if(c.length)t=c(o),h.current=!1;else if(!(t=c()))return void m();!function(e){lu(e)&&(v(!0),e.then((function(){v(!1,!0),m.apply(void 0,arguments),h.current=!1}),(function(e){return v(!1,!0),h.current=!1,Promise.reject(e)})))}(t)}else m()},loading:p,prefixCls:r},i,{ref:d}),n)},hu=function(){return{height:0,opacity:0}},du=function(e){return{height:e.scrollHeight,opacity:1}},fu=function(e){return{height:e?e.offsetHeight:0}},pu=function(e,t){return!0===(null===t||void 0===t?void 0:t.deadline)||"height"===t.propertyName},vu=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)},mu=function(){return{motionName:"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ant","-motion-collapse"),onAppearStart:hu,onEnterStart:hu,onAppearActive:du,onEnterActive:du,onLeaveStart:fu,onLeaveActive:hu,onAppearEnd:pu,onEnterEnd:pu,onLeaveEnd:pu,motionDeadline:500}},gu=a.createContext(null),yu=ct()?a.useLayoutEffect:a.useEffect,bu=yu,_u=function(e,t){var n=a.useRef(!0);yu((function(){if(!n.current)return e()}),t),yu((function(){return n.current=!1,function(){n.current=!0}}),[])},xu=[];function Eu(e){if("undefined"===typeof document)return 0;if(e||void 0===uu){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var a=t.offsetWidth;i===a&&(a=n.clientWidth),document.body.removeChild(n),uu=i-a}return uu}var wu="rc-util-locker-".concat(Date.now()),Tu=0;function Su(e){var t=!!e,n=It(a.useState((function(){return Tu+=1,"".concat(wu,"_").concat(Tu)})),1)[0];bu((function(){if(t){var e=Eu(),r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;xt("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else _t(n);return function(){_t(n)}}),[t,n])}var ku=!1;var Cu=function(e){return!1!==e&&(ct()&&e?"string"===typeof e?document.querySelector(e):"function"===typeof e?e():e:null)},Au=a.forwardRef((function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer,o=(e.debug,e.autoDestroy),s=void 0===o||o,l=e.children,u=It(a.useState(n),2),c=u[0],h=u[1],d=c||n;a.useEffect((function(){(s||n)&&h(n)}),[n,s]);var f=It(a.useState((function(){return Cu(i)})),2),p=f[0],v=f[1];a.useEffect((function(){var e=Cu(i);v(null!==e&&void 0!==e?e:null)}));var m=function(e,t){var n=It(a.useState((function(){return ct()?document.createElement("div"):null})),1)[0],r=a.useRef(!1),i=a.useContext(gu),o=It(a.useState(xu),2),s=o[0],l=o[1],u=i||(r.current?void 0:function(e){l((function(t){return[e].concat(Ie(t))}))});function c(){n.parentElement||document.body.appendChild(n),r.current=!0}function h(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return bu((function(){return e?i?i(c):c():h(),h}),[e]),bu((function(){s.length&&(s.forEach((function(e){return e()})),l(xu))}),[s]),[n,u]}(d&&!p),g=It(m,2),y=g[0],b=g[1],_=null!==p&&void 0!==p?p:y;Su(r&&n&&ct()&&(_===y||_===document.body));var x=null;l&&Za(l)&&t&&(x=l.ref);var E=$a(x,t);if(!d||!ct()||void 0===p)return null;var w,T=!1===_||("boolean"===typeof w&&(ku=w),ku),S=l;return t&&(S=a.cloneElement(l,{ref:E})),a.createElement(gu.Provider,{value:b},T?S:(0,Re.createPortal)(S,_))}));var Iu=Au;var Ou=0;function Pu(e){var t=It(a.useState("ssr-id"),2),n=t[0],r=t[1],i=Pe({},o).useId,s=null===i||void 0===i?void 0:i();return a.useEffect((function(){if(!i){var e=Ou;Ou+=1,r("rc_unique_".concat(e))}}),[]),e||(s||n)}var Mu={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Mu.F1&&t<=Mu.F12)return!1;switch(t){case Mu.ALT:case Mu.CAPS_LOCK:case Mu.CONTEXT_MENU:case Mu.CTRL:case Mu.DOWN:case Mu.END:case Mu.ESC:case Mu.HOME:case Mu.INSERT:case Mu.LEFT:case Mu.MAC_FF_META:case Mu.META:case Mu.NUMLOCK:case Mu.NUM_CENTER:case Mu.PAGE_DOWN:case Mu.PAGE_UP:case Mu.PAUSE:case Mu.PRINT_SCREEN:case Mu.RIGHT:case Mu.SHIFT:case Mu.UP:case Mu.WIN_KEY:case Mu.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Mu.ZERO&&e<=Mu.NINE)return!0;if(e>=Mu.NUM_ZERO&&e<=Mu.NUM_MULTIPLY)return!0;if(e>=Mu.A&&e<=Mu.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Mu.SPACE:case Mu.QUESTION_MARK:case Mu.NUM_PLUS:case Mu.NUM_MINUS:case Mu.NUM_PERIOD:case Mu.NUM_DIVISION:case Mu.SEMICOLON:case Mu.DASH:case Mu.EQUALS:case Mu.COMMA:case Mu.PERIOD:case Mu.SLASH:case Mu.APOSTROPHE:case Mu.SINGLE_QUOTE:case Mu.OPEN_SQUARE_BRACKET:case Mu.BACKSLASH:case Mu.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Ru=Mu,Nu="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Du="aria-",Lu="data-";function Fu(e,t){return 0===e.indexOf(t)}function Bu(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Pe({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Fu(n,Du))||t.data&&Fu(n,Lu)||t.attr&&Nu.includes(n))&&(r[n]=e[n])})),r}function Uu(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function Hu(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}var ju=a.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),zu={width:0,height:0,overflow:"hidden",outline:"none"},Vu=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.title,s=e.ariaId,l=e.footer,u=e.closable,c=e.closeIcon,h=e.onClose,d=e.children,f=e.bodyStyle,p=e.bodyProps,v=e.modalRender,m=e.onMouseDown,g=e.onMouseUp,y=e.holderRef,b=e.visible,_=e.forceRender,x=e.width,E=e.height,w=(0,a.useRef)(),T=(0,a.useRef)();a.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=w.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===T.current?w.current.focus():e||t!==w.current||T.current.focus()}}}));var S,k,C,A={};void 0!==x&&(A.width=x),void 0!==E&&(A.height=E),l&&(S=a.createElement("div",{className:"".concat(n,"-footer")},l)),o&&(k=a.createElement("div",{className:"".concat(n,"-header")},a.createElement("div",{className:"".concat(n,"-title"),id:s},o))),u&&(C=a.createElement("button",{type:"button",onClick:h,"aria-label":"Close",className:"".concat(n,"-close")},c||a.createElement("span",{className:"".concat(n,"-close-x")})));var I=a.createElement("div",{className:"".concat(n,"-content")},C,k,a.createElement("div",Ft({className:"".concat(n,"-body"),style:f},p),d),S);return a.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:y,style:Pe(Pe({},i),A),className:Wa()(n,r),onMouseDown:m,onMouseUp:g},a.createElement("div",{tabIndex:0,ref:w,style:zu,"aria-hidden":"true"}),a.createElement(ju,{shouldUpdate:b||_},v?v(I):I),a.createElement("div",{tabIndex:0,ref:T,style:zu,"aria-hidden":"true"}))}));var Gu=Vu,Wu=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,i=e.style,o=e.className,s=e.visible,l=e.forceRender,u=e.destroyOnClose,c=e.motionName,h=e.ariaId,d=e.onVisibleChanged,f=e.mousePosition,p=(0,a.useRef)(),v=It(a.useState(),2),m=v[0],g=v[1],y={};function b(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=Hu(i),n.top+=Hu(i,!0),n}(p.current);g(f?"".concat(f.x-e.left,"px ").concat(f.y-e.top,"px"):"")}return m&&(y.transformOrigin=m),a.createElement(Jo,{visible:s,onVisibleChanged:d,onAppearPrepare:b,onEnterPrepare:b,forceRender:l,motionName:c,removeOnLeave:u,ref:p},(function(s,l){var u=s.className,c=s.style;return a.createElement(Gu,Ft({},e,{ref:t,title:r,ariaId:h,prefixCls:n,holderRef:l,style:Pe(Pe(Pe({},c),i),y),className:Wa()(o,u)}))}))}));Wu.displayName="Content";var Xu=Wu;function Yu(e){var t=e.prefixCls,n=e.style,r=e.visible,i=e.maskProps,o=e.motionName;return a.createElement(Jo,{key:"mask",visible:r,motionName:o,leavedClassName:"".concat(t,"-mask-hidden")},(function(e,r){var o=e.className,s=e.style;return a.createElement("div",Ft({ref:r,style:Pe(Pe({},s),n),className:Wa()("".concat(t,"-mask"),o)},i))}))}function Ku(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,r=e.zIndex,i=e.visible,o=void 0!==i&&i,s=e.keyboard,l=void 0===s||s,u=e.focusTriggerAfterClose,c=void 0===u||u,h=e.wrapStyle,d=e.wrapClassName,f=e.wrapProps,p=e.onClose,v=e.afterOpenChange,m=e.afterClose,g=e.transitionName,y=e.animation,b=e.closable,_=void 0===b||b,x=e.mask,E=void 0===x||x,w=e.maskTransitionName,T=e.maskAnimation,S=e.maskClosable,k=void 0===S||S,C=e.maskStyle,A=e.maskProps,I=e.rootClassName,O=(0,a.useRef)(),P=(0,a.useRef)(),M=(0,a.useRef)(),R=It(a.useState(o),2),N=R[0],D=R[1],L=Pu();function F(e){null===p||void 0===p||p(e)}var B=(0,a.useRef)(!1),U=(0,a.useRef)(),H=null;return k&&(H=function(e){B.current?B.current=!1:P.current===e.target&&F(e)}),(0,a.useEffect)((function(){o&&(D(!0),ht(P.current,document.activeElement)||(O.current=document.activeElement))}),[o]),(0,a.useEffect)((function(){return function(){clearTimeout(U.current)}}),[]),a.createElement("div",Ft({className:Wa()("".concat(n,"-root"),I)},Bu(e,{data:!0})),a.createElement(Yu,{prefixCls:n,visible:E&&o,motionName:Uu(n,w,T),style:Pe({zIndex:r},C),maskProps:A}),a.createElement("div",Ft({tabIndex:-1,onKeyDown:function(e){if(l&&e.keyCode===Ru.ESC)return e.stopPropagation(),void F(e);o&&e.keyCode===Ru.TAB&&M.current.changeActive(!e.shiftKey)},className:Wa()("".concat(n,"-wrap"),d),ref:P,onClick:H,style:Pe(Pe({zIndex:r},h),{},{display:N?null:"none"})},f),a.createElement(Xu,Ft({},e,{onMouseDown:function(){clearTimeout(U.current),B.current=!0},onMouseUp:function(){U.current=setTimeout((function(){B.current=!1}))},ref:M,closable:_,ariaId:L,prefixCls:n,visible:o&&N,onClose:F,onVisibleChanged:function(e){if(e)!function(){var e;ht(P.current,document.activeElement)||null===(e=M.current)||void 0===e||e.focus()}();else{if(D(!1),E&&O.current&&c){try{O.current.focus({preventScroll:!0})}catch(Qp){}O.current=null}N&&(null===m||void 0===m||m())}null===v||void 0===v||v(e)},motionName:Uu(n,g,y)}))))}var qu=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,i=e.destroyOnClose,o=void 0!==i&&i,s=e.afterClose,l=It(a.useState(t),2),u=l[0],c=l[1];return a.useEffect((function(){t&&c(!0)}),[t]),r||!o||u?a.createElement(Iu,{open:t||r||u,autoDestroy:!1,getContainer:n,autoLock:t||u},a.createElement(Ku,Ft({},e,{destroyOnClose:o,afterClose:function(){null===s||void 0===s||s(),c(!1)}}))):null};qu.displayName="Dialog";var $u,Zu=qu,Qu=a.createContext({}),Ju=function(e){var t=e.children,n=e.status,r=e.override,i=(0,a.useContext)(Qu),o=(0,a.useMemo)((function(){var e=Object.assign({},i);return r&&delete e.isFormItemInput,n&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[n,r,i]);return a.createElement(Qu.Provider,{value:o},t)},ec=function(){return ct()&&window.document.documentElement},tc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},nc=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:tc}))};var rc=a.forwardRef(nc),ic=function(e,t,n,r){var i,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return y(i={},"\n      ".concat(a).concat(e,"-enter,\n      ").concat(a).concat(e,"-appear\n    "),Object.assign(Object.assign({},function(e){return{animationDuration:e,animationFillMode:"both"}}(r)),{animationPlayState:"paused"})),y(i,"".concat(a).concat(e,"-leave"),Object.assign(Object.assign({},function(e){return{animationDuration:e,animationFillMode:"both"}}(r)),{animationPlayState:"paused"})),y(i,"\n      ".concat(a).concat(e,"-enter").concat(e,"-enter-active,\n      ").concat(a).concat(e,"-appear").concat(e,"-appear-active\n    "),{animationName:t,animationPlayState:"running"}),y(i,"".concat(a).concat(e,"-leave").concat(e,"-leave-active"),{animationName:n,animationPlayState:"running",pointerEvents:"none"}),i},ac=new Fn("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),oc=new Fn("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),sc=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.antCls,i="".concat(r,"-fade"),a=n?"&":"";return[ic(i,ac,oc,e.motionDurationMid,n),(t={},y(t,"\n        ".concat(a).concat(i,"-enter,\n        ").concat(a).concat(i,"-appear\n      "),{opacity:0,animationTimingFunction:"linear"}),y(t,"".concat(a).concat(i,"-leave"),{animationTimingFunction:"linear"}),t)]},lc=new Fn("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),uc=new Fn("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),cc=new Fn("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),hc=new Fn("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),dc=new Fn("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),fc=new Fn("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),pc={zoom:{inKeyframes:lc,outKeyframes:uc},"zoom-big":{inKeyframes:cc,outKeyframes:hc},"zoom-big-fast":{inKeyframes:cc,outKeyframes:hc},"zoom-left":{inKeyframes:new Fn("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new Fn("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new Fn("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new Fn("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:dc,outKeyframes:fc},"zoom-down":{inKeyframes:new Fn("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new Fn("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},vc=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),a=pc[t],o=a.inKeyframes,s=a.outKeyframes;return[ic(i,o,s,"zoom-big-fast"===t?e.motionDurationFast:e.motionDurationMid),(n={},y(n,"\n        ".concat(i,"-enter,\n        ").concat(i,"-appear\n      "),{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}}),y(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInOutCirc}),n)]};function mc(e){return{position:e,top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0}}var gc=function(e){var t,n=e.componentCls,r=e.antCls;return[y({},"".concat(n,"-root"),(t={},y(t,"".concat(n).concat(r,"-zoom-enter, ").concat(n).concat(r,"-zoom-appear"),{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"}),y(t,"".concat(n).concat(r,"-zoom-leave ").concat(n,"-content"),{pointerEvents:"none"}),y(t,"".concat(n,"-mask"),Object.assign(Object.assign({},mc("fixed")),y({zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask},"".concat(n,"-hidden"),{display:"none"}))),y(t,"".concat(n,"-wrap"),Object.assign(Object.assign({},mc("fixed")),{overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})),t)),y({},"".concat(n,"-root"),sc(e))]},yc=function(e){var t,n,r,i,a=e.componentCls;return[y({},"".concat(a,"-root"),(n={},y(n,"".concat(a,"-wrap"),{zIndex:e.zIndexPopupBase,position:"fixed",inset:0,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"}),y(n,"".concat(a,"-wrap-rtl"),{direction:"rtl"}),y(n,"".concat(a,"-centered"),y({textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'}},a,{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"})),y(n,"@media (max-width: ".concat(e.screenSMMax,")"),(t={},y(t,a,{maxWidth:"calc(100vw - 16px)",margin:"".concat(e.marginXS," auto")}),y(t,"".concat(a,"-centered"),y({},a,{flex:1})),t)),n)),y({},a,Object.assign(Object.assign({},is(e)),(r={pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:"calc(100vw - ".concat(2*e.margin,"px)"),margin:"0 auto",paddingBottom:e.paddingLG},y(r,"".concat(a,"-title"),{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"}),y(r,"".concat(a,"-content"),{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:"".concat(e.paddingMD,"px ").concat(e.paddingContentHorizontalLG,"px")}),y(r,"".concat(a,"-close"),Object.assign({position:"absolute",top:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,insetInlineEnd:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,zIndex:e.zIndexPopupBase+10,padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:"color ".concat(e.motionDurationMid,", background-color ").concat(e.motionDurationMid),"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:"".concat(e.modalCloseBtnSize,"px"),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.wireframe?"transparent":e.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:e.wireframe?"transparent":e.colorFillContentHover}},ls(e))),y(r,"".concat(a,"-header"),{color:e.colorText,background:e.headerBg,borderRadius:"".concat(e.borderRadiusLG,"px ").concat(e.borderRadiusLG,"px 0 0"),marginBottom:e.marginXS}),y(r,"".concat(a,"-body"),{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word"}),y(r,"".concat(a,"-footer"),y({textAlign:"end",background:e.footerBg,marginTop:e.marginSM},"".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn:not(").concat(e.antCls,"-dropdown-trigger)"),{marginBottom:0,marginInlineStart:e.marginXS})),y(r,"".concat(a,"-open"),{overflow:"hidden"}),r))),y({},"".concat(a,"-pure-panel"),(i={top:"auto",padding:0,display:"flex",flexDirection:"column"},y(i,"".concat(a,"-content,\n          ").concat(a,"-body,\n          ").concat(a,"-confirm-body-wrapper"),{display:"flex",flexDirection:"column",flex:"auto"}),y(i,"".concat(a,"-confirm-body"),{marginBottom:"auto"}),i))]},bc=function(e){var t,n,r,i,a=e.componentCls,o="".concat(a,"-confirm");return y(i={},o,(y(r={"&-rtl":{direction:"rtl"}},"".concat(e.antCls,"-modal-header"),{display:"none"}),y(r,"".concat(o,"-body-wrapper"),Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}})),y(r,"".concat(o,"-body"),(y(n={display:"flex",flexWrap:"wrap",alignItems:"center"},"".concat(o,"-title"),y({flex:"0 0 100%",display:"block",overflow:"hidden",color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight},"+ ".concat(o,"-content"),{marginBlockStart:e.marginXS,flexBasis:"100%",maxWidth:"calc(100% - ".concat(e.modalConfirmIconSize+e.marginSM,"px)")})),y(n,"".concat(o,"-content"),{color:e.colorText,fontSize:e.fontSize}),y(n,"> ".concat(e.iconCls),(y(t={flex:"none",marginInlineEnd:e.marginSM,fontSize:e.modalConfirmIconSize},"+ ".concat(o,"-title"),{flex:1}),y(t,"+ ".concat(o,"-title + ").concat(o,"-content"),{marginInlineStart:e.modalConfirmIconSize+e.marginSM}),t)),n)),y(r,"".concat(o,"-btns"),y({textAlign:"end",marginTop:e.marginSM},"".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn"),{marginBottom:0,marginInlineStart:e.marginXS})),r)),y(i,"".concat(o,"-error ").concat(o,"-body > ").concat(e.iconCls),{color:e.colorError}),y(i,"".concat(o,"-warning ").concat(o,"-body > ").concat(e.iconCls,",\n        ").concat(o,"-confirm ").concat(o,"-body > ").concat(e.iconCls),{color:e.colorWarning}),y(i,"".concat(o,"-info ").concat(o,"-body > ").concat(e.iconCls),{color:e.colorInfo}),y(i,"".concat(o,"-success ").concat(o,"-body > ").concat(e.iconCls),{color:e.colorSuccess}),i},_c=function(e){var t=e.componentCls;return y({},"".concat(t,"-root"),y({},"".concat(t,"-wrap-rtl"),y({direction:"rtl"},"".concat(t,"-confirm-body"),{direction:"rtl"})))},xc=function(e){var t,n,r,i=e.componentCls,a=e.antCls,o="".concat(i,"-confirm");return y(r={},i,(y(t={},"".concat(i,"-content"),{padding:0}),y(t,"".concat(i,"-header"),{padding:e.modalHeaderPadding,borderBottom:"".concat(e.modalHeaderBorderWidth,"px ").concat(e.modalHeaderBorderStyle," ").concat(e.modalHeaderBorderColorSplit),marginBottom:0}),y(t,"".concat(i,"-body"),{padding:e.modalBodyPadding}),y(t,"".concat(i,"-footer"),{padding:"".concat(e.modalFooterPaddingVertical,"px ").concat(e.modalFooterPaddingHorizontal,"px"),borderTop:"".concat(e.modalFooterBorderWidth,"px ").concat(e.modalFooterBorderStyle," ").concat(e.modalFooterBorderColorSplit),borderRadius:"0 0 ".concat(e.borderRadiusLG,"px ").concat(e.borderRadiusLG,"px"),marginTop:0}),t)),y(r,o,(y(n={},"".concat(a,"-modal-body"),{padding:"".concat(2*e.padding,"px ").concat(2*e.padding,"px ").concat(e.paddingLG,"px")}),y(n,"".concat(o,"-body"),y({},"> ".concat(e.iconCls),y({marginInlineEnd:e.margin},"+ ".concat(o,"-title + ").concat(o,"-content"),{marginInlineStart:e.modalConfirmIconSize+e.margin}))),y(n,"".concat(o,"-btns"),{marginTop:e.marginLG}),n)),r},Ec=rl("Modal",(function(e){var t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5,i=el(e,{modalBodyPadding:e.paddingLG,modalHeaderPadding:"".concat(t,"px ").concat(e.paddingLG,"px"),modalHeaderBorderWidth:e.lineWidth,modalHeaderBorderStyle:e.lineType,modalHeaderBorderColorSplit:e.colorSplit,modalHeaderHeight:r*n+2*t,modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterPaddingVertical:e.paddingXS,modalFooterPaddingHorizontal:e.padding,modalFooterBorderWidth:e.lineWidth,modalIconHoverColor:e.colorIconHover,modalCloseIconColor:e.colorIcon,modalCloseBtnSize:e.fontSize*e.lineHeight,modalConfirmIconSize:e.fontSize*e.lineHeight});return[yc(i),bc(i),_c(i),gc(i),e.wireframe&&xc(i),vc(i,"zoom")]}),(function(e){return{footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading}})),wc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Tc(e,t){return a.createElement("span",{className:"".concat(e,"-close-x")},t||a.createElement(rc,{className:"".concat(e,"-close-icon")}))}var Sc,kc=function(e){var t=e.okText,n=e.okType,r=void 0===n?"primary":n,i=e.cancelText,o=e.confirmLoading,s=e.onOk,l=e.onCancel,u=e.okButtonProps,c=e.cancelButtonProps,h=It(Xs("Modal",Si()),1)[0];return a.createElement(a.Fragment,null,a.createElement(su,Object.assign({onClick:l},c),i||(null===h||void 0===h?void 0:h.cancelText)),a.createElement(su,Object.assign({},iu(r),{loading:o,onClick:s},u),t||(null===h||void 0===h?void 0:h.okText)))},Cc=function(e){var t=e.prefixCls,n=e.className,r=e.closeIcon,i=e.closable,o=e.type,s=e.title,l=e.children,u=wc(e,["prefixCls","className","closeIcon","closable","type","title","children"]),c=a.useContext(Ra).getPrefixCls,h=c(),d=t||c("modal"),f=It(Ec(d),2)[1],p="".concat(d,"-confirm"),v={};return v=o?{closable:null!==i&&void 0!==i&&i,title:"",footer:"",children:a.createElement(Oc,Object.assign({},e,{confirmPrefixCls:p,rootPrefixCls:h,content:l}))}:{closable:null===i||void 0===i||i,title:s,footer:void 0===e.footer?a.createElement(kc,Object.assign({},e)):e.footer,children:l},a.createElement(Gu,Object.assign({prefixCls:d,className:Wa()(f,"".concat(d,"-pure-panel"),o&&p,o&&"".concat(p,"-").concat(o),n)},u,{closeIcon:Tc(d,r),closable:i},v))},Ac=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};ec()&&document.documentElement.addEventListener("click",(function(e){Sc={x:e.pageX,y:e.pageY},setTimeout((function(){Sc=null}),100)}),!0);var Ic=function(e){var t,n,r=a.useContext(Ra),i=r.getPopupContainer,o=r.getPrefixCls,s=r.direction,l=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},u=e.prefixCls,c=e.className,h=e.rootClassName,d=e.open,f=e.wrapClassName,p=e.centered,v=e.getContainer,m=e.closeIcon,g=e.focusTriggerAfterClose,b=void 0===g||g,_=e.visible,x=e.width,E=void 0===x?520:x,w=e.footer,T=Ac(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),S=o("modal",u),k=o(),C=It(Ec(S),2),A=C[0],I=C[1],O=Wa()(f,(y(t={},"".concat(S,"-centered"),!!p),y(t,"".concat(S,"-wrap-rtl"),"rtl"===s),t));var P=void 0===w?a.createElement(kc,Object.assign({},e,{onOk:function(t){var n=e.onOk;null===n||void 0===n||n(t)},onCancel:l})):w;return A(a.createElement(gl,null,a.createElement(Ju,{status:!0,override:!0},a.createElement(Zu,Object.assign({width:E},T,{getContainer:void 0===v?i:v,prefixCls:S,rootClassName:Wa()(I,h),wrapClassName:O,footer:P,visible:null!==d&&void 0!==d?d:_,mousePosition:null!==(n=T.mousePosition)&&void 0!==n?n:Sc,onClose:l,closeIcon:Tc(S,m),focusTriggerAfterClose:b,transitionName:vu(k,"zoom",e.transitionName),maskTransitionName:vu(k,"fade",e.maskTransitionName),className:Wa()(I,c)})))))};function Oc(e){var t=e.icon,n=e.onCancel,r=e.onOk,i=e.close,o=e.okText,s=e.okButtonProps,l=e.cancelText,u=e.cancelButtonProps,c=e.confirmPrefixCls,h=e.rootPrefixCls,d=e.type,f=e.okCancel,p=e.footer,v=e.locale,m=t;if(!t&&null!==t)switch(d){case"info":m=a.createElement(Ws,null);break;case"success":m=a.createElement(Ls,null);break;case"error":m=a.createElement(Us,null);break;default:m=a.createElement(zs,null)}var g=e.okType||"primary",y=null!==f&&void 0!==f?f:"confirm"===d,b=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),_=It(Xs("Modal"),1)[0],x=v||_,E=y&&a.createElement(cu,{actionFn:n,close:i,autoFocus:"cancel"===b,buttonProps:u,prefixCls:"".concat(h,"-btn")},l||(null===x||void 0===x?void 0:x.cancelText));return a.createElement("div",{className:"".concat(c,"-body-wrapper")},a.createElement("div",{className:"".concat(c,"-body")},m,void 0===e.title?null:a.createElement("span",{className:"".concat(c,"-title")},e.title),a.createElement("div",{className:"".concat(c,"-content")},e.content)),void 0===p?a.createElement("div",{className:"".concat(c,"-btns")},E,a.createElement(cu,{type:g,actionFn:r,close:i,autoFocus:"ok"===b,buttonProps:s,prefixCls:"".concat(h,"-btn")},o||(y?null===x||void 0===x?void 0:x.okText:null===x||void 0===x?void 0:x.justOkText))):p)}var Pc=function(e){var t=e.close,n=e.zIndex,r=e.afterClose,i=(e.visible,e.open),o=e.keyboard,s=e.centered,l=e.getContainer,u=e.maskStyle,c=e.direction,h=e.prefixCls,d=e.wrapClassName,f=e.rootPrefixCls,p=e.iconPrefixCls,v=e.bodyStyle,m=e.closable,g=void 0!==m&&m,b=e.closeIcon,_=e.modalRender,x=e.focusTriggerAfterClose;var E="".concat(h,"-confirm"),w=e.width||416,T=e.style||{},S=void 0===e.mask||e.mask,k=void 0!==e.maskClosable&&e.maskClosable,C=Wa()(E,"".concat(E,"-").concat(e.type),y({},"".concat(E,"-rtl"),"rtl"===c),e.className);return a.createElement(gs,{prefixCls:f,iconPrefixCls:p,direction:c},a.createElement(Ic,{prefixCls:h,className:C,wrapClassName:Wa()(y({},"".concat(E,"-centered"),!!e.centered),d),onCancel:function(){return null===t||void 0===t?void 0:t({triggerCancel:!0})},open:i,title:"",footer:null,transitionName:vu(f,"zoom",e.transitionName),maskTransitionName:vu(f,"fade",e.maskTransitionName),mask:S,maskClosable:k,maskStyle:u,style:T,bodyStyle:v,width:w,zIndex:n,afterClose:r,keyboard:o,centered:s,getContainer:l,closable:g,closeIcon:b,modalRender:_,focusTriggerAfterClose:x},a.createElement(Oc,Object.assign({},e,{confirmPrefixCls:E}))))},Mc=[],Rc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Nc="";function Dc(e){var t,n=document.createDocumentFragment(),r=Object.assign(Object.assign({},e),{close:s,open:!0});function i(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var a=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&a&&e.onCancel.apply(e,[function(){}].concat(Ie(r.slice(1))));for(var o=0;o<Mc.length;o++){if(Mc[o]===s){Mc.splice(o,1);break}}Ge(n)}function o(e){var r=e.okText,i=e.cancelText,o=e.prefixCls,s=Rc(e,["okText","cancelText","prefixCls"]);clearTimeout(t),t=setTimeout((function(){var e=Si(),t=ps(),l=t.getPrefixCls,u=t.getIconPrefixCls,c=l(void 0,Nc),h=o||"".concat(c,"-modal"),d=u();He(a.createElement(Pc,Object.assign({},s,{prefixCls:h,rootPrefixCls:c,iconPrefixCls:d,okText:r,locale:e,cancelText:i||e.cancelText})),n)}))}function s(){for(var t=this,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];(r=Object.assign(Object.assign({},r),{open:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),i.apply(t,a)}})).visible&&delete r.visible,o(r)}return o(r),Mc.push(s),{destroy:s,update:function(e){o(r="function"===typeof e?e(r):Object.assign(Object.assign({},r),e))}}}function Lc(e){return Object.assign(Object.assign({},e),{type:"warning"})}function Fc(e){return Object.assign(Object.assign({},e),{type:"info"})}function Bc(e){return Object.assign(Object.assign({},e),{type:"success"})}function Uc(e){return Object.assign(Object.assign({},e),{type:"error"})}function Hc(e){return Object.assign(Object.assign({},e),{type:"confirm"})}var jc=function(e,t){var n,r=e.afterClose,i=e.config,o=It(a.useState(!0),2),s=o[0],l=o[1],u=It(a.useState(i),2),c=u[0],h=u[1],d=a.useContext(Ra),f=d.direction,p=d.getPrefixCls,v=p("modal"),m=p(),g=function(){l(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.some((function(e){return e&&e.triggerCancel}));c.onCancel&&r&&c.onCancel.apply(c,[function(){}].concat(Ie(t.slice(1))))};a.useImperativeHandle(t,(function(){return{destroy:g,update:function(e){h((function(t){return Object.assign(Object.assign({},t),e)}))}}}));var y=null!==(n=c.okCancel)&&void 0!==n?n:"confirm"===c.type,b=It(Xs("Modal",Ei.Modal),1)[0];return a.createElement(Pc,Object.assign({prefixCls:v,rootPrefixCls:m},c,{close:g,open:s,afterClose:function(){var e;r(),null===(e=c.afterClose)||void 0===e||e.call(c)},okText:c.okText||(y?null===b||void 0===b?void 0:b.okText:null===b||void 0===b?void 0:b.justOkText),direction:c.direction||f,cancelText:c.cancelText||(null===b||void 0===b?void 0:b.cancelText)}))},zc=a.forwardRef(jc),Vc=0,Gc=a.memo(a.forwardRef((function(e,t){var n=function(){var e=It(a.useState([]),2),t=e[0],n=e[1];return[t,a.useCallback((function(e){return n((function(t){return[].concat(Ie(t),[e])})),function(){n((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),r=It(n,2),i=r[0],o=r[1];return a.useImperativeHandle(t,(function(){return{patchElement:o}}),[]),a.createElement(a.Fragment,null,i)})));var Wc=function(){var e=a.useRef(null),t=It(a.useState([]),2),n=t[0],r=t[1];a.useEffect((function(){n.length&&(Ie(n).forEach((function(e){e()})),r([]))}),[n]);var i=a.useCallback((function(t){return function(n){var i;Vc+=1;var o,s=a.createRef(),l=a.createElement(zc,{key:"modal-".concat(Vc),config:t(n),ref:s,afterClose:function(){null===o||void 0===o||o()}});return(o=null===(i=e.current)||void 0===i?void 0:i.patchElement(l))&&Mc.push(o),{destroy:function(){function e(){var e;null===(e=s.current)||void 0===e||e.destroy()}s.current?e():r((function(t){return[].concat(Ie(t),[e])}))},update:function(e){function t(){var t;null===(t=s.current)||void 0===t||t.update(e)}s.current?t():r((function(e){return[].concat(Ie(e),[t])}))}}}}),[]);return[a.useMemo((function(){return{info:i(Fc),success:i(Bc),error:i(Uc),warning:i(Lc),confirm:i(Hc)}}),[]),a.createElement(Gc,{key:"modal-holder",ref:e})]};function Xc(e){return Dc(Lc(e))}var Yc=Ic;Yc.useModal=Wc,Yc.info=function(e){return Dc(Fc(e))},Yc.success=function(e){return Dc(Bc(e))},Yc.error=function(e){return Dc(Uc(e))},Yc.warning=Xc,Yc.warn=Xc,Yc.confirm=function(e){return Dc(Hc(e))},Yc.destroyAll=function(){for(;Mc.length;){var e=Mc.pop();e&&e()}},Yc.config=function(e){var t=e.rootPrefixCls;Nc=t},Yc._InternalPanelDoNotUseOrYouWillBeFired=Cc;var Kc=Yc,qc=function(e){return{borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}},$c=function(e){return{borderColor:e.inputBorderHoverColor,boxShadow:"0 0 0 ".concat(e.controlOutlineWidth,"px ").concat(e.controlOutline),borderInlineEndWidth:e.lineWidth,outline:0}},Zc=function(e){return{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},qc(el(e,{inputBorderHoverColor:e.colorBorder})))}},Qc=function(e){var t=e.inputPaddingVerticalLG,n=e.fontSizeLG,r=e.lineHeightLG,i=e.borderRadiusLG,a=e.inputPaddingHorizontalLG;return{padding:"".concat(t,"px ").concat(a,"px"),fontSize:n,lineHeight:r,borderRadius:i}},Jc=function(e){return{padding:"".concat(e.inputPaddingVerticalSM,"px ").concat(e.controlPaddingHorizontalSM-1,"px"),borderRadius:e.borderRadiusSM}},eh=function(e,t){var n,r=e.componentCls,i=e.colorError,a=e.colorWarning,o=e.colorErrorOutline,s=e.colorWarningOutline,l=e.colorErrorBorderHover,u=e.colorWarningBorderHover;return y(n={},"&-status-error:not(".concat(t,"-disabled):not(").concat(t,"-borderless)").concat(t),y({borderColor:i,"&:hover":{borderColor:l},"&:focus, &-focused":Object.assign({},$c(el(e,{inputBorderActiveColor:i,inputBorderHoverColor:i,controlOutline:o})))},"".concat(r,"-prefix, ").concat(r,"-suffix"),{color:i})),y(n,"&-status-warning:not(".concat(t,"-disabled):not(").concat(t,"-borderless)").concat(t),y({borderColor:a,"&:hover":{borderColor:u},"&:focus, &-focused":Object.assign({},$c(el(e,{inputBorderActiveColor:a,inputBorderHoverColor:a,controlOutline:s})))},"".concat(r,"-prefix, ").concat(r,"-suffix"),{color:a})),n},th=function(e){return Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:"".concat(e.inputPaddingVertical,"px ").concat(e.inputPaddingHorizontal,"px"),color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:"all ".concat(e.motionDurationMid)},{"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e.colorTextPlaceholder,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),{"&:hover":Object.assign({},qc(e)),"&:focus, &-focused":Object.assign({},$c(e)),"&-disabled, &[disabled]":Object.assign({},Zc(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:"all ".concat(e.motionDurationSlow,", height 0s"),resize:"vertical"},"&-lg":Object.assign({},Qc(e)),"&-sm":Object.assign({},Jc(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}})},nh=function(e){var t,n=e.componentCls,r=e.controlHeightSM,i=(r-2*e.lineWidth-16)/2;return y({},n,Object.assign(Object.assign(Object.assign(Object.assign({},is(e)),th(e)),eh(e,n)),{'&[type="color"]':(t={height:e.controlHeight},y(t,"&".concat(n,"-lg"),{height:e.controlHeightLG}),y(t,"&".concat(n,"-sm"),{height:r,paddingTop:i,paddingBottom:i}),t),'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}}))},rh=function(e){var t,n=e.componentCls,r=e.inputAffixPadding,i=e.colorTextDescription,a=e.motionDurationSlow,o=e.colorIcon,s=e.colorIconHover,l=e.iconCls;return y({},"".concat(n,"-affix-wrapper"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},th(e)),(y(t={display:"inline-flex"},"&:not(".concat(n,"-affix-wrapper-disabled):hover"),Object.assign(Object.assign({},qc(e)),y({zIndex:1},"".concat(n,"-search-with-button &"),{zIndex:0}))),y(t,"&-focused, &:focus",{zIndex:1}),y(t,"&-disabled",y({},"".concat(n,"[disabled]"),{background:"transparent"})),y(t,"> input".concat(n),{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}}),y(t,"&::before",{width:0,visibility:"hidden",content:'"\\a0"'}),y(t,"".concat(n),{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}),t)),function(e){var t=e.componentCls;return y({},"".concat(t,"-clear-icon"),{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:"0 ".concat(e.inputAffixPadding,"px")}})}(e)),y({},"".concat(l).concat(n,"-password-icon"),{color:o,cursor:"pointer",transition:"all ".concat(a),"&:hover":{color:s}})),eh(e,"".concat(n,"-affix-wrapper"))))},ih=function(e){var t,n=e.componentCls,r=e.colorError,i=e.colorWarning,a=e.borderRadiusLG,o=e.borderRadiusSM;return y({},"".concat(n,"-group"),Object.assign(Object.assign(Object.assign({},is(e)),function(e){var t,n,r,i,a,o,s,l=e.componentCls,u=e.antCls;return y(s={position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0},"&[class*='col-']",{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}}),y(s,"&-lg ".concat(l,", &-lg > ").concat(l,"-group-addon"),Object.assign({},Qc(e))),y(s,"&-sm ".concat(l,", &-sm > ").concat(l,"-group-addon"),Object.assign({},Jc(e))),y(s,"&-lg ".concat(u,"-select-single ").concat(u,"-select-selector"),{height:e.controlHeightLG}),y(s,"&-sm ".concat(u,"-select-single ").concat(u,"-select-selector"),{height:e.controlHeightSM}),y(s,"> ".concat(l),{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}}),y(s,"".concat(l,"-group"),(y(r={},"&-addon, &-wrap",{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}}),y(r,"&-wrap > *",{display:"block !important"}),y(r,"&-addon",(y(n={position:"relative",padding:"0 ".concat(e.inputPaddingHorizontal,"px"),color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadius,transition:"all ".concat(e.motionDurationSlow),lineHeight:1},"".concat(u,"-select"),(y(t={margin:"-".concat(e.inputPaddingVertical+1,"px -").concat(e.inputPaddingHorizontal,"px")},"&".concat(u,"-select-single:not(").concat(u,"-select-customize-input)"),y({},"".concat(u,"-select-selector"),{backgroundColor:"inherit",border:"".concat(e.lineWidth,"px ").concat(e.lineType," transparent"),boxShadow:"none"})),y(t,"&-open, &-focused",y({},"".concat(u,"-select-selector"),{color:e.colorPrimary})),t)),y(n,"".concat(u,"-cascader-picker"),y({margin:"-9px -".concat(e.inputPaddingHorizontal,"px"),backgroundColor:"transparent"},"".concat(u,"-cascader-input"),{textAlign:"start",border:0,boxShadow:"none"})),n)),y(r,"&-addon:first-child",{borderInlineEnd:0}),y(r,"&-addon:last-child",{borderInlineStart:0}),r)),y(s,"".concat(l),{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":y({zIndex:1,borderInlineEndWidth:1},"".concat(l,"-search-with-button &"),{zIndex:0})}),y(s,"> ".concat(l,":first-child, ").concat(l,"-group-addon:first-child"),y({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(u,"-select ").concat(u,"-select-selector"),{borderStartEndRadius:0,borderEndEndRadius:0})),y(s,"> ".concat(l,"-affix-wrapper"),(y(i={},"&:not(:first-child) ".concat(l),{borderStartStartRadius:0,borderEndStartRadius:0}),y(i,"&:not(:last-child) ".concat(l),{borderStartEndRadius:0,borderEndEndRadius:0}),i)),y(s,"> ".concat(l,":last-child, ").concat(l,"-group-addon:last-child"),y({borderStartStartRadius:0,borderEndStartRadius:0},"".concat(u,"-select ").concat(u,"-select-selector"),{borderStartStartRadius:0,borderEndStartRadius:0})),y(s,"".concat(l,"-affix-wrapper"),y({"&:not(:last-child)":y({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(l,"-search &"),{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius})},"&:not(:first-child), ".concat(l,"-search &:not(:first-child)"),{borderStartStartRadius:0,borderEndStartRadius:0})),y(s,"&".concat(l,"-group-compact"),Object.assign(Object.assign({display:"block"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(y(o={},"".concat(l,"-group-addon, ").concat(l,"-group-wrap, > ").concat(l),{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}}),y(o,"& > *",{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0}),y(o,"& > ".concat(l,"-affix-wrapper"),{display:"inline-flex"}),y(o,"& > ".concat(u,"-picker-range"),{display:"inline-flex"}),y(o,"& > *:not(:last-child)",{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth}),y(o,"".concat(l),{float:"none"}),y(o,"& > ".concat(u,"-select > ").concat(u,"-select-selector,\n      & > ").concat(u,"-select-auto-complete ").concat(l,",\n      & > ").concat(u,"-cascader-picker ").concat(l,",\n      & > ").concat(l,"-group-wrapper ").concat(l),{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}),y(o,"& > ".concat(u,"-select-focused"),{zIndex:1}),y(o,"& > ".concat(u,"-select > ").concat(u,"-select-arrow"),{zIndex:1}),y(o,"& > *:first-child,\n      & > ".concat(u,"-select:first-child > ").concat(u,"-select-selector,\n      & > ").concat(u,"-select-auto-complete:first-child ").concat(l,",\n      & > ").concat(u,"-cascader-picker:first-child ").concat(l),{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}),y(o,"& > *:last-child,\n      & > ".concat(u,"-select:last-child > ").concat(u,"-select-selector,\n      & > ").concat(u,"-cascader-picker:last-child ").concat(l,",\n      & > ").concat(u,"-cascader-picker-focused:last-child ").concat(l),{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius}),y(o,"& > ".concat(u,"-select-auto-complete ").concat(l),{verticalAlign:"top"}),y(o,"".concat(l,"-group-wrapper + ").concat(l,"-group-wrapper"),y({marginInlineStart:-e.lineWidth},"".concat(l,"-affix-wrapper"),{borderRadius:0})),y(o,"".concat(l,"-group-wrapper:not(:last-child)"),y({},"&".concat(l,"-search > ").concat(l,"-group"),(y(a={},"& > ".concat(l,"-group-addon > ").concat(l,"-search-button"),{borderRadius:0}),y(a,"& > ".concat(l),{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}),a))),o))),s}(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":(t={display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":y({},"".concat(n,"-group-addon"),{borderRadius:a}),"&-sm":y({},"".concat(n,"-group-addon"),{borderRadius:o}),"&-status-error":y({},"".concat(n,"-group-addon"),{color:r,borderColor:r}),"&-status-warning":y({},"".concat(n,"-group-addon"),{color:i,borderColor:i}),"&-disabled":y({},"".concat(n,"-group-addon"),Object.assign({},Zc(e)))},y(t,"&:not(".concat(n,"-compact-first-item):not(").concat(n,"-compact-last-item)").concat(n,"-compact-item"),y({},"".concat(n,", ").concat(n,"-group-addon"),{borderRadius:0})),y(t,"&:not(".concat(n,"-compact-last-item)").concat(n,"-compact-first-item"),y({},"".concat(n,", ").concat(n,"-group-addon"),{borderStartEndRadius:0,borderEndEndRadius:0})),y(t,"&:not(".concat(n,"-compact-first-item)").concat(n,"-compact-last-item"),y({},"".concat(n,", ").concat(n,"-group-addon"),{borderStartStartRadius:0,borderEndStartRadius:0})),t)}))},ah=function(e){var t,n,r,i=e.componentCls,a=e.antCls,o="".concat(i,"-search");return y({},o,(y(r={},"".concat(i),{"&:hover, &:focus":y({borderColor:e.colorPrimaryHover},"+ ".concat(i,"-group-addon ").concat(o,"-button:not(").concat(a,"-btn-primary)"),{borderInlineStartColor:e.colorPrimaryHover})}),y(r,"".concat(i,"-affix-wrapper"),{borderRadius:0}),y(r,"".concat(i,"-lg"),{lineHeight:e.lineHeightLG-2e-4}),y(r,"> ".concat(i,"-group"),y({},"> ".concat(i,"-group-addon:last-child"),(y(t={insetInlineStart:-1,padding:0,border:0},"".concat(o,"-button"),{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0}),y(t,"".concat(o,"-button:not(").concat(a,"-btn-primary)"),y({color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive}},"&".concat(a,"-btn-loading::before"),{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0})),t))),y(r,"".concat(o,"-button"),{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}}),y(r,"&-large ".concat(o,"-button"),{height:e.controlHeightLG}),y(r,"&-small ".concat(o,"-button"),{height:e.controlHeightSM}),y(r,"&-rtl",{direction:"rtl"}),y(r,"&".concat(i,"-compact-item"),(y(n={},"&:not(".concat(i,"-compact-last-item)"),y({},"".concat(i,"-group-addon"),y({},"".concat(i,"-search-button"),{marginInlineEnd:-e.lineWidth,borderRadius:0}))),y(n,"&:not(".concat(i,"-compact-first-item)"),y({},"".concat(i,",").concat(i,"-affix-wrapper"),{borderRadius:0})),y(n,"> ".concat(i,"-group-addon ").concat(i,"-search-button,\n        > ").concat(i,",\n        ").concat(i,"-affix-wrapper"),{"&:hover,&:focus,&:active":{zIndex:2}}),y(n,"> ".concat(i,"-affix-wrapper-focused"),{zIndex:2}),n)),r))};var oh=function(e){var t,n,r,i,a=e.componentCls,o=e.paddingLG,s="".concat(a,"-textarea");return y({},s,(i={position:"relative","&-show-count":(t={},y(t,"> ".concat(a),{height:"100%"}),y(t,"".concat(a,"-data-count"),{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}),t),"&-allow-clear":y({},"> ".concat(a),{paddingInlineEnd:o})},y(i,"&-affix-wrapper".concat(s,"-has-feedback"),y({},"".concat(a),{paddingInlineEnd:o})),y(i,"&-affix-wrapper".concat(a,"-affix-wrapper"),(y(r={padding:0},"> textarea".concat(a),{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}}),y(r,"".concat(a,"-suffix"),(y(n={margin:0,"> *:not(:last-child)":{marginInline:0}},"".concat(a,"-clear-icon"),{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS}),y(n,"".concat(s,"-suffix"),{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}),n)),r)),i))},sh=rl("Input",(function(e){var t=function(e){return el(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}(e);return[nh(t),oh(t),rh(t),ih(t),ah(t),Ll(t)]})),lh=function(e){var t,n=(0,a.useContext)(Ra),r=n.getPrefixCls,i=n.direction,o=e.prefixCls,s=e.className,l=void 0===s?"":s,u=r("input-group",o),c=r("input"),h=It(sh(c),2),d=h[0],f=h[1],p=Wa()(u,(y(t={},"".concat(u,"-lg"),"large"===e.size),y(t,"".concat(u,"-sm"),"small"===e.size),y(t,"".concat(u,"-compact"),e.compact),y(t,"".concat(u,"-rtl"),"rtl"===i),t),f,l),v=(0,a.useContext)(Qu),m=(0,a.useMemo)((function(){return Object.assign(Object.assign({},v),{isFormItemInput:!1})}),[v]);return d(a.createElement("span",{className:p,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},a.createElement(Qu.Provider,{value:m},e.children)))};function uh(e){return!(!e.addonBefore&&!e.addonAfter)}function ch(e){return!!(e.prefix||e.suffix||e.allowClear)}function hh(e,t,n,r){if(n){var i=t;if("click"===t.type){var a=e.cloneNode(!0);return i=Object.create(t,{target:{value:a},currentTarget:{value:a}}),a.value="",void n(i)}if(void 0!==r)return i=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=r,void n(i);n(i)}}function dh(e){return"undefined"===typeof e||null===e?"":String(e)}var fh=function(e){var t,n,r=e.inputElement,i=e.prefixCls,o=e.prefix,s=e.suffix,l=e.addonBefore,c=e.addonAfter,h=e.className,d=e.style,f=e.disabled,p=e.readOnly,v=e.focused,m=e.triggerFocus,g=e.allowClear,b=e.value,_=e.handleReset,x=e.hidden,E=e.classes,w=e.classNames,T=e.dataAttrs,S=e.styles,k=(0,a.useRef)(null),C=(0,a.cloneElement)(r,{value:b,hidden:x,className:Wa()(null===(t=r.props)||void 0===t?void 0:t.className,!ch(e)&&!uh(e)&&h)||null,style:Pe(Pe({},null===(n=r.props)||void 0===n?void 0:n.style),ch(e)||uh(e)?{}:d)});if(ch(e)){var A,I="".concat(i,"-affix-wrapper"),O=Wa()(I,(y(A={},"".concat(I,"-disabled"),f),y(A,"".concat(I,"-focused"),v),y(A,"".concat(I,"-readonly"),p),y(A,"".concat(I,"-input-with-clear-btn"),s&&g&&b),A),!uh(e)&&h,null===E||void 0===E?void 0:E.affixWrapper),P=(s||g)&&a.createElement("span",{className:Wa()("".concat(i,"-suffix"),null===w||void 0===w?void 0:w.suffix),style:null===S||void 0===S?void 0:S.suffix},function(){var e;if(!g)return null;var t=!f&&!p&&b,n="".concat(i,"-clear-icon"),r="object"===u(g)&&null!==g&&void 0!==g&&g.clearIcon?g.clearIcon:"\u2716";return a.createElement("span",{onClick:_,onMouseDown:function(e){return e.preventDefault()},className:Wa()(n,(e={},y(e,"".concat(n,"-hidden"),!t),y(e,"".concat(n,"-has-suffix"),!!s),e)),role:"button",tabIndex:-1},r)}(),s);C=a.createElement("span",Ft({className:O,style:uh(e)?void 0:d,hidden:!uh(e)&&x,onClick:function(e){var t;null!==(t=k.current)&&void 0!==t&&t.contains(e.target)&&(null===m||void 0===m||m())}},null===T||void 0===T?void 0:T.affixWrapper,{ref:k}),o&&a.createElement("span",{className:Wa()("".concat(i,"-prefix"),null===w||void 0===w?void 0:w.prefix),style:null===S||void 0===S?void 0:S.prefix},o),(0,a.cloneElement)(r,{value:b,hidden:null}),P)}if(uh(e)){var M="".concat(i,"-group"),R="".concat(M,"-addon"),N=Wa()("".concat(i,"-wrapper"),M,null===E||void 0===E?void 0:E.wrapper),D=Wa()("".concat(i,"-group-wrapper"),h,null===E||void 0===E?void 0:E.group);return a.createElement("span",{className:D,style:d,hidden:x},a.createElement("span",{className:N},l&&a.createElement("span",{className:R},l),(0,a.cloneElement)(C,{hidden:null}),c&&a.createElement("span",{className:R},c)))}return C};function ph(e){var t=a.useRef();t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function vh(e){return void 0!==e}function mh(e,t){var n=t||{},r=n.defaultValue,i=n.value,a=n.onChange,o=n.postState,s=It(ro((function(){return vh(i)?i:vh(r)?"function"===typeof r?r():r:"function"===typeof e?e():e})),2),l=s[0],u=s[1],c=void 0!==i?i:l,h=o?o(c):c,d=ph(a),f=It(ro([c]),2),p=f[0],v=f[1];return _u((function(){var e=p[0];l!==e&&d(l,e)}),[p]),_u((function(){vh(i)||u(i)}),[i]),[h,ph((function(e,t){u(e,t),v([c],t)}))]}var gh=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],yh=(0,a.forwardRef)((function(e,t){var n=e.autoComplete,r=e.onChange,i=e.onFocus,o=e.onBlur,s=e.onPressEnter,l=e.onKeyDown,c=e.prefixCls,h=void 0===c?"rc-input":c,d=e.disabled,f=e.htmlSize,p=e.className,v=e.maxLength,m=e.suffix,g=e.showCount,b=e.type,_=void 0===b?"text":b,x=e.classes,E=e.classNames,w=e.styles,T=Wn(e,gh),S=It(mh(e.defaultValue,{value:e.value}),2),k=S[0],C=S[1],A=It((0,a.useState)(!1),2),I=A[0],O=A[1],P=(0,a.useRef)(null),M=function(e){P.current&&function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}(P.current,e)};(0,a.useImperativeHandle)(t,(function(){return{focus:M,blur:function(){var e;null===(e=P.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=P.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=P.current)||void 0===e||e.select()},input:P.current}})),(0,a.useEffect)((function(){O((function(e){return(!e||!d)&&e}))}),[d]);var R=function(t){void 0===e.value&&C(t.target.value),P.current&&hh(P.current,t,r)},N=function(e){s&&"Enter"===e.key&&s(e),null===l||void 0===l||l(e)},D=function(e){O(!0),null===i||void 0===i||i(e)},L=function(e){O(!1),null===o||void 0===o||o(e)};return a.createElement(fh,Ft({},T,{prefixCls:h,className:p,inputElement:function(){var t=Ys(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return a.createElement("input",Ft({autoComplete:n},t,{onChange:R,onFocus:D,onBlur:L,onKeyDown:N,className:Wa()(h,y({},"".concat(h,"-disabled"),d),null===E||void 0===E?void 0:E.input),style:null===w||void 0===w?void 0:w.input,ref:P,size:f,type:_}))}(),handleReset:function(e){C(""),M(),P.current&&hh(P.current,e,r)},value:dh(k),focused:I,triggerFocus:M,suffix:function(){var e=Number(v)>0;if(m||g){var t=dh(k),n=Ie(t).length,r="object"===u(g)?g.formatter({value:t,count:n,maxLength:v}):"".concat(n).concat(e?" / ".concat(v):"");return a.createElement(a.Fragment,null,!!g&&a.createElement("span",{className:Wa()("".concat(h,"-show-count-suffix"),y({},"".concat(h,"-show-count-has-suffix"),!!m),null===E||void 0===E?void 0:E.count),style:Pe({},null===w||void 0===w?void 0:w.count)},r),m)}return null}(),disabled:d,classes:x,classNames:E,styles:w}))})),bh=yh;function _h(e,t,n){var r;return Wa()((y(r={},"".concat(e,"-status-success"),"success"===t),y(r,"".concat(e,"-status-warning"),"warning"===t),y(r,"".concat(e,"-status-error"),"error"===t),y(r,"".concat(e,"-status-validating"),"validating"===t),y(r,"".concat(e,"-has-feedback"),n),r))}var xh=function(e,t){return t||e};function Eh(e,t){var n=(0,a.useRef)([]),r=function(){n.current.push(setTimeout((function(){var t,n,r,i;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=e.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(i=e.current)||void 0===i||i.input.removeAttribute("value"))})))};return(0,a.useEffect)((function(){return t&&r(),function(){return n.current.forEach((function(e){e&&clearTimeout(e)}))}}),[]),r}var wh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};var Th=(0,a.forwardRef)((function(e,t){var n,r,i,o=e.prefixCls,s=e.bordered,l=void 0===s||s,u=e.status,c=e.size,h=e.disabled,d=e.onBlur,f=e.onFocus,p=e.suffix,v=e.allowClear,m=e.addonAfter,g=e.addonBefore,b=e.className,_=e.rootClassName,x=e.onChange,E=e.classNames,w=wh(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),T=a.useContext(Ra),S=T.getPrefixCls,k=T.direction,C=T.input,A=S("input",o),I=(0,a.useRef)(null),O=It(sh(A),2),P=O[0],M=O[1],R=ml(A,k),N=R.compactSize,D=R.compactItemClassnames,L=Ua((function(e){var t;return null!==(t=null!==N&&void 0!==N?N:c)&&void 0!==t?t:e})),F=a.useContext(Ba),B=null!==h&&void 0!==h?h:F,U=(0,a.useContext)(Qu),H=U.status,j=U.hasFeedback,z=U.feedbackIcon,V=xh(H,u),G=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(e)||!!j,W=(0,a.useRef)(G);(0,a.useEffect)((function(){G&&W.current,W.current=G}),[G]);var X,Y=Eh(I,!0),K=(j||p)&&a.createElement(a.Fragment,null,p,j&&z);return"object"===typeof v&&(null===v||void 0===v?void 0:v.clearIcon)?X=v:v&&(X={clearIcon:a.createElement(Us,null)}),P(a.createElement(bh,Object.assign({ref:qa(t,I),prefixCls:A,autoComplete:null===C||void 0===C?void 0:C.autoComplete},w,{disabled:B,onBlur:function(e){Y(),null===d||void 0===d||d(e)},onFocus:function(e){Y(),null===f||void 0===f||f(e)},suffix:K,allowClear:X,className:Wa()(b,_,D),onChange:function(e){Y(),null===x||void 0===x||x(e)},addonAfter:m&&a.createElement(gl,null,a.createElement(Ju,{override:!0,status:!0},m)),addonBefore:g&&a.createElement(gl,null,a.createElement(Ju,{override:!0,status:!0},g)),classNames:Object.assign(Object.assign({},E),{input:Wa()((n={},y(n,"".concat(A,"-sm"),"small"===L),y(n,"".concat(A,"-lg"),"large"===L),y(n,"".concat(A,"-rtl"),"rtl"===k),y(n,"".concat(A,"-borderless"),!l),n),!G&&_h(A,V),null===E||void 0===E?void 0:E.input,M)}),classes:{affixWrapper:Wa()((r={},y(r,"".concat(A,"-affix-wrapper-sm"),"small"===L),y(r,"".concat(A,"-affix-wrapper-lg"),"large"===L),y(r,"".concat(A,"-affix-wrapper-rtl"),"rtl"===k),y(r,"".concat(A,"-affix-wrapper-borderless"),!l),r),_h("".concat(A,"-affix-wrapper"),V,j),M),wrapper:Wa()(y({},"".concat(A,"-group-rtl"),"rtl"===k),M),group:Wa()((i={},y(i,"".concat(A,"-group-wrapper-sm"),"small"===L),y(i,"".concat(A,"-group-wrapper-lg"),"large"===L),y(i,"".concat(A,"-group-wrapper-rtl"),"rtl"===k),y(i,"".concat(A,"-group-wrapper-disabled"),B),i),_h("".concat(A,"-group-wrapper"),V,j),M)}})))})),Sh=Th,kh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Ch=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:kh}))};var Ah=a.forwardRef(Ch),Ih={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Oh=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:Ih}))};var Ph=a.forwardRef(Oh),Mh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Rh=function(e){return e?a.createElement(Ph,null):a.createElement(Ah,null)},Nh={click:"onClick",hover:"onMouseOver"},Dh=a.forwardRef((function(e,t){var n=e.visibilityToggle,r=void 0===n||n,i="object"===typeof r&&void 0!==r.visible,o=It((0,a.useState)((function(){return!!i&&r.visible})),2),s=o[0],l=o[1],u=(0,a.useRef)(null);a.useEffect((function(){i&&l(r.visible)}),[i,r]);var c=Eh(u),h=function(){e.disabled||(s&&c(),l((function(e){var t,n=!e;return"object"===typeof r&&(null===(t=r.onVisibleChange)||void 0===t||t.call(r,n)),n})))},d=e.className,f=e.prefixCls,p=e.inputPrefixCls,v=e.size,m=Mh(e,["className","prefixCls","inputPrefixCls","size"]),g=a.useContext(Ra).getPrefixCls,b=g("input",p),_=g("input-password",f),x=r&&function(t){var n,r=e.action,i=void 0===r?"click":r,o=e.iconRender,l=Nh[i]||"",u=(void 0===o?Rh:o)(s),c=(y(n={},l,h),y(n,"className","".concat(t,"-icon")),y(n,"key","passwordIcon"),y(n,"onMouseDown",(function(e){e.preventDefault()})),y(n,"onMouseUp",(function(e){e.preventDefault()})),n);return a.cloneElement(a.isValidElement(u)?u:a.createElement("span",null,u),c)}(_),E=Wa()(_,d,y({},"".concat(_,"-").concat(v),!!v)),w=Object.assign(Object.assign({},Ys(m,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:E,prefixCls:b,suffix:x});return v&&(w.size=v),a.createElement(Sh,Object.assign({ref:qa(t,u)},w))}));var Lh=Dh,Fh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Bh=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:Fh}))};var Uh=a.forwardRef(Bh),Hh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},jh=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.inputPrefixCls,s=e.className,l=e.size,u=e.suffix,c=e.enterButton,h=void 0!==c&&c,d=e.addonAfter,f=e.loading,p=e.disabled,v=e.onSearch,m=e.onChange,g=e.onCompositionStart,b=e.onCompositionEnd,_=Hh(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),x=a.useContext(Ra),E=x.getPrefixCls,w=x.direction,T=a.useRef(!1),S=E("input-search",i),k=E("input",o),C=ml(S,w).compactSize,A=Ua((function(e){var t;return null!==(t=null!==C&&void 0!==C?C:l)&&void 0!==t?t:e})),I=a.useRef(null),O=function(e){var t;document.activeElement===(null===(t=I.current)||void 0===t?void 0:t.input)&&e.preventDefault()},P=function(e){var t,n;v&&v(null===(n=null===(t=I.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e)},M="boolean"===typeof h?a.createElement(Uh,null):null,R="".concat(S,"-button"),N=h||{},D=N.type&&!0===N.type.__ANT_BUTTON;r=D||"button"===N.type?Zs(N,Object.assign({onMouseDown:O,onClick:function(e){var t,n;null===(n=null===(t=null===N||void 0===N?void 0:N.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),P(e)},key:"enterButton"},D?{className:R,size:A}:{})):a.createElement(su,{className:R,type:h?"primary":void 0,size:A,disabled:p,key:"enterButton",onMouseDown:O,onClick:P,loading:f,icon:M},h),d&&(r=[r,Zs(d,{key:"addonAfter"})]);var L=Wa()(S,(y(n={},"".concat(S,"-rtl"),"rtl"===w),y(n,"".concat(S,"-").concat(A),!!A),y(n,"".concat(S,"-with-button"),!!h),n),s);return a.createElement(Sh,Object.assign({ref:qa(I,t),onPressEnter:function(e){T.current||f||P(e)}},_,{size:A,onCompositionStart:function(e){T.current=!0,null===g||void 0===g||g(e)},onCompositionEnd:function(e){T.current=!1,null===b||void 0===b||b(e)},prefixCls:k,addonAfter:r,suffix:u,onChange:function(e){e&&e.target&&"click"===e.type&&v&&v(e.target.value,e),m&&m(e)},className:L,disabled:p}))}));var zh=jh,Vh=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Gh="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Wh="undefined"!==typeof n.g&&n.g.Math===Math?n.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Xh="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Wh):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var Yh=["top","right","bottom","left","width","height","size","weight"],Kh="undefined"!==typeof MutationObserver,qh=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function a(){n&&(n=!1,e()),r&&s()}function o(){Xh(a)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(o,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Gh&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Kh?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Gh&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;Yh.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$h=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Zh=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Wh},Qh=id(0,0,0,0);function Jh(e){return parseFloat(e)||0}function ed(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+Jh(e["border-"+n+"-width"])}),0)}function td(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return Qh;var r=Zh(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],a=e["padding-"+i];t[i]=Jh(a)}return t}(r),a=i.left+i.right,o=i.top+i.bottom,s=Jh(r.width),l=Jh(r.height);if("border-box"===r.boxSizing&&(Math.round(s+a)!==t&&(s-=ed(r,"left","right")+a),Math.round(l+o)!==n&&(l-=ed(r,"top","bottom")+o)),!function(e){return e===Zh(e).document.documentElement}(e)){var u=Math.round(s+a)-t,c=Math.round(l+o)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return id(i.left,i.top,s,l)}var nd="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Zh(e).SVGGraphicsElement}:function(e){return e instanceof Zh(e).SVGElement&&"function"===typeof e.getBBox};function rd(e){return Gh?nd(e)?function(e){var t=e.getBBox();return id(0,0,t.width,t.height)}(e):td(e):Qh}function id(e,t,n,r){return{x:e,y:t,width:n,height:r}}var ad=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=id(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=rd(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),od=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,a="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,o=Object.create(a.prototype);return $h(o,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),o}(t);$h(this,{target:e,contentRect:n})},sd=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Vh,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Zh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ad(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Zh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new od(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ld="undefined"!==typeof WeakMap?new WeakMap:new Vh,ud=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=qh.getInstance(),r=new sd(t,n,this);ld.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){ud.prototype[e]=function(){var t;return(t=ld.get(this))[e].apply(t,arguments)}}));var cd="undefined"!==typeof Wh.ResizeObserver?Wh.ResizeObserver:ud,hd=new Map;var dd=new cd((function(e){e.forEach((function(e){var t,n=e.target;null===(t=hd.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var fd=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),pd=a.createContext(null);function vd(e,t){var n=e.children,r=e.disabled,i=a.useRef(null),o=a.useRef(null),s=a.useContext(pd),l="function"===typeof n,u=l?n(i):n,c=a.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!l&&a.isValidElement(u)&&Za(u),d=h?u.ref:null,f=a.useMemo((function(){return qa(d,i)}),[d,i]),p=function(){return Ya(i.current)||Ya(o.current)};a.useImperativeHandle(t,(function(){return p()}));var v=a.useRef(e);v.current=e;var m=a.useCallback((function(e){var t=v.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),a=i.width,o=i.height,l=e.offsetWidth,u=e.offsetHeight,h=Math.floor(a),d=Math.floor(o);if(c.current.width!==h||c.current.height!==d||c.current.offsetWidth!==l||c.current.offsetHeight!==u){var f={width:h,height:d,offsetWidth:l,offsetHeight:u};c.current=f;var p=l===Math.round(a)?a:l,m=u===Math.round(o)?o:u,g=Pe(Pe({},f),{},{offsetWidth:p,offsetHeight:m});null===s||void 0===s||s(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return a.useEffect((function(){var e,t,n=p();return n&&!r&&(e=n,t=m,hd.has(e)||(hd.set(e,new Set),dd.observe(e)),hd.get(e).add(t)),function(){return function(e,t){hd.has(e)&&(hd.get(e).delete(t),hd.get(e).size||(dd.unobserve(e),hd.delete(e)))}(n,m)}}),[i.current,r]),a.createElement(fd,{ref:o},h?a.cloneElement(u,{ref:f}):u)}var md=a.forwardRef(vd);function gd(e,t){var n=e.children;return("function"===typeof n?[n]:Yn(n)).map((function(n,r){var i=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return a.createElement(md,Ft({},e,{key:i,ref:0===r?t:void 0}),n)}))}var yd=a.forwardRef(gd);yd.Collection=function(e){var t=e.children,n=e.onBatchResize,r=a.useRef(0),i=a.useRef([]),o=a.useContext(pd),s=a.useCallback((function(e,t,a){r.current+=1;var s=r.current;i.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(i.current),i.current=[])})),null===o||void 0===o||o(e,t,a)}),[n,o]);return a.createElement(pd.Provider,{value:s},t)};var bd,_d=yd,xd=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Ed={};function wd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;bd||((bd=document.createElement("textarea")).setAttribute("tab-index","-1"),bd.setAttribute("aria-hidden","true"),document.body.appendChild(bd)),e.getAttribute("wrap")?bd.setAttribute("wrap",e.getAttribute("wrap")):bd.removeAttribute("wrap");var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Ed[n])return Ed[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),a=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),o=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:xd.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:a,borderSize:o,boxSizing:i};return t&&n&&(Ed[n]=s),s}(e,t),a=i.paddingSize,o=i.borderSize,s=i.boxSizing,l=i.sizingStyle;bd.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),bd.value=e.value||e.placeholder||"";var u,c=void 0,h=void 0,d=bd.scrollHeight;if("border-box"===s?d+=o:"content-box"===s&&(d-=a),null!==n||null!==r){bd.value=" ";var f=bd.scrollHeight-a;null!==n&&(c=f*n,"border-box"===s&&(c=c+a+o),d=Math.max(c,d)),null!==r&&(h=f*r,"border-box"===s&&(h=h+a+o),u=d>h?"":"hidden",d=Math.min(h,d))}var p={height:d,overflowY:u,resize:"none"};return c&&(p.minHeight=c),h&&(p.maxHeight=h),p}var Td=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Sd=a.forwardRef((function(e,t){var n=e,r=n.prefixCls,i=(n.onPressEnter,n.defaultValue),o=n.value,s=n.autoSize,l=n.onResize,c=n.className,h=n.style,d=n.disabled,f=n.onChange,p=(n.onInternalAutoSize,Wn(n,Td)),v=It(mh(i,{value:o,postState:function(e){return null!==e&&void 0!==e?e:""}}),2),m=v[0],g=v[1],b=a.useRef();a.useImperativeHandle(t,(function(){return{textArea:b.current}}));var _=It(a.useMemo((function(){return s&&"object"===u(s)?[s.minRows,s.maxRows]:[]}),[s]),2),x=_[0],E=_[1],w=!!s,T=It(a.useState(2),2),S=T[0],k=T[1],C=It(a.useState(),2),A=C[0],I=C[1],O=function(){k(0)};bu((function(){w&&O()}),[o,x,E,w]),bu((function(){if(0===S)k(1);else if(1===S){var e=wd(b.current,!1,x,E);k(2),I(e)}else!function(){try{if(document.activeElement===b.current){var e=b.current,t=e.selectionStart,n=e.selectionEnd,r=e.scrollTop;b.current.setSelectionRange(t,n),b.current.scrollTop=r}}catch(Qp){}}()}),[S]);var P=a.useRef(),M=function(){Do.cancel(P.current)};a.useEffect((function(){return M}),[]);var R=w?A:null,N=Pe(Pe({},h),R);return 0!==S&&1!==S||(N.overflowY="hidden",N.overflowX="hidden"),a.createElement(_d,{onResize:function(e){2===S&&(null===l||void 0===l||l(e),s&&(M(),P.current=Do((function(){O()}))))},disabled:!(s||l)},a.createElement("textarea",Ft({},p,{ref:b,style:N,className:Wa()(r,c,y({},"".concat(r,"-disabled"),d)),disabled:d,value:m,onChange:function(e){g(e.target.value),null===f||void 0===f||f(e)}})))})),kd=Sd,Cd=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function Ad(e,t){return Ie(e||"").slice(0,t).join("")}function Id(e,t,n,r){var i=n;return e?i=Ad(n,r):Ie(t||"").length<n.length&&Ie(n||"").length>r&&(i=t),i}var Od=a.forwardRef((function(e,t){var n,r=e.defaultValue,i=e.value,o=e.onFocus,s=e.onBlur,l=e.onChange,c=e.allowClear,h=e.maxLength,d=e.onCompositionStart,f=e.onCompositionEnd,p=e.suffix,v=e.prefixCls,m=void 0===v?"rc-textarea":v,g=e.classes,b=e.showCount,_=e.className,x=e.style,E=e.disabled,w=e.hidden,T=e.classNames,S=e.styles,k=e.onResize,C=Wn(e,Cd),A=It(mh(r,{value:i,defaultValue:r}),2),I=A[0],O=A[1],P=(0,a.useRef)(null),M=It(a.useState(!1),2),R=M[0],N=M[1],D=It(a.useState(!1),2),L=D[0],F=D[1],B=a.useRef(),U=a.useRef(0),H=It(a.useState(null),2),j=H[0],z=H[1],V=function(){P.current.textArea.focus()};(0,a.useImperativeHandle)(t,(function(){return{resizableTextArea:P.current,focus:V,blur:function(){P.current.textArea.blur()}}})),(0,a.useEffect)((function(){N((function(e){return!E&&e}))}),[E]);var G=Number(h)>0,W=dh(I);L||!G||null!==i&&void 0!==i||(W=Ad(W,h));var X,Y=p;if(b){var K=Ie(W).length;X="object"===u(b)?b.formatter({value:W,count:K,maxLength:h}):"".concat(K).concat(G?" / ".concat(h):""),Y=a.createElement(a.Fragment,null,Y,a.createElement("span",{className:Wa()("".concat(m,"-data-count"),null===T||void 0===T?void 0:T.count),style:null===S||void 0===S?void 0:S.count},X))}var q=a.createElement(fh,{value:W,allowClear:c,handleReset:function(e){O(""),V(),hh(P.current.textArea,e,l)},suffix:Y,prefixCls:m,classes:{affixWrapper:Wa()(null===g||void 0===g?void 0:g.affixWrapper,(n={},y(n,"".concat(m,"-show-count"),b),y(n,"".concat(m,"-textarea-allow-clear"),c),n))},disabled:E,focused:R,className:_,style:Pe(Pe({},x),"resized"===j?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"===typeof X?X:void 0}},hidden:w,inputElement:a.createElement(kd,Ft({},C,{onKeyDown:function(e){var t=C.onPressEnter,n=C.onKeyDown;"Enter"===e.key&&t&&t(e),null===n||void 0===n||n(e)},onChange:function(e){var t=e.target.value;!L&&G&&(t=Id(e.target.selectionStart>=h+1||e.target.selectionStart===t.length||!e.target.selectionStart,I,t,h));O(t),hh(e.currentTarget,e,l,t)},onFocus:function(e){N(!0),null===o||void 0===o||o(e)},onBlur:function(e){N(!1),null===s||void 0===s||s(e)},onCompositionStart:function(e){F(!0),B.current=I,U.current=e.currentTarget.selectionStart,null===d||void 0===d||d(e)},onCompositionEnd:function(e){F(!1);var t,n=e.currentTarget.value;G&&(n=Id(U.current>=h+1||U.current===(null===(t=B.current)||void 0===t?void 0:t.length),B.current,n,h));n!==I&&(O(n),hh(e.currentTarget,e,l,n)),null===f||void 0===f||f(e)},className:null===T||void 0===T?void 0:T.textarea,style:Pe(Pe({},null===S||void 0===S?void 0:S.textarea),{},{resize:null===x||void 0===x?void 0:x.resize}),disabled:E,prefixCls:m,onResize:function(e){null===k||void 0===k||k(e),null===j?z("mounted"):"mounted"===j&&z("resized")},ref:P}))});return q})),Pd=Od,Md=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Rd=(0,a.forwardRef)((function(e,t){var n,r,i=e.prefixCls,o=e.bordered,s=void 0===o||o,l=e.size,u=e.disabled,c=e.status,h=e.allowClear,d=e.showCount,f=e.classNames,p=Md(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]),v=a.useContext(Ra),m=v.getPrefixCls,g=v.direction,b=Ua(l),_=a.useContext(Ba),x=null!==u&&void 0!==u?u:_,E=a.useContext(Qu),w=E.status,T=E.hasFeedback,S=E.feedbackIcon,k=xh(w,c),C=a.useRef(null);a.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=C.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;!function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}(null===(n=null===(t=C.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.blur()}}}));var A,I=m("input",i);"object"===typeof h&&(null===h||void 0===h?void 0:h.clearIcon)?A=h:h&&(A={clearIcon:a.createElement(Us,null)});var O=It(sh(I),2),P=O[0],M=O[1];return P(a.createElement(Pd,Object.assign({},p,{disabled:x,allowClear:A,classes:{affixWrapper:Wa()("".concat(I,"-textarea-affix-wrapper"),(n={},y(n,"".concat(I,"-affix-wrapper-rtl"),"rtl"===g),y(n,"".concat(I,"-affix-wrapper-borderless"),!s),y(n,"".concat(I,"-affix-wrapper-sm"),"small"===b),y(n,"".concat(I,"-affix-wrapper-lg"),"large"===b),y(n,"".concat(I,"-textarea-show-count"),d),n),_h("".concat(I,"-affix-wrapper"),k),M)},classNames:Object.assign(Object.assign({},f),{textarea:Wa()((r={},y(r,"".concat(I,"-borderless"),!s),y(r,"".concat(I,"-sm"),"small"===b),y(r,"".concat(I,"-lg"),"large"===b),r),_h(I,k),M,null===f||void 0===f?void 0:f.textarea)}),prefixCls:I,suffix:T&&a.createElement("span",{className:"".concat(I,"-textarea-suffix")},S),showCount:d,ref:C})))})),Nd=Rd,Dd=Sh;Dd.Group=lh,Dd.Search=zh,Dd.TextArea=Nd,Dd.Password=Lh;var Ld=Dd,Fd=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,s=void 0===o?4.5:o,l=e.eventKey,u=e.content,c=e.closable,h=e.closeIcon,d=void 0===h?"x":h,f=e.props,p=e.onClick,v=e.onNoticeClose,m=e.times,g=It(a.useState(!1),2),b=g[0],_=g[1],x=function(){v(l)};a.useEffect((function(){if(!b&&s>0){var e=setTimeout((function(){x()}),1e3*s);return function(){clearTimeout(e)}}}),[s,b,m]);var E="".concat(n,"-notice");return a.createElement("div",Ft({},f,{ref:t,className:Wa()(E,i,y({},"".concat(E,"-closable"),c)),style:r,onMouseEnter:function(){_(!0)},onMouseLeave:function(){_(!1)},onClick:p}),a.createElement("div",{className:"".concat(E,"-content")},u),c&&a.createElement("a",{tabIndex:0,className:"".concat(E,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==Ru.ENTER||x()},onClick:function(e){e.preventDefault(),e.stopPropagation(),x()}},d))})),Bd=Fd,Ud=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-notification":n,i=e.container,o=e.motion,s=e.maxCount,l=e.className,u=e.style,c=e.onAllRemoved,h=It(a.useState([]),2),d=h[0],f=h[1],p=function(e){var t,n=d.find((function(t){return t.key===e}));null===n||void 0===n||null===(t=n.onClose)||void 0===t||t.call(n),f((function(t){return t.filter((function(t){return t.key!==e}))}))};a.useImperativeHandle(t,(function(){return{open:function(e){f((function(t){var n,r=Ie(t),i=r.findIndex((function(t){return t.key===e.key})),a=Pe({},e);i>=0?(a.times=((null===(n=t[i])||void 0===n?void 0:n.times)||0)+1,r[i]=a):(a.times=0,r.push(a));return s>0&&r.length>s&&(r=r.slice(-s)),r}))},close:function(e){p(e)},destroy:function(){f([])}}}));var v=It(a.useState({}),2),m=v[0],g=v[1];a.useEffect((function(){var e={};d.forEach((function(t){var n=t.placement,r=void 0===n?"topRight":n;r&&(e[r]=e[r]||[],e[r].push(t))})),Object.keys(m).forEach((function(t){e[t]=e[t]||[]})),g(e)}),[d]);var y=a.useRef(!1);if(a.useEffect((function(){Object.keys(m).length>0?y.current=!0:y.current&&(null===c||void 0===c||c(),y.current=!1)}),[m]),!i)return null;var b=Object.keys(m);return(0,Re.createPortal)(a.createElement(a.Fragment,null,b.map((function(e){var t=m[e].map((function(e){return{config:e,key:e.key}})),n="function"===typeof o?o(e):o;return a.createElement(Qo,Ft({key:e,className:Wa()(r,"".concat(r,"-").concat(e),null===l||void 0===l?void 0:l(e)),style:null===u||void 0===u?void 0:u(e),keys:t,motionAppear:!0},n,{onAllRemoved:function(){!function(e){g((function(t){var n=Pe({},t);return(n[e]||[]).length||delete n[e],n}))}(e)}}),(function(e,t){var n=e.config,i=e.className,o=e.style,s=n.key,l=n.times,u=n.className,c=n.style;return a.createElement(Bd,Ft({},n,{ref:t,prefixCls:r,className:Wa()(i,u),style:Pe(Pe({},o),c),times:l,key:s,eventKey:s,onNoticeClose:p}))}))}))),i)}));var Hd=Ud,jd=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],zd=function(){return document.body},Vd=0;function Gd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getContainer,n=void 0===t?zd:t,r=e.motion,i=e.prefixCls,o=e.maxCount,s=e.className,l=e.style,u=e.onAllRemoved,c=Wn(e,jd),h=It(a.useState(),2),d=h[0],f=h[1],p=a.useRef(),v=a.createElement(Hd,{container:d,ref:p,prefixCls:i,motion:r,maxCount:o,className:s,style:l,onAllRemoved:u}),m=It(a.useState([]),2),g=m[0],y=m[1],b=a.useMemo((function(){return{open:function(e){var t=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))})),e}(c,e);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(Vd),Vd+=1),y((function(e){return[].concat(Ie(e),[{type:"open",config:t}])}))},close:function(e){y((function(t){return[].concat(Ie(t),[{type:"close",key:e}])}))},destroy:function(){y((function(e){return[].concat(Ie(e),[{type:"destroy"}])}))}}}),[]);return a.useEffect((function(){f(n())})),a.useEffect((function(){p.current&&g.length&&(g.forEach((function(e){switch(e.type){case"open":p.current.open(e.config);break;case"close":p.current.close(e.key);break;case"destroy":p.current.destroy()}})),y([]))}),[g]),[b,v]}var Wd=function(e){var t,n,r=e.componentCls,i=e.iconCls,a=e.boxShadow,o=e.colorText,s=e.colorSuccess,l=e.colorError,u=e.colorWarning,c=e.colorInfo,h=e.fontSizeLG,d=e.motionEaseInOutCirc,f=e.motionDurationSlow,p=e.marginXS,v=e.paddingXS,m=e.borderRadiusLG,g=e.zIndexPopup,b=e.contentPadding,_=e.contentBg,x="".concat(r,"-notice"),E=new Fn("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:v,transform:"translateY(0)",opacity:1}}),w=new Fn("MessageMoveOut",{"0%":{maxHeight:e.height,padding:v,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),T=(y(t={padding:v,textAlign:"center"},"".concat(r,"-custom-content > ").concat(i),{verticalAlign:"text-bottom",marginInlineEnd:p,fontSize:h}),y(t,"".concat(x,"-content"),{display:"inline-block",padding:b,background:_,borderRadius:m,boxShadow:a,pointerEvents:"all"}),y(t,"".concat(r,"-success > ").concat(i),{color:s}),y(t,"".concat(r,"-error > ").concat(i),{color:l}),y(t,"".concat(r,"-warning > ").concat(i),{color:u}),y(t,"".concat(r,"-info > ").concat(i,",\n      ").concat(r,"-loading > ").concat(i),{color:c}),t);return[y({},r,Object.assign(Object.assign({},is(e)),(n={color:o,position:"fixed",top:p,width:"100%",pointerEvents:"none",zIndex:g},y(n,"".concat(r,"-move-up"),{animationFillMode:"forwards"}),y(n,"\n        ".concat(r,"-move-up-appear,\n        ").concat(r,"-move-up-enter\n      "),{animationName:E,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d}),y(n,"\n        ".concat(r,"-move-up-appear").concat(r,"-move-up-appear-active,\n        ").concat(r,"-move-up-enter").concat(r,"-move-up-enter-active\n      "),{animationPlayState:"running"}),y(n,"".concat(r,"-move-up-leave"),{animationName:w,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d}),y(n,"".concat(r,"-move-up-leave").concat(r,"-move-up-leave-active"),{animationPlayState:"running"}),y(n,"&-rtl",{direction:"rtl",span:{direction:"rtl"}}),n))),y({},r,y({},x,Object.assign({},T))),y({},"".concat(r,"-notice-pure-panel"),Object.assign(Object.assign({},T),{padding:0,textAlign:"start"}))]},Xd=rl("Message",(function(e){var t=el(e,{height:150});return[Wd(t)]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:"".concat((e.controlHeightLG-e.fontSize*e.lineHeight)/2,"px ").concat(e.paddingSM,"px")}})),Yd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Kd={info:a.createElement(Ws,null),success:a.createElement(Ls,null),error:a.createElement(Us,null),warning:a.createElement(zs,null),loading:a.createElement(El,null)};function qd(e){var t=e.prefixCls,n=e.type,r=e.icon,i=e.children;return a.createElement("div",{className:Wa()("".concat(t,"-custom-content"),"".concat(t,"-").concat(n))},r||Kd[n],a.createElement("span",null,i))}function $d(e){var t,n=new Promise((function(n){t=e((function(){n(!0)}))})),r=function(){null===t||void 0===t||t()};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r}var Zd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Qd=a.forwardRef((function(e,t){var n=e.top,r=e.prefixCls,i=e.getContainer,o=e.maxCount,s=e.duration,l=void 0===s?3:s,u=e.rtl,c=e.transitionName,h=e.onAllRemoved,d=a.useContext(Ra),f=d.getPrefixCls,p=d.getPopupContainer,v=r||f("message"),m=It(Xd(v),2)[1],g=a.createElement("span",{className:"".concat(v,"-close-x")},a.createElement(rc,{className:"".concat(v,"-close-icon")})),y=Gd({prefixCls:v,style:function(){return{left:"50%",transform:"translateX(-50%)",top:null!==n&&void 0!==n?n:8}},className:function(){return Wa()(m,u?"".concat(v,"-rtl"):"")},motion:function(){return function(e,t){return{motionName:null!==t&&void 0!==t?t:"".concat(e,"-move-up")}}(v,c)},closable:!1,closeIcon:g,duration:l,getContainer:function(){return(null===i||void 0===i?void 0:i())||(null===p||void 0===p?void 0:p())||document.body},maxCount:o,onAllRemoved:h}),b=It(y,2),_=b[0],x=b[1];return a.useImperativeHandle(t,(function(){return Object.assign(Object.assign({},_),{prefixCls:v,hashId:m})})),x})),Jd=0;function ef(e){var t=a.useRef(null),n=a.useMemo((function(){var e=function(e){var n;null===(n=t.current)||void 0===n||n.close(e)},n=function(n){if(!t.current){var r=function(){};return r.then=function(){},r}var i=t.current,o=i.open,s=i.prefixCls,l=i.hashId,u="".concat(s,"-notice"),c=n.content,h=n.icon,d=n.type,f=n.key,p=n.className,v=n.onClose,m=Zd(n,["content","icon","type","key","className","onClose"]),g=f;return void 0!==g&&null!==g||(g="antd-message-".concat(Jd+=1)),$d((function(t){return o(Object.assign(Object.assign({},m),{key:g,content:a.createElement(qd,{prefixCls:s,type:d,icon:h},c),placement:"top",className:Wa()(d&&"".concat(u,"-").concat(d),l,p),onClose:function(){null===v||void 0===v||v(),t()}})),function(){e(g)}}))},r={open:n,destroy:function(n){var r;void 0!==n?e(n):null===(r=t.current)||void 0===r||r.destroy()}};return["info","success","warning","error","loading"].forEach((function(e){r[e]=function(t,r,i){var a,o,s;a=t&&"object"===typeof t&&"content"in t?t:{content:t},"function"===typeof r?s=r:(o=r,s=i);var l=Object.assign(Object.assign({onClose:s,duration:o},a),{type:e});return n(l)}})),r}),[]);return[n,a.createElement(Qd,Object.assign({key:"message-holder"},e,{ref:t}))]}var tf=null,nf=function(e){return e()},rf=[],af={};var of=a.forwardRef((function(e,t){var n=function(){var e=function(){var e=af,t=e.prefixCls,n=e.getContainer,r=e.duration,i=e.rtl,a=e.maxCount,o=e.top;return{prefixCls:null!==t&&void 0!==t?t:ps().getPrefixCls("message"),container:(null===n||void 0===n?void 0:n())||document.body,duration:r,rtl:i,maxCount:a,top:o}}(),t=e.prefixCls,n=e.container;return{prefixCls:t,getContainer:function(){return n},maxCount:e.maxCount,duration:e.duration,rtl:e.rtl,top:e.top}},r=It(a.useState(n),2),i=r[0],o=r[1],s=It(ef(i),2),l=s[0],u=s[1],c=ps(),h=c.getRootPrefixCls(),d=c.getIconPrefixCls(),f=function(){o(n)};return a.useEffect(f,[]),a.useImperativeHandle(t,(function(){var e=Object.assign({},l);return Object.keys(e).forEach((function(t){e[t]=function(){return f(),l[t].apply(l,arguments)}})),{instance:e,sync:f}})),a.createElement(gs,{prefixCls:h,iconPrefixCls:d},u)}));function sf(){if(!tf){var e=document.createDocumentFragment(),t={fragment:e};return tf=t,void nf((function(){He(a.createElement(of,{ref:function(e){var n=e||{},r=n.instance,i=n.sync;Promise.resolve().then((function(){!t.instance&&r&&(t.instance=r,t.sync=i,sf())}))}}),e)}))}tf.instance&&(rf.forEach((function(e){var t=e.type;if(!e.skipped)switch(t){case"open":nf((function(){var t=tf.instance.open(Object.assign(Object.assign({},af),e.config));null===t||void 0===t||t.then(e.resolve),e.setCloseFn(t)}));break;case"destroy":nf((function(){null===tf||void 0===tf||tf.instance.destroy(e.key)}));break;default:nf((function(){var n,r=(n=tf.instance)[t].apply(n,Ie(e.args));null===r||void 0===r||r.then(e.resolve),e.setCloseFn(r)}))}})),rf=[])}var lf={open:function(e){var t=$d((function(t){var n,r={type:"open",config:e,resolve:t,setCloseFn:function(e){n=e}};return rf.push(r),function(){n?nf((function(){n()})):r.skipped=!0}}));return sf(),t},destroy:function(e){rf.push({type:"destroy",key:e}),sf()},config:function(e){af=Object.assign(Object.assign({},af),e),nf((function(){var e;null===(e=null===tf||void 0===tf?void 0:tf.sync)||void 0===e||e.call(tf)}))},useMessage:function(e){return ef(e)},_InternalPanelDoNotUseOrYouWillBeFired:function(e){var t=e.prefixCls,n=e.className,r=e.type,i=e.icon,o=e.content,s=Yd(e,["prefixCls","className","type","icon","content"]),l=a.useContext(Ra).getPrefixCls,u=t||l("message"),c=It(Xd(u),2)[1];return a.createElement(Bd,Object.assign({},s,{prefixCls:u,className:Wa()(n,c,"".concat(u,"-notice-pure-panel")),eventKey:"pure",duration:null,content:a.createElement(qd,{prefixCls:u,type:r,icon:i},o)}))}},uf=lf;["success","info","warning","error","loading"].forEach((function(e){uf[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(e,t){var n=$d((function(n){var r,i={type:e,args:t,resolve:n,setCloseFn:function(e){r=e}};return rf.push(i),function(){r?nf((function(){r()})):i.skipped=!0}}));return sf(),n}(e,n)}}));var cf=uf,hf=n(6417),df=Kc.confirm,ff=function(e){return e.open="open",e.success="success",e.error="error",e.info="info",e.warning="warning",e.warn="warn",e}({}),pf=function(e){return e.success="success",e.error="error",e.info="info",e.warning="warning",e}({}),vf=function(e){return e.success="success",e.error="error",e.info="info",e.warning="warning",e}({}),mf=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).refs={},r.renameInputRef=(0,a.createRef)(),r.onRenameChange=function(e){var t=e.target.value,n=r.state.rename;if(n&&n.updateHandle){var i=n.updateHandle(t,n.defaultValue||"");i!==n.warning&&(n.warning=i,r.setState({rename:n}))}},r.onRenameOk=function(e){var t=r.renameInputRef.current.input.value,n=r.state.rename;n&&n.okHandle&&n.okHandle(t,n.defaultValue||""),r.setState({showRename:!1,rename:void 0})},r.onRenameCancel=function(e){r.setState({showRename:!1,rename:void 0})},r.state={showRename:!1},n._instance=m(r),r}return d(n,[{key:"render",value:function(){var e=this.state.rename;if(e){var t=!!e.warning;return(0,hf.jsx)("div",{className:"popup",ref:"popup",style:{overflow:"visible",position:"absolute",pointerEvents:"none",zIndex:199},children:(0,hf.jsxs)(Kc,{open:this.state.showRename,title:e.title,onOk:this.onRenameOk,onCancel:this.onRenameCancel,okButtonProps:{disabled:t},children:[(0,hf.jsx)(Ld,{placeholder:e.placeholder,ref:this.renameInputRef,defaultValue:e.defaultValue,onChange:this.onRenameChange}),(0,hf.jsx)("p",{style:{color:"#AA0000"},children:e.warning})]})})}return(0,hf.jsx)("div",{})}},{key:"info",value:function(e,t){cf.info(e,t)}},{key:"success",value:function(e,t){cf.success(e,t)}},{key:"error",value:function(e,t){cf.error(e,t)}},{key:"warning",value:function(e,t){cf.warning(e,t)}},{key:"warn",value:function(e,t){cf.warning(e,t)}},{key:"loading",value:function(e,t){cf.loading(e,t)}},{key:"noticication",value:function(e,t){arguments.length>2&&void 0!==arguments[2]||ff.open}},{key:"alert",value:function(e,t){arguments.length>2&&void 0!==arguments[2]||pf.info}},{key:"confirm",value:function(e,t,n,r,i,a){df({title:e,content:t,okText:n,cancelText:r,onOk:function(){i&&i()},onCancel:function(){a&&a()}})}},{key:"rename",value:function(e){var t={title:e,placeholder:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",warning:"",defaultValue:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",updateHandle:arguments.length>4?arguments[4]:void 0,okHandle:arguments.length>3?arguments[3]:void 0};this.setState({showRename:!0,rename:t})}}],[{key:"message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:vf.info,r=arguments.length>2?arguments[2]:void 0;n._instance[t](e,r)}},{key:"info",value:function(e,t){n._instance.info(e,t)}},{key:"success",value:function(e,t){n._instance.success(e,t)}},{key:"error",value:function(e,t){n._instance.error(e,t)}},{key:"warning",value:function(e,t){n._instance.warning(e,t)}},{key:"warn",value:function(e,t){n._instance.warn(e,t)}},{key:"loading",value:function(e,t){n._instance.loading(e,t)}},{key:"noticication",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ff.open,i=arguments.length>3?arguments[3]:void 0;n._instance.noticication(e,t,r,i)}},{key:"alert",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pf.info;n._instance.alert(e,t,r)}},{key:"confirm",value:function(e,t,r,i,a,o){n._instance.confirm(e,t,r,i,a,o)}},{key:"rename",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4?arguments[4]:void 0;n._instance.rename(e,t,r,i,a)}}]),n}(a.Component);mf._instance=void 0;var gf=function(e){return e[e.None=0]="None",e[e.Linear=1]="Linear",e[e.EaseOutQuad=2]="EaseOutQuad",e[e.EaseInQuad=3]="EaseInQuad",e[e.EaseInOutQuad=4]="EaseInOutQuad",e[e.EaseInCubic=5]="EaseInCubic",e[e.EaseOutCubic=6]="EaseOutCubic",e[e.EaseInOutCubic=7]="EaseInOutCubic",e[e.EaseInQuart=8]="EaseInQuart",e[e.EaseOutQuart=9]="EaseOutQuart",e[e.EaseInOutQuart=10]="EaseInOutQuart",e[e.EaseInQuint=11]="EaseInQuint",e[e.EaseOutQuint=12]="EaseOutQuint",e[e.EaseInOutQuint=13]="EaseInOutQuint",e[e.EaseInSine=14]="EaseInSine",e[e.EaseOutSine=15]="EaseOutSine",e[e.EaseInOutSine=16]="EaseInOutSine",e[e.EaseInExpo=17]="EaseInExpo",e[e.EaseOutExpo=18]="EaseOutExpo",e[e.EaseInOutExpo=19]="EaseInOutExpo",e[e.EaseInCirc=20]="EaseInCirc",e[e.EaseOutCirc=21]="EaseOutCirc",e[e.EaseInOutCirc=22]="EaseInOutCirc",e[e.EaseOutBounce=23]="EaseOutBounce",e[e.EaseInBack=24]="EaseInBack",e[e.EaseOutBack=25]="EaseOutBack",e[e.EaseInOutBack=26]="EaseInOutBack",e[e.Elastic=27]="Elastic",e[e.EaseOutElastic=28]="EaseOutElastic",e[e.EaseOutElasticTmp=29]="EaseOutElasticTmp",e[e.SwingFromTo=30]="SwingFromTo",e[e.SwingFrom=31]="SwingFrom",e[e.SwingTo=32]="SwingTo",e[e.Bounce=33]="Bounce",e[e.BouncePast=34]="BouncePast",e[e.EaseFromTo=35]="EaseFromTo",e[e.EaseFrom=36]="EaseFrom",e[e.EaseTo=37]="EaseTo",e[e.Sinusoidal=38]="Sinusoidal",e[e.Reverse=39]="Reverse",e[e.Wobble=40]="Wobble",e[e.Spring=41]="Spring",e}({}),yf=2*Math.PI;Math.PI,Math.PI,Math.PI,Math.PI;function bf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return e+n>=t&&e-n<=t}function _f(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.atan(r/n);return i||(i=n>0?0:-Math.PI),n<0&&r>0?i+=Math.PI:n<0&&r<0&&(i-=Math.PI),i}function xf(e,t,n){return Math.min(e.x,t.x)<=n.x&&n.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=n.y&&n.y<=Math.max(e.y,t.y)}function Ef(e,t,n){return(e.x-n.x)*(e.y-t.y)-(e.y-n.y)*(e.x-t.x)}function wf(e){return(e=(e=(e+Math.PI)%(2*Math.PI))>0?e:2*Math.PI+e)-Math.PI}function Tf(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function Sf(e){return"string"!==typeof e?[0,0,0,1]:[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),parseInt(e.substr(7,2),16)]}function kf(e){return"#"+Tf(e[0])+Tf(e[1])+Tf(e[2])+Tf(e[3])}function Cf(e){return[e>>16&255,e>>8&255,e>>0&255]}function Af(e){return[e>>24&255,e>>16&255,e>>8&255,e>>0&255]}function If(e){return 65536*e[0]+256*e[1]+e[2]}function Of(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:-e.b/t,c:-e.c/t,d:e.a/t,tx:(e.c*e.ty-e.d*e.tx)/t,ty:-(e.a*e.ty-e.b*e.tx)/t}}function Pf(e){var t=e.x,n=e.y,r=e.scaleX,i=e.scaleY,a=e.skewX,o=e.skewY;return{a:Math.cos(o)*r,b:Math.sin(o)*r,c:-Math.sin(a)*i,d:Math.cos(a)*i,tx:t,ty:n}}function Mf(e){var t=e.a,n=e.b,r=e.c,i=e.d,a=e.tx,o=e.ty,s={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},l=s.scaleX,u=s.scaleY,c=.25*Math.PI;return s.x=a,s.y=o,s.skewX=Math.atan(-r/i),s.skewY=Math.atan(n/t),s.scaleX=s.skewY>-c&&s.skewY<c?t/Math.cos(s.skewY):n/Math.sin(s.skewY),s.scaleY=s.skewX>-c&&s.skewX<c?i/Math.cos(s.skewX):-r/Math.sin(s.skewX),l>=0&&s.scaleX<0&&(s.scaleX=-s.scaleX,s.skewY=s.skewY-Math.PI),u>=0&&s.scaleY<0&&(s.scaleY=-s.scaleY,s.skewX=s.skewX-Math.PI),s.skewX=wf(s.skewX),s.skewY=wf(s.skewY),s}function Rf(e,t){return{a:t.a*e.a+t.b*e.c,b:t.a*e.b+t.b*e.d,c:t.c*e.a+t.d*e.c,d:t.c*e.b+t.d*e.d,tx:t.tx*e.a+t.ty*e.c+e.tx,ty:t.tx*e.b+t.ty*e.d+e.ty}}function Nf(e,t){return Rf(Of(e),t)}function Df(e,t){return Rf(e,Of(t))}var Lf={transform2Matrix:Pf,matrix2Transform:Mf,matrixApplyPoint:function(e,t){var n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,l=t.x,u=t.y,c={x:0,y:0};return c.x=n*l+i*u+o,c.y=r*l+a*u+s,c},matrixInverseApplyPoint:function(e,t){var n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,l=t.x,u=t.y,c={x:0,y:0},h=1/(n*a+i*-r);return c.x=a*h*l+-i*h*u+(s*i-o*a)*h,c.y=n*h*u+-r*h*l+(-s*n+o*r)*h,c},matrixTranslate:function(e,t){return e.tx+=t.x,e.ty+=t.y,e},matrixScale:function(e,t){return e.a*=t.x,e.d*=t.y,e.c*=t.x,e.b*=t.y,e.tx*=t.x,e.ty*=t.y,e},matrixRotate:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=e.a,a=e.c,o=e.tx;return e.a=i*n-e.b*r,e.b=i*r+e.b*n,e.c=a*n-e.d*r,e.d=a*r+e.d*n,e.tx=o*n-e.ty*r,e.ty=o*r+e.ty*n,e},matrixCross:Rf,matrixInvert:Of,matrixInvertCross:Nf,matrixCrossInvert:Df,matrixMultiply:function(e,t){e.a*=t,e.b*=t,e.c*=t,e.d*=t,e.tx*=t,e.ty*=t},matrixAdd:function(e,t){e.a+=t.a,e.b+=t.b,e.c+=t.c,e.d+=t.d,e.tx+=t.tx,e.ty+=t.ty},transformApplyPoint:function(e,t){var n=Pf(e),r=n.a,i=n.b,a=n.c,o=n.d,s=n.tx,l=n.ty,u=t.x,c=t.y,h={x:0,y:0};return h.x=r*u+a*c+s,h.y=i*u+o*c+l,h},transformInverseApplyPoint:function(e,t){var n=Pf(e),r=n.a,i=n.b,a=n.c,o=n.d,s=n.tx,l=n.ty,u=t.x,c=t.y,h={x:0,y:0},d=1/(r*o+a*-i);return h.x=o*d*u+-a*d*c+(l*a-s*o)*d,h.y=r*d*c+-i*d*u+(-l*r+s*i)*d,h},transformTranslate:function(e,t){return e.x+=t.x,e.y+=t.y,e},transformScale:function(e,t){return e.scaleX*=t.x,e.scaleY*=t.y,e},transformRotate:function(e,t){return e.skewX+=t,e.skewY+=t,e},transformCross:function(e,t){return Mf(Rf(Pf(e),Pf(t)))},transformInvertCross:function(e,t){return Mf(Nf(Pf(e),Pf(t)))},transformCrossInvert:function(e,t){return Mf(Df(Pf(e),Pf(t)))},radio2Angle:function(e){return e/Math.PI*180},angle2Radio:function(e){return e/180*Math.PI},isNumberEqual:bf,isPointEqual:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return!(!bf(e.x,t.x,n)||!bf(e.y,t.y,n))},normalizeRadian:wf,normalizeAngle:function(e){return(e=(e=(e+180)%360)>0?e:360+e)-180},getProgressNumber:function(e,t,n){return e+(t-e)*n},distanceBetweenPoints:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},radianBetweenLines:function(e,t,n,r){var i=_f(n,r)-_f(e,t);return i>Math.PI?i-=2*Math.PI:i<-Math.PI&&(i+=2*Math.PI),i},radianBetweenLineAndX:_f,checkLineCrossLine:function(e,t,n,r){var i=Ef(n,r,e),a=Ef(n,r,t),o=Ef(e,t,n),s=Ef(e,t,r);return i*a<0&&o*s<0||(!(0!==i||!xf(n,r,e))||(!(0!==a||!xf(n,r,t))||(!(0!==o||!xf(e,t,n))||!(0!==s||!xf(e,t,r)))))},arrayIncludesArray:function(e,t){if(!e||!t||0===e.length||0===t.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!e.includes(t[n]))return!1;return!0},arrayEqualArray:function(e,t){if(!e||!t)return!1;if(e.length===t.length){for(var n=0,r=t.length;n<r;n++)if(!e.includes(t[n]))return!1;return!0}return!1},transformEqual:function(e,t){return!!(bf(e.x,t.x)&&bf(e.y,t.y)&&bf(e.scaleX,t.scaleX)&&bf(e.scaleY,t.scaleY)&&bf(e.skewX,t.skewX)&&bf(e.skewY,t.skewY))},normalizeRadian2:function(e){return e=(e+Math.PI)%yf,e+=e>0?-Math.PI:Math.PI},normalizeDegree:function(e){return e=(e+180)%360,e+=e>0?-180:180},getProgress:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=0,a=0;return a=i=n===t?0:(e-t)/(n-t),r&&r.length&&1===r.length&&(a=function(e,t){var n=0;switch(e){case gf.None:return 0;case gf.Linear:return t;case gf.EaseOutQuad:return-(Math.pow(t-1,2)-1);case gf.EaseInQuad:return Math.pow(t,2);case gf.EaseInOutQuad:return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2);case gf.EaseInCubic:return Math.pow(t,3);case gf.EaseOutCubic:return Math.pow(t-1,3)+1;case gf.EaseInOutCubic:return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2);case gf.EaseInQuart:return Math.pow(t,3);case gf.EaseOutQuart:return-(Math.pow(t-1,4)-1);case gf.EaseInOutQuart:return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case gf.EaseInQuint:return Math.pow(t,5);case gf.EaseOutQuint:return Math.pow(t-1,5)+1;case gf.EaseInOutQuint:return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2);case gf.EaseInSine:return 1-Math.cos(t*(Math.PI/2));case gf.EaseOutSine:return Math.sin(t*(Math.PI/2));case gf.EaseInOutSine:return-.5*(Math.cos(Math.PI*t)-1);case gf.EaseInExpo:return 0===t?0:Math.pow(2,10*(t-1));case gf.EaseOutExpo:return 1===t?1:1-Math.pow(2,-10*t);case gf.EaseInOutExpo:return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t));case gf.EaseInCirc:return-(Math.sqrt(1-t*t)-1);case gf.EaseOutCirc:return Math.sqrt(1-Math.pow(t-1,2));case gf.EaseInOutCirc:return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1);case gf.EaseOutBounce:return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375;case gf.EaseInBack:return t*t*((1+(n=1.70158))*t-n);case gf.EaseOutBack:return(t-=1)*t*((1+(n=1.70158))*t+n)+1;case gf.EaseInOutBack:return n=1.70158,(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2);case gf.Elastic:case gf.EaseOutElastic:return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1;case gf.EaseOutElasticTmp:return-1*Math.pow(6,-6*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1;case gf.SwingFromTo:return n=1.70158,(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2);case gf.SwingFrom:return t*t*((1+(n=1.70158))*t-n);case gf.SwingTo:return(t-=1)*t*((1+(n=1.70158))*t+n)+1;case gf.Bounce:return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375;case gf.BouncePast:return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375);case gf.EaseFromTo:return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case gf.EaseFrom:return Math.pow(t,4);case gf.EaseTo:return Math.pow(t,.25);case gf.Sinusoidal:return-Math.cos(t*Math.PI)/2+.5;case gf.Reverse:return 1-t;case gf.Wobble:return-Math.cos(t*Math.PI*(9*t))/2+.5;case gf.Spring:return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t);default:return t}}(r[0],i)),a},distance:function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},getColorNumber:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t="";return e.startsWith("#")?t=e.substr(1):e.startsWith("0x")&&(t=e.substr(2)),parseInt(t,16)}return 0},getColorString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(e){for(var n=e.toString(16);n.length<t;)n="0"+n;return"#"+n}return"#000000"},getProgressRGB:function(e,t,n){var r=Cf(t),i=Cf(n);return If([Math.round(r[0]+(i[0]-r[0])*e),Math.round(r[1]+(i[1]-r[1])*e),Math.round(r[2]+(i[2]-r[2])*e)])},getProgressRGBA:function(e,t,n){var r=Sf(t),i=Sf(n);return kf([Math.round(r[0]+(i[0]-r[0])*e),Math.round(r[1]+(i[1]-r[1])*e),Math.round(r[2]+(i[2]-r[2])*e),Math.round(r[3]+(i[3]-r[3])*e)])},getProgressARGB:function(e,t,n){var r,i=Af(t),a=Af(n),o=[Math.round(i[0]+(a[0]-i[0])*e),Math.round(i[1]+(a[1]-i[1])*e),Math.round(i[2]+(a[2]-i[2])*e),Math.round(i[3]+(a[3]-i[3])*e)];return 16777216*(r=o)[0]+65536*r[1]+256*r[2]+r[3]},isNumber:function(e){return"number"===typeof e&&!isNaN(e)},isString:function(e){return"string"===typeof e},isBoolean:function(e){return"boolean"===typeof e},isArray:function(e){return Array.isArray(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArrayCross:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t.indexOf(i)>=0)return!0}return!1},changeColor2RGB:Cf,changeColor2RGBA:Sf,changeColor2ARGB:Af,changeNumber2OneColor:Tf,changeRGB2Color:If,changeRGBA2Color:kf,splitAlphaColor:function(e){return{color:16777215&e,alpha:(e>>24&255)/255}},mergeAlphaColor:function(e,t){return(16777215&e)+(255*t<<24)},relativeZOrder:function(e){var t,n,r,i,a=[],o=function(e,t){var n,r,i,a,o=[],s=[],l=e.length;for(n=0;n<l;n++)o[n]=1,s[n]=n;for(n=1,a=1,i=0;n<l;n++)for(r=0;r<n;r++)e[r]<e[n]&&o[r]+1>o[n]&&(o[n]=o[r]+1,s[n]=r,a<o[n]&&(a=o[n],i=n));for(n=a-1;s[i]!=i;)t[n--]=e[i],i=s[i];return t[n]=e[i],a}(e,a),s=[],l=2*(e.length-o);for(t=0,n=e.length;t<n&&(-1==a.indexOf(t)&&(r=e.indexOf(t),i=t,s.push(i,r-i)),s.length!=l);t++);return s},absZOrder:function(e,t){var n,r,i,a,o=[],s=0,l=0,u=e,c=[];for(n=u-1;n>=0;n--)c[n]=-1;for(i=0,a=t.length;i<a;i+=2){for(r=t[i];s!=r;)o[l++]=s++;c[s+t[i+1]]=s++}for(;s<u;)o[l++]=s++;for(n=u-1;n>=0;n--)-1==c[n]&&(c[n]=o[--l]);return c},distance2PointToSeg:function(e,t,n,r,i,a){var o=(i-n)*(e-n)+(a-r)*(t-r);if(o<=0)return(e-n)*(e-n)+(t-r)*(t-r);var s=(i-n)*(i-n)+(a-r)*(a-r);if(o>=s)return(e-i)*(e-i)+(t-a)*(t-a);var l=o/s,u=n+(i-n)*l,c=r+(a-r)*l;return(e-u)*(e-u)+(t-c)*(t-c)}},Ff=function(e){p(n,gmvc.GModule);var t=g(n);function n(e){return l(this,n),t.call(this,e)}return d(n,[{key:"getId",value:function(){return++this.rootState.editor.idGen}}]),n}(),Bf=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,"animationMap")}return d(n,[{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e,t){})),y(e,Y.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.animationMap;Object.assign(e,n)}})),y(e,P.REMOVE_ANIMATION,(function(e,t){var n=t.animationId;e[n]=void 0,delete e[n]})),y(e,P.DELETE_ANIMATIONS,(function(e,t){for(var n=t.animationIds,r=0,i=n.length;r<i;r++){var a=n[r];e[a]=void 0,delete e[a]}})),y(e,P.ADD_ANIMATION,(function(e,n){var r=n.animation;if(r){if(r.id||(r.id=t.getId()),e[r.id])throw new Error("same animation id:"+r.id);e[r.id]=r}})),y(e,P.RENAME_ANIMATION,(function(e,t){var n=t.animation,r=e[n.id];if(!r)throw new Error("rename animatoin error, no animation:"+n.id);r.name=n.name})),y(e,P.ADD_ANIMATIONS,(function(e,n){for(var r=0,i=n.length;r<i;r++){var a=n[r];if(a){if(a.id||(a.id=t.getId()),e[a.id])throw new Error("same animation id:"+a.id);e[a.id]=a}}})),y(e,P.MODIFY_FRAMES,(function(e,r){var i=r.armatureId,a=r.animationId,o=r.frames,s=e[a],l=0;for(var u in o)l++;if(s)for(var c=n.getAllSubAnimations(s),h=0,d=c.length;h<d;h++){var f=c[h];if(f)for(var p in f.timelineMap){var v=f.timelineMap[p];if(v)for(var m in o){var g=v.frameMap[m],y=o[m];if(g){for(var b in y){var _=y[b];g[b]=_,"frame"===b&&!0}if(--l<=0){var x=t.rootState.editor.dopesheet.curTime;return void t.commit(O.CALCULATE_ANIMATED_PROPERTY,{armatureId:i,animationId:a,frameIndex:x})}}}}}})),y(e,O.CHECK_OVERRIDE_FRAME,(function(e,r){var i=r.animationId,a=(r.frameId,e[i]),o=[];if(a){for(var s=n.getAllSubAnimations(a),l=0,u=s.length;l<u;l++){var c=s[l];if(c)for(var h in c.timelineMap){var d=c.timelineMap[h];if(d){n.sortTimeline(d);var f={};for(var p in d.frameMap){var v=d.frameMap[p];if(v)if(f[v.frame]){o.push(v.id);var m=d.frames.indexOf(v.id);m>=0&&(d.frames.splice(m,1),delete d.frameMap[v.id])}else f[v.frame]=v.id}}}}if(o.length>0){var g=t.rootState.runtime.editing.selectedFrameIds;if(g.length>0){for(var y=!1,b=g.concat(),_=0,x=o.length;_<x;_++){var E=o[_],w=b.indexOf(E);w>=0&&(b.splice(w,1),y=!0)}y&&t.commit($.SELECT_FRAME,b)}mf.warn("\u91cd\u53e0\u7684\u5e27\u88ab\u5220\u9664\u4e86")}}})),y(e,O.CALCULATE_ANIMATED_PROPERTY,(function(e,r){var i=r.armatureId,a=r.animationId,o=r.frameIndex,s=e[a],l=n.calculateAnimationProperties(s,o);t.commit(O.UPDATE_ANIMATED_PROPERTY,{armatureId:i,animationId:a,frameIndex:o,animatedProperties:l})})),y(e,P.AUTO_KEY,(function(e,r){t.commit(gmvc.GHistoryMutation.MERGE_START,{name:"autoKey"});var i=r.armatureId,a=r.timelineInfo,o=t.rootState.editor.dopesheet.autoFirstFrame,s=t.rootState.editor.dopesheet.curTime,l=r.animationId,u=e[l];if(u||(l=(u={id:t.getId(),name:ce,autoPlay:!0}).id,t.commit(P.ADD_ANIMATION,{armatureId:i,animation:u}),t.commit(P.SELECT_ANIMATION,{animationId:u.id})),a.bone)for(var c in u.bones||(u.bones={}),a.bone){var h=a.bone[c],d=u.bones[c];for(var f in d||(d={id:parseInt(c),timelineMap:{}},u.bones[c]=d),h){var p=n.getTimelineByType(d,f),v=h[f];p||(p={id:t.getId(),type:f,frames:[],frameMap:{}},d.timelineMap[p.id]=p);for(var m=0,g=v.length;m<g;m++){var y=v[m],b=n.getFrameByFrameIndex(p,y.frame);b?p.type===S.ROTATE?b.value=Pe(Pe({},b.value),y.value):b.value=y.value:(y.id=t.getId(),n.timelineInsertFrame(p,y))}if(o){var _=n.getFrameBeforeFrameIndex(p,s);0===s&&(_=n.getFrameByFrameIndex(p,s)),_||(_={id:t.getId(),frame:0,value:C[f],curve:[1]},n.timelineInsertFrame(p,_))}}}if(a.slot)for(var x in u.slots||(u.slots={}),a.slot){var E=a.slot[x],w=u.slots[x];for(var T in w||(w={id:parseInt(x),timelineMap:{}},u.slots[x]=w),E){var k=n.getTimelineByType(w,T),A=E[T];k||(k={id:t.getId(),type:T,frames:[],frameMap:{}},w.timelineMap[k.id]=k);for(var I=0,M=A.length;I<M;I++){var R=A[I],N=n.getFrameByFrameIndex(k,R.frame);N?N.value=R.value:(R.id=t.getId(),n.timelineInsertFrame(k,R))}if(T===S.DISPLAY_INDEX&&(o=!1),o){var D=n.getFrameBeforeFrameIndex(k,s);0===s&&(D=n.getFrameByFrameIndex(k,s));var L=C[T];if(T===S.COLOR){var F=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[x];L=Qw.getSlotColorAlpha(F)}D||(D={id:t.getId(),frame:0,value:L,curve:[1]},n.timelineInsertFrame(k,D))}}}if(a.zOrder){u.zOrder||(u.zOrder={id:i,timelineMap:{}});var B=u.zOrder,U=n.getTimelineByType(B,S.Z_ORDER),H=a.zOrder;U||(U={id:t.getId(),type:S.Z_ORDER,frames:[],frameMap:{}},B.timelineMap[U.id]=U);for(var j=0,z=H.length;j<z;j++){var V=H[j],G=n.getFrameByFrameIndex(U,V.frame);G?G.value=V.value:(V.id=t.getId(),n.timelineInsertFrame(U,V))}}if(a.ik)for(var W in u.iks||(u.iks={}),a.ik){var X=a.ik[W],Y=u.iks[W];for(var K in Y||(Y={id:parseInt(W),timelineMap:{}},u.iks[W]=Y),X){var q=n.getTimelineByType(Y,K),$=X[K];q||(q={id:t.getId(),type:K,frames:[],frameMap:{}},Y.timelineMap[q.id]=q);for(var Z=0,Q=$.length;Z<Q;Z++){var J=$[Z],ee=n.getFrameByFrameIndex(q,J.frame);ee?ee.value=J.value:(J.id=t.getId(),n.timelineInsertFrame(q,J))}if(o){var te=n.getFrameBeforeFrameIndex(q,s);if(0===s&&(te=n.getFrameByFrameIndex(q,s)),!te){var ne=t.rootState.runtime.dragonbones.armatureMap[i].constraint.ik[W];te={id:t.getId(),frame:0,value:{weight:ne.weight,bendPositive:ne.bendPositive},curve:[1]},n.timelineInsertFrame(q,te)}}}}if(a.ffd)for(var re in u.ffds||(u.ffds={}),a.ffd){var ie=a.ffd[re],ae=u.ffds[re];for(var oe in ae||(ae={id:parseInt(re),timelineMap:{}},u.ffds[re]=ae),ie){var se=n.getTimelineByType(ae,oe),le=ie[oe];se||(se={id:t.getId(),type:oe,frames:[],frameMap:{}},ae.timelineMap[se.id]=se);for(var ue=0,he=le.length;ue<he;ue++){var de=le[ue],fe=n.getFrameByFrameIndex(se,de.frame);if(fe)for(var pe in de.value)fe.value[pe]=de.value[pe];else de.id=t.getId(),n.timelineInsertFrame(se,de)}if(o){var ve=n.getFrameBeforeFrameIndex(se,s);0===s&&(ve=n.getFrameByFrameIndex(se,s)),ve||(ve={id:t.getId(),frame:0,value:C[oe],curve:[1]},n.timelineInsertFrame(se,ve))}}}var me=t.rootState.runtime.dragonbones.armatureMap[i];Qw.clearCache(me),t.commit(O.CALCULATE_ANIMATED_PROPERTY,{animationId:l,armatureId:i,frameIndex:s}),t.commit(gmvc.GHistoryMutation.MERGE_END,{name:"autoKey"})})),y(e,P.DELETE_FRAMES,(function(e,r){var i=r.armatureId,a=r.animationId,o=r.frameIds,s=e[a];n.animationDeleteFrames(s,o);var l=t.rootState.editor.dopesheet.curTime;t.commit(O.CALCULATE_ANIMATED_PROPERTY,{animationId:a,armatureId:i,frameIndex:l})})),y(e,P.SELECT_ANIMATION,(function(e,n){var r=n.animationId,i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.editor.dopesheet.curTime;t.commit(O.CALCULATE_ANIMATED_PROPERTY,{animationId:r,armatureId:i,frameIndex:a})})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},O.ADD_ANIMATION,(function(e,t){})),y(e,O.ADD_ANIMATION_INTERACTIVE,(function(e,r){var i=r,a=e.state,o=n.createAnimationName(ce,a);var s=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),l=e.rootState.runtime.dragonbones.armatureMap[i].animations;mf.rename("\u8bf7\u8f93\u5165\u52a8\u753b\u540d\u5b57",o,"\u8bf7\u8f93\u5165\u52a8\u753b\u540d\u5b57",(function(e,n){!function(e){var n=t.getId(),r={armatureId:i,animation:{id:n,name:e}};t.commit(gmvc.GHistoryMutation.MERGE_START),t.commit(P.ADD_ANIMATION,r),t.commit(P.SELECT_ANIMATION,{animationId:n}),t.commit(gmvc.GHistoryMutation.MERGE_END)}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":s.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,a,l)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),y(e,O.RENAME_ANIMATION_INTERACTIVE,(function(e,r){var i=r.armatureId,a=r.animationId,o=e.state,s=o[a].name;var l=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),u=e.rootState.runtime.dragonbones.armatureMap[i].animations.concat();u.splice(u.indexOf(a),1),mf.rename("\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",s,"\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",(function(e,n){e!==n&&function(e){var n={armatureId:i,animation:{id:a,name:e}};t.commit(P.RENAME_ANIMATION,n)}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":l.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,o,u)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),y(e,O.REMOVE_ANIMATION_INTERACTIVE,(function(e,n){var r=n.animationId,i=n.nextAnimationId,a=e.state[r].name;mf.confirm("\u786e\u5b9a\u8981\u5220\u9664\u52a8\u753b\u201c"+a+"\u201d\u5417?","","\u5220\u9664","\u53d6\u6d88",(function(){t.commit(gmvc.GHistoryMutation.MERGE_START),t.commit(P.REMOVE_ANIMATION,n),void 0!==i&&t.commit(P.SELECT_ANIMATION,{animationId:i}),t.commit(gmvc.GHistoryMutation.MERGE_END)}))})),y(e,O.DELETE_FRAMES,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.runtime.dragonbones.armatureMap[i],o=t.rootState.runtime.editing.selectedFrameIds,s=t.rootState.runtime.editing.selectedAnimationId;if(a&&a.animations&&a.animations.indexOf(s)>=0){var l=t.rootState.runtime.dragonbones.animationMap[s];l&&n.animationHasFrame(l,o)&&t.commit(P.DELETE_FRAMES,{armatureId:i,animationId:s,frameIds:o})}})),y(e,O.CLONE_ANIMATION_INTERACTIVE,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.runtime.editing.selectedAnimationId,o=e.state[a],s=n.createAnimationName(o.name+"-\u514b\u9686",e.state),l=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),u=e.rootState.runtime.dragonbones.armatureMap[i],c=e.state,h=u.animations.concat();mf.rename("\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",s,"\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",(function(e,r){!function(e){var r=ge(o);r.name=e,r.id=t.getId(),n.ReplaceAnimationId(r,t.getId.bind(t)),t.commit(P.ADD_ANIMATION,{armatureId:i,animation:r})}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":l.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,c,h)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),y(e,O.MODIEY_FRAMES_CURVE,(function(e,r){for(var i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.runtime.editing.selectedAnimationId,o=t.rootState.runtime.editing.selectedFrameIds,s=t.rootState.runtime.dragonbones.animationMap[a],l={armatureId:i,animationId:a,frames:{}},u=!1,c=0,h=o.length;c<h;c++){var d=o[c],f=It(n.getTimelineAndFrameByFrameId(s,d),2),p=f[0],v=f[1];p&&v&&n.isTimelineSupportCurve(p.type,r.curve)&&(l.frames[d]={curve:r.curve},u=!0)}u&&t.commit(P.MODIFY_FRAMES,l)})),e}}],[{key:"getSubAnimationDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r&&r.frames&&r.frames.length){var i=r.frames[0],a=r.frames[r.frames.length-1],o=r.frameMap[i],s=r.frameMap[a];t[0]>o.frame&&(t[0]=o.frame),t[1]<s.frame&&(t[1]=s.frame)}}return t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"getTimelineByType",value:function(e,t){if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r&&r.type===t)return r}}},{key:"getTimelineRealFrame",value:function(e,t){var r=t;if(e.scale&&(r*=e.scale),e.offset&&(r+=e.offset),e.loop){var i=n.getTimelineDuration(e)[1];i>0&&(r%=i)}else r<0&&(r=0);return r}},{key:"getAnimationTimelineFrameByFrameIndex",value:function(e,t){var r=[],i=[];function a(e,t){if(e){var a=n.getSubAnimationTimelineFramesByFrameIndex(e,t),o=0,s=0;for(o=0,s=a[0].length;o<s;o++)i.push(a[0][o]);for(o=0,s=a[1].length;o<s;o++)r.push(a[1][o])}}if(e){for(var o in e.bones){var s=e.bones[o];s&&a(s,t)}for(var l in e.slots){var u=e.slots[l];u&&a(u,t)}for(var c in e.iks){var h=e.iks[c];h&&a(h,t)}for(var d in e.ffds){var f=e.ffds[d];f&&a(f,t)}e.event&&a(e.event,t),e.zOrder&&a(e.zOrder,t)}return[i,r]}},{key:"getTimelinesFramesByFrameIndex",value:function(e,t){for(var r=[],i=[],a=0,o=e.length;a<o;a++){var s=e[a],l=n.getFrameByFrameIndex(s,t);l&&(r.push(l),i.push(s))}return[i,r]}},{key:"getSubAnimationTimelineFramesByFrameIndex",value:function(e,t){var r=[],i=[];if(e)for(var a in e.timelineMap){var o=e.timelineMap[a];if(o){var s=n.getFrameByFrameIndex(o,t);s&&(r.push(s),i.push(o))}}return[i,r]}},{key:"getFrameBeforeFrameIndex",value:function(e,t){for(var n=e.frames.length-1;n>=0;n--){var r=e.frames[n],i=e.frameMap[r];if(i&&i.frame<t)return i}}},{key:"getFrameByFrameIndex",value:function(e,t){for(var n=0,r=e.frames.length;n<r;n++){var i=e.frames[n],a=e.frameMap[i];if(a&&a.frame===t)return a}}},{key:"getTimelineFramesByFrameIndex",value:function(e,t){if(e){var r=n.getFrameByFrameIndex(e,t);if(r)return[[e],[r]]}return[[],[]]}},{key:"getTimelinesFramesFromTo",value:function(e,t,r){for(var i=[],a=0,o=e.length;a<o;a++){var s=n.getFramesFromTo(e[a],t,r);s.length&&i.push.apply(i,Ie(s))}return i}},{key:"getFramesFromTo",value:function(e,t,n){for(var r=[],i=0,a=e.frames.length;i<a;i++){var o=e.frames[i],s=e.frameMap[o];s.frame>=t&&s.frame<=n&&r.push(s)}return r}},{key:"getSubAnimationFramesFromTo",value:function(e,t,r){var i=[];if(e)for(var a in e.timelineMap){var o=e.timelineMap[a],s=n.getFramesFromTo(o,t,r);s.length&&(i=i.concat(s))}return i}},{key:"getAllSubAnimations",value:function(e){var t=[];if(e){var n=["bones","slots","iks","ffds","event","zOrder"],r=["event","zOrder"];for(var i in n){var a=n[i];for(var o in e[a]){var s=e[a][o];s&&t.push(s)}}for(var l in r){var u=e[r[l]];u&&t.push(u)}}return t}},{key:"getAnimationFramesFromTo",value:function(e,t,r){var i=[];if(e)for(var a=this.getAllSubAnimations(e),o=0,s=a.length;o<s;o++){var l=a[o],u=n.getSubAnimationFramesFromTo(l,t,r);u.length&&(i=i.concat(u))}return i}},{key:"getTimelineAndFrameByFrameId",value:function(e,t){if(e)for(var n=this.getAllSubAnimations(e),r=0,i=n.length;r<i;r++){var a=n[r];if(a)for(var o in a.timelineMap){var s=a.timelineMap[o];if(s){var l=s.frameMap[t];if(l)return[s,l]}}}return[void 0,void 0]}},{key:"getFrameById",value:function(e,t){if(e)for(var n=this.getAllSubAnimations(e),r=0,i=n.length;r<i;r++){var a=n[r];if(a)for(var o in a.timelineMap){var s=a.timelineMap[o];if(s){var l=s.frameMap[t];if(l)return l}}}}},{key:"sortTimeline",value:function(e){var t=e.frameMap;e.frames.sort((function(e,n){var r=t[e],i=t[n];return r.frame<i.frame?-1:1}))}},{key:"getAnimationDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];return this.getAllSubAnimations(e).forEach((function(e){var r=n.getSubAnimationDuration(e);r[0]>=0&&(t[0]>r[0]&&(t[0]=r[0]),t[1]<r[1]&&(t[1]=r[1]))})),t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"getTimelineDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];if(e.frames&&e.frames.length){var n=e.frames[0],r=e.frameMap[n];r&&(t[0]=r.frame);var i=e.frames[e.frames.length-1],a=e.frameMap[i];a&&(t[1]=a.frame)}return t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"getCurNextFrame",value:function(e,t){for(var n,r,i=0,a=e.frames.length;i<a;i++){var o=e.frames[i],s=e.frameMap[o];if(s){if(s.frame>t){r=s;break}n=s}}return[n,r]}},{key:"getProgressValue",value:function(e,t,n,r){switch(r){case"number":case"rotate":return t+(n-t)*e;case"color":return"string"==typeof t?Lf.getProgressRGBA(e,t,n):Lf.getProgressARGB(e,t,n);case"point":return{x:t.x+(n.x-t.x)*e,y:t.y+(n.y-t.y)*e};case"ik":return{weight:t.weight+(n.weight-t.weight)*e,bendPositive:t.bendPositive};case"string":case"boolean":return t;case"ffd":var i={};for(var a in t){var o=t[a],s=n[a]||[0,0],l=[o[0]+(s[0]-o[0])*e,o[1]+(s[1]-o[1])*e];i[a]=l}for(var u in n)if(!i[u]){var c=t[u]||[0,0],h=n[u],d=[c[0]+(h[0]-c[0])*e,c[1]+(h[1]-c[1])*e];i[u]=d}return i;default:return}}},{key:"getNextRotateFrameValue",value:function(e,t){var n=t.value.rotate-e.value.rotate,r=t.value.rotate;return e.value.clockwise?e.value.clockwise>0?(n<0&&(r=t.value.rotate+2*Math.PI),e.value.clockwiseNum>0&&(r+=2*Math.PI*e.value.clockwiseNum)):(n>0&&(r=t.value.rotate-2*Math.PI),e.value.clockwiseNum>0&&(r-=2*Math.PI*e.value.clockwiseNum)):r=e.value.rotate+Lf.normalizeRadian(n),r}},{key:"getTimelineValue",value:function(e,t,r){if(0!==e.frames.length){var i=It(n.getCurNextFrame(e,t),2),a=i[0],o=i[1];if(a)switch(r){case"string":case"boolean":case"zOrder":return a.value;case"rotate":if(!o)return o=a,a.value;var s=a.value.rotate,l=this.getNextRotateFrameValue(a,o),u=Lf.getProgress(t,a.frame,o.frame,a.curve);return{rotate:n.getProgressValue(u,s,l,r),clockwise:a.value.clockwise,clockwiseNum:a.value.clockwiseNum};default:o||(o=a);var c=a.value,h=o.value,d=Lf.getProgress(t,a.frame,o.frame,a.curve);return n.getProgressValue(d,c,h,r)}}}},{key:"calculateTimelineValue",value:function(e,t,r){var i,a=n.getTimelineRealFrame(e,t);switch(e.type){case S.X:case S.Y:case S.SCALE_X:case S.SCALE_Y:case S.ROTATION:case S.PROGRESS:case S.ALPHA:case S.SKEW_X:case S.SKEW_Y:case S.VOLUME:i=n.getTimelineValue(e,a,"number");break;case S.ROTATE:i=n.getTimelineValue(e,a,"rotate");break;case S.COLOR:i=n.getTimelineValue(e,a,"color");break;case S.VISIBLE:i=n.getTimelineValue(e,a,"boolean");break;case S.TEXT:i=n.getTimelineValue(e,a,"string");break;case S.EVENT:case S.PLAY:break;case S.SHAPE:i=n.getTimelineValue(e,a,"shape");break;case S.TRANSLATE:case S.SCALE:i=n.getTimelineValue(e,a,"point");break;case S.Z_ORDER:case S.DISPLAY_INDEX:i=n.getTimelineValue(e,a,"zOrder");break;case S.IK:i=n.getTimelineValue(e,a,"ik");break;case S.FFD:i=n.getTimelineValue(e,a,"ffd")}if(void 0===i&&(i=C[e.type]),void 0!==i)return y({},e.type,i)}},{key:"getChildTimelineValue",value:function(e,t,r,i){e.id;var a,o=!1;a||(a=n.calculateTimelineValue(i,r,e));return a}},{key:"calculateAnimationProperties",value:function(e,t){var r=e,i={};if(r){var a=["bones","slots","iks","ffds","event","zOrder"],o=["event","zOrder"];for(var s in i={},a){var l=a[s],u={};for(var c in r[l]){var h=r[l][c];if(h){var d={};for(var f in h.timelineMap){var p=h.timelineMap[f];if(p&&p.frames.length){var v=n.getChildTimelineValue(e,c,t,p);void 0!==v&&(d=Object.assign(d,v))}}u[c]=d}}i[l]=u}for(var m in o){var g=o[m],y=r[g];if(y){var b={};for(var _ in y.timelineMap){var x=y.timelineMap[_];if(x&&x.frames.length){var E=n.getChildTimelineValue(e,g,t,x);E&&(b=Object.assign(b,E))}}i[g]=b}}}return i}},{key:"timelineInsertFrame",value:function(e,t){var n=e.frames.length,r=t.frame;if(0===n)e.frames.push(t.id);else{for(var i=!1,a=0;a<n;a++){var o=e.frames[a];if(e.frameMap[o].frame>r){e.frames.splice(a,0,t.id),i=!0;break}}i||e.frames.push(t.id)}e.frameMap[t.id]=t}},{key:"createAnimationName",value:function(e,t,n){return oT.createName(e,t,n)}},{key:"checkAnimationNameConflict",value:function(e,t,n){return oT.checkNameConflict(e,t,n)}},{key:"isAnimationProperty",value:function(e){return k.indexOf(e)>=0}},{key:"hasKeyFrame",value:function(e,t,r,i){if(e)if(r===S.Z_ORDER){if(e.zOrder){var a=e.zOrder;if(a&&a.timelineMap){var o;for(var s in a.timelineMap){var l=a.timelineMap[s];if(l.type===r){o=l;break}}if(o&&o.frameMap){var u=n.getTimelineRealFrame(o,i);for(var c in o.frameMap){var h=o.frameMap[c];if(h&&h.frame===u)return!0}}}}}else if(r===S.IK){if(e.iks){var d=e.iks[t];if(d&&d.timelineMap){var f;for(var p in d.timelineMap){var v=d.timelineMap[p];if(v.type===r){f=v;break}}if(f&&f.frameMap){var m=n.getTimelineRealFrame(f,i);for(var g in f.frameMap){var y=f.frameMap[g];if(y&&y.frame===m)return!0}}}}}else if(r===S.FFD){if(e.ffds){var b=e.ffds[t];if(b&&b.timelineMap){var _;for(var x in b.timelineMap){var E=b.timelineMap[x];if(E.type===r){_=E;break}}if(_&&_.frameMap){var w=n.getTimelineRealFrame(_,i);for(var T in _.frameMap){var k=_.frameMap[T];if(k&&k.frame===w)return!0}}}}}else{if(e.bones){var C=e.bones[t];if(C&&C.timelineMap){var A;for(var I in C.timelineMap){var O=C.timelineMap[I];if(O&&n.propertyEqualTimelineType(r,O.type)){A=O;break}}if(A&&A.frameMap){var P=n.getTimelineRealFrame(A,i);for(var M in A.frameMap){var R=A.frameMap[M];if(R&&R.frame===P)return!0}}}}if(e.slots){var N=e.slots[t];if(N&&N.timelineMap){var D;for(var L in N.timelineMap){var F=N.timelineMap[L];if(F.type===r){D=F;break}}if(D&&D.frameMap){var B=n.getTimelineRealFrame(D,i);for(var U in D.frameMap){var H=D.frameMap[U];if(H&&H.frame===B)return!0}}}}}return!1}},{key:"boneHasCacheProperty",value:function(e,t){if(e&&e.cacheProperties){var n=e.animatedTransform||e.mixTransform||e.transform;switch(t){case"x":case"y":return e.cacheTransform&&(!Lf.isNumberEqual(e.cacheTransform.x,n.x)||!Lf.isNumberEqual(e.cacheTransform.y,n.y));case"scaleX":case"scaleY":return e.cacheTransform&&(!Lf.isNumberEqual(e.cacheTransform.scaleX,n.scaleX)||!Lf.isNumberEqual(e.cacheTransform.scaleY,n.scaleY));case"rotation":case"rotate":return e.cacheTransform&&!Lf.isNumberEqual(e.cacheTransform.skewX,n.skewX);default:return void 0!==e.cacheProperties[t]}}return!1}},{key:"propertyEqualTimelineType",value:function(e,t){return e===t||("x"===e||"y"===e?t===S.TRANSLATE:"scaleX"===e||"scaleY"===e?t===S.SCALE:"rotation"===e?t===S.ROTATE:void 0)}},{key:"getTimelinesFromSubAnimation",value:function(e){var t=[];if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];r&&t.push(r)}return t}},{key:"subAnimationHasFrame",value:function(e,t){if(e.timelineMap)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r)for(var i=0,a=t.length;i<a;i++){var o=t[i];if(r.frames.indexOf(o)>=0)return!0}}return!1}},{key:"subAnimationDeleteFrames",value:function(e,t){var n=0;if(e.timelineMap)for(var r in e.timelineMap){var i=e.timelineMap[r];if(i)for(var a=0,o=t.length;a<o;a++){var s=t[a],l=i.frames.indexOf(s);l>=0&&(i.frames.splice(l,1),i.frameMap[s]=void 0,delete i.frameMap[s],t.splice(a,1),o--,a--,n++)}}return n}},{key:"animationHasFrame",value:function(e,t){if(e.bones)for(var r in e.bones){var i=e.bones[r];if(i&&n.subAnimationHasFrame(i,t))return!0}if(e.slots)for(var a in e.slots){var o=e.slots[a];if(o&&n.subAnimationHasFrame(o,t))return!0}if(e.ffds)for(var s in e.ffds){var l=e.ffds[s];if(l&&n.subAnimationHasFrame(l,t))return!0}if(e.iks)for(var u in e.iks){var c=e.iks[u];if(c&&n.subAnimationHasFrame(c,t))return!0}return!(!e.event||!n.subAnimationHasFrame(e.event,t))||(!(!e.zOrder||!n.subAnimationHasFrame(e.zOrder,t))||void 0)}},{key:"animationDeleteFrames",value:function(e,t){var r=0,i=t.length;if(e.bones)for(var a in e.bones){var o=e.bones[a];if(o)r+=n.subAnimationDeleteFrames(o,t)}if(r!==i){if(e.slots)for(var s in e.slots){var l=e.slots[s];if(l)r+=n.subAnimationDeleteFrames(l,t)}if(r!==i){if(e.ffds)for(var u in e.ffds){var c=e.ffds[u];if(c)r+=n.subAnimationDeleteFrames(c,t)}if(r!==i){if(e.iks)for(var h in e.iks){var d=e.iks[h];if(d)r+=n.subAnimationDeleteFrames(d,t)}if(r!==i){if(e.event)r+=n.subAnimationDeleteFrames(e.event,t);if(r!==i){if(e.zOrder)r+=n.subAnimationDeleteFrames(e.zOrder,t);if(r!==i)throw new Error("delete frames count error:".concat(r,"/ ").concat(i))}}}}}}},{key:"replaceSubAnimaitonId",value:function(e,t){var n={};for(var r in e.timelineMap){var i=e.timelineMap[r];i.id=t(),n[i.id]=i;var a=[],o={};for(var s in i.frameMap){var l=i.frameMap[s];l.id=t(),a.push(l.id),o[l.id]=l}i.frames=a,i.frameMap=o}e.timelineMap=n}},{key:"ReplaceAnimationId",value:function(e,t){if(e.id=t(),e.bones)for(var r in e.bones){var i=e.bones[r];n.replaceSubAnimaitonId(i,t)}if(e.slots)for(var a in e.slots){var o=e.slots[a];n.replaceSubAnimaitonId(o,t)}if(e.ffds)for(var s in e.ffds){var l=e.ffds[s];n.replaceSubAnimaitonId(l,t)}if(e.iks)for(var u in e.iks){var c=e.iks[u];n.replaceSubAnimaitonId(c,t)}e.event&&n.replaceSubAnimaitonId(e.event,t),e.zOrder&&n.replaceSubAnimaitonId(e.zOrder,t)}},{key:"isTimelineSupportCurve",value:function(e,t){if(t&&t.length)switch(e){case S.VISIBLE:case S.Z_ORDER:case S.EVENT:case S.DISPLAY_INDEX:return 1===t.length&&0===t[0];default:return!0}return!1}}]),n}(Ff),Uf=d((function e(){l(this,e)}));Uf.DOPESHEET_BG=16777215,Uf.DOPESHEET_LABEL_BG=16777215,Uf.DOPESHEET_LABEL=7829367,Uf.DOPESHEET_PLAY_HEAD=65535,Uf.DOPESHEET_LAST_FRAME=10027008,Uf.DOPESHEET_PLAY_HEAD_VIRTUAL=10066176,Uf.DOPESHEET_CURVE_NORMAL=10066329,Uf.DOPESHEET_CURVE_SELECT=16777215,Uf.BG_TRANSPARENT_F=6513507,Uf.BG_TRANSPARENT_B=5921370,Uf.ANT_BLUE=["#ecf6fd","#d2eafb","#add8f7","#7ec2f3","#49a9ee","#108ee9","#0e77ca","#0c60aa","#09488a","#073069"],Uf.ANT_GREY=["#fbfbfb","#f7f7f7","#f5f5f5","#e9e9e9","#d9d9d9","#bfbfbf","#919191","#5a5a5a","#404040","#222222"],Uf.ANT_CYAN=["#ebf8f9","#cfedf0","#a7dfe3","#76cdd3","#3db8c1","#00a2ae","#008997","#00707f","#005667","#003c4e"],Uf.ANT_YELLOW=["#fffaeb","#fff3cf","#ffe9a7","#ffdd76","#ffce3d","#ffbf00","#e09a00","#c17500","#a04f00","#802800"],Uf.ANT_PINK=["#feeff5","#fdd8e7","#fcb8d3","#fa90ba","#f7629e","#f5317f","#dc277d","#c11c7b","#a71278","#8c0776"],Uf.COLOR_OVER_RECT=16777215,Uf.COLOR_SELECT_RECT=1042664,Uf.COLOR_SELECT_OVER_RECT=65280,Uf.HANDLER_NORMAL=0,Uf.HANDLER_OVER=45311,Uf.HANDLER_OVER_2=16777215,Uf.HANDLER_SELECT=45311,Uf.HANDLER_MOVE=16777215,Uf.HANDLER_X_MOVE=16711680,Uf.HANDLER_Y_MOVE=65280,Uf.HANDLER_X_SCALE=16711680,Uf.HANDLER_Y_SCALE=65280,Uf.HANDLER_X_SKEW=16711680,Uf.HANDLER_Y_SKEW=65280,Uf.HANDLER_ROTATION=16776960,Uf.HANDLER_SCALE_ALL=16776960,Uf.HANDLER_SCALE=8947848,Uf.HANDLER_PIVOT=8947848,Uf.HANDLER_PIVOT_LINE=0,Uf.FRAME_X=16711680,Uf.FRAME_Y=65280,Uf.FRAME_ROTATION=16776960,Uf.FRAME_SCALE_X=16734810,Uf.FRAME_SCALE_Y=5963610,Uf.FRAME_SKEW_X=16742777,Uf.FRAME_SKEW_Y=7995257,Uf.FRAME_VISIBLE=16764159,Uf.FRAME_TEXT=16763904,Uf.FRAME_PROGRESS=6750207,Uf.FRAME_COLOR=6750156,Uf.FRAME_PLAY=10066329,Uf.FRAME_MIX=16777215,Uf.FRAME_BLOCK_LINE=65280,Uf.FRAME_BLOCK=65280,Uf.NORMAL_LINE_COLOR=16777215,Uf.NORMAL_POINT_COLOR=16777215,Uf.EDIT_LINE_COLOR=255,Uf.EDIT_POINT_COLOR=255,Uf.OVER_LINE_COLOR=16776960,Uf.OVER_POINT_COLOR=16776960,Uf.SELECTED_LINE_COLOR=65280,Uf.SELECTED_POINT_COLOR=65280,Uf.END_LINE_COLOR=65280,Uf.END_POINT_COLOR=65280,Uf.INSERT_POINT_COLOR=65535,Uf.DELETE_POINT_COLOR=16711680,Uf.HANDLE_COLOR=10000384,Uf.BONE_FILL_UP=12303291,Uf.BONE_FILL_DOWN=4652287,Uf.BONE_FILL_DOWN_OVER=10092543,Uf.BONE_FILL_OVER=16777215,Uf.BONE_FILL_IK=16728064,Uf.BONE_BOLDER=0,Uf.BONE_IK_LINE=16711680,Uf.BONE_FK_LINE=65280,Uf.MESH_POINT_NORMAL=65280,Uf.MESH_POINT_OVER=16711680,Uf.MESH_POINT_SELECTED=255,Uf.MESH_POINT_DELETE=16711680,Uf.MESH_POINT_ADD=255,Uf.MESH_LINE_NORMAL=65280,Uf.MESH_LINE_OVER=16711680,Uf.MESH_LINE_SELECTED=255,Uf.MESH_LINE_BORDER=16777215,Uf.MESH_LINE_AUTO=10066329,Uf.MESH_LINE_CLOSE=13421772,Uf.MESH_LINE_RANGE=16777215,Uf.MESH_LINE_DELETE=16711680,Uf.MESH_OUTLINE_NORMAL=65535,Uf.MESH_OUTLINE_OVER=16777215,Uf.MESH_OUTLINE_SELECTED=255,Uf.MESH_USER_LINE_NORMAL=13612094,Uf.MESH_USER_LINE_OVER=16711680,Uf.MESH_USER_LINE_SELECTED=255,Uf.RIG_BONE_COLOR=[65280,16737792,16711680,255,16776960,16711935,7221635,10416579,7575997,2365982,9001241,8773749,10467339,1548733,9199327,2258947,7706757,2941914,2888195,2163122,11841945,1122112,15327991,11001904,1220560];var Hf=function(){function e(){l(this,e)}return d(e,null,[{key:"generateId",value:function(){return++this.maxId}},{key:"parseTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:Lf.angle2Radio(e.skX||0),skewY:Lf.angle2Radio(e.skY||0)}}},{key:"parseBone",value:function(e){return{name:e.name,id:e.id,parentId:0,transform:this.parseTransform(e.transform),length:e.length||0,inheritRotation:e.inheritRotation,inheritScale:e.inheritScale}}},{key:"getIdByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i.id}return 0}},{key:"getItemByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}}},{key:"getAssetIdByPath",value:function(e,t){for(var n in t){var r=t[n];if(r&&r.type===x.SPRITE_SHEET&&r.children)for(var i=0,a=r.children.length;i<a;i++){var o=r.children[i];if(o.name===e)return o.id}}return 0}},{key:"parseSlotDisplay",value:function(e,t,n){var r=this,i=[],a={};if(t&&t.slot)for(var o=0,s=t.slot.length;o<s;o++){var l=t.slot[o];l.name===e&&l.display.forEach((function(e){var t=r.parseDisplay(e,n);t&&(i.push(t.id),a[t.id]=t)}))}return{ids:i,map:a}}},{key:"parseDBMeshPoint",value:function(e,t){for(var n={},r=0,i=e.length;r<i;r+=2)n[r/2]={vertices:[e[r],e[r+1]],uvs:[t[r],t[r+1]]};return n}},{key:"parseDisplay",value:function(e,t){if("image"===e.type)return{name:e.name,id:e.id,transform:this.parseTransform(e.transform),type:w.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path,t)};if("mesh"===e.type){if(e.share)return{name:e.name,id:e.id,transform:this.parseTransform(e.transform||{}),type:w.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path,t)};var n=this.parseDBMeshPoint(e.vertices,e.uvs),r=[];for(var i in n){var a=n[i];r.push({x:a.uvs[0],y:a.uvs[1]})}var o={name:e.name,id:e.id,transform:this.parseTransform(e.transform),type:w.MESH,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path,t),mesh:{points:n,outlines:e.edges,userEdges:e.userEdges||[],triangles:e.triangles},width:e.width,height:e.height};if(e.slotPose){var s={a:e.slotPose[0],b:e.slotPose[1],c:e.slotPose[2],d:e.slotPose[3],tx:e.slotPose[4],ty:e.slotPose[5]},l=Lf.matrix2Transform(s);o.mesh.slotPose=l}if(e.bonePose)for(var u=0,c=e.bonePose.length;u<c;u+=7){var h=e.bonePose[u],d={a:e.bonePose[u+1],b:e.bonePose[u+2],c:e.bonePose[u+3],d:e.bonePose[u+4],tx:e.bonePose[u+5],ty:e.bonePose[u+6]},f=Lf.matrix2Transform(d);Lf.transform2Matrix(f);o.mesh.bonePose=o.mesh.bonePose||{};var p=this.getBoneIdByIndex(h),v=Uf.RIG_BONE_COLOR[h%Uf.RIG_BONE_COLOR.length];o.mesh.bonePose[p]={pose:f,color:v}}if(e.weights){for(var m=0,g=0;m<e.weights.length;){var y=e.weights[m],b={};m++;for(var _=0,x=2*y;_<x;_+=2){var E=e.weights[m+_],T=this.getBoneIdByIndex(E),S=e.weights[m+_+1];b[T]=S}o.mesh.boneWeights=o.mesh.boneWeights||{},o.mesh.boneWeights[g]=b,g++,m+=2*y}for(var k in o.mesh.bonePose)for(var C in o.mesh.boneWeights)o.mesh.boneWeights[C][k]||(o.mesh.boneWeights[C][k]=0)}return o}if("boundingBox"===e.type)return null;if("armature"===e.type)return null;throw new Error("unknown display type :"+e.type)}},{key:"parseColor",value:function(e){if(!e)return{color:16777215,alpha:1};var t=void 0===e.rM?100:e.rM,n=void 0===e.gM?100:e.gM,r=void 0===e.bM?100:e.bM,i=void 0===e.aM?100:e.aM;return{color:(Math.floor(t/100*255)<<16)+(Math.floor(n/100*255)<<8)+Math.floor(r/100*255),alpha:i/100}}},{key:"exportDBColor",value:function(e){var t=Lf.changeColor2ARGB(e),n=Math.ceil(t[0]/255*100),r=Math.ceil(t[1]/255*100),i=Math.ceil(t[2]/255*100),a=Math.ceil(t[3]/255*100),o={rM:r,gM:i,bM:a,aM:n};return 100===r&&delete o.rM,100===i&&delete o.gM,100===a&&delete o.bM,100===n&&delete o.aM,o}},{key:"parseBlendMode",value:function(e){switch(e){case"add":return 1;case"erase":return 5;default:return 0}}},{key:"exportDBBlendMode",value:function(e){switch(e){case 1:return"add";case 5:return"erase";default:return}}},{key:"parseSlot",value:function(e,t,n){var r={name:e.name,id:e.id,parentId:0,zOrder:e.z,displayIndex:e.displayIndex,displays:this.parseSlotDisplay(e.name,t,n)};if(e.color){var i=this.parseColor(e.color);16777215!==i.color&&(r.color=i.color),r.alpha=i.alpha}if(e.blendMode){var a=this.parseBlendMode(e.blendMode);0!==a&&(r.blendMode=a)}return r}},{key:"parseSkin",value:function(e){}},{key:"parseFrameCurve",value:function(e){return e.curve?4===e.curve.length?.5===e.curve[0]&&0===e.curve[1]&&1===e.curve[2]&&1===e.curve[3]?[gf.EaseInQuad]:0===e.curve[0]&&0===e.curve[1]&&.5===e.curve[2]&&1===e.curve[3]?[gf.EaseOutQuad]:.5===e.curve[0]&&0===e.curve[1]&&.5===e.curve[2]&&1===e.curve[3]?[gf.EaseInOutQuad]:e.curve:e.curve:0===e.tweenEasing?[gf.Linear]:e.tweenEasing?void 0:[gf.None]}},{key:"parseTimeline",value:function(e,t,n,r){for(var i={id:this.generateId(),type:n,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},a=0,o=0,s=e.length;o<s;o++){var l=e[o],u=r(l,a);u.curve=this.parseFrameCurve(l),a+=l.duration,i.frames.push(u.id),i.frameMap[u.id]=u}return i}},{key:"parseTranslateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.TRANSLATE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x,y:e.y}}}))}},{key:"parseScaleTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.SCALE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x,y:e.y}}}))}},{key:"parseRotateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.ROTATE,(function(e,t){var r=0,i=0;return e.clockwise>0?(r=1,i=e.clockwise-1):e.clockwise<0&&(r=-1,i=Math.abs(e.clockwise+1)),{id:n.generateId(),frame:t,value:{rotate:Lf.angle2Radio(e.rotate),clockwise:r,clockwiseNum:i}}}))}},{key:"parseDBProZOrderFrame",value:function(e,t){for(var n=[],r=0,i=t.length;r<i;r++){var a=this.getIdByName(e,t[r]);if(!(a>=0))throw new Error("zOrder error:"+t[r]);n.push(a)}if(n.length<e.length)for(var o=0,s=e.length;o<s;o++){var l=e[o];n.indexOf(l.id)<0&&n.push(l.id)}else if(n.length>e.length)throw new Error("zOrder length error:"+t);return n}},{key:"parseFFDTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.FFD,(function(e,t){var r=e,i={};if(r.vertices)for(var a=0,o=r.vertices.length;a<o;a+=2){var s=r.vertices[a],l=r.vertices[a+1];if(0!==s&&0!==l)i[(a+r.offset)/2]=[s,l]}return{id:n.generateId(),frame:t,value:i}}))}},{key:"parseAnimation",value:function(e,t,n,r,i,a){var o=this,s={id:e.id>0?e.id:this.generateId(),name:e.name,duration:e.duration};if(e.bone){s.bones={};for(var l=0,u=e.bone.length;l<u;l++){var c=e.bone[l],h=this.getIdByName(t,c.name),d={id:h,name:c.name,timelineMap:{}};if(c.translateFrame){var f=this.parseTranslateTimeline(c.translateFrame,c);d.timelineMap[f.id]=f}if(c.scaleFrame){var p=this.parseScaleTimeline(c.scaleFrame,c);d.timelineMap[p.id]=p}if(c.rotateFrame){var v=this.parseRotateTimeline(c.rotateFrame,c);d.timelineMap[v.id]=v}s.bones[h]=d}}if(e.ik){s.iks={};for(var m=0,g=e.ik.length;m<g;m++){var y=e.ik[m],b=this.getIdByName(r,y.name),_={id:b,name:y.name,timelineMap:{}};if(y.frame){var x=this.parseTimeline(y.frame,y,S.IK,(function(e,t){return{id:o.generateId(),frame:t,value:{bendPositive:e.bendPositive,weight:e.weight}}}));_.timelineMap[x.id]=x}s.iks[b]=_}}if(e.slot){s.slots={};for(var E=0,w=e.slot.length;E<w;E++){var T=e.slot[E],k={id:this.getIdByName(n,T.name),name:T.name,timelineMap:{}};if(T.colorFrame){var C=this.parseTimeline(T.colorFrame,T,S.COLOR,(function(e,t){var n=o.parseColor(e.color),r=Lf.mergeAlphaColor(n.color,n.alpha);return{id:o.generateId(),frame:t,value:r}}));k.timelineMap[C.id]=C}if(T.displayFrame){var A=this.parseTimeline(T.displayFrame,T,S.DISPLAY_INDEX,(function(e,t){return{id:o.generateId(),frame:t,value:e.value}}));k.timelineMap[A.id]=A}s.slots[k.id]=k}}if(e.zOrder&&(s.zOrder={id:i,name:"zOrder",timelineMap:{}},e.zOrder.frame)){var I=this.parseTimeline(e.zOrder.frame,{},S.Z_ORDER,(function(e,t){var r=o.parseDBProZOrderFrame(n,e.zOrder);return{id:o.generateId(),frame:t,value:r}}));s.zOrder.timelineMap[I.id]=I}if(e.ffd){s.ffds={};for(var O=0,P=e.ffd.length;O<P;O++){var M=e.ffd[O],R=this.getDisplayIdBySlotName(M.slot,a.map),N={id:R,name:M.name,timelineMap:{}};if(M.frame){var D=this.parseFFDTimeline(M.frame,M);N.timelineMap[D.id]=D}s.ffds[R]=N}}if(e.frame){s.event={id:i,name:"event",timelineMap:{}};var L=this.parseTimeline(e.frame,{},S.EVENT,(function(e,t){var n=e,r={};return n.events&&(r.events=n.events),n.sound&&(r.sound=n.sound),n.action&&(r.action=n.action),{id:o.generateId(),frame:t,value:r}}));s.event.timelineMap[L.id]=L}return s}},{key:"getDisplayIdBySlotName",value:function(e,t){for(var n in t){var r=t[n];if(r.name===e)return r.displays.ids[r.displayIndex]}}},{key:"getBoneIdByIndex",value:function(e){return this.tempBones[e].id}},{key:"parseArmature",value:function(e,t){var n={id:e.id,name:e.name,bones:{ids:[],map:{}},slots:{ids:[],map:{}},skins:{ids:[],map:{}},animations:[],constraint:{ik:{}}},r={};if(this.tempBones=[],e.bone){for(var i=0,a=e.bone.length;i<a;i++){var o=e.bone[i],s=this.parseBone(o);if(this.tempBones.push(s),o.parent){var l=this.getIdByName(e.bone,o.parent);s.parentId=l}n.bones.ids.push(s.id),n.bones.map[s.id]=s}if(e.slot)for(var u=0,c=e.slot.length;u<c;u++){var h=e.slot[u],d=this.parseSlot(h,e.skin[0],t),f=this.getIdByName(e.bone,h.parent);d.parentId=f,n.slots.ids.push(d.id),n.slots.map[d.id]=d}if(e.ik)for(var p=0,v=e.ik.length;p<v;p++){var m=e.ik[p],g=this.getItemByName(this.tempBones,m.bone),y=this.getItemByName(this.tempBones,m.target),b=g.id,_=g.id;1===m.chain?b=g.parentId:_=void 0;var x={id:m.id,name:m.name,parentId:b,targetId:y.id,bendPositive:"false"!==m.bendPositive,weight:m.weight||1};_&&(x.childId=_),n.constraint.ik[x.id]=x}if(e.animation)for(var E=0,w=e.animation.length;E<w;E++){var T=e.animation[E],S=this.parseAnimation(T,e.bone,e.slot,e.ik,n.id,n.slots);n.animations.push(S.id),r[S.id]=S}}return{armature:n,animationMap:r}}},{key:"getMaxId",value:function(e){var t=0;return function e(n){for(var r in n)"id"===r?t=Math.max(t,n[r]):"object"===typeof n[r]&&e(n[r])}(e),t}},{key:"parseProjData",value:function(e,t,n){if(e&&e.dragonBones){var r=e.dragonBones.armature;this.maxId=Math.max(this.getMaxId(r),n);var i=[],a=[];if(r&&r.length)for(var o=0,s=r.length;o<s;o++){var l=this.parseArmature(r[o],t);if(l&&i.push(l.armature),l.animationMap)for(var u in l.animationMap)a.push(l.animationMap[u])}return{armatures:i,animations:a}}}}]),e}();Hf.maxId=0,Hf.tempBones=[];var jf=function(e){p(n,gmvc.GModule);var t=g(n);function n(){return l(this,n),t.call(this,"library")}return d(n,[{key:"mutations",get:function(){var e;return y(e={},Y.GET_USER_ASSETS_SUCCESS,(function(e,t){e.files=t})),y(e,b.UPLOAD_FILE,(function(e,t){e.files[t.id]=t})),e}}],[{key:"getImageFileSize",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.width||void 0===t.height){e.next=2;break}return e.abrupt("return",Promise.resolve([t.width,t.height]));case 2:return e.abrupt("return",new Promise((function(e,n){var r=document.createElement("img");r.onload=function(){var n=r.width,i=r.height;t.width=n,t.height=i,e([n,i])},r.onerror=function(e){n(e)},r.src=t.url||t.data})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(),zf=function(){function e(){l(this,e)}return d(e,null,[{key:"isDragonbonesJson",value:function(e){return e.name&&e.armature&&Array.isArray(e.armature)&&e.armature[0]&&("5.0"===e.version||"5.5"===e.version||"4.5"===e.version)}},{key:"generateId",value:function(){return++this.maxId}},{key:"getBoneIdByIndex",value:function(e){return this.tempBones[e].id}},{key:"getBoneIdByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i.id}return 0}},{key:"getIKIdByName",value:function(e,t){for(var n in e){var r=e[n];if(r.name===t)return r.id}return 0}},{key:"getSlotIdByName",value:function(e,t){for(var n in e){var r=e[n];if(r.name===t)return r.id}return 0}},{key:"getBoneByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}}},{key:"parseTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:Lf.angle2Radio(e.skX||0),skewY:Lf.angle2Radio(e.skY||0)}}},{key:"getAssetIdByPath",value:function(e,t){for(var n in t){var r=t[n];if(r&&r.type===x.SPRITE_SHEET&&r.children)for(var i=0,a=r.children.length;i<a;i++){var o=r.children[i];if(o.name===e)return o.id}}return 0}},{key:"parseJsonData",value:function(e,t,n){if(e&&e.armature){var r=e.armature,i=[],a=[];if(this.maxId=n,r&&r.length)for(var o=0,s=r.length;o<s;o++){var l=this.parseJsonArmature(r[o],t);if(l&&i.push(l.armature),l.animationMap)for(var u in l.animationMap)a.push(l.animationMap[u])}return{armatures:i,animations:a}}}},{key:"map2Array",value:function(e){for(var t=Array(),n=0,r=e.ids.length;n<r;n++){var i=e.ids[n];t.push(e.map[i])}return t}},{key:"index2Id",value:function(e,t){for(var n=[],r=0,i=t.length;r<i;r++)n.push(e[t[r]].id);return n}},{key:"parseJsonArmature",value:function(e,t){var n={id:this.generateId(),name:e.name,bones:{ids:[],map:{}},slots:{ids:[],map:{}},skins:{ids:[],map:{}},animations:[],constraint:{ik:{}}},r={};this.tempBones=[];var i=[],a=[];if(e.bone){for(var o=0,s=e.bone.length;o<s;o++){var l=e.bone[o],u=this.parseJsonBone(l);this.tempBones.push(u),i.push(u),a.push(l)}for(var c=0,h=a.length;c<h;c++){var d=a[c],f=i[c];if(d.parent){var p=this.getBoneIdByName(i,d.parent);f.parentId=p}n.bones.ids.push(f.id),n.bones.map[f.id]=f}}if(e.slot)for(var v=0,m=e.slot.length;v<m;v++){var g=e.slot[v],y=this.parseJsonSlot(g,e.skin[0],t),b=this.getBoneIdByName(i,g.parent);y.parentId=b,n.slots.ids.push(y.id),n.slots.map[y.id]=y}if(e.ik)for(var _=0,x=e.ik.length;_<x;_++){var E=e.ik[_],w=this.getBoneByName(i,E.bone),T=this.getBoneByName(i,E.target),S=w.id,k=w.id;1===E.chain?S=w.parentId:k=void 0;var C={id:this.generateId(),name:E.name,parentId:S,targetId:T.id,bendPositive:"false"!==E.bendPositive,weight:E.weight||1};k&&(C.childId=k),n.constraint.ik[C.id]=C}if(e.animation)for(var A=0,I=e.animation.length;A<I;A++){var O=e.animation[A],P=this.parseAnimation(O,i,n.slots,n.id,n.constraint.ik);n.animations.push(P.id),r[P.id]=P}return{armature:n,animationMap:r}}},{key:"parseAnimation",value:function(e,t,n,r,i){var a=this,o={id:this.generateId(),name:e.name,duration:e.duration};if(e.bone){o.bones={};for(var s=0,l=e.bone.length;s<l;s++){var u=e.bone[s],c=this.getBoneIdByName(t,u.name),h={id:c,name:u.name,timelineMap:{}};if(u.frame){var d=this.parseBoneTimeline5_0(u.frame,u);h.timelineMap[d[0].id]=d[0],h.timelineMap[d[1].id]=d[1],h.timelineMap[d[2].id]=d[2]}if(u.translateFrame){var f=this.parseTranslateTimeline(u.translateFrame,u);h.timelineMap[f.id]=f}if(u.scaleFrame){var p=this.parseScaleTimeline(u.scaleFrame,u);h.timelineMap[p.id]=p}if(u.rotateFrame){var v=this.parseRotateTimeline(u.rotateFrame,u);h.timelineMap[v.id]=v}o.bones[c]=h}}if(e.ik){o.iks={};for(var m=0,g=e.ik.length;m<g;m++){var y=e.ik[m],b=this.getIKIdByName(i,y.name),_={id:b,name:y.name,timelineMap:{}};if(y.frame){var x=this.parseTimeline(y.frame,y,S.IK,(function(e,t){return{id:a.generateId(),frame:t,value:{bendPositive:e.bendPositive,weight:e.weight}}}));_.timelineMap[x.id]=x}o.iks[b]=_}}if(e.bone){for(var E=0,w=e.bone.length;E<w;E++){var T=e.bone[E],k=this.getBoneIdByName(t,T.name),C={id:k,name:T.name,timelineMap:{}};if(T.frame){var A=this.parseBoneTimeline5_0(T.frame,T);C.timelineMap[A[0].id]=A[0],C.timelineMap[A[1].id]=A[1],C.timelineMap[A[2].id]=A[2]}if(T.translateFrame){var I=this.parseTranslateTimeline(T.translateFrame,T);C.timelineMap[I.id]=I}if(T.scaleFrame){var O=this.parseScaleTimeline(T.scaleFrame,T);C.timelineMap[O.id]=O}if(T.rotateFrame){var P=this.parseRotateTimeline(T.rotateFrame,T);C.timelineMap[P.id]=P}o.bones[k]=C}o.slots={};for(var M=0,R=e.slot.length;M<R;M++){var N=e.slot[M],D={id:this.getSlotIdByName(n.map,N.name),name:N.name,timelineMap:{}};if(N.colorFrame){var L=this.parseTimeline(N.colorFrame,N,S.COLOR,(function(e,t){var n=Hf.parseColor(e.color),r=Lf.mergeAlphaColor(n.color,n.alpha);return{id:a.generateId(),frame:t,value:r}}));D.timelineMap[L.id]=L}if(N.displayFrame){var F=this.parseDisplayIndexTimeline(N.displayFrame,N);D.timelineMap[F.id]=F}o.slots[D.id]=D}}if(e.zOrder){o.zOrder={id:r,name:"zOrder",timelineMap:{}};var B=this.map2Array(n),U=B.length;if(e.zOrder.frame){var H=this.parseTimeline(e.zOrder.frame,{},S.Z_ORDER,(function(e,t){var n=Lf.absZOrder(U,e.zOrder),r=a.index2Id(B,n);return{id:a.generateId(),frame:t,value:r}}));o.zOrder.timelineMap[H.id]=H}}if(e.ffd){o.ffds={};for(var j=0,z=e.ffd.length;j<z;j++){var V=e.ffd[j],G=this.getDisplayIdBySlotName(V.slot,n.map),W={id:G,name:V.name,timelineMap:{}};if(V.frame){var X=this.parseFFDTimeline(V.frame,V);W.timelineMap[X.id]=X}o.ffds[G]=W}}if(e.frame){o.event={id:r,name:"event",timelineMap:{}};var Y=this.parseTimeline(e.frame,{},S.EVENT,(function(e,t){var n=e,r={};return n.events&&(r.events=n.events),n.sound&&(r.sound=n.sound),n.action&&(r.action=n.action),{id:a.generateId(),frame:t,value:r}}));o.event.timelineMap[Y.id]=Y}return o}},{key:"getDisplayIdBySlotName",value:function(e,t){for(var n in t){var r=t[n];if(r.name===e)return r.displays.ids[r.displayIndex]}}},{key:"getSlotNameByDisplayId",value:function(e,t){for(var n in t){var r=t[n];if(-1!==r.displays.ids.indexOf(e))return r.name}}},{key:"getSlotByDisplayId",value:function(e,t){for(var n in t){var r=t[n];if(-1!==r.displays.ids.indexOf(e))return r}}},{key:"parseJsonBone",value:function(e){return{name:e.name,id:this.generateId(),parentId:0,transform:this.parseJsonTransform(e.transform),length:e.length||0,inheritRotation:0!=e.inheritRotation,inheritScale:0!=e.inheritScale}}},{key:"parseJsonTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:Lf.angle2Radio(e.skX||0),skewY:Lf.angle2Radio(e.skY||0)}}},{key:"parseJsonSlot",value:function(e,t,n){var r={name:e.name,id:this.generateId(),parentId:0,zOrder:e.z,displayIndex:e.displayIndex||0,displays:this.parseJsonSlotDisplay(e.name,t,n)};if(e.color){var i=Hf.parseColor(e.color);16777215!==i.color&&(r.color=i.color),r.alpha=i.alpha}if(e.blendMode){var a=Hf.parseBlendMode(e.blendMode);0!==a&&(r.blendMode=a)}return r}},{key:"parseJsonSlotDisplay",value:function(e,t,n){var r=this,i=[],a={};if(t&&t.slot)for(var o=0,s=t.slot.length;o<s;o++){var l=t.slot[o];l.name===e&&l.display.forEach((function(e){var t=r.parseJsonDisplay(e,n);t&&(i.push(t.id),a[t.id]=t)}))}return{ids:i,map:a}}},{key:"parseDBMeshPoint",value:function(e,t){for(var n={},r=0,i=e.length;r<i;r+=2)n[r/2]={vertices:[e[r],e[r+1]],uvs:[t[r],t[r+1]]};return n}},{key:"parseJsonDisplay",value:function(e,t){if("image"===e.type)return{name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform),type:w.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.name,t)};if("mesh"===e.type){if(e.share)return{name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform||{}),type:w.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.name,t)};var n=this.parseDBMeshPoint(e.vertices,e.uvs),r=[];for(var i in n){var a=n[i];r.push({x:a.uvs[0],y:a.uvs[1]})}var o={name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform),type:w.MESH,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.name,t),mesh:{points:n,outlines:e.edges,userEdges:e.userEdges||[],triangles:e.triangles},width:e.width,height:e.height};if(e.slotPose){var s={a:e.slotPose[0],b:e.slotPose[1],c:e.slotPose[2],d:e.slotPose[3],tx:e.slotPose[4],ty:e.slotPose[5]},l=Lf.matrix2Transform(s);o.mesh.slotPose=l}if(e.bonePose)for(var u=0,c=e.bonePose.length;u<c;u+=7){var h=e.bonePose[u],d={a:e.bonePose[u+1],b:e.bonePose[u+2],c:e.bonePose[u+3],d:e.bonePose[u+4],tx:e.bonePose[u+5],ty:e.bonePose[u+6]},f=Lf.matrix2Transform(d);Lf.transform2Matrix(f);o.mesh.bonePose=o.mesh.bonePose||{};var p=this.getBoneIdByIndex(h),v=Uf.RIG_BONE_COLOR[h%Uf.RIG_BONE_COLOR.length];o.mesh.bonePose[p]={pose:f,color:v}}if(e.weights){for(var m=0,g=0;m<e.weights.length;){var y=e.weights[m],b={};m++;for(var _=0,x=2*y;_<x;_+=2){var E=e.weights[m+_],T=this.getBoneIdByIndex(E),S=e.weights[m+_+1];b[T]=S}o.mesh.boneWeights=o.mesh.boneWeights||{},o.mesh.boneWeights[g]=b,g++,m+=2*y}for(var k in o.mesh.bonePose)for(var C in o.mesh.boneWeights)o.mesh.boneWeights[C][k]||(o.mesh.boneWeights[C][k]=0)}return o}if("boundingBox"===e.type)return null;if("armature"===e.type)return null;throw new Error("unknown display type:"+e.type)}},{key:"parseBoneTimeline5_0",value:function(e,t){for(var n={id:this.generateId(),type:S.TRANSLATE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},r={id:this.generateId(),type:S.SCALE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},i={id:this.generateId(),type:S.ROTATE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},a=0,o=0,s=e.length;o<s;o++){var l=e[o],u=void 0;if(void 0!==l.tweenEasing&&null!==l.tweenEasing&&(u=[0===l.tweenEasing?1:l.tweenEasing]),l.transform){var c={id:this.generateId(),frame:a,curve:u,value:{x:l.transform.x||0,y:l.transform.y||0}},h={id:this.generateId(),frame:a,curve:u,value:{x:l.transform.scX||1,y:l.transform.scY||1}},d={id:this.generateId(),frame:a,curve:u,value:{rotate:Lf.angle2Radio(l.transform.skX||0)}};a+=l.duration,n.frames.push(c.id),n.frameMap[c.id]=c,r.frames.push(h.id),r.frameMap[h.id]=h,i.frames.push(d.id),i.frameMap[d.id]=d}}return[n,r,i]}},{key:"parseTimeline",value:function(e,t,n,r){for(var i={id:this.generateId(),type:n,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},a=0,o=0,s=e.length;o<s;o++){var l=e[o],u=r(l,a);u.curve=Hf.parseFrameCurve(l),a+=l.duration,i.frames.push(u.id),i.frameMap[u.id]=u}return i}},{key:"parseDisplayIndexTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.DISPLAY_INDEX,(function(e,t){var r=e.value;return r||(r=0),{id:n.generateId(),frame:t,value:r}}))}},{key:"parseFFDTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.FFD,(function(e,t){var r=e,i={};if(r.vertices)for(var a=0,o=r.vertices.length;a<o;a+=2){var s=r.vertices[a],l=r.vertices[a+1];if(0!==s&&0!==l)i[(a+r.offset)/2]=[s,l]}return{id:n.generateId(),frame:t,value:i}}))}},{key:"parseTranslateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.TRANSLATE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x||0,y:e.y||0}}}))}},{key:"parseScaleTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.SCALE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x||1,y:e.y||1}}}))}},{key:"parseRotateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,S.ROTATE,(function(e,t){var r=0,i=0;return e.clockwise>0?(r=1,i=e.clockwise-1):e.clockwise<0&&(r=-1,i=Math.abs(e.clockwise+1)),{id:n.generateId(),frame:t,value:{rotate:Lf.angle2Radio(e.rotate||0),clockwise:r,clockwiseNum:i}}}))}},{key:"exportDragonbonesData",value:function(e,t,n){var r={frameRate:25,name:e.name,isGlobal:0,version:"5.5",armature:[]};if(t){var i=e.armatureMap[t];if(i){var a=this.exportArmature(i,e,n);r.armature.push(a)}}else for(var o in e.armatureMap){var s=e.armatureMap[o],l=this.exportArmature(s,e,n);r.armature.push(l)}return r}},{key:"exportTimeline",value:function(e,t){for(var n=0,r=[],i=0,a=0,o=e.frames.length;a<o;a++){var s=e.frames[a],l=e.frameMap[s],u=null;a<o-1&&(u=e.frameMap[e.frames[a+1]]);var c=0;u&&(c=u.frame-l.frame),l.frame>n&&(n=l.frame);var h={duration:c},d=this.exportFrameCurve(l.curve);d.curve&&(h.curve=d.curve),void 0!==d.tweenEasing&&(h.tweenEasing=d.tweenEasing);var f=t(l.value);if(f)for(var p in f)h[p]=f[p];i+=c,r.push(h)}return{frames:r,duration:i,maxFrame:n}}},{key:"getBoneIndexById",value:function(e,t){var n=t.map[e].id;return t.ids.indexOf(n)}},{key:"exportDisplay",value:function(e,t,n){var r=n&&n[e.assetId]?n[e.assetId]:e.assetId.toString(),i={name:r,path:r,width:e.width,height:e.height,type:e.type===w.IMAGE?"image":"mesh",transform:{x:e.transform.x,y:e.transform.y,skX:Lf.radio2Angle(e.transform.skewX),skY:Lf.radio2Angle(e.transform.skewY),scX:e.transform.scaleX,scY:e.transform.scaleY}};if(e.type===w.MESH){i.edges=e.mesh.outlines,i.userEdges=e.mesh.userEdges,i.triangles=e.mesh.triangles;var a=Object.keys(e.mesh.points).length;i.vertices=[],i.uvs=[];for(var o=0,s=a;o<s;o++){var l=e.mesh.points[o];i.vertices[2*o]=l.vertices[0],i.vertices[2*o+1]=l.vertices[1],i.uvs[2*o]=l.uvs[0],i.uvs[2*o+1]=l.uvs[1]}if(e.mesh.slotPose){var u=Lf.transform2Matrix(e.mesh.slotPose);i.slotPose=[u.a,u.b,u.c,u.d,u.tx,u.ty]}if(e.mesh.bonePose)for(var c in i.bonePose=[],e.mesh.bonePose){var h=e.mesh.bonePose[c],d=this.getBoneIndexById(c,t),f=Lf.transform2Matrix(h.pose);i.bonePose.push(d),i.bonePose.push(f.a),i.bonePose.push(f.b),i.bonePose.push(f.c),i.bonePose.push(f.d),i.bonePose.push(f.tx),i.bonePose.push(f.ty)}if(e.mesh.boneWeights){i.weights=[];var p=Object.keys(e.mesh.boneWeights).length;if(p!==Object.keys(e.mesh.points).length)throw new Error("vertexNum !== checkVertexNum");for(var v=0,m=p;v<m;v++){var g=v,y=e.mesh.boneWeights[g],b=Object.keys(y).length;for(var _ in i.weights.push(b),y){var x=this.getBoneIndexById(_,t);i.weights.push(x),i.weights.push(y[_])}}}}return i}},{key:"getBoneNameById",value:function(e,t){var n=e[t];return n?n.name+"-"+n.id:""}},{key:"exportFrameCurve",value:function(e){if(e){if(1!==e.length)return{curve:e};switch(e[0]){case gf.None:return{};case gf.Linear:return{tweenEasing:0};case gf.EaseInQuad:return{curve:[.5,0,1,1]};case gf.EaseOutQuad:return{curve:[0,0,.5,1]};case gf.EaseInOutQuad:return{curve:[.5,0,.5,1]}}}return{tweenEasing:0}}},{key:"exportIK",value:function(e,t){var n=this.getBoneNameById(t.map,e.parentId),r=this.getBoneNameById(t.map,e.targetId),i=(e.childId?this.getBoneNameById(t.map,e.childId):"")||n;if(i&&r){var a={name:e.name,bone:i,target:r,chain:e.childId?1:0};return!1===e.bendPositive&&(a.bendPositive="false"),1!==e.weight&&(a.weight=e.weight),a}}},{key:"exportTransform",value:function(e){var t={x:e.x,y:e.y,skX:Lf.radio2Angle(e.skewX),skY:Lf.radio2Angle(e.skewY),scX:e.scaleX,scY:e.scaleY};return 0===e.x&&delete t.x,0===e.y&&delete t.y,0===e.skewX&&delete t.skX,0===e.skewY&&delete t.skY,1===e.scaleX&&delete t.scX,1===e.scaleY&&delete t.scY,t}},{key:"exportArmature",value:function(e,t,n){for(var r=this,i={type:"Armature",frameRate:25,name:e.name,bone:[],slot:[],ik:[],skin:[{name:"",slot:[]}],defaultActions:[],aabb:{x:0,y:0,width:0,height:0},animation:[]},a=0,o=e.bones.ids.length;a<o;a++){var s=e.bones.ids[a],l=e.bones.map[s],u=e.bones.map[l.parentId],c=u?u.name+"-"+u.id:void 0,h={name:l.name+"-"+l.id,parent:c,length:l.length,transform:this.exportTransform(l.transform)};!1===l.inheritRotation&&(h.inheritRotation=!1),!1===l.inheritScale&&(h.inheritScale=!1),i.bone.push(h)}if(e.constraint&&e.constraint.ik)for(var d in e.constraint.ik){var f=e.constraint.ik[d];if(f){var p=this.exportIK(f,e.bones);p&&i.ik.push(p)}}for(var v=0,m=e.slots.ids.length;v<m;v++){var g=e.slots.ids[v],y=e.slots.map[g],b=e.bones.map[y.parentId],_=b?b.name+"-"+b.id:void 0,x={name:y.name+"-"+y.id,parent:_};0!==y.zOrder&&(x.z=y.zOrder),void 0!==y.blendMode&&(x.blendMode=Hf.exportDBBlendMode(y.blendMode)),i.slot.push(x)}for(var E=i.skin[0],w=0,k=e.slots.ids.length;w<k;w++){for(var C=e.slots.ids[w],A=e.slots.map[C],I=e.bones.map[A.parentId],O=(I&&(I.name,I.id),{name:A.name+"-"+A.id,display:[]}),P=0,M=A.displays.ids.length;P<M;P++){var R=A.displays.ids[P],N=A.displays.map[R],D=this.exportDisplay(N,e.bones,n);O.display.push(D)}E.slot.push(O)}if(e.animations)for(var L=0,F=e.animations.length;L<F;L++){var B=e.animations[L],U=t.animationMap[B],H={duration:U.duration,name:U.name},j=0;if(U.bones){H.bone=[];var z=0;for(var V in U.bones){var G=U.bones[V];if(G){var W=e.bones.map[G.id],X={name:W.name+"-"+W.id};for(var Y in G.timelineMap){var K=G.timelineMap[Y],q=0;if(K.type===S.TRANSLATE){X.translateFrame=[];var $=this.exportTimeline(K,(function(e){return{x:e.x,y:e.y}})),Z=$.frames,Q=$.duration;$.maxFrame;X.translateFrame=Z||[],q=Q}else if(K.type===S.ROTATE){var J=this.exportTimeline(K,(function(e){var t=0;e.clockwise===T.CLOCKWISE?t=e.clockwiseNum+1:e.clockwise===T.COUNTER_CLOCKWISE&&(t=-(e.clockwiseNum+1));var n={rotate:Lf.radio2Angle(e.rotate)};return 0!==t&&(n.clockwise=t),n})),ee=J.frames,te=J.duration;J.maxFrame;X.rotateFrame=ee||[],q=te}else if(K.type===S.SCALE){var ne=this.exportTimeline(K,(function(e){return{x:e.x,y:e.y}})),re=ne.frames,ie=ne.duration;ne.maxFrame;X.scaleFrame=re||[],q=ie}q>z&&(z=q)}H.bone.push(X)}}z>j&&(j=z)}if(U.iks)for(var ae in H.ik=[],U.iks){var oe=U.iks[ae],se={name:e.constraint.ik[ae].name};for(var le in oe.timelineMap){var ue=oe.timelineMap[le];if(ue&&ue.type===S.IK){var ce=this.exportTimeline(ue,(function(e){return{bendPositive:e.bendPositive,weight:e.weight}})),he=ce.frames,de=ce.duration;se.frame=he,j<de&&(j=de)}}H.ik.push(se)}if(U.ffds){H.ffd=[];var fe=function(){var t=U.ffds[pe],i=r.getSlotByDisplayId(t.id,e.slots.map),a=i.displays.map[t.id],o=i.name+"-"+i.id;if(!a||!a.mesh)return"continue";var s=0;for(var l in a.mesh.points)s++;var u={name:n&&n[a.assetId]?n[a.assetId]:a.assetId.toString(),slot:o,skin:"",frame:[]};for(var c in t.timelineMap){var h=t.timelineMap[c];if(h.type===S.FFD){var d=r.exportTimeline(h,(function(e){for(var t=[],n=0,r=s;n<r;n++)t[2*n]=0,t[2*n+1]=0;for(var i in e){var a=parseInt(i);e[i];t[2*a]=e[i][0],t[2*a+1]=e[i][1]}return{vertices:t,offset:0}})),f=d.frames,p=d.duration;d.maxFrame;u.frame=f,p>j&&(j=p)}}H.ffd.push(u)};for(var pe in U.ffds)fe()}if(U.slots)for(var ve in H.slot=[],U.slots){var me=U.slots[ve],ge=e.slots.map[ve];if(ge){var ye={name:ge.name+"-"+ge.id};for(var be in me.timelineMap){var _e=me.timelineMap[be];if(_e.type===S.DISPLAY_INDEX){var xe=this.exportTimeline(_e,(function(e){return{value:e}})),Ee=xe.frames,we=xe.duration;ye.displayFrame=Ee,j<we&&(j=we)}else if(_e.type===S.COLOR){var Te=this.exportTimeline(_e,(function(e){return{color:Hf.exportDBColor(e)}})),Se=Te.frames,ke=Te.duration;ye.colorFrame=Se,j<ke&&(j=ke)}}H.slot.push(ye)}}if(U.zOrder){H.zOrder={name:"zOrder"};var Ce=U.zOrder;for(var Ae in Ce.timelineMap){var Ie=Ce.timelineMap[Ae];if(Ie.type===S.Z_ORDER){var Oe=this.exportTimeline(Ie,(function(t){var n=e.slots.ids,r={};n.forEach((function(e,t){r[e]=t}));var i=[];return t.forEach((function(e){i.push(r[e])})),{zOrder:Lf.relativeZOrder(i)}})),Pe=Oe.frames,Me=Oe.duration;H.zOrder.frame=Pe,j<Me&&(j=Me)}}}H.duration||(H.duration=j),i.animation.push(H)}return i}}]),e}();zf.maxId=0,zf.tempBones=[];var Vf=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,"assetMap")}return d(n,[{key:"findAsset",value:function(e,t){for(var n in this.state){var r=this.state[n];if(r.name===e&&r.type===t)return r}}},{key:"splitFileNameStringAndNumber",value:function(e){for(var t=e.length-1;t>=0;t--)if(isNaN(Number(e[t])))return[e.slice(0,t+1),Number(e.slice(t+1))]}},{key:"createUniqueAssetName",value:function(e,t){for(var n=It(this.splitFileNameStringAndNumber(e),2),r=n[0],i=n[1],a=r+ ++i;this.findAsset(a,t);)a=r+ ++i;return a}},{key:"createTextureAsset",value:function(e,t){var n=e.data;if(n){var r=JSON.parse(n),i=[];if(r.SubTexture){for(var a in r.SubTexture){var o=r.SubTexture[a];if(o){var s={fileIds:[e.fileIds[0],t.fileIds[0]],id:this.getId(),type:x.SUB_TEXTURE,name:o.name,data:o};i.push(s)}}return{fileIds:[e.fileIds[0],t.fileIds[0]],id:e.id,type:x.SPRITE_SHEET,name:e.name,children:i}}}}},{key:"canCreateTextureAsset",value:function(e){switch(e.type){case x.PNG:var t=this.findAsset(e.name,x.JSON);if(t){var n=this.createTextureAsset(t,e);if(n)return[n,t]}break;case x.JSON:var r=this.findAsset(e.name,x.PNG);if(r){var i=this.createTextureAsset(e,r);if(i)return[i,r]}}return[void 0,void 0]}},{key:"mutations",get:function(){var e;return y(e={},b.TEST,(function(e,t){})),y(e,Y.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.assetMap;Object.assign(e,n)}})),y(e,R.ADD_ASSET,(function(e,t){e[t.id]=t})),y(e,R.DEL_ASSET,(function(e,t){delete e[t.id]})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},M.ADD_FILE,(function(e,n){var r=n,i=t.findAsset(r.name,r.type);if(i||r.type!==x.PNG&&r.type!==x.JSON||(i=t.findAsset(r.name,x.SPRITE_SHEET)),i)mf.warn("\u5e93\u91cc\u5b58\u5728\u76f8\u540c\u540d\u79f0\u7684\u8d44\u6e90\uff0c\u8bf7\u91cd\u65b0\u547d\u540d\u540e\u518d\u5bfc\u5165");else{var a=It(t.canCreateTextureAsset(r),2),o=a[0],s=a[1];o&&s&&(e.commit(R.DEL_ASSET,s),r=o);r.name;switch(r.type){case x.JPEG:case x.JPG:case x.PNG:case x.JSON:case x.SPRITE_SHEET:e.commit(R.ADD_ASSET,r)}}})),y(e,M.LOAD_DRAGON_BONES_DATA,(function(e,t){var n=e,r=e.rootState.editor.idGen+1,i=Hf.parseProjData(t,n.state,r);if(i){var a=i.armatures,o=i.animations;null!==o&&void 0!==o&&o.length&&e.commit(P.ADD_ANIMATIONS,o),null!==a&&void 0!==a&&a.length&&(e.commit(N.ADD_ARMATURES,{armatures:a}),e.commit(N.SELECT_ARMATURE,{armatureId:a[0].id}))}e.rootState.editor.idGen=Hf.maxId})),y(e,M.LOAD_DRAGON_BONES_JSON_DATA,(function(e,t){var n=e,r=e.rootState.editor.idGen+1,i=zf.parseJsonData(t.data,n.state,r);if(i){var a=i.armatures,o=i.animations;null!==o&&void 0!==o&&o.length&&e.commit(P.ADD_ANIMATIONS,o),null!==a&&void 0!==a&&a.length&&(e.commit(N.ADD_ARMATURES,{armatures:a}),e.commit(N.SELECT_ARMATURE,{armatureId:a[0].id}))}e.rootState.editor.idGen=zf.maxId})),e}}],[{key:"getAssetSize",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===x.JPEG||e.t0===x.PNG||e.t0===x.JPG?3:e.t0===x.SPRITE_SHEET?8:e.t0===x.SUB_TEXTURE?13:14;break;case 3:return r=t.fileIds[0],i=n.files[r],e.next=7,jf.getImageFileSize(i);case 7:case 12:return e.abrupt("return",e.sent);case 8:return a=t.fileIds[0],o=n.files[a],e.next=12,jf.getImageFileSize(o);case 13:return e.abrupt("return",Promise.resolve([t.data.width,t.data.height]));case 14:return e.abrupt("return",Promise.resolve([0,0]));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(Ff),Gf=function(e){return e[e.BestShortSideFit=0]="BestShortSideFit",e[e.BestLongSideFit=1]="BestLongSideFit",e[e.BestAreaFit=2]="BestAreaFit",e[e.BottomLeftRule=3]="BottomLeftRule",e[e.ContactPointRule=4]="ContactPointRule",e}({}),Wf=function(){function e(){l(this,e),this.binWidth=0,this.binHeight=0,this.allowRotations=!1,this.usedRectangles=[],this.freeRectangles=[],this.factory={x:0,y:0,width:0,height:0,isRotated:!1},this.score1=0,this.score2=0,this.bestShortSideFit=void 0,this.bestLongSideFit=void 0}return d(e,[{key:"setCanRotate",value:function(e){this.allowRotations=e}},{key:"init",value:function(e,t){this.count(e)%1!=0||this.count(t),this.binWidth=e,this.binHeight=t;var n=Pe({},this.factory);n.x=0,n.y=0,n.width=e,n.height=t,this.usedRectangles.length=0,this.freeRectangles.length=0,this.freeRectangles.push(n)}},{key:"count",value:function(e){return e>=2?this.count(e/2):e}},{key:"insert",value:function(e,t,n,r){var i=Pe({},this.factory);switch(this.score1=0,this.score2=0,r){case Gf.BestShortSideFit:i=this.findPositionForNewNodeBestShortSideFit(e,t,n);break;case Gf.BottomLeftRule:i=this.findPositionForNewNodeBottomLeft(e,t,this.score1,this.score2,n);break;case Gf.ContactPointRule:i=this.findPositionForNewNodeContactPoint(e,t,this.score1,n);break;case Gf.BestLongSideFit:i=this.findPositionForNewNodeBestLongSideFit(e,t,this.score2,this.score1,n);break;case Gf.BestAreaFit:i=this.findPositionForNewNodeBestAreaFit(e,t,this.score1,this.score2,n)}return 0==i.height||this.placeRectangle(i),i}},{key:"insertGroup",value:function(e,t){for(;e.length>0;){for(var n,r=Number.MAX_VALUE,i=Number.MAX_VALUE,a=-1,o=0;o<e.length;++o){var s=this.scoreRectangle(e[o].width,e[o].height,t,0,0,e[o].data);(0<r||0==r&&0<i)&&(r=0,i=0,n=s,a=o)}if(-1==a)return;this.placeRectangle(n),e.splice(a,1)}}},{key:"placeRectangle",value:function(e){for(var t=this.freeRectangles.length,n=0;n<t;n++)this.splitFreeNode(this.freeRectangles[n],e)&&(this.freeRectangles.splice(n,1),--n,--t);this.pruneFreeList(),this.usedRectangles.push(e)}},{key:"scoreRectangle",value:function(e,t,n,r,i,a){var o=Pe({},this.factory);switch(r=Number.MAX_VALUE,i=Number.MAX_VALUE,n){case Gf.BestShortSideFit:o=this.findPositionForNewNodeBestShortSideFit(e,t,a);break;case Gf.BottomLeftRule:o=this.findPositionForNewNodeBottomLeft(e,t,r,i,a);break;case Gf.ContactPointRule:o=this.findPositionForNewNodeContactPoint(e,t,r,a),r=-r;break;case Gf.BestLongSideFit:o=this.findPositionForNewNodeBestLongSideFit(e,t,i,r,a);break;case Gf.BestAreaFit:o=this.findPositionForNewNodeBestAreaFit(e,t,r,i,a)}return 0==o.height&&(r=Number.MAX_VALUE,i=Number.MAX_VALUE),o}},{key:"occupancy",value:function(){for(var e=0,t=0;t<this.usedRectangles.length;t++)e+=this.usedRectangles[t].width*this.usedRectangles[t].height;return e/(this.binWidth*this.binHeight)}},{key:"findPositionForNewNodeBottomLeft",value:function(e,t,n,r,i){var a,o,s=Pe({},this.factory);s.data=i,n=Number.MAX_VALUE;for(var l=0;l<this.freeRectangles.length;l++)(a=this.freeRectangles[l]).width>=e&&a.height>=t?((o=a.y+t)<n||o==n&&a.x<r)&&(s.x=a.x,s.y=a.y,s.width=e,s.height=t,s.data=i,n=o,r=a.x,s.isRotated=!1):this.allowRotations&&a.width>=t&&a.height>=e&&((o=a.y+e)<n||o==n&&a.x<r)&&(s.x=a.x,s.y=a.y,s.width=t,s.height=e,s.data=i,n=o,r=a.x,s.isRotated=!0);return s}},{key:"findPositionForNewNodeBestShortSideFit",value:function(e,t,n){var r,i,a,o,s,l=Pe({},this.factory);l.data=n,this.bestShortSideFit=Number.MAX_VALUE,this.bestLongSideFit=this.score2;for(var u=0;u<this.freeRectangles.length;u++){var c,h,d,f;(r=this.freeRectangles[u]).width>=e&&r.height>=t&&(i=Math.abs(r.width-e),a=Math.abs(r.height-t),o=Math.min(i,a),s=Math.max(i,a),(o<this.bestShortSideFit||o==this.bestShortSideFit&&s<this.bestLongSideFit)&&(l.x=r.x,l.y=r.y,l.width=e,l.height=t,l.data=n,l.isRotated=!1,this.bestShortSideFit=o,this.bestLongSideFit=s)),this.allowRotations&&r.width>=t&&r.height>=e&&(c=Math.abs(r.width-t),h=Math.abs(r.height-e),d=Math.min(c,h),f=Math.max(c,h),(d<this.bestShortSideFit||d==this.bestShortSideFit&&f<this.bestLongSideFit)&&(l.x=r.x,l.y=r.y,l.width=t,l.height=e,l.data=n,l.isRotated=!0,this.bestShortSideFit=d,this.bestLongSideFit=f))}return l}},{key:"findPositionForNewNodeBestLongSideFit",value:function(e,t,n,r,i){var a,o,s,l,u,c=Pe({},this.factory);c.data=i,this.bestLongSideFit=Number.MAX_VALUE;for(var h=0;h<this.freeRectangles.length;h++)(a=this.freeRectangles[h]).width>=e&&a.height>=t&&(o=Math.abs(a.width-e),s=Math.abs(a.height-t),l=Math.min(o,s),((u=Math.max(o,s))<this.bestLongSideFit||u==this.bestLongSideFit&&l<this.bestShortSideFit)&&(c.x=a.x,c.y=a.y,c.width=e,c.height=t,c.data=i,c.isRotated=!1,this.bestShortSideFit=l,this.bestLongSideFit=u)),this.allowRotations&&a.width>=t&&a.height>=e&&(o=Math.abs(a.width-t),s=Math.abs(a.height-e),l=Math.min(o,s),((u=Math.max(o,s))<this.bestLongSideFit||u==this.bestLongSideFit&&l<this.bestShortSideFit)&&(c.x=a.x,c.y=a.y,c.width=t,c.height=e,c.data=i,c.isRotated=!0,this.bestShortSideFit=l,this.bestLongSideFit=u));return c}},{key:"findPositionForNewNodeBestAreaFit",value:function(e,t,n,r,i){var a,o,s,l,u,c=Pe({},this.factory);c.data=i,n=Number.MAX_VALUE;for(var h=0;h<this.freeRectangles.length;h++)u=(a=this.freeRectangles[h]).width*a.height-e*t,a.width>=e&&a.height>=t&&(o=Math.abs(a.width-e),s=Math.abs(a.height-t),l=Math.min(o,s),(u<n||u==n&&l<this.bestShortSideFit)&&(c.x=a.x,c.y=a.y,c.width=e,c.height=t,c.data=i,c.isRotated=!1,this.bestShortSideFit=l,n=u)),this.allowRotations&&a.width>=t&&a.height>=e&&(o=Math.abs(a.width-t),s=Math.abs(a.height-e),l=Math.min(o,s),(u<n||u==n&&l<this.bestShortSideFit)&&(c.x=a.x,c.y=a.y,c.width=t,c.height=e,c.data=i,c.isRotated=!0,this.bestShortSideFit=l,n=u));return c}},{key:"commonIntervalLength",value:function(e,t,n,r){return t<n||r<e?0:Math.min(t,r)-Math.max(e,n)}},{key:"contactPointScoreNode",value:function(e,t,n,r){var i,a=0;0!=e&&e+n!=this.binWidth||(a+=r),0!=t&&t+r!=this.binHeight||(a+=n);for(var o=0;o<this.usedRectangles.length;o++)(i=this.usedRectangles[o]).x!=e+n&&i.x+i.width!=e||(a+=this.commonIntervalLength(i.y,i.y+i.height,t,t+r)),i.y!=t+r&&i.y+i.height!=t||(a+=this.commonIntervalLength(i.x,i.x+i.width,e,e+n));return a}},{key:"findPositionForNewNodeContactPoint",value:function(e,t,n,r){var i,a,o=Pe({},this.factory);o.data=r,n=-1;for(var s=0;s<this.freeRectangles.length;s++)(i=this.freeRectangles[s]).width>=e&&i.height>=t&&(a=this.contactPointScoreNode(i.x,i.y,e,t))>n&&(o.x=i.x,o.y=i.y,o.width=e,o.height=t,o.data=r,o.isRotated=!1,n=a),this.allowRotations&&i.width>=t&&i.height>=e&&(a=this.contactPointScoreNode(i.x,i.y,t,e))>n&&(o.x=i.x,o.y=i.y,o.width=t,o.height=e,o.data=r,o.isRotated=!0,n=a);return o}},{key:"splitFreeNode",value:function(e,t){return!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y)&&(t.x<e.x+e.width&&t.x+t.width>e.x&&(t.y>e.y&&t.y<e.y+e.height&&((n=Pe({},e)).height=t.y-n.y,this.freeRectangles.push(n)),t.y+t.height<e.y+e.height&&((n=Pe({},e)).y=t.y+t.height,n.height=e.y+e.height-(t.y+t.height),this.freeRectangles.push(n))),t.y<e.y+e.height&&t.y+t.height>e.y&&(t.x>e.x&&t.x<e.x+e.width&&((n=Pe({},e)).width=t.x-n.x,this.freeRectangles.push(n)),t.x+t.width<e.x+e.width&&((n=Pe({},e)).x=t.x+t.width,n.width=e.x+e.width-(t.x+t.width),this.freeRectangles.push(n))),!0);var n}},{key:"pruneFreeList",value:function(){for(var e=0;e<this.freeRectangles.length;e++)for(var t=e+1;t<this.freeRectangles.length;t++){if(this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])){this.freeRectangles.splice(e,1);break}this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])&&this.freeRectangles.splice(t,1)}}},{key:"isContainedIn",value:function(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}}]),e}(),Xf=function(e){return e.AREA="area",e.SIZE="size",e}({}),Yf=function(e){return e.SUCCESS="success",e.SHEET_TO_BIG="toBig",e.SHEET_EMPTY="sheetEmpty",e}({}),Kf=function(){function e(){l(this,e)}return d(e,null,[{key:"result",get:function(){return this._result.concat()}},{key:"results",get:function(){return this._results}},{key:"resultType",get:function(){return this._resultType}},{key:"resultSize",get:function(){return this._resultSize}},{key:"setMaxSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._maxWidth=e,this._maxHeight=t}},{key:"setSortOn",value:function(e){this.sortType=e}},{key:"setGap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._gapX=e,this._gapY=t}},{key:"setCanRotate",value:function(e){this.maxRectsCore.setCanRotate(e)}},{key:"setLayoutMath",value:function(e){this.layoutMath=e}},{key:"setFactoryInstance",value:function(e){this.maxRectsCore.factory=e}},{key:"insertRectangles",value:function(e){this._result=null,this._results=[];for(var t=[],n=0;n<e.length;n++)e[n].width>0&&e[n].height>0&&t.push(e[n]);if(t.length!=e.length)return this._resultType=Yf.SHEET_EMPTY,void this.log("\u6709\u56fe\u7684\u5c3a\u5bf8\u4e0d\u5bf9\uff0c\u5bbd\u548c\u9ad8\u90fd\u4e0d\u80fd\u4e3a\u96f6");if(this.log("\u52a0\u8f7d\u4e86:"+e.length+" \u4e2a\u56fe\u7247"),this._gapX>0||this._gapY>0)for(n=0;n<t.length;n++)t[n].width+=this._gapX,t[n].height+=this._gapY;for(this.log("\u95f4\u9699\u4e3a "+this._gapX+" "+this._gapY),this._maxW=0,this._maxH=0,this.area=0,n=0;n<t.length;n++)t[n].width>this._maxW&&(this._maxW=t[n].width),t[n].height>this._maxH&&(this._maxH=t[n].height),this.area+=t[n].width*t[n].height;for(this.log("maxW:"+this._maxW+" maxH:"+this._maxH+" this.area:"+this.area),this._w=1,this._h=1;Math.pow(2,this._w)<this._maxW;)this._w++;for(;Math.pow(2,this._h)<this._maxH;)this._h++;for(this.log("\u7b2c\u4e00\u6b21\u8fc7\u6ee4 \u5bbd\u5e42:"+this._w+" \u5bbd:"+Math.pow(2,this._w)+" \u9ad8\u5e42:"+this._h+" \u9ad8:"+Math.pow(2,this._h)),this._baseW=this._w,this._baseH=this._h;Math.pow(2,this._w)*Math.pow(2,this._h)<this.area;)this.calculateNext();if(this._baseW=this._w,this._baseH=this._h,this.log("\u7b2c\u4e8c\u6b21\u8fc7\u6ee4 \u5bbd\u5e42:"+this._w+" \u5bbd:"+Math.pow(2,this._w)+" \u9ad8\u5e42:"+this._h+" \u9ad8:"+Math.pow(2,this._h)),this.sortType==Xf.AREA){for(n=0;n<t.length;n++)for(var r=n;r<t.length;r++)if(t[n].height*t[n].width<t[r].height*t[r].width){var i=t[n];t[n]=t[r],t[r]=i}}else if(this.sortType==Xf.SIZE)if(this._maxW>this._maxH)for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].width<t[r].width&&(i=t[n],t[n]=t[r],t[r]=i);else for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].height<t[r].height&&(i=t[n],t[n]=t[r],t[r]=i);for(var a=!1,o=0,s=!1;!a;){var l=Math.pow(2,this._w),u=Math.pow(2,this._h),c=t.concat();this.log(o+"\u6b21\u8ba1\u7b97\uff0c\u5bbd:"+l+" \u9ad8:"+u+"     \u5bbd\u5e42:"+this._w+" \u9ad8\u5e42:"+this._h),this.maxRectsCore.init(l,u),this.maxRectsCore.insertGroup(c,this.layoutMath);var h=this.maxRectsCore.usedRectangles;a=!0;var d=!1;for(n=0;n<h.length;n++)if(0==h[n].x&&0==h[n].y&&0==h[n].width&&0==h[n].height){d=!0;break}d&&(this.calculateNext(),a=!1),o++,(l>this._maxWidth&&this._maxWidth>0||u>this._maxHeight&&this._maxHeight>0)&&(a=!0,s=!0)}if(s)return this._resultType=Yf.SHEET_TO_BIG,void this.log("\u56fe\u592a\u591a\u4e86\uff0c\u6700\u5927\u5c3a\u5bf8\u90fd\u4e0d\u591f");if(this.log("\u6210\u529f\u4e86\u6700\u7ec8\u5bbd\u5ea6:"+l+" \u6700\u7ec8\u9ad8\u5ea6:"+u),this._resultSize.x=l,this._resultSize.y=u,this._resultType=Yf.SUCCESS,this._result=this.maxRectsCore.usedRectangles,this._gapX>0||this._gapY>0)for(n=0;n<this._result.length;n++)this._result[n].width-=this._gapX,this._result[n].height-=this._gapY,this._result[n].x+=Math.ceil(this._gapX/2),this._result[n].y+=Math.ceil(this._gapY/2);this._results.push(this._result)}},{key:"calculateNext",value:function(){if(this._maxW>this._maxH){if(this._w==this._h)return this._h++,void(this._w=this._baseW);if(this._h>this._w+1)return void this._w++;if(this._h==this._w+1)return this._w=this._h,void(this._h=this._baseH);if(this._w>this._h+1)return void this._h++;if(this._w==this._h+1)return void(this._h=this._w)}else{if(this._h==this._w)return this._w++,void(this._h=this._baseH);if(this._w>this._h+1)return void this._h++;if(this._w==this._h+1)return this._h=this._w,void(this._w=this._baseW);if(this._h>this._w+1)return void this._w++;if(this._h==this._w+1)return void(this._w=this._h)}}},{key:"insertRectanglesToMult",value:function(e){this._result=null,this._results=[];for(var t=[],n=0;n<e.length;n++)e[n].width>0&&e[n].height>0&&t.push(e[n]);if(t.length!=e.length)return this._resultType=Yf.SHEET_EMPTY,void this.log("\u6709\u56fe\u7684\u5c3a\u5bf8\u4e0d\u5bf9\uff0c\u5bbd\u548c\u9ad8\u90fd\u4e0d\u80fd\u4e3a\u96f6");if(this.log("\u52a0\u8f7d\u4e86:"+e.length+" \u4e2a\u56fe\u7247"),this._gapX>0||this._gapY>0)for(n=0;n<t.length;n++)t[n].width+=this._gapX,t[n].height+=this._gapY;this.log("\u95f4\u9699\u4e3a "+this._gapX+" "+this._gapY),this._maxW=0,this._maxH=0;for(n=0;n<t.length;n++)t[n].width>this._maxW&&(this._maxW=t[n].width),t[n].height>this._maxH&&(this._maxH=t[n].height),this.area+=t[n].width*t[n].height;if(this.log("maxW:"+this._maxW+" maxH:"+this._maxH+" this.area:"+this.area),this._maxWidth<this._maxW||this._maxHeight<this._maxH)this._resultType=Yf.SHEET_TO_BIG;else{if(this.sortType==Xf.AREA){for(n=0;n<t.length;n++)for(var r=n;r<t.length;r++)if(t[n].height*t[n].width<t[r].height*t[r].width){var i=t[n];t[n]=t[r],t[r]=i}}else if(this.sortType==Xf.SIZE)if(this._maxW>this._maxH)for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].width<t[r].width&&(i=t[n],t[n]=t[r],t[r]=i);else for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].height<t[r].height&&(i=t[n],t[n]=t[r],t[r]=i);for(var a=!1,o=0,s=!1;!a;){var l=this._maxWidth,u=this._maxHeight,c=t.concat();this.log(o+"\u6b21\u8ba1\u7b97\uff0c\u5bbd:"+l+" \u9ad8:"+u+"     \u5bbd\u5e42:"+this._w+" \u9ad8\u5e42:"+this._h),this.maxRectsCore.init(l,u),this.maxRectsCore.insertGroup(c,this.layoutMath);var h=this.maxRectsCore.usedRectangles;t=[];var d=[];for(n=0;n<h.length;n++)0===h[n].x&&0===h[n].y&&0===h[n].width&&0===h[n].height?t.push(f(h[n].data)):d.push(h[n]);t.length<=0&&(a=!0),d.length<=0?(s=!0,a=!0):this._results.push(d),o++}if(s)return this._resultType=Yf.SHEET_TO_BIG,void this.log("\u56fe\u592a\u591a\u4e86\uff0c\u6700\u5927\u5c3a\u5bf8\u90fd\u4e0d\u591f");if(this.log("\u6210\u529f\u4e86\u6700\u7ec8\u5bbd\u5ea6:"+l+" \u6700\u7ec8\u9ad8\u5ea6:"+u),this._resultSize.x=l,this._resultSize.y=u,this._resultType=Yf.SUCCESS,this._gapX>0||this._gapY>0)for(n=0;n<this._results.length;n++)for(r=0;r<this._results[n].length;r++)this._results[n][r].x+=this._gapX,this._results[n][r].y+=this._gapY}function f(t){for(var n=0,r=e.length;n<r;n++)if(e[n].data==t)return e[n];return null}}},{key:"log",value:function(e){this.isLog}}]),e}();Kf.maxRectsCore=new Wf,Kf._maxWidth=-1,Kf._maxHeight=-1,Kf.isLog=!1,Kf._resultSize=void 0,Kf.sortType=Xf.AREA,Kf._gapX=0,Kf._gapY=0,Kf.layoutMath=Gf.BottomLeftRule,Kf._resultType="",Kf._result=void 0,Kf._results=[],Kf._w=1,Kf._h=1,Kf._maxW=0,Kf._maxH=0,Kf.area=0,Kf._baseW=1,Kf._baseH=1;var qf,$f=function(e){return e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e}($f||{}),Zf=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e}(Zf||{}),Qf=function(e){return e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e}(Qf||{}),Jf=function(e){return e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e}(Jf||{}),ep=function(e){return e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e}(ep||{}),tp=function(e){return e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e}(tp||{}),np=function(e){return e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e}(np||{}),rp=function(e){return e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e}(rp||{}),ip=function(e){return e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e}(ip||{}),ap=function(e){return e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e}(ap||{}),op=function(e){return e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e}(op||{}),sp=function(e){return e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e}(sp||{}),lp=function(e){return e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e}(lp||{}),up=function(e){return e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e}(up||{}),cp=function(e){return e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e}(cp||{}),hp=function(e){return e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e}(hp||{}),dp=function(e){return e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e}(dp||{}),fp=function(e){return e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e}(fp||{}),pp=function(e){return e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e}(pp||{}),vp=function(e){return e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e}(vp||{}),mp={createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},getCanvasRenderingContext2D:function(){return CanvasRenderingContext2D},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return null!==(e=document.baseURI)&&void 0!==e?e:window.location.href},getFontFaceSet:function(){return document.fonts},fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)})),parseXML:function(e){return(new DOMParser).parseFromString(e,"text/xml")}},gp={ADAPTER:mp,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},yp=/iPhone/i,bp=/iPod/i,_p=/iPad/i,xp=/\biOS-universal(?:.+)Mac\b/i,Ep=/\bAndroid(?:.+)Mobile\b/i,wp=/Android/i,Tp=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Sp=/Silk/i,kp=/Windows Phone/i,Cp=/\bWindows(?:.+)ARM\b/i,Ap=/BlackBerry/i,Ip=/BB10/i,Op=/Opera Mini/i,Pp=/\b(CriOS|Chrome)(?:.+)Mobile/i,Mp=/Mobile(?:.+)Firefox\b/i,Rp=function(e){return"undefined"!==typeof e&&"MacIntel"===e.platform&&"number"===typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"===typeof MSStream};function Np(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"===typeof navigator?"string"===typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),a={apple:{phone:i(yp)&&!i(kp),ipod:i(bp),tablet:!i(yp)&&(i(_p)||Rp(t))&&!i(kp),universal:i(xp),device:(i(yp)||i(bp)||i(_p)||i(xp)||Rp(t))&&!i(kp)},amazon:{phone:i(Tp),tablet:!i(Tp)&&i(Sp),device:i(Tp)||i(Sp)},android:{phone:!i(kp)&&i(Tp)||!i(kp)&&i(Ep),tablet:!i(kp)&&!i(Tp)&&!i(Ep)&&(i(Sp)||i(wp)),device:!i(kp)&&(i(Tp)||i(Sp)||i(Ep)||i(wp))||i(/\bokhttp\b/i)},windows:{phone:i(kp),tablet:i(Cp),device:i(kp)||i(Cp)},other:{blackberry:i(Ap),blackberry10:i(Ip),opera:i(Op),firefox:i(Mp),chrome:i(Pp),device:i(Ap)||i(Ip)||i(Op)||i(Mp)||i(Pp)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}var Dp=(null!==(qf=Np.default)&&void 0!==qf?qf:Np)(globalThis.navigator);gp.RETINA_PREFIX=/@([0-9\.]+)x/,gp.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Lp=n(548),Fp=n(6583),Bp=n(2770),Up={parse:Bp.Qc,format:Bp.WU,resolve:Bp.DB};function Hp(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(e)))}function jp(e){return e.split("?")[0].split("#")[0]}var zp,Vp={toPosix:function(e){return function(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)}(e,"\\","/")},isUrl:function(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:function(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol:function(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol:function(e){Hp(e),e=this.toPosix(e);var t="",n=/^file:\/\/\//.exec(e),r=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(n||r||i){var a=(null===n||void 0===n?void 0:n[0])||(null===r||void 0===r?void 0:r[0])||(null===i||void 0===i?void 0:i[0]);t=a,e=e.slice(a.length)}return t},toAbsolute:function(e,t,n){if(this.isDataUrl(e))return e;var r=jp(this.toPosix(null!==t&&void 0!==t?t:gp.ADAPTER.getBaseUrl())),i=jp(this.toPosix(null!==n&&void 0!==n?n:this.rootname(r)));return Hp(e),(e=this.toPosix(e)).startsWith("/")?Vp.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(r,e)},normalize:function(e){if(Hp(e=this.toPosix(e)),0===e.length)return".";var t="",n=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));var r=e.endsWith("/");return e=function(e,t){for(var n="",r=0,i=-1,a=0,o=-1,s=0;s<=e.length;++s){if(s<e.length)o=e.charCodeAt(s);else{if(47===o)break;o=47}if(47===o){if(i===s-1||1===a);else if(i!==s-1&&2===a){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",r=0):r=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=s,a=0;continue}}else if(2===n.length||1===n.length){n="",r=0,i=s,a=0;continue}t&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/".concat(e.slice(i+1,s)):n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else 46===o&&-1!==a?++a:a=-1}return n}(e,!1),e.length>0&&r&&(e+="/"),n?"/".concat(e):t+e},isAbsolute:function(e){return Hp(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=t<0||arguments.length<=t?void 0:arguments[t];if(Hp(n),n.length>0)if(void 0===e)e=n;else{var r,i=null!==(r=t-1<0||arguments.length<=t-1?void 0:arguments[t-1])&&void 0!==r?r:"";this.extname(i)?e+="/../".concat(n):e+="/".concat(n)}}return void 0===e?".":this.normalize(e)},dirname:function(e){if(Hp(e),0===e.length)return".";for(var t=(e=this.toPosix(e)).charCodeAt(0),n=47===t,r=-1,i=!0,a=this.getProtocol(e),o=e,s=(e=e.slice(a.length)).length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!i){r=s;break}}else i=!1;return-1===r?n?"/":this.isUrl(o)?a+e:a:n&&1===r?"//":a+e.slice(0,r)},rootname:function(e){Hp(e);var t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){var n=e.indexOf("/",t.length);(t=-1!==n?e.slice(0,n):e).endsWith("/")||(t+="/")}return t},basename:function(e,t){Hp(e),t&&Hp(t),e=jp(this.toPosix(e));var n,r=0,i=-1,a=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,s=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!a){r=n+1;break}}else-1===s&&(a=!1,s=n+1),o>=0&&(l===t.charCodeAt(o)?-1===--o&&(i=n):(o=-1,i=s))}return r===i?i=s:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!a){r=n+1;break}}else-1===i&&(a=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname:function(e){Hp(e);for(var t=-1,n=0,r=-1,i=!0,a=0,o=(e=jp(this.toPosix(e))).length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===r&&(i=!1,r=o+1),46===s?-1===t?t=o:1!==a&&(a=1):-1!==t&&(a=-1);else if(!i){n=o+1;break}}return-1===t||-1===r||0===a||1===a&&t===r-1&&t===n+1?"":e.slice(t,r)},parse:function(e){Hp(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=(e=jp(this.toPosix(e))).charCodeAt(0),i=this.isAbsolute(e);t.root=this.rootname(e),n=i||this.hasProtocol(e)?1:0;for(var a=-1,o=0,s=-1,l=!0,u=e.length-1,c=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===s&&(l=!1,s=u+1),46===r?-1===a?a=u:1!==c&&(c=1):-1!==a&&(c=-1);else if(!l){o=u+1;break}return-1===a||-1===s||0===c||1===c&&a===s-1&&a===o+1?-1!==s&&(t.base=t.name=0===o&&i?e.slice(1,s):e.slice(o,s)):(0===o&&i?(t.name=e.slice(1,a),t.base=e.slice(1,s)):(t.name=e.slice(o,a),t.base=e.slice(o,s)),t.ext=e.slice(a,s)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},Gp={};function Wp(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!Gp[t]){var r=(new Error).stack;"undefined"===typeof r||(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed),Gp[t]=!0}}function Xp(){Wp("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function Yp(){Wp("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}function Kp(){return"undefined"===typeof zp&&(zp=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:gp.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{var t,n;if(!gp.ADAPTER.getWebGLRenderingContext())return!1;var r=gp.ADAPTER.createCanvas(),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),a=!(null===(t=i)||void 0===t||null===(n=t.getContextAttributes())||void 0===n||!n.stencil);if(i){var o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,a}catch(Qp){return!1}}()),zp}var qp={grad:.9,turn:360,rad:360/(2*Math.PI)},$p=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Zp=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Qp=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Jp=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},ev=function(e){return{r:Qp(e.r,0,255),g:Qp(e.g,0,255),b:Qp(e.b,0,255),a:Qp(e.a)}},tv=function(e){return{r:Zp(e.r),g:Zp(e.g),b:Zp(e.b),a:Zp(e.a,3)}},nv=/^#([0-9a-f]{3,8})$/i,rv=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},iv=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=Math.max(t,n,r),o=a-Math.min(t,n,r),s=o?a===t?(n-r)/o:a===n?2+(r-t)/o:4+(t-n)/o:0;return{h:60*(s<0?s+6:s),s:a?o/a*100:0,v:a/255*100,a:i}},av=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var a=Math.floor(t),o=r*(1-n),s=r*(1-(t-a)*n),l=r*(1-(1-t+a)*n),u=a%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u],a:i}},ov=function(e){return{h:Jp(e.h),s:Qp(e.s,0,100),l:Qp(e.l,0,100),a:Qp(e.a)}},sv=function(e){return{h:Zp(e.h),s:Zp(e.s),l:Zp(e.l),a:Zp(e.a,3)}},lv=function(e){return av((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},uv=function(e){return{h:(t=iv(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},cv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,hv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,dv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,fv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,pv={string:[[function(e){var t=nv.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Zp(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Zp(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=dv.exec(e)||fv.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:ev({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=cv.exec(e)||hv.exec(e);if(!t)return null;var n,r,i=ov({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(qp[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return lv(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,a=void 0===i?1:i;return $p(t)&&$p(n)&&$p(r)?ev({r:Number(t),g:Number(n),b:Number(r),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,a=void 0===i?1:i;if(!$p(t)||!$p(n)||!$p(r))return null;var o=ov({h:Number(t),s:Number(n),l:Number(r),a:Number(a)});return lv(o)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,a=void 0===i?1:i;if(!$p(t)||!$p(n)||!$p(r))return null;var o=function(e){return{h:Jp(e.h),s:Qp(e.s,0,100),v:Qp(e.v,0,100),a:Qp(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(a)});return av(o)},"hsv"]]},vv=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},mv=function(e){return"string"==typeof e?vv(e.trim(),pv.string):"object"==typeof e&&null!==e?vv(e,pv.object):[null,void 0]},gv=function(e,t){var n=uv(e);return{h:n.h,s:Qp(n.s+100*t,0,100),l:n.l,a:n.a}},yv=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},bv=function(e,t){var n=uv(e);return{h:n.h,s:n.s,l:Qp(n.l+100*t,0,100),a:n.a}},_v=function(){function e(e){this.parsed=mv(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Zp(yv(this.rgba),2)},e.prototype.isDark=function(){return yv(this.rgba)<.5},e.prototype.isLight=function(){return yv(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=tv(this.rgba)).r,n=e.g,r=e.b,a=(i=e.a)<1?rv(Zp(255*i)):"","#"+rv(t)+rv(n)+rv(r)+a;var e,t,n,r,i,a},e.prototype.toRgb=function(){return tv(this.rgba)},e.prototype.toRgbString=function(){return t=(e=tv(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return sv(uv(this.rgba))},e.prototype.toHslString=function(){return t=(e=sv(uv(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=iv(this.rgba),{h:Zp(e.h),s:Zp(e.s),v:Zp(e.v),a:Zp(e.a,3)};var e},e.prototype.invert=function(){return xv({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),xv(gv(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),xv(gv(this.rgba,-e))},e.prototype.grayscale=function(){return xv(gv(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),xv(bv(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),xv(bv(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?xv({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Zp(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=uv(this.rgba);return"number"==typeof e?xv({h:e,s:t.s,l:t.l,a:t.a}):Zp(t.h)},e.prototype.isEqual=function(e){return this.toHex()===xv(e).toHex()},e}(),xv=function(e){return e instanceof _v?e:new _v(e)},Ev=[];!function(e){e.forEach((function(e){Ev.indexOf(e)<0&&(e(_v,pv),Ev.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var a={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,o,s=r[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!a.length)for(var h in n)a[h]=new e(n[h]).toRgb();for(var d in n){var f=(i=l,o=a[d],Math.pow(i.r-o.r,2)+Math.pow(i.g-o.g,2)+Math.pow(i.b-o.b,2));f<u&&(u=f,c=d)}return c}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);var wv=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;l(this,e),this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}return d(e,[{key:"red",get:function(){return this._components[0]}},{key:"green",get:function(){return this._components[1]}},{key:"blue",get:function(){return this._components[2]}},{key:"alpha",get:function(){return this._components[3]}},{key:"setValue",value:function(e){return this.value=e,this}},{key:"value",get:function(){return this._value},set:function(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");null!==this._value&&this.isSourceEqual(this._value,t)||(this.normalize(t),this._value=this.cloneSource(t))}}},{key:"cloneSource",value:function(e){return"string"===typeof e||"number"===typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"===typeof e&&null!==e?Pe({},e):e}},{key:"isSourceEqual",value:function(e,t){var n=typeof e;if(n!==typeof t)return!1;if("number"===n||"string"===n||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((function(e,n){return e===t[n]}));if(null!==e&&null!==t){var r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&r.every((function(n){return e[n]===t[n]}))}return e===t}},{key:"toRgba",value:function(){var e=It(this._components,4);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},{key:"toRgb",value:function(){var e=It(this._components,3);return{r:e[0],g:e[1],b:e[2]}}},{key:"toRgbaString",value:function(){var e=It(this.toUint8RgbArray(),3),t=e[0],n=e[1],r=e[2];return"rgba(".concat(t,",").concat(n,",").concat(r,",").concat(this.alpha,")")}},{key:"toUint8RgbArray",value:function(e){var t,n=It(this._components,3),r=n[0],i=n[1],a=n[2];return(e=null!==(t=e)&&void 0!==t?t:[])[0]=Math.round(255*r),e[1]=Math.round(255*i),e[2]=Math.round(255*a),e}},{key:"toRgbArray",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:[];var n=It(this._components,3),r=n[0],i=n[1],a=n[2];return e[0]=r,e[1]=i,e[2]=a,e}},{key:"toNumber",value:function(){return this._int}},{key:"toLittleEndianNumber",value:function(){var e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}},{key:"multiply",value:function(t){var n=It(e.temp.setValue(t)._components,4),r=n[0],i=n[1],a=n[2],o=n[3];return this._components[0]*=r,this._components[1]*=i,this._components[2]*=a,this._components[3]*=o,this.refreshInt(),this._value=null,this}},{key:"premultiply",value:function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}},{key:"toPremultiplied",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;var n=this._int>>16&255,r=this._int>>8&255,i=255&this._int;return t&&(n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(255*e<<24)+(n<<16)+(r<<8)+i}},{key:"toHex",value:function(){var e=this._int.toString(16);return"#".concat("000000".substring(0,6-e.length)+e)}},{key:"toHexa",value:function(){var e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}},{key:"setAlpha",value:function(e){return this._components[3]=this._clamp(e),this}},{key:"round",value:function(e){var t=It(this._components,3),n=t[0],r=t[1],i=t[2];return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}},{key:"toArray",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:[];var n=It(this._components,4),r=n[0],i=n[1],a=n[2],o=n[3];return e[0]=r,e[1]=i,e[2]=a,e[3]=o,e}},{key:"normalize",value:function(t){var n,r,i,a;if(("number"===typeof t||t instanceof Number)&&t>=0&&t<=16777215){n=(t>>16&255)/255,r=(t>>8&255)/255,i=(255&t)/255,a=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4){var o=It(t=this._clamp(t),4);n=o[0],r=o[1],i=o[2];var s=o[3];a=void 0===s?1:s}else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4){var l=It(t=this._clamp(t,0,255),4);n=l[0],r=l[1],i=l[2];var u=l[3];a=void 0===u?255:u,n/=255,r/=255,i/=255,a/=255}else if("string"===typeof t||"object"===typeof t){if("string"===typeof t){var c=e.HEX_PATTERN.exec(t);c&&(t="#".concat(c[2]))}var h=xv(t);if(h.isValid()){var d=h.rgba;n=d.r,r=d.g,i=d.b,a=d.a,n/=255,r/=255,i/=255}}if(void 0===n)throw new Error("Unable to convert color ".concat(t));this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=a,this.refreshInt()}},{key:"refreshInt",value:function(){this._clamp(this._components);var e=It(this._components,3),t=e[0],n=e[1],r=e[2];this._int=(255*t<<16)+(255*n<<8)+(255*r|0)}},{key:"_clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"===typeof e?Math.min(Math.max(e,t),n):(e.forEach((function(r,i){e[i]=Math.min(Math.max(r,t),n)})),e)}}]),e}(),Tv=wv;function Sv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Wp("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Tv.shared.setValue(e).toRgbArray(t)}function kv(e){return Wp("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Tv.shared.setValue(e).toHex()}function Cv(e){return Wp("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Tv.shared.setValue(e).toNumber()}function Av(e){return Wp("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Tv.shared.setValue(e).toNumber()}Tv.shared=new wv,Tv.temp=new wv,Tv.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var Iv=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[Jf.NORMAL_NPM]=Jf.NORMAL,e[Jf.ADD_NPM]=Jf.ADD,e[Jf.SCREEN_NPM]=Jf.SCREEN,t[Jf.NORMAL]=Jf.NORMAL_NPM,t[Jf.ADD]=Jf.ADD_NPM,t[Jf.SCREEN]=Jf.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function Ov(e,t){return Iv[t?1:0][e]}function Pv(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Wp("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Tv.shared.setValue(e).premultiply(t,r).toArray(null!==n&&void 0!==n?n:new Float32Array(4))}function Mv(e,t){return Wp("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Tv.shared.setValue(e).toPremultiplied(t)}function Rv(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Wp("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Tv.shared.setValue(e).premultiply(t,r).toArray(null!==n&&void 0!==n?n:new Float32Array(4))}var Nv=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Dv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got ".concat(t.length," and expected ").concat(n));for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function Lv(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var Fv={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function Bv(e,t){for(var n=0,r=0,i={},a=0;a<e.length;a++)r+=t[a],n+=e[a].length;for(var o=new ArrayBuffer(4*n),s=null,l=0,u=0;u<e.length;u++){var c=t[u],h=e[u],d=Lv(h);i[d]||(i[d]=new Fv[d](o)),s=i[d];for(var f=0;f<h.length;f++){s[(f/c|0)*r+l+f%c]=h[f]}l+=c}return new Float32Array(o)}function Uv(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function Hv(e){return!(e&e-1)&&!!e}function jv(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function zv(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var a=i-(n=t+n>i?i-t:n);for(r=t;r<a;++r)e[r]=e[r+n];e.length=a}}function Vv(e){return 0===e?0:e<0?-1:1}var Gv=0;function Wv(){return++Gv}var Xv=function(){function e(t,n,r,i){l(this,e),this.left=t,this.top=n,this.right=r,this.bottom=i}return d(e,[{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}},{key:"isEmpty",value:function(){return this.left===this.right||this.top===this.bottom}}]),e}(),Yv=Xv;Yv.EMPTY=new Xv(0,0,0,0);var Kv={},qv=Object.create(null),$v=Object.create(null);function Zv(){var e;for(e in qv)qv[e].destroy();for(e in $v)$v[e].destroy()}function Qv(){var e;for(e in qv)delete qv[e];for(e in $v)delete $v[e]}var Jv,em=function(){function e(t,n,r){l(this,e),this._canvas=gp.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||gp.RESOLUTION,this.resize(t,n)}return d(e,[{key:"clear",value:function(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"resize",value:function(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}},{key:"destroy",value:function(){this._context=null,this._canvas=null}},{key:"width",get:function(){return this._checkDestroyed(),this._canvas.width},set:function(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}},{key:"height",get:function(){return this._checkDestroyed(),this._canvas.height},set:function(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}},{key:"canvas",get:function(){return this._checkDestroyed(),this._canvas}},{key:"context",get:function(){return this._checkDestroyed(),this._context}},{key:"_checkDestroyed",value:function(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}]),e}();function tm(e,t,n){for(var r=0,i=4*n*t;r<t;++r,i+=4)if(0!==e[i+3])return!1;return!0}function nm(e,t,n,r,i){for(var a=4*t,o=r,s=r*a+4*n;o<=i;++o,s+=a)if(0!==e[s+3])return!1;return!0}function rm(e){var t=e.width,n=e.height,r=e.getContext("2d",{willReadFrequently:!0});if(null===r)throw new TypeError("Failed to get canvas 2D context");for(var i=r.getImageData(0,0,t,n).data,a=0,o=0,s=t-1,l=n-1;o<n&&tm(i,t,o);)++o;if(o===n)return Yv.EMPTY;for(;tm(i,t,l);)--l;for(;nm(i,t,a,o,l);)++a;for(;nm(i,t,s,o,l);)--s;return++s,++l,new Yv(a,o,s,l)}function im(e){var t=rm(e),n=t.width,r=t.height,i=null;if(!t.isEmpty()){var a=e.getContext("2d");if(null===a)throw new TypeError("Failed to get canvas 2D context");i=a.getImageData(t.left,t.top,n,r)}return{width:n,height:r,data:i}}function am(e){var t=Nv.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}function om(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis.location;if(e.startsWith("data:"))return"";t=t||globalThis.location,Jv||(Jv=document.createElement("a")),Jv.href=e;var n=Up.parse(Jv.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}function sm(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=null===(t=gp.RETINA_PREFIX)||void 0===t?void 0:t.exec(e);return r?parseFloat(r[1]):n}function lm(){return lm="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},lm.apply(this,arguments)}var um=function(e){return e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e}(um||{}),cm=function(e){if("function"===typeof e||"object"===typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e=Pe(Pe({},"object"!==typeof e.extension?{type:e.extension}:e.extension),{},{ref:e})}if("object"!==typeof e)throw new Error("Invalid extension type");return"string"===typeof(e=Pe({},e)).type&&(e.type=[e.type]),e},hm=function(e,t){var n;return null!==(n=cm(e).priority)&&void 0!==n?n:t},dm={_addHandlers:{},_removeHandlers:{},_queue:{},remove:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(cm).forEach((function(t){t.type.forEach((function(n){var r,i;return null===(r=(i=e._removeHandlers)[n])||void 0===r?void 0:r.call(i,t)}))})),this},add:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(cm).forEach((function(t){t.type.forEach((function(n){var r=e._addHandlers,i=e._queue;r[n]?r[n](t):(i[n]=i[n]||[],i[n].push(t))}))})),this},handle:function(e,t,n){var r=this._addHandlers,i=this._removeHandlers;if(r[e]||i[e])throw new Error("Extension type ".concat(e," already has a handler"));r[e]=t,i[e]=n;var a=this._queue;return a[e]&&(a[e].forEach((function(e){return t(e)})),delete a[e]),this},handleByMap:function(e,t){return this.handle(e,(function(e){t[e.name]=e.ref}),(function(e){delete t[e.name]}))},handleByList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(e,(function(e){t.includes(e.ref)||(t.push(e.ref),t.sort((function(e,t){return hm(t,n)-hm(e,n)})))}),(function(e){var n=t.indexOf(e.ref);-1!==n&&t.splice(n,1)}))}},fm=function(){function e(t){l(this,e),"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return d(e,[{key:"int8View",get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}},{key:"uint8View",get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}},{key:"int16View",get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}},{key:"uint16View",get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}},{key:"int32View",get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}},{key:"view",value:function(e){return this["".concat(e,"View")]}},{key:"destroy",value:function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}}],[{key:"sizeOf",value:function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(e," isn't a valid view type"))}}}]),e}(),pm=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function vm(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == ".concat(n,".0){}"));return t}function mm(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=pm.replace(/%forloop%/gi,vm(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}var gm=function(){function e(){l(this,e),this.data=0,this.blendMode=Jf.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return d(e,[{key:"blend",get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)}},{key:"offsets",get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)}},{key:"culling",get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)}},{key:"depthTest",get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)}},{key:"depthMask",get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)}},{key:"clockwiseFrontFace",get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)}},{key:"blendMode",get:function(){return this._blendMode},set:function(e){this.blend=e!==Jf.NONE,this._blendMode=e}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e}},{key:"toString",value:function(){return"[@pixi/core:State blendMode=".concat(this.blendMode," clockwiseFrontFace=").concat(this.clockwiseFrontFace," culling=").concat(this.culling," depthMask=").concat(this.depthMask," polygonOffset=").concat(this.polygonOffset,"]")}}],[{key:"for2d",value:function(){var t=new e;return t.depthTest=!1,t.blend=!0,t}}]),e}(),ym=[];function bm(e,t){if(!e)return null;var n="";if("string"===typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=ym.length-1;i>=0;--i){var a=ym[i];if(a.test&&a.test(e,n))return new a(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var _m=function(){function e(t){l(this,e),this.items=[],this._name=t,this._aliasCount=0}return d(e,[{key:"emit",value:function(e,t,n,r,i,a,o,s){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,u=this.items;this._aliasCount++;for(var c=0,h=u.length;c<h;c++)u[c][l](e,t,n,r,i,a,o,s);return u===this.items&&this._aliasCount--,this}},{key:"ensureNonAliasedItems",value:function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}},{key:"add",value:function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}},{key:"remove",value:function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}},{key:"contains",value:function(e){return this.items.includes(e)}},{key:"removeAll",value:function(){return this.ensureNonAliasedItems(),this.items.length=0,this}},{key:"destroy",value:function(){this.removeAll(),this.items=null,this._name=null}},{key:"empty",get:function(){return 0===this.items.length}},{key:"name",get:function(){return this._name}}]),e}();Object.defineProperties(_m.prototype,{dispatch:{value:_m.prototype.emit},run:{value:_m.prototype.emit}});var xm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l(this,e),this._width=t,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new _m("setRealSize"),this.onUpdate=new _m("update"),this.onError=new _m("onError")}return d(e,[{key:"bind",value:function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}},{key:"unbind",value:function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}},{key:"resize",value:function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))}},{key:"valid",get:function(){return!!this._width&&!!this._height}},{key:"update",value:function(){this.destroyed||this.onUpdate.emit()}},{key:"load",value:function(){return Promise.resolve(this)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"style",value:function(e,t,n){return!1}},{key:"dispose",value:function(){}},{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}}],[{key:"test",value:function(e,t){return!1}}]),e}(),Em=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a=r||{},o=a.width,s=a.height;if(!o||!s)throw new Error("BufferResource width or height invalid");return(i=t.call(this,o,s)).data=e,i}return d(n,[{key:"upload",value:function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lp.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0}},{key:"dispose",value:function(){this.data=null}}],[{key:"test",value:function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}]),n}(xm),wm={scaleMode:ap.NEAREST,format:tp.RGBA,alphaMode:lp.NPM},Tm=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;l(this,n),e=t.call(this);var a=i=Object.assign({},n.defaultOptions,i),o=a.alphaMode,s=a.mipmap,u=a.anisotropicLevel,c=a.scaleMode,h=a.width,d=a.height,f=a.wrapMode,p=a.format,v=a.type,m=a.target,g=a.resolution,y=a.resourceOptions;return!r||r instanceof xm||((r=bm(r,y)).internal=!0),e.resolution=g||gp.RESOLUTION,e.width=Math.round((h||0)*e.resolution)/e.resolution,e.height=Math.round((d||0)*e.resolution)/e.resolution,e._mipmap=s,e.anisotropicLevel=u,e._wrapMode=f,e._scaleMode=c,e.format=p,e.type=v,e.target=m,e.alphaMode=o,e.uid=Wv(),e.touched=0,e.isPowerOfTwo=!1,e._refreshPOT(),e._glTextures={},e.dirtyId=0,e.dirtyStyleId=0,e.cacheId=null,e.valid=h>0&&d>0,e.textureCacheIds=[],e.destroyed=!1,e.resource=null,e._batchEnabled=0,e._batchLocation=0,e.parentTextureArray=null,e.setResource(r),e}return d(n,[{key:"realWidth",get:function(){return Math.round(this.width*this.resolution)}},{key:"realHeight",get:function(){return Math.round(this.height*this.resolution)}},{key:"mipmap",get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}},{key:"setStyle",value:function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}},{key:"setSize",value:function(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}},{key:"setRealSize",value:function(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}},{key:"_refreshPOT",value:function(){this.isPowerOfTwo=Hv(this.realWidth)&&Hv(this.realHeight)}},{key:"setResolution",value:function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}},{key:"setResource",value:function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}},{key:"update",value:function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}},{key:"onError",value:function(e){this.emit("error",this,e)}},{key:"destroy",value:function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete $v[this.cacheId],delete qv[this.cacheId],this.cacheId=null),this.dispose(),n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}},{key:"dispose",value:function(){this.emit("dispose",this)}},{key:"castToBaseTexture",value:function(){return this}}],[{key:"from",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gp.STRICT_TEXTURE_CACHE,i="string"===typeof e,a=null;if(i)a=e;else{if(!e._pixiId){var o=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(o,"_").concat(Wv())}a=e._pixiId}var s=$v[a];if(i&&r&&!s)throw new Error('The cacheId "'.concat(a,'" does not exist in BaseTextureCache.'));return s||((s=new n(e,t)).cacheId=a,n.addToCache(s,a)),s}},{key:"fromBuffer",value:function(e,t,r,i){e=e||new Float32Array(t*r*4);var a=new Em(e,{width:t,height:r}),o=e instanceof Float32Array?rp.FLOAT:rp.UNSIGNED_BYTE;return new n(a,Object.assign({},wm,{type:o},i))}},{key:"addToCache",value:function(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),$v[t]&&$v[t],$v[t]=e)}},{key:"removeFromCache",value:function(e){if("string"===typeof e){var t=$v[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete $v[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete $v[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}}]),n}(Lp),Sm=Tm;Sm.defaultOptions={mipmap:sp.POW2,anisotropicLevel:0,scaleMode:ap.LINEAR,wrapMode:op.CLAMP,alphaMode:lp.UNPACK,target:np.TEXTURE_2D,format:tp.RGBA,type:rp.UNSIGNED_BYTE},Sm._globalBatch=0;var km=d((function e(){l(this,e),this.texArray=null,this.blend=0,this.type=ep.TRIANGLES,this.start=0,this.size=0,this.data=null})),Cm=0,Am=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,e),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=Cm++,this.disposeRunner=new _m("disposeBuffer")}return d(e,[{key:"update",value:function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroy",value:function(){this.dispose(),this.data=null}},{key:"index",get:function(){return this.type===vp.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?vp.ELEMENT_ARRAY_BUFFER:vp.ARRAY_BUFFER}}],[{key:"from",value:function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)}}]),e}(),Im=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rp.FLOAT,a=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;l(this,e),this.buffer=t,this.size=n,this.normalized=r,this.type=i,this.stride=a,this.start=o,this.instance=s,this.divisor=u}return d(e,[{key:"destroy",value:function(){this.buffer=null}}],[{key:"from",value:function(t,n,r,i,a){return new e(t,n,r,i,a)}}]),e}(),Om={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var Pm={5126:4,5123:2,5121:1},Mm=0,Rm={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},Nm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e),this.buffers=t,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=Mm++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new _m("disposeGeometry"),this.refCount=0}return d(e,[{key:"addAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof Am||(t instanceof Array&&(t=new Float32Array(t)),t=new Am(t));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,n,r,i);return this}var c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new Im(c,n,r,i,a,o,s),this.instanced=this.instanced||s,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"getBuffer",value:function(e){return this.buffers[this.getAttribute(e).buffer]}},{key:"addIndex",value:function(e){return e instanceof Am||(e instanceof Array&&(e=new Uint16Array(e)),e=new Am(e)),e.type=vp.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}},{key:"getIndex",value:function(){return this.indexBuffer}},{key:"interleave",value:function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new Am;for(e in this.attributes){var i=this.attributes[e],a=this.buffers[i.buffer];t.push(a.data),n.push(i.size*Pm[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},a=0;a<e.length;a++)r+=t[a],n+=e[a].length;for(var o=new ArrayBuffer(4*n),s=null,l=0,u=0;u<e.length;u++){var c=t[u],h=e[u],d=Lv(h);i[d]||(i[d]=new Om[d](o)),s=i[d];for(var f=0;f<h.length;f++)s[(f/c|0)*r+l+f%c]=h[f];l+=c}return new Float32Array(o)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}},{key:"getSize",value:function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroy",value:function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}},{key:"clone",value:function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new Am(this.buffers[n].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new Im(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=vp.ELEMENT_ARRAY_BUFFER),t}}],[{key:"merge",value:function(t){for(var n,r=new e,i=[],a=[],o=[],s=0;s<t.length;s++){n=t[s];for(var l=0;l<n.buffers.length;l++)a[l]=a[l]||0,a[l]+=n.buffers[l].data.length,o[l]=0}for(var u=0;u<n.buffers.length;u++)i[u]=new(Rm[Lv(n.buffers[u].data)])(a[u]),r.buffers[u]=new Am(i[u]);for(var c=0;c<t.length;c++){n=t[c];for(var h=0;h<n.buffers.length;h++)i[h].set(n.buffers[h].data,o[h]),o[h]+=n.buffers[h].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=vp.ELEMENT_ARRAY_BUFFER;for(var d=0,f=0,p=0,v=0,m=0;m<n.buffers.length;m++)if(n.buffers[m]!==n.indexBuffer){v=m;break}for(var g in n.attributes){var y=n.attributes[g];(0|y.buffer)===v&&(f+=y.size*Pm[y.type]/4)}for(var b=0;b<t.length;b++){for(var _=t[b].indexBuffer.data,x=0;x<_.length;x++)r.indexBuffer.data[x+p]+=d;d+=t[b].buffers[v].data.length/f,p+=_.length}}return r}}]),e}(),Dm=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l(this,n),(e=t.call(this))._buffer=new Am(null,r,!1),e._indexBuffer=new Am(null,r,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,rp.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,rp.FLOAT).addAttribute("aColor",e._buffer,4,!0,rp.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,rp.FLOAT).addIndex(e._indexBuffer),e}return d(n)}(Nm),Lm=2*Math.PI,Fm=180/Math.PI,Bm=Math.PI/180,Um=function(e){return e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e}(Um||{}),Hm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;l(this,e),this.x=0,this.y=0,this.x=t,this.y=n}return d(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copyFrom",value:function(e){return this.set(e.x,e.y),this}},{key:"copyTo",value:function(e){return e.set(this.x,this.y),e}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x=e,this.y=t,this}},{key:"toString",value:function(){return"[@pixi/math:Point x=".concat(this.x," y=").concat(this.y,"]")}}]),e}(),jm=[new Hm,new Hm,new Hm,new Hm],zm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;l(this,e),this.x=Number(t),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=Um.RECT}return d(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}},{key:"contains",value:function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}},{key:"intersects",value:function(e,t){if(!t){var n=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=n)return!1;var r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}var i=this.left,a=this.right,o=this.top,s=this.bottom;if(a<=i||s<=o)return!1;var l=jm[0].set(e.left,e.top),u=jm[1].set(e.left,e.bottom),c=jm[2].set(e.right,e.top),h=jm[3].set(e.right,e.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var d=Math.sign(t.a*t.d-t.b*t.c);if(0===d)return!1;if(t.apply(l,l),t.apply(u,u),t.apply(c,c),t.apply(h,h),Math.max(l.x,u.x,c.x,h.x)<=i||Math.min(l.x,u.x,c.x,h.x)>=a||Math.max(l.y,u.y,c.y,h.y)<=o||Math.min(l.y,u.y,c.y,h.y)>=s)return!1;var f=d*(u.y-l.y),p=d*(l.x-u.x),v=f*i+p*o,m=f*a+p*o,g=f*i+p*s,y=f*a+p*s;if(Math.max(v,m,g,y)<=f*l.x+p*l.y||Math.min(v,m,g,y)>=f*h.x+p*h.y)return!1;var b=d*(l.y-c.y),_=d*(c.x-l.x),x=b*i+_*o,E=b*a+_*o,w=b*i+_*s,T=b*a+_*s;return!(Math.max(x,E,w,T)<=b*l.x+_*l.y||Math.min(x,E,w,T)>=b*h.x+_*h.y)}},{key:"pad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}},{key:"fit",value:function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this}},{key:"ceil",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}},{key:"enlarge",value:function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this}},{key:"toString",value:function(){return"[@pixi/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}(),Vm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l(this,e),this.x=t,this.y=n,this.radius=r,this.type=Um.CIRC}return d(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.radius)}},{key:"contains",value:function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n}},{key:"getBounds",value:function(){return new zm(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{key:"toString",value:function(){return"[@pixi/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]")}}]),e}(),Gm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;l(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.type=Um.ELIP}return d(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1}},{key:"getBounds",value:function(){return new zm(this.x-this.width,this.y-this.height,this.width,this.height)}},{key:"toString",value:function(){return"[@pixi/math:Ellipse x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}]),e}(),Wm=function(){function e(){l(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Array.isArray(n[0])?n[0]:n;if("number"!==typeof i[0]){for(var a=[],o=0,s=i.length;o<s;o++)a.push(i[o].x,i[o].y);i=a}this.points=i,this.type=Um.POLY,this.closeStroke=!0}return d(e,[{key:"clone",value:function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t}},{key:"contains",value:function(e,t){for(var n=!1,r=this.points.length/2,i=0,a=r-1;i<r;a=i++){var o=this.points[2*i],s=this.points[2*i+1],l=this.points[2*a],u=this.points[2*a+1];s>t!==u>t&&e<(t-s)/(u-s)*(l-o)+o&&(n=!n)}return n}},{key:"toString",value:function(){return"[@pixi/math:PolygoncloseStroke=".concat(this.closeStroke,"points=").concat(this.points.reduce((function(e,t){return"".concat(e,", ").concat(t)}),""),"]")}}]),e}(),Xm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;l(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.radius=a,this.type=Um.RREC}return d(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height,this.radius)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var r=e-(this.x+n),i=t-(this.y+n),a=n*n;if(r*r+i*i<=a)return!0;if((r=e-(this.x+this.width-n))*r+i*i<=a)return!0;if(r*r+(i=t-(this.y+this.height-n))*i<=a)return!0;if((r=e-(this.x+n))*r+i*i<=a)return!0}return!1}},{key:"toString",value:function(){return"[@pixi/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]")}}]),e}(),Ym=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;l(this,e),this.array=null,this.a=t,this.b=n,this.c=r,this.d=i,this.tx=a,this.ty=o}return d(e,[{key:"fromArray",value:function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}},{key:"set",value:function(e,t,n,r,i,a){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=a,this}},{key:"toArray",value:function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}},{key:"apply",value:function(e,t){t=t||new Hm;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}},{key:"applyInverse",value:function(e,t){t=t||new Hm;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t}},{key:"translate",value:function(e,t){return this.tx+=e,this.ty+=t,this}},{key:"scale",value:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,a=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=a*t-this.ty*n,this.ty=a*n+this.ty*t,this}},{key:"append",value:function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}},{key:"setTransform",value:function(e,t,n,r,i,a,o,s,l){return this.a=Math.cos(o+l)*i,this.b=Math.sin(o+l)*i,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}},{key:"prepend",value:function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}},{key:"decompose",value:function(e){var t=this.a,n=this.b,r=this.c,i=this.d,a=e.pivot,o=-Math.atan2(-r,i),s=Math.atan2(n,t),l=Math.abs(o+s);return l<1e-5||Math.abs(Lm-l)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=o,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(a.x*t+a.y*r),e.position.y=this.ty+(a.x*n+a.y*i),e}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,a=e*r-t*n;return this.a=r/a,this.b=-t/a,this.c=-n/a,this.d=e/a,this.tx=(n*this.ty-r*i)/a,this.ty=-(e*this.ty-t*i)/a,this}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"clone",value:function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}},{key:"copyTo",value:function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copyFrom",value:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},{key:"toString",value:function(){return"[@pixi/math:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]")}}],[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}(),Km=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],qm=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],$m=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Zm=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Qm=[],Jm=[],eg=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];Qm.push(t);for(var n=0;n<16;n++)for(var r=eg(Km[e]*Km[n]+$m[e]*qm[n]),i=eg(qm[e]*Km[n]+Zm[e]*qm[n]),a=eg(Km[e]*$m[n]+$m[e]*Zm[n]),o=eg(qm[e]*$m[n]+Zm[e]*Zm[n]),s=0;s<16;s++)if(Km[s]===r&&qm[s]===i&&$m[s]===a&&Zm[s]===o){t.push(s);break}}for(var l=0;l<16;l++){var u=new Ym;u.set(Km[l],qm[l],$m[l],Zm[l],0,0),Jm.push(u)}}();var tg={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Km[e]},uY:function(e){return qm[e]},vX:function(e){return $m[e]},vY:function(e){return Zm[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return Qm[e][t]},sub:function(e,t){return Qm[e][tg.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2===(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?tg.S:tg.N:2*Math.abs(t)<=Math.abs(e)?e>0?tg.E:tg.W:t>0?e>0?tg.SE:tg.SW:e>0?tg.NE:tg.NW},matrixAppendRotationInv:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Jm[tg.inv(t)];i.tx=n,i.ty=r,e.append(i)}},ng=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;l(this,e),this._x=r,this._y=i,this.cb=t,this.scope=n}return d(e,[{key:"clone",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cb,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scope,this._x,this._y)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this}},{key:"copyFrom",value:function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}},{key:"copyTo",value:function(e){return e.set(this._x,this._y),e}},{key:"equals",value:function(e){return e.x===this._x&&e.y===this._y}},{key:"toString",value:function(){return"[@pixi/math:ObservablePoint x=".concat(0," y=",0," scope=",this.scope,"]")}},{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}(),rg=function(){function e(){l(this,e),this.worldTransform=new Ym,this.localTransform=new Ym,this.position=new ng(this.onChange,this,0,0),this.scale=new ng(this.onChange,this,1,1),this.pivot=new ng(this.onChange,this,0,0),this.skew=new ng(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return d(e,[{key:"onChange",value:function(){this._localID++}},{key:"updateSkew",value:function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}},{key:"toString",value:function(){return"[@pixi/math:Transform position=(".concat(this.position.x,", ").concat(this.position.y,") rotation=").concat(this.rotation," scale=(").concat(this.scale.x,", ").concat(this.scale.y,") skew=(").concat(this.skew.x,", ").concat(this.skew.y,") ]")}},{key:"updateLocalTransform",value:function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}},{key:"updateTransform",value:function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}}},{key:"setFromMatrix",value:function(e){e.decompose(this),this._localID++}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),e}(),ig=rg;ig.IDENTITY=new rg;var ag=[{test:function(e){return"float"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n            if(uv["'.concat(e,'"] !== ud["').concat(e,'"].value)\n            {\n                ud["').concat(e,'"].value = uv["').concat(e,'"]\n                gl.uniform1f(ud["').concat(e,'"].location, uv["').concat(e,'"])\n            }\n            ')}},{test:function(e,t){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray&&(null==t||void 0!==t.castToBaseTexture)},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'.concat(e,'"], t);\n\n            if(ud["').concat(e,'"].value !== t)\n            {\n                ud["').concat(e,'"].value = t;\n                gl.uniform1i(ud["').concat(e,'"].location, t);\n; // eslint-disable-line max-len\n            }')}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'.concat(e,'"].location, false, uv["').concat(e,'"].toArray(true));\n            ')},codeUbo:function(e){return"\n                var ".concat(e,"_matrix = uv.").concat(e,".toArray(true);\n\n                data[offset] = ").concat(e,"_matrix[0];\n                data[offset+1] = ").concat(e,"_matrix[1];\n                data[offset+2] = ").concat(e,"_matrix[2];\n        \n                data[offset + 4] = ").concat(e,"_matrix[3];\n                data[offset + 5] = ").concat(e,"_matrix[4];\n                data[offset + 6] = ").concat(e,"_matrix[5];\n        \n                data[offset + 8] = ").concat(e,"_matrix[6];\n                data[offset + 9] = ").concat(e,"_matrix[7];\n                data[offset + 10] = ").concat(e,"_matrix[8];\n            ")}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["').concat(e,'"].location, v.x, v.y);\n                }')},codeUbo:function(e){return"\n                v = uv.".concat(e,";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            ")}},{test:function(e){return"vec2"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["').concat(e,'"].location, v[0], v[1]);\n                }\n            ')}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.x, v.y, v.width, v.height)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                ")}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.red, v.green, v.blue, v.alpha)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                ")}},{test:function(e,t){return"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["').concat(e,'"].location, v.red, v.green, v.blue)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                ")}},{test:function(e){return"vec4"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["').concat(e,'"].location, v[0], v[1], v[2], v[3])\n                }')}}],og={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},sg={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var lg,ug={},cg=ug;function hg(){var e;if(cg===ug||null!==(e=cg)&&void 0!==e&&e.isContextLost()){var t,n=gp.ADAPTER.createCanvas();gp.PREFER_ENV>=$f.WEBGL2&&(t=n.getContext("webgl2",{})),t||((t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),cg=t}return cg}var dg={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function fg(e){return dg[e]}var pg=null,vg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mg(e,t){if(!pg){var n=Object.keys(vg);pg={};for(var r=0;r<n.length;++r){var i=n[r];pg[e[i]]=vg[i]}}return pg[t]}function gg(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===hp.HIGH&&n!==hp.HIGH&&(r=hp.MEDIUM),"precision ".concat(r," float;\n").concat(e)}return n!==hp.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var yg=0,bg={},_g=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pixi-shader",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};l(this,e),this.extra={},this.id=yg++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),bg[r]?(bg[r]++,r+="-".concat(bg[r])):bg[r]=1,this.vertexSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.vertexSrc),this.fragmentSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.fragmentSrc),this.vertexSrc=gg(this.vertexSrc,e.defaultVertexPrecision,hp.HIGH),this.fragmentSrc=gg(this.fragmentSrc,e.defaultFragmentPrecision,function(){if(!lg){lg=hp.MEDIUM;var e=hg();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);lg=t.precision?hp.HIGH:hp.MEDIUM}}return lg}())),this.glPrograms={},this.syncUniforms=null}return d(e,null,[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}},{key:"from",value:function(t,n,r){var i=t+n,a=Kv[i];return a||(Kv[i]=a=new e(t,n,r)),a}}]),e}(),xg=_g;xg.defaultVertexPrecision=hp.HIGH,xg.defaultFragmentPrecision=Dp.apple.device?hp.HIGH:hp.MEDIUM;var Eg=0,wg=function(){function e(t,n,r){l(this,e),this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Eg++,this.static=!!n,this.ubo=!!r,t instanceof Am?(this.buffer=t,this.buffer.type=vp.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new Am(new Float32Array(1)),this.buffer.type=vp.UNIFORM_BUFFER,this.autoManage=!0))}return d(e,[{key:"update",value:function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}},{key:"add",value:function(t,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(n,r)}}],[{key:"from",value:function(t,n,r){return new e(t,n,r)}},{key:"uboFrom",value:function(t,n){return new e(t,null===n||void 0===n||n,!0)}}]),e}(),Tg=function(){function e(t,n){l(this,e),this.uniformBindCount=0,this.program=t,this.uniformGroup=n?n instanceof wg?n:new wg(n):new wg({}),this.disposeRunner=new _m("disposeShader")}return d(e,[{key:"checkUniformExists",value:function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}},{key:"destroy",value:function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}},{key:"uniforms",get:function(){return this.uniformGroup.uniforms}}],[{key:"from",value:function(t,n,r){return new e(xg.from(t,n),r)}}]),e}(),Sg=function(){function e(t,n){if(l(this,e),this.vertexSrc=t,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}return d(e,[{key:"generateShader",value:function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=wg.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,"".concat(e))).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new xg(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ym,default:this.defaultGroupCache[e]};return new Tg(this.programCache[e],i)}},{key:"generateSampleSrc",value:function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < ".concat(n,".5)")),t+="\n{",t+="\n\tcolor = texture2D(uSamplers[".concat(n,"], vTextureCoord);"),t+="\n}";return t+="\n",t+="\n"}}]),e}(),kg=function(){function e(){l(this,e),this.elements=[],this.ids=[],this.count=0}return d(e,[{key:"clear",value:function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}]),e}();var Cg=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"flush",value:function(){}},{key:"destroy",value:function(){this.renderer=null}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"render",value:function(e){}}]),e}(),Ag=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).setShaderGenerator(),r.geometryClass=Dm,r.vertexSize=6,r.state=gm.for2d(),r.size=4*n.defaultBatchSize,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.maxTextures=1,r.renderer.on("prerender",r.onPrerender,m(r)),e.runners.contextChange.add(m(r)),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return d(n,[{key:"MAX_TEXTURES",get:function(){return Wp("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}},{key:"setShaderGenerator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertex,r=void 0===t?n.defaultVertexSrc:t,i=e.fragment,a=void 0===i?n.defaultFragmentTemplate:i;this.shaderGenerator=new Sg(r,a)}},{key:"contextChange",value:function(){var e=this.renderer.gl;gp.PREFER_ENV===$f.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),n.defaultMaxTextures),this.maxTextures=mm(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}},{key:"initFlushBuffers",value:function(){for(var e=n._drawCallPool,t=n._textureArrayPool,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;e.length<r;)e.push(new km);for(;t.length<i;)t.push(new kg);for(var a=0;a<this.maxTextures;a++)this._tempBoundTextures[a]=null}},{key:"onPrerender",value:function(){this._flushId=0}},{key:"render",value:function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}},{key:"buildTexturesAndDrawCalls",value:function(){var e=this._bufferedTextures,t=this.maxTextures,r=n._textureArrayPool,i=this.renderer.batch,a=this._tempBoundTextures,o=this.renderer.textureGC.count,s=++Sm._globalBatch,l=0,u=r[0],c=0;i.copyBoundTextures(a,t);for(var h=0;h<this._bufferSize;++h){var d=e[h];e[h]=null,d._batchEnabled!==s&&(u.count>=t&&(i.boundArray(u,a,s,t),this.buildDrawCalls(u,c,h),c=h,u=r[++l],++s),d._batchEnabled=s,d.touched=o,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,a,s,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++s);for(var f=0;f<a.length;f++)a[f]=null;Sm._globalBatch=s}},{key:"buildDrawCalls",value:function(e,t,r){var i=this._bufferedElements,a=this._attributeBuffer,o=this._indexBuffer,s=this.vertexSize,l=n._drawCallPool,u=this._dcIndex,c=this._aIndex,h=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(var f=t;f<r;++f){var p=i[f],v=p._texture.baseTexture,m=Iv[v.alphaMode?1:0][p.blendMode];i[f]=null,t<f&&d.blend!==m&&(d.size=h-d.start,t=f,(d=l[++u]).texArray=e,d.start=h),this.packInterleavedGeometry(p,a,o,c,h),c+=p.vertexData.length/2*s,h+=p.indices.length,d.blend=m}t<r&&(d.size=h-d.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=h}},{key:"bindAndClearTexArray",value:function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}},{key:"updateGeometry",value:function(){var e=this._packedGeometries,t=this._attributeBuffer,r=this._indexBuffer;n.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}},{key:"drawBatches",value:function(){for(var e=this._dcIndex,t=this.renderer,r=t.gl,i=t.state,a=n._drawCallPool,o=null,s=0;s<e;s++){var l=a[s],u=l.texArray,c=l.type,h=l.size,d=l.start,f=l.blend;o!==u&&(o=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}}},{key:"flush",value:function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}},{key:"start",value:function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),n.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}},{key:"stop",value:function(){this.flush()}},{key:"destroy",value:function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),lm(v(n.prototype),"destroy",this).call(this)}},{key:"getAttributeBuffer",value:function(e){var t=Uv(Math.ceil(e/8)),n=jv(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new fm(r*this.vertexSize*4)),i}},{key:"getIndexBuffer",value:function(e){var t=Uv(Math.ceil(e/12)),n=jv(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}},{key:"packInterleavedGeometry",value:function(e,t,n,r,i){for(var a=t.uint32View,o=t.float32View,s=r/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,h=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=Tv.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0),p=0;p<c.length;p+=2)o[r++]=c[p],o[r++]=c[p+1],o[r++]=l[p],o[r++]=l[p+1],a[r++]=f,o[r++]=h;for(var v=0;v<u.length;v++)n[i++]=s+u[v]}}],[{key:"defaultMaxTextures",get:function(){var e;return this._defaultMaxTextures=null!==(e=this._defaultMaxTextures)&&void 0!==e?e:function(e){var t=!0,n=gp.ADAPTER.getNavigator();if(Dp.tablet||Dp.phone){if(Dp.apple.device){var r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(t=!1)}if(Dp.android.device){var i=n.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures},set:function(e){this._defaultMaxTextures=e}},{key:"canUploadSameBuffer",get:function(){var e;return this._canUploadSameBuffer=null!==(e=this._canUploadSameBuffer)&&void 0!==e?e:!Dp.apple.device,this._canUploadSameBuffer},set:function(e){this._canUploadSameBuffer=e}},{key:"defaultVertexSrc",get:function(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}},{key:"defaultFragmentTemplate",get:function(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}}]),n}(Cg),Ig=Ag;Ig.defaultBatchSize=4096,Ig.extension={name:"batch",type:um.RendererPlugin},Ig._drawCallPool=[],Ig._textureArrayPool=[],dm.add(Ig);var Og=function(e){p(n,e);var t=g(n);function n(e,r,i){var a;l(this,n);var o=xg.from(e||n.defaultVertexSrc,r||n.defaultFragmentSrc);return(a=t.call(this,o,i)).padding=0,a.resolution=n.defaultResolution,a.multisample=n.defaultMultisample,a.enabled=!0,a.autoFit=!0,a.state=new gm,a}return d(n,[{key:"apply",value:function(e,t,n,r,i){e.applyFilter(this,t,n,r)}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}]),n}(Tg),Pg=Og;Pg.defaultResolution=1,Pg.defaultMultisample=pp.NONE;var Mg=function(){function e(){l(this,e),this.clearBeforeRender=!0,this._backgroundColor=new Tv(0),this.alpha=1}return d(e,[{key:"init",value:function(e){this.clearBeforeRender=e.clearBeforeRender;var t=e.backgroundColor,n=e.background,r=e.backgroundAlpha,i=null!==n&&void 0!==n?n:t;void 0!==i&&(this.color=i),this.alpha=r}},{key:"color",get:function(){return this._backgroundColor.value},set:function(e){this._backgroundColor.setValue(e)}},{key:"alpha",get:function(){return this._backgroundColor.alpha},set:function(e){this._backgroundColor.setAlpha(e)}},{key:"backgroundColor",get:function(){return this._backgroundColor}},{key:"destroy",value:function(){}}]),e}();Mg.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Mg.extension={type:[um.RendererSystem,um.CanvasRendererSystem],name:"background"},dm.add(Mg);var Rg=function(){function e(t){l(this,e),this.renderer=t,this.emptyRenderer=new Cg(t),this.currentRenderer=this.emptyRenderer}return d(e,[{key:"setObjectRenderer",value:function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}},{key:"flush",value:function(){this.setObjectRenderer(this.emptyRenderer)}},{key:"reset",value:function(){this.setObjectRenderer(this.emptyRenderer)}},{key:"copyBoundTextures",value:function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)}},{key:"boundArray",value:function(e,t,n,r){for(var i=e.elements,a=e.ids,o=e.count,s=0,l=0;l<o;l++){var u=i[l],c=u._batchLocation;if(c>=0&&c<r&&t[c]===u)a[l]=c;else for(;s<r;){var h=t[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){a[l]=s,u._batchLocation=s,t[s]=u;break}s++}}}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Rg.extension={type:um.RendererSystem,name:"batch"},dm.add(Rg);var Ng=0,Dg=function(){function e(t){l(this,e),this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}return d(e,[{key:"isLost",get:function(){return!this.gl||this.gl.isContextLost()}},{key:"contextChange",value:function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=Ng++}},{key:"init",value:function(e){if(e.context)this.initFromContext(e.context);else{var t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}},{key:"initFromContext",value:function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=Ng++,this.renderer.runners.contextChange.emit(e);var t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}},{key:"initFromOptions",value:function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)}},{key:"createContext",value:function(e,t){var n;if(gp.PREFER_ENV>=$f.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}},{key:"getExtensions",value:function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}},{key:"handleContextLost",value:function(e){var t=this;e.preventDefault(),setTimeout((function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()}),0)}},{key:"handleContextRestored",value:function(){this.renderer.runners.contextChange.emit(this.gl)}},{key:"destroy",value:function(){var e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}},{key:"postrender",value:function(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}},{key:"validateContext",value:function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&t.stencil;var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r}}]),e}();Dg.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},Dg.extension={type:um.RendererSystem,name:"context"},dm.add(Dg);var Lg=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"upload",value:function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lp.UNPACK);var i=t.realWidth,a=t.realHeight;return n.width===i&&n.height===a?r.texSubImage2D(t.target,0,0,0,i,a,t.format,n.type,this.data):(n.width=i,n.height=a,r.texImage2D(t.target,0,n.internalFormat,i,a,0,t.format,n.type,this.data)),!0}}]),n}(Em),Fg=function(){function e(t,n){l(this,e),this.width=Math.round(t||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new _m("disposeFramebuffer"),this.multisample=pp.NONE}return d(e,[{key:"colorTexture",get:function(){return this.colorTextures[0]}},{key:"addColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.colorTextures[e]=t||new Sm(null,{scaleMode:ap.NEAREST,resolution:1,mipmap:sp.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}},{key:"addDepthTexture",value:function(e){return this.depthTexture=e||new Sm(new Lg(null,{width:this.width,height:this.height}),{scaleMode:ap.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:sp.OFF,format:tp.DEPTH_COMPONENT,type:rp.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}},{key:"enableDepth",value:function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}},{key:"enableStencil",value:function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}},{key:"resize",value:function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}if(this.depthTexture){var a=this.depthTexture.resolution;this.depthTexture.setSize(e/a,t/a)}}}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroyDepthTexture",value:function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}]),e}(),Bg=function(e){p(n,e);var t=g(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(l(this,n),"number"===typeof i)&&(i={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return i.width=i.width||100,i.height=i.height||100,null!==(e=i.multisample)&&void 0!==e||(i.multisample=pp.NONE),(r=t.call(this,null,i)).mipmap=sp.OFF,r.valid=!0,r._clear=new Tv([0,0,0,0]),r.framebuffer=new Fg(r.realWidth,r.realHeight).addColorTexture(0,m(r)),r.framebuffer.multisample=i.multisample,r.maskStack=[],r.filterStack=[{}],r}return d(n,[{key:"clearColor",get:function(){return this._clear.value},set:function(e){this._clear.setValue(e)}},{key:"clear",get:function(){return this._clear}},{key:"resize",value:function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}},{key:"dispose",value:function(){this.framebuffer.dispose(),lm(v(n.prototype),"dispose",this).call(this)}},{key:"destroy",value:function(){lm(v(n.prototype),"destroy",this).call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}]),n}(Sm),Ug=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n);var i=e,a=i.naturalWidth||i.videoWidth||i.width,o=i.naturalHeight||i.videoHeight||i.height;return(r=t.call(this,a,o)).source=e,r.noSubImage=!1,r}return d(n,[{key:"upload",value:function(e,t,n,r){var i=e.gl,a=t.realWidth,o=t.realHeight;if(r=r||this.source,"undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if("undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===lp.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==a||n.height!==o?(n.width=a,n.height=o,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0}},{key:"update",value:function(){if(!this.destroyed){var e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),lm(v(n.prototype),"update",this).call(this)}}},{key:"dispose",value:function(){this.source=null}}],[{key:"crossOrigin",value:function(e,t,n){void 0!==n||t.startsWith("data:")?!1!==n&&(e.crossOrigin="string"===typeof n?n:"anonymous"):e.crossOrigin=om(t)}}]),n}(xm),Hg=function(e){p(n,e);var t=g(n);function n(e,r){var i,a;if(l(this,n),r=r||{},"string"===typeof e){var o=new Image;Ug.crossOrigin(o,e,r.crossorigin),o.src=e,e=o}return a=t.call(this,e),!e.complete&&a._width&&a._height&&(a._width=0,a._height=0),a.url=e.src,a._process=null,a.preserveBitmap=!1,a.createBitmap=(null!==(i=r.createBitmap)&&void 0!==i?i:gp.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,a.alphaMode="number"===typeof r.alphaMode?r.alphaMode:null,a.bitmap=null,a._load=null,!1!==r.autoLoad&&a.load(),a}return d(n,[{key:"load",value:function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load}},{key:"process",value:function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(r){return n(r,0,0,t.width,t.height,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===lp.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process}},{key:"upload",value:function(e,t,r){if("number"===typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return lm(v(n.prototype),"upload",this).call(this,e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(lm(v(n.prototype),"upload",this).call(this,e,t,r,this.bitmap),!this.preserveBitmap){var i=!0,a=t._glTextures;for(var o in a){var s=a[o];if(s!==r&&s.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}},{key:"dispose",value:function(){this.source.onload=null,this.source.onerror=null,lm(v(n.prototype),"dispose",this).call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}}],[{key:"test",value:function(e){return"undefined"!==typeof HTMLImageElement&&("string"===typeof e||e instanceof HTMLImageElement)}}]),n}(Ug),jg=function(){function e(){l(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return d(e,[{key:"set",value:function(e,t,n){var r=t.width,i=t.height;if(n){var a=e.width/2/r,o=e.height/2/i,s=e.x/r+a,l=e.y/i+o;n=tg.add(n,tg.NW),this.x0=s+a*tg.uX(n),this.y0=l+o*tg.uY(n),n=tg.add(n,2),this.x1=s+a*tg.uX(n),this.y1=l+o*tg.uY(n),n=tg.add(n,2),this.x2=s+a*tg.uX(n),this.y2=l+o*tg.uY(n),n=tg.add(n,2),this.x3=s+a*tg.uX(n),this.y3=l+o*tg.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}},{key:"toString",value:function(){return"[@pixi/core:TextureUvs x0=".concat(this.x0," y0=").concat(this.y0," x1=").concat(this.x1," y1=").concat(this.y1," x2=").concat(this.x2," y2=").concat(this.y2," x3=").concat(this.x3," y3=").concat(this.y3,"]")}}]),e}(),zg=new jg;function Vg(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var Gg=function(e){p(n,e);var t=g(n);function n(e,r,i,a,o,s,u){var c;if(l(this,n),(c=t.call(this)).noFrame=!1,r||(c.noFrame=!0,r=new zm(0,0,1,1)),e instanceof n&&(e=e.baseTexture),c.baseTexture=e,c._frame=r,c.trim=a,c.valid=!1,c._uvs=zg,c.uvMatrix=null,c.orig=i||r,c._rotate=Number(o||0),!0===o)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new Hm(s.x,s.y):new Hm(0,0),c.defaultBorders=u,c._updateID=0,c.textureCacheIds=[],e.valid?c.noFrame?e.valid&&c.onBaseTextureUpdated(e):c.frame=r:e.once("loaded",c.onBaseTextureUpdated,m(c)),c.noFrame&&e.on("update",c.onBaseTextureUpdated,m(c)),c}return d(n,[{key:"update",value:function(){this.baseTexture.resource&&this.baseTexture.resource.update()}},{key:"onBaseTextureUpdated",value:function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}},{key:"destroy",value:function(e){if(this.baseTexture){if(e){var t=this.baseTexture.resource;null!==t&&void 0!==t&&t.url&&qv[t.url]&&n.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null}},{key:"clone",value:function(){var e,t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new n(this.baseTexture,!this.noFrame&&t,r,null===(e=this.trim)||void 0===e?void 0:e.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}},{key:"updateUvs",value:function(){this._uvs===zg&&(this._uvs=new jg),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}},{key:"resolution",get:function(){return this.baseTexture.resolution}},{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,a=t+r>this.baseTexture.width,o=n+i>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",l="X: ".concat(t," + ").concat(r," = ").concat(t+r," > ").concat(this.baseTexture.width),u="Y: ".concat(n," + ").concat(i," = ").concat(n+i," > ").concat(this.baseTexture.height);throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: ".concat(l," ").concat(s," ").concat(u))}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}},{key:"castToBaseTexture",value:function(){return this.baseTexture}}],[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gp.STRICT_TEXTURE_CACHE,i="string"===typeof e,a=null;if(i)a=e;else if(e instanceof Sm){if(!e.cacheId){var o=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId="".concat(o,"-").concat(Wv()),Sm.addToCache(e,e.cacheId)}a=e.cacheId}else{if(!e._pixiId){var s=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(s,"_").concat(Wv())}a=e._pixiId}var l=qv[a];if(i&&r&&!l)throw new Error('The cacheId "'.concat(a,'" does not exist in TextureCache.'));return l||e instanceof Sm?!l&&e instanceof Sm&&(l=new n(e),n.addToCache(l,a)):(t.resolution||(t.resolution=sm(e)),(l=new n(new Sm(e,t))).baseTexture.cacheId=a,Sm.addToCache(l.baseTexture,a),n.addToCache(l,a)),l}},{key:"fromURL",value:function(e,t){var r=Object.assign({autoLoad:!1},null===t||void 0===t?void 0:t.resourceOptions),i=n.from(e,Object.assign({resourceOptions:r},t),!1),a=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):a.load().then((function(){return Promise.resolve(i)}))}},{key:"fromBuffer",value:function(e,t,r,i){return new n(Sm.fromBuffer(e,t,r,i))}},{key:"fromLoader",value:function(e,t,r,i){var a=new Sm(e,Object.assign({scaleMode:Sm.defaultOptions.scaleMode,resolution:sm(t)},i)),o=a.resource;o instanceof Hg&&(o.url=t);var s=new n(a);return r||(r=t),Sm.addToCache(s.baseTexture,r),n.addToCache(s,r),r!==t&&(Sm.addToCache(s.baseTexture,t),n.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(e){s.baseTexture.once("loaded",(function(){return e(s)}))}))}},{key:"addToCache",value:function(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),qv[t]&&qv[t],qv[t]=e)}},{key:"removeFromCache",value:function(e){if("string"===typeof e){var t=qv[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete qv[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)qv[e.textureCacheIds[r]]===e&&delete qv[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}},{key:"EMPTY",get:function(){return n._EMPTY||(n._EMPTY=new n(new Sm),Vg(n._EMPTY),Vg(n._EMPTY.baseTexture)),n._EMPTY}},{key:"WHITE",get:function(){if(!n._WHITE){var e=gp.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),n._WHITE=new n(Sm.from(e)),Vg(n._WHITE),Vg(n._WHITE.baseTexture)}return n._WHITE}}]),n}(Lp),Wg=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return d(n,[{key:"framebuffer",get:function(){return this.baseTexture.framebuffer}},{key:"multisample",get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e}},{key:"resize",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.baseTexture.resolution,i=Math.round(e*r)/r,a=Math.round(t*r)/r;this.valid=i>0&&a>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=a,n&&this.baseTexture.resize(i,a),this.updateUvs()}},{key:"setResolution",value:function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}}],[{key:"create",value:function(e){return new n(new Bg(e))}}]),n}(Gg),Xg=function(){function e(t){l(this,e),this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return d(e,[{key:"createTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:pp.NONE,r=new Bg(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Wg(r)}},{key:"getOptimalTexture",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pp.NONE;e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?n=i>1?-i:-1:(n=((65535&(e=Uv(e)))<<16|65535&(t=Uv(t)))>>>0,i>1&&(n+=4294967296*i)),this.texturePool[n]||(this.texturePool[n]=[]);var a=this.texturePool[n].pop();return a||(a=this.createTexture(e,t,i)),a.filterPoolKey=n,a.setResolution(r),a}},{key:"getFilterTexture",value:function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||pp.NONE);return r.filterFrame=e.filterFrame,r}},{key:"returnTexture",value:function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}},{key:"returnFilterTexture",value:function(e){this.returnTexture(e)}},{key:"clear",value:function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}}},{key:"setScreenSize",value:function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}]),e}();Xg.SCREEN_KEY=-1;var Yg=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return d(n)}(Nm),Kg=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new Am(e.vertices),e.uvBuffer=new Am(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return d(n,[{key:"map",value:function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this}},{key:"invalidate",value:function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}]),n}(Nm),qg=function(){function e(){l(this,e),this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=pp.NONE,this.sourceFrame=new zm,this.destinationFrame=new zm,this.bindingSourceFrame=new zm,this.bindingDestinationFrame=new zm,this.filters=[],this.transform=null}return d(e,[{key:"clear",value:function(){this.target=null,this.filters=null,this.renderTexture=null}}]),e}(),$g=[new Hm,new Hm,new Hm,new Hm],Zg=new Ym,Qg=function(){function e(t){l(this,e),this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Xg,this.statePool=[],this.quad=new Yg,this.quadUv=new Kg,this.tempRect=new zm,this.activeState={},this.globalUniforms=new wg({outputFrame:new zm,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return d(e,[{key:"init",value:function(){this.texturePool.setScreenSize(this.renderer.view)}},{key:"push",value:function(e,t){for(var n,r=this.renderer,i=this.defaultFilterStack,a=this.statePool.pop()||new qg,o=this.renderer.renderTexture,s=t[0].resolution,l=t[0].multisample,u=t[0].padding,c=t[0].autoFit,h=null===(n=t[0].legacy)||void 0===n||n,d=1;d<t.length;d++){var f,p=t[d];s=Math.min(s,p.resolution),l=Math.min(l,p.multisample),u=this.useMaxPadding?Math.max(u,p.padding):u+p.padding,c=c&&p.autoFit,h=h||null===(f=p.legacy)||void 0===f||f}1===i.length&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(a),a.resolution=s,a.multisample=l,a.legacy=h,a.target=e,a.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),a.sourceFrame.pad(u);var v=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(Zg.copyFrom(r.projection.transform).invert(),v),c?(a.sourceFrame.fit(v),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(v)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,s,l),a.filters=t,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=a.sourceFrame.width,m.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(o.sourceFrame),a.bindingDestinationFrame.copyFrom(o.destinationFrame),a.transform=r.projection.transform,r.projection.transform=null,o.bind(a.renderTexture,a.sourceFrame,m),r.framebuffer.clear(0,0,0,0)}},{key:"pop",value:function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,a=r.inputPixel,o=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],a[0]=Math.round(i[0]*t.resolution),a[1]=Math.round(i[1]*t.resolution),a[2]=1/a[0],a[3]=1/a[1],o[0]=.5*a[2],o[1]=.5*a[3],o[2]=t.sourceFrame.width*i[2]-.5*a[2],o[3]=t.sourceFrame.height*i[3]-.5*a[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,l.renderTexture,up.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){1===h&&t.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,t.resolution)).filterFrame=u.filterFrame),n[h].apply(this,u,c,up.CLEAR,t);var d=u;u=c,c=d}n[h].apply(this,u,l.renderTexture,up.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}},{key:"bindAndClear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:up.CLEAR,n=this.renderer,r=n.renderTexture,i=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,null!==e&&void 0!==e&&e.filterFrame){var a=this.tempRect;a.x=0,a.y=0,a.width=e.filterFrame.width,a.height=e.filterFrame.height,r.bind(e,e.filterFrame,a)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var o=1&i.stateId||this.forceClear;(t===up.CLEAR||t===up.BLIT&&o)&&this.renderer.framebuffer.clear(0,0,0,0)}},{key:"applyFilter",value:function(e,t,n,r){var i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(ep.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(ep.TRIANGLE_STRIP))}},{key:"calculateSpriteMatrix",value:function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,a=t._texture.orig,o=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(Ym.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/a.width,1/a.height),o.translate(t.anchor.x,t.anchor.y),o}},{key:"destroy",value:function(){this.renderer=null,this.texturePool.clear(!1)}},{key:"getOptimalFilterTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pp.NONE;return this.texturePool.getOptimalTexture(e,t,n,r)}},{key:"getFilterTexture",value:function(e,t,n){if("number"===typeof e){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||pp.NONE);return i.filterFrame=e.filterFrame,i}},{key:"returnFilterTexture",value:function(e){this.texturePool.returnTexture(e)}},{key:"emptyPool",value:function(){this.texturePool.clear(!0)}},{key:"resize",value:function(){this.texturePool.setScreenSize(this.renderer.view)}},{key:"transformAABB",value:function(e,t){var n=$g[0],r=$g[1],i=$g[2],a=$g[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),a.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(a,a);var o=Math.min(n.x,r.x,i.x,a.x),s=Math.min(n.y,r.y,i.y,a.y),l=Math.max(n.x,r.x,i.x,a.x),u=Math.max(n.y,r.y,i.y,a.y);t.x=o,t.y=s,t.width=l-o,t.height=u-s}},{key:"roundFrame",value:function(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){var a=i,o=a.a,s=a.b,l=a.c,u=a.d;if((Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}(i=i?Zg.copyFrom(i):Zg.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}]),e}();Qg.extension={type:um.RendererSystem,name:"filter"},dm.add(Qg);var Jg=d((function e(t){l(this,e),this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=pp.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0})),ey=new zm,ty=function(){function e(t){l(this,e),this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Fg(10,10),this.msaaSamples=null}return d(e,[{key:"contextChange",value:function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new zm,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;gp.PREFER_ENV===$f.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}},{key:"bind",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var a=0;a<e.colorTextures.length;a++){var o=e.colorTextures[a];this.renderer.texture.unbind(o.parentTextureArray||o)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var s=t.width>>n,l=t.height>>n,u=s/t.width;this.setViewport(t.x*u,t.y*u,s,l)}else{var c=e.width>>n,h=e.height>>n;this.setViewport(0,0,c,h)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}},{key:"setViewport",value:function(e,t,n,r){var i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))}},{key:"size",get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}},{key:"clear",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Qf.COLOR|Qf.DEPTH,a=this.gl;a.clearColor(e,t,n,r),a.clear(i)}},{key:"initFramebuffer",value:function(e){var t=this.gl,n=new Jg(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}},{key:"resizeFramebuffer",value:function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,i=r.length;t.drawBuffers||(i=Math.min(i,1));for(var a=0;a<i;a++){var o=r[a],s=o.parentTextureArray||o;this.renderer.texture.bind(s,0),0===a&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}},{key:"updateFramebuffer",value:function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures,a=i.length;n.drawBuffers||(a=Math.min(a,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer():r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var o=[],s=0;s<a;s++){var l=i[s],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===s&&r.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,l.target,u._glTextures[this.CONTEXT_UID].texture,t),o.push(n.COLOR_ATTACHMENT0+s))}if((o.length>1&&n.drawBuffers(o),e.depthTexture)&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))}},{key:"canMultisampleFramebuffer",value:function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}},{key:"detectSamples",value:function(e){var t=this.msaaSamples,n=pp.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=pp.NONE),n}},{key:"blit",value:function(e,t,n){var r=this.current,i=this.renderer,a=this.gl,o=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[o];if(s){if(!e){if(!s.msaaBuffer)return;var l=r.colorTextures[0];if(!l)return;s.blitFramebuffer||(s.blitFramebuffer=new Fg(r.width,r.height),s.blitFramebuffer.addColorTexture(0,l)),(e=s.blitFramebuffer).colorTextures[0]!==l&&(e.colorTextures[0]=l,e.dirtyId++,e.dirtyFormat++),e.width===r.width&&e.height===r.height||(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||((t=ey).width=r.width,t.height=r.height),n||(n=t);var u=t.width===n.width&&t.height===n.height;this.bind(e),a.bindFramebuffer(a.READ_FRAMEBUFFER,s.framebuffer),a.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,a.COLOR_BUFFER_BIT,u?a.NEAREST:a.LINEAR),a.bindFramebuffer(a.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}}}},{key:"disposeFramebuffer",value:function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}}},{key:"disposeAll",value:function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}},{key:"forceStencil",value:function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,i=this.gl,a=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,a),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=a,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,a)}}}},{key:"reset",value:function(){this.current=this.unknownFramebuffer,this.viewport=new zm}},{key:"destroy",value:function(){this.renderer=null}}]),e}();ty.extension={type:um.RendererSystem,name:"framebuffer"},dm.add(ty);var ny={5126:4,5123:2,5121:1},ry=function(){function e(t){l(this,e),this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return d(e,[{key:"contextChange",value:function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;gp.PREFER_ENV===$f.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,a){return r.drawElementsInstancedANGLE(e,t,n,i,a)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}},{key:"bind",value:function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var a=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==a&&(this._activeVao=a,this.hasVao?n.bindVertexArray(a):this.activateVao(e,t.program)),this.updateBuffers()}},{key:"reset",value:function(){this.unbind()}},{key:"updateBuffers",value:function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}}},{key:"checkCompatibility",value:function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'.concat(i,'" attribute'))}},{key:"getSignature",value:function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var a in n)r[a]&&i.push(a,r[a].location);return i.join("-")}},{key:"initGeometryVao",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.gl,i=this.CONTEXT_UID,a=this.renderer.buffer,o=t.program;o.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,o);var s=this.getSignature(e,o),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[s];if(u)return l[o.id]=u,u;var c=e.buffers,h=e.attributes,d={},f={};for(var p in c)d[p]=0,f[p]=0;for(var v in h)!h[v].size&&o.attributeData[v]?h[v].size=o.attributeData[v].size:h[v].size,d[h[v].buffer]+=h[v].size*ny[h[v].type];for(var m in h){var g=h[m],y=g.size;void 0===g.stride&&(d[g.buffer]===y*ny[g.type]?g.stride=0:g.stride=d[g.buffer]),void 0===g.start&&(g.start=f[g.buffer],f[g.buffer]+=y*ny[g.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(var b=0;b<c.length;b++){var _=c[b];a.bind(_),n&&_._glBuffers[i].refCount++}return this.activateVao(e,o),l[o.id]=u,l[s]=u,r.bindVertexArray(null),a.unbind(vp.ARRAY_BUFFER),u}},{key:"disposeGeometry",value:function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,a=e.buffers,o=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(o)for(var s=0;s<a.length;s++){var l=a[s]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||t||o.dispose(a[s],t))}if(!t)for(var u in r)if("g"===u[0]){var c=r[u];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}}},{key:"disposeAll",value:function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}},{key:"activateVao",value:function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,a=e.buffers,o=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var l in o){var u=o[l],c=a[u.buffer],h=c._glBuffers[r];if(t.attributeData[l]){s!==h&&(i.bind(c),s=h);var d=t.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,u.divisor)}}}}},{key:"draw",value:function(e,t,n,r){var i=this.gl,a=this._activeGeometry;if(a.indexBuffer){var o=a.indexBuffer.data.BYTES_PER_ELEMENT,s=2===o?i.UNSIGNED_SHORT:i.UNSIGNED_INT;(2===o||4===o&&this.canUseUInt32ElementIndex)&&(a.instanced?i.drawElementsInstanced(e,t||a.indexBuffer.data.length,s,(n||0)*o,r||1):i.drawElements(e,t||a.indexBuffer.data.length,s,(n||0)*o))}else a.instanced?i.drawArraysInstanced(e,n,t||a.getSize(),r||1):i.drawArrays(e,n,t||a.getSize());return this}},{key:"unbind",value:function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}},{key:"destroy",value:function(){this.renderer=null}}]),e}();ry.extension={type:um.RendererSystem,name:"geometry"},dm.add(ry);var iy=new Ym,ay=function(){function e(t,n){l(this,e),this._texture=t,this.mapCoord=new Ym,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof n?.5:n,this.isSimple=!1}return d(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1}},{key:"multiplyUvs",value:function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],a=e[r+1];t[r]=i*n.a+a*n.c+n.tx,t[r+1]=i*n.b+a*n.d+n.ty}return t}},{key:"update",value:function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(iy.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(iy));var a=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/a.resolution,l=this.clampOffset;return o[0]=(t._frame.x+s+l)/a.width,o[1]=(t._frame.y+s+l)/a.height,o[2]=(t._frame.x+t._frame.width-s+l)/a.width,o[3]=(t._frame.y+t._frame.height-s+l)/a.height,this.uClampOffset[0]=l/a.realWidth,this.uClampOffset[1]=l/a.realHeight,this.isSimple=t._frame.width===a.width&&t._frame.height===a.height&&0===t.rotate,!0}}]),e}(),oy=function(e){p(n,e);var t=g(n);function n(e,r,i){var a;l(this,n);var o=null;return"string"!==typeof e&&void 0===r&&void 0===i&&(o=e,e=void 0,r=void 0,i=void 0),(a=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)).maskSprite=o,a.maskMatrix=new Ym,a}return d(n,[{key:"maskSprite",get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}},{key:"apply",value:function(e,t,n,r){var i=this._maskSprite,a=i._texture;a.valid&&(a.uvMatrix||(a.uvMatrix=new ay(a,0)),a.uvMatrix.update(),this.uniforms.npmAlpha=a.baseTexture.alphaMode?0:1,this.uniforms.mask=a,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(a.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=a.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))}}]),n}(Pg),sy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;l(this,e),this.type=dp.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Pg.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return d(e,[{key:"filter",get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}},{key:"reset",value:function(){this.pooled&&(this.maskObject=null,this.type=dp.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}},{key:"copyCountersOrReset",value:function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}]),e}(),ly=function(){function e(t){l(this,e),this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return d(e,[{key:"setMaskStack",value:function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}},{key:"push",value:function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new sy;r.pooled=!0,r.maskObject=t,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==dp.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case dp.SCISSOR:this.renderer.scissor.push(n);break;case dp.STENCIL:this.renderer.stencil.push(n);break;case dp.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case dp.COLOR:this.pushColorMask(n)}n.type===dp.SPRITE&&this.maskStack.push(n)}},{key:"pop",value:function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case dp.SCISSOR:this.renderer.scissor.pop(t);break;case dp.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case dp.SPRITE:this.popSpriteMask(t);break;case dp.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===dp.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}},{key:"detect",value:function(e){var t=e.maskObject;t?t.isSprite?e.type=dp.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=dp.SCISSOR:e.type=dp.STENCIL:e.type=dp.COLOR}},{key:"pushSpriteMask",value:function(e){var t=e.maskObject,n=e._target,r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex])||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new oy]);var i,a,o=this.renderer,s=o.renderTexture;if(s.current){var l,u=s.current;i=e.resolution||u.resolution,a=null!==(l=e.multisample)&&void 0!==l?l:u.multisample}else{var c;i=e.resolution||o.resolution,a=null!==(c=e.multisample)&&void 0!==c?c:o.multisample}r[0].resolution=i,r[0].multisample=a,r[0].maskSprite=t;var h=n.filterArea;n.filterArea=t.getBounds(!0),o.filter.push(n,r),n.filterArea=h,e._filters||this.alphaMaskIndex++}},{key:"popSpriteMask",value:function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}},{key:"pushColorMask",value:function(e){var t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}},{key:"popColorMask",value:function(e){var t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}},{key:"destroy",value:function(){this.renderer=null}}]),e}();ly.extension={type:um.RendererSystem,name:"mask"},dm.add(ly);var uy=function(){function e(t){l(this,e),this.renderer=t,this.maskStack=[],this.glConst=0}return d(e,[{key:"getStackLength",value:function(){return this.maskStack.length}},{key:"setMaskStack",value:function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}},{key:"_useCurrent",value:function(){}},{key:"destroy",value:function(){this.renderer=null,this.maskStack=null}}]),e}(),cy=new Ym,hy=[],dy=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).glConst=gp.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return d(n,[{key:"getStackLength",value:function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}},{key:"calcScissorRect",value:function(e){var t;if(!e._scissorRectLocal){var n=e._scissorRect,r=e.maskObject,i=this.renderer,a=i.renderTexture,o=r.getBounds(!0,null!==(t=hy.pop())&&void 0!==t?t:new zm);this.roundFrameToPixels(o,a.current?a.current.resolution:i.resolution,a.sourceFrame,a.destinationFrame,i.projection.transform),n&&o.fit(n),e._scissorRectLocal=o}}},{key:"testScissor",value:function(e){var t=e.maskObject;if(!t.isFastRect||!t.isFastRect())return!1;if(n.isMatrixRotated(t.worldTransform))return!1;if(n.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var r=e._scissorRectLocal;return r.width>0&&r.height>0}},{key:"roundFrameToPixels",value:function(e,t,r,i,a){n.isMatrixRotated(a)||((a=a?cy.copyFrom(a):cy.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(a,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}},{key:"push",value:function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}},{key:"pop",value:function(e){var t=this.renderer.gl;e&&hy.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}},{key:"_useCurrent",value:function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}}],[{key:"isMatrixRotated",value:function(e){if(!e)return!1;var t=e.a,n=e.b,r=e.c,i=e.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}}]),n}(uy),fy=dy;fy.extension={type:um.RendererSystem,name:"scissor"},dm.add(fy);var py=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).glConst=gp.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return d(n,[{key:"getStackLength",value:function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}},{key:"push",value:function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;var i=e._colorMask;0!==i&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,n.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()}},{key:"pop",value:function(e){var t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{var n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;0!==r&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(n._colorMask=r,t.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))),this._useCurrent()}}},{key:"_useCurrent",value:function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}]),n}(uy);py.extension={type:um.RendererSystem,name:"stencil"},dm.add(py);var vy=function(){function e(t){l(this,e),this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:function(){return Wp("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get:function(){return Wp("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get:function(){return Wp("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}return d(e,[{key:"init",value:function(){var e=this.rendererPlugins;for(var t in e)this.plugins[t]=new e[t](this.renderer)}},{key:"destroy",value:function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}]),e}();vy.extension={type:[um.RendererSystem,um.CanvasRendererSystem],name:"_plugin"},dm.add(vy);var my=function(){function e(t){l(this,e),this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ym,this.transform=null}return d(e,[{key:"update",value:function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}},{key:"calculateProjection",value:function(e,t,n,r){var i=this.projectionMatrix,a=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=a*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-a-t.y*i.d}},{key:"setTransform",value:function(e){}},{key:"destroy",value:function(){this.renderer=null}}]),e}();my.extension={type:um.RendererSystem,name:"projection"},dm.add(my);var gy=["region"],yy=new ig,by=function(){function e(t){l(this,e),this.renderer=t,this._tempMatrix=new Ym}return d(e,[{key:"generateTexture",value:function(e,t){var n=t||{},r=n.region,i=Wn(n,gy),a=r||e.getLocalBounds(null,!0);0===a.width&&(a.width=1),0===a.height&&(a.height=1);var o=Wg.create(Pe({width:a.width,height:a.height},i));this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;var s=e.transform;return e.transform=yy,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=s,o}},{key:"destroy",value:function(){}}]),e}();by.extension={type:[um.RendererSystem,um.CanvasRendererSystem],name:"textureGenerator"},dm.add(by);var _y=new zm,xy=new zm,Ey=function(){function e(t){l(this,e),this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new zm,this.destinationFrame=new zm,this.viewportFrame=new zm}return d(e,[{key:"contextChange",value:function(){var e,t=null===(e=this.renderer)||void 0===e?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}},{key:"bind",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=this.renderer;this.current=r,r?(n=(e=r.baseTexture).resolution,i||(_y.width=r.frame.width,_y.height=r.frame.height,i=_y),a||(xy.x=r.frame.x,xy.y=r.frame.y,xy.width=i.width,xy.height=i.height,a=xy),t=e.framebuffer):(n=o.resolution,i||(_y.width=o._view.screen.width,_y.height=o._view.screen.height,i=_y),a||((a=_y).width=i.width,a.height=i.height));var s=this.viewportFrame;s.x=a.x*n,s.y=a.y*n,s.width=a.width*n,s.height=a.height*n,r||(s.y=o.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(t,s),this.renderer.projection.update(a,i,n,!t),r?this.renderer.mask.setMaskStack(e.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(a)}},{key:"clear",value:function(e,t){var n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=Tv.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);var i=this.destinationFrame,a=this.current?this.current.baseTexture:this.renderer._view.screen,o=i.width!==a.width||i.height!==a.height;if(o){var s=this.viewportFrame,l=s.x,u=s.y,c=s.width,h=s.height;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,t),o&&this.renderer.scissor.pop()}},{key:"resize",value:function(){this.bind(null)}},{key:"reset",value:function(){this.bind(null)}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Ey.extension={type:um.RendererSystem,name:"renderTexture"},dm.add(Ey);var wy=d((function e(){l(this,e)})),Ty=function(){function e(t,n){l(this,e),this.program=t,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return d(e,[{key:"destroy",value:function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}]),e}();function Sy(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function ky(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function Cy(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ky(2*t);case"bvec3":return ky(3*t);case"bvec4":return ky(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function Ay(e,t){var n,r=e.getShaderSource(t).split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})),i=e.getShaderInfoLog(t).split("\n"),a={},o=i.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||a[e])&&(a[e]=!0,!0)})),s=[""];o.forEach((function(e){r[e-1]="%c".concat(r[e-1],"%c"),s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var l=r.join("\n");s[0]=l,(n=console).warn.apply(n,s)}function Iy(e,t){var n,r=Sy(e,e.VERTEX_SHADER,t.vertexSrc),i=Sy(e,e.FRAGMENT_SHADER,t.fragmentSrc),a=e.createProgram();e.attachShader(a,r),e.attachShader(a,i);var o=null===(n=t.extra)||void 0===n?void 0:n.transformFeedbackVaryings;if(o&&("function"!==typeof e.transformFeedbackVaryings||e.transformFeedbackVaryings(a,o.names,"separate"===o.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(a),e.getProgramParameter(a,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||Ay(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||Ay(e,r),e.getProgramInfoLog(t))}(e,a,r,i),t.attributeData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var a=t.getActiveAttrib(e,i);if(!a.name.startsWith("gl_")){var o=mg(t,a.type),s={type:o,name:a.name,size:fg(o),location:t.getAttribLocation(e,a.name)};n[a.name]=s}}return n}(a,e),t.uniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var a=t.getActiveUniform(e,i),o=a.name.replace(/\[.*?\]$/,""),s=!!a.name.match(/\[.*?\]$/),l=mg(t,a.type);n[o]={name:o,index:i,type:l,size:a.size,isArray:s,value:Cy(l,a.size)}}return n}(a,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var s=Object.keys(t.attributeData);s.sort((function(e,t){return e>t?1:-1}));for(var l=0;l<s.length;l++)t.attributeData[s[l]].location=l,e.bindAttribLocation(a,l,s[l]);e.linkProgram(a)}e.deleteShader(r),e.deleteShader(i);var u={};for(var c in t.uniformData){var h=t.uniformData[c];u[c]={location:e.getUniformLocation(a,c),value:Cy(h.type,h.size)}}return new Ty(a,u)}function Oy(e,t,n,r,i){n.buffer.update(i)}var Py,My={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},Ry={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function Ny(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,a=0;a<t.length;a++){var o=t[a];if(n=Ry[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return{uboElements:t,size:i=16*Math.ceil(i/16)}}function Dy(e,t){var n=[];for(var r in e)t[r]&&n.push(t[r]);return n.sort((function(e,t){return e.index-t.index})),n}function Ly(e,t){if(!e.autoManage)return{size:0,syncFunc:Oy};for(var n=Ny(Dy(e.uniforms,t)),r=n.uboElements,i=n.size,a=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],o=0;o<r.length;o++){for(var s=r[o],l=e.uniforms[s.data.name],u=s.data.name,c=!1,h=0;h<ag.length;h++){var d=ag[h];if(d.codeUbo&&d.test(s.data,l)){a.push("offset = ".concat(s.offset/4,";"),ag[h].codeUbo(s.data.name,l)),c=!0;break}}if(!c)if(s.data.size>1){var f=fg(s.data.type),p=Math.max(Ry[s.data.type]/16,1),v=f/p,m=(4-v%4)%4;a.push("\n                cv = ud.".concat(u,".value;\n                v = uv.").concat(u,";\n                offset = ").concat(s.offset/4,";\n\n                t = 0;\n\n                for(var i=0; i < ").concat(s.data.size*p,"; i++)\n                {\n                    for(var j = 0; j < ").concat(v,"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ").concat(m,";\n                }\n\n                "))}else{var g=My[s.data.type];a.push("\n                cv = ud.".concat(u,".value;\n                v = uv.").concat(u,";\n                offset = ").concat(s.offset/4,";\n                ").concat(g,";\n                "))}}return a.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join("\n"))}}function Fy(){if("boolean"===typeof Py)return Py;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");Py=!0===e({a:"b"},"a","b")}catch(Qp){Py=!1}return Py}var By=0,Uy={textureCount:0,uboCount:0},Hy=function(){function e(t){l(this,e),this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=By++}return d(e,[{key:"systemCheck",value:function(){if(!Fy())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}},{key:"contextChange",value:function(e){this.gl=e,this.reset()}},{key:"bind",value:function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(Uy.textureCount=0,Uy.uboCount=0,this.syncUniformGroup(e.uniformGroup,Uy)),r}},{key:"setUniforms",value:function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}},{key:"syncUniformGroup",value:function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}},{key:"syncUniforms",value:function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}},{key:"createSyncGroups",value:function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var r in e.uniforms){var i=t[r];if(i){for(var a=e.uniforms[r],o=!1,s=0;s<ag.length;s++)if(ag[s].test(i,a)){n.push(ag[s].code(r,a)),o=!0;break}if(!o){var l=(1!==i.size||i.isArray?sg:og)[i.type].replace("location",'ud["'.concat(r,'"].location'));n.push('\n            cu = ud["'.concat(r,'"];\n            cv = cu.value;\n            v = uv["').concat(r,'"];\n            ').concat(l,";"))}}else{var u;null!==(u=e.uniforms[r])&&void 0!==u&&u.group&&(e.uniforms[r].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv.".concat(r,", '").concat(r,"');\n                    ")):n.push("\n                        renderer.shader.syncUniformGroup(uv.".concat(r,", syncData);\n                    ")))}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}},{key:"syncUniformBufferGroup",value:function(e,t){var n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,Uy,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}},{key:"createSyncBufferGroup",value:function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var a=this.getSignature(e,this.shader.program.uniformData,"ubo"),o=this._uboCache[a];if(o||(o=this._uboCache[a]=Ly(e,this.shader.program.uniformData)),e.autoManage){var s=new Float32Array(o.size/4);e.buffer.update(s)}return t.uniformGroups[e.id]=o.syncFunc,t.uniformGroups[e.id]}},{key:"getSignature",value:function(e,t,n){var r=e.uniforms,i=["".concat(n,"-")];for(var a in r)i.push(a),t[a]&&i.push(t[a].type);return i.join("-")}},{key:"getGlProgram",value:function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}},{key:"generateProgram",value:function(e){var t=this.gl,n=e.program,r=Iy(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r}},{key:"reset",value:function(){this.program=null,this.shader=null}},{key:"disposeShader",value:function(e){this.shader===e&&(this.shader=null)}},{key:"destroy",value:function(){this.renderer=null,this.destroyed=!0}}]),e}();Hy.extension={type:um.RendererSystem,name:"shader"},dm.add(Hy);var jy=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"run",value:function(e){var t=this.renderer;t.runners.init.emit(t.options),e.hello,t.resize(t.screen.width,t.screen.height)}},{key:"destroy",value:function(){}}]),e}();jy.defaultOptions={hello:!1},jy.extension={type:[um.RendererSystem,um.CanvasRendererSystem],name:"startup"},dm.add(jy);var zy=function(){function e(){l(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Jf.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new gm,this.defaultState.blend=!0}return d(e,[{key:"contextChange",value:function(e){this.gl=e,this.blendModes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[Jf.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.ADD]=[e.ONE,e.ONE],t[Jf.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.NONE]=[0,0],t[Jf.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Jf.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Jf.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Jf.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Jf.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Jf.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Jf.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Jf.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Jf.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Jf.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Jf.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}},{key:"set",value:function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,e)}},{key:"forceState",value:function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}},{key:"setBlend",value:function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}},{key:"setOffset",value:function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}},{key:"setDepthTest",value:function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}},{key:"setDepthMask",value:function(e){this.gl.depthMask(e)}},{key:"setCullFace",value:function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}},{key:"setFrontFace",value:function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}},{key:"setBlendMode",value:function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}}},{key:"setPolygonOffset",value:function(e,t){this.gl.polygonOffset(e,t)}},{key:"reset",value:function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}},{key:"updateCheck",value:function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)}},{key:"destroy",value:function(){this.gl=null}}],[{key:"checkBlendMode",value:function(e,t){e.setBlendMode(t.blendMode)}},{key:"checkPolygonOffset",value:function(e,t){e.setPolygonOffset(1,t.polygonOffset)}}]),e}(),Vy=zy;function Gy(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ae(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}Vy.extension={type:um.RendererSystem,name:"state"},dm.add(Vy);var Wy=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).runners={},e._systemsHash={},e}return d(n,[{key:"setup",value:function(e){var t;this.addRunners.apply(this,Ie(e.runners));var n,r=(null!==(t=e.priority)&&void 0!==t?t:[]).filter((function(t){return e.systems[t]})),i=Gy([].concat(Ie(r),Ie(Object.keys(e.systems).filter((function(e){return!r.includes(e)})))));try{for(i.s();!(n=i.n()).done;){var a=n.value;this.addSystem(e.systems[a],a)}}catch(o){i.e(o)}finally{i.f()}}},{key:"addRunners",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.runners[t]=new _m(t)}))}},{key:"addSystem",value:function(e,t){var n=new e(this);if(this[t])throw new Error('Whoops! The name "'.concat(t,'" is already in use'));for(var r in this[t]=n,this._systemsHash[t]=n,this.runners)this.runners[r].add(n);return this}},{key:"emitWithCustomOptions",value:function(e,t){var n=this,r=Object.keys(this._systemsHash);e.items.forEach((function(i){var a=r.find((function(e){return n._systemsHash[e]===i}));i[e.name](t[a])}))}},{key:"destroy",value:function(){Object.values(this.runners).forEach((function(e){e.destroy()})),this._systemsHash={}}}]),n}(Lp),Xy=function(){function e(t){l(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}return d(e,[{key:"postrender",value:function(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==cp.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}},{key:"run",value:function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){for(var a=0,o=0;o<t.length;o++)null!==t[o]&&(t[a++]=t[o]);t.length=a}}},{key:"unload",value:function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}},{key:"destroy",value:function(){this.renderer=null}}]),e}(),Yy=Xy;Yy.defaultMode=cp.AUTO,Yy.defaultMaxIdle=3600,Yy.defaultCheckCountMax=600,Yy.extension={type:um.RendererSystem,name:"textureGC"},dm.add(Yy);var Ky=d((function e(t){l(this,e),this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=rp.UNSIGNED_BYTE,this.internalFormat=tp.RGBA,this.samplerType=0}));var qy=function(){function e(t){l(this,e),this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Sm,this.hasIntegerTextures=!1}return d(e,[{key:"contextChange",value:function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,n,r,i,a,o,s,l,u,c,h,d,f;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?(y(h={},rp.UNSIGNED_BYTE,(y(n={},tp.RGBA,e.RGBA8),y(n,tp.RGB,e.RGB8),y(n,tp.RG,e.RG8),y(n,tp.RED,e.R8),y(n,tp.RGBA_INTEGER,e.RGBA8UI),y(n,tp.RGB_INTEGER,e.RGB8UI),y(n,tp.RG_INTEGER,e.RG8UI),y(n,tp.RED_INTEGER,e.R8UI),y(n,tp.ALPHA,e.ALPHA),y(n,tp.LUMINANCE,e.LUMINANCE),y(n,tp.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA),n)),y(h,rp.BYTE,(y(r={},tp.RGBA,e.RGBA8_SNORM),y(r,tp.RGB,e.RGB8_SNORM),y(r,tp.RG,e.RG8_SNORM),y(r,tp.RED,e.R8_SNORM),y(r,tp.RGBA_INTEGER,e.RGBA8I),y(r,tp.RGB_INTEGER,e.RGB8I),y(r,tp.RG_INTEGER,e.RG8I),y(r,tp.RED_INTEGER,e.R8I),r)),y(h,rp.UNSIGNED_SHORT,(y(i={},tp.RGBA_INTEGER,e.RGBA16UI),y(i,tp.RGB_INTEGER,e.RGB16UI),y(i,tp.RG_INTEGER,e.RG16UI),y(i,tp.RED_INTEGER,e.R16UI),y(i,tp.DEPTH_COMPONENT,e.DEPTH_COMPONENT16),i)),y(h,rp.SHORT,(y(a={},tp.RGBA_INTEGER,e.RGBA16I),y(a,tp.RGB_INTEGER,e.RGB16I),y(a,tp.RG_INTEGER,e.RG16I),y(a,tp.RED_INTEGER,e.R16I),a)),y(h,rp.UNSIGNED_INT,(y(o={},tp.RGBA_INTEGER,e.RGBA32UI),y(o,tp.RGB_INTEGER,e.RGB32UI),y(o,tp.RG_INTEGER,e.RG32UI),y(o,tp.RED_INTEGER,e.R32UI),y(o,tp.DEPTH_COMPONENT,e.DEPTH_COMPONENT24),o)),y(h,rp.INT,(y(s={},tp.RGBA_INTEGER,e.RGBA32I),y(s,tp.RGB_INTEGER,e.RGB32I),y(s,tp.RG_INTEGER,e.RG32I),y(s,tp.RED_INTEGER,e.R32I),s)),y(h,rp.FLOAT,(y(l={},tp.RGBA,e.RGBA32F),y(l,tp.RGB,e.RGB32F),y(l,tp.RG,e.RG32F),y(l,tp.RED,e.R32F),y(l,tp.DEPTH_COMPONENT,e.DEPTH_COMPONENT32F),l)),y(h,rp.HALF_FLOAT,(y(u={},tp.RGBA,e.RGBA16F),y(u,tp.RGB,e.RGB16F),y(u,tp.RG,e.RG16F),y(u,tp.RED,e.R16F),u)),y(h,rp.UNSIGNED_SHORT_5_6_5,y({},tp.RGB,e.RGB565)),y(h,rp.UNSIGNED_SHORT_4_4_4_4,y({},tp.RGBA,e.RGBA4)),y(h,rp.UNSIGNED_SHORT_5_5_5_1,y({},tp.RGBA,e.RGB5_A1)),y(h,rp.UNSIGNED_INT_2_10_10_10_REV,(y(c={},tp.RGBA,e.RGB10_A2),y(c,tp.RGBA_INTEGER,e.RGB10_A2UI),c)),y(h,rp.UNSIGNED_INT_10F_11F_11F_REV,y({},tp.RGB,e.R11F_G11F_B10F)),y(h,rp.UNSIGNED_INT_5_9_9_9_REV,y({},tp.RGB,e.RGB9_E5)),y(h,rp.UNSIGNED_INT_24_8,y({},tp.DEPTH_STENCIL,e.DEPTH24_STENCIL8)),y(h,rp.FLOAT_32_UNSIGNED_INT_24_8_REV,y({},tp.DEPTH_STENCIL,e.DEPTH32F_STENCIL8)),t=h):(y(f={},rp.UNSIGNED_BYTE,(y(d={},tp.RGBA,e.RGBA),y(d,tp.RGB,e.RGB),y(d,tp.ALPHA,e.ALPHA),y(d,tp.LUMINANCE,e.LUMINANCE),y(d,tp.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA),d)),y(f,rp.UNSIGNED_SHORT_5_6_5,y({},tp.RGB,e.RGB)),y(f,rp.UNSIGNED_SHORT_4_4_4_4,y({},tp.RGBA,e.RGBA)),y(f,rp.UNSIGNED_SHORT_5_5_5_1,y({},tp.RGBA,e.RGBA)),t=f),t}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Ky(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Ky(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var a=0;a<this.boundTextures.length;a++)this.bind(null,a)}},{key:"bind",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.gl;if(null!==(n=e=null===(t=e)||void 0===t?void 0:t.castToBaseTexture())&&void 0!==n&&n.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var a=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,a.texture)),a.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)):a.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}},{key:"reset",value:function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}},{key:"unbind",value:function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(var i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}},{key:"ensureSamplerType",value:function(e){var t=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var i=e-1;i>=0;--i){var a=t[i];if(a)a._glTextures[r].samplerType!==ip.FLOAT&&this.renderer.texture.unbind(a)}}},{key:"initTexture",value:function(e){var t=new Ky(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}},{key:"initTextureType",value:function(e,t){var n,r;t.internalFormat=null!==(n=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==n?n:e.format,2===this.webGLVersion&&e.type===rp.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}},{key:"updateTexture",value:function(e){var t,n=e._glTextures[this.CONTEXT_UID];if(n){var r=this.renderer;if(this.initTextureType(e,n),null!==(t=e.resource)&&void 0!==t&&t.upload(r,e,n))n.samplerType!==ip.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,a=e.realHeight,o=r.gl;(n.width!==i||n.height!==a||n.dirtyId<0)&&(n.width=i,n.height=a,o.texImage2D(e.target,0,n.internalFormat,i,a,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}}},{key:"destroyTexture",value:function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&zv(this.managedTextures,r,1)}}},{key:"updateTextureStyle",value:function(e){var t,n=e._glTextures[this.CONTEXT_UID];n&&(e.mipmap!==sp.POW2&&2===this.webGLVersion||e.isPowerOfTwo?n.mipmap=e.mipmap>=1:n.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?n.wrapMode=e.wrapMode:n.wrapMode=op.CLAMP,null!==(t=e.resource)&&void 0!==t&&t.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}},{key:"setStyle",value:function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==sp.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ap.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===ap.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===ap.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===ap.LINEAR?n.LINEAR:n.NEAREST)}},{key:"destroy",value:function(){this.renderer=null}}]),e}();qy.extension={type:um.RendererSystem,name:"texture"},dm.add(qy);var $y=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"contextChange",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}},{key:"bind",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}},{key:"unbind",value:function(){var e=this.gl;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}},{key:"beginTransformFeedback",value:function(e,t){var n=this.gl,r=this.renderer;t&&r.shader.bind(t),n.beginTransformFeedback(e)}},{key:"endTransformFeedback",value:function(){this.gl.endTransformFeedback()}},{key:"createGLTransformFeedback",value:function(e){var t=this.gl,n=this.renderer,r=this.CONTEXT_UID,i=t.createTransformFeedback();e._glTransformFeedbacks[r]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(var a=0;a<e.buffers.length;a++){var o=e.buffers[a];o&&(n.buffer.update(o),o._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,a,o._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}},{key:"disposeTransformFeedback",value:function(e,t){var n=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);var i=this.renderer.buffer;if(i)for(var a=0;a<e.buffers.length;a++){var o=e.buffers[a];if(o){var s=o._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||t||i.dispose(o,t))}}n&&(t||r.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}},{key:"destroy",value:function(){this.renderer=null}}]),e}();$y.extension={type:um.RendererSystem,name:"transformFeedback"},dm.add($y);var Zy=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"init",value:function(e){this.screen=new zm(0,0,e.width,e.height),this.element=e.view||gp.ADAPTER.createCanvas(),this.resolution=e.resolution||gp.RESOLUTION,this.autoDensity=!!e.autoDensity}},{key:"resizeView",value:function(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);var n=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.element.style.width="".concat(n,"px"),this.element.style.height="".concat(r,"px")),this.renderer.emit("resize",n,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}},{key:"destroy",value:function(e){var t;e&&(null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element));this.renderer=null,this.element=null,this.screen=null}}]),e}();Zy.defaultOptions={width:800,height:600,resolution:gp.RESOLUTION,autoDensity:!1},Zy.extension={type:[um.RendererSystem,um.CanvasRendererSystem],name:"_view"},dm.add(Zy),gp.PREFER_ENV=$f.WEBGL2,gp.STRICT_TEXTURE_CACHE=!1,gp.RENDER_OPTIONS=Pe(Pe(Pe(Pe({},Dg.defaultOptions),Mg.defaultOptions),Zy.defaultOptions),jy.defaultOptions),Object.defineProperties(gp,{WRAP_MODE:{get:function(){return Sm.defaultOptions.wrapMode},set:function(e){Wp("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Sm.defaultOptions.wrapMode=e}},SCALE_MODE:{get:function(){return Sm.defaultOptions.scaleMode},set:function(e){Wp("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Sm.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:function(){return Sm.defaultOptions.mipmap},set:function(e){Wp("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Sm.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:function(){return Sm.defaultOptions.anisotropicLevel},set:function(e){Wp("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Sm.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:function(){return Wp("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Pg.defaultResolution},set:function(e){Pg.defaultResolution=e}},FILTER_MULTISAMPLE:{get:function(){return Wp("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Pg.defaultMultisample},set:function(e){Pg.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:function(){return Ig.defaultMaxTextures},set:function(e){Wp("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ig.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:function(){return Ig.defaultBatchSize},set:function(e){Wp("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ig.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:function(){return Ig.canUploadSameBuffer},set:function(e){Wp("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ig.canUploadSameBuffer=e}},GC_MODE:{get:function(){return Yy.defaultMode},set:function(e){Wp("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Yy.defaultMode=e}},GC_MAX_IDLE:{get:function(){return Yy.defaultMaxIdle},set:function(e){Wp("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Yy.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:function(){return Yy.defaultCheckCountMax},set:function(e){Wp("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Yy.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:function(){return xg.defaultVertexPrecision},set:function(e){Wp("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),xg.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:function(){return xg.defaultFragmentPrecision},set:function(e){Wp("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),xg.defaultFragmentPrecision=e}}});var Qy=function(e){return e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e}(Qy||{}),Jy=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l(this,e),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=n,this.priority=r,this.once=i}return d(e,[{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.fn===e&&this.context===t}},{key:"emit",value:function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}},{key:"connect",value:function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t}}]),e}(),eb=function(){function e(){var t=this;l(this,e),this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Jy(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return d(e,[{key:"_requestIfNeeded",value:function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}},{key:"_cancelIfNeeded",value:function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}},{key:"_startIfPossible",value:function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qy.NORMAL;return this._addListener(new Jy(e,t,n))}},{key:"addOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qy.NORMAL;return this._addListener(new Jy(e,t,n,!0))}},{key:"_addListener",value:function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this}},{key:"remove",value:function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}},{key:"count",get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e}},{key:"start",value:function(){this.started||(this.started=!0,this._requestIfNeeded())}},{key:"stop",value:function(){this.started&&(this.started=!1,this._cancelIfNeeded())}},{key:"destroy",value:function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}},{key:"update",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(n>this.lastTime){if((t=this.elapsedMS=n-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=n-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=n-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*e.targetFPMS;for(var i=this._head,a=i.next;a;)a=a.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=n}},{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var n=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,n)/1e3,e.targetFPMS);this._maxElapsedMS=1/r}},{key:"maxFPS",get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}}],[{key:"shared",get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}},{key:"system",get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}}]),e}(),tb=eb;tb.targetFPMS=.06,Object.defineProperties(gp,{TARGET_FPMS:{get:function(){return tb.targetFPMS},set:function(e){Wp("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),tb.targetFPMS=e}}});var nb=function(){function e(){l(this,e)}return d(e,null,[{key:"init",value:function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Qy.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?tb.shared:new tb,e.autoStart&&this.start()}},{key:"destroy",value:function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}}}]),e}();nb.extension=um.Application,dm.add(nb);var rb=[];function ib(e){var t,n=Gy(rb);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.test(e))return new r(e)}}catch(i){n.e(i)}finally{n.f()}throw new Error("Unable to auto-detect a suitable renderer.")}dm.handleByList(um.Renderer,rb);var ab="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",ob="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",sb=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"contextChange",value:function(e){var t;if(1===this.renderer.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=pp.HIGH?this.multisample=pp.HIGH:t>=pp.MEDIUM?this.multisample=pp.MEDIUM:t>=pp.LOW?this.multisample=pp.LOW:this.multisample=pp.NONE}},{key:"destroy",value:function(){}}]),e}();sb.extension={type:um.RendererSystem,name:"_multisample"},dm.add(sb);var lb=d((function e(t){l(this,e),this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0})),ub=function(){function e(t){l(this,e),this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return d(e,[{key:"destroy",value:function(){this.renderer=null}},{key:"contextChange",value:function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}},{key:"bind",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}},{key:"unbind",value:function(e){this.gl.bindBuffer(e,null)}},{key:"bindBufferBase",value:function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}}},{key:"bindBufferRange",value:function(e,t,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var a=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,a.buffer,256*n,256)}},{key:"update",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var i=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,i)}}},{key:"dispose",value:function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}}},{key:"disposeAll",value:function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}},{key:"createGLBuffer",value:function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new lb(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}]),e}();ub.extension={type:um.RendererSystem,name:"buffer"},dm.add(ub);var cb=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"render",value:function(e,t){var n,r,i,a,o,s=this.renderer;if(t&&(r=t.renderTexture,i=t.clear,a=t.transform,o=t.skipUpdateTransform),this.renderingToScreen=!r,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=a,!s.context.isLost){if(r||(this.lastObjectRendered=e),!o){var l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}s.renderTexture.bind(r),s.batch.currentRenderer.start(),(null!==(n=i)&&void 0!==n?n:s.background.clearBeforeRender)&&s.renderTexture.clear(),e.render(s),s.batch.currentRenderer.flush(),r&&(t.blit&&s.framebuffer.blit(),r.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}},{key:"destroy",value:function(){this.renderer=null,this.lastObjectRendered=null}}]),e}();cb.extension={type:um.RendererSystem,name:"objectRenderer"},dm.add(cb);var hb=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this)).type=Zf.WEBGL,e=Object.assign({},gp.RENDER_OPTIONS,e),r.gl=null,r.CONTEXT_UID=0,r.globalUniforms=new wg({projectionMatrix:new Ym},!0);var i={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:n.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};return r.setup(i),"useContextAlpha"in e&&(Wp("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&"notMultiplied"!==e.useContextAlpha,e.backgroundAlpha=!1===e.useContextAlpha?1:e.backgroundAlpha),r._plugin.rendererPlugins=n.__plugins,r.options=e,r.startup.run(r.options),r}return d(n,[{key:"render",value:function(e,t){this.objectRenderer.render(e,t)}},{key:"resize",value:function(e,t){this._view.resizeView(e,t)}},{key:"reset",value:function(){return this.runners.reset.emit(),this}},{key:"clear",value:function(){this.renderTexture.bind(),this.renderTexture.clear()}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),lm(v(n.prototype),"destroy",this).call(this)}},{key:"plugins",get:function(){return this._plugin.plugins}},{key:"multisample",get:function(){return this._multisample.multisample}},{key:"width",get:function(){return this._view.element.width}},{key:"height",get:function(){return this._view.element.height}},{key:"resolution",get:function(){return this._view.resolution},set:function(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}},{key:"autoDensity",get:function(){return this._view.autoDensity}},{key:"view",get:function(){return this._view.element}},{key:"screen",get:function(){return this._view.screen}},{key:"lastObjectRendered",get:function(){return this.objectRenderer.lastObjectRendered}},{key:"renderingToScreen",get:function(){return this.objectRenderer.renderingToScreen}},{key:"rendererLogId",get:function(){return"WebGL ".concat(this.context.webGLVersion)}},{key:"clearBeforeRender",get:function(){return Wp("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}},{key:"useContextAlpha",get:function(){return Wp("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}},{key:"preserveDrawingBuffer",get:function(){return Wp("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}},{key:"backgroundColor",get:function(){return Wp("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color},set:function(e){Wp("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}},{key:"backgroundAlpha",get:function(){return Wp("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha},set:function(e){Wp("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}},{key:"powerPreference",get:function(){return Wp("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}},{key:"generateTexture",value:function(e,t){return this.textureGenerator.generateTexture(e,t)}}],[{key:"test",value:function(e){return(null===e||void 0===e||!e.forceCanvas)&&Kp()}}]),n}(Wy),db=hb;db.extension={type:um.Renderer,priority:1},db.__plugins={},db.__systems={},dm.handleByMap(um.RendererPlugin,db.__plugins),dm.handleByMap(um.RendererSystem,db.__systems),dm.add(db);var fb=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a=r||{},o=a.width,s=a.height;(i=t.call(this,o,s)).items=[],i.itemDirtyIds=[];for(var u=0;u<e;u++){var c=new Sm;i.items.push(c),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return d(n,[{key:"initFromArray",value:function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof xm?this.addResourceAt(e[n],n):this.addResourceAt(bm(e[n],t),n))}},{key:"dispose",value:function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}},{key:"addResourceAt",value:function(e,t){if(!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}},{key:"bind",value:function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");lm(v(n.prototype),"bind",this).call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}},{key:"unbind",value:function(e){lm(v(n.prototype),"unbind",this).call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}},{key:"load",value:function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load}}]),n}(xm),pb=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a,o,s=r||{},u=s.width,c=s.height;return Array.isArray(e)?(a=e,o=e.length):o=e,i=t.call(this,o,{width:u,height:c}),a&&i.initFromArray(a,r),i}return d(n,[{key:"addBaseTextureAt",value:function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}},{key:"bind",value:function(e){lm(v(n.prototype),"bind",this).call(this,e),e.target=np.TEXTURE_2D_ARRAY}},{key:"upload",value:function(e,t,n){var r=this.length,i=this.itemDirtyIds,a=this.items,o=e.gl;n.dirtyId<0&&o.texImage3D(o.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,t.format,n.type,null);for(var s=0;s<r;s++){var l=a[s];i[s]<l.dirtyId&&(i[s]=l.dirtyId,l.valid&&o.texSubImage3D(o.TEXTURE_2D_ARRAY,0,0,0,s,l.resource.width,l.resource.height,1,t.format,n.type,l.resource.source))}return!0}}]),n}(fb),vb=function(e){p(n,e);var t=g(n);function n(e){return l(this,n),t.call(this,e)}return d(n,null,[{key:"test",value:function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}]),n}(Ug),mb=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a=r||{},o=a.width,s=a.height,u=a.autoLoad,c=a.linkBaseTexture;if(e&&e.length!==n.SIDES)throw new Error("Invalid length. Got ".concat(e.length,", expected 6"));i=t.call(this,6,{width:o,height:s});for(var h=0;h<n.SIDES;h++)i.items[h].target=np.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=!1!==c,e&&i.initFromArray(e,r),!1!==u&&i.load(),i}return d(n,[{key:"bind",value:function(e){lm(v(n.prototype),"bind",this).call(this,e),e.target=np.TEXTURE_CUBE_MAP}},{key:"addBaseTextureAt",value:function(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=np.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}},{key:"upload",value:function(e,t,r){for(var i=this.itemDirtyIds,a=0;a<n.SIDES;a++){var o=this.items[a];(i[a]<o.dirtyId||r.dirtyId<t.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[a]=o.dirtyId):i[a]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[a]=-1))}return!0}}],[{key:"test",value:function(e){return Array.isArray(e)&&e.length===n.SIDES}}]),n}(fb),gb=mb;gb.SIDES=6;var yb=function(e){p(n,e);var t=g(n);function n(e,r){var i,a,o,s;return l(this,n),r=r||{},"string"===typeof e?(o=n.EMPTY,s=e):(o=e,s=null),(a=t.call(this,o)).url=s,a.crossOrigin=null===(i=r.crossOrigin)||void 0===i||i,a.alphaMode="number"===typeof r.alphaMode?r.alphaMode:null,a._load=null,!1!==r.autoLoad&&a.load(),a}return d(n,[{key:"load",value:function(){var e=this;return this._load||(this._load=new Promise(function(){var t=_e(ye().mark((function t(n,r){var i,a,o;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.url){t.next=3;break}return n(e),t.abrupt("return");case 3:return t.prev=3,t.next=6,gp.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});case 6:if(i=t.sent,!e.destroyed){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,i.blob();case 11:if(a=t.sent,!e.destroyed){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,createImageBitmap(a,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===lp.UNPACK?"premultiply":"none"});case 16:if(o=t.sent,!e.destroyed){t.next=19;break}return t.abrupt("return");case 19:e.source=o,e.update(),n(e),t.next=30;break;case 24:if(t.prev=24,t.t0=t.catch(3),!e.destroyed){t.next=28;break}return t.abrupt("return");case 28:r(t.t0),e.onError.emit(t.t0);case 30:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e,n){return t.apply(this,arguments)}}())),this._load}},{key:"upload",value:function(e,t,r){return this.source instanceof ImageBitmap?("number"===typeof this.alphaMode&&(t.alphaMode=this.alphaMode),lm(v(n.prototype),"upload",this).call(this,e,t,r)):(this.load(),!1)}},{key:"dispose",value:function(){this.source instanceof ImageBitmap&&this.source.close(),lm(v(n.prototype),"dispose",this).call(this),this._load=null}}],[{key:"test",value:function(e){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&("string"===typeof e||e instanceof ImageBitmap)}},{key:"EMPTY",get:function(){var e;return n._EMPTY=null!==(e=n._EMPTY)&&void 0!==e?e:gp.ADAPTER.createCanvas(0,0),n._EMPTY}}]),n}(Ug),bb=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),r=r||{},(i=t.call(this,gp.ADAPTER.createCanvas()))._width=0,i._height=0,i.svg=e,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return d(n,[{key:"load",value:function(){var e=this;return this._load||(this._load=new Promise((function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},n.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(e.svg))))}e._loadSvg()}))),this._load}},{key:"_loadSvg",value:function(){var e=this,t=new Image;Ug.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,a=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,a=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),a=Math.round(a);var o=e.source;o.width=i,o.height=a,o._pixiId="canvas_".concat(Wv()),o.getContext("2d").drawImage(t,0,0,n,r,0,0,i,a),e._resolve(),e._resolve=null}}}},{key:"dispose",value:function(){lm(v(n.prototype),"dispose",this).call(this),this._resolve=null,this._crossorigin=null}}],[{key:"getSize",value:function(e){var t=n.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}},{key:"test",value:function(e,t){return"svg"===t||"string"===typeof e&&e.startsWith("data:image/svg+xml")||"string"===typeof e&&n.SVG_XML.test(e)}}]),n}(Ug),_b=bb;_b.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_b.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var xb=function(e){p(n,e);var t=g(n);function n(e,r){var i;if(l(this,n),r=r||{},!(e instanceof HTMLVideoElement)){var a=document.createElement("video");a.setAttribute("preload","auto"),a.setAttribute("webkit-playsinline",""),a.setAttribute("playsinline",""),"string"===typeof e&&(e=[e]);var o=e[0].src||e[0];Ug.crossOrigin(a,o,r.crossorigin);for(var s=0;s<e.length;++s){var u=document.createElement("source"),c=e[s],h=c.src,d=c.mime,f=(h=h||e[s]).split("?").shift().toLowerCase(),p=f.slice(f.lastIndexOf(".")+1);d=d||n.MIME_TYPES[p]||"video/".concat(p),u.src=h,u.type=d,a.appendChild(u)}e=a}return(i=t.call(this,e)).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(m(i)),i._onError=i._onError.bind(m(i)),!1!==r.autoLoad&&i.load(),i}return d(n,[{key:"update",value:function(){if(!this.destroyed){var e=tb.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(lm(v(n.prototype),"update",this).call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}},{key:"load",value:function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load}},{key:"_onError",value:function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}},{key:"_isSourcePlaying",value:function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}},{key:"_isSourceReady",value:function(){return this.source.readyState>2}},{key:"_onPlayStart",value:function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(tb.shared.add(this.update,this),this._isConnectedToTicker=!0)}},{key:"_onPlayStop",value:function(){this._isConnectedToTicker&&(tb.shared.remove(this.update,this),this._isConnectedToTicker=!1)}},{key:"_onCanPlay",value:function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}},{key:"dispose",value:function(){this._isConnectedToTicker&&(tb.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),lm(v(n.prototype),"dispose",this).call(this)}},{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(tb.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(tb.shared.add(this.update,this),this._isConnectedToTicker=!0))}},{key:"updateFPS",get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)}}],[{key:"test",value:function(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||n.TYPES.includes(t)}}]),n}(Ug),Eb=xb;Eb.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],Eb.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},ym.push(yb,Hg,vb,Eb,_b,Em,gb,pb);var wb=function(){function e(){l(this,e),this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new _m("disposeTransformFeedback")}return d(e,[{key:"bindBuffer",value:function(e,t){this.buffers[e]=t}},{key:"destroy",value:function(){this.disposeRunner.emit(this,!1)}}]),e}(),Tb="7.2.4",Sb=function(){function e(){l(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return d(e,[{key:"isEmpty",value:function(){return this.minX>this.maxX||this.minY>this.maxY}},{key:"clear",value:function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}},{key:"getRectangle",value:function(e){return this.minX>this.maxX||this.minY>this.maxY?zm.EMPTY:((e=e||new zm(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}},{key:"addPoint",value:function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}},{key:"addPointMatrix",value:function(e,t){var n=e.a,r=e.b,i=e.c,a=e.d,o=e.tx,s=e.ty,l=n*t.x+i*t.y+o,u=r*t.x+a*t.y+s;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}},{key:"addQuad",value:function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,a=e[0],o=e[1];t=a<t?a:t,n=o<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[2])<t?a:t,n=(o=e[3])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[4])<t?a:t,n=(o=e[5])<n?o:n,r=a>r?a:r,i=o>i?o:i,t=(a=e[6])<t?a:t,n=(o=e[7])<n?o:n,r=a>r?a:r,i=o>i?o:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i}},{key:"addFrame",value:function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)}},{key:"addFrameMatrix",value:function(e,t,n,r,i){var a=e.a,o=e.b,s=e.c,l=e.d,u=e.tx,c=e.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,v=a*t+s*n+u,m=o*t+l*n+c;h=v<h?v:h,d=m<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=a*r+s*n+u)<h?v:h,d=(m=o*r+l*n+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=a*t+s*i+u)<h?v:h,d=(m=o*t+l*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=a*r+s*i+u)<h?v:h,d=(m=o*r+l*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p}},{key:"addVertexData",value:function(e,t,n){for(var r=this.minX,i=this.minY,a=this.maxX,o=this.maxY,s=t;s<n;s+=2){var l=e[s],u=e[s+1];r=l<r?l:r,i=u<i?u:i,a=l>a?l:a,o=u>o?u:o}this.minX=r,this.minY=i,this.maxX=a,this.maxY=o}},{key:"addVertices",value:function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)}},{key:"addVerticesMatrix",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,o=e.a,s=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,m=n;m<r;m+=2){var g=t[m],y=t[m+1],b=o*g+l*y+c,_=u*y+s*g+h;d=Math.min(d,b-i),p=Math.max(p,b+i),f=Math.min(f,_-a),v=Math.max(v,_+a)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=v}},{key:"addBounds",value:function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i}},{key:"addBoundsMask",value:function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=a){var o=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=a>u?a:u}}},{key:"addBoundsMatrix",value:function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}},{key:"addBoundsArea",value:function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=a){var o=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<o?n:o,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=a>u?a:u}}},{key:"pad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}},{key:"addFramePad",value:function(e,t,n,r,i,a){e-=i,t-=a,n+=i,r+=a,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}]),e}(),kb=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).tempDisplayObjectParent=null,e.transform=new ig,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new Sb,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return d(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"_recursivePostUpdateTransform",value:function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}},{key:"updateTransform",value:function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}},{key:"getBounds",value:function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new zm),t=this._boundsRect),this._bounds.getRectangle(t)}},{key:"getLocalBounds",value:function(e){e||(this._localBoundsRect||(this._localBoundsRect=new zm),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Sb);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var a=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,a}},{key:"toGlobal",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}},{key:"toLocal",value:function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}},{key:"setParent",value:function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}},{key:"removeFromParent",value:function(){var e;null===(e=this.parent)||void 0===e||e.removeChild(this)}},{key:"setTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=l,this}},{key:"destroy",value:function(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}},{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new Cb),this.tempDisplayObjectParent}},{key:"enableTempParent",value:function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e}},{key:"disableTempParent",value:function(e){this.parent=e}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"angle",get:function(){return this.transform.rotation*Fm},set:function(e){this.transform.rotation=e*Bm}},{key:"zIndex",get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(0===n._maskRefCount&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}],[{key:"mixin",value:function(e){for(var t=Object.keys(e),r=0;r<t.length;++r){var i=t[r];Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}}]),n}(Lp),Cb=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).sortDirty=null,e}return d(n)}(kb);kb.prototype.displayObjectUpdateTransform=kb.prototype.updateTransform;var Ab=new Ym;function Ib(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var Ob=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).children=[],e.sortableChildren=n.defaultSortableChildren,e.sortDirty=!1,e}return d(n,[{key:"onChildrenChange",value:function(e){}},{key:"addChild",value:function(){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.addChild(e<0||arguments.length<=e?void 0:arguments[e]);else{var t=arguments.length<=0?void 0:arguments[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return arguments.length<=0?void 0:arguments[0]}},{key:"addChildAt",value:function(e,t){if(t<0||t>this.children.length)throw new Error("".concat(e,"addChildAt: The index ").concat(t," supplied is out of bounds ").concat(this.children.length));return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}},{key:"swapChildren",value:function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}}},{key:"getChildIndex",value:function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}},{key:"setChildIndex",value:function(e,t){if(t<0||t>=this.children.length)throw new Error("The index ".concat(t," supplied is out of bounds ").concat(this.children.length));var n=this.getChildIndex(e);zv(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}},{key:"getChildAt",value:function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index (".concat(e,") does not exist."));return this.children[e]}},{key:"removeChild",value:function(){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.removeChild(e<0||arguments.length<=e?void 0:arguments[e]);else{var t=arguments.length<=0?void 0:arguments[0],n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,zv(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return arguments.length<=0?void 0:arguments[0]}},{key:"removeChildAt",value:function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,zv(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}},{key:"removeChildren",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length,r=t,i=n-r;if(i>0&&i<=n){e=this.children.splice(r,i);for(var a=0;a<e.length;++a)e[a].parent=null,e[a].transform&&(e[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var o=0;o<e.length;++o)e[o].emit("removed",this),this.emit("childRemoved",e[o],this,o);return e}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}},{key:"sortChildren",value:function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(Ib),this.sortDirty=!1}},{key:"updateTransform",value:function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}}},{key:"calculateBounds",value:function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}},{key:"getLocalBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=lm(v(n.prototype),"getLocalBounds",this).call(this,e);if(!t)for(var i=0,a=this.children.length;i<a;++i){var o=this.children[i];o.visible&&o.updateTransform()}return r}},{key:"_calculateBounds",value:function(){}},{key:"_renderWithCulling",value:function(e){var t=e.renderTexture.sourceFrame;if(t.width>0&&t.height>0){var r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==n.prototype._render&&(r=this.getBounds(!0));var a=e.projection.transform;if(a&&(i?(i=Ab.copyFrom(i)).prepend(a):i=a),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var o=0,s=this.children.length;o<s;++o){var l=this.children[o],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}}},{key:"render",value:function(e){var t;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||null!==(t=this.filters)&&void 0!==t&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var n=0,r=this.children.length;n<r;++n)this.children[n].render(e)}}},{key:"renderAdvanced",value:function(e){var t,n,r,i=this.filters,a=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var o=0;o<i.length;o++)i[o].enabled&&this._enabledFilters.push(i[o])}var s=i&&(null===(t=this._enabledFilters)||void 0===t?void 0:t.length)||a&&(!a.isMaskData||a.enabled&&(a.autoDetect||a.type!==dp.NONE));if(s&&e.batch.flush(),i&&null!==(n=this._enabledFilters)&&void 0!==n&&n.length&&e.filter.push(this,this._enabledFilters),a&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}s&&e.batch.flush(),a&&e.mask.pop(this),i&&null!==(r=this._enabledFilters)&&void 0!==r&&r.length&&e.filter.pop()}},{key:"_render",value:function(e){}},{key:"destroy",value:function(e){lm(v(n.prototype),"destroy",this).call(this),this.sortDirty=!1;var t="boolean"===typeof e?e:null===e||void 0===e?void 0:e.children,r=this.removeChildren(0,this.children.length);if(t)for(var i=0;i<r.length;++i)r[i].destroy(e)}},{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),n}(kb),Pb=Ob;Pb.defaultSortableChildren=!1,Pb.prototype.containerUpdateTransform=Pb.prototype.updateTransform,Object.defineProperties(gp,{SORTABLE_CHILDREN:{get:function(){return Pb.defaultSortableChildren},set:function(e){Wp("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Pb.defaultSortableChildren=e}}});var Mb=new Hm,Rb=new Uint16Array([0,1,2,0,2,3]),Nb=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this))._anchor=new ng(r._onAnchorUpdate,m(r),e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tintColor=new Tv(16777215),r._tintRGB=null,r.tint=16777215,r.blendMode=Jf.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||Gg.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=Rb,r.pluginName="batch",r.isSprite=!0,r._roundPixels=gp.ROUND_PIXELS,r}return d(n,[{key:"_onTextureUpdate",value:function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Vv(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Vv(this.scale.y)*this._height/this._texture.orig.height)}},{key:"_onAnchorUpdate",value:function(){this._transformID=-1,this._transformTrimmedID=-1}},{key:"calculateVertices",value:function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,f=0,p=0,v=0;if(u?(d=(f=u.x-h._x*c.width)+u.width,p=(v=u.y-h._y*c.height)+u.height):(d=(f=-h._x*c.width)+c.width,p=(v=-h._y*c.height)+c.height),l[0]=n*f+i*v+o,l[1]=a*v+r*f+s,l[2]=n*d+i*v+o,l[3]=a*v+r*d+s,l[4]=n*d+i*p+o,l[5]=a*p+r*d+s,l[6]=n*f+i*p+o,l[7]=a*p+r*f+s,this._roundPixels)for(var m=gp.RESOLUTION,g=0;g<l.length;++g)l[g]=Math.round(l[g]*m)/m}}},{key:"calculateTrimmedVertices",value:function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,a=i.a,o=i.b,s=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,f=-r._y*n.height,p=f+n.height;t[0]=a*h+s*f+u,t[1]=l*f+o*h+c,t[2]=a*d+s*f+u,t[3]=l*f+o*d+c,t[4]=a*d+s*p+u,t[5]=l*p+o*d+c,t[6]=a*h+s*p+u,t[7]=l*p+o*h+c}},{key:"_render",value:function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}},{key:"_calculateBounds",value:function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}},{key:"getLocalBounds",value:function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new Sb),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zm),e=this._localBoundsRect),this._localBounds.getRectangle(e)):lm(v(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"containsPoint",value:function(e){this.worldTransform.applyInverse(e,Mb);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return Mb.x>=r&&Mb.x<r+t&&(i=-n*this.anchor.y,Mb.y>=i&&Mb.y<i+n)}},{key:"destroy",value:function(e){if(lm(v(n.prototype),"destroy",this).call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:null===e||void 0===e?void 0:e.texture){var t="boolean"===typeof e?e:null===e||void 0===e?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=Vv(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=Vv(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}},{key:"tintValue",get:function(){return this._tintColor.toNumber()}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Gg.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}],[{key:"from",value:function(e,t){return new n(e instanceof Gg?e:Gg.from(e,t))}}]),n}(Pb),Db=new Ym;kb.prototype._cacheAsBitmap=!1,kb.prototype._cacheData=null,kb.prototype._cacheAsBitmapResolution=null,kb.prototype._cacheAsBitmapMultisample=null;var Lb=d((function e(){l(this,e),this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}));Object.defineProperties(kb.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new Lb),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),kb.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},kb.prototype._initCachedDisplayObject=function(e){var t,n,r;if(null===(t=this._cacheData)||void 0===t||!t.sprite){var i=this.alpha;this.alpha=1,e.batch.flush();var a=this.getLocalBounds(null,!0).clone();if(null!==(n=this.filters)&&void 0!==n&&n.length){var o=this.filters[0].padding;a.pad(o)}a.ceil(gp.RESOLUTION);var s=e.renderTexture.current,l=e.renderTexture.sourceFrame.clone(),u=e.renderTexture.destinationFrame.clone(),c=e.projection.transform,h=Wg.create({width:a.width,height:a.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(r=this.cacheAsBitmapMultisample)&&void 0!==r?r:e.multisample}),d="cacheAsBitmap_".concat(Wv());this._cacheData.textureCacheId=d,Sm.addToCache(h.baseTexture,d),Gg.addToCache(h,d);var f=this.transform.localTransform.copyTo(Db).invert().translate(-a.x,-a.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=c,e.renderTexture.bind(s,l,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var p=new Nb(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-a.x/a.width,p.anchor.y=-a.y/a.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},kb.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},kb.prototype._initCachedDisplayObjectCanvas=function(e){var t;if(null===(t=this._cacheData)||void 0===t||!t.sprite){var n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=e.canvasContext.activeContext,a=e._projTransform;n.ceil(gp.RESOLUTION);var o=Wg.create({width:n.width,height:n.height}),s="cacheAsBitmap_".concat(Wv());this._cacheData.textureCacheId=s,Sm.addToCache(o.baseTexture,s),Gg.addToCache(o,s);var l=Db;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new Nb(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-n.x/n.width,u.anchor.y=-n.y/n.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},kb.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},kb.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},kb.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Sm.removeFromCache(this._cacheData.textureCacheId),Gg.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},kb.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},kb.prototype.name=null,Pb.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(var i=0,a=this.children.length;i<a;i++){var o=this.children[i];if(o.getChildByName){var s=o.getChildByName(e,!0);if(s)return s}}return null},kb.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Hm,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var Fb=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return l(this,n),(e=t.call(this,ab,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})).alpha=r,e}return d(n,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),n}(Pg),Bb={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},Ub=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var Hb=function(e){p(n,e);var t=g(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Pg.defaultResolution,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;l(this,n);var u=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",a="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var o=0;o<e;o++){var s=n.replace("%index%",o.toString());a+=s=s.replace("%sampleIndex%","".concat(o-(r-1),".0")),a+="\n"}return(i=i.replace("%blur%",a)).replace("%size%",e.toString())}(s,e),c=function(e){for(var t,n=Bb[e],r=n.length,i=Ub,a="",o=0;o<e;o++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",o.toString());t=o,o>=r&&(t=e-o-1),a+=s=s.replace("%value%",n[t].toString()),a+="\n"}return(i=i.replace("%blur%",a)).replace("%size%",e.toString())}(s);return(r=t.call(this,u,c)).horizontal=e,r.resolution=o,r._quality=0,r.quality=a,r.blur=i,r}return d(n,[{key:"apply",value:function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),a=e.renderer,o=t,s=i;this.state.blend=!1,e.applyFilter(this,o,s,up.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(o,up.BLIT),this.uniforms.uSampler=s;var u=s;s=o,o=u,a.shader.bind(this),a.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}}},{key:"blur",get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),n}(Pg),jb=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pg.defaultResolution,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;return l(this,n),(e=t.call(this))._repeatEdgePixels=!1,e.blurXFilter=new Hb(!0,r,i,a,o),e.blurYFilter=new Hb(!1,r,i,a,o),e.resolution=a,e.quality=i,e.blur=r,e.repeatEdgePixels=!1,e}return d(n,[{key:"apply",value:function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),a=Math.abs(this.blurYFilter.strength);if(i&&a){var o=e.getFilterTexture();this.blurXFilter.apply(e,t,o,up.CLEAR),this.blurYFilter.apply(e,o,n,r),e.returnFilterTexture(o)}else a?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)}},{key:"updatePadding",value:function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()}},{key:"blendMode",get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e}},{key:"repeatEdgePixels",get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()}}]),n}(Pg),zb=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);var r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,ob,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)).alpha=1,e}return d(n,[{key:"_loadMatrix",value:function(e){var t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t}},{key:"_multiply",value:function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}},{key:"_colorMatrix",value:function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}},{key:"brightness",value:function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"tint",value:function(e,t){var n=It(Tv.shared.setValue(e).toArray(),3),r=[n[0],0,0,0,0,0,n[1],0,0,0,0,0,n[2],0,0,0,0,0,1,0];this._loadMatrix(r,t)}},{key:"greyscale",value:function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"blackAndWhite",value:function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}},{key:"hue",value:function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,a=(0,Math.sqrt)(i),o=[n+(1-n)*i,i*(1-n)-a*r,i*(1-n)+a*r,0,0,i*(1-n)+a*r,n+i*(1-n),i*(1-n)-a*r,0,0,i*(1-n)-a*r,i*(1-n)+a*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(o,t)}},{key:"contrast",value:function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)}},{key:"saturate",value:function(){var e=arguments.length>1?arguments[1]:void 0,t=2*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/3+1,n=-.5*(t-1),r=[t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}},{key:"desaturate",value:function(){this.saturate(-1)}},{key:"negative",value:function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}},{key:"sepia",value:function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}},{key:"technicolor",value:function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}},{key:"polaroid",value:function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}},{key:"toBGR",value:function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}},{key:"kodachrome",value:function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}},{key:"browni",value:function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}},{key:"vintage",value:function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}},{key:"colorTone",value:function(e,t,n,r,i){e=e||.2,t=t||.15,n=n||16770432,r=r||3375104;var a=Tv.shared,o=It(a.setValue(n).toArray(),3),s=o[0],l=o[1],u=o[2],c=It(a.setValue(r).toArray(),3),h=c[0],d=c[1],f=c[2],p=[.3,.59,.11,0,0,s,l,u,e,0,h,d,f,t,0,s-h,l-d,u-f,0,0];this._loadMatrix(p,i)}},{key:"night",value:function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"predator",value:function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"lsd",value:function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}},{key:"reset",value:function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}},{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),n}(Pg);zb.prototype.grayscale=zb.prototype.greyscale;var Vb=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a=new Ym;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:a,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})).maskSprite=e,i.maskMatrix=a,null!==r&&void 0!==r||(r=20),i.scale=new Hm(r,r),i}return d(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,a=Math.sqrt(i.a*i.a+i.b*i.b),o=Math.sqrt(i.c*i.c+i.d*i.d);0!==a&&0!==o&&(this.uniforms.rotation[0]=i.a/a,this.uniforms.rotation[1]=i.b/a,this.uniforms.rotation[2]=i.c/o,this.uniforms.rotation[3]=i.d/o),e.applyFilter(this,t,n,r)}},{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),n}(Pg),Gb=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}return d(n)}(Pg),Wb=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();return l(this,n),(e=t.call(this,ob,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})).noise=r,e.seed=i,e}return d(n,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),n}(Pg),Xb={AlphaFilter:Fb,BlurFilter:jb,BlurFilterPass:Hb,ColorMatrixFilter:zb,DisplacementFilter:Vb,FXAAFilter:Gb,NoiseFilter:Wb};Object.entries(Xb).forEach((function(e){var t=It(e,2),n=t[0],r=t[1];Object.defineProperty(Xb,n,{get:function(){return Wp("7.1.0","filters.".concat(n," has moved to ").concat(n)),r}})}));var Yb=function(){function e(){l(this,e),this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}return d(e,[{key:"init",value:function(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}},{key:"pauseUpdate",get:function(){return this._pauseUpdate},set:function(e){this._pauseUpdate=e}},{key:"addTickerListener",value:function(){!this.tickerAdded&&this.domElement&&(tb.system.add(this.tickerUpdate,this,Qy.INTERACTION),this.tickerAdded=!0)}},{key:"removeTickerListener",value:function(){this.tickerAdded&&(tb.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}},{key:"pointerMoved",value:function(){this._didMove=!0}},{key:"update",value:function(){if(this.domElement&&!this._pauseUpdate)if(this._didMove)this._didMove=!1;else{var e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}}},{key:"tickerUpdate",value:function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())}}]),e}(),Kb=new Yb,qb=function(){function e(t){l(this,e),this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=e.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Hm,this.page=new Hm,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return d(e,[{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"data",get:function(){return this}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"initEvent",value:function(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"initUIEvent",value:function(e,t,n,r,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),e}(),$b=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).client=new Hm,e.movement=new Hm,e.offset=new Hm,e.global=new Hm,e.screen=new Hm,e}return d(n,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"x",get:function(){return this.clientX}},{key:"y",get:function(){return this.clientY}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getLocalPosition",value:function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}},{key:"initMouseEvent",value:function(e,t,n,r,i,a,o,s,l,u,c,h,d,f,p){throw new Error("Method not implemented.")}}]),n}(qb),Zb=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).width=0,e.height=0,e.isPrimary=!1,e}return d(n,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}}]),n}($b),Qb=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).DOM_DELTA_PIXEL=0,e.DOM_DELTA_LINE=1,e.DOM_DELTA_PAGE=2,e}return d(n)}($b);Qb.DOM_DELTA_PIXEL=0,Qb.DOM_DELTA_LINE=1,Qb.DOM_DELTA_PAGE=2;var Jb=new Hm,e_=new Hm,t_=function(){function e(t){l(this,e),this.dispatch=new Lp,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}return d(e,[{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"dispatchEvent",value:function(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e)}}},{key:"hitTest",value:function(e,t){Kb.pauseUpdate=!0;var n=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,Jb.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=0,i=n.length-1;r<i;r++)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(var a=n.length-2;a>=0;a--)if(e.currentTarget=n[a],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"all",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._allInteractiveElements;if(0!==r.length){e.eventPhase=e.BUBBLING_PHASE;for(var i=Array.isArray(t)?t:[t],a=function(t){i.forEach((function(i){e.currentTarget=r[t],n.notifyTarget(e,i)}))},o=r.length-1;o>=0;o--)a(o)}}},{key:"propagationPath",value:function(e){for(var t=[e],n=0;n<2048&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}},{key:"hitTestMoveRecursive",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!1;if(this._interactivePrune(e))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(Kb.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var s=e.children,l=s.length-1;l>=0;l--){var u=s[l],c=this.hitTestMoveRecursive(u,this._isInteractive(t)?t:u.eventMode,n,r,i,a||i(e,n));if(c){if(c.length>0&&!c[c.length-1].parent)continue;var h=e.isInteractive();(c.length>0||h)&&(h&&this._allInteractiveElements.push(e),c.push(e)),0===this._hitElements.length&&(this._hitElements=c),o=!0}}var d=this._isInteractive(t),f=e.isInteractive();return f&&f&&this._allInteractiveElements.push(e),a||this._hitElements.length>0?null:o?this._hitElements:d&&!i(e,n)&&r(e,n)?f?[e]:[]:null}},{key:"hitTestRecursive",value:function(e,t,n,r,i){if(this._interactivePrune(e)||i(e,n))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(Kb.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var a=e.children,o=a.length-1;o>=0;o--){var s=a[o],l=this.hitTestRecursive(s,this._isInteractive(t)?t:s.eventMode,n,r,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;var u=e.isInteractive();return(l.length>0||u)&&l.push(e),l}}var c=this._isInteractive(t),h=e.isInteractive();return c&&r(e,n)?h?[e]:[]:null}},{key:"_isInteractive",value:function(e){return"static"===e||"dynamic"===e}},{key:"_interactivePrune",value:function(e){return!(e&&!e.isMask&&e.visible&&e.renderable)||("none"===e.eventMode||("passive"===e.eventMode&&!e.interactiveChildren||!!e.isMask))}},{key:"hitPruneFn",value:function(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,e_),!e.hitArea.contains(e_.x,e_.y)))return!0;if(e._mask){var n,r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&(null===(n=r.containsPoint)||void 0===n||!n.call(r,t)))return!0}return!1}},{key:"hitTestFn",value:function(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}},{key:"notifyTarget",value:function(e,t){var n,r,i;t=null!==(n=t)&&void 0!==n?n:e.type;var a="on".concat(t);null===(r=(i=e.currentTarget)[a])||void 0===r||r.call(i,e);var o=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,o),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}},{key:"mapPointerDown",value:function(e){if(e instanceof Zb){var t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;this.dispatchEvent(t,n?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}}},{key:"mapPointerMove",value:function(e){var t,n;if(e instanceof Zb){this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;var r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;var i="mouse"===r.pointerType||"pen"===r.pointerType,a=this.trackingData(e.pointerId),o=this.findMountedTarget(a.overTargets);if((null===(t=a.overTargets)||void 0===t?void 0:t.length)>0&&o!==r.target){var s="mousemove"===e.type?"mouseout":"pointerout",l=this.createPointerEvent(e,s,o);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!r.composedPath().includes(o)){var u=this.createPointerEvent(e,"pointerleave",o);for(u.eventPhase=u.AT_TARGET;u.target&&!r.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),i&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(l)}if(o!==r.target){var c="mousemove"===e.type?"mouseover":"pointerover",h=this.clonePointerEvent(r,c);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");for(var d=null===o||void 0===o?void 0:o.parent;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){var f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==o&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}var p,v=[],m=null===(n=this.enableGlobalMoveEvents)||void 0===n||n;if(this.moveOnAll?v.push("pointermove"):this.dispatchEvent(r,"pointermove"),m&&v.push("globalpointermove"),"touch"===r.pointerType&&(this.moveOnAll?v.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),m&&v.push("globaltouchmove")),i)this.moveOnAll?v.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),m&&v.push("globalmousemove"),this.cursor=null===(p=r.target)||void 0===p?void 0:p.cursor;v.length>0&&this.all(r,v),this._allInteractiveElements.length=0,this._hitElements.length=0,a.overTargets=r.composedPath(),this.freeEvent(r)}}},{key:"mapPointerOver",value:function(e){var t;if(e instanceof Zb){var n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=null===(t=r.target)||void 0===t?void 0:t.cursor);var a=this.clonePointerEvent(r,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),i&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(a)}}},{key:"mapPointerOut",value:function(e){if(e instanceof Zb){var t=this.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(i),n&&this.dispatchEvent(i,"mouseout");var a=this.createPointerEvent(e,"pointerleave",r);for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseleave"),a.target=a.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(a)}this.cursor=null}}},{key:"mapPointerUp",value:function(e){if(e instanceof Zb){var t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var r=2===n.button;this.dispatchEvent(n,r?"rightup":"mouseup")}var i=this.trackingData(e.pointerId),a=this.findMountedTarget(i.pressTargetsByButton[e.button]),o=a;if(a&&!n.composedPath().includes(a)){for(var s=a;s&&!n.composedPath().includes(s);){if(n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var l=2===n.button;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}s=s.parent}delete i.pressTargetsByButton[e.button],o=s}if(o){var u=this.clonePointerEvent(n,"click");u.target=o,u.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:u.target,timeStamp:t});var c=i.clicksByButton[e.button];if(c.target===u.target&&t-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=u.target,c.timeStamp=t,u.detail=c.clickCount,"mouse"===u.pointerType){var h=2===u.button;this.dispatchEvent(u,h?"rightclick":"click")}else"touch"===u.pointerType&&this.dispatchEvent(u,"tap");this.dispatchEvent(u,"pointertap"),this.freeEvent(u)}this.freeEvent(n)}}},{key:"mapPointerUpOutside",value:function(e){if(e instanceof Zb){var t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){for(var i=n;i;)r.currentTarget=i,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}}},{key:"mapWheel",value:function(e){if(e instanceof Qb){var t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[0],n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}},{key:"createPointerEvent",value:function(e,t,n){var r,i=this.allocateEvent(Zb);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=null!==(r=null!==n&&void 0!==n?n:this.hitTest(i.global.x,i.global.y))&&void 0!==r?r:this._hitElements[0],"string"===typeof t&&(i.type=t),i}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(Qb);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(Zb);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!==t&&void 0!==t?t:n.type,n}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:"copyPointerData",value:function(e,t){e instanceof Zb&&t instanceof Zb&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}},{key:"copyMouseData",value:function(e,t){e instanceof $b&&t instanceof $b&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(var r=0,i=n.length;r<i&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(t,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}}]),e}(),n_={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},r_=function(){function e(t){var n=this;l(this,e),this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new t_(null),Kb.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Zb(null),this.rootWheelEvent=new Qb(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(Pe({},e.defaultEventFeatures),{set:function(e,t,r){return"globalMove"===t&&(n.rootBoundary.enableGlobalMoveEvents=r),e[t]=r,!0}}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}return d(e,[{key:"init",value:function(t){var n,r,i=this.renderer,a=i.view,o=i.resolution;this.setTargetElement(a),this.resolution=o,e._defaultEventMode=null!==(n=t.eventMode)&&void 0!==n?n:"auto",Object.assign(this.features,null!==(r=t.eventFeatures)&&void 0!==r?r:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}},{key:"resolutionChange",value:function(e){this.resolution=e}},{key:"destroy",value:function(){this.setTargetElement(null),this.renderer=null}},{key:"setCursor",value:function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor!==e){this.currentCursor=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n)}else t&&"string"===typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}}},{key:"pointer",get:function(){return this.rootPointerEvent}},{key:"onPointerDown",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=0,r=t.length;n<r;n++){var i=t[n],a=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerMove",value:function(e){if(this.features.move&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){Kb.pointerMoved();for(var t=this.normalizeToPointerData(e),n=0,r=t.length;n<r;n++){var i=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerUp",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){var t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);for(var n=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e),i=0,a=r.length;i<a;i++){var o=this.bootstrapEvent(this.rootPointerEvent,r[i]);o.type+=n,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerOverOut",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){for(var t=this.normalizeToPointerData(e),n=0,r=t.length;n<r;n++){var i=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onWheel",value:function(e){if(this.features.wheel){var t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}}},{key:"setTargetElement",value:function(e){this.removeEvents(),this.domElement=e,Kb.domElement=e,this.addEvents()}},{key:"addEvents",value:function(){if(!this.eventsAdded&&this.domElement){Kb.addTickerListener();var e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}}},{key:"removeEvents",value:function(){if(this.eventsAdded&&this.domElement){Kb.removeTickerListener();var e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}}},{key:"mapPositionToPoint",value:function(e,t,n){var r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};var i=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*i,e.y=(n-r.top)*(this.domElement.height/r.height)*i}},{key:"normalizeToPointerData",value:function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];"undefined"===typeof i.button&&(i.button=0),"undefined"===typeof i.buttons&&(i.buttons=1),"undefined"===typeof i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),"undefined"===typeof i.width&&(i.width=i.radiusX||1),"undefined"===typeof i.height&&(i.height=i.radiusY||1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="touch"),"undefined"===typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"===typeof i.pressure&&(i.pressure=i.force||.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),"undefined"===typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"===typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(globalThis.MouseEvent&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof globalThis.PointerEvent))t.push(e);else{var a=e;"undefined"===typeof a.isPrimary&&(a.isPrimary=!0),"undefined"===typeof a.width&&(a.width=1),"undefined"===typeof a.height&&(a.height=1),"undefined"===typeof a.tiltX&&(a.tiltX=0),"undefined"===typeof a.tiltY&&(a.tiltY=0),"undefined"===typeof a.pointerType&&(a.pointerType="mouse"),"undefined"===typeof a.pointerId&&(a.pointerId=1),"undefined"===typeof a.pressure&&(a.pressure=.5),"undefined"===typeof a.twist&&(a.twist=0),"undefined"===typeof a.tangentialPressure&&(a.tangentialPressure=0),a.isNormalized=!0,t.push(a)}return t}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}},{key:"bootstrapEvent",value:function(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=n_[e.type]||e.type),e}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}}],[{key:"defaultEventMode",get:function(){return this._defaultEventMode}}]),e}(),i_=r_;function a_(e){return"dynamic"===e||"static"===e}i_.extension={name:"events",type:[um.RendererSystem,um.CanvasRendererSystem]},i_.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},dm.add(i_);var o_={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var e;return null!==(e=this._internalInteractive)&&void 0!==e?e:a_(i_.defaultEventMode)},set interactive(e){Wp("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){var e;return null!==(e=this._internalEventMode)&&void 0!==e?e:i_.defaultEventMode},set eventMode(e){this._internalInteractive=a_(e),this._internalEventMode=e},isInteractive:function(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener:function(e,t,n){var r="function"===typeof t?void 0:t;e="boolean"===typeof n&&n||"object"===typeof n&&n.capture?"".concat(e,"capture"):e,t="function"===typeof t?t:t.handleEvent,this.on(e,t,r)},removeEventListener:function(e,t,n){var r="function"===typeof t?void 0:t;e="boolean"===typeof n&&n||"object"===typeof n&&n.capture?"".concat(e,"capture"):e,t="function"===typeof t?t:t.handleEvent,this.off(e,t,r)},dispatchEvent:function(e){if(!(e instanceof qb))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};kb.mixin(o_);var s_={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};kb.mixin(s_);var l_=100,u_=function(){function e(t){l(this,e),this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Dp.tablet||Dp.phone)&&this.createTouchHook();var n=document.createElement("div");n.style.width="".concat(l_,"px"),n.style.height="".concat(l_,"px"),n.style.position="absolute",n.style.top="".concat(0,"px"),n.style.left="".concat(0,"px"),n.style.zIndex=2..toString(),this.div=n,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return d(e,[{key:"isActive",get:function(){return this._isActive}},{key:"isMobileAccessibility",get:function(){return this._isMobileAccessibility}},{key:"createTouchHook",value:function(){var e=this,t=document.createElement("button");t.style.width="".concat(1,"px"),t.style.height="".concat(1,"px"),t.style.position="absolute",t.style.top="".concat(-1e3,"px"),t.style.left="".concat(-1e3,"px"),t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}},{key:"destroyTouchHook",value:function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}},{key:"activate",value:function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))}},{key:"deactivate",value:function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))}},{key:"updateAccessibleObjects",value:function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}}},{key:"update",value:function(){var e=performance.now();if(!(Dp.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.x,r=t.y,i=t.width,a=t.height,o=this.renderer,s=o.width,l=o.height,u=o.resolution,c=i/s*u,h=a/l*u,d=this.div;d.style.left="".concat(n,"px"),d.style.top="".concat(r,"px"),d.style.width="".concat(s,"px"),d.style.height="".concat(l,"px");for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,zv(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var v=p.hitArea,m=p.worldTransform;p.hitArea?(d.style.left="".concat((m.tx+v.x*m.a)*c,"px"),d.style.top="".concat((m.ty+v.y*m.d)*h,"px"),d.style.width="".concat(v.width*m.a*c,"px"),d.style.height="".concat(v.height*m.d*h,"px")):(v=p.getBounds(),this.capHitArea(v),d.style.left="".concat(v.x*c,"px"),d.style.top="".concat(v.y*h,"px"),d.style.width="".concat(v.width*c,"px"),d.style.height="".concat(v.height*h,"px"),d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}}},{key:"updateDebugHTML",value:function(e){e.innerHTML="type: ".concat(e.type,"</br> title : ").concat(e.title,"</br> tabIndex: ").concat(e.tabIndex)}},{key:"capHitArea",value:function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,r=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}},{key:"addChild",value:function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="".concat(l_,"px"),t.style.height="".concat(l_,"px"),t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject ".concat(e.tabIndex)),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}},{key:"_dispatchEvent",value:function(e,t){var n=e.target.displayObject,r=this.renderer.events.rootBoundary,i=Object.assign(new qb(r),{target:n});r.rootTarget=this.renderer.lastObjectRendered,t.forEach((function(e){return r.dispatchEvent(i,e)}))}},{key:"_onClick",value:function(e){this._dispatchEvent(e,["click","pointertap","tap"])}},{key:"_onFocus",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}},{key:"_onFocusOut",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}},{key:"_onKeyDown",value:function(e){9===e.keyCode&&this.activate()}},{key:"_onMouseMove",value:function(e){0===e.movementX&&0===e.movementY||this.deactivate()}},{key:"destroy",value:function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}]),e}();u_.extension={name:"accessibility",type:[um.RendererPlugin,um.CanvasRendererPlugin]},dm.add(u_);var c_=function(){function e(t){var n=this;l(this,e),this.stage=new Pb,t=Object.assign({forceCanvas:!1},t),this.renderer=ib(t),e._plugins.forEach((function(e){e.init.call(n,t)}))}return d(e,[{key:"render",value:function(){this.renderer.render(this.stage)}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}},{key:"destroy",value:function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(e){e.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}}]),e}(),h_=c_;h_._plugins=[],dm.handleByList(um.Application,h_._plugins);var d_=function(){function e(){l(this,e)}return d(e,null,[{key:"init",value:function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame((function(){return t.resize()})))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===globalThis.window)e=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n),t.render()}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}},{key:"destroy",value:function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}]),e}();d_.extension=um.Application,dm.add(d_);var f_={loader:um.LoadParser,resolver:um.ResolveParser,cache:um.CacheParser,detection:um.DetectionParser};dm.handle(um.Asset,(function(e){var t=e.ref;Object.entries(f_).filter((function(e){var n=It(e,1)[0];return!!t[n]})).forEach((function(e){var n,r=It(e,2),i=r[0],a=r[1];return dm.add(Object.assign(t[i],{extension:null!==(n=t[i].extension)&&void 0!==n?n:a}))}))}),(function(e){var t=e.ref;Object.keys(f_).filter((function(e){return!!t[e]})).forEach((function(e){return dm.remove(t[e])}))}));var p_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];l(this,e),this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}return d(e,[{key:"add",value:function(e){var t=this;e.forEach((function(e){t._assetList.push(e)})),this.verbose,this._isActive&&!this._isLoading&&this._next()}},{key:"_next",value:function(){var e=_e(ye().mark((function e(){var t,n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._assetList.length||!this._isActive){e.next=9;break}for(this._isLoading=!0,t=[],n=Math.min(this._assetList.length,this._maxConcurrent),r=0;r<n;r++)t.push(this._assetList.pop());return e.next=7,this._loader.load(t);case 7:this._isLoading=!1,this._next();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"active",get:function(){return this._isActive},set:function(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}]),e}();function v_(e,t){var n=e.split("?")[0],r=Vp.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var m_=function(e,t){return Array.isArray(e)||(e=[e]),t?e.map((function(e){return"string"===typeof e?t(e):e})):e},g_=function(){function e(){l(this,e),this._parsers=[],this._cache=new Map,this._cacheMap=new Map}return d(e,[{key:"reset",value:function(){this._cacheMap.clear(),this._cache.clear()}},{key:"has",value:function(e){return this._cache.has(e)}},{key:"get",value:function(e){var t=this._cache.get(e);return t}},{key:"set",value:function(e,t){for(var n,r=this,i=m_(e),a=0;a<this.parsers.length;a++){var o=this.parsers[a];if(o.test(t)){n=o.getCacheableAssets(i,t);break}}n||(n={},i.forEach((function(e){n[e]=t})));var s=Object.keys(n),l={cacheKeys:s,keys:i};if(i.forEach((function(e){r._cacheMap.set(e,l)})),s.forEach((function(e){r._cache.has(e)&&r._cache.get(e),r._cache.set(e,n[e])})),t instanceof Gg){var u=t;i.forEach((function(e){u.baseTexture!==Gg.EMPTY.baseTexture&&Sm.addToCache(u.baseTexture,e),Gg.addToCache(u,e)}))}}},{key:"remove",value:function(e){var t=this;if(this._cacheMap.get(e),this._cacheMap.has(e)){var n=this._cacheMap.get(e);n.cacheKeys.forEach((function(e){t._cache.delete(e)})),n.keys.forEach((function(e){t._cacheMap.delete(e)}))}}},{key:"parsers",get:function(){return this._parsers}}]),e}(),y_=new g_,b_=function(e){return!Array.isArray(e)},__=function(){function e(){var t=this;l(this,e),this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:function(e,n,r){return t._parsersValidated=!1,e[n]=r,!0}}),this.promiseCache={}}return d(e,[{key:"reset",value:function(){this._parsersValidated=!1,this.promiseCache={}}},{key:"_getLoadPromiseAndParser",value:function(e,t){var n=this,r={promise:null,parser:null};return r.promise=_e(ye().mark((function i(){var a,o,s,l,u,c,h,d;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=null,o=null,t.loadParser&&(o=n._parserHash[t.loadParser]),o){i.next=16;break}s=0;case 5:if(!(s<n.parsers.length)){i.next=13;break}if(!(u=n.parsers[s]).load||null===(l=u.test)||void 0===l||!l.call(u,e,t,n)){i.next=10;break}return o=u,i.abrupt("break",13);case 10:s++,i.next=5;break;case 13:if(o){i.next=16;break}return i.abrupt("return",null);case 16:return i.next=18,o.load(e,t,n);case 18:a=i.sent,r.parser=o,c=0;case 21:if(!(c<n.parsers.length)){i.next=40;break}if(!(h=n.parsers[c]).parse){i.next=37;break}if(i.t0=h.parse,!i.t0){i.next=29;break}return i.next=28,null===(d=h.testParse)||void 0===d?void 0:d.call(h,a,t,n);case 28:i.t0=i.sent;case 29:if(!i.t0){i.next=37;break}return i.next=32,h.parse(a,t,n);case 32:if(i.t1=i.sent,i.t1){i.next=35;break}i.t1=a;case 35:a=i.t1,r.parser=h;case 37:c++,i.next=21;break;case 40:return i.abrupt("return",a);case 41:case"end":return i.stop()}}),i)})))(),r}},{key:"load",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._parsersValidated||this._validateParsers(),r=0,i={},a=b_(t),o=m_(t,(function(e){return{src:e}})),s=o.length,l=o.map(function(){var e=_e(ye().mark((function e(t){var a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Vp.toAbsolute(t.src),i[t.src]){e.next=15;break}return e.prev=2,u.promiseCache[a]||(u.promiseCache[a]=u._getLoadPromiseAndParser(a,t)),e.next=6,u.promiseCache[a].promise;case 6:i[t.src]=e.sent,n&&n(++r/s),e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(2),delete u.promiseCache[a],delete i[t.src],new Error("[Loader.load] Failed to load ".concat(a,".\n").concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(l);case 9:return e.abrupt("return",a?i[o[0].src]:i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=_e(ye().mark((function e(t){var n,r,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m_(t,(function(e){return{src:e}})),r=n.map(function(){var e=_e(ye().mark((function e(t){var n,r,a,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Vp.toAbsolute(t.src),!(r=i.promiseCache[n])){e.next=8;break}return e.next=5,r.promise;case 5:s=e.sent,null===(a=r.parser)||void 0===a||null===(o=a.unload)||void 0===o||o.call(a,s,t,i),delete i.promiseCache[n];case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateParsers",value:function(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name],Pe(Pe({},e),{},y({},t.name,t))}),{})}}]),e}(),x_=function(e){return e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e}(x_||{});function E_(e,t){if(Array.isArray(t)){var n,r=Gy(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.startsWith("data:".concat(i)))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}return e.startsWith("data:".concat(t))}var w_={extension:{type:um.LoadParser,priority:x_.Low},name:"loadJson",test:function(e){return E_(e,"application/json")||v_(e,".json")},load:function(e){return _e(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gp.ADAPTER.fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()}};dm.add(w_);var T_={name:"loadTxt",extension:{type:um.LoadParser,priority:x_.Low},test:function(e){return E_(e,"text/plain")||v_(e,".txt")},load:function(e){return _e(ye().mark((function t(){var n,r;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gp.ADAPTER.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()}};dm.add(T_);var S_=["normal","bold","100","200","300","400","500","600","700","800","900"],k_=[".ttf",".otf",".woff",".woff2"],C_=["font/ttf","font/otf","font/woff","font/woff2"],A_=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function I_(e){var t,n=Vp.extname(e),r=Vp.basename(e,n).replace(/(-|_)/g," ").toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),i=r.length>0,a=Gy(r);try{for(a.s();!(t=a.n()).done;){if(!t.value.match(A_)){i=!1;break}}}catch(s){a.e(s)}finally{a.f()}var o=r.join(" ");return i||(o='"'.concat(o.replace(/[\\"]/g,"\\$&"),'"')),o}var O_={extension:{type:um.LoadParser,priority:x_.Low},name:"loadWebFont",test:function(e){return E_(e,C_)||v_(e,k_)},load:function(e,t){return _e(ye().mark((function n(){var r,i,a,o,s,l,u,c,h,d,f,p,v,m;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=gp.ADAPTER.getFontFaceSet())){n.next=18;break}c=[],h=null!==(i=null===(a=t.data)||void 0===a?void 0:a.family)&&void 0!==i?i:I_(e),d=null!==(o=null===(s=t.data)||void 0===s||null===(l=s.weights)||void 0===l?void 0:l.filter((function(e){return S_.includes(e)})))&&void 0!==o?o:["normal"],f=null!==(u=t.data)&&void 0!==u?u:{},p=0;case 7:if(!(p<d.length)){n.next=17;break}return v=d[p],m=new FontFace(h,"url(".concat(encodeURI(e),")"),Pe(Pe({},f),{},{weight:v})),n.next=12,m.load();case 12:r.add(m),c.push(m);case 14:p++,n.next=7;break;case 17:return n.abrupt("return",1===c.length?c[0]:c);case 18:return n.abrupt("return",null);case 20:case"end":return n.stop()}}),n)})))()},unload:function(e){(Array.isArray(e)?e:[e]).forEach((function(e){return gp.ADAPTER.getFontFaceSet().delete(e)}))}};dm.add(O_);var P_,M_,R_=0,N_={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=","');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ")},D_="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };",L_=function(){function e(){l(this,e),this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}return d(e,[{key:"isImageBitmapSupported",value:function(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((function(e){var t=URL.createObjectURL(new Blob([N_.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",(function(r){n.terminate(),URL.revokeObjectURL(t),e(r.data)}))}))),this._isImageBitmapSupported}},{key:"loadImageBitmap",value:function(e){return this._run("loadImageBitmap",[e])}},{key:"_initWorkers",value:function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}return e.abrupt("return");case 2:this._initialized=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWorker",value:function(){var e=this;void 0===P_&&(P_=navigator.hardwareConcurrency||4);var t=this.workerPool.pop();return!t&&this._createdWorkers<P_&&(M_||(M_=URL.createObjectURL(new Blob([D_],{type:"application/javascript"}))),this._createdWorkers++,(t=new Worker(M_)).addEventListener("message",(function(t){e.complete(t.data),e.returnWorker(t.target),e.next()}))),t}},{key:"returnWorker",value:function(e){this.workerPool.push(e)}},{key:"complete",value:function(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}},{key:"_run",value:function(){var e=_e(ye().mark((function e(t,n){var r,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initWorkers();case 2:return r=new Promise((function(e,r){i.queue.push({id:t,arguments:n,resolve:e,reject:r})})),this.next(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"next",value:function(){if(this.queue.length){var e=this.getWorker();if(e){var t=this.queue.pop(),n=t.id;this.resolveHash[R_]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:R_++,id:n})}}}}]),e}(),F_=new L_;function B_(e,t,n){var r=new Gg(e);return r.baseTexture.on("dispose",(function(){delete t.promiseCache[n]})),r}var U_=[".jpeg",".jpg",".png",".webp",".avif"],H_=["image/jpeg","image/png","image/webp","image/avif"];function j_(e){return z_.apply(this,arguments)}function z_(){return z_=_e(ye().mark((function e(t){var n,r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gp.ADAPTER.fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("[loadImageBitmap] Failed to fetch ".concat(t,": ").concat(n.status," ").concat(n.statusText));case 5:return e.next=7,n.blob();case 7:return r=e.sent,e.next=10,createImageBitmap(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)}))),z_.apply(this,arguments)}var V_={name:"loadTextures",extension:{type:um.LoadParser,priority:x_.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:function(e){return E_(e,H_)||v_(e,U_)},load:function(e,t,n){var r=this;return _e(ye().mark((function i(){var a,o;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=null,!globalThis.createImageBitmap||!r.config.preferCreateImageBitmap){i.next=18;break}if(i.t0=r.config.preferWorkers,!i.t0){i.next=7;break}return i.next=6,F_.isImageBitmapSupported();case 6:i.t0=i.sent;case 7:if(!i.t0){i.next=13;break}return i.next=10,F_.loadImageBitmap(e);case 10:a=i.sent,i.next=16;break;case 13:return i.next=15,j_(e);case 15:a=i.sent;case 16:i.next=21;break;case 18:return i.next=20,new Promise((function(t){(a=new Image).crossOrigin=r.config.crossOrigin,a.src=e,a.complete?t(a):a.onload=function(){t(a)}}));case 20:a=i.sent;case 21:return(o=new Sm(a,Pe({resolution:sm(e)},t.data))).resource.src=e,i.abrupt("return",B_(o,n,e));case 24:case"end":return i.stop()}}),i)})))()},unload:function(e){e.destroy(!0)}};dm.add(V_);var G_={extension:{type:um.LoadParser,priority:x_.High},name:"loadSVG",test:function(e){return E_(e,"image/svg+xml")||v_(e,".svg")},testParse:function(e){return _e(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_b.test(e));case 1:case"end":return t.stop()}}),t)})))()},parse:function(e,t,n){return _e(ye().mark((function r(){var i,a,o,s;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=new _b(e,null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.resourceOptions),r.next=3,a.load();case 3:return(o=new Sm(a,Pe({resolution:sm(e)},null===t||void 0===t?void 0:t.data))).resource.src=e,s=B_(o,n,e),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},load:function(e,t){return _e(ye().mark((function t(){var n;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gp.ADAPTER.fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}}),t)})))()},unload:V_.unload};function W_(e,t,n,r,i){for(var a=t[n],o=0;o<a.length;o++){var s=a[o];n<t.length-1?W_(e.replace(r[n],s),t,n+1,r,i):i.push(e.replace(r[n],s))}}function X_(e){var t=e.match(/\{(.*?)\}/g),n=[];if(t){var r=[];t.forEach((function(e){var t=e.substring(1,e.length-1).split(",");r.push(t)})),W_(e,r,0,t,n)}else n.push(e);return n}dm.add(G_);var Y_=function(){function e(){var t=this;l(this,e),this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:function(e,n){return"".concat(e).concat(t._bundleIdConnector).concat(n)},extractAssetIdFromBundle:function(e,n){return n.replace("".concat(e).concat(t._bundleIdConnector),"")}},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}return d(e,[{key:"setBundleIdentifier",value:function(e){var t,n,r;if(this._bundleIdConnector=null!==(t=e.connector)&&void 0!==t?t:this._bundleIdConnector,this._createBundleAssetId=null!==(n=e.createBundleAssetId)&&void 0!==n?n:this._createBundleAssetId,this._extractAssetIdFromBundle=null!==(r=e.extractAssetIdFromBundle)&&void 0!==r?r:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}},{key:"prefer",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}},{key:"basePath",get:function(){return this._basePath},set:function(e){this._basePath=e}},{key:"rootPath",get:function(){return this._rootPath},set:function(e){this._rootPath=e}},{key:"parsers",get:function(){return this._parsers}},{key:"reset",value:function(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}},{key:"setDefaultSearchParams",value:function(e){if("string"===typeof e)this._defaultSearchParams=e;else{var t=e;this._defaultSearchParams=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&")}}},{key:"addManifest",value:function(e){var t=this;this._manifest,this._manifest=e,e.bundles.forEach((function(e){t.addBundle(e.name,e.assets)}))}},{key:"addBundle",value:function(e,t){var n=this,r=[];Array.isArray(t)?t.forEach((function(t){if("string"===typeof t.name){var i=n._createBundleAssetId(e,t.name);r.push(i),n.add([t.name,i],t.srcs,t.data)}else{var a=t.name.map((function(t){return n._createBundleAssetId(e,t)}));a.forEach((function(e){r.push(e)})),n.add([].concat(Ie(t.name),Ie(a)),t.srcs)}})):Object.keys(t).forEach((function(i){r.push(n._createBundleAssetId(e,i)),n.add([i,n._createBundleAssetId(e,i)],t[i])})),this._bundles[e]=r}},{key:"add",value:function(e,t,n){var r=this,i=m_(e);i.forEach((function(e){r.hasKey(e)})),Array.isArray(t)||(t="string"===typeof t?X_(t):[t]);var a=t.map((function(e){var t,a=e;if("string"===typeof e){for(var o=!1,s=0;s<r._parsers.length;s++){var l=r._parsers[s];if(l.test(e)){a=l.parse(e),o=!0;break}}o||(a={src:e})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(r._basePath||r._rootPath)&&(a.src=Vp.toAbsolute(a.src,r._basePath,r._rootPath)),a.src=r._appendDefaultSearchParams(a.src),a.data=null!==(t=a.data)&&void 0!==t?t:n,a}));i.forEach((function(e){r._assetMap[e]=a}))}},{key:"resolveBundle",value:function(e){var t=this,n=b_(e);e=m_(e);var r={};return e.forEach((function(e){var n=t._bundles[e];if(n){var i=t.resolve(n),a={};for(var o in i){var s=i[o];a[t._extractAssetIdFromBundle(e,o)]=s}r[e]=a}})),n?r[e[0]]:r}},{key:"resolveUrl",value:function(e){var t=this.resolve(e);if("string"!==typeof e){var n={};for(var r in t)n[r]=t[r].src;return n}return t.src}},{key:"resolve",value:function(e){var t=this,n=b_(e);e=m_(e);var r={};return e.forEach((function(e){if(!t._resolverHash[e])if(t._assetMap[e]){var n,i=t._assetMap[e],a=t._getPreferredOrder(i),o=i[0];null===a||void 0===a||a.priority.forEach((function(e){a.params[e].forEach((function(t){var n=i.filter((function(n){return!!n[e]&&n[e]===t}));n.length&&(i=n)}))})),t._resolverHash[e]=null!==(n=i[0])&&void 0!==n?n:o}else{var s=e;(t._basePath||t._rootPath)&&(s=Vp.toAbsolute(s,t._basePath,t._rootPath)),s=t._appendDefaultSearchParams(s),t._resolverHash[e]={src:s}}r[e]=t._resolverHash[e]})),n?r[e[0]]:r}},{key:"hasKey",value:function(e){return!!this._assetMap[e]}},{key:"hasBundle",value:function(e){return!!this._bundles[e]}},{key:"_getPreferredOrder",value:function(e){for(var t=this,n=function(){var n=e[0],r=t._preferredOrder.find((function(e){return e.params.format.includes(n.format)}));if(r)return{v:r}},r=0;r<e.length;r++){var i=n();if("object"===typeof i)return i.v}return this._preferredOrder[0]}},{key:"_appendDefaultSearchParams",value:function(e){if(!this._defaultSearchParams)return e;var t=/\?/.test(e)?"&":"?";return"".concat(e).concat(t).concat(this._defaultSearchParams)}}]),e}(),K_=function(){function e(){l(this,e),this._detections=[],this._initialized=!1,this.resolver=new Y_,this.loader=new __,this.cache=y_,this._backgroundLoader=new p_(this.loader),this._backgroundLoader.active=!0,this.reset()}return d(e,[{key:"init",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a,o,s,l,u,c,h,d,f,p,v,m,g=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.length>0&&void 0!==g[0]?g[0]:{},!this._initialized){e.next=4;break}return e.abrupt("return");case 4:if(this._initialized=!0,i.defaultSearchParams&&this.resolver.setDefaultSearchParams(i.defaultSearchParams),i.basePath&&(this.resolver.basePath=i.basePath),i.bundleIdentifier&&this.resolver.setBundleIdentifier(i.bundleIdentifier),!i.manifest){e.next=15;break}if("string"!==typeof(a=i.manifest)){e.next=14;break}return e.next=13,this.load(a);case 13:a=e.sent;case 14:this.resolver.addManifest(a);case 15:if(o=null!==(t=null===(n=i.texturePreference)||void 0===n?void 0:n.resolution)&&void 0!==t?t:1,s="number"===typeof o?[o]:o,l=[],null===(r=i.texturePreference)||void 0===r||!r.format){e.next=44;break}c=null===(u=i.texturePreference)||void 0===u?void 0:u.format,l="string"===typeof c?[c]:c,h=Gy(this._detections),e.prev=22,h.s();case 24:if((d=h.n()).done){e.next=34;break}return f=d.value,e.next=28,f.test();case 28:if(e.sent){e.next=32;break}return e.next=31,f.remove(l);case 31:l=e.sent;case 32:e.next=24;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(22),h.e(e.t0);case 39:return e.prev=39,h.f(),e.finish(39);case 42:e.next=65;break;case 44:p=Gy(this._detections),e.prev=45,p.s();case 47:if((v=p.n()).done){e.next=57;break}return m=v.value,e.next=51,m.test();case 51:if(!e.sent){e.next=55;break}return e.next=54,m.add(l);case 54:l=e.sent;case 55:e.next=47;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(45),p.e(e.t1);case 62:return e.prev=62,p.f(),e.finish(62);case 65:this.resolver.prefer({params:{format:l,resolution:s}}),i.preferences&&this.setPreferences(i.preferences);case 67:case"end":return e.stop()}}),e,this,[[22,36,39,42],[45,59,62,65]])})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e,t,n){this.resolver.add(e,t,n)}},{key:"load",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o,s=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return r=b_(t),i=m_(t).map((function(e){return"string"!==typeof e?(s.resolver.add(e.src,e),e.src):(s.resolver.hasKey(e)||s.resolver.add(e,e),e)})),a=this.resolver.resolve(i),e.next=8,this._mapLoadToResolve(a,n);case 8:return o=e.sent,e.abrupt("return",r?o[i[0]]:o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addBundle",value:function(e,t){this.resolver.addBundle(e,t)}},{key:"loadBundle",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return r=!1,"string"===typeof t&&(r=!0,t=[t]),i=this.resolver.resolveBundle(t),a={},o=Object.keys(i),s=0,l=0,u=function(){null===n||void 0===n||n(++s/l)},c=o.map((function(e){var t=i[e];return l+=Object.keys(t).length,h._mapLoadToResolve(t,u).then((function(t){a[e]=t}))})),e.next=14,Promise.all(c);case 14:return e.abrupt("return",r?a[t[0]]:a);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"backgroundLoad",value:function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:"string"===typeof t&&(t=[t]),n=this.resolver.resolve(t),this._backgroundLoader.add(Object.values(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"backgroundLoadBundle",value:function(){var e=_e(ye().mark((function e(t){var n,r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:"string"===typeof t&&(t=[t]),n=this.resolver.resolveBundle(t),Object.values(n).forEach((function(e){r._backgroundLoader.add(Object.values(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}},{key:"get",value:function(e){if("string"===typeof e)return y_.get(e);for(var t={},n=0;n<e.length;n++)t[n]=y_.get(e[n]);return t}},{key:"_mapLoadToResolve",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.values(t),i=Object.keys(t),this._backgroundLoader.active=!1,e.next=5,this.loader.load(r,n);case 5:return a=e.sent,this._backgroundLoader.active=!0,o={},r.forEach((function(e,t){var n=a[e.src],r=[e.src];e.alias&&r.push.apply(r,Ie(e.alias)),o[i[t]]=n,y_.set(r,n)})),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=_e(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return n=m_(t).map((function(e){return"string"!==typeof e?e.src:e})),r=this.resolver.resolve(n),e.next=7,this._unloadFromResolved(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unloadBundle",value:function(){var e=_e(ye().mark((function e(t){var n,r,i=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return t=m_(t),n=this.resolver.resolveBundle(t),r=Object.keys(n).map((function(e){return i._unloadFromResolved(n[e])})),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_unloadFromResolved",value:function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.values(t)).forEach((function(e){y_.remove(e.src)})),e.next=4,this.loader.unload(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"detections",get:function(){return this._detections}},{key:"preferWorkers",get:function(){return V_.config.preferWorkers},set:function(e){Wp("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}},{key:"setPreferences",value:function(e){this.loader.parsers.forEach((function(t){t.config&&Object.keys(t.config).filter((function(t){return t in e})).forEach((function(n){t.config[n]=e[n]}))}))}}]),e}(),q_=new K_;dm.handleByList(um.LoadParser,q_.loader.parsers).handleByList(um.ResolveParser,q_.resolver.parsers).handleByList(um.CacheParser,q_.cache.parsers).handleByList(um.DetectionParser,q_.detections);var $_={extension:um.CacheParser,test:function(e){return Array.isArray(e)&&e.every((function(e){return e instanceof Gg}))},getCacheableAssets:function(e,t){var n={};return e.forEach((function(e){t.forEach((function(t,r){n[e+(0===r?"":r+1)]=t}))})),n}};dm.add($_);var Z_={extension:{type:um.DetectionParser,priority:1},test:function(){var e=_e(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(globalThis.createImageBitmap){e.next=2;break}return e.abrupt("return",!1);case 2:return"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e.next=5,gp.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((function(e){return e.blob()}));case 5:return t=e.sent,e.abrupt("return",createImageBitmap(t).then((function(){return!0}),(function(){return!1})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Ie(t),["avif"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return"avif"!==e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};dm.add(Z_);var Q_={extension:{type:um.DetectionParser,priority:0},test:function(){var e=_e(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(globalThis.createImageBitmap){e.next=2;break}return e.abrupt("return",!1);case 2:return"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e.next=5,gp.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((function(e){return e.blob()}));case 5:return t=e.sent,e.abrupt("return",createImageBitmap(t).then((function(){return!0}),(function(){return!1})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Ie(t),["webp"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return"webp"!==e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};dm.add(Q_);var J_=["png","jpg","jpeg"],ex={extension:{type:um.DetectionParser,priority:-1},test:function(){return Promise.resolve(!0)},add:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Ie(t),J_));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return!J_.includes(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};dm.add(ex);var tx={extension:um.ResolveParser,test:V_.test,parse:function(e){var t,n;return{resolution:parseFloat(null!==(t=null===(n=gp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:e.split(".").pop(),src:e}}};dm.add(tx);var nx,rx,ix,ax=function(e,t){var n=t.split("?")[1];return n&&(e+="?".concat(n)),e},ox=function(e){return e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e}(ox||{}),sx=(y(nx={},33776,.5),y(nx,33777,.5),y(nx,33778,1),y(nx,33779,1),y(nx,35916,.5),y(nx,35917,.5),y(nx,35918,1),y(nx,35919,1),y(nx,37488,.5),y(nx,37489,.5),y(nx,37490,1),y(nx,37491,1),y(nx,37492,.5),y(nx,37496,1),y(nx,37493,.5),y(nx,37497,1),y(nx,37494,.5),y(nx,37495,.5),y(nx,35840,.5),y(nx,35842,.5),y(nx,35841,.25),y(nx,35843,.25),y(nx,36196,.5),y(nx,35986,.5),y(nx,35986,1),y(nx,34798,1),y(nx,37808,1),nx);function lx(){ix={s3tc:rx.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:rx.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:rx.getExtension("WEBGL_compressed_texture_etc"),etc1:rx.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:rx.getExtension("WEBGL_compressed_texture_pvrtc")||rx.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:rx.getExtension("WEBGL_compressed_texture_atc"),astc:rx.getExtension("WEBGL_compressed_texture_astc")}}var ux={extension:{type:um.DetectionParser,priority:2},test:function(){var e=_e(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gp.ADAPTER.createCanvas(),n=t.getContext("webgl")){e.next=5;break}return e.abrupt("return",!1);case 5:return rx=n,e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=_e(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ix||lx(),n=[],e.t0=ye().keys(ix);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(r=e.t1.value,ix[r]){e.next=8;break}return e.abrupt("continue",3);case 8:n.push(r),e.next=3;break;case 11:return e.abrupt("return",[].concat(n,Ie(t)));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ix||lx(),e.abrupt("return",t.filter((function(e){return!(e in ix)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};dm.add(ux);var cx,hx,dx,fx,px,vx=function(e){p(n,e);var t=g(n);function n(e){var r,i,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:1,height:1,autoLoad:!0};return l(this,n),"string"===typeof e?(i=e,a=new Uint8Array):(i=null,a=e),(r=t.call(this,a,o)).origin=i,r.buffer=a?new fm(a):null,r._load=null,r.loaded=!1,null!==r.origin&&!1!==o.autoLoad&&r.load(),null===r.origin&&r.buffer&&(r._load=Promise.resolve(m(r)),r.loaded=!0,r.onBlobLoaded(r.buffer.rawBinaryData)),r}return d(n,[{key:"onBlobLoaded",value:function(e){}},{key:"load",value:function(){var e=this;return this._load||(this._load=fetch(this.origin).then((function(e){return e.blob()})).then((function(e){return e.arrayBuffer()})).then((function(t){return e.data=new Uint32Array(t),e.buffer=new fm(t),e.loaded=!0,e.onBlobLoaded(t),e.update(),e}))),this._load}}]),n}(Em),mx=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r)).format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=n._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||n._createLevelBuffers(e instanceof Uint8Array?e:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return d(n,[{key:"upload",value:function(e,t,n){var r=e.gl;if(!e.context.extensions[this._extension])throw new Error("".concat(this._extension," textures are not supported on the current machine"));if(!this._levelBuffers)return!1;for(var i=0,a=this.levels;i<a;i++){var o=this._levelBuffers[i],s=o.levelID,l=o.levelWidth,u=o.levelHeight,c=o.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,l,u,0,c)}return!0}},{key:"onBlobLoaded",value:function(){this._levelBuffers=n._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}}],[{key:"_formatToExtension",value:function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}},{key:"_createLevelBuffers",value:function(e,t,n,r,i,a,o){for(var s=new Array(n),l=e.byteOffset,u=a,c=o,h=u+r-1&~(r-1),d=c+i-1&~(i-1),f=h*d*sx[t],p=0;p<n;p++)s[p]={levelID:p,levelWidth:n>1?u:h,levelHeight:n>1?c:d,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,f=(h=(u=u>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+i-1&~(i-1))*sx[t];return s}}]),n}(vx),gx=4,yx=124,bx=32,_x=20,xx=542327876,Ex={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},wx={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Tx={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Sx=1,kx=2,Cx=4,Ax=64,Ix=512,Ox=131072,Px=808540228,Mx=4,Rx=(y(cx={},827611204,ox.COMPRESSED_RGBA_S3TC_DXT1_EXT),y(cx,861165636,ox.COMPRESSED_RGBA_S3TC_DXT3_EXT),y(cx,894720068,ox.COMPRESSED_RGBA_S3TC_DXT5_EXT),cx),Nx=(y(hx={},70,ox.COMPRESSED_RGBA_S3TC_DXT1_EXT),y(hx,71,ox.COMPRESSED_RGBA_S3TC_DXT1_EXT),y(hx,73,ox.COMPRESSED_RGBA_S3TC_DXT3_EXT),y(hx,74,ox.COMPRESSED_RGBA_S3TC_DXT3_EXT),y(hx,76,ox.COMPRESSED_RGBA_S3TC_DXT5_EXT),y(hx,77,ox.COMPRESSED_RGBA_S3TC_DXT5_EXT),y(hx,72,ox.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),y(hx,75,ox.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),y(hx,78,ox.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),hx);function Dx(e){var t=new Uint32Array(e);if(t[0]!==xx)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,yx/Uint32Array.BYTES_PER_ELEMENT),r=n[Ex.HEIGHT],i=n[Ex.WIDTH],a=n[Ex.MIPMAP_COUNT],o=new Uint32Array(e,Ex.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,bx/Uint32Array.BYTES_PER_ELEMENT),s=o[Sx];if(s&Cx){var l=o[wx.FOURCC];if(l!==Px){var u=Rx[l],c=new Uint8Array(e,gx+yx);return[new mx(c,{format:u,width:i,height:r,levels:a})]}var h=gx+yx,d=new Uint32Array(t.buffer,h,_x/Uint32Array.BYTES_PER_ELEMENT),f=d[Tx.DXGI_FORMAT],p=d[Tx.RESOURCE_DIMENSION],v=d[Tx.MISC_FLAG],m=d[Tx.ARRAY_SIZE],g=Nx[f];if(void 0===g)throw new Error("DDSParser cannot parse texture data with DXGI format ".concat(f));if(v===Mx)throw new Error("DDSParser does not support cubemap textures");if(6===p)throw new Error("DDSParser does not supported 3D texture data");var y=new Array,b=gx+yx+_x;if(1===m)y.push(new Uint8Array(e,b));else{for(var _=sx[g],x=0,E=i,w=r,T=0;T<a;T++){x+=Math.max(1,E+3&-4)*Math.max(1,w+3&-4)*_,E>>>=1,w>>>=1}for(var S=b,k=0;k<m;k++)y.push(new Uint8Array(e,S,x)),S+=x}return y.map((function(e){return new mx(e,{format:g,width:i,height:r,levels:a})}))}if(s&Ax)throw new Error("DDSParser does not support uncompressed texture data.");if(s&Ix)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(s&Ox)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(s&kx)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var Lx=[171,75,84,88,32,49,49,187,13,10,26,10],Fx=67305985,Bx={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},Ux=64,Hx=(y(dx={},rp.UNSIGNED_BYTE,1),y(dx,rp.UNSIGNED_SHORT,2),y(dx,rp.INT,4),y(dx,rp.UNSIGNED_INT,4),y(dx,rp.FLOAT,4),y(dx,rp.HALF_FLOAT,8),dx),jx=(y(fx={},tp.RGBA,4),y(fx,tp.RGB,3),y(fx,tp.RG,2),y(fx,tp.RED,1),y(fx,tp.LUMINANCE,1),y(fx,tp.LUMINANCE_ALPHA,2),y(fx,tp.ALPHA,1),fx),zx=(y(px={},rp.UNSIGNED_SHORT_4_4_4_4,2),y(px,rp.UNSIGNED_SHORT_5_5_5_1,2),y(px,rp.UNSIGNED_SHORT_5_6_5,2),px);function Vx(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new DataView(t);if(!function(e,t){for(var n=0;n<Lx.length;n++)if(t.getUint8(n)!==Lx[n])return!1;return!0}(0,r))return null;var i=r.getUint32(Bx.ENDIANNESS,!0)===Fx,a=r.getUint32(Bx.GL_TYPE,i),o=r.getUint32(Bx.GL_FORMAT,i),s=r.getUint32(Bx.GL_INTERNAL_FORMAT,i),l=r.getUint32(Bx.PIXEL_WIDTH,i),u=r.getUint32(Bx.PIXEL_HEIGHT,i)||1,c=r.getUint32(Bx.PIXEL_DEPTH,i)||1,h=r.getUint32(Bx.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=r.getUint32(Bx.NUMBER_OF_FACES,i),f=r.getUint32(Bx.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(Bx.BYTES_OF_KEY_VALUE_DATA,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var v,m=l+3&-4,g=u+3&-4,y=new Array(h),b=l*u;if(0===a&&(b=m*g),void 0===(v=0!==a?Hx[a]?Hx[a]*jx[o]:zx[a]:sx[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var _=n?function(e,t,n){var r=new Map,i=0;for(;i<t;){var a=e.getUint32(Ux+i,n),o=Ux+i+4,s=3-(a+3)%4;if(0===a||a>t-i)break;for(var l=0;l<a&&0!==e.getUint8(o+l);l++);if(-1===l)break;var u=(new TextDecoder).decode(new Uint8Array(e.buffer,o,l)),c=new DataView(e.buffer,o+l+1,a-l-1);r.set(u,c),i+=4+a+s}return r}(r,p,i):null,x=b*v,E=l,w=u,T=m,S=g,k=Ux+p,C=0;C<f;C++){for(var A=r.getUint32(k,i),I=k+4,O=0;O<h;O++){var P=y[O];P||(P=y[O]=new Array(f)),P[C]={levelID:C,levelWidth:f>1||0!==a?E:T,levelHeight:f>1||0!==a?w:S,levelBuffer:new Uint8Array(t,I,x)},I+=x}k=(k+=A+4)%4!==0?k+4-k%4:k,x=(T=(E=E>>1||1)+4-1&-4)*(S=(w=w>>1||1)+4-1&-4)*v}return 0!==a?{uncompressed:y.map((function(e){var t=e[0].levelBuffer,n=!1;return a===rp.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):a===rp.UNSIGNED_INT?(n=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):a===rp.INT&&(n=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new Em(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:a,format:n?Gx(o):o}})),kvData:_}:{compressed:y.map((function(e){return new mx(null,{format:s,width:l,height:u,levels:f,levelBuffers:e})})),kvData:_}}function Gx(e){switch(e){case tp.RGBA:return tp.RGBA_INTEGER;case tp.RGB:return tp.RGB_INTEGER;case tp.RG:return tp.RG_INTEGER;case tp.RED:return tp.RED_INTEGER;default:return e}}var Wx={extension:{type:um.LoadParser,priority:x_.High},name:"loadDDS",test:function(e){return v_(e,".dds")},load:function(e,t,n){return _e(ye().mark((function r(){var i,a,o,s;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,gp.ADAPTER.fetch(e);case 2:return i=r.sent,r.next=5,i.arrayBuffer();case 5:return a=r.sent,o=Dx(a),s=o.map((function(r){return B_(new Sm(r,Pe({mipmap:sp.OFF,alphaMode:lp.NO_PREMULTIPLIED_ALPHA,resolution:sm(e)},t.data)),n,e)})),r.abrupt("return",1===s.length?s[0]:s);case 9:case"end":return r.stop()}}),r)})))()},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}};dm.add(Wx);var Xx={extension:{type:um.LoadParser,priority:x_.High},name:"loadKTX",test:function(e){return v_(e,".ktx")},load:function(e,t,n){return _e(ye().mark((function r(){var i,a,o,s,l,u,c,h,d;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,gp.ADAPTER.fetch(e);case 2:return i=r.sent,r.next=5,i.arrayBuffer();case 5:return a=r.sent,o=Vx(e,a),s=o.compressed,l=o.uncompressed,u=o.kvData,c=null!==s&&void 0!==s?s:l,h=Pe({mipmap:sp.OFF,alphaMode:lp.NO_PREMULTIPLIED_ALPHA,resolution:sm(e)},t.data),d=c.map((function(t){c===l&&Object.assign(h,{type:t.type,format:t.format});var r=new Sm(t,h);return r.ktxKeyValueData=u,B_(r,n,e)})),r.abrupt("return",1===d.length?d[0]:d);case 11:case"end":return r.stop()}}),r)})))()},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}};dm.add(Xx);var Yx={extension:um.ResolveParser,test:function(e){var t=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:function(e){var t,n;if("ktx"===e.split("?")[0].split(".").pop()){var r,i,a=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(a.some((function(t){return e.endsWith(t)})))return{resolution:parseFloat(null!==(r=null===(i=gp.RETINA_PREFIX.exec(e))||void 0===i?void 0:i[1])&&void 0!==r?r:"1"),format:a.find((function(t){return e.endsWith(t)})),src:e}}return{resolution:parseFloat(null!==(t=null===(n=gp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:e.split(".").pop(),src:e}}};dm.add(Yx);var Kx=new zm,qx=function(){function e(t){l(this,e),this.renderer=t}return d(e,[{key:"image",value:function(){var e=_e(ye().mark((function e(t,n,r){var i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Image,e.next=3,this.base64(t,n,r);case 3:return i.src=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"base64",value:function(){var e=_e(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(i=this.canvas(t)).toBlob){e.next=3;break}return e.abrupt("return",new Promise((function(e,t){i.toBlob((function(n){if(n){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)}else t(new Error("ICanvas.toBlob failed!"))}),n,r)})));case 3:if(void 0===i.toDataURL){e.next=5;break}return e.abrupt("return",i.toDataURL(n,r));case 5:if(void 0===i.convertToBlob){e.next=10;break}return e.next=8,i.convertToBlob({type:n,quality:r});case 8:return a=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onload=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(a)})));case 10:throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"canvas",value:function(t,n){var r=this._rawPixels(t,n),i=r.pixels,a=r.width,o=r.height;r.flipY&&e._flipY(i,a,o),e._unpremultiplyAlpha(i);var s=new em(a,o,1),l=new ImageData(new Uint8ClampedArray(i.buffer),a,o);return s.context.putImageData(l,0,0),s.canvas}},{key:"pixels",value:function(t,n){var r=this._rawPixels(t,n),i=r.pixels,a=r.width,o=r.height;return r.flipY&&e._flipY(i,a,o),e._unpremultiplyAlpha(i),i}},{key:"_rawPixels",value:function(e,t){var n,r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");var i,a,o=!1,s=!1;if(e&&(e instanceof Wg?i=e:(i=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),s=!0)),i){if(n=i.baseTexture.resolution,t=null!==(a=t)&&void 0!==a?a:i.frame,o=!1,!s){r.renderTexture.bind(i);var l=i.framebuffer.glFramebuffers[r.CONTEXT_UID];l.blitFramebuffer&&r.framebuffer.bind(l.blitFramebuffer)}}else n=r.resolution,t||((t=Kx).width=r.width/n,t.height=r.height/n),o=!0,r.renderTexture.bind();var u,c=Math.round(t.width*n),h=Math.round(t.height*n),d=new Uint8Array(4*c*h),f=r.gl;(f.readPixels(Math.round(t.x*n),Math.round(t.y*n),c,h,f.RGBA,f.UNSIGNED_BYTE,d),s)&&(null===(u=i)||void 0===u||u.destroy(!0));return{pixels:d,width:c,height:h,flipY:o}}},{key:"destroy",value:function(){this.renderer=null}}],[{key:"_flipY",value:function(e,t,n){for(var r=t<<2,i=n>>1,a=new Uint8Array(r),o=0;o<i;o++){var s=o*r,l=(n-o-1)*r;a.set(e.subarray(s,s+r)),e.copyWithin(s,l,l+r),e.set(a,l)}}},{key:"_unpremultiplyAlpha",value:function(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));for(var t=e.length,n=0;n<t;n+=4){var r=e[n+3];if(0!==r){var i=255.001/r;e[n]=e[n]*i+.5,e[n+1]=e[n+1]*i+.5,e[n+2]=e[n+2]*i+.5}}}}]),e}(),$x=qx;$x.extension={name:"extract",type:um.RendererSystem},dm.add($x);var Zx={build:function(e){var t,n,r,i,a,o,s=e.points;if(e.type===Um.CIRC){var l=e.shape;t=l.x,n=l.y,a=o=l.radius,r=i=0}else if(e.type===Um.ELIP){var u=e.shape;t=u.x,n=u.y,a=u.width,o=u.height,r=i=0}else{var c=e.shape,h=c.width/2,d=c.height/2;t=c.x+h,n=c.y+d,r=h-(a=o=Math.max(0,Math.min(c.radius,Math.min(h,d)))),i=d-o}if(a>=0&&o>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(a+o)),p=8*f+(r?4:0)+(i?4:0);if(s.length=p,0!==p){if(0===f)return s.length=8,s[0]=s[6]=t+r,s[1]=s[3]=n+i,s[2]=s[4]=t-r,void(s[5]=s[7]=n-i);var v=0,m=4*f+(r?2:0)+2,g=m,y=p,b=r+a,_=i,x=t+b,E=t-b,w=n+_;if(s[v++]=x,s[v++]=w,s[--m]=w,s[--m]=E,i){var T=n-_;s[g++]=E,s[g++]=T,s[--y]=T,s[--y]=x}for(var S=1;S<f;S++){var k=Math.PI/2*(S/f),C=r+Math.cos(k)*a,A=i+Math.sin(k)*o,I=t+C,O=t-C,P=n+A,M=n-A;s[v++]=I,s[v++]=P,s[--m]=P,s[--m]=O,s[g++]=O,s[g++]=M,s[--y]=M,s[--y]=I}var R=i+o,N=t+r,D=t-r,L=n+R,F=n-R;s[v++]=N,s[v++]=L,s[--y]=F,s[--y]=N,r&&(s[v++]=D,s[v++]=L,s[--y]=F,s[--y]=D)}}else s.length=0},triangulate:function(e,t){var n=e.points,r=t.points,i=t.indices;if(0!==n.length){var a,o,s=r.length/2,l=s;if(e.type!==Um.RREC){var u=e.shape;a=u.x,o=u.y}else{var c=e.shape;a=c.x+c.width/2,o=c.y+c.height/2}var h=e.matrix;r.push(e.matrix?h.a*a+h.c*o+h.tx:a,e.matrix?h.b*a+h.d*o+h.ty:o),s++,r.push(n[0],n[1]);for(var d=2;d<n.length;d+=2)r.push(n[d],n[d+1]),i.push(s++,l,s);i.push(l+1,l,s)}}};function Qx(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(!(n<6)){for(var r=0,i=0,a=e[n-2],o=e[n-1];i<n;i+=2){var s=e[i],l=e[i+1];r+=(s-a)*(l+o),a=s,o=l}if(!t&&r>0||t&&r<=0)for(var u=n/2,c=u+u%2;c<n;c+=2){var h=n-c-2,d=n-c-1,f=c,p=c+1,v=[e[f],e[h]];e[h]=v[0],e[f]=v[1];var m=[e[p],e[d]];e[d]=m[0],e[p]=m[1]}}}var Jx={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,a=t.indices;if(n.length>=6){Qx(n,!1);for(var o=[],s=0;s<r.length;s++){var l=r[s];Qx(l.points,!0),o.push(n.length/2),n=n.concat(l.points)}var u=Fp(n,o,2);if(!u)return;for(var c=i.length/2,h=0;h<u.length;h+=3)a.push(u[h]+c),a.push(u[h+1]+c),a.push(u[h+2]+c);for(var d=0;d<n.length;d++)i.push(n[d])}}},eE={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,a=t.height,o=e.points;o.length=0,i>=0&&a>=0&&o.push(n,r,n+i,r,n+i,r+a,n,r+a)},triangulate:function(e,t){var n=e.points,r=t.points;if(0!==n.length){var i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}}},tE={build:function(e){Zx.build(e)},triangulate:function(e,t){Zx.triangulate(e,t)}},nE=function(e){return e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e}(nE||{}),rE=function(e){return e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e}(rE||{}),iE={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},aE=iE,oE=function(){function e(){l(this,e)}return d(e,null,[{key:"curveTo",value:function(e,t,n,r,i,a){var o=a[a.length-2],s=a[a.length-1]-t,l=o-e,u=r-t,c=n-e,h=Math.abs(s*c-l*u);if(h<1e-8||0===i)return a[a.length-2]===e&&a[a.length-1]===t||a.push(e,t),null;var d=s*s+l*l,f=u*u+c*c,p=s*u+l*c,v=i*Math.sqrt(d)/h,m=i*Math.sqrt(f)/h,g=v*p/d,y=m*p/f,b=v*c+m*l,_=v*u+m*s,x=l*(m+g),E=s*(m+g),w=c*(v+y),T=u*(v+y);return{cx:b+e,cy:_+t,radius:i,startAngle:Math.atan2(E-_,x-b),endAngle:Math.atan2(T-_,w-b),anticlockwise:l*u>c*s}}},{key:"arc",value:function(e,t,n,r,i,a,o,s,l){for(var u=o-a,c=iE._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/Lm)),h=u/(2*c),d=2*h,f=Math.cos(h),p=Math.sin(h),v=c-1,m=v%1/v,g=0;g<=v;++g){var y=h+a+d*(g+m*g),b=Math.cos(y),_=-Math.sin(y);l.push((f*b+p*_)*i+n,(f*-_+p*b)*i+r)}}}]),e}(),sE=function(){function e(){l(this,e)}return d(e,null,[{key:"curveLength",value:function(e,t,n,r,i,a,o,s){for(var l=0,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,b=e,_=t,x=1;x<=10;++x)g=b-(v=(p=(f=(d=1-(u=x/10))*d)*d)*e+3*f*u*n+3*d*(c=u*u)*i+(h=c*u)*o),y=_-(m=p*t+3*f*u*r+3*d*c*a+h*s),b=v,_=m,l+=Math.sqrt(g*g+y*y);return l}},{key:"curveTo",value:function(t,n,r,i,a,o,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var c=iE._segmentsCount(e.curveLength(l,u,t,n,r,i,a,o)),h=0,d=0,f=0,p=0,v=0;s.push(l,u);for(var m=1,g=0;m<=c;++m)f=(d=(h=1-(g=m/c))*h)*h,v=(p=g*g)*g,s.push(f*l+3*d*g*t+3*h*p*r+v*a,f*u+3*d*g*n+3*h*p*i+v*o)}}]),e}();function lE(e,t,n,r,i,a,o,s){var l,u;o?(l=r,u=-n):(l=-r,u=n);var c=e-n*i+l,h=t-r*i+u,d=e+n*a+l,f=t+r*a+u;return s.push(c,h,d,f),2}function uE(e,t,n,r,i,a,o,s){var l=n-e,u=r-t,c=Math.atan2(l,u),h=Math.atan2(i-e,a-t);s&&c<h?c+=2*Math.PI:!s&&c>h&&(h+=2*Math.PI);var d=c,f=h-c,p=Math.abs(f),v=Math.sqrt(l*l+u*u),m=1+(15*p*Math.sqrt(v)/Math.PI>>0),g=f/m;if(d+=g,s){o.push(e,t,n,r);for(var y=1,b=d;y<m;y++,b+=g)o.push(e,t,e+Math.sin(b)*v,t+Math.cos(b)*v);o.push(e,t,i,a)}else{o.push(n,r,e,t);for(var _=1,x=d;_<m;_++,x+=g)o.push(e+Math.sin(x)*v,t+Math.cos(x)*v,e,t);o.push(i,a,e,t)}return 2*m}function cE(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,a=r.type!==Um.POLY||r.closeStroke;if(0!==i.length){var o=t.points,s=t.indices,l=i.length/2,u=o.length/2,c=u;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[2*n],i[2*n+1]),s.push(c,c+1),c++;a&&s.push(c,u)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var a=e.lineStyle,o=new Hm(r[0],r[1]),s=new Hm(r[r.length-2],r[r.length-1]),l=n.type!==Um.POLY||n.closeStroke,u=Math.abs(o.x-s.x)<i&&Math.abs(o.y-s.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(o.x+s.x),h=.5*(s.y+o.y);r.unshift(c,h),r.push(c,h)}var d=t.points,f=r.length/2,p=r.length,v=d.length/2,m=a.width/2,g=m*m,y=a.miterLimit*a.miterLimit,b=r[0],_=r[1],x=r[2],E=r[3],w=0,T=0,S=-(_-E),k=b-x,C=0,A=0,I=Math.sqrt(S*S+k*k);S/=I,k/=I,S*=m,k*=m;var O=a.alignment,P=2*(1-O),M=2*O;l||(a.cap===rE.ROUND?p+=uE(b-S*(P-M)*.5,_-k*(P-M)*.5,b-S*P,_-k*P,b+S*M,_+k*M,d,!0)+2:a.cap===rE.SQUARE&&(p+=lE(b,_,S,k,P,M,!0,d))),d.push(b-S*P,_-k*P,b+S*M,_+k*M);for(var R=1;R<f-1;++R){b=r[2*(R-1)],_=r[2*(R-1)+1],x=r[2*R],E=r[2*R+1],w=r[2*(R+1)],T=r[2*(R+1)+1],S=-(_-E),k=b-x,S/=I=Math.sqrt(S*S+k*k),k/=I,S*=m,k*=m,C=-(E-T),A=x-w,C/=I=Math.sqrt(C*C+A*A),A/=I,C*=m,A*=m;var N=x-b,D=_-E,L=x-w,F=T-E,B=N*L+D*F,U=D*L-F*N,H=U<0;if(Math.abs(U)<.001*Math.abs(B))d.push(x-S*P,E-k*P,x+S*M,E+k*M),B>=0&&(a.join===nE.ROUND?p+=uE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+4:p+=2,d.push(x-C*M,E-A*M,x+C*P,E+A*P));else{var j=(-S+b)*(-k+E)-(-S+x)*(-k+_),z=(-C+w)*(-A+E)-(-C+x)*(-A+T),V=(N*z-L*j)/U,G=(F*j-D*z)/U,W=(V-x)*(V-x)+(G-E)*(G-E),X=x+(V-x)*P,Y=E+(G-E)*P,K=x-(V-x)*M,q=E-(G-E)*M,$=H?P:M,Z=W<=Math.min(N*N+D*D,L*L+F*F)+$*$*g,Q=a.join;if(Q===nE.MITER&&W/g>y&&(Q=nE.BEVEL),Z)switch(Q){case nE.MITER:d.push(X,Y,K,q);break;case nE.BEVEL:H?d.push(X,Y,x+S*M,E+k*M,X,Y,x+C*M,E+A*M):d.push(x-S*P,E-k*P,K,q,x-C*P,E-A*P,K,q),p+=2;break;case nE.ROUND:H?(d.push(X,Y,x+S*M,E+k*M),p+=uE(x,E,x+S*M,E+k*M,x+C*M,E+A*M,d,!0)+4,d.push(X,Y,x+C*M,E+A*M)):(d.push(x-S*P,E-k*P,K,q),p+=uE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+4,d.push(x-C*P,E-A*P,K,q))}else{switch(d.push(x-S*P,E-k*P,x+S*M,E+k*M),Q){case nE.MITER:H?d.push(K,q,K,q):d.push(X,Y,X,Y),p+=2;break;case nE.ROUND:p+=H?uE(x,E,x+S*M,E+k*M,x+C*M,E+A*M,d,!0)+2:uE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+2}d.push(x-C*P,E-A*P,x+C*M,E+A*M),p+=2}}}b=r[2*(f-2)],_=r[2*(f-2)+1],x=r[2*(f-1)],S=-(_-(E=r[2*(f-1)+1])),k=b-x,S/=I=Math.sqrt(S*S+k*k),k/=I,S*=m,k*=m,d.push(x-S*P,E-k*P,x+S*M,E+k*M),l||(a.cap===rE.ROUND?p+=uE(x-S*(P-M)*.5,E-k*(P-M)*.5,x-S*P,E-k*P,x+S*M,E+k*M,d,!1)+2:a.cap===rE.SQUARE&&(p+=lE(x,E,S,k,P,M,!1,d)));for(var J=t.indices,ee=iE.epsilon*iE.epsilon,te=v;te<p+v-2;++te)b=d[2*te],_=d[2*te+1],x=d[2*(te+1)],E=d[2*(te+1)+1],w=d[2*(te+2)],T=d[2*(te+2)+1],Math.abs(b*(E-T)+x*(T-_)+w*(_-E))<ee||J.push(te,te+1,te+2)}}(e,t)}var hE,dE=function(){function e(){l(this,e)}return d(e,null,[{key:"curveLength",value:function(e,t,n,r,i,a){var o=e-2*n+i,s=t-2*r+a,l=2*n-2*e,u=2*r-2*t,c=4*(o*o+s*s),h=4*(o*l+s*u),d=l*l+u*u,f=2*Math.sqrt(c+h+d),p=Math.sqrt(c),v=2*c*p,m=2*Math.sqrt(d),g=h/p;return(v*f+p*h*(f-m)+(4*d*c-h*h)*Math.log((2*p+g+f)/(g+m)))/(4*v)}},{key:"curveTo",value:function(t,n,r,i,a){for(var o=a[a.length-2],s=a[a.length-1],l=iE._segmentsCount(e.curveLength(o,s,t,n,r,i)),u=0,c=0,h=1;h<=l;++h){var d=h/l;u=o+(t-o)*d,c=s+(n-s)*d,a.push(u+(t+(r-t)*d-u)*d,c+(n+(i-n)*d-c)*d)}}}]),e}(),fE=(y(hE={},Um.POLY,Jx),y(hE,Um.CIRC,Zx),y(hE,Um.ELIP,Zx),y(hE,Um.RECT,eE),y(hE,Um.RREC,tE),hE),pE=[],vE=[],mE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;l(this,e),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=t.type}return d(e,[{key:"clone",value:function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)}},{key:"destroy",value:function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}]),e}(),gE=function(){function e(){l(this,e),this.reset()}return d(e,[{key:"begin",value:function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}},{key:"end",value:function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}},{key:"reset",value:function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}]),e}(),yE=new Hm,bE=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new Sb,e.boundsDirty=-1,e}return d(n,[{key:"bounds",get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}},{key:"invalidate",value:function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),vE.push(this.drawCalls[e]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var n=this.batches[t];n.reset(),pE.push(n)}this.batches.length=0}},{key:"clear",value:function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}},{key:"drawShape",value:function(e){var t=new mE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return this.graphicsData.push(t),this.dirty++,this}},{key:"drawHole",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.graphicsData.length)return null;var n=new mE(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}},{key:"destroy",value:function(){lm(v(n.prototype),"destroy",this).call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}},{key:"containsPoint",value:function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(e,yE):yE.copyFrom(e),r.shape.contains(yE.x,yE.y)))){var i=!1;if(r.holes)for(var a=0;a<r.holes.length;a++){if(r.holes[a].shape.contains(yE.x,yE.y)){i=!0;break}}if(!i)return!0}}return!1}},{key:"updateBatches",value:function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,t=this.graphicsData,n=null,r=null;this.batches.length>0&&(r=(n=this.batches[this.batches.length-1]).style);for(var i=this.shapeIndex;i<t.length;i++){this.shapeIndex++;var a=t[i],o=a.fillStyle,s=a.lineStyle;fE[a.type].build(a),a.matrix&&this.transformPoints(a.points,a.matrix),(o.visible||s.visible)&&this.processHoles(a.holes);for(var l=0;l<2;l++){var u=0===l?o:s;if(u.visible){var c=u.texture.baseTexture,h=this.indices.length,d=this.points.length/2;c.wrapMode=op.REPEAT,0===l?this.processFill(a):this.processLine(a);var f=this.points.length/2-d;0!==f&&(n&&!this._compareStyles(r,u)&&(n.end(h,d),n=null),n||((n=pE.pop()||new gE).begin(u,h,d),this.batches.push(n),r=u),this.addUvs(this.points,e,u.texture,d,f,u.matrix))}}}var p=this.indices.length,v=this.points.length/2;if(n&&n.end(p,v),0!==this.batches.length){var m=v>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&m===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=m?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0}},{key:"_compareStyles",value:function(e,t){return!(!e||!t)&&(e.texture.baseTexture===t.texture.baseTexture&&(e.color+e.alpha===t.color+t.alpha&&!!e.native===!!t.native))}},{key:"validateBatching",value:function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0}},{key:"packBatches",value:function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var a=r.start+i;this.indicesUint16[a]=this.indicesUint16[a]-r.attribStart}}},{key:"isBatchable",value:function(){if(this.points.length>131070)return!1;for(var e=this.batches,t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE}},{key:"buildDrawCalls",value:function(){for(var e=++Sm._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),vE.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=vE.pop();i||((i=new km).texArray=new kg),i.texArray.count=0,i.start=0,i.size=0,i.type=ep.TRIANGLES;var a=0,o=null,s=0,l=!1,u=ep.TRIANGLES,c=0;this.drawCalls.push(i);for(var h=0;h<this.batches.length;h++){var d=this.batches[h],f=d.style,p=f.texture.baseTexture;l!==!!f.native&&(u=(l=!!f.native)?ep.LINES:ep.TRIANGLES,o=null,a=8,e++),o!==p&&(o=p,p._batchEnabled!==e&&(8===a&&(e++,a=0,i.size>0&&((i=vE.pop())||((i=new km).texArray=new kg),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),p.touched=1,p._batchEnabled=e,p._batchLocation=a,p.wrapMode=op.REPEAT,i.texArray.elements[i.texArray.count++]=p,a++)),i.size+=d.size,c+=d.size,s=p._batchLocation,this.addColors(n,f.color,f.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,s,d.attribSize,d.attribStart)}Sm._globalBatch=e,this.packAttributes()}},{key:"packAttributes",value:function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),a=new Float32Array(i),o=new Uint32Array(i),s=0,l=0;l<e.length/2;l++)a[s++]=e[2*l],a[s++]=e[2*l+1],a[s++]=t[2*l],a[s++]=t[2*l+1],o[s++]=n[l],a[s++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}},{key:"processFill",value:function(e){e.holes.length?Jx.triangulate(e,this):fE[e.type].triangulate(e,this)}},{key:"processLine",value:function(e){cE(e,this);for(var t=0;t<e.holes.length;t++)cE(e.holes[t],this)}},{key:"processHoles",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];fE[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}},{key:"calculateBounds",value:function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}},{key:"transformPoints",value:function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}}},{key:"addColors",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=Tv.shared.setValue(t).toLittleEndianNumber(),o=Tv.shared.setValue(a).toPremultiplied(n);e.length=Math.max(e.length,i+r);for(var s=0;s<r;s++)e[i+s]=o}},{key:"addTextureIds",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t}},{key:"addUvs",value:function(e,t,n,r,i){for(var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=0,s=t.length,l=n.frame;o<i;){var u=e[2*(r+o)],c=e[2*(r+o)+1];if(a){var h=a.a*u+a.c*c+a.tx;c=a.b*u+a.d*c+a.ty,u=h}o++,t.push(u/l.width,c/l.height)}var d=n.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(t,n,s,i)}},{key:"adjustUvs",value:function(e,t,n,r){for(var i=t.baseTexture,a=1e-6,o=n+2*r,s=t.frame,l=s.width/i.width,u=s.height/i.height,c=s.x/s.width,h=s.y/s.height,d=Math.floor(e[n]+a),f=Math.floor(e[n+1]+a),p=n+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+a)),f=Math.min(f,Math.floor(e[p+1]+a));c-=d,h-=f;for(var v=n;v<o;v+=2)e[v]=(e[v]+c)*l,e[v+1]=(e[v+1]+h)*u}}]),n}(Dm),_E=bE;_E.BATCHABLE_SIZE=100;var xE=function(){function e(){l(this,e),this.color=16777215,this.alpha=1,this.texture=Gg.WHITE,this.matrix=null,this.visible=!1,this.reset()}return d(e,[{key:"clone",value:function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}},{key:"reset",value:function(){this.color=16777215,this.alpha=1,this.texture=Gg.WHITE,this.matrix=null,this.visible=!1}},{key:"destroy",value:function(){this.texture=null,this.matrix=null}}]),e}(),EE=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments)).width=0,e.alignment=.5,e.native=!1,e.cap=rE.BUTT,e.join=nE.MITER,e.miterLimit=10,e}return d(n,[{key:"clone",value:function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}},{key:"reset",value:function(){lm(v(n.prototype),"reset",this).call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}]),n}(xE),wE={},TE=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return l(this,n),(e=t.call(this)).shader=null,e.pluginName="batch",e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e._fillStyle=new xE,e._lineStyle=new EE,e._matrix=null,e._holeMode=!1,e.state=gm.for2d(),e._geometry=r||new _E,e._geometry.refCount++,e._transformID=-1,e._tintColor=new Tv(16777215),e.blendMode=Jf.NORMAL,e}return d(n,[{key:"geometry",get:function(){return this._geometry}},{key:"clone",value:function(){return this.finishPoly(),new n(this._geometry)}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e)}},{key:"fill",get:function(){return this._fillStyle}},{key:"line",get:function(){return this._lineStyle}},{key:"lineStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"number"===typeof e&&(e={width:e,color:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,alpha:arguments.length>2?arguments[2]:void 0,alignment:arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,native:arguments.length>4&&void 0!==arguments[4]&&arguments[4]}),this.lineTextureStyle(e)}},{key:"lineTextureStyle",value:function(e){var t,n={width:0,texture:Gg.WHITE,color:null!==(t=e)&&void 0!==t&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:rE.BUTT,join:nE.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}},{key:"startPoly",value:function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Wm,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Wm,this.currentPath.closeStroke=!1}},{key:"finishPoly",value:function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}},{key:"moveTo",value:function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}},{key:"lineTo",value:function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===e&&i===t||n.push(e,t),this}},{key:"_initCurve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),dE.curveTo(e,t,n,r,i),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,a){return this._initCurve(),sE.curveTo(e,t,n,r,i,a,this.currentPath.points),this}},{key:"arcTo",value:function(e,t,n,r,i){this._initCurve(e,t);var a=this.currentPath.points,o=oE.curveTo(e,t,n,r,i,a);if(o){var s=o.cx,l=o.cy,u=o.radius,c=o.startAngle,h=o.endAngle,d=o.anticlockwise;this.arc(s,l,u,c,h,d)}return this}},{key:"arc",value:function(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;if(!a&&i<=r?i+=Lm:a&&r<=i&&(r+=Lm),0===i-r)return this;var o=e+Math.cos(r)*n,s=t+Math.sin(r)*n,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-o),h=Math.abs(u[u.length-1]-s);c<l&&h<l||u.push(o,s)}else this.moveTo(o,s),u=this.currentPath.points;return oE.arc(o,s,e,t,n,r,i,a,u),this}},{key:"beginFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.beginTextureFill({texture:Gg.WHITE,color:e,alpha:t})}},{key:"normalizeColor",value:function(e){var t,n,r=Tv.shared.setValue(null!==(t=e.color)&&void 0!==t?t:0);e.color=r.toNumber(),null!==(n=e.alpha)&&void 0!==n||(e.alpha=r.alpha)}},{key:"beginTextureFill",value:function(e){var t={texture:Gg.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}},{key:"endFill",value:function(){return this.finishPoly(),this._fillStyle.reset(),this}},{key:"drawRect",value:function(e,t,n,r){return this.drawShape(new zm(e,t,n,r))}},{key:"drawRoundedRect",value:function(e,t,n,r,i){return this.drawShape(new Xm(e,t,n,r,i))}},{key:"drawCircle",value:function(e,t,n){return this.drawShape(new Vm(e,t,n))}},{key:"drawEllipse",value:function(e,t,n,r){return this.drawShape(new Gm(e,t,n,r))}},{key:"drawPolygon",value:function(){for(var e,t=!0,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=r[0];a.points?(t=a.closeStroke,e=a.points):e=Array.isArray(r[0])?r[0]:r;var o=new Wm(e);return o.closeStroke=t,this.drawShape(o),this}},{key:"drawShape",value:function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}},{key:"clear",value:function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}},{key:"isFastRect",value:function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===Um.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}},{key:"_render",value:function(e){this.finishPoly();var t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}},{key:"_populateBatches",value:function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],a=i.style.color,o=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:o,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:Tv.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}}},{key:"_renderBatched",value:function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}},{key:"_renderDirect",value:function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.worldAlpha,i=t.uniforms,a=n.drawCalls;i.translationMatrix=this.transform.worldTransform,Tv.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var o=0,s=a.length;o<s;o++)this._renderDrawCallDirect(e,n.drawCalls[o])}},{key:"_renderDrawCallDirect",value:function(e,t){for(var n=t.texArray,r=t.type,i=t.size,a=t.start,o=n.count,s=0;s<o;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,a)}},{key:"_resolveDirectShader",value:function(e){var t=this.shader,n=this.pluginName;if(!t){if(!wE[n]){for(var r=e.plugins[n].maxTextures,i=new Int32Array(r),a=0;a<r;a++)i[a]=a;var o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ym,default:wg.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;wE[n]=new Tg(s,o)}t=wE[n]}return t}},{key:"_calculateBounds",value:function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,a=t.maxY;this._bounds.addFrame(this.transform,n,r,i,a)}}},{key:"containsPoint",value:function(e){return this.worldTransform.applyInverse(e,n._TEMP_POINT),this._geometry.containsPoint(n._TEMP_POINT)}},{key:"calculateTints",value:function(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(var e=0;e<this.batches.length;e++){var t=this.batches[e];t._tintRGB=Tv.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}},{key:"calculateVertices",value:function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,l=this._geometry.points,u=this.vertexData,c=0,h=0;h<l.length;h+=2){var d=l[h],f=l[h+1];u[c++]=n*d+i*f+o,u[c++]=a*f+r*d+s}}}},{key:"closePath",value:function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}},{key:"setMatrix",value:function(e){return this._matrix=e,this}},{key:"beginHole",value:function(){return this.finishPoly(),this._holeMode=!0,this}},{key:"endHole",value:function(){return this.finishPoly(),this._holeMode=!1,this}},{key:"destroy",value:function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,lm(v(n.prototype),"destroy",this).call(this,e)}}]),n}(Pb),SE=TE;SE.curves=iE,SE._TEMP_POINT=new Hm;var kE={buildPoly:Jx,buildCircle:Zx,buildRectangle:eE,buildRoundedRectangle:tE,buildLine:cE,ArcUtils:oE,BezierUtils:sE,QuadraticUtils:dE,BatchPart:gE,FILL_COMMANDS:fE,BATCH_POOL:pE,DRAW_CALL_POOL:vE},CE=function(){function e(t,n){l(this,e),this.uvBuffer=t,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return d(e,[{key:"update",value:function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}}]),e}(),AE=new Hm,IE=new Wm,OE=function(e){p(n,e);var t=g(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ep.TRIANGLES;return l(this,n),(a=t.call(this)).geometry=e,a.shader=r,a.state=i||gm.for2d(),a.drawMode=o,a.start=0,a.size=0,a.uvs=null,a.indices=null,a.vertexData=new Float32Array(1),a.vertexDirty=-1,a._transformID=-1,a._roundPixels=gp.ROUND_PIXELS,a.batchUvs=null,a}return d(n,[{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}},{key:"uvBuffer",get:function(){return this.geometry.buffers[1]}},{key:"verticesBuffer",get:function(){return this.geometry.buffers[0]}},{key:"material",get:function(){return this.shader},set:function(e){this.shader=e}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}},{key:"tint",get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e}},{key:"tintValue",get:function(){return this.shader.tintValue}},{key:"texture",get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e}},{key:"_render",value:function(e){var t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ep.TRIANGLES&&t.length<2*n.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)}},{key:"_renderDefault",value:function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}},{key:"_renderToBatch",value:function(e){var t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)}},{key:"calculateVertices",value:function(){var e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,i=r.a,a=r.b,o=r.c,s=r.d,l=r.tx,u=r.ty,c=this.vertexData,h=0;h<c.length/2;h++){var d=t[2*h],f=t[2*h+1];c[2*h]=i*d+o*f+l,c[2*h+1]=a*d+s*f+u}if(this._roundPixels)for(var p=gp.RESOLUTION,v=0;v<c.length;++v)c[v]=Math.round(c[v]*p)/p;this.vertexDirty=n}}},{key:"calculateUvs",value:function(){var e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new CE(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}},{key:"_calculateBounds",value:function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}},{key:"containsPoint",value:function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,AE);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=IE.points,r=this.geometry.getIndex().data,i=r.length,a=4===this.drawMode?3:1,o=0;o+2<i;o+=a){var s=2*r[o],l=2*r[o+1],u=2*r[o+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[u],n[5]=t[u+1],IE.contains(AE.x,AE.y))return!0}return!1}},{key:"destroy",value:function(e){lm(v(n.prototype),"destroy",this).call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}}]),n}(Pb),PE=OE;PE.BATCHABLE_SIZE=100;var ME=function(e){p(n,e);var t=g(n);function n(e,r,i){var a;l(this,n),a=t.call(this);var o=new Am(e),s=new Am(r,!0),u=new Am(i,!0,!0);return a.addAttribute("aVertexPosition",o,2,!1,rp.FLOAT).addAttribute("aTextureCoord",s,2,!1,rp.FLOAT).addIndex(u),a._updateId=-1,a}return d(n,[{key:"vertexDirtyId",get:function(){return this.buffers[0]._updateID}}]),n}(Nm),RE=function(e){p(n,e);var t=g(n);function n(e,r){var i;l(this,n);var a={uSampler:e,alpha:1,uTextureMatrix:Ym.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(a,r.uniforms),(i=t.call(this,r.program||xg.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),a))._colorDirty=!1,i.uvMatrix=new ay(e),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i._tintColor=new Tv(r.tint),i._tintRGB=i._tintColor.toLittleEndianNumber(),i._colorDirty=!0,i.alpha=r.alpha,i}return d(n,[{key:"texture",get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}},{key:"alpha",get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}},{key:"tintValue",get:function(){return this._tintColor.toNumber()}},{key:"update",value:function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture.alphaMode;Tv.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}]),n}(Tg),NE=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return l(this,n),(e=t.call(this)).segWidth=a,e.segHeight=o,e.width=r,e.height=i,e.build(),e}return d(n,[{key:"build",value:function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,a=this.segHeight-1,o=this.width/i,s=this.height/a,l=0;l<e;l++){var u=l%this.segWidth,c=l/this.segWidth|0;t.push(u*o,c*s),n.push(u/i,c/a)}for(var h=i*a,d=0;d<h;d++){var f=d%i,p=d/i|0,v=p*this.segWidth+f,m=p*this.segWidth+f+1,g=(p+1)*this.segWidth+f,y=(p+1)*this.segWidth+f+1;r.push(v,m,g,m,y,g)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}]),n}(ME),DE=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return l(this,n),(e=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))).points=i,e._width=r,e.textureScale=a,e.build(),e}return d(n,[{key:"width",get:function(){return this._width}},{key:"build",value:function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,a=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var o=0,s=e[0],l=this._width*this.textureScale,u=e.length,c=0;c<u;c++){var h=4*c;if(this.textureScale>0){var d=s.x-e[c].x,f=s.y-e[c].y,p=Math.sqrt(d*d+f*f);s=e[c],o+=p/l}else o=c/(u-1);i[h]=o,i[h+1]=0,i[h+2]=o,i[h+3]=1}for(var v=0,m=0;m<u-1;m++){var g=2*m;a[v++]=g,a[v++]=g+1,a[v++]=g+2,a[v++]=g+2,a[v++]=g+1,a[v++]=g+3}n.update(),r.update(),this.updateVertices()}}}},{key:"updateVertices",value:function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,a=this.buffers[0].data,o=e.length,s=this.textureScale>0?this.textureScale*this._width/2:this._width/2,l=0;l<o;l++){var u=e[l],c=4*l;i=-((t=l<e.length-1?e[l+1]:u).x-n.x),r=t.y-n.y;var h=10*(1-l/(o-1));h>1&&(h=1);var d=Math.sqrt(r*r+i*i);d<1e-6?(r=0,i=0):(r/=d,i/=d,r*=s,i*=s),a[c]=u.x+r,a[c+1]=u.y+i,a[c+2]=u.x-r,a[c+3]=u.y-i,n=u}this.buffers[0].update()}}},{key:"update",value:function(){this.textureScale>0?this.build():this.updateVertices()}}]),n}(ME),LE=function(e){p(n,e);var t=g(n);function n(e,r,i){var a;l(this,n);var o=new NE(e.width,e.height,r,i),s=new RE(Gg.WHITE);return(a=t.call(this,o,s)).texture=e,a.autoResize=!0,a}return d(n,[{key:"textureUpdated",value:function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,t=this.shader.texture,n=t.width,r=t.height;!this.autoResize||e.width===n&&e.height===r||(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}},{key:"texture",get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}},{key:"_render",value:function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),lm(v(n.prototype),"_render",this).call(this,e)}},{key:"destroy",value:function(e){this.shader.texture.off("update",this.textureUpdated,this),lm(v(n.prototype),"destroy",this).call(this,e)}}]),n}(PE),FE=function(e){p(n,e);var t=g(n);function n(e,r,i,a,o){var s,u,c,h,d,f,p,v,m;return l(this,n),(m=t.call(this,Gg.WHITE,4,4))._origWidth=e.orig.width,m._origHeight=e.orig.height,m._width=m._origWidth,m._height=m._origHeight,m._leftWidth=null!==(s=null!==r&&void 0!==r?r:null===(u=e.defaultBorders)||void 0===u?void 0:u.left)&&void 0!==s?s:10,m._rightWidth=null!==(c=null!==a&&void 0!==a?a:null===(h=e.defaultBorders)||void 0===h?void 0:h.right)&&void 0!==c?c:10,m._topHeight=null!==(d=null!==i&&void 0!==i?i:null===(f=e.defaultBorders)||void 0===f?void 0:f.top)&&void 0!==d?d:10,m._bottomHeight=null!==(p=null!==o&&void 0!==o?o:null===(v=e.defaultBorders)||void 0===v?void 0:v.bottom)&&void 0!==p?p:10,m.texture=e,m}return d(n,[{key:"textureUpdated",value:function(){this._textureID=this.shader.texture._updateID,this._refresh()}},{key:"vertices",get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e}},{key:"updateHorizontalVertices",value:function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}},{key:"updateVerticalVertices",value:function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}},{key:"_getMinScale",value:function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}},{key:"_refresh",value:function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}]),n}(LE),BE=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gg.EMPTY,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;l(this,n);var u=new ME(i,a,o);u.getBuffer("aVertexPosition").static=!1;var c=new RE(r);return(e=t.call(this,u,c,null,s)).autoUpdate=!0,e}return d(n,[{key:"vertices",get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e}},{key:"_render",value:function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),lm(v(n.prototype),"_render",this).call(this,e)}}]),n}(PE),UE=function(e){p(n,e);var t=g(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;l(this,n);var o=new DE(e.height,r,a),s=new RE(e);return a>0&&(e.baseTexture.wrapMode=op.REPEAT),(i=t.call(this,o,s)).autoUpdate=!0,i}return d(n,[{key:"_render",value:function(e){var t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),lm(v(n.prototype),"_render",this).call(this,e)}}]),n}(PE),HE=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l(this,n);return a>16384&&(a=16384),(e=t.call(this))._properties=[!1,!0,!1,!1,!1],e._maxSize=r,e._batchSize=a,e._buffers=null,e._bufferUpdateIDs=[],e._updateID=0,e.interactiveChildren=!1,e.blendMode=Jf.NORMAL,e.autoResize=o,e.roundPixels=!0,e.baseTexture=null,e.setProperties(i),e._tintColor=new Tv(0),e.tintRgb=new Float32Array(3),e.tint=16777215,e}return d(n,[{key:"setProperties",value:function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}},{key:"updateTransform",value:function(){this.displayObjectUpdateTransform()}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}},{key:"render",value:function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}},{key:"onChildrenChange",value:function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}},{key:"dispose",value:function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}},{key:"destroy",value:function(e){lm(v(n.prototype),"destroy",this).call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}]),n}(Pb),jE=function(){function e(t,n,r){l(this,e),this.geometry=new Nm,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var a=t[i];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||rp.FLOAT,offset:a.offset},n[i]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return d(e,[{key:"initBuffers",value:function(){var e=this.geometry,t=0;this.indexBuffer=new Am(Dv(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var r=this.dynamicProperties[n];r.offset=t,t+=r.size,this.dynamicStride+=r.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Am(this.dynamicData,!1,!1);var a=0;this.staticStride=0;for(var o=0;o<this.staticProperties.length;++o){var s=this.staticProperties[o];s.offset=a,a+=s.size,this.staticStride+=s.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new Am(this.staticData,!0,!1);for(var u=0;u<this.dynamicProperties.length;++u){var c=this.dynamicProperties[u];e.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===rp.UNSIGNED_BYTE,c.type,4*this.dynamicStride,4*c.offset)}for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];e.addAttribute(d.attributeName,this.staticBuffer,0,d.type===rp.UNSIGNED_BYTE,d.type,4*this.staticStride,4*d.offset)}}},{key:"uploadDynamic",value:function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===rp.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}},{key:"uploadStatic",value:function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===rp.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}},{key:"destroy",value:function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}]),e}(),zE=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).shader=null,r.properties=null,r.tempMatrix=new Ym,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:rp.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=Tg.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=gm.for2d(),r}return d(n,[{key:"render",value:function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,a=t.length;if(0!==a){a>n&&!e.autoResize&&(a=n);var o=e._buffers;o||(o=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture,l=s.alphaMode>0;this.state.blendMode=Ov(e.blendMode,l),i.state.set(this.state);var u=i.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=Tv.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var h=!1,d=0,f=0;d<a;d+=r,f+=1){var p=a-d;p>r&&(p=r),f>=o.length&&o.push(this._generateOneMoreBuffer(e));var v=o[f];v.uploadDynamic(t,d,p);var m=e._bufferUpdateIDs[f]||0;(h=h||v._updateID<m)&&(v._updateID=e._updateID,v.uploadStatic(t,d,p)),i.geometry.bind(v.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}}},{key:"generateBuffers",value:function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,a=0;a<n;a+=r)t.push(new jE(this.properties,i,r));return t}},{key:"_generateOneMoreBuffer",value:function(e){var t=e._batchSize,n=e._properties;return new jE(this.properties,n,t)}},{key:"uploadVertices",value:function(e,t,n,r,i,a){for(var o=0,s=0,l=0,u=0,c=0;c<n;++c){var h=e[t+c],d=h._texture,f=h.scale.x,p=h.scale.y,v=d.trim,m=d.orig;v?(o=(s=v.x-h.anchor.x*m.width)+v.width,l=(u=v.y-h.anchor.y*m.height)+v.height):(o=m.width*(1-h.anchor.x),s=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),u=m.height*-h.anchor.y),r[a]=s*f,r[a+1]=u*p,r[a+i]=o*f,r[a+i+1]=u*p,r[a+2*i]=o*f,r[a+2*i+1]=l*p,r[a+3*i]=s*f,r[a+3*i+1]=l*p,a+=4*i}}},{key:"uploadPosition",value:function(e,t,n,r,i,a){for(var o=0;o<n;o++){var s=e[t+o].position;r[a]=s.x,r[a+1]=s.y,r[a+i]=s.x,r[a+i+1]=s.y,r[a+2*i]=s.x,r[a+2*i+1]=s.y,r[a+3*i]=s.x,r[a+3*i+1]=s.y,a+=4*i}}},{key:"uploadRotation",value:function(e,t,n,r,i,a){for(var o=0;o<n;o++){var s=e[t+o].rotation;r[a]=s,r[a+i]=s,r[a+2*i]=s,r[a+3*i]=s,a+=4*i}}},{key:"uploadUvs",value:function(e,t,n,r,i,a){for(var o=0;o<n;++o){var s=e[t+o]._texture._uvs;s?(r[a]=s.x0,r[a+1]=s.y0,r[a+i]=s.x1,r[a+i+1]=s.y1,r[a+2*i]=s.x2,r[a+2*i+1]=s.y2,r[a+3*i]=s.x3,r[a+3*i+1]=s.y3,a+=4*i):(r[a]=0,r[a+1]=0,r[a+i]=0,r[a+i+1]=0,r[a+2*i]=0,r[a+2*i+1]=0,r[a+3*i]=0,r[a+3*i+1]=0,a+=4*i)}}},{key:"uploadTint",value:function(e,t,n,r,i,a){for(var o=0;o<n;++o){var s=e[t+o],l=Tv.shared.setValue(s._tintRGB).toPremultiplied(s.alpha,s.texture.baseTexture.alphaMode>0);r[a]=l,r[a+i]=l,r[a+2*i]=l,r[a+3*i]=l,a+=4*i}}},{key:"destroy",value:function(){lm(v(n.prototype),"destroy",this).call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}]),n}(Cg);zE.extension={name:"particle",type:um.RendererPlugin},dm.add(zE);var VE=function(e){return e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e}(VE||{}),GE={willReadFrequently:!0},WE=function(){function e(t,n,r,i,a,o,s,u,c){l(this,e),this.text=t,this.style=n,this.width=r,this.height=i,this.lines=a,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=u,this.fontProperties=c}return d(e,null,[{key:"experimentalLetterSpacingSupported",get:function(){var t=e._experimentalLetterSpacingSupported;if(void 0!==t){var n=gp.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}},{key:"measureText",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=void 0===r||null===r?n.wordWrap:r;var a=n.toFontString(),o=e.measureFont(a);0===o.fontSize&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);var s=i.getContext("2d",GE);s.font=a;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,h=0;h<l.length;h++){var d=e._measureText(l[h],n.letterSpacing,s);u[h]=d,c=Math.max(c,d)}var f=c+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||o.fontSize+n.strokeThickness,v=Math.max(p,o.fontSize+2*n.strokeThickness)+(l.length-1)*(p+n.leading);return n.dropShadow&&(v+=n.dropShadowDistance),new e(t,n,f,v,l,u,p+n.leading,c,o)}},{key:"_measureText",value:function(t,n,r){var i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing="".concat(n,"px"),r.textLetterSpacing="".concat(n,"px"),i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));var a=r.measureText(t).width;return a>0&&(i?a-=n:a+=(e.graphemeSegmenter(t).length-1)*n),a}},{key:"wordWrap",value:function(t,n){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d",GE),i=0,a="",o="",s=Object.create(null),l=n.letterSpacing,u=n.whiteSpace,c=e.collapseSpaces(u),h=e.collapseNewlines(u),d=!c,f=n.wordWrapWidth+l,p=e.tokenize(t),v=0;v<p.length;v++){var m=p[v];if(e.isNewline(m)){if(!h){o+=e.addLine(a),d=!c,a="",i=0;continue}m=" "}if(c){var g=e.isBreakingSpace(m),y=e.isBreakingSpace(a[a.length-1]);if(g&&y)continue}var b=e.getFromCache(m,l,s,r);if(b>f)if(""!==a&&(o+=e.addLine(a),a="",i=0),e.canBreakWords(m,n.breakWords))for(var _=e.wordWrapSplit(m),x=0;x<_.length;x++){for(var E=_[x],w=E,T=1;_[x+T];){var S=_[x+T];if(e.canBreakChars(w,S,m,x,n.breakWords))break;E+=S,w=S,T++}x+=T-1;var k=e.getFromCache(E,l,s,r);k+i>f&&(o+=e.addLine(a),d=!1,a="",i=0),a+=E,i+=k}else{a.length>0&&(o+=e.addLine(a),a="",i=0);var C=v===p.length-1;o+=e.addLine(m,!C),d=!1,a="",i=0}else b+i>f&&(d=!1,o+=e.addLine(a),a="",i=0),(a.length>0||!e.isBreakingSpace(m)||d)&&(a+=m,i+=b)}return o+=e.addLine(a,!1)}},{key:"addLine",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=n?"".concat(t,"\n"):t}},{key:"getFromCache",value:function(t,n,r,i){var a=r[t];return"number"!==typeof a&&(a=e._measureText(t,n,i)+n,r[t]=a),a}},{key:"collapseSpaces",value:function(e){return"normal"===e||"pre-line"===e}},{key:"collapseNewlines",value:function(e){return"normal"===e}},{key:"trimRight",value:function(t){if("string"!==typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}},{key:"isNewline",value:function(t){return"string"===typeof t&&e._newlines.includes(t.charCodeAt(0))}},{key:"isBreakingSpace",value:function(t,n){return"string"===typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}},{key:"tokenize",value:function(t){var n=[],r="";if("string"!==typeof t)return n;for(var i=0;i<t.length;i++){var a=t[i],o=t[i+1];e.isBreakingSpace(a,o)||e.isNewline(a)?(""!==r&&(n.push(r),r=""),n.push(a)):r+=a}return""!==r&&n.push(r),n}},{key:"canBreakWords",value:function(e,t){return t}},{key:"canBreakChars",value:function(e,t,n,r,i){return!0}},{key:"wordWrapSplit",value:function(t){return e.graphemeSegmenter(t)}},{key:"measureFont",value:function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var a=e.METRICS_STRING+e.BASELINE_SYMBOL,o=Math.ceil(i.measureText(a).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*s);if(s=s*e.BASELINE_MULTIPLIER|0,0===o||0===l)return e._fonts[t]=n,n;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(a,0,s);var u=i.getImageData(0,0,o,l).data,c=u.length,h=4*o,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<h;v+=4)if(255!==u[f+v]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=l;d>s;--d){for(var m=0;m<h;m+=4)if(255!==u[f+m]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n}},{key:"clearMetrics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}}},{key:"_canvas",get:function(){if(!e.__canvas){var t;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d",GE);if(null!==r&&void 0!==r&&r.measureText)return e.__canvas=n,n;t=gp.ADAPTER.createCanvas()}catch(i){t=gp.ADAPTER.createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}},{key:"_context",get:function(){return e.__context||(e.__context=e._canvas.getContext("2d",GE)),e.__context}}]),e}(),XE=WE;XE.METRICS_STRING="|\xc9q\xc5",XE.BASELINE_SYMBOL="M",XE.BASELINE_MULTIPLIER=1.4,XE.HEIGHT_MULTIPLIER=2,XE.graphemeSegmenter=function(){var e;if("function"===typeof(null===(e=Intl)||void 0===e?void 0:e.Segmenter)){var t=new Intl.Segmenter;return function(e){return Ie(t.segment(e)).map((function(e){return e.segment}))}}return function(e){return Ie(e)}}(),XE.experimentalLetterSpacing=!1,XE._fonts={},XE._newlines=[10,13],XE._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var YE=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],KE=function(){function e(t){l(this,e),this.styleID=0,this.reset(),ZE(this,t,t)}return d(e,[{key:"clone",value:function(){var t={};return ZE(t,this,e.defaultStyle),new e(t)}},{key:"reset",value:function(){ZE(this,e.defaultStyle,e.defaultStyle)}},{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=$E(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=$E(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=$E(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}},{key:"toFontString",value:function(){var e="number"===typeof this.fontSize?"".concat(this.fontSize,"px"):this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||YE.includes(r)||(r='"'.concat(r,'"')),t[n]=r}return"".concat(this.fontStyle," ").concat(this.fontVariant," ").concat(this.fontWeight," ").concat(e," ").concat(t.join(","))}}]),e}(),qE=KE;function $E(e){var t=Tv.shared;return Array.isArray(e)?e.map((function(e){return t.setValue(e).toHex()})):t.setValue(e).toHex()}function ZE(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}qE.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:VE.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var QE={texture:!0,children:!1,baseTexture:!0},JE=function(e){p(n,e);var t=g(n);function n(e,r,i){var a,o;l(this,n);var s=!1;i||(i=gp.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;var u=Gg.from(i);return u.orig=new zm,u.trim=new zm,(o=t.call(this,u))._ownCanvas=s,o.canvas=i,o.context=i.getContext("2d",{willReadFrequently:!0}),o._resolution=null!==(a=n.defaultResolution)&&void 0!==a?a:gp.RESOLUTION,o._autoResolution=n.defaultAutoResolution,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=e,o.style=r,o.localStyleID=-1,o}return d(n,[{key:"updateText",value:function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n,r,i=this.context,a=XE.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),o=a.width,s=a.height,l=a.lines,u=a.lineHeight,c=a.lineWidths,h=a.maxLineWidth,d=a.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,o)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*t.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;for(var f=t.dropShadow?2:1,p=0;p<f;++p){var v=t.dropShadow&&0===p,m=v?Math.ceil(Math.max(1,s)+2*t.padding):0,g=m*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var y=t.dropShadowColor,b=t.dropShadowBlur*this._resolution,_=t.dropShadowDistance*this._resolution;i.shadowColor=Tv.shared.setValue(y).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=b,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*_,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*_+g}else i.fillStyle=this._generateFillStyle(t,l,a),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var x=(u-d.fontSize)/2;u-d.fontSize<0&&(x=0);for(var E=0;E<l.length;E++)n=t.strokeThickness/2,r=t.strokeThickness/2+E*u+d.ascent+x,"right"===t.align?n+=h-c[E]:"center"===t.align&&(n+=(h-c[E])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(l[E],n+t.padding,r+t.padding-m,!0),t.fill&&this.drawLetterSpacing(l[E],n+t.padding,r+t.padding-m)}this.updateTexture()}}},{key:"drawLetterSpacing",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing,a=!1;if(XE.experimentalLetterSpacingSupported&&(XE.experimentalLetterSpacing?(this.context.letterSpacing="".concat(i,"px"),this.context.textLetterSpacing="".concat(i,"px"),a=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===i||a)r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);else for(var o=t,s=XE.graphemeSegmenter(e),l=this.context.measureText(e).width,u=0,c=0;c<s.length;++c){var h=s[c];r?this.context.strokeText(h,o,n):this.context.fillText(h,o,n);for(var d="",f=c+1;f<s.length;++f)d+=s[f];o+=l-(u=this.context.measureText(d).width)+i,l=u}}},{key:"updateTexture",value:function(){var e=this.canvas;if(this._style.trim){var t=im(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,a=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),a.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),lm(v(n.prototype),"_render",this).call(this,e)}},{key:"updateTransform",value:function(){this.updateText(!0),lm(v(n.prototype),"updateTransform",this).call(this)}},{key:"getBounds",value:function(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),lm(v(n.prototype),"getBounds",this).call(this,e,t)}},{key:"getLocalBounds",value:function(e){return this.updateText(!0),lm(v(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"_calculateBounds",value:function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}},{key:"_generateFillStyle",value:function(e,t,n){var r,i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var a=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,s=this.canvas.width/this._resolution-a-2*o,l=this.canvas.height/this._resolution-a-2*o,u=i.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var h=u.length+1,d=1;d<h;++d)c.push(d/h);if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),e.fillGradientType===VE.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,o,s/2,l+o);for(var f=n.fontProperties.fontSize+e.strokeThickness,p=0;p<t.length;p++){var v=n.lineHeight*(p-1)+f,m=n.lineHeight*p,g=m;p>0&&v>m&&(g=(m+v)/2);var y=m+f,b=n.lineHeight*(p+1),_=y;p+1<t.length&&b<y&&(_=(y+b)/2);for(var x=(_-g)/l,E=0;E<u.length;E++){var w=0;w="number"===typeof c[E]?c[E]:E/u.length;var T=Math.min(1,Math.max(0,g/l+w*x));T=Number(T.toFixed(5)),r.addColorStop(T,u[E])}}}else{r=this.context.createLinearGradient(o,l/2,s+o,l/2);for(var S=u.length+1,k=1,C=0;C<u.length;C++){var A=void 0;A="number"===typeof c[C]?c[C]:k/S,r.addColorStop(A,u[C]),k++}}return r}},{key:"destroy",value:function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},QE,e),lm(v(n.prototype),"destroy",this).call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}},{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=Vv(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=Vv(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof qE?e:new qE(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(null===e||void 0===e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}}],[{key:"experimentalLetterSpacing",get:function(){return XE.experimentalLetterSpacing},set:function(e){Wp("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),XE.experimentalLetterSpacing=e}}]),n}(Nb),ew=JE;ew.defaultAutoResolution=!0;var tw=function(){function e(t){l(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return d(e,[{key:"beginFrame",value:function(){this.itemsLeft=this.maxItemsPerFrame}},{key:"allowedToUpload",value:function(){return this.itemsLeft-- >0}}]),e}();function nw(e,t){var n,r=!1;if(null!==e&&void 0!==e&&null!==(n=e._textures)&&void 0!==n&&n.length)for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof Gg){var a=e._textures[i].baseTexture;t.includes(a)||(t.push(a),r=!0)}return r}function rw(e,t){if(e.baseTexture instanceof Sm){var n=e.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function iw(e,t){if(e._texture&&e._texture instanceof Gg){var n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function aw(e,t){return t instanceof ew&&(t.updateText(!0),!0)}function ow(e,t){if(t instanceof qE){var n=t.toFontString();return XE.measureFont(n),!0}return!1}function sw(e,t){if(e instanceof ew){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);var n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function lw(e,t){return e instanceof qE&&(t.includes(e)||t.push(e),!0)}var uw=function(){function e(t){var n=this;l(this,e),this.limiter=new tw(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(sw),this.registerFindHook(lw),this.registerFindHook(nw),this.registerFindHook(rw),this.registerFindHook(iw),this.registerUploadHook(aw),this.registerUploadHook(ow)}return d(e,[{key:"upload",value:function(e){var t=this;return new Promise((function(n){e&&t.add(e),t.queue.length?(t.completes.push(n),t.ticking||(t.ticking=!0,tb.system.addOnce(t.tick,t,Qy.UTILITY))):n()}))}},{key:"tick",value:function(){setTimeout(this.delayedTick,0)}},{key:"prepareItems",value:function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)tb.system.addOnce(this.tick,this,Qy.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var a=0,o=i.length;a<o;a++)i[a]()}}},{key:"registerFindHook",value:function(e){return e&&this.addHooks.push(e),this}},{key:"registerUploadHook",value:function(e){return e&&this.uploadHooks.push(e),this}},{key:"add",value:function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof Pb)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}},{key:"destroy",value:function(){this.ticking&&tb.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}]),e}(),cw=uw;function hw(e,t){return t instanceof Sm&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function dw(e,t){if(!(t instanceof SE))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var a=r[i].style.texture;a&&hw(e,a.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function fw(e,t){return e instanceof SE&&(t.push(e),!0)}cw.uploadsPerFrame=4,Object.defineProperties(gp,{UPLOADS_PER_FRAME:{get:function(){return cw.uploadsPerFrame},set:function(e){Wp("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),cw.uploadsPerFrame=e}}});var pw=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).uploadHookHelper=r.renderer,r.registerFindHook(fw),r.registerUploadHook(hw),r.registerUploadHook(dw),r}return d(n)}(cw);pw.extension={name:"prepare",type:um.RendererSystem},dm.add(pw);var vw=function(){function e(t){l(this,e),this.maxMilliseconds=t,this.frameStart=0}return d(e,[{key:"beginFrame",value:function(){this.frameStart=Date.now()}},{key:"allowedToUpload",value:function(){return Date.now()-this.frameStart<this.maxMilliseconds}}]),e}(),mw=function(e){p(n,e);var t=g(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l(this,n),(r=t.call(this,e[0]instanceof Gg?e[0]:e[0].texture))._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return d(n,[{key:"stop",value:function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(tb.shared.remove(this.update,this),this._isConnectedToTicker=!1))}},{key:"play",value:function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(tb.shared.add(this.update,this,Qy.HIGH),this._isConnectedToTicker=!0))}},{key:"gotoAndStop",value:function(e){this.stop(),this.currentFrame=e}},{key:"gotoAndPlay",value:function(e){this.currentFrame=e,this.play()}},{key:"update",value:function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}}},{key:"updateTexture",value:function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}},{key:"destroy",value:function(e){this.stop(),lm(v(n.prototype),"destroy",this).call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}},{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof Gg)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},set:function(e){if(e<0||e>this.totalFrames-1)throw new Error("[AnimatedSprite]: Invalid frame index value ".concat(e,", expected to be between 0 and totalFrames ").concat(this.totalFrames,"."));var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}},{key:"playing",get:function(){return this._playing}},{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(tb.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(tb.shared.add(this.update,this),this._isConnectedToTicker=!0))}}],[{key:"fromFrames",value:function(e){for(var t=[],r=0;r<e.length;++r)t.push(Gg.from(e[r]));return new n(t)}},{key:"fromImages",value:function(e){for(var t=[],r=0;r<e.length;++r)t.push(Gg.from(e[r]));return new n(t)}}]),n}(Nb),gw=new Hm,yw=function(e){p(n,e);var t=g(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return l(this,n),(r=t.call(this,e)).tileTransform=new ig,r._width=i,r._height=a,r.uvMatrix=r.texture.uvMatrix||new ay(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return d(n,[{key:"clampMargin",get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)}},{key:"_onTextureUpdate",value:function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}},{key:"_render",value:function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}},{key:"_calculateBounds",value:function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)}},{key:"getLocalBounds",value:function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new zm),e=this._localBoundsRect),this._bounds.getRectangle(e)):lm(v(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"containsPoint",value:function(e){this.worldTransform.applyInverse(e,gw);var t=this._width,n=this._height,r=-t*this.anchor._x;if(gw.x>=r&&gw.x<r+t){var i=-n*this.anchor._y;if(gw.y>=i&&gw.y<i+n)return!0}return!1}},{key:"destroy",value:function(e){lm(v(n.prototype),"destroy",this).call(this,e),this.tileTransform=null,this.uvMatrix=null}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}],[{key:"from",value:function(e,t){return new n(e instanceof Gg?e:Gg.from(e,t),t.width,t.height)}}]),n}(Nb),bw="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",_w=new Ym,xw=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this,e),e.runners.contextChange.add(m(r)),r.quad=new Kg,r.state=gm.for2d(),r}return d(n,[{key:"contextChange",value:function(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=Tg.from(bw,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?Tg.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):Tg.from(bw,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}},{key:"render",value:function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);var i=e.uvRespectAnchor?e.anchor.x:0,a=e.uvRespectAnchor?e.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-a,r[2]=r[4]=1-i,r[5]=r[7]=1-a,n.invalidate();var o=e._texture,s=o.baseTexture,l=s.alphaMode>0,u=e.tileTransform.localTransform,c=e.uvMatrix,h=s.isPowerOfTwo&&o.frame.width===s.width&&o.frame.height===s.height;h&&(s._glTextures[t.CONTEXT_UID]?h=s.wrapMode!==op.CLAMP:s.wrapMode===op.CLAMP&&(s.wrapMode=op.REPEAT));var d=h?this.simpleShader:this.shader,f=o.width,p=o.height,v=e._width,m=e._height;_w.set(u.a*f/v,u.b*f/m,u.c*p/v,u.d*p/m,u.tx/v,u.ty/m),_w.invert(),h?_w.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=_w.toArray(!0),d.uniforms.uColor=Tv.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=o,t.shader.bind(d),t.geometry.bind(n),this.state.blendMode=Ov(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}]),n}(Cg);xw.extension={name:"tilingSprite",type:um.RendererPlugin},dm.add(xw);var Ew=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,e),this.linkedSheets=[],this._texture=t instanceof Gg?t:null,this.baseTexture=t instanceof Sm?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return d(e,[{key:"_updateResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.data.meta.scale,n=sm(e,null);return null===n&&(n=parseFloat(null!==t&&void 0!==t?t:"1")),1!==n&&this.baseTexture.setResolution(n),n}},{key:"parse",value:function(){var t=this;return new Promise((function(n){t._callback=n,t._batchIndex=0,t._frameKeys.length<=e.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()}))}},{key:"_processFrames",value:function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],a=this._frames[i],o=a.frame;if(o){var s=null,l=null,u=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,c=new zm(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s=a.rotated?new zm(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):new zm(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(l=new zm(Math.floor(a.spriteSourceSize.x)/this.resolution,Math.floor(a.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new Gg(this.baseTexture,s,c,l,a.rotated?2:0,a.anchor,a.borders),Gg.addToCache(this.textures[i],i)}n++}}},{key:"_processAnimations",value:function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}}},{key:"_parseComplete",value:function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}},{key:"_nextBatch",value:function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)}},{key:"destroy",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var n in this.textures)this.textures[n].destroy();(this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t)&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy());this._texture=null,this.baseTexture=null,this.linkedSheets=[]}}]),e}(),ww=Ew;ww.BATCH_SIZE=1e3;var Tw=["jpg","png","jpeg","avif","webp"];function Sw(e,t,n){var r={};if(e.forEach((function(e){r[e]=t})),Object.keys(t.textures).forEach((function(e){r[e]=t.textures[e]})),!n){var i=Vp.dirname(e[0]);t.linkedSheets.forEach((function(e,n){var a=Sw(["".concat(i,"/").concat(t.data.meta.related_multi_packs[n])],e,!0);Object.assign(r,a)}))}return r}var kw={extension:um.Asset,cache:{test:function(e){return e instanceof ww},getCacheableAssets:function(e,t){return Sw(e,t,!1)}},resolver:{test:function(e){var t=e.split("?")[0].split("."),n=t.pop(),r=t.pop();return"json"===n&&Tw.includes(r)},parse:function(e){var t,n,r=e.split(".");return{resolution:parseFloat(null!==(t=null===(n=gp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:r[r.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:um.LoadParser,priority:x_.Normal},testParse:function(e,t){return _e(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",".json"===Vp.extname(t.src).toLowerCase()&&!!e.frames);case 1:case"end":return n.stop()}}),n)})))()},parse:function(e,t,n){return _e(ye().mark((function r(){var i,a,o,s,l,u,c,h,d,f,p,v,m,g;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(a=Vp.dirname(t.src))&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),o=a+e.meta.image,o=ax(o,t.src),r.next=6,n.load([o]);case 6:return s=r.sent,l=s[o],u=new ww(l.baseTexture,e,t.src),r.next=11,u.parse();case 11:if(c=null===e||void 0===e||null===(i=e.meta)||void 0===i?void 0:i.related_multi_packs,!Array.isArray(c)){r.next=41;break}h=[],d=Gy(c),r.prev=15,d.s();case 17:if((f=d.n()).done){r.next=28;break}if("string"===typeof(v=f.value)){r.next=21;break}return r.abrupt("continue",26);case 21:if(m=a+v,null===(p=t.data)||void 0===p||!p.ignoreMultiPack){r.next=24;break}return r.abrupt("continue",26);case 24:m=ax(m,t.src),h.push(n.load({src:m,data:{ignoreMultiPack:!0}}));case 26:r.next=17;break;case 28:r.next=33;break;case 30:r.prev=30,r.t0=r.catch(15),d.e(r.t0);case 33:return r.prev=33,d.f(),r.finish(33);case 36:return r.next=38,Promise.all(h);case 38:g=r.sent,u.linkedSheets=g,g.forEach((function(e){e.linkedSheets=[u].concat(u.linkedSheets.filter((function(t){return t!==e})))}));case 41:return r.abrupt("return",u);case 42:case"end":return r.stop()}}),r,null,[[15,30,33,36]])})))()},unload:function(e){e.destroy(!0)}}};dm.add(kw);var Cw=d((function e(){l(this,e),this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]})),Aw=function(){function e(){l(this,e)}return d(e,null,[{key:"test",value:function(e){return"string"===typeof e&&e.startsWith("info face=")}},{key:"parse",value:function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],a=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),o={};for(var s in a){var l=a[s].split("="),u=l[0],c=l[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;o[u]=d}n[i].push(o)}var f=new Cw;return n.info.forEach((function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})})),n.common.forEach((function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})})),n.page.forEach((function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})})),n.char.forEach((function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),n.kerning.forEach((function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),n.distanceField.forEach((function(e){return f.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})})),f}}]),e}(),Iw=function(){function e(){l(this,e)}return d(e,null,[{key:"test",value:function(e){var t=e;return"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}},{key:"parse",value:function(e){for(var t=new Cw,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),a=e.getElementsByTagName("char"),o=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var u=0;u<r.length;u++)t.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(var c=0;c<i.length;c++)t.page.push({id:parseInt(i[c].getAttribute("id"),10)||0,file:i[c].getAttribute("file")});for(var h=0;h<a.length;h++){var d=a[h];t.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(var f=0;f<o.length;f++)t.kerning.push({first:parseInt(o[f].getAttribute("first"),10),second:parseInt(o[f].getAttribute("second"),10),amount:parseInt(o[f].getAttribute("amount"),10)});for(var p=0;p<s.length;p++)t.distanceField.push({fieldType:s[p].getAttribute("fieldType"),distanceRange:parseInt(s[p].getAttribute("distanceRange"),10)});return t}}]),e}(),Ow=function(){function e(){l(this,e)}return d(e,null,[{key:"test",value:function(e){return!("string"!==typeof e||!e.includes("<font>"))&&Iw.test(gp.ADAPTER.parseXML(e))}},{key:"parse",value:function(e){return Iw.parse(gp.ADAPTER.parseXML(e))}}]),e}(),Pw=[Aw,Iw,Ow];function Mw(e){for(var t=0;t<Pw.length;t++)if(Pw[t].test(e))return Pw[t];return null}function Rw(e,t,n,r,i,a,o){var s=n.text,l=n.fontProperties;t.translate(r,i),t.scale(a,a);var u=o.strokeThickness/2,c=-o.strokeThickness/2;if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=function(e,t,n,r,i,a){var o,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=e.width/r-l-2*u,h=e.height/r-l-2*u,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,v=1;v<p;++v)f.push(v/p);if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===VE.LINEAR_VERTICAL){o=t.createLinearGradient(c/2,u,c/2,h+u);for(var m=0,g=(a.fontProperties.fontSize+n.strokeThickness)/h,y=0;y<i.length;y++)for(var b=a.lineHeight*y,_=0;_<d.length;_++){var x=b/h+("number"===typeof f[_]?f[_]:_/d.length)*g,E=Math.max(m,x);E=Math.min(E,1),o.addColorStop(E,d[_]),m=E}}else{o=t.createLinearGradient(u,h/2,c+u,h/2);for(var w=d.length+1,T=1,S=0;S<d.length;S++){var k=void 0;k="number"===typeof f[S]?f[S]:T/w,o.addColorStop(k,d[S]),T++}}return o}(e,t,o,a,[s],n),t.strokeStyle=o.stroke,o.dropShadow){var h=o.dropShadowColor,d=o.dropShadowBlur*a,f=o.dropShadowDistance*a;t.shadowColor=Tv.shared.setValue(h).setAlpha(o.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(s,u,c+n.lineHeight-l.descent),o.fill&&t.fillText(s,u,c+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Nw(e){return Array.from?Array.from(e):e.split("")}function Dw(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var Lw=["chars","padding","resolution","textureWidth","textureHeight"],Fw=function(){function e(t,n,r){var i,a;l(this,e);var o=It(t.info,1)[0],s=It(t.common,1)[0],u=It(t.page,1)[0],c=It(t.distanceField,1)[0],h=sm(u.file),d={};this._ownsTextures=r,this.font=o.face,this.size=o.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=d;for(var f=0;f<t.page.length;f++){var p=t.page[f],v=p.id,m=p.file;d[v]=n instanceof Array?n[f]:n[m],null!==c&&void 0!==c&&c.fieldType&&"none"!==c.fieldType&&(d[v].baseTexture.alphaMode=lp.NO_PREMULTIPLIED_ALPHA,d[v].baseTexture.mipmap=sp.OFF)}for(var g=0;g<t.char.length;g++){var y=t.char[g],b=y.id,_=y.page,x=t.char[g],E=x.x,w=x.y,T=x.width,S=x.height,k=x.xoffset,C=x.yoffset,A=x.xadvance;w/=h,T/=h,S/=h,k/=h,C/=h,A/=h;var I=new zm((E/=h)+d[_].frame.x/h,w+d[_].frame.y/h,T,S);this.chars[b]={xOffset:k,yOffset:C,xAdvance:A,kerning:{},texture:new Gg(d[_].baseTexture,I),page:_}}for(var O=0;O<t.kerning.length;O++){var P=t.kerning[O],M=P.first,R=P.second,N=P.amount;M/=h,R/=h,N/=h,this.chars[R]&&(this.chars[R].kerning[M]=N)}this.distanceFieldRange=null===c||void 0===c?void 0:c.distanceRange,this.distanceFieldType=null!==(i=null===c||void 0===c||null===(a=c.fieldType)||void 0===a?void 0:a.toLowerCase())&&void 0!==i?i:"none"}return d(e,[{key:"destroy",value:function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}}],[{key:"install",value:function(t,n,r){var i;if(t instanceof Cw)i=t;else{var a=Mw(t);if(!a)throw new Error("Unrecognized data format for font.");i=a.parse(t)}n instanceof Gg&&(n=[n]);var o=new e(i,n,r);return e.available[o.font]=o,o}},{key:"uninstall",value:function(t){var n=e.available[t];if(!n)throw new Error("No font found named '".concat(t,"'"));n.destroy(),delete e.available[t]}},{key:"from",value:function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),a=i.chars,o=i.padding,s=i.resolution,l=i.textureWidth,u=i.textureHeight,c=Wn(i,Lw),h=function(e){"string"===typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(i.length,"."));var a=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<a)throw new Error("[BitmapFont]: Invalid character range.");for(var s=a,l=o;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,Ie(Nw(i)))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(a),d=n instanceof qE?n:new qE(n),f=l,p=new Cw;p.info[0]={face:d.fontFamily,size:d.fontSize},p.common[0]={lineHeight:d.fontSize};for(var v,m,g,y=0,b=0,_=0,x=[],E=[],w=0;w<h.length;w++){v||((v=gp.ADAPTER.createCanvas()).width=l,v.height=u,m=v.getContext("2d"),g=new Sm(v,Pe({resolution:s},c)),x.push(g),E.push(new Gg(g)),p.page.push({id:E.length-1,file:""}));var T=h[w],S=XE.measureText(T,d,!1,v),k=S.width,C=Math.ceil(S.height),A=Math.ceil(("italic"===d.fontStyle?2:1)*k);if(b>=u-C*s){if(0===b)throw new Error("[BitmapFont] textureHeight ".concat(u,"px is too small (fontFamily: '").concat(d.fontFamily,"', fontSize: ").concat(d.fontSize,"px, char: '").concat(T,"')"));--w,v=null,m=null,g=null,b=0,y=0,_=0}else if(_=Math.max(C+S.fontProperties.descent,_),A*s+y>=f){if(0===y)throw new Error("[BitmapFont] textureWidth ".concat(l,"px is too small (fontFamily: '").concat(d.fontFamily,"', fontSize: ").concat(d.fontSize,"px, char: '").concat(T,"')"));--w,b+=_*s,b=Math.ceil(b),y=0,_=0}else{Rw(v,m,S,y,b,s,d);var I=Dw(S.text);p.char.push({id:I,page:E.length-1,x:y/s,y:b/s,width:A,height:C,xoffset:0,yoffset:0,xadvance:k-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),y+=(A+2*o)*s,y=Math.ceil(y)}}for(var O=0,P=h.length;O<P;O++)for(var M=h[O],R=0;R<P;R++){var N=h[R],D=m.measureText(M).width,L=m.measureText(N).width,F=m.measureText(M+N).width-(D+L);F&&p.kerning.push({first:Dw(M),second:Dw(N),amount:F})}var B=new e(p,E,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=B,B}}]),e}(),Bw=Fw;Bw.ALPHA=[["a","z"],["A","Z"]," "],Bw.NUMERIC=[["0","9"]],Bw.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Bw.ASCII=[[" ","~"]],Bw.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Fw.ALPHANUMERIC},Bw.available={};var Uw=[],Hw=[],jw=[],zw=function(e){p(n,e);var t=g(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,n),r=t.call(this);var a=Object.assign({},n.styleDefaults,i),o=a.align,s=a.tint,u=a.maxWidth,c=a.letterSpacing,h=a.fontName,d=a.fontSize;if(!Bw.available[h])throw new Error('Missing BitmapFont "'.concat(h,'"'));return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=o,r._tintColor=new Tv(s),r._font=void 0,r._fontName=h,r._fontSize=d,r.text=e,r._maxWidth=u,r._maxLineHeight=0,r._letterSpacing=c,r._anchor=new ng((function(){r.dirty=!0}),m(r),0,0),r._roundPixels=gp.ROUND_PIXELS,r.dirty=!0,r._resolution=gp.RESOLUTION,r._autoResolution=!0,r._textureCache={},r}return d(n,[{key:"updateText",value:function(){for(var e=Bw.available[this._fontName],t=this.fontSize,n=t/e.size,r=new Hm,i=[],a=[],o=[],s=Nw(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,u="none"===e.distanceFieldType?Uw:Hw,c=null,h=0,d=0,f=0,p=-1,v=0,m=0,g=0,y=0,b=0;b<s.length;b++){var _=s[b],x=Dw(_);if(/(?:\s)/.test(_)&&(p=b,v=h,y++),"\r"!==_&&"\n"!==_){var E=e.chars[x];if(E){c&&E.kerning[c]&&(r.x+=E.kerning[c]);var w=jw.pop()||{texture:Gg.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Hm};w.texture=E.texture,w.line=f,w.charCode=x,w.position.x=Math.round(r.x+E.xOffset+this._letterSpacing/2),w.position.y=Math.round(r.y+E.yOffset),w.prevSpaces=y,i.push(w),h=w.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),r.x+=E.xAdvance+this._letterSpacing,g=Math.max(g,E.yOffset+E.texture.height),c=x,-1!==p&&l>0&&r.x>l&&(zv(i,1+p-++m,1+b-p),b=p,p=-1,a.push(v),o.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,v),f++,r.x=0,r.y+=e.lineHeight,c=null,y=0)}}else a.push(h),o.push(-1),d=Math.max(d,h),++f,++m,r.x=0,r.y+=e.lineHeight,c=null,y=0}var T=s[s.length-1];"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(h=v),a.push(h),d=Math.max(d,h),o.push(-1));for(var S=[],k=0;k<=f;k++){var C=0;"right"===this._align?C=d-a[k]:"center"===this._align?C=(d-a[k])/2:"justify"===this._align&&(C=o[k]<0?0:(d-a[k])/o[k]),S.push(C)}var A=i.length,I={},O=[],P=this._activePagesMeshData;u.push.apply(u,Ie(P));for(var M=0;M<A;M++){var R=i[M].texture,N=R.baseTexture.uid;if(!I[N]){var D=u.pop();if(!D){var L=new ME,F=void 0,B=void 0;"none"===e.distanceFieldType?(F=new RE(Gg.EMPTY),B=Jf.NORMAL):(F=new RE(Gg.EMPTY,{program:xg.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),B=Jf.NORMAL_NPM);var U=new PE(L,F);U.blendMode=B,D={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:U,vertices:null,uvs:null,indices:null}}D.index=0,D.indexCount=0,D.vertexCount=0,D.uvsCount=0,D.total=0;var H=this._textureCache;H[N]=H[N]||new Gg(R.baseTexture),D.mesh.texture=H[N],D.mesh.tint=this._tintColor.value,O.push(D),I[N]=D}I[N].total++}for(var j=0;j<P.length;j++)O.includes(P[j])||this.removeChild(P[j].mesh);for(var z=0;z<O.length;z++)O[z].mesh.parent!==this&&this.addChild(O[z].mesh);for(var V in this._activePagesMeshData=O,I){var G,W=I[V],X=W.total;if(!((null===(G=W.indices)||void 0===G?void 0:G.length)>6*X)||W.vertices.length<2*PE.BATCHABLE_SIZE)W.vertices=new Float32Array(8*X),W.uvs=new Float32Array(8*X),W.indices=new Uint16Array(6*X);else for(var Y=W.total,K=W.vertices,q=4*Y*2;q<K.length;q++)K[q]=0;W.mesh.size=6*X}for(var $=0;$<A;$++){var Z=i[$],Q=Z.position.x+S[Z.line]*("justify"===this._align?Z.prevSpaces:1);this._roundPixels&&(Q=Math.round(Q));var J=Q*n,ee=Z.position.y*n,te=Z.texture,ne=I[te.baseTexture.uid],re=te.frame,ie=te._uvs,ae=ne.index++;ne.indices[6*ae+0]=0+4*ae,ne.indices[6*ae+1]=1+4*ae,ne.indices[6*ae+2]=2+4*ae,ne.indices[6*ae+3]=0+4*ae,ne.indices[6*ae+4]=2+4*ae,ne.indices[6*ae+5]=3+4*ae,ne.vertices[8*ae+0]=J,ne.vertices[8*ae+1]=ee,ne.vertices[8*ae+2]=J+re.width*n,ne.vertices[8*ae+3]=ee,ne.vertices[8*ae+4]=J+re.width*n,ne.vertices[8*ae+5]=ee+re.height*n,ne.vertices[8*ae+6]=J,ne.vertices[8*ae+7]=ee+re.height*n,ne.uvs[8*ae+0]=ie.x0,ne.uvs[8*ae+1]=ie.y0,ne.uvs[8*ae+2]=ie.x1,ne.uvs[8*ae+3]=ie.y1,ne.uvs[8*ae+4]=ie.x2,ne.uvs[8*ae+5]=ie.y2,ne.uvs[8*ae+6]=ie.x3,ne.uvs[8*ae+7]=ie.y3}for(var oe in this._textWidth=d*n,this._textHeight=(r.y+e.lineHeight)*n,I){var se=I[oe];if(0!==this.anchor.x||0!==this.anchor.y)for(var le=0,ue=this._textWidth*this.anchor.x,ce=this._textHeight*this.anchor.y,he=0;he<se.total;he++)se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce;this._maxLineHeight=g*n;var de=se.mesh.geometry.getBuffer("aVertexPosition"),fe=se.mesh.geometry.getBuffer("aTextureCoord"),pe=se.mesh.geometry.getIndex();de.data=se.vertices,fe.data=se.uvs,pe.data=se.indices,de.update(),fe.update(),pe.update()}for(var ve=0;ve<i.length;ve++)jw.push(i[ve]);this._font=e,this.dirty=!1}},{key:"updateTransform",value:function(){this.validate(),this.containerUpdateTransform()}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var t=Bw.available[this._fontName],r=t.distanceFieldRange,i=t.distanceFieldType,a=t.size;if("none"!==i){var o,s=this.worldTransform,l=s.a,u=s.b,c=s.c,h=s.d,d=Math.sqrt(l*l+u*u),f=Math.sqrt(c*c+h*h),p=(Math.abs(d)+Math.abs(f))/2,m=this.fontSize/a,g=e._view.resolution,y=Gy(this._activePagesMeshData);try{for(y.s();!(o=y.n()).done;){o.value.mesh.shader.uniforms.uFWidth=p*r*m*g}}catch(b){y.e(b)}finally{y.f()}}lm(v(n.prototype),"_render",this).call(this,e)}},{key:"getLocalBounds",value:function(){return this.validate(),lm(v(n.prototype),"getLocalBounds",this).call(this)}},{key:"validate",value:function(){var e=Bw.available[this._fontName];if(!e)throw new Error('Missing BitmapFont "'.concat(this._fontName,'"'));this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){if(this.tint!==e){this._tintColor.setValue(e);for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}},{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)}},{key:"fontName",get:function(){return this._fontName},set:function(e){if(!Bw.available[e])throw new Error('Missing BitmapFont "'.concat(e,'"'));this._fontName!==e&&(this._fontName=e,this.dirty=!0)}},{key:"fontSize",get:function(){var e;return null!==(e=this._fontSize)&&void 0!==e?e:Bw.available[this._fontName].size},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"===typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}},{key:"text",get:function(){return this._text},set:function(e){e=String(null===e||void 0===e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}},{key:"destroy",value:function(e){var t=this._textureCache,r="none"===Bw.available[this._fontName].distanceFieldType?Uw:Hw;r.push.apply(r,Ie(this._activePagesMeshData));var i,a=Gy(this._activePagesMeshData);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.removeChild(o.mesh)}}catch(l){a.e(l)}finally{a.f()}for(var s in this._activePagesMeshData=[],r.filter((function(e){return t[e.mesh.texture.baseTexture.uid]})).forEach((function(e){e.mesh.texture=Gg.EMPTY})),t){t[s].destroy(),delete t[s]}this._font=null,this._tintColor=null,this._textureCache=null,lm(v(n.prototype),"destroy",this).call(this,e)}}]),n}(Pb),Vw=zw;Vw.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var Gw=[".xml",".fnt"],Ww={extension:{type:um.LoadParser,priority:x_.Normal},name:"loadBitmapFont",test:function(e){return Gw.includes(Vp.extname(e).toLowerCase())},testParse:function(e){return _e(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Aw.test(e)||Ow.test(e));case 1:case"end":return t.stop()}}),t)})))()},parse:function(e,t,n){return _e(ye().mark((function r(){var i,a,o,s,l,u,c,h,d;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(i=Aw.test(e)?Aw.parse(e):Ow.parse(e),a=t.src,o=i.page,s=[],l=0;l<o.length;++l)u=o[l].file,c=Vp.join(Vp.dirname(a),u),c=ax(c,a),s.push(c);return r.next=7,n.load(s);case 7:return h=r.sent,d=s.map((function(e){return h[e]})),r.abrupt("return",Bw.install(i,d,!0));case 10:case"end":return r.stop()}}),r)})))()},load:function(e,t){return _e(ye().mark((function t(){var n;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,gp.ADAPTER.fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}}),t)})))()},unload:function(e){e.destroy()}};dm.add(Ww);var Xw=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.apply(this,arguments))._fonts=[],e._overrides=[],e._stylesheet="",e.fontsDirty=!1,e}return d(n,[{key:"cleanFonts",value:function(){this._fonts.length>0&&(this._fonts.forEach((function(e){URL.revokeObjectURL(e.src),e.refs--,0===e.refs&&(e.fontFace&&document.fonts.delete(e.fontFace),delete n.availableFonts[e.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}},{key:"loadFont",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.availableFonts;if(i[e]){var a=i[e];return this._fonts.push(a),a.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return gp.ADAPTER.fetch(e).then((function(e){return e.blob()})).then(function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=URL.createObjectURL(t),i=new FileReader;i.onload=function(){return e([r,i.result])},i.onerror=n,i.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var n=_e(ye().mark((function n(a){var o,s,l,u,c;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=It(a,2),s=o[0],l=o[1],u=Object.assign({family:Vp.basename(e,Vp.extname(e)),weight:"normal",style:"normal",src:s,dataSrc:l,refs:1,originalUrl:e,fontFace:null},r),i[e]=u,t._fonts.push(u),t.styleID++,c=new FontFace(u.family,"url(".concat(u.src,")"),{weight:u.weight,style:u.style}),u.fontFace=c,n.next=9,c.load();case 9:return document.fonts.add(c),n.next=12,document.fonts.ready;case 12:t.styleID++,t.fontsDirty=!0;case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"addOverride",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,a=n.filter((function(t){return!e._overrides.includes(t)}));a.length>0&&((i=this._overrides).push.apply(i,Ie(a)),this.styleID++)}},{key:"removeOverride",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter((function(t){return e._overrides.includes(t)}));i.length>0&&(this._overrides=this._overrides.filter((function(e){return!i.includes(e)})),this.styleID++)}},{key:"toCSS",value:function(e){return["transform: scale(".concat(e,")"),"transform-origin: top left","display: inline-block","color: ".concat(this.normalizeColor(this.fill)),"font-size: ".concat(this.fontSize,"px"),"font-family: ".concat(this.fontFamily),"font-weight: ".concat(this.fontWeight),"font-style: ".concat(this.fontStyle),"font-variant: ".concat(this.fontVariant),"letter-spacing: ".concat(this.letterSpacing,"px"),"text-align: ".concat(this.align),"padding: ".concat(this.padding,"px"),"white-space: ".concat(this.whiteSpace)].concat(Ie(this.lineHeight?["line-height: ".concat(this.lineHeight,"px")]:[]),Ie(this.wordWrap?["word-wrap: ".concat(this.breakWords?"break-all":"break-word"),"max-width: ".concat(this.wordWrapWidth,"px")]:[]),Ie(this.strokeThickness?["-webkit-text-stroke-width: ".concat(this.strokeThickness,"px"),"-webkit-text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"text-stroke-width: ".concat(this.strokeThickness,"px"),"text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"paint-order: stroke"]:[]),Ie(this.dropShadow?[this.dropShadowToCSS()]:[]),Ie(this._overrides)).join(";")}},{key:"toGlobalCSS",value:function(){return this._fonts.reduce((function(e,t){return"".concat(e,'\n            @font-face {\n                font-family: "').concat(t.family,"\";\n                src: url('").concat(t.dataSrc,"');\n                font-weight: ").concat(t.weight,";\n                font-style: ").concat(t.style,"; \n            }")}),this._stylesheet)}},{key:"stylesheet",get:function(){return this._stylesheet},set:function(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}},{key:"normalizeColor",value:function(e){return Array.isArray(e)&&(e=Av(e)),"number"===typeof e?kv(e):e}},{key:"dropShadowToCSS",value:function(){var e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));var i="".concat(n,"px ").concat(r,"px");return this.dropShadowBlur>0?"text-shadow: ".concat(i," ").concat(this.dropShadowBlur,"px ").concat(e):"text-shadow: ".concat(i," ").concat(e)}},{key:"reset",value:function(){Object.assign(this,n.defaultOptions)}},{key:"onBeforeDraw",value:function(){var e=this.fontsDirty;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise((function(e){return setTimeout(e,100)})):Promise.resolve()}},{key:"isSafari",get:function(){var e=gp.ADAPTER.getNavigator().userAgent;return/^((?!chrome|android).)*safari/i.test(e)}},{key:"fillGradientStops",get:function(){return lm(v(n.prototype),"fillGradientStops",this)},set:function(e){}},{key:"fillGradientType",get:function(){return lm(v(n.prototype),"fillGradientType",this)},set:function(e){}},{key:"miterLimit",get:function(){return lm(v(n.prototype),"miterLimit",this)},set:function(e){}},{key:"trim",get:function(){return lm(v(n.prototype),"trim",this)},set:function(e){}},{key:"textBaseline",get:function(){return lm(v(n.prototype),"textBaseline",this)},set:function(e){}},{key:"leading",get:function(){return lm(v(n.prototype),"leading",this)},set:function(e){}},{key:"lineJoin",get:function(){return lm(v(n.prototype),"lineJoin",this)},set:function(e){}}],[{key:"from",value:function(e){return new n(Object.keys(n.defaultOptions).reduce((function(t,n){return Pe(Pe({},t),{},y({},n,e[n]))}),{}))}}]),n}(qE),Yw=Xw;Yw.availableFonts={},Yw.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var Kw=function(e){p(n,e);var t=g(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,n),(r=t.call(this,Gg.EMPTY))._text=null,r._style=null,r._autoResolution=!0,r._loading=!1,r.localStyleID=-1,r.dirty=!1,r.ownsStyle=!1;var o=new Image,s=Gg.from(o,{scaleMode:gp.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new zm,s.trim=new zm,r.texture=s;var u="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",h=document.createElementNS(u,"svg"),d=document.createElementNS(u,"foreignObject"),f=document.createElementNS(c,"div"),p=document.createElementNS(c,"style");return d.setAttribute("width","10000"),d.setAttribute("height","10000"),d.style.overflow="hidden",h.appendChild(d),r.maxWidth=n.defaultMaxWidth,r.maxHeight=n.defaultMaxHeight,r._domElement=f,r._styleElement=p,r._svgRoot=h,r._foreignObject=d,r._foreignObject.appendChild(p),r._foreignObject.appendChild(f),r._image=o,r._loadImage=new Image,r._autoResolution=n.defaultAutoResolution,r._resolution=null!==(e=n.defaultResolution)&&void 0!==e?e:gp.RESOLUTION,r.text=i,r.style=a,r}return d(n,[{key:"measureText",value:function(e){var t=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e),n=t.text,r=t.style,i=t.resolution;Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);var a=this._domElement.getBoundingClientRect();this._svgRoot.remove();var o,s,l=Math.min(this.maxWidth,Math.ceil(a.width)),u=Math.min(this.maxHeight,Math.ceil(a.height));(this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style)&&(Object.assign(this._domElement,{style:null===(o=this._style)||void 0===o?void 0:o.toCSS(i)}),this._styleElement.textContent=null===(s=this._style)||void 0===s?void 0:s.toGlobalCSS());return{width:l+2*r.padding,height:u+2*r.padding}}},{key:"updateText",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a,o,s,l=this,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(u.length>0&&void 0!==u[0])||u[0],n=this.style,r=this._image,i=this._loadImage,this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){e.next=5;break}return e.abrupt("return");case 5:if(a=this.measureText(),o=a.width,s=a.height,r.width=i.width=Math.ceil(Math.max(1,o)),r.height=i.height=Math.ceil(Math.max(1,s)),this._loading){e.next=12;break}return this._loading=!0,e.next=12,new Promise((function(e){i.onload=_e(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.onBeforeDraw();case 2:l._loading=!1,r.src=i.src,i.onload=null,i.src="",l.updateTexture(),e();case 8:case"end":return t.stop()}}),t)})));var t=(new XMLSerializer).serializeToString(l._svgRoot);i.src="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(t))}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"source",get:function(){return this._image}},{key:"updateTexture",value:function(){var e=this.style,t=this.texture,n=this._image,r=this.resolution,i=e.padding,a=t.baseTexture;t.trim.width=t._frame.width=n.width/r,t.trim.height=t._frame.height=n.height/r,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),a.setRealSize(n.width,n.height,r),this.dirty=!1}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),lm(v(n.prototype),"_render",this).call(this,e)}},{key:"_renderCanvas",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),lm(v(n.prototype),"_renderCanvas",this).call(this,e)}},{key:"getLocalBounds",value:function(e){return this.updateText(!0),lm(v(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"_calculateBounds",value:function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}},{key:"_onStyleChange",value:function(){this.dirty=!0}},{key:"destroy",value:function(e){var t,r,i,a;"boolean"===typeof e&&(e={children:e}),e=Object.assign({},n.defaultDestroyOptions,e),lm(v(n.prototype),"destroy",this).call(this,e);var o,s=null;this.ownsStyle&&(null===(o=this._style)||void 0===o||o.cleanFonts());this._style=s,null===(t=this._svgRoot)||void 0===t||t.remove(),this._svgRoot=s,null===(r=this._domElement)||void 0===r||r.remove(),this._domElement=s,null===(i=this._foreignObject)||void 0===i||i.remove(),this._foreignObject=s,null===(a=this._styleElement)||void 0===a||a.remove(),this._styleElement=s,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=s,this._image.src="",this._image=s}},{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution},set:function(e){this.updateText(!0);var t=Vv(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution},set:function(e){this.updateText(!0);var t=Vv(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){this._style!==e&&((e=e||{})instanceof Yw?(this.ownsStyle=!1,this._style=e):e instanceof qE?(this.ownsStyle=!0,this._style=Yw.from(e)):(this.ownsStyle=!0,this._style=new Yw(e)),this.localStyleID=-1,this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}},{key:"sanitiseText",value:function(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}}]),n}(Nb),qw=Kw;qw.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},qw.defaultMaxWidth=2024,qw.defaultMaxHeight=2024,qw.defaultAutoResolution=!0;var $w=function(){function e(){l(this,e)}return d(e,null,[{key:"packTextures",value:function(t,n,r,i){for(var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=0,l=0,u=[],c=0,h=i.length;c<h;c++){var d=i[c];s+=d.width*d.height,u.push(d),l=Math.max(d.width,l)}u.sort(e.sortRectList),0===t&&(t=Math.sqrt(s)),t=Math.max(l+2*n,t);var f,p,v,m,g,y,b,_,x,E=this.HIGHEST,w=[];w.push({x:0,y:0,width:t,height:E});do{m=this.getHighestArea(w),b=w.indexOf(m),f=!1,_=0;for(var T=0,S=u.length;T<S;T++){if(p=(x=u[T]).width+n,v=x.height+r,m.width>=p&&m.height>=v&&(!a||(!(v>4*p)||(!(b>0)||m.height-v>=w[b-1].height)))){f=!0;break}_++}f?(x.x=m.x+n,x.y=m.y+r,u.splice(_,1),w.splice(b+1,0,{x:m.x+p,y:m.y,width:m.width-p,height:m.height}),m.y+=v,m.width=p,m.height-=v):(0===b?y=w[b+1]:b===w.length-1?y=w[b-1]:(g=w[b-1],y=w[b+1],y=g.height<=y.height?y:g),m.x<y.x&&(y.x=m.x),y.width=m.width+y.width,w.splice(b,1))}while(u.length>0);var k=e.getRightBottomRect(i);return E=k[1].y+k[1].height+r,t=k[0].x+k[0].width+n,o&&(E=e.getNearest2N(E),t=e.getNearest2N(t)),{x:0,y:0,width:t,height:E}}},{key:"sortRectList",value:function(e,t){var n=e.width+e.height,r=t.width+t.height;return n===r?e.width>t.width?-1:1:n>r?-1:1}},{key:"getNearest2N",value:function(e){return e&e-1?1<<e.toString(2).length:e}},{key:"getHighestArea",value:function(e){for(var t,n=0,r=0,i=e.length;r<i;r++){var a=e[r];a.height>n&&(n=a.height,t=a)}return t}},{key:"getLowestArea",value:function(e){for(var t,n=this.HIGHEST,r=0,i=e.length;r<i;r++){var a=e[r];a.height<n&&(n=a.height,t=a)}return t}},{key:"getRightBottomRect",value:function(e){var t,n,r=-1,i=-1;for(var a in e){var o=e[a];o.x+o.width>r&&(r=(t=o).x+o.width),o.y+o.height>i&&(i=(n=o).y+o.height)}return[t,n]}},{key:"packing",value:function(t,n,r,i,a){var o,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Gf.BestAreaFit,u=[];for(var c in a){var h=a[c];u.push({x:0,y:0,width:h.width,height:h.height,data:h.name})}switch(Kf.setCanRotate(!1),Kf.setGap(r,i),Kf.setLayoutMath(l),Kf.setSortOn(Xf.AREA),t>0&&n>0?(Kf.setMaxSize(t-r,n-i),Kf.insertRectanglesToMult(u)):(o=!0,Kf.setMaxSize(),Kf.insertRectangles(u)),Kf.resultType){case Yf.SHEET_TO_BIG:return null;case Yf.SUCCESS:Kf.resultSize.x>2048||Kf.resultSize.y;var d,f=Kf.results,p=0,v=0,m=0;for(d=0;d<f.length;d++){for(var g=0,y=0,b=0,_=f[d].length;b<_;b++){g=g>f[d][b].x+f[d][b].width?g:f[d][b].x+f[d][b].width,y=y>f[d][b].y+f[d][b].height?y:f[d][b].y+f[d][b].height;var x=a[f[d][b].data];x&&(x.x=f[d][b].x,x.y=f[d][b].y,x.page=d)}p=p>g?p:g,v=v>y?v:y,m+=g*y}return e.areaRate=Kf.area/m,o?s?{x:0,y:0,width:Kf.resultSize.x,height:Kf.resultSize.y}:{x:0,y:0,width:p+r,height:v+i}:{x:0,y:0,width:t,height:n}}return null}},{key:"createTextureConfig",value:function(){var e=_e(ye().mark((function e(t,n,r,i){var a,o,s,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in a={imagePath:"".concat(r,".png"),name:i,SubTexture:[]},n)s=n[o],l={x:s.x,y:s.y,width:s.width,height:s.height,name:s.name},a.SubTexture.push(l);return e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"drawTexture",value:function(){var e=_e(ye().mark((function e(t,n,r,i){var a,o,s,l,u,c,h=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new Pb,o=0;case 2:if(!(o<n.length)){e.next=14;break}return s=n[o],e.next=6,this.getPixiTexture(s);case 6:l=e.sent,(u=new Nb(l)).x=s.x,u.y=s.y,a.addChild(u);case 11:o++,e.next=2;break;case 14:return c=Wg.create(t),this.renderApp||(this.renderApp=new h_),this.renderApp.renderer.render(a,{renderTexture:c,clear:!0}),e.abrupt("return",new Promise((function(e,t){h.renderApp.renderer.extract.canvas(c).toBlob((function(t){e(t)}))})));case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getPixiTexture",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y2.instance.res.getImageAsset(t.assetId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();$w.HIGHEST=4294967295,$w.areaRate=void 0,$w.renderApp=void 0;var Zw=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n),e=t.call(this,"dragonbones");var r=new Vf,i=new Qw,a=new Bf;return e.addModule(r),e.addModule(i),e.addModule(a),e}return d(n,[{key:"getCurArmature",value:function(){var e=this.rootState.runtime.editing.editingArmatureId;return this.rootState.runtime.dragonbones.armatureMap[e]}},{key:"getCurAnimation",value:function(){var e=this.getCurArmature(),t=this.rootState.runtime.editing.selectedAnimationId;if(e.animations.includes(t))return this.rootState.runtime.dragonbones.animationMap[t]}},{key:"getCurRootBone",value:function(){var e=this.getCurArmature();for(var t in e.bones.map){var n=e.bones.map[t];if(n&&!n.parentId)return n}}},{key:"getAssetById",value:function(e){var t=this.rootState.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r){if(r.id===e)return r;if(r.children)for(var i=0,a=r.children.length;i<a;i++){var o=r.children[i];if(o.id===e)return o}}}}},{key:"mutations",get:function(){return y({},b.TEST,(function(e,t){}))}},{key:"actions",get:function(){var e=this;return y({},L.ADD_SLOT,(function(t,n){var r=n.x,i=n.y,a=n.assetId,o=e.rootState.runtime.editing.editingArmatureId,s=e.getAssetById(a),l=e.getCurRootBone();if(s&&l){var u=e.rootState.editor.over.overBone;if(u>0)l=e.rootState.runtime.dragonbones.armatureMap[o].bones.map[u];var c=l.globalTransform||l.transform,h=Lf.transformInverseApplyPoint(c,{x:r,y:i}),d=e.getId(),f=e.getId(),p={name:s.name,id:d,parentId:l.id,zOrder:0,displayIndex:0,displays:{ids:[f],map:y({},f,{name:s.name,id:f,transform:{x:h.x,y:h.y,scaleX:1,scaleY:1,skewX:0,skewY:0},type:w.IMAGE,pivot:[.5,.5],assetId:a,width:0,height:0})}},v=(e.rootState.runtime.dragonbones.assetMap,e.rootState.library);Vf.getAssetSize(s,v).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var n=e[0],r=e[1];p.displays.map[f].width=n,p.displays.map[f].height=r}t.commit(F.ADD_SLOT,{armatureId:o,slot:p})})).catch((function(e){t.commit(F.ADD_SLOT,{armatureId:o,slot:p})}))}}))}}],[{key:"getExportTextureIdNameMap",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportPreviewTexture(t,n);case 2:return r=e.sent,i=It(r,2),i[0],a=i[1],e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportNewTexture",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h,d,f,p,v,m,g,y;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportPreviewTexture(t,n);case 2:for(l in r=e.sent,i=It(r,2),a=i[0],o=i[1],s=[],a)for(u=a[l],c=0,h=u.SubTexture.length;c<h;c++)d=u.SubTexture[c],s.push({width:d.width,height:d.height,assetId:d.assetId,name:d.name,x:0,y:0});return f="texture",p=t.name,1024,2,2,e.next=15,$w.packTextures(1024,2,2,s);case 15:return v=e.sent,e.next=18,$w.drawTexture(v,s,f,p);case 18:return m=e.sent,g=[m],e.next=22,$w.createTextureConfig(v,s,f,p);case 22:return y=e.sent,e.abrupt("return",[y,g,o]);case 24:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportFiles",value:function(e,t){var n={};for(var r in e){var i=e[r],a=t.files[i.fileId];n[i.fileId]=a}return n}},{key:"exportPreviewTexture",value:function(){var e=_e(ye().mark((function e(t,n,r,i){var a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,E,w,T,S,k,C,A,I,O,P,M;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in a=t.name,o=[],t.armatureMap)if((l=t.armatureMap[s])&&(!r||l.id===r))for(u=0,c=l.slots.ids.length;u<c;u++)for(h=l.slots.map[l.slots.ids[u]],d=0,f=h.displays.ids.length;d<f;d++)p=h.displays.ids[d],(v=h.displays.map[p]).assetId&&-1===o.indexOf(v.assetId)&&o.push(v.assetId);m={},g={},y={},b=0,_=o.length;case 7:if(!(b<_)){e.next=41;break}if(E=o[b],w=this.findAssetById(E,t.assetMap)){e.next=12;break}return e.abrupt("continue",38);case 12:T=!1,g[w.name]?T=!0:g[w.name]=!0,e.t0=w.type,e.next=e.t0===x.JPEG||e.t0===x.JPG||e.t0===x.PNG?17:e.t0===x.SUB_TEXTURE?29:38;break;case 17:if(S=w.fileIds[0],k=m[S]){e.next=28;break}return e.next=22,Vf.getAssetSize(w,n);case 22:C=e.sent,A=T?w.name+"_"+E:w.name,"id"===i&&(A=E),k={assetId:E,fileId:S,width:C[0],height:C[1],name:a,imagePath:w.name,SubTexture:[{width:C[0],height:C[1],y:0,x:0,name:A,assetId:w.id}]},m[S]=k,y[E]=A;case 28:return e.abrupt("break",38);case 29:return I=T?w.name+"_"+E:w.name,"id"===i&&(I=E),O=w.fileIds[1],(P=m[O])||(P={assetId:E,fileId:O,name:a,SubTexture:[]},m[O]=P),M={x:w.data.x,y:w.data.y,width:w.data.width,height:w.data.height,name:I,assetId:w.id},P.SubTexture.push(M),y[E]=I,e.abrupt("break",38);case 38:b++,e.next=7;break;case 41:return e.abrupt("return",[m,y]);case 42:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"findAssetById",value:function(e,t){if(t[e])return t[e];for(var n in t){var r=t[n],i=e;if(r.children)for(var a=0,o=r.children.length;a<o;a++)if(r.children[a].id===i)return r.children[a]}}},{key:"findAllAssetByArmature",value:function(e){for(var t=[],n=0,r=e.slots.ids.length;n<r;n++)for(var i=e.slots.ids[n],a=e.slots.map[i],o=0,s=a.displays.ids.length;o<s;o++){var l=a.displays.ids[o],u=a.displays.map[l];u.assetId&&-1===t.indexOf(u.assetId)&&t.push(u.assetId)}}}]),n}(Ff),Qw=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,"armatureMap")}return d(n,[{key:"getCurArmature",value:function(){var e=this.rootState.runtime.editing.editingArmatureId;return this.rootState.runtime.dragonbones.armatureMap[e]}},{key:"getCurAnimation",value:function(){var e=this.getCurArmature(),t=this.rootState.runtime.editing.selectedAnimationId;if(e.animations&&e.animations.includes(t))return this.rootState.runtime.dragonbones.animationMap[t]}},{key:"getBoneById",value:function(e){return this.getCurArmature().bones.map[e]}},{key:"getSlotById",value:function(e){return this.getCurArmature().slots.map[e]}},{key:"createBoneFrameData",value:function(e,t,n,r){var i={id:-1,frame:r,value:{},curve:[1]};switch(n){case S.TRANSLATE:i.value={x:t.x-e.transform.x,y:t.y-e.transform.y};break;case S.SCALE:i.value={x:t.scaleX/e.transform.scaleX,y:t.scaleY/e.transform.scaleY};break;case S.ROTATE:i.value={rotate:t.skewX-e.transform.skewX}}return i}},{key:"createSlotFrameData",value:function(e,t,n,r){var i={id:-1,frame:r,value:0};switch(n){case S.COLOR:i.value=t,i.curve=[1];break;case S.DISPLAY_INDEX:i.value=t;break;default:throw new Error("not support slot frame type: "+n)}return i}},{key:"getDiffITransformKey",value:function(e,t){for(var n=[],r=["x","y","scaleX","scaleY","skewX","skewY"],i=0,a=r.length;i<a;i++){var o=r[i];Lf.isNumberEqual(e[o],t[o],1e-4)||n.push(o)}return n}},{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e,t){})),y(e,Y.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.armatureMap;Object.assign(e,n)}})),y(e,F.ADD_SLOT,(function(e,t){var r=t.armatureId,i=t.slot,a=e[r];a.slots.ids.push(i.id),a.slots.map[i.id]=i,n.updateGlobalTransform(a)})),y(e,V.ADD_BONE,(function(e,t){var r=t.armatureId,i=t.bone,a=e[r];if(a.bones.ids.indexOf(i.id)>=0||a.bones.map[i.id])throw new Error("same bone id:"+i.id);a.bones.ids.push(i.id),a.bones.map[i.id]=i,n.updateGlobalTransform(a)})),y(e,N.ADD_ARMATURES,(function(e,r){for(var i=r.armatures,a=0,o=i.length;a<o;a++){var s=i[a];if(s){if(s.id||(s.id=t.getId()),e[s.id])throw new Error("same armature id:"+s.id);e[s.id]=s,n.updateGlobalTransform(s)}}})),y(e,O.UPDATE_ANIMATED_PROPERTY,(function(e,r){var i=r.armatureId,a=r.animatedProperties,o=e[i];if(o){if(n.clearArmatureAnimationData(o),o.bones)for(var s=0,l=o.bones.ids.length;s<l;s++){var u=o.bones.ids[s],c=o.bones.map[u];if(c&&a.bones){var h=a.bones[u];h&&(c.animatedProperties=h)}}if(o.constraint.ik)for(var d in o.constraint.ik){var f=o.constraint.ik[d];a.iks&&a.iks[d]&&(f.animatedValue=a.iks[d].ik)}if(o.slots)for(var p=0,v=o.slots.ids.length;p<v;p++){var m=o.slots.ids[p],g=o.slots.map[m];if(a.slots&&a.slots[m]){var y=a.slots[m];if(void 0!==y.color){var b=Lf.splitAlphaColor(y.color);g.animatedColor=b.color,g.animatedAlpha=b.alpha}void 0!==y.displayIndex&&(g.animatedDisplayIndex=y.displayIndex)}if(g.displays)for(var _=0,x=g.displays.ids.length;_<x;_++){var E=g.displays.ids[_],w=g.displays.map[E];if(a.ffds&&a.ffds[E]){var T=w.mesh.points,S={},k=a.ffds[E].ffd;for(var C in k){var A=k[C];if(A){var I=T[C].vertices;S[C]=[I[0]+A[0],I[1]+A[1]]}}w.mesh.animatedFFD=S}}}r.animatedProperties.zOrder&&r.animatedProperties.zOrder.zOrder&&(o.animatedZOrder=r.animatedProperties.zOrder.zOrder);var O=t.rootState.runtime.editing.selectedAnimationId,P=t.rootState.editor.dopesheet.curTime,M=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(o,M,O,P)}})),y(e,P.ADD_ANIMATION,(function(e,t){var n=t.armatureId,r=t.animation,i=e[n];i.animations||(i.animations=[]),i.animations.push(r.id)})),y(e,P.REMOVE_ANIMATION,(function(e,t){var n=t.armatureId,r=t.animationId,i=e[n],a=i.animations.indexOf(r);a>=0&&i.animations.splice(a,1)})),y(e,N.CHANGE_SLOT_ORDER,(function(e,t){var n=t.id,r=t.newOrder,i=e[n];i.slots&&(i.slots.ids=r)})),y(e,N.CACHE_SLOT_ORDER,(function(e,t){var n=t.id,r=t.newOrder;e[n].cacheZOrder=r})),y(e,V.UPDATE_LOCAL_TRANSFORMS,(function(e,t){var r=t.armatureId,i=t.bones,a=e[r];for(var o in i){var s=a.bones.map[o];s&&Object.assign(s.transform,i[o].local)}n.clearGlobalTransform(a),n.updateGlobalTransform(a)})),y(e,F.UPDATE_LOCAL_TRANSFORMS,(function(e,r){var i=r.armatureId,a=r.slots,o=e[i],s=t.rootState.runtime.editing.editMode;for(var l in a){var u=o.slots.map[l],c=n.getSlotCurDisplay(u);Object.assign(c.transform,a[l].local)}n.clearSlotGlobalTransform(o),n.updateSlotGlobalTransform(o,s),n.calculateRigging(o,s)})),y(e,V.UPDATE_CACHE_TRANSFORMS,(function(e,r){var i=e[t.rootState.runtime.editing.editingArmatureId];for(var a in r){var o=parseInt(a),s=r[a],l=i.bones.map[o];l.cacheTransform=s.local,l.cacheProperties||(l.cacheProperties={}),l.cacheProperties.transform=s.local}var u=t.rootState.runtime.editing.selectedAnimationId,c=t.rootState.editor.dopesheet.curTime,h=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(i,h,u,c)})),y(e,V.UPDATE_PROPERTIES,(function(e,r){var i=r.armatureId,a=r.bones,o=e[i],s=!1;for(var l in a){var u=a[l],c=o.bones.map[l];if(c)for(var h in u){var d=u[h];c[h]=d,"inheritRotation"!==h&&"inheritScale"!==h||(s=!0)}}if(s){var f=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(o,f)}})),y(e,N.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.properties,i=e[n];if(i)for(var a in r){var o=r[a];i[a]=o}})),y(e,F.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slots,i=e[n];for(var a in r){var o=r[a],s=i.slots.map[a];if(s)for(var l in o){var u=o[l];s[l]=u}}})),y(e,F.UPDATE_CACHE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slots,i=e[n];for(var a in r){var o=r[a],s=i.slots.map[a];if(s)for(var l in o){var u=o[l];"color"===l?s.cacheColor=u:"alpha"===l?s.cacheAlpha=u:"displayIndex"===l&&(s.cacheDisplayIndex=u)}}})),y(e,H.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slotId,i=t.displays,a=e[n].slots.map[r];if(a)for(var o in i){var s=i[o],l=parseInt(o),u=a.displays.map[l];if(u&&u.id===l)for(var c in s){var h=s[c];u[c]=h}}})),y(e,V.SET_PARENT,(function(e,r){for(var i=r.armatureId,a=r.boneIds,o=r.parentId,s=r.newLocalTransforms,l=e[i],u=0,c=a.length;u<c;u++){var h=a[u],d=l.bones.map[h];d.parentId=o,d.transform=s[h].local}var f=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(l),n.updateGlobalTransform(l,f)})),y(e,F.SET_PARENT,(function(e,r){for(var i=r.armatureId,a=r.slotIds,o=r.parentId,s=r.newLocalTransforms,l=e[i],u=0,c=a.length;u<c;u++){var h=a[u],d=l.slots.map[h];if(d.parentId=o,s[h])n.getSlotCurDisplay(d).transform=s[h].local}var f=t.rootState.runtime.editing.editMode;n.clearSlotGlobalTransform(l),n.updateSlotGlobalTransform(l,f)})),y(e,H.SET_PARENT,(function(e,t){for(var n=t.armatureId,r=t.displays,i=e[n],a=0,o=r.length;a<o;a++)for(var s=r[a],l=s.slotId,u=s.displayId,c=s.parentId,h=s.local,d=i.slots.map[l],f=i.slots.map[c],p=0,v=d.displays.ids.length;p<v;p++){var m=d.displays.ids[p],g=d.displays.map[m];if(g.id===u){d.displayIndex===p&&(d.displayIndex=-1),s.local&&(g.transform=h),d.displays.ids.splice(p,1),delete d.displays.map[u],d.displays.ids.length>0&&d.displayIndex<0&&(d.displayIndex=0),f.displays||(f.displays={ids:[],map:{}}),f.displays.ids.push(g.id),f.displays.map[g.id]=g,f.displayIndex<0&&(f.displayIndex=0);break}}})),y(e,V.ADD_IK,(function(e,r){var i=r.armatureId,a=r.ik,o=e[i];o.constraint.ik[a.id]=a;var s=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(o),n.updateGlobalTransform(o,s)})),y(e,V.DELETE_IKS,(function(e,r){for(var i=r.armatureId,a=r.ikIds,o=e[i],s=0,l=a.length;s<l;s++){var u=a[s];delete o.constraint.ik[u]}var c=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(o),n.updateGlobalTransform(o,c)})),y(e,V.UPDATE_IK,(function(e,r){var i=r.armatureId,a=r.ikId,o=r.properties,s=e[i],l=s.constraint.ik[a];for(var u in o)l[u]=o[u];var c=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(s),n.updateGlobalTransform(s,c)})),y(e,V.UPDATE_CACHE_IK,(function(e,r){var i,a,o=r.armatureId,s=r.ikId,l=r.properties,u=e[o],c=u.constraint.ik[s];c.cacheValue||(c.cacheValue={bendPositive:(null===(i=c.animatedValue)||void 0===i?void 0:i.bendPositive)||c.bendPositive,weight:(null===(a=c.animatedValue)||void 0===a?void 0:a.weight)||c.weight});for(var h in l)c.cacheValue[h]=l[h];var d=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(u),n.updateGlobalTransform(u,d)})),y(e,V.DELETE_BONES,(function(e,t){for(var n=t.armatureId,r=t.boneIds,i=e[n],a=0,o=r.length;a<o;a++){var s=r[a],l=i.bones.ids.indexOf(s);i.bones.ids.splice(l,1),i.bones.map[s]=void 0,delete i.bones.map[s]}})),y(e,F.DELETE_SLOTS,(function(e,t){for(var n=t.armatureId,r=t.slotIds,i=e[n],a=0,o=r.length;a<o;a++){var s=r[a],l=i.slots.ids.indexOf(s);i.slots.ids.splice(l,1),i.slots.map[s]=void 0,delete i.slots.map[s]}})),y(e,U.UPDATE_MESH,(function(e,r){var i=r.armatureId,a=r.slotId,o=r.displayId,s=r.mesh,l=e[i],u=l.slots.map[a],c=n.getSlotDisplay(u,o);if(c.id===o){if(s.points)for(var h in s.points){var d=s.points[h];void 0!==d?(c.mesh.points[h]||(c.mesh.points[h]={}),d.vertices&&(c.mesh.points[h].vertices=d.vertices),d.uvs&&(c.mesh.points[h].uvs=d.uvs)):(c.mesh.points[h]=void 0,delete c.mesh.points[h])}if(s.triangles&&(c.mesh.triangles=s.triangles),s.outlines&&(c.mesh.outlines=s.outlines),s.userEdges&&(c.mesh.userEdges=s.userEdges),c.mesh.bonePose&&c.mesh.slotPose){var f=t.rootState.runtime.editing.editMode;n.calculateRiggingDisplay(l,c,f)}}})),y(e,U.UPDATE_CACHE_FFD,(function(e,t){var r=t.armatureId,i=t.slotId,a=t.displayId,o=t.mesh,s=e[r].slots.map[i],l=n.getSlotDisplay(s,a),u={};for(var c in o.points){var h=o.points[c];h.vertices&&(u[c]=[h.vertices[0],h.vertices[1]])}l.mesh.cacheFFD=u})),y(e,U.UPDATE_RIG_BONE,(function(e,r){var i=r.armatureId,a=r.slotId,o=r.displayId,s=r.bonePose,l=r.slotPose,u=r.boneWeights,c=e[i],h=c.slots.map[a],d=n.getSlotDisplay(h,o);if(r.hasOwnProperty("slotPose")&&(void 0===l?(d.mesh.slotPose=void 0,delete d.mesh.slotPose):d.mesh.slotPose=l),r.hasOwnProperty("bonePose"))if(void 0===s)d.mesh.bonePose=void 0,delete d.mesh.bonePose;else for(var f in d.mesh.bonePose||(d.mesh.bonePose={}),s)void 0===s[f]?delete d.mesh.bonePose[f]:d.mesh.bonePose[f]?(d.mesh.bonePose[f].pose=s[f].pose,s[f].color&&(d.mesh.bonePose[f].color=s[f].color)):d.mesh.bonePose[f]={pose:s[f].pose,color:s[f].color};if(r.hasOwnProperty("boneWeights"))if(void 0===u)d.mesh.boneWeights=void 0,delete d.mesh.boneWeights;else for(var p in u){var v=u[p];if(void 0!==v)for(var m in d.mesh.boneWeights||(d.mesh.boneWeights={}),d.mesh.boneWeights[p]||(d.mesh.boneWeights[p]={}),v)d.mesh.boneWeights[p][m]=v[m],void 0===v[m]&&delete d.mesh.boneWeights[p][m];else d.mesh.boneWeights[p]=void 0,delete d.mesh.boneWeights[p]}var g=t.rootState.runtime.editing.editMode;n.calculateRiggingDisplay(c,d,g)})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},D.CHANGE_SLOT_ORDER,(function(e,n){var r=t.rootState.runtime.editing.editMode,i=t.rootState.editor.dopesheet.curTime;switch(r){case X.ANIMATION:if(t.rootState.editor.dopesheet.autoKey){var a=t.getCurArmature();if(a){var o=t.getCurAnimation();o||(o={id:0,name:ce});var s,l={armatureId:a.id,animationId:o.id,timelineInfo:{zOrder:[]}};o&&o.zOrder&&(l.animationId=o.id,s=o.zOrder),[S.Z_ORDER].forEach((function(e){var t=i;if(s){var r=Bf.getTimelineByType(s,e);if(r){var a=Bf.getTimelineRealFrame(r,i);t=Math.floor(a)}}var o={id:-1,frame:t,value:n.newOrder};l.timelineInfo.zOrder||(l.timelineInfo.zOrder=[]),l.timelineInfo.zOrder.push(o)})),e.commit(P.AUTO_KEY,l)}}else e.commit(N.CACHE_SLOT_ORDER,n);break;case X.POSE:e.commit(N.CHANGE_SLOT_ORDER,n)}})),y(e,L.UPDATE_PROPERTIES,(function(e,r){var i=r.armatureId,a=r.slots,o=r.addKey,s=["color","alpha","displayIndex"];if(t.rootState.runtime.editing.editMode===X.ANIMATION){var l=t.rootState.editor.dopesheet.autoKey||o,u={},c={},h=!1,d=!1,f={};for(var p in a){var v=parseInt(p),m=a[p];for(var g in m)if(s.includes(g)){if(u[p]||(u[p]={}),f[p]||(f[p]={}),u[p][g]=m[g],f[p][g]=m[g],l&&("color"===g||"alpha"===g)){var y=t.getSlotById(v),b=f[v].color||n.getSlotCurColor(y),_=f[v].alpha||n.getSlotCurAlpha(y),x=Lf.mergeAlphaColor(b,_);u[p].color=x,"alpha"===g&&delete u[p].alpha}h=!0}else c[p]||(c[p]={}),c[p][g]=m[g],d=!0}if(d&&e.commit(F.UPDATE_PROPERTIES,{armatureId:i,slots:c}),h){var E=t.rootState.editor.dopesheet.curTime;if(l){var w=t.getCurArmature();if(w){var T=t.getCurAnimation();T||(T={id:0,name:ce});var k={armatureId:w.id,animationId:T.id,timelineInfo:{slot:{}}};for(var C in u){var A=parseInt(C),I=t.getSlotById(A),O=u[C];k.timelineInfo.slot[A]={};var M=void 0;T&&T.slots&&(k.animationId=T.id,M=T.slots[A]);var R=[],N=[],D=Object.keys(O);D.includes("color")&&(R.push(S.COLOR),N.push(O.color)),D.includes("displayIndex")&&(R.push(S.DISPLAY_INDEX),N.push(O.displayIndex));for(var L=0,B=R.length;L<B;L++){var U=R[L],H=N[L],j=E;if(M){var z=Bf.getTimelineByType(M,U);if(z){var V=Bf.getTimelineRealFrame(z,E);j=Math.floor(V)}}var G=t.createSlotFrameData(I,H,U,j);k.timelineInfo.slot[A]||(k.timelineInfo.slot[A]={}),k.timelineInfo.slot[A][U]||(k.timelineInfo.slot[A][U]=[]),k.timelineInfo.slot[A][U].push(G)}}e.commit(P.AUTO_KEY,k)}}else e.commit(F.UPDATE_CACHE_PROPERTIES,{armatureId:i,slots:u})}}else e.commit(F.UPDATE_PROPERTIES,r)})),y(e,z.ADD_BONE,(function(e,t){e.commit(V.ADD_BONE,t),e.commit(V.SELECT_BONES,[t.bone.id])})),y(e,L.UPDATE_LOCAL_TRANSFORMS,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.runtime.dragonbones.armatureMap[i];for(var o in e.commit(gmvc.GHistoryMutation.MERGE_START),r){var s=a.slots.map[o],l=n.getSlotCurDisplay(s);if(l&&l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD){var u={armatureId:a.id,slotId:s.id,displayId:l.id,mesh:{points:{}}},c=r[o].global;for(var h in l.mesh.riggingFFD){var d=parseInt(h),f=l.mesh.riggingFFD[h],p={x:f[0],y:f[1]},v=Lf.transformApplyPoint(c,p),m=n.getMeshPointFFDByRiggingPos(a,l,d,[v.x,v.y]);u.mesh.points[h]={vertices:m}}e.dispatch(B.UPDATE_MESH,u)}}e.commit(F.UPDATE_LOCAL_TRANSFORMS,{armatureId:i,slots:r}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,z.UPDATE_GLOBAL_TRANSFORMS,(function(e,r){var i=t.rootState.runtime.editing.editMode;for(var a in r){var o=parseInt(a),s=t.getBoneById(o),l=r[a],u=n.getBoneLocalTransformByGlobal(s,t.getCurArmature().bones.map,i,l.global);l.local=u}e.dispatch(z.UPDATE_LOCAL_TRANSFORMS,r)})),y(e,z.UPDATE_LOCAL_TRANSFORMS,(function(e,n){var r=t.rootState.runtime.editing.editMode,i=t.rootState.runtime.editing.editingArmatureId;switch(r){case X.POSE:e.commit(V.UPDATE_LOCAL_TRANSFORMS,{armatureId:i,bones:n});break;case X.ANIMATION:var a=t.rootState.editor.dopesheet.autoKey,o=t.rootState.editor.dopesheet.curTime;for(var s in n)if(n[s].addKey){a=!0;break}if(a){var l=t.getCurArmature();if(l){var u=t.getCurAnimation(),c=u?u.id:0,h={armatureId:l.id,animationId:c,timelineInfo:{bone:{}}};for(var d in n){var f=parseInt(d),p=t.getBoneById(f),v=n[d];h.timelineInfo.bone[f]={};var m=void 0;u&&u.bones&&(h.animationId=u.id,m=u.bones[f]);var g=[];(v.diffKeys.includes("x")||v.diffKeys.includes("y"))&&g.push(S.TRANSLATE),(v.diffKeys.includes("scaleX")||v.diffKeys.includes("scaleY"))&&g.push(S.SCALE),(v.diffKeys.includes("skewX")||v.diffKeys.includes("skewY"))&&g.push(S.ROTATE);for(var y=0,b=g.length;y<b;y++){var _=g[y],x=o;if(m){var E=Bf.getTimelineByType(m,_);if(E){var w=Bf.getTimelineRealFrame(E,o);x=Math.floor(w)}}var T=t.createBoneFrameData(p,v.local,_,x);h.timelineInfo.bone[f]||(h.timelineInfo.bone[f]={}),h.timelineInfo.bone[f][_]||(h.timelineInfo.bone[f][_]=[]),h.timelineInfo.bone[f][_].push(T)}}e.commit(P.AUTO_KEY,h)}}else e.commit(V.UPDATE_CACHE_TRANSFORMS,n)}})),y(e,z.UPDATE_ROTATE_FRAME,(function(e,n){n.armatureId;var r=n.bones;if(t.rootState.runtime.editing.editMode===X.ANIMATION){var i=t.rootState.editor.dopesheet.autoKey,a=t.rootState.editor.dopesheet.curTime;if(i){var o=t.getCurArmature();if(o){var s=t.getCurAnimation(),l=s?s.id:0,u={armatureId:o.id,animationId:l,timelineInfo:{bone:{}}};for(var c in r){var h,d,f=parseInt(c),p=t.getBoneById(f),v=p.mixTransform?p.mixTransform.skewX:p.transform.skewX;null!==(h=p.cacheTransform)&&void 0!==h&&h.skewX?v=p.cacheTransform.skewX:null!==(d=p.animatedTransform)&&void 0!==d&&d.skewX&&(v=p.animatedTransform.skewX);var m=r[c];u.timelineInfo.bone[f]={};var g=void 0;s&&s.bones&&(u.animationId=s.id,g=s.bones[f]);var y=S.ROTATE,b=a,_=void 0;if(!g)return;if(g){var x=Bf.getTimelineByType(g,y);if(!x)return;if(x){var E=Bf.getTimelineRealFrame(x,a);if(b=Math.floor(E),(_=Bf.getFrameByFrameIndex(x,b))||(_=Bf.getFrameBeforeFrameIndex(x,b))&&(b=_.frame),!_)return}}var w=t.createBoneFrameData(p,{skewX:v,skewY:v,x:0,y:0,scaleX:1,scaleY:1},y,b);for(var k in m)w.value[k]=m[k];delete w.value.rotate,w.value.clockwise===T.AUTO?w.value.clockwiseNum=0:w.value.clockwise||_.value.clockwise||(w.value.clockwiseNum=0),u.timelineInfo.bone[f]||(u.timelineInfo.bone[f]={}),u.timelineInfo.bone[f][y]||(u.timelineInfo.bone[f][y]=[]),u.timelineInfo.bone[f][y].push(w)}e.commit(P.AUTO_KEY,u)}}}})),y(e,D.UPDATE_PROPERTIES,(function(e,t){})),y(e,z.SET_PARENT,(function(e,n){if(t.rootState.runtime.editing.editMode===X.POSE){for(var r=n.armatureId,i=n.boneIds,a=n.parentId,o=e._state[r],s=o.bones.map[a],l={},u=0,c=i.length;u<c;u++){var h=i[u],d=o.bones.map[h],f=Lf.transformInvertCross(s.globalTransform,d.globalTransform);!1===d.inheritRotation&&(f.skewX=d.transform.skewX,f.skewY=d.transform.skewY),!1===d.inheritScale&&(f.scaleX=d.transform.scaleX,f.scaleY=d.transform.scaleY),l[h]={local:f}}e.commit(V.SET_PARENT,Pe(Pe({},n),{},{newLocalTransforms:l}))}else mf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),y(e,L.SET_PARENT,(function(e,r){if(t.rootState.runtime.editing.editMode===X.POSE){for(var i=r.armatureId,a=r.slotIds,o=r.parentId,s=e._state[i],l=s.bones.map[o],u={},c=0,h=a.length;c<h;c++){var d=a[c],f=s.slots.map[d],p=n.getSlotCurDisplay(f);if(p){var v=Lf.transformInvertCross(l.globalTransform,p.globalTransform);u[d]={local:v}}}e.commit(F.SET_PARENT,Pe(Pe({},r),{},{newLocalTransforms:u}))}else mf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),y(e,j.SET_PARENT,(function(e,r){if(t.rootState.runtime.editing.editMode===X.POSE){for(var i=r.armatureId,a=r.displays,o=0,s=a.length;o<s;o++){var l=a[o],u=l.slotId,c=l.displayId,h=l.parentId,d=e._state[i],f=d.slots.map[h],p=d.bones.map[f.parentId],v=d.slots.map[u],m=n.getSlotDisplay(v,c);if(m){var g=Lf.transformInvertCross(p.globalTransform,m.globalTransform);r.displays[o].local=g}}e.commit(H.SET_PARENT,r)}else mf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),y(e,z.ADD_IK_AT_TAIL,(function(e,r){var i=r.armatureId,a=r.parentId,o=r.childId,s=e._state[i];if(o&&s.bones.map[o].parentId!==a)throw new Error("child bone is not the child of parent bone");var l=e.rootState.runtime.editing.editMode,u=s.bones.map[a],c=n.getRootBone(s),h=o&&s.bones.map[o]||u,d=n.getBoneTailPosition(h,s,l);d=Lf.transformInverseApplyPoint(c.globalTransform,d),e.commit(gmvc.GHistoryMutation.MERGE_START);var f={id:t.getId(),name:n.createBoneName("ik_target",s),parentId:c.id,transform:{x:d.x,y:d.y,skewX:0,skewY:0,scaleX:1,scaleY:1},length:0,inheritRotation:!0,inheritScale:!0};e.commit(V.ADD_BONE,{armatureId:i,bone:f});var p=n.createIKConStraintName(f.name+"_ik",s),v={id:t.getId(),name:p,targetId:f.id,parentId:a,childId:o,weight:1,bendPositive:!0,scaleEnabled:!1};e.commit(V.ADD_IK,{armatureId:i,ik:v}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,z.ADD_IK_BY_TARGET,(function(e,r){var i=r.armatureId,a=r.parentId,o=r.childId,s=r.targetId,l=e._state[i],u=l.bones.map[s];if(o&&l.bones.map[o].parentId!==a)throw new Error("child bone is not the child of parent bone");if(s===a||s===o)throw new Error("target bone is the same as parent bone or child bone");if(n.isDescendantBone(l,a,s))throw new Error("target bone is the descendant of parent bone");var c=n.createIKConStraintName(u.name+"_ik",l),h={id:t.getId(),name:c,targetId:s,parentId:a,childId:o,weight:1,bendPositive:!0,scaleEnabled:!1};e.commit(V.ADD_IK,{armatureId:i,ik:h})})),y(e,z.DELETE_IKS,(function(e,t){e.commit(V.DELETE_IKS,t)})),y(e,z.UPDATE_IK,(function(e,n){var r=t.rootState.runtime.editing.editMode;if(r===X.POSE)e.commit(V.UPDATE_IK,n);else if(r===X.ANIMATION){var i=t.getCurArmature(),a=t.getCurAnimation();a||(a={id:0,name:ce});var o=t.rootState.editor.dopesheet.curTime,s=n.ikId,l=n.properties,u=n.addKey;if(t.rootState.editor.dopesheet.autoKey||u){var c=i.constraint.ik[s],h=Pe({bendPositive:c.bendPositive,weight:c.weight},l),d={armatureId:i.id,animationId:a.id,timelineInfo:{ik:y({},s,y({},S.IK,[{id:-1,frame:o,value:h,curve:[1]}]))}};e.commit(P.AUTO_KEY,d)}else e.commit(V.UPDATE_CACHE_IK,n)}})),y(e,O.ADD_KEY,(function(e,t){e.commit(P.AUTO_KEY,t)})),y(e,W.DELETE_SELECTED_BONES_AND_SLOTS,(function(e){var r=t.rootState.runtime.editing.selectedBoneIds,i=t.rootState.runtime.editing.selectedSlotIds,a=t.rootState.runtime.editing.editingArmatureId,o=e._state[a],s=n.getAllDescendantBonesAndSlotsAndIKsAndSelf(o,r),l=n.getRootBone(o),u=s.bones,c=u.indexOf(l.id);c>=0&&u.splice(c,1);var h=s.slots.concat(i);if(h=Array.from(new Set(h)),e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(V.SELECT_BONES,[]),e.commit(F.SELECT_SLOTS,[]),s.iks&&e.commit(V.DELETE_IKS,{armatureId:a,ikIds:s.iks}),u&&u.length){var d=n.findRiggingDisplayByBoneIds(o,u);if(d&&d.length)for(var f=0,p=d.length;f<p;f++){var v=d[f],m=v.slotId,g=v.displayId,y=v.boneIds;e.dispatch(B.DELETE_RIG_BONES,{armatureId:a,slotId:m,displayId:g,boneIds:y})}e.commit(V.DELETE_BONES,{armatureId:a,boneIds:u})}h&&h.length&&e.commit(F.DELETE_SLOTS,{armatureId:a,slotIds:h}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,z.DELETE_BONES,(function(e,r){var i=r.armatureId,a=r.boneIds,o=e._state[i],s=n.getAllDescendantBonesAndSlotsAndIKsAndSelf(o,a);mf.confirm("\u5220\u9664\u9aa8\u9abc","\u5220\u9664\u9aa8\u9abc\u4f1a\u5220\u9664\u6240\u6709\u5b50\u9aa8\u9abc\u63d2\u69fd\u548cik\uff0c\u662f\u5426\u7ee7\u7eed\uff1f","\u786e\u5b9a\u5220\u9664","\u53d6\u6d88",(function(){e.commit(gmvc.GHistoryMutation.MERGE_START);var r=t.rootState.runtime.editing.selectedBoneIds;if(Lf.isArrayCross(r,s.bones)&&e.commit(V.SELECT_BONES,[]),s.iks&&e.commit(V.DELETE_IKS,{armatureId:i,ikIds:s.iks}),s.bones){var a=n.findRiggingDisplayByBoneIds(o,s.bones);if(a&&a.length)for(var l=0,u=a.length;l<u;l++){var c=a[l],h=c.slotId,d=c.displayId,f=c.boneIds;e.dispatch(B.DELETE_RIG_BONES,{armatureId:i,slotId:h,displayId:d,boneIds:f})}e.commit(V.DELETE_BONES,{armatureId:i,boneIds:s.bones})}s.slots&&e.commit(F.DELETE_SLOTS,{armatureId:i,slotIds:s.slots}),e.commit(gmvc.GHistoryMutation.MERGE_END)}))})),y(e,L.DELETE_SLOTS,(function(e,n){n.armatureId;var r=n.slotIds;mf.confirm("\u5220\u9664\u63d2\u69fd","","\u786e\u5b9a\u5220\u9664","\u53d6\u6d88",(function(){e.commit(gmvc.GHistoryMutation.MERGE_START);var i=t.rootState.runtime.editing.selectedSlotIds;Lf.isArrayCross(i,r)&&e.commit(F.SELECT_SLOTS,[]),e.commit(F.DELETE_SLOTS,n),e.commit(gmvc.GHistoryMutation.MERGE_END)}))})),y(e,B.UPDATE_MESH,(function(e,r){var i=t.rootState.runtime.editing.editMode;if(i===X.POSE)e.commit(U.UPDATE_MESH,r);else if(i===X.ANIMATION){var a=r.armatureId,o=r.slotId,s=r.displayId,l=r.mesh,u=t.rootState.runtime.dragonbones.armatureMap[a],c=u.slots.map[o],h=n.getSlotDisplay(c,s),d=t.getCurAnimation();d||(d={id:0,name:ce});var f=t.rootState.editor.dopesheet.curTime;if(t.rootState.editor.dopesheet.autoKey||r.addKey){var p={},v=h.mesh;for(var m in v.points){var g=h.mesh.points[m],b=l.points[m];if(void 0===b&&(h.mesh.cacheFFD&&h.mesh.cacheFFD[m]?b={vertices:h.mesh.cacheFFD[m]}:h.mesh.animatedFFD&&h.mesh.animatedFFD[m]&&(b={vertices:h.mesh.animatedFFD[m]})),b){var _=b.vertices[0]-g.vertices[0],x=b.vertices[1]-g.vertices[1];0===_&&0===x||(p[m]=[_,x])}}var E={armatureId:u.id,animationId:d.id,timelineInfo:{ffd:y({},h.id,y({},S.FFD,[{id:-1,frame:f,value:p,curve:[1]}]))}};e.commit(P.AUTO_KEY,E)}else e.commit(U.UPDATE_CACHE_FFD,r)}})),y(e,B.RESET_MESH,(function(e,r){var i=r.armatureId,a=r.slotId,o=r.displayId,s=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[a],l=n.getSlotDisplay(s,o);if(l.mesh&&l.width&&l.height){var u=l.width/2,c=l.height/2,h={points:{0:{vertices:[-u,-c],uvs:[0,0]},1:{vertices:[u,-c],uvs:[1,0]},2:{vertices:[-u,c],uvs:[0,1]},3:{vertices:[u,c],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]};for(var d in l.mesh.points)h.points[d]||(h.points[d]=void 0);var f={armatureId:i,slotId:a,displayId:o,mesh:h};e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(U.UPDATE_MESH,f),e.commit(G.UPDATE_MESH_TOOL,{curTool:Q.EDIT}),e.commit(gmvc.GHistoryMutation.MERGE_END)}})),y(e,B.ADD_RIG_BONE,(function(e,r){var i=r.armatureId,a=r.slotId,o=r.displayId,s=r.boneId,l=r.bonePose,u=r.autoWeight,c=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[a],h=n.getSlotDisplay(c,o),d={armatureId:i,slotId:a,displayId:o};h.mesh.slotPose||(d.slotPose=Pe({},h.globalTransform));var f=n.getNextRiggingBoneColor(h.mesh);d.bonePose=y({},s,{pose:l,color:f});var p={};for(var v in h.mesh.points)h.mesh.boneWeights&&h.mesh.boneWeights[v]?p[v]=y({},s,0):p[v]=y({},s,1);d.boneWeights=p,u&&e.commit(G.FLAG_AUTO_WEIGHT,{autoWeight:u}),e.commit(U.UPDATE_RIG_BONE,d)})),y(e,B.DELETE_RIG_BONES,(function(e,r){var i=r.armatureId,a=r.slotId,o=r.displayId,s=r.boneIds,l=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[a],u=n.getSlotDisplay(l,o);if(Object.keys(u.mesh.bonePose).length!==s.length){for(var c={armatureId:i,slotId:a,displayId:o,bonePose:{}},h=0,d=s.length;h<d;h++){var f=s[h];c.bonePose[f]=void 0}var p={};for(var v in u.mesh.points){var m=parseInt(v);p[m]=n.deleteBoneWeight(u.mesh.boneWeights,m,s);for(var g=0,y=s.length;g<y;g++){var b=s[g];p[m][b]=void 0}}c.boneWeights=p,e.commit(U.UPDATE_RIG_BONE,c)}else{for(var _=0,x=s.length;_<x;_++){var E=s[_];if(!u.mesh.bonePose[E])throw new Error("bone is not in rig: "+E)}var w={armatureId:i,slotId:a,displayId:o,slotPose:void 0,bonePose:void 0,boneWeights:void 0};e.commit(U.UPDATE_RIG_BONE,w)}})),y(e,B.AUTO_WEIGHT,(function(e,r){return _e(ye().mark((function i(){var a,o,s,l,u,c,h,d;return ye().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=r.armatureId,o=r.slotId,s=r.displayId,l=t.rootState.runtime.dragonbones.armatureMap[a],u=l.slots.map[o],(c=n.getSlotDisplay(u,s)).mesh&&c.mesh.bonePose){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,n.calculateAutoWeight(l,c);case 8:h=i.sent,d={armatureId:a,slotId:o,displayId:s,boneWeights:h},e.commit(U.UPDATE_RIG_BONE,d),mf.info("\u81ea\u52a8\u6743\u91cd\u8ba1\u7b97\u5b8c\u6bd5");case 12:case"end":return i.stop()}}),i)})))()})),y(e,D.ADD_ARMATURE,(function(e,n){var r=t.getId(),i={id:t.getId(),name:"root",length:0,transform:{x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},parentId:0},a={id:r,name:n.name,bones:{ids:[i.id],map:y({},i.id,i)},slots:{ids:[],map:{}},skins:{ids:[],map:{}},constraint:{ik:{}}};e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(N.ADD_ARMATURES,{armatures:[a]}),e.commit(N.SELECT_ARMATURE,{armatureId:r}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,D.DELETE_ARMATURES,(function(e,n){var r=n.armatureIds,i=t.rootState.runtime.dragonbones.armatureMap,a=0;for(var o in i)a++;if(a!==r.length){for(var s=[],l=0,u=r.length;l<u;l++){var c=i[r[l]];c.animations&&(s=s.concat(c.animations))}e.commit(gmvc.GHistoryMutation.MERGE_START),s&&s.length&&e.commit(P.DELETE_ANIMATIONS,{animationIds:s}),e.commit(N.DELETE_ARMATURES,{armatureIds:r});var h=t.rootState.runtime.editing.editingArmatureId,d=0;if(r.indexOf(h)>=0)for(var f in i){var p=i[f];p&&r.indexOf(p.id)<0&&(d=p.id)}e.commit(N.SELECT_ARMATURE,{armatureId:d}),e.commit(gmvc.GHistoryMutation.MERGE_END)}else mf.warn("\u6700\u540e\u4e00\u4e2a\u9aa8\u67b6\u4e0d\u80fd\u5220\u9664")})),e}}],[{key:"clearArmatureAnimationData",value:function(e){if(e&&e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(delete i.animatedProperties,delete i.animatedTransform,delete i.cacheTransform,delete i.cacheProperties)}if(e.constraint.ik)for(var a in e.constraint.ik){var o=e.constraint.ik[a];o&&(delete o.animatedValue,delete o.cacheValue)}if(e.slots)for(var s=0,l=e.slots.ids.length;s<l;s++){var u=e.slots.ids[s],c=e.slots.map[u];if(c&&(delete c.animatedColor,delete c.animatedAlpha,delete c.animatedDisplayIndex,delete c.cacheColor,delete c.cacheAlpha,delete c.cacheDisplayIndex,c.displays))for(var h in c.displays.map){var d=c.displays.map[h];d&&d.mesh&&(delete d.mesh.animatedFFD,delete d.mesh.cacheFFD)}}delete e.animatedZOrder,delete e.cacheZOrder}},{key:"clearCache",value:function(e){if(e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(i.cacheTransform&&delete i.cacheTransform,i.cacheProperties&&delete i.cacheProperties)}if(e.slots)for(var a=0,o=e.slots.ids.length;a<o;a++){var s=e.slots.ids[a],l=e.slots.map[s];for(var u in l&&(delete l.cacheColor,delete l.cacheAlpha,delete l.cacheDisplayIndex),l.displays.map){var c=l.displays.map[u];c&&c.mesh&&c.mesh.cacheFFD&&delete c.mesh.cacheFFD}}if(e.cacheZOrder&&delete e.cacheZOrder,e.constraint&&e.constraint.ik)for(var h in e.constraint.ik){var d=e.constraint.ik[h];d&&d.cacheValue&&delete d.cacheValue}}},{key:"clearGlobalTransform",value:function(e){n.clearBoneGlobalTransform(e),n.clearSlotGlobalTransform(e)}},{key:"clearBoneGlobalTransform",value:function(e){if(e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(i.globalTransform&&delete i.globalTransform,i.ikGlobalTransform&&delete i.ikGlobalTransform,i.ikTransform&&delete i.ikTransform,i.fkTransform&&delete i.fkTransform,i.fkGlobalTransform&&delete i.fkGlobalTransform,i.mixTransform&&delete i.mixTransform)}}},{key:"clearSlotGlobalTransform",value:function(e){if(e.slots)for(var t=0,n=e.slots.ids.length;t<n;t++){var r=e.slots.ids[t],i=e.slots.map[r];if(i&&i.displays)for(var a=0,o=i.displays.ids.length;a<o;a++){var s=i.displays.ids[a],l=i.displays.map[s];l&&l.globalTransform&&delete l.globalTransform}}}},{key:"updateGlobalTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.POSE;n.updateBoneGlobalTransform(e,t),n.updateSlotGlobalTransform(e,t),n.calculateRigging(e,t)}},{key:"calculateAnimatedProperty",value:function(e,t,r,i){n.clearGlobalTransform(e),n.updateGlobalTransform(e,t)}},{key:"calculateIK",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X.POSE,r=e.bones.map[t.parentId],i=t.childId?e.bones.map[t.childId]:null,a=t.targetId?e.bones.map[t.targetId]:null;if(!1!==r.inheritRotation&&(!i||!1!==i.inheritRotation)){var o=n===X.POSE?r.transform:r.cacheTransform||r.animatedTransform||r.transform,s=e.bones.map[r.parentId],l=t.bendPositive,u=t.weight;if(n===X.ANIMATION&&(t.cacheValue?(l=t.cacheValue.bendPositive,u=t.cacheValue.weight):t.animatedValue&&(l=t.animatedValue.bendPositive,u=t.animatedValue.weight)),i){var c={x:0,y:0},h=(r.globalTransform.x,r.globalTransform.y),d=(i.globalTransform.x,i.globalTransform.y),f=s.globalTransform,p=Lf.transform2Matrix(f),v=(Lf.matrixInvert(p),Lf.transformInverseApplyPoint(f,{x:a.globalTransform.x,y:a.globalTransform.y})),m=v.x,g=v.y;h=Lf.transformInverseApplyPoint(f,{x:r.globalTransform.x,y:r.globalTransform.y}),d=Lf.transformInverseApplyPoint(f,{x:i.globalTransform.x,y:i.globalTransform.y});var y=n===X.POSE?i.transform:i.cacheTransform||i.animatedTransform||i.transform,b=o.scaleX,_=o.scaleY,x=y.scaleX,E=d.x-h.x,w=d.y-h.y,T=Math.sqrt(E*E+w*w),S=0,k=0,C=1,A=0,I=0;b<0?(b=-b,A=Math.PI,C=-1):(A=0,C=1),_<0&&(_=-_,C=-C),x<0?(x=-x,I=Math.PI):I=0;var O=l?1:-1;if(O*=C,Math.abs(b-_)<=.001){var P=i.length*x,M=((m-=h.x)*m+(g-=h.y)*g-T*T-P*P)/(2*T*P);M<-1?M=-1:M>1&&(M=1),k=Math.acos(M)*O;var R=T+P*M,N=P*Math.sin(k);S=Math.atan2(g*R-m*N,m*R+g*N)}else{var D=T,L=m-h.x,F=g-h.y,B=i.length*y.scaleX,U=b*B,H=_*B,j=Math.atan2(F,L),z=U*U,V=H*H,G=L*L+F*F,W=V*(D*D)+z*G-z*V,Y=-2*V*D,K=V-z,q=Y*Y-4*K*W;if(q>=0){var $=Math.sqrt(q);Y<0&&($=-$);var Z=($=-(Y+$)/2)/K,Q=W/$,J=Math.abs(Z)<Math.abs(Q)?Z:Q;if(J*J<=G){var ee=Math.sqrt(G-J*J)*O;S=j-Math.atan2(ee,J),k=Math.atan2(ee/_,(J-D)/b);var te=y.x,ne=y.y*_,re=Math.atan2(ne,te)*C;c.x=S-re+A,c.y=(k+re)*C+I,c.x=Lf.normalizeRadian(c.x),c.y=Lf.normalizeRadian(c.y);var ie=Lf.normalizeRadian(c.x-o.skewX),ae=Lf.normalizeRadian(c.y-y.skewX),oe=o.skewX+ie,se=y.skewX+ae;return r.ikTransform=Pe(Pe({},o),{},{skewX:oe,skewY:oe}),r.fkTransform=Pe({},o),r.mixTransform=Pe(Pe({},o),{},{skewX:o.skewX+ie*u,skewY:o.skewY+ie*u}),r.globalTransform=Lf.transformCross(s.globalTransform,r.mixTransform),r.ikGlobalTransform=Lf.transformCross(s.globalTransform,r.ikTransform),r.fkGlobalTransform=Lf.transformCross(s.globalTransform,r.fkTransform),i.ikTransform=Pe(Pe({},y),{},{skewX:se,skewY:se}),i.fkTransform=Pe({},y),i.mixTransform=Pe(Pe({},y),{},{skewX:y.skewX+ae*u,skewY:y.skewY+ae*u}),i.globalTransform=Lf.transformCross(r.globalTransform,i.mixTransform),i.ikGlobalTransform=Lf.transformCross(r.ikGlobalTransform,i.ikTransform),void(i.fkGlobalTransform=Lf.transformCross(r.fkGlobalTransform,i.fkTransform))}}var le=0,ue=Number.MAX_VALUE,ce=0,he=0,de=0,fe=0,pe=0,ve=0,me=D+U,ge=me*me;ge>fe&&(de=0,fe=ge,pe=me),(ge=(me=D-U)*me)<ue&&(le=Math.PI,ue=ge,ce=me);var ye=Math.acos(-U*D/(z-V));me=U*Math.cos(ye)+D;var be=H*Math.sin(ye);(ge=me*me+be*be)<ue&&(le=ye,ue=ge,ce=me,he=be),ge>fe&&(de=ye,fe=ge,pe=me,ve=be),G<=(ue+fe)/2?(S=j-Math.atan2(he*O,ce),k=le*O):(S=j-Math.atan2(ve*O,pe),k=de*O)}var _e=y.x,xe=y.y*_,Ee=Math.atan2(xe,_e)*C;c.x=S-Ee+A,c.y=(k+Ee)*C+I,c.x=Lf.normalizeRadian(c.x),c.y=Lf.normalizeRadian(c.y);var we=Lf.normalizeRadian(c.x-o.skewX),Te=Lf.normalizeRadian(c.y-y.skewX),Se=o.skewX+we,ke=y.skewX+Te;r.ikTransform=Pe(Pe({},o),{},{skewX:Se,skewY:Se}),r.fkTransform=Pe({},o),r.mixTransform=Pe(Pe({},o),{},{skewX:o.skewX+we*u,skewY:o.skewY+we*u}),r.globalTransform=Lf.transformCross(s.globalTransform,r.mixTransform),r.ikGlobalTransform=Lf.transformCross(s.globalTransform,r.ikTransform),r.fkGlobalTransform=Lf.transformCross(s.globalTransform,r.fkTransform),i.ikTransform=Pe(Pe({},y),{},{skewX:ke,skewY:ke}),i.fkTransform=Pe({},y),i.mixTransform=Pe(Pe({},y),{},{skewX:y.skewX+Te*u,skewY:y.skewY+Te*u}),i.globalTransform=Lf.transformCross(r.globalTransform,i.mixTransform),i.ikGlobalTransform=Lf.transformCross(r.ikGlobalTransform,i.ikTransform),i.fkGlobalTransform=Lf.transformCross(r.fkGlobalTransform,i.fkTransform)}else{var Ce=r.globalTransform.skewX,Ae=Math.atan2(a.globalTransform.y-r.globalTransform.y,a.globalTransform.x-r.globalTransform.x);r.fkTransform=Pe({},o),r.fkGlobalTransform=Pe({},r.globalTransform),r.ikGlobalTransform=Pe(Pe({},r.globalTransform),{},{skewX:Ae,skewY:Ae}),r.ikTransform=Lf.transformInvertCross(s.globalTransform,r.ikGlobalTransform);var Ie=Ce+Lf.normalizeRadian(Ae-Ce)*u;r.globalTransform=Pe(Pe({},r.ikGlobalTransform),{},{skewX:Ie,skewY:Ie}),r.mixTransform=Lf.transformInvertCross(s.globalTransform,r.globalTransform)}}}},{key:"sortBones",value:function(e){for(var t=e.bones.ids.concat(),n=[],r=[];t.length>0;){for(var i=[],a=0,o=t.length;a<o;a++){var s=t[a],l=e.bones.map[s];(0===r.length&&!l.parentId||r.includes(l.parentId))&&(n.push(l),i.push(l.id),t.splice(a,1),a--,o--)}r=i}return n}},{key:"getIKByBone",value:function(e,t){if(t.constraint&&t.constraint.ik)for(var n in t.constraint.ik){var r=t.constraint.ik[n];if(r.childId&&r.childId===e.id)return r;if(!r.childId&&r.parentId===e.id)return r}return null}},{key:"updateBoneGlobalTransform",value:function(e,t){for(var r=n.sortBones(e),i=0,a=r.length;i<a;i++){var o=r[i];o.globalTransform||(o.globalTransform=n.getBoneGlobalTransform(o,e.bones.map,t));var s=this.getIKByBone(o,e);if(s){var l=s.childId?e.bones.map[s.childId]:null,u=e.bones.map[s.parentId],c=s.targetId?e.bones.map[s.targetId]:null;u&&!u.globalTransform&&(u.globalTransform=n.getBoneGlobalTransform(u,e.bones.map,t)),l&&!l.globalTransform&&(l.globalTransform=n.getBoneGlobalTransform(l,e.bones.map,t)),c&&!c.globalTransform&&(c.globalTransform=n.getBoneGlobalTransform(c,e.bones.map,t)),this.calculateIK(e,s,t)}}}},{key:"updateSlotGlobalTransform",value:function(e,t){if(e.slots)for(var r=0,i=e.slots.ids.length;r<i;r++){var a=e.slots.ids[r],o=e.slots.map[a];if(o&&o.displays)for(var s=0,l=o.displays.ids.length;s<l;s++){var u=o.displays.ids[s],c=o.displays.map[u];c.globalTransform||(c.globalTransform=n.getDisplayGlobalTransform(c,o,e.bones.map,t))}}}},{key:"getDisplayGlobalTransform",value:function(e,t,r,i){if(e.globalTransform)return e.globalTransform;var a=r[t.parentId],o=ge(e.transform);if(a){var s=n.getBoneGlobalTransform(a,r,i);o=Lf.transformCross(s,e.transform)}return o}},{key:"updateBoneAnimatedTransform",value:function(e){if(e.animatedProperties)for(var t in e.animatedTransform=ge(e.transform),e.animatedProperties){var n=e.animatedProperties[t];switch(t){case"x":e.animatedTransform.x+=n;break;case"y":e.animatedTransform.y+=n;break;case"rotated":e.animatedTransform.skewX+=n,e.animatedTransform.skewY+=n;break;case"scaleX":e.animatedTransform.scaleX*=n;break;case"scaleY":e.animatedTransform.scaleY*=n;break;case S.TRANSLATE:e.animatedTransform.x+=n.x,e.animatedTransform.y+=n.y;break;case S.ROTATE:e.animatedTransform.skewX+=n.rotate,e.animatedTransform.skewY+=n.rotate;break;case S.SCALE:e.animatedTransform.scaleX*=n.x,e.animatedTransform.scaleY*=n.y}}}},{key:"getBoneGlobalTransform",value:function(e,t,r){if(e.globalTransform)return e.globalTransform;var i=t[e.parentId],a=ge(e.transform);if(this.updateBoneAnimatedTransform(e),i){var o=n.getBoneGlobalTransform(i,t,r),s=e.transform;r===X.ANIMATION?e.cacheTransform?(a=Lf.transformCross(o,e.cacheTransform),s=e.cacheTransform):e.animatedProperties?(a=Lf.transformCross(o,e.animatedTransform),s=e.animatedTransform):(a=Lf.transformCross(o,e.transform),s=e.transform):(a=Lf.transformCross(o,e.transform),s=e.transform),!1===e.inheritRotation&&(a.skewX=s.skewX,a.skewY=s.skewY),!1===e.inheritScale&&(a.scaleX=s.scaleX,a.scaleY=s.scaleY)}else r===X.ANIMATION&&(e.cacheTransform?a=ge(e.cacheTransform):e.animatedTransform&&(a=ge(e.animatedTransform)));return a.skewX=Lf.normalizeRadian(a.skewX),a.skewY=Lf.normalizeRadian(a.skewY),a}},{key:"getBoneLocalTransformByGlobal",value:function(e,t,r,i){var a=t[e.parentId];if(a){var o=n.getBoneGlobalTransform(a,t,r),s=Lf.transformInvertCross(o,i);return!1===e.inheritRotation&&(s.skewX=e.transform.skewX,s.skewY=e.transform.skewY),!1===e.inheritScale&&(s.scaleX=e.transform.scaleX,s.scaleY=e.transform.scaleY),s}return i}},{key:"getLocalTransform",value:function(e,t,r){if(e.globalTransform){var i=t[e.parentId];if(i){var a=n.getBoneGlobalTransform(i,t,r);return Lf.transformInvertCross(a,e.globalTransform)}return e.globalTransform}return e.transform}},{key:"getDisplayLocalTransform",value:function(e,t,r,i){if(t&&e.globalTransform){var a=n.getBoneGlobalTransform(t,r,i);return Lf.transformInvertCross(a,e.globalTransform)}return e.transform}},{key:"getSlotCurDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X.POSE,n=e.displayIndex;if(t===X.ANIMATION&&(void 0!==e.cacheDisplayIndex?n=e.cacheDisplayIndex:void 0!==e.animatedDisplayIndex&&(n=e.animatedDisplayIndex)),n<0)return null;var r=e.displays.ids[n];return e.displays.map[r]}},{key:"getSlotLocalTransformByGlobal",value:function(e,t,r,i){var a=n.getSlotCurDisplay(e),o=t.bones.map[e.parentId];if(o&&a){var s=n.getBoneGlobalTransform(o,t.bones.map,r);return Lf.transformInvertCross(s,i)}return a.transform}},{key:"getSlotDisplay",value:function(e,t){return e.displays.map[t]}},{key:"getRootBone",value:function(e){for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];if(!i.parentId)return i}}},{key:"getBoneById",value:function(e,t){return e.bones.map[t]}},{key:"getSlotByDisplayId",value:function(e,t){for(var n=0,r=e.slots.ids.length;n<r;n++){var i=e.slots.ids[n],a=e.slots.map[i];if(a.displays)if(a.displays.map[t])return a}}},{key:"getAllSlotDisplay",value:function(e,t){var r=[];if(e.slots){var i=e.slots.ids;t===X.ANIMATION&&(e.cacheZOrder?i=e.cacheZOrder:e.animatedZOrder&&(i=e.animatedZOrder));for(var a=i.length-1;a>=0;a--){var o=i[a],s=e.slots.map[o],l=n.getSlotCurDisplay(s);r.push({slot:s,display:l})}}return r}},{key:"getBoneChains",value:function(e,t){for(var r=[],i=t.concat();i.length>0;){var a=[],o=i.shift(),s=e.bones.map[o];a.push(s);for(var l=0,u=i.length;l<u;l++){var c=i[l];n.isDescendantBone(e,o,c)?(i.splice(l,1),a.push(e.bones.map[c]),u--,l--):n.isAncestorBone(e,o,c)&&(i.splice(l,1),a.unshift(e.bones.map[c]),u--,l--)}r.push(a)}return r}},{key:"findBoneSlots",value:function(e,t){for(var n=[],r=0,i=e.slots.ids.length;r<i;r++){var a=e.slots.ids[r],o=e.slots.map[a];o.parentId===t&&n.push(o)}return n}},{key:"findBoneChildren",value:function(e,t){for(var n=[],r=0,i=e.bones.ids.length;r<i;r++){var a=e.bones.ids[r],o=e.bones.map[a];o.parentId===t&&n.push(o)}return n}},{key:"findBoneParent",value:function(e,t){var n=e.bones.map[t];if(n)return e.bones.map[n.parentId]}},{key:"getAllDescendantBones",value:function(e,t){for(var r=[],i=n.findBoneChildren(e,t),a=0,o=i.length;a<o;a++){var s=i[a];r.push(s);var l=n.getAllDescendantBones(e,s.id);r.push.apply(r,Ie(l))}return r}},{key:"getAllDescendantBonesAndSlotsAndIKsAndSelf",value:function(e,t){var r=[],i=[],a=[];r.push.apply(r,Ie(t));for(var o=0,s=t.length;o<s;o++)for(var l=n.getAllDescendantBones(e,t[o]),u=0,c=l.length;u<c;u++)r.indexOf(l[u].id)<0&&r.push(l[u].id);for(var h=0,d=r.length;h<d;h++)for(var f=n.findBoneSlots(e,r[h]),p=0,v=f.length;p<v;p++)i.push(f[p].id);for(var m in e.constraint.ik){var g=e.constraint.ik[m];(r.indexOf(g.parentId)>=0||r.indexOf(g.childId)>=0||r.indexOf(g.targetId)>=0)&&a.push(g.id)}return{bones:r,slots:i,iks:a}}},{key:"isDescendantBone",value:function(e,t,n){for(var r=e.bones.map[n];r;){if(r.id===t)return!0;r=e.bones.map[r.parentId]}return!1}},{key:"isAncestorBone",value:function(e,t,n){for(var r=e.bones.map[t];r;){if(r.id===n)return!0;r=e.bones.map[r.parentId]}return!1}},{key:"createArmatureName",value:function(e,t){return oT.createName(e,t)}},{key:"createBoneName",value:function(e,t){return oT.createName(e,t.bones.map)}},{key:"createIKConStraintName",value:function(e,t){return oT.createName(e,t.constraint.ik)}},{key:"checkBoneNameConflict",value:function(e,t){return oT.checkNameConflict(e,t.bones.map)}},{key:"createSlotName",value:function(e,t){return oT.createName(e,t.slots.map)}},{key:"checkSlotNameConflict",value:function(e,t){return oT.checkNameConflict(e,t.slots.map)}},{key:"checkDisplayNameConflict",value:function(e,t){for(var n={},r=0,i=t.slots.ids.length;r<i;r++){var a=t.slots.ids[r],o=t.slots.map[a];o.displays&&(n=Pe(Pe({},n),o.displays.map))}return oT.checkNameConflict(e,n)}},{key:"checkArmatureNameConflict",value:function(e,t){return oT.checkNameConflict(e,t)}},{key:"getMaxChainBones",value:function(e,t){for(var n,r={},i=0,a=0,o=t.length;a<o;a++){var s=t[a],l=e.bones.map[s],u=[];do{u.unshift(l.id),l=e.bones.map[l.parentId]}while(l&&t.includes(l.id));r[s]=u,u.length>i&&(i=u.length,n=u)}return n}},{key:"getBoneTailPosition",value:function(e,t,r){var i=t.bones.map,a=n.getBoneGlobalTransform(e,i,r);return{x:a.x+Math.cos(a.skewX)*e.length*e.globalTransform.scaleX,y:a.y+Math.sin(a.skewY)*e.length*e.globalTransform.scaleY}}},{key:"getBoneTailLocalPosition",value:function(e){return{x:Math.cos(e.transform.skewX)*e.length*e.transform.scaleX,y:Math.sin(e.transform.skewY)*e.length*e.transform.scaleY}}},{key:"getDisplaySize",value:function(){var e=_e(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.assetId,a=Zw.findAssetById(i,n),e.next=4,Vf.getAssetSize(a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMeshPointNumber",value:function(e){if(e.mesh&&e.mesh.points){var t=0;for(var n in e.mesh.points)t++;return t}return 0}},{key:"deleteBoneWeight",value:function(e,t,n,r){for(var i=(r||e)[t],a={},o=0,s=0,l=n.length;s<l;s++){o+=i[n[s]]}if(o<=0)return ge(i);var u={},c=1,h=0,d=0;for(var f in i){var p=parseInt(f);n.indexOf(p)<0?(u[f]=i[f],h+=i[f],d++):(i[f],c-=i[f])}for(var v in u){var m=u[v];u[v]=c>0&&h>0?m/c:1/d}for(var g in u)a[g]=u[g];return a}},{key:"calculateBoneWeight",value:function(e,t,n,r,i){var a=(i||e)[t],o=n.toString(),s={};if(1===r){for(var l in a)s[l]=l!==o?0:1;return s}if(r<=0&&a[o]<=0)return ge(a);var u={},c=0,h=0,d=0,f=0;for(var p in a)p!==o?(u[p]=a[p],h+=a[p],d++):(f=a[p],c=1-a[p]);for(var v in u){var m=u[v];u[v]=c>0&&h>0?m/c:1/d}var g=f-r;if(0===g)return ge(a);var y=0;for(var b in u)s[b]=a[b]+g*u[b],s[b]<0&&(y+=s[b],s[b]=0);if(y)for(var _ in s)s[_]>0&&(s[_]+y>0?s[_]+=y:(s[_]=0,y+=s[_]));return s}},{key:"calculateRiggingDisplay",value:function(e,t,n){var r={};if(t.mesh.bonePose&&t.mesh.slotPose){for(var i in t.mesh.bonePose){var a=t.mesh.bonePose[i],o=Lf.transform2Matrix(a.pose),s=Lf.matrixInvert(o);r[i]=s}var l=Lf.transform2Matrix(t.mesh.slotPose),u=Lf.transform2Matrix(t.globalTransform),c=Lf.matrixInvert(u);for(var h in t.mesh.points){t.mesh.boneWeights[h];var d=this.getMeshRiggingPointMatrix(e,t,parseInt(h),!1,r,l,c),f=t.mesh.points[h],p={x:f.vertices[0],y:f.vertices[1]};if(n===X.ANIMATION)if(t.mesh.cacheFFD&&t.mesh.cacheFFD[h]){var v=t.mesh.cacheFFD[h];p.x=v[0],p.y=v[1]}else if(t.mesh.animatedFFD&&t.mesh.animatedFFD[h]){var m=t.mesh.animatedFFD[h];p.x=m[0],p.y=m[1]}var g=Lf.matrixApplyPoint(d,p);t.mesh.riggingFFD||(t.mesh.riggingFFD={}),t.mesh.riggingFFD[h]=[g.x,g.y]}}else t.mesh.riggingFFD=void 0}},{key:"calculateRigging",value:function(e,t){if(e.slots)for(var r=0,i=e.slots.ids.length;r<i;r++){var a=e.slots.ids[r],o=e.slots.map[a],s=n.getSlotCurDisplay(o);s&&s.mesh&&n.calculateRiggingDisplay(e,s,t)}return{}}},{key:"getMeshRiggingPointMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!i)for(var s in i={},t.mesh.bonePose){var l=t.mesh.bonePose[s],u=Lf.transform2Matrix(l.pose),c=Lf.matrixInvert(u);i[s]=c}var h,d=t.mesh.boneWeights[n];for(var f in d){var p=e.bones.map[f],v=d[f],m=Pe({},i[f]),g=Lf.transform2Matrix(p.globalTransform);m=Lf.matrixCross(g,m),Lf.matrixMultiply(m,v),h?Lf.matrixAdd(h,m):h=m}if(a||(a=Lf.transform2Matrix(t.mesh.slotPose)),!o&&!r){var y=Lf.transform2Matrix(t.globalTransform);o=Lf.matrixInvert(y)}return h=Lf.matrixCross(h,a),r||(h=Lf.matrixCross(o,h)),h}},{key:"getMeshPointFFDByRiggingPos",value:function(e,t,r,i){if(!t.mesh.bonePose||!t.mesh.slotPose)throw new Error("no rigging data");var a=n.getMeshRiggingPointMatrix(e,t,r,!0),o=Lf.matrixInvert(a),s={x:i[0],y:i[1]},l=Lf.matrixApplyPoint(o,s);return[l.x,l.y]}},{key:"getNextRiggingBoneColor",value:function(e){for(var t=Uf.RIG_BONE_COLOR,n=t[0],r=0;n;){var i=!1;for(var a in e.bonePose){if(e.bonePose[a].color===n){if(++r>=t.length)return t[r%t.length];n=t[r],i=!0;break}}if(!i)return n}}},{key:"calculateAutoWeight",value:function(){var e=_e(ye().mark((function e(t,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 4,.01,100,e.abrupt("return",new Promise((function(e,i){var a=r.mesh,o=r.globalTransform,s=[];for(var l in a.bonePose){a.bonePose[l]&&s.push(t.bones.map[l])}var u={},c=Number.MAX_VALUE,h=0,d=0,f=0;for(var p in a.points){var v=a.riggingFFD[p],m=Lf.transformApplyPoint(o,{x:v[0],y:v[1]});u[p]={};for(var g=0,y=s.length;g<y;g++){var b=s[g],_=n.getBoneTailPosition(b,t,X.POSE),x={x:b.globalTransform.x,y:b.globalTransform.y},E=Lf.distance2PointToSeg(m.x,m.y,x.x,x.y,_.x,_.y);E<100&&(E=100),u[p][b.id]=E,E<c&&(c=E),E>h&&(h=E),d+=E,f++}}var w={};for(var T in u){var S=u[T],k=[];for(var C in S){var A=S[C];k.push({boneId:C,distance:A})}k.sort((function(e,t){return e.distance-t.distance}));for(var I=0,O=Math.min(k.length,4),P=0,M=O;P<M;P++)I+=1/k[P].distance;var R=0;w[T]={};for(var N=0,D=k.length;N<D;N++){var L=k[N];if(N<O-1){var F=1/L.distance/I;F<.01&&(F=0),R+=F,w[T][L.boneId]=F}else w[T][L.boneId]=N===O-1?1-R:0}}e(w)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSlotCurColor",value:function(e){return void 0!==e.cacheColor?e.cacheColor:void 0!==e.animatedColor?e.animatedColor:void 0!==e.color?e.color:16777215}},{key:"getSlotCurAlpha",value:function(e){return void 0!==e.cacheAlpha?e.cacheAlpha:void 0!==e.animatedAlpha?e.animatedAlpha:void 0!==e.alpha?e.alpha:1}},{key:"getSlotColorAlpha",value:function(e){var t=n.getSlotCurColor(e),r=n.getSlotCurAlpha(e);return Lf.mergeAlphaColor(r,t)}},{key:"findRiggingDisplayByBoneIds",value:function(e,t){var n=[];for(var r in e.slots.map){var i=e.slots.map[r];if(i)for(var a in i.displays.map){var o=i.displays.map[a];if(o&&o.mesh&&o.mesh.bonePose){for(var s=[],l=0,u=t.length;l<u;l++){var c=t[l];o.mesh.bonePose[c]&&s.push(c)}s.length>0&&n.push({slotId:i.id,displayId:o.id,boneIds:s})}}}return n}}]),n}(Ff),Jw=function(e){p(n,gmvc.GModule);var t=g(n);function n(){return l(this,n),t.call(this,"dopesheet")}return d(n,[{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e,t){})),y(e,$.UPDATE_SCALE,(function(e,n){t.setScale(n,e),t.refreshDopeConfig(e)})),y(e,$.UPDATE_OFFSET,(function(e,n){e.offset=n,t.refreshDopeConfig(e)})),y(e,$.UPDATE_LABEL_WIDTH,(function(e,n){e.labelWidth=n,t.refreshDopeConfig(e)})),y(e,$.UPDATE_SIZE,(function(e,n){var r=t.rootState.config.timeline.LABEL_LEFT_WIDTH;e.labelWidth=n.width-r,e.width=n.width,e.height=n.height,t.refreshDopeConfig(e)})),y(e,$.UPDATE_FRAME,(function(e,n){e.curTime=n;var r=t.rootState.runtime.editing.selectedAnimationId,i=t.rootState.runtime.editing.editingArmatureId,a=t.rootState.runtime.dragonbones.armatureMap[i];Qw.clearCache(a),i>0&&r>0&&t.commit(O.CALCULATE_ANIMATED_PROPERTY,{animationId:r,armatureId:i,frameIndex:n})})),e}},{key:"minScale",get:function(){var e=this.rootState.config.timeline,t=e.MIN_GAP,n=e.SCALE_LEVEL;return t/(e.MAX_GAP*n[n.length-1])}},{key:"setScale",value:function(e,t){var n=this.minScale;if(e<n?e=n:e>1&&(e=1),t.scale!==e){for(var r,i,a=e,o=this.rootState.config.timeline,s=o.MIN_GAP,l=o.SCALE_LEVEL,u=o.MAX_GAP,c=o.LABEL_LEVEL,h=o.TWO_LABEL_GAP,d=o.FIVE_LABEL_GAP,f=u*a,p=0,v=0;f<s&&p<l.length;)f=u*a*l[++p];p>=l.length&&(p=l.length-1),v=p>0?c[2]:f>h?c[0]:f>d?c[1]:c[2],r=l[p],i=Math.round(f),t.scale=a,t.curGap=i,t.scaleLevel=r,t.labelLevel=v}}},{key:"refreshDopeConfig",value:function(e){var t=this.rootState.config.timeline.FIRST_X,n=e.offset,r=e.curGap,i=e.scaleLevel,a=e.labelWidth,o=Math.ceil((a+t)/r),s=Math.floor(n/r);(s-=Math.floor(t/r))<0&&(s=0),e.startIndex=s*i,e.endIndex=(s+o)*i}}]),n}(),eT=function(e){p(n,gmvc.GModule);var t=g(n);function n(){var e;l(this,n),(e=t.call(this,"editor")).rootStore=void 0;var r=new Jw;return e.addModule(r),e}return d(n,[{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e,t){})),y(e,Y.LOAD_SUCCESS,(function(e,t){if(t){var n=t.editor;e.idGen=n.idGen,e.lastModify=n.lastModify,e.saveTime=n.saveTime,n.layout&&(n.layout.animationLayout&&(e.layout.animationLayout=n.layout.animationLayout),n.layout.poseLayout&&(e.layout.poseLayout=n.layout.poseLayout))}})),y(e,W.UPDATE_SIZE,(function(e,t){e.stage.width=t.width-e.stage.ruleSize,e.stage.height=t.height-e.stage.ruleSize})),y(e,W.UPDATE_POSITION,(function(e,t){e.stage.x=t.x,e.stage.y=t.y})),y(e,W.UPDATE_SCALE,(function(e,t){e.stage.scale=t})),y(e,W.MOUSE_MOVE,(function(e,t){e.stage.mouseCanvasX=t.canvasPos.x,e.stage.mouseCanvasY=t.canvasPos.y,e.stage.mouseStageX=t.stagePos.x,e.stage.mouseStageY=t.stagePos.y})),y(e,W.MOUSE_DOWN,(function(e,t){})),y(e,W.MOUSE_UP,(function(e,t){})),y(e,W.RIGHT_DOWN,(function(e,t){})),y(e,W.RIGHT_UP,(function(e,t){})),y(e,V.OVER_BONE,(function(e,n){t.rootState.runtime.editing.boneSlotControl.boneSelectEnable&&(-1===t.rootState.runtime.editing.lockBoneSlotIds.indexOf(n)&&(e.over.overBone=n))})),y(e,F.OVER_SLOT,(function(e,n){t.rootState.runtime.editing.boneSlotControl.slotSelectEnable&&(-1===t.rootState.runtime.editing.lockBoneSlotIds.indexOf(n)&&(e.over.overSlotId=n))})),y(e,q.OVER_FRAME,(function(e,t){e.over.overFrameIds=t})),y(e,W.SWITCH_AUTO_KEY,(function(e,t){e.dopesheet.autoKey=t})),y(e,W.SWITCH_AUTO_FIRST_FRAME,(function(e,t){e.dopesheet.autoFirstFrame=!e.dopesheet.autoFirstFrame})),y(e,$.SWITCH_FILTER,(function(e,t){e.dopesheet.filter=!e.dopesheet.filter})),y(e,G.OPEN_EXPORT_WINDOW,(function(e,t){e.openExportWindow=!0})),y(e,G.CLOSE_EXPORT_WINDOW,(function(e,t){e.openExportWindow=!1})),y(e,G.OPEN_IMPORT_WINDOW,(function(e,t){e.openImportWindow=!0})),y(e,G.CLOSE_IMPORT_WINDOW,(function(e,t){e.openImportWindow=!1})),y(e,G.OPEN_PREVIEW_WINDOW,(function(e,t){e.openPreviewWindow=!0})),y(e,G.CLOSE_PREVIEW_WINDOW,(function(e,t){e.openPreviewWindow=!1})),y(e,G.UNDO,(function(e,n){t.commit(gmvc.GHistoryMutation.UNDO)})),y(e,G.REDO,(function(e,n){t.commit(gmvc.GHistoryMutation.REDO)})),y(e,G.LAYOUT_CHANGE,(function(e,t){e.layoutChange=!0})),y(e,G.UPDATE_LAYOUT,(function(e,t){t.animationLayout&&(e.layout.animationLayout=t.animationLayout),t.poseLayout&&(e.layout.poseLayout=t.poseLayout),e.layoutChange=!1})),y(e,N.SELECT_ARMATURE,(function(e,t){e.over.overBone=0,e.over.overSlotId=0,e.over.overFrameIds=[]})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},W.UNDO,(function(e,n){oT.instances.getHistoryMergeName()?mf.warn("\u6709\u672a\u5b8c\u6210\u7684\u64cd\u4f5c\uff0c\u8bf7\u5148\u5b8c\u6210\u518d\u64a4\u9500"):t.commit(G.UNDO,{})})),y(e,W.REDO,(function(e,n){oT.instances.getHistoryMergeName()?mf.warn("\u6709\u672a\u5b8c\u6210\u7684\u64cd\u4f5c\uff0c\u8bf7\u5148\u5b8c\u6210\u518d\u91cd\u505a"):t.commit(G.REDO,{})})),y(e,W.CLEAR_LOCAL_DATA,(function(e,t){mf.confirm("","\u662f\u5426\u6e05\u7a7a\u672c\u5730\u6570\u636e\uff1f\u6e05\u7a7a\u540e\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff01\n                \u6e05\u7a7a\u540e\u5237\u65b0\u9875\u9762\uff0c\u53ef\u91cd\u65b0\u5f00\u59cb\u521b\u5efa\u3002","\u6e05\u7a7a","\u53d6\u6d88",(function(){Se.instance.clearAll()}))})),e}}]),n}(),tT=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,"editing")}return d(n,[{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e,t){})),y(e,V.SELECT_BONES,(function(e,t){if(e.boneSlotControl.boneSelectEnable){for(var n=0;n<t.length;n++){var r=t[n];-1!==e.lockBoneSlotIds.indexOf(r)&&(t.splice(n,1),n--)}e.selectedBoneIds=t}})),y(e,F.SELECT_SLOTS,(function(e,t){if(e.boneSlotControl.slotSelectEnable){for(var n=0;n<t.length;n++){var r=t[n];-1!==e.lockBoneSlotIds.indexOf(r)&&(t.splice(n,1),n--)}e.selectedSlotIds=t,e.selectedDisplayId=0}})),y(e,H.SELECT_DISPLAY,(function(e,t){e.boneSlotControl.slotSelectEnable&&(e.selectedSlotIds=[t.slotId],e.selectedDisplayId=t.displayId)})),y(e,N.SELECT_ARMATURE,(function(e,n){e.editingArmatureId=n.armatureId,e.selectedBoneIds=[],e.selectedSlotIds=[],e.selectedMeshPointIds=[],e.selectedDisplayId=0,e.selectedAnimationId=0,e.selectedFrameIds=[],e.riggingSelectedBoneId=0;var r=oT.getCurrentArmature(t.rootState);r&&r.animations?e.selectedAnimationId=r.animations[0]:e.selectedAnimationId=0})),y(e,P.SELECT_ANIMATION,(function(e,t){e.selectedAnimationId=t.animationId})),y(e,G.SWITCH_MODE,(function(e,n){e.stageTool!==Z.SELECT&&t.commit(G.SWITCH_TOOL,{tool:Z.SELECT}),e.editMode=n.mode})),y(e,$.SELECT_FRAME,(function(e,t){var n=t.filter((function(e,t,n){return n.indexOf(e)===t}));e.selectedFrameIds=n})),y(e,W.LOCK_ITEMS,(function(e,n){e.lockBoneSlotIds=n;for(var r=!1,i=0,a=e.selectedBoneIds.length;i<a;i++){var o=e.selectedBoneIds[i];-1!==n.indexOf(o)&&(e.selectedBoneIds.splice(i,1),i--,r=!0)}r&&t.commit(V.SELECT_BONES,e.selectedBoneIds);for(var s=!1,l=0,u=e.selectedSlotIds.length;l<u;l++){var c=e.selectedSlotIds[l];-1!==n.indexOf(c)&&(e.selectedSlotIds.splice(l,1),l--,s=!0)}s&&t.commit(F.SELECT_SLOTS,e.selectedSlotIds)})),y(e,W.HIDE_ITEMS,(function(e,t){e.hideBoneSlotIds=t})),y(e,G.SWITCH_TOOL,(function(e,t){e.lastStageTool=e.stageTool,e.stageTool=t.tool})),y(e,G.CHANGE_BONE_SLOT_CONTROL,(function(e,t){e.boneSlotControl[t.property]=t.value})),y(e,U.SELECT_MESH_POINTS,(function(e,t){e.selectedMeshPointIds=t.points})),y(e,G.UPDATE_MESH_TOOL,(function(e,t){var n=t.deformed,r=t.curTool,i=t.autoOutlineNum;void 0!==r&&(e.meshEditTool.curTool=r),void 0!==n&&(e.meshEditTool.deformed=n),void 0!==i&&(e.meshEditTool.autoOutlineNum=i),e.meshEditTool.curTool===Q.DRAW?(e.meshEditTool.deformed=!1,e.meshEditTool.drawOutlines||(e.meshEditTool.drawOutlines=[]),t.hasOwnProperty("drawOutlines")&&(e.meshEditTool.drawOutlines=t.drawOutlines)):e.meshEditTool.drawOutlines=void 0})),y(e,G.SET_DEFAULT_TOOLTIP_TOP,(function(e,t){e.defaultTips=t.tooltip})),y(e,G.SELECT_RIGGING_BONE,(function(e,t){e.riggingSelectedBoneId=t.boneId})),y(e,G.FLAG_AUTO_WEIGHT,(function(e,t){e.autoWeight=t.autoWeight})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},z.SELECT_BONES,(function(e,t){e.commit(V.SELECT_BONES,t)})),y(e,L.SELECT_SLOTS,(function(e,t){e.commit(F.SELECT_SLOTS,t)})),y(e,z.SELECT_ONE_BONE,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e._state.selectedSlotIds.length&&e.commit(F.SELECT_SLOTS,[]),e.commit(V.SELECT_BONES,t),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,L.SELECT_ONE_SLOT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e._state.selectedBoneIds.length&&e.commit(V.SELECT_BONES,[]),e.commit(F.SELECT_SLOTS,t),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.SWITCH_MODE,(function(e,n){e._state.StageTool===Z.MESH_EDIT_TOOL&&e.dispatch(W.CLOSE_MESH_EDIT_TOOL),e.commit(gmvc.GHistoryMutation.MERGE_START);var r=oT.getCurrentArmature(t.rootState);if(n.mode===X.ANIMATION){if(e.commit(G.SWITCH_MODE,n),!oT.hasAnimation(r,t.state.selectedAnimationId)){var i=oT.getDefaultAnimationId(r);t.commit(P.SELECT_ANIMATION,{animationId:i})}var a=t.rootState.editor.dopesheet.curTime;t.commit($.UPDATE_FRAME,a)}else Qw.clearArmatureAnimationData(r),Qw.calculateAnimatedProperty(r,X.POSE),e.commit(G.SWITCH_MODE,n);e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.CHANGE_BONE_SLOT_CONTROL,(function(e,n){t.commit(gmvc.GHistoryMutation.MERGE_START),"boneSelectEnable"!==n.property||n.value||e._state.selectedBoneIds.length&&t.commit(V.SELECT_BONES,[]),"slotSelectEnable"!==n.property||n.value||e._state.selectedSlotIds.length&&t.commit(F.SELECT_SLOTS,[]),t.commit(G.CHANGE_BONE_SLOT_CONTROL,n),t.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.SWITCH_TOOL,(function(e,n){if(t.commit(gmvc.GHistoryMutation.MERGE_START),n===Z.POSE_TOOL){var r=e._state.selectedSlotIds;r&&r.length&&e.commit(F.SELECT_SLOTS,[])}if(n===Z.WEIGHT_TOOL){if(e._state.selectedBoneIds.length&&e.commit(V.SELECT_BONES,[]),e._state.selectedSlotIds.length>1)e.commit(F.SELECT_SLOTS,[]);else if(1===e._state.selectedSlotIds.length){var i=e._state.selectedSlotIds[0],a=oT.getCurrentArmature(t.rootState).slots.map[i],o=Qw.getSlotCurDisplay(a);o&&o.mesh||e.commit(F.SELECT_SLOTS,[])}}else e._state.riggingSelectedBoneId&&e.commit(G.SELECT_RIGGING_BONE,{boneId:0});t.commit(G.SWITCH_TOOL,{tool:n}),t.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,z.PICK_IK_TARGET,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_IK_TARGET"}),e.commit(G.SWITCH_TOOL,{tool:Z.IK_PICK_TARGET_TOOL}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9IK\u7ea6\u675f\u7684\u76ee\u6807\u9aa8\u9abc\uff0c \u4e0d\u80fd\u9009\u5b50\u7ea7\u9aa8\u9abc, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),y(e,z.PICK_IK_TARGET_END,(function(e,t){e.commit(G.SWITCH_TOOL,{tool:t.lastTool}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_IK_TARGET"})})),y(e,z.PICK_BONE_PARENT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_BONE_PARENT"}),e.commit(G.SWITCH_TOOL,{tool:Z.PICK_BONE_PARENT_TOOL}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u4e2a\u9aa8\u9abc\u4f5c\u4e3a\u65b0\u7684\u7236\u7ea7, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),y(e,z.PICK_BONE_PARENT_END,(function(e,t){e.commit(G.SWITCH_TOOL,{tool:t.lastTool}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_BONE_PARENT"})})),y(e,L.PICK_SLOT_PARENT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_SLOT_PARENT"}),e.commit(G.SWITCH_TOOL,{tool:Z.PICK_SLOT_PARENT_TOOL}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u4e2a\u9aa8\u9abc\u4f5c\u4e3a\u65b0\u7684\u7236\u7ea7, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),y(e,L.PICK_SLOT_PARENT_END,(function(e,t){e.commit(G.SWITCH_TOOL,{tool:t.lastTool}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_SLOT_PARENT"})})),y(e,W.OPEN_MESH_EDIT_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(G.UPDATE_MESH_TOOL,{curTool:Q.EDIT}),e.commit(G.SWITCH_TOOL,{tool:Z.MESH_EDIT_TOOL}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u7f51\u683c\u7f16\u8f91\u5de5\u5177"}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.CLOSE_MESH_EDIT_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(G.UPDATE_MESH_TOOL,{curTool:Q.EDIT}),e.commit(G.SWITCH_TOOL,{tool:Z.SELECT}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.OPEN_RIGGING_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(G.SWITCH_TOOL,{tool:Z.RIGGING_TOOL}),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u6839\u9aa8\u9abc"}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),y(e,W.CLOSE_RIGGING_TOOL,(function(e,n){return _e(ye().mark((function n(){var r,i,a,o,s;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(G.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(G.SWITCH_TOOL,{tool:Z.SELECT}),e._state.autoWeight&&(r=oT.getCurrentArmature(t.rootState),i=e._state.selectedSlotIds,a=i[0],o=r.slots.map[a],s=Qw.getSlotCurDisplay(o),e.commit(G.FLAG_AUTO_WEIGHT,{autoWeight:!1}),e.dispatch(B.AUTO_WEIGHT,{armatureId:r.id,slotId:a,displayId:s.id})),e.commit(gmvc.GHistoryMutation.MERGE_END);case 6:case"end":return n.stop()}}),n)})))()})),y(e,B.SELECT_MESH_POINTS,(function(e,n){var r=n.points,i=(n.displayId,n.slotId),a=t.rootState.runtime.editing.selectedDisplayId,o=r.length;e.commit(gmvc.GHistoryMutation.MERGE_START),!a&&o>0?e.commit(H.SELECT_DISPLAY,n):a&&0===o&&e.commit(H.SELECT_DISPLAY,{slotId:i,displayId:0}),e.commit(U.SELECT_MESH_POINTS,n),e.commit(gmvc.GHistoryMutation.MERGE_END)})),e}}]),n}(Ff),nT=function(e){p(n,gmvc.GModule);var t=g(n);function n(){var e;l(this,n),e=t.call(this,"runtime");var r=new tT,i=new Zw;return e.addModule(r),e.addModule(i),e}return d(n,[{key:"mutations",get:function(){var e;return y(e={},b.TEST,(function(e,t){})),y(e,Y.LOAD_SUCCESS,(function(e,t){})),e}}]),n}(),rT=function(){function e(){l(this,e)}return d(e,null,[{key:"serverTime",get:function(){var t=Date.now();return e.baseServerTime+(t-e.baseLocalTime)}},{key:"syncServerTime",value:function(t){e.baseServerTime=t,e.baseLocalTime=Date.now()}},{key:"getUrl",value:function(t){return e.baseUrl+"/"+t}},{key:"$ajax",value:function(t){var n=t.type,r=t.url,i=t.contentType,a=t.dataType,o=t.successCallback,s=t.errorCallback,l=t.data,u=t.uuid,c=t.group,h=new XMLHttpRequest,d=r;if("get"===n&&l){var f="";for(var p in l){f+=p+"="+l[p]}d=r+"?"+f}h.open(n,d),("post"!==n||i)&&i&&h.setRequestHeader("Content-Type",i),u&&h.setRequestHeader("uuid",u),c&&h.setRequestHeader("-group-",c),h.responseType=a||"",h.onreadystatechange=function(){4===h.readyState&&(h.status>=200&&h.status<300||304===h.status?o&&o(h.response||h.responseText):s&&s(h.status,h.statusText))},i&&-1!==i.indexOf(e.AJAX_CONTENTTYPE_FORMDATA)?h.send(l):h.send("get"===n?null:l)}},{key:"$ajaxPromise",value:function(t){var n=t.successCallback,r=t.errorCallback;return new Promise((function(i,a){t.successCallback=function(e){n&&n(e),i(e)},t.errorCallback=function(e){r&&r(e),a(e)},e.$ajax(t)}))}},{key:"getUserData",value:function(t,n,r){var i={url:e.getUrl("getUserData"),type:"get",data:{uuid:t},successCallback:n,errorCallback:r};return e.$ajaxPromise(i)}},{key:"loadFile",value:function(t,n,r){var i={url:t,type:"get",dataType:"blob",successCallback:n,errorCallback:r};return e.$ajaxPromise(i)}},{key:"save",value:function(t,n,r,i){var a={url:e.getUrl("save"),type:"post",data:JSON.stringify({uuid:t,data:n}),contentType:"application/json",successCallback:r,errorCallback:i};return e.$ajaxPromise(a)}},{key:"getUserAssets",value:function(t,n,r){var i={url:e.getUrl("getUserAssets"),type:"get",data:{uuid:t},successCallback:n,errorCallback:r};return e.$ajaxPromise(i)}},{key:"base64ToBlob",value:function(e){var t;if("string"===typeof e){for(var n=e.split(","),r=n[0].match(/:(.*?);/)[1],i=atob(n[1]),a=i.length,o=new Uint8Array(a);a--;)o[a]=i.charCodeAt(a);t=new Blob([o],{type:r})}else t=new Blob([e]);return t}},{key:"base64ToFile",value:function(e,t){var n;if("string"===typeof e){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);n=new File([s],t,{type:i})}else(n=new Blob([e])).lastModifiedDate=new Date,n.name=t;return n}},{key:"uploadAssets",value:function(t,n,r,i,a){var o=new FormData;o.append("file",n);var s={url:e.getUrl("uploadAssets"),type:"post",uuid:t,group:r,data:o,successCallback:i,errorCallback:a};return e.$ajaxPromise(s)}}]),e}();rT.AJAX_CONTENTTYPE_FORMDATA="multipart/form-data;",rT.AJAX_OPTION_FILETYPE_PNG="image/png",rT.AJAX_OPTION_FILETYPE_JPG="image/jpeg",rT.baseUrl="",rT.baseServerTime=0,rT.baseLocalTime=0;var iT=function(){function e(){l(this,e)}return d(e,null,[{key:"getUserInfo",value:function(t,n,r){return new Promise((function(i,a){rT.getUserData(t,(function(t){var a=0;try{var o=JSON.parse(t);if(o.success){if(o.data&&o.data.data)try{var s=o.data.data;"string"===typeof s?e.serverDocumentData=JSON.parse(o.data.data):"object"===typeof s&&(e.serverDocumentData=o.data.data)}catch(Qp){}n&&n(),i(!0)}else a=1}catch(Qp){a=1}a>0&&(r&&r(a),i(!0))}),(function(e){r&&r(),i(!0)}))}))}},{key:"getNZDocument",value:function(e){return new Promise((function(t,n){Se.instance.getDocumentDataByName(e).then((function(e){if(e)try{var n=JSON.parse(e.data);t(n)}catch(Qp){t(void 0)}else t(void 0)}))}))}},{key:"getUserAssets",value:function(t){return e.userId=t,new Promise((function(e,t){var n;Se.instance.getAllFiles().then((function(t){t?(n=t,1):(n=void 0,-1),function(){var t={};if(n)if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++){var a=n[r];a&&(t[a.id]=a)}else for(var o in n){var s=n[o];s&&(t[o]=s)}e(t)}()}))}))}},{key:"checkServerData",value:function(e){var t,n=0;try{var r=JSON.parse(e);r.success?t=r:n=1}catch(Qp){n=1}return{errorCode:n,result:t}}},{key:"save",value:function(e,t,n,r){return new Promise((function(e,n){var i=0;function a(){var t=3;-1==i&&(t=2),mf.success("\u4fdd\u5b58\u6210\u529f"),e(t)}Se.instance.updateDocumentData(t,r).then((function(e){e?(i=1,a()):(i=-1,a())}))}))}},{key:"checkUploadLocalFile",value:function(t){for(var n in t){var r=t[n];!r||!r.data||r.url&&r.sid||e.waitToUploadFileArr.push(r)}}},{key:"uploadFileToServer",value:function(e){return new Promise((function(t,n){Se.instance.addFile(e.name,e.type,e.data,e.url).then((function(r){r?(e.id=r,t(e)):n()}))}))}}]),e}();iT.serverDocumentData=void 0,iT.waitToUploadFileArr=[],iT.waitAssetFileChange=[],iT.uploading=void 0,iT.userId=void 0;var aT=function(e){p(n,gmvc.GModule);var t=g(n);function n(){return l(this,n),t.call(this,"user")}return d(n,[{key:"mutations",get:function(){var e;return y(e={},b.TEST,(function(e,t){})),y(e,Y.CHANGE_NAME,(function(e,t){e.name=t})),y(e,Y.USER_LOGIN_SUCCESS,(function(e,t){e.uuid=t})),y(e,Y.GET_USER_INFO_SUCCESS,(function(e){})),y(e,Y.GET_USER_ASSETS_SUCCESS,(function(e){})),y(e,Y.LOAD_SUCCESS,(function(e){})),e}},{key:"actions",get:function(){var e,t=this;return y(e={},Y.USER_LOGIN,(function(e,n){return new Promise((function(e,n){Se.instance.getUserData().then((function(n){var r=n.uuid;t.commit(Y.USER_LOGIN_SUCCESS,r),e(r)}))}))})),y(e,Y.GET_USER_INFO,(function(e,n){var r=e.rootState.user.uuid;return iT.getUserInfo(r,(function(){t.commit(Y.GET_USER_INFO_SUCCESS)}),(function(){t.commit(Y.GET_USER_INFO_SUCCESS)}))})),y(e,Y.GET_USER_ASSETS,(function(e){var n=e.rootState.user.uuid;return iT.getUserAssets(n).then((function(e){t.commit(Y.GET_USER_ASSETS_SUCCESS,e)}))})),y(e,Y.LOAD,(function(e){return iT.getNZDocument("dragonbones-web").then((function(e){t.commit(Y.LOAD_SUCCESS,e)})).catch((function(){t.commit(Y.LOAD_SUCCESS,void 0)}))})),e}}]),n}(),oT=function(e){p(n,gmvc.GStore);var t=g(n);function n(){var e;l(this,n),(e=t.call(this)).history=void 0,n._instance=m(e);var r=new eT,i=new nT,a=new aT,o=new jf,s=new gmvc.GHistory(m(e),i.name);return e.history=s,e.initHistory(),e.addModule(s),e.addModule(r),e.addModule(i),e.addModule(a),e.addModule(o),e.state=ge(de),e.init(),e}return d(n,[{key:"initHistory",value:function(){this.history.undoMutation=[z.SELECT_BONES]}},{key:"historyBeginMerge",value:function(e){this.commit(gmvc.GHistoryMutation.MERGE_START,{name:e||"autoMerge"})}},{key:"historyEndMerge",value:function(e){this.commit(gmvc.GHistoryMutation.MERGE_END,{name:e})}},{key:"getHistoryMergeName",value:function(){return this.history.curMergeName}},{key:"getId",value:function(){return++this.state.editor.idGen}},{key:"getSlotById",value:function(e){var t=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[t].slots.map[e]}},{key:"getSelectedSlots",value:function(){var e=this.state.runtime.editing.selectedSlotIds,t=[];if(e&&e.length)for(var n=0,r=e.length;n<r;n++){var i=e[n],a=this.getSlotById(i);a&&t.push(a)}return t}},{key:"getSelectedDisplay",value:function(){var e=this.state.runtime.editing.selectedSlotIds,t=this.state.runtime.editing.editMode;if(e&&1===e.length){var n=e[0],r=this.getSlotById(n);if(r.displayIndex>=0)return Qw.getSlotCurDisplay(r,t)}}},{key:"getBoneById",value:function(e){var t=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[t].bones.map[e]}},{key:"getSelectedBones",value:function(){var e=this.state.runtime.editing.selectedBoneIds,t=[];if(e&&e.length)for(var n=0,r=e.length;n<r;n++){var i=e[n],a=this.getBoneById(i);a&&t.push(a)}return t}},{key:"getCurArmature",value:function(){var e=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[e]}},{key:"getCurArmatureCurAnimation",value:function(){var e=this.getCurArmature();return this.getCurAnimation(e)}},{key:"getCurAnimation",value:function(e){var t=this.state.runtime.editing.selectedAnimationId,n=this.state.runtime.dragonbones.animationMap;if(e&&e.animations)for(var r=0,i=e.animations.length;r<i;r++){var a=e.animations[r];if(t===a)return n[a]}}},{key:"getDefaultAnimation",value:function(e){if(e.animations&&e.animations.length){var t=e.animations[0];return this.state.runtime.dragonbones.animationMap[t]}}},{key:"getSaveData",value:function(e){var t=ge({editor:e.editor,runtime:e.runtime,history:e.history});return JSON.stringify(t)}},{key:"getAnimationDuration",value:function(){var e=this.getCurArmature();if(e){var t=this.getCurAnimation(e);if(t)return Bf.getAnimationDuration(t)}return[-1,-1]}},{key:"getAssetById",value:function(e){var t=this.state.runtime.dragonbones.assetMap[e];if(t)return t;for(var r in this.state.runtime.dragonbones.assetMap){var i=this.state.runtime.dragonbones.assetMap[r];if(i.children&&i.children.length)for(var a=0,o=i.children.length;a<o;a++){var s=i.children[a];if(s.id===e)return s}}return n.missingAsset}},{key:"dopesheetConfig",get:function(){return this.state.config.timeline}},{key:"dopesheetData",get:function(){return this.state.editor.dopesheet}},{key:"curFrame",get:function(){return this.state.editor.dopesheet.curTime}},{key:"getPlayHeadX",value:function(){var e=this.state.editor.dopesheet.curTime;return this.getXFromFrame(e)}},{key:"getXFromFrame",value:function(e){var t=this.state.config.timeline.FIRST_X,n=this.state.editor.dopesheet,r=n.offset;return n.curGap/n.scaleLevel*e+t-r}},{key:"getAnimationLength",value:function(e){return-1}},{key:"getFramePerLength",value:function(){var e=this.state.editor.dopesheet,t=e.curGap;return e.scaleLevel/t}},{key:"getLengthPerFrame",value:function(){var e=this.state.editor.dopesheet;return e.curGap/e.scaleLevel}},{key:"getFrameFromX",value:function(e){var t=this.state.config.timeline.FIRST_X,n=this.state.editor.dopesheet,r=n.offset,i=n.curGap;return(e+r-t)*n.scaleLevel/i}},{key:"getAnimationById",value:function(e){}},{key:"overFrameIds",get:function(){return this.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.state.runtime.editing.selectedFrameIds}},{key:"checkDataCompleted",value:function(){var e=this.state.runtime.dragonbones.armatureMap;for(var t in e){var n=e[t];Qw.updateGlobalTransform(n)}}},{key:"mutations",get:function(){var e,t=this;return y(e={},b.TEST,(function(e){})),y(e,_.SAVE_LAYOUT,(function(e){})),y(e,_.SAVE,(function(e,n){var r=e.user.uuid||"",i=e;if(i){var a=i.runtime.dragonbones.name,o=i.editor.lastModify;if(o!==i.editor.saveTime||!!n){t.commit(_.SAVE_LAYOUT,{});var s=t.getSaveData(i);iT.save(r,a,o,s).then((function(e){t.commit(Y.SAVE_SUCCESS)})).catch((function(){}))}}})),y(e,Y.SAVE_SUCCESS,(function(e,t){})),e}},{key:"actions",get:function(){var e=this;return y({},b.TOOLBAR_COMMAND,(function(t,n){"ACTION"===n.trigger?e.dispatch(n.action,n.data):n.action===W.SWITCH_MODE?e.dispatch(W.SWITCH_MODE,n.data):e.commit(n.action,n.data)}))}}],[{key:"instances",get:function(){return n._instance}},{key:"getXFromFrame",value:function(e){return n._instance.getXFromFrame(e)}},{key:"dopesheetConfig",get:function(){return n._instance.state.config.timeline}},{key:"getAnimationLength",value:function(e){return n._instance.getAnimationLength(e)}},{key:"getAnimationById",value:function(e){return n._instance.getAnimationById(e)}},{key:"getLengthPerFrame",value:function(){return n._instance.getLengthPerFrame()}},{key:"getArrayFromMap",value:function(e){for(var t=[],n=0,r=e.ids.length;n<r;n++){var i=e.ids[n],a=e.map[i];if(!a)throw new Error("can not find id:".concat(i," in map ").concat(e.map));t.push(a)}return t}},{key:"getCurrentArmature",value:function(e){var t=e.runtime.editing.editingArmatureId;return e.runtime.dragonbones.armatureMap[t]}},{key:"getArmatureDefaultAnimation",value:function(e,t){var n=e.runtime.dragonbones,r=t.animations[0];return n.animationMap[r]}},{key:"hasAnimation",value:function(e,t){return!(!e||!e.animations)&&-1!==e.animations.indexOf(t)}},{key:"getDefaultAnimationId",value:function(e){if(e.animations&&e.animations.length)return e.animations[0]}},{key:"createName",value:function(e,t,n){if(!this.checkNameConflict(e,t,n))return e;for(var r=["0","1","2","3","4","5","6","7","8","9"],i="",a=e.length-1;a>=0;a--){var o=e.charAt(a);r.indexOf(o)>=0&&(i=o+i)}var s=1;""!==i&&(s=parseInt(i)),s<=0&&(s=1);for(var l=e+s;this.checkNameConflict(l,t,n);)l=e+ ++s;return l}},{key:"checkNameConflict",value:function(e,t,n){if(n&&0!==n.length)for(var r=0,i=n.length;r<i;r++){var a=t[n[r]];if(a&&a.name===e)return!0}else for(var o in t){var s=t[o];if(s&&s.name===e)return!0}return!1}}]),n}();oT._instance=void 0,oT.missingAsset={fileIds:[],id:0,type:x.MISSING_IMAGE,name:"missing"};var sT=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){oT.instances.checkDataCompleted()}}]),n}(),lT=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=oT.instances.history,t=[V.SELECT_BONES,V.UPDATE_LOCAL_TRANSFORMS,V.UPDATE_PROPERTIES,V.ADD_BONE,V.SET_PARENT,V.ADD_IK,V.DELETE_IKS,V.UPDATE_IK,V.DELETE_BONES,V.UPDATE_CACHE_IK,V.UPDATE_CACHE_TRANSFORMS,F.SELECT_SLOTS,F.UPDATE_LOCAL_TRANSFORMS,F.UPDATE_PROPERTIES,F.SET_PARENT,F.DELETE_SLOTS,F.UPDATE_CACHE_PROPERTIES,H.SELECT_DISPLAY,H.UPDATE_PROPERTIES,H.SET_PARENT,U.SELECT_MESH_POINTS,U.UPDATE_MESH,U.UPDATE_RIG_BONE,N.UPDATE_PROPERTIES,N.ADD_ARMATURES,N.SELECT_ARMATURE,G.CHANGE_BONE_SLOT_CONTROL,G.SWITCH_TOOL,G.UPDATE_MESH_TOOL,G.SET_DEFAULT_TOOLTIP_TOP,G.SELECT_RIGGING_BONE,G.SWITCH_MODE,P.AUTO_KEY,P.DELETE_FRAMES,P.SELECT_ANIMATION,P.ADD_ANIMATION,P.MODIFY_FRAMES,P.REMOVE_ANIMATION];e.undoMutation=t,e.mustSendMutation=[],oT.instances.commit(gmvc.GHistoryMutation.ENABLE)}}]),n}(),uT=function(){function e(){l(this,e)}return d(e,null,[{key:"decode",value:function(t){var n=t.slice(0,1);if(111===new Int8Array(n)[0]){for(var r=0,i=new Int8Array(t.byteLength-1),a=new Int8Array(t),o=1;o<t.byteLength;o++,r++)r>=e.KEY.length&&(r=0),i[o-1]=a[o]-e.KEY.charCodeAt(r);if(window.amf)return new window.amf.Reader(i).readObject()}}}]),e}();uT.KEY="DRAGONBONES_IS_BEST";var cT=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],hT=a.forwardRef((function(e,t){var n=e.className,r=e.component,i=e.viewBox,o=e.spin,s=e.rotate,l=e.tabIndex,u=e.onClick,c=e.children,h=Wn(e,cT);bs(Boolean(r||c),"Should have `component` prop or `children`."),ks();var d=a.useContext(Gn),f=d.prefixCls,p=void 0===f?"anticon":f,v=d.rootClassName,m=Wa()(v,p,n),g=Wa()(y({},"".concat(p,"-spin"),!!o)),b=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,_=Pe(Pe({},Ss),{},{className:g,style:b,viewBox:i});i||delete _.viewBox;var x=l;return void 0===x&&u&&(x=-1),a.createElement("span",Pe(Pe({role:"img"},h),{},{ref:t,tabIndex:x,onClick:u,className:m}),r?a.createElement(r,Pe({},_),c):c?(bs(Boolean(i)||1===a.Children.count(c)&&a.isValidElement(c)&&"use"===a.Children.only(c).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),a.createElement("svg",Pe(Pe({},_),{},{viewBox:i}),c)):null)}));hT.displayName="AntdIcon";var dT=hT,fT=["type","children"],pT=new Set;function vT(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e[n];if(t=r,Boolean("string"===typeof t&&t.length&&!pT.has(t))){var i=document.createElement("script");i.setAttribute("src",r),i.setAttribute("data-namespace",r),e.length>n+1&&(i.onload=function(){vT(e,n+1)},i.onerror=function(){vT(e,n+1)}),pT.add(r),document.body.appendChild(i)}}var mT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,r=void 0===n?{}:n;t&&"undefined"!==typeof document&&"undefined"!==typeof window&&"function"===typeof document.createElement&&(Array.isArray(t)?vT(t.reverse()):vT([t]));var i=a.forwardRef((function(e,t){var n=e.type,i=e.children,o=Wn(e,fT),s=null;return e.type&&(s=a.createElement("use",{xlinkHref:"#".concat(n)})),i&&(s=i),a.createElement(dT,Pe(Pe(Pe({},r),o),{},{ref:t}),s)}));return i.displayName="Iconfont",i}({scriptUrl:"./libs/icon.js"}),gT=void 0,yT=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).refs=void 0,r._treeData=[],r.onClickFolder=function(e,t){t.stopPropagation();var n=parseInt(t.currentTarget.getAttribute("id")),i=r.state.openIds.concat(),a=i.indexOf(n);a<0?i.push(n):i.splice(a,1),r.setState({openIds:i})},r.onItemOver=function(e){r.props.onItemOver&&r.props.onItemOver(e)},r.onItemOut=function(e){r.props.onItemOut&&r.props.onItemOut(e)},r.onItemSelect=function(e){r.props.onlyView||r.props.onItemSelect&&r.props.onItemSelect(e)};var i=e.openIds||[];return e.openAll&&(i=r.allItemIds),r.state={openIds:i,openAll:e.openAll,propsOpenIds:e.openIds,propsSelectedIds:e.selectedIds||[],isSelectChange:!1},r}return d(n,[{key:"treeData",get:function(){this._treeData||(this._treeData=[]);var e=this.props.value;if(e){this._treeData.length=0;for(var t=0,n=e.length;t<n;t++){var r=e[t],i=this.getShowItemTree(r,0);this._treeData=this._treeData.concat(i)}return this._treeData}return[]}},{key:"allItemIds",get:function(){return n.getAllItemIds(this.props.value)}},{key:"getShowItemTree",value:function(e,t){var n=[];if(e.deep=t,n.push(e),this.isOpen(e)&&e.children)for(var r=0,i=e.children.length||0;r<i;r++){var a=this.getShowItemTree(e.children[r],t+1);n=n.concat(a)}return n}},{key:"render",value:function(){var e=[];if(this.props.value)for(var t=this.treeData,n=0,r=t.length;n<r;n++){var i=t[n];e.push(this.renderItem(i,n))}return(0,hf.jsx)("div",{className:"v-tree",ref:"vTree",children:e})}},{key:"componentDidUpdate",value:function(e,t,n){if(this.state.isSelectChange){var r=0;if(this.props.selectedIds&&this.props.selectedIds.length&&(r=this.props.selectedIds[0]),r){var i=this.refs.vTree.querySelector('.v-tree-item[id="'.concat(r,'"]'));if(i){var a=i.getBoundingClientRect(),o=this.refs.vTree.getBoundingClientRect();(a.top<o.top||a.bottom>o.bottom)&&(this.refs.vTree.scrollTop=a.top-o.top)}}}}},{key:"renderItem",value:function(e,t){var n=this.props.children,r=null;"function"==typeof n&&(r=n(e));var i=this.renderFolderIcon(e,this.onClickFolder);return(0,hf.jsx)(bT,{index:t,itemData:e,folderIcon:i,onClickFolder:this.onClickFolder,onItemOver:this.onItemOver,onItemOut:this.onItemOut,onItemSelect:this.onItemSelect,item:r,foldByIcon:this.props.foldByIcon,gap:this.props.gap},t)}},{key:"renderFolderIcon",value:function(e,t){if(e&&(e.children&&e.children.length||e.isFolder)){var n=this.isOpen(e)?"icon-arrow-down-filling":"icon-arrow-right-filling";return(0,hf.jsx)(mT,{type:n,id:e.id,onClick:t.bind(this,e)})}return(0,hf.jsx)("div",{className:this.props.hideFolderClassName||"hide-folder"})}},{key:"isFolder",value:function(e){return e&&e.children}},{key:"isOpen",value:function(e){return e&&e.children&&this.state.openIds.indexOf(e.id)>=0}},{key:"openItem",value:function(e,t){if(this.isFolder(e)&&(t.includes(e.id)||t.push(e.id)),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.openItem(i,t)}}}],[{key:"getItemsPathIds",value:function(e,t){var n=[];if(t&&t.length){for(var r=0,i=t.length;r<i;r++){var a=t[r],o=this.getItemPathIds(e,a,[]);o&&(n=n.concat(o))}n=Array.from(new Set(n))}return n}},{key:"getItemPathIds",value:function(e,t,n){for(var r=0,i=e.length;r<i;r++){var a=e[r];if(a.id===t)return n.push(t),n;if(a.children){if(n.push(a.id),this.getItemPathIds(a.children,t,n))return n;n.pop()}}return!1}},{key:"getAllItemIds",value:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.getItemIds(i,t)}return t}},{key:"getItemIds",value:function(e,t){if(t.push(e.id),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.getItemIds(i,t)}}},{key:"getDerivedStateFromProps",value:function(e,t){if(e.openAll!==t.openAll){if(!e.openAll)return{openIds:[],openAll:e.openAll,propsOpenIds:e.openIds};var r=e.value;if(r)return{openIds:n.getAllItemIds(r),openAll:e.openAll,propsOpenIds:e.openIds}}else if(e.openIds!==t.propsOpenIds)return{openIds:e.openIds,propsOpenIds:e.openIds};if(e.selectedIds!==t.propsSelectedIds){var i=n.getItemsPathIds(e.value,e.selectedIds),a=t.openIds.concat(i);return a=Array.from(new Set(a)),{propsSelectedIds:e.selectedIds,openIds:a,isSelectChange:!0}}return t.isSelectChange?{isSelectChange:!1}:null}}]),n}(a.Component),bT=function(e){var t=e.index,n=e.itemData,r=e.onItemOut,i=e.onItemOver,a=e.onClickFolder,o=e.folderIcon,s=e.item,l=e.onItemSelect,u=e.foldByIcon,c=e.gap;return(0,hf.jsxs)("div",{className:"v-tree-item",id:n.id,style:{display:"flex"},onMouseOver:i.bind(gT,n),onMouseOut:r.bind(gT,n),onClick:n.children?u?l.bind(gT,n):a.bind(gT,n):l.bind(gT,n),children:[(0,hf.jsx)("div",{style:{width:"".concat((c||20)*n.deep,"px")}}),o,s]},t)},_T=function(e){p(n,gboxLayout.GPanel);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).label=void 0,r.icon=void 0,r.componentClass=void 0,r.store=void 0,r.eventBus=void 0,r.labelRoot=void 0,r.componentRoot=void 0,r.label=e.label,r.icon=e.icon,r.type=void 0===e.type?gboxLayout.GPanelType.TAB:e.type,r.componentClass=e.componentClass,r.store=y2.instance.store,r.eventBus=y2.instance.eventBus,r}return d(n,[{key:"renderLabel",value:function(){null==this.labelElement&&(this.labelElement=document.createElement("span"));var e=(0,hf.jsxs)("div",{children:[(0,hf.jsx)(mT,{type:this.icon}),this.label]});this.labelRoot||(this.labelRoot=(0,s.createRoot)(this.labelElement)),this.labelRoot.render(e)}},{key:"renderElement",value:function(){null==this.contentElement&&(this.contentElement=document.createElement("div"),this.contentElement.style.height="100%"),null==this.toolBarElement&&(this.toolBarElement=document.createElement("div"));var e=this.componentClass;this.componentRoot||(this.componentRoot=(0,s.createRoot)(this.contentElement)),this.componentRoot.render((0,hf.jsx)(e,{store:y2.instance.store,eventBus:y2.instance.eventBus}))}}]),n}(),xT=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:wT,label:"\u5e93",icon:"icon-bx-library"})}return d(n)}(_T),ET=function(e){return e[e.IMAGE=0]="IMAGE",e[e.SPRITE_SHEET=1]="SPRITE_SHEET",e[e.ARMATURE=2]="ARMATURE",e}(ET||{}),wT=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).refs={},r.onListChange=function(e){r.refresh()},r.onItemOut=function(e){r.showPreview(-1)},r.onItemOver=function(e){r.showPreview(e.id)},r.onDragOver=function(e){e.stopPropagation(),e.preventDefault()},r.onDrop=function(e){if(!r.state.disabled&&(e.stopPropagation(),e.preventDefault(),e&&e.dataTransfer&&e.dataTransfer.files)){var t=e.dataTransfer.files;r.uploadFiles(t)}},r.state={assets:r.getAllAsset(),disabled:!1},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on(R.ADD_ASSET,this.refresh,this),this.props.eventBus.on(N.ADD_ARMATURES,this.refresh,this),this.props.eventBus.on(N.DELETE_ARMATURES,this.refresh,this),this.props.eventBus.on(K.SELECT_ARMATURE,this.selectArmature,this),this.props.eventBus.on(N.UPDATE_PROPERTIES,this.refresh,this),this.props.eventBus.on(G.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"selectArmature",value:function(e){this.props.store.commit(N.SELECT_ARMATURE,{armatureId:e.data.id})}},{key:"refresh",value:function(){this.setState({assets:this.getAllAsset()})}},{key:"getAllAsset",value:function(){var e=[{id:ET.IMAGE,name:"\u56fe\u7247",children:[],isFolder:!0},{id:ET.SPRITE_SHEET,name:"\u7cbe\u7075\u56fe",children:[],isFolder:!0},{id:ET.ARMATURE,name:"\u9aa8\u67b6",children:[],isFolder:!0}],t=this.props.store.state.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r)switch(r.type){case x.PNG:case x.JPG:case x.JPEG:case x.SVG:e[ET.IMAGE].children||(e[ET.IMAGE].children=[]),e[ET.IMAGE].children.push({id:r.id,name:r.name,data:r});break;case x.SPRITE_SHEET:e[ET.SPRITE_SHEET].children||(e[ET.SPRITE_SHEET].children=[]),e[ET.SPRITE_SHEET].children.push({id:r.id,name:r.name,data:r,children:r.children})}}var i=this.props.store.state.runtime.dragonbones.armatureMap;for(var a in i){var o=i[a];if(o){e[ET.ARMATURE].children||(e[ET.ARMATURE].children=[]);var s=[];if(o.skins)for(var l in o.skins.map){var u=o.skins.map[l];u&&s.push({id:u.id,name:u.name})}var c={id:o.id,name:o.name,data:{assetType:ET.ARMATURE,type:"armature"}};s.length>1&&(c.children=s),e[ET.ARMATURE].children.push(c)}}return e}},{key:"render",value:function(){for(var e=this,t=this.state.assets,n=!1,r=0,i=0,a=t.length;i<a;i++){var o=t[i];if(o.children&&o.children.length&&(r+=o.children.length)>5){n=!0;break}}return(0,hf.jsxs)("div",{className:"library"+(this.state.disabled?" panel-disabled":""),onDrop:this.onDrop,children:[(0,hf.jsxs)("div",{className:"preview",ref:"previewDiv",children:[(0,hf.jsx)("img",{src:"",ref:"preview"}),(0,hf.jsx)("audio",{src:"",ref:"previewAudio"}),(0,hf.jsx)("div",{ref:"previewSheet"})]}),(0,hf.jsx)(yT,{value:t,openAll:!0,onItemOut:this.onItemOut,onItemOver:this.onItemOver,hideFolderClassName:"no-folder",onlyView:this.state.disabled,children:function(t){return(0,hf.jsx)(TT,{data:t,store:e.props.store,eventBus:e.props.eventBus,disabled:e.state.disabled})}}),!n&&(0,hf.jsx)("div",{className:"empty-tip",children:"\u53ef\u62d6\u62fdpng\uff0cjpg\uff0cjson\uff0cdbproj\u683c\u5f0f\u7684\u6587\u4ef6\u5230\u8fd9\u91cc\uff0c\u6765\u5bfc\u5165\u56fe\u7247\uff0c\u7eb9\u7406\u96c6\uff0c\u548c\u9f99\u9aa8\u6570\u636e"})]})}},{key:"componentDidMount",value:function(){}},{key:"getIcon",value:function(e){if(!e.children)return(0,hf.jsx)(mT,{type:"icon-code"})}},{key:"onDragStart",value:function(e){}},{key:"getItemDataById",value:function(e){var t=this.props.store.state.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r&&r.id===e)return r;if(r.children)for(var i=0,a=r.children.length;i<a;i++){var o=r.children[i];if(o&&o.id===e)return o}}}},{key:"getFileById",value:function(e){return this.props.store.state.library.files[e]}},{key:"showPreview",value:function(e){var t="",n=this.refs.preview,r=this.refs.previewSheet,i=this.refs.previewAudio;n&&(n.src=t,n.style.display="none"),r&&(r.style.display="none"),i.src=t;var a=this.getItemDataById(e);if(a&&a.fileIds[0])switch(a.type){case x.PNG:case x.SVG:case x.JPG:case x.JPEG:var o=this.getFileById(a.fileIds[0]);o&&(o.url?t=o.url:o.data&&(t=o.data));var s=this.refs.preview;s.src=t,s.style.display="";break;case x.MP3:var l=this.getFileById(a.fileIds[0]);l&&(l.url?t=l.url:l.data&&(t=l.data));var u=this.refs.previewAudio;u.src=t;var c=u.play();void 0!==c&&c.then((function(e){})).catch((function(e){}));break;case x.SPRITE_SHEET:var h=this.getFileById(a.fileIds[1]);h&&(h.url?t=h.url:h.data&&(t=h.data));var d=this.refs.preview;d.src=t,d.style.display="";break;case x.SUB_TEXTURE:var f,p,v=this.getFileById(a.fileIds[1]);v&&(v.url?t=v.url:v.data&&(t=v.data));var m=this.refs.previewSheet,g=(null===(f=m.parentElement)||void 0===f?void 0:f.clientWidth)||100,y=(null===(p=m.parentElement)||void 0===p?void 0:p.clientHeight)||100,b=g/a.data.width,_=y/a.data.height,E=Math.min(b,_,1);m.style.backgroundImage="url(".concat(v.data,")"),m.style.width="".concat(a.data.width,"px"),m.style.height="".concat(a.data.height,"px"),m.style.backgroundPositionX="-".concat(a.data.x,"px"),m.style.backgroundPositionY="-".concat(a.data.y,"px"),m.style.position="relative",m.style.scale=E+"",m.style.display=""}}},{key:"supportFile",value:function(e){var t=It(e.name.split("."),2),n=(t[0],t[1]);return!!["json","png","jpg","jpeg","dbproj"].includes(n)}},{key:"supportFileAndType",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=It(t.name.split("."),2),i=(r[0],r[1]);if(["json","png","jpg","jpeg","dbproj"].includes(i)){if(t){if("dbproj"===i)return void e("dragonboneProj");t.name;var a=new FileReader;a.onloadend=function(n){if(n&&n.target&&n.target.result){var r=n.target.result,i=t.type.split("/");switch(i[0]){case"image":e("image");break;case"application":if("json"===i[1]){var a=r.split("base64,")[1],o=window.atob(a),s=JSON.parse(o);s&&(s.SubTexture&&s.name&&s.imagePath?e("spritesheet"):zf.isDragonbonesJson(s)?e("dragonboneJson"):e("unknown"))}break;default:e("unknown")}}},a.readAsDataURL(t)}}else e("unknown")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isDBPROJ",value:function(e){var t=It(e.name.split("."),2);t[0];return"dbproj"===t[1]}},{key:"uploadFiles",value:function(){var e=_e(ye().mark((function e(t){var n,r,i,a,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.length){e.next=30;break}n=[],r=0,i=t.length;case 3:if(!(r<i)){e.next=12;break}return e.next=6,this.supportFileAndType(t[r]);case 6:"unknown"===(a=e.sent)&&mf.warn("\u4e0d\u652f\u6301\u7684\u6587\u4ef6"),"dragonboneJson"===a||"dragonboneProj"===a?n.push(t[r]):n.unshift(t[r]);case 9:r++,e.next=3;break;case 12:o=0,s=n.length;case 13:if(!(o<s)){e.next=30;break}if(e.prev=14,!this.isDBPROJ(n[o])){e.next=20;break}return e.next=18,this.importDBProj(n[o]);case 18:e.next=22;break;case 20:return e.next=22,this.uploadFile(n[o]);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14);case 27:o++,e.next=13;break;case 30:case"end":return e.stop()}}),e,this,[[14,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"importDBProj",value:function(){var e=_e(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t){var i=new FileReader;i.onloadend=function(e){if(e&&e.target&&e.target.result){var t=e.target.result,r=uT.decode(t);n.props.store.dispatch(M.LOAD_DRAGON_BONES_DATA,r)}},i.readAsArrayBuffer(t)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"importJsonDBData",value:function(e,t){this.props.store.dispatch(M.LOAD_DRAGON_BONES_JSON_DATA,{data:e,version:t})}},{key:"importJson",value:function(){var e=_e(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{var i=t.data,a=JSON.parse(i);a&&(a.SubTexture&&a.name&&a.imagePath?n.uploadFileToServe(n.props.store,t).then((function(){e(t)})):zf.isDragonbonesJson(a)?(n.importJsonDBData(a,a.version),e(a)):(mf.warn("\u4e0d\u652f\u6301\u7684\u6587\u4ef6"),e("unkonwn")))}catch(o){r(o)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=_e(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t){var i=t.name,a=new FileReader;a.onloadend=function(a){if(a&&a.target&&a.target.result){var o=a.target.result,s=t.type.split("/");switch(s[0]){case"audio":case"image":var l={name:i,type:s[1].toLowerCase(),data:o};n.uploadFileToServe(n.props.store,l).then((function(){e(l)}));break;case"application":if("json"===s[1]){var u=o.split("base64,")[1],c=window.atob(u),h={name:i,type:s[1].toLowerCase(),data:c};n.importJson(h).then((function(){e(h)}))}break;default:r("\u4e0d\u652f\u6301\u7684\u6587\u4ef6".concat(s[0]))}}},a.readAsDataURL(t)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetNameByFileName",value:function(e){var t=It(e.split("."),2),n=t[0];t[1];return n}},{key:"uploadFileToServe",value:function(){var e=_e(ye().mark((function e(t,n){var r=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){iT.uploadFileToServer(n).then((function(a){if(a){t.commit(b.UPLOAD_FILE,a);var o={id:t.getId(),name:r.getAssetNameByFileName(a.name),fileIds:[a.id],type:a.type,data:a.data};"mpeg"===n.type&&(o.type=x.MP3),t.dispatch(M.ADD_FILE,o),e(a)}else i()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(a.Component),TT=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).refs={},e.getIcon=function(e){if(!e.children){if("subTexture"===e.type)return(0,hf.jsx)(mT,{type:"icon-picture1"});if(e.data&&e.data.type){if("png"===e.data.type||"jpg"===e.data.type||"jpeg"===e.data.type)return(0,hf.jsx)(mT,{type:"icon-picture"});if("armature"===e.data.type)return(0,hf.jsx)(mT,{type:"icon-man1"})}return(0,hf.jsx)(mT,{type:"unknown"})}},e.onDoubleClick=function(t){var n;if(!e.props.disabled){var r=e.props.data;(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.assetType)===ET.ARMATURE&&e.props.eventBus.dispatchEventWidth(K.SELECT_ARMATURE,r)}},e.onDragStart=function(t){if(!e.props.disabled){var n=e.props.data,r=e.props.data.data;if(r){var i=n;if(r.type===A.MOVIECLIP);else{var a=t.dataTransfer,o=It(e.getFileDataById(n.id),2),s=o[0],l=o[1];if(s)if(l){var u=document.createElement("div"),c=l.data.width,h=l.data.height;u.style.backgroundImage="url(".concat(s.data,")"),u.style.width="".concat(l.data.width,"px"),u.style.height="".concat(l.data.height,"px"),u.style.backgroundPositionX="-".concat(l.data.x,"px"),u.style.backgroundPositionY="-".concat(l.data.y,"px"),a.setData("size",{width:c,height:h}),a.setDragImage(u,.5*c,.5*h)}else{var d=document.createElement("img");d.src=s.url||s.data;var f=d.width,p=d.height;a.setData("size",{width:f,height:p}),a.setDragImage(d,.5*f,.5*p)}}i&&t.dataTransfer.setData("dropToScene",i)}}},e.onDragEnter=function(t){if(!e.props.disabled){var n=t.dataTransfer;if(n){var r=t.dataTransfer.target;if(n.getData("size"))if(r&&r.parentElement&&"stage"===r.parentElement.className){var i=e.getCameraScale();n.setDragScale(i),n.setDragAlpha(.5)}else{n.setDragScale(1),n.setDragAlpha(1)}}}},e}return d(n,[{key:"render",value:function(){var e=this.props.data;return(0,hf.jsxs)("div",{className:"library-item",ref:"libraryItem","data-draggable":!this.props.disabled&&!e.children&&e.data!==ET.ARMATURE,onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,children:[this.getIcon(e),(0,hf.jsx)("div",{children:e.name})]})}},{key:"getCameraScale",value:function(){return this.props.store.state.editor.stage.scale}},{key:"getFileDataById",value:function(e){var t=this.props.store.state.library.files,n=this.props.store.state.runtime.dragonbones.assetMap;for(var r in n){var i=n[r];if(i&&i.id===e)return[t[i.fileIds[0]],null];if(i.children)for(var a=0,o=i.children.length;a<o;a++){var s=i.children[a];if(s.id===e)return[t[i.fileIds[1]],s]}}return[null,null]}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.libraryItem)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.libraryItem)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.libraryItem)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),ST=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._data=void 0,e._over=!1,e._selected=!1,e._ik=!1,e._ikTarget=!1,e._selectedIk=!1,e._color=void 0,e._selectedRiggingBoneId=0,e}return d(n,[{key:"data",get:function(){return this._data},set:function(e){if(this._data=e,this.clear(),e){this.refresh();var t=e.globalTransform;t||(t=e.transform),this.x=t.x,this.y=t.y,this.scale.set(t.scaleX,t.scaleY),this.skew.set(-t.skewX,t.skewY)}}},{key:"setColor",value:function(e){this._color!==e&&(this._color=e)}},{key:"color",set:function(e){this._color!==e&&(this._color=e,this.refresh())}},{key:"over",set:function(e){this._over!==e&&(this._over=e,this.refresh())}},{key:"selected",set:function(e){this._selected!==e&&(this._selected=e,this.refresh())}},{key:"setIk",value:function(e){this._ik!==e&&(this._ik=e)}},{key:"ik",set:function(e){this._ik!==e&&(this._ik=e,this.refresh())}},{key:"setIkTarget",value:function(e){this._ikTarget!==e&&(this._ikTarget=e)}},{key:"ikTarget",set:function(e){this._ikTarget!==e&&(this._ikTarget=e,this.refresh())}},{key:"setSelectedIk",value:function(e){this._selectedIk!==e&&(this._selectedIk=e)}},{key:"selectedIk",set:function(e){this._selectedIk!==e&&(this._selectedIk=e,this.refresh())}},{key:"selectedRiggingBoneId",set:function(e){this._selectedRiggingBoneId!==e&&(this._selectedRiggingBoneId=e,this.refresh())}},{key:"clearData",value:function(){this._data=void 0,this._ik=!1,this._ikTarget=!1,this._selectedIk=!1,this._over=!1,this._selected=!1,this._color=void 0}},{key:"drawIK",value:function(){if(this._data&&this._data.ikTransform){var e=this._data.ikGlobalTransform,t=this._data.globalTransform,n=this._data.fkGlobalTransform;Lf.transformEqual(e,t)||this.drawIKLine(e,t,Uf.BONE_IK_LINE),Lf.transformEqual(n,t)||this.drawIKLine(n,t,Uf.BONE_FK_LINE)}}},{key:"drawIKLine",value:function(e,t,n){var r=Lf.transformInvertCross(t,e),i=r.x,a=r.y,o=Lf.transformApplyPoint(r,{y:0,x:this._data.length});this.lineStyle(1,n),this.moveTo(i,a),this.lineTo(o.x,o.y)}},{key:"refresh",value:function(){var e;if(this.clear(),this._data){var t,n=1,r=this._color||Uf.BONE_FILL_UP,i=Uf.BONE_FILL_UP;if(this._selectedRiggingBoneId)n=.5,this._selectedRiggingBoneId===(null===(t=this._data)||void 0===t?void 0:t.id)&&(n=1);this._selected&&this._over?r=Uf.BONE_FILL_DOWN_OVER:this._selected?r=Uf.BONE_FILL_DOWN:this._over&&(r=Uf.BONE_FILL_OVER),i=r,this._ik&&(n=.1),this._ikTarget&&(i=Uf.BONE_FILL_IK),this.lineStyle(1,i,1,0),this.beginFill(0,.1),this.drawCircle(0,0,5),this.endFill(),this.beginFill(r,1),this.drawCircle(0,0,1),this.endFill(),this.lineStyle(1,i,1),this.moveTo(0,0),this.lineTo(4,0);var a=(null===(e=this._data)||void 0===e?void 0:e.length)||0;a<=10?(this.lineStyle(1,i,1),this.lineStyle({cap:rE.BUTT,join:nE.ROUND}),this.moveTo(0,0),this.lineTo(a,0)):(this.lineStyle(1,i,1),this.moveTo(0,0),this.lineTo(5,0),this.lineStyle(1,i,1,0),this.beginFill(r,n),this.moveTo(5,0),this.lineTo(8,4),this.lineTo(a,0),this.lineTo(8,-4),this.lineTo(5,0),this.endFill()),this._selectedIk&&this.drawIK()}}}]),n}(SE),kT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;l(this,e),this._maxCount=100,this._pool=[],this._classType=void 0,this._classType=t,this._maxCount=n}return d(e,[{key:"maxCount",get:function(){return this._maxCount},set:function(e){this._maxCount=e}},{key:"length",get:function(){return this._pool.length}},{key:"get",value:function(){return this._pool.length>0?this._pool.pop():new this._classType}},{key:"put",value:function(e){this._pool.length<this._maxCount&&this._pool.push(e)}},{key:"clearArray",value:function(e){for(var t=0,n=e.length;t<n;t++)this.put(e[t]);e.length=0}}],[{key:"toString",value:function(){return"ObjectPool"}}]),e}(),CT=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this))._app=void 0,r._center=void 0,r._bones=[],r._overBoneId=0,r._selectedBoneIds=[],r._boneShapes=[],r._boneShapePool=new kT(ST),r._ikBoneIds=[],r._ikTargetBoneIds=[],r._selectedIkBoneIds=[],r._selectedRiggingBoneId=0,r._riggingBoneIds=void 0,r._boneColor={},r._app=e,r._center=new Hm(0,0),r._width=0,r._height=0,r}return d(n,[{key:"bones",set:function(e){this._bones=e,this.refresh()}},{key:"overBoneId",set:function(e){this._overBoneId!==e&&(this._overBoneId=e,this.refreshBoneOverAndSelected())}},{key:"selectedBoneIds",set:function(e){this._selectedBoneIds=e,this.refreshBoneOverAndSelected()}},{key:"ikBoneIds",set:function(e){this._ikBoneIds=e,this.refreshIK()}},{key:"ikTargetBoneIds",set:function(e){this._ikTargetBoneIds=e,this.refreshIK()}},{key:"selectedIkBoneIds",set:function(e){this._selectedIkBoneIds=e}},{key:"riggingBoneIds",set:function(e){this._riggingBoneIds=e}},{key:"selectedRiggingBoneId",set:function(e){this._selectedRiggingBoneId!==e&&(this._selectedRiggingBoneId=e,this.refreshBoneOverAndSelected())}},{key:"hideBoneIds",set:function(e){for(var t=0,n=this._boneShapes.length;t<n;t++){var r=this._boneShapes[t];r.visible=e.indexOf(r.data.id)<0}}},{key:"refreshBoneOverAndSelected",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.over=n.data.id===this._overBoneId,n.selectedIk=this._selectedIkBoneIds.indexOf(n.data.id)>=0,n.selected=this._selectedBoneIds.indexOf(n.data.id)>=0,this._riggingBoneIds&&this._riggingBoneIds.indexOf(n.data.id)>=0?n.selectedRiggingBoneId=this._selectedRiggingBoneId:n.selectedRiggingBoneId=0)}}},{key:"refreshBones",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.ik=this._ikBoneIds.indexOf(n.data.id)>=0,n.ikTarget=this._ikTargetBoneIds.indexOf(n.data.id)>=0,n.refresh())}}},{key:"stopOverCheck",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.removeAllListeners("mouseover"),n.removeAllListeners("mouseout")}}},{key:"refreshIK",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.selectedIk=this._selectedIkBoneIds.indexOf(n.data.id)>=0,n.ik=this._ikBoneIds.indexOf(n.data.id)>=0,n.ikTarget=this._ikTargetBoneIds.indexOf(n.data.id)>=0)}}},{key:"startOvercheck",value:function(){var e=this;this.stopOverCheck();for(var t=function(){var t=e._boneShapes[n];t.addEventListener("mouseover",(function(){var n;e.emit(K.OVER_BONE,null===(n=t.data)||void 0===n?void 0:n.id)})),t.addEventListener("mouseout",(function(){e.emit(K.OUT_BONE)}))},n=0,r=this._boneShapes.length;n<r;n++)t()}},{key:"refreshColor",value:function(e){this._boneColor=ge(e);for(var t=0,n=this._boneShapes.length;t<n;t++){var r,i=this._boneShapes[t];if(e)i.color=(null===(r=e[i.data.id])||void 0===r?void 0:r.color)||void 0;else i.color=void 0}}},{key:"refresh",value:function(){var e=this;this.clear();for(var t=function(){var t,r=e._bones[n],i=e._boneShapePool.get();i.eventMode="static",i.setIk(e._ikBoneIds.indexOf(r.id)>=0),i.setIkTarget(e._ikTargetBoneIds.indexOf(r.id)>=0),i.setSelectedIk(e._selectedIkBoneIds.indexOf(r.id)>=0),i.setColor(e._boneColor&&(null===(t=e._boneColor[r.id])||void 0===t?void 0:t.color)),i.data=r,e.addChild(i),i.addEventListener("mouseover",(function(){e.emit(K.OVER_BONE,r.id)})),i.addEventListener("mouseout",(function(){e.emit(K.OUT_BONE)})),e._boneShapes.push(i)},n=0,r=this._bones.length;n<r;n++)t();this.refreshBoneOverAndSelected()}},{key:"clear",value:function(){this.stopOverCheck();for(var e=0,t=this._boneShapes.length;e<t;e++){this._boneShapes[e].clearData()}this._boneShapePool.clearArray(this._boneShapes),this.children.length=0}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.x=e,this._center.y=t,this.x=e,this.y=t}},{key:"setScale",value:function(e){this.scale.set(e)}}]),n}(Pb),AT=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",a?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"))._kernels=[],e._blur=4,e._quality=3,e.uniforms.uOffset=new Float32Array(2),e._pixelSize=new Hm,e.pixelSize=1,e._clamp=a,Array.isArray(r)?e.kernels=r:(e._blur=r,e.quality=i),e}return d(n,[{key:"apply",value:function(e,t,n,r){var i,a=this._pixelSize.x/t._frame.width,o=this._pixelSize.y/t._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*a,this.uniforms.uOffset[1]=i*o,e.applyFilter(this,t,n,r);else{for(var s,l=e.getFilterTexture(),u=t,c=l,h=this._quality-1,d=0;d<h;d++)i=this._kernels[d]+.5,this.uniforms.uOffset[0]=i*a,this.uniforms.uOffset[1]=i*o,e.applyFilter(this,u,c,1),s=u,u=c,c=s;i=this._kernels[h]+.5,this.uniforms.uOffset[0]=i*a,this.uniforms.uOffset[1]=i*o,e.applyFilter(this,u,n,r),e.returnFilterTexture(l)}}},{key:"_updatePadding",value:function(){this.padding=Math.ceil(this._kernels.reduce((function(e,t){return e+t+.5}),0))}},{key:"_generateKernels",value:function(){var e=this._blur,t=this._quality,n=[e];if(e>0)for(var r=e,i=e/t,a=1;a<t;a++)r-=i,n.push(r);this._kernels=n,this._updatePadding()}},{key:"kernels",get:function(){return this._kernels},set:function(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,Ie(e))):(this._kernels=[0],this._quality=1)}},{key:"clamp",get:function(){return this._clamp}},{key:"pixelSize",get:function(){return this._pixelSize},set:function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof Hm?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(e){this._blur=e,this._generateKernels()}}]),n}(Pg),IT="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",OT=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return l(this,n),(e=t.call(this,IT,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n")).threshold=r,e}return d(n,[{key:"threshold",get:function(){return this.uniforms.threshold},set:function(e){this.uniforms.threshold=e}}]),n}(Pg),PT=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,IT,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n")).bloomScale=1,r.brightness=1,r._resolution=gp.FILTER_RESOLUTION,"number"==typeof e&&(e={threshold:e});var i=Object.assign(n.defaults,e);r.bloomScale=i.bloomScale,r.brightness=i.brightness;var a=i.kernels,o=i.blur,s=i.quality,u=i.pixelSize,c=i.resolution;return r._extractFilter=new OT(i.threshold),r._extractFilter.resolution=c,r._blurFilter=a?new AT(a):new AT(o,s),r.pixelSize=u,r.resolution=c,r}return d(n,[{key:"apply",value:function(e,t,n,r,i){var a=e.getFilterTexture();this._extractFilter.apply(e,t,a,1,i);var o=e.getFilterTexture();this._blurFilter.apply(e,a,o,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=o,e.applyFilter(this,t,n,r),e.returnFilterTexture(o),e.returnFilterTexture(a)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}},{key:"threshold",get:function(){return this._extractFilter.threshold},set:function(e){this._extractFilter.threshold=e}},{key:"kernels",get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e}},{key:"blur",get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e}},{key:"quality",get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e}},{key:"pixelSize",get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e}}]),n}(Pg);PT.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:gp.FILTER_RESOLUTION};var MT=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n")).uniforms.dimensions=new Float32Array(2),Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,a=i.width,o=i.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=o,e.applyFilter(this,t,n,r)}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}},{key:"strength",get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e}},{key:"center",get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e}}]),n}(Pg);MT.defaults={center:[.5,.5],radius:100,strength:1};var RT;(RT=RT||{}).stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var n=e.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+e.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,r=e.visit(t.at),i=e.visit(t.style);return i&&(n+=" "+i),r&&(n+=" at "+r),n},"visit_default-radial":function(t){var n="",r=e.visit(t.at);return r&&(n+=r),n},"visit_extent-keyword":function(t){var n=t.value,r=e.visit(t.at);return r&&(n+=" at "+r),n},"visit_position-keyword":function(e){return e.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,n){var r=t,i=e.visit(n.length);return i&&(r+=" "+i),r},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(t){var n="",r=t.length;return t.forEach((function(t,i){n+=e.visit(t),i<r-1&&(n+=", ")})),n},visit:function(t){if(!t)return"";if(t instanceof Array)return e.visit_array(t,"");if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}throw Error("Invalid node.")}};return function(t){return e.visit(t)}}(),(RT=RT||{}).parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){var n=new Error(t+": "+e);throw n.source=t,n}function r(){var e=f(i);return t.length>0&&n("Invalid input not EOF"),e}function i(){return a("linear-gradient",e.linearGradient,s)||a("repeating-linear-gradient",e.repeatingLinearGradient,s)||a("radial-gradient",e.radialGradient,l)||a("repeating-radial-gradient",e.repeatingRadialGradient,l)}function a(t,r,i){return o(r,(function(r){var a=i();return a&&(b(e.comma)||n("Missing comma before color stops")),{type:t,orientation:a,colorStops:f(p)}}))}function o(t,r){var i=b(t);if(i){b(e.startCall)||n("Missing (");var a=r(i);return b(e.endCall)||n("Missing )"),a}}function s(){return y("directional",e.sideOrCorner,1)||y("angular",e.angleValue,1)}function l(){var n,r,i=u();return i&&((n=[]).push(i),r=t,b(e.comma)&&((i=u())?n.push(i):t=r)),n}function u(){var e=function(){var e=y("shape",/^(circle)/i,0);return e&&(e.style=g()||c()),e}()||function(){var e=y("shape",/^(ellipse)/i,0);return e&&(e.style=m()||c()),e}();if(e)e.at=h();else{var t=c();if(t){e=t;var n=h();n&&(e.at=n)}else{var r=d();r&&(e={type:"default-radial",at:r})}}return e}function c(){return y("extent-keyword",e.extentKeywords,1)}function h(){if(y("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e}}function d(){var e={x:m(),y:m()};if(e.x||e.y)return{type:"position",value:e}}function f(t){var r=t(),i=[];if(r)for(i.push(r);b(e.comma);)(r=t())?i.push(r):n("One extra comma");return i}function p(){var t=y("hex",e.hexColor,1)||o(e.rgbaColor,(function(){return{type:"rgba",value:f(v)}}))||o(e.rgbColor,(function(){return{type:"rgb",value:f(v)}}))||y("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=m(),t}function v(){return b(e.number)[1]}function m(){return y("%",e.percentageValue,1)||y("position-keyword",e.positionKeywords,1)||g()}function g(){return y("px",e.pixelValue,1)||y("em",e.emValue,1)}function y(e,t,n){var r=b(t);if(r)return{type:e,value:r[n]}}function b(e){var n,r;return(r=/^[\n\r\t\s]+/.exec(t))&&_(r[0].length),(n=e.exec(t))&&_(n[0].length),n}function _(e){t=t.substr(e)}return function(e){return t=e.toString(),r()}}();var NT=RT.parse;RT.stringify;var DT={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},LT={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var FT={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},BT={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[a=255*l,a,a];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=o+1/3*-(u-1))<0?r++:r>1&&r--,a=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*a;return i}};function UT(e){Array.isArray(e)&&e.raw&&(e=String.raw.apply(String,arguments));var t,n=function(e){var t,n,r=[],i=1;if("string"==typeof e)if(DT[e])r=DT[e].slice(),n="rgb";else if("transparent"===e)i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var a=e.slice(1);i=1,(l=a.length)<=4?(r=[parseInt(a[0]+a[0],16),parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16)],4===l&&(i=parseInt(a[3]+a[3],16)/255)):(r=[parseInt(a[0]+a[1],16),parseInt(a[2]+a[3],16),parseInt(a[4]+a[5],16)],8===l&&(i=parseInt(a[6]+a[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var o=t[1],s="rgb"===o;n=a=o.replace(/a$/,"");var l="cmyk"===a?4:"gray"===a?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===l?parseFloat(e)/100:"rgb"===a?255*parseFloat(e)/100:parseFloat(e);if("h"===a[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==LT[e])return LT[e]}return parseFloat(e)})),o===a&&r.push(1),i=s||void 0===r[l]?1:r[l],r=r.slice(0,l)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),n=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(n="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(i/=100)):(n="rgb",r=[e>>>16,(65280&e)>>>8,255&e]);return{space:n,values:r,alpha:i}}(e);if(!n.space)return[];var r="h"===n.space[0]?BT.min:FT.min,i="h"===n.space[0]?BT.max:FT.max;return(t=Array(3))[0]=Math.min(Math.max(n.values[0],r[0]),i[0]),t[1]=Math.min(Math.max(n.values[1],r[1]),i[1]),t[2]=Math.min(Math.max(n.values[2],r[2]),i[2]),"h"===n.space[0]&&(t=BT.rgb(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t}function HT(e){switch(typeof e){case"string":return function(e){var t=UT(e);if(!t)throw new Error('Unable to parse color "'.concat(e,'" as RGBA.'));return[t[0]/255,t[1]/255,t[2]/255,t[3]]}(e);case"number":return Sv(e);default:return e}}function jT(e){var t=NT(function(e){var t=e.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]{2,}/g," ");return t=t.replace(/;/g,""),t=t.replace(/ ,/g,","),t=t.replace(/\( /g,"("),t=t.replace(/ \)/g,")"),t.trim()}(e));if(0===t.length)throw new Error("Invalid CSS gradient.");if(1!==t.length)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");var n=t[0],r=function(e){var t={"linear-gradient":0,"radial-gradient":1};if(!(e in t))throw new Error('Unsupported gradient type "'.concat(e,'"'));return t[e]}(n.type),i=function(e){for(var t=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=-1;"literal"===r.type&&r.length&&"type"in r.length&&"%"===r.length.type&&"value"in r.length&&(i=parseFloat(r.length.value)/100),t.push(i)}for(var a=function(e){for(var n=e;n<t.length;n++)if(-1!==t[n])return{indexDelta:n-e,offset:t[n]};return{indexDelta:t.length-1-e,offset:1}},o=0,s=0;s<t.length;s++){var l=t[s];if(-1!==l)o=l;else if(0===s)t[s]=0;else if(s+1===t.length)t[s]=1;else{for(var u=a(s),c=(u.offset-o)/(1+u.indexDelta),h=0;h<=u.indexDelta;h++)t[s+h]=o+(h+1)*c;s+=u.indexDelta,o=t[s]}}return t.map(VT)}(e),n=[],r=0;r<e.length;r++){var i=zT(e[r]);n.push({offset:t[r],color:i.slice(0,3),alpha:i[3]})}return n}(n.colorStops),a=function(e){if("undefined"==typeof e)return 0;if("type"in e&&"value"in e)switch(e.type){case"angular":return parseFloat(e.value);case"directional":return function(e){var t={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(e in t))throw new Error('Unsupported directional value "'.concat(e,'"'));return t[e]}(e.value)}return 0}(n.orientation);return{type:r,stops:i,angle:a}}function zT(e){return HT(function(e){switch(e.type){case"hex":return"#".concat(e.value);case"literal":return e.value;default:return"".concat(e.type,"(").concat(e.value.join(","),")")}}(e))}function VT(e){return e.toString().length>6?parseFloat(e.toString().substring(0,6)):e}FT.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,a=e[2]/255,o=Math.min(r,i,a),s=Math.max(r,i,a),l=s-o;return s===o?t=0:r===s?t=(i-a)/l:i===s?t=2+(a-r)/l:a===s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(o+s)/2,[t,100*(s===o?0:n<=.5?l/(s+o):l/(2-s-o)),100*n]};var GT=Object.defineProperty,WT=Object.defineProperties,XT=Object.getOwnPropertyDescriptors,YT=Object.getOwnPropertySymbols,KT=Object.prototype.hasOwnProperty,qT=Object.prototype.propertyIsEnumerable,$T=function(e,t,n){return t in e?GT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},ZT=function(e,t){for(var n in t||(t={}))KT.call(t,n)&&$T(e,n,t[n]);if(YT){var r,i=Gy(YT(t));try{for(i.s();!(r=i.n()).done;){n=r.value;qT.call(t,n)&&$T(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e};var QT=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),e&&"css"in e&&(e=function(e,t){return WT(e,XT(t))}(ZT({},jT(e.css||"")),{alpha:e.alpha,maxColors:e.maxColors}));var i=ZT(ZT({},n.defaults),e);if(!i.stops||i.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");return(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;\n}\n","const float PI = 3.1415926538;\nconst float PI_2 = PI*2.;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\n\nconst int TYPE_LINEAR = 0;\nconst int TYPE_RADIAL = 1;\nconst int TYPE_CONIC = 2;\nconst int MAX_STOPS = 32;\n\nuniform int uNumStops;\nuniform float uAlphas[3*MAX_STOPS];\nuniform vec3 uColors[MAX_STOPS];\nuniform float uOffsets[MAX_STOPS];\nuniform int uType;\nuniform float uAngle;\nuniform float uAlpha;\nuniform int uMaxColors;\n\nstruct ColorStop {\n    float offset;\n    vec3 color;\n    float alpha;\n};\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle), -sin(angle),\n    sin(angle), cos(angle));\n}\n\nfloat projectLinearPosition(vec2 pos, float angle){\n    vec2 center = vec2(0.5);\n    vec2 result = pos - center;\n    result = rotate2d(angle) * result;\n    result = result + center;\n    return clamp(result.x, 0., 1.);\n}\n\nfloat projectRadialPosition(vec2 pos) {\n    float r = distance(vFilterCoord, vec2(0.5));\n    return clamp(2.*r, 0., 1.);\n}\n\nfloat projectAnglePosition(vec2 pos, float angle) {\n    vec2 center = pos - vec2(0.5);\n    float polarAngle=atan(-center.y, center.x);\n    return mod(polarAngle + angle, PI_2) / PI_2;\n}\n\nfloat projectPosition(vec2 pos, int type, float angle) {\n    if (type == TYPE_LINEAR) {\n        return projectLinearPosition(pos, angle);\n    } else if (type == TYPE_RADIAL) {\n        return projectRadialPosition(pos);\n    } else if (type == TYPE_CONIC) {\n        return projectAnglePosition(pos, angle);\n    }\n\n    return pos.y;\n}\n\nvoid main(void) {\n    // current/original color\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n\n    // skip calculations if gradient alpha is 0\n    if (0.0 == uAlpha) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // project position\n    float y = projectPosition(vFilterCoord, uType, radians(uAngle));\n\n    // check gradient bounds\n    float offsetMin = uOffsets[0];\n    float offsetMax = 0.0;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (i == uNumStops-1){ // last index\n            offsetMax = uOffsets[i];\n        }\n    }\n\n    if (y  < offsetMin || y > offsetMax) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // limit colors\n    if (uMaxColors > 0) {\n        float stepSize = 1./float(uMaxColors);\n        float stepNumber = float(floor(y/stepSize));\n        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment\n    }\n\n    // find color stops\n    ColorStop from;\n    ColorStop to;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (y >= uOffsets[i]) {\n            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);\n            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);\n        }\n\n        if (i == uNumStops-1){ // last index\n            break;\n        }\n    }\n\n    // mix colors from stops\n    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);\n    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);\n\n    float segmentHeight = to.offset - from.offset;\n    float relativePos = y - from.offset;// position from 0 to [segmentHeight]\n    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].\n\n    float gradientAlpha = uAlpha * currentColor.a;\n    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\n\n    // mix resulting color with current color\n    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);\n}\n"))._stops=[],r.autoFit=!1,Object.assign(m(r),i),r}return d(n,[{key:"stops",get:function(){return this._stops},set:function(e){for(var t=function(e){return Ie(e).sort((function(e,t){return e.offset-t.offset}))}(e),n=new Float32Array(3*t.length),r=0;r<t.length;r++){var i=HT(t[r].color),a=3*r;n[a+0]=i[0],n[a+1]=i[1],n[a+2]=i[2]}this.uniforms.uColors=n,this.uniforms.uOffsets=t.map((function(e){return e.offset})),this.uniforms.uAlphas=t.map((function(e){return e.alpha})),this.uniforms.uNumStops=t.length,this._stops=t}},{key:"type",get:function(){return this.uniforms.uType},set:function(e){this.uniforms.uType=e}},{key:"angle",get:function(){return this.uniforms.uAngle+90},set:function(e){this.uniforms.uAngle=e-90}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}},{key:"maxColors",get:function(){return this.uniforms.uMaxColors},set:function(e){this.uniforms.uMaxColors=e}}]),n}(Pg),JT=QT;JT.LINEAR=0,JT.RADIAL=1,JT.CONIC=2,JT.defaults={type:QT.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};var eS=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n")).time=0,r.seed=0,r.uniforms.dimensions=new Float32Array(2),Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,a=i.width,o=i.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=o,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"curvature",get:function(){return this.uniforms.curvature},set:function(e){this.uniforms.curvature=e}},{key:"lineWidth",get:function(){return this.uniforms.lineWidth},set:function(e){this.uniforms.lineWidth=e}},{key:"lineContrast",get:function(){return this.uniforms.lineContrast},set:function(e){this.uniforms.lineContrast=e}},{key:"verticalLine",get:function(){return this.uniforms.verticalLine},set:function(e){this.uniforms.verticalLine=e}},{key:"noise",get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e}},{key:"noiseSize",get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e}},{key:"vignetting",get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e}},{key:"vignettingAlpha",get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e}},{key:"vignettingBlur",get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e}}]),n}(Pg);eS.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var tS=Object.defineProperty,nS=Object.getOwnPropertySymbols,rS=Object.prototype.hasOwnProperty,iS=Object.prototype.propertyIsEnumerable,aS=function(e,t,n){return t in e?tS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},oS=function(e,t){for(var n in t||(t={}))rS.call(t,n)&&aS(e,n,t[n]);if(nS){var r,i=Gy(nS(t));try{for(i.s();!(r=i.n()).done;){n=r.value;iS.call(t,n)&&aS(e,n,t[n])}}catch(a){i.e(a)}finally{i.f()}}return e},sS=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this)).angle=45,r._distance=5,r._resolution=gp.FILTER_RESOLUTION;var i=e?oS(oS({},n.defaults),e):n.defaults,a=i.kernels,o=i.blur,s=i.quality,u=i.pixelSize,c=i.resolution;r._offset=new ng(r._updatePadding,m(r)),r._tintFilter=new Pg("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),r._tintFilter.uniforms.color=new Float32Array(4),r._tintFilter.uniforms.shift=r._offset,r._tintFilter.resolution=c,r._blurFilter=a?new AT(a):new AT(o,s),r.pixelSize=u,r.resolution=c;var h=i.shadowOnly,d=i.rotation,f=i.distance,p=i.offset,v=i.alpha,g=i.color;return r.shadowOnly=h,void 0!==d&&void 0!==f?(r.rotation=d,r.distance=f):r.offset=p,r.alpha=v,r.color=g,r}return d(n,[{key:"apply",value:function(e,t,n,r){var i=e.getFilterTexture();this._tintFilter.apply(e,t,i,1),this._blurFilter.apply(e,i,n,r),!0!==this.shadowOnly&&e.applyFilter(this,t,n,0),e.returnFilterTexture(i)}},{key:"_updatePadding",value:function(){var e=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=e+2*this.blur}},{key:"_updateShift",value:function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset.copyFrom(e),this._updatePadding()}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}},{key:"distance",get:function(){return this._distance},set:function(e){Wp("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=e,this._updatePadding(),this._updateShift()}},{key:"rotation",get:function(){return this.angle/Bm},set:function(e){Wp("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=e*Bm,this._updateShift()}},{key:"alpha",get:function(){return this._tintFilter.uniforms.alpha},set:function(e){this._tintFilter.uniforms.alpha=e}},{key:"color",get:function(){return Av(this._tintFilter.uniforms.color)},set:function(e){Sv(e,this._tintFilter.uniforms.color)}},{key:"kernels",get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e}},{key:"blur",get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e,this._updatePadding()}},{key:"quality",get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e}},{key:"pixelSize",get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e}}]),n}(Pg);sS.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:gp.FILTER_RESOLUTION};var lS=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n")).offset=100,r.fillMode=n.TRANSPARENT,r.average=!1,r.seed=0,r.minSize=8,r.sampleSize=512,r._slices=0,r._offsets=new Float32Array(1),r._sizes=new Float32Array(1),r._direction=-1,r.uniforms.dimensions=new Float32Array(2),r._canvas=document.createElement("canvas"),r._canvas.width=4,r._canvas.height=r.sampleSize,r.texture=Gg.from(r._canvas,{scaleMode:ap.NEAREST}),Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,a=i.width,o=i.height;this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/a,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,n,r)}},{key:"_randomizeSizes",value:function(){var e=this._sizes,t=this._slices-1,n=this.sampleSize,r=Math.min(this.minSize/n,.9/this._slices);if(this.average){for(var i=this._slices,a=1,o=0;o<t;o++){var s=a/(i-o),l=Math.max(s*(1-.6*Math.random()),r);e[o]=l,a-=l}e[t]=a}else{for(var u=1,c=Math.sqrt(1/this._slices),h=0;h<t;h++){var d=Math.max(c*u*Math.random(),r);e[h]=d,u-=d}e[t]=u}this.shuffle()}},{key:"shuffle",value:function(){for(var e=this._sizes,t=this._slices-1;t>0;t--){var n=Math.random()*t>>0,r=e[t];e[t]=e[n],e[n]=r}}},{key:"_randomizeOffsets",value:function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)}},{key:"refresh",value:function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}},{key:"redraw",value:function(){var e=this.sampleSize,t=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);for(var r,i=0,a=0;a<this._slices;a++){r=Math.floor(256*this._offsets[a]);var o=this._sizes[a]*e,s=r>0?r:0,l=r<0?-r:0;n.fillStyle="rgba(".concat(s,", ").concat(l,", 0, 1)"),n.fillRect(0,i>>0,e,o+1>>0),i+=o}t.baseTexture.update(),this.uniforms.displacementMap=t}},{key:"sizes",get:function(){return this._sizes},set:function(e){for(var t=Math.min(this._slices,e.length),n=0;n<t;n++)this._sizes[n]=e[n]}},{key:"offsets",get:function(){return this._offsets},set:function(e){for(var t=Math.min(this._slices,e.length),n=0;n<t;n++)this._offsets[n]=e[n]}},{key:"slices",get:function(){return this._slices},set:function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())}},{key:"direction",get:function(){return this._direction},set:function(e){if(this._direction!==e){this._direction=e;var t=e*Bm;this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t)}}},{key:"red",get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e}},{key:"green",get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e}},{key:"blue",get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e}},{key:"destroy",value:function(){var e;null==(e=this.texture)||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}}]),n}(Pg),uS=lS;uS.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},uS.TRANSPARENT=0,uS.ORIGINAL=1,uS.LOOP=2,uS.CLAMP=3,uS.MIRROR=4;var cS=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n);var i=Object.assign({},n.defaults,e),a=i.outerStrength,o=i.innerStrength,s=i.color,u=i.knockout,c=i.quality,h=i.alpha,d=Math.round(i.distance);return(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\nuniform float alpha;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    if (knockout) {\n      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,"".concat((1/c/d).toFixed(7))).replace(/__DIST__/gi,"".concat(d.toFixed(0),".0")))).uniforms.glowColor=new Float32Array([0,0,0,1]),r.uniforms.alpha=1,Object.assign(m(r),{color:s,outerStrength:a,innerStrength:o,padding:d,knockout:u,alpha:h}),r}return d(n,[{key:"color",get:function(){return Av(this.uniforms.glowColor)},set:function(e){Sv(e,this.uniforms.glowColor)}},{key:"outerStrength",get:function(){return this.uniforms.outerStrength},set:function(e){this.uniforms.outerStrength=e}},{key:"innerStrength",get:function(){return this.uniforms.innerStrength},set:function(e){this.uniforms.innerStrength=e}},{key:"knockout",get:function(){return this.uniforms.knockout},set:function(e){this.uniforms.knockout=e}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e}}]),n}(Pg);cS.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};var hS=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n"))).parallel=!0,r.time=0,r._angle=0,r.uniforms.dimensions=new Float32Array(2);var i=Object.assign(n.defaults,e);return r._angleLight=new Hm,r.angle=i.angle,r.gain=i.gain,r.lacunarity=i.lacunarity,r.alpha=i.alpha,r.parallel=i.parallel,r.center=i.center,r.time=i.time,r}return d(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,a=i.width,o=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=a,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/a,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,n,r)}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e;var t=e*Bm;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)}},{key:"gain",get:function(){return this.uniforms.gain},set:function(e){this.uniforms.gain=e}},{key:"lacunarity",get:function(){return this.uniforms.lacunarity},set:function(e){this.uniforms.lacunarity=e}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e}}]),n}(Pg);hS.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};var dS=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uHue;\nuniform float uAlpha;\nuniform bool uColorize;\nuniform float uSaturation;\nuniform float uLightness;\n\n// https://en.wikipedia.org/wiki/Luma_(video)\nconst vec3 weight = vec3(0.299, 0.587, 0.114);\n\nfloat getWeightedAverage(vec3 rgb) {\n    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;\n}\n\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\nconst vec3 k = vec3(0.57735, 0.57735, 0.57735);\n\nvec3 hueShift(vec3 color, float angle) {\n    float cosAngle = cos(angle);\n    return vec3(\n    color * cosAngle +\n    cross(k, color) * sin(angle) +\n    k * dot(k, color) * (1.0 - cosAngle)\n    );\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    vec4 result = color;\n\n    // colorize\n    if (uColorize) {\n        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);\n    }\n\n    // hue\n    result.rgb = hueShift(result.rgb, uHue);\n\n    // saturation\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\n    float average = (result.r + result.g + result.b) / 3.0;\n\n    if (uSaturation > 0.) {\n        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));\n    } else {\n        result.rgb -= (average - result.rgb) * uSaturation;\n    }\n\n    // lightness\n    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));\n\n    // alpha\n    gl_FragColor = mix(color, result, uAlpha);\n}\n"))._hue=0;var i=Object.assign({},n.defaults,e);return Object.assign(m(r),i),r}return d(n,[{key:"hue",get:function(){return this._hue},set:function(e){this._hue=e,this.uniforms.uHue=this._hue*(Math.PI/180)}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}},{key:"colorize",get:function(){return this.uniforms.uColorize},set:function(e){this.uniforms.uColorize=e}},{key:"lightness",get:function(){return this.uniforms.uLightness},set:function(e){this.uniforms.uLightness=e}},{key:"saturation",get:function(){return this.uniforms.uSaturation},set:function(e){this.uniforms.uSaturation=e}}]),n}(Pg);dS.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};var fS=function(e){p(n,e);var t=g(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n")).seed=0,r.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(r.seed=e,e=void 0):r.seed=i,Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"apply",value:function(e,t,n,r){var i,a;this.uniforms.dimensions[0]=null==(i=t.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(a=t.filterFrame)?void 0:a.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,n,r)}},{key:"sepia",get:function(){return this.uniforms.sepia},set:function(e){this.uniforms.sepia=e}},{key:"noise",get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e}},{key:"noiseSize",get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e}},{key:"scratch",get:function(){return this.uniforms.scratch},set:function(e){this.uniforms.scratch=e}},{key:"scratchDensity",get:function(){return this.uniforms.scratchDensity},set:function(e){this.uniforms.scratchDensity=e}},{key:"scratchWidth",get:function(){return this.uniforms.scratchWidth},set:function(e){this.uniforms.scratchWidth=e}},{key:"vignetting",get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e}},{key:"vignettingAlpha",get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e}},{key:"vignettingBlur",get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e}}]),n}(Pg);fS.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var pS=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return l(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterClamp;\n\nuniform float uAlpha;\nuniform vec2 uThickness;\nuniform vec4 uColor;\nuniform bool uKnockout;\n\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\nconst float ANGLE_STEP = ${angleStep};\n\nfloat outlineMaxAlphaAtPos(vec2 pos) {\n    if (uThickness.x == 0. || uThickness.y == 0.) {\n        return 0.;\n    }\n\n    vec4 displacedColor;\n    vec2 displacedPos;\n    float maxAlpha = 0.;\n\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\n        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, displacedColor.a);\n    }\n\n    return maxAlpha;\n}\n\nvoid main(void) {\n    vec4 sourceColor = texture2D(uSampler, vTextureCoord);\n    vec4 contentColor = sourceColor * float(!uKnockout);\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\n    gl_FragColor = contentColor + outlineColor;\n}\n".replace(/\$\{angleStep\}/,n.getAngleStep(a))))._thickness=1,e._alpha=1,e._knockout=!1,e.uniforms.uThickness=new Float32Array([0,0]),e.uniforms.uColor=new Float32Array([0,0,0,1]),e.uniforms.uAlpha=o,e.uniforms.uKnockout=s,Object.assign(m(e),{thickness:r,color:i,quality:a,alpha:o,knockout:s}),e}return d(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.uThickness[0]=this._thickness/t._frame.width,this.uniforms.uThickness[1]=this._thickness/t._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,e.applyFilter(this,t,n,r)}},{key:"alpha",get:function(){return this._alpha},set:function(e){this._alpha=e}},{key:"color",get:function(){return Av(this.uniforms.uColor)},set:function(e){Sv(e,this.uniforms.uColor)}},{key:"knockout",get:function(){return this._knockout},set:function(e){this._knockout=e}},{key:"thickness",get:function(){return this._thickness},set:function(e){this._thickness=e,this.padding=e}}],[{key:"getAngleStep",value:function(e){var t=Math.max(e*n.MAX_SAMPLES,n.MIN_SAMPLES);return(2*Math.PI/t).toFixed(7)}}]),n}(Pg),vS=pS;vS.MIN_SAMPLES=1,vS.MAX_SAMPLES=100;var mS=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n")).time=0,r.uniforms.amplitude=new Float32Array(2),r.uniforms.waveLength=new Float32Array(2),r.uniforms.alpha=new Float32Array(2),r.uniforms.dimensions=new Float32Array(2),Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"apply",value:function(e,t,n,r){var i,a;this.uniforms.dimensions[0]=null==(i=t.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(a=t.filterFrame)?void 0:a.height,this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"mirror",get:function(){return this.uniforms.mirror},set:function(e){this.uniforms.mirror=e}},{key:"boundary",get:function(){return this.uniforms.boundary},set:function(e){this.uniforms.boundary=e}},{key:"amplitude",get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]}},{key:"waveLength",get:function(){return this.uniforms.waveLength},set:function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]}}]),n}(Pg);mS.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};var gS=function(e){p(n,e);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],i=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return l(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n")).center=r,Object.assign(m(e),n.defaults,i),e.time=a,e}return d(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"center",get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e}},{key:"amplitude",get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude=e}},{key:"wavelength",get:function(){return this.uniforms.wavelength},set:function(e){this.uniforms.wavelength=e}},{key:"brightness",get:function(){return this.uniforms.brightness},set:function(e){this.uniforms.brightness=e}},{key:"speed",get:function(){return this.uniforms.speed},set:function(e){this.uniforms.speed=e}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}}]),n}(Pg);gS.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};var yS=function(e){p(n,e);var t=g(n);function n(e){var r,i,a;return l(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n")).uniforms.blur=e.blur,r.uniforms.gradientBlur=e.gradientBlur,r.uniforms.start=null!=(i=e.start)?i:new Hm(0,window.innerHeight/2),r.uniforms.end=null!=(a=e.end)?a:new Hm(600,window.innerHeight/2),r.uniforms.delta=new Hm(30,30),r.uniforms.texSize=new Hm(window.innerWidth,window.innerHeight),r.updateDelta(),r}return d(n,[{key:"updateDelta",value:function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}},{key:"blur",get:function(){return this.uniforms.blur},set:function(e){this.uniforms.blur=e}},{key:"gradientBlur",get:function(){return this.uniforms.gradientBlur},set:function(e){this.uniforms.gradientBlur=e}},{key:"start",get:function(){return this.uniforms.start},set:function(e){this.uniforms.start=e,this.updateDelta()}},{key:"end",get:function(){return this.uniforms.end},set:function(e){this.uniforms.end=e,this.updateDelta()}}]),n}(Pg),bS=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"updateDelta",value:function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/n,this.uniforms.delta.y=t/n}}]),n}(yS),_S=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"updateDelta",value:function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/n,this.uniforms.delta.y=e/n}}]),n}(yS),xS=function(e){p(n,e);var t=g(n);function n(e,r,i,a){var o;return l(this,n),o=t.call(this),"number"==typeof e&&(Wp("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),e={blur:e,gradientBlur:r,start:i,end:a}),e=Object.assign({},n.defaults,e),o.tiltShiftXFilter=new bS(e),o.tiltShiftYFilter=new _S(e),o}return d(n,[{key:"apply",value:function(e,t,n,r){var i=e.getFilterTexture();this.tiltShiftXFilter.apply(e,t,i,1),this.tiltShiftYFilter.apply(e,i,n,r),e.returnFilterTexture(i)}},{key:"blur",get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}},{key:"gradientBlur",get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}},{key:"start",get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}},{key:"end",get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}}]),n}(Pg);xS.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};var ES=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),Object.assign(m(r),n.defaults,e),r}return d(n,[{key:"offset",get:function(){return this.uniforms.offset},set:function(e){this.uniforms.offset=e}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}},{key:"angle",get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e}}]),n}(Pg);ES.defaults={radius:200,angle:4,padding:20,offset:new Hm};var wS=Object.getOwnPropertySymbols,TS=Object.prototype.hasOwnProperty,SS=Object.prototype.propertyIsEnumerable,kS=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n);var i=Object.assign(n.defaults,e),a=i.maxKernelSize,o=function(e,t){var n={};for(var r in e)TS.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&wS){var i,a=Gy(wS(e));try{for(a.s();!(i=a.n()).done;)r=i.value,t.indexOf(r)<0&&SS.call(e,r)&&(n[r]=e[r])}catch(o){a.e(o)}finally{a.f()}}return n}(i,["maxKernelSize"]);return r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",a.toFixed(1))),Object.assign(m(r),o),r}return d(n,[{key:"center",get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e}},{key:"strength",get:function(){return this.uniforms.uStrength},set:function(e){this.uniforms.uStrength=e}},{key:"innerRadius",get:function(){return this.uniforms.uInnerRadius},set:function(e){this.uniforms.uInnerRadius=e}},{key:"radius",get:function(){return this.uniforms.uRadius},set:function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e}}]),n}(Pg);function CS(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}function AS(e,t,n){return(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y)}function IS(e,t,n){return(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1])}function OS(e,t,n){if(Lf.isNumberEqual(e[0],n[0])&&Lf.isNumberEqual(e[1],n[1]))return[t[0],t[1]];if(Lf.isNumberEqual(e[2],n[0])&&Lf.isNumberEqual(e[3],n[1]))return[t[2],t[3]];if(Lf.isNumberEqual(e[4],n[0])&&Lf.isNumberEqual(e[5],n[1]))return[t[4],t[5]];var r=[e[0],e[1]],i=[e[2],e[3]],a=[e[4],e[5]],o=n,s=[t[0],t[1]],l=[t[2],t[3]],u=[t[4],t[5]],c=PS([e[0],e[1]],o,[e[2],e[3]],[e[4],e[5]]);return null==c?null==(c=PS(i,o,a,r))?MS(e,t,o,c=PS(a,o,r,i)):MS([a[0],a[1],r[0],r[1],i[0],i[1]],[u[0],u[1],s[0],s[1],l[0],l[1]],o,c):MS([i[0],i[1],a[0],a[1],r[0],r[1]],[l[0],l[1],u[0],u[1],s[0],s[1]],o,c)}function PS(e,t,n,r){var i=e[1]-t[1],a=t[0]-e[0],o=e[0]*t[1]-t[0]*e[1],s=n[1]-r[1],l=r[0]-n[0],u=n[0]*r[1]-r[0]*n[1],c=i*l-s*a;return 0===c?null:[(a*u-l*o)/c,(o*s-u*i)/c]}function MS(e,t,n,r){var i,a,o;return i=NS([e[0],e[1]],r,[e[2],e[3]]),a=NS([e[4],e[5]],n,r),o=DS([t[0],t[1]],[t[2],t[3]],i),0===a?o:DS([t[4],t[5]],o,a)}function RS(e,t){return Lf.isNumberEqual(e[0],t[0])&&Lf.isNumberEqual(e[1],t[1])}function NS(e,t,n){return Lf.isNumberEqual(n[0],e[0])?Lf.isNumberEqual(n[1],e[1])?1:(t[1]-e[1])/(n[1]-e[1]):(t[0]-e[0])/(n[0]-e[0])}function DS(e,t,n){var r=[0,0];return null!=e&&null!=t&&(r[0]=e[0]+(t[0]-e[0])*n,r[1]=e[1]+(t[1]-e[1])*n),r}function LS(e){var t,n=e.concat(),r=[];for(r.push(n.shift()),r.push(n.shift()),r.push(n.shift()),r.push(n.shift()),t=[r[2],r[3]];n.length>0;)for(var i=0;i<n.length;i+=4){if(n[i]===t[0]&&n[i+1]===t[1]){t=[n[i+2],n[i+3]],r=r.concat(n.splice(i,4));break}if(n[i+2]===t[0]&&n[i+3]===t[1]){t=[n[i],n[i+1]],r=r.concat(n.splice(i,4));break}if(i>=n.length-4)return null}return r}function FS(e,t){var n,r,i=e[0],a=e[1],o=!1;if(null==t)return!1;for(n=0,r=t.length;n<r;n+=4){var s=t[n],l=t[n+1],u=t[n+2],c=t[n+3];l>a!==c>a&&i<(u-s)*(a-l)/(c-l)+s&&(o=!o)}return o}function BS(e,t){return FS(e,t=LS(t))}function US(e,t,n,r,i,a){var o,s,l,u,c,h,d,f,p,v,m=5e-6,g=e[0],y=e[1],b=t[0],_=t[1],x=n[0],E=n[1],w=Math.abs(y-_),T=Math.abs(_-E);if(w<m&&T<m)throw new Error("Eek! Coincident points!");return w<m?s=(u=-(x-b)/(E-_))*((o=(b+g)/2)-(h=(b+x)/2))+(f=(_+E)/2):T<m?s=(l=-(b-g)/(_-y))*((o=(x+b)/2)-(c=(g+b)/2))+(d=(y+_)/2):(o=((l=-(b-g)/(_-y))*(c=(g+b)/2)-(u=-(x-b)/(E-_))*(h=(b+x)/2)+(f=(_+E)/2)-(d=(y+_)/2))/(l-u),s=w>T?l*(o-c)+d:u*(o-h)+f),{i:r,j:i,k:a,x:o,y:s,r:(p=b-o)*p+(v=_-s)*v}}function HS(e,t){for(var n,r,i,a,o=t.length;o;){r=e[t[--o]].uvs,n=e[t[--o]].uvs;for(var s=o;s;)if(a=e[t[--s]].uvs,RS(n,i=e[t[--s]].uvs)&&RS(r,a)||RS(n,a)&&RS(r,i)){t.splice(o,2),t.splice(s,2),o-=2;break}}}function jS(e,t){return!BS([(e[0]+e[2]+e[4])/3,(e[1]+e[3]+e[5])/3],t)}function zS(e,t,n){if(null!=n){for(var r=[],i=0;i<n.length;i++){var a=n[i];r.push(e[a].uvs[0],e[a].uvs[1])}var o=LS(r);if(null==o)return[];for(var s=[],l=0,u=t.length;l<u;l+=3){var c=t[l],h=t[l+1],d=t[l+2],f=e[c].uvs,p=e[h].uvs,v=e[d].uvs;jS([f[0],f[1],p[0],p[1],v[0],v[1]],o)||s.push(c,h,d)}return s}return t}function VS(e,t){var n,r,i,a,o,s,l,u,c,h,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,p=t.length,v=[];if(p<3)return v;if(3===p)return v.push(t[0],t[1],t[2]),v;t.sort((function(t,n){var r=e[t].uvs;return e[n].uvs[0]-r[0]})),n=function(e,t){var n,r,i,a,o,s,l=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(n=t.length;n--;){var d=e[t[n]].uvs;d[0]<l&&(l=d[0]),d[0]>c&&(c=d[0]),d[1]<u&&(u=d[1]),d[1]>h&&(h=d[1])}r=c-l,i=h-u,a=Math.max(r,i),o=l+.5*r,s=u+.5*i;var f=[];return f.push([o-2e3*a,s-a]),f.push([o,s+2e3*a]),f.push([o+2e3*a,s-a]),f}(e,t),e[-1]={uvs:n[0],vertices:n[0]},e[-2]={uvs:n[1],vertices:n[1]},e[-3]={uvs:n[2],vertices:n[2]},r=[US(n[0],n[1],n[2],-1,-2,-3)],i=[],a=[];for(var m=t.length;m--;a.length=0){var g=t[m];h=e[g].uvs;for(var y=r.length;y--;)null!=r[y]&&((o=h[0]-r[y].x)>0&&o*o>r[y].r?(i.push(r[y]),r.splice(y,1)):o*o+(s=h[1]-r[y].y)*s-r[y].r>5e-4||(r[y].i!=r[y].j&&a.push(r[y].i,r[y].j),r[y].j!=r[y].k&&a.push(r[y].j,r[y].k),r[y].k!=r[y].i&&a.push(r[y].k,r[y].i),r.splice(y,1)));HS(e,a);for(var b=a.length;b;){var _=a[--b],x=a[--b];d=e[_].uvs;var E=US(e[x].uvs,d,h,x,_,g);null!=E&&r.push(E)}}for(var w=r.length;w--;)i.push(r[w]);r.length=0;for(var T=i.length;T--;)l=i[T].i,u=i[T].j,c=i[T].k,l>=0&&u>=0&&c>=0&&v.push(l,u,c);return e[-1]=void 0,e[-2]=void 0,e[-3]=void 0,delete e[-1],delete e[-2],delete e[-3],null!=f?zS(e,v,f):v}function GS(e,t,n,r){return!(RS(e,n)||RS(e,r)||RS(t,n)||RS(t,r))&&(!(Math.max(e[0],t[0])<Math.min(n[0],r[0]))&&(!(Math.max(e[1],t[1])<Math.min(n[1],r[1]))&&(!(Math.max(n[0],r[0])<Math.min(e[0],t[0]))&&(!(Math.max(n[1],r[1])<Math.min(e[1],t[1]))&&(!(IS(n,t,e)*IS(t,r,e)<0)&&!(IS(e,r,n)*IS(r,t,n)<0))))))}function WS(e,t,n,r){var i=[],a=r[0],o=r[1],s=r[2],l=e[a].uvs,u=e[o].uvs,c=e[s].uvs,h=e[t].uvs,d=e[n].uvs;return GS(l,u,h,d)||i.push(a,o),GS(u,c,h,d)||i.push(o,s),GS(c,l,h,d)||i.push(s,a),i.length>=6?null:i}function XS(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],a=n[0]-e[0];return r*(n[1]-e[1])-a*i>0}function YS(e,t,n,r){for(var i=[],a=[],o=[],s=t,l=n,u=0,c=r.length;u<c;u+=3){var h=[r[u],r[u+1],r[u+2]];if(h.indexOf(s)>-1&&h.indexOf(l)>-1)return r}for(var d=0,f=r.length;d<f;d+=3){var p=[r[d],r[d+1],r[d+2]],v=WS(e,t,n,p);null!=v&&v.length>0?(i.push.apply(i,p),o=o.concat(v)):a.push.apply(a,p)}for(var m=[],g=0,y=i.length;g<y;g+=3){var b=i[g],_=i[g+1],x=i[g+2];-1===m.indexOf(b)&&m.push(b),-1===m.indexOf(_)&&m.push(_),-1===m.indexOf(x)&&m.push(x)}for(var E=[],w=[],T=0,S=m.length;T<S;T++){var k=m[T];XS(e[k].uvs,e[t].uvs,e[n].uvs)?E.push(k):w.push(k)}E.push(t),E.push(n),w.push(t),w.push(n);for(var C=VS(e,E,o),A=VS(e,w,o),I=0,O=C.length;I<O;I++)a.push(C[I]);for(var P=0,M=A.length;P<M;P++)a.push(A[P]);return a}kS.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};var KS={getVerticesUVs:function(e,t,n,r){var i=[],a=[];for(var o in e){var s=e[o];s&&(r&&r[o]?i.push.apply(i,Ie(r[o])):n&&n[o]?i.push.apply(i,Ie(n[o])):t&&t[o]?i.push.apply(i,Ie(t[o])):i.push.apply(i,Ie(s.vertices)),a.push.apply(a,Ie(s.uvs)))}return{vertices:i,uvs:a}},overPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n},getHull:function(e){var t,n,r=e.length,i=[];for(t=0,r=e.length;t<r;t++)i.push(t);n=i.sort((function(t,n){var r=e[t],i=e[n];return Lf.isNumberEqual(r.x,i.x)?r.y<i.y?-1:1:r.x<i.x?-1:1}));var a=[],o=n[0];for(a.push(o),n.shift(),n.push(o);n.length>0;){var s=l();if(a.push(s),o===s)break}return a;function l(){var i=0,o=a[a.length-1];for(t=0,r=n.length;t<r;t++)if(i!==t&&n[t]!==o){var s=e[o],l=e[n[t]],c=e[n[i]],h=AS(s,l,c);(h>0||0===h&&u(s,l,c))&&(i=t)}var d=n[i];return n.splice(i,1),d}function u(e,t,n){return CS(e,t)<CS(e,n)}},length2:CS,crossProduct:AS,pointNearSegDist:function(e,t,n,r,i,a,o){var s=(i-n)*(e-n)+(a-r)*(t-r);if(s<=0)return!1;var l=(i-n)*(i-n)+(a-r)*(a-r);if(s>=l)return!1;var u=s/l,c=n+(i-n)*u,h=r+(a-r)*u;return(e-c)*(e-c)+(t-h)*(t-h)<o},findTriangle:function(e,t){for(var n=t.triangles,r=0;r<n.length;r+=3)if(n[r]===e||n[r+1]===e||n[r+2]===e)return[n[r],n[r+1],n[r+2]];return null},getTrianglePointAByTrianglePointB:function(e,t,n){var r=function(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=e[4],s=e[5],l=t[0],u=t[1],c=(a-s)*(n-o)+(o-i)*(r-s),h=((a-s)*(l-o)+(o-i)*(u-s))/c,d=((s-r)*(l-o)+(n-o)*(u-s))/c,f=1-h-d;return[h,d,f]}(e,n);return function(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4]*t[2],e[1]*t[0]+e[3]*t[1]+e[5]*t[2]]}(t,r)},getTrianglePointAByTrianglePointB2:OS,getVerticesByUVs:function(e,t,n){var r=t[0],i=t[1],a=t[2],o=[e.points[r].vertices[0],e.points[r].vertices[1],e.points[i].vertices[0],e.points[i].vertices[1],e.points[a].vertices[0],e.points[a].vertices[1]];return OS([e.points[r].uvs[0],e.points[r].uvs[1],e.points[i].uvs[0],e.points[i].uvs[1],e.points[a].uvs[0],e.points[a].uvs[1]],o,n)},getUVsByVertices:function(e,t,n){var r=t[0],i=t[1],a=t[2];return OS([e.points[r].vertices[0],e.points[r].vertices[1],e.points[i].vertices[0],e.points[i].vertices[1],e.points[a].vertices[0],e.points[a].vertices[1]],[e.points[r].uvs[0],e.points[r].uvs[1],e.points[i].uvs[0],e.points[i].uvs[1],e.points[a].uvs[0],e.points[a].uvs[1]],n)},rankOutlines:LS,pointInRankPolygon:FS,pointInPolygon:BS,pointProjectEdge:function(e,t,n,r,i,a){var o=(i-n)*(e-n)+(a-r)*(t-r);if(o<=0)return null;var s=(i-n)*(i-n)+(a-r)*(a-r);if(o>=s)return null;var l=o/s;return[n+(i-n)*l,r+(a-r)*l]},getPointByAnother:function(e,t,n,r,i){return DS(r,i,NS(e,n,t))},pointInTriangle:function(e,t){for(var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[0],t[1]]],r=!1,i=0;i<n.length;i+=1){var a=n[i][0],o=n[i][1],s=n[i][2],l=n[i][3];o>e[1]!==l>e[1]&&e[0]<(s-a)*(e[1]-o)/(l-o)+a&&(r=!r)}return r},customizeTriangulate:function(e,t,n){var r=[],i=[],a=[];for(var o in e)e[o]&&a.push(parseInt(o));for(var s=0,l=a.length;s<l;s++){var u=a[s];if(t.indexOf(u)>-1)r.push(u);else{for(var c=e[u].uvs,h=[],d=0;d<t.length;d++){var f=e[t[d]].uvs;h.push(f[0],f[1])}BS(c,h)?r.push(u):i.push(u)}}for(var p=VS(e,r),v=0,m=t.length;v<m;v+=2)p=YS(e,t[v],t[v+1],p);if(p=zS(e,p,t),n&&n.length>0)for(var g=0,y=n.length;g<y;g+=2)p=YS(e,n[g],n[g+1],p);return p},isLineEqual:function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},crossPointArr:GS,getMeshPointNum:function(e){var t=0;for(var n in e)e[n]&&t++;return t},meshPointToArr:function(e){var t=[];for(var n in e){var r=e[n];r&&t.push({x:r.uvs[0],y:r.uvs[1]})}return t},hullToOutline:function(e){for(var t=[],n=0,r=e.length-1;n<r;n++)t.push(e[n],e[n+1]);return t}},qS=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).image=new Nb,e.mesh=new BE,e.isDirty=!1,e._assetId=-1,e._textures=[],e._pivotX=0,e._pivotY=0,e._data=void 0,e._uvEditMode=!1,e._tint=16777215,e.editMode=void 0,e.addChild(e.image),e}return d(n,[{key:"blendMode",set:function(e){this.image.blendMode=e,this.mesh.blendMode=e}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX=e}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY=e}},{key:"scaleX",get:function(){return this.scale.x},set:function(e){this.scale.x=e}},{key:"scaleY",get:function(){return this.scale.y},set:function(e){this.scale.y=e}},{key:"skewX",get:function(){return this.skew.x},set:function(e){this.skew.x=e}},{key:"skewY",get:function(){return this.skew.y},set:function(e){this.skew.y=e}},{key:"assetId",get:function(){return this._assetId},set:function(e){this._assetId=e,this.data.type!==w.MESH||this._uvEditMode?this.setTexture():this.setMeshTexture()}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.refresh()}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint!==e&&(this._tint=e,this.mesh&&(this.mesh.tint=e),this.image&&(this.image.tint=e))}},{key:"refresh",value:function(){this.data&&(this.data.type!==w.MESH||this._uvEditMode?(this.data.type===w.IMAGE||this._uvEditMode)&&this.refreshImage():this.refreshMesh())}},{key:"refreshMesh",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data.mesh&&(this.removeChildren(),n=this.data.mesh.riggingFFD,r=this.editMode===X.ANIMATION?this.data.mesh.animatedFFD:void 0,i=this.editMode===X.ANIMATION?this.data.mesh.cacheFFD:void 0,a=KS.getVerticesUVs(this.data.mesh.points,r,i,n),this.mesh.geometry.getBuffer("aVertexPosition").update(new Float32Array(a.vertices)),this.mesh.geometry.getBuffer("aTextureCoord").update(new Float32Array(a.uvs)),this.mesh.geometry.getIndex().update(new Uint16Array(this.data.mesh.triangles)),this._data&&void 0!==(null===(t=this.data)||void 0===t?void 0:t.assetId)&&(this.assetId=this.data.assetId),this.addChild(this.mesh));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshImage",value:function(){var e;this.removeChildren(),this._data&&void 0!==(null===(e=this.data)||void 0===e?void 0:e.assetId)&&(this.assetId=this.data.assetId),this.updatePivot(),this.addChild(this.image)}},{key:"getTexture",value:function(){var e=_e(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._textures.length){e.next=19;break}if(null!=(t=this.res)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,t.getImageAsset(this.assetId);case 7:if(n=e.sent){e.next=12;break}return e.next=11,t.getMissingTexture();case 11:n=e.sent;case 12:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(4);case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"setMeshTexture",value:function(){var e=_e(ye().mark((function e(){var t;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.assetId){e.next=5;break}return e.next=3,this.getTexture();case 3:(t=e.sent)&&(this._textures.push(t),this.mesh.texture=this._textures[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTexture",value:function(){var e=_e(ye().mark((function e(){var t,n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.assetId){e.next=5;break}return e.next=3,this.getTexture();case 3:(t=e.sent)&&(this._textures.push(t),this.image.texture=this._textures[0],this._textures[0].once("update",(function(){n.updatePivot()})),this.updatePivot());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePivot",value:function(){this.data&&(this.pivotX=this.data.pivot[0],this.pivotY=this.data.pivot[1]),this.pivot.set(this._pivotX*this.image.texture.width,this._pivotY*this.image.texture.height)}},{key:"res",get:function(){return y2.instance.res}},{key:"dispose",value:function(){}}]),n}(Pb);qS.maxHashCode=1e4;var $S=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._data=void 0,e._over=!1,e._selected=!1,e._curDisplay=void 0,e._uvEditMode=!1,e.editMode=void 0,e}return d(n,[{key:"data",get:function(){return this._data},set:function(e){if(this.clear(),this._data=e,this.refresh(),e){var t=this.curGlobalTransform;t||(t=this.curTransform,this.curDisplay&&this.curAlpha),t&&(this.x=t.x,this.y=t.y,this._uvEditMode?(this.scale.set(1,1),this.skew.set(0,0)):(this.scale.set(t.scaleX,t.scaleY),this.skew.set(-t.skewX,t.skewY)))}}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"curDisplay",get:function(){if(this.data){var e=this.data.displayIndex;this.editMode===X.ANIMATION&&(void 0!==this.data.cacheDisplayIndex?e=this.data.cacheDisplayIndex:void 0!==this.data.animatedDisplayIndex&&(e=this.data.animatedDisplayIndex));var t=this.data.displays.ids[e];return this.data.displays.map[t]}return null}},{key:"curColor",get:function(){if(this.data){var e=void 0===this.data.color?16777215:this.data.color;return this.editMode===X.ANIMATION&&(void 0!==this.data.cacheColor?e=this.data.cacheColor:void 0!==this.data.animatedColor&&(e=this.data.animatedColor)),e}return 16777215}},{key:"curAlpha",get:function(){if(this.data){var e=void 0===this.data.alpha?1:this.data.alpha;return this.editMode===X.ANIMATION&&(void 0!==this.data.cacheAlpha?e=this.data.cacheAlpha:void 0!==this.data.animatedAlpha&&(e=this.data.animatedAlpha)),e}return 0}},{key:"curBlendMode",get:function(){if(this.data){var e=Jf.NORMAL;if(void 0!==this.data.blendMode)switch(this.data.blendMode){case E.Normal:e=Jf.NORMAL;break;case E.Add:e=Jf.ADD;break;case E.Multiply:e=Jf.MULTIPLY;break;case E.Screen:e=Jf.SCREEN;break;case E.Overlay:e=Jf.OVERLAY;break;case E.Darken:e=Jf.DARKEN;break;case E.Lighten:e=Jf.LIGHTEN;break;case E.Erase:e=Jf.ERASE}return e}return Jf.NORMAL}},{key:"curGlobalTransform",get:function(){return this.curDisplay?this.curDisplay.globalTransform:null}},{key:"curTransform",get:function(){return this.curDisplay?this.curDisplay.transform:null}},{key:"over",set:function(e){this._over!==e&&(this._over=e,this.refreshOverSelect())}},{key:"selected",set:function(e){this._selected!==e&&(this._selected=e,this.refreshOverSelect())}},{key:"clear",value:function(){this._curDisplay&&(this.removeChild(this._curDisplay),this._curDisplay=void 0)}},{key:"refresh",value:function(){if(this.data){var e=this.curDisplay,t=this.curAlpha,n=this.curColor,r=new qS;r.uvEditMode=this._uvEditMode,r.editMode=this.editMode,r.data=e,r.alpha=t,r.tint=n,r.blendMode=this.curBlendMode,this._curDisplay=r,this.addChild(r)}}},{key:"refreshOverSelect",value:function(){this._curDisplay&&(this._over&&this._selected?this.filters=[new vS(2,Uf.COLOR_SELECT_OVER_RECT)]:this._selected?this.filters=[new vS(2,Uf.COLOR_SELECT_RECT)]:this._over?this.filters=[new vS(2,Uf.COLOR_OVER_RECT)]:this.filters=[])}}]),n}(Pb),ZS=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this))._app=void 0,r._center=void 0,r._slotDataList=[],r._overSlotId=0,r._selectedSlotIds=[],r._slotList=[],r._slotListPool=new kT($S),r._hideSlotIds=[],r._uvEditMode=!1,r.editMode=void 0,r._dopesheetMouseDown=!1,r._app=e,r._center=new Hm(0,0),r._width=0,r._height=0,r.initEvent(),r}return d(n,[{key:"initEvent",value:function(){var e=this;y2.instance&&y2.instance.eventBus&&(y2.instance.eventBus.on("dopesheetMouseUp",(function(){e._dopesheetMouseDown=!1}),this),y2.instance.eventBus.on("dopesheetMouseDown",(function(){e._dopesheetMouseDown=!0}),this))}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"slots",set:function(e){this._slotDataList=e,this.refresh()}},{key:"overSlotId",set:function(e){this._overSlotId!==e&&(this._overSlotId=e,this.refreshSlotOverAndSelect())}},{key:"selectedSlotIds",set:function(e){this._selectedSlotIds=e,this.refreshSlotOverAndSelect()}},{key:"hideSlotIds",set:function(e){this._hideSlotIds=e,this.refresh()}},{key:"refreshSlotOverAndSelect",value:function(){for(var e=0,t=this._slotList.length;e<t;e++){var n=this._slotList[e];n.data&&(n.over=n.data.id===this._overSlotId,n.selected=this._selectedSlotIds.indexOf(n.data.id)>=0)}}},{key:"stopOverCheck",value:function(){for(var e=0,t=this._slotList.length;e<t;e++){var n=this._slotList[e];n.removeAllListeners("mouseover"),n.removeAllListeners("mouseout")}}},{key:"startOvercheck",value:function(){for(var e=this,t=function(){var t=e._slotList[n];t.addEventListener("mouseover",(function(n){var r;e.emit(K.OVER_SLOT,null===(r=t.data)||void 0===r?void 0:r.id)})),t.addEventListener("mouseout",(function(){e.emit(K.OUT_SLOT)}))},n=0,r=this._slotList.length;n<r;n++)t()}},{key:"refresh",value:function(){var e=this;this.clear();for(var t=function(){var t=e._slotDataList[n];if(e._hideSlotIds&&e._hideSlotIds.indexOf(t.id)>=0)return"continue";var r=e._slotListPool.get();r.visible=!0,r.uvEditMode=e._uvEditMode,r.editMode=e.editMode,r.eventMode="static",r.data=t,e.addChild(r),r.addEventListener("mouseover",(function(n){e._dopesheetMouseDown||e.emit(K.OVER_SLOT,t.id)})),r.addEventListener("mouseout",(function(){e._dopesheetMouseDown||e.emit(K.OUT_SLOT)})),e._slotList.push(r)},n=0,r=this._slotDataList.length;n<r;n++)t();this.refreshSlotOverAndSelect()}},{key:"clear",value:function(){this.stopOverCheck(),this._slotListPool.clearArray(this._slotList),this._slotList.length=0,this.children.length=0}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.x=e,this._center.y=t,this.x=e,this.y=t}},{key:"setScale",value:function(e){this.scale.set(e)}}]),n}(Pb),QS=function(e){return e.aa="url(assets/run.png),auto",e.hand="pointer",e.default="default",e.auto="auto",e.crosshair="crosshair",e.pointer="pointer",e.move="move",e.e_resize="e-resize",e.ne_resize="ne-resize",e.nw_resize="nw-resize",e.n_resize="n-resize",e.se_resize="se-resize",e.sw_resize="sw-resize",e.s_resize="s-resize",e.w_resize="w-resize",e.col_resize="col-resize",e.row_resize="row-resize",e.text="text",e.wait="wait",e.help="help",e}({}),JS=function(){function e(){l(this,e)}return d(e,null,[{key:"setCursor",value:function(t){e.pixiLayer.style.cursor=t,e.dopeLayer&&(e.dopeLayer.style.cursor=t)}},{key:"setDisplayCursor",value:function(t,n){t.on("mouseover",(function(t){e.setCursor(n),t.stopPropagation()})),t.on("mouseout",(function(){e.setCursor(QS.auto)}))}}]),e}();JS.pixiLayer=void 0,JS.dopeLayer=void 0;var ek={x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:1,height:1,pivotX:0,pivotY:0},tk=function(e){return e[e.DRAGONBONES=0]="DRAGONBONES",e[e.NORMAL=1]="NORMAL",e[e.XY=2]="XY",e[e.SCALE=3]="SCALE",e[e.ROTATION=4]="ROTATION",e[e.SKEW=5]="SKEW",e[e.FRAME_8=6]="FRAME_8",e[e.X=7]="X",e[e.Y=8]="Y",e[e.SCALE_X=9]="SCALE_X",e[e.SCALE_Y=10]="SCALE_Y",e[e.SKEW_X=11]="SKEW_X",e[e.SKEW_Y=12]="SKEW_Y",e}({}),nk=function(e){return e[e.LOCAL=0]="LOCAL",e[e.GLOBAL=1]="GLOBAL",e[e.PARENT=2]="PARENT",e}({}),rk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).displayHandler=void 0,e.moveXHandler=void 0,e.moveYHandler=void 0,e.moveHandler=void 0,e.scaleXHandler=void 0,e.scaleYHandler=void 0,e.scaleHandler=void 0,e.rotationHandler=void 0,e.pivotHandler=void 0,e.scaleLeftTop=void 0,e.scaleCenterTop=void 0,e.scaleRightTop=void 0,e.scaleLeftMiddle=void 0,e.scaleRightMiddle=void 0,e.scaleLeftBottom=void 0,e.scaleCenterBottom=void 0,e.scaleRightBottom=void 0,e._transforming=!1,e._type=tk.DRAGONBONES,e._overX=!1,e._overY=!1,e._overScaleX=!1,e._overScaleY=!1,e._overScale=!1,e._overRotation=!1,e._offScaleX=1,e._offScaleY=1,e._target=void 0,e._targetCameraTransform=Pe({},ek),e.cameraTransform=new ig,e._downPos={x:0,y:0},e._coordinateType=nk.GLOBAL,e.onXOver=function(){e._overX=!0,e.transforming||e.drawMoveXHandler()},e.onXOut=function(){e._overX=!1,e.transforming||e.drawMoveXHandler()},e.onYOver=function(){e._overY=!0,e.transforming||e.drawMoveYHandler()},e.onYOut=function(){e._overY=!1,e.transforming||e.drawMoveYHandler()},e.onScaleXOver=function(){e._overScaleX=!0,e.transforming||e.drawScaleXHandler()},e.onScaleXOut=function(){e._overScaleX=!1,e.transforming||e.drawScaleXHandler()},e.onScaleYOver=function(){e._overScaleY=!0,e.transforming||e.drawScaleYHandler()},e.onScaleYOut=function(){e._overScaleY=!1,e.transforming||e.drawScaleYHandler()},e.onScaleOver=function(){e._overScale=!0,e.transforming||e._type===tk.DRAGONBONES&&e.drawScaleAllHandler()},e.onScaleOut=function(){e._overScale=!1,e.transforming||e._type===tk.DRAGONBONES&&e.drawScaleAllHandler()},e.onRotationOver=function(){e._overRotation=!0,e.transforming||e.drawRotationHandler()},e.onRotationOut=function(){e._overRotation=!1,e.transforming||e.drawRotationHandler()},e.displayHandler=new SE,e.moveXHandler=new SE,e.moveYHandler=new SE,e.moveHandler=new SE,e.scaleXHandler=new SE,e.scaleYHandler=new SE,e.scaleHandler=new SE,e.rotationHandler=new SE,e.pivotHandler=new SE,e.scaleLeftTop=new SE,e.scaleCenterTop=new SE,e.scaleRightTop=new SE,e.scaleLeftMiddle=new SE,e.scaleRightMiddle=new SE,e.scaleLeftBottom=new SE,e.scaleCenterBottom=new SE,e.scaleRightBottom=new SE,e.addChild(e.displayHandler),e.addChild(e.moveHandler),e.addChild(e.moveXHandler),e.addChild(e.moveYHandler),e.addChild(e.scaleHandler),e.addChild(e.scaleXHandler),e.addChild(e.scaleYHandler),e.addChild(e.scaleLeftTop),e.addChild(e.scaleCenterTop),e.addChild(e.scaleRightTop),e.addChild(e.scaleLeftMiddle),e.addChild(e.scaleRightMiddle),e.addChild(e.scaleLeftBottom),e.addChild(e.scaleCenterBottom),e.addChild(e.scaleRightBottom),e.addChild(e.rotationHandler),e.addChild(e.pivotHandler),e.updateType(),e.moveXHandler.eventMode="static",e.moveYHandler.eventMode="static",e.moveHandler.eventMode="static",e.scaleXHandler.eventMode="static",e.scaleYHandler.eventMode="static",e.scaleHandler.eventMode="static",e.rotationHandler.eventMode="static",e.pivotHandler.eventMode="static",e.scaleLeftTop.eventMode="static",e.scaleCenterTop.eventMode="static",e.scaleRightTop.eventMode="static",e.scaleLeftMiddle.eventMode="static",e.scaleRightMiddle.eventMode="static",e.scaleLeftBottom.eventMode="static",e.scaleCenterBottom.eventMode="static",e.scaleRightBottom.eventMode="static",e.moveXHandler.on("mouseover",e.onXOver,m(e)),e.moveXHandler.on("mouseout",e.onXOut,m(e)),e.moveYHandler.on("mouseover",e.onYOver,m(e)),e.moveYHandler.on("mouseout",e.onYOut,m(e)),e.scaleXHandler.on("mouseover",e.onScaleXOver,m(e)),e.scaleXHandler.on("mouseout",e.onScaleXOut,m(e)),e.scaleYHandler.on("mouseover",e.onScaleYOver,m(e)),e.scaleYHandler.on("mouseout",e.onScaleYOut,m(e)),e.scaleHandler.on("mouseover",e.onScaleOver,m(e)),e.scaleHandler.on("mouseout",e.onScaleOut,m(e)),e.rotationHandler.on("mouseover",e.onRotationOver,m(e)),e.rotationHandler.on("mouseout",e.onRotationOut,m(e)),JS.setDisplayCursor(e.scaleXHandler,QS.e_resize),JS.setDisplayCursor(e.scaleYHandler,QS.s_resize),JS.setDisplayCursor(e.moveHandler,QS.move),e.target=void 0,e}return d(n,[{key:"target",get:function(){return this._target},set:function(e){this._target=e,this.updateTarget()}},{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this.updateType())}},{key:"transforming",get:function(){return this._transforming},set:function(e){this._transforming=e,e||(this.updateType(),this.offScaleX=1,this.offScaleY=1)}},{key:"offScaleX",set:function(e){this._offScaleX!==e&&(this._offScaleX=e,this.scaleXHandler.visible&&this.drawScaleXHandler())}},{key:"offScaleY",set:function(e){this._offScaleY!==e&&(this._offScaleY=e,this.scaleYHandler.visible&&this.drawScaleYHandler())}},{key:"updateType",value:function(){switch(this.moveXHandler.visible=!1,this.moveYHandler.visible=!1,this.scaleXHandler.visible=!1,this.scaleYHandler.visible=!1,this.scaleHandler.visible=!1,this.rotationHandler.visible=!1,this.scaleLeftTop.visible=!1,this.scaleCenterTop.visible=!1,this.scaleRightTop.visible=!1,this.scaleLeftMiddle.visible=!1,this.scaleRightMiddle.visible=!1,this.scaleLeftBottom.visible=!1,this.scaleCenterBottom.visible=!1,this.scaleRightBottom.visible=!1,this._type){case tk.DRAGONBONES:this.drawMoveXHandler(),this.drawMoveYHandler(),this.drawMoveHandler(),this.drawScaleAllHandler();break;case tk.NORMAL:this.drawScaleXHandler(),this.drawScaleYHandler(),this.drawScaleHandler(),this.drawRotationHandler(),this.drawPivotHandler();break;case tk.XY:this.drawMoveXHandler(),this.drawMoveYHandler();break;case tk.SCALE:this.drawScaleXHandler(),this.drawScaleYHandler(),this.drawScaleHandler();break;case tk.ROTATION:this.drawRotationHandler();break;case tk.SKEW:break;case tk.FRAME_8:this.refreshFrame8()}}},{key:"updateSize",value:function(e,t,n,r){this.moveHandler.clear(),this.moveHandler.lineStyle(1,Uf.SELECTED_LINE_COLOR,1,.5),this.moveHandler.beginFill(0,0);var i=-n*e,a=-r*t;this.moveHandler.drawRect(i,a,e,t),this.moveHandler.endFill(),this.moveHandler.hitArea=new zm(i,a,e,t)}},{key:"refreshFrame8",value:function(){var e=Uf.HANDLER_SCALE;this.drawScaleLeftTop(this.scaleLeftTop,e),this.drawScaleCenterTop(this.scaleCenterTop,e),this.drawScaleRightTop(this.scaleRightTop,e),this.drawScaleLeftMiddle(this.scaleLeftMiddle,e),this.drawScaleRightMiddle(this.scaleRightMiddle,e),this.drawScaleLeftBottom(this.scaleLeftBottom,e),this.drawScaleCenterBottom(this.scaleCenterBottom,e),this.drawScaleRightBottom(this.scaleRightBottom,e),this.drawRotationHandler(),this.drawPivotHandler(),this.drawMove()}},{key:"drawMoveXHandler",value:function(){this.moveXHandler.visible=!0;var e=Uf.HANDLER_X_MOVE,t=Uf.HANDLER_NORMAL;this._overX&&(e=Uf.HANDLER_OVER_2),this.moveXHandler.clear(),this.moveXHandler.lineStyle(1,t,0),this.moveXHandler.beginFill(e),this.drawMoveX(this.moveXHandler),this.moveXHandler.endFill()}},{key:"drawMoveYHandler",value:function(){this.moveYHandler.visible=!0;var e=Uf.HANDLER_Y_MOVE,t=Uf.HANDLER_NORMAL;this._overY&&(e=Uf.HANDLER_OVER_2),this.moveYHandler.clear(),this.moveYHandler.lineStyle(1,t,0),this.moveYHandler.beginFill(e),this.drawMoveY(this.moveYHandler),this.moveYHandler.endFill()}},{key:"drawMoveHandler",value:function(){this.moveHandler.visible=!0;var e=Uf.HANDLER_MOVE,t=1,n=Uf.HANDLER_NORMAL,r=1;this.moveHandler.clear(),this.moveHandler.rotation=0,this._targetCameraTransform.width>0&&this._targetCameraTransform.height>0?(n=Uf.HANDLER_MOVE,r=1,t=.01,this.moveHandler.lineStyle(1,n,r),this.moveHandler.beginFill(e,t),this.moveHandler.drawRect(.5*-this._targetCameraTransform.width,.5*-this._targetCameraTransform.height,this._targetCameraTransform.width,this._targetCameraTransform.height),this.moveHandler.rotation=this._targetCameraTransform.rotation):(this.moveHandler.lineStyle(1,n,r),this.moveHandler.beginFill(e,t),this.moveHandler.drawCircle(0,0,5)),this.moveHandler.endFill()}},{key:"drawScaleXHandler",value:function(){this.scaleXHandler.visible=!0;var e=Uf.HANDLER_X_SCALE,t=Uf.HANDLER_NORMAL;this._overScaleX&&(e=Uf.HANDLER_OVER),this.scaleXHandler.clear(),this.scaleXHandler.lineStyle(1,t,0),this.scaleXHandler.beginFill(e),this.drawScaleX(this.scaleXHandler,this._offScaleX),this.scaleXHandler.endFill()}},{key:"drawScaleYHandler",value:function(){this.scaleYHandler.visible=!0;var e=Uf.HANDLER_Y_SCALE,t=Uf.HANDLER_NORMAL;this._overScaleY&&(e=Uf.HANDLER_OVER),this.scaleYHandler.clear(),this.scaleYHandler.lineStyle(1,t,0),this.scaleYHandler.beginFill(e),this.drawScaleY(this.scaleYHandler,this._offScaleY),this.scaleYHandler.endFill()}},{key:"drawScaleAllHandler",value:function(){this.scaleHandler.visible=!0;var e=Uf.HANDLER_SCALE_ALL,t=Uf.HANDLER_NORMAL;this._overScale&&(e=Uf.HANDLER_OVER_2),this.scaleHandler.clear(),this.scaleHandler.lineStyle(1,t,0),this.scaleHandler.beginFill(e),this.drawScaleAll(this.scaleHandler,this._offScaleY),this.scaleHandler.endFill(),this.scaleHandler.angle=-45}},{key:"drawScaleHandler",value:function(){this.scaleHandler.angle=0,this.scaleHandler.visible=!0;var e=Uf.HANDLER_SCALE,t=Uf.HANDLER_NORMAL;this.scaleHandler.clear(),this.scaleHandler.lineStyle(1,t,0),this.scaleHandler.beginFill(e,.1),this.drawScale(this.scaleHandler),this.scaleHandler.endFill()}},{key:"drawRotationHandler",value:function(){this.rotationHandler.visible=!0;var e=Uf.HANDLER_ROTATION,t=Uf.HANDLER_ROTATION;this._overRotation&&(e=Uf.HANDLER_OVER,t=Uf.HANDLER_OVER);this.rotationHandler.clear(),this.rotationHandler.lineStyle(1,t,1),this.rotationHandler.beginFill(e,1),this.drawRotation(this.rotationHandler),this.rotationHandler.endFill()}},{key:"drawMoveX",value:function(e){e.moveTo(5,1),e.lineTo(50,1),e.lineTo(55,6),e.lineTo(70,0),e.lineTo(55,-6),e.lineTo(50,-1),e.lineTo(5,-1),e.lineTo(5,1)}},{key:"drawMoveY",value:function(e){e.moveTo(1,5),e.lineTo(1,50),e.lineTo(6,55),e.lineTo(0,70),e.lineTo(-6,55),e.lineTo(-1,50),e.lineTo(-1,5),e.lineTo(1,5)}},{key:"drawScaleX",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(-5,1),e.lineTo(-n,1),e.lineTo(-(n+5),6),e.lineTo(-(n+r),6),e.lineTo(-(n+r),-6),e.lineTo(-(n+5),-6),e.lineTo(-n,-1),e.lineTo(-5,-1),e.lineTo(-5,1)}},{key:"drawScaleY",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(1,-5),e.lineTo(1,-n),e.lineTo(6,-(n+5)),e.lineTo(6,-(n+r)),e.lineTo(-6,-(n+r)),e.lineTo(-6,-(n+5)),e.lineTo(-1,-n),e.lineTo(-1,-5),e.lineTo(1,-5)}},{key:"drawScaleAll",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(1,-5),e.lineTo(1,-n),e.lineTo(6,-(n+5)),e.lineTo(6,-(n+r)),e.lineTo(-6,-(n+r)),e.lineTo(-6,-(n+5)),e.lineTo(-1,-n),e.lineTo(-1,-5),e.lineTo(1,-5)}},{key:"drawRotation",value:function(e){var t=60,n=0,r=5,i=0;if(this._type===tk.FRAME_8)t=r=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,n=(i=-(this._targetCameraTransform.anchorY||0))-50;e.moveTo(r,i),e.lineTo(t,n),e.drawCircle(t,n,5)}},{key:"drawScale",value:function(e){var t=10;e.moveTo(-10,-10);for(var n=0,r=50,i=1;i<51;i++)n=40*Math.sin(.5*Math.PI/50*i+Math.PI)-t,r=40*Math.cos(.5*Math.PI/50*i+Math.PI)-t,e.lineTo(n,r);e.lineTo(-10,-10)}},{key:"drawMove",value:function(){this.drawMoveHandler()}},{key:"drawPivotHandler",value:function(){this.pivotHandler.visible=!0;var e=Uf.HANDLER_PIVOT,t=Uf.HANDLER_PIVOT_LINE;this.pivotHandler.clear(),this.pivotHandler.lineStyle(1,t,1),this.pivotHandler.beginFill(e,.5),this.pivotHandler.drawCircle(0,0,5),this.pivotHandler.moveTo(0,5),this.pivotHandler.lineTo(0,-5),this.pivotHandler.moveTo(5,0),this.pivotHandler.lineTo(-5,0),this.pivotHandler.endFill()}},{key:"drawScaleFrame8Handler",value:function(e,t){e.clear(),e.beginFill(t,1),e.drawCircle(0,0,5),e.endFill(),e.visible=!0}},{key:"drawScaleLeftTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleCenterTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleRightTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleLeftMiddle",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)+.5*this._targetCameraTransform.height}},{key:"drawScaleRightMiddle",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+.5*this._targetCameraTransform.height}},{key:"drawScaleLeftBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"drawScaleCenterBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"drawScaleRightBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"updateTarget",value:function(){if(this._target){switch(this.updateCameraTransform(),this._type===tk.FRAME_8?this.refreshFrame8():this._type===tk.DRAGONBONES&&this.drawMove(),this.x=this._targetCameraTransform.x,this.y=this._targetCameraTransform.y,this._coordinateType){case nk.LOCAL:this.rotation=this._targetCameraTransform.rotation;break;case nk.GLOBAL:case nk.PARENT:this.rotation=0}this.visible=!0}else this.visible=!1}},{key:"updateCameraTransform",value:function(){this._target&&(!function(e,t){t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.rotation=e.rotation,t.skewX=e.skewX,t.skewY=e.skewY,t.width=e.width,t.height=e.height,t.pivotX=e.pivotX,t.pivotY=e.pivotY}(this._target,this._targetCameraTransform),this._targetCameraTransform.x=this._target.x*this.cameraTransform.scale.x+this.cameraTransform.position.x,this._targetCameraTransform.y=this._target.y*this.cameraTransform.scale.y+this.cameraTransform.position.y,this._targetCameraTransform.width=this._target.width*this._target.scaleX*this.cameraTransform.scale.x,this._targetCameraTransform.height=this._target.height*this._target.scaleY*this.cameraTransform.scale.y,this._targetCameraTransform.pivotX=this._target.pivotX,this._targetCameraTransform.pivotY=this._target.pivotY,this._targetCameraTransform.anchorX=this._target.pivotX*this._targetCameraTransform.width,this._targetCameraTransform.anchorY=this._target.pivotY*this._targetCameraTransform.height)}}]),n}(Pb),ik=function(e){return e[e.OVER=0]="OVER",e[e.NORMAL=1]="NORMAL",e[e.SELECT=2]="SELECT",e}({}),ak=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._color=65280,e._poseType=ik.OVER,e.eventMode="static",e.poseType=ik.NORMAL,e.on("mouseover",e.onMouseOver,m(e)),e.on("mouseout",e.onMouseOut,m(e)),e}return d(n,[{key:"poseType",get:function(){return this._poseType},set:function(e){if(this._poseType!==e&&(this._poseType!==ik.SELECT||e!==ik.OVER)){switch(this._poseType=e,e){case ik.OVER:this._color=16711680;break;case ik.NORMAL:this._color=65280;break;case ik.SELECT:this._color=255}this.drawPose()}}},{key:"onMouseOver",value:function(){this.poseType=ik.OVER}},{key:"onMouseOut",value:function(){this._poseType!==ik.SELECT&&(this.poseType=ik.NORMAL)}},{key:"drawPose",value:function(){var e=this._color;this.clear(),this.lineStyle(2,e),this.beginFill(16777215,.1),this.drawCircle(0,0,4),this.endFill(),this.lineStyle(2,e),this.moveTo(-5,-5),this.lineTo(-3,-3),this.moveTo(3,3),this.lineTo(5,5),this.moveTo(5,-5),this.lineTo(3,-3),this.moveTo(-3,3),this.lineTo(-5,5),this.endFill()}}]),n}(SE),ok=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._center=new Hm,e._bgOffX=0,e._bgOffY=0,e._showHeight=0,e._showWidth=0,e._scale=1,e.overRect=void 0,e.frameRect=void 0,e.helpRect0=new zm,e.helpTransform0=new ig,e.overLayer=void 0,e.selectLayer=void 0,e.transformHandler=new rk,e.meshTransformHandler=new rk,e.poseHandler=new ak,e._posePos={x:0,y:0},e.overLayer=new Pb,e.selectLayer=new Pb,e.addChild(e.selectLayer),e.addChild(e.overLayer),e.overRect=new SE,e.frameRect=new SE,e.overLayer.addChild(e.frameRect),e.overLayer.addChild(e.overRect),e.overLayer.addChild(e.transformHandler),e.overLayer.addChild(e.meshTransformHandler),e.meshTransformHandler.type=tk.XY,e}return d(n,[{key:"resizeStage",value:function(e,t){this._showWidth===e&&this._showHeight===t||(this._showWidth=e,this._showHeight=t)}},{key:"refreshStage",value:function(){this.poseHandler&&this.poseHandler.parent&&this.showPoseHandler(this._posePos.x,this._posePos.y)}},{key:"setCenter",value:function(e,t){this._center.set(e,t),this.refreshStage()}},{key:"setScale",value:function(e){this._scale=e,this.refreshStage()}},{key:"drawFrameSelect",value:function(e,t,n,r){var i=Math.min(e,n),a=Math.max(e,n),o=Math.min(t,r),s=Math.max(t,r);i===a||o===s?this.frameRect.visible=!1:(this.frameRect.clear(),this.frameRect.lineStyle(1,Uf.SELECTED_LINE_COLOR,1),this.frameRect.drawRect(i,o,a-i,s-o),this.frameRect.visible=!0)}},{key:"clearFrameSelect",value:function(){this.frameRect.visible=!1}},{key:"showPoseHandler",value:function(e,t){this._posePos.x=e,this._posePos.y=t,this.helpTransform0.position.set(this._center.x,this._center.y),this.helpTransform0.scale.set(this._scale,this._scale),this.helpTransform0.rotation=0,this.helpTransform0.updateLocalTransform();var n=this.helpTransform0.localTransform.apply(this._posePos);this.poseHandler.x=n.x,this.poseHandler.y=n.y,this.overLayer.addChild(this.poseHandler)}},{key:"hidePoseHandler",value:function(){this.poseHandler.parent&&this.overLayer.removeChild(this.poseHandler)}}]),n}(Pb),sk=function(e){p(n,gmvc.ViewController);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).store=y2.instance.store,e._enable=!1,e._cacheEnable=!1,e._pausing=!1,e}return d(n,[{key:"enable",set:function(e){this._pausing?this._cacheEnable=e:this._enable!==e&&(e?this.start():this.stop(),this._enable=!this._enable)}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"pause",value:function(){this._pausing||(this._cacheEnable=this._enable,this.enable=!1,this._pausing=!0)}},{key:"resume",value:function(){this._pausing&&(this._pausing=!1,this.enable=this._cacheEnable)}}]),n}(),lk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).rectSelecting=!1,e._downRectSelectPos={x:0,y:0},e._downStagePos={x:0,y:0},e._rightDownStagePos={x:0,y:0},e._rectSelectAdd=!1,e._cacheBoneSelectIds=[],e._cacheSlotSelectIds=[],e._mouseDown=!1,e._readyRectSelect=!1,e._selectBoneEnable=!1,e._selectSlotEnable=!1,e._selectFrameEnable=!1,e._selectOneEnable=!1,e._overBoneEnable=!1,e._overSlotEnable=!1,e._selectOneBone=!1,e._selectOneSlot=!1,e._notBeginMerge=!1,e._selectBoneChains=void 0,e._selectSlotChain=void 0,e.reFrameSelectEnable=!1,e.onOverBone=function(t){e._overBoneEnable&&e.store.commit(V.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(V.OVER_BONE,0)},e.onOverSlot=function(t){e._overSlotEnable&&e.store.commit(F.OVER_SLOT,t)},e.onOutSlot=function(){e.store.commit(F.OVER_SLOT,0)},e.onMouseMove=function(t){e._mouseDown&&(e.rectSelecting?e.updateRectSelect(t.data):e._readyRectSelect&&e.startRectSelect(t.data))},e.selectOne=function(t){var n=t.data.nativeEvent,r=n.ctrlKey||n.metaKey,i=e.store.state.editor.over.overSlotId,a=e.store.state.editor.over.overBone;if(r){if(a>0){var o=e.store.state.runtime.editing.selectedBoneIds,s=o.concat(),l=o.indexOf(a);-1===l?s.push(a):s.splice(l,1),e.store.dispatch(z.SELECT_BONES,s)}if(i>0){var u=e.store.state.runtime.editing.selectedSlotIds,c=u.concat(),h=u.indexOf(i);-1===h?c.push(i):c.splice(h,1),e.store.dispatch(L.SELECT_SLOTS,c)}}else i>0&&e.store.dispatch(L.SELECT_ONE_SLOT,[i]),a>0&&e.store.dispatch(z.SELECT_ONE_BONE,[a])},e.onSelectBoneChange=function(t){e._selectBoneChains=null,e._selectSlotChain=null},e.onMouseDown=function(t){var n=e.store.state.editor.over.overBone,r=e.store.state.editor.over.overSlotId;e._downStagePos.x=t.data.stagePos.x,e._downStagePos.y=t.data.stagePos.y,n>0||r>0||(e.preRectSelect(t.data),e._mouseDown=!0)},e.onRightDown=function(t){var n=t.data.stagePos.x,r=t.data.stagePos.y;e._rightDownStagePos.x=n,e._rightDownStagePos.y=r},e.onRightUp=function(t){var n=t.data.stagePos.x,r=t.data.stagePos.y;n===e._rightDownStagePos.x&&r===e._rightDownStagePos.y&&(e.store.state.runtime.editing.selectedBoneIds.length>0&&e.store.dispatch(z.SELECT_BONES,[]),e.store.state.runtime.editing.selectedSlotIds.length>0&&e.store.dispatch(L.SELECT_SLOTS,[]))},e.onMouseUp=function(t){e._mouseDown=!1,e._readyRectSelect=!1,e.rectSelecting&&(e.stopRectSelect(),e._notBeginMerge&&(e._notBeginMerge=!1,e.store.historyEndMerge()))},e}return d(n,[{key:"getSelectBoneChains",value:function(){if(this._selectBoneChains)return this._selectBoneChains;var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.getCurArmature();if(e.length>1)this._selectBoneChains=Qw.getBoneChains(t,e);else if(1===e.length){var n=t.bones.map[e[0]];this._selectBoneChains=[[n]]}return this._selectBoneChains}},{key:"getSelectSlotChain",value:function(){if(this._selectSlotChain)return this._selectSlotChain;for(var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.state.runtime.editing.selectedSlotIds,n=this.store.getCurArmature(),r=[],i=0,a=t.length;i<a;i++){var o=t[i],s=n.slots.map[o];-1===e.indexOf(s.parentId)&&r.push(s)}return r.length>0&&(this._selectSlotChain=r),this._selectSlotChain}},{key:"start",value:function(){this.selectBoneEnable=!0,this.selectSlotEnable=!0,this.selectOneEnable=!0,this.selectFrameEnable=!0,this.overEnable=!0,this._addNotification(W.MOUSE_DOWN,this.selectOne),this._addNotification(V.SELECT_BONES,this.onSelectBoneChange),this._addNotification(N.SELECT_ARMATURE,this.onSelectBoneChange),this._addNotification(F.SELECT_SLOTS,this.onSelectBoneChange),this._addNotification(H.SELECT_DISPLAY,this.onSelectBoneChange)}},{key:"stop",value:function(){this.selectBoneEnable=!1,this.selectSlotEnable=!1,this.selectOneEnable=!1,this.selectFrameEnable=!1,this._removeNotification(W.MOUSE_DOWN,this.selectOne)}},{key:"selectOneBone",set:function(e){if(this._selectOneBone!==e){this._selectOneBone=e;var t=this.view.getView(CT);this._selectOneBone?(t.on(K.OVER_BONE,this.onOverBone,this),t.on(K.OUT_BONE,this.onOutBone,this)):(t.off(K.OVER_BONE),t.off(K.OUT_BONE))}}},{key:"selectOneSlot",set:function(e){if(this._selectOneSlot!==e){this._selectOneSlot=e;var t=this.view.getView(ZS);this._selectOneSlot?(t.on(K.OVER_SLOT,this.onOverSlot,this),t.on(K.OUT_SLOT,this.onOutSlot,this)):(t.off(K.OVER_SLOT),t.off(K.OUT_SLOT))}}},{key:"overEnable",set:function(e){this._overBoneEnable=e,this._overSlotEnable=e}},{key:"selectBoneEnable",set:function(e){this._selectBoneEnable!==e&&(this._selectBoneEnable=e,this.selectOneBone=this._selectBoneEnable&&this._selectOneEnable)}},{key:"selectSlotEnable",set:function(e){this._selectSlotEnable!==e&&(this._selectSlotEnable=e,this.selectOneSlot=this._selectSlotEnable&&this._selectOneEnable)}},{key:"selectFrameEnable",set:function(e){this._selectFrameEnable!==e&&(this._selectFrameEnable=e,this._selectFrameEnable?(this._addNotification(W.MOUSE_MOVE,this.onMouseMove),this._addNotification(W.MOUSE_DOWN,this.onMouseDown),this._addNotification(W.MOUSE_UP,this.onMouseUp),this._addNotification(W.RIGHT_DOWN,this.onRightDown),this._addNotification(W.RIGHT_UP,this.onRightUp)):(this._removeNotification(W.MOUSE_MOVE,this.onMouseMove),this._removeNotification(W.MOUSE_DOWN,this.onMouseDown),this._removeNotification(W.MOUSE_UP,this.onMouseUp),this._removeNotification(W.RIGHT_DOWN,this.onRightDown),this._removeNotification(W.RIGHT_UP,this.onRightUp)))}},{key:"selectOneEnable",set:function(e){this._selectOneEnable!==e&&(this._selectOneEnable=e,this.selectOneBone=this._selectBoneEnable&&this._selectOneEnable,this.selectOneSlot=this._selectSlotEnable&&this._selectOneEnable)}},{key:"startRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;t===this._downStagePos.x&&n===this._downStagePos.y||(this.rectSelecting=!0)}},{key:"preRectSelect",value:function(e){var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.state.runtime.editing.selectedSlotIds,r=e.nativeEvent;if(this._rectSelectAdd=r.ctrlKey||r.metaKey,this.reFrameSelectEnable||this._rectSelectAdd||!(t.length>0||n.length>0)){if(0===t.length&&1===n.length){var i=n[0],a=this.store.getCurArmature().slots.map[i],o=Qw.getSlotCurDisplay(a);if(o&&o.type===w.MESH)return}this._readyRectSelect=!0,this._downRectSelectPos.x=e.canvasPos.x,this._downRectSelectPos.y=e.canvasPos.y,this._rectSelectAdd&&(this._cacheBoneSelectIds=t.concat(),this._cacheSlotSelectIds=n.concat())}}},{key:"updateRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;this.checkFrameSelect(this._downStagePos.x,this._downStagePos.y,t,n);var r=e.canvasPos.x,i=e.canvasPos.y;this.view.getView(ok).drawFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,r,i)}},{key:"stopRectSelect",value:function(){this.rectSelecting=!1,this.view.getView(ok).clearFrameSelect()}},{key:"checkFrameSelect",value:function(e,t,n,r){if(this._selectBoneEnable||this._selectSlotEnable){var i=[],a=[],o=Math.min(e,n),s=Math.max(e,n),l=Math.min(t,r),u=Math.max(t,r),c=this.store.getCurArmature(),h=c.bones.ids,d=this.store.state.runtime.editing.lockBoneSlotIds,f=this.store.state.runtime.editing.boneSlotControl.boneSelectEnable,p=this.store.state.runtime.editing.boneSlotControl.slotSelectEnable;if(f&&this._selectBoneEnable){for(var v=0,m=h.length;v<m;v++){var g=h[v];if(-1===d.indexOf(g)){var y=c.bones.map[g],b=y.globalTransform.x,_=y.globalTransform.y;b>o&&b<s&&_>l&&_<u&&i.push(g)}}var x=i;this._rectSelectAdd&&this._cacheBoneSelectIds.length>0&&(x=i.concat(this._cacheBoneSelectIds));var E=this.store.state.runtime.editing.selectedBoneIds;Lf.arrayEqualArray(E,x)||(this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge()),this.store.dispatch(z.SELECT_BONES,x))}if(p&&this._selectSlotEnable){for(var w=c.slots.ids,T=0,S=w.length;T<S;T++){var k=w[T];if(-1===d.indexOf(k)){var C=c.slots.map[k];if(0!==C.displays.ids.length){var A=Qw.getSlotCurDisplay(C);if(A){var I=A.globalTransform.x,O=A.globalTransform.y;I>o&&I<s&&O>l&&O<u&&a.push(k)}}}}var P=a;this._rectSelectAdd&&this._cacheSlotSelectIds.length>0&&(P=a.concat(this._cacheSlotSelectIds));var M=this.store.state.runtime.editing.selectedSlotIds;Lf.arrayEqualArray(M,P)||(this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge()),this.store.dispatch(L.SELECT_SLOTS,P))}}}}],[{key:"toString",value:function(){return"BoneSlotSelectController"}}]),n}(sk),uk=function(e){return e[e.X=0]="X",e[e.Y=1]="Y",e[e.XY=2]="XY",e[e.SCALE_X=3]="SCALE_X",e[e.SCALE_Y=4]="SCALE_Y",e[e.SCALE=5]="SCALE",e[e.ROTATION=6]="ROTATION",e[e.PIVOT=7]="PIVOT",e[e.SKEW_X=8]="SKEW_X",e[e.SKEW_Y=9]="SKEW_Y",e[e.WIDTH=10]="WIDTH",e[e.HEIGHT=11]="HEIGHT",e[e.SIZE=12]="SIZE",e[e.SCALE_LEFT_TOP=13]="SCALE_LEFT_TOP",e[e.SCALE_LEFT_MIDDLE=14]="SCALE_LEFT_MIDDLE",e[e.SCALE_LEFT_BOTTOM=15]="SCALE_LEFT_BOTTOM",e[e.SCALE_RIGHT_TOP=16]="SCALE_RIGHT_TOP",e[e.SCALE_RIGHT_MIDDLE=17]="SCALE_RIGHT_MIDDLE",e[e.SCALE_RIGHT_BOTTOM=18]="SCALE_RIGHT_BOTTOM",e[e.SCALE_CENTER_TOP=19]="SCALE_CENTER_TOP",e[e.SCALE_CENTER_BOTTOM=20]="SCALE_CENTER_BOTTOM",e}({}),ck=function(){function e(){l(this,e),this.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},this.target=void 0,this.cacheTarget={x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:0,height:0,pivotX:0,pivotY:0},this.beginPos={x:0,y:0},this.curTransformFun=void 0,this.transformFunMap=new Map,this.offsetScaleX=1,this.offsetScaleY=1,this._type=uk.HEIGHT,this.lastX=0,this.lastY=0,this._lastWorkX=0,this._lastWorkY=0,this.transformFunMap.set(uk.X,hk),this.transformFunMap.set(uk.Y,dk),this.transformFunMap.set(uk.XY,fk),this.transformFunMap.set(uk.SCALE_X,pk),this.transformFunMap.set(uk.SCALE_Y,vk),this.transformFunMap.set(uk.SCALE,mk),this.transformFunMap.set(uk.ROTATION,gk),this.transformFunMap.set(uk.PIVOT,yk),this.transformFunMap.set(uk.SCALE_LEFT_BOTTOM,Ek),this.transformFunMap.set(uk.SCALE_LEFT_TOP,xk),this.transformFunMap.set(uk.SCALE_LEFT_MIDDLE,wk),this.transformFunMap.set(uk.SCALE_RIGHT_BOTTOM,bk),this.transformFunMap.set(uk.SCALE_RIGHT_TOP,_k),this.transformFunMap.set(uk.SCALE_RIGHT_MIDDLE,Tk),this.transformFunMap.set(uk.SCALE_CENTER_TOP,kk),this.transformFunMap.set(uk.SCALE_CENTER_BOTTOM,Sk)}return d(e,[{key:"beginTransform",value:function(e,t,n){this._type=n,this.beginPos.x=e,this.beginPos.y=t,this._lastWorkX=e,this._lastWorkY=t,this.lastX=e,this.lastY=t,this.target&&(this.cacheTarget.x=this.target.x,this.cacheTarget.y=this.target.y,this.cacheTarget.scaleX=this.target.scaleX,this.cacheTarget.scaleY=this.target.scaleY,this.cacheTarget.rotation=this.target.rotation,this.cacheTarget.skewX=this.target.skewX,this.cacheTarget.skewY=this.target.skewY,this.cacheTarget.width=this.target.width,this.cacheTarget.height=this.target.height,this.cacheTarget.pivotX=this.target.pivotX,this.cacheTarget.pivotY=this.target.pivotY,this.curTransformFun=this.getCurTransformFun(n))}},{key:"getCurTransformFun",value:function(e){return this.transformFunMap.get(e)}},{key:"updateKey",value:function(e){if(this.curTransformFun&&this.target&&this.cacheTarget){var t=this.lastX,n=this.lastY,r=this.curTransformFun(this.beginPos.x,this.beginPos.y,t,n,this.target,this.cacheTarget,e);this.target.updateLocalTransform&&this.target.updateLocalTransform(r)}}},{key:"updateTransform",value:function(e,t,n){if(!this.target)return!1;if(this.curTransformFun){this.controlKey.ctrl=n.ctrlKey,this.controlKey.alt=n.altKey,this.controlKey.shift=n.shiftKey,this.controlKey.meta=n.metaKey;var r=e-this.lastX,i=t-this.lastY;this.lastX=e,this.lastY=t;var a=this._lastWorkX+r,o=this._lastWorkY+i,s=this.curTransformFun(this.beginPos.x,this.beginPos.y,a,o,this.target,this.cacheTarget,this.controlKey);switch(this._type){case uk.SCALE_X:this.offsetScaleX=s.scaleX;break;case uk.SCALE_Y:this.offsetScaleY=s.scaleY;break;case uk.SCALE:this.offsetScaleX=s.scale||s.scaleX}if(this.target.updateLocalTransform)this.target.updateLocalTransform(s)&&(this._lastWorkX=a,this._lastWorkY=o)}return!1}},{key:"endTransform",value:function(e,t){this.offsetScaleX=1,this.offsetScaleY=1}}],[{key:"toString",value:function(){return"TransformController"}}]),e}();function hk(e,t,n,r,i,a){var o=n-e;return i.x=a.x+o,{x:o}}function dk(e,t,n,r,i,a){var o=r-t;return i.y=a.y+o,{y:o}}function fk(e,t,n,r,i,a){var o=n-e,s=r-t;return i.x=a.x+o,i.y=a.y+s,{x:o,y:s}}function pk(e,t,n,r,i,a){var o=ck.helpMatrix0,s=ck.helpPoint0,l=ck.helpPoint1,u=ck.helpPoint2;o.identity(),o.rotate(i.rotation),o.invert(),s.x=e,s.y=t;var c=o.apply(s,l);s.x=n,s.y=r;var h=o.apply(s,u),d=c.x-h.x,f=(d+=200)/200;return i.scaleX=a.scaleX*f,{scaleX:f}}function vk(e,t,n,r,i,a){var o=ck.helpMatrix0,s=ck.helpPoint0,l=ck.helpPoint1,u=ck.helpPoint2;o.identity(),o.rotate(i.rotation),o.invert(),s.x=e,s.y=t;var c=o.apply(s,l);s.x=n,s.y=r;var h=o.apply(s,u),d=c.y-h.y,f=(d+=200)/200;return i.scaleY=a.scaleY*f,{scaleY:f}}function mk(e,t,n,r,i,a){var o=ck.helpMatrix0,s=ck.helpPoint0,l=ck.helpPoint1,u=ck.helpPoint2;o.identity(),o.rotate(i.rotation),o.invert(),s.x=e,s.y=t;var c=o.apply(s,l);s.x=n,s.y=r;var h=o.apply(s,u),d=Lf.distanceBetweenPoints(c,h);c.x-h.x<0&&c.y-h.y<0&&(d=-d);var f=(d+=200)/200;return i.scaleX=a.scaleX*f,i.scaleY=a.scaleY*f,{scaleX:f,scaleY:f}}function gk(e,t,n,r,i,a){var o=ck.helpPoint0,s=ck.helpPoint1,l=ck.helpPoint2;o.x=e-i.x,o.y=t-i.y,s.x=n-i.x,s.y=r-i.y,l.x=0,l.y=0;var u=Lf.radianBetweenLines(o,l,s,l);return i.rotation=a.rotation+u,{rotation:u}}function yk(e,t,n,r,i,a){var o=a.width*a.scaleX,s=a.height*a.scaleY,l=ck.helpMatrix0,u=ck.helpPoint0,c=ck.helpPoint1,h=ck.helpPoint2;l.setTransform(0,0,0,0,1,1,a.rotation,a.skewX,a.skewY),l.invert(),u.x=e,u.y=t,l.apply(u,c),u.x=n,u.y=r,l.apply(u,h);var d=h.x-c.x,f=h.y-c.y,p=d/o,v=f/s;return i.pivotX=a.pivotX+p,i.pivotY=a.pivotY+v,d=n-e,f=r-t,i.x=a.x+d,i.y=a.y+f,{pivotX:p,pivotY:v,x:d,y:f}}function bk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=-1,c=-1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,1,u,c)}function _k(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=-1,c=1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,1,u,c)}function xk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=1,c=1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,1,u,c)}function Ek(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=1,c=-1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,1,u,c)}function wk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=1,c=.5;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,0,u,c)}function Tk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=-1,c=.5;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,1,0,u,c)}function Sk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=.5,c=-1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,0,1,u,c)}function kk(e,t,n,r,i,a,o){var s=!1,l=!1;o&&(s=o.shift,l=o.alt);var u=.5,c=1;return l||(u=0,c=0),Ak(e,t,n,r,i,a,s,0,1,u,c)}function Ck(e,t,n){var r=0,i=0;return t<0?r=e.width*e.scaleX*(e.pivotX*t):0===t?r=0:t>0&&(r=e.width*e.scaleX*(t-e.pivotX)),n<0?i=e.height*e.scaleY*(e.pivotY*n):0===n?i=0:n>0&&(i=e.height*e.scaleY*(n-e.pivotY)),[r,i]}function Ak(e,t,n,r,i,a,o,s,l,u,c){var h=1,d=1;if(o){var f=function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=ck.helpMatrix0,h=ck.helpPoint0,d=ck.helpPoint1,f=ck.helpPoint2;c.identity(),c.rotate(i.rotation),c.invert();var p=It(Ck(a,l,u),2),v=p[0],m=p[1];h.x=a.x,h.y=a.y;var g=c.apply(h,d);g.x+=v,g.y+=m,h.x=e,h.y=t;var y=c.apply(h,f),b=(y.x-g.x)*o,_=(y.y-g.y)*s;h.x=n,h.y=r;var x=c.apply(h,f),E=(x.x-g.x)*o,w=(x.y-g.y)*s,T=1,S=1;return Lf.isNumberEqual(b,0)||(T=E/b),Lf.isNumberEqual(_,0)||(S=w/_),[T,S]}(e,t,n,r,i,a,s,l,u,c),p=It(f,2);h=p[0],d=p[1]}else{var v=function(e,t,n,r,i,a){var o=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=ck.helpMatrix0,u=ck.helpPoint0,c=ck.helpPoint1,h=ck.helpPoint2;l.identity(),l.rotate(i.rotation),l.invert();var d=It(Ck(a,o,s),2),f=d[0],p=d[1];u.x=a.x+f,u.y=a.y+p;var v=l.apply(u,c);u.x=n,u.y=r;var m=l.apply(u,h),g=Lf.distanceBetweenPoints(v,m);u.x=e,u.y=t;var y=l.apply(u,h),b=g/Lf.distanceBetweenPoints(v,y);return[b,b]}(e,t,n,r,i,a,s,l,u,c),m=It(v,2);h=m[0],d=m[1]}i.scaleX=a.scaleX*h,i.scaleY=a.scaleY*d;var g=It(Ck(a,u,c),2),y=g[0],b=g[1];if(i.rotation){var _=ck.helpMatrix0;_.identity(),_.rotate(i.rotation),_.invert();var x=ck.helpPoint0,E=ck.helpPoint1;x.x=a.x,x.y=a.y;var w=_.apply(x,E);w.x+=y*(1-h),w.y+=b*(1-d),_.identity(),_.rotate(i.rotation),_.apply(w,x),i.x=x.x,i.y=x.y}else i.x=a.x+y*(1-h),i.y=a.y+b*(1-d);return{scaleX:h,scaleY:d,x:i.x-a.x,y:i.y-a.y}}ck.helpMatrix0=new Ym,ck.helpPoint0=new Hm,ck.helpPoint1=new Hm,ck.helpPoint2=new Hm;var Ik=function(){function e(){l(this,e),this._cacheCalcMatrixMap={},this._cacheTransformableMap={},this._cacheTransformable=Pe({},ek),this._selfTransformable=Pe({},ek),this._transformDirtyMap={x:!1,y:!1,scaleX:!1,scaleY:!1,rotation:!1,skewX:!1,skewY:!1,width:!1,height:!1,pivotX:!1,pivotY:!1},this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._skewX=0,this._skewY=0,this._width=1,this._height=1,this._pivotX=0,this._pivotY=0,this.offsetScaleX=1,this.offsetScaleY=1,this.store=void 0}return d(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._transformDirtyMap.x=!0)}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._transformDirtyMap.y=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(e){this._scaleX&&(this.offsetScaleX=this._scaleX/e,this._scaleX=e,this._transformDirtyMap.scaleX=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(e){this._scaleY!==e&&(this.offsetScaleY=this._scaleY/e,this._scaleY=e,this._transformDirtyMap.scaleY=!0)}},{key:"rotation",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._skewY=e,this._transformDirtyMap.rotation=!0)}},{key:"skewX",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._transformDirtyMap.skewX=!0)}},{key:"skewY",get:function(){return this._skewY},set:function(e){this._skewY!==e&&(this._skewY=e,this._transformDirtyMap.skewY=!0)}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX!==e&&(this._pivotX=e,this._transformDirtyMap.pivotX=!0)}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY!==e&&(this._pivotY=e,this._transformDirtyMap.pivotY=!0)}},{key:"width",get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._transformDirtyMap.width=!0)}},{key:"height",get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._transformDirtyMap.height=!0)}},{key:"beginTransform",value:function(){this.cacheSelectedBoneSlotTransform(),this.clearDirtyMap()}},{key:"endTransform",value:function(){this.clearDirtyMap()}},{key:"clearDirtyMap",value:function(){this._transformDirtyMap.x=!1,this._transformDirtyMap.y=!1,this._transformDirtyMap.scaleX=!1,this._transformDirtyMap.scaleY=!1,this._transformDirtyMap.rotation=!1,this._transformDirtyMap.skewX=!1,this._transformDirtyMap.skewY=!1,this._transformDirtyMap.width=!1,this._transformDirtyMap.height=!1,this._transformDirtyMap.pivotX=!1,this._transformDirtyMap.pivotY=!1}},{key:"cacheSelectedBoneSlotTransform",value:function(){if(this._cacheTransformableMap={},this.store){for(var e=this.store.getSelectedBones(),t=this.store.getSelectedSlots(),n=this.store.rootState.runtime.editing.editMode,r=this.store.rootState.runtime.editing.boneSlotControl.slotInheritEnable,i=this.store.rootState.runtime.editing.boneSlotControl.boneInheritEnable,a=0,o=e.length;a<o;a++){var s=e[a],l=s.transform,u=s.globalTransform;if(n===X.ANIMATION&&(l=s.cacheTransform||s.animatedTransform||s.transform),this._cacheTransformableMap[s.id]={local:Pe({},l),global:Pe({},u)},!1===r&&n===X.POSE)for(var c=Qw.findBoneSlots(this.store.getCurArmature(),s.id),h=0,d=c.length;h<d;h++){var f=c[h],p=Qw.getSlotCurDisplay(f);if(p){var v=p.transform,m=p.globalTransform;this._cacheTransformableMap[f.id]={local:v,global:m}}}if(!1===i&&n===X.POSE)for(var g=Qw.findBoneChildren(this.store.getCurArmature(),s.id),y=0,b=g.length;y<b;y++){var _=g[y];this._cacheTransformableMap[_.id]||(this._cacheTransformableMap[_.id]={local:Pe({},_.transform),global:Pe({},_.globalTransform)})}}for(var x=0,E=t.length;x<E;x++){var w=t[x],T=Qw.getSlotCurDisplay(w);if(T){var S=T.transform,k=T.globalTransform;this._cacheTransformableMap[w.id]={local:S,global:k}}}}}},{key:"setValue",value:function(e){e&&(this.offsetScaleX=1,this.offsetScaleY=1,this._x=e.x,this._y=e.y,this._scaleX=e.scaleX,this._scaleY=e.scaleY,this._width=e.width,this._height=e.height,this._skewX=e.skewX,this._skewY=e.skewY,this._pivotX=e.pivotX,this._pivotY=e.pivotY)}},{key:"changeRotationToSkew",value:function(e){e.rotation=0}},{key:"updateLocalTransform",value:function(e){var t=lk.getInstance(lk),n=t.getSelectBoneChains(),r={},i=this.store.rootState.runtime.editing.editMode,a=this.store.rootState.runtime.editing.boneSlotControl.boneInheritEnable,o=this.store.rootState.runtime.editing.boneSlotControl.slotInheritEnable,s=this.store.getCurArmature(),l={},u=[],c=[];i===X.POSE&&(c=t.getSelectSlotChain());var h=!1;if(n&&n.length){if(e.rotation)for(var d=0,f=n.length;d<f;d++)for(var p=n[d],v=0,m=p.length;v<m;v++)if(!1===a&&i===X.POSE){var g=p[v],y=this._cacheTransformableMap[g.id].local;l[g.id]&&(y=l[g.id].local);var b=this._cacheTransformableMap[g.id].global;l[g.id]&&(b=l[g.id].global);var _=Pe({},y);_.skewX+=e.rotation,_.skewY+=e.rotation,_.skewX=Lf.normalizeRadian(_.skewX),_.skewY=Lf.normalizeRadian(_.skewY);var x=Pe({},b);x.skewX+=e.rotation,x.skewY+=e.rotation,x.skewX=Lf.normalizeRadian(x.skewX),x.skewY=Lf.normalizeRadian(x.skewY),r[g.id]={local:_,diffKeys:["skewX","skewY"]},void 0===l[g.id]&&(l[g.id]={local:_,global:x}),!1===o&&i===X.POSE&&u.push(g.id);for(var E=this.store.getCurArmature(),w=Qw.findBoneChildren(E,g.id),T=0,S=w.length;T<S;T++){var k=w[T];this._cacheTransformableMap[k.id]||(this._cacheTransformableMap[k.id]={local:Pe({},k.transform),global:Pe({},k.globalTransform)});var C=this._cacheTransformableMap[k.id].global,A=Lf.transformInvertCross(x,C);l[k.id]={local:Pe({},A),global:Pe({},C)},r[k.id]={local:A,diffKeys:["skewX","skewY","x","y"]}}}else{var I=p[v],O=Pe({},this._cacheTransformableMap[I.id].local);if(O.skewX+=e.rotation,O.skewY+=e.rotation,O.skewX=Lf.normalizeRadian(O.skewX),O.skewY=Lf.normalizeRadian(O.skewY),r[I.id]={local:O,diffKeys:["skewX","skewY"]},!1===o&&i===X.POSE){var P=Pe({},this._cacheTransformableMap[I.id].global);P.skewX+=e.rotation,P.skewY+=e.rotation,P.skewX=Lf.normalizeRadian(P.skewX),P.skewY=Lf.normalizeRadian(P.skewY),l[I.id]={local:Pe({},O),global:Pe({},P)},u.push(I.id)}}else if(e.x||e.y)for(var M=0,R=n.length;M<R;M++){var N=n[M][0],D=Pe({},this._cacheTransformableMap[N.id].global);for(var F in e)switch(F){case"x":case"y":D[F]+=e[F]}var B=Qw.getBoneLocalTransformByGlobal(N,s.bones.map,i,D);if(N.fkTransform&&(B.skewX=N.fkTransform.skewX,B.skewY=N.fkTransform.skewY),r[N.id]={local:B,diffKeys:["x","y"]},!1===o&&i===X.POSE&&(l[N.id]={local:Pe({},B),global:Pe({},D)},u.push(N.id)),!1===a&&i===X.POSE)for(var U=this.store.getCurArmature(),H=Qw.findBoneChildren(U,N.id),j=0,V=H.length;j<V;j++){var G=H[j];this._cacheTransformableMap[G.id]||(this._cacheTransformableMap[G.id]={local:Pe({},G.transform),global:Pe({},G.globalTransform)});var W=this._cacheTransformableMap[G.id].global,Y=Lf.transformInvertCross(D,W);r[G.id]={local:Y,diffKeys:["x","y"]}}}else for(var K=0,q=n.length;K<q;K++)if(!1===a&&i===X.POSE)for(var $=n[K],Z=0,Q=$.length;Z<Q;Z++){var J=$[Z],ee=this._cacheTransformableMap[J.id].local;l[J.id]&&(ee=l[J.id].local);var te=this._cacheTransformableMap[J.id].global;l[J.id]&&(te=l[J.id].global);var ne=Pe({},ee);ne.scaleX*=e.scaleX,ne.scaleY*=e.scaleY;var re=Pe({},te);re.scaleX*=e.scaleX,re.scaleY*=e.scaleY,r[J.id]={local:ne,diffKeys:["scaleX","scaleY"]},void 0===l[J.id]&&(l[J.id]={local:ne,global:re}),!1===o&&i===X.POSE&&u.push(J.id);for(var ie=this.store.getCurArmature(),ae=Qw.findBoneChildren(ie,J.id),oe=0,se=ae.length;oe<se;oe++){var le=ae[oe];this._cacheTransformableMap[le.id]||(this._cacheTransformableMap[le.id]={local:Pe({},le.transform),global:Pe({},le.globalTransform)});var ue=this._cacheTransformableMap[le.id].global,ce=Lf.transformInvertCross(re,ue);l[le.id]={local:Pe({},ce),global:Pe({},ue)},r[le.id]={local:ce,diffKeys:["scaleX","scaleY"]}}}else{var he=n[K][0],de=Pe({},this._cacheTransformableMap[he.id].local),fe=[];for(var pe in e)switch(fe.push(pe),pe){case"scaleX":case"scaleY":de[pe]*=e[pe];break;case"skewX":case"skewY":de[pe]+=e[pe],de[pe]=Lf.normalizeRadian(de[pe])}if(r[he.id]={local:de,diffKeys:fe},!1===o&&i===X.POSE){var ve=Pe({},this._cacheTransformableMap[he.id].global);ve.scaleX*=e.scaleX,ve.scaleY*=e.scaleY,l[he.id]={local:Pe({},de),global:Pe({},ve)},u.push(he.id)}}if(h=!0,this.store.dispatch(z.UPDATE_LOCAL_TRANSFORMS,r),!1===o&&i===X.POSE&&u.length){for(var me={},ge=!1,ye=0,be=u.length;ye<be;ye++)for(var _e=u[ye],xe=l[_e].global,Ee=Qw.findBoneSlots(s,_e),we=0,Te=Ee.length;we<Te;we++){var Se=Ee[we],ke=Qw.getSlotCurDisplay(Se);if(ke){this._cacheTransformableMap[Se.id]||(this._cacheTransformableMap[Se.id]={local:Pe({},ke.transform),global:Pe({},ke.globalTransform)});var Ce=this._cacheTransformableMap[Se.id].global,Ae=Lf.transformInvertCross(xe,Ce);me[Se.id]={local:Ae,global:Ce},ge=!0}}ge&&this.store.dispatch(L.UPDATE_LOCAL_TRANSFORMS,me)}}if(c&&c.length){for(var Ie={},Oe=0,Me=c.length;Oe<Me;Oe++){var Re=c[Oe];if(this._cacheTransformableMap[Re.id]){var Ne=Pe({},this._cacheTransformableMap[Re.id].global);for(var De in e)switch(De){case"x":case"y":case"skewX":case"skewY":Ne[De]+=e[De];break;case"rotation":Ne.skewX+=e[De],Ne.skewY+=e[De];break;case"scaleX":case"scaleY":Ne[De]*=e[De]}var Le=Qw.getSlotLocalTransformByGlobal(Re,s,i,Ne);Ie[Re.id]={local:Le,global:Ne},h=!0}}h&&this.store.dispatch(L.UPDATE_LOCAL_TRANSFORMS,Ie)}return h}}]),e}();var Ok={getBoneTransformable:function(e){var t=e.globalTransform||e.transform;return{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleX,rotation:0,skewX:t.skewX,skewY:t.skewY,width:0,height:0,pivotX:0,pivotY:0,anchorX:0,anchorY:0}},getSlotTransformable:function(e){if(e.displays){var t=e.displays.ids[e.displayIndex],n=e.displays.map[t];if(n){var r=n.globalTransform||n.transform,i=n.width,a=n.height;return n.mesh&&n.type===w.MESH&&(i=0,a=0),{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleX,rotation:0,skewX:r.skewX,skewY:r.skewY,width:i,height:a,pivotX:0,pivotY:0,anchorX:0,anchorY:0}}}return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:0,height:0,pivotX:0,pivotY:0,anchorX:0,anchorY:0}}},Pk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._helpPoint0=new Hm,e._helpPoint1=new Hm,e.cameraTransform=void 0,e.transformController=new ck,e.transformProxy=new Ik,e.transformHandler=void 0,e.type=void 0,e.controlKey=void 0,e._pivotEnable=!0,e._notHistoryMerge=!1,e.curHandler=void 0,e.bindViewHandlerMap={},e.onWindowMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;if(e._notHistoryMerge||(e.model.historyBeginMerge(),e._notHistoryMerge=!0,lk.getInstance(lk).overEnable=!1),e.transformHandler)switch(e.transformController.updateTransform(n,r,t),e.type){case uk.SCALE_X:e.transformHandler.offScaleX=e.transformController.offsetScaleX;break;case uk.SCALE_Y:e.transformHandler.offScaleY=e.transformController.offsetScaleY;break;case uk.SCALE:e.transformHandler.offScaleX=e.transformController.offsetScaleX,e.transformHandler.offScaleY=e.transformController.offsetScaleX}},e.onWindowUp=function(t){t.stopImmediatePropagation();var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;if(e.transformController.endTransform(n,r),e.transformProxy.endTransform(),window.removeEventListener("mousemove",e.onWindowMove),window.removeEventListener("mouseup",e.onWindowUp),window.removeEventListener("keydown",e.onKeyDown),window.removeEventListener("keyup",e.onKeyUp),e._notHistoryMerge&&(e._notHistoryMerge=!1,e.model.historyEndMerge(),lk.getInstance(lk).overEnable=!0),e.model.commit(z.TRANSFORM_END),e.transformHandler){switch(e.type){case uk.SCALE_X:e.transformHandler.offScaleX=1;break;case uk.SCALE_Y:e.transformHandler.offScaleY=1;break;case uk.SCALE:e.transformHandler.offScaleX=1,e.transformHandler.offScaleY=1}e.type=void 0}},e.onKeyDown=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift||(e.controlKey.shift=!0,n=!0);break;case 17:e.controlKey.ctrl||(e.controlKey.ctrl=!0,n=!0);break;case 18:e.controlKey.alt||(e.controlKey.alt=!0,n=!0);break;case 91:e.controlKey.meta||(e.controlKey.meta=!0,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.onKeyUp=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift&&(e.controlKey.shift=!1,n=!0);break;case 17:e.controlKey.ctrl&&(e.controlKey.ctrl=!1,n=!0);break;case 18:e.controlKey.alt&&(e.controlKey.alt=!1,n=!0);break;case 91:e.controlKey.meta&&(e.controlKey.meta=!1,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.asyncProxyTransform=function(){var t=e.store.state.runtime.editing.selectedBoneIds,n=e.store.state.runtime.editing.selectedSlotIds;if(t.length){var r=e.store.getBoneById(t[0]);e.transformProxy.setValue(Ok.getBoneTransformable(r)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else if(n.length){var i=e.store.getSlotById(n[0]);e.transformProxy.setValue(Ok.getSlotTransformable(i)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}},e.onSWitchMode=function(t){e.onSelectChange(),e.onUpdateAnimationTransform(t)},e.onUpdateAnimationTransform=function(t){e.cameraTransform&&e.transformHandler&&(e.asyncProxyTransform(),e.transformHandler.updateTarget())},e.onUpdateBoneTransform=function(t){e.cameraTransform&&e.transformHandler&&e.transformHandler.updateTarget()},e.onUpdateCameraTransform=function(t){if(e.cameraTransform&&e.transformHandler){var n=e.store.state.editor.stage;switch(t.type){case W.UPDATE_SCALE:e.cameraTransform.scale.set(n.scale,n.scale);break;case W.UPDATE_POSITION:e.cameraTransform.position.set(n.x,n.y)}e.transformHandler.updateTarget()}},e.onSelectChange=function(){var t=e.store.state.runtime.editing.selectedBoneIds,n=[];if(e.store.state.runtime.editing.editMode===X.POSE&&(n=e.store.state.runtime.editing.selectedSlotIds),e.stopTransform(),t.length+n.length>=1){e.startTransform();var r=e.store.getCurArmature();if(t.length){var i;if(t.length>1)i=Qw.getBoneChains(r,t)[0][0];else i=e.store.getBoneById(t[0]);e.transformProxy.setValue(Ok.getBoneTransformable(i)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else{var a=e.store.getSlotById(n[0]);e.transformProxy.setValue(Ok.getSlotTransformable(a)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}}else e.transformHandler&&(e.transformHandler.target=void 0)},e.onUpdateSlot=function(t){var n=!1;if(t.data.slots)for(var r in t.data.slots){if(void 0!==t.data.slots[r].displayIndex){n=!0;break}}n&&e.onSelectChange()},e.transformController.target=e.transformProxy,e.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},e}return d(n,[{key:"pivotEnable",get:function(){return this._pivotEnable},set:function(e){this._pivotEnable!==e&&(this._pivotEnable=e,this.transformHandler&&(this.transformHandler.pivotHandler.interactive=this._pivotEnable))}},{key:"start",value:function(){this._addNotification(V.SELECT_BONES,this.onSelectChange),this._addNotification(F.SELECT_SLOTS,this.onSelectChange),this._addNotification(F.UPDATE_PROPERTIES,this.onUpdateSlot),this._addNotification(N.SELECT_ARMATURE,this.onSelectChange),this._addNotification(F.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(V.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(H.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(H.SELECT_DISPLAY,this.onSelectChange),this._addNotification(W.UPDATE_POSITION,this.onUpdateCameraTransform),this._addNotification(W.UPDATE_SCALE,this.onUpdateCameraTransform),this._addNotification(V.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(V.UPDATE_IK,this.onUpdateAnimationTransform),this._addNotification(O.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimationTransform),this._addNotification(V.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(F.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(G.SWITCH_MODE,this.onSWitchMode);var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.state.runtime.editing.selectedSlotIds;(e.length||t.length)&&this.onSelectChange()}},{key:"stop",value:function(){this._removeNotification(V.SELECT_BONES,this.onSelectChange),this._removeNotification(F.SELECT_SLOTS,this.onSelectChange),this._removeNotification(F.UPDATE_PROPERTIES,this.onUpdateSlot),this._removeNotification(N.SELECT_ARMATURE,this.onSelectChange),this._removeNotification(H.SELECT_DISPLAY,this.onSelectChange),this._removeNotification(W.UPDATE_POSITION,this.onUpdateCameraTransform),this._removeNotification(W.UPDATE_SCALE,this.onUpdateCameraTransform),this._removeNotification(V.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(O.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimationTransform),this._removeNotification(V.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(F.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(G.SWITCH_MODE,this.onSWitchMode),this.stopTransform()}},{key:"startTransform",value:function(){this.transformHandler=this.view.transformHandler,this.cameraTransform=this.transformHandler.cameraTransform,this.transformProxy.store=this.store,this.resetCameraTransform(),this.bindHandler(),this.updateDisplays()}},{key:"stopTransform",value:function(){this.unBindHandler(),this.transformHandler&&(JS.setCursor(QS.auto),this.transformHandler.target=void 0,this.transformHandler=void 0),this.cameraTransform=void 0,this.transformProxy.store=void 0}},{key:"updateDisplays",value:function(){}},{key:"getViewStage",value:function(){if(this.view)for(var e=this.view;e;){if(!e.parent)return e;e=e.parent}}},{key:"bindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.bindView(e,uk.ROTATION),this.bindView(this.transformHandler.moveXHandler,uk.X),this.bindView(this.transformHandler.moveYHandler,uk.Y),this.bindView(this.transformHandler.moveHandler,uk.XY),this.bindViewDoubleClick(this.transformHandler.moveHandler),this.bindView(this.transformHandler.scaleXHandler,uk.SCALE_X),this.bindView(this.transformHandler.scaleYHandler,uk.SCALE_Y),this.bindView(this.transformHandler.scaleHandler,uk.SCALE),this.bindView(this.transformHandler.rotationHandler,uk.ROTATION),this.bindView(this.transformHandler.pivotHandler,uk.PIVOT),this.bindView(this.transformHandler.scaleLeftTop,uk.SCALE_LEFT_TOP),this.bindView(this.transformHandler.scaleLeftBottom,uk.SCALE_LEFT_BOTTOM),this.bindView(this.transformHandler.scaleLeftMiddle,uk.SCALE_LEFT_MIDDLE),this.bindView(this.transformHandler.scaleRightBottom,uk.SCALE_RIGHT_BOTTOM),this.bindView(this.transformHandler.scaleRightMiddle,uk.SCALE_RIGHT_MIDDLE),this.bindView(this.transformHandler.scaleRightTop,uk.SCALE_RIGHT_TOP),this.bindView(this.transformHandler.scaleCenterBottom,uk.SCALE_CENTER_BOTTOM),this.bindView(this.transformHandler.scaleCenterTop,uk.SCALE_CENTER_TOP),this.bindNotification(W.SELECT_MOVE_START,uk.XY)}}},{key:"unBindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.unBindView(e),this.unBindView(this.transformHandler.moveXHandler),this.unBindView(this.transformHandler.moveYHandler),this.unBindView(this.transformHandler.moveHandler),this.unBindView(this.transformHandler.scaleXHandler),this.unBindView(this.transformHandler.scaleYHandler),this.unBindView(this.transformHandler.scaleHandler),this.unBindView(this.transformHandler.rotationHandler),this.unBindView(this.transformHandler.pivotHandler),this.unbindNotification(W.SELECT_MOVE_START)}window.removeEventListener("mousemove",this.onWindowMove),window.removeEventListener("mouseup",this.onWindowUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"bindNotification",value:function(e,t){this._addNotification(e,this.transformXYNotication)}},{key:"transformXYNotication",value:function(){}},{key:"unbindNotification",value:function(e){this._removeNotification(e,this.transformXYNotication)}},{key:"bindViewDoubleClick",value:function(e){var t=0;e.on("mousedown",(function(n){n.stopPropagation(),t++,setTimeout((function(){t>0&&t--}),200),t>=2&&(e.emit("dblclick"),t=0)}))}},{key:"viewMouseDownHandler",value:function(e){if(!e.ctrlKey&&!e.metaKey&&this._enable){var t=e.currentTarget.transformType;e.stopPropagation(),this.type=t,this.model.commit(z.UPDATE_TRANSFORM_SHELL),this.model.commit(z.TRANSFORM_START),this.asyncProxyTransform(),this.transformController.beginTransform(this.model.state.editor.stage.mouseStageX,this.model.state.editor.stage.mouseStageY,t),this.transformProxy.beginTransform(),window.addEventListener("mousemove",this.onWindowMove),window.addEventListener("mouseup",this.onWindowUp),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}}},{key:"bindView",value:function(e,t){e.transformType=t,this.unBindView(e),e.on("mousedown",this.viewMouseDownHandler,this)}},{key:"unBindView",value:function(e){e.off("mousedown",this.viewMouseDownHandler,this)}},{key:"resetCameraTransform",value:function(){if(this.cameraTransform){var e=this.store.state.editor.stage;this.cameraTransform.scale.set(e.scale,e.scale),this.cameraTransform.position.set(e.x,e.y)}}}],[{key:"toString",value:function(){return"BoneSlotTransformController"}}]),n}(sk),Mk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._transformed=!1,e._hideAllBone=!1,e}return d(n,[{key:"start",value:function(){this.view&&(this.view.bones=this.getCurBones(),this.refreshIk(),this.onHideBone()),this._addNotification(N.SELECT_ARMATURE,this.onArmatureChange),this._addNotification(V.ADD_BONE,this.onArmatureChange),this._addNotification(V.DELETE_BONES,this.onArmatureChange),this._addNotification(V.SET_PARENT,this.onArmatureChange),this._addNotification(V.OVER_BONE,this.refreshOver),this._addNotification(V.SELECT_BONES,this.refreshSelected),this._addNotification(F.SELECT_SLOTS,this.refreshColor),this._addNotification(U.UPDATE_RIG_BONE,this.refreshColor),this._addNotification(V.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(V.UPDATE_PROPERTIES,this.refreshBone),this._addNotification(z.TRANSFORM_START,this.onStartTransform),this._addNotification(z.TRANSFORM_END,this.onEndTranform),this._addNotification(O.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimatedProperty),this._addNotification(P.AUTO_KEY,this.onUpdateAnimatedProperty),this._addNotification(V.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimatedProperty),this._addNotification(G.SWITCH_MODE,this.onSwitchMode),this._addNotification(P.SELECT_ANIMATION,this.onSwitchMode),this._addNotification(W.HIDE_ITEMS,this.onHideBone),this._addNotification(G.CHANGE_BONE_SLOT_CONTROL,this.onChangeBoneSlotControl),this._addNotification(V.ADD_IK,this.refreshIk),this._addNotification(V.DELETE_IKS,this.refreshIk),this._addNotification(V.UPDATE_IK,this.refreshIk),this._addNotification(V.UPDATE_CACHE_IK,this.refreshIk),this._addNotification(G.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(G.SWITCH_TOOL,this.onUpdateMeshTool),this._addNotification(G.SELECT_RIGGING_BONE,this.onSelectRiggingBone)}},{key:"stop",value:function(){this.view}},{key:"onEndTranform",value:function(e){this.view.startOvercheck()}},{key:"onStartTransform",value:function(e){this.view.stopOverCheck()}},{key:"hideAllBone",set:function(e){this._hideAllBone!==e&&(this._hideAllBone=e,this.view&&(this._hideAllBone?this.view.bones=[]:this.view.bones=this.getCurBones()))}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.hideAllBone=!e.deformed&&t===Z.MESH_EDIT_TOOL}},{key:"onSwitchMode",value:function(){this.view.refresh()}},{key:"onOverBone",value:function(e){this.store.commit(V.OVER_BONE,e)}},{key:"onArmatureChange",value:function(){this.view&&(this.view.bones=this.getCurBones(),this.refreshIk())}},{key:"onOutBone",value:function(e){this.store.commit(V.OVER_BONE,0)}},{key:"onUpdateAnimatedProperty",value:function(){this.refreshIk()}},{key:"onSelectRiggingBone",value:function(){var e=this.store.state.runtime.editing.riggingSelectedBoneId,t=[];if(e){var n=this.store.getCurArmature(),r=this.store.state.runtime.editing.selectedSlotIds[0],i=n.slots.map[r],a=Qw.getSlotCurDisplay(i);if(a&&a.mesh&&a.mesh.bonePose)for(var o in a.mesh.bonePose)t.push(parseInt(o))}this.view.riggingBoneIds=t,this.view.selectedRiggingBoneId=e}},{key:"refreshColor",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds;if(0===this.store.state.runtime.editing.selectedBoneIds.length&&1===e.length){var t=this.store.getCurArmature().slots.map[e[0]],n=Qw.getSlotCurDisplay(t);if(n&&n.mesh&&n.mesh.bonePose)return void this.view.refreshColor(n.mesh.bonePose)}this.view.refreshColor(void 0)}},{key:"refreshOver",value:function(){var e=this.store.state.editor.over.overBone;this.view.overBoneId=e}},{key:"onChangeBoneSlotControl",value:function(e){"boneVisible"===e.data.property&&this.onHideBone()}},{key:"onHideBone",value:function(){if(this.store.state.runtime.editing.boneSlotControl.boneVisible)this.view.hideBoneIds=this.store.state.runtime.editing.hideBoneSlotIds;else{var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];this.view.hideBoneIds=t.bones.ids}}},{key:"refreshSelected",value:function(){this._transformed=!1;var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedBoneIds,n=[],r=e.constraint.ik;for(var i in r){var a=r[i];if(a){var o=!1;a.childId&&t.indexOf(a.childId)>=0&&(o=!0),t.indexOf(a.parentId)>=0&&(o=!0),t.indexOf(a.targetId)>=0&&(o=!0),o&&1!==a.weight&&(n.push(a.parentId),a.childId&&n.push(a.childId))}}this.view.selectedIkBoneIds=n,this.view.selectedBoneIds=t}},{key:"refreshTransform",value:function(){this._transformed=!0,this.view.refresh()}},{key:"refreshIk",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedBoneIds,n=e.constraint.ik,r=[],i=[],a=[];for(var o in n){var s=n[o];if(s){var l=!1;s.childId&&(r.push(s.childId),t.indexOf(s.childId)>=0&&(l=!0)),r.push(s.parentId),t.indexOf(s.parentId)>=0&&(l=!0),i.push(s.targetId),t.indexOf(s.targetId)>=0&&(l=!0),l&&1!==s.weight&&(a.push(s.parentId),s.childId&&a.push(s.childId))}}this.view.ikBoneIds=r,this.view.ikTargetBoneIds=i,this.view.selectedIkBoneIds=a,this.view.refresh()}},{key:"refreshBone",value:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.bones,r=!1;if(n)for(var i in n){var a=n[i];void 0===a.inheritRotation&&void 0===a.inheritScale||(r=!0)}r?this.view.refresh():this.view.refreshBones()}},{key:"mouseDown",value:function(){this._transformed=!1;var e=this.store.state.editor.over.overBone;e>0&&this.store.dispatch(z.SELECT_ONE_BONE,[e])}},{key:"getCurBones",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];return t?oT.getArrayFromMap(t.bones):[]}},{key:"calculateRenderProperty",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.editing.selectedAnimationId,n=this.store.state.editor.dopesheet.curTime,r=this.store.state.runtime.editing.editMode,i=this.store.state.runtime.dragonbones.armatureMap[e];Qw.calculateAnimatedProperty(i,r,t,n)}}],[{key:"toString",value:function(){return"StageBoneController"}}]),n}(sk),Rk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).cameraTransform={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},e.slotTransform=void 0,e.globalTransform=void 0,e._displayData=void 0,e._meshGraphics=void 0,e._meshBorderGraphics=void 0,e._overPointIndex="",e._overLine=void 0,e._selectedPointIndices=[],e._uvEditMode=!1,e._meshTool=void 0,e.pointPosMap={},e._limitBorder=void 0,e._addPointPreview=void 0,e._deletePointIndex=void 0,e._deleteUserEdge=void 0,e._drawOutlines=void 0,e._addOutlinePoint=void 0,e.editMode=void 0,e._weightMode=void 0,e.init(),e}return d(n,[{key:"setScale",value:function(e){this.cameraTransform.scaleX=e,this.cameraTransform.scaleY=e,this.refresh()}},{key:"setCenter",value:function(e,t){this.cameraTransform.x=e,this.cameraTransform.y=t,this.refresh()}},{key:"resizeStage",value:function(e,t){}},{key:"setMeshEditTool",value:function(e){this._meshTool=e,this._uvEditMode=e&&!e.deformed}},{key:"meshEditTool",set:function(e){this._meshTool=e,this._uvEditMode=e&&!e.deformed,this.refresh()}},{key:"setWeightMode",value:function(e){this._weightMode!==e&&(this._weightMode=e)}},{key:"weightMode",set:function(e){this._weightMode!==e&&(this._weightMode=e,this.refresh())}},{key:"display",set:function(e){this._displayData!==e&&(e&&e.type===w.MESH?this._displayData=e:this._displayData=void 0,this.refresh())}},{key:"selectedPoints",set:function(e){this._selectedPointIndices=e,this.refresh()}},{key:"overPointIndex",set:function(e){this._overPointIndex!==e&&(this._overPointIndex=e,this.refresh())}},{key:"overLine",set:function(e){(this._overLine||e)&&(this._overLine&&e&&this._overLine[0]===e[0]&&this._overLine[1]===e[1]||(this._overLine=e,this.refresh()))}},{key:"addPointPreview",set:function(e){this._addPointPreview!==e&&(this._addPointPreview=e,this.drawAddPointPreview())}},{key:"deleteUserEdge",set:function(e){this._deleteUserEdge=e,this.refresh()}},{key:"deletePointIndex",set:function(e){this._deletePointIndex=e,this.refresh()}},{key:"setDrawOutlines",value:function(e,t){this._drawOutlines=e,this._addOutlinePoint=t,this.refresh()}},{key:"drawPreviewLine",value:function(e,t){var n=Lf.transformApplyPoint(this.globalTransform,e),r=Lf.transformApplyPoint(this.globalTransform,t);this._meshBorderGraphics.lineStyle(1,Uf.MESH_USER_LINE_NORMAL,1),this._meshBorderGraphics.moveTo(n.x,n.y),this._meshBorderGraphics.lineTo(r.x,r.y)}},{key:"refresh",value:function(){this._meshGraphics.clear(),this._meshBorderGraphics.clear(),this._displayData&&(this.updateMeshGlobalTransform(),this._drawOutlines?this.drawCustomOutlines():(this._uvEditMode?this.drawUVEditMesh():this.drawVertexEditMesh(),this._limitBorder?this.drawLimitUVBorder():this.drawAddPointPreview()))}},{key:"drawVertexEditMesh",value:function(){this._meshGraphics.clear(),this.updatePointPosition(),this._meshTool&&this.drawLines(),this.drawOutline(),this.drawUserLine(),this.drawUVPoints()}},{key:"drawUVEditMesh",value:function(){this._meshGraphics.clear(),this.updatePointPosition(),this.drawBorder(),this.drawLines(),this.drawOutline(),this.drawUserLine(),this.drawUVPoints()}},{key:"updateMeshGlobalTransform",value:function(){var e=Pe({},this._displayData.globalTransform);this._uvEditMode&&(e.skewX=0,e.skewY=0,e.scaleX=1,e.scaleY=1),this.globalTransform=Lf.transformCross(this.cameraTransform,e)}},{key:"updatePointPosition",value:function(){var e=this._displayData.mesh;if(!this._displayData.width||!this._displayData.height)throw new Error("mesh width or height is 0");for(var t in e.points){if(e.points[t]){var n=e.points[t];if(n){var r=n.vertices[0],i=n.vertices[1];e.riggingFFD&&e.riggingFFD[t]?(r=e.riggingFFD[t][0],i=e.riggingFFD[t][1]):this.editMode===X.ANIMATION&&(e.cacheFFD&&e.cacheFFD[t]?(r=e.cacheFFD[t][0],i=e.cacheFFD[t][1]):e.animatedFFD&&e.animatedFFD[t]&&(r=e.animatedFFD[t][0],i=e.animatedFFD[t][1])),this._uvEditMode&&(r=(n.uvs[0]-.5)*this._displayData.width,i=(n.uvs[1]-.5)*this._displayData.height);var a=Lf.transformApplyPoint(this.globalTransform,{x:r,y:i});this.pointPosMap[t]=a}}}}},{key:"drawBorder",value:function(){if(this._displayData.width&&this._displayData.height){var e=this._displayData.width/2,t=this._displayData.height/2,n=Lf.transformApplyPoint(this.globalTransform,{x:-e,y:-t}),r=Lf.transformApplyPoint(this.globalTransform,{x:e,y:-t}),i=Lf.transformApplyPoint(this.globalTransform,{x:e,y:t}),a=Lf.transformApplyPoint(this.globalTransform,{x:-e,y:t});this._meshGraphics.lineStyle(1,Uf.MESH_LINE_BORDER,1),this._meshGraphics.moveTo(n.x,n.y),this._meshGraphics.lineTo(r.x,r.y),this._meshGraphics.lineTo(i.x,i.y),this._meshGraphics.lineTo(a.x,a.y),this._meshGraphics.lineTo(n.x,n.y)}}},{key:"drawUVPoints",value:function(){var e=this._displayData.mesh;for(var t in e.points){if(e.points[t]){var n=this.pointPosMap[t];if(n){var r=Uf.MESH_POINT_NORMAL,i=5,a=1;this._selectedPointIndices.length>0&&(a=.5),this._selectedPointIndices&&this._selectedPointIndices.indexOf(t)>=0?(r=Uf.MESH_POINT_SELECTED,i=10,a=1):this._overPointIndex===t||this._overLine&&this._overLine.indexOf(parseInt(t))>=0?(r=Uf.MESH_POINT_OVER,i=7,a=.7):this._deletePointIndex===parseInt(t)&&(r=Uf.MESH_POINT_DELETE),e.bonePose&&e.boneWeights&&this._weightMode?this.drawRiggingPoint(n,e.boneWeights[t],e.bonePose,i,a):this.drawOnePoint(n,r,5,1)}}}}},{key:"drawLines",value:function(){for(var e=this,t=this._displayData.mesh,n=function(t,n){var r=Uf.MESH_LINE_AUTO,i=1;e._selectedPointIndices&&e._selectedPointIndices.indexOf(t.toString())>=0&&e._selectedPointIndices.indexOf(n.toString())>=0?(r=Uf.MESH_LINE_SELECTED,i=2):e._overLine&&e._overLine.indexOf(t)>=0&&e._overLine.indexOf(n)>=0&&(r=Uf.MESH_LINE_OVER,i=2),e.drawOneLine(e.pointPosMap[t],e.pointPosMap[n],r,i,1)},r=0,i=t.triangles.length;r<i;r+=3){var a=t.triangles[r],o=t.triangles[r+1],s=t.triangles[r+2];n(a,o),n(o,s),n(s,a)}}},{key:"drawOutline",value:function(){for(var e=this._displayData.mesh,t=0,n=e.outlines.length;t<n;t+=2){var r=e.outlines[t],i=e.outlines[t+1],a=this.pointPosMap[r],o=this.pointPosMap[i],s=Uf.MESH_OUTLINE_NORMAL,l=1;this._selectedPointIndices&&this._selectedPointIndices.indexOf(r.toString())>=0&&this._selectedPointIndices.indexOf(i.toString())>=0?(s=Uf.MESH_OUTLINE_SELECTED,l=2):this._overLine&&this._overLine.indexOf(r)>=0&&this._overLine.indexOf(i)>=0&&(s=Uf.MESH_OUTLINE_OVER,l=2),void 0===this._deletePointIndex||this._deletePointIndex!==r&&this._deletePointIndex!==i||(s=Uf.MESH_LINE_DELETE,l=2),this.drawOneLine(a,o,s,l,1)}}},{key:"drawUserLine",value:function(){for(var e=this._displayData.mesh,t=0,n=e.userEdges.length;t<n;t+=2){var r=e.userEdges[t],i=e.userEdges[t+1],a=this.pointPosMap[r],o=this.pointPosMap[i],s=Uf.MESH_USER_LINE_NORMAL,l=1;this._selectedPointIndices&&this._selectedPointIndices.indexOf(r.toString())>=0&&this._selectedPointIndices.indexOf(i.toString())>=0?(s=Uf.MESH_USER_LINE_SELECTED,l=2):this._overLine&&this._overLine.indexOf(r)>=0&&this._overLine.indexOf(i)>=0&&(s=Uf.MESH_USER_LINE_OVER,l=2),this._deleteUserEdge&&KS.isLineEqual([r,i],this._deleteUserEdge)?(s=Uf.MESH_LINE_DELETE,l=2):void 0===this._deletePointIndex||this._deletePointIndex!==r&&this._deletePointIndex!==i||(s=Uf.MESH_LINE_DELETE,l=2),this.drawOneLine(a,o,s,l,1)}}},{key:"drawOneLine",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._meshGraphics.lineStyle(r,n,i),this._meshGraphics.moveTo(e.x,e.y),this._meshGraphics.lineTo(t.x,t.y)}},{key:"drawOnePoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._meshGraphics;i.lineStyle(0,t,1),i.beginFill(t,r),i.drawCircle(e.x,e.y,n),i.endFill()}},{key:"init",value:function(){var e=new SE;this.addChild(e),this._meshGraphics=e,this._meshBorderGraphics=new SE,this.addChild(this._meshBorderGraphics)}},{key:"updateBorder",value:function(e){this._limitBorder=e,this.drawLimitUVBorder()}},{key:"drawLimitUVBorder",value:function(){if(this._meshBorderGraphics.clear(),this._limitBorder){var e=this._limitBorder,t=Lf.transformApplyPoint(this.globalTransform,{x:e[0][0],y:e[0][1]}),n=Lf.transformApplyPoint(this.globalTransform,{x:e[1][0],y:e[1][1]}),r=Lf.transformApplyPoint(this.globalTransform,{x:e[2][0],y:e[2][1]}),i=Lf.transformApplyPoint(this.globalTransform,{x:e[3][0],y:e[3][1]});this._meshBorderGraphics.lineStyle(1,Uf.MESH_LINE_BORDER,1),this._meshBorderGraphics.moveTo(t.x,t.y),this._meshBorderGraphics.lineTo(n.x,n.y),this._meshBorderGraphics.lineTo(r.x,r.y),this._meshBorderGraphics.lineTo(i.x,i.y),this._meshBorderGraphics.lineTo(t.x,t.y)}}},{key:"drawAddPointPreview",value:function(){if(this._meshBorderGraphics.clear(),this._addPointPreview){var e=Lf.transformApplyPoint(this.globalTransform,this._addPointPreview);this.drawOnePoint(e,Uf.MESH_POINT_ADD,5,1,this._meshBorderGraphics)}}},{key:"drawCustomOutlines",value:function(){this._meshGraphics.clear(),this.drawBorder();for(var e=0,t=this._drawOutlines.length-2;e<t;e+=2){var n=this._drawOutlines[e],r=this._drawOutlines[e+1],i=this._drawOutlines[e+2],a=this._drawOutlines[e+3],o=Lf.transformApplyPoint(this.globalTransform,{x:n,y:r}),s=Lf.transformApplyPoint(this.globalTransform,{x:i,y:a}),l=Uf.MESH_OUTLINE_NORMAL;this.drawOneLine(o,s,l,1,1);0===e&&this.drawOnePoint(o,l,5),this.drawOnePoint(s,l,5)}var u=Lf.transformApplyPoint(this.globalTransform,{x:this._addOutlinePoint[0],y:this._addOutlinePoint[1]});if(this.drawOnePoint(u,Uf.MESH_POINT_ADD,5),this._drawOutlines.length>0){var c=this._drawOutlines[this._drawOutlines.length-2],h=this._drawOutlines[this._drawOutlines.length-1],d=Lf.transformApplyPoint(this.globalTransform,{x:c,y:h});this.drawOneLine(d,u,Uf.MESH_USER_LINE_NORMAL,1,1)}if(this._drawOutlines.length>1){var f=this._drawOutlines[0],p=this._drawOutlines[1],v=Lf.transformApplyPoint(this.globalTransform,{x:f,y:p});this.drawOneLine(v,u,Uf.MESH_LINE_NORMAL,1,1)}}},{key:"drawRiggingPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=arguments.length>4?arguments[4]:void 0;if(t&&n){var a=0;for(var o in t){var s=t[o],l=n[o].color;s<=0||(this.drawSector(e.x,e.y,r,s,a,l,i),a+=s)}}}},{key:"drawSector",value:function(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=this._meshGraphics;s.beginFill(a,o),s.lineStyle(0,a,0),s.moveTo(e,t),r*=360,i=360*i-90,r=Math.abs(r)>360?360:r;var l,u,c,h,d,f,p=Math.ceil(Math.abs(r)/45),v=r/p;for(v=v*Math.PI/180,i=i*Math.PI/180,s.lineTo(e+n*Math.cos(i),t+n*Math.sin(i)),l=1;l<=p;l++)u=(i+=v)-v/2,c=e+n/Math.cos(v/2)*Math.cos(u),h=t+n/Math.cos(v/2)*Math.sin(u),d=e+n*Math.cos(i),f=t+n*Math.sin(i),s.quadraticCurveTo(c,h,d,f);360!=r&&s.lineTo(e,t),s.endFill()}}]),n}(Pb),Nk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._outline=void 0,e._rankOutline=void 0,e._previewPoint=void 0,e._overPointId=void 0,e._overOutlineId=void 0,e._overUserEdgeId=void 0,e._downPoint=void 0,e._lineStartId=void 0,e.onMouseDown=function(t){if(e._previewPoint){var n=void 0;if(e._overOutlineId){var r=e._display.mesh.points[e._overOutlineId[0]],i=e._display.mesh.points[e._overOutlineId[1]],a=[r.vertices[0],r.vertices[1]],o=[i.vertices[0],i.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getPointByAnother(a,o,[e._previewPoint.x,e._previewPoint.y],r.uvs,i.uvs)}else if(e._overUserEdgeId){var s=e._display.mesh.points[e._overUserEdgeId[0]],l=e._display.mesh.points[e._overUserEdgeId[1]],u=[s.vertices[0],s.vertices[1]],c=[l.vertices[0],l.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getPointByAnother(u,c,[e._previewPoint.x,e._previewPoint.y],s.uvs,l.uvs)}else if(void 0===e._overPointId){var h=e.findTriangle([e._previewPoint.x,e._previewPoint.y]);if(!h)throw new Error("can not find triangle");n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getUVsByVertices(e._display.mesh,h,[e._previewPoint.x,e._previewPoint.y])}else e._lineStartId=e._overPointId;n&&e.addPoint({vertices:[e._previewPoint.x,e._previewPoint.y],uvs:n}),e._downPoint=e._previewPoint,e._addNotification(W.MOUSE_UP,e.onMouseUp)}},e.onMouseUp=function(t){if(e._removeNotification(W.MOUSE_UP,e.onMouseUp),e._downPoint&&e._previewPoint){if(!Lf.isPointEqual(e._downPoint,e._previewPoint)&&e._previewPoint){var n=void 0,r=void 0;if(e._overOutlineId){var i=e._display.mesh.points[e._overOutlineId[0]],a=e._display.mesh.points[e._overOutlineId[1]],o=[i.vertices[0],i.vertices[1]],s=[a.vertices[0],a.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getPointByAnother(o,s,[e._previewPoint.x,e._previewPoint.y],i.uvs,a.uvs)}else if(e._overUserEdgeId){var l=e._display.mesh.points[e._overUserEdgeId[0]],u=e._display.mesh.points[e._overUserEdgeId[1]],c=[l.vertices[0],l.vertices[1]],h=[u.vertices[0],u.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getPointByAnother(c,h,[e._previewPoint.x,e._previewPoint.y],l.uvs,u.uvs)}else if(void 0===e._overPointId){var d=e.findTriangle([e._previewPoint.x,e._previewPoint.y]);if(!d)throw new Error("can not find triangle");n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:KS.getUVsByVertices(e._display.mesh,d,[e._previewPoint.x,e._previewPoint.y])}else r=e._overPointId;var f=void 0;n&&(f={vertices:[e._previewPoint.x,e._previewPoint.y],uvs:n}),e.addPointAndLine(f,e._lineStartId,r),e._previewPoint=void 0}e._downPoint=void 0,e._lineStartId=void 0}},e.onMouseMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.store.getSelectedDisplay(),a=e.getEditGlobalTransform(i),o=Lf.transformInverseApplyPoint(a,{x:n,y:r}),s=e._display,l=s.mesh.points,u=s.mesh.outlines,c=s.mesh.userEdges;if(e._overPointId=void 0,e._overOutlineId=void 0,e._overUserEdgeId=void 0,e._previewPoint=void 0,e.view.overLine=void 0,e.view.addPointPreview=void 0,!(o.x<e._aabb.left||o.x>e._aabb.right||o.y<e._aabb.top||o.y>e._aabb.bottom)){for(var h=0,d=e._outline.length;h<d;h+=4){var f={x:e._outline[h],y:e._outline[h+1]},p={x:e._outline[h+2],y:e._outline[h+3]},v=h/2;if(KS.overPoint(o,f,e.overPrecision))return e._overPointId=s.mesh.outlines[v],e._previewPoint=f,e.view.addPointPreview=f,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(KS.overPoint(o,p,e.overPrecision))return e._overPointId=s.mesh.outlines[v+1],e._previewPoint=p,e.view.addPointPreview=p,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(KS.pointNearSegDist(o.x,o.y,f.x,f.y,p.x,p.y,e.overPrecision)){e.view.overLine=[u[h/2],u[h/2+1]];var m=KS.pointProjectEdge(o.x,o.y,f.x,f.y,p.x,p.y);return e._overOutlineId=[s.mesh.outlines[v],s.mesh.outlines[v+1]],e.view.addPointPreview={x:m[0],y:m[1]},e._previewPoint={x:m[0],y:m[1]},void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}if(!e._outline||KS.pointInRankPolygon([o.x,o.y],e._rankOutline)){for(var g=0,y=c.length;g<y;g+=2){var b=c[g],_=c[g+1],x={x:l[b].vertices[0],y:l[b].vertices[1]},E={x:l[_].vertices[0],y:l[_].vertices[1]};if(e.uvEditMode&&(x={x:(l[b].uvs[0]-.5)*s.width,y:(l[b].uvs[1]-.5)*s.height},E={x:(l[_].uvs[0]-.5)*s.width,y:(l[_].uvs[1]-.5)*s.height}),KS.overPoint(o,x,e.overPrecision))return e._overPointId=b,e.view.addPointPreview=x,e._previewPoint=x,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(KS.overPoint(o,E,e.overPrecision))return e._overPointId=_,e.view.addPointPreview=E,e._previewPoint=E,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(KS.pointNearSegDist(o.x,o.y,x.x,x.y,E.x,E.y,e.overPrecision)){var w=KS.pointProjectEdge(o.x,o.y,x.x,x.y,E.x,E.y);return e._overUserEdgeId=[b,_],e.view.overLine=[u[g/2],u[g/2+1]],e.view.addPointPreview={x:w[0],y:w[1]},e._previewPoint={x:w[0],y:w[1]},void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}for(var T in l){var S=l[T];if(S){var k={x:S.vertices[0],y:S.vertices[1]};if(e.uvEditMode&&(k={x:(S.uvs[0]-.5)*s.width,y:(S.uvs[1]-.5)*s.height}),KS.overPoint(o,k,e.overPrecision))return e._overPointId=parseInt(T),e.view.addPointPreview=k,e._previewPoint=k,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}if(e._downPoint){var C=[e._downPoint.x,e._downPoint.y],A=[o.x,o.y];if(e.isCrossOutlineOrUserEdges(s.mesh,C,A,s.width,s.height))return e.view.addPointPreview=void 0,void(e._previewPoint=void 0)}e.view.addPointPreview=o,e._previewPoint=o,e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint)}else e.view.addPointPreview=void 0}},e}return d(n,[{key:"start",value:function(){this._addNotification(W.MOUSE_DOWN,this.onMouseDown),this._addNotification(W.MOUSE_MOVE,this.onMouseMove),this._addNotification(U.UPDATE_MESH,this.updateView);var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.updateOutline(),this.onMouseMove(void 0)}},{key:"stop",value:function(){this._overPointId=void 0,this._overOutlineId=void 0,this._overUserEdgeId=void 0,this._previewPoint=void 0,this.view&&(this.view.overLine=void 0,this.view.addPointPreview=void 0),this._removeNotification(W.MOUSE_DOWN,this.onMouseDown),this._removeNotification(W.MOUSE_MOVE,this.onMouseMove),this._removeNotification(U.UPDATE_MESH,this.updateView),this._removeNotification(W.MOUSE_UP,this.onMouseUp)}},{key:"updateView",value:function(){var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.updateOutline(),this.view.refresh()}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===Z.MESH_EDIT_TOOL}},{key:"updateAABB",value:function(){var e=this._display,t={top:Number.MAX_VALUE,left:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};if(this.uvEditMode)t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};else for(var n in this._display.mesh.points){var r=this._display.mesh.points[n];r&&(r.vertices[0]<t.left&&(t.left=r.vertices[0]),r.vertices[0]>t.right&&(t.right=r.vertices[0]),r.vertices[1]<t.top&&(t.top=r.vertices[1]),r.vertices[1]>t.bottom&&(t.bottom=r.vertices[1]))}return t.top-=this.overPrecision,t.left-=this.overPrecision,t.right+=this.overPrecision,t.bottom+=this.overPrecision,this._aabb=t,t}},{key:"updateOutline",value:function(){for(var e=this._display,t=e.mesh.points,n=e.mesh.outlines,r=[],i=0,a=n.length;i<a;i+=2){var o=t[n[i]],s=t[n[i+1]];this.uvEditMode?r.push((o.uvs[0]-.5)*e.width,(o.uvs[1]-.5)*e.height,(s.uvs[0]-.5)*e.width,(s.uvs[1]-.5)*e.height):r.push(o.vertices[0],o.vertices[1],s.vertices[0],s.vertices[1])}this._outline=r,this._rankOutline=KS.rankOutlines(r)}},{key:"getEditGlobalTransform",value:function(e){if(this.uvEditMode){var t=Pe({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}},{key:"findTriangle",value:function(e){for(var t=this._display,n=t.mesh.points,r=t.mesh.triangles,i=0,a=r.length;i<a;i+=3){var o=n[r[i]],s=n[r[i+1]],l=n[r[i+2]],u=[o.vertices[0],o.vertices[1]],c=[s.vertices[0],s.vertices[1]],h=[l.vertices[0],l.vertices[1]];if(this.uvEditMode&&(u[0]=(o.uvs[0]-.5)*t.width,u[1]=(o.uvs[1]-.5)*t.height,c[0]=(s.uvs[0]-.5)*t.width,c[1]=(s.uvs[1]-.5)*t.height,h[0]=(l.uvs[0]-.5)*t.width,h[1]=(l.uvs[1]-.5)*t.height),KS.pointInTriangle(e,[u[0],u[1],c[0],c[1],h[0],h[1]]))return[r[i],r[i+1],r[i+2]]}}},{key:"addPoint",value:function(e){var t=ge(this._display.mesh),n=0;for(var r in t.points)t.points[r]&&n++;t.points[n]=e;var i=void 0,a=void 0;if(this._overOutlineId){for(var o=0,s=t.outlines.length;o<s;o+=2){var l=t.outlines[o],u=t.outlines[o+1];if(KS.isLineEqual([l,u],this._overOutlineId)){t.outlines.splice(o,2,l,n,n,u);break}}i=t.outlines}if(this._overUserEdgeId){for(var c=0,h=t.userEdges.length;c<h;c+=2){var d=t.userEdges[c],f=t.userEdges[c+1];if(KS.isLineEqual([d,f],this._overUserEdgeId)){t.userEdges.splice(c,2,d,n,n,f);break}}a=t.userEdges}var p=KS.customizeTriangulate(t.points,t.outlines,t.userEdges);t.triangles=p;var v=this.store.getCurArmature(),m=this.store.getSelectedSlots()[0],g=Qw.getSlotCurDisplay(m),y={armatureId:v.id,slotId:m.id,displayId:g.id,mesh:{points:{}}};i&&(y.mesh.outlines=i),a&&(y.mesh.userEdges=a),y.mesh.points[n]=e,y.mesh.triangles=p,this.store.dispatch(B.UPDATE_MESH,y),this._lineStartId=n}},{key:"isCrossOutlineOrUserEdges",value:function(e,t,n,r,i){for(var a=e.outlines,o=e.userEdges,s=0,l=a.length;s<l;s+=2){var u=e.points[a[s]],c=e.points[a[s+1]],h=[u.vertices[0],u.vertices[1]],d=[c.vertices[0],c.vertices[1]];if(this.uvEditMode&&(h=[(u.uvs[0]-.5)*r,(u.uvs[1]-.5)*i],d=[(c.uvs[0]-.5)*r,(c.uvs[1]-.5)*i]),KS.crossPointArr(t,n,h,d))return!0}for(var f=0,p=o.length;f<p;f+=2){var v=e.points[o[f]],m=e.points[o[f+1]],g=[v.vertices[0],v.vertices[1]],y=[m.vertices[0],m.vertices[1]];if(this.uvEditMode&&(g=[(v.uvs[0]-.5)*r,(v.uvs[1]-.5)*i],y=[(m.uvs[0]-.5)*r,(m.uvs[1]-.5)*i]),KS.crossPointArr(t,n,g,y))return!0}return!1}},{key:"addPointAndLine",value:function(e,t,n){if(void 0!==t){var r=ge(this._display.mesh),i=void 0,a=void 0,o=0;if(e){for(var s in r.points)r.points[s]&&o++;if(n=o,r.points[o]=e,this._overOutlineId){for(var l=0,u=r.outlines.length;l<u;l+=2){var c=r.outlines[l],h=r.outlines[l+1];if(KS.isLineEqual([c,h],this._overOutlineId)){r.outlines.splice(l,2,c,o,o,h);break}}a=r.outlines}if(this._overUserEdgeId){for(var d=0,f=r.userEdges.length;d<f;d+=2){var p=r.userEdges[d],v=r.userEdges[d+1];if(KS.isLineEqual([p,v],this._overUserEdgeId)){r.userEdges.splice(d,2,p,o,o,v);break}}i=r.userEdges}}if(this._previewPoint&&t!==n){i||(i=r.userEdges||[]),i.push(t,n);var m=KS.customizeTriangulate(r.points,r.outlines,i);r.triangles=m;var g=this.store.getCurArmature(),y=this.store.getSelectedSlots()[0],b=Qw.getSlotCurDisplay(y),_={armatureId:g.id,slotId:y.id,displayId:b.id,mesh:{points:{}}};a&&(_.mesh.outlines=a),i&&(_.mesh.userEdges=i),e&&(_.mesh.points[o]=e),_.mesh.triangles=m,this.store.dispatch(B.UPDATE_MESH,_)}}}}],[{key:"toString",value:function(){return"MeshAddPointController"}}]),n}(sk),Dk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._overPointId=void 0,e._overUserEdgeId=void 0,e.onMouseDown=function(t){if(e._overUserEdgeId){for(var n=e._display.mesh,r=n.userEdges,i=[],a=0,o=r.length;a<o;a+=2)r[a]===e._overUserEdgeId[0]&&r[a+1]===e._overUserEdgeId[1]||(i.push(r[a]),i.push(r[a+1]));var s=KS.customizeTriangulate(n.points,n.outlines,i),l=e.store.getCurArmature(),u=e.store.getSelectedSlots()[0],c=Qw.getSlotCurDisplay(u),h={armatureId:l.id,slotId:u.id,displayId:c.id,mesh:{}};return h.mesh.userEdges=i,h.mesh.triangles=s,void e.store.dispatch(B.UPDATE_MESH,h)}if(void 0!==e._overPointId){var d=e._display.mesh;if(d.triangles.length<=3)return;for(var f=[],p=[],v=d.userEdges,m=d.outlines,g=[],y=[],b=0,_=v.length;b<_;b+=2)v[b]!==e._overPointId&&v[b+1]!==e._overPointId?(g.push(v[b]),g.push(v[b+1])):p.push(v[b],v[b+1]);for(var x=0,E=m.length;x<E;x+=2)m[x]!==e._overPointId&&m[x+1]!==e._overPointId?y.push(m[x]):f.push(m[x],m[x+1]);var w=e.meshDataDeletePoint(d,e._overPointId);if(w.outlines.length!==d.outlines.length){var T=KS.meshPointToArr(w.points),S=KS.getHull(T),k=KS.hullToOutline(S);w.outlines=k}var C=KS.customizeTriangulate(w.points,w.outlines,w.userEdges);w.triangles=C;var A=e.store.getCurArmature(),I=e.store.getSelectedSlots()[0],O=Qw.getSlotCurDisplay(I),P=KS.getMeshPointNum(w.points);w.points[P]=void 0;var M={armatureId:A.id,slotId:I.id,displayId:O.id,mesh:w};e.store.dispatch(B.UPDATE_MESH,M),e._overPointId=void 0,e.view.deletePointIndex=void 0,e.view.deleteUserEdge=void 0}},e.onMouseMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.store.getSelectedDisplay(),a=e.getEditGlobalTransform(i),o=Lf.transformInverseApplyPoint(a,{x:n,y:r}),s=e._display,l=s.mesh.points,u=s.mesh.userEdges;if(e._overPointId=void 0,e._overUserEdgeId=void 0,e.view.overLine=void 0,e.view.addPointPreview=void 0,e.view.deletePointIndex=void 0,e.view.deleteUserEdge=void 0,!(o.x<e._aabb.left||o.x>e._aabb.right||o.y<e._aabb.top||o.y>e._aabb.bottom)){for(var c=0,h=u.length;c<h;c+=2){var d=u[c],f=u[c+1],p={x:l[d].vertices[0],y:l[d].vertices[1]},v={x:l[f].vertices[0],y:l[f].vertices[1]};if(e.uvEditMode&&(p={x:(l[d].uvs[0]-.5)*s.width,y:(l[d].uvs[1]-.5)*s.height},v={x:(l[f].uvs[0]-.5)*s.width,y:(l[f].uvs[1]-.5)*s.height}),KS.pointNearSegDist(o.x,o.y,p.x,p.y,v.x,v.y,e.overPrecision))return e._overUserEdgeId=[d,f],void(e.view.deleteUserEdge=e._overUserEdgeId)}for(var m in l){var g=l[m];if(g){var y={x:g.vertices[0],y:g.vertices[1]};if(e.uvEditMode&&(y={x:(g.uvs[0]-.5)*s.width,y:(g.uvs[1]-.5)*s.height}),KS.overPoint(o,y,e.overPrecision))return e._overPointId=parseInt(m),void(e.view.deletePointIndex=e._overPointId)}}}},e}return d(n,[{key:"start",value:function(){this._addNotification(W.MOUSE_DOWN,this.onMouseDown),this._addNotification(W.MOUSE_MOVE,this.onMouseMove),this._addNotification(U.UPDATE_MESH,this.updateView);var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.onMouseMove(void 0)}},{key:"stop",value:function(){this._removeNotification(W.MOUSE_DOWN,this.onMouseDown),this._removeNotification(W.MOUSE_MOVE,this.onMouseMove),this._removeNotification(U.UPDATE_MESH,this.updateView)}},{key:"updateView",value:function(){this.updateAABB(),this.view.refresh()}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===Z.MESH_EDIT_TOOL}},{key:"meshDataDeletePoint",value:function(e,t){var n=ge(e);for(var r in n.points){n.points[r]||delete n.points[r]}var i=n.points;delete i[t];var a={},o=0;for(var s in i)a[s]=o,o++;var l={};for(var u in i){var c=i[u];if(c)l[a[u]]=c;n.points=l}for(var h=n.userEdges,d=0,f=h.length;d<f;d+=2)h[d]!==t&&h[d+1]!==t||(h.splice(d,2),d-=2,f-=2);if(h.length){for(var p=[],v=0,m=h.length;v<m;v++)p[v]=a[h[v]];n.userEdges=p}for(var g=n.outlines,y=0,b=g.length;y<b;y+=2)g[y]!==t&&g[y+1]!==t||(g.splice(y,2),y-=2,b-=2);if(g.length){for(var _=[],x=0,E=g.length;x<E;x++)_[x]=a[g[x]];n.outlines=_}return n}},{key:"updateAABB",value:function(){var e=this._display,t={top:Number.MAX_VALUE,left:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};if(this.uvEditMode)t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};else for(var n in this._display.mesh.points){var r=this._display.mesh.points[n];r&&(r.vertices[0]<t.left&&(t.left=r.vertices[0]),r.vertices[0]>t.right&&(t.right=r.vertices[0]),r.vertices[1]<t.top&&(t.top=r.vertices[1]),r.vertices[1]>t.bottom&&(t.bottom=r.vertices[1]))}return t.top-=this.overPrecision,t.left-=this.overPrecision,t.right+=this.overPrecision,t.bottom+=this.overPrecision,this._aabb=t,t}},{key:"getEditGlobalTransform",value:function(e){if(this.uvEditMode){var t=Pe({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}}],[{key:"toString",value:function(){return"MeshDeletePointController"}}]),n}(sk),Lk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._mousePoint=void 0,e.onMouseDown=function(t){for(var n=e.store.state.runtime.editing.meshEditTool.drawOutlines,r=!1,i=0;i<n.length;i+=2){var a={x:n[i],y:n[i+1]};if(Lf.isPointEqual(a,e._mousePoint)){if(0===i&&n.length>2){r=!0;break}return}}if(r){e.store.historyBeginMerge();for(var o=e.store.getCurArmature(),s=e.store.getSelectedSlots()[0],l=Qw.getSlotCurDisplay(s),u=l.mesh,c={points:{},triangles:[],outlines:[],userEdges:[]},h=0;h<n.length;h+=2){var d=n[h],f=n[h+1],p=d/l.width+.5,v=f/l.height+.5,m=h/2;c.points[m]={vertices:[d,f],uvs:[p,v]};var g=(h+2)%n.length/2;c.outlines.push(m,g)}var y=KS.customizeTriangulate(c.points,c.outlines,c.userEdges);for(var b in c.triangles=y,u.points)c.points[b]||(c.points[b]=void 0);var _={armatureId:o.id,slotId:s.id,displayId:l.id,mesh:c};e.store.dispatch(B.UPDATE_MESH,_),e.store.commit(G.UPDATE_MESH_TOOL,{curTool:Q.EDIT}),e.store.historyEndMerge()}else n.push(e._mousePoint.x),n.push(e._mousePoint.y),e.store.commit(G.UPDATE_MESH_TOOL,{drawOutlines:n})},e.onMouseMove=function(t){if(e.store.state.runtime.editing.meshEditTool.drawOutlines){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.fixMousePoint(n,r);e.view.setDrawOutlines(e.store.state.runtime.editing.meshEditTool.drawOutlines,[i.x,i.y]),e._mousePoint=i}},e}return d(n,[{key:"start",value:function(){this._addNotification(W.MOUSE_DOWN,this.onMouseDown),this._addNotification(W.MOUSE_MOVE,this.onMouseMove),this._addNotification(G.UPDATE_MESH_TOOL,this.updateView),this.updateView()}},{key:"stop",value:function(){this._removeNotification(W.MOUSE_DOWN,this.onMouseDown),this._removeNotification(W.MOUSE_MOVE,this.onMouseMove),this._removeNotification(G.UPDATE_MESH_TOOL,this.updateView),this.view&&this.view.setDrawOutlines(void 0,void 0)}},{key:"updateView",value:function(){var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e;var t=this.store.state.runtime.editing.meshEditTool;this.view.meshEditTool=t,this.updateAABB(),this.onMouseMove(void 0)}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===Z.MESH_EDIT_TOOL}},{key:"fixMousePoint",value:function(e,t){var n=this.store.getSelectedDisplay(),r=this.getEditGlobalTransform(n),i=Lf.transformInverseApplyPoint(r,{x:e,y:t});(i.x<this._aabb.left||i.x>this._aabb.right||i.y<this._aabb.top||i.y>this._aabb.bottom)&&(i.x<this._aabb.left&&(i.x=this._aabb.left),i.x>this._aabb.right&&(i.x=this._aabb.right),i.y<this._aabb.top&&(i.y=this._aabb.top),i.y>this._aabb.bottom&&(i.y=this._aabb.bottom));for(var a=this.store.state.runtime.editing.meshEditTool.drawOutlines,o=0;o<a.length;o+=2){var s={x:a[o],y:a[o+1]};if(Lf.distanceBetweenPoints(i,s)<this.overPrecision)return i.x=s.x,i.y=s.y,i}return i}},{key:"updateAABB",value:function(){var e=this._display,t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};return this._aabb=t,t}},{key:"getEditGlobalTransform",value:function(e){var t=Pe({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}}],[{key:"toString",value:function(){return"MeshDrawOutlineController"}}]),n}(sk),Fk=function(){function e(){l(this,e),this._cacheCalcMatrixMap={},this._cacheTransformableMap=void 0,this._cacheTransformable=Pe({},ek),this._selfTransformable=Pe({},ek),this._transformDirtyMap={x:!1,y:!1,scaleX:!1,scaleY:!1,rotation:!1,skewX:!1,skewY:!1,width:!1,height:!1,pivotX:!1,pivotY:!1},this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._skewX=0,this._skewY=0,this._width=1,this._height=1,this._pivotX=0,this._pivotY=0,this.offsetScaleX=1,this.offsetScaleY=1,this.store=void 0,this.cacheTriangle=void 0}return d(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._transformDirtyMap.x=!0)}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._transformDirtyMap.y=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(e){this._scaleX&&(this.offsetScaleX=this._scaleX/e,this._scaleX=e,this._transformDirtyMap.scaleX=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(e){this._scaleY!==e&&(this.offsetScaleY=this._scaleY/e,this._scaleY=e,this._transformDirtyMap.scaleY=!0)}},{key:"rotation",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._skewY=e,this._transformDirtyMap.rotation=!0)}},{key:"skewX",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._transformDirtyMap.skewX=!0)}},{key:"skewY",get:function(){return this._skewY},set:function(e){this._skewY!==e&&(this._skewY=e,this._transformDirtyMap.skewY=!0)}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX!==e&&(this._pivotX=e,this._transformDirtyMap.pivotX=!0)}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY!==e&&(this._pivotY=e,this._transformDirtyMap.pivotY=!0)}},{key:"width",get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._transformDirtyMap.width=!0)}},{key:"height",get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._transformDirtyMap.height=!0)}},{key:"beginTransform",value:function(){this.cacheSelectedMeshPoints(),this.clearDirtyMap()}},{key:"endTransform",value:function(){this.clearDirtyMap(),this.cacheTriangle=void 0}},{key:"clearDirtyMap",value:function(){this._transformDirtyMap.x=!1,this._transformDirtyMap.y=!1,this._transformDirtyMap.scaleX=!1,this._transformDirtyMap.scaleY=!1,this._transformDirtyMap.rotation=!1,this._transformDirtyMap.skewX=!1,this._transformDirtyMap.skewY=!1,this._transformDirtyMap.width=!1,this._transformDirtyMap.height=!1,this._transformDirtyMap.pivotX=!1,this._transformDirtyMap.pivotY=!1}},{key:"cacheSelectedMeshPoints",value:function(){this._cacheTransformableMap={points:{}};var e=this.store.getSelectedSlots()[0],t=Qw.getSlotCurDisplay(e).mesh;this._cacheTransformableMap.points=ge(t.points),t.cacheFFD&&(this._cacheTransformableMap.cacheFFD=ge(t.cacheFFD)),t.animatedFFD&&(this._cacheTransformableMap.animatedFFD=ge(t.animatedFFD)),t.riggingFFD&&(this._cacheTransformableMap.riggingFFD=ge(t.riggingFFD))}},{key:"setValue",value:function(e){e&&(this.offsetScaleX=1,this.offsetScaleY=1,this._x=e.x,this._y=e.y)}},{key:"changeRotationToSkew",value:function(e){e.rotation=0}},{key:"updateLocalTransform",value:function(e){for(var t=this.store.getCurArmature(),n=this.store.getSelectedSlots(),r=this.store.state.runtime.editing.selectedMeshPointIds,i=this.store.state.runtime.editing.stageTool,a=this.store.state.runtime.editing.meshEditTool,o=this.store.state.runtime.editing.editMode,s=n[0],l=Qw.getSlotCurDisplay(s),u=l.mesh,c=u.points,h=l.globalTransform,d={armatureId:t.id,slotId:s.id,displayId:l.id,mesh:{points:{},triangles:void 0}},f=0,p=r.length;f<p;f++){var v=r[f],m=parseInt(v),g=this._cacheTransformableMap.points[v];if(i===Z.MESH_EDIT_TOOL){var y=ge(c);if(a.deformed){var b={x:g.vertices[0],y:g.vertices[1]},_=Lf.transformApplyPoint(h,b);_.x+=e.x||0,_.y+=e.y||0;var x=Lf.transformInverseApplyPoint(h,_),E=this.cacheTriangle;if(E||(E=KS.findTriangle(parseInt(v),u),this.cacheTriangle=E),!E)return!1;var w=KS.getUVsByVertices(u,E,[x.x,x.y]);if(w[0]<0)return!1;if(w[0]>1)return!1;if(w[1]<0)return!1;if(w[1]>1)return!1;d.mesh.points[v]={vertices:[x.x,x.y],uvs:w},y[v].vertices=[x.x,x.y],y[v].uvs=w}else{var T=g.uvs,S={x:(T[0]-.5)*l.width,y:(T[1]-.5)*l.height},k={x:S.x+e.x||0,y:S.y+e.y||0},C=[k.x/l.width+.5,k.y/l.height+.5];C[0]<0?C[0]=0:C[0]>1&&(C[0]=1),C[1]<0?C[1]=0:C[1]>1&&(C[1]=1),d.mesh.points[v]={uvs:C},y[v].uvs=C}var A=KS.customizeTriangulate(y,u.outlines,u.userEdges);d.mesh.triangles=A}else{delete d.mesh.triangles;var I={x:g.vertices[0],y:g.vertices[1]};l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD&&l.mesh.riggingFFD[v]&&this._cacheTransformableMap.riggingFFD&&this._cacheTransformableMap.riggingFFD[v]?(I.x=this._cacheTransformableMap.riggingFFD[v][0],I.y=this._cacheTransformableMap.riggingFFD[v][1]):o===X.ANIMATION&&(this._cacheTransformableMap.cacheFFD&&this._cacheTransformableMap.cacheFFD[v]?(I.x=this._cacheTransformableMap.cacheFFD[v][0],I.y=this._cacheTransformableMap.cacheFFD[v][1]):this._cacheTransformableMap.animatedFFD&&this._cacheTransformableMap.animatedFFD[v]&&(I.x=this._cacheTransformableMap.animatedFFD[v][0],I.y=this._cacheTransformableMap.animatedFFD[v][1]));var O=Lf.transformApplyPoint(h,I);if(O.x+=e.x||0,O.y+=e.y||0,l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD&&l.mesh.riggingFFD[v]){var P=Qw.getMeshPointFFDByRiggingPos(t,l,m,[O.x,O.y]);d.mesh.points[v]={vertices:P}}else{var M=Lf.transformInverseApplyPoint(h,O);d.mesh.points[v]={vertices:[M.x,M.y]}}}}return this.store.dispatch(B.UPDATE_MESH,d),!0}}]),e}(),Bk=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._helpPoint0=new Hm,e._helpPoint1=new Hm,e.cameraTransform=void 0,e.transformController=new ck,e.transformProxy=new Fk,e.transformHandler=void 0,e.type=void 0,e.controlKey=void 0,e._pivotEnable=!0,e._notHistoryMerge=!1,e.curHandler=void 0,e.bindViewHandlerMap={},e._limitBorder=void 0,e._uvEditMode=!1,e.meshView=void 0,e.onSwitchTool=function(t){var n=e.store.state.runtime.editing.stageTool,r=e.store.state.runtime.editing.meshEditTool;n===Z.MESH_EDIT_TOOL&&r.deformed?e.updateMeshLimitBorder():e.clearMeshLimitBorder()},e.onWindowMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;e._notHistoryMerge||(e.model.historyBeginMerge(),e._notHistoryMerge=!0),e.transformController.updateTransform(n,r,t)},e.onWindowUp=function(t){t.stopImmediatePropagation();var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;e.transformController.endTransform(n,r),e.transformProxy.endTransform(),window.removeEventListener("mousemove",e.onWindowMove),window.removeEventListener("mouseup",e.onWindowUp),window.removeEventListener("keydown",e.onKeyDown),window.removeEventListener("keyup",e.onKeyUp),e._notHistoryMerge&&(e._notHistoryMerge=!1,e.model.historyEndMerge()),e.type=void 0,e.meshView.updateBorder()},e.onKeyDown=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift||(e.controlKey.shift=!0,n=!0);break;case 17:e.controlKey.ctrl||(e.controlKey.ctrl=!0,n=!0);break;case 18:e.controlKey.alt||(e.controlKey.alt=!0,n=!0);break;case 91:e.controlKey.meta||(e.controlKey.meta=!0,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.onKeyUp=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift&&(e.controlKey.shift=!1,n=!0);break;case 17:e.controlKey.ctrl&&(e.controlKey.ctrl=!1,n=!0);break;case 18:e.controlKey.alt&&(e.controlKey.alt=!1,n=!0);break;case 91:e.controlKey.meta&&(e.controlKey.meta=!1,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.asyncProxyTransform=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds,n=e.store.state.runtime.editing.editMode,r=e.store.getSelectedDisplay();if(t.length)if(r){var i=e.getEditGlobalTransform(r),a=e.getEditPointPosition(r,t[0],n),o=Lf.transformApplyPoint(i,a);e.transformProxy.setValue(o),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else e.transformHandler&&(e.transformHandler.target=void 0)},e.onUpdateAnimationTransform=function(t){e.cameraTransform&&e.transformHandler&&(e.asyncProxyTransform(),e.transformHandler.updateTarget())},e.onUpdateBoneTransform=function(t){e.cameraTransform&&e.transformHandler&&e.transformHandler.updateTarget()},e.onUpdateCameraTransform=function(t){if(e.cameraTransform&&e.transformHandler){var n=e.store.state.editor.stage;switch(t.type){case W.UPDATE_SCALE:e.cameraTransform.scale.set(n.scale,n.scale);break;case W.UPDATE_POSITION:e.cameraTransform.position.set(n.x,n.y)}e.transformHandler.updateTarget()}},e.onSelectChange=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds,n=e.store.state.runtime.editing.editMode,r=e.store.getSelectedDisplay();if(t.length){e.startTransform();var i=e.getEditGlobalTransform(r),a=e.getEditPointPosition(r,t[0],n),o=Lf.transformApplyPoint(i,a);e.transformProxy.setValue(o),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else e.transformHandler&&(e.transformHandler.target=void 0),e.stopTransform()},e.transformController.target=e.transformProxy,e.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},e}return d(n,[{key:"pivotEnable",get:function(){return this._pivotEnable},set:function(e){this._pivotEnable!==e&&(this._pivotEnable=e,this.transformHandler&&(this.transformHandler.pivotHandler.interactive=this._pivotEnable))}},{key:"uvEditMode",set:function(e){this._uvEditMode!==e&&(this._uvEditMode=e,this.onUpdateAnimationTransform(void 0))}},{key:"start",value:function(){this._addNotification(U.SELECT_MESH_POINTS,this.onSelectChange),this._addNotification(N.SELECT_ARMATURE,this.onSelectChange),this._addNotification(W.UPDATE_POSITION,this.onUpdateCameraTransform),this._addNotification(W.UPDATE_SCALE,this.onUpdateCameraTransform),this._addNotification(U.UPDATE_MESH,this.onUpdateAnimationTransform),this._addNotification(U.UPDATE_CACHE_FFD,this.onUpdateAnimationTransform),this._addNotification(P.AUTO_KEY,this.onUpdateAnimationTransform),this._addNotification($.UPDATE_FRAME,this.onUpdateAnimationTransform),this._addNotification(U.UPDATE_RIG_BONE,this.onUpdateAnimationTransform),this._addNotification(G.SWITCH_MODE,this.onUpdateAnimationTransform),this._addNotification(G.SWITCH_TOOL,this.onSwitchTool),this._addNotification(G.UPDATE_MESH_TOOL,this.onSwitchTool),this.store.state.runtime.editing.selectedMeshPointIds.length&&this.onSelectChange()}},{key:"stop",value:function(){this._removeNotification(U.SELECT_MESH_POINTS,this.onSelectChange),this._removeNotification(N.SELECT_ARMATURE,this.onSelectChange),this._removeNotification(W.UPDATE_POSITION,this.onUpdateCameraTransform),this._removeNotification(W.UPDATE_SCALE,this.onUpdateCameraTransform),this._removeNotification(U.UPDATE_MESH,this.onUpdateAnimationTransform),this._removeNotification(U.UPDATE_CACHE_FFD,this.onUpdateAnimationTransform),this._removeNotification(P.AUTO_KEY,this.onUpdateAnimationTransform),this._removeNotification($.UPDATE_FRAME,this.onUpdateAnimationTransform),this._removeNotification(U.UPDATE_RIG_BONE,this.onUpdateAnimationTransform),this._removeNotification(G.SWITCH_MODE,this.onUpdateAnimationTransform),this._removeNotification(G.SWITCH_TOOL,this.onSwitchTool),this._removeNotification(G.UPDATE_MESH_TOOL,this.onSwitchTool),this.stopTransform()}},{key:"startTransform",value:function(){this.transformHandler=this.view.meshTransformHandler,this.cameraTransform=this.transformHandler.cameraTransform,this.transformProxy.store=this.store,this.resetCameraTransform(),this.bindHandler(),this.updateDisplays(),this.onSwitchTool(void 0)}},{key:"updateMeshLimitBorder",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds[0],n=e.slots.map[t],r=Qw.getSlotCurDisplay(n),i=this.store.state.runtime.editing.selectedMeshPointIds;if(0!==i.length){var a=parseInt(i[0]),o=KS.findTriangle(a,r.mesh);if(o){var s=KS.getVerticesByUVs(r.mesh,o,[0,0]),l=KS.getVerticesByUVs(r.mesh,o,[1,0]),u=KS.getVerticesByUVs(r.mesh,o,[1,1]),c=KS.getVerticesByUVs(r.mesh,o,[0,1]);this._limitBorder=[s,l,u,c]}}}},{key:"clearMeshLimitBorder",value:function(){this._limitBorder=void 0}},{key:"stopTransform",value:function(){this.unBindHandler(),this.transformHandler&&(JS.setCursor(QS.auto),this.transformHandler.target=void 0,this.transformHandler=void 0),this.cameraTransform=void 0,this.transformProxy.store=void 0,this.meshView.updateBorder()}},{key:"updateDisplays",value:function(){}},{key:"getViewStage",value:function(){if(this.view)for(var e=this.view;e;){if(!e.parent)return e;e=e.parent}}},{key:"bindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.bindView(e,uk.XY),this.bindView(this.transformHandler.moveXHandler,uk.X),this.bindView(this.transformHandler.moveYHandler,uk.Y),this.bindView(this.transformHandler.moveHandler,uk.XY),this.bindViewDoubleClick(this.transformHandler.moveHandler)}}},{key:"unBindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.unBindView(e),this.unBindView(this.transformHandler.moveXHandler),this.unBindView(this.transformHandler.moveYHandler),this.unBindView(this.transformHandler.moveHandler)}window.removeEventListener("mousemove",this.onWindowMove),window.removeEventListener("mouseup",this.onWindowUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"bindViewDoubleClick",value:function(e){var t=0;e.on("mousedown",(function(n){n.stopPropagation(),t++,setTimeout((function(){t>0&&t--}),200),t>=2&&(e.emit("dblclick"),t=0)}))}},{key:"viewMouseDownHandler",value:function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.currentTarget.transformType;e.stopPropagation(),this.type=t,this.asyncProxyTransform(),this.transformController.beginTransform(this.model.state.editor.stage.mouseStageX,this.model.state.editor.stage.mouseStageY,t),this.transformProxy.beginTransform(),window.addEventListener("mousemove",this.onWindowMove),window.addEventListener("mouseup",this.onWindowUp),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this._limitBorder&&this.meshView.updateBorder(this._limitBorder)}}},{key:"bindView",value:function(e,t){e.transformType=t,this.unBindView(e),e.on("mousedown",this.viewMouseDownHandler,this)}},{key:"unBindView",value:function(e){e.off("mousedown",this.viewMouseDownHandler,this)}},{key:"resetCameraTransform",value:function(){if(this.cameraTransform){var e=this.store.state.editor.stage;this.cameraTransform.scale.set(e.scale,e.scale),this.cameraTransform.position.set(e.x,e.y)}}},{key:"getEditGlobalTransform",value:function(e){if(this._uvEditMode){var t=Pe({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}},{key:"getEditPointPosition",value:function(e,t,n){if(!e.width||!e.height)throw new Error("display width or height is 0");var r=e.mesh.points[t],i=r.vertices[0],a=r.vertices[1];return e.mesh.riggingFFD&&e.mesh.riggingFFD[t]?(i=e.mesh.riggingFFD[t][0],a=e.mesh.riggingFFD[t][1]):n===X.ANIMATION&&(e.mesh.cacheFFD&&e.mesh.cacheFFD[t]?(i=e.mesh.cacheFFD[t][0],a=e.mesh.cacheFFD[t][1]):e.mesh.animatedFFD&&e.mesh.animatedFFD[t]&&(i=e.mesh.animatedFFD[t][0],a=e.mesh.animatedFFD[t][1])),this._uvEditMode&&(i=(r.uvs[0]-.5)*e.width,a=(r.uvs[1]-.5)*e.height),{x:i,y:a}}}],[{key:"toString",value:function(){return"MeshTransformController"}}]),n}(sk),Uk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._overPointIndex="",e._overLine=void 0,e._downStagePos={x:0,y:0},e._display=void 0,e._rectSelectAdd=!1,e._cacheMeshPointSelectIds=[],e._readyRectSelect=!1,e._downRectSelectPos={x:0,y:0},e._mouseDown=!1,e._rectSelecting=!1,e._notBeginMerge=!1,e.widgetView=void 0,e._startEditing=!1,e._justSelectedBone=!1,e.startEditMesh=function(){e._addNotification(W.MOUSE_MOVE,e.onMouseMove),e._startEditing=!0},e.stopEditMesh=function(){e.view.display=void 0,e._display=void 0,e._mouseDown=!1,e._rectSelecting=!1,e._notBeginMerge=!1,e._readyRectSelect=!1,e._rectSelectAdd=!1,e._removeNotification(W.MOUSE_MOVE,e.onMouseMove),e._startEditing=!1},e.onUpdateSlot=function(t){var n=!1;if(t.data.slots)for(var r in t.data.slots){if(void 0!==t.data.slots[r].displayIndex){n=!0;break}}n&&e.onSelectedSlots()},e.onSelectedSlots=function(){e.stopEditMesh();var t=e.store.state.runtime.editing.selectedSlotIds;e.store.state.runtime.editing.selectedDisplayId;if(1!==t.length);else{var n=t[0],r=e.store.getCurArmature().slots.map[n],i=r.displayIndex>=0?Qw.getSlotCurDisplay(r):void 0;if(i&&i.type===w.MESH){var a=e.store.state.runtime.editing.meshEditTool,o=e.store.state.runtime.editing.stageTool;e.view.setMeshEditTool(o===Z.MESH_EDIT_TOOL?a:void 0),e.view.setWeightMode(o===Z.WEIGHT_TOOL),e.view.display=i,e._display=i,e.startEditMesh()}}},e.onSelectedPoints=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds;e.view.selectedPoints=t},e.refreshAnimationView=function(){var t=e.store.state.runtime.editing.editMode;e.view.editMode=t,e.view.display=e.getCurDisplay(),e.view.refresh()},e.refreshView=function(){var t=e.store.state.runtime.editing.editMode;e.view.editMode=t,e.view.refresh()},e.onSelectRiggingBone=function(){e._justSelectedBone=!0},e.onMouseMove=function(t){e._mouseDown?e._rectSelecting?e.updateRectSelect(t.data):e._readyRectSelect&&e.startRectSelect(t.data):e.checkOverPoint(t.data.canvasPos)},e.onMouseDown=function(t){if(e._downStagePos.x=t.data.stagePos.x,e._downStagePos.y=t.data.stagePos.y,e._overPointIndex){var n=e.store.state.runtime.editing.selectedSlotIds;if(1===n.length){var r=n[0],i=e.store.getCurArmature().slots.map[r],a=i.displayIndex>=0?Qw.getSlotCurDisplay(i):void 0;a&&a.type===w.MESH&&e.store.dispatch(B.SELECT_MESH_POINTS,{points:[e._overPointIndex],slotId:r,displayId:a.id})}}else if(e._overLine){var o=e.store.state.runtime.editing.selectedSlotIds;if(1===o.length){var s=o[0],l=e.store.getCurArmature().slots.map[s],u=l.displayIndex>=0?Qw.getSlotCurDisplay(l):void 0;u&&u.type===w.MESH&&e.store.dispatch(B.SELECT_MESH_POINTS,{points:[e._overLine[0].toString(),e._overLine[1].toString()],slotId:s,displayId:u.id})}}else e.preRectSelect(t.data);e._mouseDown=!0},e.onMouseUp=function(t){e._mouseDown=!1,e._readyRectSelect=!1,e._rectSelectAdd=!1;var n=t.data.stagePos.x,r=t.data.stagePos.y;if(e._rectSelecting)e.stopRectSelect(),e._notBeginMerge&&(e._notBeginMerge=!1,e.store.historyEndMerge());else{if(e._justSelectedBone)return void(e._justSelectedBone=!1);if(n!==e._downStagePos.x||r!==e._downStagePos.y)return;if(!e._overPointIndex&&!e._overLine)if(e.store.state.runtime.editing.selectedMeshPointIds.length>0){var i=e.store.state.runtime.editing.selectedSlotIds;if(1===i.length){var a=i[0],o=e.store.getCurArmature().slots.map[a],s=o.displayIndex>=0?Qw.getSlotCurDisplay(o):void 0;s&&s.type===w.MESH&&e.store.dispatch(B.SELECT_MESH_POINTS,{points:[],slotId:a,displayId:s.id})}}}},e}return d(n,[{key:"start",value:function(){this._addNotification(F.SELECT_SLOTS,this.onSelectedSlots),this._addNotification(F.UPDATE_PROPERTIES,this.onUpdateSlot),this._addNotification(U.SELECT_MESH_POINTS,this.onSelectedPoints),this._addNotification(U.UPDATE_MESH,this.refreshView),this._addNotification(U.UPDATE_CACHE_FFD,this.refreshView),this._addNotification($.UPDATE_FRAME,this.refreshAnimationView),this._addNotification(P.AUTO_KEY,this.refreshAnimationView),this._addNotification(U.UPDATE_RIG_BONE,this.refreshView),this._addNotification(F.UPDATE_LOCAL_TRANSFORMS,this.refreshView),this._addNotification(G.SWITCH_MODE,this.refreshView),this._addNotification(W.MOUSE_DOWN,this.onMouseDown),this._addNotification(W.MOUSE_UP,this.onMouseUp),this._addNotification(G.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(G.SWITCH_TOOL,this.onUpdateMeshTool),this._addNotification(G.SELECT_RIGGING_BONE,this.onSelectRiggingBone),this.onSelectedSlots()}},{key:"stop",value:function(){this.view&&(this._removeNotification(F.SELECT_SLOTS,this.onSelectedSlots),this._removeNotification(F.UPDATE_PROPERTIES,this.onUpdateSlot),this._removeNotification(U.SELECT_MESH_POINTS,this.onSelectedPoints),this._removeNotification(U.UPDATE_MESH,this.refreshView),this._removeNotification(U.UPDATE_CACHE_FFD,this.refreshView),this._removeNotification($.UPDATE_FRAME,this.refreshAnimationView),this._removeNotification(P.AUTO_KEY,this.refreshAnimationView),this._removeNotification(F.UPDATE_LOCAL_TRANSFORMS,this.refreshView),this._removeNotification(G.SWITCH_MODE,this.refreshView),this._removeNotification(W.MOUSE_DOWN,this.onMouseDown),this._removeNotification(W.MOUSE_UP,this.onMouseUp),this._removeNotification(G.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._removeNotification(G.SWITCH_TOOL,this.onUpdateMeshTool),this._removeNotification(G.SELECT_RIGGING_BONE,this.onSelectRiggingBone)),this.stopEditMesh()}},{key:"pauseSelect",value:function(){this._removeNotification(W.MOUSE_MOVE,this.onMouseMove)}},{key:"resumeSelect",value:function(){this._startEditing&&this._addNotification(W.MOUSE_MOVE,this.onMouseMove)}},{key:"getCurDisplay",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds,t=this.store.state.runtime.editing.editMode;if(1===e.length){var n=e[0],r=this.store.getCurArmature().slots.map[n],i=Qw.getSlotCurDisplay(r,t);if(i&&i.type===w.MESH)return i}return null}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.view.meshEditTool=t===Z.MESH_EDIT_TOOL?e:void 0,this.view.weightMode=t===Z.WEIGHT_TOOL}},{key:"checkOverPoint",value:function(e){if(this._enable){for(var t in this.view.pointPosMap){var n=this.view.pointPosMap[t];if(n&&KS.overPoint(n,e))return this.view.overPointIndex=t,this.view.overLine=void 0,this._overPointIndex=t,void(this._overLine=void 0)}for(var r=0,i=this._display.mesh.outlines.length;r<i;r+=2){var a=this._display.mesh.outlines[r],o=this._display.mesh.outlines[r+1],s=this.view.pointPosMap[a],l=this.view.pointPosMap[o];if(KS.pointNearSegDist(e.x,e.y,s.x,s.y,l.x,l.y,10))return this.view.overLine=[a,o],this.view.overPointIndex="",this._overPointIndex="",void(this._overLine=[a,o])}this.view.overPointIndex="",this.view.overLine=void 0,this._overPointIndex="",this._overLine=void 0}}},{key:"preRectSelect",value:function(e){var t=this.store.state.runtime.editing.selectedMeshPointIds,n=e.nativeEvent;this._rectSelectAdd=n.ctrlKey||n.metaKey,this._rectSelectAdd&&(this._readyRectSelect=!0,this._downRectSelectPos.x=e.canvasPos.x,this._downRectSelectPos.y=e.canvasPos.y,this._rectSelectAdd&&(this._cacheMeshPointSelectIds=t.concat()))}},{key:"startRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;t===this._downStagePos.x&&n===this._downStagePos.y||(this._rectSelecting=!0)}},{key:"stopRectSelect",value:function(){this._rectSelecting=!1,this.widgetView&&this.widgetView.clearFrameSelect()}},{key:"updateRectSelect",value:function(e){var t=e.canvasPos.x,n=e.canvasPos.y;this.checkFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,t,n);var r=e.canvasPos.x,i=e.canvasPos.y;this.widgetView&&this.widgetView.drawFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,r,i)}},{key:"checkFrameSelect",value:function(e,t,n,r){var i=[],a=Math.min(e,n),o=Math.max(e,n),s=Math.min(t,r),l=Math.max(t,r);for(var u in this.view.pointPosMap){var c=this.view.pointPosMap[u];if(c){var h=c.x,d=c.y;h>a&&h<o&&d>s&&d<l&&i.push(u)}}var f=i;this._rectSelectAdd&&this._cacheMeshPointSelectIds.length>0&&(f=i.concat(this._cacheMeshPointSelectIds));var p=this.store.state.runtime.editing.selectedMeshPointIds;if(!Lf.arrayEqualArray(p,f)){this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge());var v=this.store.state.runtime.editing.selectedSlotIds;if(1===v.length){var m=v[0],g=this.store.getCurArmature().slots.map[m],y=g.displayIndex>=0?Qw.getSlotCurDisplay(g):void 0;y&&y.type===w.MESH&&this.store.dispatch(B.SELECT_MESH_POINTS,{points:f,slotId:m,displayId:y.id})}}}}],[{key:"toString",value:function(){return"StageMeshSelectController"}}]),n}(sk),Hk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).selectController=void 0,e.transformController=void 0,e.addPointController=void 0,e.deletePointController=void 0,e.drawOutlineController=void 0,e._initialized=!1,e.onSwitchTool=function(){var t=e.store.state.runtime.editing.stageTool,n=e.store.state.runtime.editing.meshEditTool;if(e.transformController.uvEditMode=!n.deformed&&t===Z.MESH_EDIT_TOOL,t===Z.RIGGING_TOOL)return e.selectController.pauseSelect(),void(e.transformController.enable=!1);if(e.selectController.resumeSelect(),t===Z.WEIGHT_TOOL?e.transformController.enable=!1:e.transformController.enable=!0,t===Z.MESH_EDIT_TOOL)switch(n.curTool){case Q.ADD:e.selectController.enable=!1,e.transformController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1,e.addPointController.enable=!0;break;case Q.EDIT:e.addPointController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1,e.selectController.enable=!0,e.transformController.enable=!0;break;case Q.DELETE:e.addPointController.enable=!1,e.selectController.enable=!1,e.transformController.enable=!1,e.drawOutlineController.enable=!1,e.deletePointController.enable=!0;break;case Q.DRAW:e.addPointController.enable=!1,e.selectController.enable=!1,e.transformController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!0}else e.onSelectedSlots()},e.onSelectedSlots=function(){e.selectController.enable=!1,e.transformController.enable=!1,e.addPointController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1;var t=e.store.state.runtime.editing.selectedBoneIds,n=e.store.state.runtime.editing.selectedSlotIds;e.store.state.runtime.editing.selectedDisplayId;if(!(t.length>0)&&0!==n.length&&1===n.length){var r=n[0],i=e.store.getCurArmature().slots.map[r],a=i.displayIndex>=0?Qw.getSlotCurDisplay(i):void 0;if(a&&a.type===w.MESH)e.selectController.enable=!0,e.store.state.runtime.editing.stageTool!==Z.WEIGHT_TOOL?e.transformController.enable=!0:e.transformController.enable=!1}},e}return d(n,[{key:"start",value:function(){if(!this._initialized){this.selectController=Uk.getInstance(Uk),this.transformController=Bk.getInstance(Bk);var e=this.view.getView(Rk),t=this.view.getView(ok);this.selectController.initialize(this.store,e),this.selectController.widgetView=t,this.transformController.initialize(this.store,t),this.transformController.meshView=e,this.addPointController=Nk.getInstance(Nk),this.addPointController.initialize(this.store,e),this.deletePointController=Dk.getInstance(Dk),this.deletePointController.initialize(this.store,e),this.drawOutlineController=Lk.getInstance(Lk),this.drawOutlineController.initialize(this.store,e),this._initialized=!0}this._addNotification(F.SELECT_SLOTS,this.onSelectedSlots),this._addNotification(V.SELECT_BONES,this.onSelectedSlots),this._addNotification(N.SELECT_ARMATURE,this.onSelectedSlots),this._addNotification(H.UPDATE_PROPERTIES,this.onSelectedSlots),this._addNotification(G.SWITCH_TOOL,this.onSwitchTool),this._addNotification(G.UPDATE_MESH_TOOL,this.onSwitchTool)}},{key:"stop",value:function(){this.selectController.enable=!1,this.transformController.enable=!1,this.addPointController.enable=!1,this.deletePointController.enable=!1,this.drawOutlineController.enable=!1}}],[{key:"toString",value:function(){return"StageMeshController"}}]),n}(sk),jk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).mouseDownData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.mouseUpData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.mouseData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.rightDownCanvasPos={x:0,y:0},e.justStageRightDown=!1,e.downStageCenterPos={x:0,y:0},e.upNum=0,e.upTime=0,e.onStageMouseRightMove=function(e){},e.onWindowMouseUp=function(t){null!=document&&(document.removeEventListener("mouseup",e.onWindowMouseUp),e.store.commit(W.MOUSE_UP,e.mouseUpData))},e.onWindowRightUp=function(t){null!=document&&e.store.commit(W.RIGHT_UP,e.mouseUpData)},e}return d(n,[{key:"start",value:function(){this.view.stage.on("mousedown",this.onStageMouseDown,this),this.view.stage.on("mousemove",this.onStageMouseMove,this),this.view.stage.on("mouseover",this.onStageMouseOver,this),this.view.stage.on("mouseout",this.onStageMouseOut,this),this.view.stage.on("rightdown",this.onStageRightDown,this)}},{key:"stop",value:function(){}},{key:"onStageMouseMove",value:function(e){var t=e.data.global,n=this.getStagePosition(t);this.mouseData.canvasPos.x=t.x,this.mouseData.canvasPos.y=t.y,this.mouseData.stagePos.x=n.x,this.mouseData.stagePos.y=n.y,this.mouseData.nativeEvent=e,this.store.commit(W.MOUSE_MOVE,this.mouseData)}},{key:"onStageMouseDown",value:function(e){document.addEventListener("mouseup",this.onWindowMouseUp),this.view.stage.on("mouseup",this.onStageMouseUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseDownData.canvasPos.x=t.x,this.mouseDownData.canvasPos.y=t.y,this.mouseDownData.stagePos.x=n.x,this.mouseDownData.stagePos.y=n.y,this.mouseDownData.nativeEvent=e,this.store.commit(W.MOUSE_DOWN,this.mouseDownData)}},{key:"onStageMouseUp",value:function(e){document.removeEventListener("mouseup",this.onWindowMouseUp),this.view.stage.off("mouseup",this.onStageMouseUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseUpData.canvasPos.x=t.x,this.mouseUpData.canvasPos.y=t.y,this.mouseUpData.stagePos.x=n.x,this.mouseUpData.stagePos.y=n.y,this.mouseUpData.nativeEvent=e,this.upNum++;var r=(new Date).getTime();if(this.upTime>0&&r-this.upTime<=200)return this.store.commit(W.DOUBLE_CLICK,this.mouseUpData),void(this.upTime=0);this.upTime=r,this.store.commit(W.MOUSE_UP,this.mouseUpData)}},{key:"onStageRightDown",value:function(e){this.view.stage.on("rightup",this.onStageRightUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseDownData.canvasPos.x=t.x,this.mouseDownData.canvasPos.y=t.y,this.mouseDownData.stagePos.x=n.x,this.mouseDownData.stagePos.y=n.y,this.mouseDownData.nativeEvent=e,this.store.commit(W.RIGHT_DOWN,this.mouseDownData)}},{key:"onStageRightUp",value:function(e){this.view.stage.off("rightup",this.onStageRightUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseUpData.canvasPos.x=t.x,this.mouseUpData.canvasPos.y=t.y,this.mouseUpData.stagePos.x=n.x,this.mouseUpData.stagePos.y=n.y,this.mouseUpData.nativeEvent=e,this.store.commit(W.RIGHT_UP,this.mouseUpData)}},{key:"onStageMouseOver",value:function(e){this._sendNotification(W.MOUSE_OVER)}},{key:"onStageMouseOut",value:function(e){this._sendNotification(W.MOUSE_OUT)}},{key:"getStagePosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:(e.x-t)/r,y:(e.y-n)/r}}}],[{key:"toString",value:function(){return"StageMouseController"}}]),n}(sk),zk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._transformed=!1,e._hideAllSlot=!1,e}return d(n,[{key:"start",value:function(){this.view&&(this.view.slots=this.getShowSlot(),this.onHideSlot()),this._addNotification(N.SELECT_ARMATURE,this.onArmatureChange),this._addNotification(F.SET_PARENT,this.refreshSlot),this._addNotification(H.SET_PARENT,this.refreshSlot),this._addNotification(V.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(F.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(V.ADD_IK,this.refreshTransform),this._addNotification(V.UPDATE_IK,this.refreshTransform),this._addNotification(V.UPDATE_CACHE_IK,this.refreshTransform),this._addNotification(V.DELETE_IKS,this.refreshTransform),this._addNotification(F.ADD_SLOT,this.refreshSlot),this._addNotification(F.DELETE_SLOTS,this.refreshSlot),this._addNotification(F.OVER_SLOT,this.refreshOver),this._addNotification(F.SELECT_SLOTS,this.refreshSelected),this._addNotification(H.SELECT_DISPLAY,this.refreshSelected),this._addNotification(N.CHANGE_SLOT_ORDER,this.refreshSlot),this._addNotification($.UPDATE_FRAME,this.refreshSlot),this._addNotification(N.CACHE_SLOT_ORDER,this.refreshSlot),this._addNotification(U.UPDATE_MESH,this.refreshSlot),this._addNotification(U.UPDATE_CACHE_FFD,this.refreshSlot),this._addNotification(U.UPDATE_RIG_BONE,this.refreshSlot),this._addNotification(H.UPDATE_PROPERTIES,this.refreshSlot),this._addNotification(P.AUTO_KEY,this.onUpdateAnimatedProperty),this._addNotification(V.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimatedProperty),this._addNotification(G.SWITCH_MODE,this.refreshSlot),this._addNotification(P.SELECT_ANIMATION,this.refreshSlot),this._addNotification(W.HIDE_ITEMS,this.onHideSlot),this._addNotification(G.CHANGE_BONE_SLOT_CONTROL,this.onChangeBoneSlotControl),this._addNotification(V.UPDATE_PROPERTIES,this.refreshBone),this._addNotification(F.UPDATE_PROPERTIES,this.refreshSlot),this._addNotification(F.UPDATE_CACHE_PROPERTIES,this.refreshSlot),this._addNotification(G.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(G.SWITCH_TOOL,this.onUpdateMeshTool)}},{key:"stop",value:function(){this.view}},{key:"onEndTranform",value:function(e){this.view.startOvercheck()}},{key:"onStartTransform",value:function(e){this.view.stopOverCheck()}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.hideAllSlot=!e.deformed&&t===Z.MESH_EDIT_TOOL}},{key:"getShowSlot",value:function(){return this._hideAllSlot?this.getSelectedSlot():this.getCurSlots()}},{key:"hideAllSlot",set:function(e){this._hideAllSlot!==e&&(this._hideAllSlot=e,this.view&&(this._hideAllSlot?this.view.uvEditMode=!0:this.view.uvEditMode=!1,this.view.slots=this.getShowSlot()))}},{key:"onSwitchMode",value:function(){this.view.refresh()}},{key:"onArmatureChange",value:function(){this.view&&(this.view.slots=this.getShowSlot())}},{key:"onOverSlot",value:function(e){this.store.commit(F.OVER_SLOT,e)}},{key:"onOutSlot",value:function(e){this.store.commit(F.OVER_SLOT,0)}},{key:"onUpdateAnimatedProperty",value:function(){this.view.refresh()}},{key:"onChangeBoneSlotControl",value:function(e){"slotVisible"===e.data.property&&this.onHideSlot()}},{key:"onHideSlot",value:function(){if(this.store.state.runtime.editing.boneSlotControl.slotVisible)this.view.hideSlotIds=this.store.state.runtime.editing.hideBoneSlotIds;else{var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];this.view.hideSlotIds=t.slots.ids}}},{key:"refreshBone",value:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.bones,r=!1;if(n)for(var i in n){var a=n[i];void 0===a.inheritRotation&&void 0===a.inheritScale||(r=!0)}r&&this.view.refresh()}},{key:"refreshSlot",value:function(){var e=this.store.state.runtime.editing.editMode;this.view.editMode=e,this.view.slots=this.getShowSlot()}},{key:"refreshOver",value:function(){var e=this.store.state.editor.over.overSlotId;this.view.overSlotId=e}},{key:"refreshSelected",value:function(){this._transformed=!1;var e=this.store.state.runtime.editing.selectedSlotIds;this.view.selectedSlotIds=e}},{key:"refreshTransform",value:function(){this._transformed=!0,this.view.refresh()}},{key:"mouseDown",value:function(){this._transformed=!1;var e=this.store.state.editor.over.overSlotId;e>0&&this.store.dispatch(L.SELECT_ONE_SLOT,[e])}},{key:"getSelectedSlot",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds;return[e.slots.map[t[0]]]}},{key:"getCurSlots",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap,n=this.store.state.runtime.editing.editMode,r=t[e];if(r){var i=r.slots.ids;n===X.ANIMATION&&(r.cacheZOrder?i=r.cacheZOrder:r.animatedZOrder&&(i=r.animatedZOrder));for(var a=[],o=0,s=i.length;o<s;o++){var l=i[o],u=r.slots.map[l];a.push(u)}return a}return[]}}],[{key:"toString",value:function(){return"StageSlotController"}}]),n}(sk),Vk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).lastTool=Z.SELECT,e._escHandler=void 0,e._rightDownPos={x:0,y:0},e.onOverBone=function(t){e.checkOverEnable(t)&&e.store.commit(V.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(V.OVER_BONE,0)},e}return d(n,[{key:"start",value:function(){this.view.on(K.OVER_BONE,this.onOverBone,this),this.view.on(K.OUT_BONE,this.onOutBone,this),this._escHandler=this.escHandler.bind(this),window.addEventListener("keydown",this._escHandler),this._addNotification(W.MOUSE_DOWN,this.mouseDown),this._addNotification(W.RIGHT_DOWN,this.rightDown),this._addNotification(W.RIGHT_UP,this.rightUp)}},{key:"stop",value:function(){this.view.off(K.OVER_BONE,this.onOverBone),this.view.off(K.OUT_BONE,this.onOutBone),window.removeEventListener("keydown",this._escHandler),this._removeNotification(W.MOUSE_DOWN,this.mouseDown),this._removeNotification(W.RIGHT_DOWN,this.rightDown),this._removeNotification(W.RIGHT_UP,this.rightUp)}},{key:"checkOverEnable",value:function(e){return!0}},{key:"mouseUp",value:function(e){this._removeNotification(W.MOUSE_UP,this.mouseUp),this.model.historyEndMerge()}},{key:"escHandler",value:function(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.cancelPickBone())}},{key:"rightDown",value:function(e){this._rightDownPos={x:e.data.stagePos.x,y:e.data.stagePos.y}}},{key:"rightUp",value:function(e){var t=e.data.stagePos.x,n=e.data.stagePos.y;t===this._rightDownPos.x&&n===this._rightDownPos.y&&this.cancelPickBone()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;t>0&&this.pickBone(t)}},{key:"cancelPickBone",value:function(){}},{key:"pickBone",value:function(e){}}],[{key:"toString",value:function(){return"SelectBoneController"}}]),n}(sk),Gk=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var a=t[r];if(a===e)return!1;if(Qw.isDescendantBone(n,a,e))return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(z.PICK_IK_TARGET_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedBoneIds;if(1===n.length){var r={armatureId:t.id,parentId:n[0],targetId:e};this.store.dispatch(z.ADD_IK_BY_TARGET,r),this.store.dispatch(z.PICK_IK_TARGET_END,{lastTool:this.lastTool})}else if(2===n.length){var i=t.bones.map[n[0]],a=t.bones.map[n[1]],o=0,s=0;if(i.parentId===a.id?(o=a.id,s=i.id):a.parentId===i.id&&(o=i.id,s=a.id),o&&s){var l={armatureId:t.id,parentId:o,childId:s,targetId:e};this.store.dispatch(z.ADD_IK_BY_TARGET,l),this.store.dispatch(z.PICK_IK_TARGET_END,{lastTool:this.lastTool})}}}}],[{key:"toString",value:function(){return"IKSelectBoneController"}}]),n}(Vk),Wk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._downPos={x:0,y:0},e.cacheBoneWeights=void 0,e.onOverSlot=function(t){e.checkOverSlot(t)&&e.store.commit(F.OVER_SLOT,t)},e.onOutSlot=function(){e.store.commit(F.OVER_SLOT,0)},e.onOverBone=function(t){e.checkOverEnable(t)&&e.store.commit(V.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(V.OVER_BONE,0)},e.mouseMove=function(t){t.data.canvasPos.x;var n=t.data.canvasPos.y,r=(e._downPos.y-n)/5*.01,i=e.store.state.runtime.editing.selectedMeshPointIds,a=e.store.getCurArmature(),o=e.store.state.runtime.editing.selectedSlotIds[0],s=a.slots.map[o],l=s.displayIndex>=0?Qw.getSlotCurDisplay(s):void 0;if(l.mesh){for(var u={armatureId:a.id,slotId:o,displayId:l.id,boneWeights:{}},c=l.mesh,h=e.store.state.runtime.editing.riggingSelectedBoneId,d=!1,f=0,p=i.length;f<p;f++){var v,m=parseInt(i[f]),g=(null===(v=e.cacheBoneWeights[m])||void 0===v?void 0:v[h])||0,y=g+r;if(y<0&&(y=0),y>1&&(y=1),y!==g){var b=u.boneWeights;b[m]=Qw.calculateBoneWeight(c.boneWeights,m,h,y,e.cacheBoneWeights),b[m][h]=y,d=!0}}d&&e.store.commit(U.UPDATE_RIG_BONE,u)}},e.onWindowUp=function(t){e.stopModifyWeight()},e}return d(n,[{key:"boneStage",get:function(){return this.view.getView(CT)}},{key:"slotStage",get:function(){return this.view.getView(ZS)}},{key:"display",get:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds[0],n=e.slots.map[t];return n.displayIndex>=0?Qw.getSlotCurDisplay(n):void 0}},{key:"start",value:function(){this._addNotification(F.SELECT_SLOTS,this.onSlotSelect),this._addNotification(W.MOUSE_DOWN,this.mouseDown),this.startSlotSelect(),this.onSlotSelect()}},{key:"stop",value:function(){this.stopBoneSelect(),this.stopSlotSelect(),this._removeNotification(W.MOUSE_DOWN,this.mouseDown)}},{key:"startSlotSelect",value:function(){this.slotStage.on(K.OVER_SLOT,this.onOverSlot,this),this.slotStage.on(K.OUT_SLOT,this.onOutSlot,this)}},{key:"stopSlotSelect",value:function(){this.slotStage.off(K.OVER_SLOT,this.onOverSlot),this.slotStage.off(K.OUT_SLOT,this.onOutSlot)}},{key:"startBoneSelect",value:function(){this.boneStage.on(K.OVER_BONE,this.onOverBone,this),this.boneStage.on(K.OUT_BONE,this.onOutBone,this)}},{key:"stopBoneSelect",value:function(){this.boneStage.off(K.OVER_BONE,this.onOverBone),this.boneStage.off(K.OUT_BONE,this.onOutBone)}},{key:"onSlotSelect",value:function(){1===this.store.state.runtime.editing.selectedSlotIds.length?this.startBoneSelect():this.stopBoneSelect()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;if(t>0)this.pickBone(t);else{var n=this.store.state.editor.over.overSlotId;if(n>0)this.pickSlot(n);else if(1===this.store.state.runtime.editing.selectedSlotIds.length)if(0!==this.store.state.runtime.editing.selectedMeshPointIds.length)this.store.state.runtime.editing.riggingSelectedBoneId?(this._downPos={x:e.data.canvasPos.x,y:e.data.canvasPos.y},this.startModifyWeight()):mf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u7ed1\u5b9a\u7684\u9aa8\u9abc");else mf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u7f51\u683c\u4e0a\u7684\u70b9");else mf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u7f51\u683c")}}},{key:"startModifyWeight",value:function(){this.store.historyBeginMerge(),this.cacheBoneWeights=ge(this.display.mesh.boneWeights),this._addNotification(W.MOUSE_MOVE,this.mouseMove),window.addEventListener("mouseup",this.onWindowUp)}},{key:"stopModifyWeight",value:function(){this.store.historyEndMerge(),this._removeNotification(W.MOUSE_MOVE,this.mouseMove),window.removeEventListener("mouseup",this.onWindowUp)}},{key:"checkOverSlot",value:function(e){var t=this.store.getCurArmature(),n=(this.store.state.runtime.editing.selectedSlotIds,t.slots.map[e]);return!!(n.displayIndex>=0?Qw.getSlotCurDisplay(n):void 0).mesh}},{key:"checkOverEnable",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?Qw.getSlotCurDisplay(r):void 0;if(!i.mesh)return!1;var a=[];if(i.mesh.bonePose)for(var o in i.mesh.bonePose)a.push(parseInt(o));return a.indexOf(e)>-1}},{key:"pickBone",value:function(e){this.store.commit(G.SELECT_RIGGING_BONE,{boneId:e})}},{key:"pickSlot",value:function(e){this.store.commit(F.SELECT_SLOTS,[e])}}],[{key:"toString",value:function(){return"RiggingWeightController"}}]),n}(sk),Xk=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var a=t[r];if(n.bones.map[a].parentId===e)return!1;if(a===e)return!1;if(Qw.isDescendantBone(n,a,e))return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(z.PICK_BONE_PARENT_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedBoneIds;this.store.dispatch(z.SET_PARENT,{armatureId:t.id,boneIds:n,parentId:e}),this.store.dispatch(z.PICK_BONE_PARENT_END,{lastTool:this.lastTool})}}],[{key:"toString",value:function(){return"SelectBoneParentController"}}]),n}(Vk),Yk=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"checkOverEnable",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?Qw.getSlotCurDisplay(r):void 0;if(!i.mesh)return!1;var a=[];if(i.mesh.bonePose)for(var o in i.mesh.bonePose)a.push(parseInt(o));return!(a.indexOf(e)>-1)}},{key:"cancelPickBone",value:function(){this.store.dispatch(W.CLOSE_RIGGING_TOOL,{})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?Qw.getSlotCurDisplay(r):void 0;if(i.mesh){var a=t.bones.map[e].globalTransform,o=!1;if(i.mesh.bonePose){var s=0;for(var l in i.mesh.bonePose){i.mesh.bonePose[l]&&s++}0===s&&(o=!0)}else o=!0;this.store.dispatch(B.ADD_RIG_BONE,{armatureId:t.id,slotId:n,displayId:i.id,boneId:e,bonePose:a,autoWeight:o})}}}],[{key:"toString",value:function(){return"SelectBoneRigController"}}]),n}(Vk),Kk=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedSlotIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var a=t[r];if(n.slots.map[a].parentId===e&&1===t.length)return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(L.PICK_SLOT_PARENT_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds;this.store.historyBeginMerge(),this.store.dispatch(L.SET_PARENT,{armatureId:t.id,slotIds:n,parentId:e}),this.store.dispatch(L.PICK_SLOT_PARENT_END,{lastTool:this.lastTool}),this.store.historyEndMerge()}}],[{key:"toString",value:function(){return"SelectSlotParentController"}}]),n}(Vk),qk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._downPos=void 0,e._curBoneData=void 0,e.onOverBone=function(t){e.store.commit(V.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(V.OVER_BONE,0)},e}return d(n,[{key:"start",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds,t=this.store.state.runtime.editing.selectedBoneIds;if(e.length>0&&this.store.dispatch(L.SELECT_SLOTS,[]),t.length>1)this.store.dispatch(z.SELECT_BONES,[t[0]]);else if(0===t.length){var n=this.store.getCurArmature(),r=Qw.getRootBone(n);this.store.dispatch(z.SELECT_BONES,[r.id])}this.view.on(K.OVER_BONE,this.onOverBone,this),this.view.on(K.OUT_BONE,this.onOutBone,this),this._addNotification(W.MOUSE_DOWN,this.mouseDown)}},{key:"stop",value:function(){this.view.off(K.OVER_BONE,this.onOverBone),this.view.off(K.OUT_BONE,this.onOutBone),this._removeNotification(W.MOUSE_DOWN,this.mouseDown)}},{key:"mouseMove",value:function(e){var t=e.data.stagePos,n=Lf.radianBetweenLineAndX(this._downPos,t),r=Lf.distanceBetweenPoints(this._downPos,t),i=Pe(Pe({},this._curBoneData.globalTransform),{},{skewX:n,skewY:n});this.store.dispatch(z.UPDATE_GLOBAL_TRANSFORMS,y({},this._curBoneData.id,{global:i,diffKeys:["skewX","skewY"]}));var a=this.store.getCurArmature();this.store.commit(V.UPDATE_PROPERTIES,{armatureId:a.id,bones:y({},this._curBoneData.id,{length:r})})}},{key:"mouseUp",value:function(e){this._removeNotification(W.MOUSE_MOVE,this.mouseMove),this._removeNotification(W.MOUSE_UP,this.mouseUp),this.model.historyEndMerge()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;if(t>0)this.store.dispatch(z.SELECT_ONE_BONE,[t]);else{var n=e.data.stagePos;this._downPos=n;var r=this.store.getCurArmature(),i=this.store.state.runtime.editing.selectedBoneIds;if(0===i.length)return;var a=Qw.getBoneById(r,i[0]),o=Lf.transformInverseApplyPoint(a.globalTransform,n),s=Qw.createBoneName("bone",r),l={id:this.store.getId(),name:s,parentId:a.id,length:0,transform:{x:o.x,y:o.y,scaleX:1,scaleY:1,skewX:0,skewY:0}};if((e.data.nativeEvent.ctrlKey||e.data.nativeEvent.metaKey)&&a){this.model.historyBeginMerge();var u={x:a.globalTransform.x,y:a.globalTransform.y},c=e.data.stagePos,h=Lf.radianBetweenLineAndX(u,c),d=Lf.distanceBetweenPoints(u,c),f=Pe(Pe({},a.globalTransform),{},{skewX:h,skewY:h});this.store.dispatch(z.UPDATE_GLOBAL_TRANSFORMS,y({},a.id,{global:f,diffKeys:["skewX","skewY"]}));var p=this.store.getCurArmature();this.store.commit(V.UPDATE_PROPERTIES,{armatureId:p.id,bones:y({},a.id,{length:d})}),this._curBoneData=l;var v=Lf.transformInverseApplyPoint(f,c);l.transform.x=v.x,l.transform.y=v.y,this.store.dispatch(z.ADD_BONE,{armatureId:p.id,bone:l}),this.model.historyEndMerge()}else this.model.historyBeginMerge(),this._addNotification(W.MOUSE_MOVE,this.mouseMove),this._addNotification(W.MOUSE_UP,this.mouseUp),this._curBoneData=l,this.store.dispatch(z.ADD_BONE,{armatureId:r.id,bone:l})}}}],[{key:"toString",value:function(){return"StageToolAddBoneController"}}]),n}(sk),$k=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._downPos=void 0,e._curBoneData=void 0,e.poseHandler=void 0,e.boneChain=[],e.poseChain=[],e.boneSlotSelectController=void 0,e.maxChainBones=[],e}return d(n,[{key:"start",value:function(){this.boneSlotSelectController=lk.getInstance(lk),this._addNotification(V.SELECT_BONES,this.onSelectBones),this._addNotification(V.UPDATE_LOCAL_TRANSFORMS,this.updatePoseHandler),this._addNotification(P.AUTO_KEY,this.updatePoseHandler),this._addNotification(V.UPDATE_CACHE_TRANSFORMS,this.updatePoseHandler),this._addNotification($.UPDATE_FRAME,this.updatePoseHandler),this.poseHandler=this.view.poseHandler,this.poseHandler.on("mousedown",this.poseMouseDown,this),this.updateSelectedBone()}},{key:"stop",value:function(){this._removeNotification(V.SELECT_BONES,this.onSelectBones),this._removeNotification(V.UPDATE_LOCAL_TRANSFORMS,this.updatePoseHandler),this._removeNotification(P.AUTO_KEY,this.updatePoseHandler),this._removeNotification(V.UPDATE_CACHE_TRANSFORMS,this.updatePoseHandler),this._removeNotification($.UPDATE_FRAME,this.updatePoseHandler),this.poseHandler.off("mousedown",this.poseMouseDown,this),this.poseMouseUp(),this.view&&this.view.hidePoseHandler(),this.poseHandler=null}},{key:"onSelectBones",value:function(){this.updateSelectedBone()}},{key:"updateSelectedBone",value:function(){var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.getCurArmature();if(this.maxChainBones=Qw.getMaxChainBones(t,e),this.boneChain=[],this.maxChainBones&&this.maxChainBones.length>0)for(var n=0;n<this.maxChainBones.length;n++)this.boneChain.push(t.bones.map[this.maxChainBones[n]]);this.updatePoseHandler()}},{key:"updatePoseHandler",value:function(){if(this.maxChainBones&&this.maxChainBones.length>0){var e=this.store.state.runtime.editing.editMode,t=this.store.getCurArmature(),n=this.maxChainBones[this.maxChainBones.length-1],r=t.bones.map[n],i=Qw.getBoneTailPosition(r,t,e);this.view.showPoseHandler(i.x,i.y)}else this.view.hidePoseHandler()}},{key:"poseMouseDown",value:function(e){this.model.historyBeginMerge(),this.boneSlotSelectController.reFrameSelectEnable=!1,this.boneSlotSelectController.overEnable=!1,this.poseHandler.poseType=ik.SELECT;var t=this.model.state.editor.stage.mouseStageX,n=this.model.state.editor.stage.mouseStageY;this.poseChain=this.createPoseChainData(this.boneChain,{x:t,y:n}),this._addNotification(W.MOUSE_MOVE,this.poseMouseMove),this._addNotification(W.MOUSE_UP,this.poseMouseUp)}},{key:"poseMouseUp",value:function(){this._removeNotification(W.MOUSE_MOVE,this.poseMouseMove),this._removeNotification(W.MOUSE_UP,this.poseMouseUp),this.boneSlotSelectController.reFrameSelectEnable=!0,this.boneSlotSelectController.overEnable=!0,this.poseHandler.poseType=ik.NORMAL,this.model.historyEndMerge()}},{key:"poseMouseMove",value:function(){var e=this.model.state.editor.stage.mouseStageX,t=this.model.state.editor.stage.mouseStageY;this.poseChain=this.createPoseChainData(this.boneChain,{x:e,y:t}),this.modifyBoneRotation(this.boneChain,this.poseChain)}},{key:"modifyBoneRotation",value:function(e,t){var n=0,r=[],i=e[0],a=this.store.getCurArmature();for(n=0;n<t.length;n++){if(n<1)if(i.parentId>0&&!1!==i.inheritRotation){var o=a.bones.map[i.parentId];t[n].localRotation=t[n].rotation-180*o.globalTransform.skewX/Math.PI}else t[n].localRotation=t[n].rotation;else!1!==e[n].inheritRotation?t[n].localRotation=t[n].rotation-(t[n-1].rotation+t[n-1].initialRotation):t[n].localRotation=t[n].rotation;t[n].localRotation=t[n].localRotation+t[n].initialRotation,t[n].localRotation>180&&(t[n].localRotation=t[n].localRotation-360),t[n].localRotation<-180&&(t[n].localRotation=360+t[n].localRotation),r[n]=t[n].localRotation*Math.PI/180}var s={};for(n=0;n<e.length;n++){var l=e[n],u=Pe({},l.transform);u.skewX=r[n],u.skewY=r[n],s[l.id]={local:u,diffKeys:["skewX","skewY"]}}this.store.dispatch(z.UPDATE_LOCAL_TRANSFORMS,s)}},{key:"createPoseChainData",value:function(e,t){var n=1,r=[],i=0;for(n=0;n<e.length;n++){var a=e[n],o=new Zk;o.x=a.globalTransform.x,o.y=a.globalTransform.y,e[n+1]?(o.bone=e[n],o.child=e[n+1],o.setRotation(e[n+1].globalTransform.x,e[n+1].globalTransform.y)):(o.bone=e[n],o.child=null,o.rotation=180*a.globalTransform.skewX/Math.PI),i+=o.length,o.initialRotation=180*a.globalTransform.skewY/Math.PI-o.rotation,r[e.length-n-1]=o}if(Lf.distanceBetweenPoints(t,e[0].globalTransform)>=i){var s=t.x-e[0].globalTransform.x,l=t.y-e[0].globalTransform.y,u=Math.atan2(l,s);for(n=0;n<r.length;n++)r[n].rotation=180*u/Math.PI}else this.segmentLoop(r,t);return r.reverse(),r}},{key:"segmentLoop",value:function(e,t){var n=0,r=this.reach(e[0],t.x,t.y);for(n=1;n<e.length;n++){var i=e[n];r=this.reach(i,r.x,r.y)}for(n=e.length-1;n>0;n--){var a=e[n-1],o=e[n];this.position(a,o)}}},{key:"reach",value:function(e,t,n){var r=t-e.x,i=n-e.y,a=Math.atan2(i,r);return e.rotation=180*a/Math.PI,{x:t-(this.getPin(e).x-e.x),y:n-(this.getPin(e).y-e.y)}}},{key:"position",value:function(e,t){e.x=this.getPin(t).x,e.y=this.getPin(t).y}},{key:"getPin",value:function(e){var t=e.rotation,n=e.x,r=e.y,i=this.getSegmentLength(e),a=t*Math.PI/180;return{x:n+Math.cos(a)*i,y:r+Math.sin(a)*i}}},{key:"getSegmentLength",value:function(e){var t=e.bone,n=e.child;if(t){if(n){var r=n.globalTransform.x-t.globalTransform.x,i=n.globalTransform.y-t.globalTransform.y,a=Lf.transformApplyPoint(t.globalTransform,{x:r,y:i}),o=a.x-t.globalTransform.x,s=a.y-t.globalTransform.y;return Math.sqrt(o*o+s*s)}var l=t.length,u=Lf.transformApplyPoint(t.globalTransform,{x:l,y:0}),c=u.x-t.globalTransform.x,h=u.y-t.globalTransform.y;return Math.sqrt(c*c+h*h)}return 0}}],[{key:"toString",value:function(){return"StageToolPoseBoneController"}}]),n}(sk),Zk=function(){function e(){l(this,e),this.x=void 0,this.y=void 0,this.rotation=void 0,this.initialRotation=void 0,this.localRotation=void 0,this.length=void 0,this.bone=void 0,this.child=void 0}return d(e,[{key:"setRotation",value:function(e,t){var n=e-this.x,r=t-this.y;this.rotation=180*Math.atan2(r,n)/Math.PI}}]),e}(),Qk=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).boneTransformController=void 0,e.boneSlotSelectController=void 0,e.stageToolAddBoneController=void 0,e.stageToolPoseBoneController=void 0,e.ikSelectBoneController=void 0,e.selectBoneParentController=void 0,e.selectSlotParentController=void 0,e.riggingController=void 0,e.weightController=void 0,e}return d(n,[{key:"start",value:function(){this.boneTransformController=Pk.getInstance(Pk),this.boneSlotSelectController=lk.getInstance(lk),this.stageToolAddBoneController=qk.getInstance(qk),this.stageToolAddBoneController.initialize(this.store,this.view.getView(CT)),this.stageToolPoseBoneController=$k.getInstance($k),this.stageToolPoseBoneController.initialize(this.store,this.view.getView(ok)),this.ikSelectBoneController=Gk.getInstance(Gk),this.ikSelectBoneController.initialize(this.store,this.view.getView(CT)),this.selectBoneParentController=Xk.getInstance(Xk),this.selectBoneParentController.initialize(this.store,this.view.getView(CT)),this.selectSlotParentController=Kk.getInstance(Kk),this.selectSlotParentController.initialize(this.store,this.view.getView(CT)),this.riggingController=Yk.getInstance(Yk),this.riggingController.initialize(this.store,this.view.getView(CT)),this.weightController=Wk.getInstance(Wk),this.weightController.initialize(this.store,this.view),this._addNotification(z.PICK_IK_TARGET,this.onPickIKTarget),this._addNotification(z.PICK_BONE_PARENT,this.onPickBoneParent),this._addNotification(L.PICK_SLOT_PARENT,this.onPickBoneParent),this._addNotification(G.SWITCH_TOOL,this.onSwitchTool)}},{key:"onPickIKTarget",value:function(e){var t=this.store.state.runtime.editing.lastStageTool;this.ikSelectBoneController.lastTool=t}},{key:"onPickBoneParent",value:function(e){var t=this.store.state.runtime.editing.lastStageTool;this.selectBoneParentController.lastTool=t}},{key:"onSwitchTool",value:function(e){var t=this.store.state.runtime.editing.stageTool;switch(this.boneSlotSelectController.enable=!1,this.boneTransformController.enable=!1,this.stageToolAddBoneController.enable=!1,this.stageToolPoseBoneController.enable=!1,this.ikSelectBoneController.enable=!1,this.boneSlotSelectController.reFrameSelectEnable=!1,this.boneSlotSelectController.selectSlotEnable=!0,this.selectBoneParentController.enable=!1,this.selectSlotParentController.enable=!1,this.riggingController.enable=!1,this.weightController.enable=!1,t){case Z.SELECT:this.boneTransformController.enable=!0,this.boneSlotSelectController.enable=!0;break;case Z.ADD_BONE:this.stageToolAddBoneController.enable=!0;break;case Z.POSE_TOOL:this.boneSlotSelectController.enable=!0,this.boneSlotSelectController.selectSlotEnable=!1,this.boneSlotSelectController.reFrameSelectEnable=!0,this.stageToolPoseBoneController.enable=!0;break;case Z.IK_PICK_TARGET_TOOL:this.ikSelectBoneController.enable=!0;break;case Z.PICK_BONE_PARENT_TOOL:this.selectBoneParentController.enable=!0;break;case Z.PICK_SLOT_PARENT_TOOL:this.selectSlotParentController.enable=!0;break;case Z.MESH_EDIT_TOOL:break;case Z.RIGGING_TOOL:this.riggingController.enable=!0;break;case Z.WEIGHT_TOOL:this.weightController.enable=!0}}}],[{key:"toString",value:function(){return"StageToolsController"}}]),n}(sk),Jk=function(e){return e[e.INIT=100]="INIT",e[e.SAVE=101]="SAVE",e[e.SHORTCUT=102]="SHORTCUT",e[e.LOAD_PARTICLE=103]="LOAD_PARTICLE",e[e.OPEN_VIEW=104]="OPEN_VIEW",e[e.RESET_VIEW=105]="RESET_VIEW",e[e.RIGHT_MENU=106]="RIGHT_MENU",e[e.CREATE_MOVIECLIP=107]="CREATE_MOVIECLIP",e[e.PREVIEW=108]="PREVIEW",e}({}),eC=9.99,tC=.1,nC=function(e){return e.UPDATE_LABEL_OFFSET="UPDATE_LABEL_OFFSET",e.EVENT_COLLAPSE="EVENT_COLLAPSE",e}({}),rC=function(e){return e[e.UPDATE_FRAME=700]="UPDATE_FRAME",e[e.OVER_FRAME=701]="OVER_FRAME",e[e.UPDATE_SELECT_FRAME=702]="UPDATE_SELECT_FRAME",e[e.UPDATE_FRAME_BLOCK=703]="UPDATE_FRAME_BLOCK",e[e.UPDATE_FRAME_BLOCK_START=704]="UPDATE_FRAME_BLOCK_START",e[e.UPDATE_FRAME_BLOCK_END=705]="UPDATE_FRAME_BLOCK_END",e[e.MOVE_FRAME=706]="MOVE_FRAME",e[e.MOVE_FRAME_COMPLETED=707]="MOVE_FRAME_COMPLETED",e[e.REMOVE_FRAMES=708]="REMOVE_FRAMES",e[e.UPDATE_LOOP=709]="UPDATE_LOOP",e[e.UPDATE_SCALE=710]="UPDATE_SCALE",e[e.UPDATE_OFFSET=711]="UPDATE_OFFSET",e[e.UPDATE_NAME=712]="UPDATE_NAME",e}({}),iC=function(e){return e.MOVE_BLOCK="MOVE_BLOCK",e.SCALE_LEFT_BLOCK="SCALE_LEFT_BLOCK",e.SCALE_RIGHT_BLOCK="SCALE_RIGHT_BLOCK",e}({}),aC=function(e){return e[e.UNDO=200]="UNDO",e[e.REDO=201]="REDO",e[e.DELETE=202]="DELETE",e[e.CREATE_MOVIECLIP=203]="CREATE_MOVIECLIP",e[e.SWITCH_MODE=204]="SWITCH_MODE",e[e.SWITCH_MODE_POSE=205]="SWITCH_MODE_POSE",e[e.SWITCH_MODE_ANIMATION=206]="SWITCH_MODE_ANIMATION",e[e.COPY=207]="COPY",e[e.PASTE=208]="PASTE",e[e.CUT=209]="CUT",e}({}),oC=function(){function e(){l(this,e),this.fps=33,this.tweenQueue=[],this.ticker=void 0,this.working=!1}return d(e,[{key:"setTicker",value:function(e){this.ticker=e}},{key:"to",value:function(e,t,n,r){var i=this.getTween(e,t);if(null==i){var a=e[t];i={target:e,property:t,to:n,time:r,from:a,curValue:a,interval:(n-a)/(r/this.fps)},this.tweenQueue.push(i)}else{var o=(n-e[t])/(r/this.fps);i.to=n,i.time=r,i.interval=o}this.working||this.ticker&&(this.working=!0,this.ticker.add(this.tick,this))}},{key:"getTween",value:function(e,t){for(var n=0,r=this.tweenQueue.length;n<r;n++){var i=this.tweenQueue[n];if(i.target===e&&i.property===t)return i}}},{key:"tick",value:function(e){var t;if(this.tweenQueue.length>0)for(var n=0,r=this.tweenQueue.length;n<r;n++){var i=this.tweenQueue[n];this.runTween(i,e)&&(this.tweenQueue.splice(n,1),n--,r--)}else null===(t=this.ticker)||void 0===t||t.remove(this.tick,this),this.working=!1}},{key:"runTween",value:function(e,t){var n=e.curValue>e.to,r=e.curValue+e.interval,i=!1;return n===r>e.to&&r!==e.to||(r=e.to,i=!0),e.target[e.property]=r,e.curValue=r,i}}],[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}},{key:"setTicker",value:function(t){e.instance.setTicker(t)}},{key:"to",value:function(t,n,r,i){e.instance.to(t,n,r,i)}}]),e}();oC._instance=void 0;var sC=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).justStageRightDown=!0,e.downStageX=0,e.downStageY=0,e.downCenterX=0,e.downCenterY=0,e.rightDownX=0,e.rightDownY=0,e.targetScale=1,e._stageScale=1,e.delta=0,e._tweenCenterX=0,e._tweenCenterY=0,e.onStageMove=function(t){e.view.setCenter(t.data.x,t.data.y)},e.onStageScale=function(t){e.view.setScale(t.data)},e.onStageResize=function(t){var n=e.store.state.editor.stage,r=n.width,i=n.height,a=.5*(r-n.cameraWidth),o=.5*(i-n.cameraHeight);oC.to(m(e),"tweenCenterX",a,500),oC.to(m(e),"tweenCenterY",o,500),e._removeNotification(W.UPDATE_SIZE,e.onStageResize)},e.onStageRestore=function(t){var n=e.store.state.editor.stage,r=n.width,i=n.height,a=.5*(r-n.cameraWidth),o=.5*(i-n.cameraHeight);oC.to(m(e),"tweenCenterX",a,500),oC.to(m(e),"tweenCenterY",o,500),oC.to(m(e),"onlyScale",1,500)},e.onStageMouseRightMove=function(t){if(e.justStageRightDown)e.justStageRightDown=!1,e.rightDownX=t.clientX,e.rightDownY=t.clientY;else{var n=t.clientX-e.rightDownX,r=t.clientY-e.rightDownY;e.store.commit(W.UPDATE_POSITION,{x:e.downCenterX+n,y:e.downCenterY+r})}},e.onSheetMouseWheel=function(t){var n=t.wheelDelta;e.delta=5,e.targetScale=n>0?1.1*e.targetScale:.9*e.targetScale,e.targetScale>eC?e.targetScale=eC:e.targetScale<tC&&(e.targetScale=tC),oC.to(m(e),"stageScale",e.targetScale,500)},e}return d(n,[{key:"start",value:function(){this.view.stage.eventMode="dynamic",this.view.stage.on("rightdown",this.onStageMouseRightDown,this),this.view.stage.on("rightup",this.onStageMouseRightUp,this),this.view.stage.on("rightupoutside",this.onStageMouseRightUp,this),this.view.view.addEventListener("mouseover",this.onStageMouseOver.bind(this)),this.view.view.addEventListener("mouseout",this.onStageMouseOut.bind(this)),this._addNotification(W.UPDATE_POSITION,this.onStageMove),this._addNotification(W.UPDATE_SCALE,this.onStageScale),this._addNotification(W.RESET_SCALE,this.onStageRestore)}},{key:"stop",value:function(){}},{key:"stageScale",get:function(){return this._stageScale},set:function(e){this._stageScale=e,this.model&&(this.delta>0?this.scaleCenterMouse(e):this.scaleCenterAniMouse(e))}},{key:"onlyScale",get:function(){return this._stageScale},set:function(e){this._stageScale=e,this.store.commit(W.UPDATE_SCALE,e)}},{key:"tweenCenterX",get:function(){return this._tweenCenterX},set:function(e){this._tweenCenterX=e}},{key:"tweenCenterY",get:function(){return this._tweenCenterY},set:function(e){this._tweenCenterY=e,this.store.commit(W.UPDATE_POSITION,{x:this._tweenCenterX,y:this._tweenCenterY})}},{key:"scaleCenterMouse",value:function(e){var t=this.store.state.editor.stage.mouseCanvasX,n=this.store.state.editor.stage.mouseCanvasY;this.scaleInViewCenter(e,{x:t,y:n})}},{key:"scaleCenterAniMouse",value:function(e){var t=this.store.state.editor.stage,n=t.width-t.mouseCanvasX,r=t.height-t.mouseCanvasY;this.scaleInViewCenter(e,{x:n,y:r})}},{key:"scaleInViewCenter",value:function(e,t){var n=this.getStagePosition(t);this.store.commit(W.UPDATE_SCALE,e);var r=this.getCanvasPosition(n),i=r.x-t.x,a=r.y-t.y,o=this.store.state.editor.stage.x-i,s=this.store.state.editor.stage.y-a;this.store.commit(W.UPDATE_POSITION,{x:o,y:s})}},{key:"onStageMouseRightDown",value:function(e){this.justStageRightDown=!0,this.downStageX=0,this.downStageY=0,this.downCenterX=this.store.state.editor.stage.x,this.downCenterY=this.store.state.editor.stage.y,document.addEventListener("mousemove",this.onStageMouseRightMove)}},{key:"onStageMouseRightUp",value:function(e){this.justStageRightDown=!1,document.removeEventListener("mousemove",this.onStageMouseRightMove)}},{key:"onStageMouseOver",value:function(e){this.targetScale=this.store.state.editor.stage.scale,document.addEventListener("mousewheel",this.onSheetMouseWheel)}},{key:"onStageMouseOut",value:function(e){document.removeEventListener("mousewheel",this.onSheetMouseWheel)}},{key:"getStagePosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:(e.x-t)/r,y:(e.y-n)/r}}},{key:"getCanvasPosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:e.x*r+t,y:e.y*r+n}}}],[{key:"toString",value:function(){return"StageTransformController"}}]),n}(sk),lC=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).stageTransformController=void 0,e.stageMouseController=void 0,e.stageBoneController=void 0,e.stageSlotController=void 0,e.boneTransformController=void 0,e.boneSlotSelectController=void 0,e.stageToolsController=void 0,e.stageMeshController=void 0,e.onSelectMeshPoint=function(){e.store.state.runtime.editing.selectedMeshPointIds.length>0?(e.boneSlotSelectController.pause(),e.boneTransformController.pause()):(e.boneSlotSelectController.resume(),e.boneTransformController.resume())},e}return d(n,[{key:"start",value:function(){this.stageTransformController=sC.getInstance(sC),this.stageTransformController.initialize(this.store,this.view),this.stageTransformController.enable=!0,this.stageMouseController=jk.getInstance(jk),this.stageMouseController.initialize(this.store,this.view),this.stageMouseController.enable=!0,this.stageBoneController=Mk.getInstance(Mk);var e=this.view.getView(CT);e&&(this.stageBoneController.initialize(this.store,e),this.stageBoneController.enable=!0),this.stageSlotController=zk.getInstance(zk);var t=this.view.getView(ZS);t&&(this.stageSlotController.initialize(this.store,t),this.stageSlotController.enable=!0),this.boneTransformController=Pk.getInstance(Pk);var n=this.view.getView(ok);n&&(this.boneTransformController.initialize(this.store,n),this.boneTransformController.enable=!0),this.stageMeshController=Hk.getInstance(Hk),this.stageMeshController.initialize(this.store,this.view),this.stageMeshController.enable=!0,this.boneSlotSelectController=lk.getInstance(lk),this.boneSlotSelectController.initialize(this.store,this.view),this.boneSlotSelectController.enable=!0,this.stageToolsController=Qk.getInstance(Qk),this.stageToolsController.initialize(this.store,this.view),this.stageToolsController.enable=!0,this._addNotification(W.UPDATE_SIZE,this.updateSize),this._addNotification(U.SELECT_MESH_POINTS,this.onSelectMeshPoint)}},{key:"updateSize",value:function(e){var t=this.store.state.editor.stage,n=t.width,r=t.height;this.view.resizeStage(n,r)}}],[{key:"toString",value:function(){return"StageController"}}]),n}(sk),uC=function(e){return e.SHORT="short",e.MIDDLE="middle",e.LONG="long",e}({});function cC(e,t,n){var r=[],i=10*n,a=1;if(i>10){var o=Math.floor(n);o>1&&(i/=o,a*=o)}else{for(var s=i;s<=5;)s*=2,a/=2;i=s}for(var l=e-t,u=Math.ceil(l/i),c=t,h=Math.ceil(c/i),d=0;d<u;d++){var f=t+d*i;d%10===0?r.push({type:uC.LONG,pos:f,value:Math.round(10*d/a).toString()}):d%5===0?r.push({type:uC.MIDDLE,pos:f}):r.push({type:uC.SHORT,pos:f})}for(var p=1;p<h;p++){var v=t-p*i;p%10===0?r.push({type:uC.LONG,pos:v,value:"-"+Math.round(10*p/a)}):p%5===0?r.push({type:uC.MIDDLE,pos:v}):r.push({type:uC.SHORT,pos:v})}return r}var hC=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._rulerSVG=void 0,r._pen=void 0,r._textPool=void 0,r.fontSize=9,r.textColor="#888888",r.refs=void 0,r.state={rule:cC(e.size,e.offset,e.scale),scale:e.scale},r.init(),r}return d(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({rule:cC(e.size,e.offset,e.scale),scale:e.scale})}},{key:"setData",value:function(e,t,n){this.setState({rule:cC(e,t,n),scale:n})}},{key:"init",value:function(){this.initSVG()}},{key:"render",value:function(){for(var e=[],t=this.props.vertical?"v-":"h-",n=0,r=this.state.rule.length;n<r;n++){var i=this.state.rule[n];e.push(this.getRuleItem(n,i,this.props.vertical)),i.value&&e.push(this.getRuleLabel(n,i,this.props.vertical))}return this.drawSVGRuler(),(0,hf.jsx)("div",{className:t+"ruler",ref:"ruler"})}},{key:"componentDidMount",value:function(){this.refs.ruler.appendChild(this._rulerSVG)}},{key:"getRuleItem",value:function(e,t,n){return n?(0,hf.jsx)("div",{className:t.type,style:{position:"absolute",top:t.pos-2}},e):(0,hf.jsx)("div",{className:t.type,style:{position:"absolute",left:t.pos}},e)}},{key:"getRuleLabel",value:function(e,t,n){return n?(0,hf.jsx)("div",{className:"label",style:{position:"absolute",top:t.pos-2},children:t.value},e+.5):(0,hf.jsx)("div",{className:"label",style:{position:"absolute",left:t.pos},children:t.value},e+.5)}},{key:"initSVG",value:function(){var e="http://www.w3.org/2000/svg";this._rulerSVG=document.createElementNS(e,"svg"),this._rulerSVG.style.position="absolute",this._rulerSVG.style.pointerEvents="none",this._rulerSVG.style.width="100%",this._rulerSVG.style.height="100%",this._rulerSVG.style.top=this._rulerSVG.style.left="0px",this._rulerSVG.style.shapeRendering="crispEdges",this._pen=document.createElementNS(e,"path"),this._pen.style.pointerEvents="none",this._pen.style.fill="none",this._pen.style.strokeWidth="1",this._pen.style.stroke="#bbbbbb",this._textPool=[],this._rulerSVG.appendChild(this._pen)}},{key:"drawSVGRuler",value:function(){if(this._pen){var e="",t=10,n=0;this.hideText();for(var r=0,i=this.state.rule.length;r<i;r++){var a=this.state.rule[r],o=a;if(t=o.type===uC.LONG?0:o.type===uC.MIDDLE?5:10,this.props.vertical?e+="M ".concat(t," ").concat(o.pos," H ").concat(20," "):e+="M ".concat(o.pos," ").concat(t," V ").concat(20," "),a.value&&o){var s=this.getText(n++);s.textContent=((null===o||void 0===o?void 0:o.value)||0).toString(),this.props.vertical?s.style.transform="translate(".concat(10,"px, ",o.pos-2,"px) rotate(-90deg)"):s.style.transform="translate(".concat(o.pos+2,"px,",10,"px)"),s.style.opacity="1"}}this._pen.setAttribute("d",e)}}},{key:"getText",value:function(e){if(this._textPool||(this._textPool=[]),this._textPool.length>e)return this._textPool[e];var t=document.createElementNS("http://www.w3.org/2000/svg","text");return t.style.position="absolute",t.style.fill=this.textColor,t.style.fontSize=this.fontSize+"px",this._rulerSVG.appendChild(t),this._textPool.push(t),t}},{key:"hideText",value:function(){this._textPool||(this._textPool=[]);for(var e=0,t=this._textPool.length;e<t;e++){var n=this._textPool[e];n&&(n.style.opacity="0")}}}]),n}(a.Component),dC=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).BASE_SIZE=100,r._app=void 0,r._bgGraphic=void 0,r._brt=void 0,r._rt=void 0,r._bg=void 0,r._cross=void 0,r._center=void 0,r._bgOffX=0,r._bgOffY=0,r._bgSize=r.BASE_SIZE,r._brt=new Bg({width:200,height:200,scaleMode:ap.LINEAR,resolution:1}),r._rt=new Wg(r._brt),r._bg=new yw(r._rt),r._bgGraphic=new SE,r._cross=new SE,r._center=new Hm(0,0),r._width=0,r._height=0,r.addChild(r._bg),r.addChild(r._cross),r._app=e,r.app=e,r}return d(n,[{key:"app",set:function(e){this._app=e,this.drawTexture(1)}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this._bg.width=this._width+this.BASE_SIZE*eC*2,this._bg.height=this._height+this.BASE_SIZE*eC*2,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.set(e,t),this.drawCross();var n=2*this._bgSize;this._bgOffX=e%n,this._bgOffY=t%n,this._bgOffX<0&&(this._bgOffX+=n),this._bgOffY<0&&(this._bgOffY+=n),this._bg.x=-n+this._bgOffX,this._bg.y=-n+this._bgOffY}},{key:"setScale",value:function(e){var t=this.BASE_SIZE*e;this._bgSize=t,this._bg.tileScale.set(e,e),this.setCenter(this._center.x,this._center.y)}},{key:"drawTexture",value:function(e){var t=this.BASE_SIZE*e;this._brt.resize(2*t,2*t),this._bgGraphic.beginFill(Uf.BG_TRANSPARENT_F),this._bgGraphic.drawRect(0,0,t,t),this._bgGraphic.drawRect(t,t,t,t),this._bgGraphic.endFill(),this._bgGraphic.beginFill(Uf.BG_TRANSPARENT_B),this._bgGraphic.drawRect(0,t,t,t),this._bgGraphic.drawRect(t,0,t,t),this._bgGraphic.endFill(),this._app&&this._app.renderer.render(this._bgGraphic,{renderTexture:this._rt})}},{key:"drawCross",value:function(){this._cross.clear(),this._cross.lineStyle(1,0,1,1,!1);this._center.x>=0&&this._center.x<=this._width&&(this._cross.moveTo(this._center.x-0,0),this._cross.lineTo(this._center.x-0,this._height)),this._center.y>=0&&this._center.y<=this.height&&(this._cross.moveTo(0,this._center.y+0),this._cross.lineTo(this._width,this._center.y+0))}}]),n}(Pb),fC=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).pixiTexture={},r.store=void 0,r._resources=[],r.store=e,r}return d(n,[{key:"addResource",value:function(e){this._resources.push(e)}},{key:"getAssetById",value:function(e,t){for(var n in e){var r=e[n];if(r){if(r.id===t)return r;if(r.children)for(var i=0,a=r.children.length;i<a;i++){var o=r.children[i];if(o.id===t)return o}}}}},{key:"getImageAsset",value:function(){var e=_e(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.store.rootState.runtime.dragonbones.assetMap,!(r=this.getAssetById(n,t))){e.next=30;break}e.t0=r.type,e.next=e.t0===x.JPEG||e.t0===x.JPG||e.t0===x.PNG?6:e.t0===x.SUB_TEXTURE?17:28;break;case 6:return e.prev=6,e.next=9,this.getTextureByFileId(r.fileIds[0]);case 9:case 16:case 20:case 27:case 32:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t1=e.catch(6),e.next=16,this.getMissingTexture();case 17:return e.prev=17,e.next=20,this.getSubTextureAsset(r);case 23:return e.prev=23,e.t2=e.catch(17),e.next=27,this.getMissingTexture();case 28:e.next=33;break;case 30:return e.next=32,this.getMissingTexture();case 33:case"end":return e.stop()}}),e,this,[[6,12],[17,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTextureByFileId",value:function(){var e=_e(ye().mark((function e(t){var n=this;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=n.store.rootState.library.files[t];if(i){var a=i.id;if(n.pixiTexture[a])e(n.pixiTexture[a]);else{var o=n.store.state.library.files[a];if(o)if(o.data){var s=Gg.from(o.data);n.pixiTexture[a]=s,e(n.pixiTexture[a])}else o.url&&Gg.fromURL(o.url).then((function(t){n.pixiTexture[a]=t,e(n.pixiTexture[a])})).catch((function(e){r(e)}));else r()}}else r()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMissingTexture",value:function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.missingTexture?e(n.missingTexture):setTimeout((function(){n.missingTexture?e(n.missingTexture):t()}),5e3)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubTextureAsset",value:function(){var e=_e(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getTextureByFileId(t.fileIds[1]);case 3:if(n=e.sent,r=t.data,!n||!n.baseTexture){e.next=7;break}return e.abrupt("return",new Gg(n.baseTexture,new zm(r.x,r.y,r.width,r.height)));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,this.getMissingTexture();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(Lp);fC.missingTexture=void 0;var pC=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._parentHtml=void 0,r._layers=void 0,r.registerLayers=[dC,ZS,CT,Rk,ok],r._layers=[],r.initStage((null===e||void 0===e?void 0:e.width)||100,(null===e||void 0===e?void 0:e.height)||100),oC.setTicker(r.ticker),r}return d(n,[{key:"getView",value:function(e){for(var t=0,n=this._layers.length;t<n;t++){var r=this._layers[t];if(r instanceof e)return r}}},{key:"setScale",value:function(e){for(var t=0,n=this._layers.length;t<n;t++)this._layers[t].setScale(e)}},{key:"setCenter",value:function(e,t){for(var n=0,r=this._layers.length;n<r;n++)this._layers[n].setCenter(e,t)}},{key:"resizeStage",value:function(e,t){this.renderer.resize(e,t);for(var n=0,r=this._layers.length;n<r;n++)this._layers[n].resizeStage(e,t)}},{key:"initStage",value:function(e,t){this.initLayers(),this.resizeStage(e,t),this.renderMissingTexture()}},{key:"initLayers",value:function(){for(var e=0,t=this.registerLayers.length;e<t;e++){var n=new(0,this.registerLayers[e])(this);this._layers.push(n),this.stage.addChild(n)}}},{key:"addToContainer",value:function(e){e&&(this._parentHtml=e,e.appendChild(this.view))}},{key:"renderMissingTexture",value:function(){var e=200,t=200,n=16711680,r="Missing",i=new Bg({width:e,height:t,scaleMode:ap.LINEAR,resolution:1}),a=new Wg(i),o=new Pb,s=new SE;s.lineStyle({width:10,color:n,alpha:.5}),s.beginFill(n,.1),s.drawRect(0,0,e,t),s.endFill();var l=new ew(r,{align:"center",fill:n});l.x=.5*(e-l.width),l.y=.5*(t-l.height),o.addChild(s),o.addChild(l),this.renderer.render(o,{renderTexture:a}),fC.missingTexture=a}}]),n}(h_),vC=function(e){var t=e.name,n=e.bgColor;return(0,hf.jsx)("img",{className:"noDrag",style:{backgroundColor:n||"transparent"},src:"./assets/icon/".concat(t,".png"),alt:"icon",width:"16",height:"16"})},mC=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))},gC=a.createContext(null);function yC(e){return e?Array.isArray(e)?e:[e]:[]}function bC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function _C(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function xC(e){return e.ownerDocument.defaultView}function EC(e){for(var t=[],n=null===e||void 0===e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=xC(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function wC(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function TC(e){return wC(parseFloat(e),0)}function SC(e,t){var n=Pe({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement)){var t=xC(e).getComputedStyle(e),r=t.overflow,i=t.overflowClipMargin,a=t.borderTopWidth,o=t.borderBottomWidth,s=t.borderLeftWidth,l=t.borderRightWidth,u=e.getBoundingClientRect(),c=e.offsetHeight,h=e.clientHeight,d=e.offsetWidth,f=e.clientWidth,p=TC(a),v=TC(o),m=TC(s),g=TC(l),y=wC(Math.round(u.width/d*1e3)/1e3),b=wC(Math.round(u.height/c*1e3)/1e3),_=(d-f-m-g)*y,x=(c-h-p-v)*b,E=p*b,w=v*b,T=m*y,S=g*y,k=0,C=0;if("clip"===r){var A=TC(i);k=A*y,C=A*b}var I=u.x+T-k,O=u.y+E-C,P=I+u.width+2*k-T-S-_,M=O+u.height+2*C-E-w-x;n.left=Math.max(n.left,I),n.top=Math.max(n.top,O),n.right=Math.min(n.right,P),n.bottom=Math.min(n.bottom,M)}})),n}function kC(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function CC(e,t){var n=It(t||[],2),r=n[0],i=n[1];return[kC(e.width,r),kC(e.height,i)]}function AC(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function IC(e,t){var n,r=t[0],i=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===i?e.x:"r"===i?e.x+e.width:e.x+e.width/2,y:n}}function OC(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}function PC(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=e.arrowPos,o=r||{},s=o.className,l=o.content,u=i.x,c=void 0===u?0:u,h=i.y,d=void 0===h?0:h,f=a.useRef();if(!n||!n.points)return null;var p={position:"absolute"};if(!1!==n.autoArrow){var v=n.points[0],m=n.points[1],g=v[0],y=v[1],b=m[0],_=m[1];g!==b&&["t","b"].includes(g)?"t"===g?p.top=0:p.bottom=0:p.top=d,y!==_&&["l","r"].includes(y)?"l"===y?p.left=0:p.right=0:p.left=c}return a.createElement("div",{ref:f,className:Wa()("".concat(t,"-arrow"),s),style:p},l)}function MC(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?a.createElement(Jo,Ft({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:Wa()("".concat(t,"-mask"),n)})})):null}var RC=a.memo((function(e){return e.children}),(function(e,t){return t.cache}));var NC=RC,DC=a.forwardRef((function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,s=e.target,l=e.onVisibleChanged,u=e.open,c=e.keepDom,h=e.onClick,d=e.mask,f=e.arrow,p=e.arrowPos,v=e.align,m=e.motion,g=e.maskMotion,y=e.forceRender,b=e.getPopupContainer,_=e.autoDestroy,x=e.portal,E=e.zIndex,w=e.onMouseEnter,T=e.onMouseLeave,S=e.ready,k=e.offsetX,C=e.offsetY,A=e.onAlign,I=e.onPrepare,O=e.stretch,P=e.targetWidth,M=e.targetHeight,R="function"===typeof n?n():n,N=u||c,D=(null===b||void 0===b?void 0:b.length)>0,L=It(a.useState(!b||!D),2),F=L[0],B=L[1];if(bu((function(){!F&&D&&s&&B(!0)}),[F,D,s]),!F)return null;var U=S||!u?{left:k,top:C}:{left:"-1000vw",top:"-1000vh"},H={};return O&&(O.includes("height")&&M?H.height=M:O.includes("minHeight")&&M&&(H.minHeight=M),O.includes("width")&&P?H.width=P:O.includes("minWidth")&&P&&(H.minWidth=P)),u||(H.pointerEvents="none"),a.createElement(x,{open:y||N,getContainer:b&&function(){return b(s)},autoDestroy:_},a.createElement(MC,{prefixCls:i,open:u,zIndex:E,mask:d,motion:g}),a.createElement(_d,{onResize:A,disabled:!u},(function(e){return a.createElement(Jo,Ft({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:y,leavedClassName:"".concat(i,"-hidden")},m,{onAppearPrepare:I,onEnterPrepare:I,visible:u,onVisibleChanged:function(e){var t;null===m||void 0===m||null===(t=m.onVisibleChanged)||void 0===t||t.call(m,e),l(e)}}),(function(n,s){var l=n.className,c=n.style,d=Wa()(i,l,r);return a.createElement("div",{ref:qa(e,t,s),className:d,style:Pe(Pe(Pe(Pe({"--arrow-x":"".concat(p.x||0,"px"),"--arrow-y":"".concat(p.y||0,"px")},U),H),c),{},{boxSizing:"border-box",zIndex:E},o),onMouseEnter:w,onMouseLeave:T,onClick:h},f&&a.createElement(PC,{prefixCls:i,arrow:f,arrowPos:p,align:v}),a.createElement(NC,{cache:!u},R))}))})))}));var LC=DC,FC=a.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=Za(n),o=a.useCallback((function(e){Ka(t,r?r(e):e)}),[r]),s=$a(o,n.ref);return i?a.cloneElement(n,{ref:s}):n}));var BC=FC,UC=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];var HC=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Iu,t=a.forwardRef((function(t,n){var r=t.prefixCls,i=void 0===r?"rc-trigger-popup":r,o=t.children,s=t.action,l=void 0===s?"hover":s,u=t.showAction,c=t.hideAction,h=t.popupVisible,d=t.defaultPopupVisible,f=t.onPopupVisibleChange,p=t.afterPopupVisibleChange,v=t.mouseEnterDelay,m=t.mouseLeaveDelay,g=void 0===m?.1:m,y=t.focusDelay,b=t.blurDelay,_=t.mask,x=t.maskClosable,E=void 0===x||x,w=t.getPopupContainer,T=t.forceRender,S=t.autoDestroy,k=t.destroyPopupOnHide,C=t.popup,A=t.popupClassName,I=t.popupStyle,O=t.popupPlacement,P=t.builtinPlacements,M=void 0===P?{}:P,R=t.popupAlign,N=t.zIndex,D=t.stretch,L=t.getPopupClassNameFromAlign,F=t.alignPoint,B=t.onPopupClick,U=t.onPopupAlign,H=t.arrow,j=t.popupMotion,z=t.maskMotion,V=t.popupTransitionName,G=t.popupAnimation,W=t.maskTransitionName,X=t.maskAnimation,Y=t.className,K=t.getTriggerDOMNode,q=Wn(t,UC),$=S||k||!1,Z=It(a.useState(!1),2),Q=Z[0],J=Z[1];bu((function(){J(mC())}),[]);var ee=a.useRef({}),te=a.useContext(gC),ne=a.useMemo((function(){return{registerSubPopup:function(e,t){ee.current[e]=t,null===te||void 0===te||te.registerSubPopup(e,t)}}}),[te]),re=Pu(),ie=It(a.useState(null),2),ae=ie[0],oe=ie[1],se=ph((function(e){Xa(e)&&ae!==e&&oe(e),null===te||void 0===te||te.registerSubPopup(re,e)})),le=It(a.useState(null),2),ue=le[0],ce=le[1],he=ph((function(e){Xa(e)&&ue!==e&&ce(e)})),de=a.Children.only(o),fe=(null===de||void 0===de?void 0:de.props)||{},pe={},ve=ph((function(e){var t,n,r=ue;return(null===r||void 0===r?void 0:r.contains(e))||(null===r||void 0===r||null===(t=r.getRootNode())||void 0===t?void 0:t.host)===e||e===r||(null===ae||void 0===ae?void 0:ae.contains(e))||(null===ae||void 0===ae||null===(n=ae.getRootNode())||void 0===n?void 0:n.host)===e||e===ae||Object.values(ee.current).some((function(t){return(null===t||void 0===t?void 0:t.contains(e))||e===t}))})),me=_C(i,j,G,V),ge=_C(i,z,X,W),ye=It(a.useState(d||!1),2),be=ye[0],_e=ye[1],xe=null!==h&&void 0!==h?h:be,Ee=ph((function(e){void 0===h&&_e(e)}));bu((function(){_e(h||!1)}),[h]);var we=a.useRef(xe);we.current=xe;var Te=ph((function(e){xe!==e&&(Ee(e),null===f||void 0===f||f(e))})),Se=a.useRef(),ke=function(){clearTimeout(Se.current)},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ke(),0===t?Te(e):Se.current=setTimeout((function(){Te(e)}),1e3*t)};a.useEffect((function(){return ke}),[]);var Ae=It(a.useState(!1),2),Oe=Ae[0],Me=Ae[1],Re=a.useRef(!0);bu((function(){Re.current&&!xe||Me(!0),Re.current=!0}),[xe]);var Ne=It(a.useState(null),2),De=Ne[0],Le=Ne[1],Fe=It(a.useState([0,0]),2),Be=Fe[0],Ue=Fe[1],He=function(e){Ue([e.clientX,e.clientY])},je=function(e,t,n,r,i,o,s){var l=It(a.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),2),u=l[0],c=l[1],h=a.useRef(0),d=a.useMemo((function(){return t?EC(t):[]}),[t]),f=a.useRef({});e||(f.current={});var p=ph((function(){if(t&&n&&e){var a,l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,r=_.x+e,i=_.y+t,a=r+M,o=i+P,s=Math.max(r,n.left),l=Math.max(i,n.top),u=Math.min(a,n.right),c=Math.min(o,n.bottom);return Math.max(0,(u-s)*(c-l))},u=function(){te=_.y+fe,ne=te+P,re=_.x+de,ie=re+M},h=t,p=h.style.left,v=h.style.top,m=h.ownerDocument,g=xC(h),y=Pe(Pe({},i[r]),o);if(h.style.left="0",h.style.top="0",Array.isArray(n))a={x:n[0],y:n[1],width:0,height:0};else{var b=n.getBoundingClientRect();a={x:b.x,y:b.y,width:b.width,height:b.height}}var _=h.getBoundingClientRect(),x=g.getComputedStyle(h),E=x.width,w=x.height,T=m.documentElement,S=T.clientWidth,k=T.clientHeight,C=T.scrollWidth,A=T.scrollHeight,I=T.scrollTop,O=T.scrollLeft,P=_.height,M=_.width,R=a.height,N=a.width,D={left:0,top:0,right:S,bottom:k},L={left:-O,top:-I,right:C-O,bottom:A-I},F=y.htmlRegion,B="visible",U="visibleFirst";"scroll"!==F&&F!==U&&(F=B);var H=F===U,j=SC(L,d),z=SC(D,d),V=F===B?z:j,G=H?z:V;h.style.left=p,h.style.top=v;var W=wC(Math.round(M/parseFloat(E)*1e3)/1e3),X=wC(Math.round(P/parseFloat(w)*1e3)/1e3);if(0===W||0===X||Xa(n)&&!Ks(n))return;var Y=y.offset,K=y.targetOffset,q=It(CC(_,Y),2),$=q[0],Z=q[1],Q=It(CC(a,K),2),J=Q[0],ee=Q[1];a.x-=J,a.y-=ee;var te,ne,re,ie,ae=It(y.points||[],2),oe=ae[0],se=AC(ae[1]),le=AC(oe),ue=IC(a,se),ce=IC(_,le),he=Pe({},y),de=ue.x-ce.x+$,fe=ue.y-ce.y+Z,pe=l(de,fe),ve=l(de,fe,z),me=IC(a,["t","l"]),ge=IC(_,["t","l"]),ye=IC(a,["b","r"]),be=IC(_,["b","r"]),_e=y.overflow||{},xe=_e.adjustX,Ee=_e.adjustY,we=_e.shiftX,Te=_e.shiftY,Se=function(e){return"boolean"===typeof e?e:e>=0};u();var ke=Se(Ee),Ce=le[0]===se[0];if(ke&&"t"===le[0]&&(ne>G.bottom||f.current.bt)){var Ae=fe;Ce?Ae-=P-R:Ae=me.y-be.y-Z;var Ie=l(de,Ae),Oe=l(de,Ae,z);Ie>pe||Ie===pe&&(!H||Oe>=ve)?(f.current.bt=!0,fe=Ae,he.points=[OC(le,0),OC(se,0)]):f.current.bt=!1}if(ke&&"b"===le[0]&&(te<G.top||f.current.tb)){var Me=fe;Ce?Me+=P-R:Me=ye.y-ge.y-Z;var Re=l(de,Me),Ne=l(de,Me,z);Re>pe||Re===pe&&(!H||Ne>=ve)?(f.current.tb=!0,fe=Me,he.points=[OC(le,0),OC(se,0)]):f.current.tb=!1}var De=Se(xe),Le=le[1]===se[1];if(De&&"l"===le[1]&&(ie>G.right||f.current.rl)){var Fe=de;Le?Fe-=M-N:Fe=me.x-be.x-$;var Be=l(Fe,fe),Ue=l(Fe,fe,z);Be>pe||Be===pe&&(!H||Ue>=ve)?(f.current.rl=!0,de=Fe,he.points=[OC(le,1),OC(se,1)]):f.current.rl=!1}if(De&&"r"===le[1]&&(re<G.left||f.current.lr)){var He=de;Le?He+=M-N:He=ye.x-ge.x-$;var je=l(He,fe),ze=l(He,fe,z);je>pe||je===pe&&(!H||ze>=ve)?(f.current.lr=!0,de=He,he.points=[OC(le,1),OC(se,1)]):f.current.lr=!1}u();var Ve=!0===we?0:we;"number"===typeof Ve&&(re<V.left&&(de-=re-V.left,a.x+N<V.left+Ve&&(de+=a.x-V.left+N-Ve)),ie>V.right&&(de-=ie-V.right,a.x>V.right-Ve&&(de+=a.x-V.right+Ve)));var Ge=!0===Te?0:Te;"number"===typeof Ge&&(te<V.top&&(fe-=te-V.top,a.y+R<V.top+Ge&&(fe+=a.y-V.top+R-Ge)),ne>V.bottom&&(fe-=ne-V.bottom,a.y>V.bottom-Ge&&(fe+=a.y-V.bottom+Ge)));var We=_.x+de,Xe=We+M,Ye=_.y+fe,Ke=Ye+P,qe=a.x,$e=qe+N,Ze=a.y,Qe=Ze+R,Je=(Math.max(We,qe)+Math.min(Xe,$e))/2-We,et=(Math.max(Ye,Ze)+Math.min(Ke,Qe))/2-Ye;null===s||void 0===s||s(t,he),c({ready:!0,offsetX:de/W,offsetY:fe/X,arrowX:Je/W,arrowY:et/X,scaleX:W,scaleY:X,align:he})}})),v=function(){c((function(e){return Pe(Pe({},e),{},{ready:!1})}))};return bu(v,[r]),bu((function(){e||v()}),[e]),[u.ready,u.offsetX,u.offsetY,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,function(){h.current+=1;var e=h.current;Promise.resolve().then((function(){h.current===e&&p()}))}]}(xe,ae,F?Be:ue,O,M,R,U),ze=It(je,9),Ve=ze[0],Ge=ze[1],We=ze[2],Xe=ze[3],Ye=ze[4],Ke=ze[5],qe=ze[6],$e=ze[7],Ze=ze[8],Qe=ph((function(){Oe||Ze()}));!function(e,t,n,r){bu((function(){if(e&&t&&n){var i=function(){r()},a=n,o=EC(t),s=EC(a),l=xC(a),u=new Set([l].concat(Ie(o),Ie(s)));return u.forEach((function(e){e.addEventListener("scroll",i,{passive:!0})})),l.addEventListener("resize",i,{passive:!0}),r(),function(){u.forEach((function(e){e.removeEventListener("scroll",i),l.removeEventListener("resize",i)}))}}}),[e,t,n])}(xe,ue,ae,Qe),bu((function(){Qe()}),[Be,O]),bu((function(){!xe||null!==M&&void 0!==M&&M[O]||Qe()}),[JSON.stringify(R)]);var Je=a.useMemo((function(){var e=function(e,t,n,r){for(var i=n.points,a=Object.keys(e),o=0;o<a.length;o+=1){var s,l=a[o];if(bC(null===(s=e[l])||void 0===s?void 0:s.points,i,r))return"".concat(t,"-placement-").concat(l)}return""}(M,i,$e,F);return Wa()(e,null===L||void 0===L?void 0:L($e))}),[$e,L,M,i,F]);a.useImperativeHandle(n,(function(){return{forceAlign:Qe}}));bu((function(){De&&(Ze(),De(),Le(null))}),[De]);var et=It(a.useState(0),2),tt=et[0],nt=et[1],rt=It(a.useState(0),2),it=rt[0],at=rt[1],ot=function(e,t,n,r){return a.useMemo((function(){var i=yC(null!==n&&void 0!==n?n:t),a=yC(null!==r&&void 0!==r?r:t),o=new Set(i),s=new Set(a);return e&&(o.has("hover")&&(o.delete("hover"),o.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[o,s]}),[e,t,n,r])}(Q,l,u,c),st=It(ot,2),lt=st[0],ut=st[1],ct=function(e,t,n,r){pe[e]=function(i){var a;null===r||void 0===r||r(i),Ce(t,n);for(var o=arguments.length,s=new Array(o>1?o-1:0),l=1;l<o;l++)s[l-1]=arguments[l];null===(a=fe[e])||void 0===a||a.call.apply(a,[fe,i].concat(s))}},ht=lt.has("click"),dt=ut.has("click")||ut.has("contextMenu");(ht||dt)&&(pe.onClick=function(e){var t;we.current&&dt?Ce(!1):!we.current&&ht&&(He(e),Ce(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=fe.onClick)||void 0===t||t.call.apply(t,[fe,e].concat(r))}),a.useEffect((function(){if(dt&&ae&&(!_||E)){var e=!1,t=function(t){var n=t.target;e=ve(n)},n=function(t){var n=t.target;!we.current||e||ve(n)||Ce(!1)},r=xC(ae),i=null===ue||void 0===ue?void 0:ue.getRootNode();r.addEventListener("mousedown",t),r.addEventListener("click",n);var a=i&&i!==ue.ownerDocument;return a&&(i.addEventListener("mousedown",t),i.addEventListener("click",n)),function(){r.removeEventListener("mousedown",t),r.removeEventListener("click",n),a&&(i.removeEventListener("mousedown",t),i.removeEventListener("click",n))}}}),[dt,ue,ae,_,E]);var ft,pt,vt=lt.has("hover"),mt=ut.has("hover");vt&&(ct("onMouseEnter",!0,v,(function(e){He(e)})),ft=function(){Ce(!0,v)},F&&(pe.onMouseMove=function(e){var t;null===(t=fe.onMouseMove)||void 0===t||t.call(fe,e)})),mt&&(ct("onMouseLeave",!1,g),pt=function(){Ce(!1,g)}),lt.has("focus")&&ct("onFocus",!0,y),ut.has("focus")&&ct("onBlur",!1,b),lt.has("contextMenu")&&(pe.onContextMenu=function(e){var t;He(e),Ce(!0),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=fe.onContextMenu)||void 0===t||t.call.apply(t,[fe,e].concat(r))}),Y&&(pe.className=Wa()(fe.className,Y));var gt=Pe(Pe({},fe),pe),yt={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){q[e]&&(yt[e]=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=gt[e])||void 0===t||t.call.apply(t,[gt].concat(r)),q[e].apply(q,r)})}));var bt=a.cloneElement(de,Pe(Pe({},gt),yt)),_t={x:Xe,y:Ye},xt=H?Pe({},!0!==H?H:{}):null;return a.createElement(a.Fragment,null,a.createElement(_d,{disabled:!xe,ref:he,onResize:function(e,t){if(Qe(),D){var n=t.getBoundingClientRect();nt(n.width),at(n.height)}}},a.createElement(BC,{getTriggerDOMNode:K},bt)),a.createElement(gC.Provider,{value:ne},a.createElement(LC,{portal:e,ref:se,prefixCls:i,popup:C,className:Wa()(A,Je),style:I,target:ue,onMouseEnter:ft,onMouseLeave:pt,zIndex:N,open:xe,keepDom:Oe,onClick:B,mask:_,motion:me,maskMotion:ge,onVisibleChanged:function(e){Me(!1),Ze(),null===p||void 0===p||p(e)},onPrepare:function(){return new Promise((function(e){Le((function(){return e}))}))},forceRender:T,autoDestroy:$,getPopupContainer:w,align:$e,arrow:xt,arrowPos:_t,ready:Ve,offsetX:Ge,offsetY:We,onAlign:Qe,stretch:D,targetWidth:tt/Ke,targetHeight:it/qe})))}));return t}(Iu),jC={shiftX:64,adjustY:1},zC={adjustX:1,shiftY:!0},VC=[0,0],GC={left:{points:["cr","cl"],overflow:zC,offset:[-4,0],targetOffset:VC},right:{points:["cl","cr"],overflow:zC,offset:[4,0],targetOffset:VC},top:{points:["bc","tc"],overflow:jC,offset:[0,-4],targetOffset:VC},bottom:{points:["tc","bc"],overflow:jC,offset:[0,4],targetOffset:VC},topLeft:{points:["bl","tl"],overflow:jC,offset:[0,-4],targetOffset:VC},leftTop:{points:["tr","tl"],overflow:zC,offset:[-4,0],targetOffset:VC},topRight:{points:["br","tr"],overflow:jC,offset:[0,-4],targetOffset:VC},rightTop:{points:["tl","tr"],overflow:zC,offset:[4,0],targetOffset:VC},bottomRight:{points:["tr","br"],overflow:jC,offset:[0,4],targetOffset:VC},rightBottom:{points:["bl","br"],overflow:zC,offset:[4,0],targetOffset:VC},bottomLeft:{points:["tl","bl"],overflow:jC,offset:[0,4],targetOffset:VC},leftBottom:{points:["br","bl"],overflow:zC,offset:[-4,0],targetOffset:VC}};function WC(e){var t=e.children,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle,o=e.className,s=e.style;return a.createElement("div",{className:Wa()("".concat(n,"-content"),o),style:s},a.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},"function"===typeof t?t():t))}var XC=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],YC=function(e,t){var n=e.overlayClassName,r=e.trigger,i=void 0===r?["hover"]:r,o=e.mouseEnterDelay,s=void 0===o?0:o,l=e.mouseLeaveDelay,u=void 0===l?.1:l,c=e.overlayStyle,h=e.prefixCls,d=void 0===h?"rc-tooltip":h,f=e.children,p=e.onVisibleChange,v=e.afterVisibleChange,m=e.transitionName,g=e.animation,y=e.motion,b=e.placement,_=void 0===b?"right":b,x=e.align,E=void 0===x?{}:x,w=e.destroyTooltipOnHide,T=void 0!==w&&w,S=e.defaultVisible,k=e.getTooltipContainer,C=e.overlayInnerStyle,A=(e.arrowContent,e.overlay),I=e.id,O=e.showArrow,P=void 0===O||O,M=Wn(e,XC),R=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(function(){return R.current}));var N=Pe({},M);"visible"in e&&(N.popupVisible=e.visible);return a.createElement(HC,Ft({popupClassName:n,prefixCls:d,popup:function(){return a.createElement(WC,{key:"content",prefixCls:d,id:I,overlayInnerStyle:C},A)},action:i,builtinPlacements:GC,popupPlacement:_,ref:R,popupAlign:E,getPopupContainer:k,onPopupVisibleChange:p,afterPopupVisibleChange:v,popupTransitionName:m,popupAnimation:g,popupMotion:y,defaultPopupVisible:S,autoDestroy:T,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s,arrow:P},N),f)},KC=(0,a.forwardRef)(YC),qC=function(e,t,n,r,i){var a=e/2,o=a,s=1*n/Math.sqrt(2),l=a-n*(1-1/Math.sqrt(2)),u=a-t*(1/Math.sqrt(2)),c=n*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),h=2*a-u,d=c,f=2*a-s,p=l,v=2*a-0,m=o,g=a*Math.sqrt(2)+n*(Math.sqrt(2)-2),y=n*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:r,clipPath:{_multi_value_:!0,value:["polygon(".concat(y,"px 100%, 50% ").concat(y,"px, ").concat(2*a-y,"px 100%, ").concat(y,"px 100%)"),"path('M ".concat(0," ").concat(o," A ").concat(n," ").concat(n," 0 0 0 ").concat(s," ").concat(l," L ").concat(u," ").concat(c," A ").concat(t," ").concat(t," 0 0 1 ").concat(h," ").concat(d," L ").concat(f," ").concat(p," A ").concat(n," ").concat(n," 0 0 0 ").concat(v," ").concat(m," Z')")]},content:'""'},"&::after":{content:'""',position:"absolute",width:g,height:g,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:"0 0 ".concat(t,"px 0")},transform:"translateY(50%) rotate(-135deg)",boxShadow:i,zIndex:0,background:"transparent"}}},$C=8;function ZC(e){var t=$C,n=e.contentRadius,r=n>12?n+2:12;return{dropdownArrowOffset:r,dropdownArrowOffsetVertical:e.limitVerticalRadius?t:r}}function QC(e,t){return e?t:{}}function JC(e,t){var n,r,i,a,o=e.componentCls,s=e.sizePopupArrow,l=e.borderRadiusXS,u=e.borderRadiusOuter,c=e.boxShadowPopoverArrow,h=t.colorBg,d=t.contentRadius,f=void 0===d?e.borderRadiusLG:d,p=t.limitVerticalRadius,v=t.arrowDistance,m=void 0===v?0:v,g=t.arrowPlacement,b=void 0===g?{left:!0,right:!0,top:!0,bottom:!0}:g,_=ZC({contentRadius:f,limitVerticalRadius:p}),x=_.dropdownArrowOffsetVertical,E=_.dropdownArrowOffset;return y({},o,Object.assign(Object.assign(Object.assign(Object.assign(y({},"".concat(o,"-arrow"),[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},qC(s,l,u,h,c)),{"&:before":{background:h}})]),QC(!!b.top,(y(n={},["&-placement-top ".concat(o,"-arrow"),"&-placement-topLeft ".concat(o,"-arrow"),"&-placement-topRight ".concat(o,"-arrow")].join(","),{bottom:m,transform:"translateY(100%) rotate(180deg)"}),y(n,"&-placement-top ".concat(o,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"}),y(n,"&-placement-topLeft ".concat(o,"-arrow"),{left:{_skip_check_:!0,value:E}}),y(n,"&-placement-topRight ".concat(o,"-arrow"),{right:{_skip_check_:!0,value:E}}),n))),QC(!!b.bottom,(y(r={},["&-placement-bottom ".concat(o,"-arrow"),"&-placement-bottomLeft ".concat(o,"-arrow"),"&-placement-bottomRight ".concat(o,"-arrow")].join(","),{top:m,transform:"translateY(-100%)"}),y(r,"&-placement-bottom ".concat(o,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"}),y(r,"&-placement-bottomLeft ".concat(o,"-arrow"),{left:{_skip_check_:!0,value:E}}),y(r,"&-placement-bottomRight ".concat(o,"-arrow"),{right:{_skip_check_:!0,value:E}}),r))),QC(!!b.left,(y(i={},["&-placement-left ".concat(o,"-arrow"),"&-placement-leftTop ".concat(o,"-arrow"),"&-placement-leftBottom ".concat(o,"-arrow")].join(","),{right:{_skip_check_:!0,value:m},transform:"translateX(100%) rotate(90deg)"}),y(i,"&-placement-left ".concat(o,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"}),y(i,"&-placement-leftTop ".concat(o,"-arrow"),{top:x}),y(i,"&-placement-leftBottom ".concat(o,"-arrow"),{bottom:x}),i))),QC(!!b.right,(y(a={},["&-placement-right ".concat(o,"-arrow"),"&-placement-rightTop ".concat(o,"-arrow"),"&-placement-rightBottom ".concat(o,"-arrow")].join(","),{left:{_skip_check_:!0,value:m},transform:"translateX(-100%) rotate(-90deg)"}),y(a,"&-placement-right ".concat(o,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"}),y(a,"&-placement-rightTop ".concat(o,"-arrow"),{top:x}),y(a,"&-placement-rightBottom ".concat(o,"-arrow"),{bottom:x}),a))))}var eA={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},tA={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},nA=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function rA(e){var t=e.arrowWidth,n=e.autoAdjustOverflow,r=e.arrowPointAtCenter,i=e.offset,a=e.borderRadius,o=t/2,s={};return Object.keys(eA).forEach((function(e){var l=r&&tA[e]||eA[e],u=Object.assign(Object.assign({},l),{offset:[0,0]});switch(s[e]=u,nA.has(e)&&(u.autoArrow=!1),e){case"top":case"topLeft":case"topRight":u.offset[1]=-o-i;break;case"bottom":case"bottomLeft":case"bottomRight":u.offset[1]=o+i;break;case"left":case"leftTop":case"leftBottom":u.offset[0]=-o-i;break;case"right":case"rightTop":case"rightBottom":u.offset[0]=o+i}var c=ZC({contentRadius:a,limitVerticalRadius:!0});if(r)switch(e){case"topLeft":case"bottomLeft":u.offset[0]=-c.dropdownArrowOffset-o;break;case"topRight":case"bottomRight":u.offset[0]=c.dropdownArrowOffset+o;break;case"leftTop":case"rightTop":u.offset[1]=-c.dropdownArrowOffset-o;break;case"leftBottom":case"rightBottom":u.offset[1]=c.dropdownArrowOffset+o}u.overflow=function(e,t,n,r){if(!1===r)return{adjustX:!1,adjustY:!1};var i=r&&"object"===typeof r?r:{},a={};switch(e){case"top":case"bottom":a.shiftX=2*t.dropdownArrowOffset+n;break;case"left":case"right":a.shiftY=2*t.dropdownArrowOffsetVertical+n}var o=Object.assign(Object.assign({},a),i);return o.shiftX||(o.adjustX=!0),o.shiftY||(o.adjustY=!0),o}(e,c,t,n)})),s}var iA=function(e,t){return new va(e).setAlpha(t).toRgbString()},aA=function(e,t){return new va(e).lighten(t).toHexString()},oA=function(e){var t=sa(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},sA=function(e,t){var n=e||"#000",r=t||"#fff";return{colorBgBase:n,colorTextBase:r,colorText:iA(r,.85),colorTextSecondary:iA(r,.65),colorTextTertiary:iA(r,.45),colorTextQuaternary:iA(r,.25),colorFill:iA(r,.18),colorFillSecondary:iA(r,.12),colorFillTertiary:iA(r,.08),colorFillQuaternary:iA(r,.04),colorBgElevated:aA(n,12),colorBgContainer:aA(n,8),colorBgLayout:aA(n,0),colorBgSpotlight:aA(n,26),colorBorder:aA(n,26),colorBorderSecondary:aA(n,19)}},lA=function(e,t){var n=Object.keys(fa).map((function(t){var n=sa(e[t],{theme:"dark"});return new Array(10).fill(1).reduce((function(e,r,i){return e["".concat(t,"-").concat(i+1)]=n[i],e["".concat(t).concat(i+1)]=n[i],e}),{})})).reduce((function(e,t){return e=Object.assign(Object.assign({},e),t)}),{}),r=null!==t&&void 0!==t?t:wa(e);return Object.assign(Object.assign(Object.assign({},r),n),ma(e,{generateColorPalettes:oA,generateNeutralColorPalettes:sA}))};var uA=function(e,t){var n=null!==t&&void 0!==t?t:wa(e),r=n.fontSizeSM,i=n.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),function(e){var t=e.sizeUnit,n=e.sizeStep-2;return{sizeXXL:t*(n+10),sizeXL:t*(n+6),sizeLG:t*(n+2),sizeMD:t*(n+2),sizeMS:t*(n+1),size:t*n,sizeSM:t*n,sizeXS:t*(n-1),sizeXXS:t*(n-1)}}(null!==t&&void 0!==t?t:e)),Ea(r)),{controlHeight:i}),da(Object.assign(Object.assign({},n),{controlHeight:i})))};var cA={defaultConfig:Ia,defaultSeed:Ia.token,useToken:function(){var e=It(Pa(),3);return{theme:e[0],token:e[1],hashId:e[2]}},defaultAlgorithm:wa,darkAlgorithm:lA,compactAlgorithm:uA},hA=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function dA(e,t){return hA.reduce((function(n,r){var i=e["".concat(r,"1")],a=e["".concat(r,"3")],o=e["".concat(r,"6")],s=e["".concat(r,"7")];return Object.assign(Object.assign({},n),t(r,{lightColor:i,lightBorderColor:a,darkColor:o,textColor:s}))}),{})}var fA=function(e){var t,n=e.componentCls,r=e.tooltipMaxWidth,i=e.tooltipColor,a=e.tooltipBg,o=e.tooltipBorderRadius,s=e.zIndexPopup,l=e.controlHeight,u=e.boxShadowSecondary,c=e.paddingSM,h=e.paddingXS,d=e.tooltipRadiusOuter;return[y({},n,Object.assign(Object.assign(Object.assign(Object.assign({},is(e)),(t={position:"absolute",zIndex:s,display:"block",width:"max-content",maxWidth:r,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":a},y(t,"".concat(n,"-inner"),{minWidth:l,minHeight:l,padding:"".concat(c/2,"px ").concat(h,"px"),color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:a,borderRadius:o,boxShadow:u}),y(t,["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(","),y({},"".concat(n,"-inner"),{borderRadius:Math.min(o,$C)})),y(t,"".concat(n,"-content"),{position:"relative"}),t)),dA(e,(function(e,t){var r,i=t.darkColor;return y({},"&".concat(n,"-").concat(e),(y(r={},"".concat(n,"-inner"),{backgroundColor:i}),y(r,"".concat(n,"-arrow"),{"--antd-arrow-background-color":i}),r))}))),{"&-rtl":{direction:"rtl"}})),JC(el(e,{borderRadiusOuter:d}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:o,limitVerticalRadius:!0}),y({},"".concat(n,"-pure"),{position:"relative",maxWidth:"none",margin:e.sizePopupArrow})]},pA=function(e,t){var n=rl("Tooltip",(function(e){if(!1===t)return[];var n=e.borderRadius,r=e.colorTextLightSolid,i=e.colorBgDefault,a=e.borderRadiusOuter,o=el(e,{tooltipMaxWidth:250,tooltipColor:r,tooltipBorderRadius:n,tooltipBg:i,tooltipRadiusOuter:a>4?4:a});return[fA(o),vc(e,"zoom-big-fast")]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+70,colorBgDefault:e.colorBgSpotlight}}));return n(e)},vA=hA.map((function(e){return"".concat(e,"-inverse")}));function mA(e,t){var n=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?hA.includes(e):[].concat(Ie(vA),Ie(hA)).includes(e)}(t),r=Wa()(y({},"".concat(e,"-").concat(t),t&&n)),i={},a={};return t&&!n&&(i.background=t,a["--antd-arrow-background-color"]=t),{className:r,overlayStyle:i,arrowStyle:a}}var gA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},yA=cA.useToken;function bA(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||"button"===e.type)&&e.props.disabled||!0===n.__ANT_SWITCH&&(e.props.disabled||e.props.loading)||!0===n.__ANT_RADIO&&e.props.disabled){var r=function(e,t){var n={},r=Object.assign({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),i=r.picked,o=r.omitted,s=Object.assign(Object.assign({display:"inline-block"},i),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),l=Zs(e,{style:Object.assign(Object.assign({},o),{pointerEvents:"none"}),className:null});return a.createElement("span",{style:s,className:Wa()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},l)}return e}var _A=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.openClassName,s=e.getTooltipContainer,l=e.overlayClassName,u=e.color,c=e.overlayInnerStyle,h=e.children,d=e.afterOpenChange,f=e.afterVisibleChange,p=e.destroyTooltipOnHide,v=e.arrow,m=void 0===v||v,g=e.title,b=e.overlay,_=e.builtinPlacements,x=e.arrowPointAtCenter,E=void 0!==x&&x,w=e.autoAdjustOverflow,T=void 0===w||w,S=!!m,k=yA().token,C=a.useContext(Ra),A=C.getPopupContainer,I=C.getPrefixCls,O=C.direction,P=a.useRef(null),M=function(){var e;null===(e=P.current)||void 0===e||e.forceAlign()};a.useImperativeHandle(t,(function(){return{forceAlign:M,forcePopupAlign:function(){M()}}}));var R=It(mh(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),2),N=R[0],D=R[1],L=!g&&!b&&0!==g,F=a.useMemo((function(){var e,t,n=E;return"object"===typeof m&&(n=null!==(t=null!==(e=m.pointAtCenter)&&void 0!==e?e:m.arrowPointAtCenter)&&void 0!==t?t:E),_||rA({arrowPointAtCenter:n,autoAdjustOverflow:T,arrowWidth:S?k.sizePopupArrow:0,borderRadius:k.borderRadius,offset:k.marginXXS})}),[E,m,_,k]),B=a.useMemo((function(){return 0===g?g:b||g||""}),[b,g]),U=a.createElement(gl,null,"function"===typeof B?B():B),H=e.getPopupContainer,j=e.placement,z=void 0===j?"top":j,V=e.mouseEnterDelay,G=void 0===V?.1:V,W=e.mouseLeaveDelay,X=void 0===W?.1:W,Y=e.overlayStyle,K=e.rootClassName,q=gA(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),$=I("tooltip",i),Z=I(),Q=e["data-popover-inject"],J=N;"open"in e||"visible"in e||!L||(J=!1);var ee=bA(qs(h)&&!$s(h)?h:a.createElement("span",null,h),$),te=ee.props,ne=te.className&&"string"!==typeof te.className?te.className:Wa()(te.className,y({},o||"".concat($,"-open"),!0)),re=It(pA($,!Q),2),ie=re[0],ae=re[1],oe=mA($,u),se=Object.assign(Object.assign({},c),oe.overlayStyle),le=oe.arrowStyle,ue=Wa()(l,y({},"".concat($,"-rtl"),"rtl"===O),oe.className,K,ae);return ie(a.createElement(KC,Object.assign({},q,{showArrow:S,placement:z,mouseEnterDelay:G,mouseLeaveDelay:X,prefixCls:$,overlayClassName:ue,overlayStyle:Object.assign(Object.assign({},le),Y),getTooltipContainer:H||s||A,ref:P,builtinPlacements:F,overlay:U,visible:J,onVisibleChange:function(t){var n,r;D(!L&&t),L||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t))},afterVisibleChange:null!==d&&void 0!==d?d:f,overlayInnerStyle:se,arrowContent:a.createElement("span",{className:"".concat($,"-arrow-content")}),motion:{motionName:vu(Z,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!p}),J?Zs(ee,{className:ne}):ee))}));_A._InternalPanelDoNotUseOrYouWillBeFired=function(e){var t=e.prefixCls,n=e.className,r=e.placement,i=void 0===r?"top":r,o=e.title,s=e.color,l=e.overlayInnerStyle,u=(0,a.useContext(Ra).getPrefixCls)("tooltip",t),c=It(pA(u,!0),2),h=c[0],d=c[1],f=mA(u,s),p=Object.assign(Object.assign({},l),f.overlayStyle),v=f.arrowStyle;return h(a.createElement("div",{className:Wa()(d,u,"".concat(u,"-pure"),"".concat(u,"-placement-").concat(i),n,f.className),style:v},a.createElement("div",{className:"".concat(u,"-arrow")}),a.createElement(WC,Object.assign({},e,{className:d,prefixCls:u,overlayInnerStyle:p}),o)))};var xA=_A,EA=function(e){var t=e.normal,n=e.down,r=e.over,i=e.normalColor,o=e.downColor,s=e.overColor,l=e.toggle,u=e.isDown,c=e.onToggle,h=e.onClick,d=e.onDown,f=e.tooltip,p=e.className,v=It(a.useState("normal"),2),m=v[0],g=v[1],y=It(a.useState(l&&u&&n||t),2),b=y[0],_=y[1],x=It(a.useState(i||"transparent"),2),E=x[0],w=x[1];a.useEffect((function(){var e=l&&u?n:t,r=i||"transparent";l&&(b!==e&&_(e||t),u||E===r||w(r),u&&E!==o&&w(o||"transparent"))}),[u]);var T=function(){l?function(){var e=i||"transparent";u?(g("normal"),_(t),w(e)):(g("down"),w(o||"transparent"),_(n||t)),c&&c(!u)}():(w(o||"transparent"),_(n||t)),d&&d()},S=function(){r&&_(r),s&&w(s),h&&h()},k=function(){"normal"===m&&(g("over"),w(s||"transparent"),_(r||t))},C=function(){if(l)if(u)g("down"),w(o||"transparent"),_(n||t);else{var e=i||"transparent";g("normal"),w(e),_(t)}else{var r=i||"transparent";g("normal"),w(r),_(t)}};return f?(0,hf.jsx)(xA,{title:f,mouseEnterDelay:.5,children:(0,hf.jsx)("span",{className:p,onMouseDown:T,onMouseUp:S,onMouseOver:k,onMouseOut:C,children:(0,hf.jsx)(vC,{name:"".concat(b),bgColor:E})})}):(0,hf.jsx)("span",{className:p,onMouseDown:T,onMouseUp:S,onMouseOver:k,onMouseOut:C,children:(0,hf.jsx)(vC,{name:"".concat(b),bgColor:E})})},wA=function(e,t){return function(){t(e)}},TA=function(e){var t=e.curTool,n=e.editMode,r=e.onSwitchTool;return(0,hf.jsxs)("span",{className:"stage-tools",children:[(0,hf.jsx)(EA,{normal:"stage-tools/selector",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===Z.SELECT,onClick:wA(Z.SELECT,r)}),n===X.POSE&&(0,hf.jsx)(EA,{normal:"stage-tools/addBone",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===Z.ADD_BONE,onClick:wA(Z.ADD_BONE,r)}),(0,hf.jsx)(EA,{normal:"stage-tools/pose",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===Z.POSE_TOOL,onClick:wA(Z.POSE_TOOL,r)}),(0,hf.jsx)(EA,{normal:"stage-tools/meshWeight",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===Z.WEIGHT_TOOL,onClick:wA(Z.WEIGHT_TOOL,r)})]})},SA=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).onClick=function(e){if(!r.props.disabled&&(e.stopPropagation(),r.props.clickCallback&&r.props.clickCallback(e),r.props.toggle)){var t=!r.state.selected;r.props.controlled||r.setState({selected:t}),r.props.changeCallback&&r.props.changeCallback(t)}},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return d(n,[{key:"render",value:function(){var e=this.props.icon;return this.props.toggle&&this.state.selected&&this.props.selectedIcon&&(e=this.props.selectedIcon),this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsx)("div",{className:"icon-button"+(this.props.disabled?" panel-disabled":""),onClick:this.onClick,children:(0,hf.jsx)(mT,{type:e})})}):(0,hf.jsx)("div",{className:"icon-button"+(this.props.disabled?" panel-disabled":""),onClick:this.onClick,children:(0,hf.jsx)(mT,{type:e})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),kA=function(e,t,n){return function(){n(e,t)}},CA=function(e){return(0,hf.jsxs)("div",{className:"bone-slot-control",children:[(0,hf.jsxs)("div",{className:"bone-slot-control-row",children:[(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-a-Property1interfaceProperty2bulkProperty3"})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-eye1"})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-lock"})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-inherit1"})})]}),(0,hf.jsxs)("div",{className:"bone-slot-control-row",children:[(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-bone"})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("boneVisible",!e.boneVisible,e.onChange),selected:e.boneVisible,toggle:!0})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("boneSelectEnable",!e.boneSelectEnable,e.onChange),selected:e.boneSelectEnable,toggle:!0})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("boneInheritEnable",!e.boneInheritEnable,e.onChange),selected:e.boneInheritEnable,toggle:!0})})]}),(0,hf.jsxs)("div",{className:"bone-slot-control-row",children:[(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(mT,{type:"icon-image3"})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("slotVisible",!e.slotVisible,e.onChange),selected:e.slotVisible,toggle:!0})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("slotSelectEnable",!e.slotSelectEnable,e.onChange),selected:e.slotSelectEnable,toggle:!0})}),(0,hf.jsx)("span",{className:"bone-slot-control-item",children:(0,hf.jsx)(SA,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:kA("slotInheritEnable",!e.slotInheritEnable,e.onChange),selected:e.slotInheritEnable,toggle:!0})})]})]})},AA=function(e,t,n,r,i,a){if(r>0&&n.bones.map[r])return"\u9aa8\u9abc\uff1a".concat(n.bones.map[r].name);if(i>0&&n.slots.map[i])return"\u63d2\u69fd\uff1a".concat(n.slots.map[i].name);if(a)return a;if(0===e.length&&0===t.length)return"";var o="\u9009\u4e2d".concat(e.length+t.length,"\u9879\uff1a");return e.length>0&&(o+="\u9aa8\u9abc\uff1a".concat(e.map((function(e){return n.bones.map[e].name})).join(","))),t.length>0&&(o+="".concat(e.length?"-":"","\u63d2\u69fd\uff1a").concat(t.map((function(e){return n.slots.map[e].name})).join(","))),o},IA=function(e){var t=e.selectBoneIds,n=e.selectSlotIds,r=e.armature,i=e.overBoneId,a=e.overSlotId,o=e.defaultTips;return(0,hf.jsx)("span",{className:"stage-tip",children:AA(t,n,r,i,a,o)})},OA=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],PA=void 0;function MA(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,s=e.responsive,l=e.responsiveDisabled,u=e.registerSize,c=e.itemKey,h=e.className,d=e.style,f=e.children,p=e.display,v=e.order,m=e.component,g=void 0===m?"div":m,y=Wn(e,OA),b=s&&!p;function _(e){u(c,e)}a.useEffect((function(){return function(){_(null)}}),[]);var x,E=o&&i!==PA?o(i):f;r||(x={opacity:b?0:1,height:b?0:PA,overflowY:b?"hidden":PA,order:s?v:PA,pointerEvents:b?"none":PA,position:b?"absolute":PA});var w={};b&&(w["aria-hidden"]=!0);var T=a.createElement(g,Ft({className:Wa()(!r&&n,h),style:Pe(Pe({},x),d)},w,y,{ref:t}),E);return s&&(T=a.createElement(_d,{onResize:function(e){_(e.offsetWidth)},disabled:l},T)),T}var RA=a.forwardRef(MA);RA.displayName="Item";var NA=RA;function DA(){var e=a.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"===typeof MessageChannel)Do(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,Re.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function LA(e,t){var n=It(a.useState(t),2),r=n[0],i=n[1];return[r,ph((function(t){e((function(){i(t)}))}))]}var FA=["component"],BA=["className"],UA=["className"],HA=function(e,t){var n=a.useContext(GA);if(!n){var r=e.component,i=void 0===r?"div":r,o=Wn(e,FA);return a.createElement(i,Ft({},o,{ref:t}))}var s=n.className,l=Wn(n,BA),u=e.className,c=Wn(e,UA);return a.createElement(GA.Provider,{value:null},a.createElement(NA,Ft({ref:t,className:Wa()(s,u)},l,c)))},jA=a.forwardRef(HA);jA.displayName="RawItem";var zA=jA,VA=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],GA=a.createContext(null),WA="responsive",XA="invalidate";function YA(e){return"+ ".concat(e.length," ...")}function KA(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,i=e.data,o=void 0===i?[]:i,s=e.renderItem,l=e.renderRawItem,u=e.itemKey,c=e.itemWidth,h=void 0===c?10:c,d=e.ssr,f=e.style,p=e.className,v=e.maxCount,m=e.renderRest,g=e.renderRawRest,y=e.suffix,b=e.component,_=void 0===b?"div":b,x=e.itemComponent,E=e.onVisibleChange,w=Wn(e,VA),T="full"===d,S=DA(),k=It(LA(S,null),2),C=k[0],A=k[1],I=C||0,O=It(LA(S,new Map),2),P=O[0],M=O[1],R=It(LA(S,0),2),N=R[0],D=R[1],L=It(LA(S,0),2),F=L[0],B=L[1],U=It(LA(S,0),2),H=U[0],j=U[1],z=It((0,a.useState)(null),2),V=z[0],G=z[1],W=It((0,a.useState)(null),2),X=W[0],Y=W[1],K=a.useMemo((function(){return null===X&&T?Number.MAX_SAFE_INTEGER:X||0}),[X,C]),q=It((0,a.useState)(!1),2),$=q[0],Z=q[1],Q="".concat(r,"-item"),J=Math.max(N,F),ee=v===WA,te=o.length&&ee,ne=v===XA,re=te||"number"===typeof v&&o.length>v,ie=(0,a.useMemo)((function(){var e=o;return te?e=null===C&&T?o:o.slice(0,Math.min(o.length,I/h)):"number"===typeof v&&(e=o.slice(0,v)),e}),[o,h,C,v,te]),ae=(0,a.useMemo)((function(){return te?o.slice(K+1):o.slice(ie.length)}),[o,ie,te,K]),oe=(0,a.useCallback)((function(e,t){var n;return"function"===typeof u?u(e):null!==(n=u&&(null===e||void 0===e?void 0:e[u]))&&void 0!==n?n:t}),[u]),se=(0,a.useCallback)(s||function(e){return e},[s]);function le(e,t,n){(X!==e||void 0!==t&&t!==V)&&(Y(e),n||(Z(e<o.length-1),null===E||void 0===E||E(e)),void 0!==t&&G(t))}function ue(e,t){M((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function ce(e){return P.get(oe(ie[e],e))}bu((function(){if(I&&"number"===typeof J&&ie){var e=H,t=ie.length,n=t-1;if(!t)return void le(0,null);for(var r=0;r<t;r+=1){var i=ce(r);if(T&&(i=i||0),void 0===i){le(r-1,void 0,!0);break}if(e+=i,0===n&&e<=I||r===n-1&&e+ce(n)<=I){le(n,null);break}if(e+J>I){le(r-1,e-i-H+F);break}}y&&ce(0)+H>I&&G(null)}}),[I,P,F,H,oe,ie]);var he=$&&!!ae.length,de={};null!==V&&te&&(de={position:"absolute",left:V,top:0});var fe,pe={prefixCls:Q,responsive:te,component:x,invalidate:ne},ve=l?function(e,t){var n=oe(e,t);return a.createElement(GA.Provider,{key:n,value:Pe(Pe({},pe),{},{order:t,item:e,itemKey:n,registerSize:ue,display:t<=K})},l(e,t))}:function(e,t){var n=oe(e,t);return a.createElement(NA,Ft({},pe,{order:t,key:n,item:e,renderItem:se,itemKey:n,registerSize:ue,display:t<=K}))},me={order:he?K:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){B(t),D(F)},display:he};if(g)g&&(fe=a.createElement(GA.Provider,{value:Pe(Pe({},pe),me)},g(ae)));else{var ge=m||YA;fe=a.createElement(NA,Ft({},pe,me),"function"===typeof ge?ge(ae):ge)}var ye=a.createElement(_,Ft({className:Wa()(!ne&&r,p),style:f,ref:t},w),ie.map(ve),re?fe:null,y&&a.createElement(NA,Ft({},pe,{responsive:ee,responsiveDisabled:!te,order:K,className:"".concat(Q,"-suffix"),registerSize:function(e,t){j(t)},display:!0,style:de}),y));return ee&&(ye=a.createElement(_d,{onResize:function(e,t){A(t.clientWidth)},disabled:!te},ye)),ye}var qA=a.forwardRef(KA);qA.displayName="Overflow",qA.Item=zA,qA.RESPONSIVE=WA,qA.INVALIDATE=XA;var $A=qA,ZA=a.createContext(null);function QA(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function JA(e){return QA(a.useContext(ZA),e)}var eI=["children","locked"],tI=a.createContext(null);function nI(e){var t=e.children,n=e.locked,r=Wn(e,eI),i=a.useContext(tI),o=Ye((function(){return function(e,t){var n=Pe({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(i,r)}),[i,r],(function(e,t){return!n&&(e[0]!==t[0]||!tt(e[1],t[1],!0))}));return a.createElement(tI.Provider,{value:o},t)}var rI=[],iI=a.createContext(null);function aI(){return a.useContext(iI)}var oI=a.createContext(rI);function sI(e){var t=a.useContext(oI);return a.useMemo((function(){return void 0!==e?[].concat(Ie(t),[e]):t}),[t,e])}var lI=a.createContext(null),uI=a.createContext({});function cI(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Ks(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),a=Number(i),o=null;return i&&!Number.isNaN(a)?o=a:r&&null===o&&(o=0),r&&e.disabled&&(o=null),null!==o&&(o>=0||t&&o<0)}return!1}function hI(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ie(e.querySelectorAll("*")).filter((function(e){return cI(e,t)}));return cI(e,t)&&n.unshift(e),n}var dI=Ru.LEFT,fI=Ru.RIGHT,pI=Ru.UP,vI=Ru.DOWN,mI=Ru.ENTER,gI=Ru.ESC,yI=Ru.HOME,bI=Ru.END,_I=[pI,vI,dI,fI];function xI(e,t){return hI(e,!0).filter((function(e){return t.has(e)}))}function EI(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=xI(e,t),a=i.length,o=i.findIndex((function(e){return n===e}));return r<0?-1===o?o=a-1:o-=1:r>0&&(o+=1),i[o=(o+a)%a]}function wI(e,t,n,r,i,o,s,l,u,c){var h=a.useRef(),d=a.useRef();d.current=t;var f=function(){Do.cancel(h.current)};return a.useEffect((function(){return function(){f()}}),[]),function(a){var p=a.which;if([].concat(_I,[mI,gI,yI,bI]).includes(p)){var v,m,g,b=function(){return v=new Set,m=new Map,g=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(QA(r,e),"']"));t&&(v.add(t),g.set(t,e),m.set(e,t))})),v};b();var _=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(t),v),x=g.get(_),E=function(e,t,n,r){var i,a,o,s,l="prev",u="next",c="children",h="parent";if("inline"===e&&r===mI)return{inlineTrigger:!0};var d=(y(i={},pI,l),y(i,vI,u),i),f=(y(a={},dI,n?u:l),y(a,fI,n?l:u),y(a,vI,c),y(a,mI,c),a),p=(y(o={},pI,l),y(o,vI,u),y(o,mI,c),y(o,gI,h),y(o,dI,n?c:h),y(o,fI,n?h:c),o);switch(null===(s={inline:d,horizontal:f,vertical:p,inlineSub:d,horizontalSub:p,verticalSub:p}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case u:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}(e,1===s(x,!0).length,n,p);if(!E&&p!==yI&&p!==bI)return;(_I.includes(p)||[yI,bI].includes(p))&&a.preventDefault();var w=function(e){if(e){var t=e,n=e.querySelector("a");null!==n&&void 0!==n&&n.getAttribute("href")&&(t=n);var r=g.get(e);l(r),f(),h.current=Do((function(){d.current===r&&t.focus()}))}};if([yI,bI].includes(p)||E.sibling||!_){var T,S,k=xI(T=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):i.current,v);S=p===yI?k[0]:p===bI?k[k.length-1]:EI(T,v,_,E.offset),w(S)}else if(E.inlineTrigger)u(x);else if(E.offset>0)u(x,!0),f(),h.current=Do((function(){b();var e=_.getAttribute("aria-controls"),t=EI(document.getElementById(e),v);w(t)}),5);else if(E.offset<0){var C=s(x,!0),A=C[C.length-2],I=m.get(A);u(A,!1),w(I)}}null===c||void 0===c||c(a)}}var TI="__RC_UTIL_PATH_SPLIT__",SI=function(e){return e.join(TI)},kI="rc-menu-more";function CI(){var e=It(a.useState({}),2)[1],t=(0,a.useRef)(new Map),n=(0,a.useRef)(new Map),r=It(a.useState([]),2),i=r[0],o=r[1],s=(0,a.useRef)(0),l=(0,a.useRef)(!1),u=(0,a.useCallback)((function(r,i){var a=SI(i);n.current.set(a,r),t.current.set(r,a),s.current+=1;var o,u=s.current;o=function(){u===s.current&&(l.current||e({}))},Promise.resolve().then(o)}),[]),c=(0,a.useCallback)((function(e,r){var i=SI(r);n.current.delete(i),t.current.delete(e)}),[]),h=(0,a.useCallback)((function(e){o(e)}),[]),d=(0,a.useCallback)((function(e,n){var r=t.current.get(e)||"",a=r.split(TI);return n&&i.includes(a[0])&&a.unshift(kI),a}),[i]),f=(0,a.useCallback)((function(e,t){return e.some((function(e){return d(e,!0).includes(t)}))}),[d]),p=(0,a.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(TI),i=new Set;return Ie(n.current.keys()).forEach((function(e){e.startsWith(r)&&i.add(n.current.get(e))})),i}),[]);return a.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:u,unregisterPath:c,refreshOverflowKeys:h,isSubPathKey:f,getKeyPath:d,getKeys:function(){var e=Ie(t.current.keys());return i.length&&e.push(kI),e},getSubPathKeys:p}}function AI(e){var t=a.useRef(e);t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var II=Math.random().toFixed(5).toString().slice(2),OI=0;function PI(e,t,n,r){var i=a.useContext(tI),o=i.activeKey,s=i.onActive,l=i.onInactive,u={active:o===e};return t||(u.onMouseEnter=function(t){null===n||void 0===n||n({key:e,domEvent:t}),s(e)},u.onMouseLeave=function(t){null===r||void 0===r||r({key:e,domEvent:t}),l(e)}),u}function MI(e){var t=a.useContext(tI),n=t.mode,r=t.rtl,i=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*i}:{paddingLeft:e*i}}function RI(e){var t=e.icon,n=e.props,r=e.children;return("function"===typeof t?a.createElement(t,Pe({},n)):t)||r||null}var NI=["item"];function DI(e){var t=e.item,n=Wn(e,NI);return Object.defineProperty(n,"item",{get:function(){return et(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var LI=["title","attribute","elementRef"],FI=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],BI=["active"],UI=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,i=Ys(Wn(e,LI),["eventKey","popupClassName","popupOffset","onTitleClick"]);return et(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),a.createElement($A.Item,Ft({},n,{title:"string"===typeof t?t:void 0},i,{ref:r}))}}]),n}(a.Component),HI=a.forwardRef((function(e,t){var n,r=e.style,i=e.className,o=e.eventKey,s=(e.warnKey,e.disabled),l=e.itemIcon,u=e.children,c=e.role,h=e.onMouseEnter,d=e.onMouseLeave,f=e.onClick,p=e.onKeyDown,v=e.onFocus,m=Wn(e,FI),g=JA(o),b=a.useContext(tI),_=b.prefixCls,x=b.onItemClick,E=b.disabled,w=b.overflowDisabled,T=b.itemIcon,S=b.selectedKeys,k=b.onActive,C=a.useContext(uI)._internalRenderMenuItem,A="".concat(_,"-item"),I=a.useRef(),O=a.useRef(),P=E||s,M=$a(t,O),R=sI(o);var N=function(e){return{key:o,keyPath:Ie(R).reverse(),item:I.current,domEvent:e}},D=l||T,L=PI(o,P,h,d),F=L.active,B=Wn(L,BI),U=S.includes(o),H=MI(R.length),j={};"option"===e.role&&(j["aria-selected"]=U);var z=a.createElement(UI,Ft({ref:I,elementRef:M,role:null===c?"none":c||"menuitem",tabIndex:s?null:-1,"data-menu-id":w&&g?null:g},m,B,j,{component:"li","aria-disabled":s,style:Pe(Pe({},H),r),className:Wa()(A,(n={},y(n,"".concat(A,"-active"),F),y(n,"".concat(A,"-selected"),U),y(n,"".concat(A,"-disabled"),P),n),i),onClick:function(e){if(!P){var t=N(e);null===f||void 0===f||f(DI(t)),x(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===Ru.ENTER){var t=N(e);null===f||void 0===f||f(DI(t)),x(t)}},onFocus:function(e){k(o),null===v||void 0===v||v(e)}}),u,a.createElement(RI,{props:Pe(Pe({},e),{},{isSelected:U}),icon:D}));return C&&(z=C(z,e,{selected:U})),z}));function jI(e,t){var n=e.eventKey,r=aI(),i=sI(n);return a.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:a.createElement(HI,Ft({},e,{ref:t}))}var zI=a.forwardRef(jI),VI=["className","children"],GI=function(e,t){var n=e.className,r=e.children,i=Wn(e,VI),o=a.useContext(tI),s=o.prefixCls,l=o.mode,u=o.rtl;return a.createElement("ul",Ft({className:Wa()(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),n),role:"menu"},i,{"data-menu-list":!0,ref:t}),r)},WI=a.forwardRef(GI);WI.displayName="SubMenuList";var XI=WI,YI=["label","children","key","type"];function KI(e,t){return Yn(e).map((function(e,n){if(a.isValidElement(e)){var r,i,o=e.key,s=null!==(r=null===(i=e.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:o;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(Ie(t),[n]).join("-")));var l={key:s,eventKey:s};return a.cloneElement(e,l)}return e}))}function qI(e){return(e||[]).map((function(e,t){if(e&&"object"===u(e)){var n=e,r=n.label,i=n.children,o=n.key,s=n.type,l=Wn(n,YI),c=null!==o&&void 0!==o?o:"tmp-".concat(t);return i||"group"===s?"group"===s?a.createElement(WP,Ft({key:c},l,{title:r}),qI(i)):a.createElement(BP,Ft({key:c},l,{title:r}),qI(i)):"divider"===s?a.createElement(XP,Ft({key:c},l)):a.createElement(zI,Ft({key:c},l),r)}return null})).filter((function(e){return e}))}function $I(e,t,n){var r=e;return t&&(r=qI(t)),KI(r,n)}function ZI(e,t,n,r){var i=Re.unstable_batchedUpdates?function(e){Re.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i,r)}}}var QI,JI=(0,a.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=(0,a.useRef)(),s=(0,a.useRef)();(0,a.useImperativeHandle)(t,(function(){return{}}));var l=(0,a.useRef)(!1);return!l.current&&ct()&&(s.current=r(),o.current=s.current.parentNode,l.current=!0),(0,a.useEffect)((function(){null===n||void 0===n||n(e)})),(0,a.useEffect)((function(){return null===s.current.parentNode&&null!==o.current&&o.current.appendChild(s.current),function(){var e,t;null===(e=s.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.current)}}),[]),s.current?Re.createPortal(i,s.current):null})),eO=JI;function tO(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function nO(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function rO(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,i=e.mask,o=e.maskMotion,s=e.maskAnimation,l=e.maskTransitionName;if(!i)return null;var u={};return(o||l||s)&&(u=Pe({motionAppear:!0},nO({motion:o,prefixCls:t,transitionName:l,animation:s}))),a.createElement(Jo,Ft({},u,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:Wa()("".concat(t,"-mask"),n)})}))}function iO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iO(Object(n),!0).forEach((function(t){sO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oO(e){return oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},oO(e)}function sO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lO={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function uO(){if(void 0!==QI)return QI;QI="";var e=document.createElement("p").style;for(var t in lO)t+"Transform"in e&&(QI=t);return QI}function cO(){return uO()?"".concat(uO(),"TransitionProperty"):"transitionProperty"}function hO(){return uO()?"".concat(uO(),"Transform"):"transform"}function dO(e,t){var n=cO();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function fO(e,t){var n=hO();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var pO,vO=/matrix\((.*)\)/,mO=/matrix3d\((.*)\)/;function gO(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function yO(e,t,n){var r=n;if("object"!==oO(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):pO(e,t);for(var i in t)t.hasOwnProperty(i)&&yO(e,i,t[i])}function bO(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function _O(e){return bO(e)}function xO(e){return bO(e,!0)}function EO(e){var t=function(e){var t,n,r,i=e.ownerDocument,a=i.body,o=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=o.clientLeft||a.clientLeft||0,top:r-=o.clientTop||a.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=_O(r),t.top+=xO(r),t}function wO(e){return null!==e&&void 0!==e&&e==e.window}function TO(e){return wO(e)?e.document:9===e.nodeType?e:e.ownerDocument}var SO=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),kO=/^(top|right|bottom|left)$/,CO="currentStyle",AO="runtimeStyle",IO="left";function OO(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function PO(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function MO(e,t,n){"static"===yO(e,"position")&&(e.style.position="relative");var r=-999,i=-999,a=OO("left",n),o=OO("top",n),s=PO(a),l=PO(o);"left"!==a&&(r=999),"top"!==o&&(i=999);var u="",c=EO(e);("left"in t||"top"in t)&&(u=function(e){return e.style.transitionProperty||e.style[cO()]}(e)||"",dO(e,"none")),"left"in t&&(e.style[s]="",e.style[a]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[o]="".concat(i,"px")),gO(e);var h=EO(e),d={};for(var f in t)if(t.hasOwnProperty(f)){var p=OO(f,n),v="left"===f?r:i,m=c[f]-h[f];d[p]=p===f?v+m:v-m}yO(e,d),gO(e),("left"in t||"top"in t)&&dO(e,u);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=OO(y,n),_=t[y]-c[y];g[b]=y===b?d[b]+_:d[b]-_}yO(e,g)}function RO(e,t){var n=EO(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(hO());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(hO());if(r&&"none"!==r){var i,a=r.match(vO);a?((i=(a=a[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,fO(e,"matrix(".concat(i.join(","),")"))):((i=r.match(mO)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,fO(e,"matrix3d(".concat(i.join(","),")")))}else fO(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}function NO(e,t){for(var n=0;n<e.length;n++)t(e[n])}function DO(e){return"border-box"===pO(e,"boxSizing")}"undefined"!==typeof window&&(pO=window.getComputedStyle?function(e,t,n){var r=n,i="",a=TO(e);return(r=r||a.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e[CO]&&e[CO][t];if(SO.test(n)&&!kO.test(t)){var r=e.style,i=r[IO],a=e[AO][IO];e[AO][IO]=e[CO][IO],r[IO]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[IO]=i,e[AO][IO]=a}return""===n?"auto":n});var LO=["margin","border","padding"],FO=-1,BO=2,UO=1;function HO(e,t,n){var r,i,a,o=0;for(i=0;i<t.length;i++)if(r=t[i])for(a=0;a<n.length;a++){var s=void 0;s="border"===r?"".concat(r).concat(n[a],"Width"):r+n[a],o+=parseFloat(pO(e,s))||0}return o}var jO={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function zO(e,t,n){var r=n;if(wO(e))return"width"===t?jO.viewportWidth(e):jO.viewportHeight(e);if(9===e.nodeType)return"width"===t?jO.docWidth(e):jO.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],a="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),o=DO(e),s=0;(null===a||void 0===a||a<=0)&&(a=void 0,(null===(s=pO(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=o?UO:FO);var l=void 0!==a||o,u=a||s;return r===FO?l?u-HO(e,["border","padding"],i):s:l?r===UO?u:u+(r===BO?-HO(e,["border"],i):HO(e,["margin"],i)):s+HO(e,LO.slice(r),i)}NO(["Width","Height"],(function(e){jO["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],jO["viewport".concat(e)](n))},jO["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,a=r.documentElement[n];return"CSS1Compat"===r.compatMode&&a||i&&i[n]||a}}));var VO={position:"absolute",visibility:"hidden",display:"block"};function GO(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=zO.apply(void 0,t):function(e,t,n){var r,i={},a=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=a[r],a[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(a[r]=i[r])}(i,VO,(function(){r=zO.apply(void 0,t)})),r}function WO(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}NO(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);jO["outer".concat(t)]=function(t,n){return t&&GO(t,e,n?0:UO)};var n="width"===e?["Left","Right"]:["Top","Bottom"];jO[e]=function(t,r){var i=r;return void 0!==i?t?(DO(t)&&(i+=HO(t,["padding","border"],n)),yO(t,e,i)):void 0:t&&GO(t,e,FO)}}));var XO={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:TO,offset:function(e,t,n){if("undefined"===typeof t)return EO(e);!function(e,t,n){if(n.ignoreShake){var r=EO(e),i=r.left.toFixed(0),a=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(i===o&&a===s)return}n.useCssRight||n.useCssBottom?MO(e,t,n):n.useCssTransform&&hO()in document.body.style?RO(e,t):MO(e,t,n)}(e,t,n||{})},isWindow:wO,each:NO,css:yO,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:WO,getWindowScrollLeft:function(e){return _O(e)},getWindowScrollTop:function(e){return xO(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)XO.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};WO(XO,jO);var YO=XO.getParent;function KO(e){if(XO.isWindow(e)||9===e.nodeType)return null;var t,n=XO.getDocument(e).body,r=XO.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:YO(e);for(t=YO(e);t&&t!==n&&9!==t.nodeType;t=YO(t))if("static"!==(r=XO.css(t,"position")))return t;return null}var qO=XO.getParent;function $O(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=KO(e),i=XO.getDocument(e),a=i.defaultView||i.parentWindow,o=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===o||r===s||"visible"===XO.css(r,"overflow")){if(r===o||r===s)break}else{var l=XO.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=KO(r)}var u=null;XO.isWindow(e)||9===e.nodeType||(u=e.style.position,"absolute"===XO.css(e,"position")&&(e.style.position="fixed"));var c=XO.getWindowScrollLeft(a),h=XO.getWindowScrollTop(a),d=XO.viewportWidth(a),f=XO.viewportHeight(a),p=s.scrollWidth,v=s.scrollHeight,m=window.getComputedStyle(o);if("hidden"===m.overflowX&&(p=a.innerWidth),"hidden"===m.overflowY&&(v=a.innerHeight),e.style&&(e.style.position=u),t||function(e){if(XO.isWindow(e)||9===e.nodeType)return!1;var t=XO.getDocument(e),n=t.body,r=null;for(r=qO(e);r&&r!==n&&r!==t;r=qO(r))if("fixed"===XO.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,c),n.top=Math.max(n.top,h),n.right=Math.min(n.right,c+d),n.bottom=Math.min(n.bottom,h+f);else{var g=Math.max(p,c+d);n.right=Math.min(n.right,g);var y=Math.max(v,h+f);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function ZO(e){var t,n,r;if(XO.isWindow(e)||9===e.nodeType){var i=XO.getWindow(e);t={left:XO.getWindowScrollLeft(i),top:XO.getWindowScrollTop(i)},n=XO.viewportWidth(i),r=XO.viewportHeight(i)}else t=XO.offset(e),n=XO.outerWidth(e),r=XO.outerHeight(e);return t.width=n,t.height=r,t}function QO(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,a=e.height,o=e.left,s=e.top;return"c"===n?s+=a/2:"b"===n&&(s+=a),"c"===r?o+=i/2:"r"===r&&(o+=i),{left:o,top:s}}function JO(e,t,n,r,i){var a=QO(t,n[1]),o=QO(e,n[0]),s=[o.left-a.left,o.top-a.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function eP(e,t,n){return e.left<n.left||e.left+t.width>n.right}function tP(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function nP(e,t,n){var r=[];return XO.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function rP(e,t){return e[t]=-e[t],e}function iP(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function aP(e,t){e[0]=iP(e[0],t.width),e[1]=iP(e[1],t.height)}function oP(e,t,n,r){var i=n.points,a=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;a=[].concat(a),o=[].concat(o);var u={},c=0,h=$O(l,!(!(s=s||{})||!s.alwaysByViewport)),d=ZO(l);aP(a,d),aP(o,t);var f=JO(d,t,i,a,o),p=XO.merge(d,f);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&eP(f,d,h)){var v=nP(i,/[lr]/gi,{l:"r",r:"l"}),m=rP(a,0),g=rP(o,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(JO(d,t,v,m,g),d,h)||(c=1,i=v,a=m,o=g)}if(s.adjustY&&tP(f,d,h)){var y=nP(i,/[tb]/gi,{t:"b",b:"t"}),b=rP(a,1),_=rP(o,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(JO(d,t,y,b,_),d,h)||(c=1,i=y,a=b,o=_)}c&&(f=JO(d,t,i,a,o),XO.mix(p,f));var x=eP(f,d,h),E=tP(f,d,h);if(x||E){var w=i;x&&(w=nP(i,/[lr]/gi,{l:"r",r:"l"})),E&&(w=nP(i,/[tb]/gi,{t:"b",b:"t"})),i=w,a=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&x,u.adjustY=s.adjustY&&E,(u.adjustX||u.adjustY)&&(p=function(e,t,n,r){var i=XO.clone(e),a={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+a.width>n.right&&(a.width-=i.left+a.width-n.right),r.adjustX&&i.left+a.width>n.right&&(i.left=Math.max(n.right-a.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+a.height>n.bottom&&(a.height-=i.top+a.height-n.bottom),r.adjustY&&i.top+a.height>n.bottom&&(i.top=Math.max(n.bottom-a.height,n.top)),XO.mix(i,a)}(f,d,h,u))}return p.width!==d.width&&XO.css(l,"width",XO.width(l)+p.width-d.width),p.height!==d.height&&XO.css(l,"height",XO.height(l)+p.height-d.height),XO.offset(l,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:a,targetOffset:o,overflow:u}}function sP(e,t,n){var r=n.target||t,i=ZO(r),a=!function(e,t){var n=$O(e,t),r=ZO(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return oP(e,i,n,a)}sP.__getOffsetParent=KO,sP.__getVisibleRectForElement=$O;function lP(e,t){var n=null,r=null;var i=new cd((function(e){var i=It(e,1)[0].target;if(document.documentElement.contains(i)){var a=i.getBoundingClientRect(),o=a.width,s=a.height,l=Math.floor(o),u=Math.floor(s);n===l&&r===u||Promise.resolve().then((function(){t({width:l,height:u})})),n=l,r=u}}));return e&&i.observe(e),function(){i.disconnect()}}function uP(e){return"function"!==typeof e?null:e()}function cP(e){return"object"===u(e)&&e?e:null}var hP=function(e,t){var n=e.children,r=e.disabled,i=e.target,o=e.align,s=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,h=a.useRef({}),d=a.useRef(),f=a.Children.only(n),p=a.useRef({});p.current.disabled=r,p.current.target=i,p.current.align=o,p.current.onAlign=s;var v=function(e,t){var n=a.useRef(!1),r=a.useRef(null);function i(){window.clearTimeout(r.current)}return[function a(o){if(i(),n.current&&!0!==o)r.current=window.setTimeout((function(){n.current=!1,a()}),t);else{if(!1===e(o))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,i()}]}((function(){var e=p.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,a=d.current;if(!t&&n&&a){var o,s=uP(n),l=cP(n);h.current.element=s,h.current.point=l,h.current.align=r;var u=document.activeElement;return s&&Ks(s)?o=sP(a,s,r):l&&(o=function(e,t,n){var r,i,a=XO.getDocument(e),o=a.defaultView||a.parentWindow,s=XO.getWindowScrollLeft(o),l=XO.getWindowScrollTop(o),u=XO.viewportWidth(o),c=XO.viewportHeight(o),h={left:r="pageX"in t?t.pageX:s+t.clientX,top:i="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},d=r>=0&&r<=s+u&&i>=0&&i<=l+c,f=[n.points[0],"cc"];return oP(e,h,aO(aO({},n),{},{points:f}),d)}(a,l,r)),function(e,t){e!==document.activeElement&&ht(t,e)&&"function"===typeof e.focus&&e.focus()}(u,a),i&&o&&i(a,o),!0}return!1}),c),m=It(v,2),g=m[0],y=m[1],b=It(a.useState(),2),_=b[0],x=b[1],E=It(a.useState(),2),w=E[0],T=E[1];return bu((function(){x(uP(i)),T(cP(i))})),a.useEffect((function(){h.current.element===_&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(h.current.point,w)&&tt(h.current.align,o)||g()})),a.useEffect((function(){return lP(d.current,g)}),[d.current]),a.useEffect((function(){return lP(_,g)}),[_]),a.useEffect((function(){r?y():g()}),[r]),a.useEffect((function(){if(l)return ZI(window,"resize",g).remove}),[l]),a.useEffect((function(){return function(){y()}}),[]),a.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),a.isValidElement(f)&&(f=a.cloneElement(f,{ref:qa(f.ref,d)})),f},dP=a.forwardRef(hP);dP.displayName="Align";var fP=dP,pP=["measure","alignPre","align",null,"motion"],vP=a.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,i=e.className,o=e.style,s=e.children,l=e.zIndex,u=e.stretch,c=e.destroyPopupOnHide,h=e.forceRender,d=e.align,f=e.point,p=e.getRootDomNode,v=e.getClassNameFromAlign,m=e.onAlign,g=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,_=e.onTouchStart,x=e.onClick,E=(0,a.useRef)(),w=(0,a.useRef)(),T=It((0,a.useState)(),2),S=T[0],k=T[1],C=function(e){var t=It(a.useState({width:0,height:0}),2),n=t[0],r=t[1];return[a.useMemo((function(){var t={};if(e){var r=n.width,i=n.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){var t=e.offsetWidth,n=e.offsetHeight,i=e.getBoundingClientRect(),a=i.width,o=i.height;Math.abs(t-a)<1&&Math.abs(n-o)<1&&(t=a,n=o),r({width:t,height:n})}]}(u),A=It(C,2),I=A[0],O=A[1];var P=function(e,t){var n=It(ro(null),2),r=n[0],i=n[1],o=(0,a.useRef)();function s(e){i(e,!0)}function l(){Do.cancel(o.current)}return(0,a.useEffect)((function(){s("measure")}),[e]),(0,a.useEffect)((function(){"measure"===r&&t(),r&&(o.current=Do(_e(ye().mark((function e(){var t,n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=pP.indexOf(r),(n=pP[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),(0,a.useEffect)((function(){return function(){l()}}),[]),[r,function(e){l(),o.current=Do((function(){s((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(n,(function(){u&&O(p())})),M=It(P,2),R=M[0],N=M[1],D=It((0,a.useState)(0),2),L=D[0],F=D[1],B=(0,a.useRef)();function U(){var e;null===(e=E.current)||void 0===e||e.forceAlign()}function H(e,t){var n=v(t);S!==n&&k(n),F((function(e){return e+1})),"align"===R&&(null===m||void 0===m||m(e,t))}bu((function(){"alignPre"===R&&F(0)}),[R]),bu((function(){"align"===R&&(L<3?U():N((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[L]);var j=Pe({},nO(e));function z(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=j[e];j[e]=function(e,n){return N(),null===t||void 0===t?void 0:t(e,n)}})),a.useEffect((function(){j.motionName||"motion"!==R||N()}),[j.motionName,R]),a.useImperativeHandle(t,(function(){return{forceAlign:U,getElement:function(){return w.current}}}));var V=Pe(Pe({},I),{},{zIndex:l,opacity:"motion"!==R&&"stable"!==R&&n?0:void 0,pointerEvents:n||"stable"===R?void 0:"none"},o),G=!0;null===d||void 0===d||!d.points||"align"!==R&&"stable"!==R||(G=!1);var W=s;return a.Children.count(s)>1&&(W=a.createElement("div",{className:"".concat(r,"-content")},s)),a.createElement(Jo,Ft({visible:n,ref:w,leavedClassName:"".concat(r,"-hidden")},j,{onAppearPrepare:z,onEnterPrepare:z,removeOnLeave:c,forceRender:h}),(function(e,t){var n=e.className,o=e.style,s=Wa()(r,i,S,n);return a.createElement(fP,{target:f||p,key:"popup",ref:E,monitorWindowResize:!0,disabled:G,align:d,onAlign:H},a.createElement("div",{ref:t,className:s,onMouseEnter:g,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:_,onClick:x,style:Pe(Pe({},o),V)},W))}))}));vP.displayName="PopupInner";var mP=vP,gP=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.children,s=e.mobile,l=(s=void 0===s?{}:s).popupClassName,u=s.popupStyle,c=s.popupMotion,h=void 0===c?{}:c,d=s.popupRender,f=e.onClick,p=a.useRef();a.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return p.current}}}));var v=Pe({zIndex:i},u),m=o;return a.Children.count(o)>1&&(m=a.createElement("div",{className:"".concat(n,"-content")},o)),d&&(m=d(m)),a.createElement(Jo,Ft({visible:r,ref:p,removeOnLeave:!0},h),(function(e,t){var r=e.className,i=e.style,o=Wa()(n,l,r);return a.createElement("div",{ref:t,className:o,onClick:f,style:Pe(Pe({},i),v)},m)}))}));gP.displayName="MobilePopupInner";var yP=gP,bP=["visible","mobile"],_P=a.forwardRef((function(e,t){var n=e.visible,r=e.mobile,i=Wn(e,bP),o=It((0,a.useState)(n),2),s=o[0],l=o[1],u=It((0,a.useState)(!1),2),c=u[0],h=u[1],d=Pe(Pe({},i),{},{visible:s});(0,a.useEffect)((function(){l(n),n&&r&&h(mC())}),[n,r]);var f=c?a.createElement(yP,Ft({},d,{mobile:r,ref:t})):a.createElement(mP,Ft({},d,{ref:t}));return a.createElement("div",null,a.createElement(rO,d),f)}));_P.displayName="Popup";var xP=_P,EP=a.createContext(null);function wP(){}function TP(){return""}function SP(e){return e?e.ownerDocument:window.document}var kP=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var CP=function(e){var t=function(t){p(r,t);var n=g(r);function r(e){var t,i;return l(this,r),y(m(t=n.call(this,e)),"popupRef",a.createRef()),y(m(t),"triggerRef",a.createRef()),y(m(t),"portalContainer",void 0),y(m(t),"attachId",void 0),y(m(t),"clickOutsideHandler",void 0),y(m(t),"touchOutsideHandler",void 0),y(m(t),"contextMenuOutsideHandler1",void 0),y(m(t),"contextMenuOutsideHandler2",void 0),y(m(t),"mouseDownTimeout",void 0),y(m(t),"focusTime",void 0),y(m(t),"preClickTime",void 0),y(m(t),"preTouchTime",void 0),y(m(t),"delayTimer",void 0),y(m(t),"hasPopupMouseDown",void 0),y(m(t),"onMouseEnter",(function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)})),y(m(t),"onMouseMove",(function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)})),y(m(t),"onMouseLeave",(function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),y(m(t),"onPopupMouseEnter",(function(){t.clearDelayTimer()})),y(m(t),"onPopupMouseLeave",(function(e){var n;e.relatedTarget&&!e.relatedTarget.setTimeout&&ht(null===(n=t.popupRef.current)||void 0===n?void 0:n.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),y(m(t),"onFocus",(function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))})),y(m(t),"onMouseDown",(function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()})),y(m(t),"onTouchStart",(function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()})),y(m(t),"onBlur",(function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)})),y(m(t),"onContextMenu",(function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)})),y(m(t),"onContextMenuClose",(function(){t.isContextMenuToShow()&&t.close()})),y(m(t),"onClick",(function(e){if(t.fireEvents("onClick",e),t.focusTime){var n;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)})),y(m(t),"onPopupMouseDown",(function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)})),y(m(t),"onDocumentClick",(function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target,r=t.getRootDomNode(),i=t.getPopupDomNode();ht(r,n)&&!t.isContextMenuOnly()||ht(i,n)||t.hasPopupMouseDown||t.close()}})),y(m(t),"getRootDomNode",(function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var n=Ya(t.triggerRef.current);if(n)return n}catch(r){}return Re.findDOMNode(m(t))})),y(m(t),"getPopupClassNameFromAlign",(function(e){var n=[],r=t.props,i=r.popupPlacement,a=r.builtinPlacements,o=r.prefixCls,s=r.alignPoint,l=r.getPopupClassNameFromAlign;return i&&a&&n.push(function(e,t,n,r){for(var i=n.points,a=Object.keys(e),o=0;o<a.length;o+=1){var s=a[o];if(tO(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(a,o,e,s)),l&&n.push(l(e)),n.join(" ")})),y(m(t),"getComponent",(function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,i=e.popupClassName,o=e.onPopupAlign,s=e.popupMotion,l=e.popupAnimation,u=e.popupTransitionName,c=e.popupStyle,h=e.mask,d=e.maskAnimation,f=e.maskTransitionName,p=e.maskMotion,v=e.zIndex,m=e.popup,g=e.stretch,y=e.alignPoint,b=e.mobile,_=e.forceRender,x=e.onPopupClick,E=t.state,w=E.popupVisible,T=E.point,S=t.getPopupAlign(),k={};return t.isMouseEnterToShow()&&(k.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(k.onMouseLeave=t.onPopupMouseLeave),k.onMouseDown=t.onPopupMouseDown,k.onTouchStart=t.onPopupMouseDown,a.createElement(xP,Ft({prefixCls:n,destroyPopupOnHide:r,visible:w,point:y&&T,className:i,align:S,onAlign:o,animation:l,getClassNameFromAlign:t.getPopupClassNameFromAlign},k,{stretch:g,getRootDomNode:t.getRootDomNode,style:c,mask:h,zIndex:v,transitionName:u,maskAnimation:d,maskTransitionName:f,maskMotion:p,ref:t.popupRef,motion:s,mobile:b,forceRender:_,onClick:x}),"function"===typeof m?m():m)})),y(m(t),"attachParent",(function(e){Do.cancel(t.attachId);var n,r=t.props,i=r.getPopupContainer,a=r.getDocument,o=t.getRootDomNode();i?(o||0===i.length)&&(n=i(o)):n=a(t.getRootDomNode()).body,n?n.appendChild(e):t.attachId=Do((function(){t.attachParent(e)}))})),y(m(t),"getContainer",(function(){if(!t.portalContainer){var e=(0,t.props.getDocument)(t.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",t.portalContainer=e}return t.attachParent(t.portalContainer),t.portalContainer})),y(m(t),"setPoint",(function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),y(m(t),"handlePortalUpdate",(function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)})),y(m(t),"triggerContextValue",{onPopupMouseDown:t.onPopupMouseDown}),i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:i,popupVisible:i},kP.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),t}return d(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=ZI(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=ZI(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=ZI(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=ZI(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Do.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Pe(Pe({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var a=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,a),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,r=n.children,i=n.forceRender,o=n.alignPoint,s=n.className,l=n.autoDestroy,u=a.Children.only(r),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var h=Wa()(u&&u.props&&u.props.className,s);h&&(c.className=h);var d=Pe({},c);Za(u)&&(d.ref=qa(this.triggerRef,u.ref));var f,p=a.cloneElement(u,d);return(t||this.popupRef.current||i)&&(f=a.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&l&&(f=null),a.createElement(EP.Provider,{value:this.triggerContextValue},p,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),r}(a.Component);return y(t,"contextType",EP),y(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:TP,getDocument:SP,onPopupVisibleChange:wP,afterPopupVisibleChange:wP,onPopupAlign:wP,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}(eO),AP={adjustX:1,adjustY:1},IP={topLeft:{points:["bl","tl"],overflow:AP,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:AP,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:AP,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:AP,offset:[4,0]}},OP={topLeft:{points:["bl","tl"],overflow:AP,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:AP,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:AP,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:AP,offset:[4,0]}};function PP(e,t,n){return t||(n?n[e]||n.other:void 0)}var MP={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function RP(e){var t=e.prefixCls,n=e.visible,r=e.children,i=e.popup,o=e.popupClassName,s=e.popupOffset,l=e.disabled,u=e.mode,c=e.onVisibleChange,h=a.useContext(tI),d=h.getPopupContainer,f=h.rtl,p=h.subMenuOpenDelay,v=h.subMenuCloseDelay,m=h.builtinPlacements,g=h.triggerSubMenuAction,b=h.forceSubMenuRender,_=h.rootClassName,x=h.motion,E=h.defaultMotions,w=It(a.useState(!1),2),T=w[0],S=w[1],k=Pe(Pe({},f?OP:IP),m),C=MP[u],A=PP(u,x,E),I=a.useRef(A);"inline"!==u&&(I.current=A);var O=Pe(Pe({},I.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),P=a.useRef();return a.useEffect((function(){return P.current=Do((function(){S(n)})),function(){Do.cancel(P.current)}}),[n]),a.createElement(CP,{prefixCls:t,popupClassName:Wa()("".concat(t,"-popup"),y({},"".concat(t,"-rtl"),f),o,_),stretch:"horizontal"===u?"minWidth":null,getPopupContainer:d,builtinPlacements:k,popupPlacement:C,popupVisible:T,popup:i,popupAlign:s&&{offset:s},action:l?[]:[g],mouseEnterDelay:p,mouseLeaveDelay:v,onPopupVisibleChange:c,forceRender:b,popupMotion:O},r)}function NP(e){var t=e.id,n=e.open,r=e.keyPath,i=e.children,o="inline",s=a.useContext(tI),l=s.prefixCls,u=s.forceSubMenuRender,c=s.motion,h=s.defaultMotions,d=s.mode,f=a.useRef(!1);f.current=d===o;var p=It(a.useState(!f.current),2),v=p[0],m=p[1],g=!!f.current&&n;a.useEffect((function(){f.current&&m(!1)}),[d]);var y=Pe({},PP(o,c,h));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return f.current||e||m(!0),null===b||void 0===b?void 0:b(e)},v?null:a.createElement(nI,{mode:o,locked:!f.current},a.createElement(Jo,Ft({visible:g},y,{forceRender:u,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var n=e.className,r=e.style;return a.createElement(XI,{id:t,className:n,style:r},i)})))}var DP=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],LP=["active"],FP=function(e){var t,n=e.style,r=e.className,i=e.title,o=e.eventKey,s=(e.warnKey,e.disabled),l=e.internalPopupClose,u=e.children,c=e.itemIcon,h=e.expandIcon,d=e.popupClassName,f=e.popupOffset,p=e.onClick,v=e.onMouseEnter,m=e.onMouseLeave,g=e.onTitleClick,b=e.onTitleMouseEnter,_=e.onTitleMouseLeave,x=Wn(e,DP),E=JA(o),w=a.useContext(tI),T=w.prefixCls,S=w.mode,k=w.openKeys,C=w.disabled,A=w.overflowDisabled,I=w.activeKey,O=w.selectedKeys,P=w.itemIcon,M=w.expandIcon,R=w.onItemClick,N=w.onOpenChange,D=w.onActive,L=a.useContext(uI)._internalRenderSubMenuItem,F=a.useContext(lI).isSubPathKey,B=sI(),U="".concat(T,"-submenu"),H=C||s,j=a.useRef(),z=a.useRef();var V=c||P,G=h||M,W=k.includes(o),X=!A&&W,Y=F(O,o),K=PI(o,H,b,_),q=K.active,$=Wn(K,LP),Z=It(a.useState(!1),2),Q=Z[0],J=Z[1],ee=function(e){H||J(e)},te=a.useMemo((function(){return q||"inline"!==S&&(Q||F([I],o))}),[S,q,I,Q,o,F]),ne=MI(B.length),re=AI((function(e){null===p||void 0===p||p(DI(e)),R(e)})),ie=E&&"".concat(E,"-popup"),ae=a.createElement("div",Ft({role:"menuitem",style:ne,className:"".concat(U,"-title"),tabIndex:H?null:-1,ref:j,title:"string"===typeof i?i:null,"data-menu-id":A&&E?null:E,"aria-expanded":X,"aria-haspopup":!0,"aria-controls":ie,"aria-disabled":H,onClick:function(e){H||(null===g||void 0===g||g({key:o,domEvent:e}),"inline"===S&&N(o,!W))},onFocus:function(){D(o)}},$),i,a.createElement(RI,{icon:"horizontal"!==S?G:null,props:Pe(Pe({},e),{},{isOpen:X,isSubMenu:!0})},a.createElement("i",{className:"".concat(U,"-arrow")}))),oe=a.useRef(S);if("inline"!==S&&B.length>1?oe.current="vertical":oe.current=S,!A){var se=oe.current;ae=a.createElement(RP,{mode:se,prefixCls:U,visible:!l&&X&&"inline"!==S,popupClassName:d,popupOffset:f,popup:a.createElement(nI,{mode:"horizontal"===se?"vertical":se},a.createElement(XI,{id:ie,ref:z},u)),disabled:H,onVisibleChange:function(e){"inline"!==S&&N(o,e)}},ae)}var le=a.createElement($A.Item,Ft({role:"none"},x,{component:"li",style:n,className:Wa()(U,"".concat(U,"-").concat(S),r,(t={},y(t,"".concat(U,"-open"),X),y(t,"".concat(U,"-active"),te),y(t,"".concat(U,"-selected"),Y),y(t,"".concat(U,"-disabled"),H),t)),onMouseEnter:function(e){ee(!0),null===v||void 0===v||v({key:o,domEvent:e})},onMouseLeave:function(e){ee(!1),null===m||void 0===m||m({key:o,domEvent:e})}}),ae,!A&&a.createElement(NP,{id:ie,open:X,keyPath:B},u));return L&&(le=L(le,e,{selected:Y,active:te,open:X,disabled:H})),a.createElement(nI,{onItemClick:re,mode:"horizontal"===S?"vertical":S,itemIcon:V,expandIcon:G},le)};function BP(e){var t,n=e.eventKey,r=e.children,i=sI(n),o=KI(r,i),s=aI();return a.useEffect((function(){if(s)return s.registerPath(n,i),function(){s.unregisterPath(n,i)}}),[i]),t=s?o:a.createElement(FP,e,o),a.createElement(oI.Provider,{value:i},t)}var UP=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],HP=[],jP=a.forwardRef((function(e,t){var n,r,i=e,o=i.prefixCls,s=void 0===o?"rc-menu":o,l=i.rootClassName,u=i.style,c=i.className,h=i.tabIndex,d=void 0===h?0:h,f=i.items,p=i.children,v=i.direction,m=i.id,g=i.mode,b=void 0===g?"vertical":g,_=i.inlineCollapsed,x=i.disabled,E=i.disabledOverflow,w=i.subMenuOpenDelay,T=void 0===w?.1:w,S=i.subMenuCloseDelay,k=void 0===S?.1:S,C=i.forceSubMenuRender,A=i.defaultOpenKeys,I=i.openKeys,O=i.activeKey,P=i.defaultActiveFirst,M=i.selectable,R=void 0===M||M,N=i.multiple,D=void 0!==N&&N,L=i.defaultSelectedKeys,F=i.selectedKeys,B=i.onSelect,U=i.onDeselect,H=i.inlineIndent,j=void 0===H?24:H,z=i.motion,V=i.defaultMotions,G=i.triggerSubMenuAction,W=void 0===G?"hover":G,X=i.builtinPlacements,Y=i.itemIcon,K=i.expandIcon,q=i.overflowedIndicator,$=void 0===q?"...":q,Z=i.overflowedIndicatorPopupClassName,Q=i.getPopupContainer,J=i.onClick,ee=i.onOpenChange,te=i.onKeyDown,ne=(i.openAnimation,i.openTransitionName,i._internalRenderMenuItem),re=i._internalRenderSubMenuItem,ie=Wn(i,UP),ae=a.useMemo((function(){return $I(p,f,HP)}),[p,f]),oe=It(a.useState(!1),2),se=oe[0],le=oe[1],ue=a.useRef(),ce=function(e){var t=It(mh(e,{value:e}),2),n=t[0],r=t[1];return a.useEffect((function(){OI+=1;var e="".concat(II,"-").concat(OI);r("rc-menu-uuid-".concat(e))}),[]),n}(m),he="rtl"===v;var de=mh(A,{value:I,postState:function(e){return e||HP}}),fe=It(de,2),pe=fe[0],ve=fe[1],me=function(e){function t(){ve(e),null===ee||void 0===ee||ee(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,Re.flushSync)(t):t()},ge=It(a.useState(pe),2),ye=ge[0],be=ge[1],_e=a.useRef(!1),xe=It(a.useMemo((function(){return"inline"!==b&&"vertical"!==b||!_?[b,!1]:["vertical",_]}),[b,_]),2),Ee=xe[0],we=xe[1],Te="inline"===Ee,Se=It(a.useState(Ee),2),ke=Se[0],Ce=Se[1],Ae=It(a.useState(we),2),Oe=Ae[0],Me=Ae[1];a.useEffect((function(){Ce(Ee),Me(we),_e.current&&(Te?ve(ye):me(HP))}),[Ee,we]);var Ne=It(a.useState(0),2),De=Ne[0],Le=Ne[1],Fe=De>=ae.length-1||"horizontal"!==ke||E;a.useEffect((function(){Te&&be(pe)}),[pe]),a.useEffect((function(){return _e.current=!0,function(){_e.current=!1}}),[]);var Be=CI(),Ue=Be.registerPath,He=Be.unregisterPath,je=Be.refreshOverflowKeys,ze=Be.isSubPathKey,Ve=Be.getKeyPath,Ge=Be.getKeys,We=Be.getSubPathKeys,Xe=a.useMemo((function(){return{registerPath:Ue,unregisterPath:He}}),[Ue,He]),Ye=a.useMemo((function(){return{isSubPathKey:ze}}),[ze]);a.useEffect((function(){je(Fe?HP:ae.slice(De+1).map((function(e){return e.key})))}),[De,Fe]);var Ke=It(mh(O||P&&(null===(n=ae[0])||void 0===n?void 0:n.key),{value:O}),2),qe=Ke[0],$e=Ke[1],Ze=AI((function(e){$e(e)})),Qe=AI((function(){$e(void 0)}));(0,a.useImperativeHandle)(t,(function(){return{list:ue.current,focus:function(e){var t,n,r,i,a=null!==qe&&void 0!==qe?qe:null===(t=ae.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;a&&(null===(n=ue.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(QA(ce,a),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var Je=mh(L||[],{value:F,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?HP:[e]}}),et=It(Je,2),nt=et[0],rt=et[1],it=AI((function(e){null===J||void 0===J||J(DI(e)),function(e){if(R){var t,n=e.key,r=nt.includes(n);t=D?r?nt.filter((function(e){return e!==n})):[].concat(Ie(nt),[n]):[n],rt(t);var i=Pe(Pe({},e),{},{selectedKeys:t});r?null===U||void 0===U||U(i):null===B||void 0===B||B(i)}!D&&pe.length&&"inline"!==ke&&me(HP)}(e)})),at=AI((function(e,t){var n=pe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==ke){var r=We(e);n=n.filter((function(e){return!r.has(e)}))}tt(pe,n,!0)||me(n,!0)})),ot=AI(Q),st=wI(ke,qe,he,ce,ue,Ge,Ve,$e,(function(e,t){var n=null!==t&&void 0!==t?t:!pe.includes(e);at(e,n)}),te);a.useEffect((function(){le(!0)}),[]);var lt=a.useMemo((function(){return{_internalRenderMenuItem:ne,_internalRenderSubMenuItem:re}}),[ne,re]),ut="horizontal"!==ke||E?ae:ae.map((function(e,t){return a.createElement(nI,{key:e.key,overflowDisabled:t>De},e)})),ct=a.createElement($A,Ft({id:m,ref:ue,prefixCls:"".concat(s,"-overflow"),component:"ul",itemComponent:zI,className:Wa()(s,"".concat(s,"-root"),"".concat(s,"-").concat(ke),c,(r={},y(r,"".concat(s,"-inline-collapsed"),Oe),y(r,"".concat(s,"-rtl"),he),r),l),dir:v,style:u,role:"menu",tabIndex:d,data:ut,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?ae.slice(-t):null;return a.createElement(BP,{eventKey:kI,title:$,disabled:Fe,internalPopupClose:0===t,popupClassName:Z},n)},maxCount:"horizontal"!==ke||E?$A.INVALIDATE:$A.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Le(e)},onKeyDown:st},ie));return a.createElement(uI.Provider,{value:lt},a.createElement(ZA.Provider,{value:ce},a.createElement(nI,{prefixCls:s,rootClassName:l,mode:ke,openKeys:pe,rtl:he,disabled:x,motion:se?z:null,defaultMotions:se?V:null,activeKey:qe,onActive:Ze,onInactive:Qe,selectedKeys:nt,inlineIndent:j,subMenuOpenDelay:T,subMenuCloseDelay:k,forceSubMenuRender:C,builtinPlacements:X,triggerSubMenuAction:W,getPopupContainer:ot,itemIcon:Y,expandIcon:K,onItemClick:it,onOpenChange:at},a.createElement(lI.Provider,{value:Ye},ct),a.createElement("div",{style:{display:"none"},"aria-hidden":!0},a.createElement(iI.Provider,{value:Xe},ae)))))})),zP=["className","title","eventKey","children"],VP=["children"],GP=function(e){var t=e.className,n=e.title,r=(e.eventKey,e.children),i=Wn(e,zP),o=a.useContext(tI).prefixCls,s="".concat(o,"-item-group");return a.createElement("li",Ft({role:"presentation"},i,{onClick:function(e){return e.stopPropagation()},className:Wa()(s,t)}),a.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:"string"===typeof n?n:void 0},n),a.createElement("ul",{role:"group",className:"".concat(s,"-list")},r))};function WP(e){var t=e.children,n=Wn(e,VP),r=KI(t,sI(n.eventKey));return aI()?r:a.createElement(GP,Ys(n,["warnKey"]),r)}function XP(e){var t=e.className,n=e.style,r=a.useContext(tI).prefixCls;return aI()?null:a.createElement("li",{className:Wa()("".concat(r,"-item-divider"),t),style:n})}var YP=jP;YP.Item=zI,YP.SubMenu=BP,YP.ItemGroup=WP,YP.Divider=XP;var KP=YP,qP={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},$P=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:qP}))};var ZP=a.forwardRef($P),QP=function(e){var t;return y({},e.componentCls,(y(t={},"".concat(e.antCls,"-motion-collapse-legacy"),{overflow:"hidden","&-active":{transition:"height ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut,",\n        opacity ").concat(e.motionDurationMid," ").concat(e.motionEaseInOut," !important")}}),y(t,"".concat(e.antCls,"-motion-collapse"),{overflow:"hidden",transition:"height ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut,",\n        opacity ").concat(e.motionDurationMid," ").concat(e.motionEaseInOut," !important")}),t))},JP=new Fn("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),eM=new Fn("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),tM=new Fn("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),nM=new Fn("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),rM=new Fn("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),iM=new Fn("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),aM=new Fn("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),oM=new Fn("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),sM={"slide-up":{inKeyframes:JP,outKeyframes:eM},"slide-down":{inKeyframes:tM,outKeyframes:nM},"slide-left":{inKeyframes:rM,outKeyframes:iM},"slide-right":{inKeyframes:aM,outKeyframes:oM}},lM=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),a=sM[t],o=a.inKeyframes,s=a.outKeyframes;return[ic(i,o,s,e.motionDurationMid),(n={},y(n,"\n      ".concat(i,"-enter,\n      ").concat(i,"-appear\n    "),y({transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint},"&-prepare",{transform:"scale(1)"})),y(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInQuint}),n)]},uM=function(e){var t,n=e.componentCls,r=e.motionDurationSlow,i=e.menuHorizontalHeight,a=e.colorSplit,o=e.lineWidth,s=e.lineType,l=e.menuItemPaddingInline;return y({},"".concat(n,"-horizontal"),(y(t={lineHeight:"".concat(i,"px"),border:0,borderBottom:"".concat(o,"px ").concat(s," ").concat(a),boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'}},"".concat(n,"-item, ").concat(n,"-submenu"),{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:l}),y(t,"> ".concat(n,"-item:hover,\n        > ").concat(n,"-item-active,\n        > ").concat(n,"-submenu ").concat(n,"-submenu-title:hover"),{backgroundColor:"transparent"}),y(t,"".concat(n,"-item, ").concat(n,"-submenu-title"),{transition:["border-color ".concat(r),"background ".concat(r)].join(",")}),y(t,"".concat(n,"-submenu-arrow"),{display:"none"}),t))},cM=function(e){var t,n=e.componentCls,r=e.menuArrowOffset;return y(t={},"".concat(n,"-rtl"),{direction:"rtl"}),y(t,"".concat(n,"-submenu-rtl"),{transformOrigin:"100% 0"}),y(t,"".concat(n,"-rtl").concat(n,"-vertical,\n    ").concat(n,"-submenu-rtl ").concat(n,"-vertical"),y({},"".concat(n,"-submenu-arrow"),{"&::before":{transform:"rotate(-45deg) translateY(-".concat(r,")")},"&::after":{transform:"rotate(45deg) translateY(".concat(r,")")}})),t},hM=function(e){return Object.assign({},ss(e))},dM=function(e,t){var n,r,i,a,o,s,l=e.componentCls,u=e.colorItemText,c=e.colorItemTextSelected,h=e.colorGroupTitle,d=e.colorItemBg,f=e.colorSubItemBg,p=e.colorItemBgSelected,v=e.colorActiveBarHeight,m=e.colorActiveBarWidth,g=e.colorActiveBarBorderSize,b=e.motionDurationSlow,_=e.motionEaseInOut,x=e.motionEaseOut,E=e.menuItemPaddingInline,w=e.motionDurationMid,T=e.colorItemTextHover,S=e.lineType,k=e.colorSplit,C=e.colorItemTextDisabled,A=e.colorDangerItemText,I=e.colorDangerItemTextHover,O=e.colorDangerItemTextSelected,P=e.colorDangerItemBgActive,M=e.colorDangerItemBgSelected,R=e.colorItemBgHover,N=e.menuSubMenuBg,D=e.colorItemTextSelectedHorizontal,L=e.colorItemBgSelectedHorizontal;return y({},"".concat(l,"-").concat(t,", ").concat(l,"-").concat(t," > ").concat(l),(y(s={color:u,background:d},"&".concat(l,"-root:focus-visible"),Object.assign({},hM(e))),y(s,"".concat(l,"-item-group-title"),{color:h}),y(s,"".concat(l,"-submenu-selected"),y({},"> ".concat(l,"-submenu-title"),{color:c})),y(s,"".concat(l,"-item-disabled, ").concat(l,"-submenu-disabled"),{color:"".concat(C," !important")}),y(s,"".concat(l,"-item:hover, ").concat(l,"-submenu-title:hover"),y({},"&:not(".concat(l,"-item-selected):not(").concat(l,"-submenu-selected)"),{color:T})),y(s,"&:not(".concat(l,"-horizontal)"),(y(n={},"".concat(l,"-item:not(").concat(l,"-item-selected)"),{"&:hover":{backgroundColor:R},"&:active":{backgroundColor:p}}),y(n,"".concat(l,"-submenu-title"),{"&:hover":{backgroundColor:R},"&:active":{backgroundColor:p}}),n)),y(s,"".concat(l,"-item-danger"),(y(r={color:A},"&".concat(l,"-item:hover"),y({},"&:not(".concat(l,"-item-selected):not(").concat(l,"-submenu-selected)"),{color:I})),y(r,"&".concat(l,"-item:active"),{background:P}),r)),y(s,"".concat(l,"-item a"),{"&, &:hover":{color:"inherit"}}),y(s,"".concat(l,"-item-selected"),(y(i={color:c},"&".concat(l,"-item-danger"),{color:O}),y(i,"a, a:hover",{color:"inherit"}),i)),y(s,"& ".concat(l,"-item-selected"),y({backgroundColor:p},"&".concat(l,"-item-danger"),{backgroundColor:M})),y(s,"".concat(l,"-item, ").concat(l,"-submenu-title"),y({},"&:not(".concat(l,"-item-disabled):focus-visible"),Object.assign({},hM(e)))),y(s,"&".concat(l,"-submenu > ").concat(l),{backgroundColor:N}),y(s,"&".concat(l,"-popup > ").concat(l),{backgroundColor:d}),y(s,"&".concat(l,"-horizontal"),Object.assign(Object.assign({},"dark"===t?{borderBottom:0}:{}),y({},"> ".concat(l,"-item, > ").concat(l,"-submenu"),(y(a={top:g,marginTop:-g,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:E,bottom:0,borderBottom:"".concat(v,"px solid transparent"),transition:"border-color ".concat(b," ").concat(_),content:'""'}},"&:hover, &-active, &-open",{"&::after":{borderBottomWidth:v,borderBottomColor:D}}),y(a,"&-selected",{color:D,backgroundColor:L,"&::after":{borderBottomWidth:v,borderBottomColor:D}}),a)))),y(s,"&".concat(l,"-root"),y({},"&".concat(l,"-inline, &").concat(l,"-vertical"),{borderInlineEnd:"".concat(g,"px ").concat(S," ").concat(k)})),y(s,"&".concat(l,"-inline"),(y(o={},"".concat(l,"-sub").concat(l,"-inline"),{background:f}),y(o,"".concat(l,"-item, ").concat(l,"-submenu-title"),g&&m?{width:"calc(100% + ".concat(g,"px)")}:{}),y(o,"".concat(l,"-item"),y({position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:"".concat(m,"px solid ").concat(c),transform:"scaleY(0.0001)",opacity:0,transition:["transform ".concat(w," ").concat(x),"opacity ".concat(w," ").concat(x)].join(","),content:'""'}},"&".concat(l,"-item-danger"),{"&::after":{borderInlineEndColor:O}})),y(o,"".concat(l,"-selected, ").concat(l,"-item-selected"),{"&::after":{transform:"scaleY(1)",opacity:1,transition:["transform ".concat(w," ").concat(_),"opacity ".concat(w," ").concat(_)].join(",")}}),o)),s))},fM=function(e){var t,n=e.componentCls,r=e.menuItemHeight,i=e.itemMarginInline,a=e.padding,o=e.menuArrowSize,s=e.marginXS,l=e.marginXXS,u=a+o+s;return y(t={},"".concat(n,"-item"),y({position:"relative"},"&:not(:last-child)",{marginBottom:s})),y(t,"".concat(n,"-item, ").concat(n,"-submenu-title"),{height:r,lineHeight:"".concat(r,"px"),paddingInline:a,overflow:"hidden",textOverflow:"ellipsis",marginInline:i,marginBlock:l,width:"calc(100% - ".concat(2*i,"px)")}),y(t,"".concat(n,"-submenu"),{paddingBottom:.02}),y(t,"> ".concat(n,"-item,\n            > ").concat(n,"-submenu > ").concat(n,"-submenu-title"),{height:r,lineHeight:"".concat(r,"px")}),y(t,"".concat(n,"-item-group-list ").concat(n,"-submenu-title,\n            ").concat(n,"-submenu-title"),{paddingInlineEnd:u}),t},pM=function(e){var t,n,r,i,a,o,s,l=e.componentCls,u=e.iconCls,c=e.menuItemHeight,h=e.colorTextLightSolid,d=e.dropdownWidth,f=e.controlHeightLG,p=e.motionDurationMid,v=e.motionEaseOut,m=e.paddingXL,g=e.fontSizeSM,b=e.fontSizeLG,_=e.motionDurationSlow,x=e.paddingXS,E=e.boxShadowSecondary,w={height:c,lineHeight:"".concat(c,"px"),listStylePosition:"inside",listStyleType:"disc"};return[(t={},y(t,l,y({},"&-inline, &-vertical",Object.assign(y({},"&".concat(l,"-root"),{boxShadow:"none"}),fM(e)))),y(t,"".concat(l,"-submenu-popup"),y({},"".concat(l,"-vertical"),Object.assign(Object.assign({},fM(e)),{boxShadow:E}))),t),y({},"".concat(l,"-submenu-popup ").concat(l,"-vertical").concat(l,"-sub"),{minWidth:d,maxHeight:"calc(100vh - ".concat(2.5*f,"px)"),padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}),y({},"".concat(l,"-inline"),(i={width:"100%"},y(i,"&".concat(l,"-root"),y({},"".concat(l,"-item, ").concat(l,"-submenu-title"),(n={display:"flex",alignItems:"center",transition:["border-color ".concat(_),"background ".concat(_),"padding ".concat(p," ").concat(v)].join(",")},y(n,"> ".concat(l,"-title-content"),{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"}),y(n,"> *",{flex:"none"}),n))),y(i,"".concat(l,"-sub").concat(l,"-inline"),(r={padding:0,border:0,borderRadius:0,boxShadow:"none"},y(r,"& > ".concat(l,"-submenu > ").concat(l,"-submenu-title"),w),y(r,"& ".concat(l,"-item-group-title"),{paddingInlineStart:m}),r)),y(i,"".concat(l,"-item"),w),i)),y({},"".concat(l,"-inline-collapsed"),(s={width:2*c},y(s,"&".concat(l,"-root"),y({},"".concat(l,"-item, ").concat(l,"-submenu ").concat(l,"-submenu-title"),y({},"> ".concat(l,"-inline-collapsed-noicon"),{fontSize:b,textAlign:"center"}))),y(s,"> ".concat(l,"-item,\n          > ").concat(l,"-item-group > ").concat(l,"-item-group-list > ").concat(l,"-item,\n          > ").concat(l,"-item-group > ").concat(l,"-item-group-list > ").concat(l,"-submenu > ").concat(l,"-submenu-title,\n          > ").concat(l,"-submenu > ").concat(l,"-submenu-title"),(a={insetInlineStart:0,paddingInline:"calc(50% - ".concat(g,"px)"),textOverflow:"clip"},y(a,"\n            ".concat(l,"-submenu-arrow,\n            ").concat(l,"-submenu-expand-icon\n          "),{opacity:0}),y(a,"".concat(l,"-item-icon, ").concat(u),{margin:0,fontSize:b,lineHeight:"".concat(c,"px"),"+ span":{display:"inline-block",opacity:0}}),a)),y(s,"".concat(l,"-item-icon, ").concat(u),{display:"inline-block"}),y(s,"&-tooltip",(o={pointerEvents:"none"},y(o,"".concat(l,"-item-icon, ").concat(u),{display:"none"}),y(o,"a, a:hover",{color:h}),o)),y(s,"".concat(l,"-item-group-title"),Object.assign(Object.assign({},rs),{paddingInline:x})),s))]},vM=function(e){var t,n,r=e.componentCls,i=e.fontSize,a=e.motionDurationSlow,o=e.motionDurationMid,s=e.motionEaseInOut,l=e.motionEaseOut,u=e.iconCls,c=e.controlHeightSM;return y(n={},"".concat(r,"-item, ").concat(r,"-submenu-title"),(y(t={position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:["border-color ".concat(a),"background ".concat(a),"padding ".concat(a," ").concat(s)].join(",")},"".concat(r,"-item-icon, ").concat(u),{minWidth:i,fontSize:i,transition:["font-size ".concat(o," ").concat(l),"margin ".concat(a," ").concat(s),"color ".concat(a)].join(","),"+ span":{marginInlineStart:c-i,opacity:1,transition:["opacity ".concat(a," ").concat(s),"margin ".concat(a),"color ".concat(a)].join(",")}}),y(t,"".concat(r,"-item-icon"),Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}})),y(t,"&".concat(r,"-item-only-child"),y({},"> ".concat(u,", > ").concat(r,"-item-icon"),{marginInlineEnd:0})),t)),y(n,"".concat(r,"-item-disabled, ").concat(r,"-submenu-disabled"),y({background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"}},"> ".concat(r,"-submenu-title"),{color:"inherit !important",cursor:"not-allowed"})),n},mM=function(e){var t,n=e.componentCls,r=e.motionDurationSlow,i=e.motionEaseInOut,a=e.borderRadius,o=e.menuArrowSize,s=e.menuArrowOffset;return y({},"".concat(n,"-submenu"),(y(t={},"&-expand-icon, &-arrow",{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:o,color:"currentcolor",transform:"translateY(-50%)",transition:"transform ".concat(r," ").concat(i,", opacity ").concat(r)}),y(t,"&-arrow",{"&::before, &::after":{position:"absolute",width:.6*o,height:.15*o,backgroundColor:"currentcolor",borderRadius:a,transition:["background ".concat(r," ").concat(i),"transform ".concat(r," ").concat(i),"top ".concat(r," ").concat(i),"color ".concat(r," ").concat(i)].join(","),content:'""'},"&::before":{transform:"rotate(45deg) translateY(-".concat(s,")")},"&::after":{transform:"rotate(-45deg) translateY(".concat(s,")")}}),t))},gM=function(e){var t,n,r,i,a=e.antCls,o=e.componentCls,s=e.fontSize,l=e.motionDurationSlow,u=e.motionDurationMid,c=e.motionEaseInOut,h=e.lineHeight,d=e.paddingXS,f=e.padding,p=e.colorSplit,v=e.lineWidth,m=e.zIndexPopup,g=e.borderRadiusLG,b=e.radiusSubMenuItem,_=e.menuArrowSize,x=e.menuArrowOffset,E=e.lineType,w=e.menuPanelMaskInset;return[y({"":y({},"".concat(o),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),y({},"&-hidden",{display:"none"})))},"".concat(o,"-submenu-hidden"),{display:"none"}),y({},o,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},is(e)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(t={marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:"width ".concat(l," cubic-bezier(0.2, 0, 0, 1) 0s")},y(t,"ul, ol",{margin:0,padding:0,listStyle:"none"}),y(t,"&-overflow",y({display:"flex"},"".concat(o,"-item"),{flex:"none"})),y(t,"".concat(o,"-item, ").concat(o,"-submenu, ").concat(o,"-submenu-title"),{borderRadius:e.radiusItem}),y(t,"".concat(o,"-item-group-title"),{padding:"".concat(d,"px ").concat(f,"px"),fontSize:s,lineHeight:h,transition:"all ".concat(l)}),y(t,"&-horizontal ".concat(o,"-submenu"),{transition:["border-color ".concat(l," ").concat(c),"background ".concat(l," ").concat(c)].join(",")}),y(t,"".concat(o,"-submenu, ").concat(o,"-submenu-inline"),{transition:["border-color ".concat(l," ").concat(c),"background ".concat(l," ").concat(c),"padding ".concat(u," ").concat(c)].join(",")}),y(t,"".concat(o,"-submenu ").concat(o,"-sub"),{cursor:"initial",transition:["background ".concat(l," ").concat(c),"padding ".concat(l," ").concat(c)].join(",")}),y(t,"".concat(o,"-title-content"),{transition:"color ".concat(l)}),y(t,"".concat(o,"-item a"),{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}}),y(t,"".concat(o,"-item-divider"),{overflow:"hidden",lineHeight:0,borderColor:p,borderStyle:E,borderWidth:0,borderTopWidth:v,marginBlock:v,padding:0,"&-dashed":{borderStyle:"dashed"}}),t)),vM(e)),(r={},y(r,"".concat(o,"-item-group"),y({},"".concat(o,"-item-group-list"),y({margin:0,padding:0},"".concat(o,"-item, ").concat(o,"-submenu-title"),{paddingInline:"".concat(2*s,"px ").concat(f,"px")}))),y(r,"&-submenu",y({"&-popup":{position:"absolute",zIndex:m,background:"transparent",borderRadius:g,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:"".concat(w,"px 0 0"),zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:w}},"> ".concat(o),Object.assign(Object.assign(Object.assign({borderRadius:g},vM(e)),mM(e)),(n={},y(n,"".concat(o,"-item, ").concat(o,"-submenu > ").concat(o,"-submenu-title"),{borderRadius:b}),y(n,"".concat(o,"-submenu-title::after"),{transition:"transform ".concat(l," ").concat(c)}),n)))),r)),mM(e)),(i={},y(i,"&-inline-collapsed ".concat(o,"-submenu-arrow,\n        &-inline ").concat(o,"-submenu-arrow"),{"&::before":{transform:"rotate(-45deg) translateX(".concat(x,")")},"&::after":{transform:"rotate(45deg) translateX(-".concat(x,")")}}),y(i,"".concat(o,"-submenu-open").concat(o,"-submenu-inline > ").concat(o,"-submenu-title > ").concat(o,"-submenu-arrow"),{transform:"translateY(-".concat(.2*_,"px)"),"&::after":{transform:"rotate(-45deg) translateX(-".concat(x,")")},"&::before":{transform:"rotate(45deg) translateX(".concat(x,")")}}),i))),y({},"".concat(a,"-layout-header"),y({},o,{lineHeight:"inherit"}))]},yM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},bM=a.createContext(null),_M=function(e){var t=e.children,n=yM(e,["children"]),r=a.useContext(bM),i=a.useMemo((function(){return Object.assign(Object.assign({},r),n)}),[r,n.prefixCls,n.mode,n.selectable]);return a.createElement(bM.Provider,{value:i},t)},xM=bM,EM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},wM=function(e){var t=e.prefixCls,n=e.className,r=e.dashed,i=EM(e,["prefixCls","className","dashed"]),o=(0,a.useContext(Ra).getPrefixCls)("menu",t),s=Wa()(y({},"".concat(o,"-item-divider-dashed"),!!r),n);return a.createElement(XP,Object.assign({className:s},i))},TM=a.createContext({});!function(){var e=0}();var SM=(0,a.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),kM=function(e){var t,n,r=e.className,i=e.children,o=e.icon,s=e.title,l=e.danger,u=a.useContext(SM),c=u.prefixCls,h=u.firstLevel,d=u.direction,f=u.disableMenuItemTitleTooltip,p=u.inlineCollapsed,v=a.useContext(TM).siderCollapsed,m=s;"undefined"===typeof s?m=h?i:"":!1===s&&(m="");var g={title:m};v||p||(g.title=null,g.open=!1);var b=Yn(i).length,_=a.createElement(zI,Object.assign({},Ys(e,["title","icon","danger"]),{className:Wa()((t={},y(t,"".concat(c,"-item-danger"),l),y(t,"".concat(c,"-item-only-child"),1===(o?b+1:b)),t),r),title:"string"===typeof s?s:void 0}),Zs(o,{className:Wa()(qs(o)?null===(n=o.props)||void 0===n?void 0:n.className:"","".concat(c,"-item-icon"))}),function(e){var t=a.createElement("span",{className:"".concat(c,"-title-content")},i);return(!o||qs(i)&&"span"===i.type)&&i&&e&&h&&"string"===typeof i?a.createElement("div",{className:"".concat(c,"-inline-collapsed-noicon")},i.charAt(0)):t}(p));return f||(_=a.createElement(xA,Object.assign({},g,{placement:"rtl"===d?"left":"right",overlayClassName:"".concat(c,"-inline-collapsed-tooltip")}),_)),_},CM=function(e){var t,n,r=e.popupClassName,i=e.icon,o=e.title,s=e.theme,l=a.useContext(SM),u=l.prefixCls,c=l.inlineCollapsed,h=l.theme,d=l.mode,f=sI();if(i){var p=qs(o)&&"span"===o.type;n=a.createElement(a.Fragment,null,Zs(i,{className:Wa()(qs(i)?null===(t=i.props)||void 0===t?void 0:t.className:"","".concat(u,"-item-icon"))}),p?o:a.createElement("span",{className:"".concat(u,"-title-content")},o))}else n=c&&!f.length&&o&&"string"===typeof o?a.createElement("div",{className:"".concat(u,"-inline-collapsed-noicon")},o.charAt(0)):a.createElement("span",{className:"".concat(u,"-title-content")},o);var v=a.useMemo((function(){return Object.assign(Object.assign({},l),{firstLevel:!1})}),[l]),m="horizontal"===d?[0,8]:[10,0];return a.createElement(SM.Provider,{value:v},a.createElement(BP,Object.assign({popupOffset:m},Ys(e,["icon"]),{title:n,popupClassName:Wa()(u,r,"".concat(u,"-").concat(s||h))})))},AM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function IM(e){return(e||[]).map((function(e,t){if(e&&"object"===typeof e){var n=e,r=n.label,i=n.children,o=n.key,s=n.type,l=AM(n,["label","children","key","type"]),u=null!==o&&void 0!==o?o:"tmp-".concat(t);return i||"group"===s?"group"===s?a.createElement(WP,Object.assign({key:u},l,{title:r}),IM(i)):a.createElement(CM,Object.assign({key:u},l,{title:r}),IM(i)):"divider"===s?a.createElement(wM,Object.assign({key:u},l)):a.createElement(kM,Object.assign({key:u},l),r)}return null})).filter((function(e){return e}))}function OM(e){return a.useMemo((function(){return e?IM(e):e}),[e])}var PM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},MM=(0,a.forwardRef)((function(e,t){var n,r,i=a.useContext(xM),o=i||{},s=a.useContext(Ra),l=s.getPrefixCls,u=s.getPopupContainer,c=s.direction,h=l(),d=e.prefixCls,f=e.className,p=e.theme,v=void 0===p?"light":p,m=e.expandIcon,g=e._internalDisableMenuItemTitleTooltip,y=e.inlineCollapsed,b=e.siderCollapsed,_=e.items,x=e.children,E=e.rootClassName,w=e.mode,T=e.selectable,S=e.onClick,k=Ys(PM(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),["collapsedWidth"]),C=OM(_)||x;null===(n=o.validator)||void 0===n||n.call(o,{mode:w});var A,I=ph((function(){var e;null===S||void 0===S||S.apply(void 0,arguments),null===(e=o.onClick)||void 0===e||e.call(o)})),O=o.mode||w,P=null!==T&&void 0!==T?T:o.selectable,M=a.useMemo((function(){return void 0!==b?b:y}),[y,b]),R={horizontal:{motionName:"".concat(h,"-slide-up")},inline:mu(h),other:{motionName:"".concat(h,"-zoom-big")}},N=l("menu",d||o.prefixCls),D=function(e,t){var n=rl("Menu",(function(e,n){var r=n.overrideComponentToken;if(!1===t)return[];var i=e.colorBgElevated,a=e.colorPrimary,o=e.colorError,s=e.colorErrorHover,l=e.colorTextLightSolid,u=e.controlHeightLG,c=e.fontSize/7*5,h=el(e,{menuItemHeight:u,menuItemPaddingInline:e.margin,menuArrowSize:c,menuHorizontalHeight:1.15*u,menuArrowOffset:"".concat(.25*c,"px"),menuPanelMaskInset:-7,menuSubMenuBg:i}),d=new va(l).setAlpha(.65).toRgbString(),f=el(h,{colorItemText:d,colorItemTextHover:l,colorGroupTitle:d,colorItemTextSelected:l,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:a,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new va(l).setAlpha(.25).toRgbString(),colorDangerItemText:o,colorDangerItemTextHover:s,colorDangerItemTextSelected:l,colorDangerItemBgActive:o,colorDangerItemBgSelected:o,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:l,colorItemBgSelectedHorizontal:a},Object.assign({},r));return[gM(h),uM(h),pM(h),dM(h,"light"),dM(f,"dark"),cM(h),QP(h),lM(h,"slide-up"),lM(h,"slide-down"),vc(h,"zoom-big")]}),(function(e){var t=e.colorPrimary,n=e.colorError,r=e.colorTextDisabled,i=e.colorErrorBg,a=e.colorText,o=e.colorTextDescription,s=e.colorBgContainer,l=e.colorFillAlter,u=e.colorFillContent,c=e.lineWidth,h=e.lineWidthBold,d=e.controlItemBgActive,f=e.colorBgTextHover;return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,colorItemText:a,colorItemTextHover:a,colorItemTextHoverHorizontal:t,colorGroupTitle:o,colorItemTextSelected:t,colorItemTextSelectedHorizontal:t,colorItemBg:s,colorItemBgHover:f,colorItemBgActive:u,colorSubItemBg:l,colorItemBgSelected:d,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:h,colorActiveBarBorderSize:c,colorItemTextDisabled:r,colorDangerItemText:n,colorDangerItemTextHover:n,colorDangerItemTextSelected:n,colorDangerItemBgActive:i,colorDangerItemBgSelected:i,itemMarginInline:e.marginXXS}}));return n(e)}(N,!i),L=It(D,2),F=L[0],B=L[1],U=Wa()("".concat(N,"-").concat(v),f);if("function"===typeof m)A=m;else{var H=m||o.expandIcon;A=Zs(H,{className:Wa()("".concat(N,"-submenu-expand-icon"),null===(r=null===H||void 0===H?void 0:H.props)||void 0===r?void 0:r.className)})}var j=a.useMemo((function(){return{prefixCls:N,inlineCollapsed:M||!1,direction:c,firstLevel:!0,theme:v,mode:O,disableMenuItemTitleTooltip:g}}),[N,M,c,g,v]);return F(a.createElement(xM.Provider,{value:null},a.createElement(SM.Provider,{value:j},a.createElement(KP,Object.assign({getPopupContainer:u,overflowedIndicator:a.createElement(ZP,null),overflowedIndicatorPopupClassName:Wa()(N,"".concat(N,"-").concat(v)),mode:O,selectable:P,onClick:I},k,{inlineCollapsed:M,className:U,prefixCls:N,direction:c,defaultMotions:R,expandIcon:A,ref:t,rootClassName:Wa()(E,B)}),C))))})),RM=MM,NM=(0,a.forwardRef)((function(e,t){var n=(0,a.useRef)(null),r=a.useContext(TM);return(0,a.useImperativeHandle)(t,(function(){return{menu:n.current,focus:function(e){var t;null===(t=n.current)||void 0===t||t.focus(e)}}})),a.createElement(RM,Object.assign({ref:n},e,r))}));NM.Item=kM,NM.SubMenu=CM,NM.Divider=wM,NM.ItemGroup=WP;var DM=NM,LM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},FM=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:LM}))};var BM=a.forwardRef(FM),UM=Ru.ESC,HM=Ru.TAB;var jM=(0,a.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,i=e.prefixCls,o=(0,a.useMemo)((function(){return"function"===typeof n?n():n}),[n]),s=qa(t,null===o||void 0===o?void 0:o.ref);return a.createElement(a.Fragment,null,r&&a.createElement("div",{className:"".concat(i,"-arrow")}),a.cloneElement(o,{ref:Za(o)?s:void 0}))})),zM={adjustX:1,adjustY:1},VM=[0,0],GM={topLeft:{points:["bl","tl"],overflow:zM,offset:[0,-4],targetOffset:VM},top:{points:["bc","tc"],overflow:zM,offset:[0,-4],targetOffset:VM},topRight:{points:["br","tr"],overflow:zM,offset:[0,-4],targetOffset:VM},bottomLeft:{points:["tl","bl"],overflow:zM,offset:[0,4],targetOffset:VM},bottom:{points:["tc","bc"],overflow:zM,offset:[0,4],targetOffset:VM},bottomRight:{points:["tr","br"],overflow:zM,offset:[0,4],targetOffset:VM}},WM=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function XM(e,t){var n,r=e.arrow,i=void 0!==r&&r,o=e.prefixCls,s=void 0===o?"rc-dropdown":o,l=e.transitionName,u=e.animation,c=e.align,h=e.placement,d=void 0===h?"bottomLeft":h,f=e.placements,p=void 0===f?GM:f,v=e.getPopupContainer,m=e.showAction,g=e.hideAction,b=e.overlayClassName,_=e.overlayStyle,x=e.visible,E=e.trigger,w=void 0===E?["hover"]:E,T=e.autoFocus,S=e.overlay,k=e.children,C=e.onVisibleChange,A=Wn(e,WM),I=It(a.useState(),2),O=I[0],P=I[1],M="visible"in e?x:O,R=a.useRef(null),N=a.useRef(null),D=a.useRef(null);a.useImperativeHandle(t,(function(){return R.current}));var L=function(e){P(e),null===C||void 0===C||C(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,i=e.autoFocus,o=e.overlayRef,s=a.useRef(!1),l=function(){var e,i;t&&(null===(e=n.current)||void 0===e||null===(i=e.focus)||void 0===i||i.call(e),null===r||void 0===r||r(!1))},u=function(){var e;return!(null===(e=o.current)||void 0===e||!e.focus)&&(o.current.focus(),s.current=!0,!0)},c=function(e){switch(e.keyCode){case UM:l();break;case HM:var t=!1;s.current||(t=u()),t?e.preventDefault():l()}};a.useEffect((function(){return t?(window.addEventListener("keydown",c),i&&Do(u,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[t])}({visible:M,triggerRef:D,onVisibleChange:L,autoFocus:T,overlayRef:N});var F=function(){return a.createElement(jM,{ref:N,overlay:S,prefixCls:s,arrow:i})},B=a.cloneElement(k,{className:Wa()(null===(n=k.props)||void 0===n?void 0:n.className,M&&function(){var t=e.openClassName;return void 0!==t?t:"".concat(s,"-open")}()),ref:Za(k)?qa(D,k.ref):void 0}),U=g;return U||-1===w.indexOf("contextMenu")||(U=["click"]),a.createElement(HC,Ft({builtinPlacements:p},A,{prefixCls:s,ref:R,popupClassName:Wa()(b,y({},"".concat(s,"-show-arrow"),i)),popupStyle:_,action:w,showAction:m,hideAction:U,popupPlacement:d,popupAlign:c,popupTransitionName:l,popupAnimation:u,popupVisible:M,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof S?F:F(),onPopupVisibleChange:L,onPopupClick:function(t){var n=e.onOverlayClick;P(!1),n&&n(t)},getPopupContainer:v}),B)}var YM=a.forwardRef(XM);var KM=function(){var e=It(a.useState(!1),2),t=e[0],n=e[1];return a.useEffect((function(){n(function(){if(!ec())return!1;if(void 0!==$u)return $u;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),$u=1===e.scrollHeight,document.body.removeChild(e),$u}())}),[]),t};function qM(e){var t=e.className,n=e.direction,r=e.index,i=e.marginDirection,o=e.children,s=e.split,l=e.wrap,u=a.useContext(ZM),c=u.horizontalSize,h=u.verticalSize,d=u.latestIndex,f={};return u.supportFlexGap||("vertical"===n?r<d&&(f={marginBottom:c/(s?2:1)}):f=Object.assign(Object.assign({},r<d&&y({},i,c/(s?2:1))),l&&{paddingBottom:h})),null===o||void 0===o?null:a.createElement(a.Fragment,null,a.createElement("div",{className:t,style:f},o),r<d&&s&&a.createElement("span",{className:"".concat(t,"-split"),style:f},s))}var $M=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ZM=a.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),QM={small:8,middle:16,large:24};var JM=a.forwardRef((function(e,t){var n,r=a.useContext(Ra),i=r.getPrefixCls,o=r.space,s=r.direction,l=e.size,u=void 0===l?(null===o||void 0===o?void 0:o.size)||"small":l,c=e.align,h=e.className,d=e.rootClassName,f=e.children,p=e.direction,v=void 0===p?"horizontal":p,m=e.prefixCls,g=e.split,b=e.style,_=e.wrap,x=void 0!==_&&_,E=$M(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap"]),w=KM(),T=It(a.useMemo((function(){return(Array.isArray(u)?u:[u,u]).map((function(e){return function(e){return"string"===typeof e?QM[e]:e||0}(e)}))}),[u]),2),S=T[0],k=T[1],C=Yn(f,{keepEmpty:!0}),A=void 0===c&&"horizontal"===v?"center":c,I=i("space",m),O=It(fl(I),2),P=O[0],M=O[1],R=Wa()(I,M,"".concat(I,"-").concat(v),(y(n={},"".concat(I,"-rtl"),"rtl"===s),y(n,"".concat(I,"-align-").concat(A),A),n),h,d),N="".concat(I,"-item"),D="rtl"===s?"marginLeft":"marginRight",L=0,F=C.map((function(e,t){null!==e&&void 0!==e&&(L=t);var n=e&&e.key||"".concat(N,"-").concat(t);return a.createElement(qM,{className:N,key:n,direction:v,index:t,marginDirection:D,split:g,wrap:x},e)})),B=a.useMemo((function(){return{horizontalSize:S,verticalSize:k,latestIndex:L,supportFlexGap:w}}),[S,k,L,w]);if(0===C.length)return null;var U={};return x&&(U.flexWrap="wrap",w||(U.marginBottom=-k)),w&&(U.columnGap=S,U.rowGap=k),P(a.createElement("div",Object.assign({ref:t,className:R,style:Object.assign(Object.assign({},U),b)},E),a.createElement(ZM.Provider,{value:B},F)))}));var eR=JM;eR.Compact=bl;var tR=eR,nR=new Fn("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),rR=new Fn("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),iR=new Fn("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),aR=new Fn("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),oR=new Fn("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),sR=new Fn("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),lR={"move-up":{inKeyframes:new Fn("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new Fn("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:nR,outKeyframes:rR},"move-left":{inKeyframes:iR,outKeyframes:aR},"move-right":{inKeyframes:oR,outKeyframes:sR}},uR=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),a=lR[t],o=a.inKeyframes,s=a.outKeyframes;return[ic(i,o,s,e.motionDurationMid),(n={},y(n,"\n        ".concat(i,"-enter,\n        ").concat(i,"-appear\n      "),{opacity:0,animationTimingFunction:e.motionEaseOutCirc}),y(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInOutCirc}),n)]},cR=function(e){var t=e.componentCls,n=e.menuCls,r=e.colorError,i=e.colorTextLightSolid,a="".concat(n,"-item");return y({},"".concat(t,", ").concat(t,"-menu-submenu"),y({},"".concat(n," ").concat(a),y({},"&".concat(a,"-danger:not(").concat(a,"-disabled)"),{color:r,"&:hover":{color:i,backgroundColor:r}})))},hR=function(e){var t,n,r,i,a=e.componentCls,o=e.menuCls,s=e.zIndexPopup,l=e.dropdownArrowDistance,u=e.sizePopupArrow,c=e.antCls,h=e.iconCls,d=e.motionDurationMid,f=e.dropdownPaddingVertical,p=e.fontSize,v=e.dropdownEdgeChildPadding,m=e.colorTextDisabled,g=e.fontSizeIcon,b=e.controlPaddingHorizontal,_=e.colorBgElevated;return[y({},a,Object.assign(Object.assign({},is(e)),(n={position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:s,display:"block","&::before":{position:"absolute",insetBlock:u/2-l,zIndex:-9999,opacity:1e-4,content:'""'}},y(n,"&-trigger".concat(c,"-btn > ").concat(h,"-down"),{fontSize:g,transform:"none"}),y(n,"".concat(a,"-wrap"),(t={position:"relative"},y(t,"".concat(c,"-btn > ").concat(h,"-down"),{fontSize:g}),y(t,"".concat(h,"-down::before"),{transition:"transform ".concat(d)}),t)),y(n,"".concat(a,"-wrap-open"),y({},"".concat(h,"-down::before"),{transform:"rotate(180deg)"})),y(n,"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ",{display:"none"}),y(n,"&".concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(a,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(a,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(a,"-placement-bottom,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(a,"-placement-bottom,\n          &").concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(a,"-placement-bottomRight,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(a,"-placement-bottomRight"),{animationName:JP}),y(n,"&".concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(a,"-placement-topLeft,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(a,"-placement-topLeft,\n          &").concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(a,"-placement-top,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(a,"-placement-top,\n          &").concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(a,"-placement-topRight,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(a,"-placement-topRight"),{animationName:tM}),y(n,"&".concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(a,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(a,"-placement-bottom,\n          &").concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(a,"-placement-bottomRight"),{animationName:eM}),y(n,"&".concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(a,"-placement-topLeft,\n          &").concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(a,"-placement-top,\n          &").concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(a,"-placement-topRight"),{animationName:nM}),n))),JC(e,{colorBg:_,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),(i={},y(i,"".concat(a," ").concat(o),{position:"relative",margin:0}),y(i,"".concat(o,"-submenu-popup"),{position:"absolute",zIndex:s,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}}),y(i,"".concat(a,", ").concat(a,"-menu-submenu"),y({},o,Object.assign(Object.assign({padding:v,listStyleType:"none",backgroundColor:_,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},ls(e)),(r={},y(r,"".concat(o,"-item-group-title"),{padding:"".concat(f,"px ").concat(b,"px"),color:e.colorTextDescription,transition:"all ".concat(d)}),y(r,"".concat(o,"-item"),{position:"relative",display:"flex",alignItems:"center"}),y(r,"".concat(o,"-item-icon"),{minWidth:p,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM}),y(r,"".concat(o,"-title-content"),{flex:"auto","> a":{color:"inherit",transition:"all ".concat(d),"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}}),y(r,"".concat(o,"-item, ").concat(o,"-submenu-title"),Object.assign(Object.assign(y({clear:"both",margin:0,padding:"".concat(f,"px ").concat(b,"px"),color:e.colorText,fontWeight:"normal",fontSize:p,lineHeight:e.lineHeight,cursor:"pointer",transition:"all ".concat(d),borderRadius:e.borderRadiusSM},"&:hover, &-active",{backgroundColor:e.controlItemBgHover}),ls(e)),y({"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:m,cursor:"not-allowed","&:hover":{color:m,backgroundColor:_,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:"".concat(e.marginXXS,"px 0"),overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit}},"".concat(a,"-menu-submenu-expand-icon"),y({position:"absolute",insetInlineEnd:e.paddingXS},"".concat(a,"-menu-submenu-arrow-icon"),{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:g,fontStyle:"normal"})))),y(r,"".concat(o,"-item-group-list"),{margin:"0 ".concat(e.marginXS,"px"),padding:0,listStyle:"none"}),y(r,"".concat(o,"-submenu-title"),{paddingInlineEnd:b+e.fontSizeSM}),y(r,"".concat(o,"-submenu-vertical"),{position:"relative"}),y(r,"".concat(o,"-submenu").concat(o,"-submenu-disabled ").concat(a,"-menu-submenu-title"),y({},"&, ".concat(a,"-menu-submenu-arrow-icon"),{color:m,backgroundColor:_,cursor:"not-allowed"})),y(r,"".concat(o,"-submenu-selected ").concat(a,"-menu-submenu-title"),{color:e.colorPrimary}),r)))),i),[lM(e,"slide-up"),lM(e,"slide-down"),uR(e,"move-up"),uR(e,"move-down"),vc(e,"zoom-big")]]},dR=rl("Dropdown",(function(e,t){var n=t.rootPrefixCls,r=e.marginXXS,i=e.sizePopupArrow,a=e.controlHeight,o=e.fontSize,s=e.lineHeight,l=e.paddingXXS,u=e.componentCls,c=(a-o*s)/2,h=ZC({contentRadius:e.borderRadiusLG}).dropdownArrowOffset,d=el(e,{menuCls:"".concat(u,"-menu"),rootPrefixCls:n,dropdownArrowDistance:i/2+r,dropdownArrowOffset:h,dropdownPaddingVertical:c,dropdownEdgeChildPadding:l});return[hR(d),cR(d)]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+50}})),fR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},pR=function(e){var t=a.useContext(Ra),n=t.getPopupContainer,r=t.getPrefixCls,i=t.direction,o=e.prefixCls,s=e.type,l=void 0===s?"default":s,u=e.danger,c=e.disabled,h=e.loading,d=e.onClick,f=e.htmlType,p=e.children,v=e.className,m=e.menu,g=e.arrow,y=e.autoFocus,b=e.overlay,_=e.trigger,x=e.align,E=e.open,w=e.onOpenChange,T=e.placement,S=e.getPopupContainer,k=e.href,C=e.icon,A=void 0===C?a.createElement(ZP,null):C,I=e.title,O=e.buttonsRender,P=void 0===O?function(e){return e}:O,M=e.mouseEnterDelay,R=e.mouseLeaveDelay,N=e.overlayClassName,D=e.overlayStyle,L=e.destroyPopupOnHide,F=e.dropdownRender,B=fR(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),U=r("dropdown",o),H="".concat(U,"-button"),j=It(dR(U),2),z=j[0],V=j[1],G={menu:m,arrow:g,autoFocus:y,align:x,disabled:c,trigger:c?[]:_,onOpenChange:w,getPopupContainer:S||n,mouseEnterDelay:M,mouseLeaveDelay:R,overlayClassName:N,overlayStyle:D,destroyPopupOnHide:L,dropdownRender:F},W=ml(U,i),X=W.compactSize,Y=W.compactItemClassnames,K=Wa()(H,Y,v,V);"overlay"in e&&(G.overlay=b),"open"in e&&(G.open=E),G.placement="placement"in e?T:"rtl"===i?"bottomLeft":"bottomRight";var q=It(P([a.createElement(su,{type:l,danger:u,disabled:c,loading:h,onClick:d,htmlType:f,href:k,title:I},p),a.createElement(su,{type:l,danger:u,icon:A})]),2),$=q[0],Z=q[1];return z(a.createElement(tR.Compact,Object.assign({className:K,size:X,block:!0},B),$,a.createElement(bR,Object.assign({},G),Z)))};pR.__ANT_BUTTON=!0;var vR=function(e){var t=e.menu,n=e.arrow,r=e.prefixCls,i=e.children,o=e.trigger,s=e.disabled,l=e.dropdownRender,u=e.getPopupContainer,c=e.overlayClassName,h=e.rootClassName,d=e.open,f=e.onOpenChange,p=e.visible,v=e.onVisibleChange,m=e.mouseEnterDelay,g=void 0===m?.15:m,b=e.mouseLeaveDelay,_=void 0===b?.1:b,x=e.autoAdjustOverflow,E=void 0===x||x,w=e.placement,T=void 0===w?"":w,S=e.overlay,k=e.transitionName,C=a.useContext(Ra),A=C.getPopupContainer,I=C.getPrefixCls,O=C.direction;var P=a.useMemo((function(){var e=I();return void 0!==k?k:T.includes("top")?"".concat(e,"-slide-down"):"".concat(e,"-slide-up")}),[I,T,k]),M=a.useMemo((function(){return T?T.includes("Center")?T.slice(0,T.indexOf("Center")):T:"rtl"===O?"bottomRight":"bottomLeft"}),[T,O]);var R,N=I("dropdown",r),D=It(dR(N),2),L=D[0],F=D[1],B=cA.useToken().token,U=a.Children.only(i),H=Zs(U,{className:Wa()("".concat(N,"-trigger"),y({},"".concat(N,"-rtl"),"rtl"===O),U.props.className),disabled:s}),j=s?[]:o;j&&j.includes("contextMenu")&&(R=!0);var z=It(mh(!1,{value:null!==d&&void 0!==d?d:p}),2),V=z[0],G=z[1],W=ph((function(e){null===f||void 0===f||f(e),null===v||void 0===v||v(e),G(e)})),X=Wa()(c,h,F,y({},"".concat(N,"-rtl"),"rtl"===O)),Y=rA({arrowPointAtCenter:"object"===typeof n&&n.pointAtCenter,autoAdjustOverflow:E,offset:B.marginXXS,arrowWidth:n?B.sizePopupArrow:0,borderRadius:B.borderRadius}),K=a.useCallback((function(){G(!1)}),[]);return L(a.createElement(YM,Object.assign({alignPoint:R},Ys(e,["rootClassName"]),{mouseEnterDelay:g,mouseLeaveDelay:_,visible:V,builtinPlacements:Y,arrow:!!n,overlayClassName:X,prefixCls:N,getPopupContainer:u||A,transitionName:P,trigger:j,overlay:function(){var e;return e=(null===t||void 0===t?void 0:t.items)?a.createElement(DM,Object.assign({},t)):"function"===typeof S?S():S,l&&(e=l(e)),e=a.Children.only("string"===typeof e?a.createElement("span",null,e):e),a.createElement(_M,{prefixCls:"".concat(N,"-menu"),expandIcon:a.createElement("span",{className:"".concat(N,"-menu-submenu-arrow")},a.createElement(BM,{className:"".concat(N,"-menu-submenu-arrow-icon")})),mode:"vertical",selectable:!1,onClick:K,validator:function(e){e.mode}},a.createElement(gl,null,e))},placement:M,onVisibleChange:W}),H))};vR.Button=pR;var mR=function(e,t,n,r){return function(i){var o=i.prefixCls,s=i.style,l=a.useRef(null),u=It(a.useState(0),2),c=u[0],h=u[1],d=It(a.useState(0),2),f=d[0],p=d[1],v=It(mh(!1,{value:i.open}),2),m=v[0],g=v[1],y=(0,a.useContext(Ra).getPrefixCls)(t||"select",o);a.useEffect((function(){if(g(!0),"undefined"!==typeof ResizeObserver){var e=new ResizeObserver((function(e){var t=e[0].target;h(t.offsetHeight+8),p(t.offsetWidth)})),t=setInterval((function(){var r,i=n?".".concat(n(y)):".".concat(y,"-dropdown"),a=null===(r=l.current)||void 0===r?void 0:r.querySelector(i);a&&(clearInterval(t),e.observe(a))}),10);return function(){clearInterval(t),e.disconnect()}}}),[]);var b=Object.assign(Object.assign({},i),{style:Object.assign(Object.assign({},s),{margin:0}),open:m,visible:m,getPopupContainer:function(){return l.current}});return r&&(b=r(b)),a.createElement(gs,{theme:{token:{motion:!1}}},a.createElement("div",{ref:l,style:{paddingBottom:c,position:"relative",minWidth:f}},a.createElement(e,Object.assign({},b))))}}(vR,"dropdown",(function(e){return e}),(function(e){return Object.assign(Object.assign({},e),{align:{overflow:{adjustX:!1,adjustY:!1}}})}));vR._InternalPanelDoNotUseOrYouWillBeFired=function(e){return a.createElement(mR,Object.assign({},e),a.createElement("span",null))};var gR,yR,bR=vR,_R=bR,xR=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.menuData=[],r.handleMenuClick=function(e){var t=parseInt(e.key),n=r.menuData[t].value;r.props.onChange&&r.props.onChange(n)},r.onOpenChange=function(e){r.setState({opened:e})},r.onChange=function(e){var t=e.target.value;r.setState({value:t})},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue,opened:!1},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"getMenu",value:function(){this.menuData=[];var e=this.menuData;return this.props.getItems&&(e=this.props.getItems()),(!e||e.length<=0)&&(e=this.props.items),(!e||e.length<=0)&&(e=[]),this.menuData=e,(0,hf.jsx)(DM,{onClick:this.handleMenuClick,children:e.map((function(e,t){return(0,hf.jsx)(DM.Item,{children:(0,hf.jsx)("div",{children:e.label})},t)}))})}},{key:"getMenu2",value:function(){this.menuData=[];var e=this.menuData;this.props.getItems&&(e=this.props.getItems()),(!e||e.length<=0)&&(e=this.props.items),(!e||e.length<=0)&&(e=[]),this.menuData=e;var t=[];return e.forEach((function(e,n){t.push({label:e.label,key:n})})),t}},{key:"getSelectedLabel",value:function(){for(var e=0,t=this.menuData.length;e<t;e++)if(this.menuData[e].value===this.state.value)return this.menuData[e].label;if(this.props.defaultValue)for(var n=0,r=this.menuData.length;n<r;n++)if(this.menuData[n].value===this.props.defaultValue)return this.menuData[n].label;return this.props.displayTextWhenEmpty||"\u8bf7\u9009\u62e9"}},{key:"render",value:function(){this.state.value,this.getMenu();var e=this.getSelectedLabel(),t=this.getMenu2();return this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsx)(_R,{menu:{items:t,onClick:this.handleMenuClick},trigger:["click"],onOpenChange:this.onOpenChange,children:(0,hf.jsxs)("div",{className:"dropdown-input",children:[(0,hf.jsx)(mT,{type:this.state.opened?"icon-arrow-down-filling":"icon-arrow-right-filling"}),(0,hf.jsx)("div",{className:"dropdown-label",children:e})]})})}):(0,hf.jsx)(_R,{menu:{items:t,onClick:this.handleMenuClick},trigger:["click"],onOpenChange:this.onOpenChange,children:(0,hf.jsxs)("div",{className:"dropdown-input",children:[(0,hf.jsx)(mT,{type:this.state.opened?"icon-arrow-down-filling":"icon-arrow-right-filling"}),(0,hf.jsx)("div",{className:"dropdown-label",children:e})]})})}}]),n}(a.Component),ER=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e){var t=r.props,n=t.booleanValues,i=t.onChange,a=r.state.value,o=!0,s=o=!(o=n?a===n[0]:!0===a);n&&(s=o?n[0]:n[1]),i&&i(s)},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.props,t=e.booleanIcons,n=e.booleanValues,r=this.state.value,i=(n?r===n[0]:!0===r)?t[0]:t[1];return(0,hf.jsxs)("div",{className:"boolean-input",onClick:this.onChange,children:[(0,hf.jsx)(mT,{type:i}),this.props.children]})}}]),n}(a.Component),wR=15,TR=256,SR=573,kR=256,CR=-2,AR=-5;function IR(e){return OR(e.map((function(e){var t=It(e,2),n=t[0],r=t[1];return new Array(n).fill(r,0,n)})))}function OR(e){return e.reduce((function(e,t){return e.concat(Array.isArray(t)?OR(t):t)}),[])}var PR=(gR=[0,1,2,3]).concat.apply(gR,Ie(IR([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]])));function MR(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var r,i,a,o=e.dyn_tree,s=e.stat_desc.static_tree,l=e.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=SR,r=0;r<l;r++)0!==o[2*r]?(n.heap[++n.heap_len]=u=r,n.depth[r]=0):o[2*r+1]=0;for(;n.heap_len<2;)o[2*(a=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[a]=0,n.opt_len--,s&&(n.static_len-=s[2*a+1]);for(e.max_code=u,r=Math.floor(n.heap_len/2);r>=1;r--)n.pqdownheap(o,r);a=l;do{r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(o,1),i=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=i,o[2*a]=o[2*r]+o[2*i],n.depth[a]=Math.max(n.depth[r],n.depth[i])+1,o[2*r+1]=o[2*i+1]=a,n.heap[1]=a++,n.pqdownheap(o,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,r,i,a,o,s,l=e.dyn_tree,u=e.stat_desc.static_tree,c=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,d=e.stat_desc.max_length,f=0;for(a=0;a<=wR;a++)t.bl_count[a]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<SR;n++)(a=l[2*l[2*(r=t.heap[n])+1]+1]+1)>d&&(a=d,f++),l[2*r+1]=a,r>e.max_code||(t.bl_count[a]++,o=0,r>=h&&(o=c[r-h]),s=l[2*r],t.opt_len+=s*(a+o),u&&(t.static_len+=s*(u[2*r+1]+o)));if(0!==f){do{for(a=d-1;0===t.bl_count[a];)a--;t.bl_count[a]--,t.bl_count[a+1]+=2,t.bl_count[d]--,f-=2}while(f>0);for(a=d;0!==a;a--)for(r=t.bl_count[a];0!==r;)(i=t.heap[--n])>e.max_code||(l[2*i+1]!=a&&(t.opt_len+=(a-l[2*i+1])*l[2*i],l[2*i+1]=a),r--)}}(n),function(e,n,r){var i,a,o,s=[],l=0;for(i=1;i<=wR;i++)s[i]=l=l+r[i-1]<<1;for(a=0;a<=n;a++)0!==(o=e[2*a+1])&&(e[2*a]=t(s[o]++,o))}(o,e.max_code,n.bl_count)}}function RR(e,t,n,r,i){var a=this;a.static_tree=e,a.extra_bits=t,a.extra_base=n,a.elems=r,a.max_length=i}MR._length_code=(yR=[0,1,2,3,4,5,6,7]).concat.apply(yR,Ie(IR([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]))),MR.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],MR.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],MR.d_code=function(e){return e<256?PR[e]:PR[256+(e>>>7)]},MR.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],MR.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],MR.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],MR.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var NR=IR([[144,8],[112,9],[24,7],[8,8]]);RR.static_ltree=OR([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((function(e,t){return[e,NR[t]]})));var DR=IR([[30,5]]);RR.static_dtree=OR([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((function(e,t){return[e,DR[t]]}))),RR.static_l_desc=new RR(RR.static_ltree,MR.extra_lbits,257,286,wR),RR.static_d_desc=new RR(RR.static_dtree,MR.extra_dbits,0,30,wR),RR.static_bl_desc=new RR(null,MR.extra_blbits,0,19,7);function LR(e,t,n,r,i){var a=this;a.good_length=e,a.max_lazy=t,a.nice_length=n,a.max_chain=r,a.func=i}var FR=[new LR(0,0,0,0,0),new LR(4,4,8,4,1),new LR(4,5,16,8,1),new LR(4,6,32,32,1),new LR(4,4,16,16,2),new LR(8,16,32,32,2),new LR(8,16,128,128,2),new LR(8,32,128,256,2),new LR(32,128,258,1024,2),new LR(32,258,258,4096,2)],BR=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],UR=113,HR=666,jR=258,zR=262;function VR(e,t,n,r){var i=e[2*t],a=e[2*n];return i<a||i==a&&r[t]<=r[n]}function GR(){var e,t,n,r,i,a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U=this,H=new MR,j=new MR,z=new MR;function V(){var e;for(e=0;e<286;e++)O[2*e]=0;for(e=0;e<30;e++)P[2*e]=0;for(e=0;e<19;e++)M[2*e]=0;O[512]=1,U.opt_len=U.static_len=0,N=D=0}function G(e,t){var n,r=-1,i=e[1],a=0,o=7,s=4;0===i&&(o=138,s=3),e[2*(t+1)+1]=65535;for(var l=0;l<=t;l++)n=i,i=e[2*(l+1)+1],++a<o&&n==i||(a<s?M[2*n]+=a:0!==n?(n!=r&&M[2*n]++,M[32]++):a<=10?M[34]++:M[36]++,a=0,r=n,0===i?(o=138,s=3):n==i?(o=6,s=3):(o=7,s=4))}function W(e){U.pending_buf[U.pending++]=e}function X(e){W(255&e),W(e>>>8&255)}function Y(e,t){var n,r=t;B>16-r?(X(F|=(n=e)<<B&65535),F=n>>>16-B,B+=r-16):(F|=e<<B&65535,B+=r)}function K(e,t){var n=2*e;Y(65535&t[n],65535&t[n+1])}function q(e,t){var n,r,i=-1,a=e[1],o=0,s=7,l=4;for(0===a&&(s=138,l=3),n=0;n<=t;n++)if(r=a,a=e[2*(n+1)+1],!(++o<s&&r==a)){if(o<l)do{K(r,M)}while(0!==--o);else 0!==r?(r!=i&&(K(r,M),o--),K(16,M),Y(o-3,2)):o<=10?(K(17,M),Y(o-3,3)):(K(18,M),Y(o-11,7));o=0,i=r,0===a?(s=138,l=3):r==a?(s=6,l=3):(s=7,l=4)}}function $(){16==B?(X(F),F=0,B=0):B>=8&&(W(255&F),F>>>=8,B-=8)}function Z(e,t){var n,r,i;if(U.dist_buf[N]=e,U.lc_buf[N]=255&t,N++,0===e?O[2*t]++:(D++,e--,O[2*(MR._length_code[t]+TR+1)]++,P[2*MR.d_code(e)]++),0===(8191&N)&&k>2){for(n=8*N,r=_-m,i=0;i<30;i++)n+=P[2*i]*(5+MR.extra_dbits[i]);if(n>>>=3,D<Math.floor(N/2)&&n<Math.floor(r/2))return!0}return N==R-1}function Q(e,t){var n,r,i,a,o=0;if(0!==N)do{n=U.dist_buf[o],r=U.lc_buf[o],o++,0===n?K(r,e):(K((i=MR._length_code[r])+TR+1,e),0!==(a=MR.extra_lbits[i])&&Y(r-=MR.base_length[i],a),n--,K(i=MR.d_code(n),t),0!==(a=MR.extra_dbits[i])&&Y(n-=MR.base_dist[i],a))}while(o<N);K(kR,e),L=e[513]}function J(){B>8?X(F):B>0&&W(255&F),F=0,B=0}function ee(e,t,n){Y(0+(n?1:0),3),function(e,t,n){J(),L=8,n&&(X(t),X(~t)),U.pending_buf.set(s.subarray(e,e+t),U.pending),U.pending+=t}(e,t,!0)}function te(e,t,n){var r,i,a=0;k>0?(H.build_tree(U),j.build_tree(U),a=function(){var e;for(G(O,H.max_code),G(P,j.max_code),z.build_tree(U),e=18;e>=3&&0===M[2*MR.bl_order[e]+1];e--);return U.opt_len+=3*(e+1)+5+5+4,e}(),r=U.opt_len+3+7>>>3,(i=U.static_len+3+7>>>3)<=r&&(r=i)):r=i=t+5,t+4<=r&&-1!=e?ee(e,t,n):i==r?(Y(2+(n?1:0),3),Q(RR.static_ltree,RR.static_dtree)):(Y(4+(n?1:0),3),function(e,t,n){var r;for(Y(e-257,5),Y(t-1,5),Y(n-4,4),r=0;r<n;r++)Y(M[2*MR.bl_order[r]+1],3);q(O,e-1),q(P,t-1)}(H.max_code+1,j.max_code+1,a+1),Q(O,P)),V(),n&&J()}function ne(t){te(m>=0?m:-1,_-m,t),m=_,e.flush_pending()}function re(){var t,n,r,a;do{if(0===(a=l-E-_)&&0===_&&0===E)a=i;else if(-1==a)a--;else if(_>=i+i-zR){s.set(s.subarray(i,i+i),0),x-=i,_-=i,m-=i,r=t=d;do{n=65535&c[--r],c[r]=n>=i?n-i:0}while(0!==--t);r=t=i;do{n=65535&u[--r],u[r]=n>=i?n-i:0}while(0!==--t);a+=i}if(0===e.avail_in)return;t=e.read_buf(s,_+E,a),(E+=t)>=3&&(h=((h=255&s[_])<<v^255&s[_+1])&p)}while(E<zR&&0!==e.avail_in)}function ie(e){var t,n,r=T,a=_,l=w,c=_>i-zR?_-(i-zR):0,h=I,d=o,f=_+jR,p=s[a+l-1],v=s[a+l];w>=A&&(r>>=2),h>E&&(h=E);do{if(s[(t=e)+l]==v&&s[t+l-1]==p&&s[t]==s[a]&&s[++t]==s[a+1]){a+=2,t++;do{}while(s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&s[++a]==s[++t]&&a<f);if(n=jR-(f-a),a=f-jR,n>l){if(x=e,l=n,n>=h)break;p=s[a+l-1],v=s[a+l]}}}while((e=65535&u[e&d])>c&&0!==--r);return l<=E?l:E}function ae(e){return e.total_in=e.total_out=0,e.msg=null,U.pending=0,U.pending_out=0,t=UR,r=0,H.dyn_tree=O,H.stat_desc=RR.static_l_desc,j.dyn_tree=P,j.stat_desc=RR.static_d_desc,z.dyn_tree=M,z.stat_desc=RR.static_bl_desc,F=0,B=0,L=8,V(),function(){l=2*i,c[d-1]=0;for(var e=0;e<d-1;e++)c[e]=0;S=FR[k].max_lazy,A=FR[k].good_length,I=FR[k].nice_length,T=FR[k].max_chain,_=0,m=0,E=0,g=w=2,b=0,h=0}(),0}U.depth=[],U.bl_count=[],U.heap=[],O=[],P=[],M=[],U.pqdownheap=function(e,t){for(var n=U.heap,r=n[t],i=t<<1;i<=U.heap_len&&(i<U.heap_len&&VR(e,n[i+1],n[i],U.depth)&&i++,!VR(e,r,n[i],U.depth));)n[t]=n[i],t=i,i<<=1;n[t]=r},U.deflateInit=function(e,t,r,l,h,m){return l||(l=8),h||(h=8),m||(m=0),e.msg=null,-1==t&&(t=6),h<1||h>9||8!=l||r<9||r>15||t<0||t>9||m<0||m>2?CR:(e.dstate=U,o=(i=1<<(a=r))-1,p=(d=1<<(f=h+7))-1,v=Math.floor((f+3-1)/3),s=new Uint8Array(2*i),u=[],c=[],R=1<<h+6,U.pending_buf=new Uint8Array(4*R),n=4*R,U.dist_buf=new Uint16Array(R),U.lc_buf=new Uint8Array(R),k=t,C=m,ae(e))},U.deflateEnd=function(){return 42!=t&&t!=UR&&t!=HR?CR:(U.lc_buf=null,U.dist_buf=null,U.pending_buf=null,c=null,u=null,s=null,U.dstate=null,t==UR?-3:0)},U.deflateParams=function(e,t,n){var r=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?CR:(FR[k].func!=FR[t].func&&0!==e.total_in&&(r=e.deflate(1)),k!=t&&(S=FR[k=t].max_lazy,A=FR[k].good_length,I=FR[k].nice_length,T=FR[k].max_chain),C=n,r)},U.deflateSetDictionary=function(e,n,r){var a,l=r,d=0;if(!n||42!=t)return CR;if(l<3)return 0;for(l>i-zR&&(d=r-(l=i-zR)),s.set(n.subarray(d,d+l),0),_=l,m=l,h=((h=255&s[0])<<v^255&s[1])&p,a=0;a<=l-3;a++)h=(h<<v^255&s[a+2])&p,u[a&o]=c[h],c[h]=a;return 0},U.deflate=function(l,f){var T,A,I,O,P;if(f>4||f<0)return CR;if(!l.next_out||!l.next_in&&0!==l.avail_in||t==HR&&4!=f)return l.msg=BR[4],CR;if(0===l.avail_out)return l.msg=BR[7],AR;if(e=l,O=r,r=f,42==t&&(A=8+(a-8<<4)<<8,(I=(k-1&255)>>1)>3&&(I=3),A|=I<<6,0!==_&&(A|=32),t=UR,function(e){W(e>>8&255),W(255&e)}(A+=31-A%31)),0!==U.pending){if(e.flush_pending(),0===e.avail_out)return r=-1,0}else if(0===e.avail_in&&f<=O&&4!=f)return e.msg=BR[7],AR;if(t==HR&&0!==e.avail_in)return l.msg=BR[7],AR;if(0!==e.avail_in||0!==E||0!=f&&t!=HR){switch(P=-1,FR[k].func){case 0:P=function(t){var r,a=65535;for(a>n-5&&(a=n-5);;){if(E<=1){if(re(),0===E&&0==t)return 0;if(0===E)break}if(_+=E,E=0,r=m+a,(0===_||_>=r)&&(E=_-r,_=r,ne(!1),0===e.avail_out))return 0;if(_-m>=i-zR&&(ne(!1),0===e.avail_out))return 0}return ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 1:P=function(t){for(var n,r=0;;){if(E<zR){if(re(),E<zR&&0==t)return 0;if(0===E)break}if(E>=3&&(h=(h<<v^255&s[_+2])&p,r=65535&c[h],u[_&o]=c[h],c[h]=_),0!==r&&(_-r&65535)<=i-zR&&2!=C&&(g=ie(r)),g>=3)if(n=Z(_-x,g-3),E-=g,g<=S&&E>=3){g--;do{_++,h=(h<<v^255&s[_+2])&p,r=65535&c[h],u[_&o]=c[h],c[h]=_}while(0!==--g);_++}else _+=g,g=0,h=((h=255&s[_])<<v^255&s[_+1])&p;else n=Z(0,255&s[_]),E--,_++;if(n&&(ne(!1),0===e.avail_out))return 0}return ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 2:P=function(t){for(var n,r,a=0;;){if(E<zR){if(re(),E<zR&&0==t)return 0;if(0===E)break}if(E>=3&&(h=(h<<v^255&s[_+2])&p,a=65535&c[h],u[_&o]=c[h],c[h]=_),w=g,y=x,g=2,0!==a&&w<S&&(_-a&65535)<=i-zR&&(2!=C&&(g=ie(a)),g<=5&&(1==C||3==g&&_-x>4096)&&(g=2)),w>=3&&g<=w){r=_+E-3,n=Z(_-1-y,w-3),E-=w-1,w-=2;do{++_<=r&&(h=(h<<v^255&s[_+2])&p,a=65535&c[h],u[_&o]=c[h],c[h]=_)}while(0!==--w);if(b=0,g=2,_++,n&&(ne(!1),0===e.avail_out))return 0}else if(0!==b){if((n=Z(0,255&s[_-1]))&&ne(!1),_++,E--,0===e.avail_out)return 0}else b=1,_++,E--}return 0!==b&&(n=Z(0,255&s[_-1]),b=0),ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f)}if(2!=P&&3!=P||(t=HR),0==P||2==P)return 0===e.avail_out&&(r=-1),0;if(1==P){if(1==f)Y(2,3),K(kR,RR.static_ltree),$(),1+L+10-B<9&&(Y(2,3),K(kR,RR.static_ltree),$()),L=7;else if(ee(0,0,!1),3==f)for(T=0;T<d;T++)c[T]=0;if(e.flush_pending(),0===e.avail_out)return r=-1,0}}return 4!=f?0:1}}function WR(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}WR.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new GR,t||(t=wR),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):CR},deflateEnd:function(){var e=this;if(!e.dstate)return CR;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):CR},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):CR},read_buf:function(e,t,n){var r=this,i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),t),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};var XR=0,YR=1,KR=-2,qR=-3,$R=-4,ZR=-5,QR=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],JR=1440,eN=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],tN=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],nN=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],rN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],iN=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],aN=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],oN=15;function sN(){var e,t,n,r,i,a;function o(e,t,o,s,l,u,c,h,d,f,p){var v,m,g,y,b,_,x,E,w,T,S,k,C,A,I;T=0,b=o;do{n[e[t+T]]++,T++,b--}while(0!==b);if(n[0]==o)return c[0]=-1,h[0]=0,XR;for(E=h[0],_=1;_<=oN&&0===n[_];_++);for(x=_,E<_&&(E=_),b=oN;0!==b&&0===n[b];b--);for(g=b,E>b&&(E=b),h[0]=E,A=1<<_;_<b;_++,A<<=1)if((A-=n[_])<0)return qR;if((A-=n[b])<0)return qR;for(n[b]+=A,a[1]=_=0,T=1,C=2;0!==--b;)a[C]=_+=n[T],C++,T++;b=0,T=0;do{0!==(_=e[t+T])&&(p[a[_]++]=b),T++}while(++b<o);for(o=a[g],a[0]=b=0,T=0,y=-1,k=-E,i[0]=0,S=0,I=0;x<=g;x++)for(v=n[x];0!==v--;){for(;x>k+E;){if(y++,I=(I=g-(k+=E))>E?E:I,(m=1<<(_=x-k))>v+1&&(m-=v+1,C=x,_<I))for(;++_<I&&!((m<<=1)<=n[++C]);)m-=n[C];if(I=1<<_,f[0]+I>JR)return qR;i[y]=S=f[0],f[0]+=I,0!==y?(a[y]=b,r[0]=_,r[1]=E,_=b>>>k-E,r[2]=S-i[y-1]-_,d.set(r,3*(i[y-1]+_))):c[0]=S}for(r[1]=x-k,T>=o?r[0]=192:p[T]<s?(r[0]=p[T]<256?0:96,r[2]=p[T++]):(r[0]=u[p[T]-s]+16+64,r[2]=l[p[T++]-s]),m=1<<x-k,_=b>>>k;_<I;_+=m)d.set(r,3*(S+_));for(_=1<<x-1;0!==(b&_);_>>>=1)b^=_;for(b^=_,w=(1<<k)-1;(b&w)!=a[y];)y--,w=(1<<(k-=E))-1}return 0!==A&&1!=g?ZR:XR}function s(o){var s;for(e||(e=[],t=[],n=new Int32Array(oN+1),r=[],i=new Int32Array(oN),a=new Int32Array(oN+1)),t.length<o&&(t=[]),s=0;s<o;s++)t[s]=0;for(s=0;s<oN+1;s++)n[s]=0;for(s=0;s<3;s++)r[s]=0;i.set(n.subarray(0,oN),0),a.set(n.subarray(0,oN+1),0)}this.inflate_trees_bits=function(n,r,i,a,l){var u;return s(19),e[0]=0,(u=o(n,0,19,19,null,null,i,r,a,e,t))==qR?l.msg="oversubscribed dynamic bit lengths tree":u!=ZR&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",u=qR),u},this.inflate_trees_dynamic=function(n,r,i,a,l,u,c,h,d){var f;return s(288),e[0]=0,(f=o(i,0,n,257,nN,rN,u,a,h,e,t))!=XR||0===a[0]?(f==qR?d.msg="oversubscribed literal/length tree":f!=$R&&(d.msg="incomplete literal/length tree",f=qR),f):(s(288),(f=o(i,n,r,0,iN,aN,c,l,h,e,t))!=XR||0===l[0]&&n>257?(f==qR?d.msg="oversubscribed distance tree":f==ZR?(d.msg="incomplete distance tree",f=qR):f!=$R&&(d.msg="empty distance tree with lengths",f=qR),f):XR)}}sN.inflate_trees_fixed=function(e,t,n,r){return e[0]=9,t[0]=5,n[0]=eN,r[0]=tN,XR};var lN=0,uN=1,cN=2,hN=3,dN=4,fN=5,pN=6,vN=7,mN=8,gN=9;function yN(){var e,t,n,r,i=this,a=0,o=0,s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0;function v(e,t,n,r,i,a,o,s){var l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w;p=s.next_in_index,v=s.avail_in,d=o.bitb,f=o.bitk,g=(m=o.write)<o.read?o.read-m-1:o.end-m,y=QR[e],b=QR[t];do{for(;f<20;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;if(0!==(h=(u=n)[w=3*((c=r)+(l=d&y))]))for(;;){if(d>>=u[w+1],f-=u[w+1],0!==(16&h)){for(h&=15,_=u[w+2]+(d&QR[h]),d>>=h,f-=h;f<15;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;for(h=(u=i)[w=3*((c=a)+(l=d&b))];;){if(d>>=u[w+1],f-=u[w+1],0!==(16&h)){for(h&=15;f<h;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;if(x=u[w+2]+(d&QR[h]),d>>=h,f-=h,g-=_,m>=x)m-(E=m-x)>0&&2>m-E?(o.win[m++]=o.win[E++],o.win[m++]=o.win[E++],_-=2):(o.win.set(o.win.subarray(E,E+2),m),m+=2,E+=2,_-=2);else{E=m-x;do{E+=o.end}while(E<0);if(_>(h=o.end-E)){if(_-=h,m-E>0&&h>m-E)do{o.win[m++]=o.win[E++]}while(0!==--h);else o.win.set(o.win.subarray(E,E+h),m),m+=h,E+=h,h=0;E=0}}if(m-E>0&&_>m-E)do{o.win[m++]=o.win[E++]}while(0!==--_);else o.win.set(o.win.subarray(E,E+_),m),m+=_,E+=_,_=0;break}if(0!==(64&h))return s.msg="invalid distance code",v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,o.bitb=d,o.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,o.write=m,qR;l+=u[w+2],h=u[w=3*(c+(l+=d&QR[h]))]}break}if(0!==(64&h))return 0!==(32&h)?(v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,o.bitb=d,o.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,o.write=m,YR):(s.msg="invalid literal/length code",v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,o.bitb=d,o.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,o.write=m,qR);if(l+=u[w+2],0===(h=u[w=3*(c+(l+=d&QR[h]))])){d>>=u[w+1],f-=u[w+1],o.win[m++]=u[w+2],g--;break}}else d>>=u[w+1],f-=u[w+1],o.win[m++]=u[w+2],g--}while(g>=258&&v>=10);return v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,o.bitb=d,o.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,o.write=m,XR}i.init=function(i,a,o,s,l,u){e=lN,h=i,d=a,n=o,f=s,r=l,p=u,t=null},i.proc=function(i,m,g){var y,b,_,x,E,w,T,S=0,k=0,C=0;for(C=m.next_in_index,x=m.avail_in,S=i.bitb,k=i.bitk,w=(E=i.write)<i.read?i.read-E-1:i.end-E;;)switch(e){case lN:if(w>=258&&x>=10&&(i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,g=v(h,d,n,f,r,p,i,m),C=m.next_in_index,x=m.avail_in,S=i.bitb,k=i.bitk,w=(E=i.write)<i.read?i.read-E-1:i.end-E,g!=XR)){e=g==YR?vN:gN;break}s=h,t=n,o=f,e=uN;case uN:for(y=s;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=XR,x--,S|=(255&m.read_byte(C++))<<k,k+=8}if(b=3*(o+(S&QR[y])),S>>>=t[b+1],k-=t[b+1],0===(_=t[b])){l=t[b+2],e=pN;break}if(0!==(16&_)){u=15&_,a=t[b+2],e=cN;break}if(0===(64&_)){s=_,o=b/3+t[b+2];break}if(0!==(32&_)){e=vN;break}return e=gN,m.msg="invalid literal/length code",g=qR,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case cN:for(y=u;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=XR,x--,S|=(255&m.read_byte(C++))<<k,k+=8}a+=S&QR[y],S>>=y,k-=y,s=d,t=r,o=p,e=hN;case hN:for(y=s;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=XR,x--,S|=(255&m.read_byte(C++))<<k,k+=8}if(b=3*(o+(S&QR[y])),S>>=t[b+1],k-=t[b+1],0!==(16&(_=t[b]))){u=15&_,c=t[b+2],e=dN;break}if(0===(64&_)){s=_,o=b/3+t[b+2];break}return e=gN,m.msg="invalid distance code",g=qR,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case dN:for(y=u;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=XR,x--,S|=(255&m.read_byte(C++))<<k,k+=8}c+=S&QR[y],S>>=y,k-=y,e=fN;case fN:for(T=E-c;T<0;)T+=i.end;for(;0!==a;){if(0===w&&(E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w&&(i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w)))return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);i.win[E++]=i.win[T++],w--,T==i.end&&(T=0),a--}e=lN;break;case pN:if(0===w&&(E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w&&(i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w)))return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=XR,i.win[E++]=l,w--,e=lN;break;case vN:if(k>7&&(k-=8,x++,C--),i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,i.read!=i.write)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);e=mN;case mN:return g=YR,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case gN:return g=qR,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);default:return g=KR,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g)}},i.free=function(){}}var bN=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_N=0,xN=1,EN=2,wN=3,TN=4,SN=5,kN=6,CN=7,AN=8,IN=9;function ON(e,t){var n,r=this,i=_N,a=0,o=0,s=0,l=[0],u=[0],c=new yN,h=0,d=new Int32Array(3*JR),f=new sN;r.bitk=0,r.bitb=0,r.win=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),i==kN&&c.free(e),i=_N,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){var n,i,a;return i=e.next_out_index,(n=((a=r.read)<=r.write?r.write:r.end)-a)>e.avail_out&&(n=e.avail_out),0!==n&&t==ZR&&(t=XR),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(a,a+n),i),i+=n,(a+=n)==r.end&&(a=0,r.write==r.end&&(r.write=0),(n=r.write-a)>e.avail_out&&(n=e.avail_out),0!==n&&t==ZR&&(t=XR),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(a,a+n),i),i+=n,a+=n),e.next_out_index=i,r.read=a,t},r.proc=function(e,t){var p,v,m,g,y,b,_,x;for(g=e.next_in_index,y=e.avail_in,v=r.bitb,m=r.bitk,_=(b=r.write)<r.read?r.read-b-1:r.end-b;;){var E=void 0,w=void 0,T=void 0,S=void 0,k=void 0,C=void 0,A=void 0,I=void 0;switch(i){case _N:for(;m<3;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}switch(h=1&(p=7&v),p>>>1){case 0:v>>>=3,v>>>=p=7&(m-=3),m-=p,i=xN;break;case 1:E=[],w=[],T=[[]],S=[[]],sN.inflate_trees_fixed(E,w,T,S),c.init(E[0],w[0],T[0],0,S[0],0),v>>>=3,m-=3,i=kN;break;case 2:v>>>=3,m-=3,i=wN;break;case 3:return v>>>=3,m-=3,i=IN,e.msg="invalid block type",t=qR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t)}break;case xN:for(;m<32;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if((~v>>>16&65535)!=(65535&v))return i=IN,e.msg="invalid stored block lengths",t=qR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);a=65535&v,v=m=0,i=0!==a?EN:0!==h?CN:_N;break;case EN:if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(0===_&&(b==r.end&&0!==r.read&&(_=(b=0)<r.read?r.read-b-1:r.end-b),0===_&&(r.write=b,t=r.inflate_flush(e,t),_=(b=r.write)<r.read?r.read-b-1:r.end-b,b==r.end&&0!==r.read&&(_=(b=0)<r.read?r.read-b-1:r.end-b),0===_)))return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(t=XR,(p=a)>y&&(p=y),p>_&&(p=_),r.win.set(e.read_buf(g,p),b),g+=p,y-=p,b+=p,_-=p,0!==(a-=p))break;i=0!==h?CN:_N;break;case wN:for(;m<14;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(o=p=16383&v,(31&p)>29||(p>>5&31)>29)return i=IN,e.msg="too many length or distance symbols",t=qR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(p=258+(31&p)+(p>>5&31),!n||n.length<p)n=[];else for(x=0;x<p;x++)n[x]=0;v>>>=14,m-=14,s=0,i=TN;case TN:for(;s<4+(o>>>10);){for(;m<3;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}n[bN[s++]]=7&v,v>>>=3,m-=3}for(;s<19;)n[bN[s++]]=0;if(l[0]=7,(p=f.inflate_trees_bits(n,l,u,d,e))!=XR)return(t=p)==qR&&(n=null,i=IN),r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);s=0,i=SN;case SN:for(;!(s>=258+(31&(p=o))+(p>>5&31));){var O=void 0,P=void 0;for(p=l[0];m<p;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(p=d[3*(u[0]+(v&QR[p]))+1],(P=d[3*(u[0]+(v&QR[p]))+2])<16)v>>>=p,m-=p,n[s++]=P;else{for(x=18==P?7:P-14,O=18==P?11:3;m<p+x;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=XR,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(m-=p,O+=(v>>>=p)&QR[x],v>>>=x,m-=x,(x=s)+O>258+(31&(p=o))+(p>>5&31)||16==P&&x<1)return n=null,i=IN,e.msg="invalid bit length repeat",t=qR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);P=16==P?n[x-1]:0;do{n[x++]=P}while(0!==--O);s=x}}if(u[0]=-1,C=[],A=[],I=[],(k=[])[0]=9,C[0]=6,p=o,(p=f.inflate_trees_dynamic(257+(31&p),1+(p>>5&31),n,k,C,A,I,d,e))!=XR)return p==qR&&(n=null,i=IN),t=p,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);c.init(k[0],C[0],d,A[0],d,I[0]),i=kN;case kN:if(r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,(t=c.proc(r,e,t))!=YR)return r.inflate_flush(e,t);if(t=XR,c.free(e),g=e.next_in_index,y=e.avail_in,v=r.bitb,m=r.bitk,_=(b=r.write)<r.read?r.read-b-1:r.end-b,0===h){i=_N;break}i=CN;case CN:if(r.write=b,t=r.inflate_flush(e,t),_=(b=r.write)<r.read?r.read-b-1:r.end-b,r.read!=r.write)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);i=AN;case AN:return t=YR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);case IN:return t=qR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);default:return t=KR,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t)}}},r.free=function(e){r.reset(e,null),r.win=null,d=null},r.set_dictionary=function(e,t,n){r.win.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return i==xN?1:0}}var PN=13,MN=[0,0,255,255];function RN(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),XR):KR}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,XR},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,r<8||r>15?(e.inflateEnd(n),KR):(e.wbits=r,n.istate.blocks=new ON(n,1<<r),t(n),XR)},e.inflate=function(e,t){var n,r;if(!e||!e.istate||!e.next_in)return KR;var i=e.istate;for(t=4==t?ZR:XR,n=ZR;;)switch(i.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(i.method=e.read_byte(e.next_in_index++)))){i.mode=PN,e.msg="unknown compression method",i.marker=5;break}if(8+(i.method>>4)>i.wbits){i.mode=PN,e.msg="invalid win size",i.marker=5;break}i.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,r=255&e.read_byte(e.next_in_index++),((i.method<<8)+r)%31!==0){i.mode=PN,e.msg="incorrect header check",i.marker=5;break}if(0===(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,i.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,i.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,i.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,i.need+=255&e.read_byte(e.next_in_index++),i.mode=6,2);case 6:return i.mode=PN,e.msg="need dictionary",i.marker=0,KR;case 7:if((n=i.blocks.proc(e,n))==qR){i.mode=PN,i.marker=0;break}if(n==XR&&(n=t),n!=YR)return n;n=t,i.blocks.reset(e,i.was),i.mode=12;case 12:return e.avail_in=0,YR;case PN:return qR;default:return KR}},e.inflateSetDictionary=function(e,t,n){var r=0,i=n;if(!e||!e.istate||6!=e.istate.mode)return KR;var a=e.istate;return i>=1<<a.wbits&&(r=n-(i=(1<<a.wbits)-1)),a.blocks.set_dictionary(t,r,i),a.mode=7,XR},e.inflateSync=function(e){var n,r,i,a,o;if(!e||!e.istate)return KR;var s=e.istate;if(s.mode!=PN&&(s.mode=PN,s.marker=0),0===(n=e.avail_in))return ZR;for(r=e.next_in_index,i=s.marker;0!==n&&i<4;)e.read_byte(r)==MN[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,s.marker=i,4!=i?qR:(a=e.total_in,o=e.total_out,t(e),e.total_in=a,e.total_out=o,s.mode=7,XR)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():KR}}function NN(){}NN.prototype={inflateInit:function(e){var t=this;return t.istate=new RN,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){var t=this;return t.istate?t.istate.inflate(t,e):KR},inflateEnd:function(){var e=this;if(!e.istate)return KR;var t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){var e=this;return e.istate?e.istate.inflateSync(e):KR},inflateSetDictionary:function(e,t){var n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):KR},read_byte:function(e){return this.next_in[e]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};var DN=4294967295,LN=65535,FN=8,BN=0,UN=99,HN=67324752,jN=134695760,zN=jN,VN=33639248,GN=101010256,WN=101075792,XN=117853008,YN=22,KN=20,qN=56,$N=YN+KN+qN,ZN=1,QN=39169,JN=10,eD=1,tD=21589,nD=6534,rD=1,iD=8,aD=2048,oD=16,sD=20,lD=45,uD=51,cD="/",hD=new Date(2107,11,31),dD=new Date(1980,0,1),fD=void 0,pD="undefined",vD="function",mD=d((function e(t){return l(this,e),function(e){p(r,TransformStream);var n=g(r);function r(e,i){l(this,r);var a=new t(i);return n.call(this,{transform:function(e,t){t.enqueue(a.append(e))},flush:function(e){var t=a.flush();t&&e.enqueue(t)}})}return d(r)}()})),gD=64,yD=2;try{typeof navigator!=pD&&navigator.hardwareConcurrency&&(yD=navigator.hardwareConcurrency)}catch(T2){}var bD={chunkSize:524288,maxWorkers:yD,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:fD,CompressionStreamNative:typeof CompressionStream!=pD&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=pD&&DecompressionStream},_D=Object.assign({},bD);function xD(){return _D}function ED(e){return Math.max(e.chunkSize,gD)}function wD(e){var t=e.baseURL,n=e.chunkSize,r=e.maxWorkers,i=e.terminateWorkerTimeout,a=e.useCompressionStream,o=e.useWebWorkers,s=e.Deflate,l=e.Inflate,u=e.CompressionStream,c=e.DecompressionStream,h=e.workerScripts;if(TD("baseURL",t),TD("chunkSize",n),TD("maxWorkers",r),TD("terminateWorkerTimeout",i),TD("useCompressionStream",a),TD("useWebWorkers",o),s&&(_D.CompressionStream=new mD(s)),l&&(_D.DecompressionStream=new mD(l)),TD("CompressionStream",u),TD("DecompressionStream",c),h!==fD){var d=h.deflate,f=h.inflate;if((d||f)&&(_D.workerScripts||(_D.workerScripts={})),d){if(!Array.isArray(d))throw new Error("workerScripts.deflate must be an array");_D.workerScripts.deflate=d}if(f){if(!Array.isArray(f))throw new Error("workerScripts.inflate must be an array");_D.workerScripts.inflate=f}}}function TD(e,t){t!==fD&&(_D[e]=t)}var SD={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};!function(){for(var e={},t=0,n=Object.keys(SD);t<n.length;t++)for(var r=n[t],i=0,a=Object.keys(SD[r]);i<a.length;i++){var o=a[i],s=SD[r][o];if("string"==typeof s)e[s]=r+"/"+o;else for(var l=0;l<s.length;l++)e[s[l]]=r+"/"+o}}();for(var kD=[],CD=0;CD<256;CD++){for(var AD=CD,ID=0;ID<8;ID++)1&AD?AD=AD>>>1^3988292384:AD>>>=1;kD[CD]=AD}var OD=function(){function e(t){l(this,e),this.crc=t||-1}return d(e,[{key:"append",value:function(e){for(var t=0|this.crc,n=0,r=0|e.length;n<r;n++)t=t>>>8^kD[255&(t^e[n])];this.crc=t}},{key:"get",value:function(){return~this.crc}}]),e}(),PD=function(e){p(n,TransformStream);var t=g(n);function n(){var e,r;l(this,n);var i=new OD;return e=t.call(this,{transform:function(e,t){i.append(e),t.enqueue(e)},flush:function(){var e=new Uint8Array(4);new DataView(e.buffer).setUint32(0,i.get()),r.value=e}}),r=m(e),e}return d(n)}();function MD(e){if(typeof TextEncoder==pD){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new TextEncoder).encode(e)}var RD={concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],r=RD.getPartial(n);return 32===r?e.concat(t):RD._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return 32*(t-1)+RD.getPartial(n)},clamp:function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=RD.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},_shiftRight:function(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(var i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;var a=e.length?e[e.length-1]:0,o=RD.getPartial(a);return r.push(RD.partial(t+o&31,t+o>32?n:r.pop(),1)),r}},ND={bytes:{fromBits:function(e){for(var t,n=RD.bitLength(e)/8,r=new Uint8Array(n),i=0;i<n;i++)0===(3&i)&&(t=e[i/4]),r[i]=t>>>24,t<<=8;return r},toBits:function(e){var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e[t],3===(3&t)&&(n.push(r),r=0);return 3&t&&n.push(RD.partial(8*(3&t),r)),n}}},DD={};DD.sha1=function(){function e(t){l(this,e);var n=this;n.blockSize=512,n._init=[1732584193,4023233417,2562383102,271733878,3285377520],n._key=[1518500249,1859775393,2400959708,3395469782],t?(n._h=t._h.slice(0),n._buffer=t._buffer.slice(0),n._length=t._length):n.reset()}return d(e,[{key:"reset",value:function(){var e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}},{key:"update",value:function(e){var t=this;"string"===typeof e&&(e=ND.utf8String.toBits(e));var n=t._buffer=RD.concat(t._buffer,e),r=t._length,i=t._length=r+RD.bitLength(e);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");for(var a=new Uint32Array(n),o=0,s=t.blockSize+r-(t.blockSize+r&t.blockSize-1);s<=i;s+=t.blockSize)t._block(a.subarray(16*o,16*(o+1))),o+=1;return n.splice(0,16*o),t}},{key:"finalize",value:function(){for(var e=this,t=e._buffer,n=e._h,r=(t=RD.concat(t,[RD.partial(1,1)])).length+2;15&r;r++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}},{key:"_f",value:function(e,t,n,r){return e<=19?t&n|~t&r:e<=39?t^n^r:e<=59?t&n|t&r|n&r:e<=79?t^n^r:void 0}},{key:"_S",value:function(e,t){return t<<e|t>>>32-e}},{key:"_block",value:function(e){for(var t=this,n=t._h,r=Array(80),i=0;i<16;i++)r[i]=e[i];for(var a=n[0],o=n[1],s=n[2],l=n[3],u=n[4],c=0;c<=79;c++){c>=16&&(r[c]=t._S(1,r[c-3]^r[c-8]^r[c-14]^r[c-16]));var h=t._S(5,a)+t._f(c,o,s,l)+u+r[c]+t._key[Math.floor(c/20)]|0;u=l,l=s,s=t._S(30,o),o=a,a=h}n[0]=n[0]+a|0,n[1]=n[1]+o|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+u|0}}]),e}();var LD={};LD.aes=function(){function e(t){l(this,e);var n=this;n._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],n._tables[0][0][0]||n._precompute();var r,i,a,o=n._tables[0][4],s=n._tables[1],u=t.length,c=1;if(4!==u&&6!==u&&8!==u)throw new Error("invalid aes key size");for(n._key=[i=t.slice(0),a=[]],r=u;r<4*u+28;r++){var h=i[r-1];(r%u===0||8===u&&r%u===4)&&(h=o[h>>>24]<<24^o[h>>16&255]<<16^o[h>>8&255]<<8^o[255&h],r%u===0&&(h=h<<8^h>>>24^c<<24,c=c<<1^283*(c>>7))),i[r]=i[r-u]^h}for(var d=0;r;d++,r--){var f=i[3&d?r:r-4];a[d]=r<=4||d<4?f:s[0][o[f>>>24]]^s[1][o[f>>16&255]]^s[2][o[f>>8&255]]^s[3][o[255&f]]}}return d(e,[{key:"encrypt",value:function(e){return this._crypt(e,0)}},{key:"decrypt",value:function(e){return this._crypt(e,1)}},{key:"_precompute",value:function(){for(var e,t,n,r=this._tables[0],i=this._tables[1],a=r[4],o=i[4],s=[],l=[],u=0;u<256;u++)l[(s[u]=u<<1^283*(u>>7))^u]=u;for(var c=e=0;!a[c];c^=t||1,e=l[e]||1){var h=e^e<<1^e<<2^e<<3^e<<4;h=h>>8^255&h^99,a[c]=h,o[h]=c;for(var d=16843009*s[n=s[t=s[c]]]^65537*n^257*t^16843008*c,f=257*s[h]^16843008*h,p=0;p<4;p++)r[p][c]=f=f<<24^f>>>8,i[p][h]=d=d<<24^d>>>8}for(var v=0;v<5;v++)r[v]=r[v].slice(0),i[v]=i[v].slice(0)}},{key:"_crypt",value:function(e,t){if(4!==e.length)throw new Error("invalid aes block size");for(var n,r,i,a=this._key[t],o=a.length/4-2,s=[0,0,0,0],l=this._tables[t],u=l[0],c=l[1],h=l[2],d=l[3],f=l[4],p=e[0]^a[0],v=e[t?3:1]^a[1],m=e[2]^a[2],g=e[t?1:3]^a[3],y=4,b=0;b<o;b++)n=u[p>>>24]^c[v>>16&255]^h[m>>8&255]^d[255&g]^a[y],r=u[v>>>24]^c[m>>16&255]^h[g>>8&255]^d[255&p]^a[y+1],i=u[m>>>24]^c[g>>16&255]^h[p>>8&255]^d[255&v]^a[y+2],g=u[g>>>24]^c[p>>16&255]^h[v>>8&255]^d[255&m]^a[y+3],y+=4,p=n,v=r,m=i;for(var _=0;_<4;_++)s[t?3&-_:_]=f[p>>>24]<<24^f[v>>16&255]<<16^f[m>>8&255]<<8^f[255&g]^a[y++],n=p,p=v,v=m,m=g,g=n;return s}}]),e}();var FD={getRandomValues:function(e){for(var t,n=new Uint32Array(e.buffer),r=function(e){var t=987654321,n=4294967295;return function(){return((((t=36969*(65535&t)+(t>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(Math.random()>.5?1:-1)}},i=0;i<e.length;i+=4){var a=r(4294967296*(t||Math.random()));t=987654071*a(),n[i/4]=4294967296*a()|0}return e}},BD={};BD.ctrGladman=function(){function e(t,n){l(this,e),this._prf=t,this._initIv=n,this._iv=n}return d(e,[{key:"reset",value:function(){this._iv=this._initIv}},{key:"update",value:function(e){return this.calculate(this._prf,e,this._iv)}},{key:"incWord",value:function(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}},{key:"incCounter",value:function(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}},{key:"calculate",value:function(e,t,n){var r;if(!(r=t.length))return[];for(var i=RD.bitLength(t),a=0;a<r;a+=4){this.incCounter(n);var o=e.encrypt(n);t[a]^=o[0],t[a+1]^=o[1],t[a+2]^=o[2],t[a+3]^=o[3]}return RD.clamp(t,i)}}]),e}();var UD={importKey:function(e){return new UD.hmacSha1(ND.bytes.toBits(e))},pbkdf2:function(e,t,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");var i,a,o,s,l,u=1+(r>>5)<<2,c=new ArrayBuffer(u),h=new DataView(c),d=0,f=RD;for(t=ND.bytes.toBits(t),l=1;d<(u||1);l++){for(i=a=e.encrypt(f.concat(t,[l])),o=1;o<n;o++)for(a=e.encrypt(a),s=0;s<a.length;s++)i[s]^=a[s];for(o=0;d<(u||1)&&o<i.length;o++)h.setInt32(d,i[o]),d+=4}return c.slice(0,r/8)}};UD.hmacSha1=function(){function e(t){l(this,e);var n=this,r=n._hash=DD.sha1,i=[[],[]];n._baseHash=[new r,new r];var a=n._baseHash[0].blockSize/32;t.length>a&&(t=(new r).update(t).finalize());for(var o=0;o<a;o++)i[0][o]=909522486^t[o],i[1][o]=1549556828^t[o];n._baseHash[0].update(i[0]),n._baseHash[1].update(i[1]),n._resultHash=new r(n._baseHash[0])}return d(e,[{key:"reset",value:function(){var e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}},{key:"update",value:function(e){this._updated=!0,this._resultHash.update(e)}},{key:"digest",value:function(){var e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}},{key:"encrypt",value:function(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}]),e}();var HD=typeof crypto!=pD&&typeof crypto.getRandomValues==vD,jD="Invalid password",zD="Invalid signature",VD="zipjs-abort-check-password";function GD(e){return HD?crypto.getRandomValues(e):FD.getRandomValues(e)}var WD=16,XD="raw",YD={name:"PBKDF2"},KD=Object.assign({hash:{name:"HMAC"}},YD),qD=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},YD),$D=["deriveBits"],ZD=[8,12,16],QD=[16,24,32],JD=10,eL=[0,0,0,0],tL=typeof crypto!=pD,nL=tL&&crypto.subtle,rL=tL&&typeof nL!=pD,iL=ND.bytes,aL=LD.aes,oL=BD.ctrGladman,sL=UD.hmacSha1,lL=tL&&rL&&typeof nL.importKey==vD,uL=tL&&rL&&typeof nL.deriveBits==vD,cL=function(e){p(n,TransformStream);var t=g(n);function n(e){var r=e.password,i=e.rawPassword,a=e.signed,o=e.encryptionStrength,s=e.checkPasswordOnly;return l(this,n),t.call(this,{start:function(){var e=this;Object.assign(this,{ready:new Promise((function(t){return e.resolveReady=t})),password:wL(r,i),signed:a,strength:o-1,pending:new Uint8Array})},transform:function(e,t){var n=this;return _e(ye().mark((function r(){var i,a,o,l,u,c;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=n).password,o=i.strength,l=i.resolveReady,u=i.ready,!a){r.next=9;break}return r.next=5,fL(i,o,a,SL(e,0,ZD[o]+2));case 5:e=SL(e,ZD[o]+2),s?t.error(new Error(VD)):l(),r.next=11;break;case 9:return r.next=11,u;case 11:c=new Uint8Array(e.length-JD-(e.length-JD)%WD),t.enqueue(dL(i,e,c,0,JD,!0));case 13:case"end":return r.stop()}}),r)})))()},flush:function(e){var t=this;return _e(ye().mark((function n(){var r,i,a,o,s,l,u,c,h,d,f,p;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.signed,i=t.ctr,a=t.hmac,o=t.pending,s=t.ready,!a||!i){n.next=18;break}return n.next=4,s;case 4:if(l=SL(o,0,o.length-JD),u=SL(o,o.length-JD),c=new Uint8Array,l.length&&(h=CL(iL,l),a.update(h),d=i.update(h),c=kL(iL,d)),!r){n.next=17;break}f=SL(kL(iL,a.digest()),0,JD),p=0;case 11:if(!(p<JD)){n.next=17;break}if(f[p]==u[p]){n.next=14;break}throw new Error(zD);case 14:p++,n.next=11;break;case 17:e.enqueue(c);case 18:case"end":return n.stop()}}),n)})))()}})}return d(n)}(),hL=function(e){p(n,TransformStream);var t=g(n);function n(e){var r,i,a=e.password,o=e.rawPassword,s=e.encryptionStrength;return l(this,n),r=t.call(this,{start:function(){var e=this;Object.assign(this,{ready:new Promise((function(t){return e.resolveReady=t})),password:wL(a,o),strength:s-1,pending:new Uint8Array})},transform:function(e,t){var n=this;return _e(ye().mark((function r(){var i,a,o,s,l,u,c;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a=(i=n).password,o=i.strength,s=i.resolveReady,l=i.ready,u=new Uint8Array,!a){r.next=10;break}return r.next=6,vL(i,o,a);case 6:u=r.sent,s(),r.next=12;break;case 10:return r.next=12,l;case 12:(c=new Uint8Array(u.length+e.length-e.length%WD)).set(u,0),t.enqueue(dL(i,e,c,u.length,0));case 15:case"end":return r.stop()}}),r)})))()},flush:function(e){var t=this;return _e(ye().mark((function n(){var r,a,o,s,l,u;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.ctr,a=t.hmac,o=t.pending,s=t.ready,!a||!r){n.next=8;break}return n.next=4,s;case 4:l=new Uint8Array,o.length&&(u=r.update(CL(iL,o)),a.update(u),l=kL(iL,u)),i.signature=kL(iL,a.digest()).slice(0,JD),e.enqueue(TL(l,i.signature));case 8:case"end":return n.stop()}}),n)})))()}}),i=m(r),r}return d(n)}();function dL(e,t,n,r,i,a){var o,s=e.ctr,l=e.hmac,u=e.pending,c=t.length-i;for(u.length&&(t=TL(u,t),n=function(e,t){if(t&&t>e.length){var n=e;(e=new Uint8Array(t)).set(n,0)}return e}(n,c-c%WD)),o=0;o<=c-WD;o+=WD){var h=CL(iL,SL(t,o,o+WD));a&&l.update(h);var d=s.update(h);a||l.update(d),n.set(kL(iL,d),o+r)}return e.pending=SL(t,o),n}function fL(e,t,n,r){return pL.apply(this,arguments)}function pL(){return pL=_e(ye().mark((function e(t,n,r,i){var a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,gL(t,n,r,SL(i,0,ZD[n]));case 2:if(a=e.sent,o=SL(i,ZD[n]),a[0]==o[0]&&a[1]==o[1]){e.next=6;break}throw new Error(jD);case 6:case"end":return e.stop()}}),e)}))),pL.apply(this,arguments)}function vL(e,t,n){return mL.apply(this,arguments)}function mL(){return mL=_e(ye().mark((function e(t,n,r){var i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=GD(new Uint8Array(ZD[n])),e.next=3,gL(t,n,r,i);case 3:return a=e.sent,e.abrupt("return",TL(i,a));case 5:case"end":return e.stop()}}),e)}))),mL.apply(this,arguments)}function gL(e,t,n,r){return yL.apply(this,arguments)}function yL(){return(yL=_e(ye().mark((function e(t,n,r,i){var a,o,s,l,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.password=null,e.next=3,bL(XD,r,KD,!1,$D);case 3:return a=e.sent,e.next=6,xL(Object.assign({salt:i},qD),a,8*(2*QD[n]+2));case 6:return o=e.sent,s=new Uint8Array(o),l=CL(iL,SL(s,0,QD[n])),u=CL(iL,SL(s,QD[n],2*QD[n])),c=SL(s,2*QD[n]),Object.assign(t,{keys:{key:l,authentication:u,passwordVerification:c},ctr:new oL(new aL(l),Array.from(eL)),hmac:new sL(u)}),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bL(e,t,n,r,i){return _L.apply(this,arguments)}function _L(){return _L=_e(ye().mark((function e(t,n,r,i,a){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!lL){e.next=13;break}return e.prev=1,e.next=4,nL.importKey(t,n,r,i,a);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),lL=!1,e.abrupt("return",UD.importKey(n));case 11:e.next=14;break;case 13:return e.abrupt("return",UD.importKey(n));case 14:case"end":return e.stop()}}),e,null,[[1,7]])}))),_L.apply(this,arguments)}function xL(e,t,n){return EL.apply(this,arguments)}function EL(){return(EL=_e(ye().mark((function e(t,n,r){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!uL){e.next=13;break}return e.prev=1,e.next=4,nL.deriveBits(t,n,r);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),uL=!1,e.abrupt("return",UD.pbkdf2(n,t.salt,qD.iterations,r));case 11:e.next=14;break;case 13:return e.abrupt("return",UD.pbkdf2(n,t.salt,qD.iterations,r));case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function wL(e,t){return t===fD?MD(e):t}function TL(e,t){var n=e;return e.length+t.length&&((n=new Uint8Array(e.length+t.length)).set(e,0),n.set(t,e.length)),n}function SL(e,t,n){return e.subarray(t,n)}function kL(e,t){return e.fromBits(t)}function CL(e,t){return e.toBits(t)}var AL=12,IL=function(e){p(n,TransformStream);var t=g(n);function n(e){var r=e.password,i=e.passwordVerification,a=e.checkPasswordOnly;return l(this,n),t.call(this,{start:function(){Object.assign(this,{password:r,passwordVerification:i}),RL(this,r)},transform:function(e,t){var n=this;if(n.password){var r=PL(n,e.subarray(0,AL));if(n.password=null,r[11]!=n.passwordVerification)throw new Error(jD);e=e.subarray(AL)}a?t.error(new Error(VD)):t.enqueue(PL(n,e))}})}return d(n)}(),OL=function(e){p(n,TransformStream);var t=g(n);function n(e){var r=e.password,i=e.passwordVerification;return l(this,n),t.call(this,{start:function(){Object.assign(this,{password:r,passwordVerification:i}),RL(this,r)},transform:function(e,t){var n,r,i=this;if(i.password){i.password=null;var a=GD(new Uint8Array(AL));a[11]=i.passwordVerification,(n=new Uint8Array(e.length+a.length)).set(ML(i,a),0),r=AL}else n=new Uint8Array(e.length),r=0;n.set(ML(i,e),r),t.enqueue(n)}})}return d(n)}();function PL(e,t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=DL(e)^t[r],NL(e,n[r]);return n}function ML(e,t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=DL(e)^t[r],NL(e,t[r]);return n}function RL(e,t){var n=[305419896,591751049,878082192];Object.assign(e,{keys:n,crcKey0:new OD(n[0]),crcKey2:new OD(n[2])});for(var r=0;r<t.length;r++)NL(e,t.charCodeAt(r))}function NL(e,t){var n=It(e.keys,3),r=n[0],i=n[1],a=n[2];e.crcKey0.append([t]),r=~e.crcKey0.get(),i=FL(Math.imul(FL(i+LL(r)),134775813)+1),e.crcKey2.append([i>>>24]),a=~e.crcKey2.get(),e.keys=[r,i,a]}function DL(e){var t=2|e.keys[2];return LL(Math.imul(t,1^t)>>>8)}function LL(e){return 255&e}function FL(e){return 4294967295&e}var BL="deflate-raw",UL=function(e){p(n,TransformStream);var t=g(n);function n(e,r){var i,a,o=r.chunkSize,s=r.CompressionStream,u=r.CompressionStreamNative;l(this,n),a=t.call(this,{});var c,h,d=e.compressed,f=e.encrypted,p=e.useCompressionStream,g=e.zipCrypto,y=e.signed,b=e.level,_=m(a),x=jL(lm((i=m(a),v(n.prototype)),"readable",i));return f&&!g||!y||(x=GL(x,c=new PD)),d&&(x=VL(x,p,{level:b,chunkSize:o},u,s)),f&&(x=GL(x,g?new OL(e):h=new hL(e))),zL(_,x,(function(){var e;f&&!g&&(e=h.signature),f&&!g||!y||(e=new DataView(c.value.buffer).getUint32(0)),_.signature=e})),a}return d(n)}(),HL=function(e){p(n,TransformStream);var t=g(n);function n(e,r){var i,a,o=r.chunkSize,s=r.DecompressionStream,u=r.DecompressionStreamNative;l(this,n),a=t.call(this,{});var c,h=e.zipCrypto,d=e.encrypted,f=e.signed,p=e.signature,g=e.compressed,y=e.useCompressionStream,b=jL(lm((i=m(a),v(n.prototype)),"readable",i));return d&&(b=GL(b,h?new IL(e):new cL(e))),g&&(b=VL(b,y,{chunkSize:o},u,s)),d&&!h||!f||(b=GL(b,c=new PD)),zL(m(a),b,(function(){if((!d||h)&&f){var e=new DataView(c.value.buffer);if(p!=e.getUint32(0,!1))throw new Error(zD)}})),a}return d(n)}();function jL(e){return GL(e,new TransformStream({transform:function(e,t){e&&e.length&&t.enqueue(e)}}))}function zL(e,t,n){t=GL(t,new TransformStream({flush:n})),Object.defineProperty(e,"readable",{get:function(){return t}})}function VL(e,t,n,r,i){try{e=GL(e,new(t&&r?r:i)(BL,n))}catch(a){if(!t)return e;try{e=GL(e,new i(BL,n))}catch(a){return e}}return e}function GL(e,t){return e.pipeThrough(t)}var WL="message",XL="start",YL="pull",KL="data",qL="ack",$L="close",ZL="deflate",QL="inflate",JL=function(e){p(n,TransformStream);var t=g(n);function n(e,r){var i,a;l(this,n);var o,s=m(a=t.call(this,{})),u=e.codecType;u.startsWith(ZL)?o=UL:u.startsWith(QL)&&(o=HL);var c=0,h=0,d=new o(e,r),f=lm((i=m(a),v(n.prototype)),"readable",i),p=new TransformStream({transform:function(e,t){e&&e.length&&(h+=e.length,t.enqueue(e))},flush:function(){Object.assign(s,{inputSize:h})}}),g=new TransformStream({transform:function(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush:function(){var e=d.signature;Object.assign(s,{signature:e,outputSize:c,inputSize:h})}});return Object.defineProperty(s,"readable",{get:function(){return f.pipeThrough(p).pipeThrough(d).pipeThrough(g)}}),a}return d(n)}(),eF=function(e){p(n,TransformStream);var t=g(n);function n(e){var r,i;return l(this,n),r=t.call(this,{transform:function t(n,r){if(i){var a=new Uint8Array(i.length+n.length);a.set(i),a.set(n,i.length),n=a,i=null}n.length>e?(r.enqueue(n.slice(0,e)),t(n.slice(e),r)):i=n},flush:function(e){i&&i.length&&e.enqueue(i)}}),r}return d(n)}(),tF=typeof Worker!=pD,nF=d((function e(t,n,r,i){var a=n.readable,o=n.writable,s=r.options,u=r.config,c=r.streamOptions,h=r.useWebWorkers,d=r.transferStreams,f=r.scripts;l(this,e);var p=c.signal;return Object.assign(t,{busy:!0,readable:a.pipeThrough(new eF(u.chunkSize)).pipeThrough(new rF(a,c),{signal:p}),writable:o,options:Object.assign({},s),scripts:f,transferStreams:d,terminate:function(){return new Promise((function(e){var n=t.worker,r=t.busy;n?(r?t.resolveTerminated=e:(n.terminate(),e()),t.interface=null):e()}))},onTaskFinished:function(){var e=t.resolveTerminated;e&&(t.resolveTerminated=null,t.terminated=!0,t.worker.terminate(),e()),t.busy=!1,i(t)}}),(h&&tF?sF:oF)(t,u)})),rF=function(e){p(n,TransformStream);var t=g(n);function n(e,r){var i=r.onstart,a=r.onprogress,o=r.size,s=r.onend;l(this,n);var u=0;return t.call(this,{start:function(){return _e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,iF(i,o);case 3:case"end":return e.stop()}}),e)})))()},transform:function(e,t){return _e(ye().mark((function n(){return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(u+=e.length,!a){n.next=4;break}return n.next=4,iF(a,u,o);case 4:t.enqueue(e);case 5:case"end":return n.stop()}}),n)})))()},flush:function(){return _e(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.size=u,!s){t.next=4;break}return t.next=4,iF(s,u);case 4:case"end":return t.stop()}}),t)})))()}})}return d(n)}();function iF(e){return aF.apply(this,arguments)}function aF(){return aF=_e(ye().mark((function e(t){var n,r,i,a=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=a.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=a[i];return e.next=4,t.apply(void 0,r);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),aF.apply(this,arguments)}function oF(e,t){return{run:function(){return function(e,t){return lF.apply(this,arguments)}(e,t)}}}function sF(e,t){var n=t.baseURL,r=t.chunkSize;if(!e.interface){var i;try{i=function(e,t,n){var r,i,a={type:"module"};typeof e==vD&&(e=e());try{r=new URL(e,t)}catch(T2){r=e}if(hF)try{i=new Worker(r)}catch(T2){hF=!1,i=new Worker(r,a)}else i=new Worker(r,a);return i.addEventListener(WL,(function(e){return function(e,t){return pF.apply(this,arguments)}(e,n)})),i}(e.scripts[0],n,e)}catch(a){return tF=!1,oF(e,t)}Object.assign(e,{worker:i,interface:{run:function(){return function(e,t){return uF.apply(this,arguments)}(e,{chunkSize:r})}}})}return e.interface}function lF(){return lF=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.options,i=t.readable,a=t.writable,o=t.onTaskFinished,e.prev=1,s=new JL(r,n),e.next=5,i.pipeThrough(s).pipeTo(a,{preventClose:!0,preventAbort:!0});case 5:return l=s.signature,u=s.inputSize,c=s.outputSize,e.abrupt("return",{signature:l,inputSize:u,outputSize:c});case 7:return e.prev=7,o(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])}))),lF.apply(this,arguments)}function uF(){return uF=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h,d,f;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise((function(e,t){r=e,i=t})),Object.assign(t,{reader:null,writer:null,resolveResult:r,rejectResult:i,result:a}),o=t.readable,s=t.options,l=t.scripts,u=cF(t.writable),c=u.writable,h=u.closed,(d=fF({type:XL,scripts:l.slice(1),options:s,config:n,readable:o,writable:c},t))||Object.assign(t,{reader:o.getReader(),writer:c.getWriter()}),e.next=8,a;case 8:if(f=e.sent,d){e.next=12;break}return e.next=12,c.getWriter().close();case 12:return e.next=14,h;case 14:return e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)}))),uF.apply(this,arguments)}function cF(e){var t,n=new Promise((function(e){return t=e}));return{writable:new WritableStream({write:function(t){return _e(ye().mark((function n(){var r;return ye().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.getWriter(),n.next=3,r.ready;case 3:return n.next=5,r.write(t);case 5:r.releaseLock();case 6:case"end":return n.stop()}}),n)})))()},close:function(){t()},abort:function(t){return e.getWriter().abort(t)}}),closed:n}}var hF=!0,dF=!0;function fF(e,t){var n=t.worker,r=t.writer,i=t.onTaskFinished,a=t.transferStreams;try{var o=e.value,s=e.readable,l=e.writable,u=[];if(o&&(o.byteLength<o.buffer.byteLength?e.value=o.buffer.slice(0,o.byteLength):e.value=o.buffer,u.push(e.value)),a&&dF?(s&&u.push(s),l&&u.push(l)):e.readable=e.writable=null,u.length)try{return n.postMessage(e,u),!0}catch(T2){dF=!1,e.readable=e.writable=null,n.postMessage(e)}else n.postMessage(e)}catch(c){throw r&&r.releaseLock(),i(),c}}function pF(){return pF=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E=function(e,t){e?d(e):h(t),c&&c.releaseLock(),f()},r=t.data,i=r.type,a=r.value,o=r.messageId,s=r.result,l=r.error,u=n.reader,c=n.writer,h=n.resolveResult,d=n.rejectResult,f=n.onTaskFinished,e.prev=4,!l){e.next=12;break}p=l.message,v=l.stack,m=l.code,g=l.name,y=new Error(p),Object.assign(y,{stack:v,code:m,name:g}),E(y),e.next=26;break;case 12:if(i!=YL){e.next=19;break}return e.next=15,u.read();case 15:b=e.sent,_=b.value,x=b.done,fF({type:KL,value:_,done:x,messageId:o},n);case 19:if(i!=KL){e.next=25;break}return e.next=22,c.ready;case 22:return e.next=24,c.write(new Uint8Array(a));case 24:fF({type:qL,messageId:o},n);case 25:i==$L&&E(null,s);case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(4),fF({type:$L,messageId:o},n),E(e.t0);case 32:case"end":return e.stop()}}),e,null,[[4,28]])}))),pF.apply(this,arguments)}var vF=[],mF=[],gF=0;function yF(e,t){return bF.apply(this,arguments)}function bF(){return bF=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h,d,f,p,v,m,g;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=function(e){if(mF.length){var t=It(mF.splice(0,1),1)[0],r=t.resolve,i=t.stream,a=t.workerOptions;r(new nF(e,i,a,g))}else e.worker?(xF(e),_F(e,n)):vF=vF.filter((function(t){return t!=e}))},m=function(){return(m=_e(ye().mark((function e(){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=vF.find((function(e){return!e.busy})))){e.next=6;break}return xF(r),e.abrupt("return",new nF(r,t,n,g));case 6:if(!(vF.length<f)){e.next=13;break}return i={indexWorker:gF},gF++,vF.push(i),e.abrupt("return",new nF(i,t,n,g));case 13:return e.abrupt("return",new Promise((function(e){return mF.push({resolve:e,stream:t,workerOptions:n})})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},v=function(){return m.apply(this,arguments)},r=n.options,i=n.config,a=r.transferStreams,o=r.useWebWorkers,s=r.useCompressionStream,l=r.codecType,u=r.compressed,c=r.signed,h=r.encrypted,d=i.workerScripts,f=i.maxWorkers,n.transferStreams=a||a===fD,p=!u&&!c&&!h&&!n.transferStreams,n.useWebWorkers=!p&&(o||o===fD&&i.useWebWorkers),n.scripts=n.useWebWorkers&&d?d[l]:[],r.useCompressionStream=s||s===fD&&i.useCompressionStream,e.next=13,v();case 13:return e.abrupt("return",e.sent.run());case 14:case"end":return e.stop()}}),e)}))),bF.apply(this,arguments)}function _F(e,t){var n=t.config.terminateWorkerTimeout;Number.isFinite(n)&&n>=0&&(e.terminated?e.terminated=!1:e.terminateTimeout=setTimeout(_e(ye().mark((function t(){return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return vF=vF.filter((function(t){return t!=e})),t.prev=1,t.next=4,e.terminate();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,null,[[1,6]])}))),n))}function xF(e){var t=e.terminateTimeout;t&&(clearTimeout(t),e.terminateTimeout=null)}var EF="writable",wF=function(){function e(){l(this,e),this.size=0}return d(e,[{key:"init",value:function(){this.initialized=!0}}]),e}(),TF=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"readable",get:function(){var e=this,t=e.chunkSize,n=void 0===t?65536:t,r=new ReadableStream({start:function(){this.chunkOffset=0},pull:function(t){var i=this;return _e(ye().mark((function a(){var o,s,l,u,c;return ye().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return o=r.offset,s=void 0===o?0:o,l=r.size,u=r.diskNumberStart,c=i.chunkOffset,a.t0=t,a.next=5,NF(e,s+c,Math.min(n,l-c),u);case 5:a.t1=a.sent,a.t0.enqueue.call(a.t0,a.t1),c+n>l?t.close():i.chunkOffset+=n;case 8:case"end":return a.stop()}}),a)})))()}});return r}}]),n}(wF),SF=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),r=t.call(this),Object.assign(m(r),{blob:e,size:e.size}),r}return d(n,[{key:"readUint8Array",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=t+n,a=t||i<r.size?r.blob.slice(t,i):r.blob,e.next=5,a.arrayBuffer();case 5:return(o=e.sent).byteLength>n&&(o=o.slice(t,i)),e.abrupt("return",new Uint8Array(o));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(TF),kF=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n);var i=m(r=t.call(this)),a=new TransformStream,o=[];return e&&o.push(["Content-Type",e]),Object.defineProperty(i,EF,{get:function(){return a.writable}}),i.blob=new Response(a.readable,{headers:o}).blob(),r}return d(n,[{key:"getData",value:function(){return this.blob}}]),n}(wF),CF=function(e){p(n,e);var t=g(n);function n(e){return l(this,n),t.call(this,new Blob([e],{type:"text/plain"}))}return d(n)}(SF);var AF=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).readers=e,r}return d(n,[{key:"init",value:function(){var e=_e(ye().mark((function e(){var t,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this).readers,t.lastDiskNumber=0,t.lastDiskOffset=0,e.next=6,Promise.all(r.map(function(){var e=_e(ye().mark((function e(n,i){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:i!=r.length-1&&(t.lastDiskOffset+=n.size),t.size+=n.size;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:lm(v(n.prototype),"init",this).call(this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readUint8Array",value:function(){var e=_e(ye().mark((function e(t,n){var r,i,a,o,s,l,u,c,h,d=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=d.length>2&&void 0!==d[2]?d[2]:0,i=this,a=this.readers,-1==(s=r)&&(s=a.length-1),l=t;l>=a[s].size;)l-=a[s].size,s++;if(u=a[s],c=u.size,!(l+n<=c)){e.next=15;break}return e.next=12,NF(u,l,n);case 12:o=e.sent,e.next=28;break;case 15:return h=c-l,o=new Uint8Array(n),e.t0=o,e.next=20,NF(u,l,h);case 20:return e.t1=e.sent,e.t0.set.call(e.t0,e.t1),e.t2=o,e.next=25,i.readUint8Array(t+h,n-h,r);case 25:e.t3=e.sent,e.t4=h,e.t2.set.call(e.t2,e.t3,e.t4);case 28:return i.lastDiskNumber=Math.max(s,i.lastDiskNumber),e.abrupt("return",o);case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(TF),IF=function(e){p(n,e);var t=g(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295;l(this,n);var a,o,s,u=m(r=t.call(this));Object.assign(u,{diskNumber:0,diskOffset:0,size:0,maxSize:i,availableSize:i});var c=new WritableStream({write:function(t){var n=this;return _e(ye().mark((function r(){var i,l,c;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=u.availableSize,s){r.next=23;break}return r.next=4,e.next();case 4:if(l=r.sent,c=l.value,!l.done||c){r.next=11;break}throw new Error("Writer iterator completed too soon");case 11:return(a=c).size=0,a.maxSize&&(u.maxSize=a.maxSize),u.availableSize=u.maxSize,r.next=17,OF(a);case 17:o=c.writable,s=o.getWriter();case 19:return r.next=21,n.write(t);case 21:r.next=37;break;case 23:if(!(t.length>=i)){r.next=35;break}return r.next=26,h(t.slice(0,i));case 26:return r.next=28,f();case 28:return u.diskOffset+=a.size,u.diskNumber++,s=null,r.next=33,n.write(t.slice(i));case 33:r.next=37;break;case 35:return r.next=37,h(t);case 37:case"end":return r.stop()}}),r)})))()},close:function(){return _e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ready;case 2:return e.next=4,f();case 4:case"end":return e.stop()}}),e)})))()}});function h(e){return d.apply(this,arguments)}function d(){return(d=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.length)){e.next=9;break}return e.next=4,s.ready;case 4:return e.next=6,s.write(t);case 6:a.size+=n,u.size+=n,u.availableSize-=n;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.size=a.size,e.next=3,s.close();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object.defineProperty(u,EF,{get:function(){return c}}),r}return d(n)}(wF);function OF(e,t){return PF.apply(this,arguments)}function PF(){return(PF=_e(ye().mark((function e(t,n){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.init||t.initialized){e.next=5;break}return e.next=3,t.init(n);case 3:e.next=6;break;case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MF(e){return Array.isArray(e)&&(e=new AF(e)),e instanceof ReadableStream&&(e={readable:e}),e}function RF(e){e.writable===fD&&typeof e.next==vD&&(e=new IF(e)),e instanceof WritableStream&&(e={writable:e});var t=e.writable;return t.size===fD&&(t.size=0),e instanceof IF||Object.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}function NF(e,t,n,r){return e.readUint8Array(t,n,r)}function DF(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new LF(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function LF(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return LF=function(e){this.s=e,this.n=e.next},LF.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new LF(e)}function FF(e,t){this.v=e,this.k=t}function BF(e){return new FF(e,0)}function UF(e){var t,n;function r(t,n){try{var a=e[t](n),o=a.value,s=o instanceof FF;Promise.resolve(s?o.v:o).then((function(n){if(s){var l="return"===t?"return":"next";if(!o.k||n.done)return r(l,n);n=e[l](n).value}i(a.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(l){i("throw",l)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(a,o){var s={key:e,arg:i,resolve:a,reject:o,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function HF(e){return function(){return new UF(e.apply(this,arguments))}}UF.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},UF.prototype.next=function(e){return this._invoke("next",e)},UF.prototype.throw=function(e){return this._invoke("throw",e)},UF.prototype.return=function(e){return this._invoke("return",e)};var jF="\0\u263a\u263b\u2665\u2666\u2663\u2660\u2022\u25d8\u25cb\u25d9\u2642\u2640\u266a\u266b\u263c\u25ba\u25c4\u2195\u203c\xb6\xa7\u25ac\u21a8\u2191\u2193\u2192\u2190\u221f\u2194\u25b2\u25bc !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xc7\xfc\xe9\xe2\xe4\xe0\xe5\xe7\xea\xeb\xe8\xef\xee\xec\xc4\xc5\xc9\xe6\xc6\xf4\xf6\xf2\xfb\xf9\xff\xd6\xdc\xa2\xa3\xa5\u20a7\u0192\xe1\xed\xf3\xfa\xf1\xd1\xaa\xba\xbf\u2310\xac\xbd\xbc\xa1\xab\xbb\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c\u2588\u2584\u258c\u2590\u2580\u03b1\xdf\u0393\u03c0\u03a3\u03c3\xb5\u03c4\u03a6\u0398\u03a9\u03b4\u221e\u03c6\u03b5\u2229\u2261\xb1\u2265\u2264\u2320\u2321\xf7\u2248\xb0\u2219\xb7\u221a\u207f\xb2\u25a0 ".split("");jF.length;var zF,VF="filename",GF="rawFilename",WF="comment",XF="rawComment",YF="uncompressedSize",KF="compressedSize",qF="offset",$F="diskNumberStart",ZF="lastModDate",QF="rawLastModDate",JF="lastAccessDate",eB="creationDate",tB="internalFileAttribute",nB="externalFileAttribute",rB="msDosCompatible",iB="zip64",aB=[VF,GF,KF,YF,ZF,QF,WF,XF,JF,eB,qF,$F,$F,tB,nB,rB,iB,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"],oB=d((function e(t){var n=this;l(this,e),aB.forEach((function(e){return n[e]=t[e]}))}));y(zF={},LN,{getValue:sB,bytes:4}),y(zF,DN,{getValue:lB,bytes:8});function sB(e,t){return e.getUint32(t,!0)}function lB(e,t){return Number(e.getBigUint64(t,!0))}var uB="Zip file comment exceeds 64KB",cB="File entry comment exceeds 64KB",hB="File entry name exceeds 64KB",dB="Version exceeds 65535",fB="The strength must equal 1, 2, or 3",pB="Extra field type exceeds 65535",vB="Extra field data exceeds 64KB",mB="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",gB=new Uint8Array([7,0,2,0,65,69,3,0,0]),yB=0,bB=[],_B=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};l(this,e);var r=(t=RF(t)).availableSize!==fD&&t.availableSize>0&&t.availableSize!==1/0&&t.maxSize!==fD&&t.maxSize>0&&t.maxSize!==1/0;Object.assign(this,{writer:t,addSplitZipSignature:r,options:n,config:xD(),files:new Map,filenames:new Set,offset:t.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}return d(e,[{key:"add",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a,o,s,l,u=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=u.length>1?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},a=(i=this).pendingAddFileCalls,o=i.config,!(yB<o.maxWorkers)){e.next=9;break}yB++,e.next=11;break;case 9:return e.next=11,new Promise((function(e){return bB.push(e)}));case 11:if(e.prev=11,t=t.trim(),!i.filenames.has(t)){e.next=15;break}throw new Error("File already exists");case 15:return i.filenames.add(t),s=xB(i,t,n,r),a.add(s),e.next=20,s;case 20:return e.abrupt("return",e.sent);case 23:throw e.prev=23,e.t0=e.catch(11),i.filenames.delete(t),e.t0;case 27:return e.prev=27,a.delete(s),(l=bB.shift())?l():yB--,e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[11,23,27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=_e(ye().mark((function e(){var t,n,r,i,a,o,s=arguments;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:new Uint8Array,n=s.length>1&&void 0!==s[1]?s[1]:{},r=this,i=this.pendingAddFileCalls,a=this.writer,o=a.writable;case 5:if(!i.size){e.next=10;break}return e.next=8,Promise.allSettled(Array.from(i));case 8:e.next=5;break;case 10:return e.next=12,NB(this,t,n);case 12:if(UB(r,n,"preventClose")){e.next=16;break}return e.next=16,o.getWriter().close();case 16:return e.abrupt("return",a.getData?a.getData():o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function xB(e,t,n,r){return EB.apply(this,arguments)}function EB(){return EB=_e(ye().mark((function e(t,n,r,i){var a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,$,Z;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n.trim(),i.directory&&!n.endsWith(cD)?n+=cD:i.directory=n.endsWith(cD),a=UB(t,i,"encodeText",MD),!(YB(o=a(n))>LN)){e.next=6;break}throw new Error(hB);case 6:if(s=i.comment||"",!(YB(l=a(s))>LN)){e.next=10;break}throw new Error(cB);case 10:if(!((u=UB(t,i,"version",sD))>LN)){e.next=13;break}throw new Error(dB);case 13:if(!((c=UB(t,i,"versionMadeBy",20))>LN)){e.next=16;break}throw new Error(dB);case 16:if(h=UB(t,i,ZF,new Date),d=UB(t,i,JF),f=UB(t,i,eB),p=UB(t,i,rB,!0),v=UB(t,i,tB,0),m=UB(t,i,nB,0),g=UB(t,i,"password"),y=UB(t,i,"rawPassword"),b=UB(t,i,"encryptionStrength",3),_=UB(t,i,"zipCrypto"),x=UB(t,i,"extendedTimestamp",!0),E=UB(t,i,"keepOrder",!0),w=UB(t,i,"level"),T=UB(t,i,"useWebWorkers"),S=UB(t,i,"bufferedWrite"),k=UB(t,i,"dataDescriptorSignature",!1),C=UB(t,i,"signal"),A=UB(t,i,"useCompressionStream"),I=UB(t,i,"dataDescriptor",!0),O=UB(t,i,iB),g===fD||b===fD||!(b<1||b>3)){e.next=38;break}throw new Error(fB);case 38:if(P=new Uint8Array,(M=i.extraField)&&(R=0,N=0,M.forEach((function(e){return R+=4+YB(e)})),P=new Uint8Array(R),M.forEach((function(e,t){if(t>LN)throw new Error(pB);if(YB(e)>LN)throw new Error(vB);WB(P,new Uint16Array([t]),N),WB(P,new Uint16Array([YB(e)]),N+2),WB(P,e,N+4),N+=4+YB(e)}))),D=0,L=0,F=0,B=!0===O,!r){e.next=50;break}return r=MF(r),e.next=49,OF(r);case 49:r.size===fD?(I=!0,(O||O===fD)&&(O=!0,F=D=DN)):(F=r.size,D=HB(F));case 50:if(U=t.writer,H=U.diskOffset,j=U.diskNumber,z=U.maxSize,V=B||F>=DN,G=B||D>=DN,W=B||t.offset+t.pendingEntriesSize-H>=DN,X=UB(t,i,"supportZip64SplitFile",!0),Y=X&&B||j+Math.ceil(t.pendingEntriesSize/z)>=LN,!(W||V||G||Y)){e.next=62;break}if(!1!==O&&E){e.next=61;break}throw new Error(mB);case 61:O=!0;case 62:return O=O||!1,i=Object.assign({},i,{rawFilename:o,rawComment:l,version:u,versionMadeBy:c,lastModDate:h,lastAccessDate:d,creationDate:f,rawExtraField:P,zip64:O,zip64UncompressedSize:V,zip64CompressedSize:G,zip64Offset:W,zip64DiskNumberStart:Y,password:g,rawPassword:y,level:A||t.config.CompressionStream!==fD?w:0,useWebWorkers:T,encryptionStrength:b,extendedTimestamp:x,zipCrypto:_,bufferedWrite:S,keepOrder:E,dataDescriptor:I,dataDescriptorSignature:k,signal:C,msDosCompatible:p,internalFileAttribute:v,externalFileAttribute:m,useCompressionStream:A}),K=CB(i),q=IB(i),$=YB(K.localHeaderArray,q.dataDescriptorArray),L=$+D,t.options.usdz&&(L+=L+64),t.pendingEntriesSize+=L,e.prev=70,e.next=73,wB(t,n,r,{headerInfo:K,dataDescriptorInfo:q,metadataSize:$},i);case 73:Z=e.sent;case 74:return e.prev=74,t.pendingEntriesSize-=L,e.finish(74);case 77:return Object.assign(Z,{name:n,comment:s,extraField:M}),e.abrupt("return",new oB(Z));case 79:case"end":return e.stop()}}),e,null,[[70,,74,77]])}))),EB.apply(this,arguments)}function wB(e,t,n,r,i){return TB.apply(this,arguments)}function TB(){return TB=_e(ye().mark((function e(t,n,r,i,a){var o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M=function(){return M=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(YB(h.localHeaderArray)>s.availableSize)){e.next=4;break}return s.availableSize=0,e.next=4,LB(t,new Uint8Array);case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)},P=function(e){return M.apply(this,arguments)},O=function(){return(O=_e(ye().mark((function e(){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.writerLocked=!0,n=t.lockWriter,t.lockWriter=new Promise((function(e){return m=function(){t.writerLocked=!1,e()}})),e.next=5,n;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},I=function(){return O.apply(this,arguments)},A=function(){p.lock=new Promise((function(e){return g=e}))},o=t.files,s=t.writer,l=a.keepOrder,u=a.dataDescriptor,c=a.signal,h=i.headerInfo,d=t.options.usdz,f=Array.from(o.values()).pop(),p={},o.set(n,p),e.prev=12,l&&(E=f&&f.lock,A()),!(a.bufferedWrite||t.writerLocked||t.bufferedWrites&&l)&&u||d){e.next=24;break}return _=new TransformStream,x=new Response(_.readable).blob(),_.writable.size=0,v=!0,t.bufferedWrites++,e.next=22,OF(s);case 22:e.next=27;break;case 24:return _=s,e.next=27,I();case 27:return e.next=29,OF(_);case 29:if(w=s.writable,T=s.diskOffset,!t.addSplitZipSignature){e.next=39;break}return delete t.addSplitZipSignature,S=new Uint8Array(4),VB(XB(S),0,jN),e.next=38,LB(w,S);case 38:t.offset+=4;case 39:if(d&&AB(i,t.offset-T),v){e.next=45;break}return e.next=43,E;case 43:return e.next=45,P(w);case 45:return k=s.diskNumber,b=!0,p.diskNumberStart=k,e.next=50,SB(r,_,p,i,t.config,a);case 50:if(p=e.sent,b=!1,o.set(n,p),p.filename=n,!v){e.next=77;break}return e.next=57,_.writable.getWriter().close();case 57:return e.next=59,x;case 59:return C=e.sent,e.next=62,E;case 62:return e.next=64,I();case 64:if(y=!0,u){e.next=69;break}return e.next=68,PB(p,C,w,a);case 68:C=e.sent;case 69:return e.next=71,P(w);case 71:return p.diskNumberStart=s.diskNumber,T=s.diskOffset,e.next=75,C.stream().pipeTo(w,{preventClose:!0,preventAbort:!0,signal:c});case 75:w.size+=C.size,y=!1;case 77:if(p.offset=t.offset-T,!p.zip64){e.next=82;break}RB(p,a),e.next=84;break;case 82:if(!(p.offset>=DN)){e.next=84;break}throw new Error(mB);case 84:return t.offset+=p.size,e.abrupt("return",p);case 88:if(e.prev=88,e.t0=e.catch(12),v&&y||!v&&b){if(t.hasCorruptedEntries=!0,e.t0)try{e.t0.corruptedEntry=!0}catch(T2){}v?t.offset+=_.writable.size:t.offset=_.writable.size}throw o.delete(n),e.t0;case 93:return e.prev=93,v&&t.bufferedWrites--,g&&g(),m&&m(),e.finish(93);case 98:case"end":return e.stop()}}),e,null,[[12,88,93,98]])}))),TB.apply(this,arguments)}function SB(e,t,n,r,i,a){return kB.apply(this,arguments)}function kB(){return kB=_e(ye().mark((function e(t,n,r,i,a,o){var s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,$,Z,Q,J,ee,te,ne,re,ie,ae,oe,se,le,ue;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.diskNumberStart,l=r.lock,u=i.headerInfo,c=i.dataDescriptorInfo,h=i.metadataSize,d=u.localHeaderArray,f=u.headerArray,p=u.lastModDate,v=u.rawLastModDate,m=u.encrypted,g=u.compressed,y=u.version,b=u.compressionMethod,_=u.rawExtraFieldExtendedTimestamp,x=u.extraFieldExtendedTimestampFlag,E=u.rawExtraFieldNTFS,w=u.rawExtraFieldAES,T=c.dataDescriptorArray,S=o.rawFilename,k=o.lastAccessDate,C=o.creationDate,A=o.password,I=o.rawPassword,O=o.level,P=o.zip64,M=o.zip64UncompressedSize,R=o.zip64CompressedSize,N=o.zip64Offset,D=o.zip64DiskNumberStart,L=o.zipCrypto,F=o.dataDescriptor,B=o.directory,U=o.versionMadeBy,H=o.rawComment,j=o.rawExtraField,z=o.useWebWorkers,V=o.onstart,G=o.onprogress,W=o.onend,X=o.signal,Y=o.encryptionStrength,K=o.extendedTimestamp,q=o.msDosCompatible,$=o.internalFileAttribute,Z=o.externalFileAttribute,Q=o.useCompressionStream,J={lock:l,versionMadeBy:U,zip64:P,directory:Boolean(B),filenameUTF8:!0,rawFilename:S,commentUTF8:!0,rawComment:H,rawExtraFieldExtendedTimestamp:_,rawExtraFieldNTFS:E,rawExtraFieldAES:w,rawExtraField:j,extendedTimestamp:K,msDosCompatible:q,internalFileAttribute:$,externalFileAttribute:Z,diskNumberStart:s},ee=0,te=0,re=n.writable,!t){e.next=25;break}return t.chunkSize=ED(a),e.next=13,LB(re,d);case 13:return ie=t.readable,ae=ie.size=t.size,oe={options:{codecType:ZL,level:O,rawPassword:I,password:A,encryptionStrength:Y,zipCrypto:m&&L,passwordVerification:m&&L&&v>>8&255,signed:!0,compressed:g,encrypted:m,useWebWorkers:z,useCompressionStream:Q,transferStreams:!1},config:a,streamOptions:{signal:X,size:ae,onstart:V,onprogress:G,onend:W}},e.next=18,yF({readable:ie,writable:re},oe);case 18:se=e.sent,te=se.inputSize,ee=se.outputSize,ne=se.signature,re.size+=te,e.next=27;break;case 25:return e.next=27,LB(re,d);case 27:if(P?(ue=4,M&&(ue+=8),R&&(ue+=8),N&&(ue+=8),D&&(ue+=4),le=new Uint8Array(ue)):le=new Uint8Array,OB({signature:ne,rawExtraFieldZip64:le,compressedSize:ee,uncompressedSize:te,headerInfo:u,dataDescriptorInfo:c},o),!F){e.next=32;break}return e.next=32,LB(re,T);case 32:return Object.assign(J,{uncompressedSize:te,compressedSize:ee,lastModDate:p,rawLastModDate:v,creationDate:C,lastAccessDate:k,encrypted:m,size:h+ee,compressionMethod:b,version:y,headerArray:f,signature:ne,rawExtraFieldZip64:le,extraFieldExtendedTimestampFlag:x,zip64UncompressedSize:M,zip64CompressedSize:R,zip64Offset:N,zip64DiskNumberStart:D}),e.abrupt("return",J);case 34:case"end":return e.stop()}}),e)}))),kB.apply(this,arguments)}function CB(e){var t,n,r,i,a=e.rawFilename,o=e.lastModDate,s=e.lastAccessDate,l=e.creationDate,u=e.rawPassword,c=e.password,h=e.level,d=e.zip64,f=e.zipCrypto,p=e.dataDescriptor,v=e.directory,m=e.rawExtraField,g=e.encryptionStrength,y=e.extendedTimestamp,b=0!==h&&!v,_=Boolean(c&&YB(c)||u&&YB(u)),x=e.version;if(_&&!f){var E=XB(t=new Uint8Array(YB(gB)+2));zB(E,0,QN),WB(t,gB,2),jB(E,8,g)}else t=new Uint8Array;if(y){var w=XB(r=new Uint8Array(9+(s?4:0)+(l?4:0)));zB(w,0,tD),zB(w,2,YB(r)-4),jB(w,4,i=1+(s?2:0)+(l?4:0));var T=5;VB(w,T,Math.floor(o.getTime()/1e3)),T+=4,s&&(VB(w,T,Math.floor(s.getTime()/1e3)),T+=4),l&&VB(w,T,Math.floor(l.getTime()/1e3));try{var S=XB(n=new Uint8Array(36)),k=BB(o);zB(S,0,JN),zB(S,2,32),zB(S,8,eD),zB(S,10,24),GB(S,12,k),GB(S,20,BB(s)||k),GB(S,28,BB(l)||k)}catch(T2){n=new Uint8Array}}else n=r=new Uint8Array;var C=aD;p&&(C|=iD);var A=BN;b&&(A=FN),d&&(x=x>lD?x:lD),_&&(C|=rD,f||(x=x>uD?x:uD,A=UN,b&&(t[9]=FN)));var I=new Uint8Array(26),O=XB(I);zB(O,0,x),zB(O,2,C),zB(O,4,A);var P,M=new Uint32Array(1),R=XB(M);zB(R,0,((P=o<dD?dD:o>hD?hD:o).getHours()<<6|P.getMinutes())<<5|P.getSeconds()/2),zB(R,2,(P.getFullYear()-1980<<4|P.getMonth()+1)<<5|P.getDate());var N=M[0];VB(O,6,N),zB(O,22,YB(a));var D=YB(t,r,n,m);zB(O,24,D);var L=new Uint8Array(30+YB(a)+D);return VB(XB(L),0,HN),WB(L,I,4),WB(L,a,30),WB(L,t,30+YB(a)),WB(L,r,30+YB(a,t)),WB(L,n,30+YB(a,t,r)),WB(L,m,30+YB(a,t,r,n)),{localHeaderArray:L,headerArray:I,headerView:O,lastModDate:o,rawLastModDate:N,encrypted:_,compressed:b,version:x,compressionMethod:A,extraFieldExtendedTimestampFlag:i,rawExtraFieldExtendedTimestamp:r,rawExtraFieldNTFS:n,rawExtraFieldAES:t,extraFieldLength:D}}function AB(e,t){var n=e.headerInfo,r=n.localHeaderArray,i=n.extraFieldLength,a=(XB(r),64-(t+YB(r))%64);a<4&&(a+=64);var o=new Uint8Array(a),s=XB(o);zB(s,0,nD),zB(s,2,a-2);var l=r;n.localHeaderArray=r=new Uint8Array(YB(l)+a),WB(r,l),WB(r,o,YB(l)),zB(XB(r),28,i+a),e.metadataSize+=a}function IB(e){var t,n=e.zip64,r=e.dataDescriptor,i=e.dataDescriptorSignature,a=new Uint8Array,o=0;return r&&(t=XB(a=new Uint8Array(n?i?24:20:i?16:12)),i&&(o=4,VB(t,0,zN))),{dataDescriptorArray:a,dataDescriptorView:t,dataDescriptorOffset:o}}function OB(e,t){var n=e.signature,r=e.rawExtraFieldZip64,i=e.compressedSize,a=e.uncompressedSize,o=e.headerInfo,s=e.dataDescriptorInfo,l=o.headerView,u=o.encrypted,c=s.dataDescriptorView,h=s.dataDescriptorOffset,d=t.zip64,f=t.zip64UncompressedSize,p=t.zip64CompressedSize,v=t.zipCrypto,m=t.dataDescriptor;if(u&&!v||n===fD||(VB(l,10,n),m&&VB(c,h,n)),d){var g=XB(r);zB(g,0,ZN),zB(g,2,YB(r)-4);var y=4;f&&(VB(l,18,DN),GB(g,y,BigInt(a)),y+=8),p&&(VB(l,14,DN),GB(g,y,BigInt(i))),m&&(GB(c,h+4,BigInt(i)),GB(c,h+12,BigInt(a)))}else VB(l,14,i),VB(l,18,a),m&&(VB(c,h+4,i),VB(c,h+8,a))}function PB(e,t,n,r){return MB.apply(this,arguments)}function MB(){return(MB=_e(ye().mark((function e(t,n,r,i){var a,o,s;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.zipCrypto,e.next=3,n.slice(0,26).arrayBuffer();case 3:return 26!=(o=e.sent).byteLength&&(o=o.slice(0,26)),s=new DataView(o),t.encrypted&&!a||VB(s,14,t.signature),t.zip64?(VB(s,18,DN),VB(s,22,DN)):(VB(s,18,t.compressedSize),VB(s,22,t.uncompressedSize)),e.next=10,LB(r,new Uint8Array(o));case 10:return e.abrupt("return",n.slice(o.byteLength));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RB(e,t){var n=e.rawExtraFieldZip64,r=e.offset,i=e.diskNumberStart,a=t.zip64UncompressedSize,o=t.zip64CompressedSize,s=t.zip64Offset,l=t.zip64DiskNumberStart,u=XB(n),c=4;a&&(c+=8),o&&(c+=8),s&&(GB(u,c,BigInt(r)),c+=8),l&&VB(u,c,i)}function NB(e,t,n){return DB.apply(this,arguments)}function DB(){return DB=_e(ye().mark((function e(t,n,r){var i,a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,$,Z,Q,J,ee,te,ne,re,ie,ae,oe,se,le,ue,ce,he;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.files,a=t.writer,o=a.diskOffset,s=a.writable,l=a.diskNumber,u=0,c=0,h=t.offset-o,d=i.size,f=Gy(i);try{for(f.s();!(p=f.n()).done;)v=It(p.value,2),m=v[1],g=m.rawFilename,y=m.rawExtraFieldZip64,b=m.rawExtraFieldAES,_=m.rawComment,x=m.rawExtraFieldNTFS,E=m.rawExtraField,w=m.extendedTimestamp,T=m.extraFieldExtendedTimestampFlag,S=m.lastModDate,k=void 0,w?(k=new Uint8Array(9),zB(C=XB(k),0,tD),zB(C,2,5),jB(C,4,T),VB(C,5,Math.floor(S.getTime()/1e3))):k=new Uint8Array,m.rawExtraFieldCDExtendedTimestamp=k,c+=46+YB(g,_,y,b,x,k,E)}catch(de){f.e(de)}finally{f.f()}return A=new Uint8Array(c),I=XB(A),e.next=13,OF(a);case 13:O=0,P=Gy(Array.from(i.values()).entries()),e.prev=15,P.s();case 17:if((M=P.n()).done){e.next=57;break}if(R=It(M.value,2),N=R[0],D=R[1],L=D.offset,F=D.rawFilename,B=D.rawExtraFieldZip64,U=D.rawExtraFieldAES,H=D.rawExtraFieldCDExtendedTimestamp,j=D.rawExtraFieldNTFS,z=D.rawExtraField,V=D.rawComment,G=D.versionMadeBy,W=D.headerArray,X=D.directory,Y=D.zip64,K=D.zip64UncompressedSize,q=D.zip64CompressedSize,$=D.zip64DiskNumberStart,Z=D.zip64Offset,Q=D.msDosCompatible,J=D.internalFileAttribute,ee=D.externalFileAttribute,te=D.diskNumberStart,ne=D.uncompressedSize,re=D.compressedSize,ie=YB(B,U,H,j,z),VB(I,u,VN),zB(I,u+4,G),ae=XB(W),K||VB(ae,18,ne),q||VB(ae,14,re),WB(A,W,u+6),zB(I,u+30,ie),zB(I,u+32,YB(V)),zB(I,u+34,Y&&$?LN:te),zB(I,u+36,J),ee?VB(I,u+38,ee):X&&Q&&jB(I,u+38,oD),VB(I,u+42,Y&&Z?DN:L),WB(A,F,u+46),WB(A,B,u+46+YB(F)),WB(A,U,u+46+YB(F,B)),WB(A,H,u+46+YB(F,B,U)),WB(A,j,u+46+YB(F,B,U,H)),WB(A,z,u+46+YB(F,B,U,H,j)),WB(A,V,u+46+YB(F)+ie),oe=46+YB(F,V)+ie,!(u-O>a.availableSize)){e.next=46;break}return a.availableSize=0,e.next=45,LB(s,A.slice(O,u));case 45:O=u;case 46:if(u+=oe,!r.onprogress){e.next=55;break}return e.prev=48,e.next=51,r.onprogress(N+1,i.size,new oB(D));case 51:e.next=55;break;case 53:e.prev=53,e.t0=e.catch(48);case 55:e.next=17;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(15),P.e(e.t1);case 62:return e.prev=62,P.f(),e.finish(62);case 65:return e.next=67,LB(s,O?A.slice(O):A);case 67:if(se=a.diskNumber,a.availableSize<YN&&se++,le=UB(t,r,"zip64"),!(h>=DN||c>=DN||d>=LN||se>=LN)){e.next=77;break}if(!1!==le){e.next=76;break}throw new Error(mB);case 76:le=!0;case 77:if(ue=new Uint8Array(le?$N:YN),ce=XB(ue),u=0,le&&(VB(ce,0,WN),GB(ce,4,BigInt(44)),zB(ce,12,45),zB(ce,14,45),VB(ce,16,se),VB(ce,20,l),GB(ce,24,BigInt(d)),GB(ce,32,BigInt(d)),GB(ce,40,BigInt(c)),GB(ce,48,BigInt(h)),VB(ce,56,XN),GB(ce,64,BigInt(h)+BigInt(c)),VB(ce,72,se+1),UB(t,r,"supportZip64SplitFile",!0)&&(se=LN,l=LN),d=LN,h=DN,c=DN,u+=qN+KN),VB(ce,u,GN),zB(ce,u+4,se),zB(ce,u+6,l),zB(ce,u+8,d),zB(ce,u+10,d),VB(ce,u+12,c),VB(ce,u+16,h),!(he=YB(n))){e.next=95;break}if(!(he<=LN)){e.next=94;break}zB(ce,u+20,he),e.next=95;break;case 94:throw new Error(uB);case 95:return e.next=97,LB(s,ue);case 97:if(!he){e.next=100;break}return e.next=100,LB(s,n);case 100:case"end":return e.stop()}}),e,null,[[15,59,62,65],[48,53]])}))),DB.apply(this,arguments)}function LB(e,t){return FB.apply(this,arguments)}function FB(){return FB=_e(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getWriter(),e.prev=1,e.next=4,r.ready;case 4:return t.size+=YB(n),e.next=7,r.write(n);case 7:return e.prev=7,r.releaseLock(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])}))),FB.apply(this,arguments)}function BB(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function UB(e,t,n,r){var i=t[n]===fD?e.options[n]:t[n];return i===fD?r:i}function HB(e){return e+5*(Math.floor(e/16383)+1)}function jB(e,t,n){e.setUint8(t,n)}function zB(e,t,n){e.setUint16(t,n,!0)}function VB(e,t,n){e.setUint32(t,n,!0)}function GB(e,t,n){e.setBigUint64(t,n,!0)}function WB(e,t,n){e.set(t,n)}function XB(e){return new DataView(e.buffer)}function YB(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return t&&(e+=t.length)})),e}var KB;try{KB="file:///D:/sukui/work2023/dragonbones-web/node_modules/@zip.js/zip.js/lib/zip-fs.js"}catch(T2){}function qB(e){if(e)for(;e.childElementCount;)e.firstChild&&e.removeChild(e.firstChild)}function $B(e,t){var n=JSON.stringify(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=t,a.click(),URL.revokeObjectURL(i)}function ZB(e,t){var n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function QB(e,t,n){var r=new Blob([e],{type:n}),i=URL.createObjectURL(r),a=document.createElement("a");a.href=i,a.download=t,a.click(),URL.revokeObjectURL(i)}function JB(e,t){return eU.apply(this,arguments)}function eU(){return(eU=_e(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new kF("application/zip"),i=new _B(r,{bufferedWrite:!0}),t.forEach((function(e){"json"===e.type?i.add(e.name,new CF(JSON.stringify(e.data))):i.add(e.name,new SF(new Blob([e.data])))})),e.next=5,i.close();case 5:return e.next=7,r.getData();case 7:QB(e.sent,"".concat(n,".zip"),"application/zip");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tU(e){return nU.apply(this,arguments)}function nU(){return nU=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(e){n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)}))),nU.apply(this,arguments)}wD({baseURL:KB}),function(e){var t=function(){return URL.createObjectURL(new Blob(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self,k=void 0,v="undefined",S="function";class z{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const C=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;C[e]=t}class x{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^C[255&(t^e[n])];this.t=t}get(){return~this.t}}class A extends p{constructor(){let e;const t=new x;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const _={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=_.i(n);return 32===r?e.concat(t):_.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+_.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=_.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=_.i(s);return r.push(_.h(t+i&31,t+i>32?n:r.pop(),1)),r}},I={p:{m(e){const t=_.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)3&s||(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},k(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(_.h(8*(3&n),r)),t}}},P=class{constructor(e){const t=this;t.blockSize=512,t.v=[1732584193,4023233417,2562383102,271733878,3285377520],t.S=[1518500249,1859775393,2400959708,3395469782],e?(t.C=e.C.slice(0),t.A=e.A.slice(0),t._=e._):t.reset()}reset(){const e=this;return e.C=e.v.slice(0),e.A=[],e._=0,e}update(e){const t=this;"string"==typeof e&&(e=I.I.k(e));const n=t.A=_.concat(t.A,e),r=t._,i=t._=r+_.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.P(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}D(){const e=this;let t=e.A;const n=e.C;t=_.concat(t,[_.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._/4294967296)),t.push(0|e._);t.length;)e.P(t.splice(0,16));return e.reset(),n}V(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}R(e,t){return t<<e|t>>>32-e}P(t){const n=this,s=n.C,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.R(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.R(5,o)+n.V(e,c,f,a)+l+i[e]+n.S[r.floor(e/20)]|0;l=a,a=f,f=n.R(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},D={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={importKey:e=>new V.B(I.p.k(e)),M(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=_;for(t=I.p.k(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},B:class{constructor(e){const t=this,n=t.U=P,r=[[],[]];t.K=[new n,new n];const s=t.K[0].blockSize/32;e.length>s&&(e=(new n).update(e).D());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.K[0].update(r[0]),t.K[1].update(r[1]),t.N=new n(t.K[0])}reset(){const e=this;e.N=new e.U(e.K[0]),e.O=!1}update(e){this.O=!0,this.N.update(e)}digest(){const e=this,t=e.N.D(),n=new e.U(e.K[1]).update(t).D();return e.reset(),n}encrypt(e){if(this.O)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},R=typeof h!=v&&typeof h.getRandomValues==S,B="Invalid password",E="Invalid signature",M="zipjs-abort-check-password";function U(e){return R?h.getRandomValues(e):D.getRandomValues(e)}const K=16,N={name:"PBKDF2"},O=t.assign({hash:{name:"HMAC"}},N),T=t.assign({iterations:1e3,hash:{name:"SHA-1"}},N),W=["deriveBits"],j=[8,12,16],H=[16,24,32],L=10,F=[0,0,0,0],q=typeof h!=v,G=q&&h.subtle,J=q&&typeof G!=v,Q=I.p,X=class{constructor(e){const t=this;t.T=[[[],[],[],[],[]],[[],[],[],[],[]]],t.T[0][0][0]||t.W();const n=t.T[0][4],r=t.T[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.S=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.j(e,0)}decrypt(e){return this.j(e,1)}W(){const e=this.T[0],t=this.T[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}j(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.S[t],r=n.length/4-2,i=[0,0,0,0],o=this.T[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},Y=class{constructor(e,t){this.H=e,this.L=t,this.F=t}reset(){this.F=this.L}update(e){return this.q(this.H,e,this.F)}G(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}J(e){0===(e[0]=this.G(e[0]))&&(e[1]=this.G(e[1]))}q(e,t,n){let r;if(!(r=t.length))return[];const s=_.l(t);for(let s=0;r>s;s+=4){this.J(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return _.u(t,s)}},Z=V.B;let $=q&&J&&typeof G.importKey==S,ee=q&&J&&typeof G.deriveBits==S;class te extends p{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:o,checkPasswordOnly:c}){super({start(){t.assign(this,{ready:new u((e=>this.X=e)),password:ie(e,n),signed:r,Y:o-1,pending:new i})},async transform(e,t){const n=this,{password:r,Y:o,X:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await se(e,t,n,ce(r,0,j[t])),o=ce(r,j[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(B)})(n,o,r,ce(e,0,j[o]+2)),e=ce(e,j[o]+2),c?t.error(new s(M)):f()):await a;const l=new i(e.length-L-(e.length-L)%K);t.enqueue(re(n,e,l,0,L,!0))},async flush(e){const{signed:t,Z:n,$:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ce(o,0,o.length-L),a=ce(o,o.length-L);let l=new i;if(f.length){const e=ae(Q,f);r.update(e);const t=n.update(e);l=fe(Q,t)}if(t){const e=ce(fe(Q,r.digest()),0,L);for(let t=0;L>t;t++)if(e[t]!=a[t])throw new s(E)}e.enqueue(l)}}})}}class ne extends p{constructor({password:e,rawPassword:n,encryptionStrength:r}){let s;super({start(){t.assign(this,{ready:new u((e=>this.X=e)),password:ie(e,n),Y:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,Y:s,X:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=U(new i(j[t]));return oe(r,await se(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%K);a.set(f,0),t.enqueue(re(n,e,a,f.length,0))},async flush(e){const{Z:t,$:n,pending:r,ready:o}=this;if(n&&t){await o;let c=new i;if(r.length){const e=t.update(ae(Q,r));n.update(e),c=fe(Q,e)}s.signature=fe(Q,n.digest()).slice(0,L),e.enqueue(oe(c,s.signature))}}}),s=this}}function re(e,t,n,r,s,o){const{Z:c,$:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=oe(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%K)),u=0;l-K>=u;u+=K){const e=ae(Q,ce(t,u,u+K));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(fe(Q,s),u+r)}return e.pending=ce(t,u),n}async function se(n,r,s,o){n.password=null;const c=await(async(e,t,n,r,s)=>{if(!$)return V.importKey(t);try{return await G.importKey("raw",t,n,!1,s)}catch(e){return $=!1,V.importKey(t)}})(0,s,O,0,W),f=await(async(e,t,n)=>{if(!ee)return V.M(t,e.salt,T.iterations,n);try{return await G.deriveBits(e,t,n)}catch(r){return ee=!1,V.M(t,e.salt,T.iterations,n)}})(t.assign({salt:o},T),c,8*(2*H[r]+2)),a=new i(f),l=ae(Q,ce(a,0,H[r])),u=ae(Q,ce(a,H[r],2*H[r])),w=ce(a,2*H[r]);return t.assign(n,{keys:{key:l,ee:u,passwordVerification:w},Z:new Y(new X(l),e.from(F)),$:new Z(u)}),w}function ie(e,t){return t===k?(e=>{if(typeof w==v){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(e):t}function oe(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ce(e,t,n){return e.subarray(t,n)}function fe(e,t){return e.m(t)}function ae(e,t){return e.k(t)}class le extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;if(n.password){const t=we(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(B);e=e.subarray(12)}r?t.error(new s(M)):t.enqueue(we(n,e))}})}}class ue extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=U(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(he(n,t),0),s=12}else r=new i(e.length),s=0;r.set(he(n,e),s),t.enqueue(r)}})}}function we(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,n[r]);return n}function he(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,t[r]);return n}function de(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,te:new x(r[0]),ne:new x(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,i]=e.keys;e.te.append([t]),n=~e.te.get(),s=be(r.imul(be(s+me(n)),134775813)+1),e.ne.append([s>>>24]),i=~e.ne.get(),e.keys=[n,s,i]}function ye(e){const t=2|e.keys[2];return me(r.imul(t,1^t)>>>8)}function me(e){return 255&e}function be(e){return 4294967295&e}const ge="deflate-raw";class ke extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=Se(super.readable);i&&!c||!f||(w=new A,d=xe(d,w)),s&&(d=Ce(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=xe(d,new ue(e)):(h=new ne(e),d=xe(d,h))),ze(u,d,(()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e}))}}class ve extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=Se(super.readable);o&&(i?d=xe(d,new le(e)):(h=new te(e),d=xe(d,h))),a&&(d=Ce(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new A,d=xe(d,w)),ze(this,d,(()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(E)}}))}}function Se(e){return xe(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ze(e,n,r){n=xe(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Ce(e,t,n,r,s){try{e=xe(e,new(t&&r?r:s)(ge,n))}catch(r){if(!t)return e;try{e=xe(e,new s(ge,n))}catch(t){return e}}return e}function xe(e,t){return e.pipeThrough(t)}const Ae="data",_e="close";class Ie extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=ke:s.startsWith("inflate")&&(i=ve);let o=0,c=0;const f=new i(e,n),a=super.readable,l=new p({transform(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush(){t.assign(r,{inputSize:c})}}),u=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=f;t.assign(r,{signature:e,outputSize:o,inputSize:c})}});t.defineProperty(r,"readable",{get:()=>a.pipeThrough(l).pipeThrough(f).pipeThrough(u)})}}class Pe extends p{constructor(e){let t;super({transform:function n(r,s){if(t){const e=new i(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(s.enqueue(r.slice(0,e)),n(r.slice(e),s)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}const De=new a,Ve=new a;let Re,Be=0,Ee=!0;async function Me(e){try{const{options:t,scripts:r,config:s}=e;if(r&&r.length)try{Ee?importScripts.apply(k,r):await Ue(r)}catch(e){Ee=!1,await Ue(r)}self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new z(self.Deflate)),self.Inflate&&(s.DecompressionStream=new z(self.Inflate));const i={highWaterMark:1},o=e.readable||new y({async pull(e){const t=new u((e=>De.set(Be,e)));Ke({type:"pull",messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ve.set(Be,t),Ke({type:Ae,value:e,messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new Ie(t,s);Re=new AbortController;const{signal:a}=Re;await o.pipeThrough(f).pipeThrough(new Pe(s.chunkSize)).pipeTo(c,{signal:a,preventClose:!0,preventAbort:!0}),await c.getWriter().close();const{signature:l,inputSize:w,outputSize:h}=f;Ke({type:_e,result:{signature:l,inputSize:w,outputSize:h}})}catch(e){Ne(e)}}async function Ue(e){for(const t of e)await import(t)}function Ke(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Ne(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i}=e;d({error:{message:t,stack:n,code:r,name:i}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Me(e),t==Ae){const e=De.get(n);De.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ve.get(n);Ve.delete(n),e()}t==_e&&Re.abort()}catch(e){Ne(e)}}));const Oe=15,Te=573,We=-2;function je(t){return He(t.map((([t,n])=>new e(t).fill(n,0,t))))}function He(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?He(n):n)),[])}const Le=[0,1,2,3].concat(...je([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Fe(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.re=n=>{const s=e.se,i=e.oe.ie,o=e.oe.ce;let c,f,a,l=-1;for(n.fe=0,n.ae=Te,c=0;o>c;c++)0!==s[2*c]?(n.le[++n.fe]=l=c,n.ue[c]=0):s[2*c+1]=0;for(;2>n.fe;)a=n.le[++n.fe]=2>l?++l:0,s[2*a]=1,n.ue[a]=0,n.we--,i&&(n.he-=i[2*a+1]);for(e.de=l,c=r.floor(n.fe/2);c>=1;c--)n.pe(s,c);a=o;do{c=n.le[1],n.le[1]=n.le[n.fe--],n.pe(s,1),f=n.le[1],n.le[--n.ae]=c,n.le[--n.ae]=f,s[2*a]=s[2*c]+s[2*f],n.ue[a]=r.max(n.ue[c],n.ue[f])+1,s[2*c+1]=s[2*f+1]=a,n.le[1]=a++,n.pe(s,1)}while(n.fe>=2);n.le[--n.ae]=n.le[1],(t=>{const n=e.se,r=e.oe.ie,s=e.oe.ye,i=e.oe.me,o=e.oe.be;let c,f,a,l,u,w,h=0;for(l=0;Oe>=l;l++)t.ge[l]=0;for(n[2*t.le[t.ae]+1]=0,c=t.ae+1;Te>c;c++)f=t.le[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.de||(t.ge[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.we+=w*(l+u),r&&(t.he+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.ge[l];)l--;t.ge[l]--,t.ge[l+1]+=2,t.ge[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.ge[l];0!==f;)a=t.le[--c],a>e.de||(n[2*a+1]!=l&&(t.we+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;Oe>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.de,n.ge)}}function qe(e,t,n,r,s){const i=this;i.ie=e,i.ye=t,i.me=n,i.ce=r,i.be=s}Fe.ke=[0,1,2,3,4,5,6,7].concat(...je([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Fe.ve=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Fe.Se=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Fe.ze=e=>256>e?Le[e]:Le[256+(e>>>7)],Fe.Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Fe.xe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Fe.Ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Fe._e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ge=je([[144,8],[112,9],[24,7],[8,8]]);qe.Ie=He([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Ge[t]])));const Je=je([[30,5]]);function Qe(e,t,n,r,s){const i=this;i.Pe=e,i.De=t,i.Ve=n,i.Re=r,i.Be=s}qe.Ee=He([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Je[t]]))),qe.Me=new qe(qe.Ie,Fe.Ce,257,286,Oe),qe.Ue=new qe(qe.Ee,Fe.xe,0,30,Oe),qe.Ke=new qe(null,Fe.Ae,0,19,7);const Xe=[new Qe(0,0,0,0,0),new Qe(4,4,8,4,1),new Qe(4,5,16,8,1),new Qe(4,6,32,32,1),new Qe(4,4,16,16,2),new Qe(8,16,32,32,2),new Qe(8,16,128,128,2),new Qe(8,32,128,256,2),new Qe(32,128,258,1024,2),new Qe(32,258,258,4096,2)],Ye=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Ze=113,$e=666,et=262;function tt(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function nt(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,A,_,I,P,D,V,R,B,E,M,U;const K=new Fe,N=new Fe,O=new Fe;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.we=e.he=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ne[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Oe[W]=t,e.Te[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(Fe.ke[n]+256+1)]++,M[2*Fe.ze(t)]++),!(8191&W)&&D>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+Fe.xe[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Oe[c],s=e.Te[c],c++,0===r?Y(s,t):(i=Fe.ke[s],Y(i+256+1,t),o=Fe.Ce[i],0!==o&&(s-=Fe.ve[i],X(s,o)),r--,i=Fe.ze(r),Y(i,n),o=Fe.xe[i],0!==o&&(r-=Fe.Se[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ne.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;D>0?(K.re(e),N.re(e),o=(()=>{let t;for(G(E,K.de),G(M,N.de),O.re(e),t=18;t>=3&&0===U[2*Fe._e[t]+1];t--);return e.we+=14+3*(t+1),t})(),s=e.we+3+7>>>3,i=e.he+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(qe.Ie,qe.Ee)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*Fe._e[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.de+1,N.de+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.We()}function ie(){let e,n,r,s;do{if(s=w-A-C,0===s&&0===C&&0===A)s=f;else if(-1==s)s--;else if(C>=f+f-et){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.je)return;e=t.He(u,C+A,s),A+=e,3>A||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(et>A&&0!==t.je)}function oe(e){let t,n,r=I,s=C,i=_;const o=C>f-et?C-(f-et):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>_||(r>>=2),c>A&&(c=A);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>A?A:i}e.ue=[],e.ge=[],e.le=[],E=[],M=[],U=[],e.pe=(t,n)=>{const r=e.le,s=r[n];let i=n<<1;for(;i<=e.fe&&(i<e.fe&&tt(t,r[i+1],r[i],e.ue)&&i++,!tt(t,s,r[i],e.ue));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.Le=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Fe=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?We:(t.qe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ne=new i(4*T),s=4*T,e.Oe=new o(T),e.Te=new i(T),D=S,V=G,(t=>(t.Ge=t.Je=0,t.Fe=null,e.pending=0,e.Qe=0,n=Ze,c=0,K.se=E,K.oe=qe.Me,N.se=M,N.oe=qe.Ue,O.se=U,O.oe=qe.Ke,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;P=Xe[D].De,R=Xe[D].Pe,B=Xe[D].Ve,I=Xe[D].Re,C=0,k=0,A=0,v=_=2,z=0,p=0})(),0))(t))),e.Xe=()=>42!=n&&n!=Ze&&n!=$e?We:(e.Te=null,e.Oe=null,e.Ne=null,d=null,h=null,u=null,e.qe=null,n==Ze?-3:0),e.Ye=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?We:(Xe[D].Be!=Xe[t].Be&&0!==e.Ge&&(r=e.Ze(1)),D!=t&&(D=t,P=Xe[D].De,R=Xe[D].Pe,B=Xe[D].Ve,I=Xe[D].Re),V=n,r)},e.$e=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return We;if(3>i)return 0;for(i>f-et&&(i=f-et,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ze=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return We;if(!r.et||!r.tt&&0!==r.je||n==$e&&4!=i)return r.Fe=Ye[4],We;if(0===r.nt)return r.Fe=Ye[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(D-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=Ze,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.We(),0===t.nt)return c=-1,0}else if(0===t.je&&I>=i&&4!=i)return t.Fe=Ye[7],-5;if(n==$e&&0!==t.je)return r.Fe=Ye[7],-5;if(0!==t.je||0!==A||0!=i&&n!=$e){switch(R=-1,Xe[D].Be){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ie(),0===A&&0==e)return 0;if(0===A)break}if(C+=A,A=0,n=k+r,(0===C||C>=n)&&(A=C-n,C=n,se(!1),0===t.nt))return 0;if(C-k>=f-et&&(se(!1),0===t.nt))return 0}return se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(et>A){if(ie(),et>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-et||2!=V&&(v=oe(r)),3>v)n=ee(0,255&u[C]),A--,C++;else if(n=ee(C-x,v-3),A-=v,v>P||3>A)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.nt))return 0}return se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(et>A){if(ie(),et>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),_=v,S=x,v=2,0!==s&&P>_&&f-et>=(C-s&65535)&&(2!=V&&(v=oe(s)),5>=v&&(1==V||3==v&&C-x>4096)&&(v=2)),3>_||v>_)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,A--,0===t.nt)return 0}else z=1,C++,A--;else{r=C+A-3,n=ee(C-1-S,_-3),A-=_-1,_-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--_);if(z=0,v=2,C++,n&&(se(!1),0===t.nt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=$e),0==R||2==R)return 0===t.nt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,qe.Ie),$(),9>1+H+10-F&&(X(2,3),Y(256,qe.Ie),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.We(),0===t.nt)return c=-1,0}}return 4!=i?0:1}}function rt(){const e=this;e.rt=0,e.st=0,e.je=0,e.Ge=0,e.nt=0,e.Je=0}function st(e){const t=new rt,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.Le(f),t.et=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.rt=0,t.tt=e,t.je=e.length;do{if(t.st=0,t.nt=n,o=t.Ze(0),0!=o)throw new s("deflating: "+t.Fe);t.st&&(t.st==n?w.push(new i(c)):w.push(c.subarray(0,t.st))),u+=t.st,r&&t.rt>0&&t.rt!=a&&(r(t.rt),a=t.rt)}while(t.je>0||0===t.nt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.st=0,t.nt=n,e=t.Ze(4),1!=e&&0!=e)throw new s("deflating: "+t.Fe);n-t.nt>0&&a.push(c.slice(0,t.st)),f+=t.st}while(t.je>0||0===t.nt);return t.Xe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}rt.prototype={Le(e,t){const n=this;return n.qe=new nt,t||(t=Oe),n.qe.Le(n,e,t)},Ze(e){const t=this;return t.qe?t.qe.Ze(t,e):We},Xe(){const e=this;if(!e.qe)return We;const t=e.qe.Xe();return e.qe=null,t},Ye(e,t){const n=this;return n.qe?n.qe.Ye(n,e,t):We},$e(e,t){const n=this;return n.qe?n.qe.$e(n,e,t):We},He(e,t,n){const r=this;let s=r.je;return s>n&&(s=n),0===s?0:(r.je-=s,e.set(r.tt.subarray(r.rt,r.rt+s),t),r.rt+=s,r.Ge+=s,s)},We(){const e=this;let t=e.qe.pending;t>e.nt&&(t=e.nt),0!==t&&(e.et.set(e.qe.Ne.subarray(e.qe.Qe,e.qe.Qe+t),e.st),e.st+=t,e.qe.Qe+=t,e.Je+=t,e.nt-=t,e.qe.pending-=t,0===e.qe.pending&&(e.qe.Qe=0))}};const it=0,ot=1,ct=-2,ft=-3,at=-4,lt=-5,ut=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],wt=1440,ht=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],dt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],pt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],yt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],mt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],bt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],gt=15;function kt(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,A,_,I,P;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,it;for(S=u[0],k=1;gt>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=gt;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return ft;if(0>(I-=n[g]))return ft;for(n[g]+=I,i[1]=k=0,C=1,_=2;0!=--g;)i[_]=k+=n[C],_++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,A=-S,s[0]=0,x=0,P=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>A+S;){if(b++,A+=S,P=m-A,P=P>S?S:P,(y=1<<(k=v-A))>p+1&&(y-=p+1,_=v,P>k))for(;++k<P&&(y<<=1)>n[++_];)y-=n[_];if(P=1<<k,h[0]+P>wt)return ft;s[b]=x=h[0],h[0]+=P,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>A-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-A,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-A,k=g>>>A;P>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;g&k;k>>>=1)g^=k;for(g^=k,z=(1<<A)-1;(g&z)!=i[b];)b--,A-=S,z=(1<<A)-1}return 0!==I&&1!=m?lt:it}function c(o){let c;for(e||(e=[],t=[],n=new f(gt+1),r=[],s=new f(gt),i=new f(gt+1)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;gt+1>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,gt),0),i.set(n.subarray(0,gt+1),0)}this.it=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==ft?f.Fe="oversubscribed dynamic bit lengths tree":a!=lt&&0!==r[0]||(f.Fe="incomplete dynamic bit lengths tree",a=ft),a},this.ot=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,pt,yt,a,i,u,e,t),h!=it||0===i[0]?(h==ft?w.Fe="oversubscribed literal/length tree":h!=at&&(w.Fe="incomplete literal/length tree",h=ft),h):(c(288),h=o(s,n,r,0,mt,bt,l,f,u,e,t),h!=it||0===f[0]&&n>257?(h==ft?w.Fe="oversubscribed distance tree":h==lt?(w.Fe="incomplete distance tree",h=ft):h!=at&&(w.Fe="empty distance tree with lengths",h=ft),h):it)}}kt.ct=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=ht,r[0]=dt,it);const vt=0,St=1,zt=2,Ct=3,xt=4,At=5,_t=6,It=7,Pt=8,Dt=9;function Vt(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.rt,p=c.je,w=o.ft,h=o.lt,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=ut[e],g=ut[t];do{for(;20>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15,k=a[z+2]+(w&ut[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15;u>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;if(v=a[z+2]+(w&ut[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.wt[y++]=o.wt[S++]}while(0!=--u);else o.wt.set(o.wt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.wt[y++]=o.wt[S++],o.wt[y++]=o.wt[S++],k-=2):(o.wt.set(o.wt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.wt[y++]=o.wt[S++]}while(0!=--k);else o.wt.set(o.wt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(64&u)return c.Fe="invalid distance code",k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ft;f+=a[z+2],f+=w&ut[u],z=3*(l+f),u=a[z]}break}if(64&u)return 32&u?(k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ot):(c.Fe="invalid literal/length code",k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ft);if(f+=a[z+2],f+=w&ut[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.wt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.wt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,it}e.init=(e,i,o,c,f,a)=>{t=vt,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ht=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,A=0,_=0;for(_=y.rt,v=y.je,x=e.ft,A=e.lt,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case vt:if(z>=258&&v>=10&&(e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,m=p(u,w,r,h,s,d,e,y),_=y.rt,v=y.je,x=e.ft,A=e.lt,S=e.write,z=S<e.read?e.read-S-1:e.end-S,m!=it)){t=m==ot?It:Dt;break}c=u,n=r,o=h,t=St;case St:for(b=c;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}if(g=3*(o+(x&ut[b])),x>>>=n[g+1],A-=n[g+1],k=n[g],0===k){f=n[g+2],t=_t;break}if(16&k){a=15&k,i=n[g+2],t=zt;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}if(32&k){t=It;break}return t=Dt,y.Fe="invalid literal/length code",m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case zt:for(b=a;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}i+=x&ut[b],x>>=b,A-=b,c=w,n=s,o=d,t=Ct;case Ct:for(b=c;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}if(g=3*(o+(x&ut[b])),x>>=n[g+1],A-=n[g+1],k=n[g],16&k){a=15&k,l=n[g+2],t=xt;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}return t=Dt,y.Fe="invalid distance code",m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case xt:for(b=a;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}l+=x&ut[b],x>>=b,A-=b,t=At;case At:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);e.wt[S++]=e.wt[C++],z--,C==e.end&&(C=0),i--}t=vt;break;case _t:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,e.wt[S++]=f,z--,t=vt;break;case It:if(A>7&&(A-=8,v++,_--),e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);t=Pt;case Pt:return m=ot,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case Dt:return m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);default:return m=ct,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m)}},e.yt=()=>{}}const Rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Bt=0,Et=1,Mt=2,Ut=3,Kt=4,Nt=5,Ot=6,Tt=7,Wt=8,jt=9;function Ht(e,t){const n=this;let r,s=Bt,o=0,c=0,a=0;const l=[0],u=[0],w=new Vt;let h=0,d=new f(3*wt);const p=new kt;n.lt=0,n.ft=0,n.wt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),s==Ot&&w.yt(e),s=Bt,n.lt=0,n.ft=0,n.read=n.write=0},n.reset(e,null),n.dt=(e,t)=>{let r,s,i;return s=e.st,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.nt&&(r=e.nt),0!==r&&t==lt&&(t=it),e.nt-=r,e.Je+=r,e.et.set(n.wt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.nt&&(r=e.nt),0!==r&&t==lt&&(t=it),e.nt-=r,e.Je+=r,e.et.set(n.wt.subarray(i,i+r),s),s+=r,i+=r),e.st=s,n.read=i,t},n.ht=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.rt,b=e.je,f=n.ft,y=n.lt,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,A,_,I,P;switch(s){case Bt:for(;3>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=Et;break;case 1:S=[],z=[],C=[[]],x=[[]],kt.ct(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=Ot;break;case 2:f>>>=3,y-=3,s=Ut;break;case 3:return f>>>=3,y-=3,s=jt,e.Fe="invalid block type",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t)}break;case Et:for(;32>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=jt,e.Fe="invalid stored block lengths",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);o=65535&f,f=y=0,s=0!==o?Mt:0!==h?Tt:Bt;break;case Mt:if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.dt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(t=it,i=o,i>b&&(i=b),i>k&&(i=k),n.wt.set(e.He(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?Tt:Bt;break;case Ut:for(;14>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=jt,e.Fe="too many length or distance symbols",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=Kt;case Kt:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}r[Rt[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[Rt[a++]]=0;if(l[0]=7,i=p.it(r,l,u,d,e),i!=it)return(t=i)==ft&&(r=null,s=jt),n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);a=0,s=Nt;case Nt:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&ut[i]))+1],w=d[3*(u[0]+(f&ut[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&ut[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=jt,e.Fe="invalid bit length repeat",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,A=[],_=[],I=[],P=[],A[0]=9,_[0]=6,i=c,i=p.ot(257+(31&i),1+(i>>5&31),r,A,_,I,P,d,e),i!=it)return i==ft&&(r=null,s=jt),t=i,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);w.init(A[0],_[0],d,I[0],d,P[0]),s=Ot;case Ot:if(n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,(t=w.ht(n,e,t))!=ot)return n.dt(e,t);if(t=it,w.yt(e),m=e.rt,b=e.je,f=n.ft,y=n.lt,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=Bt;break}s=Tt;case Tt:if(n.write=g,t=n.dt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);s=Wt;case Wt:return t=ot,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);case jt:return t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);default:return t=ct,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t)}}},n.yt=e=>{n.reset(e,null),n.wt=null,d=null},n.bt=(e,t,r)=>{n.wt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.gt=()=>s==Et?1:0}const Lt=13,Ft=[0,0,255,255];function qt(){const e=this;function t(e){return e&&e.kt?(e.Ge=e.Je=0,e.Fe=null,e.kt.mode=7,e.kt.vt.reset(e,null),it):ct}e.mode=0,e.method=0,e.St=[0],e.zt=0,e.marker=0,e.Ct=0,e.xt=t=>(e.vt&&e.vt.yt(t),e.vt=null,it),e.At=(n,r)=>(n.Fe=null,e.vt=null,8>r||r>15?(e.xt(n),ct):(e.Ct=r,n.kt.vt=new Ht(n,1<<r),t(n),it)),e._t=(e,t)=>{let n,r;if(!e||!e.kt||!e.tt)return ct;const s=e.kt;for(t=4==t?lt:it,n=lt;;)switch(s.mode){case 0:if(0===e.je)return n;if(n=t,e.je--,e.Ge++,8!=(15&(s.method=e.ut(e.rt++)))){s.mode=Lt,e.Fe="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.Ct){s.mode=Lt,e.Fe="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.je)return n;if(n=t,e.je--,e.Ge++,r=255&e.ut(e.rt++),((s.method<<8)+r)%31!=0){s.mode=Lt,e.Fe="incorrect header check",s.marker=5;break}if(!(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt=(255&e.ut(e.rt++))<<24&4278190080,s.mode=3;case 3:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt+=(255&e.ut(e.rt++))<<16&16711680,s.mode=4;case 4:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt+=(255&e.ut(e.rt++))<<8&65280,s.mode=5;case 5:return 0===e.je?n:(n=t,e.je--,e.Ge++,s.zt+=255&e.ut(e.rt++),s.mode=6,2);case 6:return s.mode=Lt,e.Fe="need dictionary",s.marker=0,ct;case 7:if(n=s.vt.ht(e,n),n==ft){s.mode=Lt,s.marker=0;break}if(n==it&&(n=t),n!=ot)return n;n=t,s.vt.reset(e,s.St),s.mode=12;case 12:return e.je=0,ot;case Lt:return ft;default:return ct}},e.It=(e,t,n)=>{let r=0,s=n;if(!e||!e.kt||6!=e.kt.mode)return ct;const i=e.kt;return s<1<<i.Ct||(s=(1<<i.Ct)-1,r=n-s),i.vt.bt(t,r,s),i.mode=7,it},e.Pt=e=>{let n,r,s,i,o;if(!e||!e.kt)return ct;const c=e.kt;if(c.mode!=Lt&&(c.mode=Lt,c.marker=0),0===(n=e.je))return lt;for(r=e.rt,s=c.marker;0!==n&&4>s;)e.ut(r)==Ft[s]?s++:s=0!==e.ut(r)?0:4-s,r++,n--;return e.Ge+=r-e.rt,e.rt=r,e.je=n,c.marker=s,4!=s?ft:(i=e.Ge,o=e.Je,t(e),e.Ge=i,e.Je=o,c.mode=7,it)},e.Dt=e=>e&&e.kt&&e.kt.vt?e.kt.vt.gt():ct}function Gt(){}function Jt(e){const t=new Gt,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.At(),t.et=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.rt=0,t.tt=e,t.je=e.length;do{if(t.st=0,t.nt=n,0!==t.je||c||(t.rt=0,c=!0),a=t._t(0),c&&a===lt){if(0!==t.je)throw new s("inflating: bad input")}else if(a!==it&&a!==ot)throw new s("inflating: "+t.Fe);if((c||a===ot)&&t.je===e.length)throw new s("inflating: bad input");t.st&&(t.st===n?f.push(new i(o)):f.push(o.subarray(0,t.st))),h+=t.st,r&&t.rt>0&&t.rt!=u&&(r(t.rt),u=t.rt)}while(t.je>0||0===t.nt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.xt()}}Gt.prototype={At(e){const t=this;return t.kt=new qt,e||(e=15),t.kt.At(t,e)},_t(e){const t=this;return t.kt?t.kt._t(t,e):ct},xt(){const e=this;if(!e.kt)return ct;const t=e.kt.xt(e);return e.kt=null,t},Pt(){const e=this;return e.kt?e.kt.Pt(e):ct},It(e,t){const n=this;return n.kt?n.kt.It(n,e,t):ct},ut(e){return this.tt[e]},He(e,t){return this.tt.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=st,self.Inflate=Jt};\n'],{type:"text/javascript"}))};e({workerScripts:{inflate:[t],deflate:[t]}})}(wD),wD({Deflate:function(e){var t,n=new WR,r=(t=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(t/16383)+1),i=new Uint8Array(r),a=e?e.level:-1;"undefined"==typeof a&&(a=-1),n.deflateInit(a),n.next_out=i,this.append=function(e,t){var a,o=0,s=0,l=0,u=[];if(e.length){n.next_in_index=0,n.next_in=e,n.avail_in=e.length;do{if(n.next_out_index=0,n.avail_out=r,0!=n.deflate(0))throw new Error("deflating: "+n.msg);n.next_out_index&&(n.next_out_index==r?u.push(new Uint8Array(i)):u.push(i.subarray(0,n.next_out_index))),l+=n.next_out_index,t&&n.next_in_index>0&&n.next_in_index!=o&&(t(n.next_in_index),o=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return u.length>1?(a=new Uint8Array(l),u.forEach((function(e){a.set(e,s),s+=e.length}))):a=u[0]?new Uint8Array(u[0]):new Uint8Array,a}},this.flush=function(){var e,t,a=0,o=0,s=[];do{if(n.next_out_index=0,n.avail_out=r,1!=(e=n.deflate(4))&&0!=e)throw new Error("deflating: "+n.msg);r-n.avail_out>0&&s.push(i.slice(0,n.next_out_index)),o+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),t=new Uint8Array(o),s.forEach((function(e){t.set(e,a),a+=e.length})),t}},Inflate:function(e){var t=new NN,n=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,r=new Uint8Array(n),i=!1;t.inflateInit(),t.next_out=r,this.append=function(e,a){var o,s,l=[],u=0,c=0,h=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=n,0!==t.avail_in||i||(t.next_in_index=0,i=!0),o=t.inflate(0),i&&o===ZR){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(o!==XR&&o!==YR)throw new Error("inflating: "+t.msg);if((i||o===YR)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===n?l.push(new Uint8Array(r)):l.push(r.subarray(0,t.next_out_index))),h+=t.next_out_index,a&&t.next_in_index>0&&t.next_in_index!=u&&(a(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return l.length>1?(s=new Uint8Array(h),l.forEach((function(e){s.set(e,c),c+=e.length}))):s=l[0]?new Uint8Array(l[0]):new Uint8Array,s}},this.flush=function(){t.inflateEnd()}}});var rU=function(){return[{label:"DragonBones Json",value:"json"}]},iU=function(){return[{label:"5.5",value:"5.5"}]},aU=function(){return[{label:"\u7eb9\u7406\u96c6",value:"texture"}]},oU=function(e){var t=e.show,n=e.store,r=It((0,a.useState)("json"),2),i=r[0],o=r[1],s=It((0,a.useState)("5.5"),2),l=s[0],u=s[1],c=It((0,a.useState)("texture"),2),h=c[0],d=c[1],f=It((0,a.useState)(1),2),p=(f[0],f[1],It((0,a.useState)(!0),2)),v=p[0],m=p[1],g=It((0,a.useState)(!0),2),y=g[0],b=g[1],_=It((0,a.useState)(!0),2),x=_[0],E=_[1],w=function(){var e=_e(ye().mark((function e(){var t,r,i,a,o,s,l,u,c,h,d,f,p,m,g,b,_;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,i=void 0,a=void 0,o=void 0,!y){e.next=16;break}return e.next=8,Zw.exportNewTexture(n.rootState.runtime.dragonbones,n.rootState.library);case 8:s=e.sent,l=It(s,3),u=l[0],c=l[1],h=l[2],t=h,r={textureConfigFile:u,images:c},o="texture";case 16:if(!v){e.next=24;break}if(t){e.next=21;break}return e.next=20,Zw.getExportTextureIdNameMap(n.rootState.runtime.dragonbones,n.rootState.library);case 20:t=e.sent;case 21:d=zf.exportDragonbonesData(n.rootState.runtime.dragonbones,void 0,t),i=d,a=d.name;case 24:if(x){if(f=[],p="",i&&(f.push({type:"json",name:"".concat(a,".json"),data:i}),p=a),r){if(f.push({type:"json",name:"".concat(o,".json"),data:r.textureConfigFile}),r.images)if(1===r.images.length)f.push({type:"img",name:"".concat(o,".png"),data:r.images[0]});else for(m=0;m<r.images.length;m++)g=r.images[m],b=o+"_"+m+".png",f.push({type:"img",name:b,data:g});p||(p=o)}p&&f.length>0&&JB(f,p+".zip")}else if(i&&$B(i,a+".json"),r&&($B(r.textureConfigFile,o+".json"),r.images))if(1===r.images.length)ZB(r.images[0],o+".png");else for(_=0;_<r.images.length;_++)ZB(r.images[_],o+"_"+_+".png");n.commit(G.CLOSE_EXPORT_WINDOW,!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,hf.jsx)(Kc,{title:"\u5bfc\u51fa",open:t,onOk:w,onCancel:function(){n.commit(G.CLOSE_EXPORT_WINDOW,!1)},children:(0,hf.jsxs)("div",{className:"export-window",children:[(0,hf.jsxs)("div",{className:"export-block",children:[(0,hf.jsxs)("div",{className:"export-item",children:[(0,hf.jsx)("span",{className:"export-item-label",children:"\u6570\u636e\u7c7b\u578b"}),(0,hf.jsx)(xR,{getItems:rU,value:i,onChange:function(e){o(e)}})]}),(0,hf.jsxs)("div",{className:"export-item",children:[(0,hf.jsx)("span",{className:"export-item-label",children:"\u6570\u636e\u7248\u672c"}),(0,hf.jsx)(xR,{getItems:iU,value:l,onChange:function(e){u(e)}})]})]}),(0,hf.jsx)("div",{className:"export-block",children:(0,hf.jsxs)("div",{className:"export-item",children:[(0,hf.jsx)("span",{className:"export-item-label",children:"\u7eb9\u7406\u7c7b\u578b"}),(0,hf.jsx)(xR,{getItems:aU,value:h,onChange:function(e){d(e)}})]})}),(0,hf.jsx)("div",{className:"export-block",children:(0,hf.jsxs)("div",{className:"export-item export-content",children:[(0,hf.jsx)(ER,{value:v,onChange:function(e){m(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"\u6570\u636e"}),(0,hf.jsx)(ER,{value:y,onChange:function(e){b(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"\u7eb9\u7406"}),(0,hf.jsx)(ER,{value:x,onChange:function(e){E(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"zip"})]})})]})})},sU=function(e){p(n,dragonBones.TextureAtlasData);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._renderTexture=null,e}return d(n,[{key:"_onClear",value:function(){lm(v(n.prototype),"_onClear",this).call(this),this._renderTexture,this._renderTexture=null}},{key:"createTexture",value:function(){return dragonBones.BaseObject.borrowObject(lU)}},{key:"renderTexture",get:function(){return this._renderTexture},set:function(e){if(this._renderTexture!==e)if(this._renderTexture=e,null!==this._renderTexture)for(var t in this.textures){var n=this.textures[t];n.renderTexture=new Gg(this._renderTexture,new zm(n.region.x,n.region.y,n.region.width,n.region.height),new zm(n.region.x,n.region.y,n.region.width,n.region.height),new zm(0,0,n.region.width,n.region.height),n.rotated)}else for(var r in this.textures){this.textures[r].renderTexture=null}}},{key:"getTexture",value:function(e){return e in this.textures?this.textures[e]:null}}],[{key:"toString",value:function(){return"[class dragonBones.PixiTextureAtlasData]"}}]),n}(),lU=function(e){p(n,dragonBones.TextureData);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).renderTexture=null,e}return d(n,[{key:"_onClear",value:function(){lm(v(n.prototype),"_onClear",this).call(this),null!==this.renderTexture&&this.renderTexture.destroy(!1),this.renderTexture=null}}],[{key:"toString",value:function(){return"[class dragonBones.PixiTextureData]"}}]),n}(),uU=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).debugDraw=!1,e._debugDraw=!1,e._armature=null,e._debugDrawer=null,e}return d(n,[{key:"dbInit",value:function(e){this._armature=e}},{key:"dbClear",value:function(){null!==this._debugDrawer&&this._debugDrawer.destroy({children:!0,texture:!0,baseTexture:!0}),this._armature=null,this._debugDrawer=null,lm(v(n.prototype),"destroy",this).call(this)}},{key:"dbUpdate",value:function(){var e=dragonBones.DragonBones.debugDraw||this.debugDraw;if(e||this._debugDraw)if(this._debugDraw=e,this._debugDraw){if(null===this._debugDrawer){this._debugDrawer=new Nb(Gg.EMPTY);var t=new SE;this._debugDrawer.addChild(t)}this.addChild(this._debugDrawer);var n=this._debugDrawer.getChildAt(0);n.clear();for(var r=this._armature.getBones(),i=0,a=r.length;i<a;++i){var o=r[i],s=o.boneData.length,l=o.globalTransformMatrix.tx,u=o.globalTransformMatrix.ty,c=l+o.globalTransformMatrix.a*s,h=u+o.globalTransformMatrix.b*s;n.lineStyle(2,65535,.7),n.moveTo(l,u),n.lineTo(c,h),n.lineStyle(0,0,0),n.beginFill(65535,.7),n.drawCircle(l,u,3),n.endFill()}for(var d=this._armature.getSlots(),f=0,p=d.length;f<p;++f){var v=d[f],m=v.boundingBoxData;if(m){var g=this._debugDrawer.getChildByName(v.name);switch(g||((g=new SE).name=v.name,this._debugDrawer.addChild(g)),g.clear(),g.lineStyle(2,16711935,.7),m.type){case dragonBones.BoundingBoxType.Rectangle:g.drawRect(.5*-m.width,.5*-m.height,m.width,m.height);break;case dragonBones.BoundingBoxType.Ellipse:g.drawEllipse(.5*-m.width,.5*-m.height,m.width,m.height);break;case dragonBones.BoundingBoxType.Polygon:for(var y=m.vertices,b=0,_=y.length;b<_;b+=2){var x=y[b],E=y[b+1];0===b?g.moveTo(x,E):g.lineTo(x,E)}g.lineTo(y[0],y[1])}g.endFill(),v.updateTransformAndMatrix(),v.updateGlobalTransform();var w=v.global;g.setTransform(w.x,w.y,w.scaleX,w.scaleY,w.rotation,w.skew,0,v._pivotX,v._pivotY)}else{var T=this._debugDrawer.getChildByName(v.name);T&&this._debugDrawer.removeChild(T)}}}else null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.removeChild(this._debugDrawer)}},{key:"dispose",value:function(){null!==this._armature&&(this._armature.dispose(),this._armature=null)}},{key:"destroy",value:function(){this.dispose()}},{key:"dispatchDBEvent",value:function(e,t){this.emit(e,t)}},{key:"hasDBEventListener",value:function(e){return this.listenerCount(e)>0}},{key:"addDBEventListener",value:function(e,t,n){this.addListener(e,t,n)}},{key:"removeDBEventListener",value:function(e,t,n){this.removeListener(e,t,n)}},{key:"armature",get:function(){return this._armature}},{key:"animation",get:function(){return this._armature.animation}}]),n}(Nb),cU=function(e){return e[e.WeigthBoneCount=0]="WeigthBoneCount",e[e.WeigthFloatOffset=1]="WeigthFloatOffset",e[e.WeigthBoneIndices=2]="WeigthBoneIndices",e[e.MeshVertexCount=0]="MeshVertexCount",e[e.MeshTriangleCount=1]="MeshTriangleCount",e[e.MeshFloatOffset=2]="MeshFloatOffset",e[e.MeshWeightOffset=3]="MeshWeightOffset",e[e.MeshVertexIndices=4]="MeshVertexIndices",e[e.GeometryVertexCount=0]="GeometryVertexCount",e[e.GeometryTriangleCount=1]="GeometryTriangleCount",e[e.GeometryFloatOffset=2]="GeometryFloatOffset",e[e.GeometryWeightOffset=3]="GeometryWeightOffset",e[e.GeometryVertexIndices=4]="GeometryVertexIndices",e[e.TimelineScale=0]="TimelineScale",e[e.TimelineOffset=1]="TimelineOffset",e[e.TimelineKeyFrameCount=2]="TimelineKeyFrameCount",e[e.TimelineFrameValueCount=3]="TimelineFrameValueCount",e[e.TimelineFrameValueOffset=4]="TimelineFrameValueOffset",e[e.TimelineFrameOffset=5]="TimelineFrameOffset",e[e.FramePosition=0]="FramePosition",e[e.FrameTweenType=1]="FrameTweenType",e[e.FrameTweenEasingOrCurveSampleCount=2]="FrameTweenEasingOrCurveSampleCount",e[e.FrameCurveSamples=3]="FrameCurveSamples",e[e.FFDTimelineMeshOffset=0]="FFDTimelineMeshOffset",e[e.FFDTimelineFFDCount=1]="FFDTimelineFFDCount",e[e.FFDTimelineValueCount=2]="FFDTimelineValueCount",e[e.FFDTimelineValueOffset=3]="FFDTimelineValueOffset",e[e.FFDTimelineFloatOffset=4]="FFDTimelineFloatOffset",e}(cU||{}),hU=function(e){return e[e.Bone=0]="Bone",e[e.Surface=1]="Surface",e}(hU||{}),dU=function(e){p(n,dragonBones.Slot);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._textureScale=void 0,e._renderDisplay=void 0,e}return d(n,[{key:"_onClear",value:function(){lm(v(n.prototype),"_onClear",this).call(this),this._textureScale=1,this._renderDisplay=null,this._updateTransform="3"===Tb[0]?this._updateTransformV3:this._updateTransformV4}},{key:"_initDisplay",value:function(e,t){}},{key:"_disposeDisplay",value:function(e,t){t||e.destroy()}},{key:"_onUpdateDisplay",value:function(){this._renderDisplay=this._display?this._display:this._rawDisplay}},{key:"_addDisplay",value:function(){this._armature.display.addChild(this._renderDisplay)}},{key:"_replaceDisplay",value:function(e){var t=this._armature.display,n=e;t.addChild(this._renderDisplay),t.swapChildren(this._renderDisplay,n),t.removeChild(n),this._textureScale=1}},{key:"_removeDisplay",value:function(){this._renderDisplay.parent.removeChild(this._renderDisplay)}},{key:"_updateZOrder",value:function(){var e=this._armature.display;e.getChildIndex(this._renderDisplay)!==this._zOrder&&e.addChildAt(this._renderDisplay,this._zOrder)}},{key:"_updateVisible",value:function(){this._renderDisplay.visible=this._parent.visible&&this._visible}},{key:"_updateBlendMode",value:function(){if(this._renderDisplay instanceof Nb)switch(this._blendMode){case 0:this._renderDisplay.blendMode=Jf.NORMAL;break;case 1:this._renderDisplay.blendMode=Jf.ADD;break;case 3:this._renderDisplay.blendMode=Jf.DARKEN;break;case 4:this._renderDisplay.blendMode=Jf.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=Jf.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=Jf.LIGHTEN;break;case 10:this._renderDisplay.blendMode=Jf.MULTIPLY;break;case 11:this._renderDisplay.blendMode=Jf.OVERLAY;break;case 12:this._renderDisplay.blendMode=Jf.SCREEN}}},{key:"_updateColor",value:function(){var e=this._colorTransform.alphaMultiplier*this._globalAlpha;if(this._renderDisplay.alpha=e,this._renderDisplay instanceof Nb||this._renderDisplay instanceof BE){var t=(Math.round(255*this._colorTransform.redMultiplier)<<16)+(Math.round(255*this._colorTransform.greenMultiplier)<<8)+Math.round(255*this._colorTransform.blueMultiplier);this._renderDisplay.tint=t}}},{key:"_updateFrame",value:function(){var e=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==e){var t=e.parent;null!==this._armature.replacedTexture&&(null===this._armature._replaceTextureAtlasData?((t=dragonBones.BaseObject.borrowObject(sU)).copyFrom(e.parent),t.renderTexture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=t):t=this._armature._replaceTextureAtlasData,e=t.getTexture(e.name));var n=e.renderTexture;if(null!==n){if(null!==this._geometryData){var r=this._geometryData.data,i=r.intArray,a=r.floatArray,o=i[this._geometryData.offset+cU.GeometryVertexCount],s=i[this._geometryData.offset+cU.GeometryTriangleCount],l=i[this._geometryData.offset+cU.GeometryFloatOffset];l<0&&(l+=65536);for(var u=l+2*o,c=this._armature._armatureData.scale,h=this._renderDisplay,d=new Float32Array(2*o),f=new Float32Array(2*o),p=new Uint16Array(3*s),v=0,m=2*o;v<m;++v)d[v]=a[l+v]*c;for(var g=0;g<3*s;++g)p[g]=i[this._geometryData.offset+cU.GeometryVertexIndices+g];for(var y=0,b=2*o;y<b;y+=2){var _=a[u+y],x=a[u+y+1];e.rotated?(f[y]=1-x,f[y+1]=_):(f[y]=_,f[y+1]=x)}this._textureScale=1,h.texture=n,h.vertices=d,h.uvBuffer.update(f),h.geometry.addIndex(p);var E=null!==this._geometryData.weight,w=this._parent._boneData.type!==hU.Bone;(E||w)&&this._identityTransform()}else{this._textureScale=e.parent.scale*this._armature._armatureData.scale,this._renderDisplay.texture=n}return void(this._visibleDirty=!0)}}if(null!==this._geometryData){var T=this._renderDisplay;T.texture=null,T.x=0,T.y=0,T.visible=!1}else{var S=this._renderDisplay;S.texture=null,S.x=0,S.y=0,S.visible=!1}}},{key:"_updateMesh",value:function(){var e=this._armature._armatureData.scale,t=this._displayFrame.deformVertices,n=this._geometryBones,r=this._geometryData,i=r.weight,a=t.length>0&&r.inheritDeform,o=this._renderDisplay;if(null!==i){var s=r.data,l=s.intArray,u=s.floatArray,c=l[r.offset+cU.GeometryVertexCount],h=l[i.offset+cU.WeigthFloatOffset];h<0&&(h+=65536);for(var d=0,f=0,p=i.offset+cU.WeigthBoneIndices+n.length,v=h,m=0;d<c;++d){for(var g=l[p++],y=0,b=0,_=0;_<g;++_){var x=n[l[p++]];if(null!==x){var E=x.globalTransformMatrix,w=u[v++],T=u[v++]*e,S=u[v++]*e;a&&(T+=t[m++],S+=t[m++]),y+=(E.a*T+E.c*S+E.tx)*w,b+=(E.b*T+E.d*S+E.ty)*w}}o.vertices[f++]=y,o.vertices[f++]=b}}else{var k=this._parent._boneData.type!==hU.Bone,C=r.data,A=C.intArray,I=C.floatArray,O=A[r.offset+cU.GeometryVertexCount],P=A[r.offset+cU.GeometryFloatOffset];P<0&&(P+=65536);for(var M=0,R=2*O;M<R;M+=2){var N=I[P+M]*e,D=I[P+M+1]*e;if(a&&(N+=t[M],D+=t[M+1]),k){var L=this._parent._getGlobalTransformMatrix(N,D);o.vertices[M]=L.a*N+L.c*D+L.tx,o.vertices[M+1]=L.b*N+L.d*D+L.ty}else o.vertices[M]=N,o.vertices[M+1]=D}}}},{key:"_updateTransform",value:function(){throw new Error}},{key:"_updateTransformV3",value:function(){this.updateGlobalTransform();var e=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var t=e.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=e.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(t,n,e.scaleX*this._textureScale,e.scaleY*this._textureScale,e.rotation,e.skew,0)}else this._renderDisplay.position.set(e.x,e.y),this._renderDisplay.rotation=e.rotation,this._renderDisplay.skew.set(e.skew,0),this._renderDisplay.scale.set(e.scaleX,e.scaleY)}},{key:"_updateTransformV4",value:function(){this.updateGlobalTransform();var e=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var t=e.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=e.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(t,n,e.scaleX*this._textureScale,e.scaleY*this._textureScale,e.rotation,-e.skew,0)}else this._renderDisplay.position.set(e.x,e.y),this._renderDisplay.rotation=e.rotation,this._renderDisplay.skew.set(-e.skew,0),this._renderDisplay.scale.set(e.scaleX,e.scaleY)}},{key:"_identityTransform",value:function(){this._renderDisplay.setTransform(0,0,1,1,0,0,0)}}],[{key:"toString",value:function(){return"[class dragonBones.PixiSlot]"}}]),n}(),fU=function(e){p(n,dragonBones.BaseFactory);var t=g(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(l(this,n),e=t.call(this,r),null===n._dragonBonesInstance){var a=new uU(Gg.EMPTY);n._dragonBonesInstance=new dragonBones.DragonBones(a),i&&tb.shared.add(n._clockHandler,n)}return e._dragonBones=n._dragonBonesInstance,e}return d(n,[{key:"_buildTextureAtlasData",value:function(e,t){return e?e.renderTexture=t:e=dragonBones.BaseObject.borrowObject(sU),e}},{key:"_buildArmature",value:function(e){var t=dragonBones.BaseObject.borrowObject(dragonBones.Armature),n=new uU(Gg.EMPTY);return t.init(e.armature,n,n,this._dragonBones),t}},{key:"_buildSlot",value:function(e,t,n){var r=dragonBones.BaseObject.borrowObject(dU);return r.init(t,n,new Nb(Gg.EMPTY),new BE),r}},{key:"buildArmatureDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=this.buildArmature(e,t||"",n||"",r||"");return null!==i?(this._dragonBones.clock.add(i),i.display):null}},{key:"getTextureDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._getTextureData(null!==t?t:"",e);return null!==n&&null!==n.renderTexture?new Nb(n.renderTexture):null}},{key:"soundEventManager",get:function(){return this._dragonBones.eventManager}}],[{key:"_clockHandler",value:function(e){this._dragonBonesInstance.advanceTime(e/gp.TARGET_FPMS*.001)}},{key:"advanceTime",value:function(e){this._dragonBonesInstance.advanceTime(e)}},{key:"factory",get:function(){return null===n._factory&&(n._factory=new n(null,n.useSharedTicker)),n._factory}},{key:"newInstance",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null===n._factory&&(n._factory=new n(null,e)),n._factory}}]),n}();fU._dragonBonesInstance=null,fU._factory=null,fU.useSharedTicker=!0;var pU=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,{width:e||512,height:r||512,backgroundColor:2960685}))._renderer=new Pb,i._background=void 0,i._resources=[],i._pixiResources=void 0,i.armatureDisplay=void 0,i._stageWidth=void 0,i._stageHeight=void 0,i._centerX=0,i._centerY=0,i._scale=1,i.justStageRightDown=!1,i.rightDownX=0,i.rightDownY=0,i.downStageX=0,i.downStageY=0,i.onStageMouseRightMove=function(e){if(i.justStageRightDown)i.justStageRightDown=!1,i.rightDownX=i._centerX,i.rightDownY=i._centerY,i.downStageX=e.clientX,i.downStageY=e.clientY;else{var t=e.clientX-i.downStageX,n=e.clientY-i.downStageY;i.setCenter(i.rightDownX+t,i.rightDownY+n)}},i._stageHeight=r,i._stageWidth=e,i.initStage(),i}return d(n,[{key:"initStage",value:function(){this.initBackground(),this.initArmatureContainer(),this.initUI(),this.initControl(),this.setCenter(.5*this._stageWidth,.5*this._stageHeight),this.setScale(1)}},{key:"resizeStage",value:function(e,t){this._stageWidth===e&&this._stageHeight===t||(this._stageWidth=e,this._stageHeight=t,this._background.resizeStage(this._stageWidth,this._stageHeight))}},{key:"setScale",value:function(e){this._scale=e,this._background.setScale(e),this._renderer.scale.set(e)}},{key:"setCenter",value:function(e,t){this._centerX=e,this._centerY=t,this._background.setCenter(e,t),this._renderer.position.set(e,t)}},{key:"initBackground",value:function(){this._background=new dC(this),this._background.setScale(1),this._background.resizeStage(this._stageWidth,this._stageHeight),this._background.setCenter(.5*this._stageWidth,.5*this._stageHeight),this.stage.addChild(this._background)}},{key:"initArmatureContainer",value:function(){this.stage.addChild(this._renderer)}},{key:"initUI",value:function(){}},{key:"initControl",value:function(){this.stage.eventMode="dynamic",this.stage.on("rightdown",this.onStageMouseRightDown,this),this.stage.on("wheel",this.onSheetMouseWheel,this)}},{key:"onStageMouseRightDown",value:function(e){this.justStageRightDown=!0,this.stage.on("mousemove",this.onStageMouseRightMove,this),document.addEventListener("mouseup",this.onStageMouseRightUp.bind(this))}},{key:"onStageMouseRightUp",value:function(e){this.justStageRightDown=!1,this.stage.off("mousemove",this.onStageMouseRightMove,this),document.removeEventListener("mouseup",this.onStageMouseRightUp)}},{key:"onSheetMouseWheel",value:function(e){var t=this._scale*(e.deltaY>0?.9:1.1);t<.1?t=.1:t>10&&(t=10),this.setScale(t)}},{key:"setPreviewData",value:function(){var e=_e(ye().mark((function e(t,n,r,i){var a,o,s,l,u,c,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in this.clear(),r)o=r[a],q_.add(a,o.url||o.data),this._resources.push(a);return e.next=7,q_.load(this._resources);case 7:for(u in s=e.sent,this._pixiResources=s,(l=fU.factory).parseDragonBonesData(t),n)c=n[u],l.parseTextureAtlasData(c,this._pixiResources[c.fileId]);h=t.armature[0],i||(i=h.animation&&h.animation.length?h.animation[0].name:""),this.armatureDisplay=l.buildArmatureDisplay(h.name,t.name),this.armatureDisplay.animation.play(i,0),this.armatureDisplay.x=0,this.armatureDisplay.y=0,this.armatureDisplay.debugDraw=!0,this._renderer.addChild(this.armatureDisplay);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"clear",value:function(){for(var e in this._renderer.removeChildren(),this._pixiResources)this._pixiResources[e].destroy(!0);this._pixiResources={},this._resources.length=0,q_.reset(),this.armatureDisplay&&(this.armatureDisplay.dispose(),this.armatureDisplay=null),fU.factory.clear(!0)}},{key:"_renderHandler",value:function(e){}},{key:"_startRenderTick",value:function(){tb.shared.add(this._renderHandler,this)}},{key:"createText",value:function(e){var t=new ew(e,{align:"center",fill:16777215});return t.text=e,t.scale.x=.7,t.scale.y=.7,t.x=.5*-t.width,t.y=.5*this.stageHeight-100,this.stage.addChild(t),t}},{key:"stageWidth",get:function(){return this._renderer.width}},{key:"stageHeight",get:function(){return this._renderer.height}}]),n}(h_);pU.BACKGROUND_URL="resource/background.png";var vU,mU=!1,gU=function(){var e=_e(ye().mark((function e(t){var n,r,i,a,o,s,l,u,c,h,d;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState.runtime.editing.editingArmatureId,r=t.rootState.runtime.editing.editMode,i=t.rootState.runtime.editing.selectedAnimationId,a="",r===X.ANIMATION&&i&&(o=t.rootState.runtime.dragonbones.animationMap[i])&&(a=o.name),e.next=7,Zw.exportPreviewTexture(t.rootState.runtime.dragonbones,t.rootState.library,n,"id");case 7:s=e.sent,l=It(s,2),u=l[0],c=l[1],h=zf.exportDragonbonesData(t.rootState.runtime.dragonbones,n,c),d=Zw.exportFiles(u,t.rootState.library),vU.setPreviewData(h,u,d,a);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yU=function(e){var n=e.show,r=e.store,i=(0,a.useRef)(null);return(0,a.useEffect)((function(){!function(e,n,r){r&&(e&&!mU?(mU=!0,window.PIXI||(window.PIXI=t),vU=new pU(e.clientWidth,e.clientHeight),e.appendChild(vU.view),gU(n)):vU&&gU(n))}(i.current,r,n)}),[n]),(0,hf.jsx)(Kc,{title:"\u9884\u89c8",open:n,onOk:function(){r.commit(G.CLOSE_PREVIEW_WINDOW,!1)},onCancel:function(){r.commit(G.CLOSE_PREVIEW_WINDOW,!1)},okText:"\u5173\u95ed",className:"preview-modal",footer:null,children:(0,hf.jsx)("div",{className:"preview-window",ref:i})})},bU=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e){var t=r.props.onChange,n=r.state.value;t&&t(!n)},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value?"icon-checkbox-checked":"icon-checkbox";return this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsxs)("div",{className:"boolean-check",onClick:this.onChange,children:[(0,hf.jsx)(mT,{type:e}),(0,hf.jsx)("span",{children:this.props.label})]})}):(0,hf.jsxs)("div",{className:"boolean-check",onClick:this.onChange,children:[(0,hf.jsx)(mT,{type:e}),(0,hf.jsx)("span",{children:this.props.label})]})}}]),n}(a.Component),_U=void 0,xU=function(e,t,n){return function(){n(e,t)}},EU=function(e){var t=e.store,n=(e.eventBus,e.store.state.runtime.editing.meshEditTool),r=e.store.state.runtime.editing.selectedSlotIds,i=e.store.state.runtime.editing.editingArmatureId,o=e.store.state.runtime.dragonbones.armatureMap[i].slots.map[r[0]],s=Qw.getSlotCurDisplay(o),l=Qw.getMeshPointNumber(s),u=It((0,a.useState)(n.deformed),2),c=u[0],h=u[1],d=It((0,a.useState)(n.curTool===Q.EDIT),2),f=d[0],p=d[1],v=It((0,a.useState)(n.curTool===Q.ADD),2),m=v[0],g=v[1],y=It((0,a.useState)(n.curTool===Q.DELETE),2),b=y[0],_=y[1],x=It((0,a.useState)(n.curTool===Q.DRAW),2),E=x[0],w=x[1],T=It((0,a.useState)(l),2),S=(T[0],T[1]),k=It((0,a.useState)(n.autoOutlineNum),2),C=k[0],A=k[1];(0,a.useEffect)((function(){e.eventBus.on(G.UPDATE_MESH_TOOL,(function(){var t=e.store.state.runtime.editing.meshEditTool;h(t.deformed),p(t.curTool===Q.EDIT),g(t.curTool===Q.ADD),_(t.curTool===Q.DELETE),w(t.curTool===Q.DRAW),A(t.autoOutlineNum)}),_U),e.eventBus.on(U.UPDATE_MESH,(function(){var e=Qw.getMeshPointNumber(s);S(e)}),_U)}),[]);var I=function(e,n){switch(e){case"deformed":if(E)return;t.commit(G.UPDATE_MESH_TOOL,{deformed:n});break;case"editTool":if(f)return;t.commit(G.UPDATE_MESH_TOOL,{curTool:Q.EDIT});break;case"addTool":if(m)return;t.commit(G.UPDATE_MESH_TOOL,{curTool:Q.ADD});break;case"deleteTool":if(b)return;t.commit(G.UPDATE_MESH_TOOL,{curTool:Q.DELETE});break;case"drawTool":if(E)return;mf.confirm("\u63d0\u793a","\u91cd\u7ed8\u7f51\u683c\u8fb9\u7ebf\u4f1a\u5220\u9664\u5f53\u524d\u9009\u4e2d\u56fe\u7247\u4e0a\u6240\u6709\u5df2\u6dfb\u52a0\u7684\u7f51\u683c\u70b9\uff0c\u5220\u9664\u6240\u6709\u7ed1\u5b9a\u7684\u9aa8\u9abc\u6743\u91cd\uff0c\u5e76\u5220\u9664\u76f8\u5bf9\u5e94\u7684\u65f6\u95f4\u8f74\u5173\u952e\u5e27\uff0c\u60a8\u786e\u5b9a\u8981\u624b\u52a8\u91cd\u7ed8\u7f51\u683c\u8fb9\u7ebf\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88",(function(){t.commit(G.UPDATE_MESH_TOOL,{curTool:Q.DRAW})}));break;case"resetTool":mf.confirm("\u63d0\u793a","\u91cd\u7f6e\u4f1a\u5220\u9664\u5f53\u524d\u9009\u4e2d\u56fe\u7247\u4e0a\u6240\u6709\u5df2\u6dfb\u52a0\u7684\u7f51\u683c\u70b9\uff0c\u5220\u9664\u6240\u6709\u7ed1\u5b9a\u7684\u9aa8\u9abc\u6743\u91cd\uff0c\u5e76\u5220\u9664\u76f8\u5bf9\u5e94\u7684\u65f6\u95f4\u8f74\u5173\u952e\u5e27\uff0c\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88",(function(){t.dispatch(B.RESET_MESH,{armatureId:i,slotId:o.id,displayId:s.id})}));break;case"autoOutline":default:break;case"autoOutlineNum":if(C===n)return;t.commit(G.UPDATE_MESH_TOOL,{autoOutlineNum:n});break;case"meshToolClose":t.dispatch(W.CLOSE_MESH_EDIT_TOOL)}};return(0,hf.jsxs)("div",{className:"mesh-edit-tool",children:[(0,hf.jsxs)("div",{className:"mesh-edit-tool-row",children:[(0,hf.jsx)("span",{children:"\u7f16\u8f91\u7f51\u683c\u5de5\u5177\u7bb1"}),(0,hf.jsx)(bU,{label:"\u53d8\u5f62",value:c,onChange:xU("deformed",!c,I)}),(0,hf.jsx)(SA,{icon:"icon-close",clickCallback:xU("meshToolClose",!0,I),tooltip:"\u5173\u95ed"})]}),(0,hf.jsxs)("div",{className:"mesh-edit-tool-row",children:[(0,hf.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,hf.jsx)(SA,{icon:"icon-vector-shape-pen-edit-copy",selectedIcon:"icon-vector-shape-pen-edit",clickCallback:xU("editTool",!f,I),tooltip:"\u7f16\u8f91\u5de5\u5177",selected:f,controlled:!0,toggle:!0})}),(0,hf.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,hf.jsx)(SA,{icon:"icon-vector-shape-pen-add-copy",selectedIcon:"icon-vector-shape-pen-add",tooltip:"\u6dfb\u52a0\u5de5\u5177",changeCallback:xU("addTool",!m,I),selected:m,controlled:!0,toggle:!0})}),(0,hf.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,hf.jsx)(SA,{icon:"icon-vector-shape-pen-delete-copy",selectedIcon:"icon-vector-shape-pen-delete",tooltip:"\u5220\u9664\u5de5\u5177",changeCallback:xU("deleteTool",!b,I),selected:b,controlled:!0,toggle:!0})}),(0,hf.jsx)("span",{className:"mesh-edit-tool-gap"}),(0,hf.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,hf.jsx)(SA,{icon:"icon-vector-polygon",selectedIcon:"icon-vector-polygon-copy",tooltip:"\u7ed8\u5236\u8fb9\u6846",changeCallback:xU("drawTool",!E,I),selected:E,controlled:!0,toggle:!0})}),(0,hf.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,hf.jsx)(SA,{icon:"icon-icon_redraw",tooltip:"\u91cd\u7f6e",clickCallback:xU("resetTool",!0,I)})})]})]})};function wU(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(Qp){return t}}function TU(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,r)})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),wU(t)):e.onSuccess(wU(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var SU=+new Date,kU=0;function CU(){return"rc-upload-".concat(SU,"-").concat(++kU)}var AU=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",a=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),o=t.toLowerCase(),s=[o];return".jpg"!==o&&".jpeg"!==o||(s=[".jpg",".jpeg"]),s.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?a===t.replace(/\/.*$/,""):i===t||!!/^\w+$/.test(t)&&(et(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0};var IU=function(e,t,n){var r=function e(r,i){r.path=i||"",r.isFile?r.file((function(e){n(e)&&(r.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):r.isDirectory&&function(e,t){var n=e.createReader(),r=[];!function e(){n.readEntries((function(n){var i=Array.prototype.slice.apply(n);r=r.concat(i),i.length?e():t(r)}))}()}(r,(function(t){t.forEach((function(t){e(t,"".concat(i).concat(r.name,"/"))}))}))};e.forEach((function(e){r(e.webkitGetAsEntry())}))},OU=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],PU=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).state={uid:CU()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(t){var n=e.props,r=n.accept,i=n.directory,a=Ie(t.target.files).filter((function(e){return!i||AU(e,r)}));e.uploadFiles(a),e.reset()},e.onClick=function(t){var n=e.fileInput;if(n){var r=e.props,i=r.children,a=r.onClick;if(i&&"button"===i.type){var o=n.parentNode;o.focus(),o.querySelector("button").blur()}n.click(),a&&a(t)}},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick(t)},e.onFileDrop=function(t){var n=e.props.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.props.directory)IU(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,(function(t){return AU(t,e.props.accept)}));else{var r=Ie(t.dataTransfer.files).filter((function(t){return AU(t,e.props.accept)}));!1===n&&(r=r.slice(0,1)),e.uploadFiles(r)}},e.uploadFiles=function(t){var n=Ie(t),r=n.map((function(t){return t.uid=CU(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null===n||void 0===n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))},e.processFile=function(){var t=_e(ye().mark((function t(n,r){var i,a,o,s,l,c,h,d,f;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.beforeUpload,a=n,!i){t.next=14;break}return t.prev=3,t.next=6,i(n,r);case 6:a=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),a=!1;case 12:if(!1!==a){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!==typeof(o=e.props.action)){t.next=21;break}return t.next=18,o(n);case 18:s=t.sent,t.next=22;break;case 21:s=o;case 22:if("function"!==typeof(l=e.props.data)){t.next=29;break}return t.next=26,l(n);case 26:c=t.sent,t.next=30;break;case 29:c=l;case 30:return h="object"!==u(a)&&"string"!==typeof a||!a?n:a,d=h instanceof File?h:new File([h],n.name,{type:n.type}),(f=d).uid=n.uid,t.abrupt("return",{origin:n,data:c,parsedFile:f,action:s});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return d(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,i=e.action,a=e.parsedFile;if(this._isMounted){var o=this.props,s=o.onStart,l=o.customRequest,u=o.name,c=o.headers,h=o.withCredentials,d=o.method,f=r.uid,p=l||TU,v={action:i,filename:u,data:n,file:a,headers:c,withCredentials:h,method:d||"post",onProgress:function(e){var n=t.props.onProgress;null===n||void 0===n||n(e,a)},onSuccess:function(e,n){var r=t.props.onSuccess;null===r||void 0===r||r(e,a,n),delete t.reqs[f]},onError:function(e,n){var r=t.props.onError;null===r||void 0===r||r(e,n,a),delete t.reqs[f]}};s(r),this.reqs[f]=p(v)}}},{key:"reset",value:function(){this.setState({uid:CU()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e,t=this.props,n=t.component,r=t.prefixCls,i=t.className,o=t.disabled,s=t.id,l=t.style,u=t.multiple,c=t.accept,h=t.capture,d=t.children,f=t.directory,p=t.openFileDialogOnClick,v=t.onMouseEnter,m=t.onMouseLeave,g=Wn(t,OU),b=Wa()((y(e={},r,!0),y(e,"".concat(r,"-disabled"),o),y(e,i,i),e)),_=f?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},x=o?{}:{onClick:p?this.onClick:function(){},onKeyDown:p?this.onKeyDown:function(){},onMouseEnter:v,onMouseLeave:m,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return a.createElement(n,Ft({},x,{className:b,role:"button",style:l}),a.createElement("input",Ft({},Bu(g,{aria:!0,data:!0}),{id:s,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:c},_,{multiple:u,onChange:this.onChange},null!=h?{capture:h}:{})),d)}}]),n}(a.Component),MU=PU;function RU(){}var NU=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).uploader=void 0,e.saveUploader=function(t){e.uploader=t},e}return d(n,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return a.createElement(MU,Ft({},this.props,{ref:this.saveUploader}))}}]),n}(a.Component);NU.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:RU,onError:RU,onSuccess:RU,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var DU=NU,LU={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},FU=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:LU}))};var BU=a.forwardRef(FU),UU={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},HU=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:UU}))};var jU=a.forwardRef(HU),zU={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},VU=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:zU}))};var GU=a.forwardRef(VU);function WU(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function XU(e,t){var n=Ie(t),r=n.findIndex((function(t){return t.uid===e.uid}));return-1===r?n.push(e):n[r]=e,n}function YU(e,t){var n=void 0!==e.uid?"uid":"name";return t.filter((function(t){return t[n]===e[n]}))[0]}var KU=function(e){return 0===e.indexOf("image/")},qU=function(e){if(e.type&&!e.thumbUrl)return KU(e.type);var t=e.thumbUrl||e.url||"",n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(t)&&!n},$U=200;function ZU(e){return new Promise((function(t){if(e.type&&KU(e.type)){var n=document.createElement("canvas");n.width=$U,n.height=$U,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat($U,"px; height: ").concat($U,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var r=n.getContext("2d"),i=new Image;if(i.onload=function(){var e=i.width,a=i.height,o=$U,s=$U,l=0,u=0;e>a?u=-((s=a*($U/e))-o)/2:l=-((o=e*($U/a))-s)/2,r.drawImage(i,l,u,o,s);var c=n.toDataURL();document.body.removeChild(n),t(c)},i.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){var a=new FileReader;a.addEventListener("load",(function(){a.result&&(i.src=a.result)})),a.readAsDataURL(e)}else i.src=window.URL.createObjectURL(e)}else t("")}))}var QU={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},JU=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:QU}))};var eH=a.forwardRef(JU),tH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},nH=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:tH}))};var rH=a.forwardRef(nH),iH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},aH=function(e,t){return a.createElement(Ns,Pe(Pe({},e),{},{ref:t,icon:iH}))};var oH=a.forwardRef(aH),sH={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},lH=function(){var e=(0,a.useRef)([]),t=(0,a.useRef)(null);return(0,a.useEffect)((function(){var n=Date.now(),r=!1;e.current.forEach((function(e){if(e){r=!0;var i=e.style;i.transitionDuration=".3s, .3s, .3s, .06s",t.current&&n-t.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(t.current=Date.now())})),e.current},uH=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],cH=function(e){var t=e.className,n=e.percent,r=e.prefixCls,i=e.strokeColor,o=e.strokeLinecap,s=e.strokeWidth,l=e.style,u=e.trailColor,c=e.trailWidth,h=e.transition,d=Wn(e,uH);delete d.gapPosition;var f=Array.isArray(n)?n:[n],p=Array.isArray(i)?i:[i],v=lH(),m=s/2,g=100-s/2,y="M ".concat("round"===o?m:0,",").concat(m,"\n         L ").concat("round"===o?g:100,",").concat(m),b="0 0 100 ".concat(s),_=0;return a.createElement("svg",Ft({className:Wa()("".concat(r,"-line"),t),viewBox:b,preserveAspectRatio:"none",style:l},d),a.createElement("path",{className:"".concat(r,"-line-trail"),d:y,strokeLinecap:o,stroke:u,strokeWidth:c||s,fillOpacity:"0"}),f.map((function(e,t){var n=1;switch(o){case"round":n=1-s/100;break;case"square":n=1-s/2/100;break;default:n=1}var i={strokeDasharray:"".concat(e*n,"px, 100px"),strokeDashoffset:"-".concat(_,"px"),transition:h||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},l=p[t]||p[p.length-1];return _+=e,a.createElement("path",{key:t,className:"".concat(r,"-line-path"),d:y,strokeLinecap:o,stroke:l,strokeWidth:s,fillOpacity:"0",ref:function(e){v[t]=e},style:i})})))};cH.defaultProps=sH,cH.displayName="Line";var hH=0,dH=ct();var fH=function(e){var t=It(a.useState(),2),n=t[0],r=t[1];return a.useEffect((function(){r("rc_progress_".concat(function(){var e;return dH?(e=hH,hH+=1):e="TEST_OR_SSR",e}()))}),[]),e||n},pH=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function vH(e){return+e.replace("%","")}function mH(e){var t=null!==e&&void 0!==e?e:[];return Array.isArray(t)?t:[t]}var gH=100,yH=function(e,t,n,r,i,a,o,s,l,u){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=n/100*360*((360-a)/360),d=0===a?0:{bottom:0,top:180,left:90,right:-90}[o],f=(100-r)/100*t;return"round"===l&&100!==r&&(f+=u/2)>=t&&(f=t-.01),{stroke:"string"===typeof s?s:void 0,strokeDasharray:"".concat(t,"px ").concat(e),strokeDashoffset:f+c,transform:"rotate(".concat(i+h+d,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},bH=function(e){var t=e.id,n=e.prefixCls,r=e.steps,i=e.strokeWidth,o=e.trailWidth,s=e.gapDegree,l=void 0===s?0:s,c=e.gapPosition,h=e.trailColor,d=e.strokeLinecap,f=e.style,p=e.className,v=e.strokeColor,m=e.percent,g=Wn(e,pH),y=fH(t),b="".concat(y,"-gradient"),_=50-i/2,x=2*Math.PI*_,E=l>0?90+l/2:-90,w=x*((360-l)/360),T="object"===u(r)?r:{count:r,space:2},S=T.count,k=T.space,C=yH(x,w,0,100,E,l,c,h,d,i),A=mH(m),I=mH(v),O=I.find((function(e){return e&&"object"===u(e)})),P=lH();return a.createElement("svg",Ft({className:Wa()("".concat(n,"-circle"),p),viewBox:"".concat(-50," ").concat(-50," ").concat(gH," ").concat(gH),style:f,id:t,role:"presentation"},g),O&&a.createElement("defs",null,a.createElement("linearGradient",{id:b,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(O).sort((function(e,t){return vH(e)-vH(t)})).map((function(e,t){return a.createElement("stop",{key:t,offset:e,stopColor:O[e]})})))),!S&&a.createElement("circle",{className:"".concat(n,"-circle-trail"),r:_,cx:0,cy:0,stroke:h,strokeLinecap:d,strokeWidth:o||i,style:C}),S?function(){var e=Math.round(S*(A[0]/100)),t=100/S,r=0;return new Array(S).fill(null).map((function(o,s){var d=s<=e-1?I[0]:h,f=d&&"object"===u(d)?"url(#".concat(b,")"):void 0,p=yH(x,w,r,t,E,l,c,d,"butt",i,k);return r+=100*(w-p.strokeDashoffset+k)/w,a.createElement("circle",{key:s,className:"".concat(n,"-circle-path"),r:_,cx:0,cy:0,stroke:f,strokeWidth:i,opacity:1,style:p,ref:function(e){P[s]=e}})}))}():function(){var e=0;return A.map((function(t,r){var o=I[r]||I[I.length-1],s=o&&"object"===u(o)?"url(#".concat(b,")"):void 0,h=yH(x,w,e,t,E,l,c,o,d,i);return e+=t,a.createElement("circle",{key:r,className:"".concat(n,"-circle-path"),r:_,cx:0,cy:0,stroke:s,strokeLinecap:d,strokeWidth:i,opacity:0===t?0:1,style:h,ref:function(e){P[r]=e}})})).reverse()}())};bH.defaultProps=sH,bH.displayName="Circle";var _H=bH;function xH(e){return!e||e<0?0:e>100?100:e}function EH(e){var t=e.success,n=e.successPercent;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}var wH=function(e){var t=e.percent,n=xH(EH({success:e.success,successPercent:e.successPercent}));return[n,xH(xH(t)-n)]},TH=function(e,t,n){var r,i,a,o,s=-1,l=-1;if("step"===t){var u=n.steps,c=n.strokeWidth;if("string"===typeof e||"undefined"===typeof e)s="small"===e?2:14,l=null!==c&&void 0!==c?c:8;else if("number"===typeof e)s=e,l=e;else{var h=It(e,2),d=h[0];s=void 0===d?14:d;var f=h[1];l=void 0===f?8:f}s*=u}else if("line"===t){var p=null===n||void 0===n?void 0:n.strokeWidth;if("string"===typeof e||"undefined"===typeof e)l=p||("small"===e?6:8);else if("number"===typeof e)s=e,l=e;else{var v=It(e,2),m=v[0];s=void 0===m?-1:m;var g=v[1];l=void 0===g?8:g}}else if("circle"===t||"dashboard"===t)if("string"===typeof e||"undefined"===typeof e){var y=It("small"===e?[60,60]:[120,120],2);s=y[0],l=y[1]}else"number"===typeof e?(s=e,l=e):(s=null!==(i=null!==(r=e[0])&&void 0!==r?r:e[1])&&void 0!==i?i:120,l=null!==(o=null!==(a=e[0])&&void 0!==a?a:e[1])&&void 0!==o?o:120);return[s,l]},SH=function(e){var t=e.prefixCls,n=e.trailColor,r=void 0===n?null:n,i=e.strokeLinecap,o=void 0===i?"round":i,s=e.gapPosition,l=e.gapDegree,u=e.width,c=void 0===u?120:u,h=e.type,d=e.children,f=e.success,p=e.size,v=It(TH(void 0===p?c:p,"circle"),2),m=v[0],g=v[1],b=e.strokeWidth;void 0===b&&(b=Math.max(function(e){return 3/e*100}(m),6));var _={width:m,height:g,fontSize:.15*m+6},x=a.useMemo((function(){return l||0===l?l:"dashboard"===h?75:void 0}),[l,h]),E=s||"dashboard"===h&&"bottom"||void 0,w="[object Object]"===Object.prototype.toString.call(e.strokeColor),T=function(e){var t=e.success,n=void 0===t?{}:t,r=e.strokeColor;return[n.strokeColor||la.green,r||null]}({success:f,strokeColor:e.strokeColor}),S=Wa()("".concat(t,"-inner"),y({},"".concat(t,"-circle-gradient"),w)),k=a.createElement(_H,{percent:wH(e),strokeWidth:b,trailWidth:b,strokeColor:T,strokeLinecap:o,trailColor:r,prefixCls:t,gapDegree:x,gapPosition:E});return a.createElement("div",{className:S,style:_},m<=20?a.createElement(xA,{title:d},a.createElement("span",null,k)):a.createElement(a.Fragment,null,k,d))},kH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},CH=function(e,t){var n=e.from,r=void 0===n?la.blue:n,i=e.to,a=void 0===i?la.blue:i,o=e.direction,s=void 0===o?"rtl"===t?"to left":"to right":o,l=kH(e,["from","to","direction"]);if(0!==Object.keys(l).length){var u=function(e){var t=[];return Object.keys(e).forEach((function(n){var r=parseFloat(n.replace(/%/g,""));isNaN(r)||t.push({key:r,value:e[n]})})),t=t.sort((function(e,t){return e.key-t.key})),t.map((function(e){var t=e.key,n=e.value;return"".concat(n," ").concat(t,"%")})).join(", ")}(l);return{backgroundImage:"linear-gradient(".concat(s,", ").concat(u,")")}}return{backgroundImage:"linear-gradient(".concat(s,", ").concat(r,", ").concat(a,")")}},AH=function(e){var t=e.prefixCls,n=e.direction,r=e.percent,i=e.size,o=e.strokeWidth,s=e.strokeColor,l=e.strokeLinecap,u=void 0===l?"round":l,c=e.children,h=e.trailColor,d=void 0===h?null:h,f=e.success,p=s&&"string"!==typeof s?CH(s,n):{backgroundColor:s},v="square"===u||"butt"===u?0:void 0,m={backgroundColor:d||void 0,borderRadius:v},g=It(TH(null!==i&&void 0!==i?i:[-1,o||("small"===i?6:8)],"line",{strokeWidth:o}),2),y=g[0],b=g[1];var _=Object.assign({width:"".concat(xH(r),"%"),height:b,borderRadius:v},p),x=EH(e),E={width:"".concat(xH(x),"%"),height:b,borderRadius:v,backgroundColor:null===f||void 0===f?void 0:f.strokeColor},w={width:y<0?"100%":y,height:b};return a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(t,"-outer"),style:w},a.createElement("div",{className:"".concat(t,"-inner"),style:m},a.createElement("div",{className:"".concat(t,"-bg"),style:_}),void 0!==x?a.createElement("div",{className:"".concat(t,"-success-bg"),style:E}):null)),c)},IH=function(e){for(var t=e.size,n=e.steps,r=e.percent,i=void 0===r?0:r,o=e.strokeWidth,s=void 0===o?8:o,l=e.strokeColor,u=e.trailColor,c=void 0===u?null:u,h=e.prefixCls,d=e.children,f=Math.round(n*(i/100)),p=It(TH(null!==t&&void 0!==t?t:["small"===t?2:14,s],"step",{steps:n,strokeWidth:s}),2),v=p[0],m=p[1],g=v/n,b=new Array(n),_=0;_<n;_++){var x=Array.isArray(l)?l[_]:l;b[_]=a.createElement("div",{key:_,className:Wa()("".concat(h,"-steps-item"),y({},"".concat(h,"-steps-item-active"),_<=f-1)),style:{backgroundColor:_<=f-1?x:c,width:g,height:m}})}return a.createElement("div",{className:"".concat(h,"-steps-outer")},b,d)},OH=new Fn("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),PH=function(e){var t,n,r,i=e.componentCls,a=e.iconCls;return y({},i,Object.assign(Object.assign({},is(e)),(y(r={display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS}},"".concat(i,"-outer"),{display:"inline-block",width:"100%"}),y(r,"&".concat(i,"-show-info"),y({},"".concat(i,"-outer"),{marginInlineEnd:"calc(-2em - ".concat(e.marginXS,"px)"),paddingInlineEnd:"calc(2em + ".concat(e.paddingXS,"px)")})),y(r,"".concat(i,"-inner"),{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius}),y(r,"".concat(i,"-inner:not(").concat(i,"-circle-gradient)"),y({},"".concat(i,"-circle-path"),{stroke:e.colorInfo})),y(r,"".concat(i,"-success-bg, ").concat(i,"-bg"),{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:"all ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOutCirc)}),y(r,"".concat(i,"-success-bg"),{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess}),y(r,"".concat(i,"-text"),y({display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal"},a,{fontSize:e.fontSize})),y(r,"&".concat(i,"-status-active"),y({},"".concat(i,"-bg::before"),{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:OH,animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'})),y(r,"&".concat(i,"-status-exception"),(y(t={},"".concat(i,"-bg"),{backgroundColor:e.colorError}),y(t,"".concat(i,"-text"),{color:e.colorError}),t)),y(r,"&".concat(i,"-status-exception ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),y({},"".concat(i,"-circle-path"),{stroke:e.colorError})),y(r,"&".concat(i,"-status-success"),(y(n={},"".concat(i,"-bg"),{backgroundColor:e.colorSuccess}),y(n,"".concat(i,"-text"),{color:e.colorSuccess}),n)),y(r,"&".concat(i,"-status-success ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),y({},"".concat(i,"-circle-path"),{stroke:e.colorSuccess})),r)))},MH=function(e){var t,n,r=e.componentCls,i=e.iconCls;return y(n={},r,(y(t={},"".concat(r,"-circle-trail"),{stroke:e.progressRemainingColor}),y(t,"&".concat(r,"-circle ").concat(r,"-inner"),{position:"relative",lineHeight:1,backgroundColor:"transparent"}),y(t,"&".concat(r,"-circle ").concat(r,"-text"),y({position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)"},i,{fontSize:"".concat(e.fontSize/e.fontSizeSM,"em")})),y(t,"".concat(r,"-circle&-status-exception"),y({},"".concat(r,"-text"),{color:e.colorError})),y(t,"".concat(r,"-circle&-status-success"),y({},"".concat(r,"-text"),{color:e.colorSuccess})),t)),y(n,"".concat(r,"-inline-circle"),y({lineHeight:1},"".concat(r,"-inner"),{verticalAlign:"bottom"})),n},RH=function(e){var t=e.componentCls;return y({},t,y({},"".concat(t,"-steps"),{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:"all ".concat(e.motionDurationSlow),"&-active":{backgroundColor:e.colorInfo}}}))},NH=function(e){var t=e.componentCls,n=e.iconCls;return y({},t,y({},"".concat(t,"-small&-line, ").concat(t,"-small&-line ").concat(t,"-text ").concat(n),{fontSize:e.fontSizeSM}))},DH=rl("Progress",(function(e){var t=e.marginXXS/2,n=el(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[PH(n),MH(n),RH(n),NH(n)]})),LH=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},FH=["normal","exception","active","success"],BH=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.className,o=e.rootClassName,s=e.steps,l=e.strokeColor,u=e.percent,c=void 0===u?0:u,h=e.size,d=void 0===h?"default":h,f=e.showInfo,p=void 0===f||f,v=e.type,m=void 0===v?"line":v,g=e.status,b=e.format,_=LH(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format"]),x=a.useMemo((function(){var t,n,r=EH(e);return parseInt(void 0!==r?null===(t=null!==r&&void 0!==r?r:0)||void 0===t?void 0:t.toString():null===(n=null!==c&&void 0!==c?c:0)||void 0===n?void 0:n.toString(),10)}),[c,e.success,e.successPercent]),E=a.useMemo((function(){return!FH.includes(g)&&x>=100?"success":g||"normal"}),[g,x]),w=a.useContext(Ra),T=w.getPrefixCls,S=w.direction,k=T("progress",r),C=It(DH(k),2),A=C[0],I=C[1],O=a.useMemo((function(){if(!p)return null;var t,n=EH(e),r=b||function(e){return"".concat(e,"%")},i="line"===m;return b||"exception"!==E&&"success"!==E?t=r(xH(c),xH(n)):"exception"===E?t=i?a.createElement(Us,null):a.createElement(rc,null):"success"===E&&(t=i?a.createElement(Ls,null):a.createElement(oH,null)),a.createElement("span",{className:"".concat(k,"-text"),title:"string"===typeof t?t:void 0},t)}),[p,c,x,E,m,k,b]);var P,M=Array.isArray(l)?l[0]:l,R="string"===typeof l||Array.isArray(l)?l:void 0;"line"===m?P=s?a.createElement(IH,Object.assign({},e,{strokeColor:R,prefixCls:k,steps:s}),O):a.createElement(AH,Object.assign({},e,{strokeColor:M,prefixCls:k,direction:S}),O):"circle"!==m&&"dashboard"!==m||(P=a.createElement(SH,Object.assign({},e,{strokeColor:M,prefixCls:k,progressStatus:E}),O));var N=Wa()(k,(y(n={},"".concat(k,"-inline-circle"),"circle"===m&&TH(d,"circle")[0]<=20),y(n,"".concat(k,"-").concat(("dashboard"===m?"circle":s&&"steps")||m),!0),y(n,"".concat(k,"-status-").concat(E),!0),y(n,"".concat(k,"-show-info"),p),y(n,"".concat(k,"-").concat(d),"string"===typeof d),y(n,"".concat(k,"-rtl"),"rtl"===S),n),i,o,I);return A(a.createElement("div",Object.assign({ref:t,className:N,role:"progressbar"},Ys(_,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),P))}));var UH=BH,HH=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.className,s=e.style,l=e.locale,u=e.listType,c=e.file,h=e.items,d=e.progress,f=e.iconRender,p=e.actionIconRender,v=e.itemRender,m=e.isImgUrl,g=e.showPreviewIcon,b=e.showRemoveIcon,_=e.showDownloadIcon,x=e.previewIcon,E=e.removeIcon,w=e.downloadIcon,T=e.onPreview,S=e.onDownload,k=e.onClose,C=c.status,A=It(a.useState(C),2),I=A[0],O=A[1];a.useEffect((function(){"removed"!==C&&O(C)}),[C]);var P=It(a.useState(!1),2),M=P[0],R=P[1],N=a.useRef(null);a.useEffect((function(){return N.current=setTimeout((function(){R(!0)}),300),function(){N.current&&clearTimeout(N.current)}}),[]);var D=f(c),L=a.createElement("div",{className:"".concat(i,"-icon")},D);if("picture"===u||"picture-card"===u||"picture-circle"===u)if("uploading"===I||!c.thumbUrl&&!c.url){var F,B=Wa()((y(F={},"".concat(i,"-list-item-thumbnail"),!0),y(F,"".concat(i,"-list-item-file"),"uploading"!==I),F));L=a.createElement("div",{className:B},D)}else{var U,H=(null===m||void 0===m?void 0:m(c))?a.createElement("img",{src:c.thumbUrl||c.url,alt:c.name,className:"".concat(i,"-list-item-image"),crossOrigin:c.crossOrigin}):D,j=Wa()((y(U={},"".concat(i,"-list-item-thumbnail"),!0),y(U,"".concat(i,"-list-item-file"),m&&!m(c)),U));L=a.createElement("a",{className:j,onClick:function(e){return T(c,e)},href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer"},H)}var z=Wa()("".concat(i,"-list-item"),"".concat(i,"-list-item-").concat(I)),V="string"===typeof c.linkProps?JSON.parse(c.linkProps):c.linkProps,G=b?p(("function"===typeof E?E(c):E)||a.createElement(eH,null),(function(){return k(c)}),i,l.removeFile):null,W=_&&"done"===I?p(("function"===typeof w?w(c):w)||a.createElement(rH,null),(function(){return S(c)}),i,l.downloadFile):null,X="picture-card"!==u&&"picture-circle"!==u&&a.createElement("span",{key:"download-delete",className:Wa()("".concat(i,"-list-item-actions"),{picture:"picture"===u})},W,G),Y=Wa()("".concat(i,"-list-item-name")),K=c.url?[a.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:Y,title:c.name},V,{href:c.url,onClick:function(e){return T(c,e)}}),c.name),X]:[a.createElement("span",{key:"view",className:Y,onClick:function(e){return T(c,e)},title:c.name},c.name),X],q=g?a.createElement("a",{href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:c.url||c.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(e){return T(c,e)},title:l.previewFile},"function"===typeof x?x(c):x||a.createElement(Ph,null)):null,$=("picture-card"===u||"picture-circle"===u)&&"uploading"!==I&&a.createElement("span",{className:"".concat(i,"-list-item-actions")},q,"done"===I&&W,G),Z=(0,a.useContext(Ra).getPrefixCls)(),Q=a.createElement("div",{className:z},L,K,$,M&&a.createElement(Jo,{motionName:"".concat(Z,"-fade"),visible:"uploading"===I,motionDeadline:2e3},(function(e){var t=e.className,n="percent"in c?a.createElement(UH,Object.assign({},d,{type:"line",percent:c.percent})):null;return a.createElement("div",{className:Wa()("".concat(i,"-list-item-progress"),t)},n)}))),J=c.response&&"string"===typeof c.response?c.response:(null===(n=c.error)||void 0===n?void 0:n.statusText)||(null===(r=c.error)||void 0===r?void 0:r.message)||l.uploadError,ee="error"===I?a.createElement(xA,{title:J,getPopupContainer:function(e){return e.parentNode}},Q):Q;return a.createElement("div",{className:Wa()("".concat(i,"-list-item-container"),o),style:s,ref:t},v?v(ee,c,h,{download:S.bind(null,c),preview:T.bind(null,c),remove:k.bind(null,c)}):ee)})),jH=HH,zH=function(e,t){var n,r=e.listType,i=void 0===r?"text":r,o=e.previewFile,s=void 0===o?ZU:o,l=e.onPreview,u=e.onDownload,c=e.onRemove,h=e.locale,d=e.iconRender,f=e.isImageUrl,p=void 0===f?qU:f,v=e.prefixCls,m=e.items,g=void 0===m?[]:m,b=e.showPreviewIcon,_=void 0===b||b,x=e.showRemoveIcon,E=void 0===x||x,w=e.showDownloadIcon,T=void 0!==w&&w,S=e.removeIcon,k=e.previewIcon,C=e.downloadIcon,A=e.progress,I=void 0===A?{size:[-1,2],showInfo:!1}:A,O=e.appendAction,P=e.appendActionVisible,M=void 0===P||P,R=e.itemRender,N=e.disabled,D=function(){var e=a.useReducer((function(e){return e+1}),0);return It(e,2)[1]}(),L=It(a.useState(!1),2),F=L[0],B=L[1];a.useEffect((function(){"picture"!==i&&"picture-card"!==i&&"picture-circle"!==i||(g||[]).forEach((function(e){"undefined"!==typeof document&&"undefined"!==typeof window&&window.FileReader&&window.File&&(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",s&&s(e.originFileObj).then((function(t){e.thumbUrl=t||"",D()})))}))}),[i,g,s]),a.useEffect((function(){B(!0)}),[]);var U=function(e,t){if(l)return null===t||void 0===t||t.preventDefault(),l(e)},H=function(e){"function"===typeof u?u(e):e.url&&window.open(e.url)},j=function(e){null===c||void 0===c||c(e)},z=function(e){if(d)return d(e,i);var t="uploading"===e.status,n=p&&p(e)?a.createElement(GU,null):a.createElement(BU,null),r=t?a.createElement(El,null):a.createElement(jU,null);return"picture"===i?r=t?a.createElement(El,null):n:"picture-card"!==i&&"picture-circle"!==i||(r=t?h.uploading:n),r},V=function(e,t,n,r){var i={type:"text",size:"small",title:r,onClick:function(n){t(),qs(e)&&e.props.onClick&&e.props.onClick(n)},className:"".concat(n,"-list-item-action"),disabled:N};if(qs(e)){var o=Zs(e,Object.assign(Object.assign({},e.props),{onClick:function(){}}));return a.createElement(su,Object.assign({},i,{icon:o}))}return a.createElement(su,Object.assign({},i),a.createElement("span",null,e))};a.useImperativeHandle(t,(function(){return{handlePreview:U,handleDownload:H}}));var G=a.useContext(Ra).getPrefixCls,W=G("upload",v),X=G(),Y=Wa()((y(n={},"".concat(W,"-list"),!0),y(n,"".concat(W,"-list-").concat(i),!0),n)),K=Ie(g.map((function(e){return{key:e.uid,file:e}}))),q="picture-card"===i||"picture-circle"===i?"animate-inline":"animate",$={motionDeadline:2e3,motionName:"".concat(W,"-").concat(q),keys:K,motionAppear:F},Z=a.useMemo((function(){var e=Object.assign({},mu(X));return delete e.onAppearEnd,delete e.onEnterEnd,delete e.onLeaveEnd,e}),[X]);return"picture-card"!==i&&"picture-circle"!==i&&($=Object.assign(Object.assign({},Z),$)),a.createElement("div",{className:Y},a.createElement(Qo,Object.assign({},$,{component:!1}),(function(e){var t=e.key,n=e.file,r=e.className,o=e.style;return a.createElement(jH,{key:t,locale:h,prefixCls:W,className:r,style:o,file:n,items:g,progress:I,listType:i,isImgUrl:p,showPreviewIcon:_,showRemoveIcon:E,showDownloadIcon:T,removeIcon:S,previewIcon:k,downloadIcon:C,iconRender:z,actionIconRender:V,itemRender:R,onPreview:U,onDownload:H,onClose:j})})),O&&a.createElement(Jo,Object.assign({},$,{visible:M,forceRender:!0}),(function(e){var t=e.className,n=e.style;return Zs(O,(function(e){return{className:Wa()(e.className,t),style:Object.assign(Object.assign(Object.assign({},n),{pointerEvents:t?"none":void 0}),e.style)}}))})))};var VH=a.forwardRef(zH),GH=function(e){var t,n=e.componentCls,r=e.iconCls;return y({},"".concat(n,"-wrapper"),y({},"".concat(n,"-drag"),(y(t={position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow)},n,{padding:"".concat(e.padding,"px 0")}),y(t,"".concat(n,"-btn"),{display:"table",width:"100%",height:"100%",outline:"none"}),y(t,"".concat(n,"-drag-container"),{display:"table-cell",verticalAlign:"middle"}),y(t,"&:not(".concat(n,"-disabled):hover"),{borderColor:e.colorPrimaryHover}),y(t,"p".concat(n,"-drag-icon"),y({marginBottom:e.margin},r,{color:e.colorPrimary,fontSize:e.uploadThumbnailSize})),y(t,"p".concat(n,"-text"),{margin:"0 0 ".concat(e.marginXXS,"px"),color:e.colorTextHeading,fontSize:e.fontSizeLG}),y(t,"p".concat(n,"-hint"),{color:e.colorTextDescription,fontSize:e.fontSize}),y(t,"&".concat(n,"-disabled"),y({cursor:"not-allowed"},"p".concat(n,"-drag-icon ").concat(r,",\n            p").concat(n,"-text,\n            p").concat(n,"-hint\n          "),{color:e.colorTextDisabled})),t)))},WH=function(e){var t,n,r,i,a,o=e.componentCls,s=e.antCls,l=e.iconCls,u=e.fontSize,c=e.lineHeight,h="".concat(o,"-list-item"),d="".concat(h,"-actions"),f="".concat(h,"-action"),p=Math.round(u*c);return y({},"".concat(o,"-wrapper"),y({},"".concat(o,"-list"),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(y(a={lineHeight:e.lineHeight},h,(y(n={position:"relative",height:e.lineHeight*u,marginTop:e.marginXS,fontSize:u,display:"flex",alignItems:"center",transition:"background-color ".concat(e.motionDurationSlow),"&:hover":{backgroundColor:e.controlItemBgHover}},"".concat(h,"-name"),Object.assign(Object.assign({},rs),{padding:"0 ".concat(e.paddingXS,"px"),lineHeight:c,flex:"auto",transition:"all ".concat(e.motionDurationSlow)})),y(n,d,(y(t={},f,{opacity:0}),y(t,"".concat(f).concat(s,"-btn-sm"),{height:p,border:0,lineHeight:1,"> span":{transform:"scale(1)"}}),y(t,"\n              ".concat(f,":focus,\n              &.picture ").concat(f,"\n            "),{opacity:1}),y(t,l,{color:e.colorTextDescription,transition:"all ".concat(e.motionDurationSlow)}),y(t,"&:hover ".concat(l),{color:e.colorText}),t)),y(n,"".concat(o,"-icon ").concat(l),{color:e.colorTextDescription,fontSize:u}),y(n,"".concat(h,"-progress"),{position:"absolute",bottom:-e.uploadProgressOffset,width:"100%",paddingInlineStart:u+e.paddingXS,fontSize:u,lineHeight:0,pointerEvents:"none","> div":{margin:0}}),n)),y(a,"".concat(h,":hover ").concat(f),{opacity:1,color:e.colorText}),y(a,"".concat(h,"-error"),(y(i={color:e.colorError},"".concat(h,"-name, ").concat(o,"-icon ").concat(l),{color:e.colorError}),y(i,d,(y(r={},"".concat(l,", ").concat(l,":hover"),{color:e.colorError}),y(r,f,{opacity:1}),r)),i)),y(a,"".concat(o,"-list-item-container"),{transition:"opacity ".concat(e.motionDurationSlow,", height ").concat(e.motionDurationSlow),"&::before":{display:"table",width:0,height:0,content:'""'}}),a))))},XH=new Fn("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),YH=new Fn("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),KH=function(e){var t,n=e.componentCls,r="".concat(n,"-animate-inline");return[y({},"".concat(n,"-wrapper"),(t={},y(t,"".concat(r,"-appear, ").concat(r,"-enter, ").concat(r,"-leave"),{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"}),y(t,"".concat(r,"-appear, ").concat(r,"-enter"),{animationName:XH}),y(t,"".concat(r,"-leave"),{animationName:YH}),t)),XH,YH]},qH=function(e){var t,n,r,i,a,o=e.componentCls,s=e.iconCls,l=e.uploadThumbnailSize,u=e.uploadProgressOffset,c="".concat(o,"-list"),h="".concat(c,"-item");return y({},"".concat(o,"-wrapper"),(y(a={},"\n        ".concat(c).concat(c,"-picture,\n        ").concat(c).concat(c,"-picture-card,\n        ").concat(c).concat(c,"-picture-circle\n      "),(y(i={},h,(y(n={position:"relative",height:l+2*e.lineWidth+2*e.paddingXS,padding:e.paddingXS,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"}},"".concat(h,"-thumbnail"),Object.assign(Object.assign({},rs),(y(t={width:l,height:l,lineHeight:"".concat(l+e.paddingSM,"px"),textAlign:"center",flex:"none"},s,{fontSize:e.fontSizeHeading2,color:e.colorPrimary}),y(t,"img",{display:"block",width:"100%",height:"100%",overflow:"hidden"}),t))),y(n,"".concat(h,"-progress"),{bottom:u,width:"calc(100% - ".concat(2*e.paddingSM,"px)"),marginTop:0,paddingInlineStart:l+e.paddingXS}),n)),y(i,"".concat(h,"-error"),y({borderColor:e.colorError},"".concat(h,"-thumbnail ").concat(s),(y(r={},"svg path[fill='#e6f7ff']",{fill:e.colorErrorBg}),y(r,"svg path[fill='#1890ff']",{fill:e.colorError}),r))),y(i,"".concat(h,"-uploading"),y({borderStyle:"dashed"},"".concat(h,"-name"),{marginBottom:u})),i)),y(a,"".concat(c).concat(c,"-picture-circle ").concat(h),y({},"&, &::before, ".concat(h,"-thumbnail"),{borderRadius:"50%"})),a))},$H=function(e){var t,n,r,i,a,o=e.componentCls,s=e.iconCls,l=e.fontSizeLG,u=e.colorTextLightSolid,c="".concat(o,"-list"),h="".concat(c,"-item"),d=e.uploadPicCardSize;return y(a={},"\n      ".concat(o,"-wrapper").concat(o,"-picture-card-wrapper,\n      ").concat(o,"-wrapper").concat(o,"-picture-circle-wrapper\n    "),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(y(i={display:"inline-block",width:"100%"},"".concat(o).concat(o,"-select"),(y(t={width:d,height:d,marginInlineEnd:e.marginXS,marginBottom:e.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow)},"> ".concat(o),{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"}),y(t,"&:not(".concat(o,"-disabled):hover"),{borderColor:e.colorPrimary}),t)),y(i,"".concat(c).concat(c,"-picture-card, ").concat(c).concat(c,"-picture-circle"),(y(r={},"".concat(c,"-item-container"),{display:"inline-block",width:d,height:d,marginBlock:"0 ".concat(e.marginXS,"px"),marginInline:"0 ".concat(e.marginXS,"px"),verticalAlign:"top"}),y(r,"&::after",{display:"none"}),y(r,h,{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),height:"calc(100% - ".concat(2*e.paddingXS,"px)"),backgroundColor:e.colorBgMask,opacity:0,transition:"all ".concat(e.motionDurationSlow),content:'" "'}}),y(r,"".concat(h,":hover"),y({},"&::before, ".concat(h,"-actions"),{opacity:1})),y(r,"".concat(h,"-actions"),y({position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:"all ".concat(e.motionDurationSlow)},"".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{zIndex:10,width:l,margin:"0 ".concat(e.marginXXS,"px"),fontSize:l,cursor:"pointer",transition:"all ".concat(e.motionDurationSlow),svg:{verticalAlign:"baseline"}})),y(r,"".concat(h,"-actions, ").concat(h,"-actions:hover"),y({},"".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{color:new va(u).setAlpha(.65).toRgbString(),"&:hover":{color:u}})),y(r,"".concat(h,"-thumbnail, ").concat(h,"-thumbnail img"),{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"}),y(r,"".concat(h,"-name"),{display:"none",textAlign:"center"}),y(r,"".concat(h,"-file + ").concat(h,"-name"),{position:"absolute",bottom:e.margin,display:"block",width:"calc(100% - ".concat(2*e.paddingXS,"px)")}),y(r,"".concat(h,"-uploading"),(y(n={},"&".concat(h),{backgroundColor:e.colorFillAlter}),y(n,"&::before, ".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{display:"none"}),n)),y(r,"".concat(h,"-progress"),{bottom:e.marginXL,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),paddingInlineStart:0}),r)),i))),y(a,"".concat(o,"-wrapper").concat(o,"-picture-circle-wrapper"),y({},"".concat(o).concat(o,"-select"),{borderRadius:"50%"})),a},ZH=function(e){var t=e.componentCls;return y({},"".concat(t,"-rtl"),{direction:"rtl"})},QH=function(e){var t,n=e.componentCls,r=e.colorTextDisabled;return y({},"".concat(n,"-wrapper"),Object.assign(Object.assign({},is(e)),(y(t={},n,{outline:0,"input[type='file']":{cursor:"pointer"}}),y(t,"".concat(n,"-select"),{display:"inline-block"}),y(t,"".concat(n,"-disabled"),{color:r,cursor:"not-allowed"}),t)))},JH=rl("Upload",(function(e){var t=e.fontSizeHeading3,n=e.fontSize,r=e.lineHeight,i=e.lineWidth,a=e.controlHeightLG,o=el(e,{uploadThumbnailSize:2*t,uploadProgressOffset:Math.round(n*r)/2+i,uploadPicCardSize:2.55*a});return[QH(o),GH(o),qH(o),$H(o),WH(o),KH(o),ZH(o),QP(o)]})),ej=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(Qp){a(Qp)}}function s(e){try{l(r.throw(e))}catch(Qp){a(Qp)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},tj="__LIST_IGNORE_".concat(Date.now(),"__"),nj=function(e,t){var n=e.fileList,r=e.defaultFileList,i=e.onRemove,o=e.showUploadList,s=void 0===o||o,l=e.listType,u=void 0===l?"text":l,c=e.onPreview,h=e.onDownload,d=e.onChange,f=e.onDrop,p=e.previewFile,v=e.disabled,m=e.locale,g=e.iconRender,b=e.isImageUrl,_=e.progress,x=e.prefixCls,E=e.className,w=e.type,T=void 0===w?"select":w,S=e.children,k=e.style,C=e.itemRender,A=e.maxCount,I=e.data,O=void 0===I?{}:I,P=e.multiple,M=void 0!==P&&P,R=e.action,N=void 0===R?"":R,D=e.accept,L=void 0===D?"":D,F=e.supportServerRender,B=void 0===F||F,U=a.useContext(Ba),H=null!==v&&void 0!==v?v:U,j=mh(r||[],{value:n,postState:function(e){return null!==e&&void 0!==e?e:[]}}),z=It(j,2),V=z[0],G=z[1],W=It(a.useState("drop"),2),X=W[0],Y=W[1],K=a.useRef(null);a.useMemo((function(){var e=Date.now();(n||[]).forEach((function(t,n){t.uid||Object.isFrozen(t)||(t.uid="__AUTO__".concat(e,"_").concat(n,"__"))}))}),[n]);var q=function(e,t,n){var r=Ie(t);1===A?r=r.slice(-1):A&&(r=r.slice(0,A)),(0,Re.flushSync)((function(){G(r)}));var i={file:e,fileList:r};n&&(i.event=n),(0,Re.flushSync)((function(){null===d||void 0===d||d(i)}))},$=function(e){var t=e.filter((function(e){return!e.file[tj]}));if(t.length){var n=t.map((function(e){return WU(e.file)})),r=Ie(V);n.forEach((function(e){r=XU(e,r)})),n.forEach((function(e,n){var i=e;if(t[n].parsedFile)e.status="uploading";else{var a,o=e.originFileObj;try{a=new File([o],o.name,{type:o.type})}catch(Qp){(a=new Blob([o],{type:o.type})).name=o.name,a.lastModifiedDate=new Date,a.lastModified=(new Date).getTime()}a.uid=e.uid,i=a}q(i,r)}))}},Z=function(e,t,n){try{"string"===typeof e&&(e=JSON.parse(e))}catch(Qp){}if(YU(t,V)){var r=WU(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;var i=XU(r,V);q(r,i)}},Q=function(e,t){if(YU(t,V)){var n=WU(t);n.status="uploading",n.percent=e.percent;var r=XU(n,V);q(n,r,e)}},J=function(e,t,n){if(YU(n,V)){var r=WU(n);r.error=e,r.response=t,r.status="error";var i=XU(r,V);q(r,i)}},ee=function(e){var t;Promise.resolve("function"===typeof i?i(e):i).then((function(n){var r;if(!1!==n){var i=function(e,t){var n=void 0!==e.uid?"uid":"name",r=t.filter((function(t){return t[n]!==e[n]}));return r.length===t.length?null:r}(e,V);i&&(t=Object.assign(Object.assign({},e),{status:"removed"}),null===V||void 0===V||V.forEach((function(e){var n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed")})),null===(r=K.current)||void 0===r||r.abort(t),q(t,i))}}))},te=function(e){Y(e.type),"drop"===e.type&&(null===f||void 0===f||f(e))};a.useImperativeHandle(t,(function(){return{onBatchStart:$,onSuccess:Z,onProgress:Q,onError:J,fileList:V,upload:K.current}}));var ne=a.useContext(Ra),re=ne.getPrefixCls,ie=ne.direction,ae=re("upload",x),oe=Object.assign(Object.assign({onBatchStart:$,onError:J,onProgress:Q,onSuccess:Z},e),{data:O,multiple:M,action:N,accept:L,supportServerRender:B,prefixCls:ae,disabled:H,beforeUpload:function(t,n){return ej(void 0,void 0,void 0,ye().mark((function r(){var i,a,o,s;return ye().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.beforeUpload,a=e.transformFile,o=t,!i){r.next=13;break}return r.next=5,i(t,n);case 5:if(!1!==(s=r.sent)){r.next=8;break}return r.abrupt("return",!1);case 8:if(delete t[tj],s!==tj){r.next=12;break}return Object.defineProperty(t,tj,{value:!0,configurable:!0}),r.abrupt("return",!1);case 12:"object"===typeof s&&s&&(o=s);case 13:if(!a){r.next=17;break}return r.next=16,a(o);case 16:o=r.sent;case 17:return r.abrupt("return",o);case 18:case"end":return r.stop()}}),r)})))},onChange:void 0});delete oe.className,delete oe.style,S&&!H||delete oe.id;var se=It(JH(ae),2),le=se[0],ue=se[1],ce=It(Xs("Upload",Ei.Upload),1)[0],he="boolean"===typeof s?{}:s,de=he.showRemoveIcon,fe=he.showPreviewIcon,pe=he.showDownloadIcon,ve=he.removeIcon,me=he.previewIcon,ge=he.downloadIcon,be=function(e,t){return s?a.createElement(VH,{prefixCls:ae,listType:u,items:V,previewFile:p,onPreview:c,onDownload:h,onRemove:ee,showRemoveIcon:!H&&de,showPreviewIcon:fe,showDownloadIcon:pe,removeIcon:ve,previewIcon:me,downloadIcon:ge,iconRender:g,locale:Object.assign(Object.assign({},ce),m),isImageUrl:b,progress:_,appendAction:e,appendActionVisible:t,itemRender:C,disabled:H}):e},_e=y({},"".concat(ae,"-rtl"),"rtl"===ie);if("drag"===T){var xe,Ee=Wa()(ae,(y(xe={},"".concat(ae,"-drag"),!0),y(xe,"".concat(ae,"-drag-uploading"),V.some((function(e){return"uploading"===e.status}))),y(xe,"".concat(ae,"-drag-hover"),"dragover"===X),y(xe,"".concat(ae,"-disabled"),H),y(xe,"".concat(ae,"-rtl"),"rtl"===ie),xe),ue);return le(a.createElement("span",{className:Wa()("".concat(ae,"-wrapper"),_e,E,ue)},a.createElement("div",{className:Ee,onDrop:te,onDragOver:te,onDragLeave:te,style:k},a.createElement(DU,Object.assign({},oe,{ref:K,className:"".concat(ae,"-btn")}),a.createElement("div",{className:"".concat(ae,"-drag-container")},S))),be()))}var we,Te,Se=Wa()(ae,"".concat(ae,"-select"),y({},"".concat(ae,"-disabled"),H)),ke=(we=S?void 0:{display:"none"},a.createElement("div",{className:Se,style:we},a.createElement(DU,Object.assign({},oe,{ref:K}))));return le("picture-card"===u||"picture-circle"===u?a.createElement("span",{className:Wa()("".concat(ae,"-wrapper"),(Te={},y(Te,"".concat(ae,"-picture-card-wrapper"),"picture-card"===u),y(Te,"".concat(ae,"-picture-circle-wrapper"),"picture-circle"===u),Te),_e,E,ue)},be(ke,!!S)):a.createElement("span",{className:Wa()("".concat(ae,"-wrapper"),_e,E,ue)},ke,be()))};var rj=a.forwardRef(nj),ij=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},aj=a.forwardRef((function(e,t){var n=e.style,r=e.height,i=ij(e,["style","height"]);return a.createElement(rj,Object.assign({ref:t},i,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}));var oj=aj,sj=rj;sj.Dragger=oj,sj.LIST_IGNORE=tj;var lj=sj;function uj(e,t){return function(){return e.apply(t,arguments)}}var cj,hj=Object.prototype.toString,dj=Object.getPrototypeOf,fj=(cj=Object.create(null),function(e){var t=hj.call(e);return cj[t]||(cj[t]=t.slice(8,-1).toLowerCase())}),pj=function(e){return e=e.toLowerCase(),function(t){return fj(t)===e}},vj=function(e){return function(t){return typeof t===e}},mj=Array.isArray,gj=vj("undefined");var yj=pj("ArrayBuffer");var bj=vj("string"),_j=vj("function"),xj=vj("number"),Ej=function(e){return null!==e&&"object"===typeof e},wj=function(e){if("object"!==fj(e))return!1;var t=dj(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Tj=pj("Date"),Sj=pj("File"),kj=pj("Blob"),Cj=pj("FileList"),Aj=pj("URLSearchParams"),Ij=It(["ReadableStream","Request","Response","Headers"].map(pj),4),Oj=Ij[0],Pj=Ij[1],Mj=Ij[2],Rj=Ij[3];function Nj(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,a=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),mj(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var o,s=a?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;for(n=0;n<l;n++)o=s[n],t.call(null,e[o],o,e)}}function Dj(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var Lj="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Fj=function(e){return!gj(e)&&e!==Lj};var Bj,Uj=(Bj="undefined"!==typeof Uint8Array&&dj(Uint8Array),function(e){return Bj&&e instanceof Bj}),Hj=pj("HTMLFormElement"),jj=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),zj=pj("RegExp"),Vj=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};Nj(n,(function(n,i){var a;!1!==(a=t(n,i,e))&&(r[i]=a||n)})),Object.defineProperties(e,r)},Gj="abcdefghijklmnopqrstuvwxyz",Wj="0123456789",Xj={DIGIT:Wj,ALPHA:Gj,ALPHA_DIGIT:Gj+Gj.toUpperCase()+Wj};var Yj,Kj,qj=pj("AsyncFunction"),$j=(Yj="function"===typeof setImmediate,Kj=_j(Lj.postMessage),Yj?setImmediate:Kj?function(e,t){return Lj.addEventListener("message",(function(n){var r=n.source,i=n.data;r===Lj&&i===e&&t.length&&t.shift()()}),!1),function(n){t.push(n),Lj.postMessage(e,"*")}}("axios@".concat(Math.random()),[]):function(e){return setTimeout(e)}),Zj="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Lj):"undefined"!==typeof process&&process.nextTick||$j,Qj={isArray:mj,isArrayBuffer:yj,isBuffer:function(e){return null!==e&&!gj(e)&&null!==e.constructor&&!gj(e.constructor)&&_j(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||_j(e.append)&&("formdata"===(t=fj(e))||"object"===t&&_j(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&yj(e.buffer)},isString:bj,isNumber:xj,isBoolean:function(e){return!0===e||!1===e},isObject:Ej,isPlainObject:wj,isReadableStream:Oj,isRequest:Pj,isResponse:Mj,isHeaders:Rj,isUndefined:gj,isDate:Tj,isFile:Sj,isBlob:kj,isRegExp:zj,isFunction:_j,isStream:function(e){return Ej(e)&&_j(e.pipe)},isURLSearchParams:Aj,isTypedArray:Uj,isFileList:Cj,forEach:Nj,merge:function e(){for(var t=(Fj(this)&&this||{}).caseless,n={},r=function(r,i){var a=t&&Dj(n,i)||i;wj(n[a])&&wj(r)?n[a]=e(n[a],r):wj(r)?n[a]=e({},r):mj(r)?n[a]=r.slice():n[a]=r},i=0,a=arguments.length;i<a;i++)arguments[i]&&Nj(arguments[i],r);return n},extend:function(e,t,n){return Nj(t,(function(t,r){n&&_j(t)?e[r]=uj(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,a,o,s={};if(t=t||{},null==e)return t;do{for(a=(i=Object.getOwnPropertyNames(e)).length;a-- >0;)o=i[a],r&&!r(o,e,t)||s[o]||(t[o]=e[o],s[o]=!0);e=!1!==n&&dj(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:fj,kindOfTest:pj,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(mj(e))return e;var t=e.length;if(!xj(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Hj,hasOwnProperty:jj,hasOwnProp:jj,reduceDescriptors:Vj,freezeMethods:function(e){Vj(e,(function(t,n){if(_j(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];_j(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return mj(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:Dj,global:Lj,isContextDefined:Fj,ALPHABET:Xj,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Xj.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&_j(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(Ej(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=mj(n)?[]:{};return Nj(n,(function(t,n){var a=e(t,r+1);!gj(a)&&(i[n]=a)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:qj,isThenable:function(e){return e&&(Ej(e)||_j(e))&&_j(e.then)&&_j(e.catch)},setImmediate:$j,asap:Zj};function Jj(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Qj.inherits(Jj,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Qj.toJSONObject(this.config),code:this.code,status:this.status}}});var ez=Jj.prototype,tz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){tz[e]={value:e}})),Object.defineProperties(Jj,tz),Object.defineProperty(ez,"isAxiosError",{value:!0}),Jj.from=function(e,t,n,r,i,a){var o=Object.create(ez);return Qj.toFlatObject(e,o,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Jj.call(o,e.message,t,n,r,i),o.cause=e,o.name=e.name,a&&Object.assign(o,a),o};var nz=Jj;function rz(e){return Qj.isPlainObject(e)||Qj.isArray(e)}function iz(e){return Qj.endsWith(e,"[]")?e.slice(0,-2):e}function az(e,t,n){return e?e.concat(t).map((function(e,t){return e=iz(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var oz=Qj.toFlatObject(Qj,{},null,(function(e){return/^is[A-Z]/.test(e)}));var sz=function(e,t,n){if(!Qj.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Qj.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Qj.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,a=n.dots,o=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Qj.isSpecCompliantForm(t);if(!Qj.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Qj.isDate(e))return e.toISOString();if(!s&&Qj.isBlob(e))throw new nz("Blob is not supported. Use a Buffer instead.");return Qj.isArrayBuffer(e)||Qj.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(Qj.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Qj.isArray(e)&&function(e){return Qj.isArray(e)&&!e.some(rz)}(e)||(Qj.isFileList(e)||Qj.endsWith(n,"[]"))&&(s=Qj.toArray(e)))return n=iz(n),s.forEach((function(e,r){!Qj.isUndefined(e)&&null!==e&&t.append(!0===o?az([n],r,a):null===o?n:n+"[]",l(e))})),!1;return!!rz(e)||(t.append(az(i,n,a),l(e)),!1)}var c=[],h=Object.assign(oz,{defaultVisitor:u,convertValue:l,isVisitable:rz});if(!Qj.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Qj.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),Qj.forEach(n,(function(n,a){!0===(!(Qj.isUndefined(n)||null===n)&&i.call(t,n,Qj.isString(a)?a.trim():a,r,h))&&e(n,r?r.concat(a):[a])})),c.pop()}}(e),t};function lz(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function uz(e,t){this._pairs=[],e&&sz(e,this,t)}var cz=uz.prototype;cz.append=function(e,t){this._pairs.push([e,t])},cz.toString=function(e){var t=e?function(t){return e.call(this,t,lz)}:lz;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var hz=uz;function dz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function fz(e,t,n){if(!t)return e;var r,i=n&&n.encode||dz,a=n&&n.serialize;if(r=a?a(t,n):Qj.isURLSearchParams(t)?t.toString():new hz(t,n).toString(i)){var o=e.indexOf("#");-1!==o&&(e=e.slice(0,o)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var pz=function(){function e(){l(this,e),this.handlers=[]}return d(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Qj.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),vz=pz,mz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},gz={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:hz,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},yz="undefined"!==typeof window&&"undefined"!==typeof document,bz="object"===typeof navigator&&navigator||void 0,_z=yz&&(!bz||["ReactNative","NativeScript","NS"].indexOf(bz.product)<0),xz="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Ez=yz&&window.location.href||"http://localhost",wz=Pe(Pe({},r),gz);var Tz=function(e){function t(e,n,r,i){var a=e[i++];if("__proto__"===a)return!0;var o=Number.isFinite(+a),s=i>=e.length;return a=!a&&Qj.isArray(r)?r.length:a,s?(Qj.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):(r[a]&&Qj.isObject(r[a])||(r[a]=[]),t(e,n,r[a],i)&&Qj.isArray(r[a])&&(r[a]=function(e){var t,n,r={},i=Object.keys(e),a=i.length;for(t=0;t<a;t++)r[n=i[t]]=e[n];return r}(r[a])),!o)}if(Qj.isFormData(e)&&Qj.isFunction(e.entries)){var n={};return Qj.forEachEntry(e,(function(e,r){t(function(e){return Qj.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var Sz={transitional:mz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,a=Qj.isObject(e);if(a&&Qj.isHTMLForm(e)&&(e=new FormData(e)),Qj.isFormData(e))return i?JSON.stringify(Tz(e)):e;if(Qj.isArrayBuffer(e)||Qj.isBuffer(e)||Qj.isStream(e)||Qj.isFile(e)||Qj.isBlob(e)||Qj.isReadableStream(e))return e;if(Qj.isArrayBufferView(e))return e.buffer;if(Qj.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(a){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return sz(e,new wz.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return wz.isNode&&Qj.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Qj.isFileList(e))||r.indexOf("multipart/form-data")>-1){var o=this.env&&this.env.FormData;return sz(n?{"files[]":e}:e,o&&new o,this.formSerializer)}}return a||i?(t.setContentType("application/json",!1),function(e,t,n){if(Qj.isString(e))try{return(t||JSON.parse)(e),Qj.trim(e)}catch(Qp){if("SyntaxError"!==Qp.name)throw Qp}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||Sz.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Qj.isResponse(e)||Qj.isReadableStream(e))return e;if(e&&Qj.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Qp){if(i){if("SyntaxError"===Qp.name)throw nz.from(Qp,nz.ERR_BAD_RESPONSE,this,null,this.response);throw Qp}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wz.classes.FormData,Blob:wz.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Qj.forEach(["delete","get","head","post","put","patch"],(function(e){Sz.headers[e]={}}));var kz=Sz,Cz=Qj.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Az=Symbol("internals");function Iz(e){return e&&String(e).trim().toLowerCase()}function Oz(e){return!1===e||null==e?e:Qj.isArray(e)?e.map(Oz):String(e)}function Pz(e,t,n,r,i){return Qj.isFunction(r)?r.call(this,t,n):(i&&(t=n),Qj.isString(t)?Qj.isString(r)?-1!==t.indexOf(r):Qj.isRegExp(r)?r.test(t):void 0:void 0)}var Mz=function(e,t){function n(e){l(this,n),e&&this.set(e)}return d(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=Iz(t);if(!i)throw new Error("header name must be a non-empty string");var a=Qj.findKey(r,i);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||t]=Oz(e))}var a=function(e,t){return Qj.forEach(e,(function(e,n){return i(e,n,t)}))};if(Qj.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Qj.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&Cz[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t);else if(Qj.isHeaders(e)){var o,s=Gy(e.entries());try{for(s.s();!(o=s.n()).done;){var l=It(o.value,2),u=l[0];i(l[1],u,n)}}catch(c){s.e(c)}finally{s.f()}}else null!=e&&i(t,e,n);return this}},{key:"get",value:function(e,t){if(e=Iz(e)){var n=Qj.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Qj.isFunction(t))return t.call(this,r,n);if(Qj.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=Iz(e)){var n=Qj.findKey(this,e);return!(!n||void 0===this[n]||t&&!Pz(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=Iz(e)){var i=Qj.findKey(n,e);!i||t&&!Pz(0,n[i],i,t)||(delete n[i],r=!0)}}return Qj.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!Pz(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Qj.forEach(this,(function(r,i){var a=Qj.findKey(n,i);if(a)return t[a]=Oz(r),void delete t[i];var o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();o!==i&&delete t[i],t[o]=Oz(r),n[o]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Qj.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Qj.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=It(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[Az]=this[Az]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=Iz(e);t[r]||(!function(e,t){var n=Qj.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Qj.isArray(e)?e.forEach(r):r(e),this}}]),n}();Mz.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Qj.reduceDescriptors(Mz.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),Qj.freezeMethods(Mz);var Rz=Mz;function Nz(e,t){var n=this||kz,r=t||n,i=Rz.from(r.headers),a=r.data;return Qj.forEach(e,(function(e){a=e.call(n,a,i.normalize(),t?t.status:void 0)})),i.normalize(),a}function Dz(e){return!(!e||!e.__CANCEL__)}function Lz(e,t,n){nz.call(this,null==e?"canceled":e,nz.ERR_CANCELED,t,n),this.name="CanceledError"}Qj.inherits(Lz,nz,{__CANCEL__:!0});var Fz=Lz;function Bz(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new nz("Request failed with status code "+n.status,[nz.ERR_BAD_REQUEST,nz.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var Uz=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),a=0,o=0;return t=void 0!==t?t:1e3,function(s){var l=Date.now(),u=i[o];n||(n=l),r[a]=s,i[a]=l;for(var c=o,h=0;c!==a;)h+=r[c++],c%=e;if((a=(a+1)%e)===o&&(o=(o+1)%e),!(l-n<t)){var d=u&&l-u;return d?Math.round(1e3*h/d):void 0}}};var Hz=function(e,t){var n,r,i=0,a=1e3/t,o=function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=a,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){for(var e=Date.now(),t=e-i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];t>=a?o(l,e):(n=l,r||(r=setTimeout((function(){r=null,o(n)}),a-t)))},function(){return n&&o(n)}]},jz=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0,i=Uz(50,250);return Hz((function(n){var a=n.loaded,o=n.lengthComputable?n.total:void 0,s=a-r,l=i(s);r=a;var u=y({loaded:a,total:o,progress:o?a/o:void 0,bytes:s,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:n,lengthComputable:null!=o},t?"download":"upload",!0);e(u)}),n)},zz=function(e,t){var n=null!=e;return[function(r){return t[0]({lengthComputable:n,total:e,loaded:r})},t[1]]},Vz=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Qj.asap((function(){return e.apply(void 0,n)}))}},Gz=wz.hasStandardBrowserEnv?function(){var e,t=wz.navigator&&/(msie|trident)/i.test(wz.navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Qj.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},Wz=wz.hasStandardBrowserEnv?{write:function(e,t,n,r,i,a){var o=[e+"="+encodeURIComponent(t)];Qj.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Qj.isString(r)&&o.push("path="+r),Qj.isString(i)&&o.push("domain="+i),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function Xz(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var Yz=function(e){return e instanceof Rz?Pe({},e):e};function Kz(e,t){t=t||{};var n={};function r(e,t,n){return Qj.isPlainObject(e)&&Qj.isPlainObject(t)?Qj.merge.call({caseless:n},e,t):Qj.isPlainObject(t)?Qj.merge({},t):Qj.isArray(t)?t.slice():t}function i(e,t,n){return Qj.isUndefined(t)?Qj.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function a(e,t){if(!Qj.isUndefined(t))return r(void 0,t)}function o(e,t){return Qj.isUndefined(t)?Qj.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,a){return a in t?r(n,i):a in e?r(void 0,n):void 0}var l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:s,headers:function(e,t){return i(Yz(e),Yz(t),!0)}};return Qj.forEach(Object.keys(Object.assign({},e,t)),(function(r){var a=l[r]||i,o=a(e[r],t[r],r);Qj.isUndefined(o)&&a!==s||(n[r]=o)})),n}var qz=function(e){var t,n=Kz({},e),r=n.data,i=n.withXSRFToken,a=n.xsrfHeaderName,o=n.xsrfCookieName,s=n.headers,l=n.auth;if(n.headers=s=Rz.from(s),n.url=fz(Xz(n.baseURL,n.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Qj.isFormData(r))if(wz.hasStandardBrowserEnv||wz.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(t=s.getContentType())){var u=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=Ar(u),h=c[0],d=c.slice(1);s.setContentType([h||"multipart/form-data"].concat(Ie(d)).join("; "))}if(wz.hasStandardBrowserEnv&&(i&&Qj.isFunction(i)&&(i=i(n)),i||!1!==i&&Gz(n.url))){var f=a&&o&&Wz.read(o);f&&s.set(a,f)}return n},$z="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i,a,o,s,l=qz(e),u=l.data,c=Rz.from(l.headers).normalize(),h=l.responseType,d=l.onUploadProgress,f=l.onDownloadProgress;function p(){o&&o(),s&&s(),l.cancelToken&&l.cancelToken.unsubscribe(r),l.signal&&l.signal.removeEventListener("abort",r)}var v=new XMLHttpRequest;function m(){if(v){var r=Rz.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders());Bz((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v}),v=null}}if(v.open(l.method.toUpperCase(),l.url,!0),v.timeout=l.timeout,"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(m)},v.onabort=function(){v&&(n(new nz("Request aborted",nz.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new nz("Network Error",nz.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){var t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",r=l.transitional||mz;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),n(new nz(t,r.clarifyTimeoutError?nz.ETIMEDOUT:nz.ECONNABORTED,e,v)),v=null},void 0===u&&c.setContentType(null),"setRequestHeader"in v&&Qj.forEach(c.toJSON(),(function(e,t){v.setRequestHeader(t,e)})),Qj.isUndefined(l.withCredentials)||(v.withCredentials=!!l.withCredentials),h&&"json"!==h&&(v.responseType=l.responseType),f){var g=It(jz(f,!0),2);a=g[0],s=g[1],v.addEventListener("progress",a)}if(d&&v.upload){var y=It(jz(d),2);i=y[0],o=y[1],v.upload.addEventListener("progress",i),v.upload.addEventListener("loadend",o)}(l.cancelToken||l.signal)&&(r=function(t){v&&(n(!t||t.type?new Fz(null,e,v):t),v.abort(),v=null)},l.cancelToken&&l.cancelToken.subscribe(r),l.signal&&(l.signal.aborted?r():l.signal.addEventListener("abort",r)));var b=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l.url);b&&-1===wz.protocols.indexOf(b)?n(new nz("Unsupported protocol "+b+":",nz.ERR_BAD_REQUEST,e)):v.send(u||null)}))},Zz=function(e,t){var n=(e=e?e.filter(Boolean):[]).length;if(t||n){var r,i=new AbortController,a=function(e){if(!r){r=!0,s();var t=e instanceof Error?e:this.reason;i.abort(t instanceof nz?t:new Fz(t instanceof Error?t.message:t))}},o=t&&setTimeout((function(){o=null,a(new nz("timeout ".concat(t," of ms exceeded"),nz.ETIMEDOUT))}),t),s=function(){e&&(o&&clearTimeout(o),o=null,e.forEach((function(e){e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)})),e=null)};e.forEach((function(e){return e.addEventListener("abort",a)}));var l=i.signal;return l.unsubscribe=function(){return Qj.asap(s)},l}};function Qz(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new FF(r=new Promise((function(n){n(e[t](r))})),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}var Jz,eV,tV=ye().mark((function e(t,n){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.byteLength,n&&!(r<n)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:i=0;case 6:if(!(i<r)){e.next=13;break}return a=i+n,e.next=10,t.slice(i,a);case 10:i=a,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),nV=function(){var e=HF(ye().mark((function e(t,n){var r,i,a,o,s,l;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,o=DF(rV(t));case 4:return e.next=6,BF(o.next());case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return l=s.value,e.delegateYield(Qz(DF(tV(l,n))),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,a=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==o.return){e.next=23;break}return e.next=23,BF(o.return());case 23:if(e.prev=23,!i){e.next=26;break}throw a;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,n){return e.apply(this,arguments)}}(),rV=function(){var e=HF(ye().mark((function e(t){var n,r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[Symbol.asyncIterator]){e.next=3;break}return e.delegateYield(Qz(DF(t)),"t0",2);case 2:return e.abrupt("return");case 3:n=t.getReader(),e.prev=4;case 5:return e.next=7,BF(n.read());case 7:if(r=e.sent,i=r.done,a=r.value,!i){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,a;case 14:e.next=5;break;case 16:return e.prev=16,e.next=19,BF(n.cancel());case 19:return e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[4,,16,20]])})));return function(t){return e.apply(this,arguments)}}(),iV=function(e,t,n,r){var i,a=nV(e,t),o=0,s=function(e){i||(i=!0,r&&r(e))};return new ReadableStream({pull:function(e){return _e(ye().mark((function t(){var r,i,l,u,c;return ye().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,a.next();case 3:if(r=t.sent,i=r.done,l=r.value,!i){t.next=10;break}return s(),e.close(),t.abrupt("return");case 10:u=l.byteLength,n&&(c=o+=u,n(c)),e.enqueue(new Uint8Array(l)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(0),s(t.t0),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},cancel:function(e){return s(e),a.return()}},{highWaterMark:2})},aV="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,oV=aV&&"function"===typeof ReadableStream,sV=aV&&("function"===typeof TextEncoder?(Jz=new TextEncoder,function(e){return Jz.encode(e)}):function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),lV=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e.apply(void 0,n)}catch(Qp){return!1}},uV=oV&&lV((function(){var e=!1,t=new Request(wz.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),cV=oV&&lV((function(){return Qj.isReadableStream(new Response("").body)})),hV={stream:cV&&function(e){return e.body}};aV&&(eV=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!hV[e]&&(hV[e]=Qj.isFunction(eV[e])?function(t){return t[e]()}:function(t,n){throw new nz("Response type '".concat(e,"' is not supported"),nz.ERR_NOT_SUPPORT,n)})})));var dV=function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!Qj.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!Qj.isSpecCompliantForm(t)){e.next=9;break}return n=new Request(wz.origin,{method:"POST",body:t}),e.next=8,n.arrayBuffer();case 8:case 15:return e.abrupt("return",e.sent.byteLength);case 9:if(!Qj.isArrayBufferView(t)&&!Qj.isArrayBuffer(t)){e.next=11;break}return e.abrupt("return",t.byteLength);case 11:if(Qj.isURLSearchParams(t)&&(t+=""),!Qj.isString(t)){e.next=16;break}return e.next=15,sV(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fV=function(){var e=_e(ye().mark((function e(t,n){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qj.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==r?dV(n):r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pV=aV&&function(){var e=_e(ye().mark((function e(t){var n,r,i,a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=qz(t),r=n.url,i=n.method,a=n.data,o=n.signal,s=n.cancelToken,l=n.timeout,u=n.onDownloadProgress,c=n.onUploadProgress,h=n.responseType,d=n.headers,f=n.withCredentials,p=void 0===f?"same-origin":f,v=n.fetchOptions,h=h?(h+"").toLowerCase():"text",m=Zz([o,s&&s.toAbortSignal()],l),y=m&&m.unsubscribe&&function(){m.unsubscribe()},e.prev=4,e.t0=c&&uV&&"get"!==i&&"head"!==i,!e.t0){e.next=11;break}return e.next=9,fV(d,a);case 9:e.t1=b=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}_=new Request(r,{method:"POST",body:a,duplex:"half"}),Qj.isFormData(a)&&(x=_.headers.get("content-type"))&&d.setContentType(x),_.body&&(E=zz(b,jz(Vz(c))),w=It(E,2),T=w[0],S=w[1],a=iV(_.body,65536,T,S));case 15:return Qj.isString(p)||(p=p?"include":"omit"),k="credentials"in Request.prototype,g=new Request(r,Pe(Pe({},v),{},{signal:m,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:a,duplex:"half",credentials:k?p:void 0})),e.next=20,fetch(g);case 20:return C=e.sent,A=cV&&("stream"===h||"response"===h),cV&&(u||A&&y)&&(I={},["status","statusText","headers"].forEach((function(e){I[e]=C[e]})),O=Qj.toFiniteNumber(C.headers.get("content-length")),P=u&&zz(O,jz(Vz(u),!0))||[],M=It(P,2),R=M[0],N=M[1],C=new Response(iV(C.body,65536,R,(function(){N&&N(),y&&y()})),I)),h=h||"text",e.next=26,hV[Qj.findKey(hV,h)||"text"](C,t);case 26:return D=e.sent,!A&&y&&y(),e.next=30,new Promise((function(e,n){Bz(e,n,{data:D,headers:Rz.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:g})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),y&&y(),!e.t2||"TypeError"!==e.t2.name||!/fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new nz("Network Error",nz.ERR_NETWORK,t,g),{cause:e.t2.cause||e.t2});case 38:throw nz.from(e.t2,e.t2&&e.t2.code,t,g);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}(),vV={http:null,xhr:$z,fetch:pV};Qj.forEach(vV,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Qp){}Object.defineProperty(e,"adapterName",{value:t})}}));var mV=function(e){return"- ".concat(e)},gV=function(e){return Qj.isFunction(e)||null===e||!1===e},yV=function(e){for(var t,n,r=(e=Qj.isArray(e)?e:[e]).length,i={},a=0;a<r;a++){var o=void 0;if(n=t=e[a],!gV(t)&&void 0===(n=vV[(o=String(t)).toLowerCase()]))throw new nz("Unknown adapter '".concat(o,"'"));if(n)break;i[o||"#"+a]=n}if(!n){var s=Object.entries(i).map((function(e){var t=It(e,2),n=t[0],r=t[1];return"adapter ".concat(n," ")+(!1===r?"is not supported by the environment":"is not available in the build")})),l=r?s.length>1?"since :\n"+s.map(mV).join("\n"):" "+mV(s[0]):"as no adapter specified";throw new nz("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n};function bV(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Fz(null,e)}function _V(e){return bV(e),e.headers=Rz.from(e.headers),e.data=Nz.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),yV(e.adapter||kz.adapter)(e).then((function(t){return bV(e),t.data=Nz.call(e,e.transformResponse,t),t.headers=Rz.from(t.headers),t}),(function(t){return Dz(t)||(bV(e),t&&t.response&&(t.response.data=Nz.call(e,e.transformResponse,t.response),t.response.headers=Rz.from(t.response.headers))),Promise.reject(t)}))}var xV="1.7.7",EV={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){EV[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var wV={};EV.transitional=function(e,t,n){return function(r,i,a){if(!1===e)throw new nz(function(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),nz.ERR_DEPRECATED);return t&&!wV[i]&&(wV[i]=!0),!e||e(r,i,a)}};var TV={assertOptions:function(e,t,n){if("object"!==typeof e)throw new nz("options must be an object",nz.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var a=r[i],o=t[a];if(o){var s=e[a],l=void 0===s||o(s,a,e);if(!0!==l)throw new nz("option "+a+" must be "+l,nz.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new nz("Unknown option "+a,nz.ERR_BAD_OPTION)}},validators:EV},SV=TV.validators,kV=function(){function e(t){l(this,e),this.defaults=t,this.interceptors={request:new vz,response:new vz}}return d(e,[{key:"request",value:function(){var e=_e(ye().mark((function e(t,n){var r,i;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,n);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error,i=r.stack?r.stack.replace(/^.+\n/,""):"";try{e.t0.stack?i&&!String(e.t0.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+i):e.t0.stack=i}catch(Qp){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=Kz(this.defaults,t),r=n.transitional,i=n.paramsSerializer,a=n.headers;void 0!==r&&TV.assertOptions(r,{silentJSONParsing:SV.transitional(SV.boolean),forcedJSONParsing:SV.transitional(SV.boolean),clarifyTimeoutError:SV.transitional(SV.boolean)},!1),null!=i&&(Qj.isFunction(i)?t.paramsSerializer={serialize:i}:TV.assertOptions(i,{encode:SV.function,serialize:SV.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var o=a&&Qj.merge(a.common,a[t.method]);a&&Qj.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete a[e]})),t.headers=Rz.concat(o,a);var s=[],l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var h,d=0;if(!l){var f=[_V.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,c),h=f.length,u=Promise.resolve(t);d<h;)u=u.then(f[d++],f[d++]);return u}h=s.length;var p=t;for(d=0;d<h;){var v=s[d++],m=s[d++];try{p=v(p)}catch(g){m.call(this,g);break}}try{u=_V.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}},{key:"getUri",value:function(e){return fz(Xz((e=Kz(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Qj.forEach(["delete","get","head","options"],(function(e){kV.prototype[e]=function(t,n){return this.request(Kz(n||{},{method:e,url:t,data:(n||{}).data}))}})),Qj.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(Kz(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}kV.prototype[e]=t(),kV.prototype[e+"Form"]=t(!0)}));var CV=kV,AV=function(){function e(t){if(l(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new Fz(e,t,i),n(r.reason))}))}return d(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}},{key:"toAbortSignal",value:function(){var e=this,t=new AbortController,n=function(e){t.abort(e)};return this.subscribe(n),t.signal.unsubscribe=function(){return e.unsubscribe(n)},t.signal}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),IV=AV;var OV={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(OV).forEach((function(e){var t=It(e,2),n=t[0],r=t[1];OV[r]=n}));var PV=OV;var MV=function e(t){var n=new CV(t),r=uj(CV.prototype.request,n);return Qj.extend(r,CV.prototype,n,{allOwnKeys:!0}),Qj.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Kz(t,n))},r}(kz);MV.Axios=CV,MV.CanceledError=Fz,MV.CancelToken=IV,MV.isCancel=Dz,MV.VERSION=xV,MV.toFormData=sz,MV.AxiosError=nz,MV.Cancel=MV.CanceledError,MV.all=function(e){return Promise.all(e)},MV.spread=function(e){return function(t){return e.apply(null,t)}},MV.isAxiosError=function(e){return Qj.isObject(e)&&!0===e.isAxiosError},MV.mergeConfig=Kz,MV.AxiosHeaders=Rz,MV.formToJSON=function(e){return Tz(Qj.isHTMLForm(e)?new FormData(e):e)},MV.getAdapter=yV,MV.HttpStatusCode=PV,MV.default=MV;var RV=MV,NV=(lj.Dragger,{dragon:{dbJsonUrl:"./assets/examples/dragon/Dragon.json",textureUrl:"./assets/examples/dragon/texture.png",textureConfigUrl:"./assets/examples/dragon/texture.json",icon:"./assets/examples/DBa.png"},bicycle:{dbJsonUrl:"./assets/examples/Bicycle/Bicycle_ske.json",textureUrl:"./assets/examples/Bicycle/Bicycle_tex.png",textureConfigUrl:"./assets/examples/Bicycle/Bicycle_tex.json",icon:"./assets/examples/Dbf.png"},ubbie:{dbJsonUrl:"./assets/examples/Ubbie/Ubbie_ske.json",textureUrl:"./assets/examples/Ubbie/Ubbie_tex.png",textureConfigUrl:"./assets/examples/Ubbie/Ubbie_tex.json",icon:"./assets/examples/Dbe.png"},rooster:{dbJsonUrl:"./assets/examples/Rooster_Ani/Rooster_An_ske.json",textureUrl:"./assets/examples/Rooster_Ani/Rooster_An_tex.png",textureConfigUrl:"./assets/examples/Rooster_Ani/Rooster_An_tex.json",icon:"./assets/examples/DBk.png"},sheep:{dbJsonUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_ske.json",textureUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_tex.png",textureConfigUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_tex.json",icon:"./assets/examples/DBj.png"}}),DV=function(e){var t=e.show,n=e.store,r=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.commit(G.CLOSE_IMPORT_WINDOW,!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){n.commit(G.CLOSE_IMPORT_WINDOW,!1)},a=function(){var e=_e(ye().mark((function e(t){var n,r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RV.get(t,{responseType:"blob"});case 2:return n=e.sent,e.next=5,tU(n.data);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RV.get(t);case 2:return n=e.sent,e.abrupt("return",JSON.stringify(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,RV.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=It(e.split("."),2),n=t[0];t[1];return n},u=function(){var e=_e(ye().mark((function e(t){var r,i,a;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iT.uploadFileToServer(t);case 2:r=e.sent,n.commit(b.UPLOAD_FILE,r),i=n.getId(),a={id:i,name:l(t.name),fileIds:[t.id],type:t.type,data:t.data},n.dispatch(M.ADD_FILE,a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=_e(ye().mark((function e(t,n){var r,i,s,l,c,h;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split("/").pop(),i=n.split("/").pop(),e.next=4,a(t);case 4:return s=e.sent,e.next=7,o(n);case 7:return l=e.sent,c={name:r,type:"png",data:s},e.next=11,u(c);case 11:return h={name:i,type:"json",data:l},e.next=14,u(h);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=_e(ye().mark((function e(t){var r;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:r=e.sent,zf.isDragonbonesJson(r)&&n.dispatch(M.LOAD_DRAGON_BONES_JSON_DATA,{data:r,version:r.version});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=_e(ye().mark((function e(t){var n;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=NV[t],e.next=4,c(n.textureUrl,n.textureConfigUrl);case 4:return e.sent,e.next=7,h(n.dbJsonUrl);case 7:return e.sent,mf.success("\u5bfc\u5165\u6210\u529f"),i(),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),mf.error("\u5bfc\u5165\u5931\u8d25"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("dragon");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("bicycle");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("ubbie");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("rooster");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("sheep");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,hf.jsx)(Kc,{title:"\u5bfc\u5165",open:t,onOk:r,onCancel:i,okText:"\u5bfc\u5165",width:660,children:(0,hf.jsxs)("div",{className:"import-window",children:[(0,hf.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u793a\u4f8b"}),(0,hf.jsxs)("div",{className:"import-example",children:[(0,hf.jsxs)("li",{onClick:f,children:[(0,hf.jsx)("img",{src:NV.dragon.icon}),(0,hf.jsx)("span",{children:"\u5c0f\u7eff\u9f99"})]}),(0,hf.jsxs)("li",{onClick:p,children:[(0,hf.jsx)("img",{src:NV.bicycle.icon}),(0,hf.jsx)("span",{children:"ik\u793a\u4f8b"})]}),(0,hf.jsxs)("li",{onClick:v,children:[(0,hf.jsx)("img",{src:NV.ubbie.icon}),(0,hf.jsx)("span",{children:"mesh\u793a\u4f8b"})]}),(0,hf.jsxs)("li",{onClick:m,children:[(0,hf.jsx)("img",{src:NV.rooster.icon}),(0,hf.jsx)("span",{children:"\u7ed1\u5b9a\u793a\u4f8b1"})]}),(0,hf.jsxs)("li",{onClick:g,children:[(0,hf.jsx)("img",{src:NV.sheep.icon}),(0,hf.jsx)("span",{children:"\u7ed1\u5b9a\u793a\u4f8b2"})]})]}),(0,hf.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u7d20\u6750"}),(0,hf.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165png\u3001jpg\u3001jpeg\u7684\u56fe\u7247\u6587\u4ef6\uff0c\u548c\u7eb9\u7406\u96c6\u7684json\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f"}),(0,hf.jsx)("div",{}),(0,hf.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u9f99\u9aa8\u6570\u636e"}),(0,hf.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165json\u683c\u5f0f\u7684\u9f99\u9aa8\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f\u5373\u53ef\uff0c\u5bfc\u5165\u9f99\u9aa8\u6587\u4ef6\u524d\u8981\u5148\u5bfc\u5165\u7d20\u6750"}),(0,hf.jsx)("div",{}),(0,hf.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u9f99\u9aa8\u5de5\u7a0b\u6587\u4ef6"}),(0,hf.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165dbproj\u683c\u5f0f\u7684\u9f99\u9aa8\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f\u5373\u53ef\uff0c\u5bfc\u5165\u9f99\u9aa8\u5de5\u7a0b\u6587\u4ef6\u524d\u8981\u5148\u5bfc\u5165\u7d20\u6750"}),(0,hf.jsx)("div",{})]})})},LV=void 0,FV=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:BV,label:"\u821e\u53f0",icon:"icon-code",type:gboxLayout.GPanelType.BLOCK})}return d(n,[{key:"resize",value:function(e,t){this.store.commit(W.UPDATE_SIZE,{width:e,height:t})}}],[{key:"toString",value:function(){return"StagePanel"}}]),n}(_T),BV=function(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)(null),o=e.store.state.editor.stage,s=e.store.state.runtime.editing.stageTool,l=e.store.state.runtime.editing.boneSlotControl,u=e.store.state.runtime.editing.selectedBoneIds,c=e.store.state.runtime.editing.selectedSlotIds,h=e.store.state.editor.over.overBone,d=e.store.state.editor.over.overSlotId,f=e.store.state.editor.openExportWindow||!1,p=e.store.state.editor.openImportWindow||!1,v=e.store.state.editor.openPreviewWindow||!1,m=e.store.state.runtime.editing.editMode,g=e.store.getCurArmature(),y=It((0,a.useState)(Pe({},o)),2),b=y[0],_=y[1],x=It((0,a.useState)(s),2),E=x[0],w=x[1],T=It((0,a.useState)(Pe({},l)),2),S=T[0],k=T[1],C=It((0,a.useState)(Ie(u)),2),A=C[0],I=C[1],O=It((0,a.useState)(Ie(c)),2),P=O[0],M=O[1],R=It((0,a.useState)(h),2),D=R[0],B=R[1],U=It((0,a.useState)(d),2),j=U[0],z=U[1],X=It((0,a.useState)(f),2),Y=X[0],K=X[1],q=It((0,a.useState)(p),2),$=q[0],Q=q[1],J=It((0,a.useState)(v),2),ee=J[0],te=J[1],ne=It((0,a.useState)(""),2),re=ne[0],ie=ne[1],ae=It((0,a.useState)(m),2),oe=ae[0],se=ae[1],le=function(){_(Pe({},o))};(0,a.useEffect)((function(){var n=e.store.state;e.eventBus.on(W.UPDATE_SIZE,(function(e){le()}),LV),e.eventBus.on(W.UPDATE_POSITION,(function(e){le()}),LV),e.eventBus.on(W.UPDATE_SCALE,(function(e){le()}),LV),e.eventBus.on(G.SWITCH_MODE,(function(){var t=e.store.state.runtime.editing.editMode;se(t)}),LV),e.eventBus.on(G.SWITCH_TOOL,(function(){var t=e.store.state.runtime.editing.stageTool;w(t)}),LV),e.eventBus.on(G.CHANGE_BONE_SLOT_CONTROL,(function(){var t=e.store.state.runtime.editing.boneSlotControl;k(Pe({},t))}),LV),e.eventBus.on(V.UPDATE_PROPERTIES,(function(){var t=e.store.state.runtime.editing.selectedBoneIds;I(Ie(t))}),LV),e.eventBus.on(V.SELECT_BONES,(function(){var t=e.store.state.runtime.editing.selectedBoneIds;I(Ie(t))}),LV),e.eventBus.on(F.UPDATE_PROPERTIES,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Ie(t))}),LV),e.eventBus.on(F.SELECT_SLOTS,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Ie(t))}),LV),e.eventBus.on(H.SELECT_DISPLAY,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Ie(t))}),LV),e.eventBus.on(V.OVER_BONE,(function(){var t=e.store.state.editor.over.overBone;B(t)}),LV),e.eventBus.on(F.OVER_SLOT,(function(){var t=e.store.state.editor.over.overSlotId;z(t)}),LV),e.eventBus.on(G.OPEN_EXPORT_WINDOW,(function(){var t=e.store.state.editor.openExportWindow;K(t)}),LV),e.eventBus.on(G.CLOSE_EXPORT_WINDOW,(function(){var t=e.store.state.editor.openExportWindow;K(t)}),LV),e.eventBus.on(G.OPEN_IMPORT_WINDOW,(function(){e.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL&&e.store.dispatch(W.CLOSE_MESH_EDIT_TOOL,{});var t=e.store.state.editor.openImportWindow;Q(t)}),LV),e.eventBus.on(G.CLOSE_IMPORT_WINDOW,(function(){var t=e.store.state.editor.openImportWindow;Q(t)}),LV),e.eventBus.on(G.OPEN_PREVIEW_WINDOW,(function(){var t=e.store.state.editor.openPreviewWindow;te(t)}),LV),e.eventBus.on(G.CLOSE_PREVIEW_WINDOW,(function(){var t=e.store.state.editor.openPreviewWindow;te(t)}),LV),e.eventBus.on(G.SET_DEFAULT_TOOLTIP_TOP,(function(t){var n=e.store.state.runtime.editing.defaultTips;ie(n||"")}),LV),e.eventBus.on(N.SELECT_ARMATURE,(function(t){var n=e.store.state.runtime.editing.selectedBoneIds;I(Ie(n));var r=e.store.state.runtime.editing.selectedSlotIds;M(Ie(r));var i=e.store.state.editor.over.overSlotId;z(i);var a=e.store.state.editor.over.overBone;B(a),ie("")}),LV),function(e,t){var n=Math.round(window.devicePixelRatio),r=new pC({width:t.width,height:t.height,backgroundColor:10066329,backgroundAlpha:1,clearBeforeRender:!0,context:null,powerPreference:"default",premultipliedAlpha:!0,preserveDrawingBuffer:!1,resolution:n,autoDensity:!0,antialias:!1,hello:!0});r.addToContainer(e.current),JS.pixiLayer=e.current,y2.instance.initViewController(lC,r)}(t,n.editor.stage)}),[]);return(0,hf.jsxs)("div",{className:"stage-panel",children:[(0,hf.jsx)("div",{className:"stage",ref:t,onDrop:function(t){var n=t.dataTransfer;if(n){var r=n.getData("dropToScene"),i=e.store.state.editor.stage.mouseStageX,a=e.store.state.editor.stage.mouseStageY;if(r&&r.id){var o={x:i,y:a,assetId:r.id};e.store.dispatch(L.ADD_SLOT,o)}}},onDragOver:function(){}}),(0,hf.jsxs)("div",{className:"scale-widget",ref:n,onClick:function(){e.eventBus.sendNotification(W.RESET_SCALE,void 0)},children:[Math.round(100*b.scale)," "]}),(0,hf.jsx)(hC,{size:b.width,offset:b.x,scale:b.scale,vertical:!1,ref:r}),(0,hf.jsx)(hC,{size:b.height,offset:b.y,scale:b.scale,vertical:!0,ref:i}),(0,hf.jsx)(TA,{curTool:E,editMode:oe,onSwitchTool:function(t){e.store.dispatch(W.SWITCH_TOOL,t)}}),s!==Z.MESH_EDIT_TOOL&&s!==Z.RIGGING_TOOL&&(0,hf.jsx)(CA,{boneVisible:S.boneVisible,boneSelectEnable:S.boneSelectEnable,boneInheritEnable:S.boneInheritEnable,slotVisible:S.slotVisible,slotSelectEnable:S.slotSelectEnable,slotInheritEnable:S.slotInheritEnable,onChange:function(t,n){e.store.dispatch(W.CHANGE_BONE_SLOT_CONTROL,{property:t,value:n})}}),(0,hf.jsx)(IA,{selectBoneIds:A,selectSlotIds:P,armature:g,overBoneId:D,overSlotId:j,defaultTips:re}),s===Z.MESH_EDIT_TOOL&&(0,hf.jsx)(EU,{store:e.store,eventBus:e.eventBus}),(0,hf.jsx)(mf,{}),(0,hf.jsx)(oU,{show:Y,store:e.store}),(0,hf.jsx)(yU,{show:ee,store:e.store}),(0,hf.jsx)(DV,{show:$,store:e.store})]})},UV=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).loopLeft=-1,r.loopRight=-1,r.degreeScale=void 0,r.model=void 0,r._realWidth=void 0,r._index=void 0,r._minScale=void 0,r._curNum=void 0,r.bg=void 0,r.txtContainer=void 0,r.pointerContainer=void 0,r.curPointer=void 0,r.lastPointer=void 0,r.txtPool=void 0,r.curTxts=void 0,r.txtCurFrame=void 0,r.zoomCenterFrame=0,r.model=e,r.bg=new SE,r.addChild(r.bg),r.degreeScale=new SE,r.addChild(r.degreeScale),r.txtContainer=new Pb,r.addChild(r.txtContainer),r.pointerContainer=new Pb,r.addChild(r.pointerContainer),r.curPointer=r.drawPointer(),r.lastPointer=r.drawLastPointer(),r.pointerContainer.addChild(r.lastPointer),r.pointerContainer.addChild(r.curPointer),r.txtCurFrame=new ew(""),r.txtCurFrame.style.fill=Uf.DOPESHEET_PLAY_HEAD,r.txtCurFrame.style.fontSize=9,r.txtCurFrame.style.align="center",r.pointerContainer.addChild(r.txtCurFrame),r.txtPool=[],r.curTxts=[],r._realWidth=100,r}return d(n,[{key:"curFrame",get:function(){return this.model.state.editor.dopesheet.curTime}},{key:"realWidth",get:function(){return this._realWidth}},{key:"timelineScale",get:function(){return this.model.state.editor.dopesheet.scale},set:function(e){this.model.commit($.UPDATE_SCALE,e)}},{key:"offsetX",get:function(){return this.model.state.editor.dopesheet.offset}},{key:"resize",value:function(e,t){isNaN(e)||this._realWidth===e||(this._realWidth=e,this.refreshBg(),this.draw())}},{key:"zoomOut",value:function(){var e=this.model.state.config.timeline.ZOOM_RATE,t=this.timelineScale;t*=e,this.zoomToScale(t)}},{key:"zoomIn",value:function(){var e=this.model.state.config.timeline.ZOOM_RATE,t=this.timelineScale;t/=e,this.zoomToScale(t)}},{key:"getOffsetFrame",value:function(){var e=this.model.getFramePerLength();return this.model.state.editor.dopesheet.offset*e}},{key:"getViewMinFrame",value:function(){var e=this.model.state.config.timeline.FIRST_X;return this.getFrameFromX(e)}},{key:"getViewMaxFrame",value:function(){var e=this.model.state.config.timeline.FIRST_X;return this.getFrameFromX(this.realWidth-e)}},{key:"updateFrame",value:function(){this.refreshPointer()}},{key:"draw",value:function(){this.drawDegreeScale(),this.refreshPointer(),this.refreshLastFrame()}},{key:"refreshLastFrame",value:function(){var e=this.model.getAnimationDuration()[1],t=this.getXFromFrame(e);t>0?(this.lastPointer.x=t,this.lastPointer.visible=!0):this.lastPointer.visible=!1}},{key:"getXFromFrame",value:function(e){return this.model.getXFromFrame(e)}},{key:"getFrameFromX",value:function(e){var t=this.model.getFrameFromX(e);return Math.round(t)}},{key:"drawPointer",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.POINTER_HEIGHT,r=new SE;return r.lineStyle(1,Uf.DOPESHEET_PLAY_HEAD),r.moveTo(0,t),r.lineTo(0,t-n),r.moveTo(5,t-n-4),r.lineTo(0,t-n),r.moveTo(-5,t-n-4),r.lineTo(0,t-n),r}},{key:"drawLastPointer",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.LOW_FRAME_HEIGHT,r=new SE;return r.lineStyle(1,Uf.DOPESHEET_LAST_FRAME),r.moveTo(0,t),r.lineTo(0,t-n),r}},{key:"zoomToScale",value:function(e){this.zoomCenterFrame=this.curFrame;var t=this.getXFromFrame(this.zoomCenterFrame),n=this.model.state.editor.dopesheet.offset;this.timelineScale=e;var r=n+this.getXFromFrame(this.zoomCenterFrame)-t;r<0&&(r=0),this.model.commit($.UPDATE_OFFSET,r)}},{key:"refreshPointer",value:function(){var e=this.model.state.config.timeline.TEXT_Y,t=this.curFrame,n=this.getXFromFrame(t);if(n>0){this.curPointer.x=n;var r=Math.round(100*t)/100;this.txtCurFrame.text=r.toString(),this.txtCurFrame.x=n-Math.round(this.txtCurFrame.width/2),this.txtCurFrame.y=e,this.curPointer.visible=!0,this.txtCurFrame.visible=!0}else this.curPointer.visible=!1,this.txtCurFrame.visible=!1}},{key:"refreshBg",value:function(){var e=this.model.state.config.timeline.LABEL_HEIGHT;this.bg.clear(),this.bg.beginFill(Uf.DOPESHEET_LABEL_BG),this.bg.drawRect(0,0,this._realWidth,e),this.bg.endFill()}},{key:"drawDegreeScale",value:function(){var e=this.model.state.config.timeline,t=e.FIRST_X,n=e.LABEL_HEIGHT,r=e.LOW_FRAME_HEIGHT,i=e.HIGH_FRAME_HEIGHT,a=e.TEXT_Y,o=this.model.state.editor.dopesheet,s=o.offset,l=o.curGap,u=o.scaleLevel,c=o.labelLevel;this.degreeScale.clear(),this.degreeScale.lineStyle(1,Uf.DOPESHEET_LABEL,1);var h=s,d=Math.ceil((this._realWidth+t)/l),f=Math.floor(h/l);(f-=Math.floor(t/l))<0&&(f=0),this.disposetAllText();for(var p=f;p<d+f;p++){var v=p%c===0,m=n-r;v&&(m=n-i);var g=p*l-h+t,y=n;if(g>0&&(this.degreeScale.moveTo(g,y),this.degreeScale.lineTo(g,m)),v&&g>0){var b=this.getLabelTxt();b.style.align="center",b.text=(p*u).toString(),b.x=g-Math.round(b.width/2),b.y=a,this.txtContainer.addChild(b),this.curTxts.push(b)}}}},{key:"disposetAllText",value:function(){var e,t;for(this.txtContainer.removeChildren(),e=0,t=this.curTxts.length;e<t;e++)this.txtPool.push(this.curTxts[e]);this.curTxts.length=0}},{key:"getLabelTxt",value:function(){var e,t=this.model.state.config.timeline.FONT_SIZE;return this.txtPool.length>0?e=this.txtPool.shift():((e=new ew("")).style.fill=Uf.DOPESHEET_LABEL,e.style.fontSize=t),e}}]),n}(Pb),HV=function(){function e(){l(this,e),this._tickObjects=void 0,this._lastTickTime=void 0,this._curTime=void 0,this._newObjects=void 0,this._tickObjects=[],this._newObjects=[]}return d(e,[{key:"start",value:function(){}},{key:"tickHandler",value:function(){}},{key:"tick",value:function(e){for(var t=0,n=this._tickObjects.length;t<n;t++)this._tickObjects[t].tick(e);this.addAndRemoveObject()}},{key:"addAndRemoveObject",value:function(){this._tickObjects.splice(0,this._tickObjects.length);for(var e=0;e<this._newObjects.length;e++)this._tickObjects[e]=this._newObjects[e]}},{key:"stop",value:function(){}},{key:"registerTick",value:function(e){this._newObjects.push(e)}},{key:"unRegisterTick",value:function(e){var t=this._newObjects.indexOf(e);-1!==t&&this._newObjects.splice(t,1)}}],[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}();HV._instance=void 0;var jV=function(e){p(n,e);var t=g(n);function n(){var e,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l(this,n),(e=t.call(this)).baseObjects=void 0,e.newObjects=void 0,e.parentObject=void 0,e._drawPriority=void 0,e._tooltipVars=void 0,e._tooltip=void 0,e._tickEnable=void 0,e._disable=void 0,e._userData=void 0,e.interactive=r,e._disable=!r,e}return d(n,[{key:"drawPriority",get:function(){return this._drawPriority},set:function(e){this._drawPriority!==e&&(this._drawPriority=e,null!=this.parent&&this.parent instanceof n&&this.parent.reinsert(this))}},{key:"stage",get:function(){for(var e=null,t=this;t.parent;)e=t.parent,t=t.parent;return e}},{key:"disable",get:function(){return this._disable},set:function(e){this._disable!==e&&(this._disable=e,this.interactive=!this._disable)}},{key:"init",value:function(e){}},{key:"addObject",value:function(e){var t=!0;if(null!=e&&-1===this.newObjects.indexOf(e)){null!=e.parent&&e.parent instanceof n&&e.parent.removeObject(e);for(var r=0,i=this.newObjects.length;r<i;r++)if(this.newObjects[r].drawPriority>e.drawPriority){this.addChildAt(e,this.getChildIndex(this.newObjects[r])),this.newObjects.splice(r,0,e),t=!1;break}t&&(this.newObjects.push(e),this.addChild(e))}}},{key:"removeObject",value:function(e){var t;null!==e&&-1!==(t=this.newObjects.indexOf(e))&&(this.newObjects.splice(t,1),null!=e.parent&&e.parent===this&&this.removeChild(e))}},{key:"reinsert",value:function(e){var t;if(e.parent===this){-1!==(t=this.newObjects.indexOf(e))&&(this.newObjects.splice(t,1),this.removeChild(e));for(var n=!1,r=0,i=this.newObjects.length;r<i;r++)if(e.drawPriority<this.newObjects[r].drawPriority){this.addChildAt(e,this.getChildIndex(this.newObjects[r])),this.newObjects.splice(r,0,e),n=!0;break}n||(this.addChild(e),this.newObjects.push(e))}}},{key:"destroy",value:function(){for(var e=0,t=this.newObjects.length;e<t;e++)this.newObjects[e]&&this.newObjects[e].destroy()}},{key:"manipulate",value:function(e){0===e?this.scale.set(1,1):e===n.FLIP_VERTICAL?this.scale.x>0&&(this.scale.x=-this.scale.x):e===n.FLIP_HORIZONTAL&&this.scale.y>0&&(this.scale.y=-this.scale.y)}},{key:"tickBase",value:function(e){for(var t,n;n<this.baseObjects.length;n++)t=this.baseObjects[n],-1!==this.newObjects.indexOf(t)&&t.tickBase(e);this.tick(e),this.addAndRemoveObject()}},{key:"addAndRemoveObject",value:function(){this.baseObjects.splice(0,this.baseObjects.length);for(var e=0;e<this.newObjects.length;e++)this.baseObjects[e]=this.newObjects[e]}},{key:"tick",value:function(e){}},{key:"setTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==this._tooltip&&this._tooltip.hide(),this._tooltip=e,this._tooltipVars=t,null==e?(this.off("mouseover",this.showTooltipHandler,this),this.off("mouseout",this.hideTooltipHandler,this)):(this.on("mouseover",this.showTooltipHandler,this),this.on("mouseout",this.hideTooltipHandler,this))}},{key:"changeTip",value:function(e){null!==this._tooltip&&(this._tooltipVars=e,this._tooltip.setData(this._tooltipVars))}},{key:"hideTooltipHandler",value:function(e){null!==this._tooltip&&this._tooltip.hide()}},{key:"showTooltipHandler",value:function(e){if(null!==this._tooltip){this._tooltip.setData(this._tooltipVars);var t=new Hm;this._tooltip.setPosition(t.x,t.y,this.width,this.height),this._tooltip.show()}}},{key:"tickEnable",set:function(e){this._tickEnable!==e&&(this._tickEnable=e,e?HV.instance.registerTick(this):HV.instance.unRegisterTick(this))}},{key:"userData",get:function(){return this._userData},set:function(e){this._userData=e}}]),n}(Pb);jV.FLIP_VERTICAL=1,jV.FLIP_HORIZONTAL=2;var zV=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e,!0))._normalPic=void 0,r._downPic=void 0,r._overPic=void 0,r._config=void 0,r._toggle=void 0,r._selected=void 0,r.init2(e),r}return d(n,[{key:"parse",value:function(e){e.normal&&(this._normalPic=Nb.from(e.normal),this.addChild(this._normalPic)),e.down&&(this._downPic=Nb.from(e.down),this.addChild(this._downPic),this._downPic.visible=!1),e.over&&(this._overPic=Nb.from(e.over),this.addChild(this._overPic),this._overPic.visible=!1)}},{key:"init2",value:function(e){this._config=e,this.parse(this._config),this.on("mousedown",this.onMouseDown,this),this.on("mouseup",this.onMouseUp,this),this._config.over&&(this.on("mouseover",this.onMouseOver,this),this.on("mouseout",this.onMouseOut,this)),JS.setDisplayCursor(this,QS.hand)}},{key:"toggle",get:function(){return this._toggle},set:function(e){this._toggle!==e&&(this._toggle=e)}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected!==e&&(this._selected=e,this._downPic&&this._normalPic&&(this._downPic.visible=this._selected,this._normalPic.visible=!this._selected),this._overPic&&(this._overPic.visible=!1))}},{key:"onMouseUp",value:function(e){this._toggle||this._downPic&&this._normalPic&&(this._downPic.visible=!1,this._normalPic.visible=!0)}},{key:"onMouseDown",value:function(e){this._toggle?this.selected=!this._selected:this._downPic&&this._normalPic&&(this._downPic.visible=!0,this._normalPic.visible=!1)}},{key:"onMouseOver",value:function(e){if(this._toggle&&this.selected)return this._downPic.visible=!0,this._normalPic.visible=!1,void(this._overPic.visible=!1);this._overPic&&(this._downPic.visible=!1,this._normalPic.visible=!1,this._overPic.visible=!0)}},{key:"onMouseOut",value:function(e){this._downPic&&this._normalPic&&this._overPic&&(this.selected?(this._downPic.visible=!0,this._normalPic.visible=!1):(this._downPic.visible=!1,this._normalPic.visible=!0),this._overPic.visible=!1)}}]),n}(jV),VV=function(e){return e.ListScroll="GUIEvent.ListScroll",e.DragStart="GUIEvent.DragStart",e.DragMove="GUIEvent.DragMove",e.DragEnd="GUIEvent.DragEnd",e.Scroll="GUIEvent.Scroll",e.Select="GUIEvent.Select",e.Change="GUIEvent.Change",e}({}),GV=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,!0)).realWidth=void 0,i.realHeight=void 0,i.virtualWidth=void 0,i.virtualHeight=void 0,i.gapH=0,i.initItemCallback=void 0,i._data=void 0,i._itemCreator=void 0,i._totalNum=void 0,i._viewNum=void 0,i._items=[],i._itemPool=[],i._curIndex=0,i._curOff=0,i._position=0,i._maxPosition=0,i._itemH=void 0,i._maskShape=void 0,i._selectable=!1,i._itemCreator=r,i._maskShape=new SE,i._maskShape.beginFill(16776960,.5),i._maskShape.drawRect(0,0,1,1),i._maskShape.endFill(),i.resize(100,100),i}return d(n,[{key:"data",get:function(){return this._data},set:function(e){this.setData(e)}},{key:"totalHeight",get:function(){return this.virtualHeight}},{key:"viewHeight",get:function(){return this.realHeight>0?this.realHeight:0}},{key:"scrollPosition",get:function(){return this._position},set:function(e){e<0&&(e=0),e>this._maxPosition&&(e=this._maxPosition),this._position!==e&&(this._position=e,this.draw(),this.emit(VV.ListScroll,this._position))}},{key:"items",get:function(){return this._items}},{key:"selectable",get:function(){return this._selectable},set:function(e){this._selectable!==e&&(this.clearItems(),this._selectable=e,this.draw())}},{key:"resize",value:function(e,t){this.realWidth=e,this.realHeight=t,this._maskShape.width=this.realWidth,this._maskShape.height=this.realHeight,this.addChild(this._maskShape),this.mask=this._maskShape,this.calculateMaxPosition(),this.draw()}},{key:"draw",value:function(){var e,t;if(this._data)for(this.calculateSize(),this.clearItems(),e=0,t=this._viewNum;e<t;e++){var n=e+this._curIndex;if(!(n<this._data.length))break;var r=this.createItem();this._items.push(r),r.y=this._curOff+e*this._itemH,r.x=0,r.index=n,r.data=this._data[e+this._curIndex],this.addChild(r)}}},{key:"refreshItems",value:function(){for(var e=0,t=this._viewNum;e<t;e++){if(!(e+this._curIndex<this._data.length))break;this._items[e].data=this._data[e+this._curIndex]}}},{key:"init",value:function(e){this._data=e}},{key:"setData",value:function(e){this._data=e,this.calculateMaxPosition(),this.draw()}},{key:"createItem",value:function(){var e;return this._itemPool.length>0?e=this._itemPool.shift():this._itemCreator&&(e=new this._itemCreator),e&&(e.resize(this.realWidth,this.realHeight),this.initItemCallback&&this.initItemCallback(e),this._selectable?(e.interactive=!0,e.on("click",this.onClickSelectItem,this)):e.interactive=!1),e}},{key:"onClickSelectItem",value:function(e){var t=e.currentTarget.data,n=this._data.indexOf(t);this.emit(VV.Select,n)}},{key:"getItemH",value:function(){var e=this.createItem();if(e){e.realWidth;return e.realHeight+this.gapH}return 0}},{key:"calculateMaxPosition",value:function(){isNaN(this._itemH)&&(this._itemH=this.getItemH()),this.data&&(this._maxPosition=this._data.length*this._itemH-this.realHeight),this._maxPosition<0&&(this._maxPosition=0)}},{key:"calculateSize",value:function(){var e;isNaN(this._itemH)&&(this._itemH=this.getItemH());var t=this._itemH;this._totalNum=(null===(e=this._data)||void 0===e?void 0:e.length)||1,this.virtualWidth=this.realWidth,this.virtualHeight=t*this._totalNum,this._viewNum=(Math.ceil(this.realHeight/t)+1)*t,this._curIndex=Math.floor(this._position/t),this._curOff=-this._position+this._curIndex*t}},{key:"clearItems",value:function(){var e,t;for(e=0,t=this._items.length;e<t;e++){var n=this._items[e];this._selectable&&n.off("click",this.onClickSelectItem,this),n.parent&&n.parent.removeChild(n),this._itemPool.push(n)}this._items.length=0}}]),n}(jV),WV=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,void 0,!0)).item=void 0,r.list=void 0,r._data=void 0,r._show=!1,r._over=!1,r.hideList=function(){r.list.parent&&r.list.parent.removeChild(r.list),r._show=!1,window.removeEventListener("mousedown",r.hideList)},r.hideList2=function(){r._over||(r.list.parent&&r.list.parent.removeChild(r.list),r._show=!1,window.removeEventListener("mousedown",r.hideList))},r.item=new e,r.addChild(r.item),r.list=new GV([],e),r.list.selectable=!0,r.list.on(VV.Select,r.onSelect,m(r)),r.list.on("mousedown",r.onMouseDownList,m(r)),r.list.on("mouseover",r.onMouseOver,m(r)),r.list.on("mouseout",r.onMouseOut,m(r)),r.initControl(),r}return d(n,[{key:"data",get:function(){return this._data},set:function(e){var t=this;this._data=e,this.list.data=this._data,this.index=0,setTimeout((function(){var n=t.getBounds();t.list.resize(n.width,n.height*e.length)}),1)}},{key:"index",set:function(e){this._data.length>e&&(this.item.data=this._data[e])}},{key:"selectedData",get:function(){return this.item.data}},{key:"onSelect",value:function(e){this.index=e,this.emit(VV.Change,e),this.hideList()}},{key:"initControl",value:function(){this.on("click",this.onClick,this),this.on("mousedown",this.onMouseDown,this),this.on("mouseover",this.onMouseOver,this),this.on("mouseout",this.onMouseOut,this)}},{key:"onMouseDownList",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.data.originalEvent.stopPropagation(),e.data.originalEvent.stopImmediatePropagation(),e.stopPropagation()}},{key:"onMouseOver",value:function(e){this._over=!0}},{key:"onMouseOut",value:function(e){this._over=!1}},{key:"onClick",value:function(e){this._show?this.hideList():this.showList()}},{key:"showList",value:function(){var e=this;if(this.stage){var t=this.getGlobalPosition();this.list.x=t.x,this.list.y=t.y+this.height,this.stage.addChild(this.list),this.stage.once("mousedown",this.hideList,this),window.addEventListener("mousedown",this.hideList2),this._show=!0,setTimeout((function(){e._show&&(e._over=!0)}),200)}}}]),n}(jV),XV=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).realWidth=void 0,e.realHeight=void 0,e._data=void 0,e.index=0,e.txt=void 0,e.graphic=void 0,e.graphic=new SE,e.txt=new ew(""),e.txt.style.fill=16777215,e.txt.style.fontSize=10,e.txt.style.align="right",e.addChild(e.graphic),e.addChild(e.txt),e.realHeight=18,e.resize(100,18),e}return d(n,[{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"resize",value:function(e,t){this.realWidth!=e&&(this.realWidth=e,this.draw())}},{key:"draw",value:function(){if(null!=this._data){var e=this.index%2==0?11184810:10066329;this.graphic.clear(),this.graphic.beginFill(e,1),this.graphic.drawRect(0,0,this.realWidth,this.realHeight),this.graphic.endFill(),this.txt.text=this._data.name}}}]),n}(Pb),YV=function(e){p(n,e);var t=g(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return l(this,n),(i=t.call(this,[],r))._listData=void 0,i._treeNode=void 0,i._showRoot=void 0,i._treeNode=e,i._showRoot=a,i._listData=[],i.renderTree(),i}return d(n,[{key:"listData",get:function(){return this._listData}},{key:"collapseAll",value:function(e){this.collapseNode(this._listData,e),this.renderTree()}},{key:"collapseNode",value:function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)e[n].collapse=t,e[n].nodes&&this.collapseNode(e[n].nodes,t)}},{key:"reRender",value:function(){this.draw()}},{key:"setData",value:function(e){this._treeNode=e,this.renderTree()}},{key:"createItem",value:function(){var e=lm(v(n.prototype),"createItem",this).call(this);return e.hasMyListener(n.EVENT_COLLAPSE)||e.addMyListener(n.EVENT_COLLAPSE,this.onCollapse,this),e}},{key:"parseListData",value:function(){this._listData.length=0,this.parseNode(this._treeNode,0),this._showRoot||this._listData.length>0&&this._listData.shift()}},{key:"parseNode",value:function(e,t){if(null!=e&&(e.item&&(e.item.depth=t,this._listData.push(e)),!e.collapse&&e.nodes)){var n,r=0;for(r=0,n=e.nodes.length;r<n;r++)this.parseNode(e.nodes[r],t+1)}}},{key:"renderTree",value:function(){this.parseListData(),lm(v(n.prototype),"setData",this).call(this,this._listData)}},{key:"onCollapse",value:function(e){this.renderTree(),this.emit(n.EVENT_COLLAPSE,e.data)}}]),n}(GV);YV.EVENT_COLLAPSE="EVENT_COLLAPSE";var KV=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e,!0))._config=void 0,r._text=void 0,r.isFocus=!1,r._downY=void 0,r._downValue=void 0,r.isMouseDown=!1,r.isMouseMoved=!1,r.onMouseMove=function(e){if(0===r._downY)r._downY=e.clientY,r._downValue=r.value;else{r.isMouseMoved=!0;var t=e.clientY-r._downY;if(r._config.directUp&&(t=-t),0!==(t*=r.step))if(r._config.multiMode){r.addValue(t);t>0?"+"+t:t<0&&t.toString()}else r.changeValue(r._downValue+t,r.continuous)}},r.onMouseUp=function(e){!r.isMouseMoved&&r.isMouseDown,r.isMouseDown=!1,r.isMouseMoved=!1,r._config.multiMode,document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("mouseup",r.onMouseUp),r.continuous&&r._config.continuousEndCallback&&r._config.continuousEndCallback()},r.init2(e),r}return d(n,[{key:"step",get:function(){return this._config.step?this._config.step:1}},{key:"minValue",get:function(){return null!=this._config.min?this._config.min:0}},{key:"maxValue",get:function(){return null!=this._config.max?this._config.max:100}},{key:"continuous",get:function(){var e=this._config.continuous;return void 0===e&&(e=!0),e}},{key:"init2",value:function(e){this._config=e,this.parse(this._config);var t=this._config.value||0;this._text=new ew(t,{fontSize:10,fill:10066329}),this.addChild(this._text),this.on("mousedown",this.onMouseDown,this),JS.setDisplayCursor(this,QS.hand)}},{key:"parse",value:function(e){}},{key:"onMouseDown",value:function(e){this.isFocus||this._config.lock||(this._config.continuous&&this._config.continuousStartCallback&&this._config.continuousStartCallback(),this._downY=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp))}},{key:"value",get:function(){return isNaN(this._config.value)?0:this._config.value},set:function(e){this._config.value=e,this.setTextValue(e)}},{key:"setTextValue",value:function(e){if(this.step<1){var t=this.step.toString().split(".")[1].length;this._text.text=e.toFixed(t)}else this._text.text=e.toString()}},{key:"addValue",value:function(e){isNaN(e)||this._config.onAdd&&this._config.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setTextValue(e),t&&this._config.onChange&&this._config.onChange(e))}}]),n}(jV),qV=d((function e(){l(this,e)}));qV.gapGroupFill=1777701,qV.horizontalLineFill=3160896,qV.treeItemGapGroupFill=3355443,qV.backgroundColor=3355443,qV.boneFillUp=12303291,qV.boneFillOver=16777215,qV.boneFillDown=4652287,qV.boneFillIK=16728064,qV.boneBolder=0,qV.assistLine=4915199,qV.defaultCustomBoneSymbolColor=4294967295,qV.slotBolderOver=4294967295,qV.slotBolderDown=4282842367,qV.CoordinateX=16711680,qV.CoordinateY=65280,qV.CoordinateXY=16776960,qV.CoordinateOver=16777215,qV.resizeHighlight=65280,qV.poseNormal=16711680,qV.poseHighlight=16777215,qV.selectFrameBorder=3647,qV.selectFrameFill=11263,qV.TIMELINE_SELECT_FRAME_BORDER=3647,qV.TIMELINE_SELECT_FRAME_FILL=8959,qV.CURVE_COLOR=10066329,qV.CURVE_SELECTED_COLOR=16777215,qV.LAST_FRAME_COLOR=16711680,qV.HIGH_LIGHT_BG_COLOR=3100242,qV.OVER_BG_COLOR=2107952,qV.ANIMATION_TIMELINE_BG_COLOR=4214364,qV.BONE_TIMELINE_BG_COLOR=3160901,qV.SLOT_TIMELINE_BG_COLOR=2634042,qV.FFD_TIMELINE_BG_COLOR=2634042,qV.EVENT_TIMELINE_BG_COLOR=2634042,qV.ZORDER_TIMELINE_BG_COLOR=2634042,qV.IK_TIMELINE_BG_COLOR=2634042,qV.LINE_BG_COLOR=1118481,qV.STROKE_UP_COLOR=2236962,qV.STROKE_DOWN_COLOR=2686253,qV.STROKE_OVER_COLOR=16777215,qV.BONE_COLOR=14277081,qV.BONE_EVENT_COLOR=14518152,qV.SLOT_COLOR=15389783,qV.FFD_COLOR=65535,qV.EVENT_COLOR=14699856,qV.IK_COLOR=14699856,qV.MULT_COLOR=13487565,qV.TRANSLATE_FRAME_COLOR=43264,qV.ROTATE_FRAME_COLOR=226506,qV.SCALE_FRAME_COLOR=16596028,qV.COLOR_FRAME_COLOR=13258949,qV.INDEX_FRAME_COLOR=8158332,qV.VISIBLE_FRAME_COLOR=14965292,qV.Z_FRAME_COLOR=43e5,qV.TIMELINE_POINTER_COLOR=2686253,qV.TIMELINE_LOOP_COLOR=2669793,qV.TIMELINE_OFFSET_COLOR=16744192,qV.TIMELINE_LABEL_BG_COLOR=1778215,qV.TIMELINE_LABEL_STROKE_COLOR=1778215,qV.TIMELINE_LABEL_COLOR=3885139,qV.TIMELINE_LABEL_TEXT_COLOR=7241357,qV.TIMELINE_LABEL_LOOP_COLOR=22139,qV.TIMELINE_SLIDER_COLOR=3095108,qV.TIMELINE_SLIDER_OVER_COLOR=7380664,qV.IMAGE_TIP_BG_COLOR=3358281,qV.LABEL_KEY_COLOR=16711680,qV.ONION_BEFORE_COLOR=16711680,qV.ONION_AFTER_COLOR=255,qV.ONION_LABEL_COLOR=5730184,qV.ONION_BG_COLOR=5730184,qV.SYMBOL_TEST_COLOR=16711935,qV.SYMBOL_HOVERED_COLOR=16777215,qV.SYMBOL_SELECTED_COLOR=16777215,qV.SYMBOL_BORDER_COLOR=0,qV.SYMBOL_ENABLED_ALPHA=1,qV.SYMBOL_DISABLED_ALPHA=.5,qV.SYMBOL_BORDER_ALPHA=.5,qV.CURVEPANEL_CURVE_LINE_COLOR=15196005,qV.CURVEPANEL_CURVE_POINT_COLOR=15196005,qV.CURVEPANEL_CONTROL_LINE_COLOR=16777215,qV.CURVEPANEL_CONTROL_POINT_COLOR=16777215,qV.CURVEPANEL_OTHER_CURVE_COLOR=6710886,qV.CURVEPANEL_BG_COLOR=2501426,qV.CURVEPANEL_BG_LIGHT_COLOR=3159356,qV.RIG_BONE_COLOR=[65280,16737792,16711680,255,16776960,16711935,7221635,10416579,7575997,2365982,9001241,8773749,10467339,1548733,9199327,2258947,7706757,2941914,2888195,2163122,11841945,1122112,15327991,11001904,1220560],qV.COMIC_BG_COLOR=16777215,qV.COMIC_CAMERA_COLOR=4282842367,qV.BOUNDINGBOX_COLOR=65280,qV.LINK_COLOR=4647661,qV.colorToString=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;return t="#"+t};var $V=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).over=!1,e.selected=!1,e.shape=void 0,e._data=void 0,e._type=void 0,e.shape=new SE,e.addChild(e.shape),e.interactive=!0,e}return d(n,[{key:"type",set:function(e){this._type=e}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"frameIds",get:function(){var e=[];if(this._data)for(var t=0,n=this._data.length;t<n;t++){var r=this._data[t].id;e.push(r)}return e}},{key:"draw",value:function(){if(this.shape.clear(),null!=this._data){var e=16711680,t=n.FRAME_WIDTH;switch(this._type){case S.X:e=Uf.FRAME_X;break;case S.Y:e=Uf.FRAME_Y;break;case S.SCALE_X:e=Uf.FRAME_SCALE_X;break;case S.SCALE_Y:e=Uf.FRAME_SCALE_Y;break;case S.SKEW_X:e=Uf.FRAME_SKEW_X;break;case S.SKEW_Y:e=Uf.FRAME_SKEW_Y;break;case S.ROTATION:e=Uf.FRAME_ROTATION;break;case S.VISIBLE:e=Uf.FRAME_VISIBLE;break;case S.TEXT:e=Uf.FRAME_TEXT;break;case S.PROGRESS:e=Uf.FRAME_PROGRESS;break;case S.COLOR:e=Uf.FRAME_COLOR;break;case S.MIX:e=Uf.FRAME_MIX;break;case S.TRANSLATE:e=qV.TRANSLATE_FRAME_COLOR;break;case S.ROTATE:e=qV.ROTATE_FRAME_COLOR;break;case S.SCALE:e=qV.SCALE_FRAME_COLOR;break;default:e=Uf.FRAME_MIX}var r=0;this.selected&&this.over?r=Uf.COLOR_SELECT_OVER_RECT:this.selected?r=Uf.COLOR_SELECT_RECT:this.over&&(r=Uf.COLOR_OVER_RECT),this.drawShape(e,r,t);var i=oT.getXFromFrame(this._data[0].frame),a=oT.dopesheetConfig.LABEL_LEFT_WIDTH;this.x=i+a}}},{key:"drawShape",value:function(e,t,r){this.shape.lineStyle(1,t,1),this.shape.beginFill(e,1),this.shape.drawRect(-n.FRAME_WIDTH/2,0,r,n.FRAME_HEIGHT),this.shape.endFill()}},{key:"dispose",value:function(){this.data=null,this.type=null}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrame]"}}]),n}(Pb);$V.FRAME_WIDTH=4,$V.FRAME_HEIGHT=16;var ZV=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).text=void 0,e.fixShape=void 0,e.curAnimationLen=0,e.fixShape=new SE,e.addChild(e.fixShape),e.fixShape.visible=!1,e.text=new ew("",{fontSize:12,fill:16777215}),e.addChild(e.text),e}return d(n,[{key:"getFrameLength",value:function(){var e=this._data[0],t=this._data[0].value,n=this._data[1],r=oT.getAnimationLength(t.animationId)*(t.playTimes||1),i=r;n&&(i=n.frame-e.frame);var a=this.curAnimationLen-e.frame,o=Math.min(r,i,a);return[o,r-o]}},{key:"draw",value:function(){if(this.shape.clear(),this.fixShape.visible=!1,null!=this._data){var e,t=$V.FRAME_WIDTH;e=Uf.FRAME_PLAY;var n=this._data[0].value;if(n.animationId>0){var r=oT.getAnimationById(n.animationId),i=this.getFrameLength(),a=i[0],o=n.playTimes||1,s=oT.getLengthPerFrame();if(t=a*s,this.text.text=r.name+"x"+o,this.text.visible=!0,!this._data[1]&&i[1]>0){var l=i[1]*s;this.fixShape.clear(),this.fixShape.lineStyle(1,0,1),this.fixShape.beginFill(e,.5),this.fixShape.drawRect(-$V.FRAME_WIDTH/2,0,l,$V.FRAME_HEIGHT),this.fixShape.endFill(),this.fixShape.x=t,this.fixShape.visible=!0}}var u=0;this.selected&&this.over?u=Uf.COLOR_SELECT_OVER_RECT:this.selected?u=Uf.COLOR_SELECT_RECT:this.over&&(u=Uf.COLOR_OVER_RECT),this.shape.lineStyle(1,u,1),this.shape.beginFill(e,1),this.shape.drawRect(-$V.FRAME_WIDTH/2,0,t,$V.FRAME_HEIGHT),this.shape.endFill();var c=oT.getXFromFrame(this._data[0].frame),h=oT.dopesheetConfig.LABEL_LEFT_WIDTH;this.x=c+h}}},{key:"dispose",value:function(){this.data=null,this.type=null}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopePlayFrame]"}}]),n}($V),QV=function(){function e(){l(this,e)}return d(e,null,[{key:"create",value:function(t){var n=e.poolsMap[String(t)];return n&&n.length>0?n.pop():new t}},{key:"setMaxCount",value:function(t,n){if((n<0||n!==n)&&(n=0),t){var r=String(t);e.maxCountMap[r]=n;var i=e.poolsMap[r];i&&i.length>n&&(i.length=n)}else for(var a in e.defaultMaxCount=n,e.poolsMap)if(e.maxCountMap[a]){e.maxCountMap[a]=n;var o=e.poolsMap[a];o.length>n&&(o.length=n)}}},{key:"clearPool",value:function(t){if(t){var n=e.poolsMap[String(t)];n&&n.length&&(n.length=0)}else for(var r in e.poolsMap){e.poolsMap[r].length=0}}},{key:"returnToPool",value:function(t){var n=String(t.constructor),r=e.maxCountMap[n]>0?e.maxCountMap[n]:e.defaultMaxCount,i=e.poolsMap[n]=e.poolsMap[n]||[];t.dispose(),i.length<r&&i.push(t)}}]),e}();QV.defaultMaxCount=5e3,QV.instances={},QV.maxCountMap={},QV.poolsMap={};var JV=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,null,!1))._icon=void 0,r._name=void 0,r.init2(e),r}return d(n,[{key:"getAssetPath",value:function(){return n.ICON_PATH_BASE+this._name}},{key:"init2",value:function(e){this._name=e;try{this._icon=Nb.from(this.getAssetPath()),this.addChild(this._icon),this._icon.width=14,this._icon.height=14,this._icon.x=3,this._icon.y=3}catch(Qp){}}},{key:"iconName",set:function(e){this.setIcon(e)}},{key:"setIcon",value:function(e){this._name=e,this._icon.texture=Gg.from(this.getAssetPath())}}]),n}(jV);JV.ICON_PATH_BASE="";var eG="./assets/icon/dopesheet/animation.png",tG="./assets/icon/dopesheet/bone.png",nG="./assets/icon/dopesheet/slot.png",rG="./assets/icon/dopesheet/bone_IK.png",iG="./assets/icon/dopesheet/mesh.png",aG="./assets/icon/dopesheet/event.png",oG="./assets/icon/dopesheet/zOrder.png",sG="./assets/icon/dopesheet/color.png",lG="./assets/icon/dopesheet/index.png",uG="./assets/icon/dopesheet/translate.png",cG="./assets/icon/dopesheet/rotate.png",hG="./assets/icon/dopesheet/scale.png",dG=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this)}return d(n,[{key:"drawShape",value:function(e,t,n){this.shape.lineStyle(1,t,1),this.shape.beginFill(e,1);var r=.9*$V.FRAME_WIDTH;this.shape.moveTo(0,5),this.shape.lineTo(0+1.4*r,r+2+5),this.shape.lineTo(0,2*r+4+5),this.shape.lineTo(0-1.4*r,r+2+5),this.shape.lineTo(0,5),this.shape.endFill()}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeMixFrame]"}}]),n}($V);dG.FRAME_WIDTH=4,dG.FRAME_HEIGHT=16;var fG=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n),(e=t.call(this)).realWidth=void 0,e.realHeight=void 0,e.index=0,e.model=void 0,e._data=void 0,e.txt=void 0,e.graphic=void 0,e.icon=void 0,e.btnCollapse=void 0,e.btnLoop=void 0,e.inputOffset=void 0,e.inputScale=void 0,e.curPointer=void 0,e.headPointer=void 0,e.lastPointer=void 0,e.frameContainer=void 0,e.curveLayer=void 0,e._eventDispatcher=void 0,e._collapseEvent=void 0,e.onChangeOffset=function(t){e.renderData.type,I.TIMELINE},e.onChangeScale=function(t){e.renderData.type,I.TIMELINE},e.historyMergeEnd=function(){},e.historyMergeStart=function(){};var r=oT.dopesheetConfig.ITEM_HEIGHT;return e.realHeight=r,e._eventDispatcher=new gmvc.EventDispatcher,e._collapseEvent=new gmvc.Event,e._collapseEvent.type=YV.EVENT_COLLAPSE,e.graphic=new SE,e.txt=new ew(""),e.txt.style.fill=16777215,e.txt.style.fontSize=10,e.txt.style.align="right",e.txt.x=20,e.txt.y=5,e.icon=new JV(eG),e.icon.x=10,e.btnCollapse=new zV({normal:"./assets/icon/dopesheet/arrow-right-filling.svg",down:"./assets/icon/dopesheet/arrow-down-filling.svg"}),e.btnLoop=new zV({normal:"./assets/icon/loop_2.svg",down:"./assets/icon/loop_1.svg"}),e.btnCollapse.toggle=!0,e.btnLoop.toggle=!0,e.inputOffset=new KV({min:-9999,max:9999,step:1,value:0,onChange:e.onChangeOffset,continuous:!0,continuousEndCallback:e.historyMergeEnd,continuousStartCallback:e.historyMergeStart}),e.inputScale=new KV({min:0,max:100,step:.01,value:1,onChange:e.onChangeScale,continuous:!0,continuousEndCallback:e.historyMergeEnd,continuousStartCallback:e.historyMergeStart}),e.btnLoop.x=60,e.inputOffset.x=80,e.inputScale.x=100,e.curPointer=e.drawPointer(),e.lastPointer=e.drawPointer(Uf.DOPESHEET_LAST_FRAME),e.headPointer=e.drawPointer(Uf.DOPESHEET_PLAY_HEAD_VIRTUAL),e.frameContainer=new Pb,e.curveLayer=new SE,e.addChild(e.graphic),e.addChild(e.icon),e.addChild(e.txt),e.addChild(e.btnCollapse),e.addChild(e.btnLoop),e.addChild(e.inputOffset),e.addChild(e.inputScale),e.addChild(e.curveLayer),e.addChild(e.lastPointer),e.addChild(e.headPointer),e.addChild(e.curPointer),e.addChild(e.frameContainer),e.resize(50,50),e.btnCollapse.on("click",e.onCollapse,m(e)),e.btnLoop.on("click",e.onLoop,m(e)),e}return d(n,[{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"renderData",get:function(){return this._data.item.data}},{key:"isTimeline",value:function(e){return!0}},{key:"resize",value:function(e,t){this.realWidth!==e&&(this.realWidth=e,this.draw())}},{key:"updatePosition",value:function(e){this.btnCollapse.x=e,this.icon.x=e+10,this.txt.x=e+30,this.icon.iconName=this.getIcon()||eG}},{key:"getIcon",value:function(){if(this.renderData)switch(this.renderData.type){case I.ARMATURE:return eG;case I.BONE:return tG;case I.SLOT:return nG;case I.TIMELINE:return this.getIconByTimeline(this.renderData.animation,this.renderData.name)}}},{key:"getIconByTimeline",value:function(e,t){var n=t;switch(e&&(n=e.type),n){case S.IK:return rG;case S.FFD:return iG;case S.EVENT:return aG;case S.Z_ORDER:return oG;case S.COLOR:return sG;case S.DISPLAY_INDEX:return lG;case S.TRANSLATE:return uG;case S.ROTATE:return cG;case S.SCALE:return hG}}},{key:"draw",value:function(){if(null!=this._data&&null!=this._data.item&&null!=this._data.item.data){var e=this.renderData,t=!1;this.txt.text=e.name,e.type!==I.TIMELINE?this.renderShowDopeSheetEnable(e):(this.renderTimeline(e),t=!1),this.renderBg(),this.renderPlayHead(),this.renderLastFrame();var n=10*this._data.item.depth;this.updatePosition(n);var r=!!this._data.nodes&&this._data.item.depth>0,i=r&&this._data.nodes.length>0;if(this.btnCollapse.visible=r,this.btnCollapse.disable=!i,r){var a=10*(this._data.item.depth-1);this.btnCollapse.x=a+2,this.btnCollapse.y=0,this.btnCollapse.selected=!this._data.collapse}this.btnLoop.visible=t,this.inputOffset.visible=t,this.inputScale.visible=t}}},{key:"hasMyListener",value:function(e){return this._eventDispatcher.hasEventListener(e)}},{key:"addMyListener",value:function(e,t,n,r,i){this._eventDispatcher.addEventListener(e,t,n,r,i)}},{key:"removeMyListener",value:function(e,t){this._eventDispatcher.removeEventListener(e,t)}},{key:"dispatchMy",value:function(e){this._eventDispatcher.dispatchEvent(e)}},{key:"drawPointer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Uf.DOPESHEET_PLAY_HEAD,t=new SE;return t.lineStyle(1,e),t.moveTo(0,0),t.lineTo(0,this.realHeight),t}},{key:"onCollapse",value:function(){this._data.collapse=!this._data.collapse,this.dispatchMy(this._collapseEvent)}},{key:"onLoop",value:function(){this.renderData.type,I.TIMELINE}},{key:"renderShowDopeSheetEnable",value:function(e){this.renderFramesFromShowDopeSheetEnable(e)}},{key:"renderTimeline",value:function(e){var t=e.animation,n=e.name,r=[];t&&(n=t.type,t.type,S.PLAY,r=oT.getArrayFromMap({ids:t.frames,map:t.frameMap})),this.renderFrames(r,n,0)}},{key:"renderPlayHead",value:function(){var e=this.model.getPlayHeadX(),t=this.model.state.config.timeline.LABEL_LEFT_WIDTH;e>0?(this.headPointer.x=t+e,this.curPointer.x=t+e,this.headPointer.visible=!0,this.curPointer.visible=!0):(this.headPointer.visible=!1,this.curPointer.visible=!1);var n=this.renderData;if(n.type===I.TIMELINE){var r=n.animation,i=this.model.curFrame;r&&(i=Bf.getTimelineRealFrame(r,this.model.curFrame));var a=this.model.getXFromFrame(i);a>0?(this.curPointer.x=t+a,this.curPointer.visible=!0):this.curPointer.visible=!1}}},{key:"renderLastFrame",value:function(){var e=this.model.getAnimationDuration()[1],t=this.model.getXFromFrame(e),n=this.model.state.config.timeline.LABEL_LEFT_WIDTH;t>0?(this.lastPointer.x=n+t,this.lastPointer.visible=!0):this.lastPointer.visible=!1}},{key:"renderBg",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_LEFT_WIDTH,n=e.FIRST_X,r=this.model.state.editor.dopesheet,i=r.offset,a=r.curGap,o=(r.scaleLevel,r.labelLevel),s=this.index%2===0?3092271:2236962;this.graphic.clear(),this.graphic.beginFill(s,1),this.graphic.drawRect(0,0,this.realWidth,this.realHeight),this.graphic.endFill(),this.graphic.lineStyle(1,Uf.DOPESHEET_LABEL,1);var l=i,u=n,c=t,h=Math.ceil((this.realWidth+u)/a),d=Math.floor(l/a);(d-=Math.floor(u/a))<0&&(d=0);for(var f=d;f<h+d;f++){if(f%o===0){var p=f*a-l+u+c,v=this.realHeight;p>0&&(this.graphic.moveTo(p,0),this.graphic.lineTo(p,v))}}}},{key:"getTimelineTracksByFrameIndex",value:function(e,t){if(e.type===I.ARMATURE){var n=e.animation;return Bf.getAnimationTimelineFrameByFrameIndex(n,t)}if(e.type===I.BONE||e.type===I.SLOT){var r=e.animation;return Bf.getTimelinesFramesByFrameIndex(r,t)}var i=e.animation;return Bf.getTimelineFramesByFrameIndex(i,t)}},{key:"renderFramesFromShowDopeSheetEnable",value:function(e){this.clearFrameDisplays(),this.curveLayer.clear();for(var t,n=this.model.dopesheetData,r=n.startIndex,i=n.endIndex,a=[],o=r;o<i;o++){for(var s=this.getTimelineTracksByFrameIndex(e,o),l=s[0],u=s[1],c=[],h=0,d=u.length;h<d;h++){var f=u[h];f&&c.push(f.id)}if(u&&u.length){if(1===u.length&&!this._data.collapse&&this._data.item.depth>0)continue;var p=this.createFrameDisplay(S.MIX,e.type);this.model&&(p.over=Lf.arrayIncludesArray(this.model.overFrameIds,c),p.selected=Lf.arrayIncludesArray(this.model.selectedFrameIds,c),p.over&&(t=p),p.selected&&a.push(p)),1===u.length?(p.type=l[0].type,p.data=u):(p.type=S.MIX,p.data=u),this.frameContainer.addChild(p)}}if(a.length>0)for(var v=0,m=a.length;v<m;v++)this.frameContainer.addChild(a[v]);t&&this.frameContainer.addChild(t)}},{key:"renderFrames",value:function(e,t,n){this.clearFrameDisplays(),this.curveLayer.clear();var r=this.model.dopesheetData,i=r.startIndex,a=r.endIndex,o=r.curGap,s=this.model.dopesheetConfig.LABEL_LEFT_WIDTH;if(e){var l,u=0,c=e.length,h=!1,d=[];for(u=0;u<c;u++){var f=e[u];if(f.frame>=i&&f.frame<=a){var p=this.createFrameDisplay(t,I.TIMELINE);if(this.model&&(p.over=this.model.overFrameIds.includes(f.id),p.selected=this.model.selectedFrameIds.includes(f.id),p.over&&(l=p),p.selected&&d.push(p)),p.type=t,t===S.PLAY){var v=void 0;u<c-1&&(v=e[u+1]),p.curAnimationLen=n,p.data=[f,v]}else p.data=[f];if(this.frameContainer.addChild(p),u+1<c&&f.curve){var m=e[u+1],g=this.getCurveType(f.curve),y=m.frame-f.frame;this.renderCurve(p.x,y,g)}if(u>0&&!h){var b=e[u-1];if(b.curve){var _=this.getCurveType(b.curve),x=(f.frame,s-o),E=this.model.getXFromFrame(f.frame)+s;this.renderHalfCurve(x,E,_)}}h=!0}}if(d.length>0)for(var w=0,T=d.length;w<T;w++)this.frameContainer.addChild(d[w]);l&&this.frameContainer.addChild(l)}}},{key:"getCurveType",value:function(e){return e?1===e.length?0===e[0]?"none":1===e[0]?"line":"curve":e.length>=4?"curve":"none":"line"}},{key:"createFrameDisplay",value:function(e,t){return e===S.PLAY?QV.create(ZV):t===I.ARMATURE?QV.create(dG):QV.create($V)}},{key:"clearFrameDisplays",value:function(){var e=this.frameContainer.removeChildren();if(e)for(var t=0,n=e.length;t<n;t++){var r=e[t];QV.returnToPool(r)}}},{key:"renderCurve",value:function(e,t,n){var r=this.model.dopesheetData,i=r.curGap/r.scaleLevel;if(!((i*=t)<=$V.FRAME_WIDTH)){var a=Math.ceil(this.realHeight/2),o=Uf.DOPESHEET_CURVE_NORMAL;switch(this.curveLayer.lineStyle(1,o,1),n){case"none":break;case"line":this.curveLayer.moveTo(e,a),this.curveLayer.lineTo(e+i,a);break;case"curve":var s=Math.ceil(6);i>12?(this.curveLayer.moveTo(e,a+s),this.curveLayer.lineTo(e+s,a),this.curveLayer.lineTo(e+i-s,a),this.curveLayer.lineTo(e+i,a-s)):(this.curveLayer.moveTo(e,a+s),this.curveLayer.lineTo(e+i,a-s))}}}},{key:"renderHalfCurve",value:function(e,t,n){var r=t,i=Math.ceil(this.realHeight/2),a=Uf.DOPESHEET_CURVE_NORMAL;switch(this.curveLayer.lineStyle(1,a,1),n){case"none":break;case"line":this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(r,i);break;case"curve":var o=Math.ceil(6);r>12?(this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(r-o,i),this.curveLayer.lineTo(r,i-o)):(this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(e+r,i-o))}}}]),n}(Pb),pG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).animationList=void 0,e.btnAdd=void 0,e.btnRemove=void 0,e.initUI(),e.initControl(),e}return d(n,[{key:"initUI",value:function(){this.txt.visible=!1,this.animationList=new WV(XV),this.animationList.data=[],this.animationList.index=0,this.addChild(this.animationList),this.btnAdd=new zV({normal:"./assets/icon/animation/add.png",down:"./assets/icon/animation/add.png"}),this.btnAdd.x=152,this.btnRemove=new zV({normal:"./assets/icon/dopesheet/delete.png",down:"./assets/icon/dopesheet/delete.png"}),this.btnRemove.x=170}},{key:"initControl",value:function(){this.animationList.on(VV.Change,this.onChangeAnimation,this),this.btnAdd.on("click",this.onAddAnimation,this),this.btnRemove.on("click",this.onRemoveAnimation,this)}},{key:"onAddAnimation",value:function(e){this.emit(n.EVENT_ADD_ANIMATION)}},{key:"onRemoveAnimation",value:function(e){if(this.animationList.data.length>0){var t=this.animationList.selectedData.id;t>0&&this.emit(n.EVENT_REMOVE_ANIMATION,t)}}},{key:"onChangeAnimation",value:function(e){var t=this.animationList.data[e];this.emit(n.EVENT_SELECT_ANIMATION,t.id)}}]),n}(fG);pG.EVENT_SELECT_ANIMATION="EVENT_SELECT_ANIMATION",pG.EVENT_ADD_ANIMATION="EVENT_ADD_ANIMATION",pG.EVENT_REMOVE_ANIMATION="EVENT_REMOVE_ANIMATION";var vG=function(){function e(){var t=this;l(this,e),this._callbacks=[],this._callbackOnce=[],this._intervalMap=new Map,this.runNum=0,this.tickHandler=void 0,this.startTime=void 0,this.tick=function(){var e=Date.now(),n=e-t.startTime;t.startTime=e;for(var r=0,i=t._callbackOnce.length;r<i;r++)t._callbackOnce[r](n);for(var a=0,o=t._callbacks.length;a<o;a++)t._callbacks[a](n);t._callbackOnce.length=0,t.runNum>0&&(t.tickHandler=requestAnimationFrame(t.tick))}}return d(e,[{key:"next",value:function(e){this._callbackOnce.push(e),this.start(),this.stop()}},{key:"setInterval",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){this._intervalMap.get(e)&&this.clearInterval(e);var r=setInterval(t,n);this._intervalMap.set(e,r)}))},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this._intervalMap.get(e);t&&(clearInterval(t),this._intervalMap.delete(e))}))},{key:"setEnterFrame",value:function(e){this._callbacks.push(e),this.start()}},{key:"stopEnterFrame",value:function(e){if(this.stop(),e){var t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}else this._callbacks.length=0}},{key:"start",value:function(){this.startTime=Date.now(),this.runNum++,this.runNum>0&&(this.tickHandler=requestAnimationFrame(this.tick))}},{key:"stop",value:function(){this.runNum>0&&this.runNum--}},{key:"throttle",value:function(e,t){var n=!0;return function(){n&&(n=!1,setTimeout((function(){e(),n=!0}),t))}}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}},{key:"next",value:function(t){e.instance.next(t)}},{key:"setEnterFrame",value:function(t){e.instance.setEnterFrame(t)}},{key:"stopEnterFrame",value:function(t){e.instance.stopEnterFrame(t)}},{key:"setInterval",value:function(t,n,r){e.instance.setInterval(t,n,r)}},{key:"clearInterval",value:function(t){e.instance.clearInterval(t)}}]),e}();vG._instance=void 0;var mG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).model=void 0,e.btnPlayFirst=void 0,e.btnPlayPrev=void 0,e.btnPlay=void 0,e.btnPlayNext=void 0,e.btnPlayLast=void 0,e.btnLoop=void 0,e.playList=[],e.playFrameIndex=0,e.playDuration=0,e.loop=!1,e.playAnimation=function(){e.playFrameIndex+=1,e.playFrameIndex<e.playDuration?e.model.commit($.UPDATE_FRAME,e.playFrameIndex):(e.playFrameIndex=0,e.model.commit($.UPDATE_FRAME,e.playFrameIndex),e.loop||e.stop())},e.init(),e}return d(n,[{key:"init",value:function(){this.btnPlayFirst=new zV({normal:"./assets/icon/first.png",down:"./assets/icon/first.png"}),this.playList.push(this.btnPlayFirst),this.btnPlayPrev=new zV({normal:"./assets/icon/previous2.png",down:"./assets/icon/previous2.png"}),this.playList.push(this.btnPlayPrev),this.btnPlay=new zV({normal:"./assets/icon/caretdown-copy.png",down:"./assets/icon/pause1.png"}),this.btnPlay.toggle=!0,this.playList.push(this.btnPlay),this.btnPlayNext=new zV({normal:"./assets/icon/next.png",down:"./assets/icon/next.png"}),this.playList.push(this.btnPlayNext),this.btnPlayLast=new zV({normal:"./assets/icon/last.png",down:"./assets/icon/last.png"}),this.playList.push(this.btnPlayLast),this.btnLoop=new zV({normal:"./assets/icon/loop.png",down:"./assets/icon/loop_red.png"}),this.btnLoop.toggle=!0,this.playList.push(this.btnLoop);for(var e=0,t=this.playList.length;e<t;e++){var n=this.playList[e];n.x=20*e,this.addChild(n)}this.initControl()}},{key:"initControl",value:function(){this.btnPlayFirst.on("click",this.onPlayFirst,this),this.btnPlayPrev.on("click",this.onPlayPrev,this),this.btnPlay.on("click",this.onPlay,this),this.btnPlayNext.on("click",this.onPlayNext,this),this.btnPlayLast.on("click",this.onPlayLast,this),this.btnLoop.on("click",this.onPlayLoop,this)}},{key:"onPlayFirst",value:function(){this.model&&(0!=this.model.state.editor.dopesheet.curTime&&this.model.commit($.UPDATE_FRAME,0))}},{key:"onPlayPrev",value:function(){if(this.model){var e=this.model.state.editor.dopesheet.curTime;e>0&&this.model.commit($.UPDATE_FRAME,e-1)}}},{key:"onPlay",value:function(){this.model}},{key:"play",value:function(){var e=this.model.state.editor.dopesheet.curTime;this.playFrameIndex=e,vG.setEnterFrame(this.playAnimation)}},{key:"stop",value:function(){vG.stopEnterFrame(this.playAnimation),this.playFrameIndex=Math.round(this.playFrameIndex),this.model.commit($.UPDATE_FRAME,this.playFrameIndex),this.btnPlay.selected=!1}},{key:"onPlayNext",value:function(){this.model}},{key:"onPlayLast",value:function(){this.model}},{key:"onPlayLoop",value:function(){this.model&&(this.loop=this.btnLoop.selected)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopePlayTools]"}}]),n}(Pb),gG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).playTools=void 0,e.btnAutoKey=void 0,e.btnAutoFirstKey=void 0,e.btnDelete=void 0,e.btnCopy=void 0,e.btnCut=void 0,e.btnPaste=void 0,e.testInput=void 0,e.btnFilter=void 0,e.btnCollapse=void 0,e._model=void 0,e.init(),e.initData(),e.initControl(),e}return d(n,[{key:"model",get:function(){return this._model},set:function(e){this._model=e,this.playTools.model=e,this.initData()}},{key:"init",value:function(){this.playTools=new mG;var e=0;this.btnCopy=new zV({normal:"./assets/icon/dopesheet/timeline_copy.png",down:"./assets/icon/dopesheet/timeline_copy_d.png"}),this.btnCopy.x=0+20*e,this.addChild(this.btnCopy),e++,this.btnPaste=new zV({normal:"./assets/icon/dopesheet/timeline_paste.png",down:"./assets/icon/dopesheet/timeline_paste_d.png"}),this.btnPaste.x=0+20*e,this.addChild(this.btnPaste),e++,this.btnCut=new zV({normal:"./assets/icon/dopesheet/timeline_cut.png",down:"./assets/icon/dopesheet/timeline_cut_d.png"}),this.btnCut.x=0+20*e,this.addChild(this.btnCut),e++,this.btnDelete=new zV({normal:"./assets/icon/dopesheet/timeline_del.png",down:"./assets/icon/dopesheet/timeline_del_d.png"}),this.btnDelete.x=0+20*e,this.addChild(this.btnDelete),this.btnAutoKey=new zV({normal:"./assets/icon/flag4.png",down:"./assets/icon/flag4_red_auto.png"}),this.btnAutoKey.toggle=!0,this.btnAutoKey.x=140,this.addChild(this.btnAutoKey),this.btnAutoFirstKey=new zV({normal:"./assets/icon/flagto.png",down:"./assets/icon/flagto_red.png"}),this.btnAutoFirstKey.toggle=!0,this.btnAutoFirstKey.x=120,this.addChild(this.btnAutoFirstKey),this.btnFilter=new zV({normal:"./assets/icon/filter1.png",down:"./assets/icon/filter_red.png"}),this.btnFilter.toggle=!0,this.btnFilter.x=20,this.btnFilter.y=20,this.addChild(this.btnFilter),this.btnCollapse=new zV({normal:"./assets/icon/fileOpen.svg",down:"./assets/icon/fileClose.svg"}),this.btnCollapse.toggle=!0,this.btnCollapse.x=-2,this.btnCollapse.y=16,this.addChild(this.btnCollapse)}},{key:"isCollapse",get:function(){return!!this.btnCollapse&&this.btnCollapse.selected}},{key:"resetCollapse",value:function(){this.btnCollapse&&(this.btnCollapse.selected=!1)}},{key:"initData",value:function(){if(this._model){var e=this._model.state.editor.dopesheet.autoKey,t=this._model.state.editor.dopesheet.filter,n=this._model.state.editor.dopesheet.autoFirstFrame;this.btnAutoKey.selected=e,this.btnFilter.selected=t,this.btnAutoFirstKey.selected=n}}},{key:"initControl",value:function(){this.btnAutoKey.on("click",this.onSwitchAutoKey,this),this.btnAutoFirstKey.on("click",this.onSwitchAutoFirstFrame,this),this.btnFilter.on("click",this.onSwitchFilter,this),this.btnCollapse.on("click",this.onCollapseTree,this),this.btnCopy.on("click",this.onCopy,this),this.btnPaste.on("click",this.onPaste,this),this.btnCut.on("click",this.onCut,this),this.btnDelete.on("click",this.onDelete,this)}},{key:"onSwitchAutoKey",value:function(){this._model.commit(W.SWITCH_AUTO_KEY,this.btnAutoKey.selected)}},{key:"onSwitchAutoFirstFrame",value:function(){this._model.commit(W.SWITCH_AUTO_FIRST_FRAME)}},{key:"onSwitchFilter",value:function(){this._model.commit($.SWITCH_FILTER)}},{key:"onCopy",value:function(){}},{key:"onPaste",value:function(){}},{key:"onCut",value:function(){}},{key:"onDelete",value:function(){this._model.dispatch(O.DELETE_FRAMES,{})}},{key:"onCollapseTree",value:function(){var e=this.btnCollapse.selected;this.emit(nC.EVENT_COLLAPSE,e)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeTools]"}}]),n}(Pb),yG=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).moveBlock=new SE,r.scaleLeftBlock=new SE,r.scaleRightBlock=new SE,r.offY=0,r._data=void 0,r.over=!1,r.data=e,r.interactiveChildren=!0,r.interactive=!0,r.moveBlock.interactive=!0,r.scaleLeftBlock.interactive=!0,r.scaleRightBlock.interactive=!0,r.addChild(r.moveBlock),r.addChild(r.scaleLeftBlock),r.addChild(r.scaleRightBlock),r.on("mouseover",r.onMouseOver,m(r)),r.on("mouseout",r.onMouseOut,m(r)),r.on("mousemove",r.onMouseMove,m(r)),r.on("mousedown",r.onMouseDown,m(r)),JS.setDisplayCursor(r.moveBlock,QS.move),JS.setDisplayCursor(r.scaleLeftBlock,QS.col_resize),JS.setDisplayCursor(r.scaleRightBlock,QS.col_resize),r}return d(n,[{key:"onMouseOver",value:function(e){this.over=!0,e.stopPropagation()}},{key:"onMouseOut",value:function(e){this.over=!1}},{key:"onMouseMove",value:function(e){this.over&&e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"draw",value:function(){if(this.clear(),this._data){var e,t,n=oT.dopesheetConfig,r=n.ITEM_HEIGHT,i=n.LABEL_LEFT_WIDTH,a=n.LABEL_HEIGHT,o=this._data.end.y*r,s=this._data.start.y*r,l=Math.abs(s-o)+r,u=oT.getXFromFrame(this._data.start.x),c=oT.getXFromFrame(this._data.end.x),h=Math.abs(c-u);if(e=Math.min(u,c)+i,!((t=Math.min(o,s)+a-this.offY)+l<a)){t<a?(this.moveBlock.lineStyle(1,Uf.FRAME_BLOCK_LINE,0),this.moveBlock.beginFill(Uf.FRAME_BLOCK,.1),this.moveBlock.drawRect(0,this.offY,h,l-this.offY),this.moveBlock.endFill(),this.moveBlock.lineStyle(1,Uf.FRAME_BLOCK_LINE,.5),this.moveBlock.moveTo(0,this.offY),this.moveBlock.lineTo(0,l),this.moveBlock.lineTo(h,l),this.moveBlock.lineTo(h,this.offY)):(this.moveBlock.lineStyle(1,Uf.FRAME_BLOCK_LINE,.5),this.moveBlock.beginFill(Uf.FRAME_BLOCK,.1),this.moveBlock.drawRect(0,0,h,l),this.moveBlock.endFill());this.scaleLeftBlock.beginFill(Uf.FRAME_SCALE_X,.1),this.scaleLeftBlock.drawRect(0,0,10,l),this.scaleLeftBlock.endFill(),this.scaleLeftBlock.x=-10,this.scaleRightBlock.beginFill(Uf.FRAME_SCALE_X,.1),this.scaleRightBlock.drawRect(0,0,10,l),this.scaleRightBlock.endFill(),this.scaleRightBlock.x=h,this.x=e,this.y=t}}}},{key:"clear",value:function(){this.moveBlock.clear(),this.scaleLeftBlock.clear(),this.scaleRightBlock.clear()}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrameBlock]"}}]),n}(Pb),bG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._data=void 0,e.blocks=[],e.blockPool=[],e._offY=0,e}return d(n,[{key:"data",set:function(e){this._data=e,this.draw()}},{key:"offsetY",set:function(e){this._offY!==e&&(this._offY=e,this.draw())}},{key:"draw",value:function(){if(this.clear(),this._data)for(var e=0,t=this._data.length;e<t;e++){var n=this.createBlock(this._data[e]);this.blocks.push(n),this.addChild(n)}}},{key:"reRender",value:function(){for(var e=0,t=this.blocks.length;e<t;e++){var n=this.blocks[e];n&&n.draw()}}},{key:"clear",value:function(){for(var e=0,t=this.blocks.length;e<t;e++)this.blockPool.push(this.blocks[e]);this.blocks.length=0,this.removeChildren()}},{key:"createBlock",value:function(e){var t;return this.blockPool.length?t=this.blockPool.pop():((t=new yG).moveBlock.on("mousedown",this.blockMoveDown,this),t.scaleLeftBlock.on("mousedown",this.blockScaleLeftDown,this),t.scaleRightBlock.on("mousedown",this.blockScaleRightDown,this)),t.offY=this._offY,t.data=e,t}},{key:"blockMoveDown",value:function(e){this.emit(iC.MOVE_BLOCK,e)}},{key:"blockScaleLeftDown",value:function(e){this.emit(iC.SCALE_LEFT_BLOCK,e)}},{key:"blockScaleRightDown",value:function(e){this.emit(iC.SCALE_RIGHT_BLOCK,e)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrameBlockContainer]"}}]),n}(Pb),_G=function(){function e(){l(this,e)}return d(e,null,[{key:"dragEnableDisplay",value:function(t,n,r){-1===e.dragDisplayList.indexOf(t)&&(e.dragDisplayList.push(t),e.dragContextList.push({stage:n,context:r}),t.interactive=!0,t.on("mousedown",e.dragBegin,r))}},{key:"dragDisableDisplay",value:function(t){var n=e.dragDisplayList.indexOf(t);if(-1!==n){var r=e.dragContextList[n];e.dragDisplayList.splice(n,1),e.dragContextList.splice(n,1),t.off("mousedown",e.dragBegin,e._dragContext),r.stage&&(r.stage.off("globalmousemove",e.dragMove,e._dragContext),r.stage.off("mouseup",e.dragEnd,e._dragContext)),e._dragDisplay=void 0,e._dragStage=void 0,e._dragContext=void 0}}},{key:"dragBegin",value:function(t){var n=t.currentTarget,r=e.dragDisplayList.indexOf(n);if(-1!==r){var i=e.dragContextList[r],a=t.data.global.x,o=t.data.global.y;e._dragInfo.startPos.x=a,e._dragInfo.startPos.y=o,e._dragInfo.curPos.x=a,e._dragInfo.curPos.y=o,e._dragInfo.endPos.x=void 0,e._dragInfo.endPos.y=void 0,e._dragInfo.offset.x=0,e._dragInfo.offset.y=0,e._dragDisplay=n,e._dragStage=i.stage,e._dragContext=i.context,e._dragStage.on("globalmousemove",e.dragMove,e._dragContext),window.addEventListener("mouseup",e.dragEnd),e._dragDisplay.emit(VV.DragStart,e._dragInfo)}}},{key:"dragMove",value:function(t){var n=t.data.global.x,r=t.data.global.y;e._dragInfo.curPos.x=n,e._dragInfo.curPos.y=r,e._dragInfo.offset.x=n-e._dragInfo.startPos.x,e._dragInfo.offset.y=r-e._dragInfo.startPos.y,e._dragDisplay.emit(VV.DragMove,e._dragInfo)}},{key:"dragEnd",value:function(t){e._dragInfo.endPos.x=e._dragInfo.curPos.x,e._dragInfo.endPos.y=e._dragInfo.curPos.y,e._dragStage.off("globalmousemove",e.dragMove,e._dragContext),e._dragStage.off("mousemove",e.dragMove,e._dragContext),window.removeEventListener("mouseup",e.dragEnd),e._dragDisplay.emit(VV.DragEnd,e._dragInfo),e._dragDisplay=void 0,e._dragStage=void 0,e._dragContext=void 0}}]),e}();_G._dragStage=void 0,_G._dragDisplay=void 0,_G._dragContext=void 0,_G.dragDisplayList=[],_G.dragContextList=[],_G._dragInfo={startPos:{x:0,y:0},curPos:{x:0,y:0},endPos:{x:0,y:0},offset:{x:0,y:0}};var xG=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._config=void 0,r.bg=void 0,r.bar=void 0,r._max=1,r._cur=0,r._pos=0,r._dragStartPos=0,r._scaleOffset=1,r.init(e),r}return d(n,[{key:"max",get:function(){return this._max},set:function(e){this._max!==e&&(this._max=e,this.updateScaleOffset(),this.draw())}},{key:"cur",get:function(){return this._cur},set:function(e){this._cur!==e&&(this._cur=e,this.draw())}},{key:"pos",get:function(){return this._pos},set:function(e){this._pos!==e&&(this._pos=e,this._pos>this._max-this._cur&&(this._pos=this._max-this._cur),this.draw())}},{key:"updateScaleOffset",value:function(){if(this._config){var e=this._config.width;this._config.vertical&&(e=this._config.height),this._scaleOffset=this._max/e}}},{key:"init",value:function(e){this._config=e,this.bg=new SE,this.bar=new SE,this.bg.interactive=!0,this.bar.interactive=!0,this.addChild(this.bg),this.addChild(this.bar)}},{key:"start",value:function(){_G.dragEnableDisplay(this.bar,this.stage),this.bar.on(VV.DragStart,this.onDragStart,this),this.bar.on(VV.DragMove,this.onDragMove,this),this.bg.on("click",this.onClickBg,this)}},{key:"onClickBg",value:function(e){if(e.data.getLocalPosition(this.bg).x<this.bar.x)this.emit(VV.Scroll,0);else{var t=this._max-this._cur;this.emit(VV.Scroll,t)}}},{key:"onDragStart",value:function(e){this._dragStartPos=this._pos}},{key:"onDragMove",value:function(e){var t=e.offset.x;this._config.vertical&&(t=e.offset.y),t*=this._scaleOffset;var n=this._dragStartPos+t;n<0?n=0:n>this._max-this._cur&&(n=this._max-this._cur),this.emit(VV.Scroll,n)}},{key:"draw",value:function(){if(this._config){var e=this._cur/this.max;e>1&&(e=1);var t=this._config.width,n=this._config.height;this._config.vertical?n=this._config.height*e:t=this._config.width*e,this.bar.clear(),this.bar.beginFill(this._config.barColor),this.bar.drawRect(0,0,t,n),this.bar.endFill(),e=this._pos/this.max;var r=0,i=0;this._config.vertical?i=this._config.height*e:r=this._config.width*e,this.bar.x=r,this.bar.y=i}}},{key:"resize",value:function(e,t){this._config.width=e,this._config.height=t,this.bg.clear(),this.bg.beginFill(this._config.bgColor),this.bg.drawRect(0,0,this._config.width,this._config.height),this.bg.endFill(),this.updateScaleOffset(),this.draw()}}]),n}(jV),EG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).stopCheckOver=void 0,e.upToSelect=void 0,e.startPoint=void 0,e._justDownSelect=void 0,e.multSelectEnable=!0,e._transforming=void 0,e._downFrame=0,e._cacheFrames=[],e._drawFrameBlockStart=!1,e.updateFrameBlockStart=function(t){e._drawFrameBlockStart=!0},e.updateFrameBlockEnd=function(t){e._drawFrameBlockStart=!1},e.mouseout=function(t){e.overFrame=null},e.mousedown=function(t){if(!e._transforming){e.startPoint=e.getSheetPoint(t.data.global);var n=e.getSheetPoint(t.data.global),r=e.model.getFrameFromX(n.x),i=Math.round(r),a=!1;t&&t.ctrlKey&&(a=!0),e.multSelectEnable&&a?(e.upToSelect=!1,e.selectAddFrameIds(e.overFrameIds)):e.isSelected(e.overFrameIds)?e.upToSelect=!0:(e._justDownSelect=!0,e.selectFrameIds(e.overFrameIds)),window.addEventListener("mouseup",e.mouseup),e.overFrameIds.length>0&&e.selectedFrameIds.length>0&&(e._downFrame=i,e._transforming=!0,e.model.historyBeginMerge(),e.cacheSelectFrames(),e.view.sheetList.on("mousemove",e.onFrameMouseMove,m(e)))}},e.mouseup=function(t){e._justDownSelect&&(e._justDownSelect=!1),e.upToSelect&&e.overFrameIds.length>0&&e.selectFrameIds(e.overFrameIds),e._transforming&&(e.checkOverConflictFrame(),e.model.historyEndMerge(),e._transforming=!1),window.removeEventListener("mouseup",e.mouseup),e.view.sheetList.off("mousemove",e.onFrameMouseMove,m(e))},e.onFrameMouseMove=function(t){for(var n=e.getSheetPoint(t.data.global),r=e.model.getFrameFromX(n.x),i=Math.round(r)-e._downFrame,a=e.model.getCurArmature(),o=e.model.getCurAnimation(a),s=e.selectedFrameIds,l={armatureId:a.id,animationId:o.id,frames:{}},u=0,c=s.length;u<c;u++){var h=s[u],d=Bf.getFrameById(o,h);if(d){var f=e._cacheFrames[u]+i;f<0&&(f=0),f!==d.frame&&(l.frames[h]={frame:f})}}e.model.commit(P.MODIFY_FRAMES,l)},e.checkOver=function(t){if(e.overFrame=null,!(t.data.global.x<0||t.data.global.y<0||t.data.global.x===1/0||t.data.global.y===1/0)&&!e.stopCheckOver&&!n.pauseOverCheck&&!e._transforming&&!e._drawFrameBlockStart){var r=e.getSheetPoint(t.data.global);if(!(r.y<0)){var i=e.view.getTimelineByY(r.y);if(null!=i){var a=e.model.dopesheetData,o=a.curGap,s=a.scaleLevel,l=$V.FRAME_WIDTH,u=e.model.getFrameFromX(r.x),c=Math.round(u),h=o/s;if(h<l){for(var d=Math.ceil(l/h),f=[c],p=1;p<d;p++){var v=c-p;v>=0&&f.push(v),v=c+p,f.push(v)}for(var m=f.length-1;m>=0;m--){var g=f[m],y=void 0;if(i.type===I.ARMATURE){var b=i.animation;y=Bf.getAnimationTimelineFrameByFrameIndex(b,g)}else if(i.type===I.BONE||i.type===I.SLOT){var _=i.animation;y=Bf.getTimelinesFramesByFrameIndex(_,g)}else if(i.type===I.TIMELINE){var x=i.animation;y=Bf.getTimelineFramesByFrameIndex(x,g)}if(y[1].length)return void(e.overFrame=y[1])}}else{var E,w=e.model.getXFromFrame(c);if(!(w+.5*l>r.x&&w-.5*l<r.x))return;if(i.type===I.ARMATURE){var T=i.animation;E=Bf.getAnimationTimelineFrameByFrameIndex(T,c)}else if(i.type===I.BONE||i.type===I.SLOT){var S=i.animation;E=Bf.getTimelinesFramesByFrameIndex(S,c)}else if(i.type===I.TIMELINE){var k=i.animation;E=Bf.getTimelineFramesByFrameIndex(k,c)}E[1].length&&(e.overFrame=E[1])}}}}},e}return d(n,[{key:"overFrame",set:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n].id;t.push(i)}var a=this.model.state.editor.over.overFrameIds;Lf.arrayEqualArray(t,a)||this.model.commit(q.OVER_FRAME,t)}},{key:"overFrameIds",get:function(){return this.model.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.model.state.runtime.editing.selectedFrameIds}},{key:"selectAddFrameIds",value:function(e){var t=this.model.state.runtime.editing.selectedFrameIds,n=t.concat(e);this.model.state.editor.over.overFrameIds;Lf.arrayEqualArray(n,t)||this.model.commit($.SELECT_FRAME,n)}},{key:"selectFrameIds",value:function(e){var t=e.concat(),n=this.model.state.runtime.editing.selectedFrameIds;Lf.arrayEqualArray(t,n)||this.model.commit($.SELECT_FRAME,t)}},{key:"isSelected",value:function(e){return 0!==e.length&&Lf.arrayIncludesArray(this.selectedFrameIds,e)}},{key:"start",value:function(){this.view.sheetList.on("mousemove",this.checkOver,this),this.view.sheetList.on("mouseout",this.mouseout,this),this.view.sheetList.on("mousedown",this.mousedown,this),this._addNotification(rC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._addNotification(rC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd)}},{key:"stop",value:function(){this.view&&this.view.sheet&&(this.view.sheetList.off("mousemove",this.checkOver,this),this.view.sheetList.off("mouseout",this.mouseout,this),this.view.sheetList.off("mousedown",this.mousedown,this)),this._removeNotification(rC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._removeNotification(rC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd)}},{key:"getSheetPoint",value:function(e){var t=n.helpPoint0,r=this.model.dopesheetConfig,i=r.LABEL_LEFT_WIDTH,a=r.LABEL_HEIGHT;return t.x=e.x-i,t.y=e.y-a,t}},{key:"checkOverConflictFrame",value:function(){var e=this.model.getCurArmature(),t=this.model.getCurAnimation(e);if(e&&t){var n={armatureId:e.id,animationId:t.id};this.model.commit(O.CHECK_OVERRIDE_FRAME,n)}}},{key:"cacheSelectFrames",value:function(){this._cacheFrames.length=0;for(var e=this.selectedFrameIds,t=this.model.getCurArmature(),n=this.model.getCurAnimation(t),r=0,i=e.length;r<i;r++){var a=e[r],o=Bf.getFrameById(n,a);o&&this._cacheFrames.push(o.frame)}}}],[{key:"toString",value:function(){return"FrameSelectController"}}]),n}(sk);EG.pauseOverCheck=!1,EG.helpMatrix0=new Ym,EG.helpPoint0={x:0,y:0};var wG=function(e){return e[e.None=0]="None",e[e.Move=1]="Move",e[e.ScaleLeft=2]="ScaleLeft",e[e.ScaleRight=3]="ScaleRight",e}(wG||{}),TG=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._block={start:{x:0,y:0},end:{x:0,y:0}},e._mouseDown=!1,e.upToSelect=void 0,e.startPoint=void 0,e._justDownSelect=void 0,e.multSelectEnable=!0,e._transforming=void 0,e._downFrame=0,e._cacheFrames=[],e._mult=!1,e._moveBlockDownX=0,e._moveBlockFrameCache={},e._moveBlockCache=[],e._moveBlocked=!1,e._moveBlockMode=wG.None,e.moveBlockMinIndex=0,e._lastMoveFrame=-1,e._maxLeftMoveFrame=0,e._curSelectedFrames=void 0,e._frameBlocks=[],e._minOffsetFrame=0,e._historyMergeStart=!1,e.mousedown=function(t){if(!(e.model&&e.overFrameIds&&e.overFrameIds.length>0)){var n=e.getSheetPoint(t.data.global);if(!(e.view.stage.height-t.data.global.y<e.view.BOTTOM_BAR_HEIGHT)){var r=e.model.dopesheetConfig.LABEL_LEFT_WIDTH;if(!(e.view.screen.width-r-n.x<10)){var i=e.view.getVirtualTimelineIndex(n.y),a=Math.round(e.model.getFrameFromX(n.x));if(!(a<0)){i>=0&&(e._block.start.x=a,e._block.start.y=i,e._block.end.x=a,e._block.end.y=i,e._mouseDown=!0,e._sendNotification(rC.UPDATE_FRAME_BLOCK_START),window.addEventListener("mouseup",e.mouseup),e.view.stage.on("mousemove",e.onFrameMouseMove,m(e)));var o=!1;t&&t.data&&t.data.originalEvent&&t.ctrlKey&&(o=!0),e.multSelectEnable&&o||(e.selectFrames=[])}}}}},e.mouseup=function(t){e._mouseDown=!1,e._sendNotification(rC.UPDATE_FRAME_BLOCK_END),e._block&&(void 0===e._curSelectedFrames||0===e._curSelectedFrames.length||e._block.start.x===e._block.end.x?e.frameBlocks.length>0&&(e.frameBlocks=[]):e.model.selectedFrameIds&&0!==e.model.selectedFrameIds.length||e.frameBlocks.length>0&&(e.frameBlocks=[])),window.removeEventListener("mouseup",e.mouseup),e.view.stage.off("mousemove",e.onFrameMouseMove,m(e))},e.onFrameMouseMove=function(t){var n=e.getSheetPoint(t.data.global),r=e.view.getVirtualTimelineIndex(n.y),i=Math.round(e.model.getFrameFromX(n.x));i<0&&(i=0),r>=0&&(e._block.end.x===i&&e._block.end.y===r||(e._block.end.x=i,e._block.end.y>0&&r>0&&(e._block.end.y=r),e.frameBlocks=[e._block])),e._curSelectedFrames=e.getCoverFrames(e._block),e.selectFrames=e._curSelectedFrames},e.onMoveFrameBlockDown=function(t){e._sendNotification(rC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,wG.Move)},e.onScaleLeftFrameBlockDown=function(t){e._sendNotification(rC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,wG.ScaleLeft)},e.onScaleRightFrameBlockDown=function(t){e._sendNotification(rC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,wG.ScaleRight)},e.moveBlockUp=function(t){e.view&&e.view.stage&&e.view.stage.off("mousemove",e.onFrameBlockMove,m(e)),e._moveBlocked&&(e.checkOverConflictFrame(),e._moveBlocked=!1),e._historyMergeStart&&(e._historyMergeStart=!1,e.model.historyEndMerge()),e._sendNotification(rC.UPDATE_FRAME_BLOCK_END)},e.onFrameBlockMove=function(t){var n=e.getSheetPoint(t.data.global),r=Math.round(e.model.getFrameFromX(n.x));if(e._lastMoveFrame!==r){e._lastMoveFrame=r;var i=r-e._moveBlockDownX;switch(i<-e._minOffsetFrame&&(i=-e._minOffsetFrame),e._moveBlockMode){case wG.Move:e.frameBlockMove(i);break;case wG.ScaleRight:e.frameBlockScaleRight(i);break;case wG.ScaleLeft:e.frameBlockScaleLeft(i)}}},e.updateFrameBlockStart=function(t){e.view&&(e.view.drawFrameBlocking=!0)},e.updateFrameBlockEnd=function(t){e.view&&(e.view.drawFrameBlocking=!1)},e.refreshDeleteFrames=function(t){e.view&&(e.frameBlocks.length=0,e.view.refreshFrameBlock(e.frameBlocks))},e.refreshFrameBlock=function(t){e.view&&e.view.refreshFrameBlock(e.frameBlocks)},e.clearBlock=function(t){e.frameBlocks.length=0,e.view.refreshFrameBlock(e.frameBlocks)},e}return d(n,[{key:"overFrameIds",get:function(){return this.model.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.model.state.runtime.editing.selectedFrameIds}},{key:"frameBlocks",get:function(){return this._frameBlocks},set:function(e){this._frameBlocks=e,this._sendNotification(rC.UPDATE_FRAME_BLOCK)}},{key:"selectFrames",set:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n].id;-1===t.indexOf(i)&&t.push(i)}var a=this.model.state.runtime.editing.selectedFrameIds;Lf.arrayEqualArray(t,a)||this.model.commit($.SELECT_FRAME,t)}},{key:"start",value:function(){this.view.stage.on("mousedown",this.mousedown,this),this.view.frameBlock.on(q.MOVE_BLOCK,this.onMoveFrameBlockDown,this),this.view.frameBlock.on(q.SCALE_LEFT_BLOCK,this.onScaleLeftFrameBlockDown,this),this.view.frameBlock.on(q.SCALE_RIGHT_BLOCK,this.onScaleRightFrameBlockDown,this),this._addNotification(O.DELETE_FRAMES,this.refreshDeleteFrames),this._addNotification(rC.UPDATE_FRAME_BLOCK,this.refreshFrameBlock),this._addNotification(rC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._addNotification(rC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd)}},{key:"stop",value:function(){this.view&&(this.view.stage.off("mousedown",this.mousedown,this),this.view.frameBlock.off(q.MOVE_BLOCK,this.onMoveFrameBlockDown,this),this.view.frameBlock.off(q.SCALE_LEFT_BLOCK,this.onScaleLeftFrameBlockDown,this),this.view.frameBlock.off(q.SCALE_RIGHT_BLOCK,this.onScaleRightFrameBlockDown,this)),this._removeNotification(O.DELETE_FRAMES,this.refreshDeleteFrames),this._removeNotification(rC.UPDATE_FRAME_BLOCK,this.refreshFrameBlock),this._removeNotification(rC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._removeNotification(rC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd),this._historyMergeStart&&(this._historyMergeStart=!1,this.model.historyEndMerge())}},{key:"getSheetPoint",value:function(e){var t=n.helpPoint0,r=this.model.dopesheetConfig,i=r.LABEL_LEFT_WIDTH,a=r.LABEL_HEIGHT;return t.x=e.x-i,t.y=e.y-a,t}},{key:"getCoverFrames",value:function(e){return this.view?this.view.getCoverTracks(e):[]}},{key:"moveFrameReady",value:function(e,t){this._moveBlockMode=t;for(var n=this.getSheetPoint(e),r=Math.round(this.model.getFrameFromX(n.x)),i=this.model.getCurArmatureCurAnimation(),a=Number.MAX_SAFE_INTEGER,o=this.selectedFrameIds,s=0,l=o.length;s<l;s++){var u=o[s],c=Bf.getFrameById(i,u);c&&a>c.frame&&(a=c.frame)}this.moveBlockMinIndex=a,this._lastMoveFrame=r,window.addEventListener("mouseup",this.moveBlockUp),this.view.stage.on("mousemove",this.onFrameBlockMove,this),this._moveBlockDownX=r,this._moveBlockFrameCache={};for(var h=Number.MAX_SAFE_INTEGER,d=0,f=o.length;d<f;d++){var p=o[d],v=Bf.getFrameById(i,p);this._moveBlockFrameCache[p]=v.frame,v.frame<h&&(h=v.frame)}this._maxLeftMoveFrame=h,this._moveBlockCache.length=0;var m=this.frameBlocks;this._minOffsetFrame=Number.MAX_SAFE_INTEGER;for(var g=0,y=m.length;g<y;g++){var b=m[g];this._moveBlockCache.push({startX:b.start.x,endX:b.end.x}),b.end.x<this._minOffsetFrame&&(this._minOffsetFrame=b.end.x),b.start.x<this._minOffsetFrame&&(this._minOffsetFrame=b.start.x)}this._historyMergeStart=!0,this.model.historyBeginMerge()}},{key:"checkOverConflictFrame",value:function(){var e=this.model.getCurArmature(),t=this.model.getCurAnimation(e);if(e&&t){var n={armatureId:e.id,animationId:t.id},r=this.selectedFrameIds.concat();this.model.commit(O.CHECK_OVERRIDE_FRAME,n),r.length!==this.selectedFrameIds.length&&(this.frameBlocks=[])}}},{key:"frameBlockMove",value:function(e){var t=this.moveBlockMinIndex;e<0&&e<-t&&(e=-t);for(var n=this.selectedFrameIds,r=this.frameBlocks,i=0,a=r.length;i<a;i++){var o=r[i],s=this._moveBlockCache[i];o.start.x=s.startX+e,o.end.x=s.endX+e}this._sendNotification(rC.UPDATE_FRAME_BLOCK);for(var l={},u=0,c=n.length;u<c;u++){var h=n[u],d=this._moveBlockFrameCache[h];isNaN(d)||(l[h]={frame:d+e},this._moveBlocked=!0)}this.modifyFrames(l)}},{key:"frameBlockScaleRight",value:function(e){for(var t=this.selectedFrameIds,n=this.frameBlocks,r=0,i=n.length;r<i;r++){var a=n[r],o=this._moveBlockCache[r];o.startX>o.endX?a.start.x=o.startX+e:a.end.x=o.endX+e}this._sendNotification(rC.UPDATE_FRAME_BLOCK);for(var s={},l=0,u=t.length;l<u;l++){var c=t[l],h=this._moveBlockFrameCache[c];if(!isNaN(h)){var d=this.getBlockCache(this._moveBlockCache,h),f=this.getScaleOffFrame(h,d,e,!0);s[c]={frame:h+f},this._moveBlocked=!0}}this.modifyFrames(s)}},{key:"frameBlockScaleLeft",value:function(e){var t=this.moveBlockMinIndex,n=this.selectedFrameIds;e<0&&e<-t&&(e=-t);for(var r=this.frameBlocks,i=0,a=r.length;i<a;i++){var o=r[i],s=this._moveBlockCache[i];s.startX>s.endX?o.end.x=s.endX+e:o.start.x=s.startX+e}this._sendNotification(rC.UPDATE_FRAME_BLOCK);for(var l={},u=0,c=n.length;u<c;u++){var h=n[u],d=this._moveBlockFrameCache[h];if(!isNaN(d)){var f=this.getBlockCache(this._moveBlockCache,d),p=d+this.getScaleOffFrame(d,f,e,!1);p<0&&(p=0),l[h]={frame:p},this._moveBlocked=!0}}this.modifyFrames(l)}},{key:"getScaleOffFrame",value:function(e,t,n,r){var i=0,a=Math.min(t.startX,t.endX),o=Math.max(t.startX,t.endX),s=(e-a)/(o-a);if(r){var l=o+n;i=Math.round((l-a)*s)+a-e}else{var u=a+n;i=Math.round((o-u)*s)+u-e}return i}},{key:"getBlockCache",value:function(e,t){return e[0]}},{key:"modifyFrames",value:function(e){var t=this.model.getCurArmature(),n=this.model.getCurAnimation(t);if(t&&n){var r={armatureId:t.id,animationId:n.id,frames:e};this.model.commit(P.MODIFY_FRAMES,r)}}}],[{key:"toString",value:function(){return"FrameBlockSelectController"}}]),n}(sk);TG.helpPoint0={x:0,y:0},TG.pauseOverCheck=!1;var SG=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,{width:512,height:512,backgroundColor:Uf.DOPESHEET_BG})).label=void 0,r.sheet=void 0,r.sheetHead=void 0,r.sheetList=void 0,r.tools=void 0,r.frameBlock=void 0,r.LABEL_SCROLL_SPEED=8,r.SHEET_SCROLL_SPEED=10,r.BOTTOM_BAR_HEIGHT=20,r.frameSelectController=void 0,r.frameBlockSelectController=void 0,r._onLabelMouseWheel=void 0,r._onSheetMouseWheel=void 0,r._onLabelMouseRightMove=void 0,r._onLabelMouseMove=void 0,r._onLabelMouseUp=void 0,r._justLabelRightDown=void 0,r._justLabelDown=void 0,r._downLabelX=void 0,r._downLabelOffX=void 0,r._downGlobalX=void 0,r._parentHtml=void 0,r._labelTicker=void 0,r._labelScrollSpeed=r.LABEL_SCROLL_SPEED,r._bottomBar=new SE,r._scrollBar=void 0,r._model=void 0,r._dopesheetWidth=0,r._horizontalScroller=void 0,r._stageHeight=0,r._stageWidth=0,r.initDopeSheetItem=function(e){e.model=r._model},r._model=e,r._onLabelMouseWheel=r.onLabelMouseWheel.bind(m(r)),r._onSheetMouseWheel=r.onSheetMouseWheel.bind(m(r)),r._onLabelMouseRightMove=r.onLabelMouseRightMove.bind(m(r)),r._onLabelMouseMove=r.onLabelMouseMove.bind(m(r)),r._onLabelMouseUp=r.onLabelMouseUp.bind(m(r)),r._labelTicker=new tb,r.stage.interactive=!0,r.initDope(),r.initController(),r}return d(n,[{key:"model",get:function(){return this._model},set:function(e){this._model=e,this.label.model=e}},{key:"drawFrameBlocking",set:function(e){this.frameBlock&&(this.frameBlock.interactiveChildren=!e)}},{key:"resizeStage",value:function(e,t){var n=this.model.state.config.timeline,r=n.LABEL_HEIGHT,i=n.LABEL_LEFT_WIDTH,a=n.ITEM_HEIGHT,o=0;if(this._stageHeight>0&&(o=t-this._stageHeight),this._stageHeight=t,this._stageWidth=e,this.renderer.resize(e,t),this.label&&this.label.resize(e-i,t),this.sheet){var s=t-r-6-this.BOTTOM_BAR_HEIGHT-20-a;this.sheet.resize(e,s)}this.sheetHead&&this.sheetHead.resize(e,a),this._bottomBar.y=t-this.BOTTOM_BAR_HEIGHT-25,this._scrollBar.y=t-this.BOTTOM_BAR_HEIGHT-25,this._horizontalScroller.y=r+a,this._horizontalScroller.x=e-10,this.updateHorizontalScroller(o),this._dopesheetWidth=e-i,this.refreshBottomBar(e),this.updateScrollBar()}},{key:"updateHorizontalScroller",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._horizontalScroller.resize(10,Math.min(this.sheet.viewHeight,this.sheet.totalHeight)),this._horizontalScroller.max=this.sheet.totalHeight,this._horizontalScroller.cur=this.sheet.viewHeight;var t=this.sheet.scrollPosition;t>0&&e>0&&((t-=e)<0&&(t=0),this.sheet.scrollPosition=t),this._horizontalScroller.pos=t,this._horizontalScroller.visible=this.sheet.totalHeight>this.sheet.viewHeight}},{key:"refreshBottomBar",value:function(e){this._bottomBar.clear(),this._bottomBar.beginFill(10066329,.5),this._bottomBar.drawRect(0,0,e,this.BOTTOM_BAR_HEIGHT),this._bottomBar.endFill(),this._scrollBar.resize(e,this.BOTTOM_BAR_HEIGHT)}},{key:"getTimelineByY",value:function(e){if(e<0)return null;var t,n,r=this.model.state.config.timeline.ITEM_HEIGHT;if(e<r)return null===(t=this.sheetHead.data)||void 0===t||null===(n=t.item)||void 0===n?void 0:n.data;e-=r;for(var i=0,a=this.sheet.items.length;i<a;i++){var o=this.sheet.items[i];if(e>o.y&&e<o.y+o.realHeight)return o.data.item.data}return null}},{key:"getVirtualTimelineIndex",value:function(e){var t=this.model.state.config.timeline.ITEM_HEIGHT,n=this.sheet.scrollPosition,r=e-this.sheet.y+n;return Math.ceil(r/t)}},{key:"updateScale",value:function(){this.label.draw(),this.sheet.reRender(),this.sheetHead.draw()}},{key:"updateOffset",value:function(){this.label.draw(),this.sheet.reRender(),this.sheetHead.draw(),this.updateScrollBar()}},{key:"updateFrame",value:function(){this.label.updateFrame(),this.onDopeConfigChangeHead(),this.sheet.reRender(),this.sheetHead.draw(),this.updateScrollBar()}},{key:"refreshFrames",value:function(){this.updateLastFrame(),this.sheet.refreshItems(),this.sheetHead.draw()}},{key:"refreshFrameBlock",value:function(e){this.frameBlock&&(this.frameBlock.data=e)}},{key:"reRenderFrameBlock",value:function(){this.frameBlock&&this.frameBlock.reRender()}},{key:"updateSelectAnimation",value:function(){this.updateData()}},{key:"updateData",value:function(){var e=!1;this.tools.resetCollapse();var t,n=this.model.state.runtime.editing,r=this.model.state.runtime.dragonbones.animationMap,i=n.selectedAnimationId,a=n.selectedBoneIds.concat(),o=n.selectedSlotIds,s=this.model.state.editor.dopesheet.filter;if(o.length>0)for(var l=this.model.getCurArmature(),u=0,c=o.length;u<c;u++){var h=o[u],d=l.slots.map[h];a.indexOf(d.parentId)<0&&a.push(d.parentId)}var f=[],p=0,v=this.model.getCurArmature();if(v){var m;if(v.animations)for(var g=0,y=v.animations.length;g<y;g++){var b=v.animations[g],_=r[b];f.push({id:b,name:_.name}),b===i&&(m=_,p=g)}var x=m?m.id:-1;t={collapse:!1,item:{depth:0,data:{name:v.name,display:v,animation:m,type:I.ARMATURE,animationId:x}},nodes:[]};for(var E=0,w=0,T=v.bones.ids.length;w<T;w++){var k=v.bones.ids[w],C=v.bones.map[k];if((!(s&&a.length>0)||a.includes(k))&&C){var A=void 0;m&&m.bones&&(A=m.bones[k]);var O=void 0;if(A){var P=Bf.getTimelinesFromSubAnimation(A);O={collapse:e,item:{depth:1,data:{name:C.name,display:C,animation:P,type:I.BONE,animationId:x}},nodes:[]};var M=Bf.getSubAnimationDuration(A);for(var R in E<M[1]&&(E=M[1]),A.timelineMap){var N=A.timelineMap[R];if(N){var D={item:{depth:2,data:{name:N.type,animation:N,type:I.TIMELINE,animationId:x}}};O.nodes.push(D)}}}O||(O={collapse:e,item:{depth:1,data:{name:C.name,display:C,animation:[],type:I.BONE,animationId:x}},nodes:[]});for(var L=Qw.findBoneSlots(v,k),F=0,B=L.length;F<B;F++){var U=L[F],H=U.id,j=void 0;m&&m.slots&&(j=m.slots[H]);var z={collapse:e,item:{depth:2,data:{name:U.name,display:U,animation:[],type:I.SLOT,animationId:x}},nodes:[]};if(j){var V=Bf.getTimelinesFromSubAnimation(j);O.item.data.animation=O.item.data.animation.concat(V),z.item.data.animation=V,O.nodes.push(z);var G=j;if(G){var W=Bf.getSubAnimationDuration(G);for(var X in E<W[1]&&(E=W[1]),G.timelineMap){var Y=G.timelineMap[X];if(Y){var K={item:{depth:3,data:{name:Y.type,animation:Y,type:I.TIMELINE,animationId:x}}};z.nodes.push(K)}}}}else s&&o.includes(H)&&O.nodes.push(z);var q=Qw.getSlotCurDisplay(U);if(q&&q.mesh&&m&&m.ffds&&m.ffds[q.id]){var $=m.ffds[q.id],Z=Bf.getTimelineByType($,S.FFD);O.item.data.animation.push(Z);var Q={collapse:e,item:{depth:2,data:{name:q.name,display:q,animation:Z,type:I.TIMELINE,animationId:x}}};O.nodes.push(Q)}}O&&t.nodes.push(O)}}if(m){if(m.iks)for(var J in m.iks){var ee=m.iks[J],te=v.constraint.ik[J];if(ee){if(s&&a.length>0&&!(a.includes(te.parentId)||a.includes(te.childId)||a.includes(te.targetId)))continue;var ne=Bf.getTimelineByType(ee,S.IK),re={collapse:e,item:{depth:1,data:{name:te.name,display:te,animation:ne,type:I.TIMELINE,animationId:x}}};t.nodes.push(re)}}if(m.zOrder){var ie=m.zOrder,ae=Bf.getTimelineByType(ie,S.Z_ORDER),oe={item:{depth:1,data:{name:ae.type,animation:ae,type:I.TIMELINE,animationId:x}}};t.nodes.push(oe)}if(!s||0===a.length&&0===o.length){var se=null;if(m.event){var le=m.event;se=Bf.getTimelineByType(le,S.EVENT)}var ue={item:{depth:1,data:{name:S.EVENT,animation:se,type:I.TIMELINE,animationId:x}}};t.nodes.push(ue)}}this.label.refreshLastFrame()}0===f.length&&(f.push({name:"\u8bf7\u5148\u6dfb\u52a0\u4e00\u4e2a\u52a8\u753b",id:-1}),p=0),this.sheet.data=t,this.sheetHead.data=t,this.sheetHead.animationList.data=f,this.sheetHead.animationList.index=p,this.updateScrollBar(),this.updateHorizontalScroller()}},{key:"updateLastFrame",value:function(){this.model.getCurArmature()&&this.label.refreshLastFrame()}},{key:"updateScrollBar",value:function(){var e=this.model.getLengthPerFrame(),t=(this.model.curFrame+3)*e,n=this.model.state.editor.dopesheet.offset,r=this._dopesheetWidth+n,i=Math.max(t,1,r);this._scrollBar.max=i,this._scrollBar.cur=this._dopesheetWidth,this._scrollBar.pos=n}},{key:"addToContainer",value:function(e){e&&(this._parentHtml=e,e.appendChild(this.view))}},{key:"globalToLabelLocalPos",value:function(e,t){var n=this.model.state.config.timeline.LABEL_LEFT_WIDTH,r=this.getDopesheetGlobalPos();return{x:e-r.x-n,y:t-r.y}}},{key:"getDopesheetGlobalPos",value:function(){return this._parentHtml?function(e){for(var t=e,n={x:t.offsetLeft,y:t.offsetTop},r=t.offsetParent;r;)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;return n}(this._parentHtml):{x:0,y:0}}},{key:"getCoverTracks",value:function(e){var t=[];if(this.sheet&&this.sheet.listData)for(var n=this.sheet.listData,r=Math.min(e.start.y,e.end.y),i=Math.max(e.start.y,e.end.y),a=r;a<=i;a++){var o=void 0;if(0===a)o=this.getTreeNodeCoverTracks(this.sheetHead.data,e);else{var s=n[a-1];o=this.getTreeNodeCoverTracks(s,e)}o&&o.length&&(t=t.concat(o))}return t}},{key:"getTreeNodeCoverTracks",value:function(e,t){var n=[];if(e&&t){var r=e.item.data;if(r){var i=Math.min(t.start.x,t.end.x),a=Math.max(t.start.x,t.end.x),o=[];if(r.type===I.ARMATURE){var s=r.animation;o=Bf.getAnimationFramesFromTo(s,i,a)}else if(r.type===I.BONE||r.type===I.SLOT){var l=r.animation;o=Bf.getTimelinesFramesFromTo(l,i,a)}else if(r.type===I.TIMELINE){var u=r.animation;o=Bf.getFramesFromTo(u,i,a)}n=n.concat(o)}}return n}},{key:"initDope",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.LABEL_LEFT_WIDTH,r=e.ITEM_HEIGHT;this.label=new UV(this._model),this.label.x=n,this.stage.addChild(this.label),this.label.interactive=!0,this.label.interactiveChildren=!0,this.label.on("mouseover",this.onLabelMouseOver,this),this.label.on("mouseout",this.onLabelMouseOut,this),this.label.on("rightdown",this.onLabelMouseRightDown,this),this.label.on("rightup",this.onLabelMouseRightUp,this),this.label.on("rightupoutside",this.onLabelMouseRightUp,this),this.label.on("mousedown",this.onLabelMouseDown,this),this.label.on("mouseup",this.onLabelMouseUp,this),this.label.on("upoutside",this.onLabelMouseUp,this),this.label.on(nC.UPDATE_LABEL_OFFSET,this.reRenderFrameBlock,this),this.sheetList=new Pb,this.sheetList.y=t,this.sheetList.interactive=!0,this.stage.addChild(this.sheetList),this.sheetHead=new pG,this.sheetHead.model=this.model,this.sheetHead.index=1,this.sheetHead.y=0,this.sheetList.addChild(this.sheetHead),this.sheet=new YV(null,fG,!1),this.sheet.initItemCallback=this.initDopeSheetItem,this.sheet.y=r,this.sheetList.addChild(this.sheet),this.sheet.on("mouseover",this.onSheetMouseOver,this),this.sheet.on("mouseout",this.onSheetMouseOut,this),this.sheet.on(VV.ListScroll,this.onSheetScroll,this),this.frameBlock=new bG,this.stage.addChild(this.frameBlock),this.tools=new gG,this.tools.model=this._model,this.stage.addChild(this.tools),this.stage.addChild(this._bottomBar),this._scrollBar=new xG({vertical:!1,height:this.BOTTOM_BAR_HEIGHT,width:10,bgColor:10066329,barColor:6710886}),this._scrollBar.max=100,this._scrollBar.cur=10,this._scrollBar.pos=2,this.stage.addChild(this._scrollBar),this._scrollBar.start(),this._horizontalScroller=new xG({vertical:!0,height:100,width:10,bgColor:10066329,barColor:6710886}),this._horizontalScroller.max=100,this._horizontalScroller.cur=10,this._horizontalScroller.pos=2,this.stage.addChild(this._horizontalScroller),this._horizontalScroller.start()}},{key:"initController",value:function(){this.frameSelectController=EG.getInstance(EG),this.frameSelectController.initialize(this.model,this),this.frameSelectController.enable=!0,this.frameBlockSelectController=TG.getInstance(TG),this.frameBlockSelectController.initialize(this.model,this),this.frameBlockSelectController.enable=!0,this._scrollBar.on(VV.Scroll,this.onSheetLabelScroll,this),this._horizontalScroller.on(VV.Scroll,this.onSheetHorizontalScroll,this),this.sheetHead.on(pG.EVENT_SELECT_ANIMATION,this.onSelectAnimation,this),this.sheetHead.on(pG.EVENT_ADD_ANIMATION,this.onAddAnimation,this),this.sheetHead.on(pG.EVENT_REMOVE_ANIMATION,this.onRemoveAnimation,this),this.tools.on(nC.EVENT_COLLAPSE,this.onCollapseTree,this),this.sheet.on(YV.EVENT_COLLAPSE,this.onSheetCollapse,this)}},{key:"onAddAnimation",value:function(){var e=this.model.getCurArmature();this.model.dispatch(O.ADD_ANIMATION_INTERACTIVE,e.id)}},{key:"onCollapseTree",value:function(e){this.sheet.collapseAll(e),this.updateHorizontalScroller()}},{key:"onSheetCollapse",value:function(){this.updateHorizontalScroller()}},{key:"onRemoveAnimation",value:function(e){var t=this.model.getCurArmature(),n=t.id,r=this.model.state.runtime.editing.selectedAnimationId;if(e!==r){var i={animationId:e,armatureId:n};this.model.dispatch(O.REMOVE_ANIMATION_INTERACTIVE,i)}else{for(var a=-1,o=0,s=t.animations.length;o<s;o++){var l=t.animations[o];if(l!==r){a=l;break}}var u={animationId:e,armatureId:n,nextAnimationId:a};this.model.dispatch(O.REMOVE_ANIMATION_INTERACTIVE,u)}}},{key:"onSelectAnimation",value:function(e){e!==this.model.state.runtime.editing.selectedAnimationId&&this.model.commit(P.SELECT_ANIMATION,{animationId:e})}},{key:"onSheetLabelScroll",value:function(e){this.moveToOffset(e)}},{key:"onSheetHorizontalScroll",value:function(e){this.sheet.scrollPosition=e,this._horizontalScroller.pos=e}},{key:"onDopeConfigChange",value:function(){this.sheet&&this.sheet.reRender()}},{key:"onDopeConfigChangeHead",value:function(){this.sheet&&this.sheet.reRender()}},{key:"gotoFrame",value:function(e){e!==this.model.curFrame&&this.model.commit($.UPDATE_FRAME,e)}},{key:"moveToOffset",value:function(e){this.model.commit($.UPDATE_OFFSET,e)}},{key:"onLabelMouseDown",value:function(e){var t=this.model.state.config.timeline.LABEL_LEFT_WIDTH;this._justLabelDown=!0,this._downLabelX=e.data.global.x-t;var n=this.label.getFrameFromX(this._downLabelX);this.gotoFrame(n),document.addEventListener("mousemove",this._onLabelMouseMove),document.addEventListener("mouseup",this._onLabelMouseUp),e.stopPropagation(),y2.instance&&y2.instance.eventBus&&y2.instance.eventBus.dispatchEventWidth("dopesheetMouseDown",{})}},{key:"onLabelMouseUp",value:function(e){this._justLabelDown&&(this._justLabelDown=!1),this.stopLabelTicker(),document.removeEventListener("mousemove",this._onLabelMouseMove),y2.instance&&y2.instance.eventBus&&y2.instance.eventBus.dispatchEventWidth("dopesheetMouseUp",{})}},{key:"onLabelMouseMove",value:function(e){if(this._justLabelDown)this._downGlobalX=e.clientX,this._justLabelDown=!1;else{var t=this.globalToLabelLocalPos(e.clientX,e.clientY);if(t.x<=10)this.tickLabelLeft();else if(t.x>=this.label.realWidth-10)this.tickLabelRight();else{this.stopLabelTicker();var n=e.clientX-this._downGlobalX,r=this.label.getFrameFromX(this._downLabelX+n);r<0&&(r=0),this.gotoFrame(r)}}}},{key:"tickLabelLeft",value:function(){this._labelTicker.started||(this._labelScrollSpeed=-this.LABEL_SCROLL_SPEED,this._labelTicker.add(this.autoLabelMove,this),this._labelTicker.start())}},{key:"tickLabelRight",value:function(){this._labelTicker.started||(this._labelScrollSpeed=this.LABEL_SCROLL_SPEED,this._labelTicker.add(this.autoLabelMove,this),this._labelTicker.start())}},{key:"stopLabelTicker",value:function(){this._labelTicker.remove(this.autoLabelMove,this),this._labelTicker.stop()}},{key:"autoLabelMove",value:function(){var e=this.label.offsetX;if((e+=this._labelScrollSpeed)<0&&(e=0),this.moveToOffset(e),this._labelScrollSpeed<0){var t=this.label.getViewMinFrame();this.gotoFrame(t)}else{var n=this.label.getViewMaxFrame();this.gotoFrame(n)}}},{key:"onLabelMouseRightDown",value:function(e){this._justLabelRightDown=!0,this._downLabelX=0,this._downLabelOffX=this.label.offsetX,document.addEventListener("mousemove",this._onLabelMouseRightMove)}},{key:"onLabelMouseRightUp",value:function(e){this._justLabelRightDown=!1,document.removeEventListener("mousemove",this._onLabelMouseRightMove)}},{key:"onLabelMouseRightMove",value:function(e){if(this._justLabelRightDown)this._downLabelX=e.clientX,this._justLabelRightDown=!1;else{var t=e.clientX-this._downLabelX,n=this._downLabelOffX-t;n<0&&(n=0),this.moveToOffset(n)}}},{key:"onLabelMouseOut",value:function(e){document.removeEventListener("mousewheel",this._onLabelMouseWheel)}},{key:"onLabelMouseOver",value:function(e){document.addEventListener("mousewheel",this._onLabelMouseWheel)}},{key:"onSheetMouseOut",value:function(e){document.removeEventListener("mousewheel",this._onSheetMouseWheel)}},{key:"onSheetMouseOver",value:function(e){document.addEventListener("mousewheel",this._onSheetMouseWheel)}},{key:"onSheetScroll",value:function(e){var t=e||0;this.frameBlock&&(this.frameBlock.offsetY=t)}},{key:"onLabelMouseWheel",value:function(e){e.wheelDelta>0?this.label.zoomIn():this.label.zoomOut()}},{key:"onSheetMouseWheel",value:function(e){e.wheelDelta>0?this.sheet.scrollPosition-=this.SHEET_SCROLL_SPEED:this.sheet.scrollPosition+=this.SHEET_SCROLL_SPEED,this._horizontalScroller&&(this._horizontalScroller.pos=this.sheet.scrollPosition)}}]),n}(h_),kG=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this))._domInput=void 0,r._selection=[0,0],r._restrictRegex=void 0,r._restrictValue="",r._onInputKeyDownBind=void 0,r._onInputInputBind=void 0,r._onInputKeyUpBind=void 0,r._onFocusedBind=void 0,r._onBlurredBind=void 0,r.parent=void 0,r.parentDom=void 0,r.onCompositionStart=function(e){r.emit(e.type,e)},r.onCompositionEnd=function(e){r.emit(e.type,e)},r._domInput=r.createDom(e),r.visible=!1,document.body.appendChild(r._domInput),r}return d(n,[{key:"domInput",get:function(){return this._domInput}},{key:"visible",get:function(){return"block"===this._domInput.style.display},set:function(e){var t=0,n=-5;if(this.parentDom){var r=this.parentDom.getBoundingClientRect();t+=r.x,n+=r.y}if(this.parent){var i=this.parent.getGlobalPosition();t+=i.x,n+=i.y,this._domInput.style.left=t+"px",this._domInput.style.top=n+"px"}this._domInput.style.display=e?"block":"none"}},{key:"value",get:function(){return this._domInput.value},set:function(e){this._domInput.value=e}},{key:"placeholder",set:function(e){this._domInput.placeholder=e}},{key:"disabled",set:function(e){this._domInput.disabled=e}},{key:"maxlength",get:function(){return this._domInput.maxLength},set:function(e){this._domInput.maxLength=e}},{key:"restrict",get:function(){return this._restrictRegex},set:function(e){if(void 0!==e){if(e instanceof RegExp){var t=e.toString().slice(1,-1);"^"!==t.charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),e=new RegExp(t)}else e=new RegExp("^["+e+"]*$");this._restrictRegex=e}}},{key:"createDom",value:function(e){return e?(this._domInput=document.createElement("textarea"),this._domInput.style.resize="none"):(this._domInput=document.createElement("input"),this._domInput.type="text"),this._domInput.style.position="absolute",this._domInput.style.zIndex="99",this._domInput.style.background="none",this._domInput.style.border="none",this._domInput.style.outline="none",this._domInput.style.padding="0",this.addEvent(),document.body.appendChild(this._domInput),this._domInput}},{key:"setStyle",value:function(e){for(var t in e)this._domInput.style[t]=e[t]}},{key:"setStyleValue",value:function(e,t){this._domInput.style[e]=t}},{key:"select",value:function(){this._domInput.select()}},{key:"getDOMInputBounds",value:function(){var e=this._domInput.style.transform,t=this._domInput.style.display;this._domInput.style.transform="",this._domInput.style.display="block";var n=this._domInput.getBoundingClientRect();return this._domInput.style.transform=e,this._domInput.style.display=t,n}},{key:"updatePostion",value:function(e,t,n,r){this._domInput.style.top=e+"px",this._domInput.style.left=t+"px",this._domInput.style.transform=n,r&&(this._domInput.style.opacity=r.toString())}},{key:"removeDom",value:function(){this._domInput&&document.body.removeChild(this._domInput)}},{key:"release",value:function(){this.removeDom(),this.removeEvent(),this.removeAllListeners(),this._domInput=void 0,this._restrictRegex=void 0}},{key:"addEvent",value:function(){this._onInputKeyDownBind||(this._onInputKeyDownBind=this._onInputKeyDown.bind(this),this._onInputInputBind=this._onInputInput.bind(this),this._onInputKeyUpBind=this._onInputKeyUp.bind(this),this._onFocusedBind=this._onFocused.bind(this),this._onBlurredBind=this._onBlurred.bind(this),this._domInput.addEventListener("keydown",this._onInputKeyDownBind,{passive:!1}),this._domInput.addEventListener("input",this._onInputInputBind,{passive:!1}),this._domInput.addEventListener("keyup",this._onInputKeyUpBind,{passive:!1}),this._domInput.addEventListener("focus",this._onFocusedBind,{passive:!1}),this._domInput.addEventListener("blur",this._onBlurredBind,{passive:!1}),this._domInput.addEventListener("compositionstart",this.onCompositionStart,{passive:!1}),this._domInput.addEventListener("compositionend",this.onCompositionEnd,{passive:!1}))}},{key:"removeEvent",value:function(){this._onInputKeyDownBind&&(this._domInput.removeEventListener("keydown",this._onInputKeyDownBind),this._domInput.removeEventListener("input",this._onInputInputBind),this._domInput.removeEventListener("keyup",this._onInputKeyUpBind),this._domInput.removeEventListener("focus",this._onFocusedBind),this._domInput.removeEventListener("blur",this._onBlurredBind),this._domInput.removeEventListener("compositionstart",this.onCompositionStart),this._domInput.removeEventListener("compositionend",this.onCompositionEnd),this._onInputKeyDownBind=void 0,this._onInputInputBind=void 0,this._onInputKeyUpBind=void 0,this._onFocusedBind=void 0,this._onBlurredBind=void 0)}},{key:"_applyRestriction",value:function(){this._restrictRegex&&(this._restrictRegex.test(this.value)?this._restrictValue=this.value:(this.value=this._restrictValue,this._domInput.setSelectionRange(this._selection[0],this._selection[1])))}},{key:"_onInputKeyDown",value:function(e){this._selection=[this._domInput.selectionStart||0,this._domInput.selectionEnd||0],this.emit(e.type,e)}},{key:"_onInputInput",value:function(e){null!=e.data&&this._restrictRegex&&this._applyRestriction(),this.emit(e.type,e),e.preventDefault()}},{key:"_onInputKeyUp",value:function(e){this.emit(e.type,e),e.preventDefault()}},{key:"_onFocused",value:function(e){this.emit("focus"),e.preventDefault()}},{key:"_onBlurred",value:function(e){this.emit("blur"),e.preventDefault()}},{key:"focus",value:function(){document.body.removeChild(this._domInput),document.body.appendChild(this._domInput),this._domInput.focus()}},{key:"blur",value:function(){this._domInput.blur()}}]),n}(Lp);kG.shared=new kG(!1);var CG=function(e){var t=e.isLoop,n=e.isPlay,r=e.onPlay,i=e.onPlayPrev,a=e.onPlayNext,o=e.onLoop,s=e.onStop,l=e.onGotoFirst,u=e.onGotoLast;return(0,hf.jsxs)("span",{className:"dplay-tools",children:[(0,hf.jsx)(EA,{normal:"first",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:l}),(0,hf.jsx)(EA,{normal:"previous2",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:i}),(0,hf.jsx)(EA,{normal:"caretdown-copy",down:"pause1",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:n,onToggle:function(e){e?r():s()}}),(0,hf.jsx)(EA,{normal:"next",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:a}),(0,hf.jsx)(EA,{normal:"last",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:u}),(0,hf.jsx)(EA,{normal:"loop",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t,onToggle:function(e){o(e)}})]})},AG=function(e){e.color;return(0,hf.jsxs)("span",{children:[(0,hf.jsx)("span",{style:{width:"1px",height:"16px",display:"inline-block",backgroundColor:"#999999",marginLeft:"10px"}}),(0,hf.jsx)("span",{style:{width:"1px",height:"16px",display:"inline-block",backgroundColor:"#AAAAAA",marginRight:"10px"}})]})},IG=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this,{componentClass:OG,label:"\u6444\u5f71\u8868",icon:"icon-timeline-svgrepo-com",type:gboxLayout.GPanelType.TAB})).toolBarElement=document.createElement("span"),(0,s.createRoot)(e.toolBarElement).render((0,hf.jsx)(PG,{store:e.store,eventBus:e.eventBus})),e}return d(n,[{key:"resize",value:function(e,t){this.store.commit($.UPDATE_SIZE,{width:e,height:t})}}],[{key:"toString",value:function(){return"DopesheetPanel"}}]),n}(_T),OG=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).refs={},r.dopesheet=void 0,r.store=void 0,r.store=e.store;e.store.state.editor.dopesheet;return r.state={},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on($.UPDATE_SIZE,this.updateSize,this),this.props.eventBus.on($.UPDATE_OFFSET,this.updateOffset,this),this.props.eventBus.on($.UPDATE_SCALE,this.updateScale,this),this.props.eventBus.on($.UPDATE_FRAME,this.updateFrame,this),this.props.eventBus.on(q.OVER_FRAME,this.updateOverFrame,this),this.props.eventBus.on($.SELECT_FRAME,this.updateOverFrame,this),this.props.eventBus.on(P.MODIFY_FRAMES,this.updateOverFrame,this),this.props.eventBus.on(P.AUTO_KEY,this.updateFrameData,this),this.props.eventBus.on(P.DELETE_FRAMES,this.updateFrameData,this),this.props.eventBus.on(P.SELECT_ANIMATION,this.updateSelectAnimation,this),this.props.eventBus.on(P.ADD_ANIMATION,this.updateAddAnimation,this),this.props.eventBus.on(P.RENAME_ANIMATION,this.updateSelectAnimation,this),this.props.eventBus.on($.SWITCH_FILTER,this.updateFrameData,this),this.props.eventBus.on(V.SELECT_BONES,this.updateFrameData,this),this.props.eventBus.on(F.SELECT_SLOTS,this.updateFrameData,this),this.props.eventBus.on(N.SELECT_ARMATURE,this.updateSelectAnimation,this)}},{key:"render",value:function(){return(0,hf.jsx)("div",{className:"dopesheet-panel",id:"dopeSheetContainer",ref:"dopeSheetContainer"})}},{key:"componentDidMount",value:function(){this.initDopeSheet(this.store),this.refs.dopeSheetContainer&&(JS.dopeLayer=this.refs.dopeSheetContainer),this.updateSize()}},{key:"updateAddAnimation",value:function(){}},{key:"updateSelectAnimation",value:function(){this.dopesheet.updateSelectAnimation()}},{key:"updateOffset",value:function(){this.dopesheet.updateOffset()}},{key:"updateScale",value:function(){this.dopesheet.updateScale()}},{key:"updateFrame",value:function(){this.dopesheet.updateFrame()}},{key:"updateOverFrame",value:function(){this.dopesheet.refreshFrames()}},{key:"updateSize",value:function(){var e=this.store.state.editor.dopesheet,t=e.width,n=e.height;this.dopesheet&&this.dopesheet.resizeStage(t,n)}},{key:"updateFrameData",value:function(){this.dopesheet.updateData()}},{key:"updateSelectChild",value:function(){this.store.state.editor.dopesheet.filter&&this.dopesheet.updateData()}},{key:"initDopeSheet",value:function(e){this.dopesheet=new SG(e),this.dopesheet.addToContainer(this.refs.dopeSheetContainer),this.dopesheet.updateData(),this.refs.dopeSheetContainer&&(kG.shared.parentDom=this.refs.dopeSheetContainer)}}]),n}(a.Component),PG=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).playFrameIndex=0,r.playDuration=0,r.curDelta=0,r.playAnimation=function(e){var t=Math.round(1e3/r.state.fps/r.getRealSpeed());if(r.curDelta+=e,!(r.curDelta<t)){for(;r.curDelta>t;)r.curDelta-=t;r.playFrameIndex+=1,r.updateTime(),r.playFrameIndex<r.playDuration?r.props.store.commit($.UPDATE_FRAME,r.playFrameIndex):(r.playFrameIndex=0,r.props.store.commit($.UPDATE_FRAME,r.playFrameIndex),r.state.loop||r.stop())}},r.onChangeSpeed=function(e){var t=parseInt(e.target.value);r.setState({speed:t})},r.onFPSChange=function(e){var t=e.target.value,n=parseInt(t);t>60?n=60:t<1&&(n=1),r.setState({fps:n}),vG.next(r.updateTime.bind(m(r)))},r.state={loop:!1,isPlay:!1,speed:3,curTime:"0",fps:24},r}return d(n,[{key:"componentDidMount",value:function(){this.props.eventBus.on($.UPDATE_FRAME,this.syncTime,this),this.props.eventBus.on(P.SELECT_ANIMATION,this.updateAnimation,this),this.syncTime()}},{key:"syncTime",value:function(){var e=this.props.store.state.editor.dopesheet.curTime;this.playFrameIndex=e,this.updateTime()}},{key:"updateAnimation",value:function(){if(this.state.isPlay){var e=this.props.store.getAnimationDuration()[1];this.playDuration=e}}},{key:"updateTime",value:function(){var e=(this.playFrameIndex/this.state.fps).toFixed(2)+"\u79d2";this.setState({curTime:e})}},{key:"play",value:function(){this.curDelta=0;var e=this.props.store.getAnimationDuration()[1];this.playDuration=e;var t=this.props.store.state.editor.dopesheet.curTime;this.playFrameIndex=t,vG.setEnterFrame(this.playAnimation),this.setState({isPlay:!0})}},{key:"stop",value:function(){vG.stopEnterFrame(this.playAnimation),this.playFrameIndex=Math.round(this.playFrameIndex),this.props.store.commit($.UPDATE_FRAME,this.playFrameIndex),this.setState({isPlay:!1}),this.updateTime()}},{key:"getRealSpeed",value:function(){switch(this.state.speed){case 0:return.1;case 1:return.2;case 2:return.5;case 3:return 1;case 4:return 2;case 5:return 5;case 6:return 10}}},{key:"render",value:function(){var e=this;return(0,hf.jsxs)("span",{className:"dopesheet-toolbar",children:[(0,hf.jsx)(CG,{isLoop:this.state.loop,isPlay:this.state.isPlay,onPlay:function(){e.play()},onStop:function(){e.stop()},onPlayPrev:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime;t>0&&e.props.store.commit($.UPDATE_FRAME,t-1)}},onPlayNext:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime;t<e.props.store.getAnimationDuration()[1]&&e.props.store.commit($.UPDATE_FRAME,t+1)}},onLoop:function(t){e.setState({loop:t})},onGotoFirst:function(){e.props.store&&(0!==e.props.store.rootState.editor.dopesheet.curTime&&e.props.store.commit($.UPDATE_FRAME,0))},onGotoLast:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime,n=e.props.store.getAnimationDuration()[1];t!==n&&e.props.store.commit($.UPDATE_FRAME,n)}}}),(0,hf.jsx)(AG,{}),(0,hf.jsx)("span",{children:" \u901f\u5ea6\uff1a"}),(0,hf.jsx)("span",{children:(0,hf.jsx)("input",{type:"range",min:"0",max:"6",step:"1",value:this.state.speed,onChange:this.onChangeSpeed})}),(0,hf.jsxs)("span",{style:{width:"20px",display:"inline-block"},children:["x",this.getRealSpeed()]}),(0,hf.jsx)(AG,{}),(0,hf.jsx)("span",{children:"\u65f6\u95f4\uff1a"}),(0,hf.jsx)("span",{style:{width:"70px",display:"inline-block"},children:this.state.curTime}),(0,hf.jsx)("span",{children:"\u5e27\u7387\uff1a"}),(0,hf.jsx)("span",{children:(0,hf.jsx)("input",{type:"text",onChange:this.onFPSChange,value:this.state.fps,style:{width:"20px"}})})]})}}]),n}(a.Component),MG=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.forceRender,o=e.className,s=e.style,l=e.children,u=e.isActive,c=e.role,h=It(a.useState(u||i),2),d=h[0],f=h[1];return a.useEffect((function(){(i||u)&&f(!0)}),[i,u]),d?a.createElement("div",{ref:t,className:Wa()("".concat(r,"-content"),(n={},y(n,"".concat(r,"-content-active"),u),y(n,"".concat(r,"-content-inactive"),!u),n),o),style:s,role:c},a.createElement("div",{className:"".concat(r,"-content-box")},l)):null}));MG.displayName="PanelContent";var RG=MG,NG=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],DG=a.forwardRef((function(e,t){var n,r,i=e.showArrow,o=void 0===i||i,s=e.headerClass,l=e.isActive,u=e.onItemClick,c=e.forceRender,h=e.className,d=e.prefixCls,f=e.collapsible,p=e.accordion,v=e.panelKey,m=e.extra,g=e.header,b=e.expandIcon,_=e.openMotion,x=e.destroyInactivePanel,E=e.children,w=Wn(e,NG),T="disabled"===f,S="header"===f,k="icon"===f,C=null!==m&&void 0!==m&&"boolean"!==typeof m,A=function(){null===u||void 0===u||u(v)},I="function"===typeof b?b(e):a.createElement("i",{className:"arrow"});I&&(I=a.createElement("div",{className:"".concat(d,"-expand-icon"),onClick:["header","icon"].includes(f)?A:void 0},I));var O=Wa()((y(n={},"".concat(d,"-item"),!0),y(n,"".concat(d,"-item-active"),l),y(n,"".concat(d,"-item-disabled"),T),n),h),P={className:Wa()((y(r={},"".concat(d,"-header"),!0),y(r,"headerClass",s),y(r,"".concat(d,"-header-collapsible-only"),S),y(r,"".concat(d,"-icon-collapsible-only"),k),r)),"aria-expanded":l,"aria-disabled":T,onKeyPress:function(e){"Enter"!==e.key&&e.keyCode!==Ru.ENTER&&e.which!==Ru.ENTER||A()}};return S||k||(P.onClick=A,P.role=p?"tab":"button",P.tabIndex=T?-1:0),a.createElement("div",Ft({},w,{ref:t,className:O}),a.createElement("div",P,o&&I,a.createElement("span",{className:"".concat(d,"-header-text"),onClick:"header"===f?A:void 0},g),C&&a.createElement("div",{className:"".concat(d,"-extra")},m)),a.createElement(Jo,Ft({visible:l,leavedClassName:"".concat(d,"-content-hidden")},_,{forceRender:c,removeOnLeave:x}),(function(e,t){var n=e.className,r=e.style;return a.createElement(RG,{ref:t,prefixCls:d,className:n,style:r,isActive:l,forceRender:c,role:p?"tabpanel":void 0},E)})))})),LG=DG;function FG(e){var t=e;if(!Array.isArray(t)){var n=u(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var BG=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-collapse":n,i=e.destroyInactivePanel,o=void 0!==i&&i,s=e.style,l=e.accordion,u=e.className,c=e.children,h=e.collapsible,d=e.openMotion,f=e.expandIcon,p=e.activeKey,v=e.defaultActiveKey,m=e.onChange,g=Wa()(r,u),y=mh([],{value:p,onChange:function(e){return null===m||void 0===m?void 0:m(e)},defaultValue:v,postState:FG}),b=It(y,2),_=b[0],x=b[1],E=Yn(c).map((function(e,t){if(!e)return null;var n=e.key||String(t),i=e.props,s=i.header,u=i.headerClass,c=i.destroyInactivePanel,p=i.collapsible,v=i.onItemClick,m=!1;m=l?_[0]===n:_.indexOf(n)>-1;var g=null!==p&&void 0!==p?p:h,y={key:n,panelKey:n,header:s,headerClass:u,isActive:m,prefixCls:r,destroyInactivePanel:null!==c&&void 0!==c?c:o,openMotion:d,accordion:l,children:e.props.children,onItemClick:function(e){"disabled"!==g&&(!function(e){x((function(){return l?_[0]===e?[]:[e]:_.indexOf(e)>-1?_.filter((function(t){return t!==e})):[].concat(Ie(_),[e])}))}(e),null===v||void 0===v||v(e))},expandIcon:f,collapsible:g};return"string"===typeof e.type?e:(Object.keys(y).forEach((function(e){"undefined"===typeof y[e]&&delete y[e]})),a.cloneElement(e,y))}));return a.createElement("div",{ref:t,className:g,style:s,role:l?"tablist":void 0},E)})),UG=Object.assign(BG,{Panel:LG}),HG=UG,jG=(UG.Panel,a.forwardRef((function(e,t){var n=a.useContext(Ra).getPrefixCls,r=e.prefixCls,i=e.className,o=void 0===i?"":i,s=e.showArrow,l=void 0===s||s,u=n("collapse",r),c=Wa()(y({},"".concat(u,"-no-arrow"),!l),o);return a.createElement(HG.Panel,Object.assign({ref:t},e,{prefixCls:u,className:c}))}))),zG=function(e){var t,n,r,i,a,o,s=e.componentCls,l=e.collapseContentBg,u=e.padding,c=e.collapseContentPaddingHorizontal,h=e.collapseHeaderBg,d=e.collapseHeaderPadding,f=e.collapseHeaderPaddingSM,p=e.collapseHeaderPaddingLG,v=e.collapsePanelBorderRadius,m=e.lineWidth,g=e.lineType,b=e.colorBorder,_=e.colorText,x=e.colorTextHeading,E=e.colorTextDisabled,w=e.fontSize,T=e.fontSizeLG,S=e.lineHeight,k=e.marginSM,C=e.paddingSM,A=e.paddingLG,I=e.motionDurationSlow,O=e.fontSizeIcon,P="".concat(m,"px ").concat(g," ").concat(b);return y({},s,Object.assign(Object.assign({},is(e)),(y(o={backgroundColor:h,border:P,borderBottom:0,borderRadius:"".concat(v,"px")},"&-rtl",{direction:"rtl"}),y(o,"& > ".concat(s,"-item"),(y(n={borderBottom:P},"&:last-child",y({},"\n            &,\n            & > ".concat(s,"-header"),{borderRadius:"0 0 ".concat(v,"px ").concat(v,"px")})),y(n,"> ".concat(s,"-header"),(y(t={position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:d,color:x,lineHeight:S,cursor:"pointer",transition:"all ".concat(I,", visibility 0s")},"> ".concat(s,"-header-text"),{flex:"auto"}),y(t,"&:focus",{outline:"none"}),y(t,"".concat(s,"-expand-icon"),{height:w*S,display:"flex",alignItems:"center",paddingInlineEnd:k}),y(t,"".concat(s,"-arrow"),Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{fontSize:O,svg:{transition:"transform ".concat(I)}})),y(t,"".concat(s,"-header-text"),{marginInlineEnd:"auto"}),t)),y(n,"".concat(s,"-header-collapsible-only"),y({cursor:"default"},"".concat(s,"-header-text"),{flex:"none",cursor:"pointer"})),y(n,"".concat(s,"-icon-collapsible-only"),y({cursor:"default"},"".concat(s,"-expand-icon"),{cursor:"pointer"})),y(n,"&".concat(s,"-no-arrow"),y({},"> ".concat(s,"-header"),{paddingInlineStart:C})),n)),y(o,"".concat(s,"-content"),(y(r={color:_,backgroundColor:l,borderTop:P},"& > ".concat(s,"-content-box"),{padding:"".concat(u,"px ").concat(c,"px")}),y(r,"&-hidden",{display:"none"}),r)),y(o,"&-small",y({},"> ".concat(s,"-item"),(y(i={},"> ".concat(s,"-header"),{padding:f}),y(i,"> ".concat(s,"-content > ").concat(s,"-content-box"),{padding:C}),i))),y(o,"&-large",y({},"> ".concat(s,"-item"),(y(a={fontSize:T},"> ".concat(s,"-header"),y({padding:p},"> ".concat(s,"-expand-icon"),{height:T*S})),y(a,"> ".concat(s,"-content > ").concat(s,"-content-box"),{padding:A}),a))),y(o,"".concat(s,"-item:last-child"),y({},"> ".concat(s,"-content"),{borderRadius:"0 0 ".concat(v,"px ").concat(v,"px")})),y(o,"& ".concat(s,"-item-disabled > ").concat(s,"-header"),y({},"\n          &,\n          & > .arrow\n        ",{color:E,cursor:"not-allowed"})),y(o,"&".concat(s,"-icon-position-end"),y({},"& > ".concat(s,"-item"),y({},"> ".concat(s,"-header"),y({},"".concat(s,"-expand-icon"),{order:1,paddingInlineEnd:0,paddingInlineStart:k})))),o)))},VG=function(e){var t=e.componentCls,n="> ".concat(t,"-item > ").concat(t,"-header ").concat(t,"-arrow svg");return y({},"".concat(t,"-rtl"),y({},n,{transform:"rotate(180deg)"}))},GG=function(e){var t,n=e.componentCls,r=e.collapseHeaderBg,i=e.paddingXXS,a=e.colorBorder;return y({},"".concat(n,"-borderless"),(y(t={backgroundColor:r,border:0},"> ".concat(n,"-item"),{borderBottom:"1px solid ".concat(a)}),y(t,"\n        > ".concat(n,"-item:last-child,\n        > ").concat(n,"-item:last-child ").concat(n,"-header\n      "),{borderRadius:0}),y(t,"> ".concat(n,"-item:last-child"),{borderBottom:0}),y(t,"> ".concat(n,"-item > ").concat(n,"-content"),{backgroundColor:"transparent",borderTop:0}),y(t,"> ".concat(n,"-item > ").concat(n,"-content > ").concat(n,"-content-box"),{paddingTop:i}),t))},WG=function(e){var t=e.componentCls,n=e.paddingSM;return y({},"".concat(t,"-ghost"),y({backgroundColor:"transparent",border:0},"> ".concat(t,"-item"),y({borderBottom:0},"> ".concat(t,"-content"),y({backgroundColor:"transparent",border:0},"> ".concat(t,"-content-box"),{paddingBlock:n}))))},XG=rl("Collapse",(function(e){var t=el(e,{collapseContentBg:e.colorBgContainer,collapseHeaderBg:e.colorFillAlter,collapseHeaderPadding:"".concat(e.paddingSM,"px ").concat(e.padding,"px"),collapseHeaderPaddingSM:"".concat(e.paddingXS,"px ").concat(e.paddingSM,"px"),collapseHeaderPaddingLG:"".concat(e.padding,"px ").concat(e.paddingLG,"px"),collapsePanelBorderRadius:e.borderRadiusLG,collapseContentPaddingHorizontal:16});return[zG(t),GG(t),WG(t),VG(t),QP(t)]})),YG=a.forwardRef((function(e,t){var n,r=a.useContext(Ra),i=r.getPrefixCls,o=r.direction,s=e.prefixCls,l=e.className,u=e.rootClassName,c=e.bordered,h=void 0===c||c,d=e.ghost,f=e.size,p=e.expandIconPosition,v=void 0===p?"start":p,m=e.children,g=e.expandIcon,b=Ua((function(e){var t;return null!==(t=null!==f&&void 0!==f?f:e)&&void 0!==t?t:"middle"})),_=i("collapse",s),x=i(),E=It(XG(_),2),w=E[0],T=E[1],S=a.useMemo((function(){return"left"===v?"start":"right"===v?"end":v}),[v]),k=Wa()("".concat(_,"-icon-position-").concat(S),(y(n={},"".concat(_,"-borderless"),!h),y(n,"".concat(_,"-rtl"),"rtl"===o),y(n,"".concat(_,"-ghost"),!!d),y(n,"".concat(_,"-").concat(b),"middle"!==b),n),l,u,T),C=Object.assign(Object.assign({},mu(x)),{motionAppear:!1,leavedClassName:"".concat(_,"-content-hidden")}),A=a.useMemo((function(){return Yn(m).map((function(e,t){var n,r;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var i=null!==(r=e.key)&&void 0!==r?r:String(t),a=e.props,o=a.disabled,s=a.collapsible;return Zs(e,Object.assign(Object.assign({},Ys(e.props,["disabled"])),{key:i,collapsible:null!==s&&void 0!==s?s:o?"disabled":void 0}))}return e}))}),[m]);return w(a.createElement(HG,Object.assign({ref:t,openMotion:C},Ys(e,["rootClassName"]),{expandIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g?g(e):a.createElement(BM,{rotate:e.isActive?90:void 0});return Zs(t,(function(){return{className:Wa()(t.props.className,"".concat(_,"-arrow"))}}))},prefixCls:_,className:k}),A))}));var KG=Object.assign(YG,{Panel:jG}),qG=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).onAdd=function(){var e=ge(r.state.value);e||(e=[]);var t=r.props.componentProp.defaultValue;e.push(t),r.props.componentProp.onChange&&r.props.componentProp.onChange(e)},r.onDel=function(e){var t=e.target.value,n=ge(r.state.value);n&&n.length>t&&(n.splice(t,1),r.props.componentProp.onChange&&r.props.componentProp.onChange(n))};var i=e.componentProp.value;return void 0===i&&(i=[]),r.state={value:i},r}return d(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.componentProp.value;void 0===t&&(t=[]),this.state.value!==t&&this.setState({value:t})}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.state.value;return t||(t=[]),(0,hf.jsxs)("div",{className:"array-input",children:[t.map((function(t,n){return e.renderArrayOne(t,n)})),(0,hf.jsx)("button",{onClick:this.onAdd,children:"add"})]})}},{key:"renderArrayOne",value:function(e,t){var n=Pe({},this.props.componentProp);n.value=e,n.onChange=this.getValueChangeFunction(t),n.context=this;var r={property:this.props.property,type:this.props.type,componentType:this.props.componentType,componentProp:n};return(0,hf.jsxs)("div",{className:"array-input-item",children:[(0,hf.jsx)(A0,Pe({},r)),(0,hf.jsx)("button",{onClick:this.onDel,value:t,children:"del"})]},t)}},{key:"getValueChangeFunction",value:function(e){var t=this;return function(n){var r=e,i=ge(t.state.value);i&&i.length>r&&(i[r]=n,t.props.componentProp.onChange&&t.props.componentProp.onChange(i))}}}]),n}(a.Component),$G=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],ZG=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=void 0===r?"rc-switch":r,o=e.className,s=e.checked,l=e.defaultChecked,u=e.disabled,c=e.loadingIcon,h=e.checkedChildren,d=e.unCheckedChildren,f=e.onClick,p=e.onChange,v=e.onKeyDown,m=Wn(e,$G),g=It(mh(!1,{value:s,defaultValue:l}),2),b=g[0],_=g[1];function x(e,t){var n=b;return u||(_(n=e),null===p||void 0===p||p(n,t)),n}var E=Wa()(i,o,(y(n={},"".concat(i,"-checked"),b),y(n,"".concat(i,"-disabled"),u),n));return a.createElement("button",Ft({},m,{type:"button",role:"switch","aria-checked":b,disabled:u,className:E,ref:t,onKeyDown:function(e){e.which===Ru.LEFT?x(!1,e):e.which===Ru.RIGHT&&x(!0,e),null===v||void 0===v||v(e)},onClick:function(e){var t=x(!b,e);null===f||void 0===f||f(t,e)}}),c,a.createElement("span",{className:"".concat(i,"-inner")},a.createElement("span",{className:"".concat(i,"-inner-checked")},h),a.createElement("span",{className:"".concat(i,"-inner-unchecked")},d)))}));ZG.displayName="Switch";var QG=ZG,JG=function(e){var t,n,r,i,a,o=e.componentCls,s="".concat(o,"-inner");return y({},o,y({},"&".concat(o,"-small"),(y(a={minWidth:e.switchMinWidthSM,height:e.switchHeightSM,lineHeight:"".concat(e.switchHeightSM,"px")},"".concat(o,"-inner"),(y(t={paddingInlineStart:e.switchInnerMarginMaxSM,paddingInlineEnd:e.switchInnerMarginMinSM},"".concat(s,"-checked"),{marginInlineStart:"calc(-100% + ".concat(e.switchPinSizeSM+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMaxSM,"px)"),marginInlineEnd:"calc(100% - ".concat(e.switchPinSizeSM+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMaxSM,"px)")}),y(t,"".concat(s,"-unchecked"),{marginTop:-e.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}),t)),y(a,"".concat(o,"-handle"),{width:e.switchPinSizeSM,height:e.switchPinSizeSM}),y(a,"".concat(o,"-loading-icon"),{top:(e.switchPinSizeSM-e.switchLoadingIconSize)/2,fontSize:e.switchLoadingIconSize}),y(a,"&".concat(o,"-checked"),(y(r={},"".concat(o,"-inner"),(y(n={paddingInlineStart:e.switchInnerMarginMinSM,paddingInlineEnd:e.switchInnerMarginMaxSM},"".concat(s,"-checked"),{marginInlineStart:0,marginInlineEnd:0}),y(n,"".concat(s,"-unchecked"),{marginInlineStart:"calc(100% - ".concat(e.switchPinSizeSM+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMaxSM,"px)"),marginInlineEnd:"calc(-100% + ".concat(e.switchPinSizeSM+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMaxSM,"px)")}),n)),y(r,"".concat(o,"-handle"),{insetInlineStart:"calc(100% - ".concat(e.switchPinSizeSM+e.switchPadding,"px)")}),r)),y(a,"&:not(".concat(o,"-disabled):active"),(y(i={},"&:not(".concat(o,"-checked) ").concat(s),y({},"".concat(s,"-unchecked"),{marginInlineStart:e.marginXXS/2,marginInlineEnd:-e.marginXXS/2})),y(i,"&".concat(o,"-checked ").concat(s),y({},"".concat(s,"-checked"),{marginInlineStart:-e.marginXXS/2,marginInlineEnd:e.marginXXS/2})),i)),a)))},eW=function(e){var t,n=e.componentCls;return y({},n,(y(t={},"".concat(n,"-loading-icon").concat(e.iconCls),{position:"relative",top:(e.switchPinSize-e.fontSize)/2,color:e.switchLoadingIconColor,verticalAlign:"top"}),y(t,"&".concat(n,"-checked ").concat(n,"-loading-icon"),{color:e.switchColor}),t))},tW=function(e){var t,n,r=e.componentCls,i=e.motion,a="".concat(r,"-handle");return y({},r,(y(n={},a,{position:"absolute",top:e.switchPadding,insetInlineStart:e.switchPadding,width:e.switchPinSize,height:e.switchPinSize,transition:"all ".concat(e.switchDuration," ease-in-out"),"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:e.colorWhite,borderRadius:e.switchPinSize/2,boxShadow:e.switchHandleShadow,transition:"all ".concat(e.switchDuration," ease-in-out"),content:'""'}}),y(n,"&".concat(r,"-checked ").concat(a),{insetInlineStart:"calc(100% - ".concat(e.switchPinSize+e.switchPadding,"px)")}),y(n,"&:not(".concat(r,"-disabled):active"),i?(y(t={},"".concat(a,"::before"),{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0}),y(t,"&".concat(r,"-checked ").concat(a,"::before"),{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}),t):{}),n))},nW=function(e){var t,n,r,i,a=e.componentCls,o="".concat(a,"-inner");return y({},a,(y(i={},o,(y(t={display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:e.switchInnerMarginMax,paddingInlineEnd:e.switchInnerMarginMin,transition:"padding-inline-start ".concat(e.switchDuration," ease-in-out, padding-inline-end ").concat(e.switchDuration," ease-in-out")},"".concat(o,"-checked, ").concat(o,"-unchecked"),{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:"margin-inline-start ".concat(e.switchDuration," ease-in-out, margin-inline-end ").concat(e.switchDuration," ease-in-out"),pointerEvents:"none"}),y(t,"".concat(o,"-checked"),{marginInlineStart:"calc(-100% + ".concat(e.switchPinSize+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMax,"px)"),marginInlineEnd:"calc(100% - ".concat(e.switchPinSize+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMax,"px)")}),y(t,"".concat(o,"-unchecked"),{marginTop:-e.switchHeight,marginInlineStart:0,marginInlineEnd:0}),t)),y(i,"&".concat(a,"-checked ").concat(o),(y(n={paddingInlineStart:e.switchInnerMarginMin,paddingInlineEnd:e.switchInnerMarginMax},"".concat(o,"-checked"),{marginInlineStart:0,marginInlineEnd:0}),y(n,"".concat(o,"-unchecked"),{marginInlineStart:"calc(100% - ".concat(e.switchPinSize+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMax,"px)"),marginInlineEnd:"calc(-100% + ".concat(e.switchPinSize+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMax,"px)")}),n)),y(i,"&:not(".concat(a,"-disabled):active"),(y(r={},"&:not(".concat(a,"-checked) ").concat(o),y({},"".concat(o,"-unchecked"),{marginInlineStart:2*e.switchPadding,marginInlineEnd:2*-e.switchPadding})),y(r,"&".concat(a,"-checked ").concat(o),y({},"".concat(o,"-checked"),{marginInlineStart:2*-e.switchPadding,marginInlineEnd:2*e.switchPadding})),r)),i))},rW=function(e){var t,n=e.componentCls;return y({},n,Object.assign(Object.assign(Object.assign(Object.assign({},is(e)),y({position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:e.switchMinWidth,height:e.switchHeight,lineHeight:"".concat(e.switchHeight,"px"),verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),userSelect:"none"},"&:hover:not(".concat(n,"-disabled)"),{background:e.colorTextTertiary})),ls(e)),(y(t={},"&".concat(n,"-checked"),y({background:e.switchColor},"&:hover:not(".concat(n,"-disabled)"),{background:e.colorPrimaryHover})),y(t,"&".concat(n,"-loading, &").concat(n,"-disabled"),{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}}),y(t,"&".concat(n,"-rtl"),{direction:"rtl"}),t)))},iW=rl("Switch",(function(e){var t=e.fontSize*e.lineHeight,n=e.controlHeight/2,r=t-4,i=n-4,a=el(e,{switchMinWidth:2*r+8,switchHeight:t,switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchInnerMarginMin:r/2,switchInnerMarginMax:r+2+4,switchPadding:2,switchPinSize:r,switchBg:e.colorBgContainer,switchMinWidthSM:2*i+4,switchHeightSM:n,switchInnerMarginMinSM:i/2,switchInnerMarginMaxSM:i+2+4,switchPinSizeSM:i,switchHandleShadow:"0 2px 4px 0 ".concat(new va("#00230b").setAlpha(.2).toRgbString()),switchLoadingIconSize:.75*e.fontSizeIcon,switchLoadingIconColor:"rgba(0, 0, 0, ".concat(e.opacityLoading,")"),switchHandleActiveInset:"-30%"});return[rW(a),nW(a),tW(a),eW(a),JG(a)]})),aW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},oW=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.size,o=e.disabled,s=e.loading,l=e.className,u=e.rootClassName,c=aW(e,["prefixCls","size","disabled","loading","className","rootClassName"]),h=a.useContext(Ra),d=h.getPrefixCls,f=h.direction,p=a.useContext(Ba),v=(null!==o&&void 0!==o?o:p)||s,m=d("switch",r),g=a.createElement("div",{className:"".concat(m,"-handle")},s&&a.createElement(El,{className:"".concat(m,"-loading-icon")})),b=It(iW(m),2),_=b[0],x=b[1],E=Ua(i),w=Wa()((y(n={},"".concat(m,"-small"),"small"===E),y(n,"".concat(m,"-loading"),s),y(n,"".concat(m,"-rtl"),"rtl"===f),n),l,u,x);return _(a.createElement(cl,null,a.createElement(QG,Object.assign({},c,{prefixCls:m,className:w,disabled:v,ref:t,loadingIcon:g}))))}));oW.__ANT_SWITCH=!0;var sW=oW,lW=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).onChange=function(e){var t=r.props.onChange;t&&t(e)};var i=e.value;return r.state={value:i},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;void 0===t&&(t=!1),this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value;return(0,hf.jsx)(sW,{checked:e,onChange:this.onChange})}}]),n}(a.Component),uW=n(9584),cW={},hW=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(cW[i])return cW[i];var a=function(e,t,n,r){if("undefined"===typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var a=i.getContext("2d");return a?(a.fillStyle=e,a.fillRect(0,0,i.width,i.height),a.fillStyle=t,a.fillRect(0,0,n,n),a.translate(n,n),a.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return cW[i]=a,a},dW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fW=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,o=e.borderRadius,s=e.boxShadow,l=e.children,u=(0,uW.ZP)({default:{grid:{borderRadius:o,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+hW(t,n,r,i.canvas)+") center left"}}});return(0,a.isValidElement)(l)?a.cloneElement(l,dW({},l.props,{style:dW({},l.props.style,u.grid)})):a.createElement("div",{style:u.grid})};fW.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var pW=fW,vW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mW=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function gW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var yW=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=gW(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=function(e,t,n,r,i){var a=i.clientWidth,o=i.clientHeight,s="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,u=s-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=c<0?0:c>o?1:Math.round(100*c/o)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var d=void 0;if(r!==(d=u<0?0:u>a?1:Math.round(100*u/a)/100))return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},gW(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),mW(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,uW.ZP)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:vW({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.createElement("div",{style:n.alpha},a.createElement("div",{style:n.checkboard},a.createElement(pW,{renderers:this.props.renderers})),a.createElement("div",{style:n.gradient}),a.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("div",{style:n.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:n.slider}))))}}]),t}(a.PureComponent||a.Component),bW=yW,_W=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var xW=[38,40],EW=1,wW=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,xW.indexOf(t)>-1)){var i=n.getArrowOffset(),a=38===e.keyCode?r+i:r-i;n.setUpdatedValue(a,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+EW++,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),_W(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,uW.ZP)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.createElement("div",{style:t.wrap},a.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(a.PureComponent||a.Component),TW=wW,SW=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function kW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var CW=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=r=kW(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),r.handleChange=function(e){var t=function(e,t,n,r){var i=r.clientWidth,a=r.clientHeight,o="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var c=void 0;if(c=u<0?359:u>a?0:360*(-100*u/a+100)/100,n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(h=l<0?0:l>i?359:100*l/i*360/100,n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},kW(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),SW(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,uW.ZP)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.createElement("div",{style:r.hue},a.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.createElement("div",{style:r.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:r.slider}))))}}]),t}(a.PureComponent||a.Component),AW=CW,IW=n(5192),OW=n.n(IW);var PW=function(){this.__data__=[],this.size=0};var MW=function(e,t){return e===t||e!==e&&t!==t};var RW=function(e,t){for(var n=e.length;n--;)if(MW(e[n][0],t))return n;return-1},NW=Array.prototype.splice;var DW=function(e){var t=this.__data__,n=RW(t,e);return!(n<0)&&(n==t.length-1?t.pop():NW.call(t,n,1),--this.size,!0)};var LW=function(e){var t=this.__data__,n=RW(t,e);return n<0?void 0:t[n][1]};var FW=function(e){return RW(this.__data__,e)>-1};var BW=function(e,t){var n=this.__data__,r=RW(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function UW(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}UW.prototype.clear=PW,UW.prototype.delete=DW,UW.prototype.get=LW,UW.prototype.has=FW,UW.prototype.set=BW;var HW=UW;var jW=function(){this.__data__=new HW,this.size=0};var zW=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var VW=function(e){return this.__data__.get(e)};var GW=function(e){return this.__data__.has(e)},WW="object"==typeof global&&global&&global.Object===Object&&global,XW="object"==typeof self&&self&&self.Object===Object&&self,YW=WW||XW||Function("return this")(),KW=YW.Symbol,qW=Object.prototype,$W=qW.hasOwnProperty,ZW=qW.toString,QW=KW?KW.toStringTag:void 0;var JW=function(e){var t=$W.call(e,QW),n=e[QW];try{e[QW]=void 0;var r=!0}catch(Qp){}var i=ZW.call(e);return r&&(t?e[QW]=n:delete e[QW]),i},eX=Object.prototype.toString;var tX=function(e){return eX.call(e)},nX=KW?KW.toStringTag:void 0;var rX=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":nX&&nX in Object(e)?JW(e):tX(e)};var iX=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var aX=function(e){if(!iX(e))return!1;var t=rX(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},oX=YW["__core-js_shared__"],sX=function(){var e=/[^.]+$/.exec(oX&&oX.keys&&oX.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var lX=function(e){return!!sX&&sX in e},uX=Function.prototype.toString;var cX=function(e){if(null!=e){try{return uX.call(e)}catch(Qp){}try{return e+""}catch(Qp){}}return""},hX=/^\[object .+?Constructor\]$/,dX=Function.prototype,fX=Object.prototype,pX=dX.toString,vX=fX.hasOwnProperty,mX=RegExp("^"+pX.call(vX).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var gX=function(e){return!(!iX(e)||lX(e))&&(aX(e)?mX:hX).test(cX(e))};var yX=function(e,t){return null==e?void 0:e[t]};var bX=function(e,t){var n=yX(e,t);return gX(n)?n:void 0},_X=bX(YW,"Map"),xX=bX(Object,"create");var EX=function(){this.__data__=xX?xX(null):{},this.size=0};var wX=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},TX=Object.prototype.hasOwnProperty;var SX=function(e){var t=this.__data__;if(xX){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return TX.call(t,e)?t[e]:void 0},kX=Object.prototype.hasOwnProperty;var CX=function(e){var t=this.__data__;return xX?void 0!==t[e]:kX.call(t,e)};var AX=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=xX&&void 0===t?"__lodash_hash_undefined__":t,this};function IX(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}IX.prototype.clear=EX,IX.prototype.delete=wX,IX.prototype.get=SX,IX.prototype.has=CX,IX.prototype.set=AX;var OX=IX;var PX=function(){this.size=0,this.__data__={hash:new OX,map:new(_X||HW),string:new OX}};var MX=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var RX=function(e,t){var n=e.__data__;return MX(t)?n["string"==typeof t?"string":"hash"]:n.map};var NX=function(e){var t=RX(this,e).delete(e);return this.size-=t?1:0,t};var DX=function(e){return RX(this,e).get(e)};var LX=function(e){return RX(this,e).has(e)};var FX=function(e,t){var n=RX(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function BX(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}BX.prototype.clear=PX,BX.prototype.delete=NX,BX.prototype.get=DX,BX.prototype.has=LX,BX.prototype.set=FX;var UX=BX;var HX=function(e,t){var n=this.__data__;if(n instanceof HW){var r=n.__data__;if(!_X||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new UX(r)}return n.set(e,t),this.size=n.size,this};function jX(e){var t=this.__data__=new HW(e);this.size=t.size}jX.prototype.clear=jW,jX.prototype.delete=zW,jX.prototype.get=VW,jX.prototype.has=GW,jX.prototype.set=HX;var zX=jX,VX=function(){try{var e=bX(Object,"defineProperty");return e({},"",{}),e}catch(Qp){}}();var GX=function(e,t,n){"__proto__"==t&&VX?VX(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var WX=function(e,t,n){(void 0!==n&&!MW(e[t],n)||void 0===n&&!(t in e))&&GX(e,t,n)};var XX=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}},YX=XX(),KX="object"==typeof exports&&exports&&!exports.nodeType&&exports,qX=KX&&"object"==typeof module&&module&&!module.nodeType&&module,$X=qX&&qX.exports===KX?YW.Buffer:void 0,ZX=$X?$X.allocUnsafe:void 0;var QX=function(e,t){if(t)return e.slice();var n=e.length,r=ZX?ZX(n):new e.constructor(n);return e.copy(r),r},JX=YW.Uint8Array;var eY=function(e){var t=new e.constructor(e.byteLength);return new JX(t).set(new JX(e)),t};var tY=function(e,t){var n=t?eY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var nY=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},rY=Object.create,iY=function(){function e(){}return function(t){if(!iX(t))return{};if(rY)return rY(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),aY=iY;var oY=function(e,t){return function(n){return e(t(n))}},sY=oY(Object.getPrototypeOf,Object),lY=Object.prototype;var uY=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lY)};var cY=function(e){return"function"!=typeof e.constructor||uY(e)?{}:aY(sY(e))};var hY=function(e){return null!=e&&"object"==typeof e};var dY=function(e){return hY(e)&&"[object Arguments]"==rX(e)},fY=Object.prototype,pY=fY.hasOwnProperty,vY=fY.propertyIsEnumerable,mY=dY(function(){return arguments}())?dY:function(e){return hY(e)&&pY.call(e,"callee")&&!vY.call(e,"callee")},gY=mY,yY=Array.isArray;var bY=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var _Y=function(e){return null!=e&&bY(e.length)&&!aX(e)};var xY=function(e){return hY(e)&&_Y(e)};var EY=function(){return!1},wY="object"==typeof exports&&exports&&!exports.nodeType&&exports,TY=wY&&"object"==typeof module&&module&&!module.nodeType&&module,SY=TY&&TY.exports===wY?YW.Buffer:void 0,kY=(SY?SY.isBuffer:void 0)||EY,CY=Function.prototype,AY=Object.prototype,IY=CY.toString,OY=AY.hasOwnProperty,PY=IY.call(Object);var MY=function(e){if(!hY(e)||"[object Object]"!=rX(e))return!1;var t=sY(e);if(null===t)return!0;var n=OY.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&IY.call(n)==PY},RY={};RY["[object Float32Array]"]=RY["[object Float64Array]"]=RY["[object Int8Array]"]=RY["[object Int16Array]"]=RY["[object Int32Array]"]=RY["[object Uint8Array]"]=RY["[object Uint8ClampedArray]"]=RY["[object Uint16Array]"]=RY["[object Uint32Array]"]=!0,RY["[object Arguments]"]=RY["[object Array]"]=RY["[object ArrayBuffer]"]=RY["[object Boolean]"]=RY["[object DataView]"]=RY["[object Date]"]=RY["[object Error]"]=RY["[object Function]"]=RY["[object Map]"]=RY["[object Number]"]=RY["[object Object]"]=RY["[object RegExp]"]=RY["[object Set]"]=RY["[object String]"]=RY["[object WeakMap]"]=!1;var NY=function(e){return hY(e)&&bY(e.length)&&!!RY[rX(e)]};var DY=function(e){return function(t){return e(t)}},LY="object"==typeof exports&&exports&&!exports.nodeType&&exports,FY=LY&&"object"==typeof module&&module&&!module.nodeType&&module,BY=FY&&FY.exports===LY&&WW.process,UY=function(){try{var e=FY&&FY.require&&FY.require("util").types;return e||BY&&BY.binding&&BY.binding("util")}catch(Qp){}}(),HY=UY&&UY.isTypedArray,jY=HY?DY(HY):NY;var zY=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]},VY=Object.prototype.hasOwnProperty;var GY=function(e,t,n){var r=e[t];VY.call(e,t)&&MW(r,n)&&(void 0!==n||t in e)||GX(e,t,n)};var WY=function(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?GX(n,s,l):GY(n,s,l)}return n};var XY=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},YY=/^(?:0|[1-9]\d*)$/;var KY=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&YY.test(e))&&e>-1&&e%1==0&&e<t},qY=Object.prototype.hasOwnProperty;var $Y=function(e,t){var n=yY(e),r=!n&&gY(e),i=!n&&!r&&kY(e),a=!n&&!r&&!i&&jY(e),o=n||r||i||a,s=o?XY(e.length,String):[],l=s.length;for(var u in e)!t&&!qY.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||KY(u,l))||s.push(u);return s};var ZY=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},QY=Object.prototype.hasOwnProperty;var JY=function(e){if(!iX(e))return ZY(e);var t=uY(e),n=[];for(var r in e)("constructor"!=r||!t&&QY.call(e,r))&&n.push(r);return n};var eK=function(e){return _Y(e)?$Y(e,!0):JY(e)};var tK=function(e){return WY(e,eK(e))};var nK=function(e,t,n,r,i,a,o){var s=zY(e,n),l=zY(t,n),u=o.get(l);if(u)WX(e,n,u);else{var c=a?a(s,l,n+"",e,t,o):void 0,h=void 0===c;if(h){var d=yY(l),f=!d&&kY(l),p=!d&&!f&&jY(l);c=l,d||f||p?yY(s)?c=s:xY(s)?c=nY(s):f?(h=!1,c=QX(l,!0)):p?(h=!1,c=tY(l,!0)):c=[]:MY(l)||gY(l)?(c=s,gY(s)?c=tK(s):iX(s)&&!aX(s)||(c=cY(l))):h=!1}h&&(o.set(l,c),i(c,l,r,a,o),o.delete(l)),WX(e,n,c)}};var rK=function e(t,n,r,i,a){t!==n&&YX(n,(function(o,s){if(a||(a=new zX),iX(o))nK(t,n,s,r,e,i,a);else{var l=i?i(zY(t,s),o,s+"",t,n,a):void 0;void 0===l&&(l=o),WX(t,s,l)}}),eK)};var iK=function(e){return e};var aK=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},oK=Math.max;var sK=function(e,t,n){return t=oK(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=oK(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(o),aK(e,this,s)}};var lK=function(e){return function(){return e}},uK=VX?function(e,t){return VX(e,"toString",{configurable:!0,enumerable:!1,value:lK(t),writable:!0})}:iK,cK=uK,hK=Date.now;var dK=function(e){var t=0,n=0;return function(){var r=hK(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},fK=dK(cK);var pK=function(e,t){return fK(sK(e,t,iK),e+"")};var vK=function(e,t,n){if(!iX(n))return!1;var r=typeof t;return!!("number"==r?_Y(n)&&KY(t,n.length):"string"==r&&t in n)&&MW(n[t],e)};var mK=function(e){return pK((function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(a=e.length>3&&"function"==typeof a?(i--,a):void 0,o&&vK(n[0],n[1],o)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t}))},gK=mK((function(e,t,n){rK(e,t,n)})),yK=gK,bK=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,o=e.styles,s=void 0===o?{}:o,l=(0,uW.ZP)(yK({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===t});return a.createElement("div",{style:l.wrap},a.createElement("div",{style:l.bg}),a.createElement("div",{style:l.content},i))};bK.propTypes={background:OW().string,zDepth:OW().oneOf([0,1,2,3,4,5]),radius:OW().number,styles:OW().object},bK.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var _K=bK,xK=function(){return YW.Date.now()},EK=/\s/;var wK=function(e){for(var t=e.length;t--&&EK.test(e.charAt(t)););return t},TK=/^\s+/;var SK=function(e){return e?e.slice(0,wK(e)+1).replace(TK,""):e};var kK=function(e){return"symbol"==typeof e||hY(e)&&"[object Symbol]"==rX(e)},CK=/^[-+]0x[0-9a-f]+$/i,AK=/^0b[01]+$/i,IK=/^0o[0-7]+$/i,OK=parseInt;var PK=function(e){if("number"==typeof e)return e;if(kK(e))return NaN;if(iX(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=iX(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=SK(e);var n=AK.test(e);return n||IK.test(e)?OK(e.slice(2),n?2:8):CK.test(e)?NaN:+e},MK=Math.max,RK=Math.min;var NK=function(e,t,n){var r,i,a,o,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,a=i;return r=i=void 0,u=t,o=e.apply(a,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-u>=a}function v(){var e=xK();if(p(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return h?RK(n,a-(e-u)):n}(e))}function m(e){return s=void 0,d&&r?f(e):(r=i=void 0,o)}function g(){var e=xK(),n=p(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?f(e):o}(l);if(h)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),o}return t=PK(t)||0,iX(n)&&(c=!!n.leading,a=(h="maxWait"in n)?MK(PK(n.maxWait)||0,t):a,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},g.flush=function(){return void 0===s?o:m(xK())},g};var DK=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return iX(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),NK(e,t,{leading:r,maxWait:t,trailing:i})},LK=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var FK=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"===typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,a=r.height,o="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=o-(n.getBoundingClientRect().left+window.pageXOffset),u=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),u<0?u=0:u>a&&(u=a);var c=l/i,h=1-u/a;return{h:t.h,s:c,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=DK((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),LK(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,o=t.pointer,s=t.circle,l=(0,uW.ZP)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:o,circle:s}},{custom:!!this.props.style});return a.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.createElement("div",{style:l.white,className:"saturation-white"},a.createElement("div",{style:l.black,className:"saturation-black"}),a.createElement("div",{style:l.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:l.circle}))))}}]),t}(a.PureComponent||a.Component),BK=FK;var UK=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},HK=oY(Object.keys,Object),jK=Object.prototype.hasOwnProperty;var zK=function(e){if(!uY(e))return HK(e);var t=[];for(var n in Object(e))jK.call(e,n)&&"constructor"!=n&&t.push(n);return t};var VK=function(e){return _Y(e)?$Y(e):zK(e)};var GK=function(e,t){return e&&YX(e,t,VK)};var WK=function(e,t){return function(n,r){if(null==n)return n;if(!_Y(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}},XK=WK(GK);var YK=function(e){return"function"==typeof e?e:iK};var KK=function(e,t){return(yY(e)?UK:XK)(e,YK(t))};function qK(e){return qK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qK(e)}var $K=/^\s+/,ZK=/\s+$/;function QK(e,t){if(t=t||{},(e=e||"")instanceof QK)return e;if(!(this instanceof QK))return new QK(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,a=null,o=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace($K,"").replace(ZK,"").toLowerCase();var t,n=!1;if(vq[e])e=vq[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=Sq.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=Sq.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=Sq.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=Sq.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=Sq.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=Sq.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=Sq.hex8.exec(e))return{r:_q(t[1]),g:_q(t[2]),b:_q(t[3]),a:Tq(t[4]),format:n?"name":"hex8"};if(t=Sq.hex6.exec(e))return{r:_q(t[1]),g:_q(t[2]),b:_q(t[3]),format:n?"name":"hex"};if(t=Sq.hex4.exec(e))return{r:_q(t[1]+""+t[1]),g:_q(t[2]+""+t[2]),b:_q(t[3]+""+t[3]),a:Tq(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=Sq.hex3.exec(e))return{r:_q(t[1]+""+t[1]),g:_q(t[2]+""+t[2]),b:_q(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==qK(e)&&(kq(e.r)&&kq(e.g)&&kq(e.b)?(t=function(e,t,n){return{r:255*yq(e,255),g:255*yq(t,255),b:255*yq(n,255)}}(e.r,e.g,e.b),o=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):kq(e.h)&&kq(e.s)&&kq(e.v)?(r=Eq(e.s),i=Eq(e.v),t=function(e,t,n){e=6*yq(e,360),t=yq(t,100),n=yq(n,100);var r=Math.floor(e),i=e-r,a=n*(1-t),o=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,u=[n,o,a,a,s,n][l],c=[s,n,n,o,a,a][l],h=[a,a,s,n,n,o][l];return{r:255*u,g:255*c,b:255*h}}(e.h,r,i),o=!0,s="hsv"):kq(e.h)&&kq(e.s)&&kq(e.l)&&(r=Eq(e.s),a=Eq(e.l),t=function(e,t,n){var r,i,a;function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=yq(e,360),t=yq(t,100),n=yq(n,100),0===t)r=i=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=o(l,s,e+1/3),i=o(l,s,e),a=o(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*a}}(e.h,r,a),o=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=gq(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function JK(e,t,n){e=yq(e,255),t=yq(t,255),n=yq(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function eq(e,t,n){e=yq(e,255),t=yq(t,255),n=yq(n,255);var r,i,a=Math.max(e,t,n),o=Math.min(e,t,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function tq(e,t,n,r){var i=[xq(Math.round(e).toString(16)),xq(Math.round(t).toString(16)),xq(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function nq(e,t,n,r){return[xq(wq(r)),xq(Math.round(e).toString(16)),xq(Math.round(t).toString(16)),xq(Math.round(n).toString(16))].join("")}function rq(e,t){t=0===t?0:t||10;var n=QK(e).toHsl();return n.s-=t/100,n.s=bq(n.s),QK(n)}function iq(e,t){t=0===t?0:t||10;var n=QK(e).toHsl();return n.s+=t/100,n.s=bq(n.s),QK(n)}function aq(e){return QK(e).desaturate(100)}function oq(e,t){t=0===t?0:t||10;var n=QK(e).toHsl();return n.l+=t/100,n.l=bq(n.l),QK(n)}function sq(e,t){t=0===t?0:t||10;var n=QK(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),QK(n)}function lq(e,t){t=0===t?0:t||10;var n=QK(e).toHsl();return n.l-=t/100,n.l=bq(n.l),QK(n)}function uq(e,t){var n=QK(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,QK(n)}function cq(e){var t=QK(e).toHsl();return t.h=(t.h+180)%360,QK(t)}function hq(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=QK(e).toHsl(),r=[QK(e)],i=360/t,a=1;a<t;a++)r.push(QK({h:(n.h+a*i)%360,s:n.s,l:n.l}));return r}function dq(e){var t=QK(e).toHsl(),n=t.h;return[QK(e),QK({h:(n+72)%360,s:t.s,l:t.l}),QK({h:(n+216)%360,s:t.s,l:t.l})]}function fq(e,t,n){t=t||6,n=n||30;var r=QK(e).toHsl(),i=360/n,a=[QK(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,a.push(QK(r));return a}function pq(e,t){t=t||6;for(var n=QK(e).toHsv(),r=n.h,i=n.s,a=n.v,o=[],s=1/t;t--;)o.push(QK({h:r,s:i,v:a})),a=(a+s)%1;return o}QK.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=gq(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=eq(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=eq(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=JK(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=JK(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return tq(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var a=[xq(Math.round(e).toString(16)),xq(Math.round(t).toString(16)),xq(Math.round(n).toString(16)),xq(wq(r))];if(i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1))return a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0);return a.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*yq(this._r,255))+"%",g:Math.round(100*yq(this._g,255))+"%",b:Math.round(100*yq(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*yq(this._r,255))+"%, "+Math.round(100*yq(this._g,255))+"%, "+Math.round(100*yq(this._b,255))+"%)":"rgba("+Math.round(100*yq(this._r,255))+"%, "+Math.round(100*yq(this._g,255))+"%, "+Math.round(100*yq(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(mq[tq(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+nq(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=QK(e);n="#"+nq(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return QK(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(oq,arguments)},brighten:function(){return this._applyModification(sq,arguments)},darken:function(){return this._applyModification(lq,arguments)},desaturate:function(){return this._applyModification(rq,arguments)},saturate:function(){return this._applyModification(iq,arguments)},greyscale:function(){return this._applyModification(aq,arguments)},spin:function(){return this._applyModification(uq,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(fq,arguments)},complement:function(){return this._applyCombination(cq,arguments)},monochromatic:function(){return this._applyCombination(pq,arguments)},splitcomplement:function(){return this._applyCombination(dq,arguments)},triad:function(){return this._applyCombination(hq,[3])},tetrad:function(){return this._applyCombination(hq,[4])}},QK.fromRatio=function(e,t){if("object"==qK(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:Eq(e[r]));e=n}return QK(e,t)},QK.equals=function(e,t){return!(!e||!t)&&QK(e).toRgbString()==QK(t).toRgbString()},QK.random=function(){return QK.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},QK.mix=function(e,t,n){n=0===n?0:n||50;var r=QK(e).toRgb(),i=QK(t).toRgb(),a=n/100;return QK({r:(i.r-r.r)*a+r.r,g:(i.g-r.g)*a+r.g,b:(i.b-r.b)*a+r.b,a:(i.a-r.a)*a+r.a})},QK.readability=function(e,t){var n=QK(e),r=QK(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},QK.isReadable=function(e,t,n){var r,i,a=QK.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=a>=4.5;break;case"AAlarge":i=a>=3;break;case"AAAsmall":i=a>=7}return i},QK.mostReadable=function(e,t,n){var r,i,a,o,s=null,l=0;i=(n=n||{}).includeFallbackColors,a=n.level,o=n.size;for(var u=0;u<t.length;u++)(r=QK.readability(e,t[u]))>l&&(l=r,s=QK(t[u]));return QK.isReadable(e,s,{level:a,size:o})||!i?s:(n.includeFallbackColors=!1,QK.mostReadable(e,["#fff","#000"],n))};var vq=QK.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},mq=QK.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(vq);function gq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function yq(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function bq(e){return Math.min(1,Math.max(0,e))}function _q(e){return parseInt(e,16)}function xq(e){return 1==e.length?"0"+e:""+e}function Eq(e){return e<=1&&(e=100*e+"%"),e}function wq(e){return Math.round(255*parseFloat(e)).toString(16)}function Tq(e){return _q(e)/255}var Sq=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function kq(e){return!!Sq.CSS_UNIT.exec(e)}var Cq=function(e){var t=0,n=0;return KK(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},Aq=function(e,t){var n=e.hex?QK(e.hex):QK(e),r=n.toHsl(),i=n.toHsv(),a=n.toRgb(),o=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===o&&0===a.a?"transparent":"#"+o,rgb:a,hsv:i,oldHue:e.h||t||r.h,source:e.source}},Iq=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&QK(e).isValid()},Oq=function(e){if(!e)return"#fff";var t=Aq(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},Pq=function(e,t){return QK(t+" ("+e.replace("\xb0","")+")")._ok},Mq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rq=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Nq=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(Cq(e)){var r=Aq(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(Cq(e)){var r=Aq(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=Mq({},Aq(e.color,0)),t.debounce=NK((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),Rq(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),a.createElement(e,Mq({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return Mq({},Aq(e.color,t.oldHue))}}]),n}(a.PureComponent||a.Component);return t.propTypes=Mq({},e.propTypes),t.defaultProps=Mq({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},Dq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Lq=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Fq(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Bq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uq=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var i=arguments.length,a=Array(i),o=0;o<i;o++)a[o]=arguments[o];return t=n=Fq(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(a))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},Fq(n,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),Lq(r,[{key:"render",value:function(){return a.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},a.createElement(e,Dq({},this.props,this.state)))}}]),r}(a.Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,o=e.onHover,s=e.title,l=void 0===s?t:s,u=e.children,c=e.focus,h=e.focusStyle,d=void 0===h?{}:h,f="transparent"===t,p=(0,uW.ZP)({default:{swatch:Bq({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?d:{})}}),v={};return o&&(v.onMouseOver=function(e){return o(t,e)}),a.createElement("div",Bq({style:p.swatch,onClick:function(e){return i(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},v),u,f&&a.createElement(pW,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),Hq=function(e){var t=e.direction,n=(0,uW.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.createElement("div",{style:n.picker})},jq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zq=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,o=e.onChange,s=e.direction,l=e.style,u=e.renderers,c=e.pointer,h=e.className,d=void 0===h?"":h,f=(0,uW.ZP)({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:l}}});return a.createElement("div",{style:f.picker,className:"alpha-picker "+d},a.createElement(bW,jq({},f.alpha,{rgb:t,hsl:n,pointer:c,renderers:u,onChange:o,direction:s})))};zq.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:Hq};Nq(zq);var Vq=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Gq=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var Wq=function(e){return this.__data__.has(e)};function Xq(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new UX;++t<n;)this.add(e[t])}Xq.prototype.add=Xq.prototype.push=Gq,Xq.prototype.has=Wq;var Yq=Xq;var Kq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var qq=function(e,t){return e.has(t)};var $q=function(e,t,n,r,i,a){var o=1&n,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e),c=a.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&n?new Yq:void 0;for(a.set(e,t),a.set(t,e);++h<s;){var p=e[h],v=t[h];if(r)var m=o?r(v,p,h,t,e,a):r(p,v,h,e,t,a);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!Kq(t,(function(e,t){if(!qq(f,t)&&(p===e||i(p,e,n,r,a)))return f.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d};var Zq=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var Qq=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},Jq=KW?KW.prototype:void 0,e$=Jq?Jq.valueOf:void 0;var t$=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new JX(e),new JX(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return MW(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Zq;case"[object Set]":var l=1&r;if(s||(s=Qq),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=2,o.set(e,t);var c=$q(s(e),s(t),r,i,a,o);return o.delete(e),c;case"[object Symbol]":if(e$)return e$.call(e)==e$.call(t)}return!1};var n$=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};var r$=function(e,t,n){var r=t(e);return yY(e)?r:n$(r,n(e))};var i$=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var a$=function(){return[]},o$=Object.prototype.propertyIsEnumerable,s$=Object.getOwnPropertySymbols,l$=s$?function(e){return null==e?[]:(e=Object(e),i$(s$(e),(function(t){return o$.call(e,t)})))}:a$,u$=l$;var c$=function(e){return r$(e,VK,u$)},h$=Object.prototype.hasOwnProperty;var d$=function(e,t,n,r,i,a){var o=1&n,s=c$(e),l=s.length;if(l!=c$(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:h$.call(t,c)))return!1}var h=a.get(e),d=a.get(t);if(h&&d)return h==t&&d==e;var f=!0;a.set(e,t),a.set(t,e);for(var p=o;++u<l;){var v=e[c=s[u]],m=t[c];if(r)var g=o?r(m,v,c,t,e,a):r(v,m,c,e,t,a);if(!(void 0===g?v===m||i(v,m,n,r,a):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return a.delete(e),a.delete(t),f},f$=bX(YW,"DataView"),p$=bX(YW,"Promise"),v$=bX(YW,"Set"),m$=bX(YW,"WeakMap"),g$="[object Map]",y$="[object Promise]",b$="[object Set]",_$="[object WeakMap]",x$="[object DataView]",E$=cX(f$),w$=cX(_X),T$=cX(p$),S$=cX(v$),k$=cX(m$),C$=rX;(f$&&C$(new f$(new ArrayBuffer(1)))!=x$||_X&&C$(new _X)!=g$||p$&&C$(p$.resolve())!=y$||v$&&C$(new v$)!=b$||m$&&C$(new m$)!=_$)&&(C$=function(e){var t=rX(e),n="[object Object]"==t?e.constructor:void 0,r=n?cX(n):"";if(r)switch(r){case E$:return x$;case w$:return g$;case T$:return y$;case S$:return b$;case k$:return _$}return t});var A$=C$,I$="[object Arguments]",O$="[object Array]",P$="[object Object]",M$=Object.prototype.hasOwnProperty;var R$=function(e,t,n,r,i,a){var o=yY(e),s=yY(t),l=o?O$:A$(e),u=s?O$:A$(t),c=(l=l==I$?P$:l)==P$,h=(u=u==I$?P$:u)==P$,d=l==u;if(d&&kY(e)){if(!kY(t))return!1;o=!0,c=!1}if(d&&!c)return a||(a=new zX),o||jY(e)?$q(e,t,n,r,i,a):t$(e,t,l,n,r,i,a);if(!(1&n)){var f=c&&M$.call(e,"__wrapped__"),p=h&&M$.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return a||(a=new zX),i(v,m,n,r,a)}}return!!d&&(a||(a=new zX),d$(e,t,n,r,i,a))};var N$=function e(t,n,r,i,a){return t===n||(null==t||null==n||!hY(t)&&!hY(n)?t!==t&&n!==n:R$(t,n,r,i,e,a))};var D$=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){var l=(s=n[i])[0],u=e[l],c=s[1];if(o&&s[2]){if(void 0===u&&!(l in e))return!1}else{var h=new zX;if(r)var d=r(u,c,l,e,t,h);if(!(void 0===d?N$(c,u,3,r,h):d))return!1}}return!0};var L$=function(e){return e===e&&!iX(e)};var F$=function(e){for(var t=VK(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,L$(i)]}return t};var B$=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var U$=function(e){var t=F$(e);return 1==t.length&&t[0][2]?B$(t[0][0],t[0][1]):function(n){return n===e||D$(n,e,t)}},H$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j$=/^\w*$/;var z$=function(e,t){if(yY(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!kK(e))||(j$.test(e)||!H$.test(e)||null!=t&&e in Object(t))};function V$(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(V$.Cache||UX),n}V$.Cache=UX;var G$=V$;var W$=function(e){var t=G$(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},X$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Y$=/\\(\\)?/g,K$=W$((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(X$,(function(e,n,r,i){t.push(r?i.replace(Y$,"$1"):n||e)})),t})),q$=K$,$$=KW?KW.prototype:void 0,Z$=$$?$$.toString:void 0;var Q$=function e(t){if("string"==typeof t)return t;if(yY(t))return Vq(t,e)+"";if(kK(t))return Z$?Z$.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var J$=function(e){return null==e?"":Q$(e)};var eZ=function(e,t){return yY(e)?e:z$(e,t)?[e]:q$(J$(e))};var tZ=function(e){if("string"==typeof e||kK(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var nZ=function(e,t){for(var n=0,r=(t=eZ(t,e)).length;null!=e&&n<r;)e=e[tZ(t[n++])];return n&&n==r?e:void 0};var rZ=function(e,t,n){var r=null==e?void 0:nZ(e,t);return void 0===r?n:r};var iZ=function(e,t){return null!=e&&t in Object(e)};var aZ=function(e,t,n){for(var r=-1,i=(t=eZ(t,e)).length,a=!1;++r<i;){var o=tZ(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&bY(i)&&KY(o,i)&&(yY(e)||gY(e))};var oZ=function(e,t){return null!=e&&aZ(e,t,iZ)};var sZ=function(e,t){return z$(e)&&L$(t)?B$(tZ(e),t):function(n){var r=rZ(n,e);return void 0===r&&r===t?oZ(n,e):N$(t,r,3)}};var lZ=function(e){return function(t){return null==t?void 0:t[e]}};var uZ=function(e){return function(t){return nZ(t,e)}};var cZ=function(e){return z$(e)?lZ(tZ(e)):uZ(e)};var hZ=function(e){return"function"==typeof e?e:null==e?iK:"object"==typeof e?yY(e)?sZ(e[0],e[1]):U$(e):cZ(e)};var dZ=function(e,t){var n=-1,r=_Y(e)?Array(e.length):[];return XK(e,(function(e,i,a){r[++n]=t(e,i,a)})),r};var fZ=function(e,t){return(yY(e)?Vq:dZ)(e,hZ(t,3))},pZ=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=(0,uW.ZP)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return a.createElement("div",{style:i.swatches},fZ(t,(function(e){return a.createElement(Uq,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.createElement("div",{style:i.clear}))},vZ=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,s=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d="transparent"===r,f=function(e,n){Iq(e)&&t({hex:e,source:"hex"},n)},p=(0,uW.ZP)(yK({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:Oq(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":"hide"===s});return a.createElement("div",{style:p.card,className:"block-picker "+h},a.createElement("div",{style:p.triangle}),a.createElement("div",{style:p.head},d&&a.createElement(pW,{borderRadius:"6px 6px 0 0"}),a.createElement("div",{style:p.label},r)),a.createElement("div",{style:p.body},a.createElement(pZ,{colors:i,onClick:f,onSwatchHover:n}),a.createElement(TW,{style:{input:p.input},value:r,onChange:f})))};vZ.propTypes={width:OW().oneOfType([OW().string,OW().number]),colors:OW().arrayOf(OW().string),triangle:OW().oneOf(["top","hide"]),styles:OW().object},vZ.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};Nq(vZ);var mZ={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},gZ={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},yZ={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},bZ={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},_Z={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},xZ={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},EZ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},wZ={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},TZ={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},SZ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},kZ={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},CZ={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},AZ={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},IZ={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},OZ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},PZ={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},MZ={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},RZ={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},NZ=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,o=e.active,s=e.circleSize,l=e.circleSpacing,u=(0,uW.ZP)({default:{swatch:{width:s,height:s,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return a.createElement("div",{style:u.swatch},a.createElement(Uq,{style:u.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+t}}))};NZ.defaultProps={circleSize:28,circleSpacing:14};var DZ=(0,uW.tz)(NZ),LZ=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,s=e.circleSize,l=e.styles,u=void 0===l?{}:l,c=e.circleSpacing,h=e.className,d=void 0===h?"":h,f=(0,uW.ZP)(yK({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},u)),p=function(e,t){return n({hex:e,source:"hex"},t)};return a.createElement("div",{style:f.card,className:"circle-picker "+d},fZ(i,(function(e){return a.createElement(DZ,{key:e,color:e,onClick:p,onSwatchHover:r,active:o===e.toLowerCase(),circleSize:s,circleSpacing:c})})))};LZ.propTypes={width:OW().oneOfType([OW().string,OW().number]),circleSize:OW().number,circleSpacing:OW().number,styles:OW().object},LZ.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[mZ[500],gZ[500],yZ[500],bZ[500],_Z[500],xZ[500],EZ[500],wZ[500],TZ[500],SZ[500],kZ[500],CZ[500],AZ[500],IZ[500],OZ[500],PZ[500],MZ[500],RZ[500]],styles:{}};Nq(LZ);var FZ=function(e){return void 0===e},BZ=n(3050),UZ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var HZ=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?Iq(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"===typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"===typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(FZ(e.s)?n.props.hsl.s:e.s),l:Number(FZ(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),UZ(t,[{key:"render",value:function(){var e=this,t=(0,uW.ZP)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),a.createElement("div",{style:t.alpha},a.createElement(TW,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(TW,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),a.createElement("div",{style:t.alpha},a.createElement(TW,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),a.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,a.createElement("div",{style:t.toggle},a.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},a.createElement(BZ.Z,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(a.Component);HZ.defaultProps={view:"hex"};var jZ=HZ,zZ=function(){var e=(0,uW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.createElement("div",{style:e.picker})},VZ=function(){var e=(0,uW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return a.createElement("div",{style:e.picker})},GZ=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,o=e.hsl,s=e.hsv,l=e.hex,u=e.renderers,c=e.styles,h=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,p=e.defaultView,v=(0,uW.ZP)(yK({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:r});return a.createElement("div",{style:v.picker,className:"chrome-picker "+f},a.createElement("div",{style:v.saturation},a.createElement(BK,{style:v.Saturation,hsl:o,hsv:s,pointer:VZ,onChange:n})),a.createElement("div",{style:v.body},a.createElement("div",{style:v.controls,className:"flexbox-fix"},a.createElement("div",{style:v.color},a.createElement("div",{style:v.swatch},a.createElement("div",{style:v.active}),a.createElement(pW,{renderers:u}))),a.createElement("div",{style:v.toggles},a.createElement("div",{style:v.hue},a.createElement(AW,{style:v.Hue,hsl:o,pointer:zZ,onChange:n})),a.createElement("div",{style:v.alpha},a.createElement(bW,{style:v.Alpha,rgb:i,hsl:o,pointer:zZ,renderers:u,onChange:n})))),a.createElement(jZ,{rgb:i,hsl:o,hex:l,view:p,onChange:n,disableAlpha:r})))};GZ.propTypes={width:OW().oneOfType([OW().string,OW().number]),disableAlpha:OW().bool,styles:OW().object,defaultView:OW().oneOf(["hex","rgb","hsl"])},GZ.defaultProps={width:225,disableAlpha:!1,styles:{}};Nq(GZ);var WZ=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.active,s=(0,uW.ZP)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:Oq(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.createElement(Uq,{style:s.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},a.createElement("div",{style:s.dot}))},XZ=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=(0,uW.ZP)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return a.createElement("div",{style:i.fields,className:"flexbox-fix"},a.createElement("div",{style:i.active}),a.createElement(TW,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),a.createElement(TW,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),a.createElement(TW,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),a.createElement(TW,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))},YZ=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,o=e.rgb,s=e.styles,l=void 0===s?{}:s,u=e.className,c=void 0===u?"":u,h=(0,uW.ZP)(yK({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(e,n){e.hex?Iq(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return a.createElement(_K,{style:h.Compact,styles:l},a.createElement("div",{style:h.compact,className:"compact-picker "+c},a.createElement("div",null,fZ(r,(function(e){return a.createElement(WZ,{key:e,color:e,active:e.toLowerCase()===i,onClick:d,onSwatchHover:n})})),a.createElement("div",{style:h.clear})),a.createElement(XZ,{hex:i,rgb:o,onChange:d})))};YZ.propTypes={colors:OW().arrayOf(OW().string),styles:OW().object},YZ.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};Nq(YZ);var KZ=(0,uW.tz)((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,uW.ZP)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return a.createElement("div",{style:s.swatch},a.createElement(Uq,{color:n,onClick:r,onHover:i,focusStyle:o}))})),qZ=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,o=e.triangle,s=e.styles,l=void 0===s?{}:s,u=e.className,c=void 0===u?"":u,h=(0,uW.ZP)(yK({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o,"bottom-left-triangle":"bottom-left"===o,"bottom-right-triangle":"bottom-right"===o}),d=function(e,t){return r({hex:e,source:"hex"},t)};return a.createElement("div",{style:h.card,className:"github-picker "+c},a.createElement("div",{style:h.triangleShadow}),a.createElement("div",{style:h.triangle}),fZ(n,(function(e){return a.createElement(KZ,{color:e,key:e,onClick:d,onSwatchHover:i})})))};qZ.propTypes={width:OW().oneOfType([OW().string,OW().number]),colors:OW().arrayOf(OW().string),triangle:OW().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:OW().object},qZ.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};Nq(qZ);var $Z=function(e){var t=e.direction,n=(0,uW.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.createElement("div",{style:n.picker})},ZZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},QZ=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,o=e.direction,s=e.pointer,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,uW.ZP)(yK({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},u));return a.createElement("div",{style:d.picker,className:"hue-picker "+h},a.createElement(AW,ZZ({},d.hue,{hsl:i,pointer:s,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:o})))};QZ.propTypes={styles:OW().object},QZ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:$Z,styles:{}};Nq(QZ),Nq((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,o=void 0===i?{}:i,s=e.className,l=void 0===s?"":s,u=(0,uW.ZP)(yK({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(e,n){e.hex?Iq(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return a.createElement(_K,{styles:o},a.createElement("div",{style:u.material,className:"material-picker "+l},a.createElement(TW,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:c}),a.createElement("div",{style:u.split,className:"flexbox-fix"},a.createElement("div",{style:u.third},a.createElement(TW,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:r.r,onChange:c})),a.createElement("div",{style:u.third},a.createElement(TW,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:r.g,onChange:c})),a.createElement("div",{style:u.third},a.createElement(TW,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:r.b,onChange:c})))))}));var JZ=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,o=(0,uW.ZP)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,i){e["#"]?Iq(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return a.createElement("div",{style:o.fields},a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),a.createElement("div",{style:o.divider}),a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:s}),a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:s}),a.createElement(TW,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:s}),a.createElement("div",{style:o.divider}),a.createElement(TW,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:s}),a.createElement("div",{style:o.fieldSymbols},a.createElement("div",{style:o.symbol},"\xb0"),a.createElement("div",{style:o.symbol},"%"),a.createElement("div",{style:o.symbol},"%")))},eQ=function(e){var t=e.hsl,n=(0,uW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return a.createElement("div",{style:n.picker})},tQ=function(){var e=(0,uW.ZP)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return a.createElement("div",{style:e.pointer},a.createElement("div",{style:e.left},a.createElement("div",{style:e.leftInside})),a.createElement("div",{style:e.right},a.createElement("div",{style:e.rightInside})))},nQ=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,o=(0,uW.ZP)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return a.createElement("div",{style:o.button,onClick:t},n||r)},rQ=function(e){var t=e.rgb,n=e.currentColor,r=(0,uW.ZP)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return a.createElement("div",null,a.createElement("div",{style:r.label},"new"),a.createElement("div",{style:r.swatches},a.createElement("div",{style:r.new}),a.createElement("div",{style:r.current})),a.createElement("div",{style:r.label},"current"))},iQ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var aQ=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),iQ(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,o=(0,uW.ZP)(yK({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return a.createElement("div",{style:o.picker,className:"photoshop-picker "+i},a.createElement("div",{style:o.head},this.props.header),a.createElement("div",{style:o.body,className:"flexbox-fix"},a.createElement("div",{style:o.saturation},a.createElement(BK,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:eQ,onChange:this.props.onChange})),a.createElement("div",{style:o.hue},a.createElement(AW,{direction:"vertical",hsl:this.props.hsl,pointer:tQ,onChange:this.props.onChange})),a.createElement("div",{style:o.controls},a.createElement("div",{style:o.top,className:"flexbox-fix"},a.createElement("div",{style:o.previews},a.createElement(rQ,{rgb:this.props.rgb,currentColor:this.state.currentColor})),a.createElement("div",{style:o.actions},a.createElement(nQ,{label:"OK",onClick:this.props.onAccept,active:!0}),a.createElement(nQ,{label:"Cancel",onClick:this.props.onCancel}),a.createElement(JZ,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(a.Component);aQ.propTypes={header:OW().string,styles:OW().object},aQ.defaultProps={header:"Color Picker",styles:{}};Nq(aQ);var oQ=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.disableAlpha,s=(0,uW.ZP)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(e,i){e.hex?Iq(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return a.createElement("div",{style:s.fields,className:"flexbox-fix"},a.createElement("div",{style:s.double},a.createElement(TW,{style:{input:s.input,label:s.label},label:"hex",value:i.replace("#",""),onChange:l})),a.createElement("div",{style:s.single},a.createElement(TW,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.single},a.createElement(TW,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.single},a.createElement(TW,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.alpha},a.createElement(TW,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))},sQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lQ=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=(0,uW.ZP)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){r({hex:e,source:"hex"},t)};return a.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map((function(e){var t="string"===typeof e?{color:e}:e,n=""+t.color+(t.title||"");return a.createElement("div",{key:n,style:o.swatchWrap},a.createElement(Uq,sQ({},t,{style:o.swatch,onClick:s,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};lQ.propTypes={colors:OW().arrayOf(OW().oneOfType([OW().string,OW().shape({color:OW().string,title:OW().string})])).isRequired};var uQ=lQ,cQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hQ=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,o=e.hsl,s=e.onChange,l=e.onSwatchHover,u=e.disableAlpha,c=e.presetColors,h=e.renderers,d=e.styles,f=void 0===d?{}:d,p=e.className,v=void 0===p?"":p,m=(0,uW.ZP)(yK({default:cQ({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:u});return a.createElement("div",{style:m.picker,className:"sketch-picker "+v},a.createElement("div",{style:m.saturation},a.createElement(BK,{style:m.Saturation,hsl:o,hsv:i,onChange:s})),a.createElement("div",{style:m.controls,className:"flexbox-fix"},a.createElement("div",{style:m.sliders},a.createElement("div",{style:m.hue},a.createElement(AW,{style:m.Hue,hsl:o,onChange:s})),a.createElement("div",{style:m.alpha},a.createElement(bW,{style:m.Alpha,rgb:n,hsl:o,renderers:h,onChange:s}))),a.createElement("div",{style:m.color},a.createElement(pW,null),a.createElement("div",{style:m.activeColor}))),a.createElement(oQ,{rgb:n,hsl:o,hex:r,onChange:s,disableAlpha:u}),a.createElement(uQ,{colors:c,onClick:s,onSwatchHover:l}))};hQ.propTypes={disableAlpha:OW().bool,width:OW().oneOfType([OW().string,OW().number]),styles:OW().object},hQ.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var dQ=Nq(hQ),fQ=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,o=e.active,s=e.first,l=e.last,u=(0,uW.ZP)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:s,last:l});return a.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},pQ=function(e){var t=e.onClick,n=e.hsl,r=(0,uW.ZP)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return a.createElement("div",{style:r.swatches},a.createElement("div",{style:r.swatch},a.createElement(fQ,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),a.createElement("div",{style:r.swatch},a.createElement(fQ,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(fQ,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(fQ,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(fQ,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),a.createElement("div",{style:r.clear}))},vQ=function(){var e=(0,uW.ZP)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.createElement("div",{style:e.picker})},mQ=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,o=void 0===i?{}:i,s=e.className,l=void 0===s?"":s,u=(0,uW.ZP)(yK({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return a.createElement("div",{style:u.wrap||{},className:"slider-picker "+l},a.createElement("div",{style:u.hue},a.createElement(AW,{style:u.Hue,hsl:t,pointer:r,onChange:n})),a.createElement("div",{style:u.swatches},a.createElement(pQ,{hsl:t,onClick:n})))};mQ.propTypes={styles:OW().object},mQ.defaultProps={pointer:vQ,styles:{}};Nq(mQ);var gQ=n(9932),yQ=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.first,s=e.last,l=e.active,u=(0,uW.ZP)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:Oq(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:s,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.createElement(Uq,{color:t,style:u.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},a.createElement("div",{style:u.check},a.createElement(gQ.Z,null)))},bQ=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,o=(0,uW.ZP)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return a.createElement("div",{style:o.group},fZ(r,(function(e,o){return a.createElement(yQ,{key:e,color:e,active:e.toLowerCase()===i,first:0===o,last:o===r.length-1,onClick:t,onSwatchHover:n})})))},_Q=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,o=e.colors,s=e.hex,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,uW.ZP)(yK({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},u)),f=function(e,t){return r({hex:e,source:"hex"},t)};return a.createElement("div",{style:d.picker,className:"swatches-picker "+h},a.createElement(_K,null,a.createElement("div",{style:d.overflow},a.createElement("div",{style:d.body},fZ(o,(function(e){return a.createElement(bQ,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:i})})),a.createElement("div",{style:d.clear})))))};_Q.propTypes={width:OW().oneOfType([OW().string,OW().number]),height:OW().oneOfType([OW().string,OW().number]),colors:OW().arrayOf(OW().arrayOf(OW().string)),styles:OW().object},_Q.defaultProps={width:320,height:240,colors:[[mZ[900],mZ[700],mZ[500],mZ[300],mZ[100]],[gZ[900],gZ[700],gZ[500],gZ[300],gZ[100]],[yZ[900],yZ[700],yZ[500],yZ[300],yZ[100]],[bZ[900],bZ[700],bZ[500],bZ[300],bZ[100]],[_Z[900],_Z[700],_Z[500],_Z[300],_Z[100]],[xZ[900],xZ[700],xZ[500],xZ[300],xZ[100]],[EZ[900],EZ[700],EZ[500],EZ[300],EZ[100]],[wZ[900],wZ[700],wZ[500],wZ[300],wZ[100]],[TZ[900],TZ[700],TZ[500],TZ[300],TZ[100]],["#194D33",SZ[700],SZ[500],SZ[300],SZ[100]],[kZ[900],kZ[700],kZ[500],kZ[300],kZ[100]],[CZ[900],CZ[700],CZ[500],CZ[300],CZ[100]],[AZ[900],AZ[700],AZ[500],AZ[300],AZ[100]],[IZ[900],IZ[700],IZ[500],IZ[300],IZ[100]],[OZ[900],OZ[700],OZ[500],OZ[300],OZ[100]],[PZ[900],PZ[700],PZ[500],PZ[300],PZ[100]],[MZ[900],MZ[700],MZ[500],MZ[300],MZ[100]],[RZ[900],RZ[700],RZ[500],RZ[300],RZ[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};Nq(_Q);var xQ=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,s=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,uW.ZP)(yK({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},u),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){Iq(e)&&t({hex:e,source:"hex"},n)};return a.createElement("div",{style:d.card,className:"twitter-picker "+h},a.createElement("div",{style:d.triangleShadow}),a.createElement("div",{style:d.triangle}),a.createElement("div",{style:d.body},fZ(i,(function(e,t){return a.createElement(Uq,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.createElement("div",{style:d.hash},"#"),a.createElement(TW,{label:null,style:{input:d.input},value:r.replace("#",""),onChange:f}),a.createElement("div",{style:d.clear})))};xQ.propTypes={width:OW().oneOfType([OW().string,OW().number]),triangle:OW().oneOf(["hide","top-left","top-right"]),colors:OW().arrayOf(OW().string),styles:OW().object},xQ.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};Nq(xQ);var EQ=function(e){var t=(0,uW.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return a.createElement("div",{style:t.picker})};EQ.propTypes={hsl:OW().shape({h:OW().number,s:OW().number,l:OW().number,a:OW().number})},EQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var wQ=EQ,TQ=function(e){var t=(0,uW.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return a.createElement("div",{style:t.picker})};TQ.propTypes={hsl:OW().shape({h:OW().number,s:OW().number,l:OW().number,a:OW().number})},TQ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var SQ=TQ,kQ=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.hsv,s=function(e,n){if(e.hex)Iq(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");Pq(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");Pq(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var a=e.hsl.split(",");Pq(e.hsl,"hsl")&&(a[2]=a[2].replace("%",""),a[1]=a[1].replace("%",""),a[0]=a[0].replace("\xb0",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(a[0]),s:Number(a[1]),v:Number(a[2]),source:"hsl"},n))}},l=(0,uW.ZP)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),u=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(o.h)+"\xb0, "+Math.round(100*o.s)+"%, "+Math.round(100*o.v)+"%";return a.createElement("div",{style:l.wrap,className:"flexbox-fix"},a.createElement("div",{style:l.fields},a.createElement("div",{style:l.double},a.createElement(TW,{style:{input:l.input,label:l.label},label:"hex",value:i,onChange:s})),a.createElement("div",{style:l.column},a.createElement("div",{style:l.single},a.createElement(TW,{style:{input:l.input2,label:l.label2},label:"rgb",value:u,onChange:s})),a.createElement("div",{style:l.single},a.createElement(TW,{style:{input:l.input2,label:l.label2},label:"hsv",value:h,onChange:s})),a.createElement("div",{style:l.single},a.createElement(TW,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:s})))))},CQ=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,o=e.hsv,s=e.hex,l=e.header,u=e.styles,c=void 0===u?{}:u,h=e.className,d=void 0===h?"":h,f=(0,uW.ZP)(yK({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return a.createElement("div",{style:f.picker,className:"google-picker "+d},a.createElement("div",{style:f.head},l),a.createElement("div",{style:f.swatch}),a.createElement("div",{style:f.saturation},a.createElement(BK,{hsl:i,hsv:o,pointer:wQ,onChange:n})),a.createElement("div",{style:f.body},a.createElement("div",{style:f.controls,className:"flexbox-fix"},a.createElement("div",{style:f.hue},a.createElement(AW,{style:f.Hue,hsl:i,radius:"4px",pointer:SQ,onChange:n}))),a.createElement(kQ,{rgb:r,hsl:i,hex:s,hsv:o,onChange:n})))};CQ.propTypes={width:OW().oneOfType([OW().string,OW().number]),styles:OW().object,header:OW().string},CQ.defaultProps={width:652,styles:{},header:"Color picker"};Nq(CQ);var AQ=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.firstChange=!0,r.changed=!1,r.onClick=function(e){r.setState({showPicker:!r.state.showPicker})},r.onClose=function(e){r.setState({showPicker:!1}),r.changed&&r.props.continuousEndCallback&&r.props.continuousEndCallback("color"),r.firstChange=!0,r.changed=!1},r.onChangeComplete=function(e){},r.onChange=function(e){if(r.firstChange)return r.props.continuousStartCallback&&r.props.continuousStartCallback("color"),void(r.firstChange=!1);var t=Lf.changeRGB2Color([e.rgb.r,e.rgb.g,e.rgb.b]),n=(Lf.getColorString(t),r.props),i=n.value,a=n.onChange;i!==t&&a&&(a(t),r.changed=!0)},r.curValue=e.value,r.state={showPicker:!1,value:r.curValue,prevValue:r.curValue},r}return d(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this.state,t=e.showPicker,n=e.value;e.prevValue;void 0===n&&(n=0);var r=Lf.getColorString(n),i={backgroundColor:r};return(0,hf.jsxs)("div",{className:"color-input",children:[(0,hf.jsx)("div",{className:"color-input-swatch",onClick:this.onClick,children:(0,hf.jsx)("div",{className:"color-input-color",style:i})}),t?(0,hf.jsxs)("div",{className:"color-input-popover",children:[(0,hf.jsx)("div",{className:"color-input-cover",onClick:this.onClose}),(0,hf.jsx)(dQ,{color:r,onChange:this.onChange,onChangeComplete:this.onChangeComplete})]}):null]})}}]),n}(a.Component),IQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i._keydownHandler=void 0,i.refs=void 0,i.isMouseDown=!1,i.isMouseMoved=!1,i.isFocus=!1,i._mouseupHandler=i.onMouseUp.bind(m(i)),i._mousemoveHandler=i.onMouseMove.bind(m(i)),i._mousewheelHandler=i.onMouseWheel.bind(m(i)),i._keydownHandler=i.onKeyDown.bind(m(i)),i}return d(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){var t=isNaN(e)?"0":this.getRenderValue(e.toString()).toString();this.setState({value:t})}},{key:"continuous",get:function(){var e=this.props.continuous;return void 0===e&&(e=!0),e}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){return this.getFixNumber(e.value,e.fixed)}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue.toString()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e).toString();if(this.state.value!==t){this._invalid=!0;var n=this.getRenderValue(t).toString();this.setState({value:n})}}},{key:"render",value:function(){this._invalid=!1;var e=(this.props.width?this.props.width:50)+"px",t=this.state.value;this.props.multiMode&&(t=n.MULTI_DEFAULT_TEXT,null!=this.state.offValue&&""!==this.state.offValue&&(t=this.state.offValue));var r=this.props.disabled,i=this.isFocus?"text":"n-resize",a="property-input ";return this.props.className&&(a+=this.props.className),r&&(a="property-input disabled "+this.props.className),this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsx)("input",{className:a,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"})}):(0,hf.jsx)("input",{className:a,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"})}},{key:"onDrag",value:function(e){document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),e.preventDefault()}},{key:"onChange",value:function(e){if(!this.props.disabled){var t=e.target.value,n=!!(this.props&&this.props.fixed&&this.props.fixed>0),r=this.filterText(t,!n);if(r.value.toString()!==r.halfValue)this.setState({value:r.halfValue});else{var i=r.value;this.changeValue(i)}}}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"filterText",value:function(e,t){if(this.props.multiMode&&e===n.MULTI_DEFAULT_TEXT)return{value:NaN,halfValue:e};if(t){var r=new RegExp("[-]?[0-9]*"),i=e.match(r);if(null!=i){var a=i[0];return{value:"-"===a||""===a?NaN:this.getRenderValue(a),halfValue:a}}}else{var o=new RegExp("[-]?[0-9]+[.]?[0-9]*"),s=e.match(o);if(null!=s){var l=s[0];return{value:"-"===l||"."===l[l.length-1]||""===l?NaN:this.getRenderValue(l),halfValue:l}}if("-"===e||""===e)return{value:NaN,halfValue:e}}return{value:0,halfValue:"0"}}},{key:"addValue",value:function(e){isNaN(e)||this.props.onAdd&&this.props.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!isNaN(e)){e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue);var n=this.getRenderValue(e.toString()).toString();this.setState({value:n}),t&&this.props.onChange&&this.props.onChange(e)}}},{key:"onBlur",value:function(e){if(document.removeEventListener("keydown",this._keydownHandler),this.isFocus=!1,this.setState({}),!this.isMouseDown){var t=!!(this.props&&this.props.fixed&&this.props.fixed>0),n=this.filterText(e.target.value,!t).value||this.props.value;this.setState({value:n.toString()}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.props.onBlur&&this.props.onBlur(e)}}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.refs.numberInput&&this.refs.numberInput.blur()}},{key:"onFocus",value:function(e){document.addEventListener("keydown",this._keydownHandler),this.isMouseDown?this.refs.numberInput&&this.refs.numberInput.blur():(this.props.multiMode&&this.refs.numberInput.select(),this.props.onFocus&&this.props.onFocus(e),this.isFocus=!0,this.setState({}))}},{key:"onMouseWheel",value:function(e){e.wheelDelta>0?this.changeValue(this.props.value+this.step):this.changeValue(this.props.value-this.step)}},{key:"onMouseOver",value:function(e){this._over=!0,this.refs.numberInput.addEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseOut",value:function(e){this._over=!1,this.refs.numberInput.removeEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseDown",value:function(e){this.isFocus||this.props.disabled||(this.continuous&&this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._downX=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this._mousemoveHandler),document.addEventListener("mouseup",this._mouseupHandler))}},{key:"onMouseMove",value:function(e){if(0===this._downX)this._downX=e.clientY,this._downValue=this.getRenderValue(this.state.value);else{this.isMouseMoved=!0;var t=this.props.speedDuration||1,n=Math.ceil((e.clientY-this._downX)/t);if(this.props.dropReverse&&(n=-n),0!==(n*=this.step))if(this.props.multiMode){this.addValue(n);var r="";n>0?r="+"+n:n<0&&(r=n.toString()),this.setState({offValue:r})}else this.changeValue(this._downValue+n,this.continuous)}}},{key:"onMouseUp",value:function(e){var t=!1;!this.isMouseMoved&&this.isMouseDown&&(t=!0),this.isMouseDown=!1,this.isMouseMoved=!1,this.props.multiMode&&this.setState({offValue:""}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.continuous&&this.props.continuousEndCallback&&this.props.continuousEndCallback(),t&&this.refs.numberInput&&(this.refs.numberInput.focus(),this.refs.numberInput.select())}}]),n}(a.Component);IQ.defaultMax=Number.MAX_SAFE_INTEGER,IQ.defaultMin=Number.MIN_SAFE_INTEGER,IQ.MULTI_DEFAULT_TEXT="--";var OQ=function(e){return e[e.Print=0]="Print",e[e.Add=1]="Add",e[e.Added=2]="Added",e[e.Remove=3]="Remove",e[e.SetProperty=4]="SetProperty",e[e.Click=5]="Click",e[e.Express=6]="Express",e[e.IfGroup=7]="IfGroup",e[e.If=8]="If",e[e.ElseIf=9]="ElseIf",e[e.Else=10]="Else",e[e.DefineFunction=11]="DefineFunction",e[e.CallFunction=12]="CallFunction",e[e.AddEventListener=13]="AddEventListener",e[e.RemoveEventListener=14]="RemoveEventListener",e[e.EmitEvent=15]="EmitEvent",e[e.PlaySound=16]="PlaySound",e[e.PlayAnimation=17]="PlayAnimation",e[e.JumpToNextScene=18]="JumpToNextScene",e[e.JumpToPrevScene=19]="JumpToPrevScene",e[e.JumpToScene=20]="JumpToScene",e[e.ArrayInit=21]="ArrayInit",e[e.ArrayPop=22]="ArrayPop",e[e.ArrayPush=23]="ArrayPush",e[e.ArraySplice=24]="ArraySplice",e[e.ArrayRandom=25]="ArrayRandom",e[e.ArrayConcat=26]="ArrayConcat",e[e.ArrayShift=27]="ArrayShift",e[e.ArrayUnshift=28]="ArrayUnshift",e[e.AddEventListenerCall=29]="AddEventListenerCall",e[e.CallProtoFunction=30]="CallProtoFunction",e[e.GotoPlay=31]="GotoPlay",e[e.GotoStop=32]="GotoStop",e[e.PauseSound=33]="PauseSound",e[e.ResumeSound=34]="ResumeSound",e[e.Comment=35]="Comment",e[e.ActionList=36]="ActionList",e[e.DefineVariable=37]="DefineVariable",e[e.For=38]="For",e[e.Break=39]="Break",e[e.Wait=40]="Wait",e[e.SetTimeout=41]="SetTimeout",e[e.SetInterval=42]="SetInterval",e[e.EnterFrame=43]="EnterFrame",e[e.EnterFrameCall=44]="EnterFrameCall",e[e.StopAnimation=45]="StopAnimation",e[e.StopAllSound=46]="StopAllSound",e}({}),PQ=function(e){return e[e.CONST=0]="CONST",e[e.VARIABLE=1]="VARIABLE",e[e.RANDOM=2]="RANDOM",e[e.SYSTEM=3]="SYSTEM",e[e.PROPERTY=4]="PROPERTY",e[e.OPERATION=5]="OPERATION",e[e.ARRAY_LEN=6]="ARRAY_LEN",e[e.ARRAY_VALUE=7]="ARRAY_VALUE",e[e.OBJECT_VALUE=8]="OBJECT_VALUE",e[e.PARAM_VALUE=9]="PARAM_VALUE",e[e.ARRAY_FUNCTION=10]="ARRAY_FUNCTION",e[e.COMPONENT=11]="COMPONENT",e[e.STRING_FUNCTION=12]="STRING_FUNCTION",e[e.PARSE_INT=13]="PARSE_INT",e[e.PARSE_FLOAT=14]="PARSE_FLOAT",e[e.SHOT=15]="SHOT",e}({}),MQ=function(e){return e[e.TIME=0]="TIME",e[e.YEAR=1]="YEAR",e[e.MONTH=2]="MONTH",e[e.DAY=3]="DAY",e[e.DATE=4]="DATE",e[e.HOUR=5]="HOUR",e[e.MINUTE=6]="MINUTE",e[e.SECOND=7]="SECOND",e[e.MILLISECOND=8]="MILLISECOND",e}({}),RQ=function(e){return e.Add="Add",e.Added="Added",e.Remove="Remove",e.Click="click",e}({}),NQ=function(e){return e.STATUS="status",e.COMMAND="command",e.INFO="info",e.WARNING="warning",e.ERROR="error",e.NATIVE="native",e}({}),DQ=function(e){return e.NUMBER="number",e.STRING="string",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object",e}({}),LQ=function(e){return e.EVENT_COMPLETE="EVENT_COMPLETE",e.EVENT_FAIL="EVENT_FAIL",e.EVENT_BREAK="EVENT_BREAK",e.FUNCTION_RUN_COMPLETE="FUNCTION_RUN_COMPLETE",e}({}),FQ=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._isRunning=!1,e._isPaused=!1,e._isCompleted=!1,e._isFailed=!1,e._asynchronous=!1,e}return d(n,[{key:"context",get:function(){return n._context}},{key:"run",value:function(){this._isRunning=!0,this._isCompleted=!1,this._isFailed=!1}},{key:"stop",value:function(){this._isRunning=!1}},{key:"pause",value:function(){this._isPaused=!0}},{key:"resume",value:function(){this._isPaused=!1}},{key:"break",value:function(){this._isRunning=!1,this.emit(LQ.EVENT_BREAK)}},{key:"complete",value:function(){this._isRunning=!1,this._isCompleted=!0,this.emit(LQ.EVENT_COMPLETE)}},{key:"fail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._isRunning=!1,this._isFailed=!0,this.emit(LQ.EVENT_FAIL,t)}},{key:"asynchronous",get:function(){return this._asynchronous}},{key:"isRunning",get:function(){return this._isRunning}},{key:"isCompleted",get:function(){return this._isCompleted}},{key:"isFailed",get:function(){return this._isFailed}},{key:"isPaused",get:function(){return this._isPaused}}],[{key:"registContext",value:function(e){n._context=e}}]),n}(Lp);FQ._context=void 0;var BQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager,t=e.getVariableByData(this.component,this.data.target),r=e.getVariableByData(this.component,this.data.concatArr);t&&r&&(this.data.value?t.value=r.value.concat(this.data.value):t.value=r.value.concat())}this.complete()}}]),n}(FQ),UQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&(e.value=this.data.value)}this.complete()}}]),n}(FQ),HQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&e.value.pop()}this.complete()}}]),n}(FQ),jQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e)e.value.push(this.data.value)}this.complete()}}]),n}(FQ),zQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager,t=e.getVariableByData(this.component,this.data.target);if(t){var r=t.value;e.shuffle(r)}}this.complete()}}]),n}(FQ),VQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&e.value.shift()}this.complete()}}]),n}(FQ),GQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e){var t=this.data.value;void 0!==t?e.value.splice(this.data.start,this.data.deleteCount||0,t):e.value.splice(this.data.start,this.data.deleteCount||0)}}this.complete()}}]),n}(FQ),WQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e)e.value.unshift(this.data.value)}this.complete()}}]),n}(FQ),XQ=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this)}return d(n,[{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this.break(),this.complete()}}]),n}(FQ);function YQ(e){return"number"===typeof e&&!isNaN(e)}var KQ=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this))._tasks=[],e._currentTask=null,e._curTaskIndex=0,e}return d(n,[{key:"tasks",get:function(){return this._tasks}},{key:"run",value:function(){this.isRunning||(this._curTaskIndex=0,lm(v(n.prototype),"run",this).call(this),this._nextTask())}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this._currentTask&&(this.clearEvent(this._currentTask),this._currentTask=null);for(var e=0,t=this._tasks.length;e<t;e++){var r=this._tasks[e];r&&r.stop()}this._curTaskIndex=Number.MAX_VALUE,this.off(LQ.EVENT_COMPLETE),this.off(LQ.EVENT_BREAK),this.off(LQ.EVENT_FAIL),this.complete()}},{key:"pause",value:function(){if(lm(v(n.prototype),"pause",this).call(this),this._tasks)for(var e=0,t=this._tasks.length;e<t;e++)this._tasks[e].pause()}},{key:"resume",value:function(){if(lm(v(n.prototype),"resume",this).call(this),this._tasks)for(var e=0,t=this._tasks.length;e<t;e++)this._tasks[e].resume()}},{key:"break",value:function(){lm(v(n.prototype),"break",this).call(this),this._currentTask&&(this.clearEvent(this._currentTask),this._currentTask.break(),this._currentTask=null),this._curTaskIndex=Number.MAX_VALUE,this.off(LQ.EVENT_COMPLETE),this.off(LQ.EVENT_BREAK),this.off(LQ.EVENT_FAIL),this.complete()}},{key:"addTask",value:function(e){if(!e)throw new Error("ArgumentError");if(e.asynchronous&&(this._asynchronous=!0),!(this._tasks.indexOf(e)<0))throw new Error("duplicate task");return this._tasks.push(e),e}},{key:"_nextTask",value:function(e){var t=null;this._curTaskIndex<this._tasks.length&&(t=this._tasks[this._curTaskIndex]),t?(this._currentTask=t,this._currentTask.on(LQ.EVENT_COMPLETE,this.onOneTaskComplete,this),this._currentTask.on(LQ.EVENT_FAIL,this.onOneTaskFail,this),this._currentTask.on(LQ.EVENT_BREAK,this.onOneTaskBreak,this),this._currentTask.run()):this.complete()}},{key:"clearEvent",value:function(e){e&&(e.off(LQ.EVENT_COMPLETE,this.onOneTaskComplete,this),e.off(LQ.EVENT_FAIL,this.onOneTaskFail,this),e.off(LQ.EVENT_BREAK,this.onOneTaskBreak,this))}},{key:"onOneTaskBreak",value:function(e){this._currentTask&&(this.clearEvent(this._currentTask),this.emit(LQ.EVENT_BREAK),this.complete())}},{key:"onOneTaskFail",value:function(e){if(!this._currentTask)throw new Error("no task");this.clearEvent(this._currentTask),this.fail(e.type,e.data)}},{key:"onOneTaskComplete",value:function(e){this.clearEvent(this._currentTask),this._curTaskIndex++,this._nextTask(this._currentTask)}}]),n}(FQ),qQ=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).loopTask=void 0,e.loopTask=new KQ,e.loopTask.on(LQ.EVENT_BREAK,e.onBreak,m(e)),e}return d(n,[{key:"addSubTask",value:function(e){this.loopTask&&(this.loopTask.addTask(e),this.loopTask.asynchronous&&(this._asynchronous=!0))}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.loopTask&&(this.loopTask.off(LQ.EVENT_BREAK),this.loopTask.stop())}},{key:"break",value:function(){lm(v(n.prototype),"break",this).call(this),this.loopTask&&(this.loopTask.off(LQ.EVENT_BREAK),this.loopTask.break())}},{key:"pause",value:function(){lm(v(n.prototype),"pause",this).call(this),this.loopTask&&this.loopTask.pause()}},{key:"resume",value:function(){lm(v(n.prototype),"resume",this).call(this),this.loopTask&&this.loopTask.resume()}},{key:"onBreak",value:function(e){this.break()}}]),n}(FQ),$Q=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.thisTarget=void 0,i.target=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i.thisTarget=e,i._loopComplete=!1,i.data=r,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this._loopComplete=!0,this.thisTarget)if(this.loopTask&&(this.loopTask.off(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(LQ.EVENT_COMPLETE,this.onLoopComplete,this)),this.system){var e=this.context.system;e&&(e.off(this.eventName,this.onTriger,this),e.on(this.eventName,this.onTriger,this))}else if(this.global){var t=this.context.global;t&&(t.off(this.eventName,this.onTriger,this),t.on(this.eventName,this.onTriger,this))}else this.target=this.context.variableManager.getExpressItemValue(this.thisTarget,this.data.target),this.target&&(this.target.off(this.eventName,this.onTriger,this),this.target.on(this.eventName,this.onTriger,this));this.complete()}},{key:"stop",value:function(){if(this.complete(),this.thisTarget)if(this.system){var e=this.context.system;e&&e.off(this.eventName,this.onTriger,this)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName,this.onTriger,this)}else this.target&&this.target.off(this.eventName,this.onTriger,this);this.loopTask&&(this.loopTask.off(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.complete()),lm(v(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),lm(v(n.prototype),"break",this).call(this)}},{key:"onLoopComplete",value:function(){this._loopComplete=!0}},{key:"onSystemTriger",value:function(e){e.code===this.eventName&&this.onTriger()}},{key:"onTriger",value:function(){this._isPaused||this.loopTask&&this._loopComplete&&(this._loopComplete=!1,this.loopTask.run())}}]),n}(qQ),ZQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"target",get:function(){return this.context.variableManager.getTargetComponent(this.component,this.data.target)}},{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component){var e=this.context.variableManager,t=this.target,r=this.data.name;Array.isArray(r)&&(r=e.getExpressItemValue(this.component,r));var i=[];if(this.data.params)for(var a=0,o=this.data.params.length;a<o;a++){var s=e.getExpressItemValue(this.component,this.data.params[a]);i.push(s)}t&&r&&t[r]&&t[r].apply(t,i)}this.complete()}}]),n}(FQ),QQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.eventData=void 0,i.target=void 0,i.component=void 0,i.system=void 0,i.global=void 0,i.component=e,i.data=r,i.eventName=r.event,i.eventData=r.eventData,i.system=!0===r.system,i.global=!0===r.global,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component){var e=this.getEmitEventData();if(this.system){if(this.context.variableManager){var t=this.context.system;"object"===typeof e?(e.type=this.eventName,t.emit(this.eventName,e)):t.emit("S0003",[this.eventName,JSON.stringify(e)],NQ.WARNING,this)}}else this.global?this.context.global&&this.context.global.emit(this.eventName,e):(this.target=this.context.variableManager.getTargetComponent(this.component,this.data.target),this.target&&this.target.emit(this.eventName,e))}this.complete()}},{key:"stop",value:function(){this.complete(),lm(v(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),lm(v(n.prototype),"break",this).call(this)}},{key:"getEmitEventData",value:function(){if(Array.isArray(this.eventData)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.eventData);return this.eventData}}]),n}(FQ),JQ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){(lm(v(n.prototype),"run",this).call(this),this.component&&this.context.variableManager)&&this.context.variableManager.caculateExpress(this.component,this.data.express);this.complete()}}]),n}(FQ),eJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i._totalTimes=0,i._curTimes=0,i._paramId="",i._paramIds=[],i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this._totalTimes=this.getforin(),this._curTimes=-1,this.loopTask&&(this.loopTask.on(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(LQ.EVENT_FAIL,this.onLoopComplete,this)),this.addParams(),this.runFor()}},{key:"break",value:function(){this._isRunning=!1,this.loopTask&&this.loopTask.stop(),this.complete()}},{key:"complete",value:function(){this.removeParams(),lm(v(n.prototype),"complete",this).call(this)}},{key:"injectParams",value:function(e){e&&e.length&&(this._paramIds=e)}},{key:"runFor",value:function(){if(this._totalTimes>0&&this._curTimes<this._totalTimes-1)if(this.loopTask){if(this._curTimes++,this.component){var e=this.context.variableManager.getGlobalVariable(this._paramId);e&&(e.value=this._curTimes)}this.loopTask.run()}else this.complete();else this.complete()}},{key:"getforin",value:function(){if(this.component){var e=this.context.variableManager.getExpressItemValue(this.component,this.data.forin);return Array.isArray(e)?e.length:parseInt(e,10)}return 0}},{key:"onLoopComplete",value:function(){this.runFor()}},{key:"addParams",value:function(){if(this.component){var e=this.context.variableManager,t=e.getFunctionId()+"_for";if(this._paramId=t,e.variableMap[sJ.GLOBAL_ID]||(e.variableMap[sJ.GLOBAL_ID]={}),e.variableMap[sJ.GLOBAL_ID][t]={id:t,type:DQ.OBJECT,value:0},this.loopTask){var n=this._paramIds.concat([this._paramId]);this.context.injectParamsToQueueTask(this.loopTask,n)}}}},{key:"removeParams",value:function(){if(this.component){var e=this.context.variableManager,t=this._paramId;delete e.variableMap[sJ.GLOBAL_ID][t]}}}]),n}(qQ),tJ=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this)).component=void 0,r.conditions=[],r.conditionsRun=[],r.elseRun=void 0,r.curRun=void 0,r.component=e,r}return d(n,[{key:"addCondition",value:function(e,t){e&&e.length?(this.conditions.push(e),this.conditionsRun.push(t)):this.addElse(t)}},{key:"addElse",value:function(e){this.elseRun=e}},{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this.curRun=this.findTask(),this.curRun?(this.curRun.on(LQ.EVENT_COMPLETE,this.onTaskComplete,this),this.curRun.on(LQ.EVENT_BREAK,this.onTaskBreak,this),this.curRun.run()):this.complete()}},{key:"findTask",value:function(){if(this.component){for(var e=this.context.variableManager,t=0,n=this.conditions.length;t<n;t++){var r=this.conditions[t];if(e.caculateExpress(this.component,r))return this.conditionsRun[t]}if(this.elseRun)return this.elseRun}}},{key:"onTaskComplete",value:function(e){this.curRun&&this.curRun.off(LQ.EVENT_COMPLETE,this.onTaskComplete,this),this.complete()}},{key:"onTaskBreak",value:function(e){this.break(),this.complete()}}]),n}(FQ),nJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).data=void 0,i.component=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){this.complete()}},{key:"getValue",value:function(){if(Array.isArray(this.data.value)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.data.value);return this.data.value}}]),n}(FQ),rJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.component=void 0,i._component=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i._loopComplete=!1,i.component=e,i.data=r,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component)if(this.system){var e=this.context.system;e&&e.off(this.eventName)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName)}else this._component=this.context.variableManager.getTargetComponent(this.component,this.data.target),this._component&&this._component.off(this.eventName);this.complete()}}]),n}(FQ),iJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this);var e=this.context.variableManager.getTargetComponent(this.component,this.data.target);e&&(e[this.data.property]=this.getValue()),this.complete()}},{key:"getValue",value:function(){if(Array.isArray(this.data.value)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.data.value);return this.data.value}}]),n}(FQ),aJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).data=void 0,i.component=void 0,i.eventName=void 0,i.funName=void 0,i.target=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i.runId=-1,i.callfun=void 0,i.callfunData=void 0,i._loopComplete=!1,i.data=r,i.component=e,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i.funName=r.funName,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this._loopComplete=!0,0===this.loopTask.tasks.length&&this.component&&this.funName){this.callfunData={type:OQ.CallFunction,name:this.funName,params:[]};var e=new lJ(this.component,this.funName,this.callfunData);this.callfun=e,this.loopTask.addTask(e)}if(this.loopTask&&(this.loopTask.off(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(LQ.EVENT_COMPLETE,this.onLoopComplete,this)),this.component)if(this.system){var t=this.context.system;t&&(t.off(this.eventName,this.onTriger,this),t.on(this.eventName,this.onTriger,this))}else if(this.global){var r=this.context.global;r&&(r.off(this.eventName,this.onTriger,this),r.on(this.eventName,this.onTriger,this))}else this.target=this.context.variableManager.getTargetComponent(this.component,this.data.target),this.target&&(this.target.off(this.eventName,this.onTriger,this),this.target.on(this.eventName,this.onTriger,this));this.complete()}},{key:"stop",value:function(){if(this.complete(),this.component)if(this.system){var e=this.context.system;e&&e.off(this.eventName,this.onTriger,this)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName,this.onTriger,this)}else this.target&&this.target.off(this.eventName,this.onTriger,this);this.loopTask&&(this.loopTask.off(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.complete()),lm(v(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),lm(v(n.prototype),"break",this).call(this)}},{key:"onLoopComplete",value:function(){this._loopComplete=!0}},{key:"onSystemTriger",value:function(e){e.code===this.eventName&&this.onTriger(e)}},{key:"onTriger",value:function(){if(!this._isPaused){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t&&t.length>0&&this.callfunData&&(this.callfunData.params=t),this.loopTask&&this._loopComplete&&(this._loopComplete=!1,this.loopTask.run())}}}]),n}(qQ),oJ=function(){function e(){l(this,e),this.variableManager=void 0,this.soundManager=void 0,this.global=void 0,this.system=void 0}return d(e,[{key:"initDefaultManager",value:function(){this.variableManager=new sJ,this.global=new Lp,this.system=new Lp}},{key:"injectParamsToQueueTask",value:function(e,t){var n=e.tasks;if(n)for(var r=0,i=n.length;r<i;r++)this.injectParamsToTask(n[r],t)}},{key:"injectParamsToTask",value:function(e,t){if(e instanceof JQ){var n=e.data.express;this.modifyParamValue(n,t)}else if(e instanceof tJ){for(var r=e.conditions,i=0,a=r.length;i<a;i++){var o=r[i];this.modifyParamValue(o,t)}if(e.conditionsRun)for(var s=e.conditionsRun,l=0,u=s.length;l<u;l++){var c=s[l];this.injectParamsToQueueTask(c,t)}e.elseRun&&this.injectParamsToQueueTask(e.elseRun,t)}else e instanceof iJ?e.data.value&&Array.isArray(e.data.value)&&this.modiyExpressItemParamValue(e.data.value,t):e instanceof lJ?(e.data&&e.data.params&&this.modifyParamValue(e.data.params,t),e.data&&e.data.target&&this.modiyExpressItemParamValue(e.data.target,t)):e instanceof nJ?e.data&&e.data.value&&this.modiyExpressItemParamValue(e.data.value,t):e instanceof eJ?e.injectParams(t):(e instanceof $Q||e instanceof aJ||e instanceof rJ||e instanceof QQ||e instanceof ZQ)&&e.data&&e.data.target&&this.modiyExpressItemParamValue(e.data.target,t)}},{key:"modifyParamValue",value:function(e,t){if(e&&Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];this.modiyExpressItemParamValue(i,t)}}},{key:"modiyExpressItemParamValue",value:function(e,t){if(e[0]===PQ.PARAM_VALUE){var n=e[1];t.length>n&&(e[2]=t[n])}else e[0]===PQ.ARRAY_VALUE?Array.isArray(e[3])&&this.modiyExpressItemParamValue(e[3],t):e[0]===PQ.ARRAY_FUNCTION&&("push"==e[3]||"unshift"==e[3]||"concat"==e[3]?Array.isArray(e[4])&&this.modiyExpressItemParamValue(e[4],t):"splice"==e[3]&&(Array.isArray(e[4])&&this.modiyExpressItemParamValue(e[4],t),Array.isArray(e[5])&&this.modiyExpressItemParamValue(e[5],t)))}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e,e._instance.initDefaultManager()),e._instance}}]),e}();oJ._instance=void 0;var sJ=function(){function e(){l(this,e),this.variableConfig={},this.variableMap={},this.runFunctionId=0,this.functionMap={}}return d(e,[{key:"shuffle",value:function(e){for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}}},{key:"clear",value:function(){this.variableMap={},this.functionMap={}}},{key:"getFunctionId",value:function(){return++this.runFunctionId}},{key:"getFunctionTask",value:function(e){return this.functionMap[e]}},{key:"setFunctionTask",value:function(e,t){this.functionMap[e]=t}},{key:"addVariableConfig",value:function(e,t){if(!this.variableConfig[e]){var n=this.normalizeVariableConfig(t);this.variableConfig[e]=n}}},{key:"normalizeVariableConfig",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],r=this.createIVariableData(t,n);e[t]=r}return e}},{key:"addVariableToGlobal",value:function(t){var n=e.GLOBAL_ID;if(this.variableMap[n]=this.deepCopy(t),this.variableConfig[n]){var r=this.variableConfig[n];this.variableMap[n]=this.deepCopy(r)}else if(this.addVariableConfig(n,t),this.variableConfig[n]){var i=this.variableConfig[n];this.variableMap[n]=this.deepCopy(i)}}},{key:"addVariableToContext",value:function(e){var t={};if(e.target)for(var n in e.target){var r=e.target[n];t[n]={id:n,type:DQ.OBJECT,value:r}}this.variableMap[e.id.toString()]=t}},{key:"clearVariableToContext",value:function(e){this.variableMap[e.id.toString()]=void 0,delete this.variableMap[e.id.toString()]}},{key:"addVariableToComponent",value:function(e){var t=e.libId;if(t&&this.variableConfig[t.toString()]){var n=this.variableConfig[t.toString()];this.variableMap[e.id.toString()]=this.deepCopy(n)}}},{key:"addVariableDataToComponent",value:function(e,t,n,r){var i=e.libId,a=e.id;this.addVariable(i,a,t,n,r)}},{key:"addVariableDataToGlobal",value:function(t,n,r){this.addVariable(e.GLOBAL_ID,e.GLOBAL_ID,t,n,r)}},{key:"addVariable",value:function(e,t,n,r,i){var a={id:n,type:r,value:i},o={id:n,type:r,value:i},s=this.variableConfig[e];s||(s={},this.variableConfig[e]=s),s[n]=a;var l=this.variableMap[t];l||(l={},this.variableMap[t]=l),l[n]=o}},{key:"getGlobalVariable",value:function(t){return this.getVariable(e.GLOBAL_ID,t)}},{key:"getVariable",value:function(e,t){var n=this.variableMap[e];if(n)return n[t]}},{key:"getTargetComponent",value:function(e,t){if(null==t||t.length<=0)return e;if(e&&Array.isArray(t)&&t.length>1&&(t[0]===PQ.VARIABLE||t[0]===PQ.PROPERTY||t[0]===PQ.ARRAY_VALUE||t[0]===PQ.PARAM_VALUE||t[0]===PQ.OBJECT_VALUE||t[0]===PQ.COMPONENT))return this.getExpressItemValue(e,t);for(var n=t.concat(),r=e;n.length>0;){var i=n.shift();if(!r||"function"!=typeof r.getChildById)return null;r=r.getChildById(i)}return r}},{key:"getVariableByData",value:function(t,n){if(n[0]===PQ.PARAM_VALUE)return this.getVariable(e.GLOBAL_ID,n[2]);var r=this.getTargetComponent(t,n[1]),i=r?r.id.toString():e.GLOBAL_ID;return this.getVariable(i,n[2])}},{key:"caculateExpress",value:function(t,n){for(var r=[],i=[],a=0,o=n.length;a<o;a++){var s=n[a];switch(s[0]){case PQ.CONST:case PQ.VARIABLE:case PQ.SYSTEM:case PQ.RANDOM:case PQ.PROPERTY:case PQ.ARRAY_LEN:case PQ.ARRAY_VALUE:case PQ.OBJECT_VALUE:case PQ.PARAM_VALUE:case PQ.ARRAY_FUNCTION:case PQ.STRING_FUNCTION:case PQ.PARSE_FLOAT:case PQ.PARSE_INT:case PQ.COMPONENT:r.push(s);break;case PQ.OPERATION:switch(s[1]){case"(":i.push(s);break;case")":for(var l=i.pop();l&&"("!==l[1];)r.push(l),l=i.pop();break;default:var u=s[1],c=e.OPERATE_PRIORITY[u];if(!c)return this.emitError(t,"E1001",[u],NQ.WARNING),0;if(i.length>0){var h=i[i.length-1],d=e.OPERATE_PRIORITY[h[1]];if(c>d)i.push(s);else{for(;c<=d&&(r.push(h),i.pop(),i.length>0);)h=i[i.length-1],d=e.OPERATE_PRIORITY[h[1]];i.push(s)}}else i.push(s)}}}if(i.length>0)for(;i.length>0;){var f=i.pop();f&&r.push(f)}return this.caculateExpressValue(t,r)}},{key:"getExpressItemValue",value:function(e,t){var n;switch(t[0]){case PQ.CONST:n=t[1];break;case PQ.VARIABLE:var r=this.getVariableByData(e,t);r?n=r.value:this.emitError(e,"E1002",[t.join(",")],NQ.WARNING);break;case PQ.SYSTEM:var i=new Date,a=0;switch(t[1]){case MQ.TIME:a=i.getTime();break;case MQ.YEAR:a=i.getFullYear();break;case MQ.MONTH:a=i.getMonth();break;case MQ.DAY:a=i.getDay();break;case MQ.DATE:a=i.getDate();break;case MQ.HOUR:a=i.getHours();break;case MQ.MINUTE:a=i.getMinutes();break;case MQ.SECOND:a=i.getSeconds();break;case MQ.MILLISECOND:a=i.getMilliseconds()}n=a;break;case PQ.RANDOM:var o=0;if(t.length>=3){var s=t[1],l=t[2];o=Math.round(Math.random()*(l-s))+s}else o=Math.random();n=o;break;case PQ.COMPONENT:var u=t[1];n=this.getTargetComponent(e,u);break;case PQ.PROPERTY:var c=t[1],h=this.getTargetComponent(e,c);if(h&&t.length>=3){for(var d=2,f=t.length;d<f;d++){var p=t[d];h&&void 0!==p&&(h=h[p])}n=h}else n=void 0;break;case PQ.ARRAY_LEN:var v=this.getVariableByData(e,t);v?n=v.value.length:this.emitError(e,"E1002",[t.join(",")],NQ.WARNING);break;case PQ.ARRAY_VALUE:var m=this.getVariableByData(e,t);if(m){var g=m.value,y=t[3];if(Array.isArray(y)){var b=this.getExpressItemValue(e,y);YQ(b)?y=b:(this.emitError(e,"E1003",[y],NQ.WARNING),y=0)}n=g[y],t.length>=5&&n&&(n=n[t[4]])}else this.emitError(e,"E1002",[t.join(",")],NQ.WARNING);break;case PQ.ARRAY_FUNCTION:var _=this.getVariableByData(e,t);if(_)if(Array.isArray(_.value)){var x=_.value;switch(t[3]){case"pop":n=x.pop();break;case"push":if(t.length>4){var E=this.getExpressItemValue(e,t[4]);n=x.push(E)}break;case"shift":n=x.shift();break;case"unshift":if(t.length>4){var w=this.getExpressItemValue(e,t[4]);n=x.unshift(w)}break;case"concat":if(t.length>3)if(t.length>4){var T=this.getExpressItemValue(e,t[4]);n=x.concat(T)}else n=x.concat();break;case"splice":if(5===t.length){var S=this.getExpressItemValue(e,t[4]);n=x.splice(S)}else if(6===t.length){var k=this.getExpressItemValue(e,t[4]),C=this.getExpressItemValue(e,t[5]);n=x.splice(k,C)}else if(t.length>6){var A=this.getExpressItemValue(e,t[4]),I=this.getExpressItemValue(e,t[5]),O=this.getExpressItemValue(e,t[6]);n=x.splice(A,I,O)}break;default:this.emitError(e,"E1004",[t[3]],NQ.WARNING)}}else this.emitError(e,"E1005",[t.join(",")],NQ.WARNING);else this.emitError(e,"E1002",[t.join(",")],NQ.WARNING);break;case PQ.OBJECT_VALUE:case PQ.PARAM_VALUE:var P=this.getVariableByData(e,t);if(P){for(var M=P.value,R=3,N=t.length;R<N;R++){var D=t[R];M&&void 0!==D&&(M=M[D])}n=M}break;case PQ.STRING_FUNCTION:var L=this.getVariableByData(e,t);if(L)if("string"===typeof L.value){var F=L.value;switch(t[3]){case"indexOf":if(t.length>=5){var B=this.getExpressItemValue(e,t[4]);n=F.indexOf(B)}else n=-1;break;case"replace":if(t.length>=6){var U=this.getExpressItemValue(e,t[4]),H=this.getExpressItemValue(e,t[5]);n=F.replace(U,H)}break;case"split":if(t.length>=5){var j=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.split(j);else{var z=this.getExpressItemValue(e,t[5]);n=F.split(j,z)}}break;case"substr":if(t.length>=5){var V=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.substr(V);else{var G=this.getExpressItemValue(e,t[5]);n=F.substr(V,G)}}break;case"substring":if(t.length>=5){var W=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.substring(W);else{var X=this.getExpressItemValue(e,t[5]);n=F.substring(W,X)}}break;default:this.emitError(e,"E1014",[t[3]],NQ.WARNING)}}else this.emitError(e,"E1015",[t.join(",")],NQ.WARNING);else this.emitError(e,"E1002",[t.join(",")],NQ.WARNING);break;case PQ.PARSE_INT:if(t.length>=2){var Y=this.getExpressItemValue(e,t[1]);if(2===t.length)n=parseInt(Y);else{var K=this.getExpressItemValue(e,t[2]);n=parseInt(Y,K)}}break;case PQ.PARSE_FLOAT:if(t.length>=2){var q=this.getExpressItemValue(e,t[1]);n=parseFloat(q)}}return n}},{key:"caculateExpressValue",value:function(e,t){var n=[];if(1===t.length)return this.getExpressItemValue(e,t[0]);for(var r=0,i=t.length;r<i;r++){var a=t[r];if(a[0]===PQ.OPERATION){var o=void 0,s=void 0;"!"===a[1]||(s=n.pop()),o=n.pop();var l=this.caculateOneExpress(e,a[1],o,s);n.push(l)}else n.push(a)}return 1===n.length?n[0][1]:(this.emitError(e,"E1006",void 0,NQ.WARNING),0)}},{key:"caculateOneExpress",value:function(e,t,n,r){var i,a,o,s=[PQ.CONST,0];switch(n&&(i=this.getExpressItemValue(e,n)),r&&(a=this.getExpressItemValue(e,r)),t){case"*":o=i*a;break;case"/":o=i/a;break;case"%":o=i%a;break;case"+":o=i+a;break;case"-":o=i-a;break;case">=":o=i>=a;break;case"<=":o=i<=a;break;case">":o=i>a;break;case"<":o=i<a;break;case"==":o=i==a;break;case"===":o=i===a;break;case"!=":o=i!=a;break;case"!==":o=i!==a;break;case"!":o=!i;break;case"&&":o=i&&a;break;case"||":o=i||a;break;case"=":if(o=a,n)switch(n[0]){case PQ.VARIABLE:var l=this.getVariableByData(e,n);l?l.value=o:this.emitError(e,"E1002",[n.join(",")],NQ.WARNING);break;case PQ.PROPERTY:var u=n[1],c=n[2],h=this.getTargetComponent(e,u);if(h&&n.length>=3){for(var d=h,f=c,p=2,v=n.length;p<v&&(f=n[p],p!==v-1);p++)d?d=d[f]:this.emitError(e,"E1007",[n.join(",")],NQ.WARNING);d&&f?d[f]=o:this.emitError(e,"E1007",[n.join(",")],NQ.WARNING)}break;case PQ.ARRAY_LEN:var m=this.getVariableByData(e,n);m?m.value.length=o:this.emitError(e,"E1002",[n.join(",")],NQ.WARNING);break;case PQ.ARRAY_VALUE:var g=this.getVariableByData(e,n);if(g){var y=g.value,b=n[3]||0;if(Array.isArray(b)){var _=this.getExpressItemValue(e,b);YQ(_)?b=_:(this.emitError(e,"E1003",[b],NQ.WARNING),b=0)}if(n.length>=5){for(var x,E=y[b],w=4,T=n.length;w<T;w++)x=n[w],w<T-1&&E[x]&&(E=E[x]);E&&void 0!==x&&(E[x]=o)}else y[b]=o}else this.emitError(e,"E1002",[n.join(",")],NQ.WARNING);break;case PQ.OBJECT_VALUE:case PQ.PARAM_VALUE:var S=this.getVariableByData(e,n);if(S){for(var k,C=S.value,A=3,I=n.length;A<I;A++)k=n[A],A<I-1&&C[k]&&(C=C[k]);C&&void 0!==k?C[k]=o:S.value=o}break;case PQ.CONST:this.emitError(e,"E1008",[n.join(",")],NQ.WARNING)}break;default:this.emitError(e,"E1001",[t],NQ.WARNING)}return s[1]=o,s}},{key:"deepCopy",value:function(e){var t=JSON.stringify(e);return JSON.parse(t)}},{key:"isIVariableData",value:function(e){return t=e,!("[object Object]"!==Object.prototype.toString.call(t)||!e.hasOwnProperty("type")||!e.hasOwnProperty("value")||e.type!==DQ.ARRAY&&e.type!==DQ.BOOLEAN&&e.type!==DQ.NUMBER&&e.type!==DQ.OBJECT&&e.type!==DQ.STRING);var t}},{key:"createIVariableData",value:function(e,t){if(this.isIVariableData(t))return t;var n={id:e,type:DQ.OBJECT,value:t};return"boolean"===typeof t?n.type=DQ.BOOLEAN:!function(e){return"string"===typeof e}(t)?YQ(t)?n.type=DQ.STRING:!function(e){return Array.isArray(e)}(t)?n.type=DQ.OBJECT:n.type=DQ.ARRAY:n.type=DQ.STRING,n}},{key:"emitError",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]||NQ.ERROR;throw oJ.instance.system.emit(t,n),new Error(t+": "+(null===n||void 0===n?void 0:n.join(" ")))}}]),e}();sJ.GLOBAL_ID="global",sJ.OPERATE_PRIORITY={"*":100,"/":100,"%":98,"+":97,"-":97,">=":95,"<=":94,">":93,"<":92,"==":91,"===":91,"!=":90,"!==":90,"!":89,"&&":88,"||":87,"=":86};var lJ=function(e){p(n,e);var t=g(n);function n(e,r,i){var a;return l(this,n),(a=t.call(this)).component=void 0,a.funName=void 0,a.data=void 0,a._component=void 0,a.runId=-1,a.fun=void 0,a.paramIds=[],a.component=e,a.funName=r,a.data=i,a}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this._component=this.context.variableManager.getTargetComponent(this.component,this.data.target),this._component&&this.context.variableManager){var e=this.context.variableManager,t=this.funName;if(this.runId=e.getFunctionId(),t=this._component.id+this.funName,this.fun=e.getFunctionTask(t),this.fun){if(this.paramIds.length=0,this.fun.formalParams){var r=this.fun.formalParams?this.fun.formalParams.length:0,i=this.data.params?this.data.params.length:0;if(r!=i)if(i>r)this.data.params&&(this.data.params.length=r);else{this.data.params||(this.data.params=[]);for(var a=i;a<r;a++)this.data.params.push([PQ.CONST,void 0])}}if(this.data.params){for(var o=[],s=0,l=this.data.params.length;s<l;s++){var u=this.data.params[s],c=u;if(Array.isArray(u))c=e.getExpressItemValue(this.component,u);o.push(c)}for(var h=0,d=o.length;h<d;h++){var f=t+this.runId+"param_"+h;this.paramIds.push(f),e.variableMap[sJ.GLOBAL_ID]||(e.variableMap[sJ.GLOBAL_ID]={}),e.variableMap[sJ.GLOBAL_ID][f]={id:f,type:DQ.OBJECT,value:o[h]}}}this.paramIds.length&&this.fun.injectParams(this.paramIds),this.fun.on(LQ.FUNCTION_RUN_COMPLETE,this.onRunComplete,this),this.fun.runWithId(this.runId)}else this.complete()}else{if(this.component){var p=this.context.variableManager,m=this._component,g=this.data.name;Array.isArray(g)&&(g=p.getExpressItemValue(this.component,g));var y=[];if(this.data.params)for(var b=0,_=this.data.params.length;b<_;b++){var x=p.getExpressItemValue(this.component,this.data.params[b]);y.push(x)}m&&g&&m[g]&&m[g].apply(m,y)}this.complete()}}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.fun&&this.fun.stopWithId(this.runId),this.complete()}},{key:"break",value:function(){lm(v(n.prototype),"break",this).call(this),this.fun&&this.fun.breakWithId(this.runId),this.complete()}},{key:"complete",value:function(){if(this.runId=0,this.fun&&this.fun.off(LQ.FUNCTION_RUN_COMPLETE,this.onRunComplete,this),this.paramIds.length&&this.component)for(var e=this.context.variableManager,t=0,r=this.paramIds.length;t<r;t++){var i=this.paramIds[t];delete e.variableMap[sJ.GLOBAL_ID][i]}lm(v(n.prototype),"complete",this).call(this)}},{key:"onRunComplete",value:function(e){e===this.runId&&this.complete()}}]),n}(FQ),uJ=function(e){return e[e.ExpressItem=0]="ExpressItem",e[e.Closure=1]="Closure",e[e.CallbackFunction=2]="CallbackFunction",e}(uJ||{}),cJ=function(e){return e.None="0",e.ActionList="a",e.Option="b",e.Equal="c",e.Block="d",e.DefaultVariable="e",e.Variable="f",e.String="g",e.Number="h",e.Boolean="i",e.Semicolon="j",e.Function="k",e.Bracket="l",e.This="m",e.If="n",e.Else="o",e.Child="q",e.Dot="r",e.Comma="s",e.Quotation="t",e.DoubleQuotation="u",e.SquareBracket="v",e.Print="w",e.Slash="x",e.NSFunction="y",e.Global="z",e.System="A",e.Random="B",e.ArrayFunction="C",e.Length="D",e.Colon="E",e.For="F",e.In="G",e.Break="H",e.Date="I",e.StringFunction="J",e.ParseInt="K",e.ParseFloat="L",e}(cJ||{}),hJ=function(e){return e.If="if",e.Else="else",e.DefineVariable="var",e.Function="function",e.AddListener="on",e.RemoveListener="off",e.PlaySound="playSound",e.PauseSound="pauseSound",e.ResumeSound="resumeSound",e.JumpToScene="jumpToScene",e.JumpToNextScene="jumpToNextScene",e.JumpToPrevScene="jumpToPrevScene",e.PlayAnimation="play",e.StopAnimation="stopAnimation",e.GotoPlay="gotoPlay",e.GotoStop="gotoStop",e.Emit="emit",e.True="true",e.False="false",e.Print="print",e.Trace="trace",e.This="this",e.Global="global",e.Date="Date",e.System="system",e.Random="random",e.Pop="pop",e.Push="push",e.Shift="shift",e.Unshift="unshift",e.Concat="concat",e.Splice="splice",e.Length="length",e.IndexOf="indexOf",e.Replace="replace",e.Split="split",e.Substr="substr",e.Substring="substring",e.ParseInt="parseInt",e.ParseFloat="parseFloat",e.For="for",e.In="in",e.Break="break",e.Wait="wait",e.SetTimeout="setTimeout",e.SetInterval="setInterval",e.SetEnterFrame="setEnterFrame",e.Enter="\n",e.Space=" ",e.At="@",e.Dollar="$",e.Sharp="#",e.Equal="=",e.Dot=".",e.Comma=",",e.Add="+",e.Minus="-",e.Star="*",e.Slash="/",e.Exclamation="!",e.Vertical="|",e.And="&",e.Backslash="\\",e.Percent="%",e.More=">",e.Less="<",e.BracketL="(",e.BracketR=")",e.SquareBracketL="[",e.SquareBracketR="]",e.BlockL="{",e.BlockR="}",e.SingleQuot="'",e.DoubleQuot='"',e.Semicolon=";",e.Colon=":",e}(hJ||{}),dJ=[hJ.Enter,hJ.Space,hJ.At,hJ.Dollar,hJ.Sharp,hJ.Equal,hJ.Dot,hJ.Comma,hJ.Add,hJ.Minus,hJ.Star,hJ.Slash,hJ.Exclamation,hJ.Vertical,hJ.And,hJ.Backslash,hJ.Percent,hJ.More,hJ.Less,hJ.BracketL,hJ.BracketR,hJ.SquareBracketL,hJ.SquareBracketR,hJ.BlockL,hJ.BlockR,hJ.SingleQuot,hJ.DoubleQuot,hJ.Semicolon,hJ.Colon],fJ=function(e){return e[e.DefineVariable=0]="DefineVariable",e[e.DefineFunction=1]="DefineFunction",e[e.Print=2]="Print",e[e.IfGroup=3]="IfGroup",e[e.Express=4]="Express",e[e.Comment=5]="Comment",e[e.NSFunction=6]="NSFunction",e[e.CusFunction=7]="CusFunction",e[e.ArrayRandom=8]="ArrayRandom",e[e.For=9]="For",e[e.Break=10]="Break",e}(fJ||{}),pJ="[0-9a-zA-Z]",vJ="(("+cJ.This+"|"+cJ.Global+")("+cJ.Child+"("+cJ.Number+"|"+cJ.String+"))*)",mJ="(("+vJ+"|"+cJ.Global+")?("+cJ.Variable+"("+cJ.Number+"|"+cJ.String+"))+)",gJ="(("+vJ+")("+cJ.Dot+cJ.String+")+)",yJ="(("+mJ+")("+cJ.Dot+cJ.String+")+)",bJ="(("+cJ.Quotation+pJ+"*"+cJ.Quotation+")|("+cJ.DoubleQuotation+pJ+"*"+cJ.DoubleQuotation+"))",_J="("+cJ.SquareBracket+")+",xJ="("+bJ+"|"+("("+cJ.Number+"|("+cJ.Option+cJ.Number+")|("+cJ.Option+cJ.Number+cJ.Dot+cJ.Number+")|("+cJ.Number+cJ.Dot+cJ.Number+"))")+"|"+cJ.Boolean+"|"+_J+"|"+cJ.Block+")",EJ="("+cJ.Date+cJ.Dot+cJ.String+")",wJ="("+cJ.Option+"|"+cJ.Equal+"|"+cJ.Slash+")",TJ="("+mJ+_J+"("+cJ.Dot+cJ.String+")*)",SJ="("+mJ+cJ.Dot+cJ.ArrayFunction+cJ.Bracket+")",kJ="("+mJ+cJ.Dot+cJ.StringFunction+cJ.Bracket+")",CJ="("+cJ.ParseInt+cJ.Bracket+")",AJ="("+cJ.ParseFloat+cJ.Bracket+")",IJ="("+mJ+cJ.Dot+cJ.Length+")",OJ="("+mJ+"|"+gJ+"|"+yJ+"|"+TJ+"|"+SJ+"|"+IJ+"|"+EJ+"|"+kJ+"|"+CJ+"|"+AJ+"|"+cJ.Bracket+"|"+vJ+")",PJ="("+mJ+cJ.Dot+cJ.Random+cJ.Bracket+")",MJ=function(){function e(){l(this,e),this.debug=!1,this.skipComment=!0,this.regNumber=/^\d+$/,this.regDefineVariable=new RegExp(cJ.DefaultVariable+"("+cJ.Global+")?"+cJ.Variable+"["+cJ.String+cJ.Number+"]"+cJ.Equal+pJ+"+"),this.regDefineFunction=new RegExp(cJ.Function+cJ.String+cJ.Bracket+cJ.Block),this.regPrint=new RegExp(cJ.Print+cJ.Bracket),this.regIfGroup=new RegExp(cJ.If+cJ.Bracket+cJ.Block+"("+cJ.Else+cJ.If+cJ.Bracket+cJ.Block+")*("+cJ.Else+cJ.Block+")*"),this.regIf=new RegExp(cJ.If+cJ.Bracket+cJ.Block),this.regElseIf=new RegExp(cJ.Else+cJ.If+cJ.Bracket+cJ.Block),this.regElse=new RegExp(cJ.Else+cJ.Block),this.regExpress=new RegExp("("+SJ+"|"+kJ+"|"+CJ+"|"+AJ+"|(("+OJ+"|"+xJ+")(("+wJ+")+("+OJ+"|"+xJ+"))+))"),this.regExpressItem=new RegExp(OJ),this.regComment=new RegExp(cJ.Slash+cJ.Slash+pJ+"*"),this.regNSFunction=new RegExp("("+vJ+cJ.Dot+")?"+cJ.NSFunction+cJ.Bracket),this.regCusFunction=new RegExp("("+vJ+"|"+mJ+")"+cJ.Dot+cJ.String+cJ.Bracket),this.regClosureMaybe=new RegExp(cJ.Bracket+cJ.Equal+cJ.Option+cJ.Block),this.regEventListenerFun=new RegExp("("+vJ+cJ.Dot+cJ.String+")"),this.regArrayRandom=new RegExp(PJ),this.regFor=new RegExp(cJ.For+cJ.Bracket+cJ.Block),this.regBreak=new RegExp(cJ.Break),this.actionRegs=[this.regDefineVariable,this.regDefineFunction,this.regPrint,this.regIfGroup,this.regExpress,this.regComment,this.regNSFunction,this.regCusFunction,this.regArrayRandom,this.regFor,this.regBreak],this.scriptStr="",this.functionParams=[]}return d(e,[{key:"parse",value:function(e){if(this.scriptStr=e,this.scriptStr){var t=this.splitWord(this.scriptStr);this.log("splitWords: ",t);var n=this.parseToken(t);this.log("tokens",n);var r=this.parseAst(n);return this.log(r),r}return[]}},{key:"isEnter",value:function(e){return"\n"===e||"\r"===e}},{key:"splitWord",value:function(e){for(var t=[],n=[],r=0,i=!1,a=!1,o=0,s=e.length;o<s;o++){var l=e.charAt(o);e.charCodeAt(o);if(2===r){if(!this.isEnter(l)){n.push(l);continue}l=";",r=0}else 1===r&&l!==hJ.Slash&&(r=0);if(i&&l!==hJ.SingleQuot||a&&l!==hJ.DoubleQuot)this.isEnter(l)||n.push(l);else if(this.isEnter(l)||" "===l||"\t"===l){if(n.length>0){var u=n.join("");t.push(u),n.length=0}}else if(dJ.indexOf(l)>=0){if(n.length>0){var c=n.join("");t.push(c),n.length=0}switch(l===hJ.SingleQuot?i=!i:l===hJ.DoubleQuot&&(a=!a),l){case"/n":case"/r":case" ":break;default:l===hJ.Slash&&r++,t.push(l)}}else n.push(l)}return t}},{key:"parseToken",value:function(e){for(var t,n=[],r=[],i=cJ.None,a=0,o=e.length;a<o;a++){var s=e[a],l={type:cJ.None,value:s};if(i===cJ.Quotation&&s!==hJ.SingleQuot||i===cJ.DoubleQuotation&&s!==hJ.DoubleQuot)l.type=cJ.String;else switch(s){case hJ.At:l.type=cJ.ActionList;break;case hJ.Equal:l.type=cJ.Equal;break;case hJ.DefineVariable:l.type=cJ.DefaultVariable;break;case hJ.SingleQuot:l.type=cJ.Quotation,i=i===cJ.None?cJ.Quotation:cJ.None;break;case hJ.DoubleQuot:l.type=cJ.DoubleQuotation,i=i===cJ.None?cJ.DoubleQuotation:cJ.None;break;case hJ.Function:l.type=cJ.Function;break;case hJ.If:l.type=cJ.If;break;case hJ.Else:l.type=cJ.Else;break;case hJ.Dollar:l.type=cJ.Variable;break;case hJ.Sharp:l.type=cJ.Child;break;case hJ.Dot:l.type=cJ.Dot;break;case hJ.Semicolon:l.type=cJ.Semicolon;break;case hJ.Slash:l.type=cJ.Slash;break;case hJ.True:case hJ.False:l.type=cJ.Boolean;break;case hJ.Comma:l.type=cJ.Comma;break;case hJ.Print:case hJ.Trace:l.type=cJ.Print;break;case hJ.This:l.type=cJ.This;break;case hJ.Global:l.type=cJ.Global;break;case hJ.System:l.type=cJ.System;break;case hJ.Random:l.type=cJ.Random;break;case hJ.Length:l.type=cJ.Length;break;case hJ.For:l.type=cJ.For;break;case hJ.In:l.type=cJ.In;break;case hJ.Break:l.type=cJ.Break;break;case hJ.Date:l.type=cJ.Date;break;case hJ.Pop:case hJ.Push:case hJ.Shift:case hJ.Unshift:case hJ.Concat:case hJ.Splice:l.type=cJ.ArrayFunction;break;case hJ.IndexOf:case hJ.Replace:case hJ.Split:case hJ.Substr:case hJ.Substring:l.type=cJ.StringFunction;break;case hJ.ParseInt:l.type=cJ.ParseInt;break;case hJ.ParseFloat:l.type=cJ.ParseFloat;break;case hJ.AddListener:case hJ.RemoveListener:case hJ.Emit:case hJ.PlaySound:case hJ.PauseSound:case hJ.ResumeSound:case hJ.JumpToScene:case hJ.JumpToNextScene:case hJ.JumpToPrevScene:case hJ.PlayAnimation:case hJ.StopAnimation:case hJ.GotoPlay:case hJ.GotoStop:case hJ.Wait:case hJ.SetTimeout:case hJ.SetInterval:case hJ.SetEnterFrame:l.type=cJ.NSFunction;break;case hJ.Add:case hJ.Minus:case hJ.Star:case hJ.Exclamation:case hJ.Vertical:case hJ.And:case hJ.Percent:case hJ.More:case hJ.Less:l.type=cJ.Option;break;case hJ.Colon:l.type=cJ.Colon;break;case hJ.BracketL:case hJ.BlockL:case hJ.SquareBracketL:l=void 0,t&&r.push(t),t=[];break;case hJ.BracketR:l.type=cJ.Bracket,l.value=t,t=r.length>0?r.pop():void 0;break;case hJ.BlockR:l.type=cJ.Block,l.value=t,t=r.length>0?r.pop():void 0;break;case hJ.SquareBracketR:l.type=cJ.SquareBracket,l.value=t,t=r.length>0?r.pop():void 0;break;default:this.regNumber.test(s)?l.type=cJ.Number:l.type=cJ.String}l&&(t?t.push(l):n.push(l))}return n}},{key:"parseAst",value:function(e){for(var t,n=[],r=[],i="",a=cJ.ActionList+cJ.String+cJ.Equal+cJ.Block,o=cJ.ActionList+cJ.Number+cJ.Equal+cJ.Block,s=cJ.ActionList+cJ.This+cJ.Equal+cJ.Block,l=0,u=e.length;l<u;l++){var c=e[l];c.type===cJ.Semicolon?(t=this.parseMainAst(r.concat(),i),r.length=0,i=""):(r.push(c),i+=c.type.toString()),i===a||i===o||i===s?(t=this.parseActionList(r.concat()),r.length=0,i=""):l===u-1&&(t=this.parseMainAst(r.concat(),i)),t&&(n.push(t),t=void 0)}return n}},{key:"parseMainAst",value:function(e,t){var n,r=cJ.ActionList+cJ.String+cJ.Equal+cJ.Block,i=cJ.ActionList+cJ.Number+cJ.Equal+cJ.Block,a=cJ.ActionList+cJ.This+cJ.Equal+cJ.Block;if(t===r||t===i||t===a)n=this.parseActionList(e.concat());else if(this.regComment.test(t))n=this.parseComment(e.concat());else if(this.regDefineVariable.test(t)){var o=this.parseDefineVariable(e.concat());o.length>0&&(n=o[0],o.length>1&&this.warn("define variable must be a simple const value"))}return n}},{key:"parseComment",value:function(e){if(!this.skipComment){for(var t={type:OQ.Comment,value:""},n=0,r=e.length;n<r;n++)t.value+=e[n].value;return t}}},{key:"parseActionList",value:function(e){return{type:OQ.ActionList,value:e[1].value,execute:this.parseBlock(e[3])}}},{key:"parseBlock",value:function(e){var t,n=[],r=[],i="",a=[],o=cJ.Function+cJ.String+cJ.Bracket+cJ.Block;if(e.type===cJ.Block&&(a=e.value),!a||0===a.length)return n;for(var s=0,l=a.length;s<l;s++){var u=a[s];if(u.type===cJ.Semicolon?(t=this.parseAction(r.concat(),i),r.length=0,i=""):(r.push(u),((i+=u.type.toString())===o||this.regNSFunction.test(i))&&(t=this.parseAction(r.concat(),i),r.length=0,i="")),s===l-1&&r.length>0&&(t=this.parseAction(r.concat(),i),r.length=0,i=""),t&&t.length){for(var c=0,h=t.length;c<h;c++)n.push(t[c]);t=void 0}}return n}},{key:"parseAction",value:function(e,t){var n=[];if(0===e.length)return n;this.log("parse action:",t);for(var r=0,i=this.actionRegs.length;r<i;r++){if(this.actionRegs[r].test(t)){var a=void 0;switch(r){case fJ.DefineVariable:var o=this.parseDefineVariable(e);2===o.length?(n.push(o[0]),a=o[1]):1===o.length&&(a=o[0]);break;case fJ.DefineFunction:a=this.parseDefineFunction(e);break;case fJ.Print:a=this.parsePrint(e);break;case fJ.IfGroup:a=this.parseIfGroup(e);break;case fJ.Express:a=this.parseExpressTask(e);break;case fJ.Comment:a=this.parseComment(e);break;case fJ.NSFunction:a=this.parseNSFunction(e);break;case fJ.CusFunction:a=this.parseCusFunction(e);break;case fJ.ArrayRandom:a=this.parseArrayRandom(e);break;case fJ.For:a=this.parseFor(e);break;case fJ.Break:a=this.parseBreak(e)}return a&&n.push(a),this.log("parse action result:",a),n}}return this.warn("parse action result: undefined",e),n}},{key:"parseDefineVariable",value:function(e){var t=2,n=4,r=!1;e.length>=6&&e[1].type===cJ.Global&&(t=3,n=5,r=!0);var i={type:OQ.DefineVariable,variableType:DQ.STRING,value:"",varId:e[t].value};r&&(i.target=[-1]);for(var a=e.concat(),o=0,s=n;o<s;o++)a.shift();var l=this.parseExpressType(a);if(1===l.length&&0===l[0][0])e[n].type===cJ.Number||e[n].type===cJ.String?(i.variableType=DQ.NUMBER,i.value=this.parseNumberFromTokens(e,n)):e[n].type===cJ.Quotation||e[n].type===cJ.DoubleQuotation?(i.variableType=DQ.STRING,i.value=this.parseStringFromTokens(e,n)):e[n].type===cJ.Boolean?(i.variableType=DQ.BOOLEAN,i.value=e[n].value===hJ.True):e[n].type===cJ.Block?(i.variableType=DQ.OBJECT,i.value=this.parseObjectFromBlock(e[n])):e[n].type===cJ.SquareBracket&&(i.variableType=DQ.ARRAY,i.value=this.parseArrayFromSquare(e[n]));else if(i.variableType=DQ.OBJECT,l.length>0)return l.unshift([5,"="]),r?l.unshift([1,[-1],i.varId]):l.unshift([1,[],i.varId]),[i,{type:OQ.Express,express:l}];return[i]}},{key:"parseDefineFunction",value:function(e){var t=this.parseFunctionParamFromBracket(e[2]);if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i[0]!==PQ.VARIABLE)throw new Error("function params error:"+t.join(","));this.functionParams.push(i[2])}var a={type:OQ.DefineFunction,formalParams:t.concat(),name:e[1].value,execute:this.parseBlock(e[3])};return this.functionParams.length=0,a}},{key:"parsePrint",value:function(e){var t={type:OQ.Print,value:""};return!e[1].value||e[1].value[0]!==cJ.Quotation&&e[1].value[0]!==cJ.DoubleQuotation?t.value=this.parseExpressItemFromBracket(e[1]):t.value=this.parseStringFromBracket(e[1]),t}},{key:"parseIfGroup",value:function(e){for(var t,n={type:OQ.IfGroup,execute:[]},r=[],i=[],a="",o=0,s=e.length;o<s;o++){var l=e[o];i.push(l),a+=l.type.toString(),this.regElseIf.test(a)?(t=this.parseElseIf(i.concat()),i.length=0,a=""):this.regIf.test(a)?(t=this.parseIf(i.concat()),i.length=0,a=""):this.regElse.test(a)&&(t=this.parseElse(i.concat()),i.length=0,a=""),t&&(r.push(t),t=void 0)}return n.execute=r,n}},{key:"parseIf",value:function(e){return{type:OQ.If,condition:this.parseExpressFromBracket(e[1]),execute:this.parseBlock(e[2])}}},{key:"parseElseIf",value:function(e){return{type:OQ.ElseIf,condition:this.parseExpressFromBracket(e[2]),execute:this.parseBlock(e[3])}}},{key:"parseElse",value:function(e){return{type:OQ.Else,execute:this.parseBlock(e[1])}}},{key:"parseExpressTask",value:function(e){return{type:OQ.Express,express:this.parseExpressType(e)}}},{key:"parseNSFunction",value:function(e){for(var t,n,r=0,i=e.length;r<i;r++)if(e[r].type===cJ.NSFunction){n=e[r];break}if(this.log("parse function before\uff1a",n,e),n)switch(n.value){case hJ.AddListener:t=this.parseAddListener(e);break;case hJ.RemoveListener:t=this.parseRemoveListener(e);break;case hJ.Emit:t=this.parseEmit(e);break;case hJ.PlaySound:t=this.parsePlaySound(e);break;case hJ.PauseSound:t=this.parsePauseSound(e);break;case hJ.ResumeSound:t=this.parseResumeSound(e);break;case hJ.JumpToScene:t=this.parseJumpToScene(e);break;case hJ.JumpToNextScene:t=this.parseJumpToNextScene(e);break;case hJ.JumpToPrevScene:t=this.parseJumpToPrevScene(e);break;case hJ.PlayAnimation:t=this.parsePlayAnimation(e);break;case hJ.StopAnimation:t=this.parseStopAnimation(e);break;case hJ.GotoPlay:t=this.parseGotoPlay(e);break;case hJ.GotoStop:t=this.parseGotoStop(e);break;case hJ.Wait:t=this.parseWait(e);break;case hJ.SetTimeout:t=this.parseSetTimeout(e);break;case hJ.SetInterval:t=this.parseSetInterval(e);break;case hJ.SetEnterFrame:t=this.parseSetEnterFrame(e)}return this.log("parse n function after:",t),t}},{key:"parseNSFunctionTarget",value:function(e){for(var t=[],n=0,r=e.length-2;n<r&&e[n+2].type!==cJ.Bracket;n++)t.push(e[n]);if(t.length>0)return this.parseComponentOrExpressItem(t)}},{key:"parseAddListener",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===cJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseEventParamFromBracket(t);if(i.ok){var a={type:OQ.AddEventListener,event:i.eventName,target:n};return e.length&&(e[0].type===cJ.Global?a.global=!0:e[0].type===cJ.System&&(a.system=!0)),Array.isArray(i.function)?a.execute=i.function:(a.funName=i.function,a.type=OQ.AddEventListenerCall),a}}}},{key:"parseRemoveListener",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===cJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseEventParamFromBracket(t);if(i.eventName){var a={type:OQ.RemoveEventListener,event:i.eventName,target:n};return e.length&&(e[0].type===cJ.Global?a.global=!0:e[0].type===cJ.System&&(a.system=!0)),a}}}},{key:"parseEmit",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===cJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseExpressTypeFromBracket(t),a={type:OQ.EmitEvent,event:"",target:n};return e.length&&(e[0].type===cJ.Global?a.global=!0:e[0].type===cJ.System&&(a.system=!0)),i&&i.length&&(a.event=i[0][1],i.length>1&&(a.eventData=i[1])),a}}},{key:"parseJumpToScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:OQ.JumpToScene,value:t[0][1]};return t.length>1&&(n.transition=t[1][1]),n}}},{key:"parseJumpToNextScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]),n={type:OQ.JumpToNextScene};return t.length>0&&(n.transition=t[0][1]),n}},{key:"parseJumpToPrevScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]),n={type:OQ.JumpToPrevScene};return t.length>0&&(n.transition=t[0][1]),n}},{key:"parsePlaySound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:OQ.PlaySound,value:t[0],trackId:"-1"};if(t.length>1&&(n.trackId=t[1][1]),t.length>2){var r=t[2];if(r[0]===PQ.CONST){var i=r[1];if("[object Object]"===Object.prototype.toString.call(i))for(var a in i)i[a]&&(n[a]=i[a])}}return n}}},{key:"parsePauseSound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:OQ.PauseSound,value:t[0],trackId:"-1"};return t.length>1&&(n.trackId=t[1][1]),n}}},{key:"parseResumeSound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:OQ.ResumeSound,value:t[0],trackId:"-1"};return t.length>1&&(n.trackId=t[1][1]),n}}},{key:"parsePlayAnimation",value:function(e){var t=this.parseCusFunction(e);return t.type=OQ.CallProtoFunction,t}},{key:"parseStopAnimation",value:function(e){var t=this.parseCusFunction(e);if(t&&t.target){var n={type:OQ.StopAnimation,target:t.target};return this.log("stopAnimation",n),n}}},{key:"parseCusFunction",value:function(e){var t={type:OQ.CallFunction,target:[],name:""},n=[],r=[],i=0,a=0;for(i=0,a=e.length-2;i<a&&e[i+2].type!==cJ.Bracket;i++)n.push(e[i]);for(a=e.length,i++;i<a;i++)r.push(e[i]);if(n.length>0&&r.length>0){var o=this.parseComponentOrExpressItem(n);if(t.target=o,r.length>=2&&(r[0].type===cJ.String||r[0].type===cJ.NSFunction)&&r[1].type===cJ.Bracket){var s=r[0].value,l=this.parseFunctionParamFromBracket(r[1]);return t.name=s,l.length>0&&(t.params=l),"tweenToPlay"===s&&(t.type=OQ.CallProtoFunction),t}}}},{key:"parseArrayRandom",value:function(e){var t,n={type:OQ.ArrayRandom,target:[]},r=[PQ.VARIABLE],i=[],a=0;for(a=0,t=e.length;a<t;a++)if(e[a].type!==cJ.This&&e[a].type!==cJ.Child)if(e[a].type===cJ.Global)i.push(-1);else if(e[a].type===cJ.String||e[a].type===cJ.Number)i.push(e[a].value);else if(e[a].type===cJ.Variable)break;if(r.push(i),a<t)for(;a<t;a++)if(e[a].type!==cJ.Variable)if(e[a].type===cJ.String||e[a].type===cJ.Number)r.push(e[a].value);else if(e[a].type===cJ.Dot)break;return n.target=r,n}},{key:"parseFor",value:function(e){var t=this.parseForinFromBracket(e[1]);if(t){var n={type:OQ.For,forin:t,execute:this.parseBlock(e[2])};return this.functionParams.length&&this.functionParams.pop(),n}}},{key:"parseBreak",value:function(e){return{type:OQ.Break}}},{key:"parseGotoPlay",value:function(e){var t=this.parseCusFunction(e);if(t)return t.type=OQ.CallProtoFunction,t.name="gotoPlay",t}},{key:"parseGotoStop",value:function(e){var t=this.parseCusFunction(e);if(t)return t.type=OQ.CallProtoFunction,t.name="gotoStop",t}},{key:"parseWait",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length)return{type:OQ.Wait,value:t[0]}}},{key:"parseSetTimeout",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===cJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=2){var i={type:OQ.SetTimeout};if(r[0].type===uJ.ExpressItem&&(i.value=r[0].value),r[1].type===uJ.Closure&&(i.execute=r[1].value),i.value&&i.execute)return i}}}},{key:"parseSetInterval",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===cJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=2){var i={type:OQ.SetInterval};if(r[0].type===uJ.ExpressItem&&(i.value=r[0].value),r[1].type===uJ.Closure?i.execute=r[1].value:r[1].type===uJ.ExpressItem&&(i.times=r[1].value),r.length>=3&&r[2].type===uJ.Closure&&(i.execute=r[2].value),i.value&&i.execute)return i}}}},{key:"parseSetEnterFrame",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===cJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=1){var i={type:OQ.EnterFrame};if(r[0].type===uJ.Closure)i.execute=r[0].value;else if(r[0].type===uJ.ExpressItem){var a="";return r[0].value[0]===PQ.PROPERTY&&(a=r[0].value[2]),i.type=OQ.EnterFrameCall,i.funName=a,i}if(i.execute)return i}}}},{key:"parseNumberFromTokens",value:function(e,t){var n="",r=e[t];if(n+=r.value,r.type===cJ.Option&&r.value===hJ.Minus)return-this.parseNumberFromTokens(e,t+1);if(e.length>t+2&&e[t+1].type===cJ.Dot&&e[t+2].type===cJ.Number)return n=n+"."+e[t+2].value,parseFloat(n);if(r.type===cJ.Number)return parseInt(n,10);if(r.type===cJ.String){if(0===n.indexOf("0x"))return parseInt(n,16);this.warn("parseNumber error:",r.value)}return this.warn("parseNumber error:",r),0}},{key:"parseStringFromTokens",value:function(e,t){for(var n="",r=0,i=t,a=e.length;i<a;i++){var o=e[i];if(o.type===cJ.Quotation||o.type===cJ.DoubleQuotation){if(++r>=2)break}else n+=o.value}return n}},{key:"parseObjectFromBlock",value:function(e){for(var t,n,r=[],i=[],a=e.value,o=!0,s={},l=0,u=a.length;l<u;l++){var c=a[l];c.type===cJ.Colon?o=!1:c.type===cJ.Comma?(o=!0,t=this.parseConst(r),n=this.parseConst(i),t&&n&&(s[t[1]]=n[1]),r.length=0,i.length=0):o?r.push(c):i.push(c)}return r.length>0&&i.length>0&&(t=this.parseConst(r),n=this.parseConst(i),t&&n&&(s[t[1]]=n[1]),r.length=0,i.length=0),s}},{key:"parseArrayFromSquare",value:function(e){for(var t=[],n=[],r=e.value,i=0,a=r.length;i<a;i++){var o=r[i];if(o.value===hJ.Comma){if(n.length){var s=this.parseConst(n);s&&t.push(s[1]),n.length=0}}else n.push(o)}if(n.length){var l=this.parseConst(n);l&&t.push(l[1]),n.length=0}return t}},{key:"parseStringFromBracket",value:function(e){if(e.type===cJ.Bracket)for(var t=e.value,n=0,r=t.length;n<r;n++){var i=t[n];if(i.type===cJ.Quotation||i.type===cJ.DoubleQuotation)return this.parseStringFromTokens(t,n)}return""}},{key:"parseExpressType",value:function(e){var t,n,r=[],i=[],a="",o=!1;if(!e||0===e.length)return r;for(var s=0,l=e.length;s<l;s++){var u=e[s];if(u.type!==cJ.Bracket||t&&(t.type===cJ.ArrayFunction||t.type===cJ.StringFunction||t.type===cJ.ParseInt||t.type===cJ.ParseFloat||t.type===cJ.Random)){if(u.type===cJ.Option||u.type===cJ.Slash||u.type===cJ.Equal){var c=!1;o?u.value===hJ.Exclamation?(n=this.parseOperate(i.concat(),a),i.length=0,a=""):u.value===hJ.Minus&&(n=this.parseOperate(i.concat(),a),i.length=0,a="",c=!0):(n=this.parseExpressItem(i.concat(),a),i.length=0,a=""),i.push(u),a+=u.type.toString(),o=!0,c&&(o=!1,c=!1)}else o&&(n=this.parseOperate(i.concat(),a),i.length=0,a=""),i.push(u),a+=u.type.toString(),o=!1;n&&(r.push(n),n=void 0)}else if(u.value&&Array.isArray(u.value)){var h=u.value,d=this.parseExpressType(h);if(d.length){a&&o&&(n=this.parseOperate(i.concat(),a),i.length=0,a="",o=!1,n&&(r.push(n),n=void 0)),r.push([5,"("]);for(var f=0,p=d.length;f<p;f++)r.push(d[f]);r.push([5,")"])}}t=u}return!o&&i.length>0&&(n=this.parseExpressItem(i.concat(),a),i.length=0,a=""),n&&(r.push(n),n=void 0),r}},{key:"parseExpressFromBracket",value:function(e){var t;return e.type===cJ.Bracket&&(t=e.value),t&&0!==t.length?this.parseExpressType(t):[]}},{key:"parseExpressItemFromBracket",value:function(e){var t;if(e.type===cJ.Bracket&&(t=e.value),!t||0===t.length)return[];for(var n="",r=0,i=t.length;r<i;r++)n+=t[r].type;return this.parseExpressItem(t,n)}},{key:"parseExpressItem",value:function(e,t){var n=[];if(e&&0!==e.length){var r=new RegExp(gJ),i=new RegExp(yJ),a=new RegExp(xJ),o=new RegExp(mJ+"$"),s=new RegExp(TJ),l=new RegExp(IJ),u=new RegExp(SJ),c=new RegExp(kJ),h=new RegExp(vJ),d=new RegExp(EJ),f=new RegExp(CJ),p=new RegExp(AJ);return this.log("pares express start:",e,t),s.test(t)?(this.log("parse array index"),this.parseArrayIndex(e)):l.test(t)?(this.log("parse array length"),this.parseArrayLength(e)):u.test(t)?(this.log("parse array function"),this.parseArrayFunction(e)):c.test(t)?(this.log("parse string function"),this.parseStringFunction(e)):f.test(t)?(this.log("parseP arseInt"),this.parseParseInt(e)):p.test(t)?(this.log("parse ParseFlot"),this.parseParseFloat(e)):o.test(t)?(this.log("parse variable"),this.parseVariable(e)):r.test(t)?(this.log("parse property"),this.parseProperty(e)):i.test(t)?(this.log("parse object "),this.parseVariable(e)):h.test(t)?(this.log("parse component"),this.parseComponentExpress(e)):a.test(t)?(this.log("parse const"),this.parseConst(e)):d.test(t)?this.parseDate(e):(this.log("pares express fail:",e,t),n.length>0?n:void 0)}}},{key:"parseOperate",value:function(e,t){for(var n="",r=0,i=e.length;r<i;r++)n+=e[r].value;return[PQ.OPERATION,n]}},{key:"parseConst",value:function(e){var t=[0];if(e[0].type===cJ.Quotation||e[0].type===cJ.DoubleQuotation||e[0].type===cJ.String?t.push(this.parseStringFromTokens(e,0)):e[0].type===cJ.Block?t.push(this.parseObjectFromBlock(e[0])):e[0].type===cJ.SquareBracket?t.push(this.parseArrayFromSquare(e[0])):e[0].type===cJ.Number||e[0].type===cJ.Option&&e[0].value===hJ.Minus?t.push(this.parseNumberFromTokens(e,0)):e[0].type===cJ.Boolean&&t.push("true"===e[0].value),t.length>1)return t}},{key:"parseDate",value:function(e){var t;if(e.length>=3&&e[0].type===cJ.Date&&e[1].type===cJ.Dot)switch(t=[PQ.SYSTEM],e[2].value){case"time":t.push(MQ.TIME);break;case"year":t.push(MQ.YEAR);break;case"month":t.push(MQ.MONTH);break;case"day":t.push(MQ.DAY);break;case"date":t.push(MQ.DATE);break;case"hour":t.push(MQ.HOUR);break;case"minute":t.push(MQ.MINUTE);break;case"second":t.push(MQ.SECOND);break;case"millisecond":t.push(MQ.MILLISECOND);break;default:t=void 0}return t}},{key:"parseVariable",value:function(e){var t,n=[PQ.VARIABLE],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==cJ.This&&e[i].type!==cJ.Child)if(e[i].type===cJ.Global)r.push(-1);else if(e[i].type===cJ.String||e[i].type===cJ.Number)r.push(e[i].value);else if(e[i].type===cJ.Variable)break;if(n.push(r),i<t)for(;i<t;i++)if(e[i].type!==cJ.Variable)if(e[i].type===cJ.String||e[i].type===cJ.Number)n.push(e[i].value);else if(e[i].type===cJ.Dot)break;if(i<t)for(n[0]=PQ.OBJECT_VALUE;i<t;i++)e[i].type!==cJ.Dot&&(e[i].type!==cJ.String&&e[i].type!==cJ.Number||(n.push(e[i].value),n[0]=PQ.OBJECT_VALUE));if(this.functionParams.length>0){var a=n[2],o=this.functionParams.indexOf(a);o>=0&&(n[0]=PQ.PARAM_VALUE,n[1]=o)}return n}},{key:"parseComponentExpress",value:function(e){var t,n=[PQ.COMPONENT],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==cJ.This&&e[i].type!==cJ.Child)if(e[i].type===cJ.Global)r.push(-1);else if(e[i].type===cJ.String||e[i].type===cJ.Number)r.push(e[i].value);else if(e[i].type===cJ.Dot)break;return n.push(r),n}},{key:"parseProperty",value:function(e){var t,n=[PQ.PROPERTY],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==cJ.This&&e[i].type!==cJ.Child)if(e[i].type===cJ.Global)r.push(-1);else if(e[i].type===cJ.String||e[i].type===cJ.Number)r.push(e[i].value);else if(e[i].type===cJ.Dot)break;if(n.push(r),i<t)for(;i<t;i++)e[i].type!==cJ.Dot&&(e[i].type!==cJ.String&&e[i].type!==cJ.Number||n.push(e[i].value));return n}},{key:"parseArrayIndex",value:function(e){var t,n=[PQ.ARRAY_VALUE],r=[],i=[],a=0;for(a=0,t=e.length;a<t;a++)if(e[a].type!==cJ.This&&e[a].type!==cJ.Child)if(e[a].type===cJ.Global)r.push(-1);else if(e[a].type===cJ.String||e[a].type===cJ.Number)r.push(e[a].value);else if(e[a].type===cJ.Variable)break;if(n.push(r),a<t)for(;a<t;a++)if(e[a].type!==cJ.Variable)if(e[a].type===cJ.String||e[a].type===cJ.Number)n.push(e[a].value);else if(e[a].type===cJ.SquareBracket){var o=this.parseExpressTypeFromBracket(e[a]);o&&o.length&&i.push(o[0])}else if(e[a].type===cJ.Dot)break;for(var s=0,l=i.length;s<l;s++)n.push(i[s]);if(a<t)for(;a<t;a++)e[a].type!==cJ.Dot&&(e[a].type!==cJ.String&&e[a].type!==cJ.Number||n.push(e[a].value));return n}},{key:"parseArrayLength",value:function(e){var t,n=[PQ.ARRAY_LEN],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==cJ.This&&e[i].type!==cJ.Child)if(e[i].type===cJ.Global)r.push(-1);else if(e[i].type===cJ.String||e[i].type===cJ.Number)r.push(e[i].value);else if(e[i].type===cJ.Variable)break;if(n.push(r),i<t)for(;i<t;i++)if(e[i].type!==cJ.Variable)if(e[i].type===cJ.String||e[i].type===cJ.Number)n.push(e[i].value);else if(e[i].type===cJ.Dot)break;return n}},{key:"parseArrayFunction",value:function(e){var t=[PQ.ARRAY_FUNCTION],n=[],r=[],i="",a=0,o=0;for(a=0,o=e.length;a<o;a++)if(e[a].type!==cJ.This&&e[a].type!==cJ.Child)if(e[a].type===cJ.Global)n.push(-1);else if(e[a].type===cJ.String||e[a].type===cJ.Number)n.push(e[a].value);else if(e[a].type===cJ.Variable)break;if(t.push(n),a<o)for(;a<o;a++)if(e[a].type!==cJ.Variable)if(e[a].type===cJ.String||e[a].type===cJ.Number)t.push(e[a].value);else if(e[a].type===cJ.Dot)break;if(a<o)for(;a<o;a++)e[a].type===cJ.ArrayFunction?i=e[a].value:e[a].type===cJ.Bracket&&(r=this.parseExpressTypeFromBracket(e[a]));if(t.push(i),r&&r.length)for(a=0,o=r.length;a<o;a++)t.push(r[a]);return t}},{key:"parseStringFunction",value:function(e){var t=[PQ.STRING_FUNCTION],n=[],r=[],i="",a=0,o=0;for(a=0,o=e.length;a<o;a++)if(e[a].type!==cJ.This&&e[a].type!==cJ.Child)if(e[a].type===cJ.Global)n.push(-1);else if(e[a].type===cJ.String||e[a].type===cJ.Number)n.push(e[a].value);else if(e[a].type===cJ.Variable)break;if(t.push(n),a<o)for(;a<o;a++)if(e[a].type!==cJ.Variable)if(e[a].type===cJ.String||e[a].type===cJ.Number)t.push(e[a].value);else if(e[a].type===cJ.Dot)break;if(a<o)for(;a<o;a++)e[a].type===cJ.StringFunction?i=e[a].value:e[a].type===cJ.Bracket&&(r=this.parseExpressTypeFromBracket(e[a]));if(t.push(i),r&&r.length)for(a=0,o=r.length;a<o;a++)t.push(r[a]);return t}},{key:"parseParseInt",value:function(e){var t=[PQ.PARSE_INT],n=0,r=e.length,i=[];if(n<r)for(;n<r;n++)e[n].type===cJ.Bracket&&(i=this.parseExpressTypeFromBracket(e[n]));if(i&&i.length)for(n=0,r=i.length;n<r;n++)t.push(i[n]);return t}},{key:"parseParseFloat",value:function(e){var t=[PQ.PARSE_FLOAT],n=0,r=e.length,i=[];if(n<r)for(;n<r;n++)e[n].type===cJ.Bracket&&(i=this.parseExpressTypeFromBracket(e[n]));if(i&&i.length)for(n=0,r=i.length;n<r;n++)t.push(i[n]);return t}},{key:"parseComponentOrExpressItem",value:function(e){for(var t="",n=0,r=e.length;n<r;n++){t+=e[n].type}return this.regExpressItem.test(t)?this.parseExpressItem(e,t):this.parseComponent(e)}},{key:"parseComponent",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i.type!==cJ.Number&&i.type!==cJ.String||t.push(i.value)}return t}},{key:"parseEventParamFromBracket",value:function(e){var t={ok:!1,eventName:"",function:""},n=[],r=[],i="",a=!1,o=!1,s=[];if(e.type!==cJ.Bracket)return t;for(var l=0,u=(s=e.value).length;l<u;l++){var c=s[l];a?(r.push(c),i+=c.type):c.type!==cJ.Comma?n.push(c):a=!0}if(3!==n.length||n[1].type!==cJ.String&&n[1].type!==cJ.Number||(t.eventName=n[1].value,o=!0),this.regClosureMaybe.test(i)&&r[2].value===hJ.More)t.function=this.parseBlock(r[3]),o&&(t.ok=!0);else if(this.regEventListenerFun.test(i)){for(var h=[],d=0,f=s.length;d<f;d++)if(s[d].type===cJ.Dot){if(d<f-1&&s[d+1].type===cJ.String){t.function=s[d+1].value,o&&(t.ok=!0);break}}else h.push(s[d]);this.parseTargetComponent(h)}return t}},{key:"parseFunctionParamFromBracket",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==cJ.Bracket)return t;for(var a=0,o=(i=e.value).length;a<o;a++){var s=i[a];if(s.type!==cJ.Comma)n.push(s),r+=s.type;else{var l=this.parseExpressItem(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(a>=o-1&&n.length>0){var u=this.parseExpressItem(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseFunctionParamFromBracket2",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==cJ.Bracket)return t;for(var a=0,o=(i=e.value).length;a<o;a++){var s=i[a];if(s.type!==cJ.Comma)n.push(s),r+=s.type;else{var l=this.parseFunctionOneParam(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(a>=o-1&&n.length>0){var u=this.parseFunctionOneParam(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseFunctionOneParam",value:function(e,t){if(this.regClosureMaybe.test(t)&&e[2].value===hJ.More){var n=this.parseBlock(e[3]);return{type:uJ.Closure,value:n}}var r=this.parseExpressItem(e,t);return{type:uJ.ExpressItem,value:r}}},{key:"parseExpressTypeFromBracket",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==cJ.Bracket&&e.type!==cJ.SquareBracket)return t;for(var a=0,o=(i=e.value).length;a<o;a++){var s=i[a];if(s.type!==cJ.Comma)n.push(s),r+=s.type;else{var l=this.parseExpressItem(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(a>=o-1&&n.length>0){var u=this.parseExpressItem(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseForinFromBracket",value:function(e){var t=[];if(e.type===cJ.Bracket||e.type===cJ.SquareBracket){if((t=e.value).length>=4&&t[2].type===cJ.In){var n=[t[0],t[1]],r=t.concat();r.splice(0,3);var i=this.parseVariable(n);return i&&i.length>=3&&i[0]===PQ.VARIABLE?(this.functionParams.push(i[2]),r.length>=2?this.parseVariable(r):1===r.length?this.parseConst(r):void this.warn("for in params wrong",t)):void this.warn("for in params wrong",t)}this.warn("for in params wrong",t)}}},{key:"parseTargetComponent",value:function(e){var t,n=[],r=0;for(r=0,t=e.length;r<t;r++)if(e[r].type!==cJ.This&&e[r].type!==cJ.Child)if(e[r].type===cJ.Global)n.push(-1);else{if(e[r].type!==cJ.String&&e[r].type!==cJ.Number)break;n.push(e[r].value)}return n}},{key:"log",value:function(e){if(this.debug){var t=[];e&&t.push(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r&&(t=t.concat(r))}}},{key:"warn",value:function(e){var t=[];e&&t.push(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r&&(t=t.concat(r))}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();MJ._instance=void 0;var RJ=function(e){p(n,e);var t=g(n);function n(e,r,i,a){var o;return l(this,n),(o=t.call(this)).funName=void 0,o.component=void 0,o.fun=void 0,o.data=void 0,o.funId="",o.component=e,o.funName=r,o.fun=a,o.fun.formalParams=i.formalParams,o.data=i,o}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component){var e=this.context.variableManager,t=this.funName,r=e.getTargetComponent(this.component,this.data.target);r&&(t=r.id+this.funName),e.setFunctionTask(t,this.fun),this.complete()}else this.complete()}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.fun&&this.fun.stop()}}]),n}(FQ),NJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){if(lm(v(n.prototype),"run",this).call(this),this.component&&this.context.variableManager){var e=this.context.variableManager,t=e.getTargetComponent(this.component,this.data.target);t?e.addVariableDataToComponent(t,this.data.varId,this.data.variableType,this.data.value):e.addVariableDataToGlobal(this.data.varId,this.data.variableType,this.data.value)}this.complete()}}]),n}(FQ),DJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;if(l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.loopTaskComplete=!0,i.callfun=void 0,i.callfunData=void 0,i.curTime=0,i.lastTime=0,i.funName=void 0,i.component=e,i.data=r,i.funName=r.funName,i.funName){i.callfunData={type:OQ.CallFunction,name:i.funName,params:[]};var a=new lJ(i.component,i.funName,i.callfunData);i.callfun=a,i.loopTask.addTask(a)}return i}return d(n,[{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this.component&&this.component?(this.loopTask&&this.loopTask.addListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.curTime=(new Date).getTime(),this.lastTime=this.curTime,tb.shared.add(this.tick,this)):this.complete()}},{key:"complete",value:function(){lm(v(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.component&&tb.shared.remove(this.tick,this)}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.complete()}},{key:"pause",value:function(){lm(v(n.prototype),"pause",this).call(this),this.component&&tb.shared.remove(this.tick,this)}},{key:"resume",value:function(){this._isPaused&&this.component&&tb.shared.add(this.tick,this),lm(v(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0}},{key:"tick",value:function(){if(this.loopTaskComplete&&this.loopTask){this.curTime=(new Date).getTime();var e=this.curTime-this.lastTime;this.callfunData&&(this.callfunData.params=[e]),this.loopTaskComplete=!1,this.loopTask.run(),this.lastTime=this.curTime}}}]),n}(qQ),LJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.loopTaskComplete=!0,i.component=e,i.data=r,i}return d(n,[{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this.component?(this.loopTask&&this.loopTask.addListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this),tb.shared.add(this.tick,this)):this.complete()}},{key:"complete",value:function(){lm(v(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this),tb.shared.remove(this.tick,this)}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.complete()}},{key:"pause",value:function(){lm(v(n.prototype),"pause",this).call(this),tb.shared.remove(this.tick,this)}},{key:"resume",value:function(){this._isPaused&&tb.shared.add(this.tick,this),lm(v(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0}},{key:"tick",value:function(){this.loopTaskComplete&&this.loopTask&&this.loopTask.run()}}]),n}(qQ),FJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).funName=void 0,i.formalParams=void 0,i.component=void 0,i._loopComplete=void 0,i.callTargets=[],i._loopComplete=!1,i.component=e,i.funName=r,i}return d(n,[{key:"injectParams",value:function(e){this.loopTask&&this.context.injectParamsToQueueTask(this.loopTask,e)}},{key:"runWithId",value:function(e){this._isRunning||(this.callTargets.push(e),this.run())}},{key:"stopWithId",value:function(e){var t=this.callTargets.indexOf(e);t>=0&&(t>0?this.callTargets.splice(t,1):(this.callTargets.splice(t,1),this._isRunning&&this.loopTask.stop()))}},{key:"breakWithId",value:function(e){var t=this.callTargets.indexOf(e);t>=0&&(t>0?this.callTargets.splice(t,1):(this.callTargets.splice(t,1),this._isRunning&&this.loopTask.break()))}},{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this._loopComplete=!0,this.loopTask&&(this.loopTask.on(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(LQ.EVENT_BREAK,this.onBreak,this)),this.callTargets.length>0?this.loopTask.run():this.complete()}},{key:"stop",value:function(){this.complete(),lm(v(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),lm(v(n.prototype),"break",this).call(this)}},{key:"complete",value:function(){this.callTargets.length=0,this.loopTask.off(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.off(LQ.EVENT_BREAK,this.onBreak,this),lm(v(n.prototype),"complete",this).call(this)}},{key:"onLoopComplete",value:function(){if(this.callTargets.length>0){var e=this.callTargets[0];this.callTargets.shift(),this._isRunning=!1,this.emit(LQ.FUNCTION_RUN_COMPLETE,e)}this.callTargets.length>0?this.loopTask.run():this.complete()}}]),n}(qQ),BJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.lastTimes=0,i.loopTaskComplete=!0,i.intervalComplete=!0,i.timeoutHandler=void 0,i._timeout=0,i._times=1,i.component=e,i.data=r,i}return d(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return YQ(e)||(e=1),e}},{key:"times",get:function(){var e=0;Array.isArray(this.data.times)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.times)):e=void 0===this.data.times?0:this.data.times;return YQ(e)||(e=0),e}},{key:"run",value:function(){lm(v(n.prototype),"run",this).call(this),this._timeout=this.timeout,this._times=this.times,this.lastTimes=this._times,this.loopTask&&this.loopTask.addListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this),this.runOnce(this._timeout,this._times)}},{key:"complete",value:function(){lm(v(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(LQ.EVENT_COMPLETE,this.onLoopComplete,this)}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.complete()}},{key:"resume",value:function(){this._isPaused&&this.loopTaskComplete&&this.intervalComplete&&this.checkComplete(this._timeout,this._times),lm(v(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0,this.intervalComplete&&this.checkComplete(this._timeout,this._times)}},{key:"runOnce",value:function(e,t){var n=this;this.intervalComplete=!1,this.timeoutHandler=setTimeout((function(){n.intervalComplete=!0,n.timeoutHandler&&clearTimeout(n.timeoutHandler),n.loopTaskComplete&&n.intervalComplete&&n.checkComplete(e,t)}),e)}},{key:"checkComplete",value:function(e,t){if(!this._isPaused&&!this._isCompleted){t>0&&!(this.lastTimes>0)?this.complete():(this.lastTimes--,this.loopTask?(this.loopTaskComplete=!1,this.runOnce(e,t),this.loopTask.run()):this.complete())}}}]),n}(qQ),UJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.timeoutHandler=void 0,i.component=e,i.data=r,i}return d(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return YQ(e)||(e=1),e}},{key:"run",value:function(){var e=this;lm(v(n.prototype),"run",this).call(this);var t=this.timeout;this.timeoutHandler=setTimeout((function(){e.timeoutHandler&&(e.timeoutHandler.stop(),e.timeoutHandler=void 0),e.loopTask&&e.loopTask.run()}),t),this.complete()}},{key:"stop",value:function(){lm(v(n.prototype),"stop",this).call(this),this.complete(),this.timeoutHandler&&this.timeoutHandler.stop()}}]),n}(qQ),HJ=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.timeoutHandler=void 0,i.component=e,i.data=r,i}return d(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return YQ(e)||(e=1),e}},{key:"run",value:function(){var e=this;lm(v(n.prototype),"run",this).call(this);var t=this.timeout;this.timeoutHandler=setTimeout((function(){e.timeoutHandler&&(e.timeoutHandler.stop(),e.timeoutHandler=void 0),e.complete()}),t)}}]),n}(FQ),jJ=function(){function e(t,n){l(this,e),this.thisTarget=void 0,this.data=void 0,this._actionList=[],this.thisTarget=t,this.data=n,this.parseData()}return d(e,[{key:"context",get:function(){return oJ.instance}},{key:"runWithContext",value:function(e){this.thisTarget=e,this.context.variableManager.addVariableToContext(e),this.run(),this.context.variableManager.clearVariableToContext(e)}},{key:"run",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].run()}}},{key:"stop",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].stop()}}},{key:"pause",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].pause()}}},{key:"resume",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].resume()}}},{key:"parseData",value:function(){if(this.data)if(Array.isArray(this.data))this.parseAST(this.data);else{var e,t=MJ.instance.parse(this.data);if(t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n];switch(i.type){case OQ.DefineVariable:this.addGlobalVariable(i);break;case OQ.ActionList:"this"!==i.value&&this.thisTarget.libId.toString()!==i.value||(e=i.execute)}}e&&this.parseAST(e)}}},{key:"addGlobalVariable",value:function(e){this.context.variableManager.addVariableDataToGlobal(e.varId,e.variableType,e.value)}},{key:"parseAST",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++){var r=this.parseAction(e[t]);r&&this._actionList.push(r)}}},{key:"parseAction",value:function(e){var t;switch(e.type){case OQ.Add:t=this.parseAddToStageBefore(e);break;case OQ.Added:t=this.parseAddToStage(e);break;case OQ.SetProperty:t=this.parseSetProperty(e);break;case OQ.Click:t=this.parseClick(e);break;case OQ.Express:t=this.parseExpress(e);break;case OQ.IfGroup:t=this.parseIf(e);break;case OQ.DefineFunction:t=this.parseDefineFunction(e);break;case OQ.CallFunction:t=this.parseCallFunction(e);break;case OQ.Print:t=this.parsePrint(e);break;case OQ.AddEventListener:t=this.parseAddEventListener(e);break;case OQ.RemoveEventListener:t=this.parseRemoveEventListener(e);break;case OQ.EmitEvent:t=this.parseEmitEvent(e);break;case OQ.ArrayInit:t=new UQ(this.thisTarget,e);break;case OQ.ArrayPop:t=new HQ(this.thisTarget,e);break;case OQ.ArrayPush:t=new jQ(this.thisTarget,e);break;case OQ.ArraySplice:t=new GQ(this.thisTarget,e);break;case OQ.ArrayRandom:t=new zQ(this.thisTarget,e);break;case OQ.ArrayConcat:t=new BQ(this.thisTarget,e);break;case OQ.ArrayShift:t=new VQ(this.thisTarget,e);break;case OQ.ArrayUnshift:t=new WQ(this.thisTarget,e);break;case OQ.AddEventListenerCall:t=this.parseAddEventListenerCall(e);break;case OQ.DefineVariable:t=new NJ(this.thisTarget,e);break;case OQ.CallProtoFunction:t=new ZQ(this.thisTarget,e);break;case OQ.GotoPlay:var n=e,r={type:OQ.CallProtoFunction,target:n.target,name:"gotoPlay",params:[]};Array.isArray(n.name)?r.params.push(n.name):r.params.push([0,n.name]),Array.isArray(n.frame)?r.params.push(n.frame):r.params.push([0,n.frame]),Array.isArray(n.times)?r.params.push(n.times):r.params.push([0,n.times]),Array.isArray(n.trackId)?r.params.push(n.trackId):r.params.push([0,n.trackId||0]),t=new ZQ(this.thisTarget,r);break;case OQ.GotoStop:var i=e,a={type:OQ.CallProtoFunction,target:i.target,name:"gotoStop",params:[]};Array.isArray(i.name)?a.params.push(i.name):a.params.push([0,i.name]),Array.isArray(i.frame)?a.params.push(i.frame):a.params.push([0,i.frame]),t=new ZQ(this.thisTarget,a);break;case OQ.For:t=this.parseFor(e);break;case OQ.Break:t=new XQ;break;case OQ.Wait:t=new HJ(this.thisTarget,e);break;case OQ.SetTimeout:t=this.parseSetTimeout(e);break;case OQ.SetInterval:t=this.parseSetInterval(e);break;case OQ.EnterFrame:t=this.parseEnterFrame(e);break;case OQ.EnterFrameCall:t=this.parseEnterFrameCall(e)}return t}},{key:"parseSubTask",value:function(e,t){if(t.execute)for(var n=0,r=t.execute.length;n<r;n++){var i=t.execute[n],a=this.parseAction(i);a&&e.addSubTask(a)}}},{key:"parseAddToStageBefore",value:function(e){var t={type:OQ.AddEventListener,event:RQ.Add,target:[]},n=new $Q(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseAddToStage",value:function(e){var t={type:OQ.AddEventListener,event:RQ.Added,target:[]},n=new $Q(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseSetProperty",value:function(e){return new iJ(this.thisTarget,e)}},{key:"parseClick",value:function(e){var t={event:RQ.Click,type:OQ.AddEventListener,target:e.target},n=new $Q(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseExpress",value:function(e){return new JQ(this.thisTarget,e)}},{key:"parseIf",value:function(e){var t=new tJ(this.thisTarget);if(e.execute)for(var n=0,r=e.execute.length;n<r;n++){var i=e.execute[n];if(i.type===OQ.If||i.type===OQ.ElseIf||i.type===OQ.Else){var a=i.condition,o=new KQ;if(i.execute)for(var s=0,l=i.execute.length;s<l;s++){var u=this.parseAction(i.execute[s]);u&&o.addTask(u)}t.addCondition(a,o)}}return t}},{key:"parseDefineFunction",value:function(e){var t=new FJ(this.thisTarget,e.name);return this.parseSubTask(t,e),new RJ(this.thisTarget,e.name,e,t)}},{key:"parseCallFunction",value:function(e){return new lJ(this.thisTarget,e.name,e)}},{key:"parsePrint",value:function(e){return new nJ(this.thisTarget,e)}},{key:"parseAddEventListener",value:function(e){var t=new $Q(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseRemoveEventListener",value:function(e){return new rJ(this.thisTarget,e)}},{key:"parseEmitEvent",value:function(e){return new QQ(this.thisTarget,e)}},{key:"parseAddEventListenerCall",value:function(e){if(e.funName)return new aJ(this.thisTarget,e)}},{key:"parseFor",value:function(e){var t=new eJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseSetTimeout",value:function(e){var t=new UJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseSetInterval",value:function(e){var t=new BJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseEnterFrame",value:function(e){var t=new LJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseEnterFrameCall",value:function(e){return new DJ(this.thisTarget,e)}}]),e}(),zJ=function(){function e(){l(this,e),this._runMap={}}return d(e,[{key:"run",value:function(e,t){var n=this.getActionList(e,t);n&&n.runWithContext(t)}},{key:"getActionList",value:function(e,t){var n=this._runMap[e];return n||(n=new jJ(t,e),this._runMap[e]=n),n}}],[{key:"toString",value:function(){return"ActionRuntime"}},{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}},{key:"run",value:function(t,n){var r="@this={".concat(t,"}"),i={target:n,libId:0,id:0};e.instance.run(r,i)}}]),e}();zJ._instance=void 0;var VJ=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),r=t.call(this,e);var i=e.value;return void 0===i&&(i=ge(e.defaultValue)),r.state={value:i},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.reRender(e)}},{key:"getCurValue",value:function(){var e=this.state.value;return e||(e=this.props.defaultValue),e||(e={}),e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;void 0===t&&(t=e.defaultValue),this.state.value!==t&&this.setState({value:t})}},{key:"reRender",value:function(e){var t=!1;if(this.props&&this.props.content)for(var n=0,r=this.props.content.length;n<r;n++){if(this.props.content[n].action){t=!0;break}}if(t)this.setState({value:e});else{var i=gmvc.ObjectUtil.diffObject(e,this.state.value);if(i&&i.length)for(var a=this.refs,o=0,s=i.length;o<s;o++){var l=i[o].split(".")[0];if(!a[l]){t=!0;break}var u=e[l];a[l].value=u}}t&&this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(this.state.value,this.props.content);return(0,hf.jsx)("div",{className:"obj-input",children:t.map((function(t,n){return e.renderPropertyItem(t,n)}))})}},{key:"renderPropertyItem",value:function(e,t){var n=this;if(e){if(e.action){var r={config:e,target:this.state.value};zJ.run(e.action,r)}if(!e.hide)return(0,hf.jsxs)("div",{className:"property-item",children:[(0,hf.jsx)("span",{className:"property-item-label",children:e.label}),(0,hf.jsx)("div",{className:"property-item-content",children:e.items.map((function(e,t){return n.renderPropertyOne(e,t)}))})]},t)}}},{key:"renderPropertyOne",value:function(e,t){if(e.hide)return null;var n=this.getCurValue();if(e.property){var r=n[e.property],i=e.mutation;e.componentProp.value!=r&&(e.componentProp.value=r),e.componentProp.onChange=this.getValueChangeFunction(n,e.property,i)}return e.componentProp.continuousStartCallback=this.props.continuousStartCallback,e.componentProp.continuousEndCallback=this.props.continuousEndCallback,e.componentProp.itemFunName&&this.props.context&&(e.componentProp.getItems=this.props.context[e.componentProp.itemFunName]),(0,a.createElement)(A0,Pe(Pe({},e),{},{key:t,ref:e.property}))}},{key:"getValueChangeFunction",value:function(e,t,n){var r=this;return function(e){var n=ge(r.getCurValue());n[t]=e,r.props.onChange&&r.props.onChange(n)}}}]),n}(a.Component),GJ=function(e){return e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Command=91]="Command",e[e.Number0=48]="Number0",e[e.Number1=49]="Number1",e[e.Number2=50]="Number2",e[e.Number3=51]="Number3",e[e.Number4=52]="Number4",e[e.Number5=53]="Number5",e[e.Number6=54]="Number6",e[e.Number7=55]="Number7",e[e.Number8=56]="Number8",e[e.Number9=57]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e}({}),WJ=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.onFocus=function(e){var t=r.props.onFocus;t&&t(e),window.addEventListener("keydown",r.onEnterKeyDown)},r.onBlur=function(e){var t=r.props,n=t.onBlur,i=t.onChange;n&&n(e),r.state.value!==r.props.value&&i&&i(r.state.value),window.removeEventListener("keydown",r.onEnterKeyDown)},r.onChange=function(e){var t=e.target.value;r.setState({value:t})},r.curValue=e.value,r.state={value:r.curValue},r}return d(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value;return(0,hf.jsx)(Ld,{value:e,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange})}},{key:"onEnterKeyDown",value:function(e){if(e.keyCode===GJ.Enter){var t=e.target;t instanceof HTMLInputElement&&t.blur()}}}]),n}(a.Component),XJ=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e,t){},r.curValue="1",r.state={value:r.curValue,prevValue:r.curValue},r}return d(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.buttons,r=t.toggle,i=void 0!==r&&r;return(0,hf.jsx)("div",{className:"button-group",children:n.map((function(t,n){return(0,hf.jsx)(SA,{icon:t.icon,clickCallback:function(n){e.onChange(n,t.value)},toggle:i},n)}))})}}]),n}(a.Component),YJ=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).onClick=function(e){e.stopPropagation();var t=!r.state.selected;r.props.toggle&&r.setState({selected:t}),r.props.onChange&&r.props.onChange(t)},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return d(n,[{key:"render",value:function(){var e=this.props.icon;return this.props.toggle&&this.state.selected&&this.props.selectedIcon&&(e=this.props.selectedIcon),this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsx)("div",{className:"icon-button",onClick:this.onClick,children:(0,hf.jsx)(mT,{type:e})})}):(0,hf.jsx)("div",{className:"icon-button",onClick:this.onClick,children:(0,hf.jsx)(mT,{type:e})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),KJ=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function qJ(e,t,n){return(e-t)/(n-t)}function $J(e,t,n,r){var i=qJ(t,n,r),a={};switch(e){case"rtl":a.right="".concat(100*i,"%"),a.transform="translateX(50%)";break;case"btt":a.bottom="".concat(100*i,"%"),a.transform="translateY(50%)";break;case"ttb":a.top="".concat(100*i,"%"),a.transform="translateY(-50%)";break;default:a.left="".concat(100*i,"%"),a.transform="translateX(-50%)"}return a}function ZJ(e,t){return Array.isArray(e)?e[t]:e}var QJ=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],JJ=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.value,s=e.valueIndex,l=e.onStartMove,u=e.style,c=e.render,h=e.dragging,d=e.onOffsetChange,f=Wn(e,QJ),p=a.useContext(KJ),v=p.min,m=p.max,g=p.direction,b=p.disabled,_=p.keyboard,x=p.range,E=p.tabIndex,w=p.ariaLabelForHandle,T=p.ariaLabelledByForHandle,S=p.ariaValueTextFormatterForHandle,k="".concat(i,"-handle"),C=function(e){b||l(e,s)},A=$J(g,o,v,m),I=a.createElement("div",Ft({ref:t,className:Wa()(k,(n={},y(n,"".concat(k,"-").concat(s+1),x),y(n,"".concat(k,"-dragging"),h),n)),style:Pe(Pe({},A),u),onMouseDown:C,onTouchStart:C,onKeyDown:function(e){if(!b&&_){var t=null;switch(e.which||e.keyCode){case Ru.LEFT:t="ltr"===g||"btt"===g?-1:1;break;case Ru.RIGHT:t="ltr"===g||"btt"===g?1:-1;break;case Ru.UP:t="ttb"!==g?1:-1;break;case Ru.DOWN:t="ttb"!==g?-1:1;break;case Ru.HOME:t="min";break;case Ru.END:t="max";break;case Ru.PAGE_UP:t=2;break;case Ru.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),d(t,s))}},tabIndex:b?null:ZJ(E,s),role:"slider","aria-valuemin":v,"aria-valuemax":m,"aria-valuenow":o,"aria-disabled":b,"aria-label":ZJ(w,s),"aria-labelledby":ZJ(T,s),"aria-valuetext":null===(r=ZJ(S,s))||void 0===r?void 0:r(o)},f));return c&&(I=c(I,{index:s,prefixCls:i,value:o,dragging:h})),I}));var e0=JJ,t0=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],n0=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,i=e.onStartMove,o=e.onOffsetChange,s=e.values,l=e.handleRender,u=e.draggingIndex,c=Wn(e,t0),h=a.useRef({});return a.useImperativeHandle(t,(function(){return{focus:function(e){var t;null===(t=h.current[e])||void 0===t||t.focus()}}})),a.createElement(a.Fragment,null,s.map((function(e,t){return a.createElement(e0,Ft({ref:function(e){e?h.current[t]=e:delete h.current[t]},dragging:u===t,prefixCls:n,style:ZJ(r,t),key:t,value:e,valueIndex:t,onStartMove:i,onOffsetChange:o,render:l},c))})))}));var r0=n0;function i0(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function a0(e){var t=e.prefixCls,n=e.style,r=e.start,i=e.end,o=e.index,s=e.onStartMove,l=a.useContext(KJ),u=l.direction,c=l.min,h=l.max,d=l.disabled,f=l.range,p="".concat(t,"-track"),v=qJ(r,c,h),m=qJ(i,c,h),g=function(e){!d&&s&&s(e,-1)},y={};switch(u){case"rtl":y.right="".concat(100*v,"%"),y.width="".concat(100*m-100*v,"%");break;case"btt":y.bottom="".concat(100*v,"%"),y.height="".concat(100*m-100*v,"%");break;case"ttb":y.top="".concat(100*v,"%"),y.height="".concat(100*m-100*v,"%");break;default:y.left="".concat(100*v,"%"),y.width="".concat(100*m-100*v,"%")}return a.createElement("div",{className:Wa()(p,f&&"".concat(p,"-").concat(o+1)),style:Pe(Pe({},y),n),onMouseDown:g,onTouchStart:g})}function o0(e){var t=e.prefixCls,n=e.style,r=e.values,i=e.startPoint,o=e.onStartMove,s=a.useContext(KJ),l=s.included,u=s.range,c=s.min,h=a.useMemo((function(){if(!u){if(0===r.length)return[];var e=null!==i&&void 0!==i?i:c,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],a=0;a<r.length-1;a+=1)n.push({start:r[a],end:r[a+1]});return n}),[r,u,i,c]);return l?h.map((function(e,r){var i=e.start,s=e.end;return a.createElement(a0,{index:r,prefixCls:t,style:ZJ(n,r),start:i,end:s,key:r,onStartMove:o})})):null}function s0(e){var t=e.prefixCls,n=e.style,r=e.children,i=e.value,o=e.onClick,s=a.useContext(KJ),l=s.min,u=s.max,c=s.direction,h=s.includedStart,d=s.includedEnd,f=s.included,p="".concat(t,"-text"),v=$J(c,i,l,u);return a.createElement("span",{className:Wa()(p,y({},"".concat(p,"-active"),f&&h<=i&&i<=d)),style:Pe(Pe({},v),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){o(i)}},r)}function l0(e){var t=e.prefixCls,n=e.marks,r=e.onClick,i="".concat(t,"-mark");return n.length?a.createElement("div",{className:i},n.map((function(e){var t=e.value,n=e.style,o=e.label;return a.createElement(s0,{key:t,prefixCls:i,style:n,value:t,onClick:r},o)}))):null}function u0(e){var t=e.prefixCls,n=e.value,r=e.style,i=e.activeStyle,o=a.useContext(KJ),s=o.min,l=o.max,u=o.direction,c=o.included,h=o.includedStart,d=o.includedEnd,f="".concat(t,"-dot"),p=c&&h<=n&&n<=d,v=Pe(Pe({},$J(u,n,s,l)),"function"===typeof r?r(n):r);return p&&(v=Pe(Pe({},v),"function"===typeof i?i(n):i)),a.createElement("span",{className:Wa()(f,y({},"".concat(f,"-active"),p)),style:v})}function c0(e){var t=e.prefixCls,n=e.marks,r=e.dots,i=e.style,o=e.activeStyle,s=a.useContext(KJ),l=s.min,u=s.max,c=s.step,h=a.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),r&&null!==c)for(var t=l;t<=u;)e.add(t),t+=c;return Array.from(e)}),[l,u,c,r,n]);return a.createElement("div",{className:"".concat(t,"-step")},h.map((function(e){return a.createElement(u0,{prefixCls:t,key:e,value:e,style:i,activeStyle:o})})))}var h0=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=void 0===r?"rc-slider":r,o=e.className,s=e.style,l=e.disabled,c=void 0!==l&&l,h=e.keyboard,d=void 0===h||h,f=e.autoFocus,p=e.onFocus,v=e.onBlur,m=e.min,g=void 0===m?0:m,b=e.max,_=void 0===b?100:b,x=e.step,E=void 0===x?1:x,w=e.value,T=e.defaultValue,S=e.range,k=e.count,C=e.onChange,A=e.onBeforeChange,I=e.onAfterChange,O=e.allowCross,P=void 0===O||O,M=e.pushable,R=void 0!==M&&M,N=e.draggableTrack,D=e.reverse,L=e.vertical,F=e.included,B=void 0===F||F,U=e.startPoint,H=e.trackStyle,j=e.handleStyle,z=e.railStyle,V=e.dotStyle,G=e.activeDotStyle,W=e.marks,X=e.dots,Y=e.handleRender,K=e.tabIndex,q=void 0===K?0:K,$=e.ariaLabelForHandle,Z=e.ariaLabelledByForHandle,Q=e.ariaValueTextFormatterForHandle,J=a.useRef(),ee=a.useRef(),te=a.useMemo((function(){return L?D?"ttb":"btt":D?"rtl":"ltr"}),[D,L]),ne=a.useMemo((function(){return isFinite(g)?g:0}),[g]),re=a.useMemo((function(){return isFinite(_)?_:100}),[_]),ie=a.useMemo((function(){return null!==E&&E<=0?1:E}),[E]),ae=a.useMemo((function(){return!0===R?ie:R>=0&&R}),[R,ie]),oe=a.useMemo((function(){return Object.keys(W||{}).map((function(e){var t=W[e],n={value:Number(e)};return t&&"object"===u(t)&&!a.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"===typeof t})).sort((function(e,t){return e.value-t.value}))}),[W]),se=function(e,t,n,r,i,o){var s=a.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),l=a.useCallback((function(r){if(null!==n){var i=e+Math.round((s(r)-e)/n)*n,a=function(e){return(String(e).split(".")[1]||"").length},o=Math.max(a(n),a(t),a(e)),l=Number(i.toFixed(o));return e<=l&&l<=t?l:null}return null}),[n,e,t,s]),u=a.useCallback((function(i){var a=s(i),o=r.map((function(e){return e.value}));null!==n&&o.push(l(i)),o.push(e,t);var u=o[0],c=t-e;return o.forEach((function(e){var t=Math.abs(a-e);t<=c&&(u=e,c=t)})),u}),[e,t,r,n,s,l]),c=function i(a,o,s){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"===typeof o){var c,h=a[s],d=h+o,f=[];r.forEach((function(e){f.push(e.value)})),f.push(e,t),f.push(l(h));var p=o>0?1:-1;"unit"===u?f.push(l(h+p*n)):f.push(l(d)),f=f.filter((function(e){return null!==e})).filter((function(e){return o<0?e<=h:e>=h})),"unit"===u&&(f=f.filter((function(e){return e!==h})));var v="unit"===u?h:d;c=f[0];var m=Math.abs(c-v);if(f.forEach((function(e){var t=Math.abs(e-v);t<m&&(c=e,m=t)})),void 0===c)return o<0?e:t;if("dist"===u)return c;if(Math.abs(o)>1){var g=Ie(a);return g[s]=c,i(g,o-p,s,u)}return c}return"min"===o?e:"max"===o?t:void 0},h=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=e[n],a=c(e,t,n,r);return{value:a,changed:a!==i}},d=function(e){return null===o&&0===e||"number"===typeof o&&e<o};return[u,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e.map(u),s=a[n],l=c(a,t,n,r);if(a[n]=l,!1===i){var f=o||0;n>0&&a[n-1]!==s&&(a[n]=Math.max(a[n],a[n-1]+f)),n<a.length-1&&a[n+1]!==s&&(a[n]=Math.min(a[n],a[n+1]-f))}else if("number"===typeof o||null===o){for(var p=n+1;p<a.length;p+=1)for(var v=!0;d(a[p]-a[p-1])&&v;){var m=h(a,1,p);a[p]=m.value,v=m.changed}for(var g=n;g>0;g-=1)for(var y=!0;d(a[g]-a[g-1])&&y;){var b=h(a,-1,g-1);a[g-1]=b.value,y=b.changed}for(var _=a.length-1;_>0;_-=1)for(var x=!0;d(a[_]-a[_-1])&&x;){var E=h(a,-1,_-1);a[_-1]=E.value,x=E.changed}for(var w=0;w<a.length-1;w+=1)for(var T=!0;d(a[w+1]-a[w])&&T;){var S=h(a,1,w+1);a[w+1]=S.value,T=S.changed}}return{value:a[n],values:a}}]}(ne,re,ie,oe,P,ae),le=It(se,2),ue=le[0],ce=le[1],he=It(mh(T,{value:w}),2),de=he[0],fe=he[1],pe=a.useMemo((function(){var e=null===de||void 0===de?[]:Array.isArray(de)?de:[de],t=It(e,1)[0],n=null===de?[]:[void 0===t?ne:t];if(S){if(n=Ie(e),k||void 0===de){var r=k>=0?k+1:2;for(n=n.slice(0,r);n.length<r;){var i;n.push(null!==(i=n[n.length-1])&&void 0!==i?i:ne)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=ue(e)})),n}),[de,S,ne,k,ue]),ve=a.useRef(pe);ve.current=pe;var me=function(e){return S?e:e[0]},ge=function(e){var t=Ie(e).sort((function(e,t){return e-t}));C&&!tt(t,ve.current,!0)&&C(me(t)),fe(t)},ye=function(e){if(!c){var t=0,n=re-ne;pe.forEach((function(r,i){var a=Math.abs(e-r);a<=n&&(n=a,t=i)}));var r=Ie(pe);r[t]=e,S&&!pe.length&&void 0===k&&r.push(e),null===A||void 0===A||A(me(r)),ge(r),null===I||void 0===I||I(me(r))}},be=It(a.useState(null),2),_e=be[0],xe=be[1];a.useEffect((function(){if(null!==_e){var e=pe.indexOf(_e);e>=0&&J.current.focus(e)}xe(null)}),[_e]);var Ee=a.useMemo((function(){return(!N||null!==ie)&&N}),[N,ie]),we=function(e,t,n,r,i,o,s,l,u){var c=It(a.useState(null),2),h=c[0],d=c[1],f=It(a.useState(-1),2),p=f[0],v=f[1],m=It(a.useState(n),2),g=m[0],y=m[1],b=It(a.useState(n),2),_=b[0],x=b[1],E=a.useRef(null),w=a.useRef(null);a.useEffect((function(){-1===p&&y(n)}),[n,p]),a.useEffect((function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",w.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",w.current)}}),[]);var T=function(e,t){g.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&d(t),y(e),s(e))},S=function(e,t){if(-1===e){var n=_[0],a=_[_.length-1],s=r-n,l=i-a,c=t*(i-r);c=Math.max(c,s),c=Math.min(c,l);var h=o(n+c);c=h-n;var d=_.map((function(e){return e+c}));T(d)}else{var f=(i-r)*t,p=Ie(g);p[e]=_[e];var v=u(p,f,e,"dist");T(v.values,v.value)}},k=a.useRef(S);k.current=S;var C=a.useMemo((function(){var e=Ie(n).sort((function(e,t){return e-t})),t=Ie(g).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?g:n}),[n,g]);return[p,h,C,function(r,i){r.stopPropagation();var a=n[i];v(i),d(a),x(n);var o=i0(r),s=o.pageX,u=o.pageY,c=function(n){n.preventDefault();var r,a=i0(n),o=a.pageX,l=a.pageY,c=o-s,h=l-u,d=e.current.getBoundingClientRect(),f=d.width,p=d.height;switch(t){case"btt":r=-h/p;break;case"ttb":r=h/p;break;case"rtl":r=-c/f;break;default:r=c/f}k.current(i,r)},h=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",c),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",c),E.current=null,w.current=null,v(-1),l()};document.addEventListener("mouseup",h),document.addEventListener("mousemove",c),document.addEventListener("touchend",h),document.addEventListener("touchmove",c),E.current=c,w.current=h}]}(ee,te,pe,ne,re,ue,ge,(function(){null===I||void 0===I||I(me(ve.current))}),ce),Te=It(we,4),Se=Te[0],ke=Te[1],Ce=Te[2],Ae=Te[3],Oe=function(e,t){Ae(e,t),null===A||void 0===A||A(me(ve.current))},Pe=-1!==Se;a.useEffect((function(){if(!Pe){var e=pe.lastIndexOf(ke);J.current.focus(e)}}),[Pe]);var Me=a.useMemo((function(){return Ie(Ce).sort((function(e,t){return e-t}))}),[Ce]),Re=It(a.useMemo((function(){return S?[Me[0],Me[Me.length-1]]:[ne,Me[0]]}),[Me,S,ne]),2),Ne=Re[0],De=Re[1];a.useImperativeHandle(t,(function(){return{focus:function(){J.current.focus(0)},blur:function(){var e=document.activeElement;ee.current.contains(e)&&(null===e||void 0===e||e.blur())}}})),a.useEffect((function(){f&&J.current.focus(0)}),[]);var Le=a.useMemo((function(){return{min:ne,max:re,direction:te,disabled:c,keyboard:d,step:ie,included:B,includedStart:Ne,includedEnd:De,range:S,tabIndex:q,ariaLabelForHandle:$,ariaLabelledByForHandle:Z,ariaValueTextFormatterForHandle:Q}}),[ne,re,te,c,d,ie,B,Ne,De,S,q,$,Z,Q]);return a.createElement(KJ.Provider,{value:Le},a.createElement("div",{ref:ee,className:Wa()(i,o,(n={},y(n,"".concat(i,"-disabled"),c),y(n,"".concat(i,"-vertical"),L),y(n,"".concat(i,"-horizontal"),!L),y(n,"".concat(i,"-with-marks"),oe.length),n)),style:s,onMouseDown:function(e){e.preventDefault();var t,n=ee.current.getBoundingClientRect(),r=n.width,i=n.height,a=n.left,o=n.top,s=n.bottom,l=n.right,u=e.clientX,c=e.clientY;switch(te){case"btt":t=(s-c)/i;break;case"ttb":t=(c-o)/i;break;case"rtl":t=(l-u)/r;break;default:t=(u-a)/r}ye(ue(ne+t*(re-ne)))}},a.createElement("div",{className:"".concat(i,"-rail"),style:z}),a.createElement(o0,{prefixCls:i,style:H,values:Me,startPoint:U,onStartMove:Ee?Oe:null}),a.createElement(c0,{prefixCls:i,marks:oe,dots:X,style:V,activeStyle:G}),a.createElement(r0,{ref:J,prefixCls:i,style:j,values:Ce,draggingIndex:Se,onStartMove:Oe,onOffsetChange:function(e,t){if(!c){var n=ce(pe,e,t);null===A||void 0===A||A(me(pe)),ge(n.values),null===I||void 0===I||I(me(n.values)),xe(n.value)}},onFocus:p,onBlur:v,handleRender:Y}),a.createElement(l0,{prefixCls:i,marks:oe,onClick:ye})))}));var d0=h0,f0=a.forwardRef((function(e,t){var n=e.open,r=(0,a.useRef)(null),i=(0,a.useRef)(null);function o(){Do.cancel(i.current),i.current=null}return a.useEffect((function(){return n?i.current=Do((function(){var e;null===(e=r.current)||void 0===e||e.forceAlign(),i.current=null})):o(),o}),[n,e.title]),a.createElement(xA,Object.assign({ref:qa(r,t)},e))})),p0=function(e){var t,n,r,i,a=e.componentCls,o=e.controlSize,s=e.dotSize,l=e.marginFull,u=e.marginPart,c=e.colorFillContentHover;return y({},a,Object.assign(Object.assign({},is(e)),(y(i={position:"relative",height:o,margin:"".concat(u,"px ").concat(l,"px"),padding:0,cursor:"pointer",touchAction:"none"},"&-vertical",{margin:"".concat(l,"px ").concat(u,"px")}),y(i,"".concat(a,"-rail"),{position:"absolute",backgroundColor:e.colorFillTertiary,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(e.motionDurationMid)}),y(i,"".concat(a,"-track"),{position:"absolute",backgroundColor:e.colorPrimaryBorder,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(e.motionDurationMid)}),y(i,"&:hover",(y(t={},"".concat(a,"-rail"),{backgroundColor:e.colorFillSecondary}),y(t,"".concat(a,"-track"),{backgroundColor:e.colorPrimaryBorderHover}),y(t,"".concat(a,"-dot"),{borderColor:c}),y(t,"".concat(a,"-handle::after"),{boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(e.colorPrimaryBorderHover)}),y(t,"".concat(a,"-dot-active"),{borderColor:e.colorPrimary}),t)),y(i,"".concat(a,"-handle"),(y(n={position:"absolute",width:e.handleSize,height:e.handleSize,outline:"none"},"".concat(a,"-dragging"),{zIndex:1}),y(n,"&::before",{content:'""',position:"absolute",insetInlineStart:-e.handleLineWidth,insetBlockStart:-e.handleLineWidth,width:e.handleSize+2*e.handleLineWidth,height:e.handleSize+2*e.handleLineWidth,backgroundColor:"transparent"}),y(n,"&::after",{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:e.handleSize,height:e.handleSize,backgroundColor:e.colorBgElevated,boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(e.colorPrimaryBorder),borderRadius:"50%",cursor:"pointer",transition:"\n            inset-inline-start ".concat(e.motionDurationMid,",\n            inset-block-start ").concat(e.motionDurationMid,",\n            width ").concat(e.motionDurationMid,",\n            height ").concat(e.motionDurationMid,",\n            box-shadow ").concat(e.motionDurationMid,"\n          ")}),y(n,"&:hover, &:active, &:focus",{"&::before":{insetInlineStart:-((e.handleSizeHover-e.handleSize)/2+e.handleLineWidthHover),insetBlockStart:-((e.handleSizeHover-e.handleSize)/2+e.handleLineWidthHover),width:e.handleSizeHover+2*e.handleLineWidthHover,height:e.handleSizeHover+2*e.handleLineWidthHover},"&::after":{boxShadow:"0 0 0 ".concat(e.handleLineWidthHover,"px ").concat(e.colorPrimary),width:e.handleSizeHover,height:e.handleSizeHover,insetInlineStart:(e.handleSize-e.handleSizeHover)/2,insetBlockStart:(e.handleSize-e.handleSizeHover)/2}}),n)),y(i,"".concat(a,"-mark"),{position:"absolute",fontSize:e.fontSize}),y(i,"".concat(a,"-mark-text"),{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}}),y(i,"".concat(a,"-step"),{position:"absolute",background:"transparent",pointerEvents:"none"}),y(i,"".concat(a,"-dot"),{position:"absolute",width:s,height:s,backgroundColor:e.colorBgElevated,border:"".concat(e.handleLineWidth,"px solid ").concat(e.colorBorderSecondary),borderRadius:"50%",cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),pointerEvents:"auto","&-active":{borderColor:e.colorPrimaryBorder}}),y(i,"&".concat(a,"-disabled"),(y(r={cursor:"not-allowed"},"".concat(a,"-rail"),{backgroundColor:"".concat(e.colorFillSecondary," !important")}),y(r,"".concat(a,"-track"),{backgroundColor:"".concat(e.colorTextDisabled," !important")}),y(r,"\n          ".concat(a,"-dot\n        "),{backgroundColor:e.colorBgElevated,borderColor:e.colorTextDisabled,boxShadow:"none",cursor:"not-allowed"}),y(r,"".concat(a,"-handle::after"),{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:e.handleSize,height:e.handleSize,boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(new va(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString()),insetInlineStart:0,insetBlockStart:0}),y(r,"\n          ".concat(a,"-mark-text,\n          ").concat(a,"-dot\n        "),{cursor:"not-allowed !important"}),r)),i)))},v0=function(e,t){var n,r,i,a,o=e.componentCls,s=e.railSize,l=e.handleSize,u=e.dotSize,c=t?"width":"height",h=t?"height":"width",d=t?"insetBlockStart":"insetInlineStart",f=t?"top":"insetInlineStart";return y(a={},t?"paddingBlock":"paddingInline",s),y(a,h,3*s),y(a,"".concat(o,"-rail"),(y(n={},c,"100%"),y(n,h,s),n)),y(a,"".concat(o,"-track"),y({},h,s)),y(a,"".concat(o,"-handle"),y({},d,(3*s-l)/2)),y(a,"".concat(o,"-mark"),(y(r={insetInlineStart:0,top:0},f,l),y(r,c,"100%"),r)),y(a,"".concat(o,"-step"),(y(i={insetInlineStart:0,top:0},f,s),y(i,c,"100%"),y(i,h,s),i)),y(a,"".concat(o,"-dot"),y({position:"absolute"},d,(s-u)/2)),a},m0=function(e){var t=e.componentCls,n=e.marginPartWithMark;return y({},"".concat(t,"-horizontal"),Object.assign(Object.assign({},v0(e,!0)),y({},"&".concat(t,"-with-marks"),{marginBottom:n})))},g0=function(e){var t=e.componentCls;return y({},"".concat(t,"-vertical"),Object.assign(Object.assign({},v0(e,!1)),{height:"100%"}))},y0=rl("Slider",(function(e){var t=el(e,{marginPart:(e.controlHeight-e.controlSize)/2,marginFull:e.controlSize/2,marginPartWithMark:e.controlHeightLG-e.controlSize});return[p0(t),m0(t),g0(t)]}),(function(e){var t=e.controlHeightLG/4;return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:e.controlHeightSM/2,dotSize:8,handleLineWidth:e.lineWidth+1,handleLineWidthHover:e.lineWidth+3}})),b0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},_0=function(e){return"number"===typeof e?e.toString():""},x0=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.range,i=e.className,o=e.rootClassName,s=e.tooltipPrefixCls,l=e.tipFormatter,u=e.tooltipVisible,c=e.getTooltipPopupContainer,h=e.tooltipPlacement,d=b0(e,["prefixCls","range","className","rootClassName","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),f=a.useContext(Ra),p=f.getPrefixCls,v=f.direction,m=f.getPopupContainer,g=It(a.useState({}),2),b=g[0],_=g[1],x=function(e,t){_((function(n){return Object.assign(Object.assign({},n),y({},e,t))}))},E=function(e,t){return e||(t?"rtl"===v?"left":"right":"top")},w=p("slider",n),T=It(y0(w),2),S=T[0],k=T[1],C=Wa()(i,o,y({},"".concat(w,"-rtl"),"rtl"===v),k);"rtl"!==v||d.vertical||(d.reverse=!d.reverse);var A=It(a.useMemo((function(){return r?"object"===typeof r?[!0,r.draggableTrack]:[!0,!1]:[!1]}),[r]),2),I=A[0],O=A[1];return S(a.createElement(d0,Object.assign({},d,{step:d.step,range:I,draggableTrack:O,className:C,ref:t,prefixCls:w,handleRender:function(t,n){var r,i,o=n.index,d=n.dragging,f=e.tooltip,v=void 0===f?{}:f,g=e.vertical,y=Object.assign({},v),_=y.open,T=y.placement,S=y.getPopupContainer,k=y.prefixCls,C=y.formatter,A=!!(i=C||null===C?C:l||null===l?l:_0)&&(b[o]||d),I=null!==(r=null!==_&&void 0!==_?_:u)&&void 0!==r?r:void 0===_&&A,O=Object.assign(Object.assign({},t.props),{onMouseEnter:function(){return x(o,!0)},onMouseLeave:function(){return x(o,!1)}}),P=p("tooltip",null!==k&&void 0!==k?k:s);return a.createElement(f0,{prefixCls:P,title:i?i(n.value):"",open:I,placement:E(null!==T&&void 0!==T?T:h,g),key:o,overlayClassName:"".concat(w,"-tooltip"),getPopupContainer:S||c||m},a.cloneElement(t,O))}})))}));var E0=x0,w0=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i.refs=void 0,i._sliderChange=!1,i}return d(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){this.setState({value:e})}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){return this.getFixNumber(e.value,e.fixed)}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e);this.state.value!==t&&(this._invalid=!0,this.setState({value:t}))}},{key:"render",value:function(){return(0,hf.jsx)(E0,{defaultValue:10,max:this.props.max,min:this.props.min,value:this.state.value,step:this.props.step,onChange:this.onChange.bind(this),onAfterChange:this.onSliderAfterChange.bind(this)})}},{key:"onChange",value:function(e){this._sliderChange||(this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._sliderChange=!0),this.props.onChange&&this.props.onChange(e)}},{key:"onSliderAfterChange",value:function(e){this._sliderChange&&(this.props.continuousEndCallback&&this.props.continuousEndCallback(),this._sliderChange=!1)}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setState({value:e}),t&&this.props.onChange&&this.props.onChange(e))}}]),n}(a.Component);w0.defaultMax=Number.MAX_SAFE_INTEGER,w0.defaultMin=Number.MIN_SAFE_INTEGER,w0.MULTI_DEFAULT_TEXT="--";var T0=function(e){p(n,e);var t=g(n);function n(e,r){var i;return l(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i._sliderChange=!1,i.refs=void 0,i.isMouseDown=!1,i.isMouseMoved=!1,i.isFocus=!1,i._mouseupHandler=i.onMouseUp.bind(m(i)),i._mousemoveHandler=i.onMouseMove.bind(m(i)),i._mousewheelHandler=i.onMouseWheel.bind(m(i)),i}return d(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){var t=isNaN(e)?"0":e.toString();this.setState({value:t})}},{key:"continuous",get:function(){var e=this.props.continuous;return void 0===e&&(e=!0),e}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){var t=e.value;this.props.percent&&(t*=100);var n=this.getFixNumber(t,e.fixed);return this.props.percent&&(n/=100),n}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.props.percent&&(t*=100),this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue.toString()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e).toString();this.state.value!==t&&(this._invalid=!0,this.setState({value:t}))}},{key:"render",value:function(){this._invalid=!1;var e=(this.props.width?this.props.width:50)+"px",t=this.getRenderValue(this.state.value).toString();this.props.multiMode&&(t=n.MULTI_DEFAULT_TEXT,null!=this.state.offValue&&""!==this.state.offValue&&(t=this.state.offValue));var r=this.props.disabled,i=this.isFocus?"text":"n-resize",a="property-input ";return this.props.className&&(a+=this.props.className),r&&(a="property-input disabled "+this.props.className),(0,hf.jsxs)("div",{className:"number-slider-input",children:[(0,hf.jsx)(E0,{max:this.props.max,min:this.props.min,value:parseFloat(this.state.value),step:this.props.step,onChange:this.onSliderChange.bind(this),onAfterChange:this.onSliderAfterChange.bind(this)}),(0,hf.jsx)("input",{className:a,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"}),this.props.percent?"%":""]})}},{key:"onDrag",value:function(e){document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),e.preventDefault()}},{key:"onSliderChange",value:function(e){this._sliderChange||(this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._sliderChange=!0),this.props.onChange&&this.props.onChange(e)}},{key:"onSliderAfterChange",value:function(e){this._sliderChange&&(this.props.continuousEndCallback&&this.props.continuousEndCallback(),this._sliderChange=!1)}},{key:"onChange",value:function(e){if(!this.props.disabled){var t=e.target.value,n=!!(this.props&&this.props.fixed&&this.props.fixed>0),r=this.filterText(t,!n);if(isNaN(r.value)||this.isLimit(r.value))this.setState({value:r.halfValue});else{var i=r.value;this.changeValue(i)}}}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"filterText",value:function(e,t){if(this.props.multiMode&&e===n.MULTI_DEFAULT_TEXT)return{value:NaN,halfValue:e};if(t){var r=new RegExp("[-]?[0-9]*"),i=e.match(r);if(null!=i){var a=i[0],o=NaN;return"-"===a||""===a?o=NaN:(this.props.percent&&(a=(parseInt(a)/100).toString()),o=this.getRenderValue(a),this.props.percent&&(o/=100)),{value:o,halfValue:a}}}else{var s=new RegExp("[-]?[0-9]+[.]?[0-9]*"),l=e.match(s);if(null!=l){var u=l[0];return{value:"-"===u||"."===u[u.length-1]||""===u?NaN:this.getRenderValue(u),halfValue:u}}if("-"===e||""===e)return{value:NaN,halfValue:e}}return{value:0,halfValue:"0"}}},{key:"addValue",value:function(e){isNaN(e)||this.props.onAdd&&this.props.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setState({value:e.toString()}),t&&this.props.onChange&&this.props.onChange(e))}},{key:"onBlur",value:function(e){if(this.isFocus=!1,this.setState({}),!this.isMouseDown){var t=!!(this.props&&this.props.fixed&&this.props.fixed>0),n=this.filterText(e.target.value,!t);(isNaN(n.value)||this.isLimit(n.value))&&this.setState({value:this.props.value.toString()}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.props.onBlur&&this.props.onBlur(e)}}},{key:"onFocus",value:function(e){this.isMouseDown?this.refs.numberInput.blur():(this.props.multiMode&&this.refs.numberInput.select(),this.props.onFocus&&this.props.onFocus(e),this.isFocus=!0,this.setState({}))}},{key:"onMouseWheel",value:function(e){e.wheelDelta>0?this.changeValue(this.props.value+this.step):this.changeValue(this.props.value-this.step)}},{key:"onMouseOver",value:function(e){this._over=!0,this.refs.numberInput.addEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseOut",value:function(e){this._over=!1,this.refs.numberInput.removeEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseDown",value:function(e){this.isFocus||this.props.disabled||(this.continuous&&this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._downX=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this._mousemoveHandler),document.addEventListener("mouseup",this._mouseupHandler))}},{key:"onMouseMove",value:function(e){if(0===this._downX)this._downX=e.clientY,this._downValue=this.getRenderValue(this.state.value),this.props.percent&&(this._downValue=this._downValue/100);else{this.isMouseMoved=!0;var t=this.props.speedDuration||1,n=Math.ceil((e.clientY-this._downX)/t);if(this.props.dropReverse&&(n=-n),0!==(n*=this.step))if(this.props.multiMode){this.addValue(n);var r="";n>0?r="+"+n:n<0&&(r=n.toString()),this.setState({offValue:r})}else this.changeValue(this._downValue+n,this.continuous)}}},{key:"onMouseUp",value:function(e){var t=!1;!this.isMouseMoved&&this.isMouseDown&&(t=!0),this.isMouseDown=!1,this.isMouseMoved=!1,this.props.multiMode&&this.setState({offValue:""}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.continuous&&this.props.continuousEndCallback&&this.props.continuousEndCallback(),t&&(this.refs.numberInput.focus(),this.refs.numberInput.select())}}]),n}(a.Component);T0.defaultMax=Number.MAX_SAFE_INTEGER,T0.defaultMin=Number.MIN_SAFE_INTEGER,T0.MULTI_DEFAULT_TEXT="--";var S0,k0=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).onClick=function(e){e.stopPropagation();var t=!r.state.selected;r.props.toggle&&r.setState({selected:t}),r.props.onChange&&r.props.onChange(t)},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return d(n,[{key:"value",get:function(){return this.state.selected},set:function(e){this.setState({selected:e})}},{key:"render",value:function(){var e=this.props.label,t="button-label";return this.state.selected&&(e+=" \u2713",t="button-label selected"),this.props.tooltip?(0,hf.jsx)(xA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,hf.jsx)("div",{className:t,onClick:this.onClick,children:e})}):(0,hf.jsx)("div",{className:t,onClick:this.onClick,children:e})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),C0=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._tempValue=void 0,r.state={data:r.props.value.bones,propData:r.props.value,selectedId:r.props.value.selectedId},r}return d(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({data:e.value.bones,selectedId:e.value.selectedId})}},{key:"value",get:function(){return this._tempValue||this.props},set:function(e){this._tempValue=e,this.setState({data:e.bones,selectedId:e.selectedId})}},{key:"deleteItem",value:function(e){this.props.onChange({action:"delete",id:e})}},{key:"onClick",value:function(e){this.props.onChange({action:"select",id:e})}},{key:"onOver",value:function(e){this.props.onChange({action:"over",id:e})}},{key:"onOut",value:function(e){this.props.onChange({action:"out",id:e})}},{key:"render",value:function(){var e=this;return this.state.data&&0!==this.state.data.length?(0,hf.jsx)("div",{className:"rigging-list",children:this.state.data.map((function(t,n){return(0,hf.jsxs)("div",{className:"rigging-list-item ".concat(t.id===e.state.selectedId?"selected":""),onClick:function(){e.onClick(t.id)},onMouseOver:function(){e.onOver(t.id)},onMouseOut:function(){e.onOut(t.id)},children:[(0,hf.jsx)("span",{className:"rigging-list-item-color",style:{backgroundColor:"".concat(Lf.getColorString(t.color))}}),(0,hf.jsx)("span",{className:"rigging-list-item-id",children:t.id}),(0,hf.jsx)("span",{className:"rigging-list-item-name",children:t.name}),void 0!==t.weight&&(0,hf.jsx)("span",{className:"rigging-list-item-weight",children:(0,hf.jsx)(T0,{percent:!0,min:0,max:1,step:.01,fixed:0,width:22,speedDuration:2,value:t.weight,onChange:function(n){var r=Pe(Pe({},t),{},{weight:n,action:"changeWeight"});e.props.onChange(r)},continuousEndCallback:function(){e.props.onChange({action:"continuousEndCallback",id:"changeWeight"}),e.props.continuousEndCallback&&e.props.continuousEndCallback()},continuousStartCallback:function(){e.props.onChange({action:"continuousStartCallback",id:"changeWeight"}),e.props.continuousStartCallback&&e.props.continuousStartCallback()}})}),(0,hf.jsx)(YJ,{icon:"icon-delete",value:"true",onChange:function(n){e.deleteItem(t.id)}})]},n)}))}):(0,hf.jsx)("div",{className:"rigging-list"})}}]),n}(a.Component),A0=function(e){p(n,e);var t=g(n);function n(e,r){return l(this,n),t.call(this,e,r)}return d(n,[{key:"value",get:function(){var e=this.refs[this.props.property];if(e)return e.value},set:function(e){var t=this.refs[this.props.property];t&&(t.value=e)}},{key:"render",value:function(){var e,t=this.props;if(t.hide)return null;if(t.isArray)e=(0,hf.jsx)(qG,Pe(Pe({},t),{},{ref:t.property}));else switch(t.componentType){case ue.StringInput:e=(0,hf.jsx)(WJ,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.IntInput:case ue.FloatInput:e=(0,hf.jsx)(IQ,Pe(Pe({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case ue.SliderInput:e=(0,hf.jsx)(w0,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.NumberSliderInput:e=(0,hf.jsx)(T0,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.Label:var n=t.componentProp.width||20,r=t.componentProp.align||"center";e=(0,hf.jsxs)("span",{className:"property-label",style:{width:n+"px",textAlign:r},children:[t.componentProp.value," "]});break;case ue.DropdownInput:e=(0,hf.jsx)(xR,Pe(Pe({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case ue.ObjectInput:e=(0,hf.jsx)(VJ,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.BooleanInput:e=(0,hf.jsx)(ER,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.BooleanCheck:e=(0,hf.jsx)(bU,Pe(Pe({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case ue.BooleanSwitch:e=(0,hf.jsx)(lW,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.ColorInput:e=(0,hf.jsx)(AQ,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.ButtonGroup:e=(0,hf.jsx)(XJ,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;case ue.Button:e=(0,hf.jsx)(YJ,Pe(Pe({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case ue.ButtonLabel:e=(0,hf.jsx)(k0,Pe(Pe({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case ue.Gap:e=(0,hf.jsx)("span",{style:{width:"".concat(t.componentProp.width,"px")}});break;case ue.RiggingList:e=(0,hf.jsx)(C0,Pe(Pe({},t.componentProp),{},{ref:t.property}));break;default:e=(0,hf.jsx)("div",{})}return e}}]),n}(a.Component),I0=function(e){return e[e.NO_KEY=1]="NO_KEY",e[e.KEY=2]="KEY",e[e.VIRTUAL_KEY=3]="VIRTUAL_KEY",e}({}),O0=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).onClick=function(){r.props&&r.props.onClick&&r.props.onClick(r.props.property)},r.state={state:e.state,preState:e.state},r}return d(n,[{key:"render",value:function(){var e="./assets/icon/flag4.png";switch(this.state.state){case I0.NO_KEY:e="./assets/icon/flag4.png";break;case I0.KEY:e="./assets/icon/flag4_red.png";break;case I0.VIRTUAL_KEY:e="./assets/icon/flag4_yellow.png"}return(0,hf.jsx)("div",{className:"property-key-flag",onClick:this.onClick,children:(0,hf.jsx)("img",{src:e,alt:""})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.state!==t.preState?{state:e.state,preState:e.state}:null}}]),n}(a.Component),P0=function(){function e(t){l(this,e),this.appStore=void 0,this.target=void 0,this.target=t,this.appStore=oT.instances}return d(e,[{key:"getProperty",value:function(e){if(this.target[e])return this.target[e]}},{key:"getFunction",value:function(e){if(this[e])return this[e].bind(this)}},{key:"getPropertyConfig",value:function(){return null}},{key:"setProperty",value:function(e,t){return null}},{key:"addKeyProperty",value:function(e){return null}},{key:"hasAnimationKey",value:function(e){return k.indexOf(e)>-1}},{key:"getKeyState",value:function(e){return I0.NO_KEY}}],[{key:"toString",value:function(){return"BasePropertyAdapter"}}]),e}(),M0=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"getProperty",value:function(e){if(this.target[e])return this.target[e]}},{key:"setProperty",value:function(e,t){var n=this;switch(e){case"name":if(this.target.name!==t)if(Qw.checkArmatureNameConflict(e,this.appStore.rootState.runtime.dragonbones.armatureMap))mf.warn("\u9aa8\u67b6\u540d\u5b57\u51b2\u7a81"),this.appStore.dispatch(D.UPDATE_PROPERTIES);else{var r=this.target.id;this.appStore.commit(N.UPDATE_PROPERTIES,{armatureId:r,properties:y({},e,t)})}break;case"defaultAnimation":case"canvasShow":case"canvasX":case"canvasY":case"canvasWidth":case"canvasHeight":case"canvasColor":case"showCanvasColor":var i=this.target.id;this.appStore.commit(N.UPDATE_PROPERTIES,{armatureId:i,properties:y({},e,t)});break;case"addArmature":var a=Qw.createArmatureName(he,this.appStore.rootState.runtime.dragonbones.armatureMap),o=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g");mf.rename("\u8bf7\u8f93\u5165\u9aa8\u67b6\u7684\u540d\u5b57",a,"\u8bf7\u8f93\u5165\u9aa8\u67b6\u7684\u540d\u5b57",(function(e,t){n.appStore.dispatch(D.ADD_ARMATURE,{name:e})}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":o.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":Qw.checkArmatureNameConflict(e,n.appStore.rootState.runtime.dragonbones.armatureMap)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}));break;case"deleteArmature":var s=this.target.id;this.appStore.dispatch(D.DELETE_ARMATURES,{armatureIds:[s]})}}},{key:"getAllAnimationMenu",value:function(){for(var e=this.target.animations||[],t=this.appStore.rootState.runtime.dragonbones.animationMap,n=[],r=0,i=e.length;r<i;r++){var a=t[e[r]];a&&n.push({label:a.name,value:a.id})}return n}},{key:"getPropertyConfig",value:function(){return R0}}],[{key:"toString",value:function(){return"ArmaturePropertyAdapter"}}]),n}(P0),R0={name:"armature",type:"",targetId:1,mutation:"",operations:[{name:"addArmature",type:"button",componentProperties:{icon:"icon-zu",tooltip:"\u6dfb\u52a0\u9aa8\u67b6"}},{name:"deleteArmature",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u67b6"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"type",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9aa8\u67b6",width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5e27\u7387",items:[{property:"fps",type:le.CONST,componentType:ue.Label,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u9ed8\u8ba4\u64ad\u653e",items:[{property:"defaultAnimation",type:le.CONST,componentType:ue.DropdownInput,componentProp:{itemFunName:"getAllAnimationMenu"}}]}]}]},N0=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._armature=void 0,e.ik=void 0,e.ikTarget=void 0,e}return d(n,[{key:"getProperty",value:function(e){var t=this.target.transform,n=this.appStore.rootState.runtime.editing.editMode;switch(n===X.ANIMATION&&(this.target.cacheTransform?t=this.target.cacheTransform:this.target.animatedTransform&&(t=this.target.animatedTransform)),e){case"inheritScale":return void 0===this.target.inheritScale||this.target.inheritScale;case"inheritRotation":return void 0===this.target.inheritRotation||this.target.inheritRotation;case"x":return t.x;case"y":return t.y;case"scaleX":return t.scaleX;case"scaleY":return t.scaleY;case"rotation":return Lf.radio2Angle(t.skewX);case"clockwise":if(n===X.ANIMATION){var r,i,a,o;if(null!==(r=this.target.cacheProperties)&&void 0!==r&&null!==(i=r.rotate)&&void 0!==i&&i.clockwise)return this.target.cacheProperties.rotate.clockwise;if(null!==(a=this.target.animatedProperties)&&void 0!==a&&null!==(o=a.rotate)&&void 0!==o&&o.clockwise)return this.target.animatedProperties.rotate.clockwise}return T.AUTO;case"clockwiseNum":if(n===X.ANIMATION){var s,l,u,c;if(null!==(s=this.target.cacheProperties)&&void 0!==s&&null!==(l=s.rotate)&&void 0!==l&&l.clockwiseNum)return this.target.cacheProperties.rotate.clockwiseNum;if(null!==(u=this.target.animatedProperties)&&void 0!==u&&null!==(c=u.rotate)&&void 0!==c&&c.clockwiseNum)return this.target.animatedProperties.rotate.clockwiseNum}return 0;case"ikId":return this.ik.id;case"ikName":return this.ik.name;case"ikBones":var h=this._armature.bones.map[this.ik.parentId],d=this._armature.bones.map[this.ik.childId];return d?"".concat(h.name," -> ").concat(d.name):"".concat(h.name);case"ikTargetBoneName":return this._armature.bones.map[this.ik.targetId].name;case"ikBendPositive":if(n===X.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.bendPositive;if(this.ik.animatedValue)return this.ik.animatedValue.bendPositive}return this.ik.bendPositive;case"ikWeight":if(n===X.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.weight;if(this.ik.animatedValue)return this.ik.animatedValue.weight}return this.ik.weight;case"ikTargetId":return this.ikTarget.id;case"ikTargetName":return this.ikTarget.name;case"ikTargetBones":var f=this._armature.bones.map[this.ikTarget.parentId],p=this._armature.bones.map[this.ikTarget.childId];return p?"".concat(f.name," -> ").concat(p.name):"".concat(f.name);case"ikTargetBendPositive":if(n===X.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.bendPositive;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.bendPositive}return this.ikTarget.bendPositive;case"ikTargetWeight":if(n===X.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.weight;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.weight}return this.ikTarget.weight;default:return this.target[e]}}},{key:"armature",set:function(e){this._armature=e}},{key:"getPropertyConfig",value:function(){var e=this.appStore.rootState.runtime.editing.editMode,t=ge(U0);if(e===X.ANIMATION&&(t.panels[1].content[2].items=B0),this.ik=void 0,this.ikTarget=void 0,this._armature){var n=this._armature.constraint.ik;for(var r in n){var i=n[r];if(i&&(i.parentId!==this.target.id&&i.childId!==this.target.id||(this.ik=i),i.targetId!==this.target.id&&i.targetId!==this.target.id||(this.ikTarget=i),this.ik&&this.ikTarget))break}this.ik?t.panels.push(L0):this.target.parentId>0&&t.panels.push(D0),this.ikTarget&&t.panels.push(F0)}return t}},{key:"setProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("ikAuto"!==e)if("ikTarget"!==e)if("deleteIk"!==e)if("deleteIkTarget"!==e){if("ikAddKey"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:t,addKey:n});else{if("ikBendPositive"===e)return void this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{bendPositive:t}});if("ikWeight"===e)return void this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{weight:t}});if("ikTargetAddKey"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:t,addKey:n});else{if("ikTargetBendPositive"===e)return void this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{bendPositive:t}});if("ikTargetWeight"===e)return void this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{weight:t}});if("deleteBone"===e)return this.target.parentId<=0?void mf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u5220\u9664"):void this.appStore.dispatch(z.DELETE_BONES,{armatureId:this._armature.id,boneIds:[this.target.id]});if("setParent"===e)return this.target.parentId<=0?void mf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u8bbe\u7f6e\u7236\u7ea7"):void this.appStore.dispatch(z.PICK_BONE_PARENT,{})}}var r=this.target.transform;this.target.cacheTransform&&(r=this.target.cacheTransform),this.target.animatedTransform&&(r=this.target.animatedTransform);var i=Pe({},r),a=[];if(["x","y","scaleX","scaleY","rotation","xy","scaleXY"].indexOf(e)>-1){switch(e){case"x":i.x=t,a.push(e);break;case"y":i.y=t,a.push(e);break;case"xy":i.x=t.x,i.y=t.y,a.push("x","y");break;case"scaleXY":i.scaleX=t.x,i.scaleY=t.y,a.push("scaleX","scaleY");break;case"scaleX":i.scaleX=t,a.push(e);break;case"scaleY":i.scaleY=t,a.push(e);break;case"rotation":i.skewX=Lf.angle2Radio(t),i.skewY=Lf.angle2Radio(t),a.push("skewX"),a.push("skewY")}this.appStore.dispatch(z.UPDATE_LOCAL_TRANSFORMS,y({},this.target.id,{local:i,diffKeys:a,addKey:n}))}else{var o=this.appStore.rootState.runtime.editing.editingArmatureId,s=this.appStore.rootState.runtime.dragonbones.armatureMap[o];if("name"===e){if(this.target.name!==t)if(Qw.checkBoneNameConflict(t,s))return mf.warn("\u9aa8\u9abc\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(D.UPDATE_PROPERTIES)}else if("clockwise"===e||"clockwiseNum"===e)return void this.appStore.dispatch(z.UPDATE_ROTATE_FRAME,{armatureId:o,bones:y({},this.target.id,y({},e,t))});this.appStore.commit(V.UPDATE_PROPERTIES,{armatureId:o,bones:y({},this.target.id,y({},e,t))})}}else this.appStore.dispatch(z.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ikTarget.id]});else this.appStore.dispatch(z.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ik.id]});else this.appStore.dispatch(z.PICK_IK_TARGET);else{var l=this.appStore.rootState.runtime.editing.selectedBoneIds,u=this.appStore.rootState.runtime.dragonbones.armatureMap[this.appStore.rootState.runtime.editing.editingArmatureId];1===l.length?this.appStore.dispatch(z.ADD_IK_AT_TAIL,{armatureId:u.id,parentId:l[0]}):l.length}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==I0.KEY)if("x"===e||"y"===e){var t=this.getProperty("x"),n=this.getProperty("y");this.setProperty("xy",{x:t,y:n},!0)}else if("scaleX"===e||"scaleY"===e){var r=this.getProperty("scaleX"),i=this.getProperty("scaleY");this.setProperty("scaleXY",{x:r,y:i},!0)}else if("ikWeight"===e||"ikBendPositive"===e){var a=this.getProperty("ikWeight"),o=this.getProperty("ikBendPositive");this.setProperty("ikAddKey",{weight:a,bendPositive:o},!0)}else if("ikTargetWeight"===e||"ikTargetBendPositive"===e){var s=this.getProperty("ikTargetWeight"),l=this.getProperty("ikTargetBendPositive");this.setProperty("ikTargetAddKey",{weight:s,bendPositive:l},!0)}else{var u=this.getProperty(e);this.setProperty(e,u,!0)}}},{key:"hasAnimationKey",value:function(e){return"ikBendPositive"===e||"ikWeight"===e||"ikTargetBendPositive"===e||"ikTargetWeight"===e||lm(v(n.prototype),"hasAnimationKey",this).call(this,e)}},{key:"getKeyState",value:function(e){if("ikBendPositive"===e||"ikWeight"===e){if(this.ik){if(this.ik.cacheValue)return I0.VIRTUAL_KEY;if(this.ik.animatedValue){var t=this.appStore.state.editor.dopesheet.curTime,n=this.appStore.getCurArmatureCurAnimation();if(n)if(Bf.hasKeyFrame(n,this.ik.id,S.IK,t))return I0.KEY}return I0.NO_KEY}}else if(("ikTargetBendPositive"===e||"ikTargetWeight"===e)&&this.ikTarget){if(this.ikTarget.cacheValue)return I0.VIRTUAL_KEY;if(this.ikTarget.animatedValue){var r=this.appStore.state.editor.dopesheet.curTime,i=this.appStore.getCurArmatureCurAnimation();if(i)if(Bf.hasKeyFrame(i,this.ikTarget.id,S.IK,r))return I0.KEY}return I0.NO_KEY}if(this.target){if(Bf.boneHasCacheProperty(this.target,e))return I0.VIRTUAL_KEY;var a=this.appStore.state.editor.dopesheet.curTime,o=this.appStore.getCurArmatureCurAnimation();if(o&&Bf.hasKeyFrame(o,this.target.id,e,a))return I0.KEY}return I0.NO_KEY}}],[{key:"toString",value:function(){return"BonePropertyAdapter"}}]),n}(P0),D0={name:"constrain",label:"\u7ea6\u675f",content:[{type:se.PROPERTY_ITEM,label:"IK",items:[{property:"ikAuto",type:le.CONST,tooltip:"\u5728\u9aa8\u9abc\u672b\u7aef\u751f\u6210\u7ea6\u675f\u76ee\u6807",componentType:ue.Button,componentProp:{icon:"icon-target-center-"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"ikTarget",type:le.CONST,tooltip:"\u8bbe\u7f6eIK\u7ea6\u675f\u76ee\u6807",componentType:ue.Button,componentProp:{icon:"icon-target"}}]}]},L0={name:"ikConstrain",label:"IK\u7ea6\u675f",content:[{type:se.PROPERTY_ITEM,label:"id",items:[{property:"ikId",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikBones",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u76ee\u6807",items:[{property:"ikTargetBoneName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikBendPositive",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikWeight",type:le.FLOAT,componentType:ue.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:se.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"deleteIk",type:le.CONST,tooltip:"\u5220\u9664IK",componentType:ue.Button,componentProp:{icon:"icon-delete"}}]}]},F0={name:"ikConstrainTarget",label:"IK\u7ea6\u675f\u76ee\u6807",content:[{type:se.PROPERTY_ITEM,label:"id",items:[{property:"ikTargetId",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikTargetName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikTargetBones",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikTargetBendPositive",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikTargetWeight",type:le.FLOAT,componentType:ue.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:se.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"deleteIkTarget",type:le.CONST,tooltip:"\u5220\u9664IK",componentType:ue.Button,componentProp:{icon:"icon-delete"}}]}]},B0=[{property:"rotation",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"clockwiseNum",type:le.FLOAT,componentType:ue.IntInput,componentProp:{step:1,min:0,max:99,width:16,speedDuration:20},tooltip:"\u65cb\u8f6c\u5708\u6570\uff0c\u5f53\u65cb\u8f6c\u7c7b\u578b\u662f\u2018\u987a\u65f6\u9488\u2019\u6216\u8005\u2018\u9006\u65f6\u9488\u2019\u65f6\u751f\u6548"},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"x"}},{property:"clockwise",type:le.ENUM,componentType:ue.DropdownInput,componentProp:{items:[{label:"\u81ea\u52a8",value:0},{label:"\u987a\u65f6\u9488",value:1},{label:"\u9006\u65f6\u9488",value:-1}],defaultValue:0,displayTextWhenEmpty:"\u81ea\u52a8"},tooltip:"\u65cb\u8f6c\u7c7b\u578b\uff0c\u2018\u81ea\u52a8\u2019\uff1a\u65cb\u8f6c\u65f6\u6309\u7167\u89d2\u5ea6\u6700\u5c0f\u7684\u65b9\u5411\u8fdb\u884c\u65cb\u8f6c"}],U0={name:"bone",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-dodeparent",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteBone",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u9abc"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9aa8\u9abc",width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u957f\u5ea6",items:[{property:"length",type:le.INT,componentType:ue.IntInput,componentProp:{step:1}}]},{type:se.PROPERTY_ITEM,label:"\u7ee7\u627f",items:[{property:"inheritScale",tooltip:"\u7ee7\u627f\u7236\u9aa8\u9abc\u7684\u7f29\u653e",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u7f29\u653e"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"inheritRotation",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u65cb\u8f6c"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc\u989c\u8272",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:5}},{property:"clearBoneColor",type:le.CONST,tooltip:"\u6e05\u9664\u81ea\u5b9a\u4e49\u9aa8\u9abc\u989c\u8272",componentType:ue.Button,componentProp:{icon:"icon-delete"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"boneColor",type:le.COLOR,componentType:ue.ColorInput,componentProp:{}}]}]},{name:"transform",label:"\u5750\u6807\u53d8\u6362",content:[{type:se.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"y",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"x",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.02,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"scaleX",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.02,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}}]}]}]},H0=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"getProperty",value:function(e){var t=this.appStore.rootState.runtime.editing.editMode,n={x:0,y:0,skewX:0,skewY:0,scaleX:1,scaleY:1};if(this.target.displayIndex>=0){var r=Qw.getSlotCurDisplay(this.target);r&&(n=r.transform)}switch(e){case"x":return n.x;case"y":return n.y;case"scaleX":return n.scaleX;case"scaleY":return n.scaleY;case"rotation":return Lf.radio2Angle(n.skewX);case"color":if(t===X.ANIMATION){if(void 0!==this.target.cacheColor)return this.target.cacheColor;if(void 0!==this.target.animatedColor)return this.target.animatedColor}return this.target.color||16777215;case"alpha":if(t===X.ANIMATION){if(void 0!==this.target.cacheAlpha)return this.target.cacheAlpha;if(void 0!==this.target.animatedAlpha)return this.target.animatedAlpha}return void 0===this.target.alpha?1:this.target.alpha;case"displayIndex":if(t===X.ANIMATION){if(void 0!==this.target.cacheDisplayIndex)return this.target.cacheDisplayIndex;if(void 0!==this.target.animatedDisplayIndex)return this.target.animatedDisplayIndex}return this.target.displayIndex;case"displayName":return this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target).name:"";case"displayAssetName":var i=this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target):null;return i?this.appStore.getAssetById(i.assetId).name:"";case"isMesh":var a=this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target):null;return!!a&&a.type===w.MESH;case"editMesh":return this.appStore.rootState.runtime.editing.stageTool===Z.MESH_EDIT_TOOL;case"ffdKeyPlaceholder":return!0;case"addBindingBones":return this.appStore.rootState.runtime.editing.stageTool===Z.RIGGING_TOOL;case"autoBonesWeight":return!1;case"riggingBones":var o=this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target):null;if(o&&o.mesh&&o.mesh.bonePose){var s=[];for(var l in o.mesh.bonePose){var u=o.mesh.bonePose[l];if(u){var c=parseInt(l),h=this.appStore.getBoneById(c),d=u.color;s.push({id:c,name:h.name,color:d})}}return{bones:s}}return{bones:[]};default:return this.target[e]}}},{key:"setProperty",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(["x","y","scaleX","scaleY","rotation"].indexOf(e)>-1&&this.target.displayIndex>=0){var a=Pe({},Qw.getSlotCurDisplay(this.target).transform);switch(e){case"x":a.x=t,i.push(e);break;case"y":a.y=t,i.push(e);break;case"scaleX":a.scaleX=t,i.push(e);break;case"scaleY":a.scaleY=t,i.push(e);break;case"rotation":a.skewX=Lf.angle2Radio(t),a.skewY=Lf.angle2Radio(t),i.push("skewX"),i.push("skewY")}var o=this.target.parentId,s=this.appStore.getBoneById(o),l=Lf.transformCross(s.globalTransform,a);this.appStore.dispatch(L.UPDATE_LOCAL_TRANSFORMS,y({},this.target.id,{local:a,global:l,diffKeys:i}))}else{var u=this.appStore.rootState.runtime.editing.editingArmatureId,c=this.appStore.rootState.runtime.dragonbones.armatureMap[u];if("name"===e){if(this.target.name!==t)if(Qw.checkSlotNameConflict(t,c))return mf.warn("\u63d2\u69fd\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(D.UPDATE_PROPERTIES)}else{if("displayName"===e){var h=this.target.id,d=Qw.getSlotCurDisplay(this.target);return void this.appStore.commit(H.UPDATE_PROPERTIES,{armatureId:u,slotId:h,displays:y({},d.id,y({},e,t))})}if("deleteSlot"===e){var f=this.target.id;return void this.appStore.dispatch(L.DELETE_SLOTS,{armatureId:u,slotIds:[f]})}if("setParent"===e)return void this.appStore.dispatch(L.PICK_SLOT_PARENT,{});if("isMesh"===e){var p=this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target):null,v=this.target.id,m=p.id,g=w.IMAGE;if(p.type===w.MESH)g=w.IMAGE;else{if(p.type!==w.IMAGE)return;if(g=w.MESH,!p.mesh){var b=function(e,t){var r=.5*e,i=.5*t,a={armatureId:u,slotId:v,displays:y({},m,{type:g,mesh:{points:{0:{vertices:[-r,-i],uvs:[0,0]},1:{vertices:[r,-i],uvs:[1,0]},2:{vertices:[-r,i],uvs:[0,1]},3:{vertices:[r,i],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]},width:e,height:t})};n.appStore.commit(H.UPDATE_PROPERTIES,a)},_=this.appStore.state.runtime.dragonbones.assetMap,x=this.appStore.state.library;return void(p.width&&p.height?b(p.width,p.height):Qw.getDisplaySize(p,_,x).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];b(t,n)}})).catch((function(e){})))}}this.appStore.historyBeginMerge(),this.appStore.rootState.runtime.editing.selectedMeshPointIds.length&&this.appStore.commit(U.SELECT_MESH_POINTS,{points:[]});var E={armatureId:u,slotId:v,displays:y({},m,{type:g})};return this.appStore.commit(H.UPDATE_PROPERTIES,E),void this.appStore.historyEndMerge()}if("resetMesh"===e){if(this.appStore.rootState.runtime.editing.editMode===X.POSE){var T=this.target.displayIndex>=0?Qw.getSlotCurDisplay(this.target):null,S=this.target.id,k=T.id;if(T.mesh){var C=function(e,t){var r=ge(T.mesh);for(var i in r.points){var a=r.points[i].uvs;r.points[i].vertices=[e*(a[0]-.5),t*(a[1]-.5)]}var o={armatureId:u,slotId:S,displays:y({},k,{mesh:r,width:e,height:t})};n.appStore.commit(H.UPDATE_PROPERTIES,o)};if(T.width&&T.height)C(T.width,T.height);else{var A=this.appStore.state.runtime.dragonbones.assetMap,I=this.appStore.state.library;Qw.getDisplaySize(T,A,I).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];C(t,n)}})).catch((function(e){}))}}}return}if("editMesh"===e)return void(t?this.appStore.dispatch(W.OPEN_MESH_EDIT_TOOL,{}):this.appStore.dispatch(W.CLOSE_MESH_EDIT_TOOL,{}));if("autoBonesWeight"===e)return void this.appStore.dispatch(B.AUTO_WEIGHT,{armatureId:u,slotId:this.target.id,displayId:Qw.getSlotCurDisplay(this.target).id});if("addBindingBones"===e)return void(t?this.appStore.dispatch(W.OPEN_RIGGING_TOOL,{}):this.appStore.dispatch(W.CLOSE_RIGGING_TOOL,{}));if("riggingBones"===e){var O=t.action,P=t.id;switch(O){case"delete":return void this.appStore.dispatch(B.DELETE_RIG_BONES,{armatureId:u,slotId:this.target.id,displayId:Qw.getSlotCurDisplay(this.target).id,boneIds:[P]});case"select":return void(this.appStore.rootState.runtime.editing.stageTool===Z.WEIGHT_TOOL&&this.appStore.commit(G.SELECT_RIGGING_BONE,{boneId:P}));case"over":return void this.appStore.commit(V.OVER_BONE,P);case"out":return void this.appStore.commit(V.OVER_BONE,0)}}}this.appStore.dispatch(L.UPDATE_PROPERTIES,{armatureId:u,slots:y({},this.target.id,y({},e,t)),addKey:r})}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==I0.KEY)if("ffdKeyPlaceholder"===e){var t=this.appStore.rootState.runtime.editing.editMode,n=Qw.getSlotCurDisplay(this.target,t);if(n&&n.mesh){var r=n.mesh.cacheFFD||n.mesh.animatedFFD,i={armatureId:this.appStore.rootState.runtime.editing.editingArmatureId,slotId:this.target.id,displayId:n.id,mesh:{points:{}},addKey:!0};if(r)for(var a in r)i.mesh.points[a]={vertices:r[a]};this.appStore.dispatch(B.UPDATE_MESH,i)}}else{var o=this.getProperty(e);this.setProperty(e,o,!0)}}},{key:"getPropertyConfig",value:function(){if(!this.target)return null;var e,t,n=ge(j0),r=this.appStore.rootState.runtime.editing.editMode,i=Qw.getSlotCurDisplay(this.target,r);if(i){if(r===X.POSE)(e=n.panels[2].content).push.apply(e,V0),i.type===w.MESH&&(t=n.panels[2].content).push.apply(t,G0);else if(r===X.ANIMATION){var a;if(n.operations=[],i.type===w.MESH)(a=n.panels[2].content).push.apply(a,z0);n.panels.splice(1,1)}}else n.panels.length=1,n.panels[0].content.splice(3,3);return n}},{key:"hasAnimationKey",value:function(e){return["ffdKeyPlaceholder","color","alpha","displayIndex"].indexOf(e)>-1}},{key:"getAllDisplay",value:function(){for(var e=[{label:"\u7a7a",value:-1}],t=0;t<this.target.displays.ids.length;t++){var n=this.target.displays.ids[t],r=this.target.displays.map[n];e.push({label:r.name,value:t})}return e}},{key:"getKeyState",value:function(e){if("ffdKeyPlaceholder"===e){if(this.target){var t=Qw.getSlotCurDisplay(this.target);if(t.mesh){if(t.mesh.cacheFFD)return I0.VIRTUAL_KEY;if(t.mesh.animatedFFD){var n=this.appStore.getCurArmatureCurAnimation();if(n){var r=this.appStore.state.editor.dopesheet.curTime;if(Bf.hasKeyFrame(n,t.id,S.FFD,r))return I0.KEY}}}return I0.NO_KEY}}else if(this.target){var i=this.appStore.getCurArmatureCurAnimation();if(i){var a,o=this.appStore.state.editor.dopesheet.curTime;if("displayIndex"===e?a=S.DISPLAY_INDEX:"alpha"!==e&&"color"!==e||(a=S.COLOR),a){if("displayIndex"===e){if(void 0!==this.target.cacheDisplayIndex)return I0.VIRTUAL_KEY}else if("alpha"===e){if(void 0!==this.target.cacheAlpha)return I0.VIRTUAL_KEY}else if("color"===e&&void 0!==this.target.cacheColor)return I0.VIRTUAL_KEY;if(Bf.hasKeyFrame(i,this.target.id,a,o))return I0.KEY}}}return I0.NO_KEY}}],[{key:"toString",value:function(){return"SlotPropertyAdapter"}}]),n}(P0),j0={name:"slot",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-dodeparent",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteSlot",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u63d2\u69fd"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u63d2\u69fd",width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u989c\u8272",items:[{property:"color",type:le.COLOR,componentType:ue.ColorInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u6df7\u5408",items:[{property:"blendMode",type:le.ENUM,componentType:ue.DropdownInput,componentProp:{items:[{label:"\u6b63\u5e38",value:E.Normal},{label:"\u53e0\u52a0",value:E.Add},{label:"\u64e6\u9664",value:E.Erase}],defaultValue:E.Normal}}]},{type:se.PROPERTY_ITEM,label:"\u4e0d\u900f\u660e",items:[{property:"alpha",type:le.FLOAT,componentType:ue.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:se.PROPERTY_ITEM,label:"\u663e\u793a\u8d44\u6e90",items:[{property:"displayIndex",type:le.ENUM,componentType:ue.DropdownInput,componentProp:{itemFunName:"getAllDisplay",displayTextWhenEmpty:"\u7a7a"}}]}]},{name:"transform",label:"\u5750\u6807\u53d8\u6362",content:[{type:se.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"y",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"x",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"Y"}},{property:"scaleX",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"X"}}]},{type:se.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:le.FLOAT,componentType:ue.FloatInput,componentProp:{step:1,fixed:2}}]}]},{name:"display",label:"\u8d44\u6e90\u5c5e\u6027",content:[{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"displayName",type:le.CONST,componentType:ue.Label,componentProp:{width:150,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u8d44\u6e90",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:5}},{property:"replaceAsset",type:le.CONST,componentType:ue.Button,tooltip:"\u66ff\u6362\u8d44\u6e90",componentProp:{icon:"icon-replace2"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"displayAssetName",type:le.CONST,componentType:ue.Label,componentProp:{width:100,align:"right"}}]}]}]},z0=[{type:se.PROPERTY_ITEM,label:"FFD",items:[{property:"ffdKeyPlaceholder",type:le.NONE,componentType:ue.Gap,componentProp:{}}]}],V0=[{type:se.PROPERTY_ITEM,label:"\u8f6c\u6210\u7f51\u683c",items:[{property:"isMesh",type:le.BOOLEAN,componentType:ue.BooleanSwitch,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7f51\u683c\u7f16\u8f91",visible:"isMesh",items:[{property:"resetMesh",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u91cd\u7f6e\u7f51\u683c",componentProp:{label:"\u91cd\u7f6e\u7f51\u683c"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"editMesh",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u7f16\u8f91\u7f51\u683c",componentProp:{label:"\u7f16\u8f91\u7f51\u683c",toggle:!0}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}}]}],G0=[{type:se.PROPERTY_ITEM,label:"\u7ed1\u5b9a\u5de5\u5177",visible:"isMesh",items:[{property:"autoBonesWeight",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u81ea\u52a8\u6743\u91cd",componentProp:{label:"\u81ea\u52a8\u6743\u91cd"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"addBindingBones",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u6dfb\u52a0\u9aa8\u9abc",componentProp:{label:"\u6dfb\u52a0\u9aa8\u9abc",toggle:!0}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd\u9aa8\u9abc\u8868",visible:"isMesh",items:[{property:"",type:le.NONE,componentType:ue.Gap,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"",visible:"isMesh",items:[{property:"riggingBones",type:le.ARRAY,componentType:ue.RiggingList,componentProp:{}}]}],W0=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._cacheMeshWeight=null,e}return d(n,[{key:"getProperty",value:function(e){var t=this.target;switch(e){case"type":return t?n.DISPLAY_TYPE_NAME[t.type]:"";case"displayName":return this.target.name;case"displayAssetName":return t?this.appStore.getAssetById(t.assetId).name:"";case"isMesh":var r=this.target;return!!r&&r.type===w.MESH;case"editMesh":return this.appStore.rootState.runtime.editing.stageTool===Z.MESH_EDIT_TOOL;case"ffdKeyPlaceholder":return!0;case"addBindingBones":return this.appStore.rootState.runtime.editing.stageTool===Z.RIGGING_TOOL;case"autoBonesWeight":return!1;case"riggingBones":var i=this.appStore.rootState.runtime.editing.selectedMeshPointIds,a=this.appStore.rootState.runtime.editing.riggingSelectedBoneId,o=this.target;if(o&&o.mesh&&o.mesh.bonePose){var s=[];for(var l in o.mesh.bonePose){var u=o.mesh.bonePose[l].color,c=parseInt(l),h={id:c,name:this.appStore.getBoneById(c).name,color:u};if(1===i.length){var d=i[0],f=o.mesh.boneWeights[d][c];h.weight=f,h.vertexIndex=parseInt(d)}s.push(h)}return{bones:s,selectedId:a}}return{bones:[]};default:return this.target[e]}}},{key:"setProperty",value:function(e,t){var n=this,r=this.appStore.rootState.runtime.editing.editingArmatureId,i=this.appStore.rootState.runtime.dragonbones.armatureMap[r],a=Qw.getSlotByDisplayId(i,this.target.id).id;if("name"===e){if(this.target.name!==t)if(Qw.checkDisplayNameConflict(t,i))return mf.warn("\u663e\u793a\u5bf9\u8c61\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(D.UPDATE_PROPERTIES)}else{if("displayName"===e){var o=this.target;return void this.appStore.commit(H.UPDATE_PROPERTIES,{armatureId:r,slotId:a,displays:y({},o.id,y({},e,t))})}if("deleteSlot"===e)return void this.appStore.dispatch(L.DELETE_SLOTS,{armatureId:r,slotIds:[a]});if("isMesh"===e){var s=this.target,l=s.id,u=w.IMAGE;if(s.type===w.MESH)u=w.IMAGE;else{if(s.type!==w.IMAGE)return;if(u=w.MESH,!s.mesh){var c=function(e,t){var i=.5*e,o=.5*t,s={armatureId:r,slotId:a,displays:y({},l,{type:u,mesh:{points:{0:{vertices:[-i,-o],uvs:[0,0]},1:{vertices:[i,-o],uvs:[1,0]},2:{vertices:[-i,o],uvs:[0,1]},3:{vertices:[i,o],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]},width:e,height:t})};n.appStore.commit(H.UPDATE_PROPERTIES,s)},h=this.appStore.state.runtime.dragonbones.assetMap,d=this.appStore.state.library;return void(s.width&&s.height?c(s.width,s.height):Qw.getDisplaySize(s,h,d).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];c(t,n)}})).catch((function(e){})))}}this.appStore.historyBeginMerge(),this.appStore.rootState.runtime.editing.selectedMeshPointIds.length&&this.appStore.commit(U.SELECT_MESH_POINTS,{points:[]});var f={armatureId:r,slotId:a,displays:y({},l,{type:u})};return this.appStore.commit(H.UPDATE_PROPERTIES,f),void this.appStore.historyEndMerge()}if("resetMesh"===e){if(this.appStore.rootState.runtime.editing.editMode===X.POSE){var p=this.target,v=p.id;if(p.mesh){var m=function(e,t){var i=ge(p.mesh);for(var o in i.points){var s=i.points[o].uvs;i.points[o].vertices=[e*(s[0]-.5),t*(s[1]-.5)]}var l={armatureId:r,slotId:a,displays:y({},v,{mesh:i,width:e,height:t})};n.appStore.commit(H.UPDATE_PROPERTIES,l)};if(p.width&&p.height)m(p.width,p.height);else{var g=this.appStore.state.runtime.dragonbones.assetMap,b=this.appStore.state.library;Qw.getDisplaySize(p,g,b).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];m(t,n)}})).catch((function(e){}))}}}return}if("editMesh"===e)return void(t?this.appStore.dispatch(W.OPEN_MESH_EDIT_TOOL,{}):this.appStore.dispatch(W.CLOSE_MESH_EDIT_TOOL,{}));if("autoBonesWeight"===e)return void this.appStore.dispatch(B.AUTO_WEIGHT,{armatureId:r,slotId:a,displayId:this.target.id});if("addBindingBones"===e)return void(t?this.appStore.dispatch(W.OPEN_RIGGING_TOOL,{}):this.appStore.dispatch(W.CLOSE_RIGGING_TOOL,{}));if("riggingBones"===e){var _=t.action,x=t.id;switch(_){case"delete":return void this.appStore.dispatch(B.DELETE_RIG_BONES,{armatureId:r,slotId:a,displayId:this.target.id,boneIds:[x]});case"select":return void(this.appStore.rootState.runtime.editing.stageTool===Z.WEIGHT_TOOL&&this.appStore.commit(G.SELECT_RIGGING_BONE,{boneId:x}));case"over":return void this.appStore.commit(V.OVER_BONE,x);case"out":return void this.appStore.commit(V.OVER_BONE,0);case"continuousEndCallback":return void(this._cacheMeshWeight=null);case"continuousStartCallback":return;case"changeWeight":var E=t.vertexIndex,T=t.weight,S=t.id,k=this.target,C=this.target.id,A=S,I={armatureId:r,slotId:a,displayId:C},O={};return this._cacheMeshWeight||(this._cacheMeshWeight=ge(k.mesh.boneWeights)),O[E]=Qw.calculateBoneWeight(k.mesh.boneWeights,E,A,T,this._cacheMeshWeight),O[E][A]=T,I.boneWeights=O,void this.appStore.commit(U.UPDATE_RIG_BONE,I)}}}}},{key:"getPropertyConfig",value:function(){if(!this.target)return null;var e,t,n=ge(X0),r=this.appStore.rootState.runtime.editing.editMode,i=this.target;if(r===X.POSE)(e=n.panels[1].content).push.apply(e,K0),i.type===w.MESH&&(t=n.panels[1].content).push.apply(t,q0);else if(r===X.ANIMATION){var a;if(n.operations=[],i.type===w.MESH)(a=n.panels[1].content).push.apply(a,Y0)}return n}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==I0.KEY&&"ffdKeyPlaceholder"===e){this.appStore.rootState.runtime.editing.editMode;var t=this.target;if(t&&t.mesh){var n=this.appStore.rootState.runtime.editing.editingArmatureId,r=this.appStore.rootState.runtime.dragonbones.armatureMap[n],i=Qw.getSlotByDisplayId(r,this.target.id).id,a=t.mesh.cacheFFD||t.mesh.animatedFFD,o={armatureId:n,slotId:i,displayId:t.id,mesh:{points:{}},addKey:!0};if(a)for(var s in a)o.mesh.points[s]={vertices:a[s]};this.appStore.dispatch(B.UPDATE_MESH,o)}}}},{key:"hasAnimationKey",value:function(e){return["ffdKeyPlaceholder"].indexOf(e)>-1}},{key:"getKeyState",value:function(e){if("ffdKeyPlaceholder"===e&&this.target){var t=this.target;if(t.mesh){if(t.mesh.cacheFFD)return I0.VIRTUAL_KEY;if(t.mesh.animatedFFD){var n=this.appStore.getCurArmatureCurAnimation();if(n){var r=this.appStore.state.editor.dopesheet.curTime;if(Bf.hasKeyFrame(n,t.id,S.FFD,r))return I0.KEY}}}return I0.NO_KEY}return I0.NO_KEY}}],[{key:"toString",value:function(){return"DisplayPropertyAdapter"}}]),n}(P0);W0.DISPLAY_TYPE_NAME=(y(S0={},w.IMAGE,"\u56fe\u7247"),y(S0,w.ARMATURE,"\u9aa8\u67b6"),y(S0,w.MESH,"\u7f51\u683c"),y(S0,w.BOUND_BOX,"\u5305\u56f4\u76d2"),y(S0,w.SHAPE,"\u5f62\u72b6"),y(S0,w.TEXT,"\u6587\u672c"),S0);var X0={name:"display",type:"",targetId:1,mutation:"",operations:[{name:"deleteDisplay",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u663e\u793a\u5bf9\u8c61"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.StringInput,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:le.CONST,componentType:ue.Label,componentProp:{width:40,align:"right"}}]}]},{name:"display",label:"\u8d44\u6e90\u5c5e\u6027",content:[{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"displayName",type:le.CONST,componentType:ue.Label,componentProp:{width:150,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u8d44\u6e90",items:[{property:"replaceAsset",type:le.CONST,componentType:ue.Button,tooltip:"\u66ff\u6362\u8d44\u6e90",componentProp:{icon:"icon-replace2"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"displayAssetName",type:le.CONST,componentType:ue.Label,componentProp:{width:100,align:"right"}}]}]}]},Y0=[{type:se.PROPERTY_ITEM,label:"FFD",items:[{property:"ffdKeyPlaceholder",type:le.NONE,componentType:ue.Gap,componentProp:{}}]}],K0=[{type:se.PROPERTY_ITEM,label:"\u8f6c\u6210\u7f51\u683c",items:[{property:"isMesh",type:le.BOOLEAN,componentType:ue.BooleanSwitch,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"\u7f51\u683c\u7f16\u8f91",visible:"isMesh",items:[{property:"resetMesh",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u91cd\u7f6e\u7f51\u683c",componentProp:{label:"\u91cd\u7f6e\u7f51\u683c"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"editMesh",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u7f16\u8f91\u7f51\u683c",componentProp:{label:"\u7f16\u8f91\u7f51\u683c",toggle:!0}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}}]}],q0=[{type:se.PROPERTY_ITEM,label:"\u7ed1\u5b9a\u5de5\u5177",visible:"isMesh",items:[{property:"autoBonesWeight",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u81ea\u52a8\u6743\u91cd",componentProp:{label:"\u81ea\u52a8\u6743\u91cd"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"addBindingBones",type:le.CONST,componentType:ue.ButtonLabel,tooltip:"\u6dfb\u52a0\u9aa8\u9abc",componentProp:{label:"\u6dfb\u52a0\u9aa8\u9abc",toggle:!0}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd\u9aa8\u9abc\u8868",visible:"isMesh",items:[{property:"",type:le.NONE,componentType:ue.Gap,componentProp:{}}]},{type:se.PROPERTY_ITEM,label:"",visible:"isMesh",items:[{property:"riggingBones",type:le.ARRAY,componentType:ue.RiggingList,componentProp:{}}]}],$0=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i)))._armature=void 0,e.ik=void 0,e.ikTarget=void 0,e}return d(n,[{key:"getProperty",value:function(e){var t=this.appStore.rootState.runtime.editing.editMode;switch(e){case"inheritScale":case"inheritRotation":return!0;case"name":var n=[];return this.target.forEach((function(e){n.push(e.name)})),n.join(",");case"id":var r=[];return this.target.forEach((function(e){r.push(e.id)})),r.join(",");case"ikId":return this.ik.id;case"ikName":return this.ik.name;case"ikBones":var i=this._armature.bones.map[this.ik.parentId],a=this._armature.bones.map[this.ik.childId];return a?"".concat(i.name," -> ").concat(a.name):"".concat(i.name);case"ikTargetBoneName":return this._armature.bones.map[this.ik.targetId].name;case"ikBendPositive":if(t===X.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.bendPositive;if(this.ik.animatedValue)return this.ik.animatedValue.bendPositive}return this.ik.bendPositive;case"ikWeight":if(t===X.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.weight;if(this.ik.animatedValue)return this.ik.animatedValue.weight}return this.ik.weight;case"ikTargetId":return this.ikTarget.id;case"ikTargetName":return this.ikTarget.name;case"ikTargetBones":return"".concat(this.ikTarget.parentId," -> ").concat(this.ikTarget.childId);case"ikTargetBendPositive":if(t===X.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.bendPositive;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.bendPositive}return this.ikTarget.bendPositive;case"ikTargetWeight":if(t===X.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.weight;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.weight}return this.ikTarget.weight}}},{key:"armature",set:function(e){this._armature=e}},{key:"getPropertyConfig",value:function(){var e=ge(J0);if(this.checkIKEnable()){if(this.ik=void 0,this.ikTarget=void 0,this._armature){var t=this._armature.constraint.ik;for(var n in t){var r=t[n];if(r&&(r.parentId===this.target[0].id||r.parentId===this.target[1].id||r.childId===this.target[0].id||r.childId===this.target[1].id?this.ik=r:r.targetId!==this.target[0].id&&r.targetId!==this.target[1].id||(this.ikTarget=r),this.ik&&this.ikTarget))break}this.ik&&(e.panels.splice(1,1),e.panels.push(Z0)),this.ikTarget&&e.panels.push(Q0)}}else e.panels.splice(1,1);return e}},{key:"checkIKEnable",value:function(){if(2!==this.target.length)return!1;var e=this.target[0],t=this.target[1];return!(e.parentId<=0||t.parentId<=0)&&(e.parentId===t.id||t.parentId===e.id)}},{key:"setProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("ikAuto"!==e)if("ikTarget"===e)this.appStore.dispatch(z.PICK_IK_TARGET);else if("deleteIk"===e)this.appStore.dispatch(z.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ik.id]});else if("deleteIkTarget"===e)this.appStore.dispatch(z.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ikTarget.id]});else if("ikAddKey"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:t,addKey:n});else if("ikBendPositive"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{bendPositive:t}});else if("ikWeight"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{weight:t}});else if("ikTargetAddKey"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:t,addKey:n});else if("ikTargetBendPositive"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{bendPositive:t}});else if("ikTargetWeight"===e)this.appStore.dispatch(z.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{weight:t}});else{if("deleteBone"===e){for(var r=0,i=this.target.length;r<i;r++){if(this.target[r].parentId<=0)return void mf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u5220\u9664")}for(var a=[],o=0,s=this.target.length;o<s;o++){var l=this.target[o];a.push(l.id)}return void this.appStore.dispatch(z.DELETE_BONES,{armatureId:this._armature.id,boneIds:a})}if("setParent"===e){for(var u=0,c=this.target.length;u<c;u++){if(this.target[u].parentId<=0)return void mf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u8bbe\u7f6e\u7236\u7ea7")}return void this.appStore.dispatch(z.PICK_BONE_PARENT,{})}}else{var h=this.appStore.rootState.runtime.dragonbones.armatureMap[this.appStore.rootState.runtime.editing.editingArmatureId];if(2===this.target.length){var d,f,p=this.target[0],v=this.target[1];if(p.parentId<=0||v.parentId<=0)return void mf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u6dfb\u52a0IK\u7ea6\u675f");if(p.parentId===v.id)d=v,f=p;else{if(v.parentId!==p.id)return void mf.warn("IK\u7ea6\u675f\u53ea\u80fd\u5728\u4e24\u4e2a\u7236\u5b50\u9aa8\u9abc\u4e4b\u95f4");d=p,f=v}d&&f&&this.appStore.dispatch(z.ADD_IK_AT_TAIL,{armatureId:h.id,parentId:d.id,childId:f.id})}else mf.warn("IK\u7ea6\u675f\u53ea\u80fd\u5728\u4e24\u4e2a\u9aa8\u9abc\u4e4b\u95f4")}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==I0.KEY)if("ikWeight"===e||"ikBendPositive"===e){var t=this.getProperty("ikWeight"),n=this.getProperty("ikBendPositive");this.setProperty("ikAddKey",{weight:t,bendPositive:n},!0)}else if("ikTargetWeight"===e||"ikTargetBendPositive"===e){var r=this.getProperty("ikTargetWeight"),i=this.getProperty("ikTargetBendPositive");this.setProperty("ikTargetAddKey",{weight:r,bendPositive:i},!0)}}},{key:"hasAnimationKey",value:function(e){return"ikBendPositive"===e||"ikWeight"===e||"ikTargetBendPositive"===e||"ikTargetWeight"===e||lm(v(n.prototype),"hasAnimationKey",this).call(this,e)}},{key:"getKeyState",value:function(e){if("ikBendPositive"===e||"ikWeight"===e){if(this.ik){if(this.ik.cacheValue)return I0.VIRTUAL_KEY;if(this.ik.animatedValue){var t=this.appStore.state.editor.dopesheet.curTime,n=this.appStore.getCurArmatureCurAnimation();if(n)if(Bf.hasKeyFrame(n,this.ik.id,S.IK,t))return I0.KEY}return I0.NO_KEY}}else if(("ikTargetBendPositive"===e||"ikTargetWeight"===e)&&this.ikTarget){if(this.ikTarget.cacheValue)return I0.VIRTUAL_KEY;if(this.ikTarget.animatedValue){var r=this.appStore.state.editor.dopesheet.curTime,i=this.appStore.getCurArmatureCurAnimation();if(i)if(Bf.hasKeyFrame(i,this.ikTarget.id,S.IK,r))return I0.KEY}return I0.NO_KEY}return I0.NO_KEY}}],[{key:"toString",value:function(){return"BonesPropertyAdapter"}}]),n}(P0),Z0={name:"ikConstrain",label:"IK\u7ea6\u675f",content:[{type:se.PROPERTY_ITEM,label:"id",items:[{property:"ikId",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikBones",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u76ee\u6807",items:[{property:"ikTargetBoneName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikBendPositive",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikWeight",type:le.FLOAT,componentType:ue.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:se.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"deleteIk",type:le.CONST,tooltip:"\u5220\u9664IK",componentType:ue.Button,componentProp:{icon:"icon-delete"}}]}]},Q0={name:"ikConstrainTarget",label:"IK\u7ea6\u675f\u76ee\u6807",content:[{type:se.PROPERTY_ITEM,label:"id",items:[{property:"ikTargetId",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikTargetName",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikTargetBones",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikTargetBendPositive",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:se.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikTargetWeight",type:le.FLOAT,componentType:ue.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:se.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"deleteIkTarget",type:le.CONST,tooltip:"\u5220\u9664IK",componentType:ue.Button,componentProp:{icon:"icon-delete"}}]}]},J0={name:"bones",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-add",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteBone",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u9abc"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:se.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:le.CONST,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:le.STRING,componentType:ue.Label,componentProp:{width:200,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:le.CONST,componentType:ue.Label,componentProp:{value:"\u9aa8\u9abc",width:40,align:"right"}}]},{type:se.PROPERTY_ITEM,label:"\u7ee7\u627f",items:[{property:"inheritScale",tooltip:"\u7ee7\u627f\u7236\u9aa8\u9abc\u7684\u7f29\u653e",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u7f29\u653e"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"inheritRotation",type:le.BOOLEAN,componentType:ue.BooleanCheck,componentProp:{label:"\u65cb\u8f6c"}}]},{type:se.PROPERTY_ITEM,label:"\u9aa8\u9abc\u989c\u8272",items:[{property:"clearBoneColor",type:le.CONST,tooltip:"\u6e05\u9664\u81ea\u5b9a\u4e49\u9aa8\u9abc\u989c\u8272",componentType:ue.Button,componentProp:{icon:"icon-delete"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"boneColor",type:le.COLOR,componentType:ue.ColorInput,componentProp:{}}]}]},{name:"constrain",label:"\u7ea6\u675f",content:[{type:se.PROPERTY_ITEM,label:"IK",items:[{property:"ikAuto",type:le.CONST,tooltip:"\u5728\u9aa8\u9abc\u672b\u7aef\u751f\u6210\u7ea6\u675f\u76ee\u6807",componentType:ue.Button,componentProp:{icon:"icon-target-center-"}},{property:"",type:le.CONST,componentType:ue.Gap,componentProp:{width:10}},{property:"ikTarget",type:le.CONST,tooltip:"\u8bbe\u7f6eIK\u7ea6\u675f\u76ee\u6807",componentType:ue.Button,componentProp:{icon:"icon-target"}}]}]}]},e1=KG.Panel,t1=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:n1,label:"\u5c5e\u6027",icon:"icon-icon_animation_settings"})}return d(n,null,[{key:"toString",value:function(){return"PropertyPanel"}}]),n}(_T),n1=function(e){p(n,e);var t=g(n);function n(e){var r,i;return l(this,n),(i=t.call(this,e)).refs={},i.transforming=!1,i.curArmature=void 0,i.bone=void 0,i.armatureAdapter=new M0,i.boneAdapter=new N0,i.bonesAdapter=new $0,i.slotAdapter=new H0,i.displayAdapter=new W0,i.curAdapter=void 0,i.lastSlot=!1,i.lastSlotDisplayIndex=-1,i.defaultRenderData=(y(r={},A.BONE,pe),y(r,A.SLOT,ve),y(r,A.ARMATURE,me),r),i.openDialog=function(){mf.rename("\u6539\u540d\u5b57","kakaka","\u8bf7\u8f93\u5165\u540d\u5b57",(function(e,t){}),(function(e,t){return e.length>8?"\u592a\u957f\u4e86":""}))},i.onPanelOpen=function(e){var t=Array.isArray(e)?e:[e];i.setState({openPanelNames:t})},i.clickItem=function(e){},i.onAddKey=function(e){i.curAdapter&&i.curAdapter.addKeyProperty(e)},i.getArmatureAnimationList=function(){var e=i.props.store.state,t=i.state.armatureId,n=(i.state.renderData.target,[{label:"\u505c\u6b62",value:0}]),r=e.runtime.dragonbones.armatureMap[t];if(r)for(var a=e.runtime.dragonbones.animationMap,o=r.animations,s=0,l=o.length;s<l;s++){var u=o[s],c=a[u];c&&n.push({label:c.name,value:u})}return n},i.state={openPanelNames:[],lastSelectId:-1},i.init(),i}return d(n,[{key:"store",get:function(){return this.props.store}},{key:"init",value:function(){this.props.eventBus.on(V.SELECT_BONES,this.updateSelectedItems,this),this.props.eventBus.on(F.SELECT_SLOTS,this.updateSelectedItems,this),this.props.eventBus.on(H.SELECT_DISPLAY,this.updateSelectedItems,this),this.props.eventBus.on($.UPDATE_FRAME,this.updateMoveFrame,this),this.props.eventBus.on(O.UPDATE_ANIMATED_PROPERTY,this.updateMoveFrame,this),this.props.eventBus.on(V.UPDATE_CACHE_TRANSFORMS,this.updateMoveFrame,this),this.props.eventBus.on(V.UPDATE_LOCAL_TRANSFORMS,this.updateSelectedItems,this),this.props.eventBus.on(D.UPDATE_PROPERTIES,this.forceRender,this),this.props.eventBus.on(N.UPDATE_PROPERTIES,this.updateArmature,this),this.props.eventBus.on(V.UPDATE_PROPERTIES,this.fastRender,this),this.props.eventBus.on(F.UPDATE_PROPERTIES,this.updateSlot,this),this.props.eventBus.on(P.AUTO_KEY,this.onAutoKey,this),this.props.eventBus.on(F.UPDATE_CACHE_PROPERTIES,this.updateSlot,this),this.props.eventBus.on(H.UPDATE_PROPERTIES,this.updateDisplay,this),this.props.eventBus.on(V.ADD_IK,this.forceRender,this),this.props.eventBus.on(V.DELETE_IKS,this.forceRender,this),this.props.eventBus.on(V.UPDATE_IK,this.fastRender,this),this.props.eventBus.on(V.UPDATE_CACHE_IK,this.fastRender,this),this.props.eventBus.on(U.UPDATE_CACHE_FFD,this.fastRender,this),this.props.eventBus.on(gmvc.GHistoryMutation.MERGE_START,this.checkMouseDisable,this),this.props.eventBus.on(gmvc.GHistoryMutation.MERGE_END,this.checkMouseDisableEnd,this),this.props.eventBus.on(G.SWITCH_TOOL,this.fastRender,this),this.props.eventBus.on(U.UPDATE_RIG_BONE,this.fastRender,this),this.props.eventBus.on(U.SELECT_MESH_POINTS,this.fastRender,this),this.props.eventBus.on(G.SELECT_RIGGING_BONE,this.fastRender,this),this.props.eventBus.on(G.SWITCH_MODE,this.forceRender,this),this.props.eventBus.on(N.SELECT_ARMATURE,this.forceRender,this),this.props.eventBus.on(G.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"componentDidMount",value:function(){this.reRender()}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"onAutoKey",value:function(e){var t,n,r,i=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.timelineInfo)||void 0===r?void 0:r.slot,a=!1;if(i)for(var o in i){if(i[o].displayIndex){a=!0;break}}a?this.forceRender():this.fastRender()}},{key:"updateSlot",value:function(e){var t,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.slots,i=!1;if(r)for(var a in r){if(r[a].hasOwnProperty("displayIndex")){i=!0;break}}i?this.forceRender():this.fastRender()}},{key:"updateDisplay",value:function(e){var t,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.displays,i=!1;if(r)for(var a in r){if(r[a].type>=0){i=!0;break}}i?this.forceRender():this.fastRender()}},{key:"refresStage",value:function(e){this.reRender(!1)}},{key:"checkMouseDisable",value:function(e){var t=this.props.store.getHistoryMergeName();t&&"color"!==t&&this.setState({mouseDisable:!0})}},{key:"checkMouseDisableEnd",value:function(e){var t=this.props.store.getHistoryMergeName();t&&"color"!==t||this.setState({mouseDisable:!1})}},{key:"onTranformStrart",value:function(){this.transforming=!0}},{key:"onTranformEnd",value:function(){this.transforming=!1,this.refreshAsset()}},{key:"refreshAsset",value:function(){this.transforming,this.reRender()}},{key:"updateMoveFrame",value:function(){this.reRender(!1,!0)}},{key:"updateSelectedItems",value:function(){this.reRender()}},{key:"updateArmature",value:function(e){var t,n,r,i,a,o;void 0!==(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.canvasShow)||void 0!==(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(a=i.data)||void 0===a||null===(o=a.properties)||void 0===o?void 0:o.showCanvasColor)?this.reRender(!0):this.reRender()}},{key:"fastRender",value:function(){var e=this.props.store.state.runtime.editing.editMode===X.ANIMATION;this.reRender(!1,e)}},{key:"forceRender",value:function(){var e=this.props.store.state.runtime.editing.editMode===X.ANIMATION;this.reRender(!0,e)}},{key:"getDiffItems",value:function(e,t){for(var n=[],r=0,i=e.panels.length;r<i;r++)for(var a=e.panels[r],o=0,s=a.content.length;o<s;o++){var l=a.content[o];if(l&&l.items)for(var u=0,c=l.items.length;u<c;u++){var h=l.items[u];h.property&&h.componentProp.value!==t.getProperty(h.property)&&n.push(h)}}return n}},{key:"reRenderBtnKey",value:function(e,t){if(e){var n=e,r=this.curAdapter.getKeyState(t);n.state.state!==r&&n.setState({state:r})}}},{key:"getPropertyRenderData",value:function(e){return this.defaultRenderData[e]}},{key:"reRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store;this.curArmature=n.getCurArmature();var r,i=n.state.runtime.editing.editMode,a=n.state.runtime.editing.selectedBoneIds,o=n.state.runtime.editing.selectedSlotIds,s=n.state.runtime.editing.selectedDisplayId,l=!0,u=a.length+o.length;if(0===u&&(this.curAdapter=this.armatureAdapter,this.armatureAdapter.target=this.curArmature,(r=this.armatureAdapter.getPropertyConfig()).target=this.armatureAdapter,r.targetId=-2),u>1){if(0===o.length&&s<=0&&a.length>1){this.curAdapter=this.bonesAdapter;for(var c=[],h=0,d=a.length;h<d;h++){var f=this.curArmature.bones.map[a[h]];c.push(f)}this.bonesAdapter.armature=this.curArmature,this.bonesAdapter.target=c,(r=this.bonesAdapter.getPropertyConfig()).target=this.bonesAdapter,r.targetId=-1,e=!0}this.lastSlot=!1}else if(a.length>0)this.bone=this.curArmature.bones.map[a[0]],this.bone&&(this.boneAdapter.armature=this.curArmature,this.boneAdapter.target=this.bone,this.curAdapter=this.boneAdapter,(r=this.boneAdapter.getPropertyConfig()).target=this.boneAdapter,r.targetId=this.bone.id),this.lastSlot=!1;else if(o.length>0){var p=this.curArmature.slots.map[o[0]];if(p){if(s>0)for(var v=0,m=p.displays.ids.length;v<m;v++){var g=p.displays.ids[v],y=p.displays.map[g];if(y.id===s){this.curAdapter=this.displayAdapter,this.displayAdapter.target=y,(r=this.displayAdapter.getPropertyConfig())&&(r.target=this.displayAdapter,r.targetId=y.id);break}}else this.curAdapter=this.slotAdapter,this.slotAdapter.target=p,(r=this.slotAdapter.getPropertyConfig())&&(r.target=this.slotAdapter,r.targetId=p.id);if(i===X.ANIMATION){if(this.lastSlot)this.curAdapter.getProperty("displayIndex")!==this.lastSlotDisplayIndex&&(e=!0);this.lastSlot=!0,this.lastSlotDisplayIndex=this.curAdapter.getProperty("displayIndex")}else this.lastSlot=!1}}if(r){l=r.targetId!==this.state.lastSelectId||e;var b=i===X.ANIMATION;if(l){for(var _=[],x=0,E=r.panels.length;x<E;x++){var w=r.panels[x];_.push(w.name)}this.setState({renderData:r,armatureId:this.curArmature.id,openPanelNames:_,lastSelectId:r.targetId})}else{for(var T=r.target,S=this.getDiffItems(this.state.renderData,T),k=this.refs,C=0,A=S.length;C<A;C++){var I=S[C],O=I.property;if(k[O]){var P=T.getProperty(O);k[O].value=P,I.componentProp.value=P,b&&k[O+"Key"]&&this.reRenderBtnKey(k[O+"Key"],O)}}if(b&&t)for(var M in this.refs)if(M.endsWith("Key")){var R=M.substr(0,M.length-3);this.reRenderBtnKey(this.refs[M],R)}}}else this.setState({renderData:void 0,lastSelectId:-3})}},{key:"renderPropertyOne",value:function(e,t){var n,r=this.state.renderData.target;if(e.property){var i=r.getProperty(e.property),o=e.mutation;o||(o=this.state.renderData.mutation),e.componentProp.value!==i&&(e.componentProp.value=i),e.componentProp.onChange=this.getValueChangeFunction(this.state.armatureId,r,e.property,o)}if(e.componentProp.continuousStartCallback=this.historyMergeStart.bind(this),e.componentProp.continuousEndCallback=this.historyMergeEnd.bind(this),e.componentProp.context=this,e.componentProp.itemFunName&&(e.componentProp.getItems=r.getFunction(e.componentProp.itemFunName)),n=(0,a.createElement)(A0,Pe(Pe({},e),{},{key:t,ref:e.property})),this.store.state.runtime.editing.editMode===X.ANIMATION&&this.curAdapter.hasAnimationKey(e.property)){var s=this.curAdapter.getKeyState(e.property);return(0,hf.jsxs)("div",{className:"animation-property",children:[n,(0,hf.jsx)(O0,{state:s,ref:e.property+"Key",property:e.property,onClick:this.onAddKey})]},t)}return n}},{key:"getPropertyKeyState",value:function(e){if(this.bone){if(Bf.boneHasCacheProperty(this.bone,e))return I0.VIRTUAL_KEY;var t=this.store.state.editor.dopesheet.curTime,n=this.store.getCurArmatureCurAnimation();if(n&&Bf.hasKeyFrame(n,this.bone.id,e,t))return I0.KEY}return I0.NO_KEY}},{key:"historyMergeStart",value:function(e){this.store.historyBeginMerge(e)}},{key:"historyMergeEnd",value:function(e){this.store.historyEndMerge(e)}},{key:"getValueChangeFunction",value:function(e,t,n,r){return function(e){t.setProperty(n,e)}}},{key:"getVisibleValue",value:function(e){for(var t=e.split(","),n=0;n<t.length;n++){var r=t[n];if(r.startsWith("!")){if(this.state.renderData.target.getProperty(r.substr(1)))return!1}else if(!this.state.renderData.target.getProperty(r))return!1}return!0}},{key:"renderPropertyItem",value:function(e,t){var n=this;if(e){if(e.type===se.SPLIT_LINE)return(0,hf.jsx)("div",{className:"property-split"},t);if(e.visible)if(!this.getVisibleValue(e.visible))return null;return(0,hf.jsxs)("div",{className:"property-item",children:[e.label&&(0,hf.jsx)("span",{className:"property-item-label",children:e.label}),(0,hf.jsx)("div",{className:"property-item-content",children:e.items.map((function(e,t){return n.renderPropertyOne(e,t)}))})]},t)}}},{key:"renderOperations",value:function(e){var t=this;return(0,hf.jsx)("div",{className:"property-operations",children:e.map((function(e,n){return(0,hf.jsx)("div",{className:"property-operation",children:"button"===e.type&&(0,hf.jsx)(YJ,Pe(Pe({},e.componentProperties),{},{value:1,onChange:t.getValueChangeFunction(t.state.armatureId,t.curAdapter,e.name,"")}))},e.name)}))})}},{key:"renderPanels",value:function(e){var t=this;if(e&&e.panels){var n=e.panels,r=this.state.openPanelNames;return(0,hf.jsxs)("div",{className:"property-area",children:[e.operations&&this.renderOperations(e.operations),(0,hf.jsx)("div",{className:"property-panel-box"+(this.state.mouseDisable||this.state.disabled?" panel-mouse-forbid panel-disabled":""),children:(0,hf.jsx)(KG,{activeKey:r,onChange:this.onPanelOpen,children:n.map((function(e,n){return(0,hf.jsx)(e1,{header:e.label,children:e.content.map((function(e,n){return t.renderPropertyItem(e,n)}))},e.name)}))})})]})}}},{key:"getTestItems",value:function(){return[{label:"aa1",value:"aa1"},{label:"bb2",value:"bb2"},{label:"cc3",value:"cc3"}]}},{key:"render",value:function(){var e=this.state.renderData,t=this.renderPanels(e);return(0,hf.jsx)("div",{className:"property-panel",children:t})}}]),n}(a.Component),r1=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).refs={},r.getIcon=function(e){switch(e.data.type){case A.SLOT:return(0,hf.jsx)(mT,{type:"icon-image3"});case A.BONE:return(0,hf.jsx)(mT,{type:"icon-bone"});case A.DISPLAY:var t=e.data.data;if(t)switch(t.type){case w.IMAGE:return(0,hf.jsx)(mT,{type:"icon-image"});case w.BOUND_BOX:return(0,hf.jsx)(mT,{type:"icon-sharpicons_rectangular-shape"});case w.ARMATURE:return(0,hf.jsx)(mT,{type:"icon-man"});case w.MESH:return(0,hf.jsx)(mT,{type:"icon-mesh"})}}},r.onDoubleClick=function(e){r.props.disabled},r.onDragStart=function(e){r.props.disabled||(e.stopPropagation(),r.props.dragStartCallback&&r.props.dragStartCallback(e,r.props.data))},r.onDragEnter=function(e){if(!r.props.disabled&&(e.stopPropagation(),r.props.dragEnterCallback)){var t=r.props.dragEnterCallback(e,r.props.data);r.setState({canDrop:t})}},r.onDragLeave=function(e){r.props.disabled||(e.stopPropagation(),r.props.dragLeaveCallback&&r.props.dragLeaveCallback(e,r.props.data),r.setState({canDrop:!1}))},r.onDrop=function(e){r.props.disabled||(e.stopPropagation(),r.props.dropCallback&&r.props.dropCallback(e,r.props.data),r.setState({canDrop:!1}))},r.state={canDrop:!1},r}return d(n,[{key:"render",value:function(){var e=this.props.data;return(0,hf.jsxs)("div",{className:"outline-item"+(this.props.selected?" selected":"")+(this.props.over?" over":"")+(this.state.canDrop?" drop":""),ref:"outlineItem","data-draggable":this.props.disabled?"false":"true",onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,children:[this.getIcon(e),(0,hf.jsx)("div",{className:"item-name",children:e.name}),(e.data.type===A.BONE||e.data.type===A.SLOT)&&(0,hf.jsxs)("span",{children:[(0,hf.jsx)(SA,{icon:"icon-dot1",selectedIcon:"icon-eye",changeCallback:this.props.getVisibleOneCallback,selected:this.props.hidden||!1,disabled:this.props.disabled,toggle:!0}),(0,hf.jsx)(SA,{icon:"icon-dot1",selectedIcon:"icon-lock",changeCallback:this.props.getLockOneCallback,selected:this.props.locked||!1,disabled:this.props.disabled,toggle:!0})]})]})}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.outlineItem)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.outlineItem)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.outlineItem)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),i1=function(e){p(n,e);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).refs={},e.getIcon=function(e){if(!e.children)return(0,hf.jsx)(mT,{type:"icon-code"})},e.onDoubleClick=function(e){},e.onDragStart=function(e){},e.onDragEnter=function(e){},e}return d(n,[{key:"render",value:function(){var e=this.props.data;return(0,hf.jsxs)("div",{className:"outline-item",ref:"outlineHead","data-draggable":!1,onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,children:[(0,hf.jsx)("div",{children:e.name}),(0,hf.jsx)(SA,{icon:"icon-unlock",selectedIcon:"icon-lock",changeCallback:this.props.getLockOneCallback,selected:this.props.locked,disabled:this.props.disabled,toggle:!0}),(0,hf.jsx)(SA,{icon:"icon-eye1",selectedIcon:"icon-eye",changeCallback:this.props.getVisibleOneCallback,selected:this.props.hidden,disabled:this.props.disabled,toggle:!0})]})}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.outlineHead)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.outlineHead)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.outlineHead)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),a1=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:o1,label:"\u5927\u7eb2",icon:"icon-LinkOutline"})}return d(n,[{key:"resize",value:function(e,t){this.eventBus.dispatchEventWidth("outlineResize",{})}}],[{key:"toString",value:function(){return"OutlinePanel"}}]),n}(_T),o1=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).dragData=void 0,r.refs={},r.onItemOut=function(e){r.props.store.commit(V.OVER_BONE,0),r.props.store.commit(F.OVER_SLOT,0)},r.onItemOver=function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.type,i=null===e||void 0===e?void 0:e.id;switch(n){case A.BONE:r.props.store.commit(V.OVER_BONE,i);break;case A.SLOT:r.props.store.commit(F.OVER_SLOT,i);break;case A.DISPLAY:var a=r.props.store.getCurArmature(),o=Qw.getSlotByDisplayId(a,i);r.props.store.commit(F.OVER_SLOT,o.id)}},r.onItemSelect=function(e){var t;if(!r.props.disabled&&!r.state.disabled){var n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.type,i=null===e||void 0===e?void 0:e.id;switch(r.props.store.historyBeginMerge(),n){case A.BONE:r.props.store.commit(F.SELECT_SLOTS,[]),r.props.store.commit(V.SELECT_BONES,[i]);break;case A.SLOT:r.props.store.commit(V.SELECT_BONES,[]),r.props.store.commit(F.SELECT_SLOTS,[i]);break;case A.DISPLAY:var a=r.props.store.getCurArmature(),o=Qw.getSlotByDisplayId(a,i);r.props.store.commit(V.SELECT_BONES,[]),r.props.store.commit(H.SELECT_DISPLAY,{slotId:o.id,displayId:i})}r.props.store.historyEndMerge()}},r.getLockOneCallback=function(e){return function(t){if(!r.props.disabled&&!r.state.disabled){var n=r.props.store.state.runtime.editing.lockBoneSlotIds;t?r.props.store.commit(W.LOCK_ITEMS,r.arrayAdd(n,e)):r.props.store.commit(W.LOCK_ITEMS,r.arrayRemove(n,e))}}},r.getVisibleOneCallback=function(e){return function(t){if(!r.props.disabled&&!r.state.disabled){var n=r.props.store.state.runtime.editing.hideBoneSlotIds;t?r.props.store.commit(W.HIDE_ITEMS,r.arrayAdd(n,e)):r.props.store.commit(W.HIDE_ITEMS,r.arrayRemove(n,e))}}},r.onLockAll=function(e){if(!r.state.disabled&&!r.props.disabled)if(e){var t=r.props.store.getCurArmature().bones.ids.concat(r.props.store.getCurArmature().slots.ids);r.props.store.commit(W.LOCK_ITEMS,t)}else r.props.store.commit(W.LOCK_ITEMS,[])},r.onVisibleAll=function(e){if(!r.state.disabled&&!r.props.disabled)if(e){var t=r.props.store.getCurArmature().bones.ids.concat(r.props.store.getCurArmature().slots.ids);r.props.store.commit(W.HIDE_ITEMS,t)}else r.props.store.commit(W.HIDE_ITEMS,[])},r.onSortEnd=function(e){e.oldIndex,e.newIndex},r.onSearch=function(){},r.onOverItem=function(e){},r.onOutItem=function(e){},r.onClickItem=function(e){},r.onDragEnter=function(e,t){if(!r.props.disabled&&!r.state.disabled)return r.checkCanDrop(r.dragData,t)},r.onDragLeave=function(e,t){!r.props.disabled&&r.state.disabled},r.onDragStart=function(e,t){r.props.disabled||r.state.disabled||(r.dragData=t)},r.onDrop=function(e,t){var n,i,a;if(!r.props.disabled&&!r.state.disabled&&r.checkCanDrop(r.dragData,t))if((null===(n=r.dragData.data)||void 0===n?void 0:n.type)===A.DISPLAY&&(null===(i=t.data)||void 0===i?void 0:i.type)===A.SLOT){var o=r.props.store.getCurArmature(),s=t.data.data,l=r.dragData.data.data,u=Qw.getSlotByDisplayId(o,l.id);r.props.store.dispatch(j.SET_PARENT,{armatureId:o.id,displays:[{slotId:u.id,displayId:l.id,parentId:s.id}]})}else if((null===(a=t.data)||void 0===a?void 0:a.type)===A.BONE){var c,h=r.props.store.getCurArmature();if((null===(c=r.dragData.data)||void 0===c?void 0:c.type)===A.SLOT){var d=r.dragData.data.data,f=t.data.data;r.props.store.dispatch(L.SET_PARENT,{armatureId:h.id,slotIds:[d.id],parentId:f.id})}else{var p=r.dragData.data.data,v=t.data.data;r.props.store.dispatch(z.SET_PARENT,{armatureId:h.id,boneIds:[p.id],parentId:v.id})}}},r.checkCanDrop=function(e,t){var n,i,a,o,s;if((null===(n=e.data)||void 0===n?void 0:n.type)===A.DISPLAY&&(null===(i=t.data)||void 0===i?void 0:i.type)===A.SLOT)return!t.data.data.displays.map[e.id];if((null===(a=e.data)||void 0===a?void 0:a.type)===A.DISPLAY)return!1;if((null===(o=t.data)||void 0===o?void 0:o.type)!==A.BONE)return!1;if((null===(s=e.data)||void 0===s?void 0:s.type)===A.SLOT){var l=t.data.data;return e.data.data.parentId!==l.id}var u=t.data.data,c=e.data.data;if(c.parentId===u.id)return!1;var h=r.props.store.getCurArmature();return!Qw.isDescendantBone(h,c.id,u.id)};var i=r.getTreeData(),a=r.props.store.state.editor.over.overBone||r.props.store.state.editor.over.overSlotId,o=r.props.store.state.runtime.editing.selectedBoneIds.concat(r.props.store.state.runtime.editing.selectedSlotIds),s=n.getAllItemIds(i);return r.state={children:i,overId:a,selectedIds:o,noShowIds:r.getNoShowIds(),lockIds:r.getLockIds(),openIds:s,disabled:!1},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on(N.SELECT_ARMATURE,this.refreshArmature,this),this.props.eventBus.on(V.SELECT_BONES,this.refreshSelect,this),this.props.eventBus.on(F.SELECT_SLOTS,this.refreshSelect,this),this.props.eventBus.on(H.SELECT_DISPLAY,this.refreshSelect,this),this.props.eventBus.on(V.OVER_BONE,this.refreshOver,this),this.props.eventBus.on(F.OVER_SLOT,this.refreshOver,this),this.props.eventBus.on(W.HIDE_ITEMS,this.refreshVisible,this),this.props.eventBus.on(W.LOCK_ITEMS,this.refreshLock,this),this.props.eventBus.on(N.UPDATE_PROPERTIES,this.refreshChildren,this),this.props.eventBus.on(V.UPDATE_PROPERTIES,this.refreshChildren,this),this.props.eventBus.on(V.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(V.ADD_BONE,this.refreshChildren,this),this.props.eventBus.on(V.DELETE_BONES,this.refreshChildren,this),this.props.eventBus.on(V.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(F.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(H.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(F.ADD_SLOT,this.refreshChildren,this),this.props.eventBus.on(F.DELETE_SLOTS,this.refreshChildren,this),this.props.eventBus.on(G.SWITCH_TOOL,this.onSwitchTool,this),this.props.eventBus.on("outlineResize",this.checkScroll,this)}},{key:"componentDidUpdate",value:function(e,t,n){this.checkScroll()}},{key:"checkScroll",value:function(){if(this.refs.outlineRef){var e=this.refs.outlineRef.getElementsByClassName("v-tree");if(e&&e[0]){var t=e[0],n=!1,r=(n=t.scrollHeight>t.clientHeight)?"outline-armature-scroll":"outline-armature";return this.refs.armatureRef.className=r,n}}}},{key:"getBoneChildren",value:function(e,t,n){for(var r=[],i=0,a=t.slots.ids.length;i<a;i++){var o=t.slots.ids[i],s=t.slots.map[o];if(s.parentId===e.id){var l={id:s.id,name:s.name,data:{type:A.SLOT,data:s},children:[]};if(!n||1!==s.displays.ids.length)for(var u=0,c=s.displays.ids.length;u<c;u++){var h=s.displays.ids[u],d=s.displays.map[h],f={id:d.id,name:d.name,data:{type:A.DISPLAY,data:d}};l.children.push(f)}r.push(l)}}for(var p=0,v=t.bones.ids.length;p<v;p++){var m=t.bones.ids[p],g=t.bones.map[m];if(g.parentId===e.id){var y={id:g.id,name:g.name,data:{type:A.BONE,data:g},children:this.getBoneChildren(g,t,n)};r.push(y)}}return r}},{key:"getTreeData",value:function(){var e=this.props.store.getCurArmature(),t=Qw.getRootBone(e),n={id:t.id,name:t.name,data:{type:A.BONE,data:t},children:[]};return n.children=this.getBoneChildren(t,e,!1),[n]}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"refreshChildren",value:function(){var e=this.getTreeData();this.setState({children:e})}},{key:"refreshLock",value:function(){this.setState({lockIds:this.getLockIds()})}},{key:"refreshVisible",value:function(){this.setState({noShowIds:this.getNoShowIds()})}},{key:"refreshArmature",value:function(){var e=this.getTreeData(),t=n.getAllItemIds(e);this.setState({children:e,openIds:t})}},{key:"refreshSelect",value:function(){var e=this.props.store.state.runtime.editing.selectedBoneIds.concat(this.props.store.state.runtime.editing.selectedSlotIds);this.props.store.state.runtime.editing.selectedDisplayId>0&&e.push(this.props.store.state.runtime.editing.selectedDisplayId),this.setState({selectedIds:e})}},{key:"refreshOver",value:function(){var e=this.props.store.state.editor.over.overBone||this.props.store.state.editor.over.overSlotId;this.setState({overId:e})}},{key:"getNoShowIds",value:function(){return this.props.store.state.runtime.editing.hideBoneSlotIds}},{key:"getLockIds",value:function(){return this.props.store.state.runtime.editing.lockBoneSlotIds}},{key:"isLocked",value:function(e){return this.props.store.state.runtime.editing.lockBoneSlotIds.indexOf(e)>=0}},{key:"isNoshow",value:function(e){return this.props.store.state.runtime.editing.hideBoneSlotIds.indexOf(e)>=0}},{key:"isLockAll",value:function(){var e=this.props.store.state.runtime.editing.lockBoneSlotIds;return this.props.store.getCurArmature().bones.ids.concat(this.props.store.getCurArmature().slots.ids).length===e.length}},{key:"isNoshowAll",value:function(){var e=this.props.store.state.runtime.editing.hideBoneSlotIds;return this.props.store.getCurArmature().bones.ids.concat(this.props.store.getCurArmature().slots.ids).length===e.length}},{key:"isSelected",value:function(e){var t=this.state.selectedIds;return!!t&&(t&&t.indexOf(e)>=0)}},{key:"isOver",value:function(e){return this.state.overId===e}},{key:"getClassName",value:function(e){var t=["outline-item"];return this.isSelected(e)?t.push("selected"):this.isOver(e)&&t.push("over"),t.join(" ")}},{key:"render",value:function(){var e=this,t=this.props.store.getCurArmature();t.id,t.name,A.ARMATURE;return(0,hf.jsxs)("div",{className:"outline"+(this.state.disabled?" panel-disabled":""),ref:"outlineRef",children:[(0,hf.jsxs)("div",{className:"header",children:[(0,hf.jsx)("input",{className:"search",onChange:this.onSearch}),(0,hf.jsx)("span",{children:"\u641c\u7d22"})]}),(0,hf.jsx)("div",{className:"outline-armature",ref:"armatureRef",children:(0,hf.jsx)(i1,{data:t,store:this.props.store,eventBus:this.props.eventBus,locked:this.isLockAll(),hidden:this.isNoshowAll(),getLockOneCallback:this.onLockAll,getVisibleOneCallback:this.onVisibleAll,disabled:this.state.disabled})}),(0,hf.jsx)(yT,{value:this.state.children,openAll:!0,openIds:this.state.openIds,onItemOut:this.onItemOut,onItemOver:this.onItemOver,onItemSelect:this.onItemSelect,foldByIcon:!0,selectedIds:this.state.selectedIds,gap:12,onlyView:this.state.disabled,children:function(t){return(0,hf.jsx)(r1,{data:t,store:e.props.store,eventBus:e.props.eventBus,locked:e.state.lockIds&&e.state.lockIds.includes(t.id),hidden:e.state.noShowIds&&e.state.noShowIds.includes(t.id),dragEnterCallback:e.onDragEnter,dragLeaveCallback:e.onDragLeave,dragStartCallback:e.onDragStart,dropCallback:e.onDrop,getLockOneCallback:e.getLockOneCallback(t.id),getVisibleOneCallback:e.getVisibleOneCallback(t.id),over:e.state.overId===t.id,selected:e.state.selectedIds.includes(t.id),disabled:e.state.disabled})}})]})}},{key:"arrayRemove",value:function(e,t){return e.filter((function(e){return e!==t}))}},{key:"arrayAdd",value:function(e,t){return e.indexOf(t)<0&&e.push(t),e}}],[{key:"getAllItemIds",value:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.getItemIds(i,t)}return t}},{key:"getItemIds",value:function(e,t){if(t.push(e.id),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.getItemIds(i,t)}}}]),n}(a.Component);function s1(e,t,n){return(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}var l1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},u1=function(){if("undefined"===typeof window||"undefined"===typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function c1(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function h1(e,t){e.style["".concat(u1,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function d1(e,t){e.style["".concat(u1,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function f1(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function p1(e,t,n){return Math.max(e,Math.min(n,t))}function v1(e){return"px"===e.substr(-2)?parseFloat(e):0}function m1(e){var t=window.getComputedStyle(e);return{bottom:v1(t.marginBottom),left:v1(t.marginLeft),right:v1(t.marginRight),top:v1(t.marginTop)}}function g1(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function y1(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function b1(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function _1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:_1(e.parentNode,t,r)}}function x1(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,a=t,o="px";if("string"===typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);i=parseFloat(t),a=parseFloat(t),o=s[1]}return"%"===o&&(i=i*n/100,a=a*r/100),{x:i,y:a}}function E1(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:E1(e.parentNode):null}function w1(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:v1(t.gridColumnGap),y:v1(t.gridRowGap)}:{x:0,y:0}}var T1=27,S1=32,k1=37,C1=38,A1=39,I1=40,O1={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function P1(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return Ie(r.querySelectorAll(t)).forEach((function(e,t){("file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===O1.Canvas&&n[t].width>0&&n[t].height>0)&&e.getContext("2d").drawImage(n[t],0,0)})),r}function M1(e){return null!=e.sortableHandle}var R1=function(){function e(t,n){l(this,e),this.container=void 0,this.onScrollCallback=void 0,this.interval=void 0,this.isAutoScrolling=void 0,this.container=t,this.onScrollCallback=n}return d(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,a=e.width,o=e.height,s={x:0,y:0},l={x:1,y:1},u=10,c=10,h=this.container,d=h.scrollTop,f=h.scrollLeft,p=h.scrollHeight,v=h.scrollWidth,m=0===d,g=p-d-h.clientHeight===0,y=0===f,b=v-f-h.clientWidth===0;n.y>=i.y-o/2&&!g?(s.y=1,l.y=c*Math.abs((i.y-o/2-n.y)/o)):n.x>=i.x-a/2&&!b?(s.x=1,l.x=u*Math.abs((i.x-a/2-n.x)/a)):n.y<=r.y+o/2&&!m?(s.y=-1,l.y=c*Math.abs((n.y-o/2-r.y)/o)):n.x<=r.x+a/2&&!y&&(s.x=-1,l.x=u*Math.abs((n.x-a/2-r.x)/a)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}();var N1={lift:[S1],drop:[S1],cancel:[T1],up:[C1,k1],down:[I1,A1]},D1={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:N1,shouldCancelStart:function(e){return-1!==[O1.Input,O1.Textarea,O1.Select,O1.Option,O1.Button].indexOf(e.target.tagName)||!!f1(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1};var L1=function(){function e(){l(this,e),this.refs={},this.active=void 0}return d(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(F1)}}]),e}();function F1(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function B1(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=function(t){p(i,t);var r=g(i);function i(e){var t;return l(this,i),(t=r.call(this,e)).manager=void 0,t.events=void 0,t.container=void 0,t.document=void 0,t._window=void 0,t.scrollContainer=void 0,t._touched=!1,t._pos=void 0,t._delta=void 0,t.pressTimer=void 0,t.cancelTimer=void 0,t.node=void 0,t.margin=void 0,t.width=void 0,t.height=void 0,t.marginOffset=void 0,t.boundingClientRect=void 0,t.containerBoundingRect=void 0,t.index=void 0,t.newIndex=void 0,t._axis=void 0,t.offsetEdge=void 0,t.initialOffset=void 0,t.initialScroll=void 0,t.initialWindowScroll=void 0,t.helper=void 0,t.sortableGhost=void 0,t.translate=void 0,t.minTranslate=void 0,t.maxTranslate=void 0,t.listenerNode=void 0,t.autoscrollInterval=void 0,t.isAutoScrolling=void 0,t.sorting=!1,t.sortingIndex=null,t.contentWindow=void 0,t.autoScroller=void 0,t.touched=!1,t.position=void 0,t._awaitingUpdateBeforeSortStart=void 0,t.delta=void 0,t.gridGap=void 0,t.axis=void 0,t.prevIndex=void 0,t.initialFocusedNode=void 0,t._helpNodeNumber=0,t.handleStart=function(e){if(!t.props.disabled){var n=t.props,r=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=b1(e);var a=f1(e.target,(function(e){return null!=e.sortableInfo}));if(a&&a.sortableInfo&&t.nodeIsChild(a)&&!t.state.sorting){var o=t.props.useDragHandle,s=a.sortableInfo,l=s.index,u=s.collection;if(s.disabled)return;if(o&&!f1(e.target,M1))return;t.manager.active={collection:u,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==O1.Anchor||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){t.handlePress(e)}),t.props.pressDelay))}}}},t.nodeIsChild=function(e){return e.sortableInfo.manager===t.manager},t.handleMove=function(e){if(!t.props.disabled){var n=t.props,r=n.distance,i=n.pressThreshold;if(0===t._helpNodeNumber&&!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var a=b1(e),o={x:t.position.x-a.x,y:t.position.y-a.y},s=Math.abs(o.x)+Math.abs(o.y);t.delta=o,r||i&&!(s>=i)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}},t.handleEnd=function(){t.props.disabled||(t.touched=!1,t.cancel())},t.cancel=function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)},t.handlePress=function(){var e=_e(ye().mark((function e(n){var r,i,a,o,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C;return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.disabled){e.next=2;break}return e.abrupt("return");case 2:if(!(r=t.manager.getActive())){e.next=50;break}if(i=t.props,a=i.axis,o=i.getHelperDimensions,s=i.helperClass,l=i.hideSortableGhost,u=i.updateBeforeSortStart,c=i.onSortStart,h=i.useWindowAsScrollContainer,d=r.node,f=r.collection,p=t.manager.isKeySorting,"function"!==typeof u){e.next=16;break}return t._awaitingUpdateBeforeSortStart=!0,e.prev=9,v=d.sortableInfo.index,e.next=13,u({collection:f,index:v,node:d,isKeySorting:p},n);case 13:return e.prev=13,t._awaitingUpdateBeforeSortStart=!1,e.finish(13);case 16:m=d.sortableInfo.index,g=m1(d),y=w1(t.container),b=t.scrollContainer.getBoundingClientRect(),_=o({index:m,node:d,collection:f}),t.node=d,t.margin=g,t.gridGap=y,t.width=_.width,t.height=_.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=d.getBoundingClientRect(),t.containerBoundingRect=b,t.index=m,t.newIndex=m,t.axis={x:a.indexOf("x")>=0,y:a.indexOf("y")>=0},t.offsetEdge=_1(d,t.container),t.initialOffset=b1(p?Pe(Pe({},n),{},{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):n),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(P1(d)),t._helpNodeNumber++,c1(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-g.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-g.top,"px"),width:"".concat(t.width,"px")}),p&&t.helper.focus(),l&&(t.sortableGhost=d,c1(d,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},p?(x=h?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,E=x.top,w=x.left,T=x.width,S=x.height,k=E+S,C=w+T,t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=C-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=E-t.boundingClientRect.top,t.maxTranslate.y=k-(t.boundingClientRect.top+t.height))):(t.axis.x&&(t.minTranslate.x=(h?0:b.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(h?t.contentWindow.innerWidth:b.left+b.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(h?0:b.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(h?t.contentWindow.innerHeight:b.top+b.height)-t.boundingClientRect.top-t.height/2)),s&&s.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=n.touches?d:t.contentWindow,p?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(l1.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),l1.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:m}),c&&c({node:d,index:m,collection:f,isKeySorting:p,nodes:t.manager.getOrderedRefs(),helper:t.helper},n),p&&t.keyMove(0);case 50:case"end":return e.stop()}}),e,null,[[9,,13,16]])})));return function(t){return e.apply(this,arguments)}}(),t.handleSortMove=function(e){var n=t.props.onSortMove;"function"===typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)},t.handleSortEnd=function(e){var n=t.props,r=n.hideSortableGhost,i=n.onSortEnd,a=t.manager,o=a.active.collection,s=a.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(l1.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),l1.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),t._helpNodeNumber--,r&&t.sortableGhost&&c1(t.sortableGhost,{opacity:"",visibility:""});for(var u=0,c=l.length;u<c;u++){var h=l[u],d=h.node;h.edgeOffset=null,h.boundingClientRect=null,h1(d,null),d1(d,null),h.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"===typeof i&&i({collection:o,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1},t.autoscroll=function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=Pe({},t.translate),i=0,a=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),a=t.translate.y-r.y),t.translate=r,h1(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=a)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}},t.onAutoScroll=function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()},t.handleKeyDown=function(e){var n=e.keyCode,r=t.props,i=r.shouldCancelStart,a=r.keyCodes,o=void 0===a?{}:a,s=Pe(Pe({},N1),o);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||s.lift.includes(n)&&!i(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),s.lift.includes(n)&&!t.manager.active?t.keyLift(e):s.drop.includes(n)&&t.manager.active?t.keyDrop(e):s.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):s.up.includes(n)?t.keyMove(-1):s.down.includes(n)&&t.keyMove(1))},t.keyLift=function(e){var n=e.target,r=f1(n,(function(e){return null!=e.sortableInfo})).sortableInfo,i=r.index,a=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:a},t.handlePress(e)},t.keyMove=function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,a=t.newIndex;if(!(i<0||i>r)){t.prevIndex=a,t.newIndex=i;var o=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find((function(e){return e.node.sortableInfo.index===o})),l=s.node,u=t.containerScrollDelta,c=s.boundingClientRect||y1(l,u),h=s.translate||{x:0,y:0},d=c.top+h.y-u.top,f=c.left+h.x-u.left,p=a<i,v=p&&t.axis.x?l.offsetWidth-t.width:0,m=p&&t.axis.y?l.offsetHeight-t.height:0;t.handleSortMove({pageX:f+v,pageY:d+m,ignoreTransition:0===e})}},t.keyDrop=function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()},t.handleKeyEnd=function(e){t.manager.active&&t.keyDrop(e)},t.isValidSortingTarget=function(e){var n=t.props.useDragHandle,r=e.target,i=f1(r,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?M1(r):r.sortableInfo)},t.manager=new L1,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t.state={},t.context={manager:t.manager},t}return d(i,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"===typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:E1(e.container)||e.container,e.autoScroller=new R1(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return l1[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&(this.helper.parentNode.removeChild(this.helper),this._helpNodeNumber--),this.container&&(Object.keys(this.events).forEach((function(t){return l1[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,i=t.lockToContainerEdges,a=t.transitionDuration,o=t.keyboardSortingTransitionDuration,s=void 0===o?a:o,l=this.manager.isKeySorting,u=e.ignoreTransition,c=b1(e),h={x:c.x-this.initialOffset.x,y:c.y-this.initialOffset.y};if(h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,i){var d=function(e){var t=e.height,n=e.width,r=e.lockOffset,i=It(Array.isArray(r)?r:[r,r],2),a=i[0],o=i[1];return[x1({height:t,lockOffset:a,width:n}),x1({height:t,lockOffset:o,width:n})]}({height:this.height,lockOffset:r,width:this.width}),f=It(d,2),p=f[0],v=f[1],m={x:this.width/2-p.x,y:this.height/2-p.y},g={x:this.width/2-v.x,y:this.height/2-v.y};h.x=p1(this.minTranslate.x+m.x,this.maxTranslate.x-g.x,h.x),h.y=p1(this.minTranslate.y+m.y,this.maxTranslate.y-g.y,h.y)}"x"===n?h.y=0:"y"===n&&(h.x=0),l&&s&&!u&&d1(this.helper,s),h1(this.helper,h)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,a=this.windowScrollDelta,o=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,u=this.manager.isKeySorting,c=this.newIndex;this.newIndex=null;for(var h=0,d=o.length;h<d;h++){var f=o[h].node,p=f.sortableInfo.index,v=f.offsetWidth,m=f.offsetHeight,g={height:this.height>m?m/2:this.height/2,width:this.width>v?v/2:this.width/2},y=u&&p>this.index&&p<=c,b=u&&p<this.index&&p>=c,_={x:0,y:0},x=o[h].edgeOffset;x||(x=_1(f,this.container),o[h].edgeOffset=x,u&&(o[h].boundingClientRect=y1(f,i)));var E=h<o.length-1&&o[h+1],w=h>0&&o[h-1];E&&!E.edgeOffset&&(E.edgeOffset=_1(E.node,this.container),u&&(E.boundingClientRect=y1(E.node,i))),p!==this.index?(t&&d1(f,t),this.axis.x?this.axis.y?b||p<this.index&&(s+a.left-g.width<=x.left&&l+a.top<=x.top+g.height||l+a.top+g.height<=x.top)?(_.x=this.width+this.marginOffset.x,x.left+_.x>this.containerBoundingRect.width-g.width&&E&&(_.x=E.edgeOffset.left-x.left,_.y=E.edgeOffset.top-x.top),null===this.newIndex&&(this.newIndex=p)):(y||p>this.index&&(s+a.left+g.width>=x.left&&l+a.top+g.height>=x.top||l+a.top+g.height>=x.top+m))&&(_.x=-(this.width+this.marginOffset.x),x.left+_.x<this.containerBoundingRect.left+g.width&&w&&(_.x=w.edgeOffset.left-x.left,_.y=w.edgeOffset.top-x.top),this.newIndex=p):y||p>this.index&&s+a.left+g.width>=x.left?(_.x=-(this.width+this.marginOffset.x),this.newIndex=p):(b||p<this.index&&s+a.left<=x.left+g.width)&&(_.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=p)):this.axis.y&&(y||p>this.index&&l+a.top+g.height>=x.top?(_.y=-(this.height+this.marginOffset.y),this.newIndex=p):(b||p<this.index&&l+a.top<=x.top+g.height)&&(_.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=p))),h1(f,_),o[h].translate=_):n&&(this.sortableGhost=f,c1(f,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),u&&(this.newIndex=c);var T=u?this.prevIndex:c;r&&this.newIndex!==T&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:T,isKeySorting:u,nodes:o,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!==typeof e?(0,Re.findDOMNode)(this):e(n.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,hf.jsx)(e,Pe({ref:t},this.props))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"===typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),i}(a.Component),t.displayName=g1("sortableList",e),t.defaultProps=D1,t.childContextTypes={manager:function(){return null}},t}var U1=function(e){p(n,e);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this,{componentClass:H1,label:"\u5c42\u7ea7",icon:"icon-layers-fill"})).toolBarElement=document.createElement("span"),(0,s.createRoot)(e.toolBarElement).render((0,hf.jsx)(j1,{store:e.store,eventBus:e.eventBus})),e}return d(n,null,[{key:"toString",value:function(){return"OrderPanel"}}]),n}(_T),H1=function(e){p(n,e);var t=g(n);function n(e){var r,i=this;l(this,n),(r=t.call(this,e)).SortableItem=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=function(t){p(i,t);var r=g(i);function i(){var e;l(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=r.call.apply(r,[this].concat(n))).node=void 0,e.ref=void 0,e}return d(i,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,i=(0,Re.findDOMNode)(this),a=this.context.manager;i.sortableInfo={collection:t,disabled:n,index:r,manager:a},this.node=i,this.ref={node:i},a.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,hf.jsx)(e,Pe({ref:t},this.props))}}]),i}(a.Component),t.defaultProps={index:0,collection:"",disabled:!1,value:null},t.displayName=g1("sortableElement",e),t.contextTypes={manager:function(){return null}},t}((function(e){var t=e.value.data;return(0,hf.jsxs)("div",{className:r.getClassName(t.slot.id),onClick:r.onClickItem,onMouseOver:r.onOverItem,onMouseOut:r.onOutItem,id:t.slot.id.toString(),children:[(0,hf.jsx)("div",{style:{width:"20px"}}),(0,hf.jsx)(mT,{type:t.rank?t.rank>0?"icon-arrowdown":"icon-arrowup":"empty"}),(0,hf.jsx)(mT,{type:"icon-image3"}),(0,hf.jsx)("div",{className:"display-name",children:t.slot.name})]})})),r.SortableContainer=B1((function(e){var t=e.items;return(0,hf.jsx)("div",{className:"display-list",children:t.map((function(e,t){return(0,hf.jsx)(i.SortableItem,{index:t,value:{data:e}},"item-".concat(e.slot.id))}))})})),r.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex;if(!r.state.disabled){var i=r.props.store.getCurArmature(),a=i.slots.ids.length,o=a-t-1,s=a-n-1,l=s1(r.getCurZOrder(),o,s);r.props.store.dispatch(D.CHANGE_SLOT_ORDER,{id:i.id,newOrder:l})}},r.onOverItem=function(e){var t=parseInt(e.currentTarget.getAttribute("id"));r.props.store.commit(F.OVER_SLOT,t)},r.onOutItem=function(e){r.props.store.commit(F.OVER_SLOT,0)},r.onClickItem=function(e){if(!r.state.disabled){e.stopPropagation();var t=parseInt(e.currentTarget.getAttribute("id"));r.props.store.dispatch(L.SELECT_SLOTS,[t])}};var o=r.getAllDisplay(),s=r.props.store.state.editor.over.overSlotId,u=r.props.store.state.runtime.editing.selectedSlotIds;return r.state={children:o,overId:s,selectedIds:u,disabled:!1},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on(N.SELECT_ARMATURE,this.refreshOrder,this),this.props.eventBus.on(F.OVER_SLOT,this.refreshOver,this),this.props.eventBus.on(F.SELECT_SLOTS,this.refreshSelect,this),this.props.eventBus.on(H.SELECT_DISPLAY,this.refreshSelect,this),this.props.eventBus.on(N.CHANGE_SLOT_ORDER,this.refreshOrder,this),this.props.eventBus.on(O.UPDATE_ANIMATED_PROPERTY,this.refreshOrder,this),this.props.eventBus.on($.UPDATE_FRAME,this.refreshOrder,this),this.props.eventBus.on(N.CACHE_SLOT_ORDER,this.refreshOrder,this),this.props.eventBus.on(F.ADD_SLOT,this.refreshOrder,this),this.props.eventBus.on(G.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"getCurZOrder",value:function(){var e=this.props.store.getCurArmature();if(this.props.store.state.runtime.editing.editMode===X.ANIMATION){if(e.cacheZOrder)return e.cacheZOrder;if(e.animatedZOrder)return e.animatedZOrder}return e.slots.ids}},{key:"getAllDisplay",value:function(){var e=this.props.store.getCurArmature(),t=this.props.store.rootState.runtime.editing.editMode,n=Qw.getAllSlotDisplay(e,t);if(t===X.ANIMATION){var r=e.slots.ids,i={};r.forEach((function(e,t){i[e]=t}));var a=this.getCurZOrder(),o=[];a.forEach((function(e){o.push(i[e])}));for(var s=Lf.relativeZOrder(o),l=0,u=s.length;l<u;l+=2)for(var c=s[l],h=0===s[l+1]?0:s[l+1]>0?-1:1,d=r[c],f=0,p=n.length;f<p;f++)if(n[f].slot.id===d){n[f].rank=h;break}}return n}},{key:"refreshOrder",value:function(){var e=this.getAllDisplay();this.setState({children:e})}},{key:"refreshSelect",value:function(){var e=this.props.store.state.runtime.editing.selectedSlotIds;this.setState({selectedIds:e})}},{key:"refreshOver",value:function(){var e=this.props.store.state.editor.over.overSlotId;this.setState({overId:e})}},{key:"isSelected",value:function(e){var t=this.state.selectedIds;return!!t&&(t&&t.indexOf(e)>=0)}},{key:"isOver",value:function(e){return this.state.overId===e}},{key:"getClassName",value:function(e){var t=["order-item"];return this.isSelected(e)?t.push("selected"):this.isOver(e)&&t.push("over"),t.join(" ")}},{key:"render",value:function(){var e=this.state.children,t=this.SortableContainer;return(0,hf.jsx)("div",{className:"z-order"+(this.state.disabled?" panel-disabled":""),children:(0,hf.jsx)(t,{collection:"order-list",lockAxis:"y",distance:5,onSortEnd:this.onSortEnd,items:e,disabled:this.state.disabled})})}}]),n}(a.Component),j1=function(e){p(n,e);var t=g(n);function n(e){var r;l(this,n),(r=t.call(this,e)).refreshFrame=function(){var e=r.getKeyState();r.setState({keyState:e})},r.onSwitchMode=function(){var e=r.props.store.state.runtime.editing.editMode;r.setState({mode:e})},r.onMoveUp=function(){var e=r.props.store.getCurArmature().slots.ids.length,t=r.getSelectSlotIndex();t<e-1&&r.moveSelectedSlotTo(t+1)},r.onMoveDown=function(){var e=r.getSelectSlotIndex();e>0&&r.moveSelectedSlotTo(e-1)},r.onMoveBottom=function(){var e=r.props.store.getCurArmature(),t=r.getSelectSlotId();if(t){var n=r.getCurZOrder(),i=n.indexOf(t);if(0!==i){var a=s1(n,i,0);r.props.store.dispatch(D.CHANGE_SLOT_ORDER,{id:e.id,newOrder:a})}}},r.onMoveTop=function(){var e=r.props.store.getCurArmature(),t=e.slots.ids.length,n=r.getSelectSlotId();if(n){var i=r.getCurZOrder(),a=i.indexOf(n),o=t-1;if(a!==o){var s=s1(i,a,o);r.props.store.dispatch(D.CHANGE_SLOT_ORDER,{id:e.id,newOrder:s})}}},r.onAddOrderFrame=function(){if(r.getKeyState()!==I0.KEY){var e=r.getCurZOrder(),t=r.props.store.getCurArmature();r.props.store.dispatch(D.CHANGE_SLOT_ORDER,{id:t.id,newOrder:e})}};var i=r.props.store.state.runtime.editing.editMode,a=r.getKeyState();return r.state={mode:i,keyState:a,disabled:!1},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on(G.SWITCH_MODE,this.onSwitchMode,this),this.props.eventBus.on(O.UPDATE_ANIMATED_PROPERTY,this.refreshFrame,this),this.props.eventBus.on($.UPDATE_FRAME,this.refreshFrame,this),this.props.eventBus.on(N.CACHE_SLOT_ORDER,this.refreshFrame,this),this.props.eventBus.on(G.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===Z.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"getKeyState",value:function(){var e=I0.NO_KEY;if(this.props.store.state.runtime.editing.editMode!==X.ANIMATION)return e;var t=this.props.store.getCurArmature(),n=this.props.store.getCurAnimation(t),r=this.props.store.state.editor.dopesheet.curTime;return n&&n.zOrder&&(e=t.cacheZOrder?I0.VIRTUAL_KEY:Bf.hasKeyFrame(n,t.id,S.Z_ORDER,r)?I0.KEY:I0.NO_KEY),e}},{key:"getSelectSlotId",value:function(){var e=this.props.store.state.runtime.editing.selectedSlotIds;if(e&&e.length>0)return e[0]}},{key:"getCurZOrder",value:function(){var e=this.props.store.getCurArmature();if(this.props.store.state.runtime.editing.editMode===X.ANIMATION){if(e.cacheZOrder)return e.cacheZOrder;if(e.animatedZOrder)return e.animatedZOrder}return e.slots.ids}},{key:"getSelectSlotIndex",value:function(){var e=this.getSelectSlotId();if(e)return this.getCurZOrder().indexOf(e)}},{key:"moveSelectedSlotTo",value:function(e){var t=this.props.store.getCurArmature(),n=this.getSelectSlotId();if(n){var r=this.getCurZOrder(),i=r.indexOf(n),a=s1(r,i,e);this.props.store.dispatch(D.CHANGE_SLOT_ORDER,{id:t.id,newOrder:a})}}},{key:"render",value:function(){var e=this.props.store.state.runtime.editing.editMode;return(0,hf.jsxs)("span",{className:"order-tool"+(this.state.disabled?" panel-disabled panel-mouse-forbid":""),style:{position:"absolute",top:"2px"},children:[e===X.ANIMATION&&(0,hf.jsxs)("span",{children:[(0,hf.jsx)(O0,{state:this.state.keyState,property:"zOder",onClick:this.onAddOrderFrame}),(0,hf.jsx)(AG,{})]}),(0,hf.jsx)(EA,{normal:"layer-up",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveUp}),(0,hf.jsx)(EA,{normal:"layer-down",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveDown}),(0,hf.jsx)(EA,{normal:"layer_top",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveTop}),(0,hf.jsx)(EA,{normal:"layer_bottom",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveBottom})]})}}]),n}(a.Component),z1=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:V1,label:"\u52a8\u753b",icon:"icon-tab_icon_animation_22_n"})}return d(n,null,[{key:"toString",value:function(){return"AnimationPanel"}}]),n}(_T),V1=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e))._searchText="",r.onSearch=function(e){r._searchText=e.target.value||"",r.refreshAnimation()},r.onSelectAnimation=function(e){r.state.selectedId!==e&&r.props.store.commit(P.SELECT_ANIMATION,{animationId:e})},r.onAddAnimation=function(){var e=r.props.store.getCurArmature();r.props.store.dispatch(O.ADD_ANIMATION_INTERACTIVE,e.id)},r.onRenameAnimation=function(e){var t=r.props.store.getCurArmature(),n=e;r.props.store.dispatch(O.RENAME_ANIMATION_INTERACTIVE,{armatureId:t.id,animationId:n})},r.onCloneAnimation=function(){r.props.store.dispatch(O.CLONE_ANIMATION_INTERACTIVE,{})},r.onDeleteAnimation=function(e){var t=r.props.store.getCurArmature(),n=t.id,i=r.props.store.state.runtime.editing.selectedAnimationId;if(e!==i){var a={animationId:e,armatureId:n};r.props.store.dispatch(O.REMOVE_ANIMATION_INTERACTIVE,a)}else{for(var o=-1,s=0,l=t.animations.length;s<l;s++){var u=t.animations[s];if(u!==i){o=u;break}}var c={animationId:e,armatureId:n,nextAnimationId:o};r.props.store.dispatch(O.REMOVE_ANIMATION_INTERACTIVE,c)}},r.state={animations:r.getAnimationData(),selectedId:r.getSelectedAniamtionId()},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on(P.ADD_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(P.REMOVE_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(P.RENAME_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(P.SELECT_ANIMATION,this.refreshSelect,this),this.props.eventBus.on(N.SELECT_ARMATURE,this.refreshAll,this)}},{key:"refreshAnimation",value:function(){this.setState({animations:this.getAnimationData()})}},{key:"refreshSelect",value:function(){this.setState({selectedId:this.getSelectedAniamtionId()})}},{key:"refreshAll",value:function(){this.setState({animations:this.getAnimationData(),selectedId:this.getSelectedAniamtionId()})}},{key:"getAnimationData",value:function(){var e=[],t=this.props.store.getCurArmature(),n=this.props.store.state.runtime.dragonbones.animationMap;this.props.store.state.runtime.editing.selectedAnimationId;if(t&&t.animations)for(var r=0,i=t.animations.length;r<i;r++){var a=t.animations[r],o=n[a];this._searchText&&-1===o.name.indexOf(this._searchText)||e.push({id:a,name:o.name})}return e}},{key:"getSelectedAniamtionId",value:function(){return this.props.store.state.runtime.editing.selectedAnimationId}},{key:"render",value:function(){var e=this;return(0,hf.jsxs)("div",{className:"animation-panel",children:[(0,hf.jsxs)("div",{className:"header",children:[(0,hf.jsx)("input",{className:"search",onChange:this.onSearch}),(0,hf.jsx)("span",{children:"\u641c\u7d22"}),(0,hf.jsxs)("span",{className:"animation-tool",children:[(0,hf.jsx)(EA,{className:"animation-btn",normal:"animation/add",normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:this.onAddAnimation,tooltip:"\u6dfb\u52a0\u52a8\u753b"}),(0,hf.jsx)(EA,{className:"animation-btn",normal:"dopesheet/timeline_copy",normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:this.onCloneAnimation,tooltip:"\u514b\u9686\u52a8\u753b"})]})]}),(0,hf.jsx)("div",{className:"animation-list",ref:"armatureRef",children:this.state.animations.map((function(t,n){return(0,hf.jsxs)("div",{className:e.state.selectedId===t.id?"animation-item selected":"animation-item",onClick:function(){return e.onSelectAnimation(t.id)},onDoubleClick:function(){e.onRenameAnimation(t.id)},children:[t.name,(0,hf.jsx)(mT,{className:"animation-delete",type:"icon-delete",onClick:function(n){n.stopPropagation(),e.onDeleteAnimation(t.id)}})]},n)}))})]})}}]),n}(a.Component),G1=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.call(this,{componentClass:W1,label:"\u66f2\u7ebf",icon:"icon-curvedchart"})}return d(n,null,[{key:"toString",value:function(){return"CurvePanel"}}]),n}(_T),W1=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).presetCurves=[{name:"\u53f0\u9636",icon:"curve/none",value:[0]},{name:"\u7ebf\u6027",icon:"curve/linear",value:[1]},{name:"\u6e10\u5165",icon:"curve/easeIn",value:[2]},{name:"\u6e10\u51fa",icon:"curve/easeOut",value:[3]},{name:"\u6e10\u5165\u6e10\u51fa",icon:"curve/easeInOut",value:[4]}],r.state={curve:r.getCurCurve()},r.init(),r}return d(n,[{key:"init",value:function(){this.props.eventBus.on($.SELECT_FRAME,this.refreshCurve,this),this.props.eventBus.on(P.MODIFY_FRAMES,this.refreshCurve,this)}},{key:"refreshCurve",value:function(){this.setState({curve:this.getCurCurve()})}},{key:"getCurCurve",value:function(){var e=this.getSelectedFrames();return 0===e.length?[]:e[0].curve||[1]}},{key:"getSelectedFrames",value:function(){for(var e=this.props.store.state.runtime.editing.selectedFrameIds,t=this.props.store.state.runtime.editing.selectedAnimationId,n=this.props.store.state.runtime.dragonbones.animationMap[t],r=[],i=0,a=e.length;i<a;i++){var o=e[i],s=Bf.getFrameById(n,o);s&&r.push(s)}return r}},{key:"onModifyFrameCurve",value:function(e){0!==this.getSelectedFrames().length&&this.props.store.dispatch(O.MODIEY_FRAMES_CURVE,{curve:e})}},{key:"getCurveName",value:function(e){if(e&&1===e.length)if(1===e.length)switch(e[0]){case 0:return"\u53f0\u9636";case 1:return"\u7ebf\u6027";case 2:return"\u6e10\u5165";case 3:return"\u6e10\u51fa";case 4:return"\u6e10\u5165\u6e10\u51fa"}else if(4===e.length)return"bezier";return""}},{key:"render",value:function(){var e=this;return(0,hf.jsxs)("div",{className:"curve-panel",children:[(0,hf.jsxs)("div",{className:"curve-control",children:[(0,hf.jsx)("span",{className:"curve-label",children:"\u5f53\u524d\u5e27\u7684\u66f2\u7ebf:"}),(0,hf.jsx)("span",{className:"curve-value",children:"".concat(this.getCurveName(this.state.curve))})]}),(0,hf.jsx)("div",{className:"curve-btns",children:this.presetCurves.map((function(t,n){return(0,hf.jsx)(EA,{className:"curve-btn",normal:t.icon,normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:function(){e.onModifyFrameCurve(t.value)},tooltip:t.name},n)}))})]})}}]),n}(a.Component),X1=function(e){return e.libraryPanel="libraryPanel",e.stagePanel="stagePanel",e.propertyPanel="propertyPanel",e.dopesheetPanel="dopesheetPanel",e.outlinePanel="outlinePanel",e.scenePanel="scenePanel",e.actionPanel="actionPanel",e.animationPanel="animationPanel",e.curvePanel="curvePanel",e}({}),Y1=function(e){p(n,gmvc.ModelController);var t=g(n);function n(){var e;return l(this,n),(e=t.call(this)).store=y2.instance.store,e._curMode=X.POSE,e.layout=void 0,e.container=void 0,e.layout=new gboxLayout.GBoxLayout,e}return d(n,[{key:"focus",get:function(){return this.layout.focusBox}},{key:"onLayoutChange",value:function(){this.store.rootState.editor.layoutChange||this.store.commit(G.LAYOUT_CHANGE,{})}},{key:"initLayout",value:function(e){var t,n,r,i,a,o=this;this.container=e;var s=this.store.state;gboxLayout.GBoxLayout.GAP=1;var l=this.container,u=(null===(t=s.editor)||void 0===t||null===(n=t.layout)||void 0===n?void 0:n.animationLayout)||oe,c=(null===(r=s.editor)||void 0===r||null===(i=r.layout)||void 0===i?void 0:i.poseLayout)||ie,h=u;this._curMode=s.runtime.editing.editMode;var d=(y(a={},X.POSE,c),y(a,X.ANIMATION,h),a)[this._curMode]||c;this.layout.registPanel(X1.libraryPanel,new xT),this.layout.registPanel(X1.stagePanel,new FV),this.layout.registPanel(X1.propertyPanel,new t1),this.layout.registPanel(X1.dopesheetPanel,new IG),this.layout.registPanel(X1.outlinePanel,new a1),this.layout.registPanel(X1.scenePanel,new U1),this.layout.registPanel(X1.animationPanel,new z1),this.layout.registPanel(X1.curvePanel,new G1),this.layout.setContainer(l),this.layout.setData(d),this.layout.changeCallback=this.onLayoutChange.bind(this),window.printLayout=function(){o.layout.getData()}}},{key:"start",value:function(){this._addNotification(G.SWITCH_MODE,this.onSwitchMode),this._addNotification(_.SAVE_LAYOUT,this.saveLayout)}},{key:"stop",value:function(){this._removeNotification(G.SWITCH_MODE,this.onSwitchMode)}},{key:"saveLayout",value:function(){this.store.state;var e=this.layout.getData(),t={animationLayout:void 0,poseLayout:void 0};this._curMode===X.ANIMATION?t.animationLayout=e:this._curMode===X.POSE&&(t.poseLayout=e),this.store.commit(G.UPDATE_LAYOUT,t)}},{key:"onSwitchMode",value:function(e){var t=this.store.state,n=t.runtime.editing.editMode;if(this._curMode!==n){if(t.editor.layoutChange){var r=this.layout.getData(),i={animationLayout:void 0,poseLayout:void 0};this._curMode===X.ANIMATION?i.animationLayout=r:this._curMode===X.POSE&&(i.poseLayout=r),this.store.commit(G.UPDATE_LAYOUT,i)}this._curMode=n;var a=t.editor.layout.poseLayout,o=t.editor.layout.animationLayout;switch(n){case X.ANIMATION:this.layout.setData(o);break;case X.POSE:this.layout.setData(a)}}}}],[{key:"toString",value:function(){return"LayoutController"}}]),n}(),K1=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=document.getElementById("container");if(e){var t=Y1.getInstance(Y1);t.initLayout(e),t.start()}}}]),n}(),q1=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;this._retain(),Se.instance.init().then((function(t){t?e._release(!0):e._release(!1)}))}}]),n}(),$1={};$1.write=function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$1.read=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",navigator.clipboard.readText());case 1:case"end":return e.stop()}}),e)}))),$1.readSync=function(){throw new Error("`.readSync()` is not supported in browsers!")},$1.writeSync=function(){throw new Error("`.writeSync()` is not supported in browsers!")};var Z1=$1,Q1=function(){function e(){l(this,e)}return d(e,null,[{key:"setData",value:function(e,t){this.type=e,this.data=t}},{key:"getData",value:function(e){return e===this.type?this.data:void 0}},{key:"setToNative",value:function(){var e=_e(ye().mark((function e(t){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z1.write(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFromNative",value:function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z1.read();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();Q1.data=void 0,Q1.type=void 0;var J1=function(e){return e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Command=91]="Command",e[e.Number0=48]="Number0",e[e.Number1=49]="Number1",e[e.Number2=50]="Number2",e[e.Number3=51]="Number3",e[e.Number4=52]="Number4",e[e.Number5=53]="Number5",e[e.Number6=54]="Number6",e[e.Number7=55]="Number7",e[e.Number8=56]="Number8",e[e.Number9=57]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e}({}),e2=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){y2.instance.eventBus;var e=gmvc.ShortcutController.getInstance(gmvc.ShortcutController),t=[{keycodes:[gmvc.Shortcut.CTRL,gmvc.Shortcut.Z],type:aC.UNDO},{keycodes:[gmvc.Shortcut.CTRL,gmvc.Shortcut.Y],type:aC.REDO},{keycodes:[gmvc.Shortcut.CTRL,J1.C],type:aC.COPY},{keycodes:[gmvc.Shortcut.CTRL,J1.V],type:aC.PASTE},{keycodes:[gmvc.Shortcut.CTRL,J1.X],type:aC.COPY},{keycodes:[gmvc.Shortcut.DEL],type:aC.DELETE},{keycodes:[gmvc.Shortcut.CTRL,J1.F8],type:aC.CREATE_MOVIECLIP},{keycodes:[J1.F2],type:aC.SWITCH_MODE},{keycodes:[J1.Number1],type:aC.SWITCH_MODE_POSE},{keycodes:[J1.Number2],type:aC.SWITCH_MODE_ANIMATION},{keycodes:[J1.BackSpace],type:aC.DELETE}],n=new gmvc.Shortcut(t),r=Y1.getInstance(Y1);e.checkoutFocus=function(e){var t=r.focus;if(!t)return!1;var n=t.panelIndex;return!!(t&&t.panels&&t.panels.length>n&&t.panels[n].name===e.focus)},e.init(n),e.addRegister(aC.UNDO,this.undo),e.addRegister(aC.REDO,this.redo),e.addRegister(aC.SWITCH_MODE,this.switchMode),e.addRegister(aC.SWITCH_MODE_POSE,this.switchModePose),e.addRegister(aC.SWITCH_MODE_ANIMATION,this.switchModeAnimation),e.addRegister(aC.CREATE_MOVIECLIP,this.createMovieclip),e.addRegister(aC.DELETE,this.onDeleteStage,X1.stagePanel),e.addRegister(aC.DELETE,this.onDeleteDopesheet,X1.dopesheetPanel),e.addRegister(aC.DELETE,this.onDeleteLibrary,X1.libraryPanel),e.addRegister(aC.DELETE,this.onDeleteOutline,X1.outlinePanel),e.addRegister(aC.DELETE,this.onDeleteScene,X1.scenePanel),e.addRegister(aC.COPY,this.onCopyStage,X1.stagePanel),e.addRegister(aC.COPY,this.onCopyDopesheet,X1.dopesheetPanel),e.addRegister(aC.PASTE,this.onPasteStage,X1.stagePanel),e.addRegister(aC.PASTE,this.onPasteDopesheet,X1.dopesheetPanel)}},{key:"undo",value:function(){y2.instance.store.dispatch(W.UNDO)}},{key:"redo",value:function(){y2.instance.store.dispatch(W.REDO)}},{key:"switchMode",value:function(){switch(y2.instance.store.state.runtime.editing.editMode){case X.ANIMATION:y2.instance.store.dispatch(W.SWITCH_MODE,{mode:X.POSE});break;case X.POSE:y2.instance.store.dispatch(W.SWITCH_MODE,{mode:X.ANIMATION})}}},{key:"switchModePose",value:function(){y2.instance.store.state.runtime.editing.editMode!==X.POSE&&y2.instance.store.dispatch(W.SWITCH_MODE,{mode:X.POSE})}},{key:"switchModeAnimation",value:function(){y2.instance.store.state.runtime.editing.editMode!==X.ANIMATION&&y2.instance.store.dispatch(W.SWITCH_MODE,{mode:X.ANIMATION})}},{key:"createMovieclip",value:function(){}},{key:"onDeleteStage",value:function(){y2.instance.store.dispatch(W.DELETE_SELECTED_BONES_AND_SLOTS)}},{key:"onDeleteDopesheet",value:function(){y2.instance.store.dispatch(O.DELETE_FRAMES)}},{key:"onDeleteLibrary",value:function(){}},{key:"onDeleteOutline",value:function(){y2.instance.store.dispatch(W.DELETE_SELECTED_BONES_AND_SLOTS)}},{key:"onDeleteScene",value:function(){}},{key:"onCopyStage",value:function(){Q1.setData("bone",{bone:"from clipboard"}),Q1.setToNative("copy to native")}},{key:"onCopyDopesheet",value:function(){}},{key:"onPasteStage",value:function(){var e=_e(ye().mark((function e(){return ye().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Q1.getData("bone"),e.next=4,Q1.getFromNative();case 4:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onPasteDopesheet",value:function(){}}]),n}(),t2=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;document.addEventListener("dragover",(function(e){return e.preventDefault(),!1}),!1),document.addEventListener("drop",(function(e){return e.preventDefault(),!1}),!1),setTimeout((function(){e._sendNotification(W.RESET_SCALE,void 0)}),300)}}]),n}(),n2={type:"button",icon:"mdi-lastpass",label:"\u66f4\u591a",action:""},r2={history:{name:"history",type:"group",btns:[{icon:"icon-undo",type:"button",label:"\u64a4\u9500",action:G.UNDO},{icon:"icon-redo",type:"button",label:"\u91cd\u505a",action:G.REDO}]},allEditMode:{name:"allEditMode",type:"group",btns:[{name:"poseMode",icon:"icon-skeleton",type:"button",label:"\u9aa8\u67b6\u6a21\u5f0f",action:W.SWITCH_MODE,actionValue:{mode:X.POSE}},{icon:"icon-layer-skeleton",type:"button",label:"\u52a8\u753b\u6a21\u5f0f",action:W.SWITCH_MODE,actionValue:{mode:X.ANIMATION}}]},fullScreen:{name:"fullScreen",icon:"icon-fullscreen",type:"button",label:"\u5168\u5c4f",action:W.SWITCH_FULL_SCREEN,actionValue:{}},animationMode:{name:"animationMode",icon:"layer-movieclip",type:"button",label:"\u52a8\u753b\u6a21\u5f0f",action:W.SWITCH_MODE,actionValue:{mode:X.ANIMATION}},poseMode:{name:"poseMode",icon:"layer-movieclip",type:"button",label:"\u7f16\u8f91\u6a21\u5f0f",action:W.SWITCH_MODE,actionValue:{mode:X.POSE}},questionType:{name:"questionType",icon:"qbs",type:"list",label:"\u9898\u578b",list:[{name:"singleSelect",label:"\u5355\u9009\u9898",action:"",icon:"mdi-gesture-tap"},{name:"multSelect",label:"\u591a\u9009\u9898",action:"",icon:"mdi-gesture-two-double-tap"}]},postil:{name:"postil",icon:"annotation",type:"button",label:"\u6279\u6ce8"},image:{name:"image",icon:"layer-image",type:"button",label:"\u56fe\u7247",action:"",actionValue:""},shape:{name:"shape",icon:"layer-shape",type:"list",label:"\u5f62\u72b6",list:[{icon:"mdi-rectangle-outline",name:"rect",label:"\u77e9\u5f62",action:"",actionValue:""},{icon:"mdi-circle-outline",name:"circle",label:"\u5706\u5f62",action:"",actionValue:""},{icon:"mdi-ellipse-outline",name:"ellipse",label:"\u692d\u5706",action:"",actionValue:""},{icon:"mdi-star-outline",name:"star",label:"\u661f\u5f62",action:"",actionValue:""},{icon:"mdi-pentagon-outline",name:"isosceles",label:"\u68af\u5f62",action:"",actionValue:""},{icon:"mdi-arrow-right-bold-outline",name:"arrow",label:"\u7bad\u5934",action:"",actionValue:""}]},text:{name:"text",icon:"layer-text",type:"button",label:"\u6587\u672c",action:"ADD_TEXT_CHILD",actionValue:""},audio:{name:"audio",icon:"layer-audio",type:"button",label:"\u97f3\u9891",action:"",actionValue:""},video:{name:"video",icon:"layer-video",type:"button",label:"\u89c6\u9891",action:"",actionValue:""},movieclip:{name:"movieclip",icon:"layer-movieclip",type:"button",label:"\u5f71\u7247\u526a\u8f91",action:"CREATE_MOVIECLIP_INTERACTION",actionValue:""},myLib:{name:"myLib",icon:"bag",type:"button",label:"\u6211\u7684\u4ed3\u5e93"},viewScale:{name:"viewScale",icon:"layout",type:"list",label:"\u89c6\u56fe\u7f29\u653e",list:[{icon:"mdi-resize",name:"originalSize",label:"\u5b9e\u9645\u5c3a\u5bf8",action:""},{icon:"mdi-fit-to-page-outline",name:"fitSize",label:"\u9002\u5e94\u753b\u5e03",action:""}]},layout:{name:"layout",icon:"layout",type:"list",label:"\u5e03\u5c40",list:[{name:"showMenu",label:"\u663e\u793a\u83dc\u5355",action:"",checked:!0},{name:"showRuler",label:"\u663e\u793a\u6807\u5c3a",action:"",checked:!0},{name:"showRefercenceLine",label:"\u663e\u793a\u53c2\u8003\u7ebf",action:"",checked:!0},{name:"showRight",label:"\u663e\u793a\u53f3\u4fa7\u680f",action:"",checked:!0}]},cooperation:{name:"cooperation",icon:"team-add",type:"button",label:"\u534f\u4f5c"},preview:{name:"preview",icon:"icon-preview",type:"button",label:"\u9884\u89c8",action:"MUTATION_OPEN_PREVIEW_WINDOW",actionValue:!0},cast:{name:"cast",icon:"cast",type:"button",label:"\u6295\u5c4f",action:"VF_PLAYER_CAST"},save:{name:"save",icon:"icon-save",type:"button",label:"\u4fdd\u5b58",action:"SAVE",actionValue:!0},export:{name:"export",icon:"icon-export",type:"button",label:"\u5bfc\u51fa",action:"MUTATION_OPEN_EXPORT_WINDOW"},import:{name:"import",icon:"icon-import",type:"button",label:"\u5bfc\u5165",action:"MUTATION_OPEN_IMPORT_WINDOW"},public:{name:"public",icon:"publish",type:"button",label:"\u53d1\u5e03"},clearLocal:{name:"clearLocal",icon:"icon-delete",type:"button",label:"\u6e05\u9664\u6570\u636e",trigger:"ACTION",action:"ACTION_CLEAR_LOCAL_DATA"},language:{name:"language",icon:"locale",type:"list",label:"\u8bed\u8a00",list:[{name:"zh",label:"\u4e2d\u6587",action:"CHANGE_LANGUAGE",actionValue:"zh-cn",checked:!0},{name:"en",label:"English",action:"CHANGE_LANGUAGE",actionValue:"en-us",checked:!1}]},autoGap:{type:"autoGap"},gap5:{type:"gap",gap:5},gap10:{type:"gap",gap:10},gap15:{type:"gap",gap:15},gap20:{type:"gap",gap:20},gap30:{type:"gap",gap:30},gap40:{type:"gap",gap:40},gap50:{type:"gap",gap:50},logo:{type:"label",gap:50,label:"DragonBones Web"},version:{type:"version",gap:50,label:"v0.0.3"}},i2=["gap50","history","gap50","allEditMode","fullScreen","import","autoGap","logo","version","autoGap","gap20","clearLocal","gap20","save","gap20","export","gap20","preview"],a2=["gap50","history","gap50","allEditMode","fullScreen","autoGap","autoGap","autoGap","autoGap","drawAnimBezierTools","autoGap","save","gap50","preview"],o2=["gap50","history","gap50","animationMode","autoGap","modifyAnimationBezierTools","autoGap","save","gap50"],s2=["gap50","history","gap50","poseMode","autoGap","modifyBezierTools","autoGap","save","gap50"],l2=["gap50","history","gap50","allEditMode","autoGap","autoGap","save","gap50","preview"];var u2=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"getClassName",value:function(){var e="";return e=this.props.pos?this.props.pos:"alone",this.props.move&&(e+=" move"),e}},{key:"onClick",value:function(e){this.props.editor||this.props.disable||this.props.clickCallback&&this.props.clickCallback(this.props.data)}},{key:"render",value:function(){var e,t="tool-btn "+(this.props.pos?this.props.pos:"alone"),n="bg "+this.getClassName();return e=(0,hf.jsxs)("div",{className:"icon",children:[(0,hf.jsx)(mT,{type:this.props.data.icon||"",className:"icon-add"}),"list"===this.props.data.type&&(0,hf.jsx)(mT,{type:"icon-angle-down",className:"list"})]}),(0,hf.jsxs)("div",{className:t,onClick:this.onClick.bind(this),children:[(0,hf.jsx)("div",{className:n,children:e}),!1!==this.props.showText&&(0,hf.jsx)("div",{className:"label",children:this.props.data.label})]})}},{key:"componentDidMount",value:function(){}}]),n}(a.Component),c2=function(e){p(n,e);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"getDelay",value:function(){return this.props.delay<=0?Math.random()+.05:this.props.delay}},{key:"getPos",value:function(e,t){var n=t.length;if(n>1){if(0===e)return"left";if(e===n-1)return"right"}return"middle"}},{key:"render",value:function(){var e,t=this;return(0,hf.jsx)("div",{className:"tool-btn-group",children:null===(e=this.props.data.btns)||void 0===e?void 0:e.map((function(e,n){return(0,hf.jsx)(u2,{pos:t.getPos(n,t.props.data.btns||[]),disable:t.props.disable,editor:t.props.editor,move:t.props.move,showText:t.props.showText,delay:t.getDelay(),clickCallback:t.props.clickCallback,data:e},n)}))})}}]),n}(a.Component),h2=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=e.currentTarget.dataset.index,n=r.props.data.list&&r.props.data.list[t];r.props.clickCallback&&r.props.clickCallback(n)},r.onClick=function(e){var t=!r.state.showList;r.setState({showList:t})},r.onMouseDown=function(e){r.setState({showList:!1})},r.state={showList:!1},r}return d(n,[{key:"render",value:function(){var e=this,t=this.props.data.list;return(0,hf.jsxs)("div",{className:"tool-btn-list",children:[(0,hf.jsx)(u2,{pos:this.props.pos,disable:this.props.disable,editor:this.props.editor,move:this.props.move,showText:this.props.showText,data:this.props.data,clickCallback:this.onClick}),this.state.showList&&(0,hf.jsx)("div",{className:"btn-list",children:null===t||void 0===t?void 0:t.map((function(t,n){return(0,hf.jsxs)("div",{children:["gap"===t.name&&(0,hf.jsx)("div",{className:"gap"}),"gap"!==t.name&&(0,hf.jsxs)("div",{className:"btn-list-item","data-index":n,onMouseDown:e.onClickItem,children:[t.icon&&(0,hf.jsx)(mT,{type:t.icon}),t.checked&&(0,hf.jsx)(mT,{type:"checked"}),!t.icon&&!t.checked&&(0,hf.jsx)("div",{className:"no-check"}),(0,hf.jsx)("div",{className:"label",children:t.label})]})]},n)}))})]})}},{key:"componentDidUpdate",value:function(){this.state.showList?window.addEventListener("mousedown",this.onMouseDown):window.removeEventListener("mousedown",this.onMouseDown)}}]),n}(a.Component),d2=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).refs={},r.overItem=!1,r.onClick=function(e){var t=r.props.data;t.list&&t.list.length>0||"gap"===t.name||r.props.clickCallback&&r.props.clickCallback(t)},r.onMouseOver=function(e){r.overItem=!0,r.props.data.list&&r.props.data.list.length&&r.setState({showList:!0})},r.onMouseOut=function(e){r.overItem=!1;var t=r.refs.btnSubList;if(t){var n=e.clientX,i=e.clientY,a=!1,o=t.getBoundingClientRect();n>o.x&&n<o.x+o.width&&i>o.y&&i<o.y+o.height&&(a=!0),a||r.setState({showList:!1})}},r.state={showList:!1},r}return d(n,[{key:"isGap",get:function(){return"gap"===this.props.data.name}},{key:"render",value:function(){var e=this,t=this.props.data,r=t.list;return(0,hf.jsxs)("div",{className:"",children:[(0,hf.jsxs)("div",{className:"tool-btn-more-list",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseDown:this.onClick,children:[this.isGap&&(0,hf.jsx)("div",{className:"gap"}),!this.isGap&&(0,hf.jsx)("div",{className:"btn-more-label"}),t.icon&&(0,hf.jsx)(mT,{type:t.icon}),t.checked&&(0,hf.jsx)(mT,{type:"checked"}),!t.icon&&!t.checked&&(0,hf.jsx)("div",{className:"no-check"}),(0,hf.jsxs)("div",{className:"label",children:[" ",t.label]})]}),this.state.showList&&(0,hf.jsx)("div",{className:"btn-more-list",ref:"btnSubList",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:r.map((function(t,r){return(0,hf.jsx)(n,{data:t,clickCallback:e.props.clickCallback},r)}))})]})}},{key:"alignSubList",value:function(){var e=this.refs.btnSubList;e&&e.offsetWidth>0&&(e.style.left=-e.offsetWidth+"px")}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.alignSubList()}}]),n}(a.Component),f2=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).buttonData=n2,r.onClick=function(e){var t=!r.state.showList;r.setState({showList:t})},r.onMouseDown=function(e){r.setState({showList:!1})},r.state={showList:!1},r}return d(n,[{key:"dataList",get:function(){var e=[],t=this.props.data;for(var n in t)if("group"===t[n].type){if(t[n].btns)for(var r in t[n].btns)e.push(t[n].btns[r])}else e.push(t[n]);return e}},{key:"render",value:function(){var e=this,t=this.dataList,n=this.buttonData;return(0,hf.jsxs)("div",{className:"tool-btn-more tool-btn-list",children:[(0,hf.jsx)(u2,{pos:this.props.pos,disable:this.props.disable,editor:this.props.editor,move:this.props.move,showText:this.props.showText,data:n,clickCallback:this.onClick}),this.state.showList&&(0,hf.jsx)("div",{className:"btn-list",children:t.map((function(t,n){return(0,hf.jsxs)("div",{children:["gap"===t.name&&(0,hf.jsx)("div",{className:"gap"}),"gap"!==t.name&&(0,hf.jsx)(d2,{data:t,clickCallback:e.props.clickCallback})]},n)}))})]})}},{key:"componentDidUpdate",value:function(){this.state.showList?window.addEventListener("mousedown",this.onMouseDown):window.removeEventListener("mousedown",this.onMouseDown)}}]),n}(a.Component),p2=function(e){p(n,e);var t=g(n);function n(e){var r,i;return l(this,n),(i=t.call(this,e)).refs={},i.toolbarWidth=0,i.autoGapWidth=1,i.moreLayout=[],i.waitMeasure=!1,i.toolbarMap=(y(r={},X.POSE,i2),y(r,X.ANIMATION,a2),y(r,X.DRAW_SHAPE,s2),y(r,X.ANIMATION_DRAW_SHAPE,o2),y(r,X.ACTION,l2),r),i.clickToolbar=function(e){e.action&&(e.action===W.SWITCH_FULL_SCREEN?document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen():i.props.store.dispatch(b.TOOLBAR_COMMAND,{action:e.action,data:e.actionValue,trigger:e.trigger}))},i.init(),i}return d(n,[{key:"init",value:function(){this.props.eventBus.on(G.SWITCH_MODE,this.refresh,this)}},{key:"refresh",value:function(){this.setState({})}},{key:"toolbarData",get:function(){var e=X.POSE,t=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(r2[e[n]]);return t}(this.toolbarMap[e]||[]);if(this.toolbarWidth<=0)return t;for(var n=t,r=[],i=[],a=[],o=0,s=0,l=n.length;s<l;s++){var u=Pe({},n[s]);(o+=this.getToolBarItemWidth(u))<=this.toolbarWidth-60?("autoGap"===u.type&&a.push(u),r.push(u)):"gap"!==u.type&&"autoGap"!==u.type&&i.push(u)}if(a.length>0){var c=(this.toolbarWidth-o)/a.length;for(var h in this.autoGapWidth=c,this.autoGapWidth<0&&(this.autoGapWidth=0),a)a[h].gap=this.autoGapWidth}else this.autoGapWidth=this.toolbarWidth-o;return this.moreLayout=i,r}},{key:"getToolBarItemWidth",value:function(e){var t;return"gap"===e.type?e.gap||0:"autoGap"===e.type?0:"group"===e.type?60*((null===(t=e.btns)||void 0===t?void 0:t.length)||0):60}},{key:"render",value:function(){var e=this,t=this.toolbarData,n=this.moreLayout;return(0,hf.jsxs)("div",{className:"toolbar",ref:"toolbar",children:[t.map((function(t,n){return t&&(0,hf.jsxs)("div",{children:["group"===t.type&&(0,hf.jsx)(c2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar,delay:0}),"button"===t.type&&(0,hf.jsx)(u2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar}),"list"===t.type&&(0,hf.jsx)(h2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar}),"gap"===t.type&&(0,hf.jsx)("div",{className:t.type,style:{width:t.gap+"px"}}),"autoGap"===t.type&&(0,hf.jsx)("div",{className:t.type,style:{width:t.gap+"px"}}),"label"===t.type&&(0,hf.jsx)("div",{className:t.type,style:{width:t.gap+"px",whiteSpace:"nowrap",lineHeight:"50px"},children:t.label}),"version"===t.type&&(0,hf.jsx)("div",{className:t.type,style:{width:t.gap+"px",whiteSpace:"nowrap",lineHeight:"50px",marginTop:"15px",color:"#999999"},children:t.label})]},n)})),n&&n.length>0&&(0,hf.jsx)(f2,{data:n,clickCallback:this.clickToolbar,children:" "})]})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize.bind(this)),this.measureWdith()}},{key:"onResize",value:function(){this.measureWdith()}},{key:"measureWdith",value:function(){var e=this.refs.toolbar;e?(e.offsetWidth!==this.toolbarWidth&&(this.toolbarWidth=e.offsetWidth,this.setState({})),this.waitMeasure=!1):this.waitMeasure=!0}}]),n}(a.Component),v2=function(e){p(n,gmvc.Command);var t=g(n);function n(){var e;l(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=t.call.apply(t,[this].concat(i))).toolbarRoot=void 0,e}return d(n,[{key:"execute",value:function(){var e=document.getElementById("toolbar");if(e){var t;this.toolbarRoot||(this.toolbarRoot=(0,s.createRoot)(e));var n=y2.instance,r=n.store,i=n.eventBus;null===(t=this.toolbarRoot)||void 0===t||t.render((0,hf.jsx)(p2,{store:r,eventBus:i}))}}}]),n}(),m2=function(e){p(n,gmvc.Command);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"execute",value:function(){var e=this;this._retain(),y2.instance.eventBus.once(Y.USER_LOGIN_SUCCESS,(function(){e._release(!0)}),this),y2.instance.store.dispatch(Y.USER_LOGIN)}}]),n}(),g2=function(e){p(n,gmvc.QueueCommand);var t=g(n);function n(){return l(this,n),t.apply(this,arguments)}return d(n,[{key:"_initialize",value:function(){this._addCommand(ne),this._addCommand(q1),this._addCommand(m2),this._addCommand(te),this._addCommand(ee),this._addCommand(J),this._addCommand(sT),this._addCommand(K1),this._addCommand(v2),this._addCommand(t2),this._addCommand(lT),this._addCommand(e2)}}]),n}(),y2=function(){function e(){l(this,e),this._activated=!1,this.store=new oT,this.eventBus=gmvc.context,this.res=new fC(this.store),e._instance=this}return d(e,[{key:"start",value:function(){this._activated||(this._activated=!0,gmvc.controller.register(Jk.INIT,g2),gmvc.context.sendNotification(Jk.INIT,null,null))}},{key:"initViewController",value:function(e,t){var n=gmvc.BaseObject.getInstance(e);n.initialize(this.store,t),n.enable=!0}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();y2._instance=void 0,y2.isDebug=!0;var b2=function(e){return e[e.NONE=0]="NONE",e[e.PRE=1]="PRE",e[e.START=2]="START",e[e.END=3]="END",e}(b2||{}),_2=function(e){p(n,e);var t=g(n);function n(e){var r;return l(this,n),(r=t.call(this,e)).refs={},r.enabled=!1,r.status=b2.NONE,r.dataTransfer=new x2,r.dragTarget=void 0,r.dragCurrentTarget=void 0,r.offX=0,r.offY=0,r.downX=0,r.downY=0,r.mouseX=0,r.mouseY=0,r.eventOver=new Event("dragover",{bubbles:!0}),r.eventLeave=new Event("dragleave",{bubbles:!0}),r.eventEnter=new Event("dragenter",{bubbles:!0}),r.eventEnd=new Event("dragend",{bubbles:!0}),r.eventDrop=new Event("drop",{bubbles:!0}),r.mouseEventHandler=function(e){switch(e.type){case"mousedown":for(var t=e.target;t;){if("true"===t.draggable){r.preDrag(e.clientX,e.clientY,t);break}if(t.dataset&&"true"===t.dataset.draggable){r.preDrag(e.clientX,e.clientY,t);break}t=t.parentNode}break;case"mouseup":e.stopImmediatePropagation(),window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.mouseEventHandler),r.status===b2.START&&r.endDrag()}},r.preDrag=function(e,t,n){r.status=b2.PRE,r.dragTarget=n,r.dragCurrentTarget=n,r.downX=e,r.downY=t,r.offX=0,r.offY=0,window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.mouseEventHandler)},r.onMouseMove=function(e){if(r.dragTarget&&r.dragCurrentTarget){var t=e.clientX,n=e.clientY;if(r.mouseX=t,r.mouseY=n,r.status===b2.PRE)Lf.distanceBetweenPoints({x:t,y:n},{x:r.downX,y:r.downY})>5&&(r.status=b2.START,r.startDrag(t,n,r.dragTarget,e.offsetX,e.offsetY));else if(r.status===b2.START){var i=e.target;if(i!==r.dragCurrentTarget){var a=r.eventLeave;a.dataTransfer=r.dataTransfer,r.dragTarget.dispatchEvent(a),r.dragCurrentTarget.dispatchEvent(a),r.dragCurrentTarget=i;var o=r.eventEnter;r.dataTransfer.target=r.dragCurrentTarget,r.dataTransfer.currentTarget=r.dragTarget,o.dataTransfer=r.dataTransfer,r.dragTarget.dispatchEvent(o),r.dragCurrentTarget&&r.dragCurrentTarget.dispatchEvent(o)}var s=r.eventOver;s.offsetX=e.offsetX,s.offsetY=e.offsetY,s.dataTransfer=r.dataTransfer,r.dataTransfer.target=r.dragCurrentTarget,r.dataTransfer.currentTarget=r.dragTarget,r.dragCurrentTarget&&r.dragCurrentTarget.dispatchEvent(s),r.dragTarget.dispatchEvent(s);var l=r.refs.gDrag;l&&(l.style.left=t-r.offX+"px",l.style.top=n-r.offY+"px")}}},r}return d(n,[{key:"render",value:function(){return(0,hf.jsx)("div",{className:"g-drag",ref:"gDrag",style:{overflow:"visible",position:"absolute",pointerEvents:"none",zIndex:200}})}},{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.mouseEventHandler),this.dataTransfer.setDragImageCallback=this.setDragImage.bind(this),this.dataTransfer.setDragSizeCallback=this.setDragSize.bind(this),this.dataTransfer.setDragAlphaCallback=this.setDragAlpha.bind(this),this.dataTransfer.setDragScaleCallback=this.setDragScale.bind(this)}},{key:"endDrag",value:function(){if(this.dataTransfer.clearCursor(),this.dragCurrentTarget){var e=this.eventDrop;e.clientX=this.mouseX,e.clientY=this.mouseY,e.dataTransfer=this.dataTransfer,this.dragCurrentTarget.dispatchEvent(e)}if(this.dragTarget){var t=this.eventEnd;t.dataTransfer=this.dataTransfer,this.dragTarget.dispatchEvent(t)}this.status=b2.NONE,qB(this.refs.gDrag),this.dataTransfer.clearData()}},{key:"startDrag",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=this.refs.gDrag;if(a){a.style.left=e+"px",a.style.top=t+"px";var o=n.cloneNode(!0);o.style.opacity=.5,this.setDragImage(o,r||0,i||0);var s=new Event("dragstart");s.offsetX=r||0,s.offsetY=i||0,s.clientX=e||0,s.clientY=t||0,s.dataTransfer=this.dataTransfer,n.dispatchEvent(s)}}},{key:"setDragImage",value:function(e,t,n){this.offX=t,this.offY=n;var r=this.refs.gDrag;r&&(r.style.left=this.mouseX-this.offX+"px",r.style.top=this.mouseY-this.offY+"px",qB(r),r.appendChild(e))}},{key:"setDragAlpha",value:function(e){var t=this.refs.gDrag;t&&(t.children[0].style.opacity=e)}},{key:"setDragSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(n)||(this.offX=n),isNaN(r)||(this.offY=r);var i=this.refs.gDrag;i&&(i.style.left=this.mouseX-this.offX+"px",i.style.top=this.mouseY-this.offY+"px",i.firstChild&&(i.firstChild.style.width=e+"px",i.firstChild.style.height=t+"px"))}},{key:"setDragScale",value:function(e){var t=this.refs.gDrag;t&&t.firstChild&&(t.firstChild.style.scale=e+"")}}]),n}(a.Component),x2=function(){function e(){l(this,e),this.setDragImageCallback=void 0,this.setDragSizeCallback=void 0,this.setDragAlphaCallback=void 0,this.setDragScaleCallback=void 0,this.types=[],this.target=void 0,this.currentTarget=void 0,this._data={},this.lastCursor="",this.lastCursorTarget=void 0}return d(e,[{key:"dropEffect",set:function(e){if(this.target)switch(e){case"copy":this.setCursor(this.target,"copy");break;case"none":this.setCursor(this.target,"not-allowed");break;default:this.clearCursor()}}},{key:"setCursor",value:function(e,t){this.clearCursor(),e&&(this.lastCursor=e.style.cursor,e.style.cursor=t,this.lastCursorTarget=e)}},{key:"clearCursor",value:function(){this.lastCursorTarget&&(this.lastCursor?this.lastCursorTarget.style.cursor=this.lastCursor:this.lastCursorTarget.style.cursor="default",this.lastCursorTarget=void 0,this.lastCursor=void 0)}},{key:"clearData",value:function(){this._data={}}},{key:"setData",value:function(e,t){this.types.push(e),this._data[e]=t}},{key:"getData",value:function(e){return this._data[e]}},{key:"setDragImage",value:function(e,t,n){this.setDragImageCallback&&this.setDragImageCallback(e,t,n)}},{key:"setDragSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;this.setDragSizeCallback&&this.setDragSizeCallback(e,t,n,r)}},{key:"setDragAlpha",value:function(e){this.setDragAlphaCallback&&this.setDragAlphaCallback(e)}},{key:"setDragScale",value:function(e){this.setDragScaleCallback&&this.setDragScaleCallback(e)}}]),e}();var E2=function(){return(0,a.useEffect)((function(){y2.instance.start()}),[]),(0,hf.jsxs)("div",{className:"editor",children:[(0,hf.jsx)(_2,{}),(0,hf.jsx)("div",{className:"toolbar-container",id:"toolbar"}),(0,hf.jsx)("div",{className:"container",id:"container"})]})},w2=function(e){e&&e instanceof Function&&n.e(27).then(n.bind(n,4027)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};s.createRoot(document.getElementById("root")).render((0,hf.jsx)(E2,{})),w2()}()}();