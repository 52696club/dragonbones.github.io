/*! For license information please see main.ec95366d.js.LICENSE.txt */
!function(){var e={9932:function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(7313),a=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,s=e.height,l=void 0===s?24:s,u=e.style,c=void 0===u?{}:u,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return a.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:o,height:l},c)},h),a.default.createElement("path",{d:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"}))}},3050:function(e,t,n){"use strict";var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(7313),a=(r=o)&&r.__esModule?r:{default:r};t.Z=function(e){var t=e.fill,n=void 0===t?"currentColor":t,r=e.width,o=void 0===r?24:r,s=e.height,l=void 0===s?24:s,u=e.style,c=void 0===u?{}:u,h=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["fill","width","height","style"]);return a.default.createElement("svg",i({viewBox:"0 0 24 24",style:i({fill:n,width:o,height:l},c)},h),a.default.createElement("path",{d:"M12,18.17L8.83,15L7.42,16.41L12,21L16.59,16.41L15.17,15M12,5.83L15.17,9L16.58,7.59L12,3L7.41,7.59L8.83,9L12,5.83Z"}))}},6123:function(e,t){var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)){if(n.length){var a=i.apply(null,n);a&&e.push(a)}}else if("object"===o){if(n.toString!==Object.prototype.toString&&!n.toString.toString().includes("[native code]")){e.push(n.toString());continue}for(var s in n)r.call(n,s)&&n[s]&&e.push(s)}}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()},9080:function(e,t,n){e.exports=function(){"use strict";var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(t,n)},t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function r(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||((r=r||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:n.g,o=Object.keys,a=Array.isArray;function s(e,t){return"object"!=typeof t||o(t).forEach((function(n){e[n]=t[n]})),e}"undefined"==typeof Promise||i.Promise||(i.Promise=Promise);var l=Object.getPrototypeOf,u={}.hasOwnProperty;function c(e,t){return u.call(e,t)}function h(e,t){"function"==typeof t&&(t=t(l(e))),("undefined"==typeof Reflect?o:Reflect.ownKeys)(t).forEach((function(n){f(e,n,t[n])}))}var d=Object.defineProperty;function f(e,t,n,r){d(e,t,s(n&&c(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function p(e){return{from:function(t){return e.prototype=Object.create(t.prototype),f(e.prototype,"constructor",e),{extend:h.bind(null,e.prototype)}}}}var v=Object.getOwnPropertyDescriptor,m=[].slice;function g(e,t,n){return m.call(e,t,n)}function y(e,t){return t(e)}function b(e){if(!e)throw new Error("Assertion Failed")}function _(e){i.setImmediate?setImmediate(e):setTimeout(e,0)}function x(e,t){if("string"==typeof t&&c(e,t))return e[t];if(!t)return e;if("string"!=typeof t){for(var n=[],r=0,i=t.length;r<i;++r){var o=x(e,t[r]);n.push(o)}return n}var a=t.indexOf(".");if(-1!==a){var s=e[t.substr(0,a)];return null==s?void 0:x(s,t.substr(a+1))}}function E(e,t,n){if(e&&void 0!==t&&(!("isFrozen"in Object)||!Object.isFrozen(e)))if("string"!=typeof t&&"length"in t){b("string"!=typeof n&&"length"in n);for(var r=0,i=t.length;r<i;++r)E(e,t[r],n[r])}else{var o,s,l=t.indexOf(".");-1!==l?(o=t.substr(0,l),""===(s=t.substr(l+1))?void 0===n?a(e)&&!isNaN(parseInt(o))?e.splice(o,1):delete e[o]:e[o]=n:E(l=(l=e[o])&&c(e,o)?l:e[o]={},s,n)):void 0===n?a(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function w(e){var t,n={};for(t in e)c(e,t)&&(n[t]=e[t]);return n}var T=[].concat;function S(e){return T.apply([],e)}var k="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(S([8,16,32,64].map((function(e){return["Int","Uint","Float"].map((function(t){return t+e+"Array"}))})))).filter((function(e){return i[e]})),C=new Set(k.map((function(e){return i[e]}))),A=null;function I(e){return A=new WeakMap,e=function e(t){if(!t||"object"!=typeof t)return t;var n=A.get(t);if(n)return n;if(a(t)){n=[],A.set(t,n);for(var r=0,i=t.length;r<i;++r)n.push(e(t[r]))}else if(C.has(t.constructor))n=t;else{var o,s=l(t);for(o in n=s===Object.prototype?{}:Object.create(s),A.set(t,n),t)c(t,o)&&(n[o]=e(t[o]))}return n}(e),A=null,e}var O={}.toString;function P(e){return O.call(e).slice(8,-1)}var M="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator",R="symbol"==typeof M?function(e){var t;return null!=e&&(t=e[M])&&t.apply(e)}:function(){return null};function N(e,t){return 0<=(t=e.indexOf(t))&&e.splice(t,1),0<=t}var D={};function L(e){var t,n,r,i;if(1===arguments.length){if(a(e))return e.slice();if(this===D&&"string"==typeof e)return[e];if(i=R(e)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(null==e)return[e];if("number"!=typeof(t=e.length))return[e];for(n=new Array(t);t--;)n[t]=e[t];return n}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var F="undefined"!=typeof Symbol?function(e){return"AsyncFunction"===e[Symbol.toStringTag]}:function(){return!1},B=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(le=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"]),U={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function H(e,t){this.name=e,this.message=t}function j(e,t){return e+". Errors: "+Object.keys(t).map((function(e){return t[e].toString()})).filter((function(e,t,n){return n.indexOf(e)===t})).join("\n")}function z(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=j(e,t)}function V(e,t){this.name="BulkError",this.failures=Object.keys(t).map((function(e){return t[e]})),this.failuresByPos=t,this.message=j(e,this.failures)}p(H).from(Error).extend({toString:function(){return this.name+": "+this.message}}),p(z).from(H),p(V).from(H);var G=B.reduce((function(e,t){return e[t]=t+"Error",e}),{}),W=H,X=B.reduce((function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?"string"==typeof e?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):"object"==typeof e&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=U[t]||n,this.inner=null)}return p(r).from(W),e[t]=r,e}),{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Y=le.reduce((function(e,t){return e[t+"Error"]=X[t],e}),{}),K=B.reduce((function(e,t){return-1===["Syntax","Type","Range"].indexOf(t)&&(e[t+"Error"]=X[t]),e}),{});function q(){}function Z(e){return e}function $(e,t){return null==e||e===Z?t:function(n){return t(e(n))}}function Q(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function J(e,t){return e===q?t:function(){var n=e.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?Q(r,this.onsuccess):r),i&&(this.onerror=this.onerror?Q(i,this.onerror):i),void 0!==o?o:n}}function ee(e,t){return e===q?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?Q(n,this.onsuccess):n),r&&(this.onerror=this.onerror?Q(r,this.onerror):r)}}function te(e,t){return e===q?t:function(n){var r=e.apply(this,arguments);s(n,r);var i=this.onsuccess,o=this.onerror;return this.onsuccess=null,this.onerror=null,n=t.apply(this,arguments),i&&(this.onsuccess=this.onsuccess?Q(i,this.onsuccess):i),o&&(this.onerror=this.onerror?Q(o,this.onerror):o),void 0===r?void 0===n?void 0:n:s(r,n)}}function ne(e,t){return e===q?t:function(){return!1!==t.apply(this,arguments)&&e.apply(this,arguments)}}function re(e,t){return e===q?t:function(){var n=e.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then((function(){return t.apply(r,o)}))}return t.apply(this,arguments)}}K.ModifyError=z,K.DexieError=H,K.BulkError=V;var ie="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function oe(e){ie=e}var ae={},se=100,le=(k="undefined"==typeof Promise?[]:function(){var e=Promise.resolve();if("undefined"==typeof crypto||!crypto.subtle)return[e,l(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,l(t),e]}(),k[0]),ue=(B=k[1],k=k[2],B=B&&B.then,le&&le.constructor),ce=!!k,he=function(e,t){be.push([e,t]),fe&&(queueMicrotask(Ie),fe=!1)},de=!0,fe=!0,pe=[],ve=[],me=Z,ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:q,pgp:!1,env:{},finalize:q},ye=ge,be=[],_e=0,xe=[];function Ee(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=ye;if("function"!=typeof e){if(e!==ae)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Se(this,this._value))}this._state=null,this._value=null,++t.ref,function e(t,n){try{n((function(n){if(null===t._state){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&Oe();n&&"function"==typeof n.then?e(t,(function(e,t){n instanceof Ee?n._then(e,t):n.then(e,t)})):(t._state=!0,t._value=n,ke(t)),r&&Pe()}}),Se.bind(null,t))}catch(n){Se(t,n)}}(this,e)}var we={get:function(){var e=ye,t=Ue;function n(n,r){var i=this,o=!e.global&&(e!==ye||t!==Ue),a=o&&!Ve(),s=new Ee((function(t,s){Ce(i,new Te(qe(n,e,o,a),qe(r,e,o,a),t,s,e))}));return this._consoleTask&&(s._consoleTask=this._consoleTask),s}return n.prototype=ae,n},set:function(e){f(this,"then",e&&e.prototype===ae?we:{get:function(){return e},set:we.set})}};function Te(e,t,n,r,i){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.resolve=n,this.reject=r,this.psd=i}function Se(e,t){var n,r;ve.push(t),null===e._state&&(n=e._lib&&Oe(),t=me(t),e._state=!1,e._value=t,r=e,pe.some((function(e){return e._value===r._value}))||pe.push(r),ke(e),n&&Pe())}function ke(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ce(e,t[n]);var i=e._PSD;--i.ref||i.finalize(),0===_e&&(++_e,he((function(){0==--_e&&Me()}),[]))}function Ce(e,t){if(null!==e._state){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++_e,he(Ae,[n,e,t])}else e._listeners.push(t)}function Ae(e,t,n){try{var r,i=t._value;!t._state&&ve.length&&(ve=[]),r=ie&&t._consoleTask?t._consoleTask.run((function(){return e(i)})):e(i),t._state||-1!==ve.indexOf(i)||function(e){for(var t=pe.length;t;)if(pe[--t]._value===e._value)return pe.splice(t,1)}(t),n.resolve(r)}catch(e){n.reject(e)}finally{0==--_e&&Me(),--n.psd.ref||n.psd.finalize()}}function Ie(){Ke(ge,(function(){Oe()&&Pe()}))}function Oe(){var e=de;return fe=de=!1,e}function Pe(){var e,t,n;do{for(;0<be.length;)for(e=be,be=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}}while(0<be.length);fe=de=!0}function Me(){var e=pe;pe=[],e.forEach((function(e){e._PSD.onunhandled.call(null,e._value,e)}));for(var t=xe.slice(0),n=t.length;n;)t[--n]()}function Re(e){return new Ee(ae,!1,e)}function Ne(e,t){var n=ye;return function(){var r=Oe(),i=ye;try{return Xe(n,!0),e.apply(this,arguments)}catch(r){t&&t(r)}finally{Xe(i,!1),r&&Pe()}}}h(Ee.prototype,{then:we,_then:function(e,t){Ce(this,new Te(null,null,e,t,ye))},catch:function(e){if(1===arguments.length)return this.then(null,e);var t=e,n=arguments[1];return"function"==typeof t?this.then(null,(function(e){return(e instanceof t?n:Re)(e)})):this.then(null,(function(e){return(e&&e.name===t?n:Re)(e)}))},finally:function(e){return this.then((function(t){return Ee.resolve(e()).then((function(){return t}))}),(function(t){return Ee.resolve(e()).then((function(){return Re(t)}))}))},timeout:function(e,t){var n=this;return e<1/0?new Ee((function(r,i){var o=setTimeout((function(){return i(new X.Timeout(t))}),e);n.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Ee.prototype,Symbol.toStringTag,"Dexie.Promise"),ge.env=Ye(),h(Ee,{all:function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){0===e.length&&t([]);var r=e.length;e.forEach((function(i,o){return Ee.resolve(i).then((function(n){e[o]=n,--r||t(e)}),n)}))}))},resolve:function(e){return e instanceof Ee?e:e&&"function"==typeof e.then?new Ee((function(t,n){e.then(t,n)})):new Ee(ae,!0,e)},reject:Re,race:function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){e.map((function(e){return Ee.resolve(e).then(t,n)}))}))},PSD:{get:function(){return ye},set:function(e){return ye=e}},totalEchoes:{get:function(){return Ue}},newPSD:je,usePSD:Ke,scheduler:{get:function(){return he},set:function(e){he=e}},rejectionMapper:{get:function(){return me},set:function(e){me=e}},follow:function(e,t){return new Ee((function(n,r){return je((function(t,n){var r=ye;r.unhandleds=[],r.onunhandled=n,r.finalize=Q((function(){var e,r=this;e=function(){0===r.unhandleds.length?t():n(r.unhandleds[0])},xe.push((function t(){e(),xe.splice(xe.indexOf(t),1)})),++_e,he((function(){0==--_e&&Me()}),[])}),r.finalize),e()}),t,n,r)}))}}),ue&&(ue.allSettled&&f(Ee,"allSettled",(function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t){0===e.length&&t([]);var n=e.length,r=new Array(n);e.forEach((function(e,i){return Ee.resolve(e).then((function(e){return r[i]={status:"fulfilled",value:e}}),(function(e){return r[i]={status:"rejected",reason:e}})).then((function(){return--n||t(r)}))}))}))})),ue.any&&"undefined"!=typeof AggregateError&&f(Ee,"any",(function(){var e=L.apply(null,arguments).map(Ge);return new Ee((function(t,n){0===e.length&&n(new AggregateError([]));var r=e.length,i=new Array(r);e.forEach((function(e,o){return Ee.resolve(e).then((function(e){return t(e)}),(function(e){i[o]=e,--r||n(new AggregateError(i))}))}))}))})));var De={awaits:0,echoes:0,id:0},Le=0,Fe=[],Be=0,Ue=0,He=0;function je(e,t,n,r){var i=ye,o=Object.create(i);return o.parent=i,o.ref=0,o.global=!1,o.id=++He,ge.env,o.env=ce?{Promise:Ee,PromiseProp:{value:Ee,configurable:!0,writable:!0},all:Ee.all,race:Ee.race,allSettled:Ee.allSettled,any:Ee.any,resolve:Ee.resolve,reject:Ee.reject}:{},t&&s(o,t),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()},r=Ke(o,e,n,r),0===o.ref&&o.finalize(),r}function ze(){return De.id||(De.id=++Le),++De.awaits,De.echoes+=se,De.id}function Ve(){return!!De.awaits&&(0==--De.awaits&&(De.id=0),De.echoes=De.awaits*se,!0)}function Ge(e){return De.echoes&&e&&e.constructor===ue?(ze(),e.then((function(e){return Ve(),e}),(function(e){return Ve(),$e(e)}))):e}function We(){var e=Fe[Fe.length-1];Fe.pop(),Xe(e,!1)}function Xe(e,t){var n,r=ye;(t?!De.echoes||Be++&&e===ye:!Be||--Be&&e===ye)||queueMicrotask(t?function(e){++Ue,De.echoes&&0!=--De.echoes||(De.echoes=De.awaits=De.id=0),Fe.push(ye),Xe(e,!0)}.bind(null,e):We),e!==ye&&(ye=e,r===ge&&(ge.env=Ye()),ce&&(n=ge.env.Promise,t=e.env,(r.global||e.global)&&(Object.defineProperty(i,"Promise",t.PromiseProp),n.all=t.all,n.race=t.race,n.resolve=t.resolve,n.reject=t.reject,t.allSettled&&(n.allSettled=t.allSettled),t.any&&(n.any=t.any))))}function Ye(){var e=i.Promise;return ce?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(i,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function Ke(e,t,n,r,i){var o=ye;try{return Xe(e,!0),t(n,r,i)}finally{Xe(o,!1)}}function qe(e,t,n,r){return"function"!=typeof e?e:function(){var i=ye;n&&ze(),Xe(t,!0);try{return e.apply(this,arguments)}finally{Xe(i,!1),r&&queueMicrotask(Ve)}}}function Ze(e){Promise===ue&&0===De.echoes?0===Be?e():enqueueNativeMicroTask(e):setTimeout(e,0)}-1===(""+B).indexOf("[native code]")&&(ze=Ve=q);var $e=Ee.reject,Qe=String.fromCharCode(65535),Je="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",et="String expected.",tt=[],nt="__dbnames",rt="readonly",it="readwrite";function ot(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var at={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function st(e){return"string"!=typeof e||/\./.test(e)?function(e){return e}:function(t){return void 0===t[e]&&e in t&&delete(t=I(t))[e],t}}function lt(){throw X.Type()}function ut(e,t){try{var n=ct(e),r=ct(t);if(n!==r)return"Array"===n?1:"Array"===r?-1:"binary"===n?1:"binary"===r?-1:"string"===n?1:"string"===r?-1:"Date"===n?1:"Date"!==r?NaN:-1;switch(n){case"number":case"Date":case"string":return t<e?1:e<t?-1:0;case"binary":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o)if(e[o]!==t[o])return e[o]<t[o]?-1:1;return n===r?0:n<r?-1:1}(ht(e),ht(t));case"Array":return function(e,t){for(var n=e.length,r=t.length,i=n<r?n:r,o=0;o<i;++o){var a=ut(e[o],t[o]);if(0!==a)return a}return n===r?0:n<r?-1:1}(e,t)}}catch(e){}return NaN}function ct(e){var t=typeof e;return"object"!=t?t:ArrayBuffer.isView(e)||"ArrayBuffer"===(e=P(e))?"binary":e}function ht(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var dt=(ft.prototype._trans=function(e,t,n){var r=this._tx||ye.trans,i=this.name,o=ie&&"undefined"!=typeof console&&console.createTask&&void 0;function a(e,n,r){if(!r.schema[i])throw new X.NotFound("Table "+i+" not part of transaction");return t(r.idbtrans,r)}var s=Oe();try{var l=r&&r.db._novip===this.db._novip?r===ye.trans?r._promise(e,a,n):je((function(){return r._promise(e,a,n)}),{trans:r,transless:ye.transless||ye}):function t(n,r,i,o){if(n.idbdb&&(n._state.openComplete||ye.letThrough||n._vip)){var a=n._createTransaction(r,i,n._dbSchema);try{a.create(),n._state.PR1398_maxLoop=3}catch(e){return e.name===G.InvalidState&&n.isOpen()&&0<--n._state.PR1398_maxLoop?(n.close({disableAutoOpen:!1}),n.open().then((function(){return t(n,r,i,o)}))):$e(e)}return a._promise(r,(function(e,t){return je((function(){return ye.trans=a,o(e,t,a)}))})).then((function(e){if("readwrite"===r)try{a.idbtrans.commit()}catch(e){}return"readonly"===r?e:a._completion.then((function(){return e}))}))}if(n._state.openComplete)return $e(new X.DatabaseClosed(n._state.dbOpenError));if(!n._state.isBeingOpened){if(!n._state.autoOpen)return $e(new X.DatabaseClosed);n.open().catch(q)}return n._state.dbReadyPromise.then((function(){return t(n,r,i,o)}))}(this.db,e,[this.name],a);return o&&(l._consoleTask=o,l=l.catch((function(e){return $e(e)}))),l}finally{s&&Pe()}},ft.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):null==e?$e(new X.Type("Invalid argument to Table.get()")):this._trans("readonly",(function(t){return n.core.get({trans:t,key:e}).then((function(e){return n.hook.reading.fire(e)}))})).then(t)},ft.prototype.where=function(e){if("string"==typeof e)return new this.db.WhereClause(this,e);if(a(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=o(e);if(1===t.length)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter((function(e){if(e.compound&&t.every((function(t){return 0<=e.keyPath.indexOf(t)}))){for(var n=0;n<t.length;++n)if(-1===t.indexOf(e.keyPath[n]))return!1;return!0}return!1})).sort((function(e,t){return e.keyPath.length-t.keyPath.length}))[0];if(n&&this.db._maxKey!==Qe){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map((function(t){return e[t]})))}var i=this.schema.idxByName,s=this.db._deps.indexedDB;function l(e,t){return 0===s.cmp(e,t)}var u=t.reduce((function(t,n){var r=t[0],o=t[1],s=(t=i[n],e[n]);return[r||t,r||!t?ot(o,t&&t.multi?function(e){return e=x(e,n),a(e)&&e.some((function(e){return l(s,e)}))}:function(e){return l(s,x(e,n))}):o]}),[null,null]);return r=u[0],u=u[1],r?this.where(r.name).equals(e[r.keyPath]).filter(u):n?this.filter(u):this.where(t).equals("")},ft.prototype.filter=function(e){return this.toCollection().and(e)},ft.prototype.count=function(e){return this.toCollection().count(e)},ft.prototype.offset=function(e){return this.toCollection().offset(e)},ft.prototype.limit=function(e){return this.toCollection().limit(e)},ft.prototype.each=function(e){return this.toCollection().each(e)},ft.prototype.toArray=function(e){return this.toCollection().toArray(e)},ft.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},ft.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,a(e)?"[".concat(e.join("+"),"]"):e))},ft.prototype.reverse=function(){return this.toCollection().reverse()},ft.prototype.mapToClass=function(t){var n,r=this.db,i=this.name;function o(){return null!==n&&n.apply(this,arguments)||this}(this.schema.mappedClass=t).prototype instanceof lt&&(function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(o,n=t),Object.defineProperty(o.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),o.prototype.table=function(){return i},t=o);for(var a=new Set,s=t.prototype;s;s=l(s))Object.getOwnPropertyNames(s).forEach((function(e){return a.add(e)}));function u(e){if(!e)return e;var n,r=Object.create(t.prototype);for(n in e)if(!a.has(n))try{r[n]=e[n]}catch(e){}return r}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=u,this.hook("reading",u),t},ft.prototype.defineClass=function(){return this.mapToClass((function(e){s(this,e)}))},ft.prototype.add=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=st(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"add",keys:null!=t?[t]:null,values:[a]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{E(e,o,t)}catch(t){}return t}))},ft.prototype.update=function(e,t){return"object"!=typeof e||a(e)?this.where(":id").equals(e).modify(t):void 0===(e=x(e,this.schema.primKey.keyPath))?$e(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(e).modify(t)},ft.prototype.put=function(e,t){var n=this,r=this.schema.primKey,i=r.auto,o=r.keyPath,a=e;return o&&i&&(a=st(o)(e)),this._trans("readwrite",(function(e){return n.core.mutate({trans:e,type:"put",values:[a],keys:null!=t?[t]:null})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):e.lastResult})).then((function(t){if(o)try{E(e,o,t)}catch(t){}return t}))},ft.prototype.delete=function(e){var t=this;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},ft.prototype.clear=function(){var e=this;return this._trans("readwrite",(function(t){return e.core.mutate({trans:t,type:"deleteRange",range:at})})).then((function(e){return e.numFailures?Ee.reject(e.failures[0]):void 0}))},ft.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",(function(n){return t.core.getMany({keys:e,trans:n}).then((function(e){return e.map((function(e){return t.hook.reading.fire(e)}))}))}))},ft.prototype.bulkAdd=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"add",keys:i,values:s,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return o?n:i;throw new V("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(a," operations failed"),e)}))}))},ft.prototype.bulkPut=function(e,t,n){var r=this,i=Array.isArray(t)?t:void 0,o=(n=n||(i?void 0:t))?n.allKeys:void 0;return this._trans("readwrite",(function(t){var n=(s=r.schema.primKey).auto;if((s=s.keyPath)&&i)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");var a=e.length,s=s&&n?e.map(st(s)):e;return r.core.mutate({trans:t,type:"put",keys:i,values:s,wantResults:o}).then((function(e){var t=e.numFailures,n=e.results,i=e.lastResult;if(e=e.failures,0===t)return o?n:i;throw new V("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(a," operations failed"),e)}))}))},ft.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map((function(e){return e.key})),i=e.map((function(e){return e.changes})),o=[];return this._trans("readwrite",(function(a){return n.getMany({trans:a,keys:r,cache:"clone"}).then((function(s){var l=[],u=[];e.forEach((function(e,n){var r=e.key,i=e.changes,a=s[n];if(a){for(var c=0,h=Object.keys(i);c<h.length;c++){var d=h[c],f=i[d];if(d===t.schema.primKey.keyPath){if(0!==ut(f,r))throw new X.Constraint("Cannot update primary key in bulkUpdate()")}else E(a,d,f)}o.push(n),l.push(r),u.push(a)}}));var c=l.length;return n.mutate({trans:a,type:"put",keys:l,values:u,updates:{keys:r,changeSpecs:i}}).then((function(e){var n=e.numFailures,r=e.failures;if(0===n)return c;for(var i=0,a=Object.keys(r);i<a.length;i++){var s,l=a[i],u=o[Number(l)];null!=u&&(s=r[l],delete r[l],r[u]=s)}throw new V("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)}))}))}))},ft.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",(function(n){return t.core.mutate({trans:n,type:"delete",keys:e})})).then((function(e){var r=e.numFailures,i=e.lastResult;if(e=e.failures,0===r)return i;throw new V("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),e)}))},ft);function ft(){}function pt(e){function t(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return n[t].subscribe.apply(null,o),e}if("string"==typeof t)return n[t]}var n={};t.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return t;function s(e,r,i){if("object"!=typeof e){var l;r=r||ne;var u={subscribers:[],fire:i=i||q,subscribe:function(e){-1===u.subscribers.indexOf(e)&&(u.subscribers.push(e),u.fire=r(u.fire,e))},unsubscribe:function(e){u.subscribers=u.subscribers.filter((function(t){return t!==e})),u.fire=u.subscribers.reduce(r,i)}};return n[e]=t[e]=u}o(l=e).forEach((function(e){var t=l[e];if(a(t))s(e,l[e][0],l[e][1]);else{if("asap"!==t)throw new X.InvalidArgument("Invalid event config");var n=s(e,Z,(function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];n.subscribers.forEach((function(e){_((function(){e.apply(null,t)}))}))}))}}))}}function vt(e,t){return p(t).from({prototype:e}),t}function mt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function gt(e,t){e.filter=ot(e.filter,t)}function yt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return ot(r(),t())}:t,e.justLimit=n&&!r}function bt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new X.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function _t(e,t,n){var r=bt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:"prev"===e.dir,unique:!!e.unique,query:{index:r,range:e.range}})}function xt(e,t,n,r){var i=e.replayFilter?ot(e.filter,e.replayFilter()):e.filter;if(e.or){var o={},a=function(e,n,r){var a,s;i&&!i(n,r,(function(e){return n.stop(e)}),(function(e){return n.fail(e)}))||("[object ArrayBuffer]"===(s=""+(a=n.primaryKey))&&(s=""+new Uint8Array(a)),c(o,s)||(o[s]=!0,t(e,n,r)))};return Promise.all([e.or._iterate(a,n),Et(_t(e,r,n),e.algorithm,a,!e.keysOnly&&e.valueMapper)])}return Et(_t(e,r,n),ot(e.algorithm,i),t,!e.keysOnly&&e.valueMapper)}function Et(e,t,n,r){var i=Ne(r?function(e,t,i){return n(r(e),t,i)}:n);return e.then((function(e){if(e)return e.start((function(){var n=function(){return e.continue()};t&&!t(e,(function(e){return n=e}),(function(t){e.stop(t),n=q}),(function(t){e.fail(t),n=q}))||i(e.value,e,(function(e){return n=e})),n()}))}))}k=Symbol();var wt=(Tt.prototype.execute=function(e){if(void 0!==this.add){var t=this.add;if(a(t))return r(r([],a(e)?e:[],!0),t,!0).sort();if("number"==typeof t)return(Number(e)||0)+t;if("bigint"==typeof t)try{return BigInt(e)+t}catch(e){return BigInt(0)+t}throw new TypeError("Invalid term ".concat(t))}if(void 0!==this.remove){var n=this.remove;if(a(n))return a(e)?e.filter((function(e){return!n.includes(e)})).sort():[];if("number"==typeof n)return Number(e)-n;if("bigint"==typeof n)try{return BigInt(e)-n}catch(e){return BigInt(0)-n}throw new TypeError("Invalid subtrahend ".concat(n))}return(t=null===(t=this.replacePrefix)||void 0===t?void 0:t[0])&&"string"==typeof e&&e.startsWith(t)?this.replacePrefix[1]+e.substring(t.length):e},Tt);function Tt(e){Object.assign(this,e)}var St=(kt.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,$e.bind(null,n.error)):n.table._trans("readonly",e).then(t)},kt.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,$e.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},kt.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=ot(t.algorithm,e)},kt.prototype._iterate=function(e,t){return xt(this._ctx,e,t,this._ctx.table.core)},kt.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},kt.prototype.raw=function(){return this._ctx.valueMapper=null,this},kt.prototype.each=function(e){var t=this._ctx;return this._read((function(n){return xt(t,e,n,t.table.core)}))},kt.prototype.count=function(e){var t=this;return this._read((function(e){var n=t._ctx,r=n.table.core;if(mt(n,!0))return r.count({trans:e,query:{index:bt(n,r.schema),range:n.range}}).then((function(e){return Math.min(e,n.limit)}));var i=0;return xt(n,(function(){return++i,!1}),e,r).then((function(){return i}))})).then(e)},kt.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],i=n.length-1;function o(e,t){return t?o(e[n[t]],t-1):e[r]}var a="next"===this._ctx.dir?1:-1;function s(e,t){return(e=o(e,i))<(t=o(t,i))?-a:t<e?a:0}return this.toArray((function(e){return e.sort(s)})).then(t)},kt.prototype.toArray=function(e){var t=this;return this._read((function(e){var n=t._ctx;if("next"===n.dir&&mt(n,!0)&&0<n.limit){var r=n.valueMapper,i=bt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:i,range:n.range}}).then((function(e){return e=e.result,r?e.map(r):e}))}var o=[];return xt(n,(function(e){return o.push(e)}),e,n.table.core).then((function(){return o}))}),e)},kt.prototype.offset=function(e){var t=this._ctx;return e<=0||(t.offset+=e,mt(t)?yt(t,(function(){var t=e;return function(e,n){return 0===t||(1===t?--t:n((function(){e.advance(t),t=0})),!1)}})):yt(t,(function(){var t=e;return function(){return--t<0}}))),this},kt.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),yt(this._ctx,(function(){var t=e;return function(e,n,r){return--t<=0&&n(r),0<=t}}),!0),this},kt.prototype.until=function(e,t){return gt(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},kt.prototype.first=function(e){return this.limit(1).toArray((function(e){return e[0]})).then(e)},kt.prototype.last=function(e){return this.reverse().first(e)},kt.prototype.filter=function(e){var t;return gt(this._ctx,(function(t){return e(t.value)})),(t=this._ctx).isMatch=ot(t.isMatch,e),this},kt.prototype.and=function(e){return this.filter(e)},kt.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},kt.prototype.reverse=function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},kt.prototype.desc=function(){return this.reverse()},kt.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.key,n)}))},kt.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},kt.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each((function(t,n){e(n.primaryKey,n)}))},kt.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.key)})).then((function(){return n})).then(e)},kt.prototype.primaryKeys=function(e){var t=this._ctx;if("next"===t.dir&&mt(t,!0)&&0<t.limit)return this._read((function(e){var n=bt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})})).then((function(e){return e.result})).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each((function(e,t){n.push(t.primaryKey)})).then((function(){return n})).then(e)},kt.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},kt.prototype.firstKey=function(e){return this.limit(1).keys((function(e){return e[0]})).then(e)},kt.prototype.lastKey=function(e){return this.reverse().firstKey(e)},kt.prototype.distinct=function(){var e;if(!(e=(e=this._ctx).index&&e.table.schema.idxByName[e.index])||!e.multi)return this;var t={};return gt(this._ctx,(function(e){var n=e.primaryKey.toString();return e=c(t,n),t[n]=!0,!e})),this},kt.prototype.modify=function(e){var t=this,n=this._ctx;return this._write((function(r){var i,a,s;function l(e,t){var n=t.failures;t=t.numFailures,v+=e-t;for(var r=0,i=o(n);r<i.length;r++){var a=i[r];p.push(n[a])}}s="function"==typeof e?e:(i=o(e),a=i.length,function(t){for(var n=!1,r=0;r<a;++r){var o=i[r],s=e[o],l=x(t,o);s instanceof wt?(E(t,o,s.execute(l)),n=!0):l!==s&&(E(t,o,s),n=!0)}return n});var u=n.table.core,c=u.schema.primaryKey,h=c.outbound,d=c.extractKey,f=t.db._options.modifyChunkSize||200,p=[],v=0,m=[];return t.clone().primaryKeys().then((function(t){function i(n){var a=Math.min(f,t.length-n);return u.getMany({trans:r,keys:t.slice(n,n+a),cache:"immutable"}).then((function(c){for(var p=[],v=[],m=h?[]:null,g=[],y=0;y<a;++y){var b=c[y],_={value:I(b),primKey:t[n+y]};!1!==s.call(_,_.value,_)&&(null==_.value?g.push(t[n+y]):h||0===ut(d(b),d(_.value))?(v.push(_.value),h&&m.push(t[n+y])):(g.push(t[n+y]),p.push(_.value)))}return Promise.resolve(0<p.length&&u.mutate({trans:r,type:"add",values:p}).then((function(e){for(var t in e.failures)g.splice(parseInt(t),1);l(p.length,e)}))).then((function(){return(0<v.length||o&&"object"==typeof e)&&u.mutate({trans:r,type:"put",keys:m,values:v,criteria:o,changeSpec:"function"!=typeof e&&e,isAdditionalChunk:0<n}).then((function(e){return l(v.length,e)}))})).then((function(){return(0<g.length||o&&e===Ct)&&u.mutate({trans:r,type:"delete",keys:g,criteria:o,isAdditionalChunk:0<n}).then((function(e){return l(g.length,e)}))})).then((function(){return t.length>n+a&&i(n+f)}))}))}var o=mt(n)&&n.limit===1/0&&("function"!=typeof e||e===Ct)&&{index:n.index,range:n.range};return i(0).then((function(){if(0<p.length)throw new z("Error modifying one or more objects",p,v,m);return t.length}))}))}))},kt.prototype.delete=function(){var e=this._ctx,t=e.range;return mt(e)&&(e.isPrimKey||3===t.type)?this._write((function(n){var r=e.table.core.schema.primaryKey,i=t;return e.table.core.count({trans:n,query:{index:r,range:i}}).then((function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:i}).then((function(e){var n=e.failures;if(e.lastResult,e.results,e=e.numFailures)throw new z("Could not delete some values",Object.keys(n).map((function(e){return n[e]})),t-e);return t-e}))}))})):this.modify(Ct)},kt);function kt(){}var Ct=function(e,t){return t.value=null};function At(e,t){return e<t?-1:e===t?0:1}function It(e,t){return t<e?-1:e===t?0:1}function Ot(e,t,n){return(e=e instanceof Dt?new e.Collection(e):e)._ctx.error=new(n||TypeError)(t),e}function Pt(e){return new e.Collection(e,(function(){return Nt("")})).limit(0)}function Mt(e,t,n,r){var i,o,a,s,l,u,c,h=n.length;if(!n.every((function(e){return"string"==typeof e})))return Ot(e,et);function d(e){i="next"===e?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()},o="next"===e?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()},a="next"===e?At:It;var t=n.map((function(e){return{lower:o(e),upper:i(e)}})).sort((function(e,t){return a(e.lower,t.lower)}));s=t.map((function(e){return e.upper})),l=t.map((function(e){return e.lower})),c="next"===(u=e)?"":r}d("next"),(e=new e.Collection(e,(function(){return Rt(s[0],l[h-1]+r)})))._ondirectionchange=function(e){d(e)};var f=0;return e._addAlgorithm((function(e,n,r){var i=e.key;if("string"!=typeof i)return!1;var d=o(i);if(t(d,l,f))return!0;for(var p=null,v=f;v<h;++v){var m=function(e,t,n,r,i,o){for(var a=Math.min(e.length,r.length),s=-1,l=0;l<a;++l){var u=t[l];if(u!==r[l])return i(e[l],n[l])<0?e.substr(0,l)+n[l]+n.substr(l+1):i(e[l],r[l])<0?e.substr(0,l)+r[l]+n.substr(l+1):0<=s?e.substr(0,s)+t[s]+n.substr(s+1):null;i(e[l],u)<0&&(s=l)}return a<r.length&&"next"===o?e+n.substr(e.length):a<e.length&&"prev"===o?e.substr(0,n.length):s<0?null:e.substr(0,s)+r[s]+n.substr(s+1)}(i,d,s[v],l[v],a,u);null===m&&null===p?f=v+1:(null===p||0<a(p,m))&&(p=m)}return n(null!==p?function(){e.continue(p+c)}:r),!1})),e}function Rt(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function Nt(e){return{type:1,lower:e,upper:e}}var Dt=(Object.defineProperty(Lt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Lt.prototype.between=function(e,t,n,r){n=!1!==n,r=!0===r;try{return 0<this._cmp(e,t)||0===this._cmp(e,t)&&(n||r)&&(!n||!r)?Pt(this):new this.Collection(this,(function(){return Rt(e,t,!n,!r)}))}catch(e){return Ot(this,Je)}},Lt.prototype.equals=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Nt(e)}))},Lt.prototype.above=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(e,void 0,!0)}))},Lt.prototype.aboveOrEqual=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(e,void 0,!1)}))},Lt.prototype.below=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(void 0,e,!1,!0)}))},Lt.prototype.belowOrEqual=function(e){return null==e?Ot(this,Je):new this.Collection(this,(function(){return Rt(void 0,e)}))},Lt.prototype.startsWith=function(e){return"string"!=typeof e?Ot(this,et):this.between(e,e+Qe,!0,!0)},Lt.prototype.startsWithIgnoreCase=function(e){return""===e?this.startsWith(e):Mt(this,(function(e,t){return 0===e.indexOf(t[0])}),[e],Qe)},Lt.prototype.equalsIgnoreCase=function(e){return Mt(this,(function(e,t){return e===t[0]}),[e],"")},Lt.prototype.anyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Mt(this,(function(e,t){return-1!==t.indexOf(e)}),e,"")},Lt.prototype.startsWithAnyOfIgnoreCase=function(){var e=L.apply(D,arguments);return 0===e.length?Pt(this):Mt(this,(function(e,t){return t.some((function(t){return 0===e.indexOf(t)}))}),e,Qe)},Lt.prototype.anyOf=function(){var e=this,t=L.apply(D,arguments),n=this._cmp;try{t.sort(n)}catch(r){return Ot(this,Je)}if(0===t.length)return Pt(this);var r=new this.Collection(this,(function(){return Rt(t[0],t[t.length-1])}));r._ondirectionchange=function(r){n="next"===r?e._ascending:e._descending,t.sort(n)};var i=0;return r._addAlgorithm((function(e,r,o){for(var a=e.key;0<n(a,t[i]);)if(++i===t.length)return r(o),!1;return 0===n(a,t[i])||(r((function(){e.continue(t[i])})),!1)})),r},Lt.prototype.notEqual=function(e){return this.inAnyRange([[-1/0,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Lt.prototype.noneOf=function(){var e=L.apply(D,arguments);if(0===e.length)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return Ot(this,Je)}var t=e.reduce((function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[-1/0,t]]}),null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},Lt.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,i=this._ascending,o=this._descending,a=this._min,s=this._max;if(0===e.length)return Pt(this);if(!e.every((function(e){return void 0!==e[0]&&void 0!==e[1]&&i(e[0],e[1])<=0})))return Ot(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var l,u=!t||!1!==t.includeLowers,c=t&&!0===t.includeUppers,h=i;function d(e,t){return h(e[0],t[0])}try{(l=e.reduce((function(e,t){for(var n=0,i=e.length;n<i;++n){var o=e[n];if(r(t[0],o[1])<0&&0<r(t[1],o[0])){o[0]=a(o[0],t[0]),o[1]=s(o[1],t[1]);break}}return n===i&&e.push(t),e}),[])).sort(d)}catch(e){return Ot(this,Je)}var f=0,p=c?function(e){return 0<i(e,l[f][1])}:function(e){return 0<=i(e,l[f][1])},v=u?function(e){return 0<o(e,l[f][0])}:function(e){return 0<=o(e,l[f][0])},m=p;return(e=new this.Collection(this,(function(){return Rt(l[0][0],l[l.length-1][1],!u,!c)})))._ondirectionchange=function(e){h="next"===e?(m=p,i):(m=v,o),l.sort(d)},e._addAlgorithm((function(e,t,r){for(var o,a=e.key;m(a);)if(++f===l.length)return t(r),!1;return!p(o=a)&&!v(o)||(0===n._cmp(a,l[f][1])||0===n._cmp(a,l[f][0])||t((function(){h===i?e.continue(l[f][0]):e.continue(l[f][1])})),!1)})),e},Lt.prototype.startsWithAnyOf=function(){var e=L.apply(D,arguments);return e.every((function(e){return"string"==typeof e}))?0===e.length?Pt(this):this.inAnyRange(e.map((function(e){return[e,e+Qe]}))):Ot(this,"startsWithAnyOf() only works with strings")},Lt);function Lt(){}function Ft(e){return Ne((function(t){return Bt(t),e(t.target.error),!1}))}function Bt(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var Ut="storagemutated",Ht="x-storagemutated-1",jt=pt(null,Ut),zt=(Vt.prototype._lock=function(){return b(!ye.global),++this._reculock,1!==this._reculock||ye.global||(ye.lockOwnerFor=this),this},Vt.prototype._unlock=function(){if(b(!ye.global),0==--this._reculock)for(ye.global||(ye.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var e=this._blockedFuncs.shift();try{Ke(e[1],e[0])}catch(e){}}return this},Vt.prototype._locked=function(){return this._reculock&&ye.lockOwnerFor!==this},Vt.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(b(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new X.DatabaseClosed(r);case"MissingAPIError":throw new X.MissingAPI(r.message,r);default:throw new X.OpenFailed(r)}if(!this.active)throw new X.TransactionInactive;return b(null===this._completion._state),(e=this.idbtrans=e||(this.db.core||n).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Ne((function(n){Bt(n),t._reject(e.error)})),e.onabort=Ne((function(n){Bt(n),t.active&&t._reject(new X.Abort(e.error)),t.active=!1,t.on("abort").fire(n)})),e.oncomplete=Ne((function(){t.active=!1,t._resolve(),"mutatedParts"in e&&jt.storagemutated.fire(e.mutatedParts)})),this},Vt.prototype._promise=function(e,t,n){var r=this;if("readwrite"===e&&"readwrite"!==this.mode)return $e(new X.ReadOnly("Transaction is readonly"));if(!this.active)return $e(new X.TransactionInactive);if(this._locked())return new Ee((function(i,o){r._blockedFuncs.push([function(){r._promise(e,t,n).then(i,o)},ye])}));if(n)return je((function(){var e=new Ee((function(e,n){r._lock();var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return e.finally((function(){return r._unlock()})),e._lib=!0,e}));var i=new Ee((function(e,n){var i=t(e,n,r);i&&i.then&&i.then(e,n)}));return i._lib=!0,i},Vt.prototype._root=function(){return this.parent?this.parent._root():this},Vt.prototype.waitFor=function(e){var t,n=this._root(),r=Ee.resolve(e);n._waitingFor?n._waitingFor=n._waitingFor.then((function(){return r})):(n._waitingFor=r,n._waitingQueue=[],t=n.idbtrans.objectStore(n.storeNames[0]),function e(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(t.get(-1/0).onsuccess=e)}());var i=n._waitingFor;return new Ee((function(e,t){r.then((function(t){return n._waitingQueue.push(Ne(e.bind(null,t)))}),(function(e){return n._waitingQueue.push(Ne(t.bind(null,e)))})).finally((function(){n._waitingFor===i&&(n._waitingFor=null)}))}))},Vt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new X.Abort))},Vt.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(c(t,e))return t[e];var n=this.schema[e];if(!n)throw new X.NotFound("Table "+e+" not part of transaction");return(n=new this.db.Table(e,n,this)).core=this.db.core.table(e),t[e]=n},Vt);function Vt(){}function Gt(e,t,n,r,i,o,a){return{name:e,keyPath:t,unique:n,multi:r,auto:i,compound:o,src:(n&&!a?"&":"")+(r?"*":"")+(i?"++":"")+Wt(t)}}function Wt(e){return"string"==typeof e?e:e?"["+[].join.call(e,"+")+"]":""}function Xt(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:(r=function(e){return[e.name,e]},n.reduce((function(e,t,n){return(n=r(t,n))&&(e[n[0]]=n[1]),e}),{}))};var r}var Yt=function(e){try{return e.only([[]]),Yt=function(){return[[]]},[[]]}catch(e){return Yt=function(){return Qe},Qe}};function Kt(e){return null==e?function(){}:"string"==typeof e?1===(t=e).split(".").length?function(e){return e[t]}:function(e){return x(e,t)}:function(t){return x(t,e)};var t}function qt(e){return[].slice.call(e)}var Zt=0;function $t(e){return null==e?":id":"string"==typeof e?e:"[".concat(e.join("+"),"]")}function Qt(e,t,n){function r(e){if(3===e.type)return null;if(4===e.type)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,i=e.lowerOpen;return e=e.upperOpen,void 0===n?void 0===r?null:t.upperBound(r,!!e):void 0===r?t.lowerBound(n,!!i):t.bound(n,r,!!i,!!e)}function i(e){var t,n=e.name;return{name:n,schema:e,mutate:function(e){var t=e.trans,i=e.type,o=e.keys,a=e.values,s=e.range;return new Promise((function(e,l){e=Ne(e);var u=t.objectStore(n),c=null==u.keyPath,h="put"===i||"add"===i;if(!h&&"delete"!==i&&"deleteRange"!==i)throw new Error("Invalid operation type: "+i);var d,f=(o||a||{length:1}).length;if(o&&a&&o.length!==a.length)throw new Error("Given keys array must have same length as given values array.");if(0===f)return e({numFailures:0,failures:{},results:[],lastResult:void 0});function p(e){++g,Bt(e)}var v=[],m=[],g=0;if("deleteRange"===i){if(4===s.type)return e({numFailures:g,failures:m,results:[],lastResult:void 0});3===s.type?v.push(d=u.clear()):v.push(d=u.delete(r(s)))}else{var y=(c=h?c?[a,o]:[a,null]:[o,null])[0],b=c[1];if(h)for(var _=0;_<f;++_)v.push(d=b&&void 0!==b[_]?u[i](y[_],b[_]):u[i](y[_])),d.onerror=p;else for(_=0;_<f;++_)v.push(d=u[i](y[_])),d.onerror=p}function x(t){t=t.target.result,v.forEach((function(e,t){return null!=e.error&&(m[t]=e.error)})),e({numFailures:g,failures:m,results:"delete"===i?o:v.map((function(e){return e.result})),lastResult:t})}d.onerror=function(e){p(e),x(e)},d.onsuccess=x}))},getMany:function(e){var t=e.trans,r=e.keys;return new Promise((function(e,i){e=Ne(e);for(var o,a=t.objectStore(n),s=r.length,l=new Array(s),u=0,c=0,h=function(t){t=t.target,l[t._pos]=t.result,++c===u&&e(l)},d=Ft(i),f=0;f<s;++f)null!=r[f]&&((o=a.get(r[f]))._pos=f,o.onsuccess=h,o.onerror=d,++u);0===u&&e(l)}))},get:function(e){var t=e.trans,r=e.key;return new Promise((function(e,i){e=Ne(e);var o=t.objectStore(n).get(r);o.onsuccess=function(t){return e(t.target.result)},o.onerror=Ft(i)}))},query:(t=c,function(e){return new Promise((function(i,o){i=Ne(i);var a,s,l,u=e.trans,c=e.values,h=e.limit,d=e.query,f=h===1/0?void 0:h,p=d.index;if(d=d.range,u=u.objectStore(n),p=p.isPrimaryKey?u:u.index(p.name),d=r(d),0===h)return i({result:[]});t?((f=c?p.getAll(d,f):p.getAllKeys(d,f)).onsuccess=function(e){return i({result:e.target.result})},f.onerror=Ft(o)):(a=0,s=!c&&"openKeyCursor"in p?p.openKeyCursor(d):p.openCursor(d),l=[],s.onsuccess=function(e){var t=s.result;return t?(l.push(c?t.value:t.primaryKey),++a===h?i({result:l}):void t.continue()):i({result:l})},s.onerror=Ft(o))}))}),openCursor:function(e){var t=e.trans,i=e.values,o=e.query,a=e.reverse,s=e.unique;return new Promise((function(e,l){e=Ne(e);var u=o.index,c=o.range,h=t.objectStore(n),d=(h=u.isPrimaryKey?h:h.index(u.name),u=a?s?"prevunique":"prev":s?"nextunique":"next",!i&&"openKeyCursor"in h?h.openKeyCursor(r(c),u):h.openCursor(r(c),u));d.onerror=Ft(l),d.onsuccess=Ne((function(n){var r,i,o,a,s=d.result;s?(s.___id=++Zt,s.done=!1,r=s.continue.bind(s),i=(i=s.continuePrimaryKey)&&i.bind(s),o=s.advance.bind(s),a=function(){throw new Error("Cursor not stopped")},s.trans=t,s.stop=s.continue=s.continuePrimaryKey=s.advance=function(){throw new Error("Cursor not started")},s.fail=Ne(l),s.next=function(){var e=this,t=1;return this.start((function(){return t--?e.continue():e.stop()})).then((function(){return e}))},s.start=function(e){function t(){if(d.result)try{e()}catch(e){s.fail(e)}else s.done=!0,s.start=function(){throw new Error("Cursor behind last entry")},s.stop()}var n=new Promise((function(e,t){e=Ne(e),d.onerror=Ft(t),s.fail=t,s.stop=function(t){s.stop=s.continue=s.continuePrimaryKey=s.advance=a,e(t)}}));return d.onsuccess=Ne((function(e){d.onsuccess=t,t()})),s.continue=r,s.continuePrimaryKey=i,s.advance=o,t(),n},e(s)):e(null)}),l)}))},count:function(e){var t=e.query,i=e.trans,o=t.index,a=t.range;return new Promise((function(e,t){var s=i.objectStore(n),l=o.isPrimaryKey?s:s.index(o.name);(l=(s=r(a))?l.count(s):l.count()).onsuccess=Ne((function(t){return e(t.target.result)})),l.onerror=Ft(t)}))}}}var o,s,l,u=(s=n,l=qt((o=e).objectStoreNames),{schema:{name:o.name,tables:l.map((function(e){return s.objectStore(e)})).map((function(e){var t=e.keyPath,n=e.autoIncrement,r=a(t),i={};return n={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:null==t,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:Kt(t)},indexes:qt(e.indexNames).map((function(t){return e.index(t)})).map((function(e){var t=e.name,n=e.unique,r=e.multiEntry;return e=e.keyPath,r={name:t,compound:a(e),keyPath:e,unique:n,multiEntry:r,extractKey:Kt(e)},i[$t(e)]=r})),getIndexByKeyPath:function(e){return i[$t(e)]}},i[":id"]=n.primaryKey,null!=t&&(i[$t(t)]=n.primaryKey),n}))},hasGetAll:0<l.length&&"getAll"in s.objectStore(l[0])&&!("undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),c=(n=u.schema,u.hasGetAll),h=(u=n.tables.map(i),{});return u.forEach((function(e){return h[e.name]=e})),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){if(!h[e])throw new Error("Table '".concat(e,"' not found"));return h[e]},MIN_KEY:-1/0,MAX_KEY:Yt(t),schema:n}}function Jt(e,n,r,i){var o=r.IDBKeyRange;return r.indexedDB,{dbcore:(i=Qt(n,o,i),e.dbcore.reduce((function(e,n){return n=n.create,t(t({},e),n(e))}),i))}}function en(e,t){var n=t.db;t=Jt(e._middlewares,n,e._deps,t),e.core=t.dbcore,e.tables.forEach((function(t){var n=t.name;e.core.schema.tables.some((function(e){return e.name===n}))&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))}))}function tn(e,t,n,r){n.forEach((function(n){var i=r[n];t.forEach((function(t){var r=function e(t,n){return v(t,n)||(t=l(t))&&e(t,n)}(t,n);(!r||"value"in r&&void 0===r.value)&&(t===e.Transaction.prototype||t instanceof e.Transaction?f(t,n,{get:function(){return this.table(n)},set:function(e){d(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,i))}))}))}function nn(e,t){t.forEach((function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]}))}function rn(e,t){return e._cfg.version-t._cfg.version}function on(e,t,n,r){var i=e._dbSchema;n.objectStoreNames.contains("$meta")&&!i.$meta&&(i.$meta=Xt("$meta",fn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,i);a.create(n),a._completion.catch(r);var s=a._reject.bind(a),l=ye.transless||ye;je((function(){return ye.trans=a,ye.transless=l,0!==t?(en(e,n),u=t,((r=a).storeNames.includes("$meta")?r.table("$meta").get("version").then((function(e){return null!=e?e:u})):Ee.resolve(u)).then((function(t){return i=t,s=a,l=n,u=[],t=(r=e)._versions,c=r._dbSchema=hn(0,r.idbdb,l),0!==(t=t.filter((function(e){return e._cfg.version>=i}))).length?(t.forEach((function(e){u.push((function(){var t=c,n=e._cfg.dbschema;dn(r,t,l),dn(r,n,l),c=r._dbSchema=n;var a=sn(t,n);a.add.forEach((function(e){ln(l,e[0],e[1].primKey,e[1].indexes)})),a.change.forEach((function(e){if(e.recreate)throw new X.Upgrade("Not yet support for changing primary key");var t=l.objectStore(e.name);e.add.forEach((function(e){return cn(t,e)})),e.change.forEach((function(e){t.deleteIndex(e.name),cn(t,e)})),e.del.forEach((function(e){return t.deleteIndex(e)}))}));var u=e._cfg.contentUpgrade;if(u&&e._cfg.version>i){en(r,l),s._memoizedTables={};var h=w(n);a.del.forEach((function(e){h[e]=t[e]})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],o(h),h),s.schema=h;var d,f=F(u);return f&&ze(),a=Ee.follow((function(){var e;(d=u(s))&&f&&(e=Ve.bind(null,null),d.then(e,e))})),d&&"function"==typeof d.then?Ee.resolve(d):a.then((function(){return d}))}})),u.push((function(t){var n,i,o=e._cfg.dbschema;n=o,i=t,[].slice.call(i.db.objectStoreNames).forEach((function(e){return null==n[e]&&i.db.deleteObjectStore(e)})),nn(r,[r.Transaction.prototype]),tn(r,[r.Transaction.prototype],r._storeNames,r._dbSchema),s.schema=r._dbSchema})),u.push((function(t){r.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(r.idbdb.version/10)===e._cfg.version?(r.idbdb.deleteObjectStore("$meta"),delete r._dbSchema.$meta,r._storeNames=r._storeNames.filter((function(e){return"$meta"!==e}))):t.objectStore("$meta").put(e._cfg.version,"version"))}))})),function e(){return u.length?Ee.resolve(u.shift()(s.idbtrans)).then(e):Ee.resolve()}().then((function(){un(c,l)}))):Ee.resolve();var r,i,s,l,u,c})).catch(s)):(o(i).forEach((function(e){ln(n,e,i[e].primKey,i[e].indexes)})),en(e,n),void Ee.follow((function(){return e.on.populate.fire(a)})).catch(s));var r,u}))}function an(e,t){un(e._dbSchema,t),t.db.version%10!=0||t.objectStoreNames.contains("$meta")||t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=hn(0,e.idbdb,t);dn(e,e._dbSchema,t);for(var r=0,i=sn(n,e._dbSchema).change;r<i.length;r++){var o=function(e){if(e.change.length||e.recreate)return{value:void 0};var n=t.objectStore(e.name);e.add.forEach((function(e){cn(n,e)}))}(i[r]);if("object"==typeof o)return o.value}}function sn(e,t){var n,r={del:[],add:[],change:[]};for(n in e)t[n]||r.del.push(n);for(n in t){var i=e[n],o=t[n];if(i){var a={name:n,def:o,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(o.primKey.keyPath||"")||i.primKey.auto!==o.primKey.auto)a.recreate=!0,r.change.push(a);else{var s=i.idxByName,l=o.idxByName,u=void 0;for(u in s)l[u]||a.del.push(u);for(u in l){var c=s[u],h=l[u];c?c.src!==h.src&&a.change.push(h):a.add.push(h)}(0<a.del.length||0<a.add.length||0<a.change.length)&&r.change.push(a)}}else r.add.push([n,o])}return r}function ln(e,t,n,r){var i=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach((function(e){return cn(i,e)})),i}function un(e,t){o(e).forEach((function(n){t.db.objectStoreNames.contains(n)||ln(t,n,e[n].primKey,e[n].indexes)}))}function cn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function hn(e,t,n){var r={};return g(t.objectStoreNames,0).forEach((function(e){for(var t=n.objectStore(e),i=Gt(Wt(s=t.keyPath),s||"",!0,!1,!!t.autoIncrement,s&&"string"!=typeof s,!0),o=[],a=0;a<t.indexNames.length;++a){var s=(l=t.index(t.indexNames[a])).keyPath,l=Gt(l.name,s,!!l.unique,!!l.multiEntry,!1,s&&"string"!=typeof s,!1);o.push(l)}r[e]=Xt(e,i,o)})),r}function dn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var a=r[o],s=n.objectStore(a);e._hasGetAll="getAll"in s;for(var l=0;l<s.indexNames.length;++l){var u=s.indexNames[l],c=s.index(u).keyPath,h="string"==typeof c?c:"["+g(c).join("+")+"]";!t[a]||(c=t[a].idxByName[h])&&(c.name=u,delete t[a].idxByName[h],t[a].idxByName[u]=c)}}"undefined"!=typeof navigator&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&i.WorkerGlobalScope&&i instanceof i.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function fn(e){return e.split(",").map((function(e,t){var n=(e=e.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return Gt(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),a(r),0===t)}))}var pn=(vn.prototype._parseStoresSpec=function(e,t){o(e).forEach((function(n){if(null!==e[n]){var r=fn(e[n]),i=r.shift();if(i.unique=!0,i.multi)throw new X.Schema("Primary key cannot be multi-valued");r.forEach((function(e){if(e.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string")})),t[n]=Xt(n,i,r)}}))},vn.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e,e=t._versions;var n={},r={};return e.forEach((function(e){s(n,e._cfg.storesSource),r=e._cfg.dbschema={},e._parseStoresSpec(n,r)})),t._dbSchema=r,nn(t,[t._allTables,t,t.Transaction.prototype]),tn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],o(r),r),t._storeNames=o(r),this},vn.prototype.upgrade=function(e){return this._cfg.contentUpgrade=re(this._cfg.contentUpgrade||q,e),this},vn);function vn(){}function mn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new tr(nt,{addons:[],indexedDB:e,IDBKeyRange:t})).version(1).stores({dbnames:"name"}),n.table("dbnames")}function gn(e){return e&&"function"==typeof e.databases}function yn(e){return je((function(){return ye.letThrough=!0,e()}))}function bn(e){return!("from"in e)}var _n=function e(t,n){if(!this){var r=new e;return t&&"d"in t&&s(r,t),r}s(this,arguments.length?{d:1,from:t,to:1<arguments.length?n:t}:{d:0})};function xn(e,t,n){var r=ut(t,n);if(!isNaN(r)){if(0<r)throw RangeError();if(bn(e))return s(e,{from:t,to:n,d:1});var i=e.l;if(r=e.r,ut(n,e.from)<0)return i?xn(i,t,n):e.l={from:t,to:n,d:1,l:null,r:null},Sn(e);if(0<ut(t,e.to))return r?xn(r,t,n):e.r={from:t,to:n,d:1,l:null,r:null},Sn(e);ut(t,e.from)<0&&(e.from=t,e.l=null,e.d=r?r.d+1:1),0<ut(n,e.to)&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1),n=!e.r,i&&!e.l&&En(e,i),r&&n&&En(e,r)}}function En(e,t){bn(t)||function e(t,n){var r=n.from,i=n.to,o=n.l;n=n.r,xn(t,r,i),o&&e(t,o),n&&e(t,n)}(e,t)}function wn(e,t){var n=Tn(t),r=n.next();if(r.done)return!1;for(var i=r.value,o=Tn(e),a=o.next(i.from),s=a.value;!r.done&&!a.done;){if(ut(s.from,i.to)<=0&&0<=ut(s.to,i.from))return!0;ut(i.from,s.from)<0?i=(r=n.next(s.from)).value:s=(a=o.next(i.from)).value}return!1}function Tn(e){var t=bn(e)?null:{s:0,n:e};return{next:function(e){for(var n=0<arguments.length;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&ut(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||ut(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function Sn(e){var n,r,i=((null===(n=e.r)||void 0===n?void 0:n.d)||0)-((null===(r=e.l)||void 0===r?void 0:r.d)||0),o=1<i?"r":i<-1?"l":"";o&&(n="r"==o?"l":"r",r=t({},e),i=e[o],e.from=i.from,e.to=i.to,e[o]=i[o],r[o]=i[n],(e[n]=r).d=kn(r)),e.d=kn(e)}function kn(e){var t=e.r;return e=e.l,(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}function Cn(e,t){return o(t).forEach((function(n){e[n]?En(e[n],t[n]):e[n]=function e(t){var n,r,i={};for(n in t)c(t,n)&&(r=t[n],i[n]=!r||"object"!=typeof r||C.has(r.constructor)?r:e(r));return i}(t[n])})),e}function An(e,t){return e.all||t.all||Object.keys(e).some((function(n){return t[n]&&wn(t[n],e[n])}))}h(_n.prototype,((B={add:function(e){return En(this,e),this},addKey:function(e){return xn(this,e,e),this},addKeys:function(e){var t=this;return e.forEach((function(e){return xn(t,e,e)})),this},hasKey:function(e){var t=Tn(this).next(e).value;return t&&ut(t.from,e)<=0&&0<=ut(t.to,e)}})[M]=function(){return Tn(this)},B));var In={},On={},Pn=!1;function Mn(e){Cn(On,e),Pn||(Pn=!0,setTimeout((function(){Pn=!1,Rn(On,!(On={}))}),0))}function Rn(e,t){void 0===t&&(t=!1);var n=new Set;if(e.all)for(var r=0,i=Object.values(In);r<i.length;r++)Nn(a=i[r],e,n,t);else for(var o in e){var a,s=/^idb\:\/\/(.*)\/(.*)\//.exec(o);s&&(o=s[1],s=s[2],(a=In["idb://".concat(o,"/").concat(s)])&&Nn(a,e,n,t))}n.forEach((function(e){return e()}))}function Nn(e,t,n,r){for(var i=[],o=0,a=Object.entries(e.queries.query);o<a.length;o++){for(var s=a[o],l=s[0],u=[],c=0,h=s[1];c<h.length;c++){var d=h[c];An(t,d.obsSet)?d.subscribers.forEach((function(e){return n.add(e)})):r&&u.push(d)}r&&i.push([l,u])}if(r)for(var f=0,p=i;f<p.length;f++){var v=p[f];l=v[0],u=v[1],e.queries.query[l]=u}}function Dn(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then((function(){return t.dbOpenError?$e(t.dbOpenError):e}));t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,i=Math.round(10*e.verno),a=!1;function s(){if(t.openCanceller!==r)throw new X.DatabaseClosed("db.open() was cancelled")}function l(){return new Ee((function(r,u){if(s(),!n)throw new X.MissingAPI;var c=e.name,f=t.autoSchema||!i?n.open(c):n.open(c,i);if(!f)throw new X.MissingAPI;f.onerror=Ft(u),f.onblocked=Ne(e._fireOnBlocked),f.onupgradeneeded=Ne((function(r){var i;h=f.transaction,t.autoSchema&&!e._options.allowEmptyDB?(f.onerror=Bt,h.abort(),f.result.close(),(i=n.deleteDatabase(c)).onsuccess=i.onerror=Ne((function(){u(new X.NoSuchDatabase("Database ".concat(c," doesnt exist")))}))):(h.onerror=Ft(u),r=r.oldVersion>Math.pow(2,62)?0:r.oldVersion,d=r<1,e.idbdb=f.result,a&&an(e,h),on(e,r/10,h,u))}),u),f.onsuccess=Ne((function(){h=null;var n,s,u,p,v,m=e.idbdb=f.result,y=g(m.objectStoreNames);if(0<y.length)try{var b=m.transaction(1===(p=y).length?p[0]:p,"readonly");if(t.autoSchema)s=m,u=b,(n=e).verno=s.version/10,u=n._dbSchema=hn(0,s,u),n._storeNames=g(s.objectStoreNames,0),tn(n,[n._allTables],o(u),u);else if(dn(e,e._dbSchema,b),((v=sn(hn(0,(v=e).idbdb,b),v._dbSchema)).add.length||v.change.some((function(e){return e.add.length||e.change.length})))&&!a)return m.close(),i=m.version+1,a=!0,r(l());en(e,b)}catch(n){}tt.push(e),m.onversionchange=Ne((function(n){t.vcFired=!0,e.on("versionchange").fire(n)})),m.onclose=Ne((function(t){e.on("close").fire(t)})),d&&(v=e._deps,b=c,m=v.indexedDB,v=v.IDBKeyRange,gn(m)||b===nt||mn(m,v).put({name:b}).catch(q)),r()}),u)})).catch((function(e){switch(null==e?void 0:e.name){case"UnknownError":if(0<t.PR1398_maxLoop)return t.PR1398_maxLoop--,l();break;case"VersionError":if(0<i)return i=0,l()}return Ee.reject(e)}))}var u,c=t.dbReadyResolve,h=null,d=!1;return Ee.race([r,("undefined"==typeof navigator?Ee.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(e){function t(){return indexedDB.databases().finally(e)}u=setInterval(t,100),t()})).finally((function(){return clearInterval(u)})):Promise.resolve()).then(l)]).then((function(){return s(),t.onReadyBeingFired=[],Ee.resolve(yn((function(){return e.on.ready.fire(e.vip)}))).then((function n(){if(0<t.onReadyBeingFired.length){var r=t.onReadyBeingFired.reduce(re,q);return t.onReadyBeingFired=[],Ee.resolve(yn((function(){return r(e.vip)}))).then(n)}}))})).finally((function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)})).catch((function(n){t.dbOpenError=n;try{h&&h.abort()}catch(n){}return r===t.openCanceller&&e._close(),$e(n)})).finally((function(){t.openComplete=!0,c()})).then((function(){var t;return d&&(t={},e.tables.forEach((function(n){n.schema.indexes.forEach((function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new _n(-1/0,[[[]]]))})),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new _n(-1/0,[[[]]])})),jt(Ut).fire(t),Rn(t,!0)),e}))}function Ln(e){function t(t){return e.next(t)}var n=i(t),r=i((function(t){return e.throw(t)}));function i(e){return function(t){var i=e(t);return t=i.value,i.done?t:t&&"function"==typeof t.then?t.then(n,r):a(t)?Promise.all(t).then(n,r):n(t)}}return i(t)()}function Fn(e,t,n){for(var r=a(e)?e.slice():[e],i=0;i<n;++i)r.push(t);return r}var Bn={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(e){return t(t({},e),{table:function(n){var r=e.table(n),i=r.schema,o={},a=[];function s(e,n,r){var i=$t(e),l=o[i]=o[i]||[],u=null==e?0:"string"==typeof e?1:e.length,c=0<n;return c=t(t({},r),{name:c?"".concat(i,"(virtual-from:").concat(r.name,")"):r.name,lowLevelIndex:r,isVirtual:c,keyTail:n,keyLength:u,extractKey:Kt(e),unique:!c&&r.unique}),l.push(c),c.isPrimaryKey||a.push(c),1<u&&s(2===u?e[0]:e.slice(0,u-1),n+1,r),l.sort((function(e,t){return e.keyTail-t.keyTail})),c}n=s(i.primaryKey.keyPath,0,i.primaryKey),o[":id"]=[n];for(var l=0,u=i.indexes;l<u.length;l++){var c=u[l];s(c.keyPath,0,c)}function h(n){var r,i=n.query.index;return i.isVirtual?t(t({},n),{query:{index:i.lowLevelIndex,range:(r=n.query.range,i=i.keyTail,{type:1===r.type?2:r.type,lower:Fn(r.lower,r.lowerOpen?e.MAX_KEY:e.MIN_KEY,i),lowerOpen:!0,upper:Fn(r.upper,r.upperOpen?e.MIN_KEY:e.MAX_KEY,i),upperOpen:!0})}}):n}return t(t({},r),{schema:t(t({},i),{primaryKey:n,indexes:a,getIndexByKeyPath:function(e){return(e=o[$t(e)])&&e[0]}}),count:function(e){return r.count(h(e))},query:function(e){return r.query(h(e))},openCursor:function(t){var n=t.query.index,i=n.keyTail,o=n.isVirtual,a=n.keyLength;return o?r.openCursor(h(t)).then((function(e){return e&&s(e)})):r.openCursor(t);function s(n){return Object.create(n,{continue:{value:function(r){null!=r?n.continue(Fn(r,t.reverse?e.MAX_KEY:e.MIN_KEY,i)):t.unique?n.continue(n.key.slice(0,a).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,i)):n.continue()}},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Fn(t,e.MAX_KEY,i),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return 1===a?e[0]:e.slice(0,a)}},value:{get:function(){return n.value}}})}}})}})}};function Un(e,t,n,r){return n=n||{},r=r||"",o(e).forEach((function(i){var o,a,s;c(t,i)?(o=e[i],a=t[i],"object"==typeof o&&"object"==typeof a&&o&&a?(s=P(o))!==P(a)?n[r+i]=t[i]:"Object"===s?Un(o,a,n,r+i+"."):o!==a&&(n[r+i]=t[i]):o!==a&&(n[r+i]=t[i])):n[r+i]=void 0})),o(t).forEach((function(i){c(e,i)||(n[r+i]=t[i])})),n}function Hn(e,t){return"delete"===t.type?t.keys:t.keys||t.values.map(e.extractKey)}var jn={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return t(t({},e),{table:function(n){var i=e.table(n),o=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=ye.trans,s=a.table(n).hook,l=s.deleting,u=s.creating,h=s.updating;switch(e.type){case"add":if(u.fire===q)break;return a._promise("readwrite",(function(){return d(e)}),!0);case"put":if(u.fire===q&&h.fire===q)break;return a._promise("readwrite",(function(){return d(e)}),!0);case"delete":if(l.fire===q)break;return a._promise("readwrite",(function(){return d(e)}),!0);case"deleteRange":if(l.fire===q)break;return a._promise("readwrite",(function(){return function e(n,r,a){return i.query({trans:n,values:!1,query:{index:o,range:r},limit:a}).then((function(i){var o=i.result;return d({type:"delete",keys:o,trans:n}).then((function(i){return 0<i.numFailures?Promise.reject(i.failures[0]):o.length<a?{failures:[],numFailures:0,lastResult:void 0}:e(n,t(t({},r),{lower:o[o.length-1],lowerOpen:!0}),a)}))}))}(e.trans,e.range,1e4)}),!0)}return i.mutate(e);function d(e){var n,a,s,d=ye.trans,f=e.keys||Hn(o,e);if(!f)throw new Error("Keys missing");return"delete"!==(e="add"===e.type||"put"===e.type?t(t({},e),{keys:f}):t({},e)).type&&(e.values=r([],e.values,!0)),e.keys&&(e.keys=r([],e.keys,!0)),n=i,s=f,("add"===(a=e).type?Promise.resolve([]):n.getMany({trans:a.trans,keys:s,cache:"immutable"})).then((function(t){var n=f.map((function(n,r){var i,a,s,f=t[r],p={onerror:null,onsuccess:null};return"delete"===e.type?l.fire.call(p,n,f,d):"add"===e.type||void 0===f?(i=u.fire.call(p,n,e.values[r],d),null==n&&null!=i&&(e.keys[r]=n=i,o.outbound||E(e.values[r],o.keyPath,n))):(i=Un(f,e.values[r]),(a=h.fire.call(p,i,n,f,d))&&(s=e.values[r],Object.keys(a).forEach((function(e){c(s,e)?s[e]=a[e]:E(s,e,a[e])})))),p}));return i.mutate(e).then((function(r){for(var i=r.failures,o=r.results,a=r.numFailures,s=(r=r.lastResult,0);s<f.length;++s){var l=(o||f)[s],u=n[s];null==l?u.onerror&&u.onerror(i[s]):u.onsuccess&&u.onsuccess("put"===e.type&&t[s]?e.values[s]:l)}return{failures:i,results:o,numFailures:a,lastResult:r}})).catch((function(e){return n.forEach((function(t){return t.onerror&&t.onerror(e)})),Promise.reject(e)}))}))}}})}})}};function zn(e,t,n){try{if(!t)return null;if(t.keys.length<e.length)return null;for(var r=[],i=0,o=0;i<t.keys.length&&o<e.length;++i)0===ut(t.keys[i],e[o])&&(r.push(n?I(t.values[i]):t.values[i]),++o);return r.length===e.length?r:null}catch(e){return null}}var Vn={stack:"dbcore",level:-1,create:function(e){return{table:function(n){var r=e.table(n);return t(t({},r),{getMany:function(e){if(!e.cache)return r.getMany(e);var t=zn(e.keys,e.trans._cache,"clone"===e.cache);return t?Ee.resolve(t):r.getMany(e).then((function(t){return e.trans._cache={keys:e.keys,values:"clone"===e.cache?I(t):t},t}))},mutate:function(e){return"add"!==e.type&&(e.trans._cache=null),r.mutate(e)}})}}}};function Gn(e,t){return"readonly"===e.trans.mode&&!!e.subscr&&!e.trans.explicit&&"disabled"!==e.trans.db._options.cache&&!t.schema.primaryKey.outbound}function Wn(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Xn={stack:"dbcore",level:0,name:"Observability",create:function(e){var n=e.schema.name,r=new _n(e.MIN_KEY,e.MAX_KEY);return t(t({},e),{transaction:function(t,n,r){if(ye.subscr&&"readonly"!==n)throw new X.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(ye.querier));return e.transaction(t,n,r)},table:function(i){var s=e.table(i),l=s.schema,u=l.primaryKey,c=l.indexes,h=u.extractKey,d=u.outbound,f=u.autoIncrement&&c.filter((function(e){return e.compound&&e.keyPath.includes(u.keyPath)})),p=t(t({},s),{mutate:function(e){function t(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),p[e]||(p[e]=new _n)}var o,c,h,d=e.trans,p=e.mutatedParts||(e.mutatedParts={}),v=t(""),m=t(":dels"),g=e.type,y="deleteRange"===e.type?[e.range]:"delete"===e.type?[e.keys]:e.values.length<50?[Hn(u,e).filter((function(e){return e})),e.values]:[],b=y[0],_=y[1];return y=e.trans._cache,a(b)?(v.addKeys(b),(y="delete"===g||b.length===_.length?zn(b,y):null)||m.addKeys(b),(y||_)&&(o=t,c=y,h=_,l.indexes.forEach((function(e){var t=o(e.name||"");function n(t){return null!=t?e.extractKey(t):null}function r(n){return e.multiEntry&&a(n)?n.forEach((function(e){return t.addKey(e)})):t.addKey(n)}(c||h).forEach((function(e,t){var i=c&&n(c[t]);0!==ut(i,t=h&&n(h[t]))&&(null!=i&&r(i),null!=t&&r(t))}))})))):b?(_={from:b.lower,to:b.upper},m.add(_),v.add(_)):(v.add(r),m.add(r),l.indexes.forEach((function(e){return t(e.name).add(r)}))),s.mutate(e).then((function(n){return!b||"add"!==e.type&&"put"!==e.type||(v.addKeys(n.results),f&&f.forEach((function(r){var i=e.values.map((function(e){return r.extractKey(e)})),o=r.keyPath.findIndex((function(e){return e===u.keyPath}));n.results.forEach((function(e){return i[o]=e})),t(r.name).addKeys(i)}))),d.mutatedParts=Cn(d.mutatedParts||{},p),n}))}}),v=(c=function(t){t=(n=t.query).index;var n=n.range;return[t,new _n(null!==(t=n.lower)&&void 0!==t?t:e.MIN_KEY,null!==(n=n.upper)&&void 0!==n?n:e.MAX_KEY)]},{get:function(e){return[u,new _n(e.key)]},getMany:function(e){return[u,(new _n).addKeys(e.keys)]},count:c,query:c,openCursor:c});return o(v).forEach((function(e){p[e]=function(o){var a=!!(p=ye.subscr),l=Gn(ye,s)&&Wn(e,o)?o.obsSet={}:p;if(a){var u=function(e){return e="idb://".concat(n,"/").concat(i,"/").concat(e),l[e]||(l[e]=new _n)},c=u(""),f=u(":dels"),p=(a=(p=v[e](o))[0],p[1]);if(("query"===e&&a.isPrimaryKey&&!o.values?f:u(a.name||"")).add(p),!a.isPrimaryKey){if("count"!==e){var m="query"===e&&d&&o.values&&s.query(t(t({},o),{values:!1}));return s[e].apply(this,arguments).then((function(t){if("query"===e){if(d&&o.values)return m.then((function(e){return e=e.result,c.addKeys(e),t}));var n=o.values?t.result.map(h):t.result;(o.values?c:f).addKeys(n)}else if("openCursor"===e){var r=t,i=o.values;return r&&Object.create(r,{key:{get:function(){return f.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return f.addKey(e),e}},value:{get:function(){return i&&c.addKey(r.primaryKey),r.value}}})}return t}))}f.add(r)}}return s[e].apply(this,arguments)}})),p}})}};function Yn(e,n,r){if(0===r.numFailures)return n;if("deleteRange"===n.type)return null;var i=n.keys?n.keys.length:"values"in n&&n.values?n.values.length:1;return r.numFailures===i?null:(n=t({},n),a(n.keys)&&(n.keys=n.keys.filter((function(e,t){return!(t in r.failures)}))),"values"in n&&a(n.values)&&(n.values=n.values.filter((function(e,t){return!(t in r.failures)}))),n)}function Kn(e,t){return n=e,(void 0===(r=t).lower||(r.lowerOpen?0<ut(n,r.lower):0<=ut(n,r.lower)))&&(void 0===t.upper||(t.upperOpen?ut(e,t.upper)<0:ut(e,t.upper)<=0));var n,r}function qn(e,t,n,r,i,o){if(!n||0===n.length)return e;var s=t.query.index,l=s.multiEntry,u=t.query.range,c=r.schema.primaryKey.extractKey,h=s.extractKey,d=(s.lowLevelIndex||s).extractKey;return n=n.reduce((function(e,n){var r=e,i=[];if("add"===n.type||"put"===n.type)for(var o=new _n,s=n.values.length-1;0<=s;--s){var d,f=n.values[s],p=c(f);o.hasKey(p)||(d=h(f),(l&&a(d)?d.some((function(e){return Kn(e,u)})):Kn(d,u))&&(o.addKey(p),i.push(f)))}switch(n.type){case"add":r=e.concat(t.values?i:i.map((function(e){return c(e)})));break;case"put":var v=(new _n).addKeys(n.values.map((function(e){return c(e)})));r=e.filter((function(e){return!v.hasKey(t.values?c(e):e)})).concat(t.values?i:i.map((function(e){return c(e)})));break;case"delete":var m=(new _n).addKeys(n.keys);r=e.filter((function(e){return!m.hasKey(t.values?c(e):e)}));break;case"deleteRange":var g=n.range;r=e.filter((function(e){return!Kn(c(e),g)}))}return r}),e),n===e?e:(n.sort((function(e,t){return ut(d(e),d(t))||ut(c(e),c(t))})),t.limit&&t.limit<1/0&&(n.length>t.limit?n.length=t.limit:e.length===t.limit&&n.length<t.limit&&(i.dirty=!0)),o?Object.freeze(n):n)}function Zn(e,t){return 0===ut(e.lower,t.lower)&&0===ut(e.upper,t.upper)&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function $n(e,t){return function(e,t,n,r){if(void 0===e)return void 0!==t?-1:0;if(void 0===t)return 1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return 1;if(r)return-1}return t}(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&0<=function(e,t,n,r){if(void 0===e)return void 0!==t?1:0;if(void 0===t)return-1;if(0===(t=ut(e,t))){if(n&&r)return 0;if(n)return-1;if(r)return 1}return t}(e.upper,t.upper,e.upperOpen,t.upperOpen)}function Qn(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",(function(){var r,i;e.subscribers.delete(n),0===e.subscribers.size&&(r=e,i=t,setTimeout((function(){0===r.subscribers.size&&N(i,r)}),3e3))}))}var Jn={stack:"dbcore",level:0,name:"Cache",create:function(e){var n=e.schema.name;return t(t({},e),{transaction:function(t,r,i){var o,a,s=e.transaction(t,r,i);return"readwrite"===r&&(a=(o=new AbortController).signal,i=function(i){return function(){if(o.abort(),"readwrite"===r){for(var a=new Set,l=0,u=t;l<u.length;l++){var c=u[l],h=In["idb://".concat(n,"/").concat(c)];if(h){var d=e.table(c),f=h.optimisticOps.filter((function(e){return e.trans===s}));if(s._explicit&&i&&s.mutatedParts)for(var p=0,v=Object.values(h.queries.query);p<v.length;p++)for(var m=0,g=(_=v[p]).slice();m<g.length;m++)An((x=g[m]).obsSet,s.mutatedParts)&&(N(_,x),x.subscribers.forEach((function(e){return a.add(e)})));else if(0<f.length){h.optimisticOps=h.optimisticOps.filter((function(e){return e.trans!==s}));for(var y=0,b=Object.values(h.queries.query);y<b.length;y++)for(var _,x,E,w=0,T=(_=b[y]).slice();w<T.length;w++)null!=(x=T[w]).res&&s.mutatedParts&&(i&&!x.dirty?(E=Object.isFrozen(x.res),E=qn(x.res,x.req,f,d,x,E),x.dirty?(N(_,x),x.subscribers.forEach((function(e){return a.add(e)}))):E!==x.res&&(x.res=E,x.promise=Ee.resolve({result:E}))):(x.dirty&&N(_,x),x.subscribers.forEach((function(e){return a.add(e)}))))}}}a.forEach((function(e){return e()}))}}},s.addEventListener("abort",i(!1),{signal:a}),s.addEventListener("error",i(!1),{signal:a}),s.addEventListener("complete",i(!0),{signal:a})),s},table:function(r){var i=e.table(r),o=i.schema.primaryKey;return t(t({},i),{mutate:function(e){var a=ye.trans;if(o.outbound||"disabled"===a.db._options.cache||a.explicit)return i.mutate(e);var s=In["idb://".concat(n,"/").concat(r)];return s?(a=i.mutate(e),"add"!==e.type&&"put"!==e.type||!(50<=e.values.length||Hn(o,e).some((function(e){return null==e})))?(s.optimisticOps.push(e),e.mutatedParts&&Mn(e.mutatedParts),a.then((function(t){0<t.numFailures&&(N(s.optimisticOps,e),(t=Yn(0,e,t))&&s.optimisticOps.push(t),e.mutatedParts&&Mn(e.mutatedParts))})),a.catch((function(){N(s.optimisticOps,e),e.mutatedParts&&Mn(e.mutatedParts)}))):a.then((function(n){var r=Yn(0,t(t({},e),{values:e.values.map((function(e,r){var i;return E(e=null!==(i=o.keyPath)&&void 0!==i&&i.includes(".")?I(e):t({},e),o.keyPath,n.results[r]),e}))}),n);s.optimisticOps.push(r),queueMicrotask((function(){return e.mutatedParts&&Mn(e.mutatedParts)}))})),a):i.mutate(e)},query:function(e){if(!Gn(ye,i)||!Wn("query",e))return i.query(e);var t="immutable"===(null===(s=ye.trans)||void 0===s?void 0:s.db._options.cache),o=(u=ye).requery,a=u.signal,s=function(e,t,n,r){var i=In["idb://".concat(e,"/").concat(t)];if(!i)return[];if(!(t=i.queries[n]))return[null,!1,i,null];var o=t[(r.query?r.query.index.name:null)||""];if(!o)return[null,!1,i,null];switch(n){case"query":var a=o.find((function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Zn(e.req.query.range,r.query.range)}));return a?[a,!0,i,o]:[o.find((function(e){return("limit"in e.req?e.req.limit:1/0)>=r.limit&&(!r.values||e.req.values)&&$n(e.req.query.range,r.query.range)})),!1,i,o];case"count":return a=o.find((function(e){return Zn(e.req.query.range,r.query.range)})),[a,!!a,i,o]}}(n,r,"query",e),l=s[0],u=s[1],c=s[2],h=s[3];return l&&u?l.obsSet=e.obsSet:(u=i.query(e).then((function(e){var n=e.result;if(l&&(l.res=n),t){for(var r=0,i=n.length;r<i;++r)Object.freeze(n[r]);Object.freeze(n)}else e.result=I(n);return e})).catch((function(e){return h&&l&&N(h,l),Promise.reject(e)})),l={obsSet:e.obsSet,promise:u,subscribers:new Set,type:"query",req:e,dirty:!1},h?h.push(l):(h=[l],(c=c||(In["idb://".concat(n,"/").concat(r)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[e.query.index.name||""]=h)),Qn(l,h,o,a),l.promise.then((function(n){return{result:qn(n.result,e,null==c?void 0:c.optimisticOps,i,l,t)}}))}})}})}};function er(e,t){return new Proxy(e,{get:function(e,n,r){return"db"===n?t:Reflect.get(e,n,r)}})}var tr=(nr.prototype.version=function(e){if(isNaN(e)||e<.1)throw new X.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter((function(t){return t._cfg.version===e}))[0];return n||(n=new this.Version(e),t.push(n),t.sort(rn),n.stores({}),this._state.autoSchema=!1,n)},nr.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||ye.letThrough||this._vip)?e():new Ee((function(e,n){if(t._state.openComplete)return n(new X.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen)return void n(new X.DatabaseClosed);t.open().catch(q)}t._state.dbReadyPromise.then(e,n)})).then(e)},nr.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,i=e.name;return i&&this.unuse({stack:t,name:i}),(e=this._middlewares[t]||(this._middlewares[t]=[])).push({stack:t,create:n,level:null==r?10:r,name:i}),e.sort((function(e,t){return e.level-t.level})),this},nr.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter((function(e){return r?e.create!==r:!!n&&e.name!==n}))),this},nr.prototype.open=function(){var e=this;return Ke(ge,(function(){return Dn(e)}))},nr.prototype._close=function(){var e=this._state,t=tt.indexOf(this);if(0<=t&&tt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(t){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Ee((function(t){e.dbReadyResolve=t})),e.openCanceller=new Ee((function(t,n){e.cancelOpen=n})))},nr.prototype.close=function(e){var t=(void 0===e?{disableAutoOpen:!0}:e).disableAutoOpen;e=this._state,t?(e.isBeingOpened&&e.cancelOpen(new X.DatabaseClosed),this._close(),e.autoOpen=!1,e.dbOpenError=new X.DatabaseClosed):(this._close(),e.autoOpen=this._options.autoOpen||e.isBeingOpened,e.openComplete=!1,e.dbOpenError=null)},nr.prototype.delete=function(e){var t=this;void 0===e&&(e={disableAutoOpen:!0});var n=0<arguments.length&&"object"!=typeof arguments[0],r=this._state;return new Ee((function(i,o){function a(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ne((function(){var e,n,r;e=t._deps,n=t.name,r=e.indexedDB,e=e.IDBKeyRange,gn(r)||n===nt||mn(r,e).delete(n).catch(q),i()})),n.onerror=Ft(o),n.onblocked=t._fireOnBlocked}if(n)throw new X.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(a):a()}))},nr.prototype.backendDB=function(){return this.idbdb},nr.prototype.isOpen=function(){return null!==this.idbdb},nr.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&"DatabaseClosed"===e.name},nr.prototype.hasFailed=function(){return null!==this._state.dbOpenError},nr.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(nr.prototype,"tables",{get:function(){var e=this;return o(this._allTables).map((function(t){return e._allTables[t]}))},enumerable:!1,configurable:!0}),nr.prototype.transaction=function(){var e=function(e,t,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[e,S(i),n]}.apply(this,arguments);return this._transaction.apply(this,e)},nr.prototype._transaction=function(e,t,n){var r=this,i=ye.trans;i&&i.db===this&&-1===e.indexOf("!")||(i=null);var o,a,s=-1!==e.indexOf("?");e=e.replace("!","").replace("?","");try{if(a=t.map((function(e){if("string"!=typeof(e=e instanceof r.Table?e.name:e))throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e})),"r"==e||e===rt)o=rt;else{if("rw"!=e&&e!=it)throw new X.InvalidArgument("Invalid transaction mode: "+e);o=it}if(i){if(i.mode===rt&&o===it){if(!s)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach((function(e){if(i&&-1===i.storeNames.indexOf(e)){if(!s)throw new X.SubTransaction("Table "+e+" not included in parent transaction.");i=null}})),s&&i&&!i.active&&(i=null)}}catch(n){return i?i._promise(null,(function(e,t){t(n)})):$e(n)}var l=function e(t,n,r,i,o){return Ee.resolve().then((function(){var a=ye.transless||ye,s=t._createTransaction(n,r,t._dbSchema,i);if(s.explicit=!0,a={trans:s,transless:a},i)s.idbtrans=i.idbtrans;else try{s.create(),s.idbtrans._explicit=!0,t._state.PR1398_maxLoop=3}catch(a){return a.name===G.InvalidState&&t.isOpen()&&0<--t._state.PR1398_maxLoop?(t.close({disableAutoOpen:!1}),t.open().then((function(){return e(t,n,r,null,o)}))):$e(a)}var l,u=F(o);return u&&ze(),a=Ee.follow((function(){var e;(l=o.call(s,s))&&(u?(e=Ve.bind(null,null),l.then(e,e)):"function"==typeof l.next&&"function"==typeof l.throw&&(l=Ln(l)))}),a),(l&&"function"==typeof l.then?Ee.resolve(l).then((function(e){return s.active?e:$e(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):a.then((function(){return l}))).then((function(e){return i&&s._resolve(),s._completion.then((function(){return e}))})).catch((function(e){return s._reject(e),$e(e)}))}))}.bind(null,this,o,a,i,n);return i?i._promise(o,l,"lock"):ye.trans?Ke(ye.transless,(function(){return r._whenReady(l)})):this._whenReady(l)},nr.prototype.table=function(e){if(!c(this._allTables,e))throw new X.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},nr);function nr(e,n){var r=this;this._middlewares={},this.verno=0;var i=nr.dependencies;this._options=n=t({addons:nr.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange},i=n.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var o,a,s,l,u,c={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:q,dbReadyPromise:null,cancelOpen:q,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};c.dbReadyPromise=new Ee((function(e){c.dbReadyResolve=e})),c.openCanceller=new Ee((function(e,t){c.cancelOpen=t})),this._state=c,this.name=e,this.on=pt(this,"populate","blocked","versionchange","close",{ready:[re,q]}),this.on.ready.subscribe=y(this.on.ready.subscribe,(function(e){return function(t,n){nr.vip((function(){var i,o=r._state;o.openComplete?(o.dbOpenError||Ee.resolve().then(t),n&&e(t)):o.onReadyBeingFired?(o.onReadyBeingFired.push(t),n&&e(t)):(e(t),i=r,n||e((function e(){i.on.ready.unsubscribe(t),i.on.ready.unsubscribe(e)})))}))}})),this.Collection=(o=this,vt(St.prototype,(function(e,t){this.db=o;var n=at,r=null;if(t)try{n=t()}catch(e){r=e}var i=e._ctx;e=(t=i.table).hook.reading.fire,this._ctx={table:t,index:i.index,isPrimKey:!i.index||t.schema.primKey.keyPath&&i.index===t.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:e!==Z?e:null}}))),this.Table=(a=this,vt(dt.prototype,(function(e,t,n){this.db=a,this._tx=n,this.name=e,this.schema=t,this.hook=a._allTables[e]?a._allTables[e].hook:pt(null,{creating:[J,q],reading:[$,Z],updating:[te,q],deleting:[ee,q]})}))),this.Transaction=(s=this,vt(zt.prototype,(function(e,t,n,r,i){var o=this;this.db=s,this.mode=e,this.storeNames=t,this.schema=n,this.chromeTransactionDurability=r,this.idbtrans=null,this.on=pt(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ee((function(e,t){o._resolve=e,o._reject=t})),this._completion.then((function(){o.active=!1,o.on.complete.fire()}),(function(e){var t=o.active;return o.active=!1,o.on.error.fire(e),o.parent?o.parent._reject(e):t&&o.idbtrans&&o.idbtrans.abort(),$e(e)}))}))),this.Version=(l=this,vt(pn.prototype,(function(e){this.db=l,this._cfg={version:e,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}}))),this.WhereClause=(u=this,vt(Dt.prototype,(function(e,t,n){if(this.db=u,this._ctx={table:e,index:":id"===t?null:t,or:n},this._cmp=this._ascending=ut,this._descending=function(e,t){return ut(t,e)},this._max=function(e,t){return 0<ut(e,t)?e:t},this._min=function(e,t){return ut(e,t)<0?e:t},this._IDBKeyRange=u._deps.IDBKeyRange,!this._IDBKeyRange)throw new X.MissingAPI}))),this.on("versionchange",(function(e){e.newVersion,r.close({disableAutoOpen:!1})})),this.on("blocked",(function(e){!e.newVersion||(e.newVersion,e.oldVersion)})),this._maxKey=Yt(n.IDBKeyRange),this._createTransaction=function(e,t,n,i){return new r.Transaction(e,t,n,r._options.chromeTransactionDurability,i)},this._fireOnBlocked=function(e){r.on("blocked").fire(e),tt.filter((function(e){return e.name===r.name&&e!==r&&!e._state.vcFired})).map((function(t){return t.on("versionchange").fire(e)}))},this.use(Vn),this.use(Jn),this.use(Xn),this.use(Bn),this.use(jn);var h=new Proxy(this,{get:function(e,t,n){if("_vip"===t)return!0;if("table"===t)return function(e){return er(r.table(e),h)};var i=Reflect.get(e,t,n);return i instanceof dt?er(i,h):"tables"===t?i.map((function(e){return er(e,h)})):"_createTransaction"===t?function(){return er(i.apply(this,arguments),h)}:i}});this.vip=h,i.forEach((function(e){return e(r)}))}B="undefined"!=typeof Symbol&&"observable"in Symbol?Symbol.observable:"@@observable";var rr,ir=(or.prototype.subscribe=function(e,t,n){return this._subscribe(e&&"function"!=typeof e?e:{next:e,error:t,complete:n})},or.prototype[B]=function(){return this},or);function or(e){this._subscribe=e}try{rr={indexedDB:i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB,IDBKeyRange:i.IDBKeyRange||i.webkitIDBKeyRange}}catch(k){rr={indexedDB:null,IDBKeyRange:null}}function ar(e){var t,n=!1,r=new ir((function(r){var i,o=F(e),a=!1,s={},l={},u={get closed(){return a},unsubscribe:function(){a||(a=!0,i&&i.abort(),h&&jt.storagemutated.unsubscribe(f))}};r.start&&r.start(u);var h=!1,d=function(){return Ze(p)},f=function(e){Cn(s,e),An(l,s)&&d()},p=function(){var u,p,v;!a&&rr.indexedDB&&(s={},u={},i&&i.abort(),i=new AbortController,v=function(t){var n=Oe();try{o&&ze();var r=je(e,t);return r=o?r.finally(Ve):r}finally{n&&Pe()}}(p={subscr:u,signal:i.signal,requery:d,querier:e,trans:null}),Promise.resolve(v).then((function(e){n=!0,t=e,a||p.signal.aborted||(s={},function(e){for(var t in e)if(c(e,t))return;return 1}(l=u)||h||(jt(Ut,f),h=!0),Ze((function(){return!a&&r.next&&r.next(e)})))}),(function(e){n=!1,["DatabaseClosedError","AbortError"].includes(null==e?void 0:e.name)||a||Ze((function(){a||r.error&&r.error(e)}))})))};return setTimeout(d,0),u}));return r.hasValue=function(){return n},r.getValue=function(){return t},r}var sr=tr;function lr(e){var t=cr;try{cr=!0,jt.storagemutated.fire(e),Rn(e,!0)}finally{cr=t}}h(sr,t(t({},K),{delete:function(e){return new sr(e,{addons:[]}).delete()},exists:function(e){return new sr(e,{addons:[]}).open().then((function(e){return e.close(),!0})).catch("NoSuchDatabaseError",(function(){return!1}))},getDatabaseNames:function(e){try{return n=(t=sr.dependencies).indexedDB,t=t.IDBKeyRange,(gn(n)?Promise.resolve(n.databases()).then((function(e){return e.map((function(e){return e.name})).filter((function(e){return e!==nt}))})):mn(n,t).toCollection().primaryKeys()).then(e)}catch(e){return $e(new X.MissingAPI)}var t,n},defineClass:function(){return function(e){s(this,e)}},ignoreTransaction:function(e){return ye.trans?Ke(ye.transless,e):e()},vip:yn,async:function(e){return function(){try{var t=Ln(e.apply(this,arguments));return t&&"function"==typeof t.then?t:Ee.resolve(t)}catch(t){return $e(t)}}},spawn:function(e,t,n){try{var r=Ln(e.apply(n,t||[]));return r&&"function"==typeof r.then?r:Ee.resolve(r)}catch(e){return $e(e)}},currentTransaction:{get:function(){return ye.trans||null}},waitFor:function(e,t){return t=Ee.resolve("function"==typeof e?sr.ignoreTransaction(e):e).timeout(t||6e4),ye.trans?ye.trans.waitFor(t):t},Promise:Ee,debug:{get:function(){return ie},set:function(e){oe(e)}},derive:p,extend:s,props:h,override:y,Events:pt,on:jt,liveQuery:ar,extendObservabilitySet:Cn,getByKeyPath:x,setByKeyPath:E,delByKeyPath:function(e,t){"string"==typeof t?E(e,t,void 0):"length"in t&&[].map.call(t,(function(t){E(e,t,void 0)}))},shallowClone:w,deepClone:I,getObjectDiff:Un,cmp:ut,asap:_,minKey:-1/0,addons:[],connections:tt,errnames:G,dependencies:rr,cache:In,semVer:"4.0.8",version:"4.0.8".split(".").map((function(e){return parseInt(e)})).reduce((function(e,t,n){return e+t/Math.pow(10,2*n)}))})),sr.maxKey=Yt(sr.dependencies.IDBKeyRange),"undefined"!=typeof dispatchEvent&&"undefined"!=typeof addEventListener&&(jt(Ut,(function(e){cr||(e=new CustomEvent(Ht,{detail:e}),cr=!0,dispatchEvent(e),cr=!1)})),addEventListener(Ht,(function(e){e=e.detail,cr||lr(e)})));var ur,cr=!1,hr=function(){};return"undefined"!=typeof BroadcastChannel&&((hr=function(){(ur=new BroadcastChannel(Ht)).onmessage=function(e){return e.data&&lr(e.data)}})(),"function"==typeof ur.unref&&ur.unref(),jt(Ut,(function(e){cr||ur.postMessage(e)}))),"undefined"!=typeof addEventListener&&(addEventListener("pagehide",(function(e){if(!tr.disableBfCache&&e.persisted){null!=ur&&ur.close();for(var t=0,n=tt;t<n.length;t++)n[t].close({disableAutoOpen:!1})}})),addEventListener("pageshow",(function(e){!tr.disableBfCache&&e.persisted&&(hr(),lr({all:new _n(-1/0,[[]])}))}))),Ee.rejectionMapper=function(e,t){return!e||e instanceof H||e instanceof TypeError||e instanceof SyntaxError||!e.name||!Y[e.name]?e:(t=new Y[e.name](t||e.message,e),"stack"in e&&f(t,"stack",{get:function(){return this.inner.stack}}),t)},oe(ie),t(tr,Object.freeze({__proto__:null,Dexie:tr,liveQuery:ar,Entity:lt,cmp:ut,PropModSymbol:k,PropModification:wt,replacePrefix:function(e,t){return new wt({replacePrefix:[e,t]})},add:function(e){return new wt({add:e})},remove:function(e){return new wt({remove:e})},default:tr,RangeSet:_n,mergeRanges:En,rangesOverlap:wn}),{default:tr}),tr}()},6583:function(e){"use strict";function t(e,t,r){r=r||2;var o,a,s,l,h,d,p,v=t&&t.length,m=v?t[0]*r:e.length,g=n(e,0,m,r,!0),y=[];if(!g||g.next===g.prev)return y;if(v&&(g=function(e,t,r,i){var o,a,s,l=[];for(o=0,a=t.length;o<a;o++)(s=n(e,t[o]*i,o<a-1?t[o+1]*i:e.length,i,!1))===s.next&&(s.steiner=!0),l.push(f(s));for(l.sort(u),o=0;o<l.length;o++)r=c(l[o],r);return r}(e,t,g,r)),e.length>80*r){o=s=e[0],a=l=e[1];for(var b=r;b<m;b+=r)(h=e[b])<o&&(o=h),(d=e[b+1])<a&&(a=d),h>s&&(s=h),d>l&&(l=d);p=0!==(p=Math.max(s-o,l-a))?32767/p:0}return i(g,y,r,o,a,p,0),y}function n(e,t,n,r,i){var o,a;if(i===k(e,t,n,r)>0)for(o=t;o<n;o+=r)a=w(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=w(o,e[o],e[o+1],a);return a&&g(a,a.next)&&(T(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==m(r.prev,r,r.next))r=r.next;else{if(T(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function i(e,t,n,u,c,h,f){if(e){!f&&h&&function(e,t,n,r){var i=e;do{0===i.z&&(i.z=d(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,a,s,l,u=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(a>1)}(i)}(e,u,c,h);for(var p,v,m=e;e.prev!==e.next;)if(p=e.prev,v=e.next,h?a(e,u,c,h):o(e))t.push(p.i/n|0),t.push(e.i/n|0),t.push(v.i/n|0),T(e),e=v.next,m=v.next;else if((e=v)===m){f?1===f?i(e=s(r(e),t,n),t,n,u,c,h,2):2===f&&l(e,t,n,u,c,h):i(r(e),t,n,u,c,h,1);break}}}function o(e){var t=e.prev,n=e,r=e.next;if(m(t,n,r)>=0)return!1;for(var i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,u=r.y,c=i<o?i<a?i:a:o<a?o:a,h=s<l?s<u?s:u:l<u?l:u,d=i>o?i>a?i:a:o>a?o:a,f=s>l?s>u?s:u:l>u?l:u,v=r.next;v!==t;){if(v.x>=c&&v.x<=d&&v.y>=h&&v.y<=f&&p(i,s,o,l,a,u,v.x,v.y)&&m(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function a(e,t,n,r){var i=e.prev,o=e,a=e.next;if(m(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,h=o.y,f=a.y,v=s<l?s<u?s:u:l<u?l:u,g=c<h?c<f?c:f:h<f?h:f,y=s>l?s>u?s:u:l>u?l:u,b=c>h?c>f?c:f:h>f?h:f,_=d(v,g,t,n,r),x=d(y,b,t,n,r),E=e.prevZ,w=e.nextZ;E&&E.z>=_&&w&&w.z<=x;){if(E.x>=v&&E.x<=y&&E.y>=g&&E.y<=b&&E!==i&&E!==a&&p(s,c,l,h,u,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;if(E=E.prevZ,w.x>=v&&w.x<=y&&w.y>=g&&w.y<=b&&w!==i&&w!==a&&p(s,c,l,h,u,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;E&&E.z>=_;){if(E.x>=v&&E.x<=y&&E.y>=g&&E.y<=b&&E!==i&&E!==a&&p(s,c,l,h,u,f,E.x,E.y)&&m(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;w&&w.z<=x;){if(w.x>=v&&w.x<=y&&w.y>=g&&w.y<=b&&w!==i&&w!==a&&p(s,c,l,h,u,f,w.x,w.y)&&m(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function s(e,t,n){var i=e;do{var o=i.prev,a=i.next.next;!g(o,a)&&y(o,i,i.next,a)&&x(o,a)&&x(a,o)&&(t.push(o.i/n|0),t.push(i.i/n|0),t.push(a.i/n|0),T(i),T(i.next),i=e=a),i=i.next}while(i!==e);return r(i)}function l(e,t,n,o,a,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&v(l,u)){var c=E(l,u);return l=r(l,l.next),c=r(c,c.next),i(l,t,n,o,a,s,0),void i(c,t,n,o,a,s,0)}u=u.next}l=l.next}while(l!==e)}function u(e,t){return e.x-t.x}function c(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var s=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>a&&(a=s,n=r.x<r.next.x?r:r.next,s===i))return n}r=r.next}while(r!==t);if(!n)return null;var l,u=n,c=n.x,d=n.y,f=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&p(o<d?i:a,o,c,d,o<d?a:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),x(r,e)&&(l<f||l===f&&(r.x>n.x||r.x===n.x&&h(n,r)))&&(n=r,f=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var i=E(n,e);return r(i,i.next),r(n,n.next)}function h(e,t){return m(e.prev,e,t.prev)<0&&m(t.next,e,e.next)<0}function d(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function f(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function p(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function v(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&y(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(x(e,t)&&x(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(m(e.prev,e,t.prev)||m(e,t.prev,t))||g(e,t)&&m(e.prev,e,e.next)>0&&m(t.prev,t,t.next)>0)}function m(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function g(e,t){return e.x===t.x&&e.y===t.y}function y(e,t,n,r){var i=_(m(e,t,n)),o=_(m(e,t,r)),a=_(m(n,r,e)),s=_(m(n,r,t));return i!==o&&a!==s||(!(0!==i||!b(e,n,t))||(!(0!==o||!b(e,r,t))||(!(0!==a||!b(n,e,r))||!(0!==s||!b(n,t,r)))))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function _(e){return e>0?1:e<0?-1:0}function x(e,t){return m(e.prev,e,e.next)<0?m(e,t,e.next)>=0&&m(e,e.prev,t)>=0:m(e,t,e.prev)<0||m(e,e.next,t)<0}function E(e,t){var n=new S(e.i,e.x,e.y),r=new S(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(e,t,n,r){var i=new S(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function T(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function S(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}e.exports=t,e.exports.default=t,t.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,a=Math.abs(k(e,0,o,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;a-=Math.abs(k(e,u,c,n))}var h=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,f=r[s+1]*n,p=r[s+2]*n;h+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return 0===a&&0===h?0:Math.abs((h-a)/a)},t.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)n.vertices.push(e[i][o][a]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},548:function(e){"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,i),!0;case 5:return c.fn.call(c.context,t,r,i,o),!0;case 6:return c.fn.call(c.context,t,r,i,o,a),!0}for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var d,f=c.length;for(u=0;u<f;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];c[u].fn.apply(c[u].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,u=[],c=s.length;l<c;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&u.push(s[l]);u.length?this._events[o]=1===u.length?u[0]:u:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},1725:function(e,t,n){var r=n(781)(n(7289),"DataView");e.exports=r},9748:function(e,t,n){var r=n(6545),i=n(9843),o=n(6266),a=n(7364),s=n(4156);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5745:function(e,t,n){var r=n(329),i=n(9666),o=n(2523),a=n(4397),s=n(3316);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},8579:function(e,t,n){var r=n(781)(n(7289),"Map");e.exports=r},3109:function(e,t,n){var r=n(9e3),i=n(7240),o=n(3414),a=n(7140),s=n(5429);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},9946:function(e,t,n){var r=n(781)(n(7289),"Promise");e.exports=r},4199:function(e,t,n){var r=n(781)(n(7289),"Set");e.exports=r},4526:function(e,t,n){var r=n(3109),i=n(5845),o=n(5544);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},7016:function(e,t,n){var r=n(5745),i=n(3653),o=n(3359),a=n(2571),s=n(1698),l=n(5883);function u(e){var t=this.__data__=new r(e);this.size=t.size}u.prototype.clear=i,u.prototype.delete=o,u.prototype.get=a,u.prototype.has=s,u.prototype.set=l,e.exports=u},8624:function(e,t,n){var r=n(7289).Symbol;e.exports=r},6759:function(e,t,n){var r=n(7289).Uint8Array;e.exports=r},3289:function(e,t,n){var r=n(781)(n(7289),"WeakMap");e.exports=r},4235:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},4951:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},3200:function(e,t,n){var r=n(4499),i=n(2794),o=n(5585),a=n(667),s=n(674),l=n(3153),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),c=!n&&i(e),h=!n&&!c&&a(e),d=!n&&!c&&!h&&l(e),f=n||c||h||d,p=f?r(e.length,String):[],v=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||s(m,v))||p.push(m);return p}},5434:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},5349:function(e){e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},9330:function(e){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},7347:function(e,t,n){var r=n(6351),i=n(3666),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var a=e[t];o.call(e,t)&&i(a,n)&&(void 0!==n||t in e)||r(e,t,n)}},9194:function(e,t,n){var r=n(3666);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},3035:function(e,t,n){var r=n(7538),i=n(6385);e.exports=function(e,t){return e&&r(t,i(t),e)}},6045:function(e,t,n){var r=n(7538),i=n(7086);e.exports=function(e,t){return e&&r(t,i(t),e)}},6351:function(e,t,n){var r=n(1438);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},6476:function(e,t,n){var r=n(7016),i=n(4235),o=n(7347),a=n(3035),s=n(6045),l=n(8087),u=n(2594),c=n(2497),h=n(4742),d=n(7253),f=n(5508),p=n(8466),v=n(7633),m=n(7355),g=n(6484),y=n(5585),b=n(667),_=n(5874),x=n(1845),E=n(1859),w=n(6385),T=n(7086),S="[object Arguments]",k="[object Function]",C="[object Object]",A={};A[S]=A["[object Array]"]=A["[object ArrayBuffer]"]=A["[object DataView]"]=A["[object Boolean]"]=A["[object Date]"]=A["[object Float32Array]"]=A["[object Float64Array]"]=A["[object Int8Array]"]=A["[object Int16Array]"]=A["[object Int32Array]"]=A["[object Map]"]=A["[object Number]"]=A[C]=A["[object RegExp]"]=A["[object Set]"]=A["[object String]"]=A["[object Symbol]"]=A["[object Uint8Array]"]=A["[object Uint8ClampedArray]"]=A["[object Uint16Array]"]=A["[object Uint32Array]"]=!0,A["[object Error]"]=A[k]=A["[object WeakMap]"]=!1,e.exports=function e(t,n,I,O,P,M){var R,N=1&n,D=2&n,L=4&n;if(I&&(R=P?I(t,O,P,M):I(t)),void 0!==R)return R;if(!x(t))return t;var F=y(t);if(F){if(R=v(t),!N)return u(t,R)}else{var B=p(t),U=B==k||"[object GeneratorFunction]"==B;if(b(t))return l(t,N);if(B==C||B==S||U&&!P){if(R=D||U?{}:g(t),!N)return D?h(t,s(R,t)):c(t,a(R,t))}else{if(!A[B])return P?t:{};R=m(t,B,N)}}M||(M=new r);var H=M.get(t);if(H)return H;M.set(t,R),E(t)?t.forEach((function(r){R.add(e(r,n,I,r,t,M))})):_(t)&&t.forEach((function(r,i){R.set(i,e(r,n,I,i,t,M))}));var j=F?void 0:(L?D?f:d:D?T:w)(t);return i(j||t,(function(r,i){j&&(r=t[i=r]),o(R,i,e(r,n,I,i,t,M))})),R}},8303:function(e,t,n){var r=n(1845),i=Object.create,o=function(){function e(){}return function(t){if(!r(t))return{};if(i)return i(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=o},2785:function(e,t,n){var r=n(5705),i=n(6428)(r);e.exports=i},5461:function(e,t,n){var r=n(2550)();e.exports=r},5705:function(e,t,n){var r=n(5461),i=n(6385);e.exports=function(e,t){return e&&r(e,t,i)}},207:function(e,t,n){var r=n(4534),i=n(925);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},2606:function(e,t,n){var r=n(5349),i=n(5585);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},8665:function(e,t,n){var r=n(8624),i=n(3596),o=n(8186),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},1966:function(e){e.exports=function(e,t){return null!=e&&t in Object(e)}},1276:function(e,t,n){var r=n(8665),i=n(9752);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},7081:function(e,t,n){var r=n(9110),i=n(9752);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},9110:function(e,t,n){var r=n(7016),i=n(4132),o=n(9820),a=n(6353),s=n(8466),l=n(5585),u=n(667),c=n(3153),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,v,m,g){var y=l(e),b=l(t),_=y?d:s(e),x=b?d:s(t),E=(_=_==h?f:_)==f,w=(x=x==h?f:x)==f,T=_==x;if(T&&u(e)){if(!u(t))return!1;y=!0,E=!1}if(T&&!E)return g||(g=new r),y||c(e)?i(e,t,n,v,m,g):o(e,t,_,n,v,m,g);if(!(1&n)){var S=E&&p.call(e,"__wrapped__"),k=w&&p.call(t,"__wrapped__");if(S||k){var C=S?e.value():e,A=k?t.value():t;return g||(g=new r),m(C,A,n,v,g)}}return!!T&&(g||(g=new r),a(e,t,n,v,m,g))}},7094:function(e,t,n){var r=n(8466),i=n(9752);e.exports=function(e){return i(e)&&"[object Map]"==r(e)}},9280:function(e,t,n){var r=n(7016),i=n(7081);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var u=n[a];if(l&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++a<s;){var c=(u=n[a])[0],h=e[c],d=u[1];if(l&&u[2]){if(void 0===h&&!(c in e))return!1}else{var f=new r;if(o)var p=o(h,d,c,e,t,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},3186:function(e,t,n){var r=n(375),i=n(5401),o=n(1845),a=n(2043),s=/^\[object .+?Constructor\]$/,l=Function.prototype,u=Object.prototype,c=l.toString,h=u.hasOwnProperty,d=RegExp("^"+c.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},8711:function(e,t,n){var r=n(8466),i=n(9752);e.exports=function(e){return i(e)&&"[object Set]"==r(e)}},7499:function(e,t,n){var r=n(8665),i=n(4276),o=n(9752),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},1186:function(e,t,n){var r=n(5662),i=n(8768),o=n(9908),a=n(5585),s=n(4445);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},3409:function(e,t,n){var r=n(6132),i=n(8723),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},9130:function(e,t,n){var r=n(1845),i=n(6132),o=n(3481),a=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return o(e);var t=i(e),n=[];for(var s in e)("constructor"!=s||!t&&a.call(e,s))&&n.push(s);return n}},1839:function(e,t,n){var r=n(2785),i=n(2114);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},5662:function(e,t,n){var r=n(9280),i=n(5113),o=n(2093);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},8768:function(e,t,n){var r=n(7081),i=n(9706),o=n(9775),a=n(8939),s=n(9253),l=n(2093),u=n(925);e.exports=function(e,t){return a(e)&&s(t)?l(u(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},1125:function(e){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},171:function(e,t,n){var r=n(207);e.exports=function(e){return function(t){return r(t,e)}}},4499:function(e){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},1612:function(e,t,n){var r=n(8624),i=n(5434),o=n(5585),a=n(2060),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n}},6902:function(e){e.exports=function(e){return function(t){return e(t)}}},8905:function(e){e.exports=function(e,t){return e.has(t)}},7169:function(e,t,n){var r=n(9908);e.exports=function(e){return"function"==typeof e?e:r}},4534:function(e,t,n){var r=n(5585),i=n(8939),o=n(3002),a=n(1822);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},2604:function(e,t,n){var r=n(6759);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},8087:function(e,t,n){e=n.nmd(e);var r=n(7289),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i?r.Buffer:void 0,s=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=s?s(n):new e.constructor(n);return e.copy(r),r}},1893:function(e,t,n){var r=n(2604);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},3360:function(e){var t=/\w*$/;e.exports=function(e){var n=new e.constructor(e.source,t.exec(e));return n.lastIndex=e.lastIndex,n}},7981:function(e,t,n){var r=n(8624),i=r?r.prototype:void 0,o=i?i.valueOf:void 0;e.exports=function(e){return o?Object(o.call(e)):{}}},5888:function(e,t,n){var r=n(2604);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},2594:function(e){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},7538:function(e,t,n){var r=n(7347),i=n(6351);e.exports=function(e,t,n,o){var a=!n;n||(n={});for(var s=-1,l=t.length;++s<l;){var u=t[s],c=o?o(n[u],e[u],u,n,e):void 0;void 0===c&&(c=e[u]),a?i(n,u,c):r(n,u,c)}return n}},2497:function(e,t,n){var r=n(7538),i=n(6504);e.exports=function(e,t){return r(e,i(e),t)}},4742:function(e,t,n){var r=n(7538),i=n(2757);e.exports=function(e,t){return r(e,i(e),t)}},7683:function(e,t,n){var r=n(7289)["__core-js_shared__"];e.exports=r},6428:function(e,t,n){var r=n(2114);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},2550:function(e){e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},1438:function(e,t,n){var r=n(781),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},4132:function(e,t,n){var r=n(4526),i=n(9330),o=n(8905);e.exports=function(e,t,n,a,s,l){var u=1&n,c=e.length,h=t.length;if(c!=h&&!(u&&h>c))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,v=!0,m=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<c;){var g=e[p],y=t[p];if(a)var b=u?a(y,g,p,t,e,l):a(g,y,p,e,t,l);if(void 0!==b){if(b)continue;v=!1;break}if(m){if(!i(t,(function(e,t){if(!o(m,t)&&(g===e||s(g,e,n,a,l)))return m.push(t)}))){v=!1;break}}else if(g!==y&&!s(g,y,n,a,l)){v=!1;break}}return l.delete(e),l.delete(t),v}},9820:function(e,t,n){var r=n(8624),i=n(6759),o=n(3666),a=n(4132),s=n(258),l=n(3671),u=r?r.prototype:void 0,c=u?u.valueOf:void 0;e.exports=function(e,t,n,r,u,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var v=d.get(e);if(v)return v==t;r|=2,d.set(e,t);var m=a(f(e),f(t),r,u,h,d);return d.delete(e),m;case"[object Symbol]":if(c)return c.call(e)==c.call(t)}return!1}},6353:function(e,t,n){var r=n(7253),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,u=r(e),c=u.length;if(c!=r(t).length&&!l)return!1;for(var h=c;h--;){var d=u[h];if(!(l?d in t:i.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var v=!0;s.set(e,t),s.set(t,e);for(var m=l;++h<c;){var g=e[d=u[h]],y=t[d];if(o)var b=l?o(y,g,d,t,e,s):o(g,y,d,e,t,s);if(!(void 0===b?g===y||a(g,y,n,o,s):b)){v=!1;break}m||(m="constructor"==d)}if(v&&!m){var _=e.constructor,x=t.constructor;_==x||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x||(v=!1)}return s.delete(e),s.delete(t),v}},2692:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},7253:function(e,t,n){var r=n(2606),i=n(6504),o=n(6385);e.exports=function(e){return r(e,o,i)}},5508:function(e,t,n){var r=n(2606),i=n(2757),o=n(7086);e.exports=function(e){return r(e,o,i)}},6911:function(e,t,n){var r=n(1591);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},5113:function(e,t,n){var r=n(9253),i=n(6385);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},781:function(e,t,n){var r=n(3186),i=n(760);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},6116:function(e,t,n){var r=n(9698)(Object.getPrototypeOf,Object);e.exports=r},3596:function(e,t,n){var r=n(8624),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},6504:function(e,t,n){var r=n(4951),i=n(2554),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},2757:function(e,t,n){var r=n(5349),i=n(6116),o=n(6504),a=n(2554),s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,o(e)),e=i(e);return t}:a;e.exports=s},8466:function(e,t,n){var r=n(1725),i=n(8579),o=n(9946),a=n(4199),s=n(3289),l=n(8665),u=n(2043),c="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",v=u(r),m=u(i),g=u(o),y=u(a),b=u(s),_=l;(r&&_(new r(new ArrayBuffer(1)))!=p||i&&_(new i)!=c||o&&_(o.resolve())!=h||a&&_(new a)!=d||s&&_(new s)!=f)&&(_=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?u(n):"";if(r)switch(r){case v:return p;case m:return c;case g:return h;case y:return d;case b:return f}return t}),e.exports=_},760:function(e){e.exports=function(e,t){return null==e?void 0:e[t]}},1898:function(e,t,n){var r=n(4534),i=n(2794),o=n(5585),a=n(674),s=n(4276),l=n(925);e.exports=function(e,t,n){for(var u=-1,c=(t=r(t,e)).length,h=!1;++u<c;){var d=l(t[u]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++u!=c?h:!!(c=null==e?0:e.length)&&s(c)&&a(d,c)&&(o(e)||i(e))}},6545:function(e,t,n){var r=n(1353);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},9843:function(e){e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},6266:function(e,t,n){var r=n(1353),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},7364:function(e,t,n){var r=n(1353),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},4156:function(e,t,n){var r=n(1353);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7633:function(e){var t=Object.prototype.hasOwnProperty;e.exports=function(e){var n=e.length,r=new e.constructor(n);return n&&"string"==typeof e[0]&&t.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},7355:function(e,t,n){var r=n(2604),i=n(1893),o=n(3360),a=n(7981),s=n(5888);e.exports=function(e,t,n){var l=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new l(+e);case"[object DataView]":return i(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return s(e,n);case"[object Map]":case"[object Set]":return new l;case"[object Number]":case"[object String]":return new l(e);case"[object RegExp]":return o(e);case"[object Symbol]":return a(e)}}},6484:function(e,t,n){var r=n(8303),i=n(6116),o=n(6132);e.exports=function(e){return"function"!=typeof e.constructor||o(e)?{}:r(i(e))}},674:function(e){var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},8939:function(e,t,n){var r=n(5585),i=n(2060),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},1591:function(e){e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},5401:function(e,t,n){var r=n(7683),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6132:function(e){var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9253:function(e,t,n){var r=n(1845);e.exports=function(e){return e===e&&!r(e)}},329:function(e){e.exports=function(){this.__data__=[],this.size=0}},9666:function(e,t,n){var r=n(9194),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},2523:function(e,t,n){var r=n(9194);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},4397:function(e,t,n){var r=n(9194);e.exports=function(e){return r(this.__data__,e)>-1}},3316:function(e,t,n){var r=n(9194);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},9e3:function(e,t,n){var r=n(9748),i=n(5745),o=n(8579);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7240:function(e,t,n){var r=n(6911);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},3414:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).get(e)}},7140:function(e,t,n){var r=n(6911);e.exports=function(e){return r(this,e).has(e)}},5429:function(e,t,n){var r=n(6911);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},258:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},2093:function(e){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},3679:function(e,t,n){var r=n(2736);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},1353:function(e,t,n){var r=n(781)(Object,"create");e.exports=r},8723:function(e,t,n){var r=n(9698)(Object.keys,Object);e.exports=r},3481:function(e){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},7785:function(e,t,n){e=n.nmd(e);var r=n(2692),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},8186:function(e){var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},9698:function(e){e.exports=function(e,t){return function(n){return e(t(n))}}},7289:function(e,t,n){var r=n(2692),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},5845:function(e){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},5544:function(e){e.exports=function(e){return this.__data__.has(e)}},3671:function(e){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},3653:function(e,t,n){var r=n(5745);e.exports=function(){this.__data__=new r,this.size=0}},3359:function(e){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},2571:function(e){e.exports=function(e){return this.__data__.get(e)}},1698:function(e){e.exports=function(e){return this.__data__.has(e)}},5883:function(e,t,n){var r=n(5745),i=n(8579),o=n(3109);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},3002:function(e,t,n){var r=n(3679),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},925:function(e,t,n){var r=n(2060);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}},2043:function(e){var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},8504:function(e,t,n){var r=n(6476);e.exports=function(e){return r(e,5)}},3666:function(e){e.exports=function(e,t){return e===t||e!==e&&t!==t}},7827:function(e,t,n){var r=n(5705),i=n(7169);e.exports=function(e,t){return e&&r(e,i(t))}},9706:function(e,t,n){var r=n(207);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},9775:function(e,t,n){var r=n(1966),i=n(1898);e.exports=function(e,t){return null!=e&&i(e,t,r)}},9908:function(e){e.exports=function(e){return e}},2794:function(e,t,n){var r=n(1276),i=n(9752),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},5585:function(e){var t=Array.isArray;e.exports=t},2114:function(e,t,n){var r=n(375),i=n(4276);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},667:function(e,t,n){e=n.nmd(e);var r=n(7289),i=n(5535),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},375:function(e,t,n){var r=n(8665),i=n(1845);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},4276:function(e){e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5874:function(e,t,n){var r=n(7094),i=n(6902),o=n(7785),a=o&&o.isMap,s=a?i(a):r;e.exports=s},1845:function(e){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},9752:function(e){e.exports=function(e){return null!=e&&"object"==typeof e}},634:function(e,t,n){var r=n(8665),i=n(6116),o=n(9752),a=Function.prototype,s=Object.prototype,l=a.toString,u=s.hasOwnProperty,c=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=u.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==c}},1859:function(e,t,n){var r=n(8711),i=n(6902),o=n(7785),a=o&&o.isSet,s=a?i(a):r;e.exports=s},5406:function(e,t,n){var r=n(8665),i=n(5585),o=n(9752);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},2060:function(e,t,n){var r=n(8665),i=n(9752);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},3153:function(e,t,n){var r=n(7499),i=n(6902),o=n(7785),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},6385:function(e,t,n){var r=n(3200),i=n(3409),o=n(2114);e.exports=function(e){return o(e)?r(e):i(e)}},7086:function(e,t,n){var r=n(3200),i=n(9130),o=n(2114);e.exports=function(e){return o(e)?r(e,!0):i(e)}},3428:function(e,t,n){var r=n(5434),i=n(1186),o=n(1839),a=n(5585);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},2736:function(e,t,n){var r=n(3109);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},4445:function(e,t,n){var r=n(1125),i=n(171),o=n(8939),a=n(925);e.exports=function(e){return o(e)?r(a(e)):i(e)}},2554:function(e){e.exports=function(){return[]}},5535:function(e){e.exports=function(){return!1}},1822:function(e,t,n){var r=n(1612);e.exports=function(e){return null==e?"":r(e)}},1729:function(e,t,n){"use strict";var r=n(9165);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5192:function(e,t,n){e.exports=n(1729)()},9165:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9605:function(e){"use strict";function t(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,n,r,i){n=n||"&",r=r||"=";var o={};if("string"!==typeof e||0===e.length)return o;var a=/\+/g;e=e.split(n);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var l=e.length;s>0&&l>s&&(l=s);for(var u=0;u<l;++u){var c,h,d,f,p=e[u].replace(a,"%20"),v=p.indexOf(r);v>=0?(c=p.substr(0,v),h=p.substr(v+1)):(c=p,h=""),d=decodeURIComponent(c),f=decodeURIComponent(h),t(o,d)?Array.isArray(o[d])?o[d].push(f):o[d]=[o[d],f]:o[d]=f}return o}},3033:function(e){"use strict";var t=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,n,r,i){return n=n||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?Object.keys(e).map((function(i){var o=encodeURIComponent(t(i))+r;return Array.isArray(e[i])?e[i].map((function(e){return o+encodeURIComponent(t(e))})).join(n):o+encodeURIComponent(t(e[i]))})).join(n):i?encodeURIComponent(t(i))+r+encodeURIComponent(t(e)):""}},2902:function(e,t,n){"use strict";t.decode=t.parse=n(9605),t.encode=t.stringify=n(3033)},4738:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,u=n?Symbol.for("react.context"):60110,c=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,g=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,b=n?Symbol.for("react.responder"):60118,_=n?Symbol.for("react.scope"):60119;function x(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case c:case h:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case u:case d:case m:case v:case l:return e;default:return t}}case i:return t}}}function E(e){return x(e)===h}t.isFragment=function(e){return x(e)===o},t.isMemo=function(e){return x(e)===v}},2715:function(e,t,n){"use strict";e.exports=n(4738)},534:function(e,n,r){"use strict";var i=r(7313),o=r(2224);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,l={};function u(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)s.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},v={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function _(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!d.call(v,e)||!d.call(p,e)&&(f.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,b);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,E=Symbol.for("react.element"),w=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),A=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var N=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var D=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=D&&e[D]||e["@@iterator"])?e:null}var F,B=Object.assign;function U(e){if(void 0===F)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);F=t&&t[1]||""}return"\n"+F+e}var H=!1;function j(e,t){if(!e||H)return"";H=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&"string"===typeof u.stack){for(var i=u.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{H=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=j(e.type,!1);case 11:return e=j(e.type.render,!1);case 1:return e=j(e.type,!0);default:return""}}function V(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case T:return"Fragment";case w:return"Portal";case k:return"Profiler";case S:return"StrictMode";case O:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case I:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case M:return null!==(t=e.displayName||null)?t:V(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return V(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return V(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function X(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=X(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=X(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Z(e,t){var n=t.checked;return B({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&_(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?te(e,t.type,n):t.hasOwnProperty("defaultValue")&&te(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ee(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function te(e,t,n){"number"===t&&q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ne=Array.isArray;function re(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return B({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oe(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(ne(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function se(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ue(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,he,de=(he=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return he(e,t)}))}:he);function fe(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]}))}));var ye=B({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function be(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function _e(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function Ee(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Te=null,Se=null;function ke(e){if(e=_i(e)){if("function"!==typeof we)throw Error(a(280));var t=e.stateNode;t&&(t=Ei(t),we(e.stateNode,e.type,t))}}function Ce(e){Te?Se?Se.push(e):Se=[e]:Te=e}function Ae(){if(Te){var e=Te,t=Se;if(Se=Te=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ie(e,t){return e(t)}function Oe(){}var Pe=!1;function Me(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ie(e,t,n)}finally{Pe=!1,(null!==Te||null!==Se)&&(Oe(),Ae())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=Ei(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ne=!1;if(h)try{var De={};Object.defineProperty(De,"passive",{get:function(){Ne=!0}}),window.addEventListener("test",De,De),window.removeEventListener("test",De,De)}catch(he){Ne=!1}function Le(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Fe=!1,Be=null,Ue=!1,He=null,je={onError:function(e){Fe=!0,Be=e}};function ze(e,t,n,r,i,o,a,s,l){Fe=!1,Be=null,Le.apply(je,arguments)}function Ve(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ve(e)!==e)throw Error(a(188))}function Xe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ve(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=o.unstable_scheduleCallback,qe=o.unstable_cancelCallback,Ze=o.unstable_shouldYield,$e=o.unstable_requestPaint,Qe=o.unstable_now,Je=o.unstable_getCurrentPriorityLevel,et=o.unstable_ImmediatePriority,tt=o.unstable_UserBlockingPriority,nt=o.unstable_NormalPriority,rt=o.unstable_LowPriority,it=o.unstable_IdlePriority,ot=null,at=null;var st=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ut|0)|0},lt=Math.log,ut=Math.LN2;var ct=64,ht=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ft(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=dt(s):0!==(o&=a)&&(r=dt(o))}else 0!==(a=n&~i)?r=dt(a):0!==o&&(r=dt(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-st(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-st(t)]=n}function bt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-st(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var _t=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Et,wt,Tt,St,kt,Ct=!1,At=[],It=null,Ot=null,Pt=null,Mt=new Map,Rt=new Map,Nt=[],Dt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":It=null;break;case"dragenter":case"dragleave":Ot=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Mt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Ft(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=_i(t))&&wt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Bt(e){var t=bi(e.target);if(null!==t){var n=Ve(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void kt(e.priority,(function(){Tt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Zt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=_i(n))&&wt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ht(e,t,n){Ut(e)&&n.delete(t)}function jt(){Ct=!1,null!==It&&Ut(It)&&(It=null),null!==Ot&&Ut(Ot)&&(Ot=null),null!==Pt&&Ut(Pt)&&(Pt=null),Mt.forEach(Ht),Rt.forEach(Ht)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,jt)))}function Vt(e){function t(t){return zt(t,e)}if(0<At.length){zt(At[0],e);for(var n=1;n<At.length;n++){var r=At[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==It&&zt(It,e),null!==Ot&&zt(Ot,e),null!==Pt&&zt(Pt,e),Mt.forEach(t),Rt.forEach(t),n=0;n<Nt.length;n++)(r=Nt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Nt.length&&null===(n=Nt[0]).blockedOn;)Bt(n),null===n.blockedOn&&Nt.shift()}var Gt=x.ReactCurrentBatchConfig,Wt=!0;function Xt(e,t,n,r){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=1,Kt(e,t,n,r)}finally{_t=i,Gt.transition=o}}function Yt(e,t,n,r){var i=_t,o=Gt.transition;Gt.transition=null;try{_t=4,Kt(e,t,n,r)}finally{_t=i,Gt.transition=o}}function Kt(e,t,n,r){if(Wt){var i=Zt(e,t,n,r);if(null===i)Wr(e,t,r,qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return It=Ft(It,e,t,n,r,i),!0;case"dragenter":return Ot=Ft(Ot,e,t,n,r,i),!0;case"mouseover":return Pt=Ft(Pt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Mt.set(o,Ft(Mt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Ft(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Dt.indexOf(e)){for(;null!==i;){var o=_i(i);if(null!==o&&Et(o),null===(o=Zt(e,t,n,r))&&Wr(e,t,r,qt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var qt=null;function Zt(e,t,n,r){if(qt=null,null!==(e=bi(e=Ee(r))))if(null===(t=Ve(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case et:return 1;case tt:return 4;case nt:case rt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,en=null;function tn(){if(en)return en;var e,t,n=Jt,r=n.length,i="value"in Qt?Qt.value:Qt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return en=i.slice(e,1<t?1-t:void 0)}function nn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function rn(){return!0}function on(){return!1}function an(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?rn:on,this.isPropagationStopped=on,this}return B(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=rn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=rn)},persist:function(){},isPersistent:rn}),t}var sn,ln,un,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},hn=an(cn),dn=B({},cn,{view:0,detail:0}),fn=an(dn),pn=B({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==un&&(un&&"mousemove"===e.type?(sn=e.screenX-un.screenX,ln=e.screenY-un.screenY):ln=sn=0,un=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),vn=an(pn),mn=an(B({},pn,{dataTransfer:0})),gn=an(B({},dn,{relatedTarget:0})),yn=an(B({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),bn=B({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_n=an(bn),xn=an(B({},cn,{data:0})),En={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Tn[e])&&!!t[e]}function kn(){return Sn}var Cn=B({},dn,{key:function(e){if(e.key){var t=En[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?nn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),An=an(Cn),In=an(B({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),On=an(B({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),Pn=an(B({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=B({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Mn),Nn=[9,13,27,32],Dn=h&&"CompositionEvent"in window,Ln=null;h&&"documentMode"in document&&(Ln=document.documentMode);var Fn=h&&"TextEvent"in window&&!Ln,Bn=h&&(!Dn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Hn=!1;function jn(e,t){switch(e){case"keyup":return-1!==Nn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Vn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function Xn(e,t,n,r){Ce(r),0<(t=Yr(t,"onChange")).length&&(n=new hn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Yn=null,Kn=null;function qn(e){Ur(e,0)}function Zn(e){if(K(xi(e)))return e}function $n(e,t){if("change"===e)return t}var Qn=!1;if(h){var Jn;if(h){var er="oninput"in document;if(!er){var tr=document.createElement("div");tr.setAttribute("oninput","return;"),er="function"===typeof tr.oninput}Jn=er}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function nr(){Yn&&(Yn.detachEvent("onpropertychange",rr),Kn=Yn=null)}function rr(e){if("value"===e.propertyName&&Zn(Kn)){var t=[];Xn(t,Kn,e,Ee(e)),Me(qn,t)}}function ir(e,t,n){"focusin"===e?(nr(),Kn=n,(Yn=t).attachEvent("onpropertychange",rr)):"focusout"===e&&nr()}function or(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Zn(Kn)}function ar(e,t){if("click"===e)return Zn(t)}function sr(e,t){if("input"===e||"change"===e)return Zn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ur(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!d.call(t,i)||!lr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function hr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function fr(){for(var e=window,t=q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=q((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=fr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=hr(n,o);var a=hr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=h&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,br=null,_r=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;_r||null==gr||gr!==q(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},br&&ur(br,r)||(br=r,0<(r=Yr(yr,"onSelect")).length&&(t=new hn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function Er(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wr={animationend:Er("Animation","AnimationEnd"),animationiteration:Er("Animation","AnimationIteration"),animationstart:Er("Animation","AnimationStart"),transitionend:Er("Transition","TransitionEnd")},Tr={},Sr={};function kr(e){if(Tr[e])return Tr[e];if(!wr[e])return e;var t,n=wr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return Tr[e]=n[t];return e}h&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete wr.animationend.animation,delete wr.animationiteration.animation,delete wr.animationstart.animation),"TransitionEvent"in window||delete wr.transitionend.transition);var Cr=kr("animationend"),Ar=kr("animationiteration"),Ir=kr("animationstart"),Or=kr("transitionend"),Pr=new Map,Mr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Pr.set(e,t),u(t,[e])}for(var Nr=0;Nr<Mr.length;Nr++){var Dr=Mr[Nr];Rr(Dr.toLowerCase(),"on"+(Dr[0].toUpperCase()+Dr.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Ar,"onAnimationIteration"),Rr(Ir,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Or,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Br(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,s,l,u){if(ze.apply(this,arguments),Fe){if(!Fe)throw Error(a(198));var c=Be;Fe=!1,Be=null,Ue||(Ue=!0,He=c)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Br(i,s,u),o=l}}}if(Ue)throw e=He,Ue=!1,He=null,e}function Hr(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function jr(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Vr(e){if(!e[zr]){e[zr]=!0,s.forEach((function(t){"selectionchange"!==t&&(Fr.has(t)||jr(t,!1,e),jr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,jr("selectionchange",!1,t))}}function Gr(e,t,n,r){switch($t(t)){case 1:var i=Xt;break;case 4:i=Yt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!Ne||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=bi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Me((function(){var r=o,i=Ee(n),a=[];e:{var s=Pr.get(e);if(void 0!==s){var l=hn,u=e;switch(e){case"keypress":if(0===nn(n))break e;case"keydown":case"keyup":l=An;break;case"focusin":u="focus",l=gn;break;case"focusout":u="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=On;break;case Cr:case Ar:case Ir:l=yn;break;case Or:l=Pn;break;case"scroll":l=fn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=_n;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=In}var c=0!==(4&t),h=!c&&"scroll"===e,d=c?null!==s?s+"Capture":null:s;c=[];for(var f,p=r;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==d&&(null!=(v=Re(p,d))&&c.push(Xr(p,v,f)))),h)break;p=p.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(u=n.relatedTarget||n.fromElement)||!bi(u)&&!u[vi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?bi(u):null)&&(u!==(h=Ve(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=vn,v="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(c=In,v="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:xi(l),f=null==u?s:xi(u),(s=new c(v,p+"leave",l,n,i)).target=h,s.relatedTarget=f,v=null,bi(i)===r&&((c=new c(d,p+"enter",u,n,i)).target=f,c.relatedTarget=h,v=c),h=v,l&&u)e:{for(d=u,p=0,f=c=l;f;f=Kr(f))p++;for(f=0,v=d;v;v=Kr(v))f++;for(;0<p-f;)c=Kr(c),p--;for(;0<f-p;)d=Kr(d),f--;for(;p--;){if(c===d||null!==d&&c===d.alternate)break e;c=Kr(c),d=Kr(d)}c=null}else c=null;null!==l&&qr(a,s,l,c,!1),null!==u&&null!==h&&qr(a,h,u,c,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var m=$n;else if(Wn(s))if(Qn)m=sr;else{m=or;var g=ir}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(m=ar);switch(m&&(m=m(e,r))?Xn(a,m,n,i):(g&&g(e,s,r),"focusout"===e&&(g=s._wrapperState)&&g.controlled&&"number"===s.type&&te(s,"number",s.value)),g=r?xi(r):window,e){case"focusin":(Wn(g)||"true"===g.contentEditable)&&(gr=g,yr=r,br=null);break;case"focusout":br=yr=gr=null;break;case"mousedown":_r=!0;break;case"contextmenu":case"mouseup":case"dragend":_r=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(Dn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vn?jn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Bn&&"ko"!==n.locale&&(Vn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vn&&(y=tn()):(Jt="value"in(Qt=i)?Qt.value:Qt.textContent,Vn=!0)),0<(g=Yr(r,b)).length&&(b=new xn(b,e,null,n,i),a.push({event:b,listeners:g}),y?b.data=y:null!==(y=zn(n))&&(b.data=y))),(y=Fn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Hn=!0,Un);case"textInput":return(e=t.data)===Un&&Hn?null:e;default:return null}}(e,n):function(e,t){if(Vn)return"compositionend"===e||!Dn&&jn(e,t)?(e=tn(),en=Jt=Qt=null,Vn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Bn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Yr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Ur(a,t)}))}function Xr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Yr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Xr(e,o,i)),null!=(o=Re(e,t))&&r.push(Xr(e,o,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function qr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=Re(n,o))&&a.unshift(Xr(n,l,s)):i||null!=(l=Re(n,o))&&a.push(Xr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Zr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Qr(e){return("string"===typeof e?e:""+e).replace(Zr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Qr(t),Qr(e)!==t&&n)throw Error(a(425))}function ei(){}var ti=null,ni=null;function ri(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ii="function"===typeof setTimeout?setTimeout:void 0,oi="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,si="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(li)}:ii;function li(e){setTimeout((function(){throw e}))}function ui(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Vt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Vt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var di=Math.random().toString(36).slice(2),fi="__reactFiber$"+di,pi="__reactProps$"+di,vi="__reactContainer$"+di,mi="__reactEvents$"+di,gi="__reactListeners$"+di,yi="__reactHandles$"+di;function bi(e){var t=e[fi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[fi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=hi(e);null!==e;){if(n=e[fi])return n;e=hi(e)}return t}n=(e=n).parentNode}return null}function _i(e){return!(e=e[fi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function Ei(e){return e[pi]||null}var wi=[],Ti=-1;function Si(e){return{current:e}}function ki(e){0>Ti||(e.current=wi[Ti],wi[Ti]=null,Ti--)}function Ci(e,t){Ti++,wi[Ti]=e.current,e.current=t}var Ai={},Ii=Si(Ai),Oi=Si(!1),Pi=Ai;function Mi(e,t){var n=e.type.contextTypes;if(!n)return Ai;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ni(){ki(Oi),ki(Ii)}function Di(e,t,n){if(Ii.current!==Ai)throw Error(a(168));Ci(Ii,t),Ci(Oi,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,G(e)||"Unknown",i));return B({},n,r)}function Fi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ai,Pi=Ii.current,Ci(Ii,e),Ci(Oi,Oi.current),!0}function Bi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,ki(Oi),ki(Ii),Ci(Ii,e)):ki(Oi),Ci(Oi,n)}var Ui=null,Hi=!1,ji=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function Vi(){if(!ji&&null!==Ui){ji=!0;var e=0,t=_t;try{var n=Ui;for(_t=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Hi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ke(et,Vi),i}finally{_t=t,ji=!1}}return null}var Gi=[],Wi=0,Xi=null,Yi=0,Ki=[],qi=0,Zi=null,$i=1,Qi="";function Ji(e,t){Gi[Wi++]=Yi,Gi[Wi++]=Xi,Xi=e,Yi=t}function eo(e,t,n){Ki[qi++]=$i,Ki[qi++]=Qi,Ki[qi++]=Zi,Zi=e;var r=$i;e=Qi;var i=32-st(r)-1;r&=~(1<<i),n+=1;var o=32-st(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,$i=1<<32-st(t)+i|n<<i|r,Qi=o+e}else $i=1<<o|n<<i|r,Qi=e}function to(e){null!==e.return&&(Ji(e,1),eo(e,1,0))}function no(e){for(;e===Xi;)Xi=Gi[--Wi],Gi[Wi]=null,Yi=Gi[--Wi],Gi[Wi]=null;for(;e===Zi;)Zi=Ki[--qi],Ki[qi]=null,Qi=Ki[--qi],Ki[qi]=null,$i=Ki[--qi],Ki[qi]=null}var ro=null,io=null,oo=!1,ao=null;function so(e,t){var n=Mu(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function lo(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ro=e,io=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ro=e,io=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Zi?{id:$i,overflow:Qi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Mu(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ro=e,io=null,!0);default:return!1}}function uo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(oo){var t=io;if(t){var n=t;if(!lo(e,t)){if(uo(e))throw Error(a(418));t=ci(n.nextSibling);var r=ro;t&&lo(e,t)?so(r,n):(e.flags=-4097&e.flags|2,oo=!1,ro=e)}}else{if(uo(e))throw Error(a(418));e.flags=-4097&e.flags|2,oo=!1,ro=e}}}function ho(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ro=e}function fo(e){if(e!==ro)return!1;if(!oo)return ho(e),oo=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ri(e.type,e.memoizedProps)),t&&(t=io)){if(uo(e))throw po(),Error(a(418));for(;t;)so(e,t),t=ci(t.nextSibling)}if(ho(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){io=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}io=null}}else io=ro?ci(e.stateNode.nextSibling):null;return!0}function po(){for(var e=io;e;)e=ci(e.nextSibling)}function vo(){io=ro=null,oo=!1}function mo(e){null===ao?ao=[e]:ao.push(e)}var go=x.ReactCurrentBatchConfig;function yo(e,t){if(e&&e.defaultProps){for(var n in t=B({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var bo=Si(null),_o=null,xo=null,Eo=null;function wo(){Eo=xo=_o=null}function To(e){var t=bo.current;ki(bo),e._currentValue=t}function So(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ko(e,t){_o=e,Eo=xo=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(_s=!0),e.firstContext=null)}function Co(e){var t=e._currentValue;if(Eo!==e)if(e={context:e,memoizedValue:t,next:null},null===xo){if(null===_o)throw Error(a(308));xo=e,_o.dependencies={lanes:0,firstContext:e}}else xo=xo.next=e;return t}var Ao=null;function Io(e){null===Ao?Ao=[e]:Ao.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Io(t)):(n.next=i.next,i.next=n),t.interleaved=n,Po(e,r)}function Po(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mo=!1;function Ro(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function No(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Do(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Lo(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Il)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Po(e,n)}return null===(i=r.interleaved)?(t.next=t,Io(r)):(t.next=i.next,i.next=t),r.interleaved=t,Po(e,n)}function Fo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}function Bo(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Uo(e,t,n,r){var i=e.updateQueue;Mo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&((s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,c=u=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==c&&(c=c.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(d=t,f=n,v.tag){case 1:if("function"===typeof(p=v.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=v.payload)?p.call(f,h,d):p)||void 0===d)break e;h=B({},h,d);break e;case 2:Mo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=f,l=h):c=c.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===c&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Fl|=a,e.lanes=a,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var jo=(new i.Component).refs;function zo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:B({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return!!(e=e._reactInternals)&&Ve(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Do(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Fo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tu(),i=nu(e),o=Do(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=Lo(e,o,i))&&(ru(t,e,i,r),Fo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tu(),r=nu(e),i=Do(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Lo(e,i,r))&&(ru(t,e,r,n),Fo(t,e,r))}};function Go(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ur(n,r)||!ur(i,o))}function Wo(e,t,n){var r=!1,i=Ai,o=t.contextType;return"object"===typeof o&&null!==o?o=Co(o):(i=Ri(t)?Pi:Ii.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Mi(e,i):Ai),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Xo(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function Yo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=jo,Ro(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Co(o):(o=Ri(t)?Pi:Ii.current,i.context=Mi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(zo(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Vo.enqueueReplaceState(i,i.state,null),Uo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ko(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===jo&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function qo(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Zo(e){return(0,e._init)(e._payload)}function $o(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Nu(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bu(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function u(e,t,n,r){var o=n.type;return o===T?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Zo(o)===t.type)?((r=i(t,n.props)).ref=Ko(e,t,n),r.return=e,r):((r=Du(n.type,n.key,n.props,null,e.mode,r)).ref=Ko(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uu(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=Lu(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bu(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case E:return(n=Du(t.type,t.key,t.props,null,e.mode,n)).ref=Ko(e,null,t),n.return=e,n;case w:return(t=Uu(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(ne(t)||L(t))return(t=Lu(t,e.mode,n,null)).return=e,t;qo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case E:return n.key===i?u(e,t,n,r):null;case w:return n.key===i?c(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(ne(n)||L(n))return null!==i?null:h(e,t,n,r,null);qo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(ne(r)||L(r))return h(t,e=e.get(n)||null,r,i,null);qo(t,r)}return null}function v(i,a,s,l){for(var u=null,c=null,h=a,v=a=0,m=null;null!==h&&v<s.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var g=f(i,h,s[v],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(i,h),a=o(g,a,v),null===c?u=g:c.sibling=g,c=g,h=m}if(v===s.length)return n(i,h),oo&&Ji(i,v),u;if(null===h){for(;v<s.length;v++)null!==(h=d(i,s[v],l))&&(a=o(h,a,v),null===c?u=h:c.sibling=h,c=h);return oo&&Ji(i,v),u}for(h=r(i,h);v<s.length;v++)null!==(m=p(h,i,v,s[v],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),a=o(m,a,v),null===c?u=m:c.sibling=m,c=m);return e&&h.forEach((function(e){return t(i,e)})),oo&&Ji(i,v),u}function m(i,s,l,u){var c=L(l);if("function"!==typeof c)throw Error(a(150));if(null==(l=c.call(l)))throw Error(a(151));for(var h=c=null,v=s,m=s=0,g=null,y=l.next();null!==v&&!y.done;m++,y=l.next()){v.index>m?(g=v,v=null):g=v.sibling;var b=f(i,v,y.value,u);if(null===b){null===v&&(v=g);break}e&&v&&null===b.alternate&&t(i,v),s=o(b,s,m),null===h?c=b:h.sibling=b,h=b,v=g}if(y.done)return n(i,v),oo&&Ji(i,m),c;if(null===v){for(;!y.done;m++,y=l.next())null!==(y=d(i,y.value,u))&&(s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return oo&&Ji(i,m),c}for(v=r(i,v);!y.done;m++,y=l.next())null!==(y=p(v,i,m,y.value,u))&&(e&&null!==y.alternate&&v.delete(null===y.key?m:y.key),s=o(y,s,m),null===h?c=y:h.sibling=y,h=y);return e&&v.forEach((function(e){return t(i,e)})),oo&&Ji(i,m),c}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===T&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case E:e:{for(var u=a.key,c=o;null!==c;){if(c.key===u){if((u=a.type)===T){if(7===c.tag){n(r,c.sibling),(o=i(c,a.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"===typeof u&&null!==u&&u.$$typeof===R&&Zo(u)===c.type){n(r,c.sibling),(o=i(c,a.props)).ref=Ko(r,c,a),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}a.type===T?((o=Lu(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Du(a.type,a.key,a.props,null,r.mode,l)).ref=Ko(r,o,a),l.return=r,r=l)}return s(r);case w:e:{for(c=a.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Uu(a,r.mode,l)).return=r,r=o}return s(r);case R:return e(r,o,(c=a._init)(a._payload),l)}if(ne(a))return v(r,o,a,l);if(L(a))return m(r,o,a,l);qo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Bu(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var Qo=$o(!0),Jo=$o(!1),ea={},ta=Si(ea),na=Si(ea),ra=Si(ea);function ia(e){if(e===ea)throw Error(a(174));return e}function oa(e,t){switch(Ci(ra,t),Ci(na,e),Ci(ta,ea),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ue(null,"");break;default:t=ue(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}ki(ta),Ci(ta,t)}function aa(){ki(ta),ki(na),ki(ra)}function sa(e){ia(ra.current);var t=ia(ta.current),n=ue(t,e.type);t!==n&&(Ci(na,e),Ci(ta,n))}function la(e){na.current===e&&(ki(ta),ki(na))}var ua=Si(0);function ca(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ha=[];function da(){for(var e=0;e<ha.length;e++)ha[e]._workInProgressVersionPrimary=null;ha.length=0}var fa=x.ReactCurrentDispatcher,pa=x.ReactCurrentBatchConfig,va=0,ma=null,ga=null,ya=null,ba=!1,_a=!1,xa=0,Ea=0;function wa(){throw Error(a(321))}function Ta(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function Sa(e,t,n,r,i,o){if(va=o,ma=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fa.current=null===e||null===e.memoizedState?ls:us,e=n(r,i),_a){o=0;do{if(_a=!1,xa=0,25<=o)throw Error(a(301));o+=1,ya=ga=null,t.updateQueue=null,fa.current=cs,e=n(r,i)}while(_a)}if(fa.current=ss,t=null!==ga&&null!==ga.next,va=0,ya=ga=ma=null,ba=!1,t)throw Error(a(300));return e}function ka(){var e=0!==xa;return xa=0,e}function Ca(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ya?ma.memoizedState=ya=e:ya=ya.next=e,ya}function Aa(){if(null===ga){var e=ma.alternate;e=null!==e?e.memoizedState:null}else e=ga.next;var t=null===ya?ma.memoizedState:ya.next;if(null!==t)ya=t,ga=e;else{if(null===e)throw Error(a(310));e={memoizedState:(ga=e).memoizedState,baseState:ga.baseState,baseQueue:ga.baseQueue,queue:ga.queue,next:null},null===ya?ma.memoizedState=ya=e:ya=ya.next=e}return ya}function Ia(e,t){return"function"===typeof t?t(e):t}function Oa(e){var t=Aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=ga,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,u=null,c=o;do{var h=c.lane;if((va&h)===h)null!==u&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===u?(l=u=d,s=r):u=u.next=d,ma.lanes|=h,Fl|=h}c=c.next}while(null!==c&&c!==o);null===u?s=r:u.next=l,lr(r,t.memoizedState)||(_s=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=u,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ma.lanes|=o,Fl|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Pa(e){var t=Aa(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);lr(o,t.memoizedState)||(_s=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ma(){}function Ra(e,t){var n=ma,r=Aa(),i=t(),o=!lr(r.memoizedState,i);if(o&&(r.memoizedState=i,_s=!0),r=r.queue,Wa(La.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ya&&1&ya.memoizedState.tag){if(n.flags|=2048,Ha(9,Da.bind(null,n,r,i,t),void 0,null),null===Ol)throw Error(a(349));0!==(30&va)||Na(n,t,i)}return i}function Na(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Da(e,t,n,r){t.value=n,t.getSnapshot=r,Fa(t)&&Ba(e)}function La(e,t,n){return n((function(){Fa(t)&&Ba(e)}))}function Fa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Ba(e){var t=Po(e,1);null!==t&&ru(t,e,1,-1)}function Ua(e){var t=Ca();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:e},t.queue=e,e=e.dispatch=rs.bind(null,ma,e),[t.memoizedState,e]}function Ha(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ma.updateQueue)?(t={lastEffect:null,stores:null},ma.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function ja(){return Aa().memoizedState}function za(e,t,n,r){var i=Ca();ma.flags|=e,i.memoizedState=Ha(1|t,n,void 0,void 0===r?null:r)}function Va(e,t,n,r){var i=Aa();r=void 0===r?null:r;var o=void 0;if(null!==ga){var a=ga.memoizedState;if(o=a.destroy,null!==r&&Ta(r,a.deps))return void(i.memoizedState=Ha(t,n,o,r))}ma.flags|=e,i.memoizedState=Ha(1|t,n,o,r)}function Ga(e,t){return za(8390656,8,e,t)}function Wa(e,t){return Va(2048,8,e,t)}function Xa(e,t){return Va(4,2,e,t)}function Ya(e,t){return Va(4,4,e,t)}function Ka(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qa(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Va(4,4,Ka.bind(null,t,e),n)}function Za(){}function $a(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ta(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Ta(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ja(e,t,n){return 0===(21&va)?(e.baseState&&(e.baseState=!1,_s=!0),e.memoizedState=n):(lr(n,t)||(n=mt(),ma.lanes|=n,Fl|=n,e.baseState=!0),t)}function es(e,t){var n=_t;_t=0!==n&&4>n?n:4,e(!0);var r=pa.transition;pa.transition={};try{e(!1),t()}finally{_t=n,pa.transition=r}}function ts(){return Aa().memoizedState}function ns(e,t,n){var r=nu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},is(e))os(t,n);else if(null!==(n=Oo(e,t,n,r))){ru(n,e,r,tu()),as(n,t,r)}}function rs(e,t,n){var r=nu(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(is(e))os(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,lr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Io(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(u){}null!==(n=Oo(e,t,i,r))&&(ru(n,e,r,i=tu()),as(n,t,r))}}function is(e){var t=e.alternate;return e===ma||null!==t&&t===ma}function os(e,t){_a=ba=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function as(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,bt(e,n)}}var ss={readContext:Co,useCallback:wa,useContext:wa,useEffect:wa,useImperativeHandle:wa,useInsertionEffect:wa,useLayoutEffect:wa,useMemo:wa,useReducer:wa,useRef:wa,useState:wa,useDebugValue:wa,useDeferredValue:wa,useTransition:wa,useMutableSource:wa,useSyncExternalStore:wa,useId:wa,unstable_isNewReconciler:!1},ls={readContext:Co,useCallback:function(e,t){return Ca().memoizedState=[e,void 0===t?null:t],e},useContext:Co,useEffect:Ga,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,za(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return za(4194308,4,e,t)},useInsertionEffect:function(e,t){return za(4,2,e,t)},useMemo:function(e,t){var n=Ca();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ca();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=ns.bind(null,ma,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ca().memoizedState=e},useState:Ua,useDebugValue:Za,useDeferredValue:function(e){return Ca().memoizedState=e},useTransition:function(){var e=Ua(!1),t=e[0];return e=es.bind(null,e[1]),Ca().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ma,i=Ca();if(oo){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ol)throw Error(a(349));0!==(30&va)||Na(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Ga(La.bind(null,r,o,e),[e]),r.flags|=2048,Ha(9,Da.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ca(),t=Ol.identifierPrefix;if(oo){var n=Qi;t=":"+t+"R"+(n=($i&~(1<<32-st($i)-1)).toString(32)+n),0<(n=xa++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ea++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},us={readContext:Co,useCallback:$a,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Xa,useLayoutEffect:Ya,useMemo:Qa,useReducer:Oa,useRef:ja,useState:function(){return Oa(Ia)},useDebugValue:Za,useDeferredValue:function(e){return Ja(Aa(),ga.memoizedState,e)},useTransition:function(){return[Oa(Ia)[0],Aa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1},cs={readContext:Co,useCallback:$a,useContext:Co,useEffect:Wa,useImperativeHandle:qa,useInsertionEffect:Xa,useLayoutEffect:Ya,useMemo:Qa,useReducer:Pa,useRef:ja,useState:function(){return Pa(Ia)},useDebugValue:Za,useDeferredValue:function(e){var t=Aa();return null===ga?t.memoizedState=e:Ja(t,ga.memoizedState,e)},useTransition:function(){return[Pa(Ia)[0],Aa().memoizedState]},useMutableSource:Ma,useSyncExternalStore:Ra,useId:ts,unstable_isNewReconciler:!1};function hs(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function ds(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}var fs="function"===typeof WeakMap?WeakMap:Map;function ps(e,t,n){(n=Do(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Wl||(Wl=!0,Xl=r)},n}function vs(e,t,n){(n=Do(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof r&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fs;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=ku.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ys(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Do(-1,1)).tag=2,Lo(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var bs=x.ReactCurrentOwner,_s=!1;function xs(e,t,n,r){t.child=null===e?Jo(t,null,n,r):Qo(t,e.child,n,r)}function Es(e,t,n,r,i){n=n.render;var o=t.ref;return ko(t,i),r=Sa(e,t,n,r,o,i),n=ka(),null===e||_s?(oo&&n&&to(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function ws(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Ru(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Du(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ts(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ur)(a,r)&&e.ref===t.ref)return Ws(e,t,i)}return t.flags|=1,(e=Nu(o,r)).ref=t.ref,e.return=t,t.child=e}function Ts(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ur(o,r)&&e.ref===t.ref){if(_s=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Ws(e,t,i);0!==(131072&e.flags)&&(_s=!0)}}return Cs(e,t,n,r,i)}function Ss(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Nl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Nl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Nl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Nl,Rl),Rl|=r;return xs(e,t,i,n),t.child}function ks(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var o=Ri(n)?Pi:Ii.current;return o=Mi(t,o),ko(t,i),n=Sa(e,t,n,r,o,i),r=ka(),null===e||_s?(oo&&r&&to(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ws(e,t,i))}function As(e,t,n,r,i){if(Ri(n)){var o=!0;Fi(t)}else o=!1;if(ko(t,i),null===t.stateNode)Gs(e,t),Wo(t,n,r),Yo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;"object"===typeof u&&null!==u?u=Co(u):u=Mi(t,u=Ri(n)?Pi:Ii.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==u)&&Xo(t,a,r,u),Mo=!1;var d=t.memoizedState;a.state=d,Uo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Oi.current||Mo?("function"===typeof c&&(zo(t,n,c,r),l=t.memoizedState),(s=Mo||Go(t,n,s,r,d,l,u))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,No(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:yo(t.type,s),a.props=u,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Co(l):l=Mi(t,l=Ri(n)?Pi:Ii.current);var f=n.getDerivedStateFromProps;(c="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Xo(t,a,r,l),Mo=!1,d=t.memoizedState,a.state=d,Uo(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||Oi.current||Mo?("function"===typeof f&&(zo(t,n,f,r),p=t.memoizedState),(u=Mo||Go(t,n,u,r,d,p,l)||!1)?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=u):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Is(e,t,n,r,o,i)}function Is(e,t,n,r,i,o){ks(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Bi(t,n,!1),Ws(e,t,o);r=t.stateNode,bs.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Qo(t,e.child,null,o),t.child=Qo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Bi(t,n,!0),t.child}function Os(e){var t=e.stateNode;t.pendingContext?Di(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Di(0,t.context,!1),oa(e,t.containerInfo)}function Ps(e,t,n,r,i){return vo(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Ms,Rs,Ns,Ds,Ls={dehydrated:null,treeContext:null,retryLane:0};function Fs(e){return{baseLanes:e,cachePool:null,transitions:null}}function Bs(e,t,n){var r,i=t.pendingProps,o=ua.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ci(ua,1&o),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Fu(l,i,0,null),e=Lu(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Fs(n),t.memoizedState=Ls,e):Us(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,s){if(n)return 256&t.flags?(t.flags&=-257,Hs(e,t,s,r=ds(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fu({mode:"visible",children:r.children},i,0,null),(o=Lu(o,i,s,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Qo(t,e.child,null,s),t.child.memoizedState=Fs(s),t.memoizedState=Ls,o);if(0===(1&t.mode))return Hs(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Hs(e,t,s,r=ds(o=Error(a(419)),r,void 0))}if(l=0!==(s&e.childLanes),_s||l){if(null!==(r=Ol)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Po(e,i),ru(r,e,i,-1))}return mu(),Hs(e,t,s,r=ds(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Au.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,io=ci(i.nextSibling),ro=t,oo=!0,ao=null,null!==e&&(Ki[qi++]=$i,Ki[qi++]=Qi,Ki[qi++]=Zi,$i=e.id,Qi=e.overflow,Zi=t),t=Us(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,o,n);if(s){s=i.fallback,l=t.mode,r=(o=e.child).sibling;var u={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=u,t.deletions=null):(i=Nu(o,u)).subtreeFlags=14680064&o.subtreeFlags,null!==r?s=Nu(r,s):(s=Lu(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Fs(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=Ls,i}return e=(s=e.child).sibling,i=Nu(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Us(e,t){return(t=Fu({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Hs(e,t,n,r){return null!==r&&mo(r),Qo(t,e.child,null,n),(e=Us(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function js(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),So(e.return,t,n)}function zs(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Vs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ua.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&js(e,n,t);else if(19===e.tag)js(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ua,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ca(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zs(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ca(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zs(t,!0,n,null,o);break;case"together":zs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ws(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Nu(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Nu(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xs(e,t){if(!oo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ys(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ks(e,t,n){var r=t.pendingProps;switch(no(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ys(t),null;case 1:case 17:return Ri(t.type)&&Ni(),Ys(t),null;case 3:return r=t.stateNode,aa(),ki(Oi),ki(Ii),da(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fo(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ao&&(su(ao),ao=null))),Rs(e,t),Ys(t),null;case 5:la(t);var i=ia(ra.current);if(n=t.type,null!==e&&null!=t.stateNode)Ns(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Ys(t),null}if(e=ia(ta.current),fo(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[fi]=t,r[pi]=o,e=0!==(1&t.mode),n){case"dialog":Hr("cancel",r),Hr("close",r);break;case"iframe":case"object":case"embed":Hr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Hr(Lr[i],r);break;case"source":Hr("error",r);break;case"img":case"image":case"link":Hr("error",r),Hr("load",r);break;case"details":Hr("toggle",r);break;case"input":$(r,o),Hr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Hr("invalid",r);break;case"textarea":oe(r,o),Hr("invalid",r)}for(var s in be(n,o),i=null,o)if(o.hasOwnProperty(s)){var u=o[s];"children"===s?"string"===typeof u?r.textContent!==u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",u]):"number"===typeof u&&r.textContent!==""+u&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,u,e),i=["children",""+u]):l.hasOwnProperty(s)&&null!=u&&"onScroll"===s&&Hr("scroll",r)}switch(n){case"input":Y(r),ee(r,o,!0);break;case"textarea":Y(r),se(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=ei)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[fi]=t,e[pi]=r,Ms(e,t,!1,!1),t.stateNode=e;e:{switch(s=_e(n,r),n){case"dialog":Hr("cancel",e),Hr("close",e),i=r;break;case"iframe":case"object":case"embed":Hr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Hr(Lr[i],e);i=r;break;case"source":Hr("error",e),i=r;break;case"img":case"image":case"link":Hr("error",e),Hr("load",e),i=r;break;case"details":Hr("toggle",e),i=r;break;case"input":$(e,r),i=Z(e,r),Hr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=B({},r,{value:void 0}),Hr("invalid",e);break;case"textarea":oe(e,r),i=ie(e,r),Hr("invalid",e)}for(o in be(n,i),u=i)if(u.hasOwnProperty(o)){var c=u[o];"style"===o?ge(e,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&de(e,c):"children"===o?"string"===typeof c?("textarea"!==n||""!==c)&&fe(e,c):"number"===typeof c&&fe(e,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(l.hasOwnProperty(o)?null!=c&&"onScroll"===o&&Hr("scroll",e):null!=c&&_(e,o,c,s))}switch(n){case"input":Y(e),ee(e,r,!1);break;case"textarea":Y(e),se(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?re(e,!!r.multiple,o,!1):null!=r.defaultValue&&re(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=ei)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ys(t),null;case 6:if(e&&null!=t.stateNode)Ds(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=ia(ra.current),ia(ta.current),fo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fi]=t,(o=r.nodeValue!==n)&&null!==(e=ro))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[fi]=t,t.stateNode=r}return Ys(t),null;case 13:if(ki(ua),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(oo&&null!==io&&0!==(1&t.mode)&&0===(128&t.flags))po(),vo(),t.flags|=98560,o=!1;else if(o=fo(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[fi]=t}else vo(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ys(t),o=!1}else null!==ao&&(su(ao),ao=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ua.current)?0===Dl&&(Dl=3):mu())),null!==t.updateQueue&&(t.flags|=4),Ys(t),null);case 4:return aa(),Rs(e,t),null===e&&Vr(t.stateNode.containerInfo),Ys(t),null;case 10:return To(t.type._context),Ys(t),null;case 19:if(ki(ua),null===(o=t.memoizedState))return Ys(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Xs(o,!1);else{if(0!==Dl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=ca(e))){for(t.flags|=128,Xs(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ua,1&ua.current|2),t.child}e=e.sibling}null!==o.tail&&Qe()>Vl&&(t.flags|=128,r=!0,Xs(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ca(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xs(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!oo)return Ys(t),null}else 2*Qe()-o.renderingStartTime>Vl&&1073741824!==n&&(t.flags|=128,r=!0,Xs(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Qe(),t.sibling=null,n=ua.current,Ci(ua,r?1&n|2:1&n),t):(Ys(t),null);case 22:case 23:return du(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ys(t),6&t.subtreeFlags&&(t.flags|=8192)):Ys(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function qs(e,t){switch(no(t),t.tag){case 1:return Ri(t.type)&&Ni(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return aa(),ki(Oi),ki(Ii),da(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return la(t),null;case 13:if(ki(ua),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));vo()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ki(ua),null;case 4:return aa(),null;case 10:return To(t.type._context),null;case 22:case 23:return du(),null;default:return null}}Ms=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ns=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ia(ta.current);var o,a=null;switch(n){case"input":i=Z(e,i),r=Z(e,r),a=[];break;case"select":i=B({},i,{value:void 0}),r=B({},r,{value:void 0}),a=[];break;case"textarea":i=ie(e,i),r=ie(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=ei)}for(c in be(n,r),n=null,i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&null!=i[c])if("style"===c){var s=i[c];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(l.hasOwnProperty(c)?a||(a=[]):(a=a||[]).push(c,null));for(c in r){var u=r[c];if(s=null!=i?i[c]:void 0,r.hasOwnProperty(c)&&u!==s&&(null!=u||null!=s))if("style"===c)if(s){for(o in s)!s.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&s[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(a||(a=[]),a.push(c,n)),n=u;else"dangerouslySetInnerHTML"===c?(u=u?u.__html:void 0,s=s?s.__html:void 0,null!=u&&s!==u&&(a=a||[]).push(c,u)):"children"===c?"string"!==typeof u&&"number"!==typeof u||(a=a||[]).push(c,""+u):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(l.hasOwnProperty(c)?(null!=u&&"onScroll"===c&&Hr("scroll",e),a||s===u||(a=[])):(a=a||[]).push(c,u))}n&&(a=a||[]).push("style",n);var c=a;(t.updateQueue=c)&&(t.flags|=4)}},Ds=function(e,t,n,r){n!==r&&(t.flags|=4)};var Zs=!1,$s=!1,Qs="function"===typeof WeakSet?WeakSet:Set,Js=null;function el(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Su(e,t,r)}else n.current=null}function tl(e,t,n){try{n()}catch(r){Su(e,t,r)}}var nl=!1;function rl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&tl(t,n,o)}i=i.next}while(i!==r)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ol(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[fi],delete t[pi],delete t[mi],delete t[gi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function sl(e){return 5===e.tag||3===e.tag||4===e.tag}function ll(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=ei));else if(4!==r&&null!==(e=e.child))for(ul(e,t,n),e=e.sibling;null!==e;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var hl=null,dl=!1;function fl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(ot,n)}catch(s){}switch(n.tag){case 5:$s||el(n,t);case 6:var r=hl,i=dl;hl=null,fl(e,t,n),dl=i,null!==(hl=r)&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):hl.removeChild(n.stateNode));break;case 18:null!==hl&&(dl?(e=hl,n=n.stateNode,8===e.nodeType?ui(e.parentNode,n):1===e.nodeType&&ui(e,n),Vt(e)):ui(hl,n.stateNode));break;case 4:r=hl,i=dl,hl=n.stateNode.containerInfo,dl=!0,fl(e,t,n),hl=r,dl=i;break;case 0:case 11:case 14:case 15:if(!$s&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&tl(n,t,a),i=i.next}while(i!==r)}fl(e,t,n);break;case 1:if(!$s&&(el(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Su(n,t,s)}fl(e,t,n);break;case 21:fl(e,t,n);break;case 22:1&n.mode?($s=(r=$s)||null!==n.memoizedState,fl(e,t,n),$s=r):fl(e,t,n);break;default:fl(e,t,n)}}function vl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qs),t.forEach((function(t){var r=Iu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:hl=l.stateNode,dl=!1;break e;case 3:case 4:hl=l.stateNode.containerInfo,dl=!0;break e}l=l.return}if(null===hl)throw Error(a(160));pl(o,s,i),hl=null,dl=!1;var u=i.alternate;null!==u&&(u.return=null),i.return=null}catch(c){Su(i,t,c)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,n){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(n,e),yl(e),4&i){try{rl(3,e,e.return),il(3,e)}catch(t){Su(e,e.return,t)}try{rl(5,e,e.return)}catch(t){Su(e,e.return,t)}}break;case 1:ml(n,e),yl(e),512&i&&null!==r&&el(r,r.return);break;case 5:if(ml(n,e),yl(e),512&i&&null!==r&&el(r,r.return),32&e.flags){var o=e.stateNode;try{fe(o,"")}catch(t){Su(e,e.return,t)}}if(4&i&&null!=(o=e.stateNode)){var s=e.memoizedProps,l=null!==r?r.memoizedProps:s,u=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===u&&"radio"===s.type&&null!=s.name&&Q(o,s),_e(u,l);var h=_e(u,s);for(l=0;l<c.length;l+=2){var d=c[l],f=c[l+1];"style"===d?ge(o,f):"dangerouslySetInnerHTML"===d?de(o,f):"children"===d?fe(o,f):_(o,d,f,h)}switch(u){case"input":J(o,s);break;case"textarea":ae(o,s);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!s.multiple;var v=s.value;null!=v?re(o,!!s.multiple,v,!1):p!==!!s.multiple&&(null!=s.defaultValue?re(o,!!s.multiple,s.defaultValue,!0):re(o,!!s.multiple,s.multiple?[]:"",!1))}o[pi]=s}catch(t){Su(e,e.return,t)}}break;case 6:if(ml(n,e),yl(e),4&i){if(null===e.stateNode)throw Error(a(162));o=e.stateNode,s=e.memoizedProps;try{o.nodeValue=s}catch(t){Su(e,e.return,t)}}break;case 3:if(ml(n,e),yl(e),4&i&&null!==r&&r.memoizedState.isDehydrated)try{Vt(n.containerInfo)}catch(t){Su(e,e.return,t)}break;case 4:default:ml(n,e),yl(e);break;case 13:ml(n,e),yl(e),8192&(o=e.child).flags&&(s=null!==o.memoizedState,o.stateNode.isHidden=s,!s||null!==o.alternate&&null!==o.alternate.memoizedState||(zl=Qe())),4&i&&vl(e);break;case 22:if(d=null!==r&&null!==r.memoizedState,1&e.mode?($s=(h=$s)||d,ml(n,e),$s=h):ml(n,e),yl(e),8192&i){if(h=null!==e.memoizedState,(e.stateNode.isHidden=h)&&!d&&0!==(1&e.mode))for(Js=e,d=e.child;null!==d;){for(f=Js=d;null!==Js;){switch(v=(p=Js).child,p.tag){case 0:case 11:case 14:case 15:rl(4,p,p.return);break;case 1:el(p,p.return);var m=p.stateNode;if("function"===typeof m.componentWillUnmount){i=p,r=p.return;try{n=i,m.props=n.memoizedProps,m.state=n.memoizedState,m.componentWillUnmount()}catch(t){Su(i,r,t)}}break;case 5:el(p,p.return);break;case 22:if(null!==p.memoizedState){El(f);continue}}null!==v?(v.return=p,Js=v):El(f)}d=d.sibling}e:for(d=null,f=e;;){if(5===f.tag){if(null===d){d=f;try{o=f.stateNode,h?"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none":(u=f.stateNode,l=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,u.style.display=me("display",l))}catch(t){Su(e,e.return,t)}}}else if(6===f.tag){if(null===d)try{f.stateNode.nodeValue=h?"":f.memoizedProps}catch(t){Su(e,e.return,t)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:ml(n,e),yl(e),4&i&&vl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(sl(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(fe(i,""),r.flags&=-33),cl(e,ll(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ul(e,ll(e),o);break;default:throw Error(a(161))}}catch(s){Su(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function bl(e,t,n){Js=e,_l(e,t,n)}function _l(e,t,n){for(var r=0!==(1&e.mode);null!==Js;){var i=Js,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Zs;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||$s;s=Zs;var u=$s;if(Zs=a,($s=l)&&!u)for(Js=i;null!==Js;)l=(a=Js).child,22===a.tag&&null!==a.memoizedState?wl(i):null!==l?(l.return=a,Js=l):wl(i);for(;null!==o;)Js=o,_l(o,t,n),o=o.sibling;Js=i,Zs=s,$s=u}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Js=o):xl(e)}}function xl(e){for(;null!==Js;){var t=Js;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$s||il(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$s)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:yo(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ho(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var h=c.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Vt(d)}}}break;default:throw Error(a(163))}$s||512&t.flags&&ol(t)}catch(f){Su(t,t.return,f)}}if(t===e){Js=null;break}if(null!==(n=t.sibling)){n.return=t.return,Js=n;break}Js=t.return}}function El(e){for(;null!==Js;){var t=Js;if(t===e){Js=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Js=n;break}Js=t.return}}function wl(e){for(;null!==Js;){var t=Js;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Su(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Su(t,i,l)}}var o=t.return;try{ol(t)}catch(l){Su(t,o,l)}break;case 5:var a=t.return;try{ol(t)}catch(l){Su(t,a,l)}}}catch(l){Su(t,t.return,l)}if(t===e){Js=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Js=s;break}Js=t.return}}var Tl,Sl=Math.ceil,kl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Al=x.ReactCurrentBatchConfig,Il=0,Ol=null,Pl=null,Ml=0,Rl=0,Nl=Si(0),Dl=0,Ll=null,Fl=0,Bl=0,Ul=0,Hl=null,jl=null,zl=0,Vl=1/0,Gl=null,Wl=!1,Xl=null,Yl=null,Kl=!1,ql=null,Zl=0,$l=0,Ql=null,Jl=-1,eu=0;function tu(){return 0!==(6&Il)?Qe():-1!==Jl?Jl:Jl=Qe()}function nu(e){return 0===(1&e.mode)?1:0!==(2&Il)&&0!==Ml?Ml&-Ml:null!==go.transition?(0===eu&&(eu=mt()),eu):0!==(e=_t)?e:e=void 0===(e=window.event)?16:$t(e.type)}function ru(e,t,n,r){if(50<$l)throw $l=0,Ql=null,Error(a(185));yt(e,n,r),0!==(2&Il)&&e===Ol||(e===Ol&&(0===(2&Il)&&(Bl|=n),4===Dl&&lu(e,Ml)),iu(e,r),1===n&&0===Il&&0===(1&t.mode)&&(Vl=Qe()+500,Hi&&Vi()))}function iu(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-st(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=pt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=ft(e,e===Ol?Ml:0);if(0===r)null!==n&&qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&qe(n),1===t)0===e.tag?function(e){Hi=!0,zi(e)}(uu.bind(null,e)):zi(uu.bind(null,e)),si((function(){0===(6&Il)&&Vi()})),n=null;else{switch(xt(r)){case 1:n=et;break;case 4:n=tt;break;case 16:default:n=nt;break;case 536870912:n=it}n=Ou(n,ou.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ou(e,t){if(Jl=-1,eu=0,0!==(6&Il))throw Error(a(327));var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=ft(e,e===Ol?Ml:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gu(e,r);else{t=r;var i=Il;Il|=2;var o=vu();for(Ol===e&&Ml===t||(Gl=null,Vl=Qe()+500,fu(e,t));;)try{bu();break}catch(l){pu(e,l)}wo(),kl.current=o,Il=i,null!==Pl?t=0:(Ol=null,Ml=0,t=Dl)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=au(e,i))),1===t)throw n=Ll,fu(e,0),lu(e,r),iu(e,Qe()),n;if(6===t)lu(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!lr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gu(e,r))&&(0!==(o=vt(e))&&(r=o,t=au(e,o))),1===t))throw n=Ll,fu(e,0),lu(e,r),iu(e,Qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Eu(e,jl,Gl);break;case 3:if(lu(e,r),(130023424&r)===r&&10<(t=zl+500-Qe())){if(0!==ft(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ii(Eu.bind(null,e,jl,Gl),t);break}Eu(e,jl,Gl);break;case 4:if(lu(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-st(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=Qe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ii(Eu.bind(null,e,jl,Gl),r);break}Eu(e,jl,Gl);break;default:throw Error(a(329))}}}return iu(e,Qe()),e.callbackNode===n?ou.bind(null,e):null}function au(e,t){var n=Hl;return e.current.memoizedState.isDehydrated&&(fu(e,t).flags|=256),2!==(e=gu(e,t))&&(t=jl,jl=n,null!==t&&su(t)),e}function su(e){null===jl?jl=e:jl.push.apply(jl,e)}function lu(e,t){for(t&=~Ul,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-st(t),r=1<<n;e[n]=-1,t&=~r}}function uu(e){if(0!==(6&Il))throw Error(a(327));wu();var t=ft(e,0);if(0===(1&t))return iu(e,Qe()),null;var n=gu(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=au(e,r))}if(1===n)throw n=Ll,fu(e,0),lu(e,t),iu(e,Qe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Eu(e,jl,Gl),iu(e,Qe()),null}function cu(e,t){var n=Il;Il|=1;try{return e(t)}finally{0===(Il=n)&&(Vl=Qe()+500,Hi&&Vi())}}function hu(e){null!==ql&&0===ql.tag&&0===(6&Il)&&wu();var t=Il;Il|=1;var n=Al.transition,r=_t;try{if(Al.transition=null,_t=1,e)return e()}finally{_t=r,Al.transition=n,0===(6&(Il=t))&&Vi()}}function du(){Rl=Nl.current,ki(Nl)}function fu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,oi(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(no(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ni();break;case 3:aa(),ki(Oi),ki(Ii),da();break;case 5:la(r);break;case 4:aa();break;case 13:case 19:ki(ua);break;case 10:To(r.type._context);break;case 22:case 23:du()}n=n.return}if(Ol=e,Pl=e=Nu(e.current,null),Ml=Rl=t,Dl=0,Ll=null,Ul=Bl=Fl=0,jl=Hl=null,null!==Ao){for(t=0;t<Ao.length;t++)if(null!==(r=(n=Ao[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ao=null}return e}function pu(e,t){for(;;){var n=Pl;try{if(wo(),fa.current=ss,ba){for(var r=ma.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ba=!1}if(va=0,ya=ga=ma=null,_a=!1,xa=0,Cl.current=null,null===n||null===n.return){Dl=1,Ll=t,Pl=null;break}e:{var o=e,s=n.return,l=n,u=t;if(t=Ml,l.flags|=32768,null!==u&&"object"===typeof u&&"function"===typeof u.then){var c=u,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,ys(p,s,l,0,t),1&p.mode&&ms(o,c,t),u=c;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(u),t.updateQueue=m}else v.add(u);break e}if(0===(1&t)){ms(o,c,t),mu();break e}u=Error(a(426))}else if(oo&&1&l.mode){var g=gs(s);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),ys(g,s,l,0,t),mo(hs(u,l));break e}}o=u=hs(u,l),4!==Dl&&(Dl=2),null===Hl?Hl=[o]:Hl.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Bo(o,ps(0,u,t));break e;case 1:l=u;var y=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Yl||!Yl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,Bo(o,vs(o,l,t));break e}}o=o.return}while(null!==o)}xu(n)}catch(_){t=_,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function vu(){var e=kl.current;return kl.current=ss,null===e?ss:e}function mu(){0!==Dl&&3!==Dl&&2!==Dl||(Dl=4),null===Ol||0===(268435455&Fl)&&0===(268435455&Bl)||lu(Ol,Ml)}function gu(e,t){var n=Il;Il|=2;var r=vu();for(Ol===e&&Ml===t||(Gl=null,fu(e,t));;)try{yu();break}catch(i){pu(e,i)}if(wo(),Il=n,kl.current=r,null!==Pl)throw Error(a(261));return Ol=null,Ml=0,Dl}function yu(){for(;null!==Pl;)_u(Pl)}function bu(){for(;null!==Pl&&!Ze();)_u(Pl)}function _u(e){var t=Tl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xu(e):Pl=t,Cl.current=null}function xu(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ks(n,t,Rl)))return void(Pl=n)}else{if(null!==(n=qs(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Dl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Dl&&(Dl=5)}function Eu(e,t,n){var r=_t,i=Al.transition;try{Al.transition=null,_t=1,function(e,t,n,r){do{wu()}while(null!==ql);if(0!==(6&Il))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-st(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Ol&&(Pl=Ol=null,Ml=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ou(nt,(function(){return wu(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Al.transition,Al.transition=null;var s=_t;_t=1;var l=Il;Il|=4,Cl.current=null,function(e,t){if(ti=Wt,pr(e=fr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,l=-1,u=-1,c=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==o||0!==r&&3!==d.nodeType||(u=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++c===i&&(l=s),f===o&&++h===r&&(u=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===u?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ni={focusedElem:e,selectionRange:n},Wt=!1,Js=t;null!==Js;)if(e=(t=Js).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Js=e;else for(;null!==Js;){t=Js;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,g=v.memoizedState,y=t.stateNode,b=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:yo(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var _=t.stateNode.containerInfo;1===_.nodeType?_.textContent="":9===_.nodeType&&_.documentElement&&_.removeChild(_.documentElement);break;default:throw Error(a(163))}}catch(x){Su(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Js=e;break}Js=t.return}v=nl,nl=!1}(e,n),gl(n,e),vr(ni),Wt=!!ti,ni=ti=null,e.current=n,bl(n,e,i),$e(),Il=l,_t=s,Al.transition=o}else e.current=n;if(Kl&&(Kl=!1,ql=e,Zl=i),o=e.pendingLanes,0===o&&(Yl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(ot,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),iu(e,Qe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Wl)throw Wl=!1,e=Xl,Xl=null,e;0!==(1&Zl)&&0!==e.tag&&wu(),o=e.pendingLanes,0!==(1&o)?e===Ql?$l++:($l=0,Ql=e):$l=0,Vi()}(e,t,n,r)}finally{Al.transition=i,_t=r}return null}function wu(){if(null!==ql){var e=xt(Zl),t=Al.transition,n=_t;try{if(Al.transition=null,_t=16>e?16:e,null===ql)var r=!1;else{if(e=ql,ql=null,Zl=0,0!==(6&Il))throw Error(a(331));var i=Il;for(Il|=4,Js=e.current;null!==Js;){var o=Js,s=o.child;if(0!==(16&Js.flags)){var l=o.deletions;if(null!==l){for(var u=0;u<l.length;u++){var c=l[u];for(Js=c;null!==Js;){var h=Js;switch(h.tag){case 0:case 11:case 15:rl(8,h,o)}var d=h.child;if(null!==d)d.return=h,Js=d;else for(;null!==Js;){var f=(h=Js).sibling,p=h.return;if(al(h),h===c){Js=null;break}if(null!==f){f.return=p,Js=f;break}Js=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Js=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,Js=s;else e:for(;null!==Js;){if(0!==(2048&(o=Js).flags))switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,Js=y;break e}Js=o.return}}var b=e.current;for(Js=b;null!==Js;){var _=(s=Js).child;if(0!==(2064&s.subtreeFlags)&&null!==_)_.return=s,Js=_;else e:for(s=b;null!==Js;){if(0!==(2048&(l=Js).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(E){Su(l,l.return,E)}if(l===s){Js=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Js=x;break e}Js=l.return}}if(Il=i,Vi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(ot,e)}catch(E){}r=!0}return r}finally{_t=n,Al.transition=t}}return!1}function Tu(e,t,n){e=Lo(e,t=ps(0,t=hs(n,t),1),1),t=tu(),null!==e&&(yt(e,1,t),iu(e,t))}function Su(e,t,n){if(3===e.tag)Tu(e,e,n);else for(;null!==t;){if(3===t.tag){Tu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Yl||!Yl.has(r))){t=Lo(t,e=vs(t,e=hs(n,e),1),1),e=tu(),null!==t&&(yt(t,1,e),iu(t,e));break}}t=t.return}}function ku(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tu(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Ml&n)===n&&(4===Dl||3===Dl&&(130023424&Ml)===Ml&&500>Qe()-zl?fu(e,0):Ul|=n),iu(e,t)}function Cu(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ht,0===(130023424&(ht<<=1))&&(ht=4194304)));var n=tu();null!==(e=Po(e,t))&&(yt(e,t,n),iu(e,n))}function Au(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cu(e,n)}function Iu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Cu(e,n)}function Ou(e,t){return Ke(e,t)}function Pu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mu(e,t,n,r){return new Pu(e,t,n,r)}function Ru(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Nu(e,t){var n=e.alternate;return null===n?((n=Mu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Du(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)Ru(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case T:return Lu(n.children,i,o,t);case S:s=8,i|=8;break;case k:return(e=Mu(12,n,t,2|i)).elementType=k,e.lanes=o,e;case O:return(e=Mu(13,n,t,i)).elementType=O,e.lanes=o,e;case P:return(e=Mu(19,n,t,i)).elementType=P,e.lanes=o,e;case N:return Fu(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case A:s=9;break e;case I:s=11;break e;case M:s=14;break e;case R:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Mu(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lu(e,t,n,r){return(e=Mu(7,e,r,t)).lanes=n,e}function Fu(e,t,n,r){return(e=Mu(22,e,r,t)).elementType=N,e.lanes=n,e.stateNode={isHidden:!1},e}function Bu(e,t,n){return(e=Mu(6,e,null,t)).lanes=n,e}function Uu(e,t,n){return(t=Mu(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Hu(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ju(e,t,n,r,i,o,a,s,l){return e=new Hu(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Mu(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ro(o),e}function zu(e){if(!e)return Ai;e:{if(Ve(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function Vu(e,t,n,r,i,o,a,s,l){return(e=ju(n,r,!0,e,0,o,0,s,l)).context=zu(null),n=e.current,(o=Do(r=tu(),i=nu(n))).callback=void 0!==t&&null!==t?t:null,Lo(n,o,i),e.current.lanes=i,yt(e,i,r),iu(e,r),e}function Gu(e,t,n,r){var i=t.current,o=tu(),a=nu(i);return n=zu(n),null===t.context?t.context=n:t.pendingContext=n,(t=Do(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Lo(i,t,a))&&(ru(e,i,a,o),Fo(e,i,a)),a}function Wu(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xu(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yu(e,t){Xu(e,t),(e=e.alternate)&&Xu(e,t)}Tl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Oi.current)_s=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return _s=!1,function(e,t,n){switch(t.tag){case 3:Os(t),vo();break;case 5:sa(t);break;case 1:Ri(t.type)&&Fi(t);break;case 4:oa(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(bo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ua,1&ua.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Bs(e,t,n):(Ci(ua,1&ua.current),null!==(e=Ws(e,t,n))?e.sibling:null);Ci(ua,1&ua.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ua,ua.current),r)break;return null;case 22:case 23:return t.lanes=0,Ss(e,t,n)}return Ws(e,t,n)}(e,t,n);_s=0!==(131072&e.flags)}else _s=!1,oo&&0!==(1048576&t.flags)&&eo(t,Yi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gs(e,t),e=t.pendingProps;var i=Mi(t,Ii.current);ko(t,n),i=Sa(null,t,r,e,i,n);var o=ka();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Fi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ro(t),i.updater=Vo,t.stateNode=i,i._reactInternals=t,Yo(t,r,e,n),t=Is(null,t,r,!0,o,n)):(t.tag=0,oo&&o&&to(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Ru(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===I)return 11;if(e===M)return 14}return 2}(r),e=yo(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=As(null,t,r,e,n);break e;case 11:t=Es(null,t,r,e,n);break e;case 14:t=ws(null,t,r,yo(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 1:return r=t.type,i=t.pendingProps,As(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 3:e:{if(Os(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,No(e,t),Uo(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ps(e,t,r,n,i=hs(Error(a(423)),t));break e}if(r!==i){t=Ps(e,t,r,n,i=hs(Error(a(424)),t));break e}for(io=ci(t.stateNode.containerInfo.firstChild),ro=t,oo=!0,ao=null,n=Jo(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(vo(),r===i){t=Ws(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return sa(t),null===e&&co(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,ri(r,i)?s=null:null!==o&&ri(r,o)&&(t.flags|=32),ks(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Bs(e,t,n);case 4:return oa(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Qo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Es(e,t,r,i=t.elementType===r?i:yo(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,Ci(bo,r._currentValue),r._currentValue=s,null!==o)if(lr(o.value,s)){if(o.children===i.children&&!Oi.current){t=Ws(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var u=l.firstContext;null!==u;){if(u.context===r){if(1===o.tag){(u=Do(-1,n&-n)).tag=2;var c=o.updateQueue;if(null!==c){var h=(c=c.shared).pending;null===h?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}o.lanes|=n,null!==(u=o.alternate)&&(u.lanes|=n),So(o.return,n,t),l.lanes|=n;break}u=u.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),So(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ko(t,n),r=r(i=Co(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=yo(r=t.type,t.pendingProps),ws(e,t,r,i=yo(r.type,i),n);case 15:return Ts(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:yo(r,i),Gs(e,t),t.tag=1,Ri(r)?(e=!0,Fi(t)):e=!1,ko(t,n),Wo(t,r,i),Yo(t,r,i,n),Is(null,t,r,!0,e,n);case 19:return Vs(e,t,n);case 22:return Ss(e,t,n)}throw Error(a(156,t.tag))};var Ku="function"===typeof reportError?reportError:function(e){};function qu(e){this._internalRoot=e}function Zu(e){this._internalRoot=e}function $u(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Ju(){}function ec(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Wu(a);s.call(e)}}Gu(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Wu(a);o.call(e)}}var a=Vu(t,r,e,0,null,!1,0,"",Ju);return e._reactRootContainer=a,e[vi]=a.current,Vr(8===e.nodeType?e.parentNode:e),hu(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Wu(l);s.call(e)}}var l=ju(e,0,!1,null,0,!1,0,"",Ju);return e._reactRootContainer=l,e[vi]=l.current,Vr(8===e.nodeType?e.parentNode:e),hu((function(){Gu(t,l,n,r)})),l}(n,t,e,i,r);return Wu(a)}Zu.prototype.render=qu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gu(e,t,null,null)},Zu.prototype.unmount=qu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;hu((function(){Gu(null,e,null,null)})),t[vi]=null}},Zu.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Nt.length&&0!==t&&t<Nt[n].priority;n++);Nt.splice(n,0,e),0===n&&Bt(e)}},Et=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(bt(t,1|n),iu(t,Qe()),0===(6&Il)&&(Vl=Qe()+500,Vi()))}break;case 13:hu((function(){var t=Po(e,1);if(null!==t){var n=tu();ru(t,e,1,n)}})),Yu(e,1)}},wt=function(e){if(13===e.tag){var t=Po(e,134217728);if(null!==t)ru(t,e,134217728,tu());Yu(e,134217728)}},Tt=function(e){if(13===e.tag){var t=nu(e),n=Po(e,t);if(null!==n)ru(n,e,t,tu());Yu(e,t)}},St=function(){return _t},kt=function(e,t){var n=_t;try{return _t=e,t()}finally{_t=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ei(r);if(!i)throw Error(a(90));K(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&re(e,!!n.multiple,t,!1)}},Ie=cu,Oe=hu;var tc={usingClientEntryPoint:!1,Events:[_i,xi,Ei,Ce,Ae,cu]},nc={findFiberByHostInstance:bi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rc={bundleType:nc.bundleType,version:nc.version,rendererPackageName:nc.rendererPackageName,rendererConfig:nc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Xe(e))?null:e.stateNode},findFiberByHostInstance:nc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ic=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ic.isDisabled&&ic.supportsFiber)try{ot=ic.inject(rc),at=ic}catch(he){}}n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tc,n.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$u(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},n.createRoot=function(e,t){if(!$u(e))throw Error(a(299));var n=!1,r="",i=Ku;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=ju(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,Vr(8===e.nodeType?e.parentNode:e),new qu(t)},n.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Xe(t))?null:e.stateNode},n.flushSync=function(e){return hu(e)},n.hydrate=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!0,n)},n.hydrateRoot=function(e,t,n){if(!$u(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",s=Ku;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Vu(t,null,e,1,null!=n?n:null,i,0,o,s),e[vi]=t.current,Vr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Zu(t)},n.render=function(e,t,n){if(!Qu(t))throw Error(a(200));return ec(null,e,t,!1,n)},n.unmountComponentAtNode=function(e){if(!Qu(e))throw Error(a(40));return!!e._reactRootContainer&&(hu((function(){ec(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},n.unstable_batchedUpdates=cu,n.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Qu(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return ec(e,t,n,!1,r)},n.version="18.2.0-next-9e3b772b8-20220608"},1739:function(e,t,n){"use strict";var r=n(1168);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},1168:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),e.exports=n(534)},5918:function(e,t,n){"use strict";var r=n(7313),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,n){var r,o={},u=null,c=null;for(r in void 0!==n&&(u=""+n),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:u,ref:c,props:o,_owner:s.current}}t.jsx=u,t.jsxs=u},306:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function g(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function y(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=g.prototype;var _=b.prototype=new y;_.constructor=b,v(_,g.prototype),_.isPureReactComponent=!0;var x=Array.isArray,E=Object.prototype.hasOwnProperty,w={current:null},T={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)E.call(t,i)&&!T.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+A(l,0):o,x(a)?(i="",null!=e&&(i=e.replace(C,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(k(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",x(e))for(var u=0;u<e.length;u++){var c=o+A(s=e[u],u);l+=I(s,t,i,c,a)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),u=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,c=o+A(s,u++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function O(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},R={transition:null},N={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:R,ReactCurrentOwner:w};t.Children={map:O,forEach:function(e,t,n){O(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return O(e,(function(){t++})),t},toArray:function(e){return O(e,(function(e){return e}))||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=o,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(u in t)E.call(t,u)&&!T.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==l?l[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=r;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.2.0"},7313:function(e,t,n){"use strict";e.exports=n(306)},6417:function(e,t,n){"use strict";e.exports=n(5918)},1299:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.autoprefix=void 0;var r,i=n(7827),o=(r=i)&&r.__esModule?r:{default:r},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var s={borderRadius:function(e){return{msBorderRadius:e,MozBorderRadius:e,OBorderRadius:e,WebkitBorderRadius:e,borderRadius:e}},boxShadow:function(e){return{msBoxShadow:e,MozBoxShadow:e,OBoxShadow:e,WebkitBoxShadow:e,boxShadow:e}},userSelect:function(e){return{WebkitTouchCallout:e,KhtmlUserSelect:e,MozUserSelect:e,msUserSelect:e,WebkitUserSelect:e,userSelect:e}},flex:function(e){return{WebkitBoxFlex:e,MozBoxFlex:e,WebkitFlex:e,msFlex:e,flex:e}},flexBasis:function(e){return{WebkitFlexBasis:e,flexBasis:e}},justifyContent:function(e){return{WebkitJustifyContent:e,justifyContent:e}},transition:function(e){return{msTransition:e,MozTransition:e,OTransition:e,WebkitTransition:e,transition:e}},transform:function(e){return{msTransform:e,MozTransform:e,OTransform:e,WebkitTransform:e,transform:e}},absolute:function(e){var t=e&&e.split(" ");return{position:"absolute",top:t&&t[0],right:t&&t[1],bottom:t&&t[2],left:t&&t[3]}},extend:function(e,t){var n=t[e];return n||{extend:e}}},l=t.autoprefix=function(e){var t={};return(0,o.default)(e,(function(e,n){var r={};(0,o.default)(e,(function(e,t){var n=s[t];n?r=a({},r,n(e)):r[t]=e})),t[n]=r})),t};t.default=l},83:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.active=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(7313),a=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.active=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return o=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(c))),l.state={active:!1},l.handleMouseDown=function(){return l.setState({active:!0})},l.handleMouseUp=function(){return l.setState({active:!1})},l.render=function(){return a.default.createElement(t,{onMouseDown:l.handleMouseDown,onMouseUp:l.handleMouseUp},a.default.createElement(e,i({},l.props,l.state)))},s(l,o)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=l},2610:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hover=void 0;var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(7313),a=(r=o)&&r.__esModule?r:{default:r};function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var l=t.hover=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var n,o,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var u=arguments.length,c=Array(u),h=0;h<u;h++)c[h]=arguments[h];return o=l=s(this,(n=r.__proto__||Object.getPrototypeOf(r)).call.apply(n,[this].concat(c))),l.state={hover:!1},l.handleMouseOver=function(){return l.setState({hover:!0})},l.handleMouseOut=function(){return l.setState({hover:!1})},l.render=function(){return a.default.createElement(t,{onMouseOver:l.handleMouseOver,onMouseOut:l.handleMouseOut},a.default.createElement(e,i({},l.props,l.state)))},s(l,o)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r}(a.default.Component)};t.default=l},8197:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenNames=void 0;var r=s(n(5406)),i=s(n(7827)),o=s(n(634)),a=s(n(3428));function s(e){return e&&e.__esModule?e:{default:e}}var l=t.flattenNames=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=[];return(0,a.default)(t,(function(t){Array.isArray(t)?e(t).map((function(e){return n.push(e)})):(0,o.default)(t)?(0,i.default)(t,(function(e,t){!0===e&&n.push(t),n.push(t+"-"+e)})):(0,r.default)(t)&&n.push(t)})),n};t.default=l},9584:function(e,t,n){"use strict";t.tz=void 0;var r=u(n(8197)),i=u(n(3417)),o=u(n(1299)),a=u(n(2610)),s=u(n(83)),l=u(n(6751));function u(e){return e&&e.__esModule?e:{default:e}}a.default,t.tz=a.default,s.default,l.default;var c=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];var s=(0,r.default)(n),l=(0,i.default)(e,s);return(0,o.default)(l)};t.ZP=c},6751:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e,t){var n={},r=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];n[e]=t};return 0===e&&r("first-child"),e===t-1&&r("last-child"),(0===e||e%2===0)&&r("even"),1===Math.abs(e%2)&&r("odd"),r("nth-child",e),n}},3417:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeClasses=void 0;var r=a(n(7827)),i=a(n(8504)),o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function a(e){return e&&e.__esModule?e:{default:e}}var s=t.mergeClasses=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.default&&(0,i.default)(e.default)||{};return t.map((function(t){var i=e[t];return i&&(0,r.default)(i,(function(e,t){n[t]||(n[t]={}),n[t]=o({},n[t],i[t])})),t})),n};t.default=s},3095:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>o(l,n))u<i&&0>o(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<i&&0>o(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var u=[],c=[],h=1,d=null,f=3,p=!1,v=!1,m=!1,g="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function _(e){for(var t=r(c);null!==t;){if(null===t.callback)i(c);else{if(!(t.startTime<=e))break;i(c),t.sortIndex=t.expirationTime,n(u,t)}t=r(c)}}function x(e){if(m=!1,_(e),!v)if(null!==r(u))v=!0,R(E);else{var t=r(c);null!==t&&N(x,t.startTime-e)}}function E(e,n){v=!1,m&&(m=!1,y(k),k=-1),p=!0;var o=f;try{for(_(n),d=r(u);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(u)&&i(u),_(n)}else i(u);d=r(u)}if(null!==d)var l=!0;else{var h=r(c);null!==h&&N(x,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,T=!1,S=null,k=-1,C=5,A=-1;function I(){return!(t.unstable_now()-A<C)}function O(){if(null!==S){var e=t.unstable_now();A=e;var n=!0;try{n=S(!0,e)}finally{n?w():(T=!1,S=null)}}else T=!1}if("function"===typeof b)w=function(){b(O)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,M=P.port2;P.port1.onmessage=O,w=function(){M.postMessage(null)}}else w=function(){g(O,0)};function R(e){S=e,T||(T=!0,w())}function N(e,n){k=g((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,R(E))},t.unstable_forceFrameRate=function(e){0>e||125<e||(C=0<e?Math.floor(1e3/e):5)},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(c,e),null===r(u)&&e===r(c)&&(m?(y(k),k=-1):m=!0,N(x,o-a))):(e.sortIndex=s,n(u,e),v||p||(v=!0,R(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},2224:function(e,t,n){"use strict";e.exports=n(3095)},6036:function(e,t,n){var r;e=n.nmd(e),function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof n.g&&n.g;o.global!==o&&o.window!==o&&o.self;var a,s=2147483647,l=36,u=1,c=26,h=38,d=700,f=72,p=128,v="-",m=/^xn--/,g=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,x=Math.floor,E=String.fromCharCode;function w(e){throw RangeError(b[e])}function T(e,t){for(var n=e.length,r=[];n--;)r[n]=t(e[n]);return r}function S(e,t){var n=e.split("@"),r="";return n.length>1&&(r=n[0]+"@",e=n[1]),r+T((e=e.replace(y,".")).split("."),t).join(".")}function k(e){for(var t,n,r=[],i=0,o=e.length;i<o;)(t=e.charCodeAt(i++))>=55296&&t<=56319&&i<o?56320==(64512&(n=e.charCodeAt(i++)))?r.push(((1023&t)<<10)+(1023&n)+65536):(r.push(t),i--):r.push(t);return r}function C(e){return T(e,(function(e){var t="";return e>65535&&(t+=E((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=E(e)})).join("")}function A(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var r=0;for(e=n?x(e/d):e>>1,e+=x(e/t);e>_*c>>1;r+=l)e=x(e/_);return x(r+(_+1)*e/(e+h))}function O(e){var t,n,r,i,o,a,h,d,m,g,y,b=[],_=e.length,E=0,T=p,S=f;for((n=e.lastIndexOf(v))<0&&(n=0),r=0;r<n;++r)e.charCodeAt(r)>=128&&w("not-basic"),b.push(e.charCodeAt(r));for(i=n>0?n+1:0;i<_;){for(o=E,a=1,h=l;i>=_&&w("invalid-input"),((d=(y=e.charCodeAt(i++))-48<10?y-22:y-65<26?y-65:y-97<26?y-97:l)>=l||d>x((s-E)/a))&&w("overflow"),E+=d*a,!(d<(m=h<=S?u:h>=S+c?c:h-S));h+=l)a>x(s/(g=l-m))&&w("overflow"),a*=g;S=I(E-o,t=b.length+1,0==o),x(E/t)>s-T&&w("overflow"),T+=x(E/t),E%=t,b.splice(E++,0,T)}return C(b)}function P(e){var t,n,r,i,o,a,h,d,m,g,y,b,_,T,S,C=[];for(b=(e=k(e)).length,t=p,n=0,o=f,a=0;a<b;++a)(y=e[a])<128&&C.push(E(y));for(r=i=C.length,i&&C.push(v);r<b;){for(h=s,a=0;a<b;++a)(y=e[a])>=t&&y<h&&(h=y);for(h-t>x((s-n)/(_=r+1))&&w("overflow"),n+=(h-t)*_,t=h,a=0;a<b;++a)if((y=e[a])<t&&++n>s&&w("overflow"),y==t){for(d=n,m=l;!(d<(g=m<=o?u:m>=o+c?c:m-o));m+=l)S=d-g,T=l-g,C.push(E(A(g+S%T,0))),d=x(S/T);C.push(E(A(d,0))),o=I(n,_,r==i),n=0,++r}++n,++t}return C.join("")}a={version:"1.3.2",ucs2:{decode:k,encode:C},decode:O,encode:P,toASCII:function(e){return S(e,(function(e){return g.test(e)?"xn--"+P(e):e}))},toUnicode:function(e){return S(e,(function(e){return m.test(e)?O(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},2770:function(e,t,n){"use strict";var r=n(6036),i=n(4070);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.Qc=b,t.DB=function(e,t){return b(e,!1,!0).resolve(t)},t.WU=function(e){i.isString(e)&&(e=b(e));return e instanceof o?e.format():o.prototype.format.call(e)};var a=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),c=["'"].concat(u),h=["%","/","?",";","#"].concat(c),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},g={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=n(2902);function b(e,t,n){if(e&&i.isObject(e)&&e instanceof o)return e;var r=new o;return r.parse(e,t,n),r}o.prototype.parse=function(e,t,n){if(!i.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var o=e.indexOf("?"),s=-1!==o&&o<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=l.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?y.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=a.exec(b);if(x){var E=(x=x[0]).toLowerCase();this.protocol=E,b=b.substr(x.length)}if(n||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===b.substr(0,2);!w||x&&m[x]||(b=b.substr(2),this.slashes=!0)}if(!m[x]&&(w||x&&!g[x])){for(var T,S,k=-1,C=0;C<d.length;C++){-1!==(A=b.indexOf(d[C]))&&(-1===k||A<k)&&(k=A)}-1!==(S=-1===k?b.lastIndexOf("@"):b.lastIndexOf("@",k))&&(T=b.slice(0,S),b=b.slice(S+1),this.auth=decodeURIComponent(T)),k=-1;for(C=0;C<h.length;C++){var A;-1!==(A=b.indexOf(h[C]))&&(-1===k||A<k)&&(k=A)}-1===k&&(k=b.length),this.host=b.slice(0,k),b=b.slice(k),this.parseHost(),this.hostname=this.hostname||"";var I="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!I)for(var O=this.hostname.split(/\./),P=(C=0,O.length);C<P;C++){var M=O[C];if(M&&!M.match(f)){for(var R="",N=0,D=M.length;N<D;N++)M.charCodeAt(N)>127?R+="x":R+=M[N];if(!R.match(f)){var L=O.slice(0,C),F=O.slice(C+1),B=M.match(p);B&&(L.push(B[1]),F.unshift(B[2])),F.length&&(b="/"+F.join(".")+b),this.hostname=L.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),I||(this.hostname=r.toASCII(this.hostname));var U=this.port?":"+this.port:"",H=this.hostname||"";this.host=H+U,this.href+=this.host,I&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[E])for(C=0,P=c.length;C<P;C++){var j=c[C];if(-1!==b.indexOf(j)){var z=encodeURIComponent(j);z===j&&(z=escape(j)),b=b.split(j).join(z)}}var V=b.indexOf("#");-1!==V&&(this.hash=b.substr(V),b=b.slice(0,V));var G=b.indexOf("?");if(-1!==G?(this.search=b.substr(G),this.query=b.substr(G+1),t&&(this.query=y.parse(this.query)),b=b.slice(0,G)):t&&(this.search="",this.query={}),b&&(this.pathname=b),g[E]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){U=this.pathname||"";var W=this.search||"";this.path=U+W}return this.href=this.format(),this},o.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",r=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&i.isObject(this.query)&&Object.keys(this.query).length&&(a=y.stringify(this.query));var s=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||g[t])&&!1!==o?(o="//"+(o||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),s&&"?"!==s.charAt(0)&&(s="?"+s),t+o+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+r},o.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},o.prototype.resolveObject=function(e){if(i.isString(e)){var t=new o;t.parse(e,!1,!0),e=t}for(var n=new o,r=Object.keys(this),a=0;a<r.length;a++){var s=r[a];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var l=Object.keys(e),u=0;u<l.length;u++){var c=l[u];"protocol"!==c&&(n[c]=e[c])}return g[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!g[e.protocol]){for(var h=Object.keys(e),d=0;d<h.length;d++){var f=h[d];n[f]=e[f]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||m[e.protocol])n.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),n.pathname=p.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",y=n.search||"";n.path=v+y}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=_||b||n.host&&e.pathname,E=x,w=n.pathname&&n.pathname.split("/")||[],T=(p=e.pathname&&e.pathname.split("/")||[],n.protocol&&!g[n.protocol]);if(T&&(n.hostname="",n.port=null,n.host&&(""===w[0]?w[0]=n.host:w.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===w[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,w=p;else if(p.length)w||(w=[]),w.pop(),w=w.concat(p),n.search=e.search,n.query=e.query;else if(!i.isNullOrUndefined(e.search)){if(T)n.hostname=n.host=w.shift(),(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift());return n.search=e.search,n.query=e.query,i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!w.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var S=w.slice(-1)[0],k=(n.host||e.host||w.length>1)&&("."===S||".."===S)||""===S,C=0,A=w.length;A>=0;A--)"."===(S=w[A])?w.splice(A,1):".."===S?(w.splice(A,1),C++):C&&(w.splice(A,1),C--);if(!x&&!E)for(;C--;C)w.unshift("..");!x||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),k&&"/"!==w.join("/").substr(-1)&&w.push("");var I,O=""===w[0]||w[0]&&"/"===w[0].charAt(0);T&&(n.hostname=n.host=O?"":w.length?w.shift():"",(I=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=I.shift(),n.host=n.hostname=I.shift()));return(x=x||n.host&&w.length)&&!O&&w.unshift(""),w.length?n.pathname=w.join("/"):(n.pathname=null,n.path=null),i.isNull(n.pathname)&&i.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},o.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},4070:function(e){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}}},n={};function r(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((function(e){a[e]=function(){return n[e]}}));return a.default=function(){return n},r.d(o,a),o}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"static/js/"+e+".d46a1e01.chunk.js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="dragonbones-web:";r.l=function(n,i,o,a){if(e[n])e[n].push(i);else{var s,l;if(void 0!==o)for(var u=document.getElementsByTagName("script"),c=0;c<u.length;c++){var h=u[c];if(h.getAttribute("src")==n||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,r.nc&&s.setAttribute("nonce",r.nc),s.setAttribute("data-webpack",t+o),s.src=n),e[n]=[i];var d=function(t,r){s.onerror=s.onload=null,clearTimeout(f);var i=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((function(e){return e(r)})),t)return t(r)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}}(),r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/",function(){var e={179:0};r.f.j=function(t,n){var i=r.o(e,t)?e[t]:void 0;if(0!==i)if(i)n.push(i[2]);else{var o=new Promise((function(n,r){i=e[t]=[n,r]}));n.push(i[2]=o);var a=r.p+r.u(t),s=new Error;r.l(a,(function(n){if(r.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=function(t,n){var i,o,a=n[0],s=n[1],l=n[2],u=0;if(a.some((function(t){return 0!==e[t]}))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)l(r)}for(t&&t(n);u<a.length;u++)o=a[u],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkdragonbones_web=self.webpackChunkdragonbones_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),function(){"use strict";var e={};r.r(e),r.d(e,{BaseTextureCache:function(){return Im},BoundingBox:function(){return km},CanvasRenderTarget:function(){return Rm},DATA_URI:function(){return fm},EventEmitter:function(){return vv},ProgramCache:function(){return Cm},TextureCache:function(){return Am},clearTextureCache:function(){return Pm},correctBlendMode:function(){return um},createIndicesForQuads:function(){return pm},decomposeDataUri:function(){return Bm},deprecation:function(){return Tv},destroyTextureCache:function(){return Om},determineCrossOrigin:function(){return Um},earcut:function(){return mv},getBufferType:function(){return vm},getCanvasBoundingBox:function(){return Lm},getResolutionOfUrl:function(){return Hm},hex2rgb:function(){return im},hex2string:function(){return om},interleaveTypedArrays:function(){return gm},isMobile:function(){return pv},isPow2:function(){return bm},isWebGLSupported:function(){return Cv},log2:function(){return _m},nextPow2:function(){return ym},path:function(){return Ev},premultiplyBlendMode:function(){return lm},premultiplyRgba:function(){return cm},premultiplyTint:function(){return hm},premultiplyTintToRgba:function(){return dm},removeItems:function(){return xm},rgb2hex:function(){return sm},sayHello:function(){return kv},sign:function(){return Em},skipHello:function(){return Sv},string2hex:function(){return am},trimCanvas:function(){return Fm},uid:function(){return Tm},url:function(){return yv}});var n={};r.r(n),r.d(n,{ALPHA_MODES:function(){return jp},AbstractMultiResource:function(){return Xb},AccessibilityManager:function(){return z_},AlphaFilter:function(){return m_},AnimatedSprite:function(){return qw},Application:function(){return G_},ArrayResource:function(){return Yb},Assets:function(){return Ax},AssetsClass:function(){return Cx},Attribute:function(){return lg},BLEND_MODES:function(){return Mp},BUFFER_BITS:function(){return Pp},BUFFER_TYPE:function(){return Kp},BackgroundSystem:function(){return hy},BaseImageResource:function(){return yy},BasePrepare:function(){return Vw},BaseRenderTexture:function(){return gy},BaseTexture:function(){return ig},BatchDrawCall:function(){return og},BatchGeometry:function(){return pg},BatchRenderer:function(){return ly},BatchShaderGenerator:function(){return iy},BatchSystem:function(){return dy},BatchTextureArray:function(){return oy},BitmapFont:function(){return gT},BitmapFontData:function(){return aT},BitmapText:function(){return ET},BlobResource:function(){return Kx},BlurFilter:function(){return __},BlurFilterPass:function(){return b_},Bounds:function(){return i_},BrowserAdapter:function(){return qp},Buffer:function(){return sg},BufferResource:function(){return tg},BufferSystem:function(){return zb},CLEAR_MODES:function(){return zp},COLOR_MASK_BITS:function(){return Xp},Cache:function(){return $_},CanvasResource:function(){return Kb},Circle:function(){return Eg},Color:function(){return rm},ColorMatrixFilter:function(){return x_},CompressedTextureResource:function(){return qx},Container:function(){return c_},ContextSystem:function(){return py},CountLimiter:function(){return Nw},CubeResource:function(){return Zb},DEG_TO_RAD:function(){return gg},DRAW_MODES:function(){return Rp},DisplacementFilter:function(){return E_},DisplayObject:function(){return o_},ENV:function(){return Ip},Ellipse:function(){return wg},EventBoundary:function(){return N_},EventSystem:function(){return F_},ExtensionType:function(){return zm},Extract:function(){return IE},FORMATS:function(){return Np},FORMATS_TO_COMPONENTS:function(){return _E},FXAAFilter:function(){return w_},FederatedDisplayObject:function(){return U_},FederatedEvent:function(){return A_},FederatedMouseEvent:function(){return I_},FederatedPointerEvent:function(){return O_},FederatedWheelEvent:function(){return P_},FillStyle:function(){return ew},Filter:function(){return cy},FilterState:function(){return Ay},FilterSystem:function(){return Py},Framebuffer:function(){return my},FramebufferSystem:function(){return Ny},GC_MODES:function(){return Vp},GLFramebuffer:function(){return My},GLProgram:function(){return rb},GLTexture:function(){return Cb},GRAPHICS_CURVES:function(){return BE},GenerateTextureSystem:function(){return Qy},Geometry:function(){return fg},GeometrySystem:function(){return Ly},Graphics:function(){return iw},GraphicsData:function(){return qE},GraphicsGeometry:function(){return JE},HTMLText:function(){return AT},HTMLTextStyle:function(){return kT},IGLUniformData:function(){return nb},INSTALLED:function(){return $m},INTERNAL_FORMATS:function(){return Ux},INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:function(){return Hx},ImageBitmapResource:function(){return $b},ImageResource:function(){return by},LINE_CAP:function(){return LE},LINE_JOIN:function(){return DE},LineStyle:function(){return tw},LoaderParserPriority:function(){return ex},MASK_TYPES:function(){return Wp},MIPMAP_MODES:function(){return Hp},MSAA_QUALITY:function(){return Yp},MaskData:function(){return Hy},MaskSystem:function(){return jy},Matrix:function(){return kg},Mesh:function(){return cw},MeshBatchUvs:function(){return aw},MeshGeometry:function(){return hw},MeshMaterial:function(){return dw},MultisampleSystem:function(){return Hb},NineSlicePlane:function(){return mw},NoiseFilter:function(){return T_},ObjectRenderer:function(){return ay},ObjectRendererSystem:function(){return Vb},ObservablePoint:function(){return Dg},PI_2:function(){return vg},PRECISION:function(){return Gp},ParticleContainer:function(){return bw},ParticleRenderer:function(){return xw},PlaneGeometry:function(){return fw},PluginSystem:function(){return Ky},Point:function(){return bg},Polygon:function(){return Tg},Prepare:function(){return Yw},Program:function(){return ey},ProjectionSystem:function(){return qy},Quad:function(){return ky},QuadUv:function(){return Cy},RAD_TO_DEG:function(){return mg},RENDERER_TYPE:function(){return Op},Rectangle:function(){return xg},RenderTexture:function(){return Ty},RenderTexturePool:function(){return Sy},RenderTextureSystem:function(){return tb},Renderer:function(){return Wb},ResizePlugin:function(){return W_},Resource:function(){return eg},RopeGeometry:function(){return pw},RoundedRectangle:function(){return Sg},Runner:function(){return Jm},SAMPLER_TYPES:function(){return Fp},SCALE_MODES:function(){return Bp},SHAPES:function(){return yg},SVGResource:function(){return Jb},ScissorSystem:function(){return Xy},Shader:function(){return ry},ShaderSystem:function(){return bb},SimpleMesh:function(){return gw},SimplePlane:function(){return vw},SimpleRope:function(){return yw},Sprite:function(){return f_},SpriteMaskFilter:function(){return Uy},Spritesheet:function(){return nT},StartupSystem:function(){return _b},State:function(){return Zm},StateSystem:function(){return Eb},StencilSystem:function(){return Yy},SystemManager:function(){return Tb},TARGETS:function(){return Dp},TEXT_GRADIENT:function(){return Ew},TYPES:function(){return Lp},TYPES_TO_BYTES_PER_COMPONENT:function(){return bE},TYPES_TO_BYTES_PER_PIXEL:function(){return xE},TemporaryDisplayObject:function(){return a_},Text:function(){return Rw},TextFormat:function(){return sT},TextMetrics:function(){return Sw},TextStyle:function(){return Aw},Texture:function(){return wy},TextureGCSystem:function(){return kb},TextureMatrix:function(){return By},TextureSystem:function(){return Ab},TextureUvs:function(){return _y},Ticker:function(){return Nb},TickerPlugin:function(){return Db},TilingSprite:function(){return $w},TilingSpriteRenderer:function(){return eT},TimeLimiter:function(){return Kw},Transform:function(){return Fg},TransformFeedback:function(){return n_},TransformFeedbackSystem:function(){return Ib},UPDATE_PRIORITY:function(){return Pb},UniformGroup:function(){return ny},VERSION:function(){return r_},VideoResource:function(){return t_},ViewSystem:function(){return Ob},ViewableBuffer:function(){return Xm},WRAP_MODES:function(){return Up},XMLFormat:function(){return lT},XMLStringFormat:function(){return uT},accessibleTarget:function(){return H_},autoDetectFormat:function(){return hT},autoDetectRenderer:function(){return Fb},autoDetectResource:function(){return Qm},cacheTextureArray:function(){return Ix},checkDataUrl:function(){return tx},checkExtension:function(){return K_},checkMaxIfStatementsInShader:function(){return qm},convertToList:function(){return q_},copySearchParams:function(){return Bx},createStringVariations:function(){return Sx},createTexture:function(){return gx},createUBOElements:function(){return fb},curves:function(){return FE},defaultFilterVertex:function(){return Ub},defaultVertex:function(){return Bb},detectAvif:function(){return Ox},detectCompressedTextures:function(){return zx},detectDefaults:function(){return Rx},detectWebp:function(){return Px},extensions:function(){return Wm},filters:function(){return S_},generateProgram:function(){return lb},generateUniformBufferSync:function(){return vb},getFontFamilyName:function(){return lx},getTestContext:function(){return Gg},getUBOData:function(){return pb},graphicsUtils:function(){return ow},groupD8:function(){return Ng},isMobile:function(){return pv},isSingleItem:function(){return Q_},loadBitmapFont:function(){return TT},loadDDS:function(){return TE},loadImageBitmap:function(){return _x},loadJson:function(){return nx},loadKTX:function(){return SE},loadSVG:function(){return wx},loadTextures:function(){return Ex},loadTxt:function(){return rx},loadWebFont:function(){return ux},parseDDS:function(){return pE},parseKTX:function(){return EE},resolveCompressedTextureUrl:function(){return kE},resolveTextureUrl:function(){return Nx},settings:function(){return Zp},spritesheetAsset:function(){return oT},uniformParsers:function(){return Bg},unsafeEvalSupported:function(){return mb},utils:function(){return e}});var i={};r.r(i),r.d(i,{hasBrowserEnv:function(){return Zz},hasStandardBrowserEnv:function(){return Qz},hasStandardBrowserWebWorkerEnv:function(){return Jz},navigator:function(){return $z},origin:function(){return eV}});var o,a=r(7313),s=r.t(a,2),l=r(1739);function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function h(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h(r.key),r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function p(e,t){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},p(e,t)}function v(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Pv){return!1}}();return function(){var n,r=m(e);if(t){var i=m(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}function b(e,t,n){return(t=h(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){return e.TEST="TEST",e.TEST_ASYNC="TEST_ASYNC",e.TOOLBAR_COMMAND="TOOLBAR_COMMAND",e.ADD_FILE="ADD_FILE",e.UPLOAD_FILE="UPLOAD_FILE",e}({}),x=function(e){return e.SAVE="SAVE",e.SAVE_LAYOUT="SAVE_LAYOUT",e}({}),E=function(e){return e.JPG="jpg",e.JPEG="jpeg",e.PNG="png",e.MP3="mp3",e.JSON="json",e.SVG="svg",e.SPRITE_SHEET="spriteSheet",e.SUB_TEXTURE="subTexture",e.MISSING_IMAGE="missingImage",e}({}),w=function(e){return e[e.Normal=0]="Normal",e[e.Add=1]="Add",e[e.Alpha=2]="Alpha",e[e.Darken=3]="Darken",e[e.Difference=4]="Difference",e[e.Erase=5]="Erase",e[e.HardLight=6]="HardLight",e[e.Invert=7]="Invert",e[e.Layer=8]="Layer",e[e.Lighten=9]="Lighten",e[e.Multiply=10]="Multiply",e[e.Overlay=11]="Overlay",e[e.Screen=12]="Screen",e[e.Subtract=13]="Subtract",e}({}),T=function(e){return e[e.IMAGE=0]="IMAGE",e[e.BOUND_BOX=1]="BOUND_BOX",e[e.MESH=2]="MESH",e[e.ARMATURE=3]="ARMATURE",e[e.SHAPE=4]="SHAPE",e[e.TEXT=5]="TEXT",e}({}),S=function(e){return e[e.AUTO=0]="AUTO",e[e.CLOCKWISE=1]="CLOCKWISE",e[e.COUNTER_CLOCKWISE=-1]="COUNTER_CLOCKWISE",e}({}),k=function(e){return e.X="x",e.Y="y",e.SCALE_X="scaleX",e.SCALE_Y="scaleY",e.ROTATION="rotation",e.COLOR="color",e.ALPHA="alpha",e.VISIBLE="visible",e.TEXT="text",e.SHAPE="shape",e.PROGRESS="progress",e.SKEW_X="skewX",e.SKEW_Y="skewY",e.PLAY="play",e.VOLUME="volume",e.EVENT="event",e.MIX="mix",e.DISPLAY_INDEX="displayIndex",e.Z_ORDER="zOrder",e.FFD="ffd",e.TRANSLATE="translate",e.SCALE="scale",e.ROTATE="rotate",e.IK="ik",e}({}),C=[k.X,k.Y,k.SCALE_X,k.SCALE_Y,k.ROTATION,k.SKEW_X,k.SKEW_Y,k.ALPHA,k.COLOR,k.VISIBLE,k.PLAY,k.PROGRESS,k.SHAPE,k.TEXT,k.VOLUME,k.TRANSLATE,k.SCALE,k.ROTATE],A=(b(o={},k.X,0),b(o,k.Y,0),b(o,k.SCALE_X,1),b(o,k.SCALE_Y,1),b(o,k.ROTATION,0),b(o,k.SKEW_X,0),b(o,k.SKEW_Y,0),b(o,k.ALPHA,1),b(o,k.COLOR,4294967295),b(o,k.VISIBLE,!0),b(o,k.PLAY,""),b(o,k.PROGRESS,1),b(o,k.SHAPE,void 0),b(o,k.TEXT,""),b(o,k.VOLUME,1),b(o,"width",0),b(o,"height",0),b(o,k.TRANSLATE,{x:0,y:0}),b(o,k.SCALE,{x:1,y:1}),b(o,k.ROTATE,{rotate:0}),b(o,k.FFD,{}),b(o,k.IK,{bendPositive:!0,weight:1}),o),I=function(e){return e.ARMATURE="Armature",e.ANIMATION="Animation",e.SLOT="Slot",e.BONE="Bone",e.SKIN="Skin",e.DISPLAY="Display",e.SUB_ARMATURE="SubArmature",e.BOUNDING_BOX="BoundingBox",e.JS="JS",e.IMAGE="Image",e.BUTTON="Button",e.INPUT="Input",e.TEXT="Text",e.RECT="Rect",e.SHAPE="Shape",e.DRAGONBONES="Dragonbones",e.PARTICLE="Particle",e.SHEET="Sheet",e.SOUNDCHANNEL="SoundChannel",e.VIDEO="Video",e.AUDIO="Audio",e.MICROPHONE="Microphone",e.GRAPHIC="Graphic",e.INSTANCE="Instance",e.MOVIE="Movie",e.MOVIECLIP="movieclip",e.SHOT="Shot",e}({}),O=function(e){return e[e.BONE=0]="BONE",e[e.SLOT=1]="SLOT",e[e.TIMELINE=2]="TIMELINE",e[e.ARMATURE=3]="ARMATURE",e}({}),P=function(e){return e.MODIFY_TIMELINE="MODIFY_TIMELINE",e.PRE_DELETE_FRAMES="PRE_DELETE_FRAMES",e.DELETE_FRAMES="DELETE_FRAMES",e.CHECK_OVERRIDE_FRAME="CHECK_OVERRIDE_FRAME",e.CHANGE_CHILD_ANIMATED_PROPERTY="CHANGE_CHILD_ANIMATED_PROPERTY",e.ADD_KEY="ADD_KEY",e.UPDATE_ANIMATED_PROPERTY="UPDATE_ANIMATED_PROPERTY",e.CACHE_ANIMATED_PROPERTY="CACHE_ANIMATED_PROPERTY",e.CALCULATE_ANIMATED_PROPERTY="CALCULATE_ANIMATED_PROPERTY",e.ADD_ANIMATION_INTERACTIVE="ADD_ANIMATION_INTERACTIVE",e.ADD_ANIMATION="ADD_ANIMATION",e.REMOVE_ANIMATION_INTERACTIVE="REMOVE_ANIMATION_INTERACTIVE",e.REMOVE_ANIMATION="REMOVE_ANIMATION",e.CLONE_ANIMATION_INTERACTIVE="CLONE_ANIMATION_INTERACTIVE",e.RENAME_ANIMATION_INTERACTIVE="RENAME_ANIMATION_INTERACTIVE",e.MODIFY_FRAMES_CURVE="ACTION_MODIFY_FRAMES_CURVE",e}({}),M=function(e){return e.REMOVE_ANIMATION="MUTATION_REMOVE_ANIMATION",e.ADD_ANIMATION="MUTATION_ADD_ANIMATION",e.ADD_ANIMATIONS="MUTATION_ADD_ANIMATIONS",e.DELETE_ANIMATIONS="MUTATION_DELETE_ANIMATIONS",e.SELECT_ANIMATION="MUTATION_SELECT_ANIMATION",e.RENAME_ANIMATION="MUTATION_RENAME_ANIMATION",e.AUTO_KEY="MUTATION_AUTO_KEY",e.DELETE_FRAMES="MUTATION_DELETE_FRAMES",e.MODIFY_FRAMES="MODIFY_FRAMES",e.MODIFY_TIMELINE="MUTATION_MODIFY_TIMELINE",e}({}),R=function(e){return e.ADD_FILE="ACTION_ADD_FILE",e.LOAD_DRAGON_BONES_DATA="ACTION_LOAD_DRAGON_BONES_DATA",e.LOAD_DRAGON_BONES_JSON_DATA="ACTION_LOAD_DRAGON_BONES_JSON_DATA",e}({}),N=function(e){return e.ADD_ASSET="MUTATION_ADD_ASSET",e.DEL_ASSET="MUTATION_DEL_ASSET",e}({}),D=function(e){return e.ADD_ARMATURES="MUTATION_ADD_ARMATURES",e.DELETE_ARMATURES="MUTATION_DELETE_ARMATURES",e.SELECT_ARMATURE="MUTATION_SELECT_ARMATURE",e.CHANGE_SLOT_ORDER="MUTATION_CHANGE_SLOT_ORDER",e.CACHE_SLOT_ORDER="MUTATION_CACHE_SLOT_ORDER",e.UPDATE_PROPERTIES="MUTATION_ARMATURE_UPDATE_PROPERTIES",e}({}),L=function(e){return e.CHANGE_SLOT_ORDER="ACTION_CHANGE_SLOT_ORDER",e.UPDATE_PROPERTIES="ACTION_ARMATURE_UPDATE_PROPERTIES",e.ADD_ARMATURE="ACTION_ADD_ARMATURE",e.DELETE_ARMATURES="ACTION_DELETE_ARMATURES",e}({}),F=function(e){return e.SELECT_ONE_SLOT="ACTION_SELECT_ONE_SLOT",e.SELECT_SLOTS="SELECT_SLOTS",e.TRANSFORM_START="TRANSFORM_START",e.TRANSFORM_END="TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="ACTION_SLOT_UPDATE_LOCAL_TRANSFORMS",e.ADD_SLOT="SLOT_ACTION_ADD_SLOT",e.ADD_DISPLAY="SLOT_ACTION_ADD_DISPLAY",e.SET_PARENT="SLOT_ACTION_SET_PARENT",e.DELETE_SLOTS="SLOT_ACTION_DELETE_SLOTS",e.PICK_SLOT_PARENT="ACTION_SLOT_PICK_SLOT_PARENT",e.PICK_SLOT_PARENT_END="ACTION_SLOT_PICK_SLOT_PARENT_END",e.UPDATE_PROPERTIES="ACTION_SLOT_UPDATE_PROPERTIES",e}({}),B=function(e){return e.OVER_SLOT="MUTATION_SLOT_OVER_SLOT",e.SELECT_SLOTS="MUTATION_SLOT_SELECT_SLOTS",e.TRANSFORM_START="MUTATION_SLOT_TRANSFORM_START",e.TRANSFORM_END="MUTATION_SLOT_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="MUTATION_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="MUTATION_SLOT_UPDATE_LOCAL_TRANSFORMS",e.ADD_SLOT="MUTATION_SLOT_ADD_SLOT",e.ADD_DISPLAY="MUTATION_SLOT_ADD_DISPLAY",e.UPDATE_PROPERTIES="MUTATION_SLOT_UPDATE_PROPERTIES",e.SET_PARENT="MUTATION_SLOT_SET_PARENT",e.DELETE_SLOTS="MUTATION_SLOT_DELETE_SLOTS",e.UPDATE_CACHE_PROPERTIES="MUTATION_SLOT_UPDATE_CACHE_PROPERTIES",e}({}),U=function(e){return e.UPDATE_MESH="ACTION_UPDATE_MESH",e.RESET_MESH="ACTION_RESET_MESH",e.ADD_RIG_BONE="ACTION_ADD_RIG_BONE",e.DELETE_RIG_BONES="ACTION_DELETE_RIG_BONES",e.SELECT_MESH_POINTS="ACTION_SELECT_MESH_POINTS",e.AUTO_WEIGHT="ACTION_AUTO_WEIGHT",e}({}),H=function(e){return e.SELECT_MESH_POINTS="MUTATION_SELECT_MESH_POINTS",e.UPDATE_MESH="MUTATION_UPDATE_MESH",e.UPDATE_CACHE_FFD="MUTATION_UPDATE_CACHE_FFD",e.UPDATE_RIG_BONE="MUTATION_UPDATE_RIG_BONE",e}({}),j=function(e){return e.UPDATE_PROPERTIES="MUTATION_DISPLAY_UPDATE_PROPERTIES",e.SELECT_DISPLAY="MUTATION_DISPLAY_SELECT_DISPLAY",e.SET_PARENT="MUTATION_DISPLAY_SET_PARENT",e}({}),z=function(e){return e.SET_PARENT="ACTION_DISPLAY_SET_PARENT",e}({}),V=function(e){return e.SELECT_ONE_BONE="ACTION_SELECT_ONE_BONE",e.SELECT_BONES="ACTION_BONE_SELECT_BONES",e.TRANSFORM_START="ACTION_BONE_TRANSFORM_START",e.TRANSFORM_END="ACTION_BONE_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="ACTION_BONE_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="ACTION_BONE_UPDATE_LOCAL_TRANSFORMS",e.UPDATE_GLOBAL_TRANSFORMS="ACTION_BONE_UPDATE_GLOBAL_TRANSFORMS",e.UPDATE_ROTATE_FRAME="ACTION_UPDATE_ROTATE_FRAME",e.ADD_BONE="ACTION_BONE_ADD_BONE",e.SET_PARENT="ACTION_BONE_SET_PARENT",e.ADD_IK_AT_TAIL="ACTION_BONE_ADD_IK_AT_TAIL",e.ADD_IK_BY_TARGET="ACTION_BONE_ADD_IK_BY_TARGET",e.DELETE_IKS="ACTION_BONE_DELETE_IKS",e.UPDATE_IK="ACTION_BONE_UPDATE_IK",e.PICK_IK_TARGET="ACTION_BONE_PICK_IK_TARGET",e.PICK_IK_TARGET_END="ACTION_BONE_PICK_IK_TARGET_END",e.DELETE_BONES="ACTION_BONE_DELETE_BONE",e.PICK_BONE_PARENT="ACTION_BONE_PICK_BONE_PARENT",e.PICK_BONE_PARENT_END="ACTION_BONE_PICK_BONE_PARENT_END",e}({}),G=function(e){return e.OVER_BONE="MUTATION_BONE_OVER_BONE",e.SELECT_BONES="MUTATION_BONE_SELECT_BONES",e.TRANSFORM_START="MUTATION_BONE_TRANSFORM_START",e.TRANSFORM_END="MUTATION_BONE_TRANSFORM_END",e.UPDATE_TRANSFORM_SHELL="MUTATION_BONE_UPDATE_TRANSFORM_SHELL",e.UPDATE_LOCAL_TRANSFORMS="MUTATION_BONE_UPDATE_LOCAL_TRANSFORMS",e.UPDATE_CACHE_TRANSFORMS="MUTATION_BONE_UPDATE_CACHE_TRANSFORMS",e.UPDATE_PROPERTIES="MUTATION_BONE_UPDATE_PROPERTIES",e.ADD_BONE="MUTATION_BONE_ADD_BONE",e.SET_PARENT="MUTATION_BONE_SET_PARENT",e.ADD_IK="MUTATION_BONE_ADD_IK",e.UPDATE_IK="MUTATION_BONE_UPDATE_IK",e.UPDATE_CACHE_IK="MUTATION_BONE_UPDATE_CACHE_IK",e.DELETE_BONES="MUTATION_BONE_DELETE_BONES",e.DELETE_IKS="MUTATION_BONE_DELETE_IKS",e}({}),W=function(e){return e.SWITCH_MODE="MUTATION_SWITCH_MODE",e.SWITCH_TOOL="MUTATION_SWITCH_TOOL",e.CHANGE_BONE_SLOT_CONTROL="MUTATION_CHANGE_BONE_SLOT_CONTROL",e.OPEN_EXPORT_WINDOW="MUTATION_OPEN_EXPORT_WINDOW",e.CLOSE_EXPORT_WINDOW="MUTATION_CLOSE_EXPORT_WINDOW",e.OPEN_IMPORT_WINDOW="MUTATION_OPEN_IMPORT_WINDOW",e.CLOSE_IMPORT_WINDOW="MUTATION_CLOSE_IMPORT_WINDOW",e.OPEN_PREVIEW_WINDOW="MUTATION_OPEN_PREVIEW_WINDOW",e.CLOSE_PREVIEW_WINDOW="MUTATION_CLOSE_PREVIEW_WINDOW",e.UNDO="MUTATION_UNDO",e.REDO="MUTATION_REDO",e.UPDATE_MESH_TOOL="MUTATION_UPDATE_MESH_TOOL",e.UPDATE_MESH_TEMPLATE_OUTLINE="MUTATION_UPDATE_MESH_TEMPLATE_OUTLINE",e.SET_DEFAULT_TOOLTIP_TOP="MUTATION_SET_DEFAULT_TOOLTIP_TOP",e.SELECT_RIGGING_BONE="MUTATION_SELECT_RIGGING_BONE",e.FLAG_AUTO_WEIGHT="MUTATION_FLAG_AUTO_WEIGHT",e.LAYOUT_CHANGE="MUTATION_LAYOUT_CHANGE",e.UPDATE_LAYOUT="MUTATION_UPDATE_LAYOUT",e}({}),X=function(e){return e.UNDO="ACTION_UNDO",e.REDO="ACTION_REDO",e.CHANGE_BONE_SLOT_CONTROL="ACTION_CHANGE_BONE_SLOT_CONTROL",e.UPDATE_SIZE="UPDATE_SIZE",e.UPDATE_POSITION="UPDATE_POSITION",e.UPDATE_SCALE="UPDATE_SCALE",e.MOUSE_MOVE="MOUSE_MOVE",e.MOUSE_DOWN="MOUSE_DOWN1",e.MOUSE_UP="MOUSE_UP",e.RIGHT_DOWN="RIGHT_DOWN",e.RIGHT_UP="RIGHT_UP",e.DOUBLE_CLICK="DOUBLE_CLICK",e.MOUSE_OVER="MOUSE_OVER",e.MOUSE_OUT="MOUSE_OUT",e.SELECT_MOVE_START="SELECT_MOVE_START",e.SWITCH_MODE="SWITCH_MODE",e.SWITCH_TOOL="SWITCH_TOOL",e.SWITCH_FULL_SCREEN="SWITCH_FULL_SCREEN",e.RESET_SCALE="RESET_SCALE",e.LAYOUT_CHANGE="LAYOUT_CHANGE",e.SWITCH_AUTO_KEY="SWITCH_AUTO_KEY",e.SWITCH_AUTO_FIRST_FRAME="SWITCH_AUTO_FIRST_FRAME",e.LOCK_ITEMS="LOCK_ITEMS",e.HIDE_ITEMS="HIDE_ITEMS",e.EDIT_SHAPE="EDIT_SHAPE",e.EDIT_SHAPE_ANIMATION="EDIT_SHAPE_ANIMATION",e.OPEN_MESH_EDIT_TOOL="OPEN_MESH_EDIT_TOOL",e.CLOSE_MESH_EDIT_TOOL="CLOSE_MESH_EDIT_TOOL",e.OPEN_RIGGING_TOOL="OPEN_RIGGING_TOOL",e.CLOSE_RIGGING_TOOL="CLOSE_RIGGING_TOOL",e.DELETE_SELECTED_BONES_AND_SLOTS="ACTION_DELETE_SELECTED_BONES_AND_SLOTS",e.CLEAR_LOCAL_DATA="ACTION_CLEAR_LOCAL_DATA",e}({}),Y=function(e){return e[e.POSE=0]="POSE",e[e.ANIMATION=1]="ANIMATION",e[e.DRAW_SHAPE=2]="DRAW_SHAPE",e[e.ANIMATION_DRAW_SHAPE=3]="ANIMATION_DRAW_SHAPE",e[e.ACTION=4]="ACTION",e}({}),K=function(e){return e.CHANGE_NAME="CHANGE_NAME",e.CHANGE_AGE="changeAge",e.USER_LOGIN="USER_LOGIN",e.USER_LOGIN_SUCCESS="USER_LOGIN_SUCCESS",e.GET_USER_INFO="GET_USER_INFO",e.GET_USER_INFO_SUCCESS="GET_USER_INFO_SUCCESS",e.GET_USER_ASSETS="GET_USER_ASSETS",e.GET_USER_ASSETS_SUCCESS="GET_USER_ASSETS_SUCCESS",e.SAVE="SAVE",e.SAVE_SUCCESS="SAVE_SUCCESS",e.LOAD="LOAD",e.LOAD_SUCCESS="LOAD_SUCCESS",e.UPLOAD_FILE_TO_SERVER="UPLOAD_FILE_TO_SERVER",e.LOAD_ASSETS_COMPLETE="LOAD_ASSETS_COMPLETE",e}({}),q=function(e){return e.OVER_BONE="OVER_BONE",e.OUT_BONE="OUT_BONE",e.OVER_SLOT="OVER_SLOT",e.OUT_SLOT="OUT_SLOT",e.SELECT_ARMATURE="EVENT_SELECT_ARMATURE",e}({}),Z=function(e){return e.OVER_FRAME="OVER_FRAME",e.UPDATE_FRAME_BLOCK_START="UPDATE_FRAME_BLOCK_START",e.UPDATE_FRAME_BLOCK_END="UPDATE_FRAME_BLOCK_END",e.MOVE_BLOCK="MOVE_BLOCK",e.SCALE_LEFT_BLOCK="SCALE_LEFT_BLOCK",e.SCALE_RIGHT_BLOCK="SCALE_RIGHT_BLOCK",e.PLAY="PLAY",e}({}),$=function(e){return e.UPDATE_SIZE="CURVE_BOX_UPDATE_SIZE",e}({}),Q=function(e){return e.SELECT_FRAME="SELECT_FRAME",e.UPDATE_SCALE="DOPESHEET_UPDATE_SCALE",e.UPDATE_OFFSET="DOPESHEET_UPDATE_OFFSET",e.UPDATE_LABEL_WIDTH="DOPESHEET_UPDATE_LABEL_WIDTH",e.UPDATE_SIZE="DOPESHEET_UPDATE_SIZE",e.UPDATE_FRAME="DOPESHEET_UPDATE_FRAME",e.SWITCH_FILTER="SWITCH_FILTER",e.UPDATE_FPS="UPDATE_FPS",e}({}),J=function(e){return e[e.SELECT=0]="SELECT",e[e.ADD_BONE=1]="ADD_BONE",e[e.POSE_TOOL=2]="POSE_TOOL",e[e.WEIGHT_TOOL=3]="WEIGHT_TOOL",e[e.IK_PICK_TARGET_TOOL=4]="IK_PICK_TARGET_TOOL",e[e.PICK_BONE_PARENT_TOOL=5]="PICK_BONE_PARENT_TOOL",e[e.PICK_SLOT_PARENT_TOOL=6]="PICK_SLOT_PARENT_TOOL",e[e.MESH_EDIT_TOOL=7]="MESH_EDIT_TOOL",e[e.RIGGING_TOOL=8]="RIGGING_TOOL",e}({}),ee=function(e){return e[e.EDIT=0]="EDIT",e[e.ADD=1]="ADD",e[e.DELETE=2]="DELETE",e[e.DRAW=3]="DRAW",e}({}),te=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;this._retain(),$2.instance.eventBus.once(K.LOAD_SUCCESS,(function(){e._release(!0)}),this),$2.instance.store.dispatch(K.LOAD)}}]),n}(),ne=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;this._retain(),$2.instance.eventBus.once(K.GET_USER_ASSETS_SUCCESS,(function(){e._release(!0)}),this),$2.instance.store.dispatch(K.GET_USER_ASSETS)}}]),n}(),re=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;this._retain(),$2.instance.eventBus.once(K.GET_USER_INFO_SUCCESS,(function(){e._release(!0)}),this),$2.instance.store.dispatch(K.GET_USER_INFO)}}]),n}(),ie=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){}}]),n}(),oe=JSON.parse('{"name":"main","isVertical":false,"mainIndex":0,"width":1600,"height":793,"children":[{"name":"box2","isVertical":false,"mainIndex":0,"width":1354,"height":793,"children":[{"name":"leftArea","isVertical":false,"mainIndex":0,"width":270,"height":793,"panels":[{"name":"libraryPanel","minWidth":245,"maxWidth":400},{"name":"outlinePanel","minWidth":245,"maxWidth":400},{"name":"scenePanel","minWidth":245,"maxWidth":400}],"panelIndex":0},{"name":"box3","isVertical":true,"mainIndex":0,"width":1083,"height":793,"children":[{"name":"box5","isVertical":false,"mainIndex":0,"width":1083,"height":793,"panels":[{"name":"stagePanel"}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0},{"name":"rightArea","isVertical":false,"mainIndex":0,"width":300,"height":793,"panels":[{"name":"propertyPanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}'),ae=r.t(oe,2),se=JSON.parse('{"name":"main","isVertical":true,"mainIndex":0,"width":1600,"height":793,"children":[{"name":"box2","isVertical":false,"mainIndex":0,"width":1600,"height":567,"children":[{"name":"scenePanel","isVertical":false,"mainIndex":0,"width":270,"height":567,"panels":[{"name":"outlinePanel","minWidth":245,"maxWidth":400},{"name":"scenePanel","minWidth":245,"maxWidth":400}],"panelIndex":0},{"name":"box3","isVertical":false,"mainIndex":0,"width":1329,"height":567,"children":[{"name":"box4","isVertical":false,"mainIndex":0,"width":1083,"height":567,"panels":[{"name":"stagePanel"}],"panelIndex":0},{"name":"propertyPanel","isVertical":false,"mainIndex":0,"width":245,"height":567,"panels":[{"name":"propertyPanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0},{"name":"dopesheetPanel","isVertical":false,"mainIndex":0,"width":1600,"height":225,"children":[{"name":"dopesheetPanel","isVertical":false,"mainIndex":0,"width":1353,"height":225,"panels":[{"name":"dopesheetPanel"}],"panelIndex":0},{"name":"animationPanel","isVertical":false,"mainIndex":0,"width":246,"height":225,"panels":[{"name":"animationPanel","minWidth":245,"maxWidth":400},{"name":"curvePanel","minWidth":245,"maxWidth":400}],"panelIndex":0}],"panelIndex":0}],"panelIndex":0}'),le=r.t(se,2),ue=function(e){return e[e.SPLIT_LINE=0]="SPLIT_LINE",e[e.PROPERTY_ITEM=1]="PROPERTY_ITEM",e}({}),ce=function(e){return e[e.CONST=0]="CONST",e[e.BOOLEAN=1]="BOOLEAN",e[e.INT=2]="INT",e[e.FLOAT=3]="FLOAT",e[e.STRING=4]="STRING",e[e.ENUM=5]="ENUM",e[e.COLOR=6]="COLOR",e[e.ASSET_IMAGE=7]="ASSET_IMAGE",e[e.ASSET_SOUND=8]="ASSET_SOUND",e[e.ASSET_VIDEO=9]="ASSET_VIDEO",e[e.OBJECT=10]="OBJECT",e[e.ARRAY=11]="ARRAY",e[e.NONE=12]="NONE",e}({}),he=function(e){return e.StringInput="StringInput",e.IntInput="IntInput",e.FloatInput="FloatInput",e.Label="Label",e.ObjectInput="ObjectInput",e.DropdownInput="DropdownInput",e.ColorInput="ColorInput",e.BooleanInput="BooleanInput",e.BooleanSwitch="BooleanSwitch",e.BooleanCheck="BooleanCheck",e.ButtonGroup="ButtonGroup",e.Button="Button",e.ButtonLabel="ButtonLabel",e.Gap="Gap",e.SliderInput="SliderInput",e.NumberSliderInput="NumberSliderInput",e.RiggingList="RiggingList",e}({}),de="\u65b0\u5efa\u52a8\u753b",fe="\u65b0\u5efa\u9aa8\u67b6",pe={history:{enable:!1,branches:[],curBranch:""},config:{timeline:{MAX_GAP:40,MIN_GAP:10,TWO_LABEL_GAP:25,FIVE_LABEL_GAP:15,FONT_SIZE:10,SCALE_LEVEL:[1,2,4,10,20],LABEL_LEVEL:[1,2,5],ZOOM_RATE:.8,LABEL_HEIGHT:40,HIGH_FRAME_HEIGHT:Math.round(20),LOW_FRAME_HEIGHT:Math.round(12),POINTER_HEIGHT:Math.round(20)+1,TEXT_Y:4,FIRST_X:10,ITEM_HEIGHT:20,LABEL_LEFT_WIDTH:200}},user:{name:"",sex:1,age:1,phone:1,email:""},editor:{idGen:2e3,previewing:!1,lastModify:1,saveTime:1,layout:{poseLayout:ae,animationLayout:le},over:{overBone:-1,overSlotId:-1,overFrameIds:[]},curveBox:{width:0,height:0},dopesheet:{autoKey:!0,autoFirstFrame:!0,filter:!0,curTime:0,scale:.262144,offset:0,labelLevel:5,scaleLevel:1,curGap:10,labelWidth:1,startIndex:0,endIndex:100,width:20,height:20,fps:30},stage:{transforming:!1,ruleSize:20,width:0,height:0,showRule:!0,scale:1,x:0,y:0,mouseCanvasX:0,mouseCanvasY:0,mouseStageX:0,mouseStageY:0,cameraWidth:0,cameraHeight:0}},runtime:{editing:{editMode:Y.POSE,stageTool:J.SELECT,lastStageTool:J.SELECT,editingArmatureId:101,selectedBoneIds:[],selectedSlotIds:[],selectedMeshPointIds:[],selectedAnimationId:1001,selectedFrameIds:[],lockBoneSlotIds:[],hideBoneSlotIds:[],selectedDisplayId:0,boneSlotControl:{boneVisible:!0,boneSelectEnable:!0,boneInheritEnable:!0,slotVisible:!0,slotSelectEnable:!0,slotInheritEnable:!0},meshEditTool:{curTool:ee.EDIT,autoOutlineNum:1,deformed:!0}},dragonbones:{name:"dragonbones-web",assetMap:{},armatureMap:{101:{id:101,name:"armature1",bones:{ids:[201],map:{201:{name:"root",id:201,parentId:0,length:0,transform:{x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0}}}},slots:{ids:[],map:{}},constraint:{ik:{}},skins:{ids:[],map:{}},animations:[]}},animationMap:{1001:{id:1001,name:"animation1"}}}},library:{files:{}}},ve=(Math.round(20),Math.round(12),Math.round(20),Y.POSE,J.SELECT,J.SELECT,ee.EDIT,E.PNG,E.PNG,E.PNG,Math.PI,Math.PI,T.IMAGE,T.MESH,k.ROTATE,k.TRANSLATE,k.COLOR,k.DISPLAY_INDEX,k.EVENT,[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u5927\u5c0f",items:[{property:"height",type:ce.INT,componentType:he.IntInput,componentProp:{}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9ad8"}},{property:"width",type:ce.INT,componentType:he.IntInput,componentProp:{}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u5bbd"}}]},{type:ue.PROPERTY_ITEM,label:"\u5750\u6807",items:[{property:"y",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"x",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"scaleX",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.01,fixed:2}}]}]),me={name:"bone",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:ve},{name:"other",label:"\u5176\u4ed6",content:[{type:ue.PROPERTY_ITEM,label:"\u6d4b\u8bd5\u4e0b\u62c9\u83dc\u5355",items:[{property:"test",type:ce.STRING,componentType:he.DropdownInput,componentProp:{itemFunName:"getTestItems",items:[{label:"aa",value:"aa"},{label:"bb",value:"bb"},{label:"cc",value:"cc"}]}}]}]}]},ge={name:"slot",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:ve}]},ye={name:"armature",type:"",targetId:1,mutation:"",panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"type",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9aa8\u67b6",width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5e27\u7387",items:[{property:"fps",type:ce.CONST,componentType:he.Label,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u9ed8\u8ba4\u64ad\u653e",items:[{property:"defaultAnimation",type:ce.CONST,componentType:he.DropdownInput,componentProp:{itemFunName:"getAllAnimationMenu"}}]}]},{name:"canvas",label:"\u753b\u5e03",content:[{type:ue.PROPERTY_ITEM,label:"\u662f\u5426\u663e\u793a",items:[{property:"canvasShow",type:ce.BOOLEAN,componentType:he.BooleanSwitch,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"canvasY",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"canvasX",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u5927\u5c0f",items:[{property:"canvasHeight",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9ad8"}},{property:"canvasWidth",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u5bbd"}}]},{type:ue.PROPERTY_ITEM,label:"\u80cc\u666f\u8272",items:[{property:"type",type:ce.BOOLEAN,componentType:he.BooleanSwitch,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u989c\u8272",items:[{property:"canvasColor",type:ce.COLOR,componentType:he.ColorInput,componentProp:{}}]}]}]};function be(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(e instanceof Array){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=be(e[n]);return t}if(e instanceof Object){for(var i in t={},e)e.hasOwnProperty(i)&&(t[i]=be(e[i]));return t}if("object"===typeof e){for(var o in t={},e)t[o]=be(e[o]);return t}throw new Error("Unable to copy obj! Its type isn't supported.")}function _e(){_e=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",s=i.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(I){l=function(e,t,n){return e[t]=n}}function u(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),s=new k(i||[]);return r(a,"_invoke",{value:E(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(I){return{type:"throw",arg:I}}}e.wrap=u;var d={};function f(){}function p(){}function v(){}var m={};l(m,o,(function(){return this}));var g=Object.getPrototypeOf,y=g&&g(g(C([])));y&&y!==t&&n.call(y,o)&&(m=y);var b=v.prototype=f.prototype=Object.create(m);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,o,a,s){var l=h(e[r],e,o);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){i("next",e,a,s)}),(function(e){i("throw",e,a,s)})):t.resolve(d).then((function(e){u.value=e,a(u)}),(function(e){return i("throw",e,a,s)}))}s(l.arg)}var o;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return o=o?o.then(r,r):r()}})}function E(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return A()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=w(a,n);if(s){if(s===d)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===d)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function w(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,w(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function T(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(T,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:A}}function A(){return{value:void 0,done:!0}}return p.prototype=v,r(b,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:p,configurable:!0}),p.displayName=l(v,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,s,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},_(x.prototype),l(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new x(u(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},_(b),l(b,s,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function xe(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(u){return void n(u)}s.done?t(l):Promise.resolve(l).then(r,i)}function Ee(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function a(e){xe(o,r,i,a,s,"next",e)}function s(e){xe(o,r,i,a,s,"throw",e)}a(void 0)}))}}var we=r(9080),Te=Symbol.for("Dexie"),Se=globalThis[Te]||(globalThis[Te]=we);if(we.semVer!==Se.semVer)throw new Error("Two different versions of Dexie loaded in the same app: ".concat(we.semVer," and ").concat(Se.semVer));Se.liveQuery,Se.mergeRanges,Se.rangesOverlap,Se.RangeSet,Se.cmp,Se.Entity,Se.PropModSymbol,Se.PropModification,Se.replacePrefix,Se.add,Se.remove;var ke=Se,Ce=function(){function e(t){u(this,e),this.db=void 0,this.dbName="dragonbonesLocalDB",this.dbVersion=1,this.fileTableId=0,this.maxFileId=100,this.curUser=void 0,e._sym}return f(e,[{key:"init",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new ke(this.dbName),this.db=t,t.version(this.dbVersion).stores({tableMaxId:"++id, maxId",tableFiles:"++id, name, type, data, url, user, modifyTime",tableUser:"++id, name, &uuid",tableDocument:"++id, &name, lastModify, user, data"}),n=0,e.prev=4,e.next=7,t.tableMaxId.where("id").above(0).first();case 7:(r=e.sent)&&(n=r.maxId,this.maxFileId=n,this.fileTableId=r.id),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4);case 14:if(0!==n){e.next=18;break}return e.next=17,this.addMaxId(this.maxFileId);case 17:this.fileTableId=e.sent;case 18:return e.next=20,this.getUserData();case 20:return i=e.sent,this.curUser=i,e.abrupt("return",i);case 23:case"end":return e.stop()}}),e,this,[[4,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"addFile",value:function(){var e=Ee(_e().mark((function e(t,n,r,i){var o,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Date.now(),e.next=3,this.db.tableFiles.add({name:t,type:n,data:r,url:i,user:this.curUser.uuid,modifyTime:o});case 3:return a=e.sent,this.maxFileId=a,this.updateMaxFileId(a),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"addMaxId",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableMaxId.add({maxId:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateMaxFileId",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableMaxId.update(this.fileTableId,{maxId:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileByName",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.where("name").equals(t).toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFileById",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAllFiles",value:function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deleteFileById",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableFiles.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addDocumentData",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,this.getUserData();case 3:return i=e.sent,e.next=6,this.db.tableDocument.add({user:i.uuid,data:n,name:t,lastModify:r});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getDocumentDataById",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.get(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getDocumentDataByName",value:function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.where("name").equals(t).first();case 2:if(!(n=e.sent)){e.next=5;break}return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateDocumentData",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.next=3,this.getDocumentDataByName(t);case 3:if(i=e.sent){e.next=8;break}return e.next=7,this.addDocumentData(t,n);case 7:case 10:return e.abrupt("return",e.sent);case 8:return e.next=10,this.db.tableDocument.update(i.id,{data:n,lastModify:r});case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"deleteDocumentDataById",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableDocument.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deleteDocumentDataByName",value:function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDocumentDataByName(t);case 2:if(!(n=e.sent)){e.next=7;break}return e.next=6,this.db.tableDocument.delete(n.id);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserData",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableUser.where("id").above(0).first();case 2:if(!(t=e.sent)){e.next=7;break}return e.abrupt("return",t);case 7:return n="dragonbonesUser",r=this.getFingerPrint(),e.next=11,this.addUserData(n,r);case 11:return i=e.sent,e.abrupt("return",{id:i,name:n,uuid:r});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addUserData",value:function(){var e=Ee(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.db.tableUser.add({name:t,uuid:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getFingerPrint",value:function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n="dragonbonesWeb";t.textBaseline="top",t.font="14px 'Arial'",t.textBaseline="alphabetic",t.rotate(.05),t.fillStyle="#f60",t.fillRect(125,1,62,20),t.fillStyle="#069",t.fillText(n,2,15),t.fillStyle="rgba(102, 204, 0, 0.7)",t.fillText(n,4,17);var r=e.toDataURL().replace("data:image/png;base64,",""),i=atob(r);return this.bin2hex(i.slice(-16,-12))}},{key:"bin2hex",value:function(e){for(var t="",n=0;n<e.length;n++)t+=this.int16ToHex(e.charCodeAt(n));return t}},{key:"int16ToHex",value:function(e){return(e+65536).toString(16).substr(-4).toUpperCase()}},{key:"clearAll",value:function(){this.db.tableFiles.clear(),this.db.tableMaxId.clear(),this.db.tableUser.clear(),this.db.tableDocument.clear()}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e(e._sym)),e._instance}}]),e}();function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ie(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Oe(e,t){if(e){if("string"===typeof e)return Ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ae(e,t):void 0}}function Pe(e){return function(e){if(Array.isArray(e))return Ae(e)}(e)||Ie(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Ce._instance=void 0,Ce._sym=Symbol(1);var Ne,De=r(1168),Le=Re({},r.t(De,2)),Fe=Le.version,Be=Le.render,Ue=Le.unmountComponentAtNode;try{Number((Fe||"").split(".")[0])>=18&&(Ne=Le.createRoot)}catch(Pv){}function He(e){var t=Le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&"object"===c(t)&&(t.usingClientEntryPoint=e)}var je="__rc_react_root__";function ze(e,t){Ne?function(e,t){He(!0);var n=t[je]||Ne(t);He(!1),n.render(e),t[je]=n}(e,t):function(e,t){Be(e,t)}(e,t)}function Ve(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.resolve().then((function(){var e;null===(e=t[je])||void 0===e||e.unmount(),delete t[je]})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(e){Ue(e)}function Xe(e){return Ye.apply(this,arguments)}function Ye(){return(Ye=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===Ne){e.next=2;break}return e.abrupt("return",Ve(t));case 2:We(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ke=function(e){for(var t,n=0,r=0,i=e.length;i>=4;++r,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(r)|(255&e.charCodeAt(++r))<<8|(255&e.charCodeAt(++r))<<16|(255&e.charCodeAt(++r))<<24))+(59797*(t>>>16)<<16),n=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&n)+(59797*(n>>>16)<<16);switch(i){case 3:n^=(255&e.charCodeAt(r+2))<<16;case 2:n^=(255&e.charCodeAt(r+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(r)))+(59797*(n>>>16)<<16)}return(((n=1540483477*(65535&(n^=n>>>13))+(59797*(n>>>16)<<16))^n>>>15)>>>0).toString(36)};function qe(e,t,n){var r=a.useRef({});return"value"in r.current&&!n(r.current.condition,t)||(r.current.value=e(),r.current.condition=t),r.current.value}var Ze={},$e=[];function Qe(e,t){}function Je(e,t){}function et(e,t,n){t||Ze[n]||(e(!1,n),Ze[n]=!0)}function tt(e,t){et(Qe,e,t)}tt.preMessage=function(e){$e.push(e)},tt.resetWarned=function(){Ze={}},tt.noteOnce=function(e,t){et(Je,e,t)};var nt=tt;var rt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Set;return function e(t,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=r.has(t);if(nt(!a,"Warning: There may be circular references"),a)return!1;if(t===i)return!0;if(n&&o>1)return!1;r.add(t);var s=o+1;if(Array.isArray(t)){if(!Array.isArray(i)||t.length!==i.length)return!1;for(var l=0;l<t.length;l++)if(!e(t[l],i[l],s))return!1;return!0}if(t&&i&&"object"===c(t)&&"object"===c(i)){var u=Object.keys(t);return u.length===Object.keys(i).length&&u.every((function(n){return e(t[n],i[n],s)}))}return!1}(e,t)},it=function(){function e(t){u(this,e),b(this,"instanceId",void 0),b(this,"cache",new Map),this.instanceId=t}return f(e,[{key:"get",value:function(e){return this.cache.get(e.join("%"))||null}},{key:"update",value:function(e,t){var n=e.join("%"),r=t(this.cache.get(n));null===r?this.cache.delete(n):this.cache.set(n,r)}}]),e}(),ot=it,at="data-token-hash",st="data-css-hash",lt="__cssinjs_instance__";function ut(){var e=Math.random().toString(12).slice(2);if("undefined"!==typeof document&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(st,"]"))||[],n=document.head.firstChild;Array.from(t).forEach((function(t){t[lt]=t[lt]||e,t[lt]===e&&document.head.insertBefore(t,n)}));var r={};Array.from(document.querySelectorAll("style[".concat(st,"]"))).forEach((function(t){var n,i=t.getAttribute(st);r[i]?t[lt]===e&&(null===(n=t.parentNode)||void 0===n||n.removeChild(t)):r[i]=!0}))}return new ot(e)}var ct=a.createContext({hashPriority:"low",cache:ut(),defaultCache:!0}),ht=ct;function dt(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}function ft(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var n=t;n;){if(n===e)return!0;n=n.parentNode}return!1}var pt="data-rc-order",vt="rc-util-key",mt=new Map;function gt(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).mark;return e?e.startsWith("data-")?e:"data-".concat(e):vt}function yt(e){return e.attachTo?e.attachTo:document.querySelector("head")||document.body}function bt(e){return Array.from((mt.get(e)||e).children).filter((function(e){return"STYLE"===e.tagName}))}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!dt())return null;var n=t.csp,r=t.prepend,i=document.createElement("style");i.setAttribute(pt,function(e){return"queue"===e?"prependQueue":e?"prepend":"append"}(r)),null!==n&&void 0!==n&&n.nonce&&(i.nonce=null===n||void 0===n?void 0:n.nonce),i.innerHTML=e;var o=yt(t),a=o.firstChild;if(r){if("queue"===r){var s=bt(o).filter((function(e){return["prepend","prependQueue"].includes(e.getAttribute(pt))}));if(s.length)return o.insertBefore(i,s[s.length-1].nextSibling),i}o.insertBefore(i,a)}else o.appendChild(i);return i}function xt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return bt(yt(t)).find((function(n){return n.getAttribute(gt(t))===e}))}function Et(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=xt(e,t);n&&yt(t).removeChild(n)}function wt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){var n=mt.get(e);if(!n||!ft(document,n)){var r=_t("",t),i=r.parentNode;mt.set(e,i),e.removeChild(r)}}(yt(n),n);var r=xt(t,n);if(r){var i,o,a;if(null!==(i=n.csp)&&void 0!==i&&i.nonce&&r.nonce!==(null===(o=n.csp)||void 0===o?void 0:o.nonce))r.nonce=null===(a=n.csp)||void 0===a?void 0:a.nonce;return r.innerHTML!==e&&(r.innerHTML=e),r}var s=_t(e,n);return s.setAttribute(gt(n),t),s}function Tt(e){var t="";return Object.keys(e).forEach((function(n){var r=e[n];t+=n,r&&"object"===c(r)?t+=Tt(r):t+=r})),t}var St="layer-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),kt="903px";var Ct=void 0;function At(){return void 0===Ct&&(Ct=function(e,t){if(dt()){var n;wt(e,St);var r=document.createElement("div");r.style.position="fixed",r.style.left="0",r.style.top="0",null===t||void 0===t||t(r),document.body.appendChild(r);var i=getComputedStyle(r).width===kt;return null===(n=r.parentNode)||void 0===n||n.removeChild(r),Et(St),i}return!1}("@layer ".concat(St," { .").concat(St," { width: ").concat(kt,"!important; } }"),(function(e){e.className=St}))),Ct}function It(e){if(Array.isArray(e))return e}function Ot(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Pt(e,t){return It(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(c){u=!0,i=c}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw i}}return s}}(e,t)||Oe(e,t)||Ot()}var Mt=function(){return!1};function Rt(e,t,n,r){var i=a.useContext(ht).cache,o=[e].concat(Pe(t));Mt();return a.useMemo((function(){i.update(o,(function(e){var t=Pt(e||[],2),r=t[0];return[(void 0===r?0:r)+1,t[1]||n()]}))}),[o.join("_")]),a.useEffect((function(){return function(){i.update(o,(function(e){var t=Pt(e||[],2),n=t[0],i=void 0===n?0:n,o=t[1];return 0===i-1?(null===r||void 0===r||r(o,!1),null):[i-1,o]}))}}),o),i.get(o)[1]}var Nt={},Dt="css",Lt=new Map;function Ft(e,t){Lt.set(e,(Lt.get(e)||0)-1);var n=Array.from(Lt.keys()),r=n.filter((function(e){return(Lt.get(e)||0)<=0}));r.length<n.length&&r.forEach((function(e){!function(e,t){"undefined"!==typeof document&&document.querySelectorAll("style[".concat(at,'="').concat(e,'"]')).forEach((function(e){var n;e[lt]===t&&(null===(n=e.parentNode)||void 0===n||n.removeChild(e))}))}(e,t),Lt.delete(e)}))}function Bt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(0,a.useContext)(ht).cache.instanceId,i=n.salt,o=void 0===i?"":i,s=n.override,l=void 0===s?Nt:s,u=n.formatToken,c=a.useMemo((function(){return Object.assign.apply(Object,[{}].concat(Pe(t)))}),[t]),h=a.useMemo((function(){return Tt(c)}),[c]),d=a.useMemo((function(){return Tt(l)}),[l]),f=Rt("token",[o,e.id,h,d],(function(){var t=Re(Re({},e.getDerivativeToken(c)),l);u&&(t=u(t));var n=function(e,t){return Ke("".concat(t,"_").concat(Tt(e)))}(t,o);t._tokenKey=n,function(e){Lt.set(e,(Lt.get(e)||0)+1)}(n);var r="".concat(Dt,"-").concat(Ke(n));return t._hashId=r,[t,r]}),(function(e){Ft(e[0]._tokenKey,r)}));return f}function Ut(){return Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ut.apply(this,arguments)}var Ht={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jt="comm",zt="rule",Vt="decl",Gt="@import",Wt="@keyframes",Xt="@layer",Yt=Math.abs,Kt=String.fromCharCode;Object.assign;function qt(e){return e.trim()}function Zt(e,t,n){return e.replace(t,n)}function $t(e,t){return e.indexOf(t)}function Qt(e,t){return 0|e.charCodeAt(t)}function Jt(e,t,n){return e.slice(t,n)}function en(e){return e.length}function tn(e){return e.length}function nn(e,t){return t.push(e),e}function rn(e,t){for(var n="",r=tn(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function on(e,t,n,r){switch(e.type){case Xt:if(e.children.length)break;case Gt:case Vt:return e.return=e.return||e.value;case jt:return"";case Wt:return e.return=e.value+"{"+rn(e.children,r)+"}";case zt:e.value=e.props.join(",")}return en(n=rn(e.children,r))?e.return=e.value+"{"+n+"}":""}var an=1,sn=1,ln=0,un=0,cn=0,hn="";function dn(e,t,n,r,i,o,a){return{value:e,root:t,parent:n,type:r,props:i,children:o,line:an,column:sn,length:a,return:""}}function fn(){return cn=un>0?Qt(hn,--un):0,sn--,10===cn&&(sn=1,an--),cn}function pn(){return cn=un<ln?Qt(hn,un++):0,sn++,10===cn&&(sn=1,an++),cn}function vn(){return Qt(hn,un)}function mn(){return un}function gn(e,t){return Jt(hn,e,t)}function yn(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function bn(e){return an=sn=1,ln=en(hn=e),un=0,[]}function _n(e){return hn="",e}function xn(e){return qt(gn(un-1,Tn(91===e?e+2:40===e?e+1:e)))}function En(e){for(;(cn=vn())&&cn<33;)pn();return yn(e)>2||yn(cn)>3?"":" "}function wn(e,t){for(;--t&&pn()&&!(cn<48||cn>102||cn>57&&cn<65||cn>70&&cn<97););return gn(e,mn()+(t<6&&32==vn()&&32==pn()))}function Tn(e){for(;pn();)switch(cn){case e:return un;case 34:case 39:34!==e&&39!==e&&Tn(cn);break;case 40:41===e&&Tn(e);break;case 92:pn()}return un}function Sn(e,t){for(;pn()&&e+cn!==57&&(e+cn!==84||47!==vn()););return"/*"+gn(t,un-1)+"*"+Kt(47===e?e:pn())}function kn(e){for(;!yn(vn());)pn();return gn(e,un)}function Cn(e){return _n(An("",null,null,null,[""],e=bn(e),0,[0],e))}function An(e,t,n,r,i,o,a,s,l){for(var u=0,c=0,h=a,d=0,f=0,p=0,v=1,m=1,g=1,y=0,b="",_=i,x=o,E=r,w=b;m;)switch(p=y,y=pn()){case 40:if(108!=p&&58==Qt(w,h-1)){-1!=$t(w+=Zt(xn(y),"&","&\f"),"&\f")&&(g=-1);break}case 34:case 39:case 91:w+=xn(y);break;case 9:case 10:case 13:case 32:w+=En(p);break;case 92:w+=wn(mn()-1,7);continue;case 47:switch(vn()){case 42:case 47:nn(On(Sn(pn(),mn()),t,n),l);break;default:w+="/"}break;case 123*v:s[u++]=en(w)*g;case 125*v:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+c:-1==g&&(w=Zt(w,/\f/g,"")),f>0&&en(w)-h&&nn(f>32?Pn(w+";",r,n,h-1):Pn(Zt(w," ","")+";",r,n,h-2),l);break;case 59:w+=";";default:if(nn(E=In(w,t,n,u,c,i,s,b,_=[],x=[],h),o),123===y)if(0===c)An(w,t,E,E,_,o,h,s,x);else switch(99===d&&110===Qt(w,3)?100:d){case 100:case 108:case 109:case 115:An(e,E,E,r&&nn(In(e,E,E,0,0,i,s,b,i,_=[],h),x),i,x,h,s,r?_:x);break;default:An(w,E,E,E,[""],x,0,s,x)}}u=c=f=0,v=g=1,b=w="",h=a;break;case 58:h=1+en(w),f=p;default:if(v<1)if(123==y)--v;else if(125==y&&0==v++&&125==fn())continue;switch(w+=Kt(y),y*v){case 38:g=c>0?1:(w+="\f",-1);break;case 44:s[u++]=(en(w)-1)*g,g=1;break;case 64:45===vn()&&(w+=xn(pn())),d=vn(),c=h=en(b=w+=kn(mn())),y++;break;case 45:45===p&&2==en(w)&&(v=0)}}return o}function In(e,t,n,r,i,o,a,s,l,u,c){for(var h=i-1,d=0===i?o:[""],f=tn(d),p=0,v=0,m=0;p<r;++p)for(var g=0,y=Jt(e,h+1,h=Yt(v=a[p])),b=e;g<f;++g)(b=qt(v>0?d[g]+" "+y:Zt(y,/&\f/g,d[g])))&&(l[m++]=b);return dn(e,t,n,0===i?zt:s,l,u,c)}function On(e,t,n){return dn(e,t,n,jt,Kt(cn),Jt(e,2,-2),0)}function Pn(e,t,n,r){return dn(e,t,n,Vt,Jt(e,0,r),Jt(e,r+1,-1),r)}var Mn=dt(),Rn="_multi_value_";function Nn(e){return rn(Cn(e),on).replace(/\{%%%\:[^;];}/g,";")}var Dn=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{root:!0,parentSelectors:[]},i=r.root,o=r.injectHash,a=r.parentSelectors,s=n.hashId,l=n.layer,u=(n.path,n.hashPriority),h=n.transformers,d=void 0===h?[]:h,f=(n.linters,""),p={};function v(t){var r=t.getName(s);if(!p[r]){var i=Pt(e(t.style,n,{root:!1,parentSelectors:a}),1)[0];p[r]="@keyframes ".concat(t.getName(s)).concat(i)}}var m=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.forEach((function(t){Array.isArray(t)?e(t,n):t&&n.push(t)})),n}(Array.isArray(t)?t:[t]);if(m.forEach((function(t){var r="string"!==typeof t||i?t:{};if("string"===typeof r)f+="".concat(r,"\n");else if(r._keyframe)v(r);else{var l=d.reduce((function(e,t){var n;return(null===t||void 0===t||null===(n=t.visit)||void 0===n?void 0:n.call(t,e))||e}),r);Object.keys(l).forEach((function(t){var r=l[t];if("object"!==c(r)||!r||"animationName"===t&&r._keyframe||function(e){return"object"===c(e)&&e&&("_skip_check_"in e||Rn in e)}(r)){var h,d=function(e,t){var n=e.replace(/[A-Z]/g,(function(e){return"-".concat(e.toLowerCase())})),r=t;Ht[e]||"number"!==typeof r||0===r||(r="".concat(r,"px")),"animationName"===e&&null!==t&&void 0!==t&&t._keyframe&&(v(t),r=t.getName(s)),f+="".concat(n,":").concat(r,";")},m=null!==(h=null===r||void 0===r?void 0:r.value)&&void 0!==h?h:r;"object"===c(r)&&null!==r&&void 0!==r&&r[Rn]&&Array.isArray(m)?m.forEach((function(e){d(t,e)})):d(t,m)}else{var g=!1,y=t.trim(),b=!1;(i||o)&&s?y.startsWith("@")?g=!0:y=function(e,t,n){if(!t)return e;var r=".".concat(t),i="low"===n?":where(".concat(r,")"):r,o=e.split(",").map((function(e){var t,n=e.trim().split(/\s+/),r=n[0]||"",o=(null===(t=r.match(/^\w+/))||void 0===t?void 0:t[0])||"";return[r="".concat(o).concat(i).concat(r.slice(o.length))].concat(Pe(n.slice(1))).join(" ")}));return o.join(",")}(t,s,u):!i||s||"&"!==y&&""!==y||(y="",b=!0);var _=Pt(e(r,n,{root:b,injectHash:g,parentSelectors:[].concat(Pe(a),[y])}),2),x=_[0],E=_[1];p=Re(Re({},p),E),f+="".concat(y).concat(x)}}))}})),i){if(l&&At()){var g=l.split(","),y=g[g.length-1].trim();f="@layer ".concat(y," {").concat(f,"}"),g.length>1&&(f="@layer ".concat(l,"{%%%:%}").concat(f))}}else f="{".concat(f,"}");return[f,p]};function Ln(){return null}function Fn(e,t){var n=e.token,r=e.path,i=e.hashId,o=e.layer,s=e.nonce,l=a.useContext(ht),u=l.autoClear,c=(l.mock,l.defaultCache),h=l.hashPriority,d=l.container,f=l.ssrInline,p=l.transformers,v=l.linters,m=l.cache,g=n._tokenKey,y=[g].concat(Pe(r)),_=Mn;var x=Rt("style",y,(function(){var e=t(),n=Pt(Dn(e,{hashId:i,hashPriority:h,layer:o,path:r.join("-"),transformers:p,linters:v}),2),a=n[0],l=n[1],u=Nn(a),c=function(e,t){return Ke("".concat(e.join("%")).concat(t))}(y,u);if(_){var f={mark:st,prepend:"queue",attachTo:d},b="function"===typeof s?s():s;b&&(f.csp={nonce:b});var x=wt(u,c,f);x[lt]=m.instanceId,x.setAttribute(at,g),Object.keys(l).forEach((function(e){wt(Nn(l[e]),"_effect-".concat(e),f)}))}return[u,g,c]}),(function(e,t){var n=Pt(e,3)[2];(t||u)&&Mn&&Et(n,{mark:st})})),E=Pt(x,3),w=E[0],T=E[1],S=E[2];return function(e){var t,n;f&&!_&&c?t=a.createElement("style",Ut({},(b(n={},at,T),b(n,st,S),n),{dangerouslySetInnerHTML:{__html:w}})):t=a.createElement(Ln,null);return a.createElement(a.Fragment,null,t,e)}}var Bn=function(){function e(t,n){u(this,e),b(this,"name",void 0),b(this,"style",void 0),b(this,"_keyframe",!0),this.name=t,this.style=n}return f(e,[{key:"getName",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?"".concat(e,"-").concat(this.name):this.name}}]),e}(),Un=Bn;var Hn=function(){function e(){u(this,e),b(this,"cache",void 0),b(this,"keys",void 0),b(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return f(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={map:this.cache};return e.forEach((function(e){var t,n;i?i=null===(t=i)||void 0===t||null===(n=t.map)||void 0===n?void 0:n.get(e):i=void 0})),null!==(t=i)&&void 0!==t&&t.value&&r&&(i.value[1]=this.cacheCallTimes++),null===(n=i)||void 0===n?void 0:n.value}},{key:"get",value:function(e){var t;return null===(t=this.internalGet(e,!0))||void 0===t?void 0:t[0]}},{key:"has",value:function(e){return!!this.internalGet(e)}},{key:"set",value:function(t,n){var r=this;if(!this.has(t)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var i=this.keys.reduce((function(e,t){var n=Pt(e,2)[1];return r.internalGet(t)[1]<n?[t,r.internalGet(t)[1]]:e}),[this.keys[0],this.cacheCallTimes]),o=Pt(i,1)[0];this.delete(o)}this.keys.push(t)}var a=this.cache;t.forEach((function(e,i){if(i===t.length-1)a.set(e,{value:[n,r.cacheCallTimes++]});else{var o=a.get(e);o?o.map||(o.map=new Map):a.set(e,{map:new Map}),a=a.get(e).map}}))}},{key:"deleteByPath",value:function(e,t){var n,r=e.get(t[0]);if(1===t.length)return r.map?e.set(t[0],{map:r.map}):e.delete(t[0]),null===(n=r.value)||void 0===n?void 0:n[0];var i=this.deleteByPath(r.map,t.slice(1));return r.map&&0!==r.map.size||r.value||e.delete(t[0]),i}},{key:"delete",value:function(e){if(this.has(e))return this.keys=this.keys.filter((function(t){return!function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,e)})),this.deleteByPath(this.cache,e)}}]),e}();b(Hn,"MAX_CACHE_SIZE",20),b(Hn,"MAX_CACHE_OFFSET",5);var jn=0,zn=function(){function e(t){u(this,e),b(this,"derivatives",void 0),b(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=jn,0===t.length&&t.length,jn+=1}return f(e,[{key:"getDerivativeToken",value:function(e){return this.derivatives.reduce((function(t,n){return n(e,t)}),void 0)}}]),e}(),Vn=new Hn;function Gn(e){var t=Array.isArray(e)?e:[e];return Vn.has(t)||Vn.set(t,new zn(t)),Vn.get(t)}function Wn(e){return e.notSplit=!0,e}Wn(["borderTop","borderBottom"]),Wn(["borderTop"]),Wn(["borderBottom"]),Wn(["borderLeft","borderRight"]),Wn(["borderLeft"]),Wn(["borderRight"]);var Xn=(0,a.createContext)({});function Yn(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Kn=r(2715);function qn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[];return a.Children.forEach(e,(function(e){(void 0!==e&&null!==e||t.keepEmpty)&&(Array.isArray(e)?n=n.concat(qn(e)):(0,Kn.isFragment)(e)&&e.props?n=n.concat(qn(e.props.children,t)):n.push(e))})),n}var Zn="RC_FORM_INTERNAL_HOOKS",$n=function(){nt(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Qn=a.createContext({getFieldValue:$n,getFieldsValue:$n,getFieldError:$n,getFieldWarning:$n,getFieldsError:$n,isFieldsTouched:$n,isFieldTouched:$n,isFieldValidating:$n,isFieldsValidating:$n,resetFields:$n,setFields:$n,setFieldValue:$n,setFieldsValue:$n,validateFields:$n,submit:$n,getInternalHooks:function(){return $n(),{dispatch:$n,initEntityValue:$n,registerField:$n,useSubscribe:$n,setInitialValues:$n,destroyForm:$n,setCallbacks:$n,registerWatch:$n,getFields:$n,setValidateMessages:$n,setPreserve:$n,getInitialValue:$n}}}),Jn=a.createContext(null);function er(e){return void 0===e||null===e?[]:Array.isArray(e)?e:[e]}function tr(){return tr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr.apply(this,arguments)}function nr(e){return nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nr(e)}function rr(e,t){return rr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},rr(e,t)}function ir(e,t,n){return ir=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(Pv){return!1}}()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&rr(i,n.prototype),i},ir.apply(null,arguments)}function or(e){var t="function"===typeof Map?new Map:void 0;return or=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return ir(e,arguments,nr(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),rr(r,e)},or(e)}var ar=/%[sdj%]/g;function sr(e){if(!e||!e.length)return null;var t={};return e.forEach((function(e){var n=e.field;t[n]=t[n]||[],t[n].push(e)})),t}function lr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=0,o=n.length;if("function"===typeof e)return e.apply(null,n);if("string"===typeof e){var a=e.replace(ar,(function(e){if("%%"===e)return"%";if(i>=o)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(aS){return"[Circular]"}break;default:return e}}));return a}return e}function ur(e,t){return void 0===e||null===e||(!("array"!==t||!Array.isArray(e)||e.length)||!(!function(e){return"string"===e||"url"===e||"hex"===e||"email"===e||"date"===e||"pattern"===e}(t)||"string"!==typeof e||e))}function cr(e,t,n){var r=0,i=e.length;!function o(a){if(a&&a.length)n(a);else{var s=r;r+=1,s<i?t(e[s],o):n([])}}([])}var hr=function(e){var t,n;function r(t,n){var r;return(r=e.call(this,"Async Validation Error")||this).errors=t,r.fields=n,r}return n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,rr(t,n),r}(or(Error));function dr(e,t,n,r,i){if(t.first){var o=new Promise((function(t,o){var a=function(e){var t=[];return Object.keys(e).forEach((function(n){t.push.apply(t,e[n]||[])})),t}(e);cr(a,n,(function(e){return r(e),e.length?o(new hr(e,sr(e))):t(i)}))}));return o.catch((function(e){return e})),o}var a=!0===t.firstFields?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],h=new Promise((function(t,o){var h=function(e){if(c.push.apply(c,e),++u===l)return r(c),c.length?o(new hr(c,sr(c))):t(i)};s.length||(r(c),t(i)),s.forEach((function(t){var r=e[t];-1!==a.indexOf(t)?cr(r,n,h):function(e,t,n){var r=[],i=0,o=e.length;function a(e){r.push.apply(r,e||[]),++i===o&&n(r)}e.forEach((function(e){t(e,a)}))}(r,n,h)}))}));return h.catch((function(e){return e})),h}function fr(e,t){return function(n){var r,i;return r=e.fullFields?function(e,t){for(var n=e,r=0;r<t.length;r++){if(void 0==n)return n;n=n[t[r]]}return n}(t,e.fullFields):t[n.field||e.fullField],(i=n)&&void 0!==i.message?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:"function"===typeof n?n():n,fieldValue:r,field:n.field||e.fullField}}}function pr(e,t){if(t)for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];"object"===typeof r&&"object"===typeof e[n]?e[n]=tr({},e[n],r):e[n]=r}return e}var vr,mr=function(e,t,n,r,i,o){!e.required||n.hasOwnProperty(e.field)&&!ur(t,o||e.type)||r.push(lr(i.messages.required,e.fullField))},gr=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,yr=/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i,br={integer:function(e){return br.number(e)&&parseInt(e,10)===e},float:function(e){return br.number(e)&&!br.integer(e)},array:function(e){return Array.isArray(e)},regexp:function(e){if(e instanceof RegExp)return!0;try{return!!new RegExp(e)}catch(Pv){return!1}},date:function(e){return"function"===typeof e.getTime&&"function"===typeof e.getMonth&&"function"===typeof e.getYear&&!isNaN(e.getTime())},number:function(e){return!isNaN(e)&&"number"===typeof e},object:function(e){return"object"===typeof e&&!br.array(e)},method:function(e){return"function"===typeof e},email:function(e){return"string"===typeof e&&e.length<=320&&!!e.match(gr)},url:function(e){return"string"===typeof e&&e.length<=2048&&!!e.match(function(){if(vr)return vr;var e="[a-fA-F\\d:]",t=function(t){return t&&t.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",i=("\n(?:\n(?:"+r+":){7}(?:"+r+"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\n(?:"+r+":){6}(?:"+n+"|:"+r+"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\n(?:"+r+":){5}(?::"+n+"|(?::"+r+"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\n(?:"+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\n(?:"+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\n(?:"+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\n(?:"+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\n(?::(?:(?::"+r+"){0,5}:"+n+"|(?::"+r+"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\n").replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),o=new RegExp("(?:^"+n+"$)|(?:^"+i+"$)"),a=new RegExp("^"+n+"$"),s=new RegExp("^"+i+"$"),l=function(e){return e&&e.exact?o:new RegExp("(?:"+t(e)+n+t(e)+")|(?:"+t(e)+i+t(e)+")","g")};l.v4=function(e){return e&&e.exact?a:new RegExp(""+t(e)+n+t(e),"g")},l.v6=function(e){return e&&e.exact?s:new RegExp(""+t(e)+i+t(e),"g")};var u=l.v4().source,c=l.v6().source;return vr=new RegExp("(?:^(?:(?:(?:[a-z]+:)?//)|www\\.)(?:\\S+(?::\\S*)?@)?(?:localhost|"+u+"|"+c+'|(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#][^\\s"]*)?$)',"i")}())},hex:function(e){return"string"===typeof e&&!!e.match(yr)}},_r="enum",xr={required:mr,whitespace:function(e,t,n,r,i){(/^\s+$/.test(t)||""===t)&&r.push(lr(i.messages.whitespace,e.fullField))},type:function(e,t,n,r,i){if(e.required&&void 0===t)mr(e,t,n,r,i);else{var o=e.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(o)>-1?br[o](t)||r.push(lr(i.messages.types[o],e.fullField,e.type)):o&&typeof t!==e.type&&r.push(lr(i.messages.types[o],e.fullField,e.type))}},range:function(e,t,n,r,i){var o="number"===typeof e.len,a="number"===typeof e.min,s="number"===typeof e.max,l=t,u=null,c="number"===typeof t,h="string"===typeof t,d=Array.isArray(t);if(c?u="number":h?u="string":d&&(u="array"),!u)return!1;d&&(l=t.length),h&&(l=t.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),o?l!==e.len&&r.push(lr(i.messages[u].len,e.fullField,e.len)):a&&!s&&l<e.min?r.push(lr(i.messages[u].min,e.fullField,e.min)):s&&!a&&l>e.max?r.push(lr(i.messages[u].max,e.fullField,e.max)):a&&s&&(l<e.min||l>e.max)&&r.push(lr(i.messages[u].range,e.fullField,e.min,e.max))},enum:function(e,t,n,r,i){e[_r]=Array.isArray(e[_r])?e[_r]:[],-1===e[_r].indexOf(t)&&r.push(lr(i.messages[_r],e.fullField,e[_r].join(", ")))},pattern:function(e,t,n,r,i){if(e.pattern)if(e.pattern instanceof RegExp)e.pattern.lastIndex=0,e.pattern.test(t)||r.push(lr(i.messages.pattern.mismatch,e.fullField,t,e.pattern));else if("string"===typeof e.pattern){new RegExp(e.pattern).test(t)||r.push(lr(i.messages.pattern.mismatch,e.fullField,t,e.pattern))}}},Er=function(e,t,n,r,i){var o=e.type,a=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t,o)&&!e.required)return n();xr.required(e,t,r,a,i,o),ur(t,o)||xr.type(e,t,r,a,i)}n(a)},wr={string:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t,"string")&&!e.required)return n();xr.required(e,t,r,o,i,"string"),ur(t,"string")||(xr.type(e,t,r,o,i),xr.range(e,t,r,o,i),xr.pattern(e,t,r,o,i),!0===e.whitespace&&xr.whitespace(e,t,r,o,i))}n(o)},method:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&xr.type(e,t,r,o,i)}n(o)},number:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(""===t&&(t=void 0),ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&(xr.type(e,t,r,o,i),xr.range(e,t,r,o,i))}n(o)},boolean:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&xr.type(e,t,r,o,i)}n(o)},regexp:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),ur(t)||xr.type(e,t,r,o,i)}n(o)},integer:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&(xr.type(e,t,r,o,i),xr.range(e,t,r,o,i))}n(o)},float:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&(xr.type(e,t,r,o,i),xr.range(e,t,r,o,i))}n(o)},array:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if((void 0===t||null===t)&&!e.required)return n();xr.required(e,t,r,o,i,"array"),void 0!==t&&null!==t&&(xr.type(e,t,r,o,i),xr.range(e,t,r,o,i))}n(o)},object:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&xr.type(e,t,r,o,i)}n(o)},enum:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i),void 0!==t&&xr.enum(e,t,r,o,i)}n(o)},pattern:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t,"string")&&!e.required)return n();xr.required(e,t,r,o,i),ur(t,"string")||xr.pattern(e,t,r,o,i)}n(o)},date:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t,"date")&&!e.required)return n();var a;if(xr.required(e,t,r,o,i),!ur(t,"date"))a=t instanceof Date?t:new Date(t),xr.type(e,a,r,o,i),a&&xr.range(e,a.getTime(),r,o,i)}n(o)},url:Er,hex:Er,email:Er,required:function(e,t,n,r,i){var o=[],a=Array.isArray(t)?"array":typeof t;xr.required(e,t,r,o,i,a),n(o)},any:function(e,t,n,r,i){var o=[];if(e.required||!e.required&&r.hasOwnProperty(e.field)){if(ur(t)&&!e.required)return n();xr.required(e,t,r,o,i)}n(o)}};function Tr(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var e=JSON.parse(JSON.stringify(this));return e.clone=this.clone,e}}}var Sr=Tr(),kr=function(){function e(e){this.rules=null,this._messages=Sr,this.define(e)}var t=e.prototype;return t.define=function(e){var t=this;if(!e)throw new Error("Cannot configure a schema with no rules");if("object"!==typeof e||Array.isArray(e))throw new Error("Rules must be an object");this.rules={},Object.keys(e).forEach((function(n){var r=e[n];t.rules[n]=Array.isArray(r)?r:[r]}))},t.messages=function(e){return e&&(this._messages=pr(Tr(),e)),this._messages},t.validate=function(t,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r=function(){});var o=t,a=n,s=r;if("function"===typeof a&&(s=a,a={}),!this.rules||0===Object.keys(this.rules).length)return s&&s(null,o),Promise.resolve(o);if(a.messages){var l=this.messages();l===Sr&&(l=Tr()),pr(l,a.messages),a.messages=l}else a.messages=this.messages();var u={};(a.keys||Object.keys(this.rules)).forEach((function(e){var n=i.rules[e],r=o[e];n.forEach((function(n){var a=n;"function"===typeof a.transform&&(o===t&&(o=tr({},o)),r=o[e]=a.transform(r)),(a="function"===typeof a?{validator:a}:tr({},a)).validator=i.getValidationMethod(a),a.validator&&(a.field=e,a.fullField=a.fullField||e,a.type=i.getType(a),u[e]=u[e]||[],u[e].push({rule:a,value:r,source:o,field:e}))}))}));var c={};return dr(u,a,(function(t,n){var r,i=t.rule,s=("object"===i.type||"array"===i.type)&&("object"===typeof i.fields||"object"===typeof i.defaultField);function l(e,t){return tr({},t,{fullField:i.fullField+"."+e,fullFields:i.fullFields?[].concat(i.fullFields,[e]):[e]})}function u(r){void 0===r&&(r=[]);var u=Array.isArray(r)?r:[r];!a.suppressWarning&&u.length&&e.warning("async-validator:",u),u.length&&void 0!==i.message&&(u=[].concat(i.message));var h=u.map(fr(i,o));if(a.first&&h.length)return c[i.field]=1,n(h);if(s){if(i.required&&!t.value)return void 0!==i.message?h=[].concat(i.message).map(fr(i,o)):a.error&&(h=[a.error(i,lr(a.messages.required,i.field))]),n(h);var d={};i.defaultField&&Object.keys(t.value).map((function(e){d[e]=i.defaultField})),d=tr({},d,t.rule.fields);var f={};Object.keys(d).forEach((function(e){var t=d[e],n=Array.isArray(t)?t:[t];f[e]=n.map(l.bind(null,e))}));var p=new e(f);p.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),p.validate(t.value,t.rule.options||a,(function(e){var t=[];h&&h.length&&t.push.apply(t,h),e&&e.length&&t.push.apply(t,e),n(t.length?t:null)}))}else n(h)}if(s=s&&(i.required||!i.required&&t.value),i.field=t.field,i.asyncValidator)r=i.asyncValidator(i,t.value,u,t.source,a);else if(i.validator){try{r=i.validator(i,t.value,u,t.source,a)}catch(h){console.error,a.suppressValidatorError||setTimeout((function(){throw h}),0),u(h.message)}!0===r?u():!1===r?u("function"===typeof i.message?i.message(i.fullField||i.field):i.message||(i.fullField||i.field)+" fails"):r instanceof Array?u(r):r instanceof Error&&u(r.message)}r&&r.then&&r.then((function(){return u()}),(function(e){return u(e)}))}),(function(e){!function(e){var t=[],n={};function r(e){var n;Array.isArray(e)?t=(n=t).concat.apply(n,e):t.push(e)}for(var i=0;i<e.length;i++)r(e[i]);t.length?(n=sr(t),s(t,n)):s(null,o)}(e)}),o)},t.getType=function(e){if(void 0===e.type&&e.pattern instanceof RegExp&&(e.type="pattern"),"function"!==typeof e.validator&&e.type&&!wr.hasOwnProperty(e.type))throw new Error(lr("Unknown rule type %s",e.type));return e.type||"string"},t.getValidationMethod=function(e){if("function"===typeof e.validator)return e.validator;var t=Object.keys(e),n=t.indexOf("message");return-1!==n&&t.splice(n,1),1===t.length&&"required"===t[0]?wr.required:wr[this.getType(e)]||void 0},e}();kr.register=function(e,t){if("function"!==typeof t)throw new Error("Cannot register a validator by type, validator is not a function");wr[e]=t},kr.warning=function(){},kr.messages=Sr,kr.validators=wr;var Cr="'${name}' is not a valid ${type}",Ar={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Cr,method:Cr,array:Cr,object:Cr,number:Cr,date:Cr,boolean:Cr,integer:Cr,float:Cr,regexp:Cr,email:Cr,url:Cr,hex:Cr},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function Ir(e,t){for(var n=e,r=0;r<t.length;r+=1){if(null===n||void 0===n)return;n=n[t[r]]}return n}function Or(e){return It(e)||Ie(e)||Oe(e)||Ot()}function Pr(e,t,n,r){if(!t.length)return n;var i,o=Or(t),a=o[0],s=o.slice(1);return i=e||"number"!==typeof a?Array.isArray(e)?Pe(e):Re({},e):[],r&&void 0===n&&1===s.length?delete i[a][s[0]]:i[a]=Pr(i[a],s,n,r),i}function Mr(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t.length&&r&&void 0===n&&!Ir(e,t.slice(0,-1))?e:Pr(e,t,n,r)}function Rr(e){return Array.isArray(e)?function(e){return e.map((function(e){return Rr(e)}))}(e):"object"===c(e)&&null!==e?function(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=Rr(e[n]);return t}return e}(e):e}var Nr=Rr;function Dr(e){return er(e)}function Lr(e,t){var n={};return t.forEach((function(t){var r=Ir(e,t);n=Mr(n,t,r)})),n}function Fr(e,t){return e&&e.some((function(e){return jr(e,t)}))}function Br(e){return"object"===c(e)&&null!==e&&Object.getPrototypeOf(e)===Object.prototype}function Ur(e,t){var n=Array.isArray(e)?Pe(e):Re({},e);return t?(Object.keys(t).forEach((function(e){var r=n[e],i=t[e],o=Br(r)&&Br(i);n[e]=o?Ur(r,i||{}):Nr(i)})),n):n}function Hr(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((function(e,t){return Ur(e,t)}),e)}function jr(e,t){return!(!e||!t||e.length!==t.length)&&e.every((function(e,n){return t[n]===e}))}function zr(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&"object"===c(t.target)&&e in t.target?t.target[e]:t}function Vr(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var i=e[t],o=t-n;return o>0?[].concat(Pe(e.slice(0,n)),[i],Pe(e.slice(n,t)),Pe(e.slice(t+1,r))):o<0?[].concat(Pe(e.slice(0,t)),Pe(e.slice(t+1,n+1)),[i],Pe(e.slice(n+1,r))):e}var Gr=kr;function Wr(e,t){return e.replace(/\$\{\w+\}/g,(function(e){var n=e.slice(2,-1);return t[n]}))}var Xr="CODE_LOGIC_ERROR";function Yr(e,t,n,r,i){return Kr.apply(this,arguments)}function Kr(){return Kr=Ee(_e().mark((function e(t,n,r,i,o){var s,l,u,c,h,d,f,p,v;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete(s=Re({},r)).ruleIndex,Gr.warning=function(){},s.validator&&(l=s.validator,s.validator=function(){try{return l.apply(void 0,arguments)}catch(e){return Promise.reject(Xr)}}),u=null,s&&"array"===s.type&&s.defaultField&&(u=s.defaultField,delete s.defaultField),c=new Gr(b({},t,[s])),h=Hr({},Ar,i.validateMessages),c.messages(h),d=[],e.prev=10,e.next=13,Promise.resolve(c.validate(b({},t,n),Re({},i)));case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),e.t0.errors&&(d=e.t0.errors.map((function(e,t){var n=e.message,r=n===Xr?h.default:n;return a.isValidElement(r)?a.cloneElement(r,{key:"error_".concat(t)}):r})));case 18:if(d.length||!u){e.next=23;break}return e.next=21,Promise.all(n.map((function(e,n){return Yr("".concat(t,".").concat(n),e,u,i,o)})));case 21:return f=e.sent,e.abrupt("return",f.reduce((function(e,t){return[].concat(Pe(e),Pe(t))}),[]));case 23:return p=Re(Re({},r),{},{name:t,enum:(r.enum||[]).join(", ")},o),v=d.map((function(e){return"string"===typeof e?Wr(e,p):e})),e.abrupt("return",v);case 26:case"end":return e.stop()}}),e,null,[[10,15]])}))),Kr.apply(this,arguments)}function qr(e,t,n,r,i,o){var a,s=e.join("."),l=n.map((function(e,t){var n=e.validator,r=Re(Re({},e),{},{ruleIndex:t});return n&&(r.validator=function(e,t,r){var i=!1,o=n(e,t,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Promise.resolve().then((function(){nt(!i,"Your validator function has already return a promise. `callback` will be ignored."),i||r.apply(void 0,t)}))}));i=o&&"function"===typeof o.then&&"function"===typeof o.catch,nt(i,"`callback` is deprecated. Please return a promise instead."),i&&o.then((function(){r()})).catch((function(e){r(e||" ")}))}),r})).sort((function(e,t){var n=e.warningOnly,r=e.ruleIndex,i=t.warningOnly,o=t.ruleIndex;return!!n===!!i?r-o:n?1:-1}));if(!0===i)a=new Promise(function(){var e=Ee(_e().mark((function e(n,i){var a,u,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=0;case 1:if(!(a<l.length)){e.next=12;break}return u=l[a],e.next=5,Yr(s,t,u,r,o);case 5:if(!(c=e.sent).length){e.next=9;break}return i([{errors:c,rule:u}]),e.abrupt("return");case 9:a+=1,e.next=1;break;case 12:n([]);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());else{var u=l.map((function(e){return Yr(s,t,e,r,o).then((function(t){return{errors:t,rule:e}}))}));a=(i?function(e){return $r.apply(this,arguments)}(u):function(e){return Zr.apply(this,arguments)}(u)).then((function(e){return Promise.reject(e)}))}return a.catch((function(e){return e})),a}function Zr(){return(Zr=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all(t).then((function(e){var t;return(t=[]).concat.apply(t,Pe(e))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $r(){return($r=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.abrupt("return",new Promise((function(e){t.forEach((function(r){r.then((function(r){r.errors.length&&e([r]),(n+=1)===t.length&&e([])}))}))})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qr=["name"],Jr=[];function ei(e,t,n,r,i,o){return"function"===typeof e?e(t,n,"source"in o?{source:o.source}:{}):r!==i}var ti=function(e){v(n,e);var t=y(n);function n(e){var r;(u(this,n),(r=t.call(this,e)).state={resetCount:0},r.cancelRegisterFunc=null,r.mounted=!1,r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.prevValidating=void 0,r.errors=Jr,r.warnings=Jr,r.cancelRegister=function(){var e=r.props,t=e.preserve,n=e.isListField,i=e.name;r.cancelRegisterFunc&&r.cancelRegisterFunc(n,t,Dr(i)),r.cancelRegisterFunc=null},r.getNamePath=function(){var e=r.props,t=e.name,n=e.fieldContext.prefixName;return void 0!==t?[].concat(Pe(void 0===n?[]:n),Pe(t)):[]},r.getRules=function(){var e=r.props,t=e.rules,n=void 0===t?[]:t,i=e.fieldContext;return n.map((function(e){return"function"===typeof e?e(i):e}))},r.refresh=function(){r.mounted&&r.setState((function(e){return{resetCount:e.resetCount+1}}))},r.triggerMetaEvent=function(e){var t=r.props.onMetaChange;null===t||void 0===t||t(Re(Re({},r.getMeta()),{},{destroy:e}))},r.onStoreChange=function(e,t,n){var i=r.props,o=i.shouldUpdate,a=i.dependencies,s=void 0===a?[]:a,l=i.onReset,u=n.store,c=r.getNamePath(),h=r.getValue(e),d=r.getValue(u),f=t&&Fr(t,c);switch("valueUpdate"===n.type&&"external"===n.source&&h!==d&&(r.touched=!0,r.dirty=!0,r.validatePromise=null,r.errors=Jr,r.warnings=Jr,r.triggerMetaEvent()),n.type){case"reset":if(!t||f)return r.touched=!1,r.dirty=!1,r.validatePromise=void 0,r.errors=Jr,r.warnings=Jr,r.triggerMetaEvent(),null===l||void 0===l||l(),void r.refresh();break;case"remove":if(o)return void r.reRender();break;case"setField":if(f){var p=n.data;return"touched"in p&&(r.touched=p.touched),"validating"in p&&!("originRCField"in p)&&(r.validatePromise=p.validating?Promise.resolve([]):null),"errors"in p&&(r.errors=p.errors||Jr),"warnings"in p&&(r.warnings=p.warnings||Jr),r.dirty=!0,r.triggerMetaEvent(),void r.reRender()}if(o&&!c.length&&ei(o,e,u,h,d,n))return void r.reRender();break;case"dependenciesUpdate":if(s.map(Dr).some((function(e){return Fr(n.relatedFields,e)})))return void r.reRender();break;default:if(f||(!s.length||c.length||o)&&ei(o,e,u,h,d,n))return void r.reRender()}!0===o&&r.reRender()},r.validateRules=function(e){var t=r.getNamePath(),n=r.getValue(),i=e||{},o=i.triggerName,a=i.validateOnly,s=void 0!==a&&a,l=Promise.resolve().then((function(){if(!r.mounted)return[];var i=r.props,a=i.validateFirst,s=void 0!==a&&a,u=i.messageVariables,c=r.getRules();o&&(c=c.filter((function(e){return e})).filter((function(e){var t=e.validateTrigger;return!t||er(t).includes(o)})));var h=qr(t,n,c,e,s,u);return h.catch((function(e){return e})).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jr;if(r.validatePromise===l){var t;r.validatePromise=null;var n=[],i=[];null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,r=e.errors,o=void 0===r?Jr:r;t?i.push.apply(i,Pe(o)):n.push.apply(n,Pe(o))})),r.errors=n,r.warnings=i,r.triggerMetaEvent(),r.reRender()}})),h}));return s||(r.validatePromise=l,r.dirty=!0,r.errors=Jr,r.warnings=Jr,r.triggerMetaEvent(),r.reRender()),l},r.isFieldValidating=function(){return!!r.validatePromise},r.isFieldTouched=function(){return r.touched},r.isFieldDirty=function(){return!(!r.dirty&&void 0===r.props.initialValue)||void 0!==(0,r.props.fieldContext.getInternalHooks(Zn).getInitialValue)(r.getNamePath())},r.getErrors=function(){return r.errors},r.getWarnings=function(){return r.warnings},r.isListField=function(){return r.props.isListField},r.isList=function(){return r.props.isList},r.isPreserve=function(){return r.props.preserve},r.getMeta=function(){return r.prevValidating=r.isFieldValidating(),{touched:r.isFieldTouched(),validating:r.prevValidating,errors:r.errors,warnings:r.warnings,name:r.getNamePath(),validated:null===r.validatePromise}},r.getOnlyChild=function(e){if("function"===typeof e){var t=r.getMeta();return Re(Re({},r.getOnlyChild(e(r.getControlled(),t,r.props.fieldContext))),{},{isFunction:!0})}var n=qn(e);return 1===n.length&&a.isValidElement(n[0])?{child:n[0],isFunction:!1}:{child:n,isFunction:!1}},r.getValue=function(e){var t=r.props.fieldContext.getFieldsValue,n=r.getNamePath();return Ir(e||t(!0),n)},r.getControlled=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.trigger,i=t.validateTrigger,o=t.getValueFromEvent,a=t.normalize,s=t.valuePropName,l=t.getValueProps,u=t.fieldContext,c=void 0!==i?i:u.validateTrigger,h=r.getNamePath(),d=u.getInternalHooks,f=u.getFieldsValue,p=d(Zn).dispatch,v=r.getValue(),m=l||function(e){return b({},s,e)},g=e[n],y=Re(Re({},e),m(v));return y[n]=function(){var e;r.touched=!0,r.dirty=!0,r.triggerMetaEvent();for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e=o?o.apply(void 0,n):zr.apply(void 0,[s].concat(n)),a&&(e=a(e,v,f(!0))),p({type:"updateValue",namePath:h,value:e}),g&&g.apply(void 0,n)},er(c||[]).forEach((function(e){var t=y[e];y[e]=function(){t&&t.apply(void 0,arguments);var n=r.props.rules;n&&n.length&&p({type:"validateField",namePath:h,triggerName:e})}})),y},e.fieldContext)&&(0,(0,e.fieldContext.getInternalHooks)(Zn).initEntityValue)(g(r));return r}return f(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.shouldUpdate,n=e.fieldContext;if(this.mounted=!0,n){var r=(0,n.getInternalHooks)(Zn).registerField;this.cancelRegisterFunc=r(this)}!0===t&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var e,t=this.state.resetCount,n=this.props.children,r=this.getOnlyChild(n),i=r.child;return r.isFunction?e=i:a.isValidElement(i)?e=a.cloneElement(i,this.getControlled(i.props)):(nt(!i,"`children` of Field is not validate ReactElement."),e=i),a.createElement(a.Fragment,{key:t},e)}}]),n}(a.Component);ti.contextType=Qn,ti.defaultProps={trigger:"onChange",valuePropName:"value"};var ni=function(e){var t=e.name,n=Yn(e,Qr),r=a.useContext(Qn),i=a.useContext(Jn),o=void 0!==t?Dr(t):void 0,s="keep";return n.isListField||(s="_".concat((o||[]).join("_"))),a.createElement(ti,Ut({key:s,name:o,isListField:!!i},n,{fieldContext:r}))},ri=function(e){var t=e.name,n=e.initialValue,r=e.children,i=e.rules,o=e.validateTrigger,s=e.isListField,l=a.useContext(Qn),u=a.useContext(Jn),c=a.useRef({keys:[],id:0}).current,h=a.useMemo((function(){var e=Dr(l.prefixName)||[];return[].concat(Pe(e),Pe(Dr(t)))}),[l.prefixName,t]),d=a.useMemo((function(){return Re(Re({},l),{},{prefixName:h})}),[l,h]),f=a.useMemo((function(){return{getKey:function(e){var t=h.length,n=e[t];return[c.keys[n],e.slice(t+1)]}}}),[h]);if("function"!==typeof r)return nt(!1,"Form.List only accepts function as children."),null;return a.createElement(Jn.Provider,{value:f},a.createElement(Qn.Provider,{value:d},a.createElement(ni,{name:[],shouldUpdate:function(e,t,n){return"internal"!==n.source&&e!==t},rules:i,validateTrigger:o,initialValue:n,isList:!0,isListField:null!==s&&void 0!==s?s:!!u},(function(e,t){var n=e.value,i=void 0===n?[]:n,o=e.onChange,a=l.getFieldValue,s=function(){return a(h||[])||[]},u={add:function(e,t){var n=s();t>=0&&t<=n.length?(c.keys=[].concat(Pe(c.keys.slice(0,t)),[c.id],Pe(c.keys.slice(t))),o([].concat(Pe(n.slice(0,t)),[e],Pe(n.slice(t))))):(c.keys=[].concat(Pe(c.keys),[c.id]),o([].concat(Pe(n),[e]))),c.id+=1},remove:function(e){var t=s(),n=new Set(Array.isArray(e)?e:[e]);n.size<=0||(c.keys=c.keys.filter((function(e,t){return!n.has(t)})),o(t.filter((function(e,t){return!n.has(t)}))))},move:function(e,t){if(e!==t){var n=s();e<0||e>=n.length||t<0||t>=n.length||(c.keys=Vr(c.keys,e,t),o(Vr(n,e,t)))}}},d=i||[];return Array.isArray(d)||(d=[]),r(d.map((function(e,t){var n=c.keys[t];return void 0===n&&(c.keys[t]=c.id,n=c.keys[t],c.id+=1),{name:t,key:n,isListField:!0}})),u,t)}))))};var ii="__@field_split__";function oi(e){return e.map((function(e){return"".concat(c(e),":").concat(e)})).join(ii)}var ai=function(){function e(){u(this,e),this.kvs=new Map}return f(e,[{key:"set",value:function(e,t){this.kvs.set(oi(e),t)}},{key:"get",value:function(e){return this.kvs.get(oi(e))}},{key:"update",value:function(e,t){var n=t(this.get(e));n?this.set(e,n):this.delete(e)}},{key:"delete",value:function(e){this.kvs.delete(oi(e))}},{key:"map",value:function(e){return Pe(this.kvs.entries()).map((function(t){var n=Pt(t,2),r=n[0],i=n[1],o=r.split(ii);return e({key:o.map((function(e){var t=Pt(e.match(/^([^:]*):(.*)$/),3),n=t[1],r=t[2];return"number"===n?Number(r):r})),value:i})}))}},{key:"toJSON",value:function(){var e={};return this.map((function(t){var n=t.key,r=t.value;return e[n.join(".")]=r,null})),e}}]),e}(),si=ai,li=["name"],ui=f((function e(t){var n=this;u(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldValue:n.setFieldValue,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(e){return e===Zn?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(nt(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(e){n.subscribable=e},this.prevWithoutPreserves=null,this.setInitialValues=function(e,t){if(n.initialValues=e||{},t){var r,i=Hr({},e,n.store);null===(r=n.prevWithoutPreserves)||void 0===r||r.map((function(t){var n=t.key;i=Mr(i,n,Ir(e,n))})),n.prevWithoutPreserves=null,n.updateStore(i)}},this.destroyForm=function(){var e=new si;n.getFieldEntities(!0).forEach((function(t){n.isMergedPreserve(t.isPreserve())||e.set(t.getNamePath(),!0)})),n.prevWithoutPreserves=e},this.getInitialValue=function(e){var t=Ir(n.initialValues,e);return e.length?Nr(t):t},this.setCallbacks=function(e){n.callbacks=e},this.setValidateMessages=function(e){n.validateMessages=e},this.setPreserve=function(e){n.preserve=e},this.watchList=[],this.registerWatch=function(e){return n.watchList.push(e),function(){n.watchList=n.watchList.filter((function(t){return t!==e}))}},this.notifyWatch=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.watchList.length){var t=n.getFieldsValue(),r=n.getFieldsValue(!0);n.watchList.forEach((function(n){n(t,r,e)}))}},this.timeoutId=null,this.warningUnhooked=function(){0},this.updateStore=function(e){n.store=e},this.getFieldEntities=function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]?n.fieldEntities.filter((function(e){return e.getNamePath().length})):n.fieldEntities},this.getFieldsMap=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=new si;return n.getFieldEntities(e).forEach((function(e){var n=e.getNamePath();t.set(n,e)})),t},this.getFieldEntitiesForNamePathList=function(e){if(!e)return n.getFieldEntities(!0);var t=n.getFieldsMap(!0);return e.map((function(e){var n=Dr(e);return t.get(n)||{INVALIDATE_NAME_PATH:Dr(e)}}))},this.getFieldsValue=function(e,t){if(n.warningUnhooked(),!0===e&&!t)return n.store;var r=n.getFieldEntitiesForNamePathList(Array.isArray(e)?e:null),i=[];return r.forEach((function(n){var r,o="INVALIDATE_NAME_PATH"in n?n.INVALIDATE_NAME_PATH:n.getNamePath();if(e||!(null===(r=n.isListField)||void 0===r?void 0:r.call(n)))if(t){var a="getMeta"in n?n.getMeta():null;t(a)&&i.push(o)}else i.push(o)})),Lr(n.store,i.map(Dr))},this.getFieldValue=function(e){n.warningUnhooked();var t=Dr(e);return Ir(n.store,t)},this.getFieldsError=function(e){return n.warningUnhooked(),n.getFieldEntitiesForNamePathList(e).map((function(t,n){return t&&!("INVALIDATE_NAME_PATH"in t)?{name:t.getNamePath(),errors:t.getErrors(),warnings:t.getWarnings()}:{name:Dr(e[n]),errors:[],warnings:[]}}))},this.getFieldError=function(e){n.warningUnhooked();var t=Dr(e);return n.getFieldsError([t])[0].errors},this.getFieldWarning=function(e){n.warningUnhooked();var t=Dr(e);return n.getFieldsError([t])[0].warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i,o=t[0],a=t[1],s=!1;0===t.length?i=null:1===t.length?Array.isArray(o)?(i=o.map(Dr),s=!1):(i=null,s=o):(i=o.map(Dr),s=a);var l=n.getFieldEntities(!0),u=function(e){return e.isFieldTouched()};if(!i)return s?l.every(u):l.some(u);var c=new si;i.forEach((function(e){c.set(e,[])})),l.forEach((function(e){var t=e.getNamePath();i.forEach((function(n){n.every((function(e,n){return t[n]===e}))&&c.update(n,(function(t){return[].concat(Pe(t),[e])}))}))}));var h=function(e){return e.some(u)},d=c.map((function(e){return e.value}));return s?d.every(h):d.some(h)},this.isFieldTouched=function(e){return n.warningUnhooked(),n.isFieldsTouched([e])},this.isFieldsValidating=function(e){n.warningUnhooked();var t=n.getFieldEntities();if(!e)return t.some((function(e){return e.isFieldValidating()}));var r=e.map(Dr);return t.some((function(e){var t=e.getNamePath();return Fr(r,t)&&e.isFieldValidating()}))},this.isFieldValidating=function(e){return n.warningUnhooked(),n.isFieldsValidating([e])},this.resetWithFieldInitialValue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new si,r=n.getFieldEntities(!0);r.forEach((function(e){var n=e.props.initialValue,r=e.getNamePath();if(void 0!==n){var i=t.get(r)||new Set;i.add({entity:e,value:n}),t.set(r,i)}}));var i;e.entities?i=e.entities:e.namePathList?(i=[],e.namePathList.forEach((function(e){var n,r=t.get(e);r&&(n=i).push.apply(n,Pe(Pe(r).map((function(e){return e.entity}))))}))):i=r,i.forEach((function(r){if(void 0!==r.props.initialValue){var i=r.getNamePath();if(void 0!==n.getInitialValue(i))nt(!1,"Form already set 'initialValues' with path '".concat(i.join("."),"'. Field can not overwrite it."));else{var o=t.get(i);if(o&&o.size>1)nt(!1,"Multiple Field with path '".concat(i.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(o){var a=n.getFieldValue(i);e.skipExist&&void 0!==a||n.updateStore(Mr(n.store,i,Pe(o)[0].value))}}}}))},this.resetFields=function(e){n.warningUnhooked();var t=n.store;if(!e)return n.updateStore(Hr({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(t,null,{type:"reset"}),void n.notifyWatch();var r=e.map(Dr);r.forEach((function(e){var t=n.getInitialValue(e);n.updateStore(Mr(n.store,e,t))})),n.resetWithFieldInitialValue({namePathList:r}),n.notifyObservers(t,r,{type:"reset"}),n.notifyWatch(r)},this.setFields=function(e){n.warningUnhooked();var t=n.store,r=[];e.forEach((function(e){var i=e.name,o=Yn(e,li),a=Dr(i);r.push(a),"value"in o&&n.updateStore(Mr(n.store,a,o.value)),n.notifyObservers(t,[a],{type:"setField",data:e})})),n.notifyWatch(r)},this.getFields=function(){return n.getFieldEntities(!0).map((function(e){var t=e.getNamePath(),r=Re(Re({},e.getMeta()),{},{name:t,value:n.getFieldValue(t)});return Object.defineProperty(r,"originRCField",{value:!0}),r}))},this.initEntityValue=function(e){var t=e.props.initialValue;if(void 0!==t){var r=e.getNamePath();void 0===Ir(n.store,r)&&n.updateStore(Mr(n.store,r,t))}},this.isMergedPreserve=function(e){var t=void 0!==e?e:n.preserve;return null===t||void 0===t||t},this.registerField=function(e){n.fieldEntities.push(e);var t=e.getNamePath();if(n.notifyWatch([t]),void 0!==e.props.initialValue){var r=n.store;n.resetWithFieldInitialValue({entities:[e],skipExist:!0}),n.notifyObservers(r,[e.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(r,i){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter((function(t){return t!==e})),!n.isMergedPreserve(i)&&(!r||o.length>1)){var a=r?void 0:n.getInitialValue(t);if(t.length&&n.getFieldValue(t)!==a&&n.fieldEntities.every((function(e){return!jr(e.getNamePath(),t)}))){var s=n.store;n.updateStore(Mr(s,t,a,!0)),n.notifyObservers(s,[t],{type:"remove"}),n.triggerDependenciesUpdate(s,t)}}n.notifyWatch([t])}},this.dispatch=function(e){switch(e.type){case"updateValue":var t=e.namePath,r=e.value;n.updateValue(t,r);break;case"validateField":var i=e.namePath,o=e.triggerName;n.validateFields([i],{triggerName:o})}},this.notifyObservers=function(e,t,r){if(n.subscribable){var i=Re(Re({},r),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach((function(n){(0,n.onStoreChange)(e,t,i)}))}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(e,t){var r=n.getDependencyChildrenFields(t);return r.length&&n.validateFields(r),n.notifyObservers(e,r,{type:"dependenciesUpdate",relatedFields:[t].concat(Pe(r))}),r},this.updateValue=function(e,t){var r=Dr(e),i=n.store;n.updateStore(Mr(n.store,r,t)),n.notifyObservers(i,[r],{type:"valueUpdate",source:"internal"}),n.notifyWatch([r]);var o=n.triggerDependenciesUpdate(i,r),a=n.callbacks.onValuesChange;a&&a(Lr(n.store,[r]),n.getFieldsValue());n.triggerOnFieldsChange([r].concat(Pe(o)))},this.setFieldsValue=function(e){n.warningUnhooked();var t=n.store;if(e){var r=Hr(n.store,e);n.updateStore(r)}n.notifyObservers(t,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.setFieldValue=function(e,t){n.setFields([{name:e,value:t}])},this.getDependencyChildrenFields=function(e){var t=new Set,r=[],i=new si;n.getFieldEntities().forEach((function(e){(e.props.dependencies||[]).forEach((function(t){var n=Dr(t);i.update(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Set;return t.add(e),t}))}))}));return function e(n){(i.get(n)||new Set).forEach((function(n){if(!t.has(n)){t.add(n);var i=n.getNamePath();n.isFieldDirty()&&i.length&&(r.push(i),e(i))}}))}(e),r},this.triggerOnFieldsChange=function(e,t){var r=n.callbacks.onFieldsChange;if(r){var i=n.getFields();if(t){var o=new si;t.forEach((function(e){var t=e.name,n=e.errors;o.set(t,n)})),i.forEach((function(e){e.errors=o.get(e.name)||e.errors}))}r(i.filter((function(t){var n=t.name;return Fr(e,n)})),i)}},this.validateFields=function(e,t){var r,i;n.warningUnhooked(),Array.isArray(e)||"string"===typeof e||"string"===typeof t?(r=e,i=t):i=e;var o=!!r,a=o?r.map(Dr):[],s=[];n.getFieldEntities(!0).forEach((function(e){var t;if(o||a.push(e.getNamePath()),(null===(t=i)||void 0===t?void 0:t.recursive)&&o){var l=e.getNamePath();l.every((function(e,t){return r[t]===e||void 0===r[t]}))&&a.push(l)}if(e.props.rules&&e.props.rules.length){var u=e.getNamePath();if(!o||Fr(a,u)){var c=e.validateRules(Re({validateMessages:Re(Re({},Ar),n.validateMessages)},i));s.push(c.then((function(){return{name:u,errors:[],warnings:[]}})).catch((function(e){var t,n=[],r=[];return null===(t=e.forEach)||void 0===t||t.call(e,(function(e){var t=e.rule.warningOnly,i=e.errors;t?r.push.apply(r,Pe(i)):n.push.apply(n,Pe(i))})),n.length?Promise.reject({name:u,errors:n,warnings:r}):{name:u,errors:n,warnings:r}})))}}}));var l=function(e){var t=!1,n=e.length,r=[];return e.length?new Promise((function(i,o){e.forEach((function(e,a){e.catch((function(e){return t=!0,e})).then((function(e){n-=1,r[a]=e,n>0||(t&&o(r),i(r))}))}))})):Promise.resolve([])}(s);n.lastValidatePromise=l,l.catch((function(e){return e})).then((function(e){var t=e.map((function(e){return e.name}));n.notifyObservers(n.store,t,{type:"validateFinish"}),n.triggerOnFieldsChange(t,e)}));var u=l.then((function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(a)):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:n.getFieldsValue(a),errorFields:t,outOfDate:n.lastValidatePromise!==l})}));return u.catch((function(e){return e})),n.triggerOnFieldsChange(a),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then((function(e){var t=n.callbacks.onFinish;if(t)try{t(e)}catch(r){}})).catch((function(e){var t=n.callbacks.onFinishFailed;t&&t(e)}))},this.forceRootUpdate=t}));var ci=function(e){var t=a.useRef(),n=Pt(a.useState({}),2)[1];if(!t.current)if(e)t.current=e;else{var r=new ui((function(){n({})}));t.current=r.getForm()}return[t.current]},hi=a.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),di=function(e){var t=e.validateMessages,n=e.onFormChange,r=e.onFormFinish,i=e.children,o=a.useContext(hi),s=a.useRef({});return a.createElement(hi.Provider,{value:Re(Re({},o),{},{validateMessages:Re(Re({},o.validateMessages),t),triggerFormChange:function(e,t){n&&n(e,{changedFields:t,forms:s.current}),o.triggerFormChange(e,t)},triggerFormFinish:function(e,t){r&&r(e,{values:t,forms:s.current}),o.triggerFormFinish(e,t)},registerForm:function(e,t){e&&(s.current=Re(Re({},s.current),{},b({},e,t))),o.registerForm(e,t)},unregisterForm:function(e){var t=Re({},s.current);delete t[e],s.current=t,o.unregisterForm(e)}})},i)},fi=hi,pi=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],vi=function(e,t){var n=e.name,r=e.initialValues,i=e.fields,o=e.form,s=e.preserve,l=e.children,u=e.component,h=void 0===u?"form":u,d=e.validateMessages,f=e.validateTrigger,p=void 0===f?"onChange":f,v=e.onValuesChange,m=e.onFieldsChange,g=e.onFinish,y=e.onFinishFailed,b=Yn(e,pi),_=a.useContext(fi),x=Pt(ci(o),1)[0],E=x.getInternalHooks(Zn),w=E.useSubscribe,T=E.setInitialValues,S=E.setCallbacks,k=E.setValidateMessages,C=E.setPreserve,A=E.destroyForm;a.useImperativeHandle(t,(function(){return x})),a.useEffect((function(){return _.registerForm(n,x),function(){_.unregisterForm(n)}}),[_,x,n]),k(Re(Re({},_.validateMessages),d)),S({onValuesChange:v,onFieldsChange:function(e){if(_.triggerFormChange(n,e),m){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];m.apply(void 0,[e].concat(r))}},onFinish:function(e){_.triggerFormFinish(n,e),g&&g(e)},onFinishFailed:y}),C(s);var I,O=a.useRef(null);T(r,!O.current),O.current||(O.current=!0),a.useEffect((function(){return A}),[]);var P="function"===typeof l;P?I=l(x.getFieldsValue(!0),x):I=l;w(!P);var M=a.useRef();a.useEffect((function(){(function(e,t){if(e===t)return!0;if(!e&&t||e&&!t)return!1;if(!e||!t||"object"!==c(e)||"object"!==c(t))return!1;var n=Object.keys(e),r=Object.keys(t);return Pe(new Set([].concat(n,r))).every((function(n){var r=e[n],i=t[n];return"function"===typeof r&&"function"===typeof i||r===i}))})(M.current||[],i||[])||x.setFields(i||[]),M.current=i}),[i,x]);var R=a.useMemo((function(){return Re(Re({},x),{},{validateTrigger:p})}),[x,p]),N=a.createElement(Qn.Provider,{value:R},I);return!1===h?N:a.createElement(h,Ut({},b,{onSubmit:function(e){e.preventDefault(),e.stopPropagation(),x.submit()},onReset:function(e){var t;e.preventDefault(),x.resetFields(),null===(t=b.onReset)||void 0===t||t.call(b,e)}}),N)};function mi(e){try{return JSON.stringify(e)}catch(t){return Math.random()}}var gi=function(){};var yi=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=void 0===r?[]:r,o=t[1],s=void 0===o?{}:o,l=function(e){return e&&!!e._init}(s)?{form:s}:s,u=l.form,c=Pt((0,a.useState)(),2),h=c[0],d=c[1],f=(0,a.useMemo)((function(){return mi(h)}),[h]),p=(0,a.useRef)(f);p.current=f;var v=(0,a.useContext)(Qn),m=u||v,g=m&&m._init,y=Dr(i),b=(0,a.useRef)(y);return b.current=y,gi(y),(0,a.useEffect)((function(){if(g){var e=m.getFieldsValue,t=(0,(0,m.getInternalHooks)(Zn).registerWatch)((function(e,t){var n=Ir(l.preserve?t:e,b.current),r=mi(n);p.current!==r&&(p.current=r,d(n))})),n=Ir(l.preserve?e(!0):e(),b.current);return d(n),t}}),[g]),h},bi=a.forwardRef(vi);bi.FormProvider=di,bi.Field=ni,bi.List=ri,bi.useForm=ci,bi.useWatch=yi;var _i={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"},xi={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},Ei={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},_i),timePickerLocale:Object.assign({},xi)},wi="${label} is not a valid ${type}",Ti={locale:"en",Pagination:{items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},DatePicker:Ei,TimePicker:xi,Calendar:Ei,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:wi,method:wi,array:wi,object:wi,number:wi,date:wi,boolean:wi,integer:wi,float:wi,regexp:wi,email:wi,url:wi,hex:wi},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},Si=Object.assign({},Ti.Modal);function ki(e){Si=e?Object.assign(Object.assign({},Si),e):Object.assign({},Ti.Modal)}function Ci(){return Si}var Ai=(0,a.createContext)(void 0);var Ii=function(e){var t=e.locale,n=void 0===t?{}:t,r=e.children;e._ANT_MARK__;a.useEffect((function(){return ki(n&&n.Modal),function(){ki()}}),[n]);var i=a.useMemo((function(){return Object.assign(Object.assign({},n),{exist:!0})}),[n]);return a.createElement(Ai.Provider,{value:i},r)},Oi="5.5.0";function Pi(e,t){(function(e){return"string"===typeof e&&-1!==e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!==e.indexOf("%")}(e);return e=360===t?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:e=360===t?(e<0?e%t+t:e%t)/parseFloat(String(t)):e%t/parseFloat(String(t))}function Mi(e){return Math.min(1,Math.max(0,e))}function Ri(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Ni(e){return e<=1?"".concat(100*Number(e),"%"):e}function Di(e){return 1===e.length?"0"+e:String(e)}function Li(e,t,n){e=Pi(e,255),t=Pi(t,255),n=Pi(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=0,s=(r+i)/2;if(r===i)a=0,o=0;else{var l=r-i;switch(a=s>.5?l/(2-r-i):l/(r+i),r){case e:o=(t-n)/l+(t<n?6:0);break;case t:o=(n-e)/l+2;break;case n:o=(e-t)/l+4}o/=6}return{h:o,s:a,l:s}}function Fi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*n*(t-e):n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Bi(e,t,n){e=Pi(e,255),t=Pi(t,255),n=Pi(n,255);var r=Math.max(e,t,n),i=Math.min(e,t,n),o=0,a=r,s=r-i,l=0===r?0:s/r;if(r===i)o=0;else{switch(r){case e:o=(t-n)/s+(t<n?6:0);break;case t:o=(n-e)/s+2;break;case n:o=(e-t)/s+4}o/=6}return{h:o,s:l,v:a}}function Ui(e,t,n,r){var i=[Di(Math.round(e).toString(16)),Di(Math.round(t).toString(16)),Di(Math.round(n).toString(16))];return r&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Hi(e){return Math.round(255*parseFloat(e)).toString(16)}function ji(e){return zi(e)/255}function zi(e){return parseInt(e,16)}var Vi={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Gi(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;return"string"===typeof e&&(e=function(e){if(e=e.trim().toLowerCase(),0===e.length)return!1;var t=!1;if(Vi[e])e=Vi[e],t=!0;else if("transparent"===e)return{r:0,g:0,b:0,a:0,format:"name"};var n=Ki.rgb.exec(e);if(n)return{r:n[1],g:n[2],b:n[3]};if(n=Ki.rgba.exec(e),n)return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=Ki.hsl.exec(e),n)return{h:n[1],s:n[2],l:n[3]};if(n=Ki.hsla.exec(e),n)return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=Ki.hsv.exec(e),n)return{h:n[1],s:n[2],v:n[3]};if(n=Ki.hsva.exec(e),n)return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=Ki.hex8.exec(e),n)return{r:zi(n[1]),g:zi(n[2]),b:zi(n[3]),a:ji(n[4]),format:t?"name":"hex8"};if(n=Ki.hex6.exec(e),n)return{r:zi(n[1]),g:zi(n[2]),b:zi(n[3]),format:t?"name":"hex"};if(n=Ki.hex4.exec(e),n)return{r:zi(n[1]+n[1]),g:zi(n[2]+n[2]),b:zi(n[3]+n[3]),a:ji(n[4]+n[4]),format:t?"name":"hex8"};if(n=Ki.hex3.exec(e),n)return{r:zi(n[1]+n[1]),g:zi(n[2]+n[2]),b:zi(n[3]+n[3]),format:t?"name":"hex"};return!1}(e)),"object"===typeof e&&(qi(e.r)&&qi(e.g)&&qi(e.b)?(t=function(e,t,n){return{r:255*Pi(e,255),g:255*Pi(t,255),b:255*Pi(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):qi(e.h)&&qi(e.s)&&qi(e.v)?(r=Ni(e.s),i=Ni(e.v),t=function(e,t,n){e=6*Pi(e,360),t=Pi(t,100),n=Pi(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6;return{r:255*[n,a,o,o,s,n][l],g:255*[s,n,n,a,o,o][l],b:255*[o,o,s,n,n,a][l]}}(e.h,r,i),a=!0,s="hsv"):qi(e.h)&&qi(e.s)&&qi(e.l)&&(r=Ni(e.s),o=Ni(e.l),t=function(e,t,n){var r,i,o;if(e=Pi(e,360),t=Pi(t,100),n=Pi(n,100),0===t)i=n,o=n,r=n;else{var a=n<.5?n*(1+t):n+t-n*t,s=2*n-a;r=Fi(s,a,e+1/3),i=Fi(s,a,e),o=Fi(s,a,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Ri(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Wi="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Xi="[\\s|\\(]+(".concat(Wi,")[,|\\s]+(").concat(Wi,")[,|\\s]+(").concat(Wi,")\\s*\\)?"),Yi="[\\s|\\(]+(".concat(Wi,")[,|\\s]+(").concat(Wi,")[,|\\s]+(").concat(Wi,")[,|\\s]+(").concat(Wi,")\\s*\\)?"),Ki={CSS_UNIT:new RegExp(Wi),rgb:new RegExp("rgb"+Xi),rgba:new RegExp("rgba"+Yi),hsl:new RegExp("hsl"+Xi),hsla:new RegExp("hsla"+Yi),hsv:new RegExp("hsv"+Xi),hsva:new RegExp("hsva"+Yi),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function qi(e){return Boolean(Ki.CSS_UNIT.exec(String(e)))}var Zi=2,$i=.16,Qi=.05,Ji=.05,eo=.15,to=5,no=4,ro=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function io(e){var t=Bi(e.r,e.g,e.b);return{h:360*t.h,s:t.s,v:t.v}}function oo(e){var t=e.r,n=e.g,r=e.b;return"#".concat(Ui(t,n,r,!1))}function ao(e,t,n){var r;return(r=Math.round(e.h)>=60&&Math.round(e.h)<=240?n?Math.round(e.h)-Zi*t:Math.round(e.h)+Zi*t:n?Math.round(e.h)+Zi*t:Math.round(e.h)-Zi*t)<0?r+=360:r>=360&&(r-=360),r}function so(e,t,n){return 0===e.h&&0===e.s?e.s:((r=n?e.s-$i*t:t===no?e.s+$i:e.s+Qi*t)>1&&(r=1),n&&t===to&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2)));var r}function lo(e,t,n){var r;return(r=n?e.v+Ji*t:e.v-eo*t)>1&&(r=1),Number(r.toFixed(2))}function uo(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=[],r=Gi(e),i=to;i>0;i-=1){var o=io(r),a=oo(Gi({h:ao(o,i,!0),s:so(o,i,!0),v:lo(o,i,!0)}));n.push(a)}n.push(oo(r));for(var s=1;s<=no;s+=1){var l=io(r),u=oo(Gi({h:ao(l,s),s:so(l,s),v:lo(l,s)}));n.push(u)}return"dark"===t.theme?ro.map((function(e){var r=e.index,i=e.opacity,o=oo(function(e,t,n){var r=n/100;return{r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b}}(Gi(t.backgroundColor||"#141414"),Gi(n[r]),100*i));return o})):n}var co={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},ho={},fo={};Object.keys(co).forEach((function(e){ho[e]=uo(co[e]),ho[e].primary=ho[e][5],fo[e]=uo(co[e],{theme:"dark",backgroundColor:"#141414"}),fo[e].primary=fo[e][5]}));ho.red,ho.volcano,ho.gold,ho.orange,ho.yellow,ho.lime,ho.green,ho.cyan;var po=ho.blue,vo=(ho.geekblue,ho.purple,ho.magenta,ho.grey,ho.grey,function(e){var t=e.controlHeight;return{controlHeightSM:.75*t,controlHeightXS:.5*t,controlHeightLG:1.25*t}});var mo={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},go=Object.assign(Object.assign({},mo),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorTextBase:"",colorBgBase:"",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n'Noto Color Emoji'",fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),yo=function(){function e(t,n){var r;if(void 0===t&&(t=""),void 0===n&&(n={}),t instanceof e)return t;"number"===typeof t&&(t=function(e){return{r:e>>16,g:(65280&e)>>8,b:255&e}}(t)),this.originalInput=t;var i=Gi(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(r=n.format)&&void 0!==r?r:i.format,this.gradientType=n.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},e.prototype.getLuminance=function(){var e=this.toRgb(),t=e.r/255,n=e.g/255,r=e.b/255;return.2126*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.7152*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))+.0722*(r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4))},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(e){return this.a=Ri(e),this.roundA=Math.round(100*this.a)/100,this},e.prototype.isMonochrome=function(){return 0===this.toHsl().s},e.prototype.toHsv=function(){var e=Bi(this.r,this.g,this.b);return{h:360*e.h,s:e.s,v:e.v,a:this.a}},e.prototype.toHsvString=function(){var e=Bi(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1===this.a?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHsl=function(){var e=Li(this.r,this.g,this.b);return{h:360*e.h,s:e.s,l:e.l,a:this.a}},e.prototype.toHslString=function(){var e=Li(this.r,this.g,this.b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1===this.a?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},e.prototype.toHex=function(e){return void 0===e&&(e=!1),Ui(this.r,this.g,this.b,e)},e.prototype.toHexString=function(e){return void 0===e&&(e=!1),"#"+this.toHex(e)},e.prototype.toHex8=function(e){return void 0===e&&(e=!1),function(e,t,n,r,i){var o=[Di(Math.round(e).toString(16)),Di(Math.round(t).toString(16)),Di(Math.round(n).toString(16)),Di(Hi(r))];return i&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))&&o[3].startsWith(o[3].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0):o.join("")}(this.r,this.g,this.b,this.a,e)},e.prototype.toHex8String=function(e){return void 0===e&&(e=!1),"#"+this.toHex8(e)},e.prototype.toHexShortString=function(e){return void 0===e&&(e=!1),1===this.a?this.toHexString(e):this.toHex8String(e)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return 1===this.a?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},e.prototype.toPercentageRgb=function(){var e=function(e){return"".concat(Math.round(100*Pi(e,255)),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var e=function(e){return Math.round(100*Pi(e,255))};return 1===this.a?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},e.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var e="#"+Ui(this.r,this.g,this.b,!1),t=0,n=Object.entries(Vi);t<n.length;t++){var r=n[t],i=r[0];if(e===r[1])return i}return!1},e.prototype.toString=function(e){var t=Boolean(e);e=null!==e&&void 0!==e?e:this.format;var n=!1,r=this.a<1&&this.a>=0;return t||!r||!e.startsWith("hex")&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this.a?this.toName():this.toRgbString()},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l+=t/100,n.l=Mi(n.l),new e(n)},e.prototype.brighten=function(t){void 0===t&&(t=10);var n=this.toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),new e(n)},e.prototype.darken=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.l-=t/100,n.l=Mi(n.l),new e(n)},e.prototype.tint=function(e){return void 0===e&&(e=10),this.mix("white",e)},e.prototype.shade=function(e){return void 0===e&&(e=10),this.mix("black",e)},e.prototype.desaturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s-=t/100,n.s=Mi(n.s),new e(n)},e.prototype.saturate=function(t){void 0===t&&(t=10);var n=this.toHsl();return n.s+=t/100,n.s=Mi(n.s),new e(n)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(t){var n=this.toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,new e(n)},e.prototype.mix=function(t,n){void 0===n&&(n=50);var r=this.toRgb(),i=new e(t).toRgb(),o=n/100;return new e({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},e.prototype.analogous=function(t,n){void 0===t&&(t=6),void 0===n&&(n=30);var r=this.toHsl(),i=360/n,o=[this];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(new e(r));return o},e.prototype.complement=function(){var t=this.toHsl();return t.h=(t.h+180)%360,new e(t)},e.prototype.monochromatic=function(t){void 0===t&&(t=6);for(var n=this.toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(new e({h:r,s:i,v:o})),o=(o+s)%1;return a},e.prototype.splitcomplement=function(){var t=this.toHsl(),n=t.h;return[this,new e({h:(n+72)%360,s:t.s,l:t.l}),new e({h:(n+216)%360,s:t.s,l:t.l})]},e.prototype.onBackground=function(t){var n=this.toRgb(),r=new e(t).toRgb(),i=n.a+r.a*(1-n.a);return new e({r:(n.r*n.a+r.r*r.a*(1-n.a))/i,g:(n.g*n.a+r.g*r.a*(1-n.a))/i,b:(n.b*n.a+r.b*r.a*(1-n.a))/i,a:i})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(t){for(var n=this.toHsl(),r=n.h,i=[this],o=360/t,a=1;a<t;a++)i.push(new e({h:(r+a*o)%360,s:n.s,l:n.l}));return i},e.prototype.equals=function(t){return this.toRgbString()===new e(t).toRgbString()},e}();function bo(e,t){var n=t.generateColorPalettes,r=t.generateNeutralColorPalettes,i=e.colorSuccess,o=e.colorWarning,a=e.colorError,s=e.colorInfo,l=e.colorPrimary,u=e.colorBgBase,c=e.colorTextBase,h=n(l),d=n(i),f=n(o),p=n(a),v=n(s),m=r(u,c);return Object.assign(Object.assign({},m),{colorPrimaryBg:h[1],colorPrimaryBgHover:h[2],colorPrimaryBorder:h[3],colorPrimaryBorderHover:h[4],colorPrimaryHover:h[5],colorPrimary:h[6],colorPrimaryActive:h[7],colorPrimaryTextHover:h[8],colorPrimaryText:h[9],colorPrimaryTextActive:h[10],colorSuccessBg:d[1],colorSuccessBgHover:d[2],colorSuccessBorder:d[3],colorSuccessBorderHover:d[4],colorSuccessHover:d[4],colorSuccess:d[6],colorSuccessActive:d[7],colorSuccessTextHover:d[8],colorSuccessText:d[9],colorSuccessTextActive:d[10],colorErrorBg:p[1],colorErrorBgHover:p[2],colorErrorBorder:p[3],colorErrorBorderHover:p[4],colorErrorHover:p[5],colorError:p[6],colorErrorActive:p[7],colorErrorTextHover:p[8],colorErrorText:p[9],colorErrorTextActive:p[10],colorWarningBg:f[1],colorWarningBgHover:f[2],colorWarningBorder:f[3],colorWarningBorderHover:f[4],colorWarningHover:f[4],colorWarning:f[6],colorWarningActive:f[7],colorWarningTextHover:f[8],colorWarningText:f[9],colorWarningTextActive:f[10],colorInfoBg:v[1],colorInfoBgHover:v[2],colorInfoBorder:v[3],colorInfoBorderHover:v[4],colorInfoHover:v[4],colorInfo:v[6],colorInfoActive:v[7],colorInfoTextHover:v[8],colorInfoText:v[9],colorInfoTextActive:v[10],colorBgMask:new yo("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}var _o=function(e){var t=e,n=e,r=e,i=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?n=4:e<8&&e>=7?n=5:e<14&&e>=8?n=6:e<16&&e>=14?n=7:e>=16&&(n=8),e<6&&e>=2?r=1:e>=6&&(r=2),e>4&&e<8?i=4:e>=8&&(i=6),{borderRadius:e>16?16:e,borderRadiusXS:r,borderRadiusSM:n,borderRadiusLG:t,borderRadiusOuter:i}};var xo=function(e,t){return new yo(e).setAlpha(t).toRgbString()},Eo=function(e,t){return new yo(e).darken(t).toHexString()},wo=function(e){var t=uo(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},To=function(e,t){var n=e||"#fff",r=t||"#000";return{colorBgBase:n,colorTextBase:r,colorText:xo(r,.88),colorTextSecondary:xo(r,.65),colorTextTertiary:xo(r,.45),colorTextQuaternary:xo(r,.25),colorFill:xo(r,.15),colorFillSecondary:xo(r,.06),colorFillTertiary:xo(r,.04),colorFillQuaternary:xo(r,.02),colorBgLayout:Eo(n,4),colorBgContainer:Eo(n,0),colorBgElevated:Eo(n,0),colorBgSpotlight:xo(r,.85),colorBorder:Eo(n,15),colorBorderSecondary:Eo(n,6)}};var So=function(e){var t=function(e){var t=new Array(10).fill(null).map((function(t,n){var r=n-1,i=e*Math.pow(2.71828,r/5),o=n>1?Math.floor(i):Math.ceil(i);return 2*Math.floor(o/2)}));return t[1]=e,t.map((function(e){return{size:e,lineHeight:(e+8)/e}}))}(e),n=t.map((function(e){return e.size})),r=t.map((function(e){return e.lineHeight}));return{fontSizeSM:n[0],fontSize:n[1],fontSizeLG:n[2],fontSizeXL:n[3],fontSizeHeading1:n[6],fontSizeHeading2:n[5],fontSizeHeading3:n[4],fontSizeHeading4:n[3],fontSizeHeading5:n[2],lineHeight:r[1],lineHeightLG:r[2],lineHeightSM:r[0],lineHeightHeading1:r[6],lineHeightHeading2:r[5],lineHeightHeading3:r[4],lineHeightHeading4:r[3],lineHeightHeading5:r[2]}};function ko(e){var t=Object.keys(mo).map((function(t){var n=uo(e[t]);return new Array(10).fill(1).reduce((function(e,r,i){return e["".concat(t,"-").concat(i+1)]=n[i],e["".concat(t).concat(i+1)]=n[i],e}),{})})).reduce((function(e,t){return e=Object.assign(Object.assign({},e),t)}),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),bo(e,{generateColorPalettes:wo,generateNeutralColorPalettes:To})),So(e.fontSize)),function(e){var t=e.sizeUnit,n=e.sizeStep;return{sizeXXL:t*(n+8),sizeXL:t*(n+4),sizeLG:t*(n+2),sizeMD:t*(n+1),sizeMS:t*n,size:t*n,sizeSM:t*(n-1),sizeXS:t*(n-2),sizeXXS:t*(n-3)}}(e)),vo(e)),function(e){var t=e.motionUnit,n=e.motionBase,r=e.borderRadius,i=e.lineWidth;return Object.assign({motionDurationFast:"".concat((n+t).toFixed(1),"s"),motionDurationMid:"".concat((n+2*t).toFixed(1),"s"),motionDurationSlow:"".concat((n+3*t).toFixed(1),"s"),lineWidthBold:i+1},_o(r))}(e))}function Co(e){return e>=0&&e<=255}var Ao=function(e,t){var n=new yo(e).toRgb(),r=n.r,i=n.g,o=n.b;if(n.a<1)return e;for(var a=new yo(t).toRgb(),s=a.r,l=a.g,u=a.b,c=.01;c<=1;c+=.01){var h=Math.round((r-s*(1-c))/c),d=Math.round((i-l*(1-c))/c),f=Math.round((o-u*(1-c))/c);if(Co(h)&&Co(d)&&Co(f))return new yo({r:h,g:d,b:f,a:Math.round(100*c)/100}).toRgbString()}return new yo({r:r,g:i,b:o,a:1}).toRgbString()},Io=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Oo(e){var t=e.override,n=Io(e,["override"]),r=Object.assign({},t);Object.keys(go).forEach((function(e){delete r[e]}));var i=Object.assign(Object.assign({},n),r),o=1200,a=1600;if(!1===i.motion){var s="0s";i.motionDurationFast=s,i.motionDurationMid=s,i.motionDurationSlow=s}return Object.assign(Object.assign(Object.assign({},i),{colorLink:i.colorInfoText,colorLinkHover:i.colorInfoHover,colorLinkActive:i.colorInfoActive,colorFillContent:i.colorFillSecondary,colorFillContentHover:i.colorFill,colorFillAlter:i.colorFillQuaternary,colorBgContainerDisabled:i.colorFillTertiary,colorBorderBg:i.colorBgContainer,colorSplit:Ao(i.colorBorderSecondary,i.colorBgContainer),colorTextPlaceholder:i.colorTextQuaternary,colorTextDisabled:i.colorTextQuaternary,colorTextHeading:i.colorText,colorTextLabel:i.colorTextSecondary,colorTextDescription:i.colorTextTertiary,colorTextLightSolid:i.colorWhite,colorHighlight:i.colorError,colorBgTextHover:i.colorFillSecondary,colorBgTextActive:i.colorFill,colorIcon:i.colorTextTertiary,colorIconHover:i.colorText,colorErrorOutline:Ao(i.colorErrorBg,i.colorBgContainer),colorWarningOutline:Ao(i.colorWarningBg,i.colorBgContainer),fontSizeIcon:i.fontSizeSM,lineWidthFocus:4*i.lineWidth,lineWidth:i.lineWidth,controlOutlineWidth:2*i.lineWidth,controlInteractiveSize:i.controlHeight/2,controlItemBgHover:i.colorFillTertiary,controlItemBgActive:i.colorPrimaryBg,controlItemBgActiveHover:i.colorPrimaryBgHover,controlItemBgActiveDisabled:i.colorFill,controlTmpOutline:i.colorFillQuaternary,controlOutline:Ao(i.colorPrimaryBg,i.colorBgContainer),lineType:i.lineType,borderRadius:i.borderRadius,borderRadiusXS:i.borderRadiusXS,borderRadiusSM:i.borderRadiusSM,borderRadiusLG:i.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:i.sizeXXS,paddingXS:i.sizeXS,paddingSM:i.sizeSM,padding:i.size,paddingMD:i.sizeMD,paddingLG:i.sizeLG,paddingXL:i.sizeXL,paddingContentHorizontalLG:i.sizeLG,paddingContentVerticalLG:i.sizeMS,paddingContentHorizontal:i.sizeMS,paddingContentVertical:i.sizeSM,paddingContentHorizontalSM:i.size,paddingContentVerticalSM:i.sizeXS,marginXXS:i.sizeXXS,marginXS:i.sizeXS,marginSM:i.sizeSM,margin:i.size,marginMD:i.sizeMD,marginLG:i.sizeLG,marginXL:i.sizeXL,marginXXL:i.sizeXXL,boxShadow:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowSecondary:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTertiary:"\n      0 1px 2px 0 rgba(0, 0, 0, 0.03),\n      0 1px 6px -1px rgba(0, 0, 0, 0.02),\n      0 2px 4px 0 rgba(0, 0, 0, 0.02)\n    ",screenXS:480,screenXSMin:480,screenXSMax:575,screenSM:576,screenSMMin:576,screenSMMax:767,screenMD:768,screenMDMin:768,screenMDMax:991,screenLG:992,screenLGMin:992,screenLGMax:1199,screenXL:o,screenXLMin:o,screenXLMax:1599,screenXXL:a,screenXXLMin:a,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:"\n      0 1px 2px -2px ".concat(new yo("rgba(0, 0, 0, 0.16)").toRgbString(),",\n      0 3px 6px 0 ").concat(new yo("rgba(0, 0, 0, 0.12)").toRgbString(),",\n      0 5px 12px 4px ").concat(new yo("rgba(0, 0, 0, 0.09)").toRgbString(),"\n    "),boxShadowDrawerRight:"\n      -6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      -3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      -9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerLeft:"\n      6px 0 16px 0 rgba(0, 0, 0, 0.08),\n      3px 0 6px -4px rgba(0, 0, 0, 0.12),\n      9px 0 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerUp:"\n      0 6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowDrawerDown:"\n      0 -6px 16px 0 rgba(0, 0, 0, 0.08),\n      0 -3px 6px -4px rgba(0, 0, 0, 0.12),\n      0 -9px 28px 8px rgba(0, 0, 0, 0.05)\n    ",boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),r)}var Po=Gn(ko),Mo={token:go,hashed:!0},Ro=a.createContext(Mo);function No(){var e=a.useContext(Ro),t=e.token,n=e.hashed,r=e.theme,i=e.components,o="".concat(Oi,"-").concat(n||""),s=r||Po,l=Pt(Bt(s,[go,t],{salt:o,override:Object.assign({override:t},i),formatToken:Oo}),2),u=l[0],c=l[1];return[s,u,n?c:""]}var Do="anticon",Lo=a.createContext({getPrefixCls:function(e,t){return t||(e?"ant-".concat(e):"ant")},iconPrefixCls:Do}),Fo=(Lo.Consumer,"-ant-".concat(Date.now(),"-").concat(Math.random()));function Bo(e,t){var n=function(e,t){var n={},r=function(e,t){var n=e.clone();return(n=(null===t||void 0===t?void 0:t(n))||n).toRgbString()},i=function(e,t){var i=new yo(e),o=uo(i.toRgbString());n["".concat(t,"-color")]=r(i),n["".concat(t,"-color-disabled")]=o[1],n["".concat(t,"-color-hover")]=o[4],n["".concat(t,"-color-active")]=o[6],n["".concat(t,"-color-outline")]=i.clone().setAlpha(.2).toRgbString(),n["".concat(t,"-color-deprecated-bg")]=o[0],n["".concat(t,"-color-deprecated-border")]=o[2]};if(t.primaryColor){i(t.primaryColor,"primary");var o=new yo(t.primaryColor),a=uo(o.toRgbString());a.forEach((function(e,t){n["primary-".concat(t+1)]=e})),n["primary-color-deprecated-l-35"]=r(o,(function(e){return e.lighten(35)})),n["primary-color-deprecated-l-20"]=r(o,(function(e){return e.lighten(20)})),n["primary-color-deprecated-t-20"]=r(o,(function(e){return e.tint(20)})),n["primary-color-deprecated-t-50"]=r(o,(function(e){return e.tint(50)})),n["primary-color-deprecated-f-12"]=r(o,(function(e){return e.setAlpha(.12*e.getAlpha())}));var s=new yo(a[0]);n["primary-color-active-deprecated-f-30"]=r(s,(function(e){return e.setAlpha(.3*e.getAlpha())})),n["primary-color-active-deprecated-d-02"]=r(s,(function(e){return e.darken(2)}))}t.successColor&&i(t.successColor,"success"),t.warningColor&&i(t.warningColor,"warning"),t.errorColor&&i(t.errorColor,"error"),t.infoColor&&i(t.infoColor,"info");var l=Object.keys(n).map((function(t){return"--".concat(e,"-").concat(t,": ").concat(n[t],";")}));return"\n  :root {\n    ".concat(l.join("\n"),"\n  }\n  ").trim()}(e,t);dt()&&wt(n,"".concat(Fo,"-dynamic-theme"))}var Uo=a.createContext(!1),Ho=function(e){var t=e.children,n=e.disabled,r=a.useContext(Uo);return a.createElement(Uo.Provider,{value:null!==n&&void 0!==n?n:r},t)},jo=Uo,zo=function(e){var t=a.useContext(Wo);return a.useMemo((function(){return e?"string"===typeof e?null!==e&&void 0!==e?e:t:e instanceof Function?e(t):t:t}),[e,t])},Vo=a.createContext(void 0),Go=function(e){var t=e.children,n=e.size,r=zo(n);return a.createElement(Vo.Provider,{value:r},t)},Wo=Vo;var Xo=function(){return{componentDisabled:(0,a.useContext)(jo),componentSize:(0,a.useContext)(Wo)}};var Yo=r(6123),Ko=r.n(Yo);function qo(e){return e instanceof HTMLElement||e instanceof SVGElement}function Zo(e){return qo(e)?e:e instanceof a.Component?De.findDOMNode(e):null}function $o(e,t){"function"===typeof e?e(t):"object"===c(e)&&e&&"current"in e&&(e.current=t)}function Qo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter((function(e){return e}));return r.length<=1?r[0]:function(e){t.forEach((function(t){$o(t,e)}))}}function Jo(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qe((function(){return Qo.apply(void 0,t)}),t,(function(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}))}function ea(e){var t,n,r=(0,Kn.isMemo)(e)?e.type.type:e.type;return!!("function"!==typeof r||null!==(t=r.prototype)&&void 0!==t&&t.render)&&!!("function"!==typeof e||null!==(n=e.prototype)&&void 0!==n&&n.render)}var ta=["children"],na=a.createContext({});function ra(e){var t=e.children,n=Yn(e,ta);return a.createElement(na.Provider,{value:n},t)}var ia=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),oa=ia;function aa(e){var t=a.useRef(!1),n=Pt(a.useState(e),2),r=n[0],i=n[1];return a.useEffect((function(){return t.current=!1,function(){t.current=!0}}),[]),[r,function(e,n){n&&t.current||i(e)}]}var sa="none",la="appear",ua="enter",ca="leave",ha="none",da="prepare",fa="start",pa="active",va="end",ma="prepared";function ga(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}var ya=function(e,t){var n={animationend:ga("Animation","AnimationEnd"),transitionend:ga("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}(dt(),"undefined"!==typeof window?window:{}),ba={};if(dt()){var _a=document.createElement("div");ba=_a.style}var xa={};function Ea(e){if(xa[e])return xa[e];var t=ya[e];if(t)for(var n=Object.keys(t),r=n.length,i=0;i<r;i+=1){var o=n[i];if(Object.prototype.hasOwnProperty.call(t,o)&&o in ba)return xa[e]=t[o],xa[e]}return""}var wa=Ea("animationend"),Ta=Ea("transitionend"),Sa=!(!wa||!Ta),ka=wa||"animationend",Ca=Ta||"transitionend";function Aa(e,t){if(!e)return null;if("object"===c(e)){var n=t.replace(/-\w/g,(function(e){return e[1].toUpperCase()}));return e[n]}return"".concat(e,"-").concat(t)}var Ia=function(e){var t=(0,a.useRef)(),n=(0,a.useRef)(e);n.current=e;var r=a.useCallback((function(e){n.current(e)}),[]);function i(e){e&&(e.removeEventListener(Ca,r),e.removeEventListener(ka,r))}return a.useEffect((function(){return function(){i(t.current)}}),[]),[function(e){t.current&&t.current!==e&&i(t.current),e&&e!==t.current&&(e.addEventListener(Ca,r),e.addEventListener(ka,r),t.current=e)},i]},Oa=dt()?a.useLayoutEffect:a.useEffect,Pa=function(e){return+setTimeout(e,16)},Ma=function(e){return clearTimeout(e)};"undefined"!==typeof window&&"requestAnimationFrame"in window&&(Pa=function(e){return window.requestAnimationFrame(e)},Ma=function(e){return window.cancelAnimationFrame(e)});var Ra=0,Na=new Map;function Da(e){Na.delete(e)}var La=function(e){var t=Ra+=1;return function n(r){if(0===r)Da(t),e();else{var i=Pa((function(){n(r-1)}));Na.set(t,i)}}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),t};La.cancel=function(e){var t=Na.get(e);return Da(t),Ma(t)};var Fa=La,Ba=[da,fa,pa,va],Ua=[da,ma],Ha=!1,ja=!0;function za(e){return e===pa||e===va}var Va=function(e,t,n){var r=Pt(aa(ha),2),i=r[0],o=r[1],s=function(){var e=a.useRef(null);function t(){Fa.cancel(e.current)}return a.useEffect((function(){return function(){t()}}),[]),[function n(r){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;t();var o=Fa((function(){i<=1?r({isCanceled:function(){return o!==e.current}}):n(r,i-1)}));e.current=o},t]}(),l=Pt(s,2),u=l[0],c=l[1];var h=t?Ua:Ba;return Oa((function(){if(i!==ha&&i!==va){var e=h.indexOf(i),t=h[e+1],r=n(i);r===Ha?o(t,!0):t&&u((function(e){function n(){e.isCanceled()||o(t,!0)}!0===r?n():Promise.resolve(r).then(n)}))}}),[e,i]),a.useEffect((function(){return function(){c()}}),[]),[function(){o(da,!0)},i]};var Ga=function(e){var t=e;"object"===c(e)&&(t=e.transitionSupport);var n=a.forwardRef((function(e,n){var r=e.visible,i=void 0===r||r,o=e.removeOnLeave,s=void 0===o||o,l=e.forceRender,u=e.children,c=e.motionName,h=e.leavedClassName,d=e.eventProps,f=function(e,n){return!(!e.motionName||!t||!1===n)}(e,a.useContext(na).motion),p=(0,a.useRef)(),v=(0,a.useRef)();var m=function(e,t,n,r){var i=r.motionEnter,o=void 0===i||i,s=r.motionAppear,l=void 0===s||s,u=r.motionLeave,c=void 0===u||u,h=r.motionDeadline,d=r.motionLeaveImmediately,f=r.onAppearPrepare,p=r.onEnterPrepare,v=r.onLeavePrepare,m=r.onAppearStart,g=r.onEnterStart,y=r.onLeaveStart,_=r.onAppearActive,x=r.onEnterActive,E=r.onLeaveActive,w=r.onAppearEnd,T=r.onEnterEnd,S=r.onLeaveEnd,k=r.onVisibleChanged,C=Pt(aa(),2),A=C[0],I=C[1],O=Pt(aa(sa),2),P=O[0],M=O[1],R=Pt(aa(null),2),N=R[0],D=R[1],L=(0,a.useRef)(!1),F=(0,a.useRef)(null);function B(){return n()}var U=(0,a.useRef)(!1);function H(){M(sa,!0),D(null,!0)}function j(e){var t=B();if(!e||e.deadline||e.target===t){var n,r=U.current;P===la&&r?n=null===w||void 0===w?void 0:w(t,e):P===ua&&r?n=null===T||void 0===T?void 0:T(t,e):P===ca&&r&&(n=null===S||void 0===S?void 0:S(t,e)),P!==sa&&r&&!1!==n&&H()}}var z=Pt(Ia(j),1)[0],V=function(e){var t,n,r;switch(e){case la:return b(t={},da,f),b(t,fa,m),b(t,pa,_),t;case ua:return b(n={},da,p),b(n,fa,g),b(n,pa,x),n;case ca:return b(r={},da,v),b(r,fa,y),b(r,pa,E),r;default:return{}}},G=a.useMemo((function(){return V(P)}),[P]),W=Pt(Va(P,!e,(function(e){if(e===da){var t=G[da];return t?t(B()):Ha}var n;return Y in G&&D((null===(n=G[Y])||void 0===n?void 0:n.call(G,B(),null))||null),Y===pa&&(z(B()),h>0&&(clearTimeout(F.current),F.current=setTimeout((function(){j({deadline:!0})}),h))),Y===ma&&H(),ja})),2),X=W[0],Y=W[1],K=za(Y);U.current=K,Oa((function(){I(t);var n,r=L.current;L.current=!0,!r&&t&&l&&(n=la),r&&t&&o&&(n=ua),(r&&!t&&c||!r&&d&&!t&&c)&&(n=ca);var i=V(n);n&&(e||i[da])?(M(n),X()):M(sa)}),[t]),(0,a.useEffect)((function(){(P===la&&!l||P===ua&&!o||P===ca&&!c)&&M(sa)}),[l,o,c]),(0,a.useEffect)((function(){return function(){L.current=!1,clearTimeout(F.current)}}),[]);var q=a.useRef(!1);(0,a.useEffect)((function(){A&&(q.current=!0),void 0!==A&&P===sa&&((q.current||A)&&(null===k||void 0===k||k(A)),q.current=!0)}),[A,P]);var Z=N;return G[da]&&Y===fa&&(Z=Re({transition:"none"},Z)),[P,Y,Z,null!==A&&void 0!==A?A:t]}(f,i,(function(){try{return p.current instanceof HTMLElement?p.current:Zo(v.current)}catch(Pv){return null}}),e),g=Pt(m,4),y=g[0],_=g[1],x=g[2],E=g[3],w=a.useRef(E);E&&(w.current=!0);var T,S=a.useCallback((function(e){p.current=e,$o(n,e)}),[n]),k=Re(Re({},d),{},{visible:i});if(u)if(y===sa)T=E?u(Re({},k),S):!s&&w.current&&h?u(Re(Re({},k),{},{className:h}),S):l||!s&&!h?u(Re(Re({},k),{},{style:{display:"none"}}),S):null;else{var C,A;_===da?A="prepare":za(_)?A="active":_===fa&&(A="start");var I=Aa(c,"".concat(y,"-").concat(A));T=u(Re(Re({},k),{},{className:Ko()(Aa(c,y),(C={},b(C,I,I&&A),b(C,c,"string"===typeof c),C)),style:x}),S)}else T=null;a.isValidElement(T)&&ea(T)&&(T.ref||(T=a.cloneElement(T,{ref:S})));return a.createElement(oa,{ref:v},T)}));return n.displayName="CSSMotion",n}(Sa),Wa="add",Xa="keep",Ya="remove",Ka="removed";function qa(e){var t;return Re(Re({},t=e&&"object"===c(e)&&"key"in e?e:{key:e}),{},{key:String(t.key)})}function Za(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(qa)}var $a=["component","children","onVisibleChanged","onAllRemoved"],Qa=["status"],Ja=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];var es=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ga,n=function(e){v(r,e);var n=y(r);function r(){var e;u(this,r);for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return b(g(e=n.call.apply(n,[this].concat(i))),"state",{keyEntities:[]}),b(g(e),"removeKey",(function(t){var n=e.state.keyEntities.map((function(e){return e.key!==t?e:Re(Re({},e),{},{status:Ka})}));return e.setState({keyEntities:n}),n.filter((function(e){return e.status!==Ka})).length})),e}return f(r,[{key:"render",value:function(){var e=this,n=this.state.keyEntities,r=this.props,i=r.component,o=r.children,s=r.onVisibleChanged,l=r.onAllRemoved,u=Yn(r,$a),c=i||a.Fragment,h={};return Ja.forEach((function(e){h[e]=u[e],delete u[e]})),delete u.keys,a.createElement(c,u,n.map((function(n){var r=n.status,i=Yn(n,Qa),u=r===Wa||r===Xa;return a.createElement(t,Ut({},h,{key:i.key,visible:u,eventProps:i,onVisibleChanged:function(t){(null===s||void 0===s||s(t,{key:i.key}),t)||0===e.removeKey(i.key)&&l&&l()}}),o)})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.keys,r=t.keyEntities,i=Za(n),o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[],r=0,i=t.length,o=Za(e),a=Za(t);o.forEach((function(e){for(var t=!1,o=r;o<i;o+=1){var s=a[o];if(s.key===e.key){r<o&&(n=n.concat(a.slice(r,o).map((function(e){return Re(Re({},e),{},{status:Wa})}))),r=o),n.push(Re(Re({},s),{},{status:Xa})),r+=1,t=!0;break}}t||n.push(Re(Re({},e),{},{status:Ya}))})),r<i&&(n=n.concat(a.slice(r).map((function(e){return Re(Re({},e),{},{status:Wa})}))));var s={};return n.forEach((function(e){var t=e.key;s[t]=(s[t]||0)+1})),Object.keys(s).filter((function(e){return s[e]>1})).forEach((function(e){(n=n.filter((function(t){var n=t.key,r=t.status;return n!==e||r!==Ya}))).forEach((function(t){t.key===e&&(t.status=Xa)}))})),n}(r,i);return{keyEntities:o.filter((function(e){var t=r.find((function(t){var n=t.key;return e.key===n}));return!t||t.status!==Ka||e.status!==Ya}))}}}]),r}(a.Component);return b(n,"defaultProps",{component:"div"}),n}(Sa),ts=Ga;function ns(e){var t=e.children,n=Pt(No(),2)[1].motion,r=a.useRef(!1);return r.current=r.current||!1===n,r.current?a.createElement(ra,{motion:n},t):t}var rs,is,os={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},as=function(e){return{boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:e.fontFamily}},ss=function(e){var t;return{a:(t={color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive}},b(t,"&:active,\n  &:hover",{textDecoration:e.linkHoverDecoration,outline:0}),b(t,"&:focus",{textDecoration:e.linkFocusDecoration,outline:0}),b(t,"&[disabled]",{color:e.colorTextDisabled,cursor:"not-allowed"}),t)}},ls=function(e,t){var n=e.fontFamily,r=e.fontSize,i='[class^="'.concat(t,'"], [class*=" ').concat(t,'"]');return b({},i,b({fontFamily:n,fontSize:r,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}},i,{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}))},us=function(e){return{outline:"".concat(e.lineWidthFocus,"px solid ").concat(e.colorPrimaryBorder),outlineOffset:1,transition:"outline-offset 0s, outline 0s"}},cs=function(e){return{"&:focus-visible":Object.assign({},us(e))}},hs=function(e,t){var n=Pt(No(),2);return Fn({theme:n[0],token:n[1],hashId:"",path:["ant-design-icons",e],nonce:function(){return null===t||void 0===t?void 0:t.nonce}},(function(){return[b({},".".concat(e),Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),b({},".".concat(e," .").concat(e,"-icon"),{display:"block"})))]}))},ds=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},fs=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select"];function ps(){return rs||"ant"}function vs(){return is||Do}var ms=function(){return{getPrefixCls:function(e,t){return t||(e?"".concat(ps(),"-").concat(e):ps())},getIconPrefixCls:vs,getRootPrefixCls:function(){return rs||ps()}}},gs=function(e){var t=e.children,n=e.csp,r=e.autoInsertSpaceInButton,i=e.form,o=e.locale,s=e.componentSize,l=e.direction,u=e.space,c=e.virtual,h=e.dropdownMatchSelectWidth,d=e.popupMatchSelectWidth,f=e.popupOverflow,p=e.legacyLocale,v=e.parentContext,m=e.iconPrefixCls,g=e.theme,y=e.componentDisabled;var b=a.useCallback((function(t,n){var r=e.prefixCls;if(n)return n;var i=r||v.getPrefixCls("");return t?"".concat(i,"-").concat(t):i}),[v.getPrefixCls,e.prefixCls]),_=m||v.iconPrefixCls||Do,x=_!==v.iconPrefixCls,E=n||v.csp,w=hs(_,E),T=function(e,t){var n=e||{},r=!1!==n.inherit&&t?t:Mo,i=qe((function(){if(!e)return t;var i=Object.assign({},r.components);return Object.keys(e.components||{}).forEach((function(t){i[t]=Object.assign(Object.assign({},i[t]),e.components[t])})),Object.assign(Object.assign(Object.assign({},r),n),{token:Object.assign(Object.assign({},r.token),n.token),components:i})}),[n,r],(function(e,t){return e.some((function(e,n){var r=t[n];return!rt(e,r,!0)}))}));return i}(g,v.theme);var S={csp:E,autoInsertSpaceInButton:r,locale:o||p,direction:l,space:u,virtual:c,popupMatchSelectWidth:null!==d&&void 0!==d?d:h,popupOverflow:f,getPrefixCls:b,iconPrefixCls:_,theme:T},k=Object.assign({},v);Object.keys(S).forEach((function(e){void 0!==S[e]&&(k[e]=S[e])})),fs.forEach((function(t){var n=e[t];n&&(k[t]=n)}));var C=qe((function(){return k}),k,(function(e,t){var n=Object.keys(e),r=Object.keys(t);return n.length!==r.length||n.some((function(n){return e[n]!==t[n]}))})),A=a.useMemo((function(){return{prefixCls:_,csp:E}}),[_,E]),I=x?w(t):t,O=a.useMemo((function(){var e,t,n;return Hr({},(null===(e=Ti.Form)||void 0===e?void 0:e.defaultValidateMessages)||{},(null===(n=null===(t=C.locale)||void 0===t?void 0:t.Form)||void 0===n?void 0:n.defaultValidateMessages)||{},(null===i||void 0===i?void 0:i.validateMessages)||{})}),[C,null===i||void 0===i?void 0:i.validateMessages]);Object.keys(O).length>0&&(I=a.createElement(di,{validateMessages:O},t)),o&&(I=a.createElement(Ii,{locale:o,_ANT_MARK__:"internalMark"},I)),(_||E)&&(I=a.createElement(Xn.Provider,{value:A},I)),s&&(I=a.createElement(Go,{size:s},I)),I=a.createElement(ns,null,I);var P=a.useMemo((function(){var e=T||{},t=e.algorithm,n=e.token,r=ds(e,["algorithm","token"]),i=t&&(!Array.isArray(t)||t.length>0)?Gn(t):void 0;return Object.assign(Object.assign({},r),{theme:i,token:Object.assign(Object.assign({},go),n)})}),[T]);return g&&(I=a.createElement(Ro.Provider,{value:P},I)),void 0!==y&&(I=a.createElement(Ho,{disabled:y},I)),a.createElement(Lo.Provider,{value:C},I)},ys=function(e){var t=a.useContext(Lo),n=a.useContext(Ai);return a.createElement(gs,Object.assign({parentContext:t,legacyLocale:n},e))};ys.ConfigContext=Lo,ys.SizeContext=Wo,ys.config=function(e){var t=e.prefixCls,n=e.iconPrefixCls,r=e.theme;void 0!==t&&(rs=t),void 0!==n&&(is=n),r&&Bo(ps(),r)},ys.useConfig=Xo,Object.defineProperty(ys,"SizeContext",{get:function(){return Wo}});var bs=ys,_s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function xs(e,t){nt(e,"[@ant-design/icons] ".concat(t))}function Es(e){return"object"===c(e)&&"string"===typeof e.name&&"string"===typeof e.theme&&("object"===c(e.icon)||"function"===typeof e.icon)}function ws(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).reduce((function(t,n){var r=e[n];if("class"===n)t.className=r,delete t.class;else t[n]=r;return t}),{})}function Ts(e,t,n){return n?a.createElement(e.tag,Re(Re({key:t},ws(e.attrs)),n),(e.children||[]).map((function(n,r){return Ts(n,"".concat(t,"-").concat(e.tag,"-").concat(r))}))):a.createElement(e.tag,Re({key:t},ws(e.attrs)),(e.children||[]).map((function(n,r){return Ts(n,"".concat(t,"-").concat(e.tag,"-").concat(r))})))}function Ss(e){return uo(e)[0]}function ks(e){return e?Array.isArray(e)?e:[e]:[]}var Cs={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},As=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\n.anticon {\n  display: inline-block;\n  color: inherit;\n  font-style: normal;\n  line-height: 0;\n  text-align: center;\n  text-transform: none;\n  vertical-align: -0.125em;\n  text-rendering: optimizeLegibility;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n.anticon > * {\n  line-height: 1;\n}\n\n.anticon svg {\n  display: inline-block;\n}\n\n.anticon::before {\n  display: none;\n}\n\n.anticon .anticon-icon {\n  display: block;\n}\n\n.anticon[tabindex] {\n  cursor: pointer;\n}\n\n.anticon-spin::before,\n.anticon-spin {\n  display: inline-block;\n  -webkit-animation: loadingCircle 1s infinite linear;\n  animation: loadingCircle 1s infinite linear;\n}\n\n@-webkit-keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n\n@keyframes loadingCircle {\n  100% {\n    -webkit-transform: rotate(360deg);\n    transform: rotate(360deg);\n  }\n}\n",t=(0,a.useContext)(Xn),n=t.csp,r=t.prefixCls,i=e;r&&(i=i.replace(/anticon/g,r)),(0,a.useEffect)((function(){wt(i,"@ant-design-icons",{prepend:!0,csp:n})}),[])},Is=["icon","className","onClick","style","primaryColor","secondaryColor"],Os={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};var Ps=function(e){var t=e.icon,n=e.className,r=e.onClick,i=e.style,o=e.primaryColor,a=e.secondaryColor,s=Yn(e,Is),l=Os;if(o&&(l={primaryColor:o,secondaryColor:a||Ss(o)}),As(),xs(Es(t),"icon should be icon definiton, but got ".concat(t)),!Es(t))return null;var u=t;return u&&"function"===typeof u.icon&&(u=Re(Re({},u),{},{icon:u.icon(l.primaryColor,l.secondaryColor)})),Ts(u.icon,"svg-".concat(u.name),Re({className:n,onClick:r,style:i,"data-icon":u.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},s))};Ps.displayName="IconReact",Ps.getTwoToneColors=function(){return Re({},Os)},Ps.setTwoToneColors=function(e){var t=e.primaryColor,n=e.secondaryColor;Os.primaryColor=t,Os.secondaryColor=n||Ss(t),Os.calculated=!!n};var Ms=Ps;function Rs(e){var t=Pt(ks(e),2),n=t[0],r=t[1];return Ms.setTwoToneColors({primaryColor:n,secondaryColor:r})}var Ns=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];Rs(po.primary);var Ds=a.forwardRef((function(e,t){var n,r=e.className,i=e.icon,o=e.spin,s=e.rotate,l=e.tabIndex,u=e.onClick,c=e.twoToneColor,h=Yn(e,Ns),d=a.useContext(Xn),f=d.prefixCls,p=void 0===f?"anticon":f,v=d.rootClassName,m=Ko()(v,p,(b(n={},"".concat(p,"-").concat(i.name),!!i.name),b(n,"".concat(p,"-spin"),!!o||"loading"===i.name),n),r),g=l;void 0===g&&u&&(g=-1);var y=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,_=Pt(ks(c),2),x=_[0],E=_[1];return a.createElement("span",Re(Re({role:"img","aria-label":i.name},h),{},{ref:t,tabIndex:g,onClick:u,className:m}),a.createElement(Ms,{icon:i,primaryColor:x,secondaryColor:E,style:y}))}));Ds.displayName="AntdIcon",Ds.getTwoToneColor=function(){var e=Ms.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor},Ds.setTwoToneColor=Rs;var Ls=Ds,Fs=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:_s}))};var Bs=a.forwardRef(Fs),Us={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},Hs=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:Us}))};var js=a.forwardRef(Hs),zs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},Vs=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:zs}))};var Gs=a.forwardRef(Vs),Ws={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},Xs=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:Ws}))};var Ys=a.forwardRef(Xs),Ks=function(e,t){var n=a.useContext(Ai),r=a.useMemo((function(){var r,i=t||Ti[e],o=null!==(r=null===n||void 0===n?void 0:n[e])&&void 0!==r?r:{};return Object.assign(Object.assign({},"function"===typeof i?i():i),o||{})}),[e,t,n]);return[r,a.useMemo((function(){var e=null===n||void 0===n?void 0:n.locale;return(null===n||void 0===n?void 0:n.exist)&&!e?Ti.locale:e}),[n])]};function qs(e,t){var n=Re({},e);return Array.isArray(t)&&t.forEach((function(e){delete n[e]})),n}var Zs=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),n=t.width,r=t.height;if(n||r)return!0}if(e.getBoundingClientRect){var i=e.getBoundingClientRect(),o=i.width,a=i.height;if(o||a)return!0}}return!1},$s=a.isValidElement;function Qs(e){return e&&$s(e)&&e.type===a.Fragment}function Js(e,t){return function(e,t,n){return $s(e)?a.cloneElement(e,"function"===typeof n?n(e.props||{}):n):t}(e,e,t)}var el="undefined"!==typeof CSSINJS_STATISTIC,tl=!0;function nl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!el)return Object.assign.apply(Object,[{}].concat(t));tl=!1;var r={};return t.forEach((function(e){Object.keys(e).forEach((function(t){Object.defineProperty(r,t,{configurable:!0,enumerable:!0,get:function(){return e[t]}})}))})),tl=!0,r}var rl={};function il(){}function ol(e,t,n,r){return function(i){var o=Pt(No(),3),s=o[0],l=o[1],u=o[2],c=(0,a.useContext)(Lo),h=c.getPrefixCls,d=c.iconPrefixCls,f=c.csp,p=h(),v={theme:s,token:l,hashId:u,nonce:function(){return null===f||void 0===f?void 0:f.nonce}};return Fn(Object.assign(Object.assign({},v),{path:["Shared",p]}),(function(){return[{"&":ss(l)}]})),[Fn(Object.assign(Object.assign({},v),{path:[e,i,d]}),(function(){var o=function(e){var t,n=e,r=il;return el&&(t=new Set,n=new Proxy(e,{get:function(e,n){return tl&&t.add(n),e[n]}}),r=function(e,n){rl[e]={global:Array.from(t),component:n}}),{token:n,keys:t,flush:r}}(l),a=o.token,s=o.flush,c="function"===typeof n?n(a):n,h=Object.assign(Object.assign({},c),l[e]),f=nl(a,{componentCls:".".concat(i),prefixCls:i,iconCls:".".concat(d),antCls:".".concat(p)},h),v=t(f,{hashId:u,prefixCls:i,rootPrefixCls:p,iconPrefixCls:d,overrideComponentToken:l[e]});return s(e,h),[!1===(null===r||void 0===r?void 0:r.resetStyle)?null:ls(l,i),v]})),u]}}var al=function(e){var t=e.componentCls,n=e.colorPrimary;return b({},t,{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:"var(--wave-color, ".concat(n,")"),boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:["box-shadow 0.4s ".concat(e.motionEaseOutCirc),"opacity 2s ".concat(e.motionEaseOutCirc)].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0}}})},sl=ol("Wave",(function(e){return[al(e)]}));function ll(e){return e&&"#fff"!==e&&"#ffffff"!==e&&"rgb(255, 255, 255)"!==e&&"rgba(255, 255, 255, 1)"!==e&&function(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return!(t&&t[1]&&t[2]&&t[3])||!(t[1]===t[2]&&t[2]===t[3])}(e)&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&"transparent"!==e}function ul(e){return Number.isNaN(e)?0:e}var cl=function(e){var t=e.className,n=e.target,r=a.useRef(null),i=Pt(a.useState(null),2),o=i[0],s=i[1],l=Pt(a.useState([]),2),u=l[0],c=l[1],h=Pt(a.useState(0),2),d=h[0],f=h[1],p=Pt(a.useState(0),2),v=p[0],m=p[1],g=Pt(a.useState(0),2),y=g[0],b=g[1],_=Pt(a.useState(0),2),x=_[0],E=_[1],w=Pt(a.useState(!1),2),T=w[0],S=w[1],k={left:d,top:v,width:y,height:x,borderRadius:u.map((function(e){return"".concat(e,"px")})).join(" ")};function C(){var e=getComputedStyle(n);s(function(e){var t=getComputedStyle(e),n=t.borderTopColor,r=t.borderColor,i=t.backgroundColor;return ll(n)?n:ll(r)?r:ll(i)?i:null}(n));var t="static"===e.position,r=e.borderLeftWidth,i=e.borderTopWidth;f(t?n.offsetLeft:ul(-parseFloat(r))),m(t?n.offsetTop:ul(-parseFloat(i))),b(n.offsetWidth),E(n.offsetHeight);var o=e.borderTopLeftRadius,a=e.borderTopRightRadius,l=e.borderBottomLeftRadius,u=e.borderBottomRightRadius;c([o,a,u,l].map((function(e){return ul(parseFloat(e))})))}return o&&(k["--wave-color"]=o),a.useEffect((function(){if(n){var e,t=Fa((function(){C(),S(!0)}));return"undefined"!==typeof ResizeObserver&&(e=new ResizeObserver(C)).observe(n),function(){Fa.cancel(t),null===e||void 0===e||e.disconnect()}}}),[]),T?a.createElement(ts,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:function(e,t){var n;if(t.deadline||"opacity"===t.propertyName){var i=null===(n=r.current)||void 0===n?void 0:n.parentElement;Xe(i).then((function(){null===i||void 0===i||i.remove()}))}return!1}},(function(e){var n=e.className;return a.createElement("div",{ref:r,className:Ko()(t,n),style:k})})):null};function hl(e,t){return function(){!function(e,t){var n=document.createElement("div");n.style.position="absolute",n.style.left="0px",n.style.top="0px",null===e||void 0===e||e.insertBefore(n,null===e||void 0===e?void 0:e.firstChild),ze(a.createElement(cl,{target:e,className:t}),n)}(e.current,t)}}var dl=function(e){var t=e.children,n=e.disabled,r=(0,a.useContext)(Lo).getPrefixCls,i=(0,a.useRef)(null),o=r("wave"),s=Pt(sl(o),2)[1],l=hl(i,Ko()(o,s));return a.useEffect((function(){var e=i.current;if(e&&1===e.nodeType&&!n){var t=function(t){"INPUT"===t.target.tagName||!Zs(t.target)||!e.getAttribute||e.getAttribute("disabled")||e.disabled||e.className.includes("disabled")||e.className.includes("-leave")||l()};return e.addEventListener("click",t,!0),function(){e.removeEventListener("click",t,!0)}}}),[n]),a.isValidElement(t)?Js(t,{ref:ea(t)?Qo(t.ref,i):i}):null!==t&&void 0!==t?t:null},fl=function(e){return b({},e.componentCls,{display:"inline-flex","&-block":{display:"flex",width:"100%"},"&-vertical":{flexDirection:"column"}})},pl=function(e){var t=e.componentCls;return b({},t,b({display:"inline-flex","&-rtl":{direction:"rtl"},"&-vertical":{flexDirection:"column"},"&-align":{flexDirection:"column","&-center":{alignItems:"center"},"&-start":{alignItems:"flex-start"},"&-end":{alignItems:"flex-end"},"&-baseline":{alignItems:"baseline"}}},"".concat(t,"-item:empty"),{display:"none"}))},vl=ol("Space",(function(e){return[pl(e),fl(e)]}),(function(){return{}}),{resetStyle:!1}),ml=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},gl=a.createContext(null),yl=function(e,t){var n=a.useContext(gl),r=a.useMemo((function(){var r;if(!n)return"";var i=n.compactDirection,o=n.isFirstItem,a=n.isLastItem,s="vertical"===i?"-vertical-":"-";return Ko()((b(r={},"".concat(e,"-compact").concat(s,"item"),!0),b(r,"".concat(e,"-compact").concat(s,"first-item"),o),b(r,"".concat(e,"-compact").concat(s,"last-item"),a),b(r,"".concat(e,"-compact").concat(s,"item-rtl"),"rtl"===t),r))}),[e,t,n]);return{compactSize:null===n||void 0===n?void 0:n.compactSize,compactDirection:null===n||void 0===n?void 0:n.compactDirection,compactItemClassnames:r}},bl=function(e){var t=e.children;return a.createElement(gl.Provider,{value:null},t)},_l=function(e){var t=e.children,n=ml(e,["children"]);return a.createElement(gl.Provider,{value:n},t)},xl=function(e){var t,n=a.useContext(Lo),r=n.getPrefixCls,i=n.direction,o=e.size,s=e.direction,l=e.block,u=e.prefixCls,c=e.className,h=e.rootClassName,d=e.children,f=ml(e,["size","direction","block","prefixCls","className","rootClassName","children"]),p=zo((function(e){var t;return null!==(t=null!==o&&void 0!==o?o:e)&&void 0!==t?t:"middle"})),v=r("space-compact",u),m=Pt(vl(v),2),g=m[0],y=m[1],_=Ko()(v,y,(b(t={},"".concat(v,"-rtl"),"rtl"===i),b(t,"".concat(v,"-block"),l),b(t,"".concat(v,"-vertical"),"vertical"===s),t),c,h),x=a.useContext(gl),E=qn(d),w=a.useMemo((function(){return E.map((function(e,t){var n=e&&e.key||"".concat(v,"-item-").concat(t);return a.createElement(_l,{key:n,compactSize:p,compactDirection:s,isFirstItem:0===t&&(!x||(null===x||void 0===x?void 0:x.isFirstItem)),isLastItem:t===E.length-1&&(!x||(null===x||void 0===x?void 0:x.isLastItem))},e)}))}),[o,E,x]);return 0===E.length?null:g(a.createElement("div",Object.assign({className:_},f),w))},El={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},wl=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:El}))};var Tl=a.forwardRef(wl),Sl=(0,a.forwardRef)((function(e,t){var n=e.className,r=e.style,i=e.children,o=e.prefixCls,s=Ko()("".concat(o,"-icon"),n);return a.createElement("span",{ref:t,className:s,style:r},i)})),kl=Sl,Cl=(0,a.forwardRef)((function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.iconClassName,s=Ko()("".concat(n,"-loading-icon"),r);return a.createElement(kl,{prefixCls:n,className:s,style:i,ref:t},a.createElement(Tl,{className:o}))})),Al=function(){return{width:0,opacity:0,transform:"scale(0)"}},Il=function(e){return{width:e.scrollWidth,opacity:1,transform:"scale(1)"}},Ol=function(e){var t=e.prefixCls,n=e.loading,r=e.existIcon,i=e.className,o=e.style,s=!!n;return r?a.createElement(Cl,{prefixCls:t,className:i,style:o}):a.createElement(ts,{visible:s,motionName:"".concat(t,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:Al,onAppearActive:Il,onEnterStart:Al,onEnterActive:Il,onLeaveStart:Il,onLeaveActive:Al},(function(e,n){var r=e.className,s=e.style;return a.createElement(Cl,{prefixCls:t,className:i,style:Object.assign(Object.assign({},o),s),ref:n,iconClassName:r})}))},Pl=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Ml=a.createContext(void 0),Rl=function(e){var t,n=a.useContext(Lo),r=n.getPrefixCls,i=n.direction,o=e.prefixCls,s=e.size,l=e.className,u=Pl(e,["prefixCls","size","className"]),c=r("btn-group",o),h=Pt(No(),3)[2],d="";switch(s){case"large":d="lg";break;case"small":d="sm"}var f=Ko()(c,(b(t={},"".concat(c,"-").concat(d),d),b(t,"".concat(c,"-rtl"),"rtl"===i),t),l,h);return a.createElement(Ml.Provider,{value:s},a.createElement("div",Object.assign({},u,{className:f})))},Nl=/^[\u4e00-\u9fa5]{2}$/,Dl=Nl.test.bind(Nl);function Ll(e){return"text"===e||"link"===e}function Fl(e,t){var n=!1,r=[];return a.Children.forEach(e,(function(e){var t=typeof e,i="string"===t||"number"===t;if(n&&i){var o=r.length-1,a=r[o];r[o]="".concat(a).concat(e)}else r.push(e);n=i})),a.Children.map(r,(function(e){return function(e,t){if(null!==e&&void 0!==e){var n=t?" ":"";return"string"!==typeof e&&"number"!==typeof e&&"string"===typeof e.type&&Dl(e.props.children)?Js(e,{children:e.props.children.split("").join(n)}):"string"===typeof e?Dl(e)?a.createElement("span",null,e.split("").join(n)):a.createElement("span",null,e):Qs(e)?a.createElement("span",null,e):e}}(e,t)}))}function Bl(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{focus:!0},n=e.componentCls,r="".concat(n,"-compact");return b({},r,Object.assign(Object.assign({},function(e,t,n){var r,i=n.focusElCls,o=n.focus,a=n.borderElCls?"> *":"",s=["hover",o?"focus":null,"active"].filter(Boolean).map((function(e){return"&:".concat(e," ").concat(a)})).join(",");return b(r={},"&-item:not(".concat(t,"-last-item)"),{marginInlineEnd:-e.lineWidth}),b(r,"&-item",Object.assign(Object.assign(b({},s,{zIndex:2}),i?b({},"&".concat(i),{zIndex:2}):{}),b({},"&[disabled] ".concat(a),{zIndex:0}))),r}(e,r,t)),function(e,t,n){var r,i=n.borderElCls,o=i?"> ".concat(i):"";return b(r={},"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item) ").concat(o),{borderRadius:0}),b(r,"&-item:not(".concat(t,"-last-item)").concat(t,"-first-item"),b({},"& ".concat(o,", &").concat(e,"-sm ").concat(o,", &").concat(e,"-lg ").concat(o),{borderStartEndRadius:0,borderEndEndRadius:0})),b(r,"&-item:not(".concat(t,"-first-item)").concat(t,"-last-item"),b({},"& ".concat(o,", &").concat(e,"-sm ").concat(o,", &").concat(e,"-lg ").concat(o),{borderStartStartRadius:0,borderEndStartRadius:0})),r}(n,r,t)))}function Ul(e){var t="".concat(e.componentCls,"-compact-vertical");return b({},t,Object.assign(Object.assign({},function(e,t){var n;return b(n={},"&-item:not(".concat(t,"-last-item)"),{marginBottom:-e.lineWidth}),b(n,"&-item",{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}),n}(e,t)),function(e,t){var n;return b(n={},"&-item:not(".concat(t,"-first-item):not(").concat(t,"-last-item)"),{borderRadius:0}),b(n,"&-item".concat(t,"-first-item:not(").concat(t,"-last-item)"),b({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderEndEndRadius:0,borderEndStartRadius:0})),b(n,"&-item".concat(t,"-last-item:not(").concat(t,"-first-item)"),b({},"&, &".concat(e,"-sm, &").concat(e,"-lg"),{borderStartStartRadius:0,borderStartEndRadius:0})),n}(e.componentCls,t)))}var Hl=function(e,t){return b({},"> span, > ".concat(e),{"&:not(:last-child)":b({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineEndColor:t}}),"&:not(:first-child)":b({},"&, & > ".concat(e),{"&:not(:disabled)":{borderInlineStartColor:t}})})},jl=function(e){var t,n,r=e.componentCls,i=e.fontSize,o=e.lineWidth,a=e.colorPrimaryHover,s=e.colorErrorHover;return b({},"".concat(r,"-group"),[(n={position:"relative",display:"inline-flex"},b(n,"> span, > ".concat(r),{"&:not(:last-child)":b({},"&, & > ".concat(r),{borderStartEndRadius:0,borderEndEndRadius:0}),"&:not(:first-child)":b({marginInlineStart:-o},"&, & > ".concat(r),{borderStartStartRadius:0,borderEndStartRadius:0})}),b(n,r,(t={position:"relative",zIndex:1},b(t,"&:hover,\n          &:focus,\n          &:active",{zIndex:2}),b(t,"&[disabled]",{zIndex:0}),t)),b(n,"".concat(r,"-icon-only"),{fontSize:i}),n),Hl("".concat(r,"-primary"),a),Hl("".concat(r,"-danger"),s)])},zl=function(e){var t,n=e.componentCls,r=e.iconCls;return b({},n,(b(t={outline:"none",position:"relative",display:"inline-block",fontWeight:e.buttonFontWeight,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",backgroundColor:"transparent",border:"".concat(e.lineWidth,"px ").concat(e.lineType," transparent"),cursor:"pointer",transition:"all ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut),userSelect:"none",touchAction:"manipulation",lineHeight:e.lineHeight,color:e.colorText,"> span":{display:"inline-block"}},"".concat(n,"-icon"),{lineHeight:0}),b(t,"&:not(".concat(n,"-icon-only) > ").concat(n,"-icon"),b({},"&".concat(n,"-loading-icon, &:not(:last-child)"),{marginInlineEnd:e.marginXS})),b(t,"> span + ".concat(r),{marginInlineStart:e.marginXS}),b(t,"> a",{color:"currentColor"}),b(t,"&:not(:disabled)",Object.assign({},cs(e))),b(t,"&-icon-only".concat(n,"-compact-item"),{flex:"none"}),b(t,"&-compact-item".concat(n,"-primary"),b({},"&:not([disabled]) + ".concat(n,"-compact-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:e.lineWidth,height:"calc(100% + ".concat(2*e.lineWidth,"px)"),backgroundColor:e.colorPrimaryHover,content:'""'}})),b(t,"&-compact-vertical-item",b({},"&".concat(n,"-primary"),b({},"&:not([disabled]) + ".concat(n,"-compact-vertical-item").concat(n,"-primary:not([disabled])"),{position:"relative","&:before":{position:"absolute",top:-e.lineWidth,insetInlineStart:-e.lineWidth,display:"inline-block",width:"calc(100% + ".concat(2*e.lineWidth,"px)"),height:e.lineWidth,backgroundColor:e.colorPrimaryHover,content:'""'}}))),t))},Vl=function(e,t){return{"&:not(:disabled)":{"&:hover":e,"&:active":t}}},Gl=function(e){return{minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}},Wl=function(e){return{borderRadius:e.controlHeight,paddingInlineStart:e.controlHeight/2,paddingInlineEnd:e.controlHeight/2}},Xl=function(e){return{cursor:"not-allowed",borderColor:e.colorBorder,color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,boxShadow:"none"}},Yl=function(e,t,n,r,i,o,a){return b({},"&".concat(e,"-background-ghost"),Object.assign(Object.assign({color:t||void 0,backgroundColor:"transparent",borderColor:n||void 0,boxShadow:"none"},Vl(Object.assign({backgroundColor:"transparent"},o),Object.assign({backgroundColor:"transparent"},a))),{"&:disabled":{cursor:"not-allowed",color:r||void 0,borderColor:i||void 0}}))},Kl=function(e){return{"&:disabled":Object.assign({},Xl(e))}},ql=function(e){return Object.assign({},Kl(e))},Zl=function(e){return{"&:disabled":{cursor:"not-allowed",color:e.colorTextDisabled}}},$l=function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(e)),{backgroundColor:e.colorBgContainer,borderColor:e.colorBorder,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlTmpOutline)}),Vl({color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),Yl(e.componentCls,e.colorBgContainer,e.colorBgContainer,e.colorTextDisabled,e.colorBorder)),b({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({color:e.colorError,borderColor:e.colorError},Vl({color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Yl(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder)),Kl(e))))},Ql=function(e){var t,n=e.componentCls;return b(t={},"".concat(n,"-default"),$l(e)),b(t,"".concat(n,"-primary"),function(e){return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},ql(e)),{color:e.colorTextLightSolid,backgroundColor:e.colorPrimary,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.controlOutline)}),Vl({color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryHover},{color:e.colorTextLightSolid,backgroundColor:e.colorPrimaryActive})),Yl(e.componentCls,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),b({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign(Object.assign({backgroundColor:e.colorError,boxShadow:"0 ".concat(e.controlOutlineWidth,"px 0 ").concat(e.colorErrorOutline)},Vl({backgroundColor:e.colorErrorHover},{backgroundColor:e.colorErrorActive})),Yl(e.componentCls,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),Kl(e))))}(e)),b(t,"".concat(n,"-dashed"),function(e){return Object.assign(Object.assign({},$l(e)),{borderStyle:"dashed"})}(e)),b(t,"".concat(n,"-link"),function(e){return Object.assign(Object.assign(Object.assign({color:e.colorLink},Vl({color:e.colorLinkHover},{color:e.colorLinkActive})),Zl(e)),b({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},Vl({color:e.colorErrorHover},{color:e.colorErrorActive})),Zl(e))))}(e)),b(t,"".concat(n,"-text"),function(e){return Object.assign(Object.assign(Object.assign({},Vl({color:e.colorText,backgroundColor:e.colorBgTextHover},{color:e.colorText,backgroundColor:e.colorBgTextActive})),Zl(e)),b({},"&".concat(e.componentCls,"-dangerous"),Object.assign(Object.assign({color:e.colorError},Zl(e)),Vl({color:e.colorErrorHover,backgroundColor:e.colorErrorBg},{color:e.colorErrorHover,backgroundColor:e.colorErrorBg}))))}(e)),b(t,"".concat(n,"-disabled"),function(e){return Object.assign(Object.assign({},Xl(e)),b({},"&".concat(e.componentCls,":hover"),Object.assign({},Xl(e))))}(e)),t},Jl=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=e.componentCls,o=e.controlHeight,a=e.fontSize,s=e.lineHeight,l=e.lineWidth,u=e.borderRadius,c=e.buttonPaddingHorizontal,h=e.iconCls,d=Math.max(0,(o-a*s)/2-l),f=c-l,p="".concat(i,"-icon-only");return[b({},"".concat(i).concat(r),(n={fontSize:a,height:o,padding:"".concat(d,"px ").concat(f,"px"),borderRadius:u},b(n,"&".concat(p),(t={width:o,paddingInlineStart:0,paddingInlineEnd:0},b(t,"&".concat(i,"-round"),{width:"auto"}),b(t,h,{fontSize:e.buttonIconOnlyFontSize}),t)),b(n,"&".concat(i,"-loading"),{opacity:e.opacityLoading,cursor:"default"}),b(n,"".concat(i,"-loading-icon"),{transition:"width ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOut,", opacity ").concat(e.motionDurationSlow," ").concat(e.motionEaseInOut)}),n)),b({},"".concat(i).concat(i,"-circle").concat(r),Gl(e)),b({},"".concat(i).concat(i,"-round").concat(r),Wl(e))]},eu=function(e){return Jl(e)},tu=function(e){var t=nl(e,{controlHeight:e.controlHeightSM,padding:e.paddingXS,buttonPaddingHorizontal:8,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.fontSizeLG-2});return Jl(t,"".concat(e.componentCls,"-sm"))},nu=function(e){var t=nl(e,{controlHeight:e.controlHeightLG,fontSize:e.fontSizeLG,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.fontSizeLG+2});return Jl(t,"".concat(e.componentCls,"-lg"))},ru=function(e){var t=e.componentCls;return b({},t,b({},"&".concat(t,"-block"),{width:"100%"}))},iu=ol("Button",(function(e){var t=nl(e,{colorOutlineDefault:e.controlTmpOutline,buttonPaddingHorizontal:e.paddingContentHorizontal,buttonIconOnlyFontSize:e.fontSizeLG,buttonFontWeight:400});return[zl(t),tu(t),eu(t),nu(t),ru(t),Ql(t),jl(t),Bl(e),Ul(e)]})),ou=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function au(e){return"danger"===e?{danger:!0}:{type:e}}var su=function(e,t){var n,r=e.loading,i=void 0!==r&&r,o=e.prefixCls,s=e.type,l=void 0===s?"default":s,u=e.danger,c=e.shape,h=void 0===c?"default":c,d=e.size,f=e.styles,p=e.disabled,v=e.className,m=e.rootClassName,g=e.children,y=e.icon,_=e.ghost,x=void 0!==_&&_,E=e.block,w=void 0!==E&&E,T=e.htmlType,S=void 0===T?"button":T,k=e.classNames,C=ou(e,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames"]),A=(0,a.useContext)(Lo),I=A.getPrefixCls,O=A.autoInsertSpaceInButton,P=A.direction,M=I("btn",o),R=Pt(iu(M),2),N=R[0],D=R[1],L=(0,a.useContext)(jo),F=null!==p&&void 0!==p?p:L,B=(0,a.useContext)(Ml),U=(0,a.useMemo)((function(){return function(e){if("object"===typeof e&&e){var t=null===e||void 0===e?void 0:e.delay;return{loading:!1,delay:Number.isNaN(t)||"number"!==typeof t?0:t}}return{loading:!!e,delay:0}}(i)}),[i]),H=Pt((0,a.useState)(U.loading),2),j=H[0],z=H[1],V=Pt((0,a.useState)(!1),2),G=V[0],W=V[1],X=Qo(t,(0,a.createRef)()),Y=1===a.Children.count(g)&&!y&&!Ll(l);(0,a.useEffect)((function(){var e=null;return U.delay>0?e=setTimeout((function(){e=null,z(!0)}),U.delay):z(U.loading),function(){e&&(clearTimeout(e),e=null)}}),[U]),(0,a.useEffect)((function(){if(X&&X.current&&!1!==O){var e=X.current.textContent;Y&&Dl(e)?G||W(!0):G&&W(!1)}}),[X]);var K=function(t){var n=e.onClick;j||F?t.preventDefault():null===n||void 0===n||n(t)},q=!1!==O,Z=yl(M,P),$=Z.compactSize,Q=Z.compactItemClassnames,J={large:"lg",small:"sm",middle:void 0},ee=zo((function(e){var t,n;return null!==(n=null!==(t=null!==$&&void 0!==$?$:B)&&void 0!==t?t:d)&&void 0!==n?n:e})),te=ee&&J[ee]||"",ne=j?"loading":y,re=qs(C,["navigate"]),ie=void 0!==re.href&&F,oe=Ko()(M,D,(b(n={},"".concat(M,"-").concat(h),"default"!==h&&h),b(n,"".concat(M,"-").concat(l),l),b(n,"".concat(M,"-").concat(te),te),b(n,"".concat(M,"-icon-only"),!g&&0!==g&&!!ne),b(n,"".concat(M,"-background-ghost"),x&&!Ll(l)),b(n,"".concat(M,"-loading"),j),b(n,"".concat(M,"-two-chinese-chars"),G&&q&&!j),b(n,"".concat(M,"-block"),w),b(n,"".concat(M,"-dangerous"),!!u),b(n,"".concat(M,"-rtl"),"rtl"===P),b(n,"".concat(M,"-disabled"),ie),n),Q,v,m),ae=y&&!j?a.createElement(kl,{prefixCls:M,className:null===k||void 0===k?void 0:k.icon,style:null===f||void 0===f?void 0:f.icon},y):a.createElement(Ol,{existIcon:!!y,prefixCls:M,loading:!!j}),se=g||0===g?Fl(g,Y&&q):null;if(void 0!==re.href)return N(a.createElement("a",Object.assign({},re,{className:oe,onClick:K,ref:X}),ae,se));var le=a.createElement("button",Object.assign({},C,{type:S,className:oe,onClick:K,disabled:F,ref:X}),ae,se);return Ll(l)||(le=a.createElement(dl,{disabled:!!j},le)),N(le)},lu=(0,a.forwardRef)(su);lu.Group=Rl,lu.__ANT_BUTTON=!0;var uu=lu;function cu(e){return!(!e||!e.then)}var hu,du=function(e){var t=e.type,n=e.children,r=e.prefixCls,i=e.buttonProps,o=e.close,s=e.autoFocus,l=e.emitEvent,u=e.quitOnNullishReturnValue,c=e.actionFn,h=a.useRef(!1),d=a.useRef(null),f=Pt(aa(!1),2),p=f[0],v=f[1],m=function(){null===o||void 0===o||o.apply(void 0,arguments)};a.useEffect((function(){var e=null;return s&&(e=setTimeout((function(){var e;null===(e=d.current)||void 0===e||e.focus()}))),function(){e&&clearTimeout(e)}}),[]);return a.createElement(uu,Object.assign({},au(t),{onClick:function(e){if(!h.current)if(h.current=!0,c){var t;if(l){if(t=c(e),u&&!cu(t))return h.current=!1,void m(e)}else if(c.length)t=c(o),h.current=!1;else if(!(t=c()))return void m();!function(e){cu(e)&&(v(!0),e.then((function(){v(!1,!0),m.apply(void 0,arguments),h.current=!1}),(function(e){return v(!1,!0),h.current=!1,Promise.reject(e)})))}(t)}else m()},loading:p,prefixCls:r},i,{ref:d}),n)},fu=function(){return{height:0,opacity:0}},pu=function(e){return{height:e.scrollHeight,opacity:1}},vu=function(e){return{height:e?e.offsetHeight:0}},mu=function(e,t){return!0===(null===t||void 0===t?void 0:t.deadline)||"height"===t.propertyName},gu=function(e,t,n){return void 0!==n?n:"".concat(e,"-").concat(t)},yu=function(){return{motionName:"".concat(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ant","-motion-collapse"),onAppearStart:fu,onEnterStart:fu,onAppearActive:pu,onEnterActive:pu,onLeaveStart:vu,onLeaveActive:fu,onAppearEnd:mu,onEnterEnd:mu,onLeaveEnd:mu,motionDeadline:500}},bu=a.createContext(null),_u=dt()?a.useLayoutEffect:a.useEffect,xu=_u,Eu=function(e,t){var n=a.useRef(!0);_u((function(){if(!n.current)return e()}),t),_u((function(){return n.current=!1,function(){n.current=!0}}),[])},wu=[];function Tu(e){if("undefined"===typeof document)return 0;if(e||void 0===hu){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var n=document.createElement("div"),r=n.style;r.position="absolute",r.top="0",r.left="0",r.pointerEvents="none",r.visibility="hidden",r.width="200px",r.height="150px",r.overflow="hidden",n.appendChild(t),document.body.appendChild(n);var i=t.offsetWidth;n.style.overflow="scroll";var o=t.offsetWidth;i===o&&(o=n.clientWidth),document.body.removeChild(n),hu=i-o}return hu}var Su="rc-util-locker-".concat(Date.now()),ku=0;function Cu(e){var t=!!e,n=Pt(a.useState((function(){return ku+=1,"".concat(Su,"_").concat(ku)})),1)[0];xu((function(){if(t){var e=Tu(),r=document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth;wt("\nhtml body {\n  overflow-y: hidden;\n  ".concat(r?"width: calc(100% - ".concat(e,"px);"):"","\n}"),n)}else Et(n);return function(){Et(n)}}),[t,n])}var Au=!1;var Iu=function(e){return!1!==e&&(dt()&&e?"string"===typeof e?document.querySelector(e):"function"===typeof e?e():e:null)},Ou=a.forwardRef((function(e,t){var n=e.open,r=e.autoLock,i=e.getContainer,o=(e.debug,e.autoDestroy),s=void 0===o||o,l=e.children,u=Pt(a.useState(n),2),c=u[0],h=u[1],d=c||n;a.useEffect((function(){(s||n)&&h(n)}),[n,s]);var f=Pt(a.useState((function(){return Iu(i)})),2),p=f[0],v=f[1];a.useEffect((function(){var e=Iu(i);v(null!==e&&void 0!==e?e:null)}));var m=function(e,t){var n=Pt(a.useState((function(){return dt()?document.createElement("div"):null})),1)[0],r=a.useRef(!1),i=a.useContext(bu),o=Pt(a.useState(wu),2),s=o[0],l=o[1],u=i||(r.current?void 0:function(e){l((function(t){return[e].concat(Pe(t))}))});function c(){n.parentElement||document.body.appendChild(n),r.current=!0}function h(){var e;null===(e=n.parentElement)||void 0===e||e.removeChild(n),r.current=!1}return xu((function(){return e?i?i(c):c():h(),h}),[e]),xu((function(){s.length&&(s.forEach((function(e){return e()})),l(wu))}),[s]),[n,u]}(d&&!p),g=Pt(m,2),y=g[0],b=g[1],_=null!==p&&void 0!==p?p:y;Cu(r&&n&&dt()&&(_===y||_===document.body));var x=null;l&&ea(l)&&t&&(x=l.ref);var E=Jo(x,t);if(!d||!dt()||void 0===p)return null;var w,T=!1===_||("boolean"===typeof w&&(Au=w),Au),S=l;return t&&(S=a.cloneElement(l,{ref:E})),a.createElement(bu.Provider,{value:b},T?S:(0,De.createPortal)(S,_))}));var Pu=Ou;var Mu=0;function Ru(e){var t=Pt(a.useState("ssr-id"),2),n=t[0],r=t[1],i=Re({},s).useId,o=null===i||void 0===i?void 0:i();return a.useEffect((function(){if(!i){var e=Mu;Mu+=1,r("rc_unique_".concat(e))}}),[]),e||(o||n)}var Nu={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(e){var t=e.keyCode;if(e.altKey&&!e.ctrlKey||e.metaKey||t>=Nu.F1&&t<=Nu.F12)return!1;switch(t){case Nu.ALT:case Nu.CAPS_LOCK:case Nu.CONTEXT_MENU:case Nu.CTRL:case Nu.DOWN:case Nu.END:case Nu.ESC:case Nu.HOME:case Nu.INSERT:case Nu.LEFT:case Nu.MAC_FF_META:case Nu.META:case Nu.NUMLOCK:case Nu.NUM_CENTER:case Nu.PAGE_DOWN:case Nu.PAGE_UP:case Nu.PAUSE:case Nu.PRINT_SCREEN:case Nu.RIGHT:case Nu.SHIFT:case Nu.UP:case Nu.WIN_KEY:case Nu.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(e){if(e>=Nu.ZERO&&e<=Nu.NINE)return!0;if(e>=Nu.NUM_ZERO&&e<=Nu.NUM_MULTIPLY)return!0;if(e>=Nu.A&&e<=Nu.Z)return!0;if(-1!==window.navigator.userAgent.indexOf("WebKit")&&0===e)return!0;switch(e){case Nu.SPACE:case Nu.QUESTION_MARK:case Nu.NUM_PLUS:case Nu.NUM_MINUS:case Nu.NUM_PERIOD:case Nu.NUM_DIVISION:case Nu.SEMICOLON:case Nu.DASH:case Nu.EQUALS:case Nu.COMMA:case Nu.PERIOD:case Nu.SLASH:case Nu.APOSTROPHE:case Nu.SINGLE_QUOTE:case Nu.OPEN_SQUARE_BRACKET:case Nu.BACKSLASH:case Nu.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Du=Nu,Lu="".concat("accept acceptCharset accessKey action allowFullScreen allowTransparency\n    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge\n    charSet checked classID className colSpan cols content contentEditable contextMenu\n    controls coords crossOrigin data dateTime default defer dir disabled download draggable\n    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder\n    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity\n    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media\n    mediaGroup method min minLength multiple muted name noValidate nonce open\n    optimum pattern placeholder poster preload radioGroup readOnly rel required\n    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected\n    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style\n    summary tabIndex target title type useMap value width wmode wrap"," ").concat("onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown\n    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick\n    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown\n    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel\n    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough\n    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata\n    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError").split(/[\s\n]+/),Fu="aria-",Bu="data-";function Uu(e,t){return 0===e.indexOf(t)}function Hu(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!1===n?{aria:!0,data:!0,attr:!0}:!0===n?{aria:!0}:Re({},n);var r={};return Object.keys(e).forEach((function(n){(t.aria&&("role"===n||Uu(n,Fu))||t.data&&Uu(n,Bu)||t.attr&&Lu.includes(n))&&(r[n]=e[n])})),r}function ju(e,t,n){var r=t;return!r&&n&&(r="".concat(e,"-").concat(n)),r}function zu(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}var Vu=a.memo((function(e){return e.children}),(function(e,t){return!t.shouldUpdate})),Gu={width:0,height:0,overflow:"hidden",outline:"none"},Wu=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.className,i=e.style,o=e.title,s=e.ariaId,l=e.footer,u=e.closable,c=e.closeIcon,h=e.onClose,d=e.children,f=e.bodyStyle,p=e.bodyProps,v=e.modalRender,m=e.onMouseDown,g=e.onMouseUp,y=e.holderRef,b=e.visible,_=e.forceRender,x=e.width,E=e.height,w=(0,a.useRef)(),T=(0,a.useRef)();a.useImperativeHandle(t,(function(){return{focus:function(){var e;null===(e=w.current)||void 0===e||e.focus()},changeActive:function(e){var t=document.activeElement;e&&t===T.current?w.current.focus():e||t!==w.current||T.current.focus()}}}));var S,k,C,A={};void 0!==x&&(A.width=x),void 0!==E&&(A.height=E),l&&(S=a.createElement("div",{className:"".concat(n,"-footer")},l)),o&&(k=a.createElement("div",{className:"".concat(n,"-header")},a.createElement("div",{className:"".concat(n,"-title"),id:s},o))),u&&(C=a.createElement("button",{type:"button",onClick:h,"aria-label":"Close",className:"".concat(n,"-close")},c||a.createElement("span",{className:"".concat(n,"-close-x")})));var I=a.createElement("div",{className:"".concat(n,"-content")},C,k,a.createElement("div",Ut({className:"".concat(n,"-body"),style:f},p),d),S);return a.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":o?s:null,"aria-modal":"true",ref:y,style:Re(Re({},i),A),className:Ko()(n,r),onMouseDown:m,onMouseUp:g},a.createElement("div",{tabIndex:0,ref:w,style:Gu,"aria-hidden":"true"}),a.createElement(Vu,{shouldUpdate:b||_},v?v(I):I),a.createElement("div",{tabIndex:0,ref:T,style:Gu,"aria-hidden":"true"}))}));var Xu=Wu,Yu=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.title,i=e.style,o=e.className,s=e.visible,l=e.forceRender,u=e.destroyOnClose,c=e.motionName,h=e.ariaId,d=e.onVisibleChanged,f=e.mousePosition,p=(0,a.useRef)(),v=Pt(a.useState(),2),m=v[0],g=v[1],y={};function b(){var e=function(e){var t=e.getBoundingClientRect(),n={left:t.left,top:t.top},r=e.ownerDocument,i=r.defaultView||r.parentWindow;return n.left+=zu(i),n.top+=zu(i,!0),n}(p.current);g(f?"".concat(f.x-e.left,"px ").concat(f.y-e.top,"px"):"")}return m&&(y.transformOrigin=m),a.createElement(ts,{visible:s,onVisibleChanged:d,onAppearPrepare:b,onEnterPrepare:b,forceRender:l,motionName:c,removeOnLeave:u,ref:p},(function(s,l){var u=s.className,c=s.style;return a.createElement(Xu,Ut({},e,{ref:t,title:r,ariaId:h,prefixCls:n,holderRef:l,style:Re(Re(Re({},c),i),y),className:Ko()(o,u)}))}))}));Yu.displayName="Content";var Ku=Yu;function qu(e){var t=e.prefixCls,n=e.style,r=e.visible,i=e.maskProps,o=e.motionName;return a.createElement(ts,{key:"mask",visible:r,motionName:o,leavedClassName:"".concat(t,"-mask-hidden")},(function(e,r){var o=e.className,s=e.style;return a.createElement("div",Ut({ref:r,style:Re(Re({},s),n),className:Ko()("".concat(t,"-mask"),o)},i))}))}function Zu(e){var t=e.prefixCls,n=void 0===t?"rc-dialog":t,r=e.zIndex,i=e.visible,o=void 0!==i&&i,s=e.keyboard,l=void 0===s||s,u=e.focusTriggerAfterClose,c=void 0===u||u,h=e.wrapStyle,d=e.wrapClassName,f=e.wrapProps,p=e.onClose,v=e.afterOpenChange,m=e.afterClose,g=e.transitionName,y=e.animation,b=e.closable,_=void 0===b||b,x=e.mask,E=void 0===x||x,w=e.maskTransitionName,T=e.maskAnimation,S=e.maskClosable,k=void 0===S||S,C=e.maskStyle,A=e.maskProps,I=e.rootClassName,O=(0,a.useRef)(),P=(0,a.useRef)(),M=(0,a.useRef)(),R=Pt(a.useState(o),2),N=R[0],D=R[1],L=Ru();function F(e){null===p||void 0===p||p(e)}var B=(0,a.useRef)(!1),U=(0,a.useRef)(),H=null;return k&&(H=function(e){B.current?B.current=!1:P.current===e.target&&F(e)}),(0,a.useEffect)((function(){o&&(D(!0),ft(P.current,document.activeElement)||(O.current=document.activeElement))}),[o]),(0,a.useEffect)((function(){return function(){clearTimeout(U.current)}}),[]),a.createElement("div",Ut({className:Ko()("".concat(n,"-root"),I)},Hu(e,{data:!0})),a.createElement(qu,{prefixCls:n,visible:E&&o,motionName:ju(n,w,T),style:Re({zIndex:r},C),maskProps:A}),a.createElement("div",Ut({tabIndex:-1,onKeyDown:function(e){if(l&&e.keyCode===Du.ESC)return e.stopPropagation(),void F(e);o&&e.keyCode===Du.TAB&&M.current.changeActive(!e.shiftKey)},className:Ko()("".concat(n,"-wrap"),d),ref:P,onClick:H,style:Re(Re({zIndex:r},h),{},{display:N?null:"none"})},f),a.createElement(Ku,Ut({},e,{onMouseDown:function(){clearTimeout(U.current),B.current=!0},onMouseUp:function(){U.current=setTimeout((function(){B.current=!1}))},ref:M,closable:_,ariaId:L,prefixCls:n,visible:o&&N,onClose:F,onVisibleChanged:function(e){if(e)!function(){var e;ft(P.current,document.activeElement)||null===(e=M.current)||void 0===e||e.focus()}();else{if(D(!1),E&&O.current&&c){try{O.current.focus({preventScroll:!0})}catch(Pv){}O.current=null}N&&(null===m||void 0===m||m())}null===v||void 0===v||v(e)},motionName:ju(n,g,y)}))))}var $u=function(e){var t=e.visible,n=e.getContainer,r=e.forceRender,i=e.destroyOnClose,o=void 0!==i&&i,s=e.afterClose,l=Pt(a.useState(t),2),u=l[0],c=l[1];return a.useEffect((function(){t&&c(!0)}),[t]),r||!o||u?a.createElement(Pu,{open:t||r||u,autoDestroy:!1,getContainer:n,autoLock:t||u},a.createElement(Zu,Ut({},e,{destroyOnClose:o,afterClose:function(){null===s||void 0===s||s(),c(!1)}}))):null};$u.displayName="Dialog";var Qu,Ju=$u,ec=a.createContext({}),tc=function(e){var t=e.children,n=e.status,r=e.override,i=(0,a.useContext)(ec),o=(0,a.useMemo)((function(){var e=Object.assign({},i);return r&&delete e.isFormItemInput,n&&(delete e.status,delete e.hasFeedback,delete e.feedbackIcon),e}),[n,r,i]);return a.createElement(ec.Provider,{value:o},t)},nc=function(){return dt()&&window.document.documentElement},rc={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},ic=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:rc}))};var oc=a.forwardRef(ic),ac=function(e,t,n,r){var i,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?"&":"";return b(i={},"\n      ".concat(o).concat(e,"-enter,\n      ").concat(o).concat(e,"-appear\n    "),Object.assign(Object.assign({},function(e){return{animationDuration:e,animationFillMode:"both"}}(r)),{animationPlayState:"paused"})),b(i,"".concat(o).concat(e,"-leave"),Object.assign(Object.assign({},function(e){return{animationDuration:e,animationFillMode:"both"}}(r)),{animationPlayState:"paused"})),b(i,"\n      ".concat(o).concat(e,"-enter").concat(e,"-enter-active,\n      ").concat(o).concat(e,"-appear").concat(e,"-appear-active\n    "),{animationName:t,animationPlayState:"running"}),b(i,"".concat(o).concat(e,"-leave").concat(e,"-leave-active"),{animationName:n,animationPlayState:"running",pointerEvents:"none"}),i},sc=new Un("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),lc=new Un("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),uc=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.antCls,i="".concat(r,"-fade"),o=n?"&":"";return[ac(i,sc,lc,e.motionDurationMid,n),(t={},b(t,"\n        ".concat(o).concat(i,"-enter,\n        ").concat(o).concat(i,"-appear\n      "),{opacity:0,animationTimingFunction:"linear"}),b(t,"".concat(o).concat(i,"-leave"),{animationTimingFunction:"linear"}),t)]},cc=new Un("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),hc=new Un("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),dc=new Un("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),fc=new Un("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),pc=new Un("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),vc=new Un("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),mc={zoom:{inKeyframes:cc,outKeyframes:hc},"zoom-big":{inKeyframes:dc,outKeyframes:fc},"zoom-big-fast":{inKeyframes:dc,outKeyframes:fc},"zoom-left":{inKeyframes:new Un("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),outKeyframes:new Un("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}})},"zoom-right":{inKeyframes:new Un("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),outKeyframes:new Un("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}})},"zoom-up":{inKeyframes:pc,outKeyframes:vc},"zoom-down":{inKeyframes:new Un("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),outKeyframes:new Un("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}})}},gc=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),o=mc[t],a=o.inKeyframes,s=o.outKeyframes;return[ac(i,a,s,"zoom-big-fast"===t?e.motionDurationFast:e.motionDurationMid),(n={},b(n,"\n        ".concat(i,"-enter,\n        ").concat(i,"-appear\n      "),{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}}),b(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInOutCirc}),n)]};function yc(e){return{position:e,top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0}}var bc=function(e){var t,n=e.componentCls,r=e.antCls;return[b({},"".concat(n,"-root"),(t={},b(t,"".concat(n).concat(r,"-zoom-enter, ").concat(n).concat(r,"-zoom-appear"),{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"}),b(t,"".concat(n).concat(r,"-zoom-leave ").concat(n,"-content"),{pointerEvents:"none"}),b(t,"".concat(n,"-mask"),Object.assign(Object.assign({},yc("fixed")),b({zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask},"".concat(n,"-hidden"),{display:"none"}))),b(t,"".concat(n,"-wrap"),Object.assign(Object.assign({},yc("fixed")),{overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})),t)),b({},"".concat(n,"-root"),uc(e))]},_c=function(e){var t,n,r,i,o=e.componentCls;return[b({},"".concat(o,"-root"),(n={},b(n,"".concat(o,"-wrap"),{zIndex:e.zIndexPopupBase,position:"fixed",inset:0,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"}),b(n,"".concat(o,"-wrap-rtl"),{direction:"rtl"}),b(n,"".concat(o,"-centered"),b({textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'}},o,{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"})),b(n,"@media (max-width: ".concat(e.screenSMMax,")"),(t={},b(t,o,{maxWidth:"calc(100vw - 16px)",margin:"".concat(e.marginXS," auto")}),b(t,"".concat(o,"-centered"),b({},o,{flex:1})),t)),n)),b({},o,Object.assign(Object.assign({},as(e)),(r={pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:"calc(100vw - ".concat(2*e.margin,"px)"),margin:"0 auto",paddingBottom:e.paddingLG},b(r,"".concat(o,"-title"),{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"}),b(r,"".concat(o,"-content"),{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:"".concat(e.paddingMD,"px ").concat(e.paddingContentHorizontalLG,"px")}),b(r,"".concat(o,"-close"),Object.assign({position:"absolute",top:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,insetInlineEnd:(e.modalHeaderHeight-e.modalCloseBtnSize)/2,zIndex:e.zIndexPopupBase+10,padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:"color ".concat(e.motionDurationMid,", background-color ").concat(e.motionDurationMid),"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:"".concat(e.modalCloseBtnSize,"px"),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:hover":{color:e.modalIconHoverColor,backgroundColor:e.wireframe?"transparent":e.colorFillContent,textDecoration:"none"},"&:active":{backgroundColor:e.wireframe?"transparent":e.colorFillContentHover}},cs(e))),b(r,"".concat(o,"-header"),{color:e.colorText,background:e.headerBg,borderRadius:"".concat(e.borderRadiusLG,"px ").concat(e.borderRadiusLG,"px 0 0"),marginBottom:e.marginXS}),b(r,"".concat(o,"-body"),{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word"}),b(r,"".concat(o,"-footer"),b({textAlign:"end",background:e.footerBg,marginTop:e.marginSM},"".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn:not(").concat(e.antCls,"-dropdown-trigger)"),{marginBottom:0,marginInlineStart:e.marginXS})),b(r,"".concat(o,"-open"),{overflow:"hidden"}),r))),b({},"".concat(o,"-pure-panel"),(i={top:"auto",padding:0,display:"flex",flexDirection:"column"},b(i,"".concat(o,"-content,\n          ").concat(o,"-body,\n          ").concat(o,"-confirm-body-wrapper"),{display:"flex",flexDirection:"column",flex:"auto"}),b(i,"".concat(o,"-confirm-body"),{marginBottom:"auto"}),i))]},xc=function(e){var t,n,r,i,o=e.componentCls,a="".concat(o,"-confirm");return b(i={},a,(b(r={"&-rtl":{direction:"rtl"}},"".concat(e.antCls,"-modal-header"),{display:"none"}),b(r,"".concat(a,"-body-wrapper"),Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}})),b(r,"".concat(a,"-body"),(b(n={display:"flex",flexWrap:"wrap",alignItems:"center"},"".concat(a,"-title"),b({flex:"0 0 100%",display:"block",overflow:"hidden",color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight},"+ ".concat(a,"-content"),{marginBlockStart:e.marginXS,flexBasis:"100%",maxWidth:"calc(100% - ".concat(e.modalConfirmIconSize+e.marginSM,"px)")})),b(n,"".concat(a,"-content"),{color:e.colorText,fontSize:e.fontSize}),b(n,"> ".concat(e.iconCls),(b(t={flex:"none",marginInlineEnd:e.marginSM,fontSize:e.modalConfirmIconSize},"+ ".concat(a,"-title"),{flex:1}),b(t,"+ ".concat(a,"-title + ").concat(a,"-content"),{marginInlineStart:e.modalConfirmIconSize+e.marginSM}),t)),n)),b(r,"".concat(a,"-btns"),b({textAlign:"end",marginTop:e.marginSM},"".concat(e.antCls,"-btn + ").concat(e.antCls,"-btn"),{marginBottom:0,marginInlineStart:e.marginXS})),r)),b(i,"".concat(a,"-error ").concat(a,"-body > ").concat(e.iconCls),{color:e.colorError}),b(i,"".concat(a,"-warning ").concat(a,"-body > ").concat(e.iconCls,",\n        ").concat(a,"-confirm ").concat(a,"-body > ").concat(e.iconCls),{color:e.colorWarning}),b(i,"".concat(a,"-info ").concat(a,"-body > ").concat(e.iconCls),{color:e.colorInfo}),b(i,"".concat(a,"-success ").concat(a,"-body > ").concat(e.iconCls),{color:e.colorSuccess}),i},Ec=function(e){var t=e.componentCls;return b({},"".concat(t,"-root"),b({},"".concat(t,"-wrap-rtl"),b({direction:"rtl"},"".concat(t,"-confirm-body"),{direction:"rtl"})))},wc=function(e){var t,n,r,i=e.componentCls,o=e.antCls,a="".concat(i,"-confirm");return b(r={},i,(b(t={},"".concat(i,"-content"),{padding:0}),b(t,"".concat(i,"-header"),{padding:e.modalHeaderPadding,borderBottom:"".concat(e.modalHeaderBorderWidth,"px ").concat(e.modalHeaderBorderStyle," ").concat(e.modalHeaderBorderColorSplit),marginBottom:0}),b(t,"".concat(i,"-body"),{padding:e.modalBodyPadding}),b(t,"".concat(i,"-footer"),{padding:"".concat(e.modalFooterPaddingVertical,"px ").concat(e.modalFooterPaddingHorizontal,"px"),borderTop:"".concat(e.modalFooterBorderWidth,"px ").concat(e.modalFooterBorderStyle," ").concat(e.modalFooterBorderColorSplit),borderRadius:"0 0 ".concat(e.borderRadiusLG,"px ").concat(e.borderRadiusLG,"px"),marginTop:0}),t)),b(r,a,(b(n={},"".concat(o,"-modal-body"),{padding:"".concat(2*e.padding,"px ").concat(2*e.padding,"px ").concat(e.paddingLG,"px")}),b(n,"".concat(a,"-body"),b({},"> ".concat(e.iconCls),b({marginInlineEnd:e.margin},"+ ".concat(a,"-title + ").concat(a,"-content"),{marginInlineStart:e.modalConfirmIconSize+e.margin}))),b(n,"".concat(a,"-btns"),{marginTop:e.marginLG}),n)),r},Tc=ol("Modal",(function(e){var t=e.padding,n=e.fontSizeHeading5,r=e.lineHeightHeading5,i=nl(e,{modalBodyPadding:e.paddingLG,modalHeaderPadding:"".concat(t,"px ").concat(e.paddingLG,"px"),modalHeaderBorderWidth:e.lineWidth,modalHeaderBorderStyle:e.lineType,modalHeaderBorderColorSplit:e.colorSplit,modalHeaderHeight:r*n+2*t,modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterPaddingVertical:e.paddingXS,modalFooterPaddingHorizontal:e.padding,modalFooterBorderWidth:e.lineWidth,modalIconHoverColor:e.colorIconHover,modalCloseIconColor:e.colorIcon,modalCloseBtnSize:e.fontSize*e.lineHeight,modalConfirmIconSize:e.fontSize*e.lineHeight});return[_c(i),xc(i),Ec(i),bc(i),e.wireframe&&wc(i),gc(i,"zoom")]}),(function(e){return{footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading}})),Sc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function kc(e,t){return a.createElement("span",{className:"".concat(e,"-close-x")},t||a.createElement(oc,{className:"".concat(e,"-close-icon")}))}var Cc,Ac=function(e){var t=e.okText,n=e.okType,r=void 0===n?"primary":n,i=e.cancelText,o=e.confirmLoading,s=e.onOk,l=e.onCancel,u=e.okButtonProps,c=e.cancelButtonProps,h=Pt(Ks("Modal",Ci()),1)[0];return a.createElement(a.Fragment,null,a.createElement(uu,Object.assign({onClick:l},c),i||(null===h||void 0===h?void 0:h.cancelText)),a.createElement(uu,Object.assign({},au(r),{loading:o,onClick:s},u),t||(null===h||void 0===h?void 0:h.okText)))},Ic=function(e){var t=e.prefixCls,n=e.className,r=e.closeIcon,i=e.closable,o=e.type,s=e.title,l=e.children,u=Sc(e,["prefixCls","className","closeIcon","closable","type","title","children"]),c=a.useContext(Lo).getPrefixCls,h=c(),d=t||c("modal"),f=Pt(Tc(d),2)[1],p="".concat(d,"-confirm"),v={};return v=o?{closable:null!==i&&void 0!==i&&i,title:"",footer:"",children:a.createElement(Mc,Object.assign({},e,{confirmPrefixCls:p,rootPrefixCls:h,content:l}))}:{closable:null===i||void 0===i||i,title:s,footer:void 0===e.footer?a.createElement(Ac,Object.assign({},e)):e.footer,children:l},a.createElement(Xu,Object.assign({prefixCls:d,className:Ko()(f,"".concat(d,"-pure-panel"),o&&p,o&&"".concat(p,"-").concat(o),n)},u,{closeIcon:kc(d,r),closable:i},v))},Oc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};nc()&&document.documentElement.addEventListener("click",(function(e){Cc={x:e.pageX,y:e.pageY},setTimeout((function(){Cc=null}),100)}),!0);var Pc=function(e){var t,n,r=a.useContext(Lo),i=r.getPopupContainer,o=r.getPrefixCls,s=r.direction,l=function(t){var n=e.onCancel;null===n||void 0===n||n(t)},u=e.prefixCls,c=e.className,h=e.rootClassName,d=e.open,f=e.wrapClassName,p=e.centered,v=e.getContainer,m=e.closeIcon,g=e.focusTriggerAfterClose,y=void 0===g||g,_=e.visible,x=e.width,E=void 0===x?520:x,w=e.footer,T=Oc(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","closeIcon","focusTriggerAfterClose","visible","width","footer"]),S=o("modal",u),k=o(),C=Pt(Tc(S),2),A=C[0],I=C[1],O=Ko()(f,(b(t={},"".concat(S,"-centered"),!!p),b(t,"".concat(S,"-wrap-rtl"),"rtl"===s),t));var P=void 0===w?a.createElement(Ac,Object.assign({},e,{onOk:function(t){var n=e.onOk;null===n||void 0===n||n(t)},onCancel:l})):w;return A(a.createElement(bl,null,a.createElement(tc,{status:!0,override:!0},a.createElement(Ju,Object.assign({width:E},T,{getContainer:void 0===v?i:v,prefixCls:S,rootClassName:Ko()(I,h),wrapClassName:O,footer:P,visible:null!==d&&void 0!==d?d:_,mousePosition:null!==(n=T.mousePosition)&&void 0!==n?n:Cc,onClose:l,closeIcon:kc(S,m),focusTriggerAfterClose:y,transitionName:gu(k,"zoom",e.transitionName),maskTransitionName:gu(k,"fade",e.maskTransitionName),className:Ko()(I,c)})))))};function Mc(e){var t=e.icon,n=e.onCancel,r=e.onOk,i=e.close,o=e.okText,s=e.okButtonProps,l=e.cancelText,u=e.cancelButtonProps,c=e.confirmPrefixCls,h=e.rootPrefixCls,d=e.type,f=e.okCancel,p=e.footer,v=e.locale,m=t;if(!t&&null!==t)switch(d){case"info":m=a.createElement(Ys,null);break;case"success":m=a.createElement(Bs,null);break;case"error":m=a.createElement(js,null);break;default:m=a.createElement(Gs,null)}var g=e.okType||"primary",y=null!==f&&void 0!==f?f:"confirm"===d,b=null!==e.autoFocusButton&&(e.autoFocusButton||"ok"),_=Pt(Ks("Modal"),1)[0],x=v||_,E=y&&a.createElement(du,{actionFn:n,close:i,autoFocus:"cancel"===b,buttonProps:u,prefixCls:"".concat(h,"-btn")},l||(null===x||void 0===x?void 0:x.cancelText));return a.createElement("div",{className:"".concat(c,"-body-wrapper")},a.createElement("div",{className:"".concat(c,"-body")},m,void 0===e.title?null:a.createElement("span",{className:"".concat(c,"-title")},e.title),a.createElement("div",{className:"".concat(c,"-content")},e.content)),void 0===p?a.createElement("div",{className:"".concat(c,"-btns")},E,a.createElement(du,{type:g,actionFn:r,close:i,autoFocus:"ok"===b,buttonProps:s,prefixCls:"".concat(h,"-btn")},o||(y?null===x||void 0===x?void 0:x.okText:null===x||void 0===x?void 0:x.justOkText))):p)}var Rc=function(e){var t=e.close,n=e.zIndex,r=e.afterClose,i=(e.visible,e.open),o=e.keyboard,s=e.centered,l=e.getContainer,u=e.maskStyle,c=e.direction,h=e.prefixCls,d=e.wrapClassName,f=e.rootPrefixCls,p=e.iconPrefixCls,v=e.bodyStyle,m=e.closable,g=void 0!==m&&m,y=e.closeIcon,_=e.modalRender,x=e.focusTriggerAfterClose;var E="".concat(h,"-confirm"),w=e.width||416,T=e.style||{},S=void 0===e.mask||e.mask,k=void 0!==e.maskClosable&&e.maskClosable,C=Ko()(E,"".concat(E,"-").concat(e.type),b({},"".concat(E,"-rtl"),"rtl"===c),e.className);return a.createElement(bs,{prefixCls:f,iconPrefixCls:p,direction:c},a.createElement(Pc,{prefixCls:h,className:C,wrapClassName:Ko()(b({},"".concat(E,"-centered"),!!e.centered),d),onCancel:function(){return null===t||void 0===t?void 0:t({triggerCancel:!0})},open:i,title:"",footer:null,transitionName:gu(f,"zoom",e.transitionName),maskTransitionName:gu(f,"fade",e.maskTransitionName),mask:S,maskClosable:k,maskStyle:u,style:T,bodyStyle:v,width:w,zIndex:n,afterClose:r,keyboard:o,centered:s,getContainer:l,closable:g,closeIcon:y,modalRender:_,focusTriggerAfterClose:x},a.createElement(Mc,Object.assign({},e,{confirmPrefixCls:E}))))},Nc=[],Dc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Lc="";function Fc(e){var t,n=document.createDocumentFragment(),r=Object.assign(Object.assign({},e),{close:s,open:!0});function i(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o=r.some((function(e){return e&&e.triggerCancel}));e.onCancel&&o&&e.onCancel.apply(e,[function(){}].concat(Pe(r.slice(1))));for(var a=0;a<Nc.length;a++){if(Nc[a]===s){Nc.splice(a,1);break}}Xe(n)}function o(e){var r=e.okText,i=e.cancelText,o=e.prefixCls,s=Dc(e,["okText","cancelText","prefixCls"]);clearTimeout(t),t=setTimeout((function(){var e=Ci(),t=ms(),l=t.getPrefixCls,u=t.getIconPrefixCls,c=l(void 0,Lc),h=o||"".concat(c,"-modal"),d=u();ze(a.createElement(Rc,Object.assign({},s,{prefixCls:h,rootPrefixCls:c,iconPrefixCls:d,okText:r,locale:e,cancelText:i||e.cancelText})),n)}))}function s(){for(var t=this,n=arguments.length,a=new Array(n),s=0;s<n;s++)a[s]=arguments[s];(r=Object.assign(Object.assign({},r),{open:!1,afterClose:function(){"function"===typeof e.afterClose&&e.afterClose(),i.apply(t,a)}})).visible&&delete r.visible,o(r)}return o(r),Nc.push(s),{destroy:s,update:function(e){o(r="function"===typeof e?e(r):Object.assign(Object.assign({},r),e))}}}function Bc(e){return Object.assign(Object.assign({},e),{type:"warning"})}function Uc(e){return Object.assign(Object.assign({},e),{type:"info"})}function Hc(e){return Object.assign(Object.assign({},e),{type:"success"})}function jc(e){return Object.assign(Object.assign({},e),{type:"error"})}function zc(e){return Object.assign(Object.assign({},e),{type:"confirm"})}var Vc=function(e,t){var n,r=e.afterClose,i=e.config,o=Pt(a.useState(!0),2),s=o[0],l=o[1],u=Pt(a.useState(i),2),c=u[0],h=u[1],d=a.useContext(Lo),f=d.direction,p=d.getPrefixCls,v=p("modal"),m=p(),g=function(){l(!1);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.some((function(e){return e&&e.triggerCancel}));c.onCancel&&r&&c.onCancel.apply(c,[function(){}].concat(Pe(t.slice(1))))};a.useImperativeHandle(t,(function(){return{destroy:g,update:function(e){h((function(t){return Object.assign(Object.assign({},t),e)}))}}}));var y=null!==(n=c.okCancel)&&void 0!==n?n:"confirm"===c.type,b=Pt(Ks("Modal",Ti.Modal),1)[0];return a.createElement(Rc,Object.assign({prefixCls:v,rootPrefixCls:m},c,{close:g,open:s,afterClose:function(){var e;r(),null===(e=c.afterClose)||void 0===e||e.call(c)},okText:c.okText||(y?null===b||void 0===b?void 0:b.okText:null===b||void 0===b?void 0:b.justOkText),direction:c.direction||f,cancelText:c.cancelText||(null===b||void 0===b?void 0:b.cancelText)}))},Gc=a.forwardRef(Vc),Wc=0,Xc=a.memo(a.forwardRef((function(e,t){var n=function(){var e=Pt(a.useState([]),2),t=e[0],n=e[1];return[t,a.useCallback((function(e){return n((function(t){return[].concat(Pe(t),[e])})),function(){n((function(t){return t.filter((function(t){return t!==e}))}))}}),[])]}(),r=Pt(n,2),i=r[0],o=r[1];return a.useImperativeHandle(t,(function(){return{patchElement:o}}),[]),a.createElement(a.Fragment,null,i)})));var Yc=function(){var e=a.useRef(null),t=Pt(a.useState([]),2),n=t[0],r=t[1];a.useEffect((function(){n.length&&(Pe(n).forEach((function(e){e()})),r([]))}),[n]);var i=a.useCallback((function(t){return function(n){var i;Wc+=1;var o,s=a.createRef(),l=a.createElement(Gc,{key:"modal-".concat(Wc),config:t(n),ref:s,afterClose:function(){null===o||void 0===o||o()}});return(o=null===(i=e.current)||void 0===i?void 0:i.patchElement(l))&&Nc.push(o),{destroy:function(){function e(){var e;null===(e=s.current)||void 0===e||e.destroy()}s.current?e():r((function(t){return[].concat(Pe(t),[e])}))},update:function(e){function t(){var t;null===(t=s.current)||void 0===t||t.update(e)}s.current?t():r((function(e){return[].concat(Pe(e),[t])}))}}}}),[]);return[a.useMemo((function(){return{info:i(Uc),success:i(Hc),error:i(jc),warning:i(Bc),confirm:i(zc)}}),[]),a.createElement(Xc,{key:"modal-holder",ref:e})]};function Kc(e){return Fc(Bc(e))}var qc=Pc;qc.useModal=Yc,qc.info=function(e){return Fc(Uc(e))},qc.success=function(e){return Fc(Hc(e))},qc.error=function(e){return Fc(jc(e))},qc.warning=Kc,qc.warn=Kc,qc.confirm=function(e){return Fc(zc(e))},qc.destroyAll=function(){for(;Nc.length;){var e=Nc.pop();e&&e()}},qc.config=function(e){var t=e.rootPrefixCls;Lc=t},qc._InternalPanelDoNotUseOrYouWillBeFired=Ic;var Zc=qc,$c=function(e){return{borderColor:e.inputBorderHoverColor,borderInlineEndWidth:e.lineWidth}},Qc=function(e){return{borderColor:e.inputBorderHoverColor,boxShadow:"0 0 0 ".concat(e.controlOutlineWidth,"px ").concat(e.controlOutline),borderInlineEndWidth:e.lineWidth,outline:0}},Jc=function(e){return{color:e.colorTextDisabled,backgroundColor:e.colorBgContainerDisabled,borderColor:e.colorBorder,boxShadow:"none",cursor:"not-allowed",opacity:1,"&:hover":Object.assign({},$c(nl(e,{inputBorderHoverColor:e.colorBorder})))}},eh=function(e){var t=e.inputPaddingVerticalLG,n=e.fontSizeLG,r=e.lineHeightLG,i=e.borderRadiusLG,o=e.inputPaddingHorizontalLG;return{padding:"".concat(t,"px ").concat(o,"px"),fontSize:n,lineHeight:r,borderRadius:i}},th=function(e){return{padding:"".concat(e.inputPaddingVerticalSM,"px ").concat(e.controlPaddingHorizontalSM-1,"px"),borderRadius:e.borderRadiusSM}},nh=function(e,t){var n,r=e.componentCls,i=e.colorError,o=e.colorWarning,a=e.colorErrorOutline,s=e.colorWarningOutline,l=e.colorErrorBorderHover,u=e.colorWarningBorderHover;return b(n={},"&-status-error:not(".concat(t,"-disabled):not(").concat(t,"-borderless)").concat(t),b({borderColor:i,"&:hover":{borderColor:l},"&:focus, &-focused":Object.assign({},Qc(nl(e,{inputBorderActiveColor:i,inputBorderHoverColor:i,controlOutline:a})))},"".concat(r,"-prefix, ").concat(r,"-suffix"),{color:i})),b(n,"&-status-warning:not(".concat(t,"-disabled):not(").concat(t,"-borderless)").concat(t),b({borderColor:o,"&:hover":{borderColor:u},"&:focus, &-focused":Object.assign({},Qc(nl(e,{inputBorderActiveColor:o,inputBorderHoverColor:o,controlOutline:s})))},"".concat(r,"-prefix, ").concat(r,"-suffix"),{color:o})),n},rh=function(e){return Object.assign(Object.assign({position:"relative",display:"inline-block",width:"100%",minWidth:0,padding:"".concat(e.inputPaddingVertical,"px ").concat(e.inputPaddingHorizontal,"px"),color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,backgroundColor:e.colorBgContainer,backgroundImage:"none",borderWidth:e.lineWidth,borderStyle:e.lineType,borderColor:e.colorBorder,borderRadius:e.borderRadius,transition:"all ".concat(e.motionDurationMid)},{"&::-moz-placeholder":{opacity:1},"&::placeholder":{color:e.colorTextPlaceholder,userSelect:"none"},"&:placeholder-shown":{textOverflow:"ellipsis"}}),{"&:hover":Object.assign({},$c(e)),"&:focus, &-focused":Object.assign({},Qc(e)),"&-disabled, &[disabled]":Object.assign({},Jc(e)),"&-borderless":{"&, &:hover, &:focus, &-focused, &-disabled, &[disabled]":{backgroundColor:"transparent",border:"none",boxShadow:"none"}},"textarea&":{maxWidth:"100%",height:"auto",minHeight:e.controlHeight,lineHeight:e.lineHeight,verticalAlign:"bottom",transition:"all ".concat(e.motionDurationSlow,", height 0s"),resize:"vertical"},"&-lg":Object.assign({},eh(e)),"&-sm":Object.assign({},th(e)),"&-rtl":{direction:"rtl"},"&-textarea-rtl":{direction:"rtl"}})},ih=function(e){var t,n=e.componentCls,r=e.controlHeightSM,i=(r-2*e.lineWidth-16)/2;return b({},n,Object.assign(Object.assign(Object.assign(Object.assign({},as(e)),rh(e)),nh(e,n)),{'&[type="color"]':(t={height:e.controlHeight},b(t,"&".concat(n,"-lg"),{height:e.controlHeightLG}),b(t,"&".concat(n,"-sm"),{height:r,paddingTop:i,paddingBottom:i}),t),'&[type="search"]::-webkit-search-cancel-button, &[type="search"]::-webkit-search-decoration':{"-webkit-appearance":"none"}}))},oh=function(e){var t,n=e.componentCls,r=e.inputAffixPadding,i=e.colorTextDescription,o=e.motionDurationSlow,a=e.colorIcon,s=e.colorIconHover,l=e.iconCls;return b({},"".concat(n,"-affix-wrapper"),Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},rh(e)),(b(t={display:"inline-flex"},"&:not(".concat(n,"-affix-wrapper-disabled):hover"),Object.assign(Object.assign({},$c(e)),b({zIndex:1},"".concat(n,"-search-with-button &"),{zIndex:0}))),b(t,"&-focused, &:focus",{zIndex:1}),b(t,"&-disabled",b({},"".concat(n,"[disabled]"),{background:"transparent"})),b(t,"> input".concat(n),{padding:0,fontSize:"inherit",border:"none",borderRadius:0,outline:"none","&::-ms-reveal":{display:"none"},"&:focus":{boxShadow:"none !important"}}),b(t,"&::before",{width:0,visibility:"hidden",content:'"\\a0"'}),b(t,"".concat(n),{"&-prefix, &-suffix":{display:"flex",flex:"none",alignItems:"center","> *:not(:last-child)":{marginInlineEnd:e.paddingXS}},"&-show-count-suffix":{color:i},"&-show-count-has-suffix":{marginInlineEnd:e.paddingXXS},"&-prefix":{marginInlineEnd:r},"&-suffix":{marginInlineStart:r}}),t)),function(e){var t=e.componentCls;return b({},"".concat(t,"-clear-icon"),{margin:0,color:e.colorTextQuaternary,fontSize:e.fontSizeIcon,verticalAlign:-1,cursor:"pointer",transition:"color ".concat(e.motionDurationSlow),"&:hover":{color:e.colorTextTertiary},"&:active":{color:e.colorText},"&-hidden":{visibility:"hidden"},"&-has-suffix":{margin:"0 ".concat(e.inputAffixPadding,"px")}})}(e)),b({},"".concat(l).concat(n,"-password-icon"),{color:a,cursor:"pointer",transition:"all ".concat(o),"&:hover":{color:s}})),nh(e,"".concat(n,"-affix-wrapper"))))},ah=function(e){var t,n=e.componentCls,r=e.colorError,i=e.colorWarning,o=e.borderRadiusLG,a=e.borderRadiusSM;return b({},"".concat(n,"-group"),Object.assign(Object.assign(Object.assign({},as(e)),function(e){var t,n,r,i,o,a,s,l=e.componentCls,u=e.antCls;return b(s={position:"relative",display:"table",width:"100%",borderCollapse:"separate",borderSpacing:0},"&[class*='col-']",{paddingInlineEnd:e.paddingXS,"&:last-child":{paddingInlineEnd:0}}),b(s,"&-lg ".concat(l,", &-lg > ").concat(l,"-group-addon"),Object.assign({},eh(e))),b(s,"&-sm ".concat(l,", &-sm > ").concat(l,"-group-addon"),Object.assign({},th(e))),b(s,"&-lg ".concat(u,"-select-single ").concat(u,"-select-selector"),{height:e.controlHeightLG}),b(s,"&-sm ".concat(u,"-select-single ").concat(u,"-select-selector"),{height:e.controlHeightSM}),b(s,"> ".concat(l),{display:"table-cell","&:not(:first-child):not(:last-child)":{borderRadius:0}}),b(s,"".concat(l,"-group"),(b(r={},"&-addon, &-wrap",{display:"table-cell",width:1,whiteSpace:"nowrap",verticalAlign:"middle","&:not(:first-child):not(:last-child)":{borderRadius:0}}),b(r,"&-wrap > *",{display:"block !important"}),b(r,"&-addon",(b(n={position:"relative",padding:"0 ".concat(e.inputPaddingHorizontal,"px"),color:e.colorText,fontWeight:"normal",fontSize:e.fontSize,textAlign:"center",backgroundColor:e.colorFillAlter,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadius,transition:"all ".concat(e.motionDurationSlow),lineHeight:1},"".concat(u,"-select"),(b(t={margin:"-".concat(e.inputPaddingVertical+1,"px -").concat(e.inputPaddingHorizontal,"px")},"&".concat(u,"-select-single:not(").concat(u,"-select-customize-input)"),b({},"".concat(u,"-select-selector"),{backgroundColor:"inherit",border:"".concat(e.lineWidth,"px ").concat(e.lineType," transparent"),boxShadow:"none"})),b(t,"&-open, &-focused",b({},"".concat(u,"-select-selector"),{color:e.colorPrimary})),t)),b(n,"".concat(u,"-cascader-picker"),b({margin:"-9px -".concat(e.inputPaddingHorizontal,"px"),backgroundColor:"transparent"},"".concat(u,"-cascader-input"),{textAlign:"start",border:0,boxShadow:"none"})),n)),b(r,"&-addon:first-child",{borderInlineEnd:0}),b(r,"&-addon:last-child",{borderInlineStart:0}),r)),b(s,"".concat(l),{width:"100%",marginBottom:0,textAlign:"inherit","&:focus":{zIndex:1,borderInlineEndWidth:1},"&:hover":b({zIndex:1,borderInlineEndWidth:1},"".concat(l,"-search-with-button &"),{zIndex:0})}),b(s,"> ".concat(l,":first-child, ").concat(l,"-group-addon:first-child"),b({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(u,"-select ").concat(u,"-select-selector"),{borderStartEndRadius:0,borderEndEndRadius:0})),b(s,"> ".concat(l,"-affix-wrapper"),(b(i={},"&:not(:first-child) ".concat(l),{borderStartStartRadius:0,borderEndStartRadius:0}),b(i,"&:not(:last-child) ".concat(l),{borderStartEndRadius:0,borderEndEndRadius:0}),i)),b(s,"> ".concat(l,":last-child, ").concat(l,"-group-addon:last-child"),b({borderStartStartRadius:0,borderEndStartRadius:0},"".concat(u,"-select ").concat(u,"-select-selector"),{borderStartStartRadius:0,borderEndStartRadius:0})),b(s,"".concat(l,"-affix-wrapper"),b({"&:not(:last-child)":b({borderStartEndRadius:0,borderEndEndRadius:0},"".concat(l,"-search &"),{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius})},"&:not(:first-child), ".concat(l,"-search &:not(:first-child)"),{borderStartStartRadius:0,borderEndStartRadius:0})),b(s,"&".concat(l,"-group-compact"),Object.assign(Object.assign({display:"block"},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(b(a={},"".concat(l,"-group-addon, ").concat(l,"-group-wrap, > ").concat(l),{"&:not(:first-child):not(:last-child)":{borderInlineEndWidth:e.lineWidth,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}}),b(a,"& > *",{display:"inline-block",float:"none",verticalAlign:"top",borderRadius:0}),b(a,"& > ".concat(l,"-affix-wrapper"),{display:"inline-flex"}),b(a,"& > ".concat(u,"-picker-range"),{display:"inline-flex"}),b(a,"& > *:not(:last-child)",{marginInlineEnd:-e.lineWidth,borderInlineEndWidth:e.lineWidth}),b(a,"".concat(l),{float:"none"}),b(a,"& > ".concat(u,"-select > ").concat(u,"-select-selector,\n      & > ").concat(u,"-select-auto-complete ").concat(l,",\n      & > ").concat(u,"-cascader-picker ").concat(l,",\n      & > ").concat(l,"-group-wrapper ").concat(l),{borderInlineEndWidth:e.lineWidth,borderRadius:0,"&:hover":{zIndex:1},"&:focus":{zIndex:1}}),b(a,"& > ".concat(u,"-select-focused"),{zIndex:1}),b(a,"& > ".concat(u,"-select > ").concat(u,"-select-arrow"),{zIndex:1}),b(a,"& > *:first-child,\n      & > ".concat(u,"-select:first-child > ").concat(u,"-select-selector,\n      & > ").concat(u,"-select-auto-complete:first-child ").concat(l,",\n      & > ").concat(u,"-cascader-picker:first-child ").concat(l),{borderStartStartRadius:e.borderRadius,borderEndStartRadius:e.borderRadius}),b(a,"& > *:last-child,\n      & > ".concat(u,"-select:last-child > ").concat(u,"-select-selector,\n      & > ").concat(u,"-cascader-picker:last-child ").concat(l,",\n      & > ").concat(u,"-cascader-picker-focused:last-child ").concat(l),{borderInlineEndWidth:e.lineWidth,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius}),b(a,"& > ".concat(u,"-select-auto-complete ").concat(l),{verticalAlign:"top"}),b(a,"".concat(l,"-group-wrapper + ").concat(l,"-group-wrapper"),b({marginInlineStart:-e.lineWidth},"".concat(l,"-affix-wrapper"),{borderRadius:0})),b(a,"".concat(l,"-group-wrapper:not(:last-child)"),b({},"&".concat(l,"-search > ").concat(l,"-group"),(b(o={},"& > ".concat(l,"-group-addon > ").concat(l,"-search-button"),{borderRadius:0}),b(o,"& > ".concat(l),{borderStartStartRadius:e.borderRadius,borderStartEndRadius:0,borderEndEndRadius:0,borderEndStartRadius:e.borderRadius}),o))),a))),s}(e)),{"&-rtl":{direction:"rtl"},"&-wrapper":(t={display:"inline-block",width:"100%",textAlign:"start",verticalAlign:"top","&-rtl":{direction:"rtl"},"&-lg":b({},"".concat(n,"-group-addon"),{borderRadius:o}),"&-sm":b({},"".concat(n,"-group-addon"),{borderRadius:a}),"&-status-error":b({},"".concat(n,"-group-addon"),{color:r,borderColor:r}),"&-status-warning":b({},"".concat(n,"-group-addon"),{color:i,borderColor:i}),"&-disabled":b({},"".concat(n,"-group-addon"),Object.assign({},Jc(e)))},b(t,"&:not(".concat(n,"-compact-first-item):not(").concat(n,"-compact-last-item)").concat(n,"-compact-item"),b({},"".concat(n,", ").concat(n,"-group-addon"),{borderRadius:0})),b(t,"&:not(".concat(n,"-compact-last-item)").concat(n,"-compact-first-item"),b({},"".concat(n,", ").concat(n,"-group-addon"),{borderStartEndRadius:0,borderEndEndRadius:0})),b(t,"&:not(".concat(n,"-compact-first-item)").concat(n,"-compact-last-item"),b({},"".concat(n,", ").concat(n,"-group-addon"),{borderStartStartRadius:0,borderEndStartRadius:0})),t)}))},sh=function(e){var t,n,r,i=e.componentCls,o=e.antCls,a="".concat(i,"-search");return b({},a,(b(r={},"".concat(i),{"&:hover, &:focus":b({borderColor:e.colorPrimaryHover},"+ ".concat(i,"-group-addon ").concat(a,"-button:not(").concat(o,"-btn-primary)"),{borderInlineStartColor:e.colorPrimaryHover})}),b(r,"".concat(i,"-affix-wrapper"),{borderRadius:0}),b(r,"".concat(i,"-lg"),{lineHeight:e.lineHeightLG-2e-4}),b(r,"> ".concat(i,"-group"),b({},"> ".concat(i,"-group-addon:last-child"),(b(t={insetInlineStart:-1,padding:0,border:0},"".concat(a,"-button"),{paddingTop:0,paddingBottom:0,borderStartStartRadius:0,borderStartEndRadius:e.borderRadius,borderEndEndRadius:e.borderRadius,borderEndStartRadius:0}),b(t,"".concat(a,"-button:not(").concat(o,"-btn-primary)"),b({color:e.colorTextDescription,"&:hover":{color:e.colorPrimaryHover},"&:active":{color:e.colorPrimaryActive}},"&".concat(o,"-btn-loading::before"),{insetInlineStart:0,insetInlineEnd:0,insetBlockStart:0,insetBlockEnd:0})),t))),b(r,"".concat(a,"-button"),{height:e.controlHeight,"&:hover, &:focus":{zIndex:1}}),b(r,"&-large ".concat(a,"-button"),{height:e.controlHeightLG}),b(r,"&-small ".concat(a,"-button"),{height:e.controlHeightSM}),b(r,"&-rtl",{direction:"rtl"}),b(r,"&".concat(i,"-compact-item"),(b(n={},"&:not(".concat(i,"-compact-last-item)"),b({},"".concat(i,"-group-addon"),b({},"".concat(i,"-search-button"),{marginInlineEnd:-e.lineWidth,borderRadius:0}))),b(n,"&:not(".concat(i,"-compact-first-item)"),b({},"".concat(i,",").concat(i,"-affix-wrapper"),{borderRadius:0})),b(n,"> ".concat(i,"-group-addon ").concat(i,"-search-button,\n        > ").concat(i,",\n        ").concat(i,"-affix-wrapper"),{"&:hover,&:focus,&:active":{zIndex:2}}),b(n,"> ".concat(i,"-affix-wrapper-focused"),{zIndex:2}),n)),r))};var lh=function(e){var t,n,r,i,o=e.componentCls,a=e.paddingLG,s="".concat(o,"-textarea");return b({},s,(i={position:"relative","&-show-count":(t={},b(t,"> ".concat(o),{height:"100%"}),b(t,"".concat(o,"-data-count"),{position:"absolute",bottom:-e.fontSize*e.lineHeight,insetInlineEnd:0,color:e.colorTextDescription,whiteSpace:"nowrap",pointerEvents:"none"}),t),"&-allow-clear":b({},"> ".concat(o),{paddingInlineEnd:a})},b(i,"&-affix-wrapper".concat(s,"-has-feedback"),b({},"".concat(o),{paddingInlineEnd:a})),b(i,"&-affix-wrapper".concat(o,"-affix-wrapper"),(b(r={padding:0},"> textarea".concat(o),{fontSize:"inherit",border:"none",outline:"none","&:focus":{boxShadow:"none !important"}}),b(r,"".concat(o,"-suffix"),(b(n={margin:0,"> *:not(:last-child)":{marginInline:0}},"".concat(o,"-clear-icon"),{position:"absolute",insetInlineEnd:e.paddingXS,insetBlockStart:e.paddingXS}),b(n,"".concat(s,"-suffix"),{position:"absolute",top:0,insetInlineEnd:e.inputPaddingHorizontal,bottom:0,zIndex:1,display:"inline-flex",alignItems:"center",margin:"auto",pointerEvents:"none"}),n)),r)),i))},uh=ol("Input",(function(e){var t=function(e){return nl(e,{inputAffixPadding:e.paddingXXS,inputPaddingVertical:Math.max(Math.round((e.controlHeight-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,3),inputPaddingVerticalLG:Math.ceil((e.controlHeightLG-e.fontSizeLG*e.lineHeightLG)/2*10)/10-e.lineWidth,inputPaddingVerticalSM:Math.max(Math.round((e.controlHeightSM-e.fontSize*e.lineHeight)/2*10)/10-e.lineWidth,0),inputPaddingHorizontal:e.paddingSM-e.lineWidth,inputPaddingHorizontalSM:e.paddingXS-e.lineWidth,inputPaddingHorizontalLG:e.controlPaddingHorizontal-e.lineWidth,inputBorderHoverColor:e.colorPrimaryHover,inputBorderActiveColor:e.colorPrimaryHover})}(e);return[ih(t),lh(t),oh(t),ah(t),sh(t),Bl(t)]})),ch=function(e){var t,n=(0,a.useContext)(Lo),r=n.getPrefixCls,i=n.direction,o=e.prefixCls,s=e.className,l=void 0===s?"":s,u=r("input-group",o),c=r("input"),h=Pt(uh(c),2),d=h[0],f=h[1],p=Ko()(u,(b(t={},"".concat(u,"-lg"),"large"===e.size),b(t,"".concat(u,"-sm"),"small"===e.size),b(t,"".concat(u,"-compact"),e.compact),b(t,"".concat(u,"-rtl"),"rtl"===i),t),f,l),v=(0,a.useContext)(ec),m=(0,a.useMemo)((function(){return Object.assign(Object.assign({},v),{isFormItemInput:!1})}),[v]);return d(a.createElement("span",{className:p,style:e.style,onMouseEnter:e.onMouseEnter,onMouseLeave:e.onMouseLeave,onFocus:e.onFocus,onBlur:e.onBlur},a.createElement(ec.Provider,{value:m},e.children)))};function hh(e){return!(!e.addonBefore&&!e.addonAfter)}function dh(e){return!!(e.prefix||e.suffix||e.allowClear)}function fh(e,t,n,r){if(n){var i=t;if("click"===t.type){var o=e.cloneNode(!0);return i=Object.create(t,{target:{value:o},currentTarget:{value:o}}),o.value="",void n(i)}if(void 0!==r)return i=Object.create(t,{target:{value:e},currentTarget:{value:e}}),e.value=r,void n(i);n(i)}}function ph(e){return"undefined"===typeof e||null===e?"":String(e)}var vh=function(e){var t,n,r=e.inputElement,i=e.prefixCls,o=e.prefix,s=e.suffix,l=e.addonBefore,u=e.addonAfter,h=e.className,d=e.style,f=e.disabled,p=e.readOnly,v=e.focused,m=e.triggerFocus,g=e.allowClear,y=e.value,_=e.handleReset,x=e.hidden,E=e.classes,w=e.classNames,T=e.dataAttrs,S=e.styles,k=(0,a.useRef)(null),C=(0,a.cloneElement)(r,{value:y,hidden:x,className:Ko()(null===(t=r.props)||void 0===t?void 0:t.className,!dh(e)&&!hh(e)&&h)||null,style:Re(Re({},null===(n=r.props)||void 0===n?void 0:n.style),dh(e)||hh(e)?{}:d)});if(dh(e)){var A,I="".concat(i,"-affix-wrapper"),O=Ko()(I,(b(A={},"".concat(I,"-disabled"),f),b(A,"".concat(I,"-focused"),v),b(A,"".concat(I,"-readonly"),p),b(A,"".concat(I,"-input-with-clear-btn"),s&&g&&y),A),!hh(e)&&h,null===E||void 0===E?void 0:E.affixWrapper),P=(s||g)&&a.createElement("span",{className:Ko()("".concat(i,"-suffix"),null===w||void 0===w?void 0:w.suffix),style:null===S||void 0===S?void 0:S.suffix},function(){var e;if(!g)return null;var t=!f&&!p&&y,n="".concat(i,"-clear-icon"),r="object"===c(g)&&null!==g&&void 0!==g&&g.clearIcon?g.clearIcon:"\u2716";return a.createElement("span",{onClick:_,onMouseDown:function(e){return e.preventDefault()},className:Ko()(n,(e={},b(e,"".concat(n,"-hidden"),!t),b(e,"".concat(n,"-has-suffix"),!!s),e)),role:"button",tabIndex:-1},r)}(),s);C=a.createElement("span",Ut({className:O,style:hh(e)?void 0:d,hidden:!hh(e)&&x,onClick:function(e){var t;null!==(t=k.current)&&void 0!==t&&t.contains(e.target)&&(null===m||void 0===m||m())}},null===T||void 0===T?void 0:T.affixWrapper,{ref:k}),o&&a.createElement("span",{className:Ko()("".concat(i,"-prefix"),null===w||void 0===w?void 0:w.prefix),style:null===S||void 0===S?void 0:S.prefix},o),(0,a.cloneElement)(r,{value:y,hidden:null}),P)}if(hh(e)){var M="".concat(i,"-group"),R="".concat(M,"-addon"),N=Ko()("".concat(i,"-wrapper"),M,null===E||void 0===E?void 0:E.wrapper),D=Ko()("".concat(i,"-group-wrapper"),h,null===E||void 0===E?void 0:E.group);return a.createElement("span",{className:D,style:d,hidden:x},a.createElement("span",{className:N},l&&a.createElement("span",{className:R},l),(0,a.cloneElement)(C,{hidden:null}),u&&a.createElement("span",{className:R},u)))}return C};function mh(e){var t=a.useRef();t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return n}function gh(e){return void 0!==e}function yh(e,t){var n=t||{},r=n.defaultValue,i=n.value,o=n.onChange,a=n.postState,s=Pt(aa((function(){return gh(i)?i:gh(r)?"function"===typeof r?r():r:"function"===typeof e?e():e})),2),l=s[0],u=s[1],c=void 0!==i?i:l,h=a?a(c):c,d=mh(o),f=Pt(aa([c]),2),p=f[0],v=f[1];return Eu((function(){var e=p[0];l!==e&&d(l,e)}),[p]),Eu((function(){gh(i)||u(i)}),[i]),[h,mh((function(e,t){u(e,t),v([c],t)}))]}var bh=["autoComplete","onChange","onFocus","onBlur","onPressEnter","onKeyDown","prefixCls","disabled","htmlSize","className","maxLength","suffix","showCount","type","classes","classNames","styles"],_h=(0,a.forwardRef)((function(e,t){var n=e.autoComplete,r=e.onChange,i=e.onFocus,o=e.onBlur,s=e.onPressEnter,l=e.onKeyDown,u=e.prefixCls,h=void 0===u?"rc-input":u,d=e.disabled,f=e.htmlSize,p=e.className,v=e.maxLength,m=e.suffix,g=e.showCount,y=e.type,_=void 0===y?"text":y,x=e.classes,E=e.classNames,w=e.styles,T=Yn(e,bh),S=Pt(yh(e.defaultValue,{value:e.value}),2),k=S[0],C=S[1],A=Pt((0,a.useState)(!1),2),I=A[0],O=A[1],P=(0,a.useRef)(null),M=function(e){P.current&&function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}(P.current,e)};(0,a.useImperativeHandle)(t,(function(){return{focus:M,blur:function(){var e;null===(e=P.current)||void 0===e||e.blur()},setSelectionRange:function(e,t,n){var r;null===(r=P.current)||void 0===r||r.setSelectionRange(e,t,n)},select:function(){var e;null===(e=P.current)||void 0===e||e.select()},input:P.current}})),(0,a.useEffect)((function(){O((function(e){return(!e||!d)&&e}))}),[d]);var R=function(t){void 0===e.value&&C(t.target.value),P.current&&fh(P.current,t,r)},N=function(e){s&&"Enter"===e.key&&s(e),null===l||void 0===l||l(e)},D=function(e){O(!0),null===i||void 0===i||i(e)},L=function(e){O(!1),null===o||void 0===o||o(e)};return a.createElement(vh,Ut({},T,{prefixCls:h,className:p,inputElement:function(){var t=qs(e,["prefixCls","onPressEnter","addonBefore","addonAfter","prefix","suffix","allowClear","defaultValue","showCount","classes","htmlSize","styles","classNames"]);return a.createElement("input",Ut({autoComplete:n},t,{onChange:R,onFocus:D,onBlur:L,onKeyDown:N,className:Ko()(h,b({},"".concat(h,"-disabled"),d),null===E||void 0===E?void 0:E.input),style:null===w||void 0===w?void 0:w.input,ref:P,size:f,type:_}))}(),handleReset:function(e){C(""),M(),P.current&&fh(P.current,e,r)},value:ph(k),focused:I,triggerFocus:M,suffix:function(){var e=Number(v)>0;if(m||g){var t=ph(k),n=Pe(t).length,r="object"===c(g)?g.formatter({value:t,count:n,maxLength:v}):"".concat(n).concat(e?" / ".concat(v):"");return a.createElement(a.Fragment,null,!!g&&a.createElement("span",{className:Ko()("".concat(h,"-show-count-suffix"),b({},"".concat(h,"-show-count-has-suffix"),!!m),null===E||void 0===E?void 0:E.count),style:Re({},null===w||void 0===w?void 0:w.count)},r),m)}return null}(),disabled:d,classes:x,classNames:E,styles:w}))})),xh=_h;function Eh(e,t,n){var r;return Ko()((b(r={},"".concat(e,"-status-success"),"success"===t),b(r,"".concat(e,"-status-warning"),"warning"===t),b(r,"".concat(e,"-status-error"),"error"===t),b(r,"".concat(e,"-status-validating"),"validating"===t),b(r,"".concat(e,"-has-feedback"),n),r))}var wh=function(e,t){return t||e};function Th(e,t){var n=(0,a.useRef)([]),r=function(){n.current.push(setTimeout((function(){var t,n,r,i;(null===(t=e.current)||void 0===t?void 0:t.input)&&"password"===(null===(n=e.current)||void 0===n?void 0:n.input.getAttribute("type"))&&(null===(r=e.current)||void 0===r?void 0:r.input.hasAttribute("value"))&&(null===(i=e.current)||void 0===i||i.input.removeAttribute("value"))})))};return(0,a.useEffect)((function(){return t&&r(),function(){return n.current.forEach((function(e){e&&clearTimeout(e)}))}}),[]),r}var Sh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};var kh=(0,a.forwardRef)((function(e,t){var n,r,i,o=e.prefixCls,s=e.bordered,l=void 0===s||s,u=e.status,c=e.size,h=e.disabled,d=e.onBlur,f=e.onFocus,p=e.suffix,v=e.allowClear,m=e.addonAfter,g=e.addonBefore,y=e.className,_=e.rootClassName,x=e.onChange,E=e.classNames,w=Sh(e,["prefixCls","bordered","status","size","disabled","onBlur","onFocus","suffix","allowClear","addonAfter","addonBefore","className","rootClassName","onChange","classNames"]),T=a.useContext(Lo),S=T.getPrefixCls,k=T.direction,C=T.input,A=S("input",o),I=(0,a.useRef)(null),O=Pt(uh(A),2),P=O[0],M=O[1],R=yl(A,k),N=R.compactSize,D=R.compactItemClassnames,L=zo((function(e){var t;return null!==(t=null!==N&&void 0!==N?N:c)&&void 0!==t?t:e})),F=a.useContext(jo),B=null!==h&&void 0!==h?h:F,U=(0,a.useContext)(ec),H=U.status,j=U.hasFeedback,z=U.feedbackIcon,V=wh(H,u),G=function(e){return!!(e.prefix||e.suffix||e.allowClear)}(e)||!!j,W=(0,a.useRef)(G);(0,a.useEffect)((function(){G&&W.current,W.current=G}),[G]);var X,Y=Th(I,!0),K=(j||p)&&a.createElement(a.Fragment,null,p,j&&z);return"object"===typeof v&&(null===v||void 0===v?void 0:v.clearIcon)?X=v:v&&(X={clearIcon:a.createElement(js,null)}),P(a.createElement(xh,Object.assign({ref:Qo(t,I),prefixCls:A,autoComplete:null===C||void 0===C?void 0:C.autoComplete},w,{disabled:B,onBlur:function(e){Y(),null===d||void 0===d||d(e)},onFocus:function(e){Y(),null===f||void 0===f||f(e)},suffix:K,allowClear:X,className:Ko()(y,_,D),onChange:function(e){Y(),null===x||void 0===x||x(e)},addonAfter:m&&a.createElement(bl,null,a.createElement(tc,{override:!0,status:!0},m)),addonBefore:g&&a.createElement(bl,null,a.createElement(tc,{override:!0,status:!0},g)),classNames:Object.assign(Object.assign({},E),{input:Ko()((n={},b(n,"".concat(A,"-sm"),"small"===L),b(n,"".concat(A,"-lg"),"large"===L),b(n,"".concat(A,"-rtl"),"rtl"===k),b(n,"".concat(A,"-borderless"),!l),n),!G&&Eh(A,V),null===E||void 0===E?void 0:E.input,M)}),classes:{affixWrapper:Ko()((r={},b(r,"".concat(A,"-affix-wrapper-sm"),"small"===L),b(r,"".concat(A,"-affix-wrapper-lg"),"large"===L),b(r,"".concat(A,"-affix-wrapper-rtl"),"rtl"===k),b(r,"".concat(A,"-affix-wrapper-borderless"),!l),r),Eh("".concat(A,"-affix-wrapper"),V,j),M),wrapper:Ko()(b({},"".concat(A,"-group-rtl"),"rtl"===k),M),group:Ko()((i={},b(i,"".concat(A,"-group-wrapper-sm"),"small"===L),b(i,"".concat(A,"-group-wrapper-lg"),"large"===L),b(i,"".concat(A,"-group-wrapper-rtl"),"rtl"===k),b(i,"".concat(A,"-group-wrapper-disabled"),B),i),Eh("".concat(A,"-group-wrapper"),V,j),M)}})))})),Ch=kh,Ah={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},Ih=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:Ah}))};var Oh=a.forwardRef(Ih),Ph={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},Mh=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:Ph}))};var Rh=a.forwardRef(Mh),Nh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Dh=function(e){return e?a.createElement(Rh,null):a.createElement(Oh,null)},Lh={click:"onClick",hover:"onMouseOver"},Fh=a.forwardRef((function(e,t){var n=e.visibilityToggle,r=void 0===n||n,i="object"===typeof r&&void 0!==r.visible,o=Pt((0,a.useState)((function(){return!!i&&r.visible})),2),s=o[0],l=o[1],u=(0,a.useRef)(null);a.useEffect((function(){i&&l(r.visible)}),[i,r]);var c=Th(u),h=function(){e.disabled||(s&&c(),l((function(e){var t,n=!e;return"object"===typeof r&&(null===(t=r.onVisibleChange)||void 0===t||t.call(r,n)),n})))},d=e.className,f=e.prefixCls,p=e.inputPrefixCls,v=e.size,m=Nh(e,["className","prefixCls","inputPrefixCls","size"]),g=a.useContext(Lo).getPrefixCls,y=g("input",p),_=g("input-password",f),x=r&&function(t){var n,r=e.action,i=void 0===r?"click":r,o=e.iconRender,l=Lh[i]||"",u=(void 0===o?Dh:o)(s),c=(b(n={},l,h),b(n,"className","".concat(t,"-icon")),b(n,"key","passwordIcon"),b(n,"onMouseDown",(function(e){e.preventDefault()})),b(n,"onMouseUp",(function(e){e.preventDefault()})),n);return a.cloneElement(a.isValidElement(u)?u:a.createElement("span",null,u),c)}(_),E=Ko()(_,d,b({},"".concat(_,"-").concat(v),!!v)),w=Object.assign(Object.assign({},qs(m,["suffix","iconRender","visibilityToggle"])),{type:s?"text":"password",className:E,prefixCls:y,suffix:x});return v&&(w.size=v),a.createElement(Ch,Object.assign({ref:Qo(t,u)},w))}));var Bh=Fh,Uh={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M909.6 854.5L649.9 594.8C690.2 542.7 712 479 712 412c0-80.2-31.3-155.4-87.9-212.1-56.6-56.7-132-87.9-212.1-87.9s-155.5 31.3-212.1 87.9C143.2 256.5 112 331.8 112 412c0 80.1 31.3 155.5 87.9 212.1C256.5 680.8 331.8 712 412 712c67 0 130.6-21.8 182.7-62l259.7 259.6a8.2 8.2 0 0011.6 0l43.6-43.5a8.2 8.2 0 000-11.6zM570.4 570.4C528 612.7 471.8 636 412 636s-116-23.3-158.4-65.6C211.3 528 188 471.8 188 412s23.3-116.1 65.6-158.4C296 211.3 352.2 188 412 188s116.1 23.2 158.4 65.6S636 352.2 636 412s-23.3 116.1-65.6 158.4z"}}]},name:"search",theme:"outlined"},Hh=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:Uh}))};var jh=a.forwardRef(Hh),zh=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Vh=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.inputPrefixCls,s=e.className,l=e.size,u=e.suffix,c=e.enterButton,h=void 0!==c&&c,d=e.addonAfter,f=e.loading,p=e.disabled,v=e.onSearch,m=e.onChange,g=e.onCompositionStart,y=e.onCompositionEnd,_=zh(e,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),x=a.useContext(Lo),E=x.getPrefixCls,w=x.direction,T=a.useRef(!1),S=E("input-search",i),k=E("input",o),C=yl(S,w).compactSize,A=zo((function(e){var t;return null!==(t=null!==C&&void 0!==C?C:l)&&void 0!==t?t:e})),I=a.useRef(null),O=function(e){var t;document.activeElement===(null===(t=I.current)||void 0===t?void 0:t.input)&&e.preventDefault()},P=function(e){var t,n;v&&v(null===(n=null===(t=I.current)||void 0===t?void 0:t.input)||void 0===n?void 0:n.value,e)},M="boolean"===typeof h?a.createElement(jh,null):null,R="".concat(S,"-button"),N=h||{},D=N.type&&!0===N.type.__ANT_BUTTON;r=D||"button"===N.type?Js(N,Object.assign({onMouseDown:O,onClick:function(e){var t,n;null===(n=null===(t=null===N||void 0===N?void 0:N.props)||void 0===t?void 0:t.onClick)||void 0===n||n.call(t,e),P(e)},key:"enterButton"},D?{className:R,size:A}:{})):a.createElement(uu,{className:R,type:h?"primary":void 0,size:A,disabled:p,key:"enterButton",onMouseDown:O,onClick:P,loading:f,icon:M},h),d&&(r=[r,Js(d,{key:"addonAfter"})]);var L=Ko()(S,(b(n={},"".concat(S,"-rtl"),"rtl"===w),b(n,"".concat(S,"-").concat(A),!!A),b(n,"".concat(S,"-with-button"),!!h),n),s);return a.createElement(Ch,Object.assign({ref:Qo(I,t),onPressEnter:function(e){T.current||f||P(e)}},_,{size:A,onCompositionStart:function(e){T.current=!0,null===g||void 0===g||g(e)},onCompositionEnd:function(e){T.current=!1,null===y||void 0===y||y(e)},prefixCls:k,addonAfter:r,suffix:u,onChange:function(e){e&&e.target&&"click"===e.type&&v&&v(e.target.value,e),m&&m(e)},className:L,disabled:p}))}));var Gh=Vh,Wh=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some((function(e,r){return e[0]===t&&(n=r,!0)})),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(t){var n=e(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},t.prototype.set=function(t,n){var r=e(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,r=e(n,t);~r&&n.splice(r,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,r=this.__entries__;n<r.length;n++){var i=r[n];e.call(t,i[1],i[0])}},t}()}(),Xh="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,Yh="undefined"!==typeof r.g&&r.g.Math===Math?r.g:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),Kh="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(Yh):function(e){return setTimeout((function(){return e(Date.now())}),1e3/60)};var qh=["top","right","bottom","left","width","height","size","weight"],Zh="undefined"!==typeof MutationObserver,$h=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,r=!1,i=0;function o(){n&&(n=!1,e()),r&&s()}function a(){Kh(o)}function s(){var e=Date.now();if(n){if(e-i<2)return;r=!0}else n=!0,r=!1,setTimeout(a,t);i=e}return s}(this.refresh.bind(this),20)}return e.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},e.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},e.prototype.updateObservers_=function(){var e=this.observers_.filter((function(e){return e.gatherActive(),e.hasActive()}));return e.forEach((function(e){return e.broadcastActive()})),e.length>0},e.prototype.connect_=function(){Xh&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Zh?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){Xh&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=void 0===t?"":t;qh.some((function(e){return!!~n.indexOf(e)}))&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),Qh=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var i=r[n];Object.defineProperty(e,i,{value:t[i],enumerable:!1,writable:!1,configurable:!0})}return e},Jh=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||Yh},ed=ad(0,0,0,0);function td(e){return parseFloat(e)||0}function nd(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce((function(t,n){return t+td(e["border-"+n+"-width"])}),0)}function rd(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return ed;var r=Jh(e).getComputedStyle(e),i=function(e){for(var t={},n=0,r=["top","right","bottom","left"];n<r.length;n++){var i=r[n],o=e["padding-"+i];t[i]=td(o)}return t}(r),o=i.left+i.right,a=i.top+i.bottom,s=td(r.width),l=td(r.height);if("border-box"===r.boxSizing&&(Math.round(s+o)!==t&&(s-=nd(r,"left","right")+o),Math.round(l+a)!==n&&(l-=nd(r,"top","bottom")+a)),!function(e){return e===Jh(e).document.documentElement}(e)){var u=Math.round(s+o)-t,c=Math.round(l+a)-n;1!==Math.abs(u)&&(s-=u),1!==Math.abs(c)&&(l-=c)}return ad(i.left,i.top,s,l)}var id="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof Jh(e).SVGGraphicsElement}:function(e){return e instanceof Jh(e).SVGElement&&"function"===typeof e.getBBox};function od(e){return Xh?id(e)?function(e){var t=e.getBBox();return ad(0,0,t.width,t.height)}(e):rd(e):ed}function ad(e,t,n,r){return{x:e,y:t,width:n,height:r}}var sd=function(){function e(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=ad(0,0,0,0),this.target=e}return e.prototype.isActive=function(){var e=od(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},e}(),ld=function(e,t){var n=function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return Qh(a,{x:t,y:n,width:r,height:i,top:n,right:t+r,bottom:i+n,left:t}),a}(t);Qh(this,{target:e,contentRect:n})},ud=function(){function e(e,t,n){if(this.activeObservations_=[],this.observations_=new Wh,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return e.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Jh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new sd(e)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof Jh(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach((function(t){t.isActive()&&e.activeObservations_.push(t)}))},e.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map((function(e){return new ld(e.target,e.broadcastRect())}));this.callback_.call(e,t,e),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),cd="undefined"!==typeof WeakMap?new WeakMap:new Wh,hd=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=$h.getInstance(),r=new ud(t,n,this);cd.set(this,r)};["observe","unobserve","disconnect"].forEach((function(e){hd.prototype[e]=function(){var t;return(t=cd.get(this))[e].apply(t,arguments)}}));var dd="undefined"!==typeof Yh.ResizeObserver?Yh.ResizeObserver:hd,fd=new Map;var pd=new dd((function(e){e.forEach((function(e){var t,n=e.target;null===(t=fd.get(n))||void 0===t||t.forEach((function(e){return e(n)}))}))}));var vd=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"render",value:function(){return this.props.children}}]),n}(a.Component),md=a.createContext(null);function gd(e,t){var n=e.children,r=e.disabled,i=a.useRef(null),o=a.useRef(null),s=a.useContext(md),l="function"===typeof n,u=l?n(i):n,c=a.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),h=!l&&a.isValidElement(u)&&ea(u),d=h?u.ref:null,f=a.useMemo((function(){return Qo(d,i)}),[d,i]),p=function(){return Zo(i.current)||Zo(o.current)};a.useImperativeHandle(t,(function(){return p()}));var v=a.useRef(e);v.current=e;var m=a.useCallback((function(e){var t=v.current,n=t.onResize,r=t.data,i=e.getBoundingClientRect(),o=i.width,a=i.height,l=e.offsetWidth,u=e.offsetHeight,h=Math.floor(o),d=Math.floor(a);if(c.current.width!==h||c.current.height!==d||c.current.offsetWidth!==l||c.current.offsetHeight!==u){var f={width:h,height:d,offsetWidth:l,offsetHeight:u};c.current=f;var p=l===Math.round(o)?o:l,m=u===Math.round(a)?a:u,g=Re(Re({},f),{},{offsetWidth:p,offsetHeight:m});null===s||void 0===s||s(g,e,r),n&&Promise.resolve().then((function(){n(g,e)}))}}),[]);return a.useEffect((function(){var e,t,n=p();return n&&!r&&(e=n,t=m,fd.has(e)||(fd.set(e,new Set),pd.observe(e)),fd.get(e).add(t)),function(){return function(e,t){fd.has(e)&&(fd.get(e).delete(t),fd.get(e).size||(pd.unobserve(e),fd.delete(e)))}(n,m)}}),[i.current,r]),a.createElement(vd,{ref:o},h?a.cloneElement(u,{ref:f}):u)}var yd=a.forwardRef(gd);function bd(e,t){var n=e.children;return("function"===typeof n?[n]:qn(n)).map((function(n,r){var i=(null===n||void 0===n?void 0:n.key)||"".concat("rc-observer-key","-").concat(r);return a.createElement(yd,Ut({},e,{key:i,ref:0===r?t:void 0}),n)}))}var _d=a.forwardRef(bd);_d.Collection=function(e){var t=e.children,n=e.onBatchResize,r=a.useRef(0),i=a.useRef([]),o=a.useContext(md),s=a.useCallback((function(e,t,a){r.current+=1;var s=r.current;i.current.push({size:e,element:t,data:a}),Promise.resolve().then((function(){s===r.current&&(null===n||void 0===n||n(i.current),i.current=[])})),null===o||void 0===o||o(e,t,a)}),[n,o]);return a.createElement(md.Provider,{value:s},t)};var xd,Ed=_d,wd=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing","word-break","white-space"],Td={};function Sd(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;xd||((xd=document.createElement("textarea")).setAttribute("tab-index","-1"),xd.setAttribute("aria-hidden","true"),document.body.appendChild(xd)),e.getAttribute("wrap")?xd.setAttribute("wrap",e.getAttribute("wrap")):xd.removeAttribute("wrap");var i=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.getAttribute("id")||e.getAttribute("data-reactid")||e.getAttribute("name");if(t&&Td[n])return Td[n];var r=window.getComputedStyle(e),i=r.getPropertyValue("box-sizing")||r.getPropertyValue("-moz-box-sizing")||r.getPropertyValue("-webkit-box-sizing"),o=parseFloat(r.getPropertyValue("padding-bottom"))+parseFloat(r.getPropertyValue("padding-top")),a=parseFloat(r.getPropertyValue("border-bottom-width"))+parseFloat(r.getPropertyValue("border-top-width")),s={sizingStyle:wd.map((function(e){return"".concat(e,":").concat(r.getPropertyValue(e))})).join(";"),paddingSize:o,borderSize:a,boxSizing:i};return t&&n&&(Td[n]=s),s}(e,t),o=i.paddingSize,a=i.borderSize,s=i.boxSizing,l=i.sizingStyle;xd.setAttribute("style","".concat(l,";").concat("\n  min-height:0 !important;\n  max-height:none !important;\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important;\n  pointer-events: none !important;\n")),xd.value=e.value||e.placeholder||"";var u,c=void 0,h=void 0,d=xd.scrollHeight;if("border-box"===s?d+=a:"content-box"===s&&(d-=o),null!==n||null!==r){xd.value=" ";var f=xd.scrollHeight-o;null!==n&&(c=f*n,"border-box"===s&&(c=c+o+a),d=Math.max(c,d)),null!==r&&(h=f*r,"border-box"===s&&(h=h+o+a),u=d>h?"":"hidden",d=Math.min(h,d))}var p={height:d,overflowY:u,resize:"none"};return c&&(p.minHeight=c),h&&(p.maxHeight=h),p}var kd=["prefixCls","onPressEnter","defaultValue","value","autoSize","onResize","className","style","disabled","onChange","onInternalAutoSize"],Cd=a.forwardRef((function(e,t){var n=e,r=n.prefixCls,i=(n.onPressEnter,n.defaultValue),o=n.value,s=n.autoSize,l=n.onResize,u=n.className,h=n.style,d=n.disabled,f=n.onChange,p=(n.onInternalAutoSize,Yn(n,kd)),v=Pt(yh(i,{value:o,postState:function(e){return null!==e&&void 0!==e?e:""}}),2),m=v[0],g=v[1],y=a.useRef();a.useImperativeHandle(t,(function(){return{textArea:y.current}}));var _=Pt(a.useMemo((function(){return s&&"object"===c(s)?[s.minRows,s.maxRows]:[]}),[s]),2),x=_[0],E=_[1],w=!!s,T=Pt(a.useState(2),2),S=T[0],k=T[1],C=Pt(a.useState(),2),A=C[0],I=C[1],O=function(){k(0)};xu((function(){w&&O()}),[o,x,E,w]),xu((function(){if(0===S)k(1);else if(1===S){var e=Sd(y.current,!1,x,E);k(2),I(e)}else!function(){try{if(document.activeElement===y.current){var e=y.current,t=e.selectionStart,n=e.selectionEnd,r=e.scrollTop;y.current.setSelectionRange(t,n),y.current.scrollTop=r}}catch(Pv){}}()}),[S]);var P=a.useRef(),M=function(){Fa.cancel(P.current)};a.useEffect((function(){return M}),[]);var R=w?A:null,N=Re(Re({},h),R);return 0!==S&&1!==S||(N.overflowY="hidden",N.overflowX="hidden"),a.createElement(Ed,{onResize:function(e){2===S&&(null===l||void 0===l||l(e),s&&(M(),P.current=Fa((function(){O()}))))},disabled:!(s||l)},a.createElement("textarea",Ut({},p,{ref:y,style:N,className:Ko()(r,u,b({},"".concat(r,"-disabled"),d)),disabled:d,value:m,onChange:function(e){g(e.target.value),null===f||void 0===f||f(e)}})))})),Ad=Cd,Id=["defaultValue","value","onFocus","onBlur","onChange","allowClear","maxLength","onCompositionStart","onCompositionEnd","suffix","prefixCls","classes","showCount","className","style","disabled","hidden","classNames","styles","onResize"];function Od(e,t){return Pe(e||"").slice(0,t).join("")}function Pd(e,t,n,r){var i=n;return e?i=Od(n,r):Pe(t||"").length<n.length&&Pe(n||"").length>r&&(i=t),i}var Md=a.forwardRef((function(e,t){var n,r=e.defaultValue,i=e.value,o=e.onFocus,s=e.onBlur,l=e.onChange,u=e.allowClear,h=e.maxLength,d=e.onCompositionStart,f=e.onCompositionEnd,p=e.suffix,v=e.prefixCls,m=void 0===v?"rc-textarea":v,g=e.classes,y=e.showCount,_=e.className,x=e.style,E=e.disabled,w=e.hidden,T=e.classNames,S=e.styles,k=e.onResize,C=Yn(e,Id),A=Pt(yh(r,{value:i,defaultValue:r}),2),I=A[0],O=A[1],P=(0,a.useRef)(null),M=Pt(a.useState(!1),2),R=M[0],N=M[1],D=Pt(a.useState(!1),2),L=D[0],F=D[1],B=a.useRef(),U=a.useRef(0),H=Pt(a.useState(null),2),j=H[0],z=H[1],V=function(){P.current.textArea.focus()};(0,a.useImperativeHandle)(t,(function(){return{resizableTextArea:P.current,focus:V,blur:function(){P.current.textArea.blur()}}})),(0,a.useEffect)((function(){N((function(e){return!E&&e}))}),[E]);var G=Number(h)>0,W=ph(I);L||!G||null!==i&&void 0!==i||(W=Od(W,h));var X,Y=p;if(y){var K=Pe(W).length;X="object"===c(y)?y.formatter({value:W,count:K,maxLength:h}):"".concat(K).concat(G?" / ".concat(h):""),Y=a.createElement(a.Fragment,null,Y,a.createElement("span",{className:Ko()("".concat(m,"-data-count"),null===T||void 0===T?void 0:T.count),style:null===S||void 0===S?void 0:S.count},X))}var q=a.createElement(vh,{value:W,allowClear:u,handleReset:function(e){O(""),V(),fh(P.current.textArea,e,l)},suffix:Y,prefixCls:m,classes:{affixWrapper:Ko()(null===g||void 0===g?void 0:g.affixWrapper,(n={},b(n,"".concat(m,"-show-count"),y),b(n,"".concat(m,"-textarea-allow-clear"),u),n))},disabled:E,focused:R,className:_,style:Re(Re({},x),"resized"===j?{height:"auto"}:{}),dataAttrs:{affixWrapper:{"data-count":"string"===typeof X?X:void 0}},hidden:w,inputElement:a.createElement(Ad,Ut({},C,{onKeyDown:function(e){var t=C.onPressEnter,n=C.onKeyDown;"Enter"===e.key&&t&&t(e),null===n||void 0===n||n(e)},onChange:function(e){var t=e.target.value;!L&&G&&(t=Pd(e.target.selectionStart>=h+1||e.target.selectionStart===t.length||!e.target.selectionStart,I,t,h));O(t),fh(e.currentTarget,e,l,t)},onFocus:function(e){N(!0),null===o||void 0===o||o(e)},onBlur:function(e){N(!1),null===s||void 0===s||s(e)},onCompositionStart:function(e){F(!0),B.current=I,U.current=e.currentTarget.selectionStart,null===d||void 0===d||d(e)},onCompositionEnd:function(e){F(!1);var t,n=e.currentTarget.value;G&&(n=Pd(U.current>=h+1||U.current===(null===(t=B.current)||void 0===t?void 0:t.length),B.current,n,h));n!==I&&(O(n),fh(e.currentTarget,e,l,n)),null===f||void 0===f||f(e)},className:null===T||void 0===T?void 0:T.textarea,style:Re(Re({},null===S||void 0===S?void 0:S.textarea),{},{resize:null===x||void 0===x?void 0:x.resize}),disabled:E,prefixCls:m,onResize:function(e){null===k||void 0===k||k(e),null===j?z("mounted"):"mounted"===j&&z("resized")},ref:P}))});return q})),Rd=Md,Nd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Dd=(0,a.forwardRef)((function(e,t){var n,r,i=e.prefixCls,o=e.bordered,s=void 0===o||o,l=e.size,u=e.disabled,c=e.status,h=e.allowClear,d=e.showCount,f=e.classNames,p=Nd(e,["prefixCls","bordered","size","disabled","status","allowClear","showCount","classNames"]),v=a.useContext(Lo),m=v.getPrefixCls,g=v.direction,y=zo(l),_=a.useContext(jo),x=null!==u&&void 0!==u?u:_,E=a.useContext(ec),w=E.status,T=E.hasFeedback,S=E.feedbackIcon,k=wh(w,c),C=a.useRef(null);a.useImperativeHandle(t,(function(){var e;return{resizableTextArea:null===(e=C.current)||void 0===e?void 0:e.resizableTextArea,focus:function(e){var t,n;!function(e,t){if(e){e.focus(t);var n=(t||{}).cursor;if(n){var r=e.value.length;switch(n){case"start":e.setSelectionRange(0,0);break;case"end":e.setSelectionRange(r,r);break;default:e.setSelectionRange(0,r)}}}}(null===(n=null===(t=C.current)||void 0===t?void 0:t.resizableTextArea)||void 0===n?void 0:n.textArea,e)},blur:function(){var e;return null===(e=C.current)||void 0===e?void 0:e.blur()}}}));var A,I=m("input",i);"object"===typeof h&&(null===h||void 0===h?void 0:h.clearIcon)?A=h:h&&(A={clearIcon:a.createElement(js,null)});var O=Pt(uh(I),2),P=O[0],M=O[1];return P(a.createElement(Rd,Object.assign({},p,{disabled:x,allowClear:A,classes:{affixWrapper:Ko()("".concat(I,"-textarea-affix-wrapper"),(n={},b(n,"".concat(I,"-affix-wrapper-rtl"),"rtl"===g),b(n,"".concat(I,"-affix-wrapper-borderless"),!s),b(n,"".concat(I,"-affix-wrapper-sm"),"small"===y),b(n,"".concat(I,"-affix-wrapper-lg"),"large"===y),b(n,"".concat(I,"-textarea-show-count"),d),n),Eh("".concat(I,"-affix-wrapper"),k),M)},classNames:Object.assign(Object.assign({},f),{textarea:Ko()((r={},b(r,"".concat(I,"-borderless"),!s),b(r,"".concat(I,"-sm"),"small"===y),b(r,"".concat(I,"-lg"),"large"===y),r),Eh(I,k),M,null===f||void 0===f?void 0:f.textarea)}),prefixCls:I,suffix:T&&a.createElement("span",{className:"".concat(I,"-textarea-suffix")},S),showCount:d,ref:C})))})),Ld=Dd,Fd=Ch;Fd.Group=ch,Fd.Search=Gh,Fd.TextArea=Ld,Fd.Password=Bh;var Bd=Fd,Ud=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,i=e.className,o=e.duration,s=void 0===o?4.5:o,l=e.eventKey,u=e.content,c=e.closable,h=e.closeIcon,d=void 0===h?"x":h,f=e.props,p=e.onClick,v=e.onNoticeClose,m=e.times,g=Pt(a.useState(!1),2),y=g[0],_=g[1],x=function(){v(l)};a.useEffect((function(){if(!y&&s>0){var e=setTimeout((function(){x()}),1e3*s);return function(){clearTimeout(e)}}}),[s,y,m]);var E="".concat(n,"-notice");return a.createElement("div",Ut({},f,{ref:t,className:Ko()(E,i,b({},"".concat(E,"-closable"),c)),style:r,onMouseEnter:function(){_(!0)},onMouseLeave:function(){_(!1)},onClick:p}),a.createElement("div",{className:"".concat(E,"-content")},u),c&&a.createElement("a",{tabIndex:0,className:"".concat(E,"-close"),onKeyDown:function(e){"Enter"!==e.key&&"Enter"!==e.code&&e.keyCode!==Du.ENTER||x()},onClick:function(e){e.preventDefault(),e.stopPropagation(),x()}},d))})),Hd=Ud,jd=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-notification":n,i=e.container,o=e.motion,s=e.maxCount,l=e.className,u=e.style,c=e.onAllRemoved,h=Pt(a.useState([]),2),d=h[0],f=h[1],p=function(e){var t,n=d.find((function(t){return t.key===e}));null===n||void 0===n||null===(t=n.onClose)||void 0===t||t.call(n),f((function(t){return t.filter((function(t){return t.key!==e}))}))};a.useImperativeHandle(t,(function(){return{open:function(e){f((function(t){var n,r=Pe(t),i=r.findIndex((function(t){return t.key===e.key})),o=Re({},e);i>=0?(o.times=((null===(n=t[i])||void 0===n?void 0:n.times)||0)+1,r[i]=o):(o.times=0,r.push(o));return s>0&&r.length>s&&(r=r.slice(-s)),r}))},close:function(e){p(e)},destroy:function(){f([])}}}));var v=Pt(a.useState({}),2),m=v[0],g=v[1];a.useEffect((function(){var e={};d.forEach((function(t){var n=t.placement,r=void 0===n?"topRight":n;r&&(e[r]=e[r]||[],e[r].push(t))})),Object.keys(m).forEach((function(t){e[t]=e[t]||[]})),g(e)}),[d]);var y=a.useRef(!1);if(a.useEffect((function(){Object.keys(m).length>0?y.current=!0:y.current&&(null===c||void 0===c||c(),y.current=!1)}),[m]),!i)return null;var b=Object.keys(m);return(0,De.createPortal)(a.createElement(a.Fragment,null,b.map((function(e){var t=m[e].map((function(e){return{config:e,key:e.key}})),n="function"===typeof o?o(e):o;return a.createElement(es,Ut({key:e,className:Ko()(r,"".concat(r,"-").concat(e),null===l||void 0===l?void 0:l(e)),style:null===u||void 0===u?void 0:u(e),keys:t,motionAppear:!0},n,{onAllRemoved:function(){!function(e){g((function(t){var n=Re({},t);return(n[e]||[]).length||delete n[e],n}))}(e)}}),(function(e,t){var n=e.config,i=e.className,o=e.style,s=n.key,l=n.times,u=n.className,c=n.style;return a.createElement(Hd,Ut({},n,{ref:t,prefixCls:r,className:Ko()(i,u),style:Re(Re({},o),c),times:l,key:s,eventKey:s,onNoticeClose:p}))}))}))),i)}));var zd=jd,Vd=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved"],Gd=function(){return document.body},Wd=0;function Xd(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.getContainer,n=void 0===t?Gd:t,r=e.motion,i=e.prefixCls,o=e.maxCount,s=e.className,l=e.style,u=e.onAllRemoved,c=Yn(e,Vd),h=Pt(a.useState(),2),d=h[0],f=h[1],p=a.useRef(),v=a.createElement(zd,{container:d,ref:p,prefixCls:i,motion:r,maxCount:o,className:s,style:l,onAllRemoved:u}),m=Pt(a.useState([]),2),g=m[0],y=m[1],b=a.useMemo((function(){return{open:function(e){var t=function(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){t&&Object.keys(t).forEach((function(n){var r=t[n];void 0!==r&&(e[n]=r)}))})),e}(c,e);null!==t.key&&void 0!==t.key||(t.key="rc-notification-".concat(Wd),Wd+=1),y((function(e){return[].concat(Pe(e),[{type:"open",config:t}])}))},close:function(e){y((function(t){return[].concat(Pe(t),[{type:"close",key:e}])}))},destroy:function(){y((function(e){return[].concat(Pe(e),[{type:"destroy"}])}))}}}),[]);return a.useEffect((function(){f(n())})),a.useEffect((function(){p.current&&g.length&&(g.forEach((function(e){switch(e.type){case"open":p.current.open(e.config);break;case"close":p.current.close(e.key);break;case"destroy":p.current.destroy()}})),y([]))}),[g]),[b,v]}var Yd=function(e){var t,n,r=e.componentCls,i=e.iconCls,o=e.boxShadow,a=e.colorText,s=e.colorSuccess,l=e.colorError,u=e.colorWarning,c=e.colorInfo,h=e.fontSizeLG,d=e.motionEaseInOutCirc,f=e.motionDurationSlow,p=e.marginXS,v=e.paddingXS,m=e.borderRadiusLG,g=e.zIndexPopup,y=e.contentPadding,_=e.contentBg,x="".concat(r,"-notice"),E=new Un("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:v,transform:"translateY(0)",opacity:1}}),w=new Un("MessageMoveOut",{"0%":{maxHeight:e.height,padding:v,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),T=(b(t={padding:v,textAlign:"center"},"".concat(r,"-custom-content > ").concat(i),{verticalAlign:"text-bottom",marginInlineEnd:p,fontSize:h}),b(t,"".concat(x,"-content"),{display:"inline-block",padding:y,background:_,borderRadius:m,boxShadow:o,pointerEvents:"all"}),b(t,"".concat(r,"-success > ").concat(i),{color:s}),b(t,"".concat(r,"-error > ").concat(i),{color:l}),b(t,"".concat(r,"-warning > ").concat(i),{color:u}),b(t,"".concat(r,"-info > ").concat(i,",\n      ").concat(r,"-loading > ").concat(i),{color:c}),t);return[b({},r,Object.assign(Object.assign({},as(e)),(n={color:a,position:"fixed",top:p,width:"100%",pointerEvents:"none",zIndex:g},b(n,"".concat(r,"-move-up"),{animationFillMode:"forwards"}),b(n,"\n        ".concat(r,"-move-up-appear,\n        ").concat(r,"-move-up-enter\n      "),{animationName:E,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d}),b(n,"\n        ".concat(r,"-move-up-appear").concat(r,"-move-up-appear-active,\n        ").concat(r,"-move-up-enter").concat(r,"-move-up-enter-active\n      "),{animationPlayState:"running"}),b(n,"".concat(r,"-move-up-leave"),{animationName:w,animationDuration:f,animationPlayState:"paused",animationTimingFunction:d}),b(n,"".concat(r,"-move-up-leave").concat(r,"-move-up-leave-active"),{animationPlayState:"running"}),b(n,"&-rtl",{direction:"rtl",span:{direction:"rtl"}}),n))),b({},r,b({},x,Object.assign({},T))),b({},"".concat(r,"-notice-pure-panel"),Object.assign(Object.assign({},T),{padding:0,textAlign:"start"}))]},Kd=ol("Message",(function(e){var t=nl(e,{height:150});return[Yd(t)]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+10,contentBg:e.colorBgElevated,contentPadding:"".concat((e.controlHeightLG-e.fontSize*e.lineHeight)/2,"px ").concat(e.paddingSM,"px")}})),qd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Zd={info:a.createElement(Ys,null),success:a.createElement(Bs,null),error:a.createElement(js,null),warning:a.createElement(Gs,null),loading:a.createElement(Tl,null)};function $d(e){var t=e.prefixCls,n=e.type,r=e.icon,i=e.children;return a.createElement("div",{className:Ko()("".concat(t,"-custom-content"),"".concat(t,"-").concat(n))},r||Zd[n],a.createElement("span",null,i))}function Qd(e){var t,n=new Promise((function(n){t=e((function(){n(!0)}))})),r=function(){null===t||void 0===t||t()};return r.then=function(e,t){return n.then(e,t)},r.promise=n,r}var Jd=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ef=a.forwardRef((function(e,t){var n=e.top,r=e.prefixCls,i=e.getContainer,o=e.maxCount,s=e.duration,l=void 0===s?3:s,u=e.rtl,c=e.transitionName,h=e.onAllRemoved,d=a.useContext(Lo),f=d.getPrefixCls,p=d.getPopupContainer,v=r||f("message"),m=Pt(Kd(v),2)[1],g=a.createElement("span",{className:"".concat(v,"-close-x")},a.createElement(oc,{className:"".concat(v,"-close-icon")})),y=Xd({prefixCls:v,style:function(){return{left:"50%",transform:"translateX(-50%)",top:null!==n&&void 0!==n?n:8}},className:function(){return Ko()(m,u?"".concat(v,"-rtl"):"")},motion:function(){return function(e,t){return{motionName:null!==t&&void 0!==t?t:"".concat(e,"-move-up")}}(v,c)},closable:!1,closeIcon:g,duration:l,getContainer:function(){return(null===i||void 0===i?void 0:i())||(null===p||void 0===p?void 0:p())||document.body},maxCount:o,onAllRemoved:h}),b=Pt(y,2),_=b[0],x=b[1];return a.useImperativeHandle(t,(function(){return Object.assign(Object.assign({},_),{prefixCls:v,hashId:m})})),x})),tf=0;function nf(e){var t=a.useRef(null),n=a.useMemo((function(){var e=function(e){var n;null===(n=t.current)||void 0===n||n.close(e)},n=function(n){if(!t.current){var r=function(){};return r.then=function(){},r}var i=t.current,o=i.open,s=i.prefixCls,l=i.hashId,u="".concat(s,"-notice"),c=n.content,h=n.icon,d=n.type,f=n.key,p=n.className,v=n.onClose,m=Jd(n,["content","icon","type","key","className","onClose"]),g=f;return void 0!==g&&null!==g||(g="antd-message-".concat(tf+=1)),Qd((function(t){return o(Object.assign(Object.assign({},m),{key:g,content:a.createElement($d,{prefixCls:s,type:d,icon:h},c),placement:"top",className:Ko()(d&&"".concat(u,"-").concat(d),l,p),onClose:function(){null===v||void 0===v||v(),t()}})),function(){e(g)}}))},r={open:n,destroy:function(n){var r;void 0!==n?e(n):null===(r=t.current)||void 0===r||r.destroy()}};return["info","success","warning","error","loading"].forEach((function(e){r[e]=function(t,r,i){var o,a,s;o=t&&"object"===typeof t&&"content"in t?t:{content:t},"function"===typeof r?s=r:(a=r,s=i);var l=Object.assign(Object.assign({onClose:s,duration:a},o),{type:e});return n(l)}})),r}),[]);return[n,a.createElement(ef,Object.assign({key:"message-holder"},e,{ref:t}))]}var rf=null,of=function(e){return e()},af=[],sf={};var lf=a.forwardRef((function(e,t){var n=function(){var e=function(){var e=sf,t=e.prefixCls,n=e.getContainer,r=e.duration,i=e.rtl,o=e.maxCount,a=e.top;return{prefixCls:null!==t&&void 0!==t?t:ms().getPrefixCls("message"),container:(null===n||void 0===n?void 0:n())||document.body,duration:r,rtl:i,maxCount:o,top:a}}(),t=e.prefixCls,n=e.container;return{prefixCls:t,getContainer:function(){return n},maxCount:e.maxCount,duration:e.duration,rtl:e.rtl,top:e.top}},r=Pt(a.useState(n),2),i=r[0],o=r[1],s=Pt(nf(i),2),l=s[0],u=s[1],c=ms(),h=c.getRootPrefixCls(),d=c.getIconPrefixCls(),f=function(){o(n)};return a.useEffect(f,[]),a.useImperativeHandle(t,(function(){var e=Object.assign({},l);return Object.keys(e).forEach((function(t){e[t]=function(){return f(),l[t].apply(l,arguments)}})),{instance:e,sync:f}})),a.createElement(bs,{prefixCls:h,iconPrefixCls:d},u)}));function uf(){if(!rf){var e=document.createDocumentFragment(),t={fragment:e};return rf=t,void of((function(){ze(a.createElement(lf,{ref:function(e){var n=e||{},r=n.instance,i=n.sync;Promise.resolve().then((function(){!t.instance&&r&&(t.instance=r,t.sync=i,uf())}))}}),e)}))}rf.instance&&(af.forEach((function(e){var t=e.type;if(!e.skipped)switch(t){case"open":of((function(){var t=rf.instance.open(Object.assign(Object.assign({},sf),e.config));null===t||void 0===t||t.then(e.resolve),e.setCloseFn(t)}));break;case"destroy":of((function(){null===rf||void 0===rf||rf.instance.destroy(e.key)}));break;default:of((function(){var n,r=(n=rf.instance)[t].apply(n,Pe(e.args));null===r||void 0===r||r.then(e.resolve),e.setCloseFn(r)}))}})),af=[])}var cf={open:function(e){var t=Qd((function(t){var n,r={type:"open",config:e,resolve:t,setCloseFn:function(e){n=e}};return af.push(r),function(){n?of((function(){n()})):r.skipped=!0}}));return uf(),t},destroy:function(e){af.push({type:"destroy",key:e}),uf()},config:function(e){sf=Object.assign(Object.assign({},sf),e),of((function(){var e;null===(e=null===rf||void 0===rf?void 0:rf.sync)||void 0===e||e.call(rf)}))},useMessage:function(e){return nf(e)},_InternalPanelDoNotUseOrYouWillBeFired:function(e){var t=e.prefixCls,n=e.className,r=e.type,i=e.icon,o=e.content,s=qd(e,["prefixCls","className","type","icon","content"]),l=a.useContext(Lo).getPrefixCls,u=t||l("message"),c=Pt(Kd(u),2)[1];return a.createElement(Hd,Object.assign({},s,{prefixCls:u,className:Ko()(n,c,"".concat(u,"-notice-pure-panel")),eventKey:"pure",duration:null,content:a.createElement($d,{prefixCls:u,type:r,icon:i},o)}))}},hf=cf;["success","info","warning","error","loading"].forEach((function(e){hf[e]=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return function(e,t){var n=Qd((function(n){var r,i={type:e,args:t,resolve:n,setCloseFn:function(e){r=e}};return af.push(i),function(){r?of((function(){r()})):i.skipped=!0}}));return uf(),n}(e,n)}}));var df=hf,ff=r(6417),pf=Zc.confirm,vf=function(e){return e.open="open",e.success="success",e.error="error",e.info="info",e.warning="warning",e.warn="warn",e}({}),mf=function(e){return e.success="success",e.error="error",e.info="info",e.warning="warning",e}({}),gf=function(e){return e.success="success",e.error="error",e.info="info",e.warning="warning",e}({}),yf=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.renameInputRef=(0,a.createRef)(),r.onRenameChange=function(e){var t=e.target.value,n=r.state.rename;if(n&&n.updateHandle){var i=n.updateHandle(t,n.defaultValue||"");i!==n.warning&&(n.warning=i,r.setState({rename:n}))}},r.onRenameOk=function(e){var t=r.renameInputRef.current.input.value,n=r.state.rename;n&&n.okHandle&&n.okHandle(t,n.defaultValue||""),r.setState({showRename:!1,rename:void 0})},r.onRenameCancel=function(e){r.setState({showRename:!1,rename:void 0})},r.state={showRename:!1},n._instance=g(r),r}return f(n,[{key:"render",value:function(){var e=this.state.rename;if(e){var t=!!e.warning;return(0,ff.jsx)("div",{className:"popup",ref:"popup",style:{overflow:"visible",position:"absolute",pointerEvents:"none",zIndex:199},children:(0,ff.jsxs)(Zc,{open:this.state.showRename,title:e.title,onOk:this.onRenameOk,onCancel:this.onRenameCancel,okButtonProps:{disabled:t},children:[(0,ff.jsx)(Bd,{placeholder:e.placeholder,ref:this.renameInputRef,defaultValue:e.defaultValue,onChange:this.onRenameChange}),(0,ff.jsx)("p",{style:{color:"#AA0000"},children:e.warning})]})})}return(0,ff.jsx)("div",{})}},{key:"info",value:function(e,t){df.info(e,t)}},{key:"success",value:function(e,t){df.success(e,t)}},{key:"error",value:function(e,t){df.error(e,t)}},{key:"warning",value:function(e,t){df.warning(e,t)}},{key:"warn",value:function(e,t){df.warning(e,t)}},{key:"loading",value:function(e,t){df.loading(e,t)}},{key:"noticication",value:function(e,t){arguments.length>2&&void 0!==arguments[2]||vf.open}},{key:"alert",value:function(e,t){arguments.length>2&&void 0!==arguments[2]||mf.info}},{key:"confirm",value:function(e,t,n,r,i,o){pf({title:e,content:t,okText:n,cancelText:r,onOk:function(){i&&i()},onCancel:function(){o&&o()}})}},{key:"rename",value:function(e){var t={title:e,placeholder:arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",warning:"",defaultValue:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",updateHandle:arguments.length>4?arguments[4]:void 0,okHandle:arguments.length>3?arguments[3]:void 0};this.setState({showRename:!0,rename:t})}}],[{key:"message",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gf.info,r=arguments.length>2?arguments[2]:void 0;n._instance[t](e,r)}},{key:"info",value:function(e,t){n._instance.info(e,t)}},{key:"success",value:function(e,t){n._instance.success(e,t)}},{key:"error",value:function(e,t){n._instance.error(e,t)}},{key:"warning",value:function(e,t){n._instance.warning(e,t)}},{key:"warn",value:function(e,t){n._instance.warn(e,t)}},{key:"loading",value:function(e,t){n._instance.loading(e,t)}},{key:"noticication",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vf.open,i=arguments.length>3?arguments[3]:void 0;n._instance.noticication(e,t,r,i)}},{key:"alert",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:mf.info;n._instance.alert(e,t,r)}},{key:"confirm",value:function(e,t,r,i,o,a){n._instance.confirm(e,t,r,i,o,a)}},{key:"rename",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;n._instance.rename(e,t,r,i,o)}}]),n}(a.Component);yf._instance=void 0;var bf=Math.abs,_f=Math.cos,xf=Math.sin,Ef=Math.acos,wf=Math.atan2,Tf=Math.sqrt,Sf=Math.pow;function kf(e){return e<0?-Sf(-e,1/3):Sf(e,1/3)}var Cf=Math.PI,Af=2*Cf,If=Cf/2,Of=Number.MAX_SAFE_INTEGER||9007199254740991,Pf=Number.MIN_SAFE_INTEGER||-9007199254740991,Mf={x:0,y:0,z:0},Rf={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){var n=t(e),r=n.x*n.x+n.y*n.y;return"undefined"!==typeof n.z&&(r+=n.z*n.z),Tf(r)},compute:function(e,t,n){if(0===e)return t[0].t=0,t[0];var r=t.length-1;if(1===e)return t[r].t=1,t[r];var i=1-e,o=t;if(0===r)return t[0].t=e,t[0];if(1===r){var a={x:i*o[0].x+e*o[1].x,y:i*o[0].y+e*o[1].y,t:e};return n&&(a.z=i*o[0].z+e*o[1].z),a}if(r<4){var s,l,u,c=i*i,h=e*e,d=0;2===r?(o=[o[0],o[1],o[2],Mf],s=c,l=i*e*2,u=h):3===r&&(s=c*i,l=c*e*3,u=i*h*3,d=e*h);var f={x:s*o[0].x+l*o[1].x+u*o[2].x+d*o[3].x,y:s*o[0].y+l*o[1].y+u*o[2].y+d*o[3].y,t:e};return n&&(f.z=s*o[0].z+l*o[1].z+u*o[2].z+d*o[3].z),f}for(var p=JSON.parse(JSON.stringify(t));p.length>1;){for(var v=0;v<p.length-1;v++)p[v]={x:p[v].x+(p[v+1].x-p[v].x)*e,y:p[v].y+(p[v+1].y-p[v].y)*e},"undefined"!==typeof p[v].z&&(p[v].z=p[v].z+(p[v+1].z-p[v].z)*e);p.splice(p.length-1,1)}return p[0].t=e,p[0]},computeWithRatios:function(e,t,n,r){var i,o=1-e,a=n,s=t,l=a[0],u=a[1],c=a[2],h=a[3];return l*=o,u*=e,2===s.length?(i=l+u,{x:(l*s[0].x+u*s[1].x)/i,y:(l*s[0].y+u*s[1].y)/i,z:!!r&&(l*s[0].z+u*s[1].z)/i,t:e}):(l*=o,u*=2*o,c*=e*e,3===s.length?(i=l+u+c,{x:(l*s[0].x+u*s[1].x+c*s[2].x)/i,y:(l*s[0].y+u*s[1].y+c*s[2].y)/i,z:!!r&&(l*s[0].z+u*s[1].z+c*s[2].z)/i,t:e}):(l*=o,u*=1.5*o,c*=3*o,h*=e*e*e,4===s.length?(i=l+u+c+h,{x:(l*s[0].x+u*s[1].x+c*s[2].x+h*s[3].x)/i,y:(l*s[0].y+u*s[1].y+c*s[2].y+h*s[3].y)/i,z:!!r&&(l*s[0].z+u*s[1].z+c*s[2].z+h*s[3].z)/i,t:e}):void 0))},derive:function(e,t){for(var n=[],r=e,i=r.length,o=i-1;i>1;i--,o--){for(var a,s=[],l=0;l<o;l++)a={x:o*(r[l+1].x-r[l].x),y:o*(r[l+1].y-r[l].y)},t&&(a.z=o*(r[l+1].z-r[l].z)),s.push(a);n.push(s),r=s}return n},between:function(e,t,n){return t<=e&&e<=n||Rf.approximately(e,t)||Rf.approximately(e,n)},approximately:function(e,t,n){return bf(e-t)<=(n||1e-6)},length:function(e){for(var t,n=Rf.Tvalues.length,r=0,i=0;i<n;i++)t=.5*Rf.Tvalues[i]+.5,r+=Rf.Cvalues[i]*Rf.arcfn(t,e);return.5*r},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},lerp:function(e,t,n){var r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return void 0!==t.z&&void 0!==n.z&&(r.z=t.z+e*(n.z-t.z)),r},pointToString:function(e){var t=e.x+"/"+e.y;return"undefined"!==typeof e.z&&(t+="/"+e.z),t},pointsToString:function(e){return"["+e.map(Rf.pointToString).join(", ")+"]"},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,o=n.x-e.x,a=n.y-e.y;return wf(r*a-i*o,r*o+i*a)},round:function(e,t){var n=""+e,r=n.indexOf(".");return parseFloat(n.substring(0,r+1+t))},dist:function(e,t){var n=e.x-t.x,r=e.y-t.y;return Tf(n*n+r*r)},closest:function(e,t){var n,r,i=Sf(2,63);return e.forEach((function(e,o){(r=Rf.dist(t,e))<i&&(i=r,n=o)})),{mdist:i,mpos:n}},abcratio:function(e,t){if(2!==t&&3!==t)return!1;if("undefined"===typeof e)e=.5;else if(0===e||1===e)return e;var n=Sf(e,t)+Sf(1-e,t);return bf((n-1)/n)},projectionratio:function(e,t){if(2!==t&&3!==t)return!1;if("undefined"===typeof e)e=.5;else if(0===e||1===e)return e;var n=Sf(1-e,t);return n/(Sf(e,t)+n)},lli8:function(e,t,n,r,i,o,a,s){var l=(e-n)*(o-s)-(t-r)*(i-a);return 0!=l&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,y:((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l}},lli4:function(e,t,n,r){var i=e.x,o=e.y,a=t.x,s=t.y,l=n.x,u=n.y,c=r.x,h=r.y;return Rf.lli8(i,o,a,s,l,u,c,h)},lli:function(e,t){return Rf.lli4(e,e.c,t,t.c)},makeline:function(e,t){return new Vf(e.x,e.y,(e.x+t.x)/2,(e.y+t.y)/2,t.x,t.y)},findbbox:function(e){var t=Of,n=Of,r=Pf,i=Pf;return e.forEach((function(e){var o=e.bbox();t>o.x.min&&(t=o.x.min),n>o.y.min&&(n=o.y.min),r<o.x.max&&(r=o.x.max),i<o.y.max&&(i=o.y.max)})),{x:{min:t,mid:(t+r)/2,max:r,size:r-t},y:{min:n,mid:(n+i)/2,max:i,size:i-n}}},shapeintersections:function(e,t,n,r,i){if(!Rf.bboxoverlap(t,r))return[];var o=[],a=[e.startcap,e.forward,e.back,e.endcap],s=[n.startcap,n.forward,n.back,n.endcap];return a.forEach((function(t){t.virtual||s.forEach((function(r){if(!r.virtual){var a=t.intersects(r,i);a.length>0&&(a.c1=t,a.c2=r,a.s1=e,a.s2=n,o.push(a))}}))})),o},makeshape:function(e,t,n){var r=t.points.length,i=e.points.length,o=Rf.makeline(t.points[r-1],e.points[0]),a=Rf.makeline(e.points[i-1],t.points[0]),s={startcap:o,forward:e,back:t,endcap:a,bbox:Rf.findbbox([o,e,t,a]),intersections:function(e){return Rf.shapeintersections(s,s.bbox,e,e.bbox,n)}};return s},getminmax:function(e,t,n){if(!n)return{min:0,max:0};var r,i,o=Of,a=Pf;-1===n.indexOf(0)&&(n=[0].concat(n)),-1===n.indexOf(1)&&n.push(1);for(var s=0,l=n.length;s<l;s++)r=n[s],(i=e.get(r))[t]<o&&(o=i[t]),i[t]>a&&(a=i[t]);return{min:o,mid:(o+a)/2,max:a,size:a-o}},align:function(e,t){var n=t.p1.x,r=t.p1.y,i=-wf(t.p2.y-r,t.p2.x-n);return e.map((function(e){return{x:(e.x-n)*_f(i)-(e.y-r)*xf(i),y:(e.x-n)*xf(i)+(e.y-r)*_f(i)}}))},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=e.length-1,r=Rf.align(e,t),i=function(e){return 0<=e&&e<=1};if(2===n){var o=r[0].y,a=r[1].y,s=r[2].y,l=o-2*a+s;if(0!==l){var u=-Tf(a*a-o*s),c=-o+a;return[-(u+c)/l,-(-u+c)/l].filter(i)}return a!==s&&0===l?[(2*a-s)/(2*a-2*s)].filter(i):[]}var h=r[0].y,d=r[1].y,f=r[2].y,p=3*d-h-3*f+r[3].y,v=3*h-6*d+3*f,m=-3*h+3*d,g=h;if(Rf.approximately(p,0)){if(Rf.approximately(v,0))return Rf.approximately(m,0)?[]:[-g/m].filter(i);var y=Tf(m*m-4*v*g),b=2*v;return[(y-m)/b,(-m-y)/b].filter(i)}var _,x=(3*(m/=p)-(v/=p)*v)/3,E=x/3,w=(2*v*v*v-9*v*m+27*(g/=p))/27,T=w/2,S=T*T+E*E*E;if(S<0){var k=-x/3,C=Tf(k*k*k),A=-w/(2*C),I=Ef(A<-1?-1:A>1?1:A),O=2*kf(C);return[O*_f(I/3)-v/3,O*_f((I+Af)/3)-v/3,O*_f((I+2*Af)/3)-v/3].filter(i)}if(0===S)return[2*(_=T<0?kf(-T):-kf(T))-v/3,-_-v/3].filter(i);var P=Tf(S);return[(_=kf(-T+P))-kf(T+P)-v/3].filter(i)},droots:function(e){if(3===e.length){var t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0!==i){var o=-Tf(n*n-t*r),a=-t+n;return[-(o+a)/i,-(-o+a)/i]}return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[]}if(2===e.length){var s=e[0],l=e[1];return s!==l?[s/(s-l)]:[]}return[]},curvature:function(e,t,n,r,i){var o,a,s,l,u,c,h=Rf.compute(e,t),d=Rf.compute(e,n),f=h.x*h.x+h.y*h.y;if(r?(o=Tf(Sf(h.y*d.z-d.y*h.z,2)+Sf(h.z*d.x-d.z*h.x,2)+Sf(h.x*d.y-d.x*h.y,2)),a=Sf(f+h.z*h.z,1.5)):(o=h.x*d.y-h.y*d.x,a=Sf(f,1.5)),0===o||0===a)return{k:0,r:0};if(u=o/a,c=a/o,!i){var p=Rf.curvature(e-.001,t,n,r,!0).k,v=Rf.curvature(e+.001,t,n,r,!0).k;l=(v-u+(u-p))/2,s=(bf(v-u)+bf(u-p))/2}return{k:u,r:c,dk:l,adk:s}},inflections:function(e){if(e.length<4)return[];var t=Rf.align(e,{p1:e[0],p2:e.slice(-1)[0]}),n=t[2].x*t[1].y,r=t[3].x*t[1].y,i=t[1].x*t[2].y,o=18*(-3*n+2*r+3*i-t[3].x*t[2].y),a=18*(3*n-r-3*i),s=18*(i-n);if(Rf.approximately(o,0)){if(!Rf.approximately(a,0)){var l=-s/a;if(0<=l&&l<=1)return[l]}return[]}var u=2*o;if(Rf.approximately(u,0))return[];var c=a*a-4*o*s;if(c<0)return[];var h=Math.sqrt(c);return[(h-a)/u,-(a+h)/u].filter((function(e){return 0<=e&&e<=1}))},bboxoverlap:function(e,t){for(var n,r,i,o,a=["x","y"],s=a.length,l=0;l<s;l++)if(r=e[n=a[l]].mid,i=t[n].mid,o=(e[n].size+t[n].size)/2,bf(r-i)>=o)return!1;return!0},expandbox:function(e,t){t.x.min<e.x.min&&(e.x.min=t.x.min),t.y.min<e.y.min&&(e.y.min=t.y.min),t.z&&t.z.min<e.z.min&&(e.z.min=t.z.min),t.x.max>e.x.max&&(e.x.max=t.x.max),t.y.max>e.y.max&&(e.y.max=t.y.max),t.z&&t.z.max>e.z.max&&(e.z.max=t.z.max),e.x.mid=(e.x.min+e.x.max)/2,e.y.mid=(e.y.min+e.y.max)/2,e.z&&(e.z.mid=(e.z.min+e.z.max)/2),e.x.size=e.x.max-e.x.min,e.y.size=e.y.max-e.y.min,e.z&&(e.z.size=e.z.max-e.z.min)},pairiteration:function(e,t,n){var r=e.bbox(),i=t.bbox(),o=1e5,a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(o*(e._t1+e._t2)/2|0)/o+"/"+(o*(t._t1+t._t2)/2|0)/o];var s=e.split(.5),l=t.split(.5),u=[{left:s.left,right:l.left},{left:s.left,right:l.right},{left:s.right,right:l.right},{left:s.right,right:l.left}];u=u.filter((function(e){return Rf.bboxoverlap(e.left.bbox(),e.right.bbox())}));var c=[];return 0===u.length||(u.forEach((function(e){c=c.concat(Rf.pairiteration(e.left,e.right,a))})),c=c.filter((function(e,t){return c.indexOf(e)===t}))),c},getccenter:function(e,t,n){var r,i=t.x-e.x,o=t.y-e.y,a=n.x-t.x,s=n.y-t.y,l=i*_f(If)-o*xf(If),u=i*xf(If)+o*_f(If),c=a*_f(If)-s*xf(If),h=a*xf(If)+s*_f(If),d=(e.x+t.x)/2,f=(e.y+t.y)/2,p=(t.x+n.x)/2,v=(t.y+n.y)/2,m=d+l,g=f+u,y=p+c,b=v+h,_=Rf.lli8(d,f,m,g,p,v,y,b),x=Rf.dist(_,e),E=wf(e.y-_.y,e.x-_.x),w=wf(t.y-_.y,t.x-_.x),T=wf(n.y-_.y,n.x-_.x);return E<T?((E>w||w>T)&&(E+=Af),E>T&&(r=T,T=E,E=r)):T<w&&w<E?(r=T,T=E,E=r):T+=Af,_.s=E,_.e=T,_.r=x,_},numberSort:function(e,t){return e-t}},Nf=function(){function e(t){u(this,e),this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}return f(e,[{key:"valueOf",value:function(){return this.toString()}},{key:"toString",value:function(){return"["+this.curves.map((function(e){return Rf.pointsToString(e.points)})).join(", ")+"]"}},{key:"addCurve",value:function(e){this.curves.push(e),this._3d=this._3d||e._3d}},{key:"length",value:function(){return this.curves.map((function(e){return e.length()})).reduce((function(e,t){return e+t}))}},{key:"curve",value:function(e){return this.curves[e]}},{key:"bbox",value:function(){for(var e=this.curves,t=e[0].bbox(),n=1;n<e.length;n++)Rf.expandbox(t,e[n].bbox());return t}},{key:"offset",value:function(t){var n=[];return this.curves.forEach((function(e){n.push.apply(n,Pe(e.offset(t)))})),new e(n)}}]),e}(),Df=Math.abs,Lf=Math.min,Ff=Math.max,Bf=Math.cos,Uf=Math.sin,Hf=Math.acos,jf=Math.sqrt,zf=Math.PI,Vf=function(){function e(t){u(this,e);var n=t&&t.forEach?t:Array.from(arguments).slice(),r=!1;if("object"===typeof n[0]){r=n.length;var i=[];n.forEach((function(e){["x","y","z"].forEach((function(t){"undefined"!==typeof e[t]&&i.push(e[t])}))})),n=i}var o=!1,a=n.length;if(r){if(r>4){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==a&&8!==a&&9!==a&&12!==a&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var s=this._3d=!o&&(9===a||12===a)||t&&t[0]&&"undefined"!==typeof t[0].z,l=this.points=[],c=0,h=s?3:2;c<a;c+=h){var d={x:n[c],y:n[c+1]};s&&(d.z=n[c+2]),l.push(d)}var f=this.order=l.length-1,p=this.dims=["x","y"];s&&p.push("z"),this.dimlen=p.length;var v=Rf.align(l,{p1:l[0],p2:l[f]}),m=Rf.dist(l[0],l[f]);this._linear=v.reduce((function(e,t){return e+Df(t.y)}),0)<m/50,this._lut=[],this._t1=0,this._t2=1,this.update()}return f(e,[{key:"getUtils",value:function(){return e.getUtils()}},{key:"valueOf",value:function(){return this.toString()}},{key:"toString",value:function(){return Rf.pointsToString(this.points)}},{key:"toSVG",value:function(){if(this._3d)return!1;for(var e=this.points,t=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],n=1,r=e.length;n<r;n++)t.push(e[n].x),t.push(e[n].y);return t.join(" ")}},{key:"setRatios",value:function(e){if(e.length!==this.points.length)throw new Error("incorrect number of ratio values");this.ratios=e,this._lut=[]}},{key:"verify",value:function(){var e=this.coordDigest();e!==this._print&&(this._print=e,this.update())}},{key:"coordDigest",value:function(){return this.points.map((function(e,t){return""+t+e.x+e.y+(e.z?e.z:0)})).join("")}},{key:"update",value:function(){this._lut=[],this.dpoints=Rf.derive(this.points,this._3d),this.computedirection()}},{key:"computedirection",value:function(){var e=this.points,t=Rf.angle(e[0],e[this.order],e[1]);this.clockwise=t>0}},{key:"length",value:function(){return Rf.length(this.derivative.bind(this))}},{key:"getABC",value:function(t,n){n=n||this.get(t);var r=this.points[0],i=this.points[this.order];return e.getABC(this.order,r,n,i,t)}},{key:"getLUT",value:function(e){if(this.verify(),e=e||100,this._lut.length===e+1)return this._lut;this._lut=[],e++,this._lut=[];for(var t,n,r=0;r<e;r++)n=r/(e-1),(t=this.compute(n)).t=n,this._lut.push(t);return this._lut}},{key:"on",value:function(e,n){n=n||5;for(var r,i=this.getLUT(),o=[],a=0;a<i.length;a++)r=i[a],Rf.dist(r,e)<n&&(o.push(r),a/i.length);return!!o.length&&(t/=o.length)}},{key:"project",value:function(e){var t,n,r=this.getLUT(),i=r.length-1,o=Rf.closest(r,e),a=o.mpos,s=(a-1)/i,l=(a+1)/i,u=.1/i,c=o.mdist,h=s,d=h;for(c+=1;h<l+u;h+=u)t=this.compute(h),(n=Rf.dist(e,t))<c&&(c=n,d=h);return d=d<0?0:d>1?1:d,(t=this.compute(d)).t=d,t.d=c,t}},{key:"get",value:function(e){return this.compute(e)}},{key:"point",value:function(e){return this.points[e]}},{key:"compute",value:function(e){return this.ratios?Rf.computeWithRatios(e,this.points,this.ratios,this._3d):Rf.compute(e,this.points,this._3d,this.ratios)}},{key:"raise",value:function(){for(var t,n,r=this.points,i=[r[0]],o=r.length,a=1;a<o;a++)t=r[a],n=r[a-1],i[a]={x:(o-a)/o*t.x+a/o*n.x,y:(o-a)/o*t.y+a/o*n.y};return i[o]=r[o-1],new e(i)}},{key:"derivative",value:function(e){return Rf.compute(e,this.dpoints[0],this._3d)}},{key:"dderivative",value:function(e){return Rf.compute(e,this.dpoints[1],this._3d)}},{key:"align",value:function(){var t=this.points;return new e(Rf.align(t,{p1:t[0],p2:t[t.length-1]}))}},{key:"curvature",value:function(e){return Rf.curvature(e,this.dpoints[0],this.dpoints[1],this._3d)}},{key:"inflections",value:function(){return Rf.inflections(this.points)}},{key:"normal",value:function(e){return this._3d?this.__normal3(e):this.__normal2(e)}},{key:"__normal2",value:function(e){var t=this.derivative(e),n=jf(t.x*t.x+t.y*t.y);return{t:e,x:-t.y/n,y:t.x/n}}},{key:"__normal3",value:function(e){var t=this.derivative(e),n=this.derivative(e+.01),r=jf(t.x*t.x+t.y*t.y+t.z*t.z),i=jf(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=i,n.y/=i,n.z/=i;var o={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},a=jf(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=a,o.y/=a,o.z/=a;var s=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{t:e,x:s[0]*t.x+s[1]*t.y+s[2]*t.z,y:s[3]*t.x+s[4]*t.y+s[5]*t.z,z:s[6]*t.x+s[7]*t.y+s[8]*t.z}}},{key:"hull",value:function(e){var t=this.points,n=[],r=[],i=0;for(r[i++]=t[0],r[i++]=t[1],r[i++]=t[2],3===this.order&&(r[i++]=t[3]);t.length>1;){n=[];for(var o,a=0,s=t.length-1;a<s;a++)o=Rf.lerp(e,t[a],t[a+1]),r[i++]=o,n.push(o);t=n}return r}},{key:"split",value:function(t,n){if(0===t&&n)return this.split(n).left;if(1===n)return this.split(t).right;var r=this.hull(t),i={left:2===this.order?new e([r[0],r[3],r[5]]):new e([r[0],r[4],r[7],r[9]]),right:2===this.order?new e([r[5],r[4],r[2]]):new e([r[9],r[8],r[6],r[3]]),span:r};return i.left._t1=Rf.map(0,0,1,this._t1,this._t2),i.left._t2=Rf.map(t,0,1,this._t1,this._t2),i.right._t1=Rf.map(t,0,1,this._t1,this._t2),i.right._t2=Rf.map(1,0,1,this._t1,this._t2),n?(n=Rf.map(n,t,1,0,1),i.right.split(n).left):i}},{key:"extrema",value:function(){var e={},t=[];return this.dims.forEach(function(n){var r=function(e){return e[n]},i=this.dpoints[0].map(r);e[n]=Rf.droots(i),3===this.order&&(i=this.dpoints[1].map(r),e[n]=e[n].concat(Rf.droots(i))),e[n]=e[n].filter((function(e){return e>=0&&e<=1})),t=t.concat(e[n].sort(Rf.numberSort))}.bind(this)),e.values=t.sort(Rf.numberSort).filter((function(e,n){return t.indexOf(e)===n})),e}},{key:"bbox",value:function(){var e=this.extrema(),t={};return this.dims.forEach(function(n){t[n]=Rf.getminmax(this,n,e[n])}.bind(this)),t}},{key:"overlaps",value:function(e){var t=this.bbox(),n=e.bbox();return Rf.bboxoverlap(t,n)}},{key:"offset",value:function(t,n){if("undefined"!==typeof n){var r=this.get(t),i=this.normal(t),o={c:r,n:i,x:r.x+i.x*n,y:r.y+i.y*n};return this._3d&&(o.z=r.z+i.z*n),o}if(this._linear){var a=this.normal(0),s=this.points.map((function(e){var n={x:e.x+t*a.x,y:e.y+t*a.y};return e.z&&a.z&&(n.z=e.z+t*a.z),n}));return[new e(s)]}return this.reduce().map((function(e){return e._linear?e.offset(t)[0]:e.scale(t)}))}},{key:"simple",value:function(){if(3===this.order){var e=Rf.angle(this.points[0],this.points[3],this.points[1]),t=Rf.angle(this.points[0],this.points[3],this.points[2]);if(e>0&&t<0||e<0&&t>0)return!1}var n=this.normal(0),r=this.normal(1),i=n.x*r.x+n.y*r.y;return this._3d&&(i+=n.z*r.z),Df(Hf(i))<zf/3}},{key:"reduce",value:function(){var e,t,n=0,r=0,i=.01,o=[],a=[],s=this.extrema().values;for(-1===s.indexOf(0)&&(s=[0].concat(s)),-1===s.indexOf(1)&&s.push(1),n=s[0],e=1;e<s.length;e++)r=s[e],(t=this.split(n,r))._t1=n,t._t2=r,o.push(t),n=r;return o.forEach((function(e){for(n=0,r=0;r<=1;)for(r=n+i;r<=1.01;r+=i)if(!(t=e.split(n,r)).simple()){if(Df(n-(r-=i))<i)return[];(t=e.split(n,r))._t1=Rf.map(n,0,1,e._t1,e._t2),t._t2=Rf.map(r,0,1,e._t1,e._t2),a.push(t),n=r;break}n<1&&((t=e.split(n,1))._t1=Rf.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))})),a}},{key:"translate",value:function(t,n,r){r="number"===typeof r?r:n;var i=this.order,o=this.points.map((function(e,t){return(1-t/i)*n+t/i*r}));return new e(this.points.map((function(e,n){return{x:e.x+t.x*o[n],y:e.y+t.y*o[n]}})))}},{key:"scale",value:function(t){var n=this,r=this.order,i=!1;if("function"===typeof t&&(i=t),i&&2===r)return this.raise().scale(i);var o=this.clockwise,a=this.points;if(this._linear)return this.translate(this.normal(0),i?i(0):t,i?i(1):t);var s=i?i(0):t,l=i?i(1):t,u=[this.offset(0,10),this.offset(1,10)],c=[],h=Rf.lli4(u[0],u[0].c,u[1],u[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");return[0,1].forEach((function(e){var t=c[e*r]=Rf.copy(a[e*r]);t.x+=(e?l:s)*u[e].n.x,t.y+=(e?l:s)*u[e].n.y})),i?([0,1].forEach((function(e){if(2!==r||!e){var n=a[e+1],s={x:n.x-h.x,y:n.y-h.y},l=i?i((e+1)/r):t;i&&!o&&(l=-l);var u=jf(s.x*s.x+s.y*s.y);s.x/=u,s.y/=u,c[e+1]={x:n.x+l*s.x,y:n.y+l*s.y}}})),new e(c)):([0,1].forEach((function(e){if(2!==r||!e){var t=c[e*r],i=n.derivative(e),o={x:t.x+i.x,y:t.y+i.y};c[e+1]=Rf.lli4(t,o,h,a[e+1])}})),new e(c))}},{key:"outline",value:function(t,n,r,i){if(n=void 0===n?t:n,this._linear){var o,a,s=this.normal(0),l=this.points[0],u=this.points[this.points.length-1];void 0===r&&(r=t,i=n),o={x:l.x+s.x*t,y:l.y+s.y*t},a={x:u.x+s.x*r,y:u.y+s.y*r};var c=[o,{x:(o.x+a.x)/2,y:(o.y+a.y)/2},a];o={x:l.x-s.x*n,y:l.y-s.y*n};var h=[a={x:u.x-s.x*i,y:u.y-s.y*i},{x:(o.x+a.x)/2,y:(o.y+a.y)/2},o],d=Rf.makeline(h[2],c[0]),f=Rf.makeline(c[2],h[0]),p=[d,new e(c),f,new e(h)];return new Nf(p)}var v,m=this.reduce(),g=m.length,y=[],b=[],_=0,x=this.length(),E="undefined"!==typeof r&&"undefined"!==typeof i;function w(e,t,n,r,i){return function(o){var a=r/n,s=(r+i)/n,l=t-e;return Rf.map(o,0,1,e+a*l,e+s*l)}}m.forEach((function(e){var o=e.length();E?(y.push(e.scale(w(t,r,x,_,o))),b.push(e.scale(w(-n,-i,x,_,o)))):(y.push(e.scale(t)),b.push(e.scale(-n))),_+=o})),b=b.map((function(e){return(v=e.points)[3]?e.points=[v[3],v[2],v[1],v[0]]:e.points=[v[2],v[1],v[0]],e})).reverse();var T=y[0].points[0],S=y[g-1].points[y[g-1].points.length-1],k=b[g-1].points[b[g-1].points.length-1],C=b[0].points[0],A=Rf.makeline(k,T),I=Rf.makeline(S,C),O=[A].concat(y).concat([I]).concat(b);return new Nf(O)}},{key:"outlineshapes",value:function(e,t,n){t=t||e;for(var r=this.outline(e,t).curves,i=[],o=1,a=r.length;o<a/2;o++){var s=Rf.makeshape(r[o],r[a-o],n);s.startcap.virtual=o>1,s.endcap.virtual=o<a/2-1,i.push(s)}return i}},{key:"intersects",value:function(t,n){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof e&&(t=t.reduce()),this.curveintersects(this.reduce(),t,n)):this.selfintersects(n)}},{key:"lineIntersects",value:function(e){var t=this,n=Lf(e.p1.x,e.p2.x),r=Lf(e.p1.y,e.p2.y),i=Ff(e.p1.x,e.p2.x),o=Ff(e.p1.y,e.p2.y);return Rf.roots(this.points,e).filter((function(e){var a=t.get(e);return Rf.between(a.x,n,i)&&Rf.between(a.y,r,o)}))}},{key:"selfintersects",value:function(e){for(var t,n,r,i=this.reduce(),o=i.length-2,a=[],s=0;s<o;s++)n=i.slice(s,s+1),r=i.slice(s+2),t=this.curveintersects(n,r,e),a.push.apply(a,Pe(t));return a}},{key:"curveintersects",value:function(e,t,n){var r=[];e.forEach((function(e){t.forEach((function(t){e.overlaps(t)&&r.push({left:e,right:t})}))}));var i=[];return r.forEach((function(e){var t=Rf.pairiteration(e.left,e.right,n);t.length>0&&(i=i.concat(t))})),i}},{key:"arcs",value:function(e){return e=e||.5,this._iterate(e,[])}},{key:"_error",value:function(e,t,n,r){var i=(r-n)/4,o=this.get(n+i),a=this.get(r-i),s=Rf.dist(e,t),l=Rf.dist(e,o),u=Rf.dist(e,a);return Df(l-s)+Df(u-s)}},{key:"_iterate",value:function(e,t){var n,r=0,i=1;do{n=0,i=1;var o=this.get(r),a=void 0,s=void 0,l=void 0,u=void 0,c=!1,h=!1,d=void 0,f=i,p=1;do{if(h=c,u=l,f=(r+i)/2,a=this.get(f),s=this.get(i),(l=Rf.getccenter(o,a,s)).interval={start:r,end:i},c=this._error(l,o,r,i)<=e,(d=h&&!c)||(p=i),c){if(i>=1){if(l.interval.end=p=1,u=l,i>1){var v={x:l.x+l.r*Bf(l.e),y:l.y+l.r*Uf(l.e)};l.e+=Rf.angle({x:l.x,y:l.y},v,this.get(1))}break}i+=(i-r)/2}else i=f}while(!d&&n++<100);if(n>=100)break;u=u||l,t.push(u),r=p}while(i<1);return t}}],[{key:"quadraticFromPoints",value:function(t,n,r,i){if("undefined"===typeof i&&(i=.5),0===i)return new e(n,n,r);if(1===i)return new e(t,n,n);var o=e.getABC(2,t,n,r,i);return new e(t,o.A,r)}},{key:"cubicFromPoints",value:function(t,n,r,i,o){"undefined"===typeof i&&(i=.5);var a=e.getABC(3,t,n,r,i);"undefined"===typeof o&&(o=Rf.dist(n,a.C));var s=o*(1-i)/i,l=Rf.dist(t,r),u=(r.x-t.x)/l,c=(r.y-t.y)/l,h=o*u,d=o*c,f=s*u,p=s*c,v=n.x-h,m=n.y-d,g=n.x+f,y=n.y+p,b=a.A,_=b.x+(v-b.x)/(1-i),x=b.y+(m-b.y)/(1-i),E=b.x+(g-b.x)/i,w=b.y+(y-b.y)/i;return new e(t,{x:t.x+(_-t.x)/i,y:t.y+(x-t.y)/i},{x:r.x+(E-r.x)/(1-i),y:r.y+(w-r.y)/(1-i)},r)}},{key:"getUtils",value:function(){return Rf}},{key:"PolyBezier",get:function(){return Nf}},{key:"getABC",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,o=Rf.projectionratio(i,e),a=1-o,s={x:o*t.x+a*r.x,y:o*t.y+a*r.y},l=Rf.abcratio(i,e);return{A:{x:n.x+(n.x-s.x)/l,y:n.y+(n.y-s.y)/l},B:n,C:s,S:t,E:r}}}]),e}(),Gf=new Vf([0,0,0,0,1,1,1,1]);function Wf(e,t){var n=Xf(e,t);return 0===n?0:Gf.get(n).y}function Xf(e,t){if(0===t)return 0;if(4===e.length){var n={x:e[0],y:e[1]},r={x:e[2],y:e[3]},i=Gf;i.points=[{x:0,y:0},n,r,{x:1,y:1}];var o=i.lineIntersects({p1:{x:t,y:-99999},p2:{x:t,y:99999}});return 0===o.length?0:o[0]}if(e.length>4){for(var a={x:0,y:0},s={x:1,y:1},l=0,u=e.length;l<u;l+=6){var c={x:e[l],y:e[l+1]},h={x:e[l+2],y:e[l+3]};if(l+4>=u?(s.x=1,s.y=1):(s.x=e[l+4],s.y=e[l+5]),t>=a.x&&t<=s.x){var d=Gf;d.points=[a,c,h,s];var f=d.lineIntersects({p1:{x:t,y:-99999},p2:{x:t,y:99999}});return 0===f.length?0:f[0]}a.x=s.x,a.y=s.y}return 1}}function Yf(e,t){var n=Xf(e,t),r=Gf.split(n),i=r.left.points[3],o=r.left.points[2],a=r.left.points[1],s=r.right.points[1],l=r.right.points[2];return[a.x,a.y,o.x,o.y,i.x,i.y,s.x,s.y,l.x,l.y]}function Kf(e,t,n,r,i){var o={x:n.x-t.x,y:n.y-t.y},a={x:t.x-e.x,y:t.y-e.y},s=function(e){return e.x*e.x+e.y*e.y}(o),l=function(e,t){if(0===e.x){var n=Math.sqrt(t);return e.y<0&&(n=-n),{x:0,y:n}}if(0===e.y){var r=Math.sqrt(t);return e.x<0&&(r=-r),{x:r,y:0}}var i=e.x/e.y,o=Math.sqrt(t/(i*i+1));return e.y<0&&(o=-o),{x:i*o,y:o}}(a,s);if(l.x+=t.x,l.y+=t.y,l.x>r){var u=qf(t,l,r);l.x=u.x,l.y=u.y}if(l.x<i){var c=qf(t,l,i);l.x=c.x,l.y=c.y}return l}function qf(e,t,n){if(e.x===t.x)return{x:e.x,y:n};var r=(t.y-e.y)/(t.x-e.x);return{x:n,y:r*n+(e.y-r*e.x)}}var Zf=function(e){return e[e.None=0]="None",e[e.Linear=1]="Linear",e[e.EaseInQuad=2]="EaseInQuad",e[e.EaseOutQuad=3]="EaseOutQuad",e[e.EaseInOutQuad=4]="EaseInOutQuad",e[e.EaseInCubic=5]="EaseInCubic",e[e.EaseOutCubic=6]="EaseOutCubic",e[e.EaseInOutCubic=7]="EaseInOutCubic",e[e.EaseInQuart=8]="EaseInQuart",e[e.EaseOutQuart=9]="EaseOutQuart",e[e.EaseInOutQuart=10]="EaseInOutQuart",e[e.EaseInQuint=11]="EaseInQuint",e[e.EaseOutQuint=12]="EaseOutQuint",e[e.EaseInOutQuint=13]="EaseInOutQuint",e[e.EaseInSine=14]="EaseInSine",e[e.EaseOutSine=15]="EaseOutSine",e[e.EaseInOutSine=16]="EaseInOutSine",e[e.EaseInExpo=17]="EaseInExpo",e[e.EaseOutExpo=18]="EaseOutExpo",e[e.EaseInOutExpo=19]="EaseInOutExpo",e[e.EaseInCirc=20]="EaseInCirc",e[e.EaseOutCirc=21]="EaseOutCirc",e[e.EaseInOutCirc=22]="EaseInOutCirc",e[e.EaseOutBounce=23]="EaseOutBounce",e[e.EaseInBack=24]="EaseInBack",e[e.EaseOutBack=25]="EaseOutBack",e[e.EaseInOutBack=26]="EaseInOutBack",e[e.Elastic=27]="Elastic",e[e.EaseOutElastic=28]="EaseOutElastic",e[e.EaseOutElasticTmp=29]="EaseOutElasticTmp",e[e.SwingFromTo=30]="SwingFromTo",e[e.SwingFrom=31]="SwingFrom",e[e.SwingTo=32]="SwingTo",e[e.Bounce=33]="Bounce",e[e.BouncePast=34]="BouncePast",e[e.EaseFromTo=35]="EaseFromTo",e[e.EaseFrom=36]="EaseFrom",e[e.EaseTo=37]="EaseTo",e[e.Sinusoidal=38]="Sinusoidal",e[e.Reverse=39]="Reverse",e[e.Wobble=40]="Wobble",e[e.Spring=41]="Spring",e}({}),$f=2*Math.PI;Math.PI,Math.PI,Math.PI,Math.PI;function Qf(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return e+n>=t&&e-n<=t}function Jf(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.atan(r/n);return i||(i=n>0?0:-Math.PI),n<0&&r>0?i+=Math.PI:n<0&&r<0&&(i-=Math.PI),i}function ep(e,t,n){return Math.min(e.x,t.x)<=n.x&&n.x<=Math.max(e.x,t.x)&&Math.min(e.y,t.y)<=n.y&&n.y<=Math.max(e.y,t.y)}function tp(e,t,n){return(e.x-n.x)*(e.y-t.y)-(e.y-n.y)*(e.x-t.x)}function np(e){return(e=(e=(e+Math.PI)%(2*Math.PI))>0?e:2*Math.PI+e)-Math.PI}function rp(e){for(var t=e.toString(16);t.length<2;)t="0"+t;return t}function ip(e){return"string"!==typeof e?[0,0,0,1]:[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),parseInt(e.substr(7,2),16)]}function op(e){return"#"+rp(e[0])+rp(e[1])+rp(e[2])+rp(e[3])}function ap(e){return[e>>16&255,e>>8&255,e>>0&255]}function sp(e){return[e>>24&255,e>>16&255,e>>8&255,e>>0&255]}function lp(e){return 65536*e[0]+256*e[1]+e[2]}function up(e){var t=e.a*e.d-e.b*e.c;return{a:e.d/t,b:-e.b/t,c:-e.c/t,d:e.a/t,tx:(e.c*e.ty-e.d*e.tx)/t,ty:-(e.a*e.ty-e.b*e.tx)/t}}function cp(e){var t=e.x,n=e.y,r=e.scaleX,i=e.scaleY,o=e.skewX,a=e.skewY;return{a:Math.cos(a)*r,b:Math.sin(a)*r,c:-Math.sin(o)*i,d:Math.cos(o)*i,tx:t,ty:n}}function hp(e){var t=e.a,n=e.b,r=e.c,i=e.d,o=e.tx,a=e.ty,s={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},l=s.scaleX,u=s.scaleY,c=.25*Math.PI;return s.x=o,s.y=a,s.skewX=Math.atan(-r/i),s.skewY=Math.atan(n/t),s.scaleX=s.skewY>-c&&s.skewY<c?t/Math.cos(s.skewY):n/Math.sin(s.skewY),s.scaleY=s.skewX>-c&&s.skewX<c?i/Math.cos(s.skewX):-r/Math.sin(s.skewX),l>=0&&s.scaleX<0&&(s.scaleX=-s.scaleX,s.skewY=s.skewY-Math.PI),u>=0&&s.scaleY<0&&(s.scaleY=-s.scaleY,s.skewX=s.skewX-Math.PI),s.skewX=np(s.skewX),s.skewY=np(s.skewY),s}function dp(e,t){return{a:t.a*e.a+t.b*e.c,b:t.a*e.b+t.b*e.d,c:t.c*e.a+t.d*e.c,d:t.c*e.b+t.d*e.d,tx:t.tx*e.a+t.ty*e.c+e.tx,ty:t.tx*e.b+t.ty*e.d+e.ty}}function fp(e,t){return dp(up(e),t)}function pp(e,t){return dp(e,up(t))}var vp={transform2Matrix:cp,matrix2Transform:hp,matrixApplyPoint:function(e,t){var n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,l=t.x,u=t.y,c={x:0,y:0};return c.x=n*l+i*u+a,c.y=r*l+o*u+s,c},matrixInverseApplyPoint:function(e,t){var n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,l=t.x,u=t.y,c={x:0,y:0},h=1/(n*o+i*-r);return c.x=o*h*l+-i*h*u+(s*i-a*o)*h,c.y=n*h*u+-r*h*l+(-s*n+a*r)*h,c},matrixTranslate:function(e,t){return e.tx+=t.x,e.ty+=t.y,e},matrixScale:function(e,t){return e.a*=t.x,e.d*=t.y,e.c*=t.x,e.b*=t.y,e.tx*=t.x,e.ty*=t.y,e},matrixRotate:function(e,t){var n=Math.cos(t),r=Math.sin(t),i=e.a,o=e.c,a=e.tx;return e.a=i*n-e.b*r,e.b=i*r+e.b*n,e.c=o*n-e.d*r,e.d=o*r+e.d*n,e.tx=a*n-e.ty*r,e.ty=a*r+e.ty*n,e},matrixCross:dp,matrixInvert:up,matrixInvertCross:fp,matrixCrossInvert:pp,matrixMultiply:function(e,t){e.a*=t,e.b*=t,e.c*=t,e.d*=t,e.tx*=t,e.ty*=t},matrixAdd:function(e,t){e.a+=t.a,e.b+=t.b,e.c+=t.c,e.d+=t.d,e.tx+=t.tx,e.ty+=t.ty},transformApplyPoint:function(e,t){var n=cp(e),r=n.a,i=n.b,o=n.c,a=n.d,s=n.tx,l=n.ty,u=t.x,c=t.y,h={x:0,y:0};return h.x=r*u+o*c+s,h.y=i*u+a*c+l,h},transformInverseApplyPoint:function(e,t){var n=cp(e),r=n.a,i=n.b,o=n.c,a=n.d,s=n.tx,l=n.ty,u=t.x,c=t.y,h={x:0,y:0},d=1/(r*a+o*-i);return h.x=a*d*u+-o*d*c+(l*o-s*a)*d,h.y=r*d*c+-i*d*u+(-l*r+s*i)*d,h},transformTranslate:function(e,t){return e.x+=t.x,e.y+=t.y,e},transformScale:function(e,t){return e.scaleX*=t.x,e.scaleY*=t.y,e},transformRotate:function(e,t){return e.skewX+=t,e.skewY+=t,e},transformCross:function(e,t){return hp(dp(cp(e),cp(t)))},transformInvertCross:function(e,t){return hp(fp(cp(e),cp(t)))},transformCrossInvert:function(e,t){return hp(pp(cp(e),cp(t)))},radio2Angle:function(e){return e/Math.PI*180},angle2Radio:function(e){return e/180*Math.PI},isNumberEqual:Qf,isPointEqual:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return!(!Qf(e.x,t.x,n)||!Qf(e.y,t.y,n))},normalizeRadian:np,normalizeAngle:function(e){return(e=(e=(e+180)%360)>0?e:360+e)-180},getProgressNumber:function(e,t,n){return e+(t-e)*n},distanceBetweenPoints:function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},radianBetweenLines:function(e,t,n,r){var i=Jf(n,r)-Jf(e,t);return i>Math.PI?i-=2*Math.PI:i<-Math.PI&&(i+=2*Math.PI),i},radianBetweenLineAndX:Jf,checkLineCrossLine:function(e,t,n,r){var i=tp(n,r,e),o=tp(n,r,t),a=tp(e,t,n),s=tp(e,t,r);return i*o<0&&a*s<0||(!(0!==i||!ep(n,r,e))||(!(0!==o||!ep(n,r,t))||(!(0!==a||!ep(e,t,n))||!(0!==s||!ep(e,t,r)))))},arrayIncludesArray:function(e,t){if(!e||!t||0===e.length||0===t.length)return!1;for(var n=0,r=t.length;n<r;n++)if(!e.includes(t[n]))return!1;return!0},arrayEqualArray:function(e,t){if(!e||!t)return!1;if(e.length===t.length){for(var n=0,r=t.length;n<r;n++)if(!e.includes(t[n]))return!1;return!0}return!1},transformEqual:function(e,t){return!!(Qf(e.x,t.x)&&Qf(e.y,t.y)&&Qf(e.scaleX,t.scaleX)&&Qf(e.scaleY,t.scaleY)&&Qf(e.skewX,t.skewX)&&Qf(e.skewY,t.skewY))},normalizeRadian2:function(e){return e=(e+Math.PI)%$f,e+=e>0?-Math.PI:Math.PI},normalizeDegree:function(e){return e=(e+180)%360,e+=e>0?-180:180},getProgress:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=0,o=0;return o=i=n===t?0:(e-t)/(n-t),r&&r.length&&(o=1===r.length?function(e,t){var n=0;switch(e){case Zf.None:return 0;case Zf.Linear:return t;case Zf.EaseOutQuad:return-(Math.pow(t-1,2)-1);case Zf.EaseInQuad:return Math.pow(t,2);case Zf.EaseInOutQuad:return(t/=.5)<1?.5*Math.pow(t,2):-.5*((t-=2)*t-2);case Zf.EaseInCubic:return Math.pow(t,3);case Zf.EaseOutCubic:return Math.pow(t-1,3)+1;case Zf.EaseInOutCubic:return(t/=.5)<1?.5*Math.pow(t,3):.5*(Math.pow(t-2,3)+2);case Zf.EaseInQuart:return Math.pow(t,3);case Zf.EaseOutQuart:return-(Math.pow(t-1,4)-1);case Zf.EaseInOutQuart:return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case Zf.EaseInQuint:return Math.pow(t,5);case Zf.EaseOutQuint:return Math.pow(t-1,5)+1;case Zf.EaseInOutQuint:return(t/=.5)<1?.5*Math.pow(t,5):.5*(Math.pow(t-2,5)+2);case Zf.EaseInSine:return 1-Math.cos(t*(Math.PI/2));case Zf.EaseOutSine:return Math.sin(t*(Math.PI/2));case Zf.EaseInOutSine:return-.5*(Math.cos(Math.PI*t)-1);case Zf.EaseInExpo:return 0===t?0:Math.pow(2,10*(t-1));case Zf.EaseOutExpo:return 1===t?1:1-Math.pow(2,-10*t);case Zf.EaseInOutExpo:return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t));case Zf.EaseInCirc:return-(Math.sqrt(1-t*t)-1);case Zf.EaseOutCirc:return Math.sqrt(1-Math.pow(t-1,2));case Zf.EaseInOutCirc:return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1);case Zf.EaseOutBounce:return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375;case Zf.EaseInBack:return t*t*((1+(n=1.70158))*t-n);case Zf.EaseOutBack:return(t-=1)*t*((1+(n=1.70158))*t+n)+1;case Zf.EaseInOutBack:return n=1.70158,(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2);case Zf.Elastic:case Zf.EaseOutElastic:return-1*Math.pow(4,-8*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1;case Zf.EaseOutElasticTmp:return-1*Math.pow(6,-6*t)*Math.sin((6*t-1)*(2*Math.PI)/2)+1;case Zf.SwingFromTo:return n=1.70158,(t/=.5)<1?t*t*((1+(n*=1.525))*t-n)*.5:.5*((t-=2)*t*((1+(n*=1.525))*t+n)+2);case Zf.SwingFrom:return t*t*((1+(n=1.70158))*t-n);case Zf.SwingTo:return(t-=1)*t*((1+(n=1.70158))*t+n)+1;case Zf.Bounce:return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375;case Zf.BouncePast:return t<1/2.75?7.5625*t*t:t<2/2.75?2-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?2-(7.5625*(t-=2.25/2.75)*t+.9375):2-(7.5625*(t-=2.625/2.75)*t+.984375);case Zf.EaseFromTo:return(t/=.5)<1?.5*Math.pow(t,4):-.5*((t-=2)*Math.pow(t,3)-2);case Zf.EaseFrom:return Math.pow(t,4);case Zf.EaseTo:return Math.pow(t,.25);case Zf.Sinusoidal:return-Math.cos(t*Math.PI)/2+.5;case Zf.Reverse:return 1-t;case Zf.Wobble:return-Math.cos(t*Math.PI*(9*t))/2+.5;case Zf.Spring:return 1-Math.cos(4.5*t*Math.PI)*Math.exp(6*-t);default:return t}}(r[0],i):Wf(r,i)),o},distance:function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)},getColorNumber:function(e){if("number"==typeof e)return e;if("string"==typeof e){var t="";return e.startsWith("#")?t=e.substr(1):e.startsWith("0x")&&(t=e.substr(2)),parseInt(t,16)}return 0},getColorString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6;if(e){for(var n=e.toString(16);n.length<t;)n="0"+n;return"#"+n}return"#000000"},getProgressRGB:function(e,t,n){var r=ap(t),i=ap(n);return lp([Math.round(r[0]+(i[0]-r[0])*e),Math.round(r[1]+(i[1]-r[1])*e),Math.round(r[2]+(i[2]-r[2])*e)])},getProgressRGBA:function(e,t,n){var r=ip(t),i=ip(n);return op([Math.round(r[0]+(i[0]-r[0])*e),Math.round(r[1]+(i[1]-r[1])*e),Math.round(r[2]+(i[2]-r[2])*e),Math.round(r[3]+(i[3]-r[3])*e)])},getProgressARGB:function(e,t,n){var r,i=sp(t),o=sp(n),a=[Math.round(i[0]+(o[0]-i[0])*e),Math.round(i[1]+(o[1]-i[1])*e),Math.round(i[2]+(o[2]-i[2])*e),Math.round(i[3]+(o[3]-i[3])*e)];return 16777216*(r=a)[0]+65536*r[1]+256*r[2]+r[3]},isNumber:function(e){return"number"===typeof e&&!isNaN(e)},isString:function(e){return"string"===typeof e},isBoolean:function(e){return"boolean"===typeof e},isArray:function(e){return Array.isArray(e)},isObject:function(e){return"[object Object]"===Object.prototype.toString.call(e)},isArrayCross:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(t.indexOf(i)>=0)return!0}return!1},changeColor2RGB:ap,changeColor2RGBA:ip,changeColor2ARGB:sp,changeNumber2OneColor:rp,changeRGB2Color:lp,changeRGBA2Color:op,splitAlphaColor:function(e){return{color:16777215&e,alpha:(e>>24&255)/255}},mergeAlphaColor:function(e,t){return(16777215&e)+(255*t<<24)},relativeZOrder:function(e){var t,n,r,i,o=[],a=function(e,t){var n,r,i,o,a=[],s=[],l=e.length;for(n=0;n<l;n++)a[n]=1,s[n]=n;for(n=1,o=1,i=0;n<l;n++)for(r=0;r<n;r++)e[r]<e[n]&&a[r]+1>a[n]&&(a[n]=a[r]+1,s[n]=r,o<a[n]&&(o=a[n],i=n));for(n=o-1;s[i]!=i;)t[n--]=e[i],i=s[i];return t[n]=e[i],o}(e,o),s=[],l=2*(e.length-a);for(t=0,n=e.length;t<n&&(-1==o.indexOf(t)&&(r=e.indexOf(t),i=t,s.push(i,r-i)),s.length!=l);t++);return s},absZOrder:function(e,t){var n,r,i,o,a=[],s=0,l=0,u=e,c=[];for(n=u-1;n>=0;n--)c[n]=-1;for(i=0,o=t.length;i<o;i+=2){for(r=t[i];s!=r;)a[l++]=s++;c[s+t[i+1]]=s++}for(;s<u;)a[l++]=s++;for(n=u-1;n>=0;n--)-1==c[n]&&(c[n]=a[--l]);return c},distance2PointToSeg:function(e,t,n,r,i,o){var a=(i-n)*(e-n)+(o-r)*(t-r);if(a<=0)return(e-n)*(e-n)+(t-r)*(t-r);var s=(i-n)*(i-n)+(o-r)*(o-r);if(a>=s)return(e-i)*(e-i)+(t-o)*(t-o);var l=a/s,u=n+(i-n)*l,c=r+(o-r)*l;return(e-u)*(e-u)+(t-c)*(t-c)}},mp=function(e){v(n,gmvc.GModule);var t=y(n);function n(e){return u(this,n),t.call(this,e)}return f(n,[{key:"getId",value:function(){return++this.rootState.editor.idGen}}]),n}(),gp=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,"animationMap")}return f(n,[{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e,t){})),b(e,K.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.animationMap;Object.assign(e,n)}})),b(e,M.REMOVE_ANIMATION,(function(e,t){var n=t.animationId;e[n]=void 0,delete e[n]})),b(e,M.DELETE_ANIMATIONS,(function(e,t){for(var n=t.animationIds,r=0,i=n.length;r<i;r++){var o=n[r];e[o]=void 0,delete e[o]}})),b(e,M.ADD_ANIMATION,(function(e,n){var r=n.animation;if(r){if(r.id||(r.id=t.getId()),e[r.id])throw new Error("same animation id:"+r.id);e[r.id]=r}})),b(e,M.RENAME_ANIMATION,(function(e,t){var n=t.animation,r=e[n.id];if(!r)throw new Error("rename animatoin error, no animation:"+n.id);r.name=n.name})),b(e,M.ADD_ANIMATIONS,(function(e,n){for(var r=0,i=n.length;r<i;r++){var o=n[r];if(o){if(o.id||(o.id=t.getId()),e[o.id])throw new Error("same animation id:"+o.id);e[o.id]=o}}})),b(e,M.MODIFY_FRAMES,(function(e,r){var i=r.armatureId,o=r.animationId,a=r.frames,s=e[o],l=0;for(var u in a)l++;if(s)for(var c=n.getAllSubAnimations(s),h=0,d=c.length;h<d;h++){var f=c[h];if(f)for(var p in f.timelineMap){var v=f.timelineMap[p];if(v)for(var m in a){var g=v.frameMap[m],y=a[m];if(g){for(var b in y){var _=y[b];g[b]=_,"frame"===b&&!0}if(--l<=0){var x=t.rootState.editor.dopesheet.curTime;return void t.commit(P.CALCULATE_ANIMATED_PROPERTY,{armatureId:i,animationId:o,frameIndex:x})}}}}}})),b(e,P.CHECK_OVERRIDE_FRAME,(function(e,r){var i=r.animationId,o=(r.frameId,e[i]),a=[];if(o){for(var s=n.getAllSubAnimations(o),l=0,u=s.length;l<u;l++){var c=s[l];if(c)for(var h in c.timelineMap){var d=c.timelineMap[h];if(d){n.sortTimeline(d);var f={};for(var p in d.frameMap){var v=d.frameMap[p];if(v)if(f[v.frame]){a.push(v.id);var m=d.frames.indexOf(v.id);m>=0&&(d.frames.splice(m,1),delete d.frameMap[v.id])}else f[v.frame]=v.id}}}}if(a.length>0){var g=t.rootState.runtime.editing.selectedFrameIds;if(g.length>0){for(var y=!1,b=g.concat(),_=0,x=a.length;_<x;_++){var E=a[_],w=b.indexOf(E);w>=0&&(b.splice(w,1),y=!0)}y&&t.commit(Q.SELECT_FRAME,b)}yf.warn("\u91cd\u53e0\u7684\u5e27\u88ab\u5220\u9664\u4e86")}}})),b(e,P.CALCULATE_ANIMATED_PROPERTY,(function(e,r){var i=r.armatureId,o=r.animationId,a=r.frameIndex,s=e[o],l=n.calculateAnimationProperties(s,a);t.commit(P.UPDATE_ANIMATED_PROPERTY,{armatureId:i,animationId:o,frameIndex:a,animatedProperties:l})})),b(e,M.AUTO_KEY,(function(e,r){t.commit(gmvc.GHistoryMutation.MERGE_START,{name:"autoKey"});var i=r.armatureId,o=r.timelineInfo,a=t.rootState.editor.dopesheet.autoFirstFrame,s=t.rootState.editor.dopesheet.curTime,l=r.animationId,u=e[l];if(u||(l=(u={id:t.getId(),name:de,autoPlay:!0}).id,t.commit(M.ADD_ANIMATION,{armatureId:i,animation:u}),t.commit(M.SELECT_ANIMATION,{animationId:u.id})),o.bone)for(var c in u.bones||(u.bones={}),o.bone){var h=o.bone[c],d=u.bones[c];for(var f in d||(d={id:parseInt(c),timelineMap:{}},u.bones[c]=d),h){var p=n.getTimelineByType(d,f),v=h[f];p||(p={id:t.getId(),type:f,frames:[],frameMap:{}},d.timelineMap[p.id]=p);for(var m=0,g=v.length;m<g;m++){var y=v[m],b=n.getFrameByFrameIndex(p,y.frame);b?p.type===k.ROTATE?b.value=Re(Re({},b.value),y.value):b.value=y.value:(y.id=t.getId(),n.timelineInsertFrame(p,y))}if(a){var _=n.getFrameBeforeFrameIndex(p,s);0===s&&(_=n.getFrameByFrameIndex(p,s)),_||(_={id:t.getId(),frame:0,value:A[f],curve:[1]},n.timelineInsertFrame(p,_))}}}if(o.slot)for(var x in u.slots||(u.slots={}),o.slot){var E=o.slot[x],w=u.slots[x];for(var T in w||(w={id:parseInt(x),timelineMap:{}},u.slots[x]=w),E){var S=n.getTimelineByType(w,T),C=E[T];S||(S={id:t.getId(),type:T,frames:[],frameMap:{}},w.timelineMap[S.id]=S);for(var I=0,O=C.length;I<O;I++){var R=C[I],N=n.getFrameByFrameIndex(S,R.frame);N?N.value=R.value:(R.id=t.getId(),n.timelineInsertFrame(S,R))}if(T===k.DISPLAY_INDEX&&(a=!1),a){var D=n.getFrameBeforeFrameIndex(S,s);0===s&&(D=n.getFrameByFrameIndex(S,s));var L=A[T];if(T===k.COLOR){var F=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[x];L=PT.getSlotColorAlpha(F)}D||(D={id:t.getId(),frame:0,value:L,curve:[1]},n.timelineInsertFrame(S,D))}}}if(o.zOrder){u.zOrder||(u.zOrder={id:i,timelineMap:{}});var B=u.zOrder,U=n.getTimelineByType(B,k.Z_ORDER),H=o.zOrder;U||(U={id:t.getId(),type:k.Z_ORDER,frames:[],frameMap:{}},B.timelineMap[U.id]=U);for(var j=0,z=H.length;j<z;j++){var V=H[j],G=n.getFrameByFrameIndex(U,V.frame);G?G.value=V.value:(V.id=t.getId(),n.timelineInsertFrame(U,V))}}if(o.ik)for(var W in u.iks||(u.iks={}),o.ik){var X=o.ik[W],Y=u.iks[W];for(var K in Y||(Y={id:parseInt(W),timelineMap:{}},u.iks[W]=Y),X){var q=n.getTimelineByType(Y,K),Z=X[K];q||(q={id:t.getId(),type:K,frames:[],frameMap:{}},Y.timelineMap[q.id]=q);for(var $=0,Q=Z.length;$<Q;$++){var J=Z[$],ee=n.getFrameByFrameIndex(q,J.frame);ee?ee.value=J.value:(J.id=t.getId(),n.timelineInsertFrame(q,J))}if(a){var te=n.getFrameBeforeFrameIndex(q,s);if(0===s&&(te=n.getFrameByFrameIndex(q,s)),!te){var ne=t.rootState.runtime.dragonbones.armatureMap[i].constraint.ik[W];te={id:t.getId(),frame:0,value:{weight:ne.weight,bendPositive:ne.bendPositive},curve:[1]},n.timelineInsertFrame(q,te)}}}}if(o.ffd)for(var re in u.ffds||(u.ffds={}),o.ffd){var ie=o.ffd[re],oe=u.ffds[re];for(var ae in oe||(oe={id:parseInt(re),timelineMap:{}},u.ffds[re]=oe),ie){var se=n.getTimelineByType(oe,ae),le=ie[ae];se||(se={id:t.getId(),type:ae,frames:[],frameMap:{}},oe.timelineMap[se.id]=se);for(var ue=0,ce=le.length;ue<ce;ue++){var he=le[ue],fe=n.getFrameByFrameIndex(se,he.frame);if(fe)for(var pe in he.value)fe.value[pe]=he.value[pe];else he.id=t.getId(),n.timelineInsertFrame(se,he)}if(a){var ve=n.getFrameBeforeFrameIndex(se,s);0===s&&(ve=n.getFrameByFrameIndex(se,s)),ve||(ve={id:t.getId(),frame:0,value:A[ae],curve:[1]},n.timelineInsertFrame(se,ve))}}}var me=t.rootState.runtime.dragonbones.armatureMap[i];PT.clearCache(me),t.commit(P.CALCULATE_ANIMATED_PROPERTY,{animationId:l,armatureId:i,frameIndex:s}),t.commit(gmvc.GHistoryMutation.MERGE_END,{name:"autoKey"})})),b(e,M.DELETE_FRAMES,(function(e,r){var i=r.armatureId,o=r.animationId,a=r.frameIds,s=e[o];n.animationDeleteFrames(s,a);var l=t.rootState.editor.dopesheet.curTime;t.commit(P.CALCULATE_ANIMATED_PROPERTY,{animationId:o,armatureId:i,frameIndex:l})})),b(e,M.SELECT_ANIMATION,(function(e,n){var r=n.animationId,i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.editor.dopesheet.curTime;t.commit(P.CALCULATE_ANIMATED_PROPERTY,{animationId:r,armatureId:i,frameIndex:o})})),b(e,M.MODIFY_TIMELINE,(function(e,r){var i=r.armatureId,o=r.animationId,a=r.timelineId,s=r.property,l=e[o],u=n.getAnimationTimelineById(l,a);u&&(void 0!==s.loop&&(u.loop=s.loop),void 0!==s.scale&&(u.scale=s.scale),void 0!==s.offset&&(u.offset=s.offset));var c=t.rootState.editor.dopesheet.curTime;t.commit(P.CALCULATE_ANIMATED_PROPERTY,{armatureId:i,animationId:o,frameIndex:c})})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},P.ADD_ANIMATION,(function(e,t){})),b(e,P.ADD_ANIMATION_INTERACTIVE,(function(e,r){var i=r,o=e.state,a=n.createAnimationName(de,o);var s=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),l=e.rootState.runtime.dragonbones.armatureMap[i].animations;yf.rename("\u8bf7\u8f93\u5165\u52a8\u753b\u540d\u5b57",a,"\u8bf7\u8f93\u5165\u52a8\u753b\u540d\u5b57",(function(e,n){!function(e){var n=t.getId(),r={armatureId:i,animation:{id:n,name:e}};t.commit(gmvc.GHistoryMutation.MERGE_START),t.commit(M.ADD_ANIMATION,r),t.commit(M.SELECT_ANIMATION,{animationId:n}),t.commit(gmvc.GHistoryMutation.MERGE_END)}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":s.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,o,l)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),b(e,P.RENAME_ANIMATION_INTERACTIVE,(function(e,r){var i=r.armatureId,o=r.animationId,a=e.state,s=a[o].name;var l=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),u=e.rootState.runtime.dragonbones.armatureMap[i].animations.concat();u.splice(u.indexOf(o),1),yf.rename("\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",s,"\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",(function(e,n){e!==n&&function(e){var n={armatureId:i,animation:{id:o,name:e}};t.commit(M.RENAME_ANIMATION,n)}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":l.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,a,u)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),b(e,P.REMOVE_ANIMATION_INTERACTIVE,(function(e,n){var r=n.animationId,i=n.nextAnimationId,o=e.state[r].name;yf.confirm("\u786e\u5b9a\u8981\u5220\u9664\u52a8\u753b\u201c"+o+"\u201d\u5417?","","\u5220\u9664","\u53d6\u6d88",(function(){t.commit(gmvc.GHistoryMutation.MERGE_START),t.commit(M.REMOVE_ANIMATION,n),void 0!==i&&t.commit(M.SELECT_ANIMATION,{animationId:i}),t.commit(gmvc.GHistoryMutation.MERGE_END)}))})),b(e,P.DELETE_FRAMES,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.runtime.dragonbones.armatureMap[i],a=t.rootState.runtime.editing.selectedFrameIds,s=t.rootState.runtime.editing.selectedAnimationId;if(o&&o.animations&&o.animations.indexOf(s)>=0){var l=t.rootState.runtime.dragonbones.animationMap[s];l&&n.animationHasFrame(l,a)&&t.commit(M.DELETE_FRAMES,{armatureId:i,animationId:s,frameIds:a})}})),b(e,P.CLONE_ANIMATION_INTERACTIVE,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.runtime.editing.selectedAnimationId,a=e.state[o],s=n.createAnimationName(a.name+"-\u514b\u9686",e.state),l=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g"),u=e.rootState.runtime.dragonbones.armatureMap[i],c=e.state,h=u.animations.concat();yf.rename("\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",s,"\u8bf7\u8f93\u5165\u65b0\u7684\u540d\u5b57",(function(e,r){!function(e){var r=be(a);r.name=e,r.id=t.getId(),n.ReplaceAnimationId(r,t.getId.bind(t)),t.commit(M.ADD_ANIMATION,{armatureId:i,animation:r})}(e)}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":l.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":n.checkAnimationNameConflict(e,c,h)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}))})),b(e,P.MODIFY_FRAMES_CURVE,(function(e,r){for(var i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.runtime.editing.selectedAnimationId,a=t.rootState.runtime.editing.selectedFrameIds,s=t.rootState.runtime.dragonbones.animationMap[o],l={armatureId:i,animationId:o,frames:{}},u=!1,c=0,h=a.length;c<h;c++){var d=a[c],f=Pt(n.getTimelineAndFrameByFrameId(s,d),2),p=f[0],v=f[1];p&&v&&n.isTimelineSupportCurve(p.type,r.curve)&&(l.frames[d]={curve:r.curve},u=!0)}u&&(t.commit(gmvc.GHistoryMutation.MERGE_START),t.commit(M.MODIFY_FRAMES,l),t.commit(gmvc.GHistoryMutation.MERGE_END))})),e}}],[{key:"getSubAnimationDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r&&r.frames&&r.frames.length){var i=r.frames[0],o=r.frames[r.frames.length-1],a=r.frameMap[i],s=r.frameMap[o];t[0]>a.frame&&(t[0]=a.frame),t[1]<s.frame&&(t[1]=s.frame)}}return t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"forEveryTimeline",value:function(e,t){if(e){var n=["bones","slots","iks","ffds","event","zOrder"],r=["event","zOrder"];for(var i in n){var o=n[i];if(e[o])for(var a in e[o]){var s=e[o][a];if(s)for(var l in s.timelineMap){var u=s.timelineMap[l];if(u)if(t(u))return}}}for(var c in r){var h=e[r[c]];if(h)for(var d in h.timelineMap){var f=h.timelineMap[d];if(f)if(t(f))return}}}}},{key:"getAnimationTimelineById",value:function(e,t){var n;return this.forEveryTimeline(e,(function(e){return e.id===t&&(n=e,!0)})),n}},{key:"getTimelineByType",value:function(e,t){if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r&&r.type===t)return r}}},{key:"getTimelineRealFrame",value:function(e,t){var r=t;if(e.scale&&(r*=e.scale),e.offset&&(r+=e.offset),e.loop){var i=n.getTimelineDuration(e)[1];if(i>0)for(r%=i;r<0;)r+=i}else r<0&&(r=0);return r}},{key:"getAnimationTimelineFrameByFrameIndex",value:function(e,t){var r=[],i=[];function o(e,t){if(e){var o=n.getSubAnimationTimelineFramesByFrameIndex(e,t),a=0,s=0;for(a=0,s=o[0].length;a<s;a++)i.push(o[0][a]);for(a=0,s=o[1].length;a<s;a++)r.push(o[1][a])}}if(e){for(var a in e.bones){var s=e.bones[a];s&&o(s,t)}for(var l in e.slots){var u=e.slots[l];u&&o(u,t)}for(var c in e.iks){var h=e.iks[c];h&&o(h,t)}for(var d in e.ffds){var f=e.ffds[d];f&&o(f,t)}e.event&&o(e.event,t),e.zOrder&&o(e.zOrder,t)}return[i,r]}},{key:"getTimelinesFramesByFrameIndex",value:function(e,t){for(var r=[],i=[],o=0,a=e.length;o<a;o++){var s=e[o],l=n.getFrameByFrameIndex(s,t);l&&(r.push(l),i.push(s))}return[i,r]}},{key:"getSubAnimationTimelineFramesByFrameIndex",value:function(e,t){var r=[],i=[];if(e)for(var o in e.timelineMap){var a=e.timelineMap[o];if(a){var s=n.getFrameByFrameIndex(a,t);s&&(r.push(s),i.push(a))}}return[i,r]}},{key:"getFrameBeforeFrameIndex",value:function(e,t){for(var n=e.frames.length-1;n>=0;n--){var r=e.frames[n],i=e.frameMap[r];if(i&&i.frame<t)return i}}},{key:"getFrameByFrameIndex",value:function(e,t){for(var n=0,r=e.frames.length;n<r;n++){var i=e.frames[n],o=e.frameMap[i];if(o&&o.frame===t)return o}}},{key:"getTimelineFramesByFrameIndex",value:function(e,t){if(e){var r=n.getFrameByFrameIndex(e,t);if(r)return[[e],[r]]}return[[],[]]}},{key:"getTimelinesFramesFromTo",value:function(e,t,r){for(var i=[],o=0,a=e.length;o<a;o++){var s=n.getFramesFromTo(e[o],t,r);s.length&&i.push.apply(i,Pe(s))}return i}},{key:"getFramesFromTo",value:function(e,t,n){for(var r=[],i=0,o=e.frames.length;i<o;i++){var a=e.frames[i],s=e.frameMap[a];s.frame>=t&&s.frame<=n&&r.push(s)}return r}},{key:"getSubAnimationFramesFromTo",value:function(e,t,r){var i=[];if(e)for(var o in e.timelineMap){var a=e.timelineMap[o],s=n.getFramesFromTo(a,t,r);s.length&&(i=i.concat(s))}return i}},{key:"getAllSubAnimations",value:function(e){var t=[];if(e){var n=["bones","slots","iks","ffds","event","zOrder"],r=["event","zOrder"];for(var i in n){var o=n[i];for(var a in e[o]){var s=e[o][a];s&&t.push(s)}}for(var l in r){var u=e[r[l]];u&&t.push(u)}}return t}},{key:"getAnimationFramesFromTo",value:function(e,t,r){var i=[];if(e)for(var o=this.getAllSubAnimations(e),a=0,s=o.length;a<s;a++){var l=o[a],u=n.getSubAnimationFramesFromTo(l,t,r);u.length&&(i=i.concat(u))}return i}},{key:"getTimelineAndFrameByFrameId",value:function(e,t){if(e)for(var n=this.getAllSubAnimations(e),r=0,i=n.length;r<i;r++){var o=n[r];if(o)for(var a in o.timelineMap){var s=o.timelineMap[a];if(s){var l=s.frameMap[t];if(l)return[s,l]}}}return[void 0,void 0]}},{key:"getFrameById",value:function(e,t){if(e)for(var n=this.getAllSubAnimations(e),r=0,i=n.length;r<i;r++){var o=n[r];if(o)for(var a in o.timelineMap){var s=o.timelineMap[a];if(s){var l=s.frameMap[t];if(l)return l}}}}},{key:"sortTimeline",value:function(e){var t=e.frameMap;e.frames.sort((function(e,n){var r=t[e],i=t[n];return r.frame<i.frame?-1:1}))}},{key:"getAnimationDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];return this.getAllSubAnimations(e).forEach((function(e){var r=n.getSubAnimationDuration(e);r[0]>=0&&(t[0]>r[0]&&(t[0]=r[0]),t[1]<r[1]&&(t[1]=r[1]))})),t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"getTimelineDuration",value:function(e){var t=[Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER];if(e.frames&&e.frames.length){var n=e.frames[0],r=e.frameMap[n];r&&(t[0]=r.frame);var i=e.frames[e.frames.length-1],o=e.frameMap[i];o&&(t[1]=o.frame)}return t[0]>t[1]&&(t[0]=-1,t[1]=-1),t}},{key:"getCurNextFrame",value:function(e,t){for(var n,r,i=0,o=e.frames.length;i<o;i++){var a=e.frames[i],s=e.frameMap[a];if(s){if(s.frame>t){r=s;break}n=s}}return[n,r]}},{key:"getProgressValue",value:function(e,t,n,r){switch(r){case"number":case"rotate":return t+(n-t)*e;case"color":return"string"==typeof t?vp.getProgressRGBA(e,t,n):vp.getProgressARGB(e,t,n);case"point":return{x:t.x+(n.x-t.x)*e,y:t.y+(n.y-t.y)*e};case"ik":return{weight:t.weight+(n.weight-t.weight)*e,bendPositive:t.bendPositive};case"string":case"boolean":return t;case"ffd":var i={};for(var o in t){var a=t[o],s=n[o]||[0,0],l=[a[0]+(s[0]-a[0])*e,a[1]+(s[1]-a[1])*e];i[o]=l}for(var u in n)if(!i[u]){var c=t[u]||[0,0],h=n[u],d=[c[0]+(h[0]-c[0])*e,c[1]+(h[1]-c[1])*e];i[u]=d}return i;default:return}}},{key:"getNextRotateFrameValue",value:function(e,t){var n=t.value.rotate-e.value.rotate,r=t.value.rotate;return e.value.clockwise?e.value.clockwise>0?(n<0&&(r=t.value.rotate+2*Math.PI),e.value.clockwiseNum>0&&(r+=2*Math.PI*e.value.clockwiseNum)):(n>0&&(r=t.value.rotate-2*Math.PI),e.value.clockwiseNum>0&&(r-=2*Math.PI*e.value.clockwiseNum)):r=e.value.rotate+vp.normalizeRadian(n),r}},{key:"getTimelineValue",value:function(e,t,r){if(0!==e.frames.length){var i=Pt(n.getCurNextFrame(e,t),2),o=i[0],a=i[1];if(o)switch(r){case"string":case"boolean":case"zOrder":return o.value;case"rotate":if(!a)return a=o,o.value;var s=o.value.rotate,l=this.getNextRotateFrameValue(o,a),u=vp.getProgress(t,o.frame,a.frame,o.curve);return{rotate:n.getProgressValue(u,s,l,r),clockwise:o.value.clockwise,clockwiseNum:o.value.clockwiseNum};default:a||(a=o);var c=o.value,h=a.value,d=vp.getProgress(t,o.frame,a.frame,o.curve);return n.getProgressValue(d,c,h,r)}}}},{key:"calculateTimelineValue",value:function(e,t,r){var i,o=n.getTimelineRealFrame(e,t);switch(e.type){case k.X:case k.Y:case k.SCALE_X:case k.SCALE_Y:case k.ROTATION:case k.PROGRESS:case k.ALPHA:case k.SKEW_X:case k.SKEW_Y:case k.VOLUME:i=n.getTimelineValue(e,o,"number");break;case k.ROTATE:i=n.getTimelineValue(e,o,"rotate");break;case k.COLOR:i=n.getTimelineValue(e,o,"color");break;case k.VISIBLE:i=n.getTimelineValue(e,o,"boolean");break;case k.TEXT:i=n.getTimelineValue(e,o,"string");break;case k.EVENT:case k.PLAY:break;case k.SHAPE:i=n.getTimelineValue(e,o,"shape");break;case k.TRANSLATE:case k.SCALE:i=n.getTimelineValue(e,o,"point");break;case k.Z_ORDER:case k.DISPLAY_INDEX:i=n.getTimelineValue(e,o,"zOrder");break;case k.IK:i=n.getTimelineValue(e,o,"ik");break;case k.FFD:i=n.getTimelineValue(e,o,"ffd")}if(void 0===i&&(i=A[e.type]),void 0!==i)return b({},e.type,i)}},{key:"getChildTimelineValue",value:function(e,t,r,i){e.id;var o,a=!1;o||(o=n.calculateTimelineValue(i,r,e));return o}},{key:"calculateAnimationProperties",value:function(e,t){var r=e,i={};if(r){var o=["bones","slots","iks","ffds","event","zOrder"],a=["event","zOrder"];for(var s in i={},o){var l=o[s],u={};for(var c in r[l]){var h=r[l][c];if(h){var d={};for(var f in h.timelineMap){var p=h.timelineMap[f];if(p&&p.frames.length){var v=n.getChildTimelineValue(e,c,t,p);void 0!==v&&(d=Object.assign(d,v))}}u[c]=d}}i[l]=u}for(var m in a){var g=a[m],y=r[g];if(y){var b={};for(var _ in y.timelineMap){var x=y.timelineMap[_];if(x&&x.frames.length){var E=n.getChildTimelineValue(e,g,t,x);E&&(b=Object.assign(b,E))}}i[g]=b}}}return i}},{key:"timelineInsertFrame",value:function(e,t){var n=e.frames.length,r=t.frame;if(0===n)e.frames.push(t.id);else{for(var i,o,a=!1,s=0;s<n;s++){var l=e.frames[s],u=e.frameMap[l];if(u.frame>r){e.frames.splice(s,0,t.id),a=!0,o=u;break}i=u}if(a||e.frames.push(t.id),i&&o){var c=(t.frame-i.frame)/(o.frame-i.frame);if(i.curve){var h=[];if(1==i.curve.length)if(i.curve[0]==Zf.None)t.curve=[Zf.None];else if(i.curve[0]==Zf.Linear)t.curve=[Zf.Linear];else switch(i.curve[0]){case Zf.EaseInQuad:h=[.5,0,1,1];break;case Zf.EaseOutQuad:h=[0,0,.5,1];break;case Zf.EaseInOutQuad:h=[.5,0,.5,1]}else i.curve.length>=4&&(h=i.curve.concat());if(h.length>=4){var d=function(e,t){var n=function(e,t){if(0===t)return 0;if(4===e.length)return 2;if(e.length>4)for(var n={x:0,y:0},r={x:1,y:1},i=0,o=e.length;i<o;i+=6){if(i+4>=o?(r.x=1,r.y=1):(r.x=e[i+4],r.y=e[i+5]),t>=n.x&&t<=r.x)return i+2;n.x=r.x,n.y=r.y}}(e,t),r=Yf(e,t),i=e.slice(0,n-2),o=e.slice(n+2);i.push(r[0],r[1],r[2],r[3],r[4],r[5]),o.unshift(r[4],r[5],r[6],r[7],r[8],r[9]);var a=function(e){var t=e[e.length-1],n=e[e.length-2],r=1/t,i=1/n,o=e.map((function(e,t){return t%2===0?e*i:e*r}));return o.pop(),o.pop(),o}(i),s=function(e){var t=e[1],n=e[0],r=1/(1-t),i=1/(1-n),o=e.map((function(e,t){return t%2===0?(e-1)*i+1:(e-1)*r+1}));return o.shift(),o.shift(),o}(o);return[a,s]}(h,c);i.curve=d[0],t.curve=d[1]}}}}e.frameMap[t.id]=t}},{key:"createAnimationName",value:function(e,t,n){return BT.createName(e,t,n)}},{key:"checkAnimationNameConflict",value:function(e,t,n){return BT.checkNameConflict(e,t,n)}},{key:"isAnimationProperty",value:function(e){return C.indexOf(e)>=0}},{key:"hasKeyFrame",value:function(e,t,r,i){if(e)if(r===k.Z_ORDER){if(e.zOrder){var o=e.zOrder;if(o&&o.timelineMap){var a;for(var s in o.timelineMap){var l=o.timelineMap[s];if(l.type===r){a=l;break}}if(a&&a.frameMap){var u=n.getTimelineRealFrame(a,i);for(var c in a.frameMap){var h=a.frameMap[c];if(h&&h.frame===u)return!0}}}}}else if(r===k.IK){if(e.iks){var d=e.iks[t];if(d&&d.timelineMap){var f;for(var p in d.timelineMap){var v=d.timelineMap[p];if(v.type===r){f=v;break}}if(f&&f.frameMap){var m=n.getTimelineRealFrame(f,i);for(var g in f.frameMap){var y=f.frameMap[g];if(y&&y.frame===m)return!0}}}}}else if(r===k.FFD){if(e.ffds){var b=e.ffds[t];if(b&&b.timelineMap){var _;for(var x in b.timelineMap){var E=b.timelineMap[x];if(E.type===r){_=E;break}}if(_&&_.frameMap){var w=n.getTimelineRealFrame(_,i);for(var T in _.frameMap){var S=_.frameMap[T];if(S&&S.frame===w)return!0}}}}}else{if(e.bones){var C=e.bones[t];if(C&&C.timelineMap){var A;for(var I in C.timelineMap){var O=C.timelineMap[I];if(O&&n.propertyEqualTimelineType(r,O.type)){A=O;break}}if(A&&A.frameMap){var P=n.getTimelineRealFrame(A,i);for(var M in A.frameMap){var R=A.frameMap[M];if(R&&R.frame===P)return!0}}}}if(e.slots){var N=e.slots[t];if(N&&N.timelineMap){var D;for(var L in N.timelineMap){var F=N.timelineMap[L];if(F.type===r){D=F;break}}if(D&&D.frameMap){var B=n.getTimelineRealFrame(D,i);for(var U in D.frameMap){var H=D.frameMap[U];if(H&&H.frame===B)return!0}}}}}return!1}},{key:"boneHasCacheProperty",value:function(e,t){if(e&&e.cacheProperties){var n=e.animatedTransform||e.mixTransform||e.transform;switch(t){case"x":case"y":return e.cacheTransform&&(!vp.isNumberEqual(e.cacheTransform.x,n.x)||!vp.isNumberEqual(e.cacheTransform.y,n.y));case"scaleX":case"scaleY":return e.cacheTransform&&(!vp.isNumberEqual(e.cacheTransform.scaleX,n.scaleX)||!vp.isNumberEqual(e.cacheTransform.scaleY,n.scaleY));case"rotation":case"rotate":return e.cacheTransform&&!vp.isNumberEqual(e.cacheTransform.skewX,n.skewX);default:return void 0!==e.cacheProperties[t]}}return!1}},{key:"propertyEqualTimelineType",value:function(e,t){return e===t||("x"===e||"y"===e?t===k.TRANSLATE:"scaleX"===e||"scaleY"===e?t===k.SCALE:"rotation"===e?t===k.ROTATE:void 0)}},{key:"getTimelinesFromSubAnimation",value:function(e){var t=[];if(e)for(var n in e.timelineMap){var r=e.timelineMap[n];r&&t.push(r)}return t}},{key:"subAnimationHasFrame",value:function(e,t){if(e.timelineMap)for(var n in e.timelineMap){var r=e.timelineMap[n];if(r)for(var i=0,o=t.length;i<o;i++){var a=t[i];if(r.frames.indexOf(a)>=0)return!0}}return!1}},{key:"subAnimationDeleteFrames",value:function(e,t){var n=0;if(e.timelineMap)for(var r in e.timelineMap){var i=e.timelineMap[r];if(i)for(var o=0,a=t.length;o<a;o++){var s=t[o],l=i.frames.indexOf(s);l>=0&&(i.frames.splice(l,1),i.frameMap[s]=void 0,delete i.frameMap[s],t.splice(o,1),a--,o--,n++)}}return n}},{key:"animationHasFrame",value:function(e,t){if(e.bones)for(var r in e.bones){var i=e.bones[r];if(i&&n.subAnimationHasFrame(i,t))return!0}if(e.slots)for(var o in e.slots){var a=e.slots[o];if(a&&n.subAnimationHasFrame(a,t))return!0}if(e.ffds)for(var s in e.ffds){var l=e.ffds[s];if(l&&n.subAnimationHasFrame(l,t))return!0}if(e.iks)for(var u in e.iks){var c=e.iks[u];if(c&&n.subAnimationHasFrame(c,t))return!0}return!(!e.event||!n.subAnimationHasFrame(e.event,t))||(!(!e.zOrder||!n.subAnimationHasFrame(e.zOrder,t))||void 0)}},{key:"animationDeleteFrames",value:function(e,t){var r=0,i=t.length;if(e.bones)for(var o in e.bones){var a=e.bones[o];if(a)r+=n.subAnimationDeleteFrames(a,t)}if(r!==i){if(e.slots)for(var s in e.slots){var l=e.slots[s];if(l)r+=n.subAnimationDeleteFrames(l,t)}if(r!==i){if(e.ffds)for(var u in e.ffds){var c=e.ffds[u];if(c)r+=n.subAnimationDeleteFrames(c,t)}if(r!==i){if(e.iks)for(var h in e.iks){var d=e.iks[h];if(d)r+=n.subAnimationDeleteFrames(d,t)}if(r!==i){if(e.event)r+=n.subAnimationDeleteFrames(e.event,t);if(r!==i){if(e.zOrder)r+=n.subAnimationDeleteFrames(e.zOrder,t);if(r!==i)throw new Error("delete frames count error:".concat(r,"/ ").concat(i))}}}}}}},{key:"replaceSubAnimaitonId",value:function(e,t){var n={};for(var r in e.timelineMap){var i=e.timelineMap[r];i.id=t(),n[i.id]=i;var o=[],a={};for(var s in i.frameMap){var l=i.frameMap[s];l.id=t(),o.push(l.id),a[l.id]=l}i.frames=o,i.frameMap=a}e.timelineMap=n}},{key:"ReplaceAnimationId",value:function(e,t){if(e.id=t(),e.bones)for(var r in e.bones){var i=e.bones[r];n.replaceSubAnimaitonId(i,t)}if(e.slots)for(var o in e.slots){var a=e.slots[o];n.replaceSubAnimaitonId(a,t)}if(e.ffds)for(var s in e.ffds){var l=e.ffds[s];n.replaceSubAnimaitonId(l,t)}if(e.iks)for(var u in e.iks){var c=e.iks[u];n.replaceSubAnimaitonId(c,t)}e.event&&n.replaceSubAnimaitonId(e.event,t),e.zOrder&&n.replaceSubAnimaitonId(e.zOrder,t)}},{key:"isTimelineSupportCurve",value:function(e,t){if(t&&t.length)switch(e){case k.VISIBLE:case k.Z_ORDER:case k.EVENT:case k.DISPLAY_INDEX:return 1===t.length&&0===t[0];default:return!0}return!1}}]),n}(mp),yp=f((function e(){u(this,e)}));yp.CURVE_BOX_BG=16777215,yp.CURVE_BOX_BG_MIDDLE=14211288,yp.CURVE_BOX_GRID=9474192,yp.CURVE_BOX_CURVE=9442302,yp.CURVE_BOX_OVER=255,yp.CURVE_BOX_HANDLE=4886754,yp.CURVE_BOX_TEXT=5000268,yp.DOPESHEET_BG=16777215,yp.DOPESHEET_LABEL_BG=16777215,yp.DOPESHEET_LABEL=7829367,yp.DOPESHEET_PLAY_HEAD=65535,yp.DOPESHEET_LAST_FRAME=10027008,yp.DOPESHEET_PLAY_HEAD_VIRTUAL=10066176,yp.DOPESHEET_CURVE_NORMAL=10066329,yp.DOPESHEET_CURVE_SELECT=16777215,yp.BG_TRANSPARENT_F=6513507,yp.BG_TRANSPARENT_B=5921370,yp.ANT_BLUE=["#ecf6fd","#d2eafb","#add8f7","#7ec2f3","#49a9ee","#108ee9","#0e77ca","#0c60aa","#09488a","#073069"],yp.ANT_GREY=["#fbfbfb","#f7f7f7","#f5f5f5","#e9e9e9","#d9d9d9","#bfbfbf","#919191","#5a5a5a","#404040","#222222"],yp.ANT_CYAN=["#ebf8f9","#cfedf0","#a7dfe3","#76cdd3","#3db8c1","#00a2ae","#008997","#00707f","#005667","#003c4e"],yp.ANT_YELLOW=["#fffaeb","#fff3cf","#ffe9a7","#ffdd76","#ffce3d","#ffbf00","#e09a00","#c17500","#a04f00","#802800"],yp.ANT_PINK=["#feeff5","#fdd8e7","#fcb8d3","#fa90ba","#f7629e","#f5317f","#dc277d","#c11c7b","#a71278","#8c0776"],yp.COLOR_OVER_RECT=16777215,yp.COLOR_SELECT_RECT=1042664,yp.COLOR_SELECT_OVER_RECT=65280,yp.HANDLER_NORMAL=0,yp.HANDLER_OVER=45311,yp.HANDLER_OVER_2=16777215,yp.HANDLER_SELECT=45311,yp.HANDLER_MOVE=16777215,yp.HANDLER_X_MOVE=16711680,yp.HANDLER_Y_MOVE=65280,yp.HANDLER_X_SCALE=16711769,yp.HANDLER_Y_SCALE=65446,yp.HANDLER_X_SKEW=16711680,yp.HANDLER_Y_SKEW=65280,yp.HANDLER_ROTATION=16776960,yp.HANDLER_ROTATION_SECTOR=8947848,yp.HANDLER_SCALE_ALL=16776960,yp.HANDLER_SCALE=8947848,yp.HANDLER_PIVOT=8947848,yp.HANDLER_PIVOT_LINE=0,yp.FRAME_X=16711680,yp.FRAME_Y=65280,yp.FRAME_ROTATION=16776960,yp.FRAME_SCALE_X=16734810,yp.FRAME_SCALE_Y=5963610,yp.FRAME_SKEW_X=16742777,yp.FRAME_SKEW_Y=7995257,yp.FRAME_VISIBLE=16764159,yp.FRAME_TEXT=16763904,yp.FRAME_PROGRESS=6750207,yp.FRAME_COLOR=6750156,yp.FRAME_PLAY=10066329,yp.FRAME_MIX=16777215,yp.FRAME_BLOCK_LINE=65280,yp.FRAME_BLOCK_SCALE=0,yp.FRAME_BLOCK=65280,yp.NORMAL_LINE_COLOR=16777215,yp.NORMAL_POINT_COLOR=16777215,yp.EDIT_LINE_COLOR=255,yp.EDIT_POINT_COLOR=255,yp.OVER_LINE_COLOR=16776960,yp.OVER_POINT_COLOR=16776960,yp.SELECTED_LINE_COLOR=65280,yp.SELECTED_POINT_COLOR=65280,yp.END_LINE_COLOR=65280,yp.END_POINT_COLOR=65280,yp.INSERT_POINT_COLOR=65535,yp.DELETE_POINT_COLOR=16711680,yp.HANDLE_COLOR=10000384,yp.BONE_FILL_UP=12303291,yp.BONE_FILL_DOWN=4652287,yp.BONE_FILL_DOWN_OVER=10092543,yp.BONE_FILL_OVER=16777215,yp.BONE_FILL_IK=16728064,yp.BONE_BOLDER=0,yp.BONE_IK_LINE=16711680,yp.BONE_FK_LINE=65280,yp.MESH_POINT_NORMAL=65280,yp.MESH_POINT_OVER=16711680,yp.MESH_POINT_SELECTED=255,yp.MESH_POINT_DELETE=16711680,yp.MESH_POINT_ADD=255,yp.MESH_LINE_NORMAL=65280,yp.MESH_LINE_OVER=16711680,yp.MESH_LINE_SELECTED=255,yp.MESH_LINE_BORDER=16777215,yp.MESH_LINE_AUTO=10066329,yp.MESH_LINE_CLOSE=13421772,yp.MESH_LINE_RANGE=16777215,yp.MESH_LINE_DELETE=16711680,yp.MESH_OUTLINE_NORMAL=65535,yp.MESH_OUTLINE_OVER=16777215,yp.MESH_OUTLINE_SELECTED=255,yp.MESH_USER_LINE_NORMAL=13612094,yp.MESH_USER_LINE_OVER=16711680,yp.MESH_USER_LINE_SELECTED=255,yp.RIG_BONE_COLOR=[65280,16737792,16711680,255,16776960,16711935,7221635,10416579,7575997,2365982,9001241,8773749,10467339,1548733,9199327,2258947,7706757,2941914,2888195,2163122,11841945,1122112,15327991,11001904,1220560];var bp=function(){function e(){u(this,e)}return f(e,null,[{key:"generateId",value:function(){return++this.maxId}},{key:"parseTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:vp.angle2Radio(e.skX||0),skewY:vp.angle2Radio(e.skY||0)}}},{key:"parseBone",value:function(e){return{name:e.name,id:e.id,parentId:0,transform:this.parseTransform(e.transform),length:e.length||0,inheritRotation:e.inheritRotation,inheritScale:e.inheritScale}}},{key:"getIdByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i.id}return 0}},{key:"getItemByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}}},{key:"getAssetIdByPath",value:function(e,t){for(var n in t){var r=t[n];if(r&&r.type===E.SPRITE_SHEET&&r.children)for(var i=0,o=r.children.length;i<o;i++){var a=r.children[i];if(a.name===e)return a.id}}return 0}},{key:"parseSlotDisplay",value:function(e,t,n){var r=this,i=[],o={};if(t&&t.slot)for(var a=0,s=t.slot.length;a<s;a++){var l=t.slot[a];l.name===e&&l.display.forEach((function(e){var t=r.parseDisplay(e,n);t&&(i.push(t.id),o[t.id]=t)}))}return{ids:i,map:o}}},{key:"parseDBMeshPoint",value:function(e,t){for(var n={},r=0,i=e.length;r<i;r+=2)n[r/2]={vertices:[e[r],e[r+1]],uvs:[t[r],t[r+1]]};return n}},{key:"parseDisplay",value:function(e,t){if("image"===e.type)return{name:e.name,id:e.id,transform:this.parseTransform(e.transform),type:T.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t)};if("mesh"===e.type){if(e.share)return{name:e.name,id:e.id,transform:this.parseTransform(e.transform||{}),type:T.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t)};var n=this.parseDBMeshPoint(e.vertices,e.uvs),r=[];for(var i in n){var o=n[i];r.push({x:o.uvs[0],y:o.uvs[1]})}var a={name:e.name,id:e.id,transform:this.parseTransform(e.transform),type:T.MESH,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t),mesh:{points:n,outlines:e.edges,userEdges:e.userEdges||[],triangles:e.triangles},width:e.width,height:e.height};if(e.slotPose){var s={a:e.slotPose[0],b:e.slotPose[1],c:e.slotPose[2],d:e.slotPose[3],tx:e.slotPose[4],ty:e.slotPose[5]},l=vp.matrix2Transform(s);a.mesh.slotPose=l}if(e.bonePose)for(var u=0,c=e.bonePose.length;u<c;u+=7){var h=e.bonePose[u],d={a:e.bonePose[u+1],b:e.bonePose[u+2],c:e.bonePose[u+3],d:e.bonePose[u+4],tx:e.bonePose[u+5],ty:e.bonePose[u+6]},f=vp.matrix2Transform(d);vp.transform2Matrix(f);a.mesh.bonePose=a.mesh.bonePose||{};var p=this.getBoneIdByIndex(h),v=yp.RIG_BONE_COLOR[h%yp.RIG_BONE_COLOR.length];a.mesh.bonePose[p]={pose:f,color:v}}if(e.weights){for(var m=0,g=0;m<e.weights.length;){var y=e.weights[m],b={};m++;for(var _=0,x=2*y;_<x;_+=2){var E=e.weights[m+_],w=this.getBoneIdByIndex(E),S=e.weights[m+_+1];b[w]=S}a.mesh.boneWeights=a.mesh.boneWeights||{},a.mesh.boneWeights[g]=b,g++,m+=2*y}for(var k in a.mesh.bonePose)for(var C in a.mesh.boneWeights)a.mesh.boneWeights[C][k]||(a.mesh.boneWeights[C][k]=0)}return a}if("boundingBox"===e.type)return null;if("armature"===e.type)return null;throw new Error("unknown display type :"+e.type)}},{key:"parseColor",value:function(e){if(!e)return{color:16777215,alpha:1};var t=void 0===e.rM?100:e.rM,n=void 0===e.gM?100:e.gM,r=void 0===e.bM?100:e.bM,i=void 0===e.aM?100:e.aM;return{color:(Math.floor(t/100*255)<<16)+(Math.floor(n/100*255)<<8)+Math.floor(r/100*255),alpha:i/100}}},{key:"exportDBColor",value:function(e){var t=vp.changeColor2ARGB(e),n=Math.ceil(t[0]/255*100),r=Math.ceil(t[1]/255*100),i=Math.ceil(t[2]/255*100),o=Math.ceil(t[3]/255*100),a={rM:r,gM:i,bM:o,aM:n};return 100===r&&delete a.rM,100===i&&delete a.gM,100===o&&delete a.bM,100===n&&delete a.aM,a}},{key:"parseBlendMode",value:function(e){switch(e){case"add":return 1;case"erase":return 5;default:return 0}}},{key:"exportDBBlendMode",value:function(e){switch(e){case 1:return"add";case 5:return"erase";default:return}}},{key:"parseSlot",value:function(e,t,n){var r={name:e.name,id:e.id,parentId:0,zOrder:e.z,displayIndex:e.displayIndex,displays:this.parseSlotDisplay(e.name,t,n)};if(e.color){var i=this.parseColor(e.color);16777215!==i.color&&(r.color=i.color),r.alpha=i.alpha}if(e.blendMode){var o=this.parseBlendMode(e.blendMode);0!==o&&(r.blendMode=o)}return r}},{key:"parseSkin",value:function(e){}},{key:"parseFrameCurve",value:function(e){return e.curve?4===e.curve.length?.5===e.curve[0]&&0===e.curve[1]&&1===e.curve[2]&&1===e.curve[3]?[Zf.EaseInQuad]:0===e.curve[0]&&0===e.curve[1]&&.5===e.curve[2]&&1===e.curve[3]?[Zf.EaseOutQuad]:.5===e.curve[0]&&0===e.curve[1]&&.5===e.curve[2]&&1===e.curve[3]?[Zf.EaseInOutQuad]:e.curve:e.curve:0===e.tweenEasing?[Zf.Linear]:e.tweenEasing?void 0:[Zf.None]}},{key:"parseTimeline",value:function(e,t,n,r){for(var i={id:this.generateId(),type:n,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},o=0,a=0,s=e.length;a<s;a++){var l=e[a],u=r(l,o);u.curve=this.parseFrameCurve(l),o+=l.duration,i.frames.push(u.id),i.frameMap[u.id]=u}return i}},{key:"parseTranslateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.TRANSLATE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x,y:e.y}}}))}},{key:"parseScaleTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.SCALE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x,y:e.y}}}))}},{key:"parseRotateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.ROTATE,(function(e,t){var r=0,i=0;return e.clockwise>0?(r=1,i=e.clockwise-1):e.clockwise<0&&(r=-1,i=Math.abs(e.clockwise+1)),{id:n.generateId(),frame:t,value:{rotate:vp.angle2Radio(e.rotate),clockwise:r,clockwiseNum:i}}}))}},{key:"parseDBProZOrderFrame",value:function(e,t){for(var n=[],r=0,i=t.length;r<i;r++){var o=this.getIdByName(e,t[r]);if(!(o>=0))throw new Error("zOrder error:"+t[r]);n.push(o)}if(n.length<e.length)for(var a=0,s=e.length;a<s;a++){var l=e[a];n.indexOf(l.id)<0&&n.push(l.id)}else if(n.length>e.length)throw new Error("zOrder length error:"+t);return n}},{key:"parseFFDTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.FFD,(function(e,t){var r=e,i={},o=r.offset,a=r.vertices;if(a){r.offset%2===1&&(o=r.offset-1,(a=r.vertices.concat()).unshift(0));for(var s=0,l=a.length;s<l;s+=2){var u=a[s],c=a[s+1];if(isNaN(u)&&(u=0),isNaN(c)&&(c=0),0!==u&&0!==c)i[(s+o)/2]=[u,c]}}return{id:n.generateId(),frame:t,value:i}}))}},{key:"parseAnimation",value:function(e,t,n,r,i,o){var a=this,s={id:e.id>0?e.id:this.generateId(),name:e.name,duration:e.duration};if(e.bone){s.bones={};for(var l=0,u=e.bone.length;l<u;l++){var c=e.bone[l],h=this.getIdByName(t,c.name),d={id:h,name:c.name,timelineMap:{}};if(c.translateFrame){var f=this.parseTranslateTimeline(c.translateFrame,c);d.timelineMap[f.id]=f}if(c.scaleFrame){var p=this.parseScaleTimeline(c.scaleFrame,c);d.timelineMap[p.id]=p}if(c.rotateFrame){var v=this.parseRotateTimeline(c.rotateFrame,c);d.timelineMap[v.id]=v}s.bones[h]=d}}if(e.ik){s.iks={};for(var m=0,g=e.ik.length;m<g;m++){var y=e.ik[m],b=this.getIdByName(r,y.name),_={id:b,name:y.name,timelineMap:{}};if(y.frame){var x=this.parseTimeline(y.frame,y,k.IK,(function(e,t){return{id:a.generateId(),frame:t,value:{bendPositive:e.bendPositive,weight:e.weight}}}));_.timelineMap[x.id]=x}s.iks[b]=_}}if(e.slot){s.slots={};for(var E=0,w=e.slot.length;E<w;E++){var T=e.slot[E],S={id:this.getIdByName(n,T.name),name:T.name,timelineMap:{}};if(T.colorFrame){var C=this.parseTimeline(T.colorFrame,T,k.COLOR,(function(e,t){var n=a.parseColor(e.color),r=vp.mergeAlphaColor(n.color,n.alpha);return{id:a.generateId(),frame:t,value:r}}));S.timelineMap[C.id]=C}if(T.displayFrame){var A=this.parseTimeline(T.displayFrame,T,k.DISPLAY_INDEX,(function(e,t){return{id:a.generateId(),frame:t,value:e.value}}));S.timelineMap[A.id]=A}s.slots[S.id]=S}}if(e.zOrder&&(s.zOrder={id:i,name:"zOrder",timelineMap:{}},e.zOrder.frame)){var I=this.parseTimeline(e.zOrder.frame,{},k.Z_ORDER,(function(e,t){var r=a.parseDBProZOrderFrame(n,e.zOrder);return{id:a.generateId(),frame:t,value:r}}));s.zOrder.timelineMap[I.id]=I}if(e.ffd){s.ffds={};for(var O=0,P=e.ffd.length;O<P;O++){var M=e.ffd[O],R=this.getDisplayIdBySlotName(M.slot,o.map),N={id:R,name:M.name,timelineMap:{}};if(M.frame){var D=this.parseFFDTimeline(M.frame,M);N.timelineMap[D.id]=D}s.ffds[R]=N}}if(e.frame){s.event={id:i,name:"event",timelineMap:{}};var L=this.parseTimeline(e.frame,{},k.EVENT,(function(e,t){var n=e,r={};return n.events&&(r.events=n.events),n.sound&&(r.sound=n.sound),n.action&&(r.action=n.action),{id:a.generateId(),frame:t,value:r}}));s.event.timelineMap[L.id]=L}return s}},{key:"getDisplayIdBySlotName",value:function(e,t){for(var n in t){var r=t[n];if(r.name===e)return r.displays.ids[r.displayIndex]}}},{key:"getBoneIdByIndex",value:function(e){return this.tempBones[e].id}},{key:"parseArmature",value:function(e,t){var n={id:e.id,name:e.name,bones:{ids:[],map:{}},slots:{ids:[],map:{}},skins:{ids:[],map:{}},animations:[],constraint:{ik:{}}},r={};if(this.tempBones=[],e.bone){for(var i=0,o=e.bone.length;i<o;i++){var a=e.bone[i],s=this.parseBone(a);if(this.tempBones.push(s),a.parent){var l=this.getIdByName(e.bone,a.parent);s.parentId=l}n.bones.ids.push(s.id),n.bones.map[s.id]=s}if(e.slot)for(var u=0,c=e.slot.length;u<c;u++){var h=e.slot[u],d=this.parseSlot(h,e.skin[0],t),f=this.getIdByName(e.bone,h.parent);d.parentId=f,n.slots.ids.push(d.id),n.slots.map[d.id]=d}if(e.ik)for(var p=0,v=e.ik.length;p<v;p++){var m=e.ik[p],g=this.getItemByName(this.tempBones,m.bone),y=this.getItemByName(this.tempBones,m.target),b=g.id,_=g.id;1===m.chain?b=g.parentId:_=void 0;var x={id:m.id,name:m.name,parentId:b,targetId:y.id,bendPositive:"false"!==m.bendPositive,weight:m.weight||1};_&&(x.childId=_),n.constraint.ik[x.id]=x}if(e.animation)for(var E=0,w=e.animation.length;E<w;E++){var T=e.animation[E],S=this.parseAnimation(T,e.bone,e.slot,e.ik,n.id,n.slots);n.animations.push(S.id),r[S.id]=S}}return{armature:n,animationMap:r}}},{key:"getMaxId",value:function(e){var t=0;return function e(n){for(var r in n)"id"===r?t=Math.max(t,n[r]):"object"===typeof n[r]&&e(n[r])}(e),t}},{key:"parseProjData",value:function(e,t,n){if(e&&e.dragonBones){var r=e.dragonBones.armature;this.maxId=Math.max(this.getMaxId(r),n);var i=[],o=[];if(r&&r.length)for(var a=0,s=r.length;a<s;a++){var l=this.parseArmature(r[a],t);if(l&&i.push(l.armature),l.animationMap)for(var u in l.animationMap)o.push(l.animationMap[u])}return{armatures:i,animations:o}}}}]),e}();bp.maxId=0,bp.tempBones=[];var _p=function(e){v(n,gmvc.GModule);var t=y(n);function n(){return u(this,n),t.call(this,"library")}return f(n,[{key:"mutations",get:function(){var e;return b(e={},K.GET_USER_ASSETS_SUCCESS,(function(e,t){e.files=t})),b(e,_.UPLOAD_FILE,(function(e,t){e.files[t.id]=t})),e}}],[{key:"getImageFileSize",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===t.width||void 0===t.height){e.next=2;break}return e.abrupt("return",Promise.resolve([t.width,t.height]));case 2:return e.abrupt("return",new Promise((function(e,n){var r=document.createElement("img");r.onload=function(){var n=r.width,i=r.height;t.width=n,t.height=i,e([n,i])},r.onerror=function(e){n(e)},r.src=t.url||t.data})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),n}(),xp=function(){function e(){u(this,e)}return f(e,null,[{key:"isDragonbonesJson",value:function(e){return e.name&&e.armature&&Array.isArray(e.armature)&&e.armature[0]&&("5.0"===e.version||"5.5"===e.version||"4.5"===e.version)}},{key:"generateId",value:function(){return++this.maxId}},{key:"getBoneIdByIndex",value:function(e){return this.tempBones[e].id}},{key:"getBoneIdByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i.id}return 0}},{key:"getIKIdByName",value:function(e,t){for(var n in e){var r=e[n];if(r.name===t)return r.id}return 0}},{key:"getSlotIdByName",value:function(e,t){for(var n in e){var r=e[n];if(r.name===t)return r.id}return 0}},{key:"getBoneByName",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(i.name===t)return i}}},{key:"parseTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:vp.angle2Radio(e.skX||0),skewY:vp.angle2Radio(e.skY||0)}}},{key:"getAssetIdByPath",value:function(e,t){for(var n in t){var r=t[n];if(r&&r.type===E.SPRITE_SHEET&&r.children)for(var i=0,o=r.children.length;i<o;i++){var a=r.children[i];if(a.name===e)return a.id}}return 0}},{key:"parseJsonData",value:function(e,t,n){if(e&&e.armature){var r=e.armature,i=[],o=[];if(this.maxId=n,r&&r.length)for(var a=0,s=r.length;a<s;a++){var l=this.parseJsonArmature(r[a],t);if(l&&i.push(l.armature),l.animationMap)for(var u in l.animationMap)o.push(l.animationMap[u])}return{armatures:i,animations:o}}}},{key:"map2Array",value:function(e){for(var t=Array(),n=0,r=e.ids.length;n<r;n++){var i=e.ids[n];t.push(e.map[i])}return t}},{key:"index2Id",value:function(e,t){for(var n=[],r=0,i=t.length;r<i;r++)n.push(e[t[r]].id);return n}},{key:"parseJsonArmature",value:function(e,t){var n={id:this.generateId(),name:e.name,bones:{ids:[],map:{}},slots:{ids:[],map:{}},skins:{ids:[],map:{}},animations:[],constraint:{ik:{}}},r={};this.tempBones=[];var i=[],o=[];if(e.bone){for(var a=0,s=e.bone.length;a<s;a++){var l=e.bone[a],u=this.parseJsonBone(l);this.tempBones.push(u),i.push(u),o.push(l)}for(var c=0,h=o.length;c<h;c++){var d=o[c],f=i[c];if(d.parent){var p=this.getBoneIdByName(i,d.parent);f.parentId=p}n.bones.ids.push(f.id),n.bones.map[f.id]=f}}if(e.slot)for(var v=0,m=e.slot.length;v<m;v++){var g=e.slot[v],y=this.parseJsonSlot(g,e.skin[0],t),b=this.getBoneIdByName(i,g.parent);y.parentId=b,n.slots.ids.push(y.id),n.slots.map[y.id]=y}if(e.ik)for(var _=0,x=e.ik.length;_<x;_++){var E=e.ik[_],w=this.getBoneByName(i,E.bone),T=this.getBoneByName(i,E.target),S=w.id,k=w.id;1===E.chain?S=w.parentId:k=void 0;var C={id:this.generateId(),name:E.name,parentId:S,targetId:T.id,bendPositive:"false"!==E.bendPositive,weight:E.weight||1};k&&(C.childId=k),n.constraint.ik[C.id]=C}if(e.animation)for(var A=0,I=e.animation.length;A<I;A++){var O=e.animation[A],P=this.parseAnimation(O,i,n.slots,n.id,n.constraint.ik);n.animations.push(P.id),r[P.id]=P}return{armature:n,animationMap:r}}},{key:"parseAnimation",value:function(e,t,n,r,i){var o=this,a={id:this.generateId(),name:e.name,duration:e.duration};if(e.bone){a.bones={};for(var s=0,l=e.bone.length;s<l;s++){var u=e.bone[s],c=this.getBoneIdByName(t,u.name),h={id:c,name:u.name,timelineMap:{}};if(u.frame){var d=this.parseBoneTimeline5_0(u.frame,u);h.timelineMap[d[0].id]=d[0],h.timelineMap[d[1].id]=d[1],h.timelineMap[d[2].id]=d[2]}if(u.translateFrame){var f=this.parseTranslateTimeline(u.translateFrame,u);h.timelineMap[f.id]=f}if(u.scaleFrame){var p=this.parseScaleTimeline(u.scaleFrame,u);h.timelineMap[p.id]=p}if(u.rotateFrame){var v=this.parseRotateTimeline(u.rotateFrame,u);h.timelineMap[v.id]=v}a.bones[c]=h}}if(e.ik){a.iks={};for(var m=0,g=e.ik.length;m<g;m++){var y=e.ik[m],b=this.getIKIdByName(i,y.name),_={id:b,name:y.name,timelineMap:{}};if(y.frame){var x=this.parseTimeline(y.frame,y,k.IK,(function(e,t){return{id:o.generateId(),frame:t,value:{bendPositive:e.bendPositive,weight:e.weight}}}));_.timelineMap[x.id]=x}a.iks[b]=_}}if(e.bone){for(var E=0,w=e.bone.length;E<w;E++){var T=e.bone[E],S=this.getBoneIdByName(t,T.name),C={id:S,name:T.name,timelineMap:{}};if(T.frame){var A=this.parseBoneTimeline5_0(T.frame,T);C.timelineMap[A[0].id]=A[0],C.timelineMap[A[1].id]=A[1],C.timelineMap[A[2].id]=A[2]}if(T.translateFrame){var I=this.parseTranslateTimeline(T.translateFrame,T);C.timelineMap[I.id]=I}if(T.scaleFrame){var O=this.parseScaleTimeline(T.scaleFrame,T);C.timelineMap[O.id]=O}if(T.rotateFrame){var P=this.parseRotateTimeline(T.rotateFrame,T);C.timelineMap[P.id]=P}a.bones[S]=C}a.slots={};for(var M=0,R=e.slot.length;M<R;M++){var N=e.slot[M],D={id:this.getSlotIdByName(n.map,N.name),name:N.name,timelineMap:{}};if(N.colorFrame){var L=this.parseTimeline(N.colorFrame,N,k.COLOR,(function(e,t){var n=bp.parseColor(e.color||e.value),r=vp.mergeAlphaColor(n.color,n.alpha);return{id:o.generateId(),frame:t,value:r}}));D.timelineMap[L.id]=L}if(N.displayFrame){var F=this.parseDisplayIndexTimeline(N.displayFrame,N);D.timelineMap[F.id]=F}a.slots[D.id]=D}}if(e.zOrder){a.zOrder={id:r,name:"zOrder",timelineMap:{}};var B=this.map2Array(n),U=B.length;if(e.zOrder.frame){var H=this.parseTimeline(e.zOrder.frame,{},k.Z_ORDER,(function(e,t){var n=vp.absZOrder(U,e.zOrder),r=o.index2Id(B,n);return{id:o.generateId(),frame:t,value:r}}));a.zOrder.timelineMap[H.id]=H}}if(e.ffd){a.ffds={};for(var j=0,z=e.ffd.length;j<z;j++){var V=e.ffd[j],G=this.getDisplayIdBySlotName(V.slot,n.map),W={id:G,name:V.name,timelineMap:{}};if(V.frame){var X=this.parseFFDTimeline(V.frame,V);W.timelineMap[X.id]=X}a.ffds[G]=W}}if(e.frame){a.event={id:r,name:"event",timelineMap:{}};var Y=this.parseTimeline(e.frame,{},k.EVENT,(function(e,t){var n=e,r={};return n.events&&(r.events=n.events),n.sound&&(r.sound=n.sound),n.action&&(r.action=n.action),{id:o.generateId(),frame:t,value:r}}));a.event.timelineMap[Y.id]=Y}return a}},{key:"getDisplayIdBySlotName",value:function(e,t){for(var n in t){var r=t[n];if(r.name===e)return r.displays.ids[r.displayIndex]}}},{key:"getSlotNameByDisplayId",value:function(e,t){for(var n in t){var r=t[n];if(-1!==r.displays.ids.indexOf(e))return r.name}}},{key:"getSlotByDisplayId",value:function(e,t){for(var n in t){var r=t[n];if(-1!==r.displays.ids.indexOf(e))return r}}},{key:"parseJsonBone",value:function(e){return{name:e.name,id:this.generateId(),parentId:0,transform:this.parseJsonTransform(e.transform||{}),length:e.length||0,inheritRotation:0!=e.inheritRotation,inheritScale:0!=e.inheritScale}}},{key:"parseJsonTransform",value:function(e){return{x:e.x||0,y:e.y||0,scaleX:e.scX||1,scaleY:e.scY||1,skewX:vp.angle2Radio(e.skX||0),skewY:vp.angle2Radio(e.skY||0)}}},{key:"parseJsonSlot",value:function(e,t,n){var r={name:e.name,id:this.generateId(),parentId:0,zOrder:e.z,displayIndex:e.displayIndex||0,displays:this.parseJsonSlotDisplay(e.name,t,n)};if(e.color){var i=bp.parseColor(e.color);16777215!==i.color&&(r.color=i.color),r.alpha=i.alpha}if(e.blendMode){var o=bp.parseBlendMode(e.blendMode);0!==o&&(r.blendMode=o)}return r}},{key:"parseJsonSlotDisplay",value:function(e,t,n){var r=this,i=[],o={};if(t&&t.slot)for(var a=0,s=t.slot.length;a<s;a++){var l=t.slot[a];l.name===e&&l.display.forEach((function(e){var t=r.parseJsonDisplay(e,n);t&&(i.push(t.id),o[t.id]=t)}))}return{ids:i,map:o}}},{key:"parseDBMeshPoint",value:function(e,t){for(var n={},r=0,i=e.length;r<i;r+=2)n[r/2]={vertices:[e[r],e[r+1]],uvs:[t[r],t[r+1]]};return n}},{key:"parseJsonDisplay",value:function(e,t){if("image"===e.type||void 0===e.type)return{name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform),type:T.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t)};if("mesh"===e.type){if(e.share)return{name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform||{}),type:T.IMAGE,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t)};var n=this.parseDBMeshPoint(e.vertices,e.uvs),r=[];for(var i in n){var o=n[i];r.push({x:o.uvs[0],y:o.uvs[1]})}var a={name:e.name,id:this.generateId(),transform:this.parseTransform(e.transform||{}),type:T.MESH,pivot:[.5,.5],assetId:this.getAssetIdByPath(e.path||e.name,t),mesh:{points:n,outlines:e.edges,userEdges:e.userEdges||[],triangles:e.triangles},width:e.width,height:e.height};if(e.slotPose){var s={a:e.slotPose[0],b:e.slotPose[1],c:e.slotPose[2],d:e.slotPose[3],tx:e.slotPose[4],ty:e.slotPose[5]},l=vp.matrix2Transform(s);a.mesh.slotPose=l}if(e.bonePose)for(var u=0,c=e.bonePose.length;u<c;u+=7){var h=e.bonePose[u],d={a:e.bonePose[u+1],b:e.bonePose[u+2],c:e.bonePose[u+3],d:e.bonePose[u+4],tx:e.bonePose[u+5],ty:e.bonePose[u+6]},f=vp.matrix2Transform(d);vp.transform2Matrix(f);a.mesh.bonePose=a.mesh.bonePose||{};var p=this.getBoneIdByIndex(h),v=yp.RIG_BONE_COLOR[h%yp.RIG_BONE_COLOR.length];a.mesh.bonePose[p]={pose:f,color:v}}if(e.weights){for(var m=0,g=0;m<e.weights.length;){var y=e.weights[m],b={};m++;for(var _=0,x=2*y;_<x;_+=2){var E=e.weights[m+_],w=this.getBoneIdByIndex(E),S=e.weights[m+_+1];b[w]=S}a.mesh.boneWeights=a.mesh.boneWeights||{},a.mesh.boneWeights[g]=b,g++,m+=2*y}for(var k in a.mesh.bonePose)for(var C in a.mesh.boneWeights)a.mesh.boneWeights[C][k]||(a.mesh.boneWeights[C][k]=0)}return a}if("boundingBox"===e.type)return null;if("armature"===e.type)return null;throw new Error("unknown display type:"+e.type)}},{key:"parseBoneTimeline5_0",value:function(e,t){for(var n={id:this.generateId(),type:k.TRANSLATE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},r={id:this.generateId(),type:k.SCALE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},i={id:this.generateId(),type:k.ROTATE,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},o=0,a=0,s=e.length;a<s;a++){var l=e[a],u=void 0;if(void 0!==l.tweenEasing&&null!==l.tweenEasing&&(u=[0===l.tweenEasing?1:l.tweenEasing]),l.transform){var c={id:this.generateId(),frame:o,curve:u,value:{x:l.transform.x||0,y:l.transform.y||0}},h={id:this.generateId(),frame:o,curve:u,value:{x:l.transform.scX||1,y:l.transform.scY||1}},d={id:this.generateId(),frame:o,curve:u,value:{rotate:vp.angle2Radio(l.transform.skX||0)}};o+=l.duration,n.frames.push(c.id),n.frameMap[c.id]=c,r.frames.push(h.id),r.frameMap[h.id]=h,i.frames.push(d.id),i.frameMap[d.id]=d}}return[n,r,i]}},{key:"parseTimeline",value:function(e,t,n,r){for(var i={id:this.generateId(),type:n,offset:t.offset,scale:t.scale,frames:[],frameMap:{}},o=0,a=0,s=e.length;a<s;a++){var l=e[a],u=r(l,o);u.curve=bp.parseFrameCurve(l),o+=l.duration||1,i.frames.push(u.id),i.frameMap[u.id]=u}return i}},{key:"parseDisplayIndexTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.DISPLAY_INDEX,(function(e,t){var r=e.value;return r||(r=0),{id:n.generateId(),frame:t,value:r}}))}},{key:"parseFFDTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.FFD,(function(e,t){var r=e,i={},o=r.offset,a=r.vertices;if(a){r.offset%2===1&&(o=r.offset-1,(a=r.vertices.concat()).unshift(0));for(var s=0,l=a.length;s<l;s+=2){var u=a[s],c=a[s+1];if(isNaN(u)&&(u=0),isNaN(c)&&(c=0),0!==u&&0!==c)i[(s+o)/2]=[u,c]}}return{id:n.generateId(),frame:t,value:i}}))}},{key:"parseTranslateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.TRANSLATE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x||0,y:e.y||0}}}))}},{key:"parseScaleTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.SCALE,(function(e,t){return{id:n.generateId(),frame:t,value:{x:e.x||1,y:e.y||1}}}))}},{key:"parseRotateTimeline",value:function(e,t){var n=this;return this.parseTimeline(e,t,k.ROTATE,(function(e,t){var r=0,i=0;return e.clockwise>0?(r=1,i=e.clockwise-1):e.clockwise<0&&(r=-1,i=Math.abs(e.clockwise+1)),{id:n.generateId(),frame:t,value:{rotate:vp.angle2Radio(e.rotate||0),clockwise:r,clockwiseNum:i}}}))}},{key:"exportDragonbonesData",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,i={frameRate:r,name:e.name,isGlobal:0,version:"5.5",armature:[]};if(t){var o=e.armatureMap[t];if(o){var a=this.exportArmature(o,e,n,r);i.armature.push(a)}}else for(var s in e.armatureMap){var l=e.armatureMap[s],u=this.exportArmature(l,e,n,r);i.armature.push(u)}return i}},{key:"exportTimeline",value:function(e,t){for(var n=0,r=[],i=0,o=0,a=e.frames.length;o<a;o++){var s=e.frames[o],l=e.frameMap[s],u=null;o<a-1&&(u=e.frameMap[e.frames[o+1]]);var c=0;u&&(c=u.frame-l.frame),l.frame>n&&(n=l.frame);var h={duration:c},d=this.exportFrameCurve(l.curve);d.curve&&(h.curve=d.curve),void 0!==d.tweenEasing&&(h.tweenEasing=d.tweenEasing);var f=t(l.value);if(f)for(var p in f)h[p]=f[p];i+=c,r.push(h)}return{frames:r,duration:i,maxFrame:n}}},{key:"getBoneIndexById",value:function(e,t){var n=t.map[e].id;return t.ids.indexOf(n)}},{key:"exportDisplay",value:function(e,t,n){var r=n&&n[e.assetId]?n[e.assetId]:e.assetId.toString(),i={name:r,path:r,width:e.width,height:e.height,type:e.type===T.IMAGE?"image":"mesh",transform:{x:e.transform.x,y:e.transform.y,skX:vp.radio2Angle(e.transform.skewX),skY:vp.radio2Angle(e.transform.skewY),scX:e.transform.scaleX,scY:e.transform.scaleY}};if(e.type===T.MESH){i.edges=e.mesh.outlines,i.userEdges=e.mesh.userEdges,i.triangles=e.mesh.triangles;var o=Object.keys(e.mesh.points).length;i.vertices=[],i.uvs=[];for(var a=0,s=o;a<s;a++){var l=e.mesh.points[a];i.vertices[2*a]=l.vertices[0],i.vertices[2*a+1]=l.vertices[1],i.uvs[2*a]=l.uvs[0],i.uvs[2*a+1]=l.uvs[1]}if(e.mesh.slotPose){var u=vp.transform2Matrix(e.mesh.slotPose);i.slotPose=[u.a,u.b,u.c,u.d,u.tx,u.ty]}if(e.mesh.bonePose)for(var c in i.bonePose=[],e.mesh.bonePose){var h=e.mesh.bonePose[c],d=this.getBoneIndexById(c,t),f=vp.transform2Matrix(h.pose);i.bonePose.push(d),i.bonePose.push(f.a),i.bonePose.push(f.b),i.bonePose.push(f.c),i.bonePose.push(f.d),i.bonePose.push(f.tx),i.bonePose.push(f.ty)}if(e.mesh.boneWeights){i.weights=[];var p=Object.keys(e.mesh.boneWeights).length;if(p!==Object.keys(e.mesh.points).length)throw new Error("vertexNum !== checkVertexNum");for(var v=0,m=p;v<m;v++){var g=v,y=e.mesh.boneWeights[g],b=Object.keys(y).length;for(var _ in i.weights.push(b),y){var x=this.getBoneIndexById(_,t);i.weights.push(x),i.weights.push(y[_])}}}}return i}},{key:"getBoneNameById",value:function(e,t){var n=e[t];return n?n.name+"-"+n.id:""}},{key:"exportFrameCurve",value:function(e){if(e){if(1!==e.length)return{curve:e};switch(e[0]){case Zf.None:return{};case Zf.Linear:return{tweenEasing:0};case Zf.EaseInQuad:return{curve:[.5,0,1,1]};case Zf.EaseOutQuad:return{curve:[0,0,.5,1]};case Zf.EaseInOutQuad:return{curve:[.5,0,.5,1]}}}return{tweenEasing:0}}},{key:"exportIK",value:function(e,t){var n=this.getBoneNameById(t.map,e.parentId),r=this.getBoneNameById(t.map,e.targetId),i=(e.childId?this.getBoneNameById(t.map,e.childId):"")||n;if(i&&r){var o={name:e.name,bone:i,target:r,chain:e.childId?1:0};return!1===e.bendPositive&&(o.bendPositive="false"),1!==e.weight&&(o.weight=e.weight),o}}},{key:"exportTransform",value:function(e){var t={x:e.x,y:e.y,skX:vp.radio2Angle(e.skewX),skY:vp.radio2Angle(e.skewY),scX:e.scaleX,scY:e.scaleY};return 0===e.x&&delete t.x,0===e.y&&delete t.y,0===e.skewX&&delete t.skX,0===e.skewY&&delete t.skY,1===e.scaleX&&delete t.scX,1===e.scaleY&&delete t.scY,t}},{key:"exportArmature",value:function(e,t,n){for(var r=this,i={type:"Armature",frameRate:arguments.length>3&&void 0!==arguments[3]?arguments[3]:30,name:e.name,bone:[],slot:[],ik:[],skin:[{name:"",slot:[]}],defaultActions:[],aabb:{x:0,y:0,width:0,height:0},animation:[]},o=0,a=e.bones.ids.length;o<a;o++){var s=e.bones.ids[o],l=e.bones.map[s],u=e.bones.map[l.parentId],c=u?u.name+"-"+u.id:void 0,h={name:l.name+"-"+l.id,parent:c,length:l.length,transform:this.exportTransform(l.transform)};!1===l.inheritRotation&&(h.inheritRotation=!1),!1===l.inheritScale&&(h.inheritScale=!1),i.bone.push(h)}if(e.constraint&&e.constraint.ik)for(var d in e.constraint.ik){var f=e.constraint.ik[d];if(f){var p=this.exportIK(f,e.bones);p&&i.ik.push(p)}}for(var v=0,m=e.slots.ids.length;v<m;v++){var g=e.slots.ids[v],y=e.slots.map[g],b=e.bones.map[y.parentId],_=b?b.name+"-"+b.id:void 0,x={name:y.name+"-"+y.id,parent:_};0!==y.zOrder&&(x.z=y.zOrder),void 0!==y.blendMode&&(x.blendMode=bp.exportDBBlendMode(y.blendMode)),i.slot.push(x)}for(var E=i.skin[0],w=0,T=e.slots.ids.length;w<T;w++){for(var C=e.slots.ids[w],A=e.slots.map[C],I=e.bones.map[A.parentId],O=(I&&(I.name,I.id),{name:A.name+"-"+A.id,display:[]}),P=0,M=A.displays.ids.length;P<M;P++){var R=A.displays.ids[P],N=A.displays.map[R],D=this.exportDisplay(N,e.bones,n);O.display.push(D)}E.slot.push(O)}if(e.animations)for(var L=0,F=e.animations.length;L<F;L++){var B=e.animations[L],U=t.animationMap[B],H={duration:U.duration,name:U.name},j=0;if(U.bones){H.bone=[];var z=0;for(var V in U.bones){var G=U.bones[V];if(G){var W=e.bones.map[G.id],X={name:W.name+"-"+W.id};for(var Y in G.timelineMap){var K=G.timelineMap[Y],q=0;if(K.type===k.TRANSLATE){X.translateFrame=[];var Z=this.exportTimeline(K,(function(e){return{x:e.x,y:e.y}})),$=Z.frames,Q=Z.duration;Z.maxFrame;X.translateFrame=$||[],q=Q}else if(K.type===k.ROTATE){var J=this.exportTimeline(K,(function(e){var t=0;e.clockwise===S.CLOCKWISE?t=e.clockwiseNum+1:e.clockwise===S.COUNTER_CLOCKWISE&&(t=-(e.clockwiseNum+1));var n={rotate:vp.radio2Angle(e.rotate)};return 0!==t&&(n.clockwise=t),n})),ee=J.frames,te=J.duration;J.maxFrame;X.rotateFrame=ee||[],q=te}else if(K.type===k.SCALE){var ne=this.exportTimeline(K,(function(e){return{x:e.x,y:e.y}})),re=ne.frames,ie=ne.duration;ne.maxFrame;X.scaleFrame=re||[],q=ie}q>z&&(z=q)}H.bone.push(X)}}z>j&&(j=z)}if(U.iks)for(var oe in H.ik=[],U.iks){var ae=U.iks[oe],se={name:e.constraint.ik[oe].name};for(var le in ae.timelineMap){var ue=ae.timelineMap[le];if(ue&&ue.type===k.IK){var ce=this.exportTimeline(ue,(function(e){return{bendPositive:e.bendPositive,weight:e.weight}})),he=ce.frames,de=ce.duration;se.frame=he,j<de&&(j=de)}}H.ik.push(se)}if(U.ffds){H.ffd=[];var fe=function(){var t=U.ffds[pe],i=r.getSlotByDisplayId(t.id,e.slots.map),o=i.displays.map[t.id],a=i.name+"-"+i.id;if(!o||!o.mesh)return"continue";var s=0;for(var l in o.mesh.points)s++;var u={name:n&&n[o.assetId]?n[o.assetId]:o.assetId.toString(),slot:a,skin:"",frame:[]};for(var c in t.timelineMap){var h=t.timelineMap[c];if(h.type===k.FFD){var d=r.exportTimeline(h,(function(e){for(var t=[],n=0,r=s;n<r;n++)t[2*n]=0,t[2*n+1]=0;for(var i in e){var o=parseInt(i);e[i];t[2*o]=e[i][0],t[2*o+1]=e[i][1]}return{vertices:t,offset:0}})),f=d.frames,p=d.duration;d.maxFrame;u.frame=f,p>j&&(j=p)}}H.ffd.push(u)};for(var pe in U.ffds)fe()}if(U.slots)for(var ve in H.slot=[],U.slots){var me=U.slots[ve],ge=e.slots.map[ve];if(ge){var ye={name:ge.name+"-"+ge.id};for(var be in me.timelineMap){var _e=me.timelineMap[be];if(_e.type===k.DISPLAY_INDEX){var xe=this.exportTimeline(_e,(function(e){return{value:e}})),Ee=xe.frames,we=xe.duration;ye.displayFrame=Ee,j<we&&(j=we)}else if(_e.type===k.COLOR){var Te=this.exportTimeline(_e,(function(e){return{color:bp.exportDBColor(e)}})),Se=Te.frames,ke=Te.duration;ye.colorFrame=Se,j<ke&&(j=ke)}}H.slot.push(ye)}}if(U.zOrder){H.zOrder={name:"zOrder"};var Ce=U.zOrder;for(var Ae in Ce.timelineMap){var Ie=Ce.timelineMap[Ae];if(Ie.type===k.Z_ORDER){var Oe=this.exportTimeline(Ie,(function(t){var n=e.slots.ids,r={};n.forEach((function(e,t){r[e]=t}));var i=[];return t.forEach((function(e){i.push(r[e])})),{zOrder:vp.relativeZOrder(i)}})),Pe=Oe.frames,Me=Oe.duration;H.zOrder.frame=Pe,j<Me&&(j=Me)}}}H.duration||(H.duration=j),i.animation.push(H)}return i}}]),e}();xp.maxId=0,xp.tempBones=[];var Ep=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,"assetMap")}return f(n,[{key:"findAsset",value:function(e,t){for(var n in this.state){var r=this.state[n];if(r.name===e&&r.type===t)return r}}},{key:"splitFileNameStringAndNumber",value:function(e){for(var t=e.length-1;t>=0;t--)if(isNaN(Number(e[t])))return[e.slice(0,t+1),Number(e.slice(t+1))]}},{key:"createUniqueAssetName",value:function(e,t){for(var n=Pt(this.splitFileNameStringAndNumber(e),2),r=n[0],i=n[1],o=r+ ++i;this.findAsset(o,t);)o=r+ ++i;return o}},{key:"createTextureAsset",value:function(e,t){var n=e.data;if(n){var r=JSON.parse(n),i=[];if(r.SubTexture){for(var o in r.SubTexture){var a=r.SubTexture[o];if(a){var s={fileIds:[e.fileIds[0],t.fileIds[0]],id:this.getId(),type:E.SUB_TEXTURE,name:a.name,data:a};i.push(s)}}return{fileIds:[e.fileIds[0],t.fileIds[0]],id:e.id,type:E.SPRITE_SHEET,name:e.name,children:i}}}}},{key:"canCreateTextureAsset",value:function(e){switch(e.type){case E.PNG:var t=this.findAsset(e.name,E.JSON);if(t){var n=this.createTextureAsset(t,e);if(n)return[n,t]}break;case E.JSON:var r=this.findAsset(e.name,E.PNG);if(r){var i=this.createTextureAsset(e,r);if(i)return[i,r]}}return[void 0,void 0]}},{key:"mutations",get:function(){var e;return b(e={},_.TEST,(function(e,t){})),b(e,K.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.assetMap;Object.assign(e,n)}})),b(e,N.ADD_ASSET,(function(e,t){e[t.id]=t})),b(e,N.DEL_ASSET,(function(e,t){delete e[t.id]})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},R.ADD_FILE,(function(e,n){var r=n,i=t.findAsset(r.name,r.type);if(i||r.type!==E.PNG&&r.type!==E.JSON||(i=t.findAsset(r.name,E.SPRITE_SHEET)),i)yf.warn("\u5e93\u91cc\u5b58\u5728\u76f8\u540c\u540d\u79f0\u7684\u8d44\u6e90\uff0c\u8bf7\u91cd\u65b0\u547d\u540d\u540e\u518d\u5bfc\u5165");else{var o=Pt(t.canCreateTextureAsset(r),2),a=o[0],s=o[1];a&&s&&(e.commit(N.DEL_ASSET,s),r=a);r.name;switch(r.type){case E.JPEG:case E.JPG:case E.PNG:case E.JSON:case E.SPRITE_SHEET:e.commit(N.ADD_ASSET,r)}}})),b(e,R.LOAD_DRAGON_BONES_DATA,(function(e,t){var n=e,r=e.rootState.editor.idGen+1,i=bp.parseProjData(t,n.state,r);if(i){var o=i.armatures,a=i.animations;null!==a&&void 0!==a&&a.length&&e.commit(M.ADD_ANIMATIONS,a),null!==o&&void 0!==o&&o.length&&(e.commit(D.ADD_ARMATURES,{armatures:o}),e.commit(D.SELECT_ARMATURE,{armatureId:o[0].id}))}e.rootState.editor.idGen=bp.maxId})),b(e,R.LOAD_DRAGON_BONES_JSON_DATA,(function(e,t){var n=e,r=e.rootState.editor.idGen+1,i=xp.parseJsonData(t.data,n.state,r);if(i){var o=i.armatures,a=i.animations;null!==a&&void 0!==a&&a.length&&e.commit(M.ADD_ANIMATIONS,a),null!==o&&void 0!==o&&o.length&&(e.commit(D.ADD_ARMATURES,{armatures:o}),e.commit(D.SELECT_ARMATURE,{armatureId:o[0].id}))}e.rootState.editor.idGen=xp.maxId})),e}}],[{key:"getAssetSize",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===E.JPEG||e.t0===E.PNG||e.t0===E.JPG?3:e.t0===E.SPRITE_SHEET?8:e.t0===E.SUB_TEXTURE?13:14;break;case 3:return r=t.fileIds[0],i=n.files[r],e.next=7,_p.getImageFileSize(i);case 7:case 12:return e.abrupt("return",e.sent);case 8:return o=t.fileIds[0],a=n.files[o],e.next=12,_p.getImageFileSize(a);case 13:return e.abrupt("return",Promise.resolve([t.data.width,t.data.height]));case 14:return e.abrupt("return",Promise.resolve([0,0]));case 15:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(mp),wp=function(e){return e[e.BestShortSideFit=0]="BestShortSideFit",e[e.BestLongSideFit=1]="BestLongSideFit",e[e.BestAreaFit=2]="BestAreaFit",e[e.BottomLeftRule=3]="BottomLeftRule",e[e.ContactPointRule=4]="ContactPointRule",e}({}),Tp=function(){function e(){u(this,e),this.binWidth=0,this.binHeight=0,this.allowRotations=!1,this.usedRectangles=[],this.freeRectangles=[],this.factory={x:0,y:0,width:0,height:0,isRotated:!1},this.score1=0,this.score2=0,this.bestShortSideFit=void 0,this.bestLongSideFit=void 0}return f(e,[{key:"setCanRotate",value:function(e){this.allowRotations=e}},{key:"init",value:function(e,t){this.count(e)%1!=0||this.count(t),this.binWidth=e,this.binHeight=t;var n=Re({},this.factory);n.x=0,n.y=0,n.width=e,n.height=t,this.usedRectangles.length=0,this.freeRectangles.length=0,this.freeRectangles.push(n)}},{key:"count",value:function(e){return e>=2?this.count(e/2):e}},{key:"insert",value:function(e,t,n,r){var i=Re({},this.factory);switch(this.score1=0,this.score2=0,r){case wp.BestShortSideFit:i=this.findPositionForNewNodeBestShortSideFit(e,t,n);break;case wp.BottomLeftRule:i=this.findPositionForNewNodeBottomLeft(e,t,this.score1,this.score2,n);break;case wp.ContactPointRule:i=this.findPositionForNewNodeContactPoint(e,t,this.score1,n);break;case wp.BestLongSideFit:i=this.findPositionForNewNodeBestLongSideFit(e,t,this.score2,this.score1,n);break;case wp.BestAreaFit:i=this.findPositionForNewNodeBestAreaFit(e,t,this.score1,this.score2,n)}return 0==i.height||this.placeRectangle(i),i}},{key:"insertGroup",value:function(e,t){for(;e.length>0;){for(var n,r=Number.MAX_VALUE,i=Number.MAX_VALUE,o=-1,a=0;a<e.length;++a){var s=this.scoreRectangle(e[a].width,e[a].height,t,0,0,e[a].data);(0<r||0==r&&0<i)&&(r=0,i=0,n=s,o=a)}if(-1==o)return;this.placeRectangle(n),e.splice(o,1)}}},{key:"placeRectangle",value:function(e){for(var t=this.freeRectangles.length,n=0;n<t;n++)this.splitFreeNode(this.freeRectangles[n],e)&&(this.freeRectangles.splice(n,1),--n,--t);this.pruneFreeList(),this.usedRectangles.push(e)}},{key:"scoreRectangle",value:function(e,t,n,r,i,o){var a=Re({},this.factory);switch(r=Number.MAX_VALUE,i=Number.MAX_VALUE,n){case wp.BestShortSideFit:a=this.findPositionForNewNodeBestShortSideFit(e,t,o);break;case wp.BottomLeftRule:a=this.findPositionForNewNodeBottomLeft(e,t,r,i,o);break;case wp.ContactPointRule:a=this.findPositionForNewNodeContactPoint(e,t,r,o),r=-r;break;case wp.BestLongSideFit:a=this.findPositionForNewNodeBestLongSideFit(e,t,i,r,o);break;case wp.BestAreaFit:a=this.findPositionForNewNodeBestAreaFit(e,t,r,i,o)}return 0==a.height&&(r=Number.MAX_VALUE,i=Number.MAX_VALUE),a}},{key:"occupancy",value:function(){for(var e=0,t=0;t<this.usedRectangles.length;t++)e+=this.usedRectangles[t].width*this.usedRectangles[t].height;return e/(this.binWidth*this.binHeight)}},{key:"findPositionForNewNodeBottomLeft",value:function(e,t,n,r,i){var o,a,s=Re({},this.factory);s.data=i,n=Number.MAX_VALUE;for(var l=0;l<this.freeRectangles.length;l++)(o=this.freeRectangles[l]).width>=e&&o.height>=t?((a=o.y+t)<n||a==n&&o.x<r)&&(s.x=o.x,s.y=o.y,s.width=e,s.height=t,s.data=i,n=a,r=o.x,s.isRotated=!1):this.allowRotations&&o.width>=t&&o.height>=e&&((a=o.y+e)<n||a==n&&o.x<r)&&(s.x=o.x,s.y=o.y,s.width=t,s.height=e,s.data=i,n=a,r=o.x,s.isRotated=!0);return s}},{key:"findPositionForNewNodeBestShortSideFit",value:function(e,t,n){var r,i,o,a,s,l=Re({},this.factory);l.data=n,this.bestShortSideFit=Number.MAX_VALUE,this.bestLongSideFit=this.score2;for(var u=0;u<this.freeRectangles.length;u++){var c,h,d,f;(r=this.freeRectangles[u]).width>=e&&r.height>=t&&(i=Math.abs(r.width-e),o=Math.abs(r.height-t),a=Math.min(i,o),s=Math.max(i,o),(a<this.bestShortSideFit||a==this.bestShortSideFit&&s<this.bestLongSideFit)&&(l.x=r.x,l.y=r.y,l.width=e,l.height=t,l.data=n,l.isRotated=!1,this.bestShortSideFit=a,this.bestLongSideFit=s)),this.allowRotations&&r.width>=t&&r.height>=e&&(c=Math.abs(r.width-t),h=Math.abs(r.height-e),d=Math.min(c,h),f=Math.max(c,h),(d<this.bestShortSideFit||d==this.bestShortSideFit&&f<this.bestLongSideFit)&&(l.x=r.x,l.y=r.y,l.width=t,l.height=e,l.data=n,l.isRotated=!0,this.bestShortSideFit=d,this.bestLongSideFit=f))}return l}},{key:"findPositionForNewNodeBestLongSideFit",value:function(e,t,n,r,i){var o,a,s,l,u,c=Re({},this.factory);c.data=i,this.bestLongSideFit=Number.MAX_VALUE;for(var h=0;h<this.freeRectangles.length;h++)(o=this.freeRectangles[h]).width>=e&&o.height>=t&&(a=Math.abs(o.width-e),s=Math.abs(o.height-t),l=Math.min(a,s),((u=Math.max(a,s))<this.bestLongSideFit||u==this.bestLongSideFit&&l<this.bestShortSideFit)&&(c.x=o.x,c.y=o.y,c.width=e,c.height=t,c.data=i,c.isRotated=!1,this.bestShortSideFit=l,this.bestLongSideFit=u)),this.allowRotations&&o.width>=t&&o.height>=e&&(a=Math.abs(o.width-t),s=Math.abs(o.height-e),l=Math.min(a,s),((u=Math.max(a,s))<this.bestLongSideFit||u==this.bestLongSideFit&&l<this.bestShortSideFit)&&(c.x=o.x,c.y=o.y,c.width=t,c.height=e,c.data=i,c.isRotated=!0,this.bestShortSideFit=l,this.bestLongSideFit=u));return c}},{key:"findPositionForNewNodeBestAreaFit",value:function(e,t,n,r,i){var o,a,s,l,u,c=Re({},this.factory);c.data=i,n=Number.MAX_VALUE;for(var h=0;h<this.freeRectangles.length;h++)u=(o=this.freeRectangles[h]).width*o.height-e*t,o.width>=e&&o.height>=t&&(a=Math.abs(o.width-e),s=Math.abs(o.height-t),l=Math.min(a,s),(u<n||u==n&&l<this.bestShortSideFit)&&(c.x=o.x,c.y=o.y,c.width=e,c.height=t,c.data=i,c.isRotated=!1,this.bestShortSideFit=l,n=u)),this.allowRotations&&o.width>=t&&o.height>=e&&(a=Math.abs(o.width-t),s=Math.abs(o.height-e),l=Math.min(a,s),(u<n||u==n&&l<this.bestShortSideFit)&&(c.x=o.x,c.y=o.y,c.width=t,c.height=e,c.data=i,c.isRotated=!0,this.bestShortSideFit=l,n=u));return c}},{key:"commonIntervalLength",value:function(e,t,n,r){return t<n||r<e?0:Math.min(t,r)-Math.max(e,n)}},{key:"contactPointScoreNode",value:function(e,t,n,r){var i,o=0;0!=e&&e+n!=this.binWidth||(o+=r),0!=t&&t+r!=this.binHeight||(o+=n);for(var a=0;a<this.usedRectangles.length;a++)(i=this.usedRectangles[a]).x!=e+n&&i.x+i.width!=e||(o+=this.commonIntervalLength(i.y,i.y+i.height,t,t+r)),i.y!=t+r&&i.y+i.height!=t||(o+=this.commonIntervalLength(i.x,i.x+i.width,e,e+n));return o}},{key:"findPositionForNewNodeContactPoint",value:function(e,t,n,r){var i,o,a=Re({},this.factory);a.data=r,n=-1;for(var s=0;s<this.freeRectangles.length;s++)(i=this.freeRectangles[s]).width>=e&&i.height>=t&&(o=this.contactPointScoreNode(i.x,i.y,e,t))>n&&(a.x=i.x,a.y=i.y,a.width=e,a.height=t,a.data=r,a.isRotated=!1,n=o),this.allowRotations&&i.width>=t&&i.height>=e&&(o=this.contactPointScoreNode(i.x,i.y,t,e))>n&&(a.x=i.x,a.y=i.y,a.width=t,a.height=e,a.data=r,a.isRotated=!0,n=o);return a}},{key:"splitFreeNode",value:function(e,t){return!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y)&&(t.x<e.x+e.width&&t.x+t.width>e.x&&(t.y>e.y&&t.y<e.y+e.height&&((n=Re({},e)).height=t.y-n.y,this.freeRectangles.push(n)),t.y+t.height<e.y+e.height&&((n=Re({},e)).y=t.y+t.height,n.height=e.y+e.height-(t.y+t.height),this.freeRectangles.push(n))),t.y<e.y+e.height&&t.y+t.height>e.y&&(t.x>e.x&&t.x<e.x+e.width&&((n=Re({},e)).width=t.x-n.x,this.freeRectangles.push(n)),t.x+t.width<e.x+e.width&&((n=Re({},e)).x=t.x+t.width,n.width=e.x+e.width-(t.x+t.width),this.freeRectangles.push(n))),!0);var n}},{key:"pruneFreeList",value:function(){for(var e=0;e<this.freeRectangles.length;e++)for(var t=e+1;t<this.freeRectangles.length;t++){if(this.isContainedIn(this.freeRectangles[e],this.freeRectangles[t])){this.freeRectangles.splice(e,1);break}this.isContainedIn(this.freeRectangles[t],this.freeRectangles[e])&&this.freeRectangles.splice(t,1)}}},{key:"isContainedIn",value:function(e,t){return e.x>=t.x&&e.y>=t.y&&e.x+e.width<=t.x+t.width&&e.y+e.height<=t.y+t.height}}]),e}(),Sp=function(e){return e.AREA="area",e.SIZE="size",e}({}),kp=function(e){return e.SUCCESS="success",e.SHEET_TO_BIG="toBig",e.SHEET_EMPTY="sheetEmpty",e}({}),Cp=function(){function e(){u(this,e)}return f(e,null,[{key:"result",get:function(){return this._result.concat()}},{key:"results",get:function(){return this._results}},{key:"resultType",get:function(){return this._resultType}},{key:"resultSize",get:function(){return this._resultSize}},{key:"setMaxSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this._maxWidth=e,this._maxHeight=t}},{key:"setSortOn",value:function(e){this.sortType=e}},{key:"setGap",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._gapX=e,this._gapY=t}},{key:"setCanRotate",value:function(e){this.maxRectsCore.setCanRotate(e)}},{key:"setLayoutMath",value:function(e){this.layoutMath=e}},{key:"setFactoryInstance",value:function(e){this.maxRectsCore.factory=e}},{key:"insertRectangles",value:function(e){this._result=null,this._results=[];for(var t=[],n=0;n<e.length;n++)e[n].width>0&&e[n].height>0&&t.push(e[n]);if(t.length!=e.length)return this._resultType=kp.SHEET_EMPTY,void this.log("\u6709\u56fe\u7684\u5c3a\u5bf8\u4e0d\u5bf9\uff0c\u5bbd\u548c\u9ad8\u90fd\u4e0d\u80fd\u4e3a\u96f6");if(this.log("\u52a0\u8f7d\u4e86:"+e.length+" \u4e2a\u56fe\u7247"),this._gapX>0||this._gapY>0)for(n=0;n<t.length;n++)t[n].width+=this._gapX,t[n].height+=this._gapY;for(this.log("\u95f4\u9699\u4e3a "+this._gapX+" "+this._gapY),this._maxW=0,this._maxH=0,this.area=0,n=0;n<t.length;n++)t[n].width>this._maxW&&(this._maxW=t[n].width),t[n].height>this._maxH&&(this._maxH=t[n].height),this.area+=t[n].width*t[n].height;for(this.log("maxW:"+this._maxW+" maxH:"+this._maxH+" this.area:"+this.area),this._w=1,this._h=1;Math.pow(2,this._w)<this._maxW;)this._w++;for(;Math.pow(2,this._h)<this._maxH;)this._h++;for(this.log("\u7b2c\u4e00\u6b21\u8fc7\u6ee4 \u5bbd\u5e42:"+this._w+" \u5bbd:"+Math.pow(2,this._w)+" \u9ad8\u5e42:"+this._h+" \u9ad8:"+Math.pow(2,this._h)),this._baseW=this._w,this._baseH=this._h;Math.pow(2,this._w)*Math.pow(2,this._h)<this.area;)this.calculateNext();if(this._baseW=this._w,this._baseH=this._h,this.log("\u7b2c\u4e8c\u6b21\u8fc7\u6ee4 \u5bbd\u5e42:"+this._w+" \u5bbd:"+Math.pow(2,this._w)+" \u9ad8\u5e42:"+this._h+" \u9ad8:"+Math.pow(2,this._h)),this.sortType==Sp.AREA){for(n=0;n<t.length;n++)for(var r=n;r<t.length;r++)if(t[n].height*t[n].width<t[r].height*t[r].width){var i=t[n];t[n]=t[r],t[r]=i}}else if(this.sortType==Sp.SIZE)if(this._maxW>this._maxH)for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].width<t[r].width&&(i=t[n],t[n]=t[r],t[r]=i);else for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].height<t[r].height&&(i=t[n],t[n]=t[r],t[r]=i);for(var o=!1,a=0,s=!1;!o;){var l=Math.pow(2,this._w),u=Math.pow(2,this._h),c=t.concat();this.log(a+"\u6b21\u8ba1\u7b97\uff0c\u5bbd:"+l+" \u9ad8:"+u+"     \u5bbd\u5e42:"+this._w+" \u9ad8\u5e42:"+this._h),this.maxRectsCore.init(l,u),this.maxRectsCore.insertGroup(c,this.layoutMath);var h=this.maxRectsCore.usedRectangles;o=!0;var d=!1;for(n=0;n<h.length;n++)if(0==h[n].x&&0==h[n].y&&0==h[n].width&&0==h[n].height){d=!0;break}d&&(this.calculateNext(),o=!1),a++,(l>this._maxWidth&&this._maxWidth>0||u>this._maxHeight&&this._maxHeight>0)&&(o=!0,s=!0)}if(s)return this._resultType=kp.SHEET_TO_BIG,void this.log("\u56fe\u592a\u591a\u4e86\uff0c\u6700\u5927\u5c3a\u5bf8\u90fd\u4e0d\u591f");if(this.log("\u6210\u529f\u4e86\u6700\u7ec8\u5bbd\u5ea6:"+l+" \u6700\u7ec8\u9ad8\u5ea6:"+u),this._resultSize.x=l,this._resultSize.y=u,this._resultType=kp.SUCCESS,this._result=this.maxRectsCore.usedRectangles,this._gapX>0||this._gapY>0)for(n=0;n<this._result.length;n++)this._result[n].width-=this._gapX,this._result[n].height-=this._gapY,this._result[n].x+=Math.ceil(this._gapX/2),this._result[n].y+=Math.ceil(this._gapY/2);this._results.push(this._result)}},{key:"calculateNext",value:function(){if(this._maxW>this._maxH){if(this._w==this._h)return this._h++,void(this._w=this._baseW);if(this._h>this._w+1)return void this._w++;if(this._h==this._w+1)return this._w=this._h,void(this._h=this._baseH);if(this._w>this._h+1)return void this._h++;if(this._w==this._h+1)return void(this._h=this._w)}else{if(this._h==this._w)return this._w++,void(this._h=this._baseH);if(this._w>this._h+1)return void this._h++;if(this._w==this._h+1)return this._h=this._w,void(this._w=this._baseW);if(this._h>this._w+1)return void this._w++;if(this._h==this._w+1)return void(this._w=this._h)}}},{key:"insertRectanglesToMult",value:function(e){this._result=null,this._results=[];for(var t=[],n=0;n<e.length;n++)e[n].width>0&&e[n].height>0&&t.push(e[n]);if(t.length!=e.length)return this._resultType=kp.SHEET_EMPTY,void this.log("\u6709\u56fe\u7684\u5c3a\u5bf8\u4e0d\u5bf9\uff0c\u5bbd\u548c\u9ad8\u90fd\u4e0d\u80fd\u4e3a\u96f6");if(this.log("\u52a0\u8f7d\u4e86:"+e.length+" \u4e2a\u56fe\u7247"),this._gapX>0||this._gapY>0)for(n=0;n<t.length;n++)t[n].width+=this._gapX,t[n].height+=this._gapY;this.log("\u95f4\u9699\u4e3a "+this._gapX+" "+this._gapY),this._maxW=0,this._maxH=0;for(n=0;n<t.length;n++)t[n].width>this._maxW&&(this._maxW=t[n].width),t[n].height>this._maxH&&(this._maxH=t[n].height),this.area+=t[n].width*t[n].height;if(this.log("maxW:"+this._maxW+" maxH:"+this._maxH+" this.area:"+this.area),this._maxWidth<this._maxW||this._maxHeight<this._maxH)this._resultType=kp.SHEET_TO_BIG;else{if(this.sortType==Sp.AREA){for(n=0;n<t.length;n++)for(var r=n;r<t.length;r++)if(t[n].height*t[n].width<t[r].height*t[r].width){var i=t[n];t[n]=t[r],t[r]=i}}else if(this.sortType==Sp.SIZE)if(this._maxW>this._maxH)for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].width<t[r].width&&(i=t[n],t[n]=t[r],t[r]=i);else for(n=0;n<t.length;n++)for(r=n;r<t.length;r++)t[n].height<t[r].height&&(i=t[n],t[n]=t[r],t[r]=i);for(var o=!1,a=0,s=!1;!o;){var l=this._maxWidth,u=this._maxHeight,c=t.concat();this.log(a+"\u6b21\u8ba1\u7b97\uff0c\u5bbd:"+l+" \u9ad8:"+u+"     \u5bbd\u5e42:"+this._w+" \u9ad8\u5e42:"+this._h),this.maxRectsCore.init(l,u),this.maxRectsCore.insertGroup(c,this.layoutMath);var h=this.maxRectsCore.usedRectangles;t=[];var d=[];for(n=0;n<h.length;n++)0===h[n].x&&0===h[n].y&&0===h[n].width&&0===h[n].height?t.push(f(h[n].data)):d.push(h[n]);t.length<=0&&(o=!0),d.length<=0?(s=!0,o=!0):this._results.push(d),a++}if(s)return this._resultType=kp.SHEET_TO_BIG,void this.log("\u56fe\u592a\u591a\u4e86\uff0c\u6700\u5927\u5c3a\u5bf8\u90fd\u4e0d\u591f");if(this.log("\u6210\u529f\u4e86\u6700\u7ec8\u5bbd\u5ea6:"+l+" \u6700\u7ec8\u9ad8\u5ea6:"+u),this._resultSize.x=l,this._resultSize.y=u,this._resultType=kp.SUCCESS,this._gapX>0||this._gapY>0)for(n=0;n<this._results.length;n++)for(r=0;r<this._results[n].length;r++)this._results[n][r].x+=this._gapX,this._results[n][r].y+=this._gapY}function f(t){for(var n=0,r=e.length;n<r;n++)if(e[n].data==t)return e[n];return null}}},{key:"log",value:function(e){this.isLog}}]),e}();Cp.maxRectsCore=new Tp,Cp._maxWidth=-1,Cp._maxHeight=-1,Cp.isLog=!1,Cp._resultSize=void 0,Cp.sortType=Sp.AREA,Cp._gapX=0,Cp._gapY=0,Cp.layoutMath=wp.BottomLeftRule,Cp._resultType="",Cp._result=void 0,Cp._results=[],Cp._w=1,Cp._h=1,Cp._maxW=0,Cp._maxH=0,Cp.area=0,Cp._baseW=1,Cp._baseH=1;var Ap,Ip=function(e){return e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e}(Ip||{}),Op=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e}(Op||{}),Pp=function(e){return e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e}(Pp||{}),Mp=function(e){return e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e}(Mp||{}),Rp=function(e){return e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e}(Rp||{}),Np=function(e){return e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e}(Np||{}),Dp=function(e){return e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e}(Dp||{}),Lp=function(e){return e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e}(Lp||{}),Fp=function(e){return e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e}(Fp||{}),Bp=function(e){return e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e}(Bp||{}),Up=function(e){return e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e}(Up||{}),Hp=function(e){return e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e}(Hp||{}),jp=function(e){return e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e}(jp||{}),zp=function(e){return e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e}(zp||{}),Vp=function(e){return e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e}(Vp||{}),Gp=function(e){return e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e}(Gp||{}),Wp=function(e){return e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e}(Wp||{}),Xp=function(e){return e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e}(Xp||{}),Yp=function(e){return e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e}(Yp||{}),Kp=function(e){return e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e}(Kp||{}),qp={createCanvas:function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},getCanvasRenderingContext2D:function(){return CanvasRenderingContext2D},getWebGLRenderingContext:function(){return WebGLRenderingContext},getNavigator:function(){return navigator},getBaseUrl:function(){var e;return null!==(e=document.baseURI)&&void 0!==e?e:window.location.href},getFontFaceSet:function(){return document.fonts},fetch:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){return fetch(e,t)})),parseXML:function(e){return(new DOMParser).parseFromString(e,"text/xml")}},Zp={ADAPTER:qp,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1},$p=/iPhone/i,Qp=/iPod/i,Jp=/iPad/i,ev=/\biOS-universal(?:.+)Mac\b/i,tv=/\bAndroid(?:.+)Mobile\b/i,nv=/Android/i,rv=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,iv=/Silk/i,ov=/Windows Phone/i,av=/\bWindows(?:.+)ARM\b/i,sv=/BlackBerry/i,lv=/BB10/i,uv=/Opera Mini/i,cv=/\b(CriOS|Chrome)(?:.+)Mobile/i,hv=/Mobile(?:.+)Firefox\b/i,dv=function(e){return"undefined"!==typeof e&&"MacIntel"===e.platform&&"number"===typeof e.maxTouchPoints&&e.maxTouchPoints>1&&"undefined"===typeof MSStream};function fv(e){var t={userAgent:"",platform:"",maxTouchPoints:0};e||"undefined"===typeof navigator?"string"===typeof e?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0}):t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=t.userAgent,r=n.split("[FBAN");"undefined"!==typeof r[1]&&(n=r[0]),"undefined"!==typeof(r=n.split("Twitter"))[1]&&(n=r[0]);var i=function(e){return function(t){return t.test(e)}}(n),o={apple:{phone:i($p)&&!i(ov),ipod:i(Qp),tablet:!i($p)&&(i(Jp)||dv(t))&&!i(ov),universal:i(ev),device:(i($p)||i(Qp)||i(Jp)||i(ev)||dv(t))&&!i(ov)},amazon:{phone:i(rv),tablet:!i(rv)&&i(iv),device:i(rv)||i(iv)},android:{phone:!i(ov)&&i(rv)||!i(ov)&&i(tv),tablet:!i(ov)&&!i(rv)&&!i(tv)&&(i(iv)||i(nv)),device:!i(ov)&&(i(rv)||i(iv)||i(tv)||i(nv))||i(/\bokhttp\b/i)},windows:{phone:i(ov),tablet:i(av),device:i(ov)||i(av)},other:{blackberry:i(sv),blackberry10:i(lv),opera:i(uv),firefox:i(hv),chrome:i(cv),device:i(sv)||i(lv)||i(uv)||i(hv)||i(cv)},any:!1,phone:!1,tablet:!1};return o.any=o.apple.device||o.android.device||o.windows.device||o.other.device,o.phone=o.apple.phone||o.android.phone||o.windows.phone,o.tablet=o.apple.tablet||o.android.tablet||o.windows.tablet,o}var pv=(null!==(Ap=fv.default)&&void 0!==Ap?Ap:fv)(globalThis.navigator);Zp.RETINA_PREFIX=/@([0-9\.]+)x/,Zp.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var vv=r(548),mv=r(6583),gv=r(2770),yv={parse:gv.Qc,format:gv.WU,resolve:gv.DB};function bv(e){if("string"!==typeof e)throw new TypeError("Path must be a string. Received ".concat(JSON.stringify(e)))}function _v(e){return e.split("?")[0].split("#")[0]}var xv,Ev={toPosix:function(e){return function(e,t,n){return e.replace(new RegExp(function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"g"),n)}(e,"\\","/")},isUrl:function(e){return/^https?:/.test(this.toPosix(e))},isDataUrl:function(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol:function(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol:function(e){bv(e),e=this.toPosix(e);var t="",n=/^file:\/\/\//.exec(e),r=/^[^/:]+:\/\//.exec(e),i=/^[^/:]+:\//.exec(e);if(n||r||i){var o=(null===n||void 0===n?void 0:n[0])||(null===r||void 0===r?void 0:r[0])||(null===i||void 0===i?void 0:i[0]);t=o,e=e.slice(o.length)}return t},toAbsolute:function(e,t,n){if(this.isDataUrl(e))return e;var r=_v(this.toPosix(null!==t&&void 0!==t?t:Zp.ADAPTER.getBaseUrl())),i=_v(this.toPosix(null!==n&&void 0!==n?n:this.rootname(r)));return bv(e),(e=this.toPosix(e)).startsWith("/")?Ev.join(i,e.slice(1)):this.isAbsolute(e)?e:this.join(r,e)},normalize:function(e){if(bv(e=this.toPosix(e)),0===e.length)return".";var t="",n=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));var r=e.endsWith("/");return e=function(e,t){for(var n="",r=0,i=-1,o=0,a=-1,s=0;s<=e.length;++s){if(s<e.length)a=e.charCodeAt(s);else{if(47===a)break;a=47}if(47===a){if(i===s-1||1===o);else if(i!==s-1&&2===o){if(n.length<2||2!==r||46!==n.charCodeAt(n.length-1)||46!==n.charCodeAt(n.length-2))if(n.length>2){var l=n.lastIndexOf("/");if(l!==n.length-1){-1===l?(n="",r=0):r=(n=n.slice(0,l)).length-1-n.lastIndexOf("/"),i=s,o=0;continue}}else if(2===n.length||1===n.length){n="",r=0,i=s,o=0;continue}t&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+="/".concat(e.slice(i+1,s)):n=e.slice(i+1,s),r=s-i-1;i=s,o=0}else 46===a&&-1!==o?++o:o=-1}return n}(e,!1),e.length>0&&r&&(e+="/"),n?"/".concat(e):t+e},isAbsolute:function(e){return bv(e),e=this.toPosix(e),!!this.hasProtocol(e)||e.startsWith("/")},join:function(){if(0===arguments.length)return".";for(var e,t=0;t<arguments.length;++t){var n=t<0||arguments.length<=t?void 0:arguments[t];if(bv(n),n.length>0)if(void 0===e)e=n;else{var r,i=null!==(r=t-1<0||arguments.length<=t-1?void 0:arguments[t-1])&&void 0!==r?r:"";this.extname(i)?e+="/../".concat(n):e+="/".concat(n)}}return void 0===e?".":this.normalize(e)},dirname:function(e){if(bv(e),0===e.length)return".";for(var t=(e=this.toPosix(e)).charCodeAt(0),n=47===t,r=-1,i=!0,o=this.getProtocol(e),a=e,s=(e=e.slice(o.length)).length-1;s>=1;--s)if(47===(t=e.charCodeAt(s))){if(!i){r=s;break}}else i=!1;return-1===r?n?"/":this.isUrl(a)?o+e:o:n&&1===r?"//":o+e.slice(0,r)},rootname:function(e){bv(e);var t="";if(t=(e=this.toPosix(e)).startsWith("/")?"/":this.getProtocol(e),this.isUrl(e)){var n=e.indexOf("/",t.length);(t=-1!==n?e.slice(0,n):e).endsWith("/")||(t+="/")}return t},basename:function(e,t){bv(e),t&&bv(t),e=_v(this.toPosix(e));var n,r=0,i=-1,o=!0;if(void 0!==t&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var a=t.length-1,s=-1;for(n=e.length-1;n>=0;--n){var l=e.charCodeAt(n);if(47===l){if(!o){r=n+1;break}}else-1===s&&(o=!1,s=n+1),a>=0&&(l===t.charCodeAt(a)?-1===--a&&(i=n):(a=-1,i=s))}return r===i?i=s:-1===i&&(i=e.length),e.slice(r,i)}for(n=e.length-1;n>=0;--n)if(47===e.charCodeAt(n)){if(!o){r=n+1;break}}else-1===i&&(o=!1,i=n+1);return-1===i?"":e.slice(r,i)},extname:function(e){bv(e);for(var t=-1,n=0,r=-1,i=!0,o=0,a=(e=_v(this.toPosix(e))).length-1;a>=0;--a){var s=e.charCodeAt(a);if(47!==s)-1===r&&(i=!1,r=a+1),46===s?-1===t?t=a:1!==o&&(o=1):-1!==t&&(o=-1);else if(!i){n=a+1;break}}return-1===t||-1===r||0===o||1===o&&t===r-1&&t===n+1?"":e.slice(t,r)},parse:function(e){bv(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(0===e.length)return t;var n,r=(e=_v(this.toPosix(e))).charCodeAt(0),i=this.isAbsolute(e);t.root=this.rootname(e),n=i||this.hasProtocol(e)?1:0;for(var o=-1,a=0,s=-1,l=!0,u=e.length-1,c=0;u>=n;--u)if(47!==(r=e.charCodeAt(u)))-1===s&&(l=!1,s=u+1),46===r?-1===o?o=u:1!==c&&(c=1):-1!==o&&(c=-1);else if(!l){a=u+1;break}return-1===o||-1===s||0===c||1===c&&o===s-1&&o===a+1?-1!==s&&(t.base=t.name=0===a&&i?e.slice(1,s):e.slice(a,s)):(0===a&&i?(t.name=e.slice(1,o),t.base=e.slice(1,s)):(t.name=e.slice(a,o),t.base=e.slice(a,s)),t.ext=e.slice(o,s)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},wv={};function Tv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;if(!wv[t]){var r=(new Error).stack;"undefined"===typeof r||(r=r.split("\n").splice(n).join("\n"),console.groupCollapsed),wv[t]=!0}}function Sv(){Tv("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function kv(){Tv("7.0.0",'sayHello is deprecated, please use Renderer\'s "hello" option')}function Cv(){return"undefined"===typeof xv&&(xv=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:Zp.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{var t,n;if(!Zp.ADAPTER.getWebGLRenderingContext())return!1;var r=Zp.ADAPTER.createCanvas(),i=r.getContext("webgl",e)||r.getContext("experimental-webgl",e),o=!(null===(t=i)||void 0===t||null===(n=t.getContextAttributes())||void 0===n||!n.stencil);if(i){var a=i.getExtension("WEBGL_lose_context");a&&a.loseContext()}return i=null,o}catch(Pv){return!1}}()),xv}var Av={grad:.9,turn:360,rad:360/(2*Math.PI)},Iv=function(e){return"string"==typeof e?e.length>0:"number"==typeof e},Ov=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*e)/n+0},Pv=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),e>n?n:e>t?e:t},Mv=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Rv=function(e){return{r:Pv(e.r,0,255),g:Pv(e.g,0,255),b:Pv(e.b,0,255),a:Pv(e.a)}},Nv=function(e){return{r:Ov(e.r),g:Ov(e.g),b:Ov(e.b),a:Ov(e.a,3)}},Dv=/^#([0-9a-f]{3,8})$/i,Lv=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},Fv=function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=Math.max(t,n,r),a=o-Math.min(t,n,r),s=a?o===t?(n-r)/a:o===n?2+(r-t)/a:4+(t-n)/a:0;return{h:60*(s<0?s+6:s),s:o?a/o*100:0,v:o/255*100,a:i}},Bv=function(e){var t=e.h,n=e.s,r=e.v,i=e.a;t=t/360*6,n/=100,r/=100;var o=Math.floor(t),a=r*(1-n),s=r*(1-(t-o)*n),l=r*(1-(1-t+o)*n),u=o%6;return{r:255*[r,s,a,a,l,r][u],g:255*[l,r,r,s,a,a][u],b:255*[a,a,l,r,r,s][u],a:i}},Uv=function(e){return{h:Mv(e.h),s:Pv(e.s,0,100),l:Pv(e.l,0,100),a:Pv(e.a)}},Hv=function(e){return{h:Ov(e.h),s:Ov(e.s),l:Ov(e.l),a:Ov(e.a,3)}},jv=function(e){return Bv((n=(t=e).s,{h:t.h,s:(n*=((r=t.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:t.a}));var t,n,r},zv=function(e){return{h:(t=Fv(e)).h,s:(i=(200-(n=t.s))*(r=t.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:t.a};var t,n,r,i},Vv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Gv=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Wv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Xv=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Yv={string:[[function(e){var t=Dv.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:4===e.length?Ov(parseInt(e[3]+e[3],16)/255,2):1}:6===e.length||8===e.length?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:8===e.length?Ov(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=Wv.exec(e)||Xv.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Rv({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=Vv.exec(e)||Gv.exec(e);if(!t)return null;var n,r,i=Uv({h:(n=t[1],r=t[2],void 0===r&&(r="deg"),Number(n)*(Av[r]||1)),s:Number(t[3]),l:Number(t[4]),a:void 0===t[5]?1:Number(t[5])/(t[6]?100:1)});return jv(i)},"hsl"]],object:[[function(e){var t=e.r,n=e.g,r=e.b,i=e.a,o=void 0===i?1:i;return Iv(t)&&Iv(n)&&Iv(r)?Rv({r:Number(t),g:Number(n),b:Number(r),a:Number(o)}):null},"rgb"],[function(e){var t=e.h,n=e.s,r=e.l,i=e.a,o=void 0===i?1:i;if(!Iv(t)||!Iv(n)||!Iv(r))return null;var a=Uv({h:Number(t),s:Number(n),l:Number(r),a:Number(o)});return jv(a)},"hsl"],[function(e){var t=e.h,n=e.s,r=e.v,i=e.a,o=void 0===i?1:i;if(!Iv(t)||!Iv(n)||!Iv(r))return null;var a=function(e){return{h:Mv(e.h),s:Pv(e.s,0,100),v:Pv(e.v,0,100),a:Pv(e.a)}}({h:Number(t),s:Number(n),v:Number(r),a:Number(o)});return Bv(a)},"hsv"]]},Kv=function(e,t){for(var n=0;n<t.length;n++){var r=t[n][0](e);if(r)return[r,t[n][1]]}return[null,void 0]},qv=function(e){return"string"==typeof e?Kv(e.trim(),Yv.string):"object"==typeof e&&null!==e?Kv(e,Yv.object):[null,void 0]},Zv=function(e,t){var n=zv(e);return{h:n.h,s:Pv(n.s+100*t,0,100),l:n.l,a:n.a}},$v=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Qv=function(e,t){var n=zv(e);return{h:n.h,s:n.s,l:Pv(n.l+100*t,0,100),a:n.a}},Jv=function(){function e(e){this.parsed=qv(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return null!==this.parsed},e.prototype.brightness=function(){return Ov($v(this.rgba),2)},e.prototype.isDark=function(){return $v(this.rgba)<.5},e.prototype.isLight=function(){return $v(this.rgba)>=.5},e.prototype.toHex=function(){return t=(e=Nv(this.rgba)).r,n=e.g,r=e.b,o=(i=e.a)<1?Lv(Ov(255*i)):"","#"+Lv(t)+Lv(n)+Lv(r)+o;var e,t,n,r,i,o},e.prototype.toRgb=function(){return Nv(this.rgba)},e.prototype.toRgbString=function(){return t=(e=Nv(this.rgba)).r,n=e.g,r=e.b,(i=e.a)<1?"rgba("+t+", "+n+", "+r+", "+i+")":"rgb("+t+", "+n+", "+r+")";var e,t,n,r,i},e.prototype.toHsl=function(){return Hv(zv(this.rgba))},e.prototype.toHslString=function(){return t=(e=Hv(zv(this.rgba))).h,n=e.s,r=e.l,(i=e.a)<1?"hsla("+t+", "+n+"%, "+r+"%, "+i+")":"hsl("+t+", "+n+"%, "+r+"%)";var e,t,n,r,i},e.prototype.toHsv=function(){return e=Fv(this.rgba),{h:Ov(e.h),s:Ov(e.s),v:Ov(e.v),a:Ov(e.a,3)};var e},e.prototype.invert=function(){return em({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},e.prototype.saturate=function(e){return void 0===e&&(e=.1),em(Zv(this.rgba,e))},e.prototype.desaturate=function(e){return void 0===e&&(e=.1),em(Zv(this.rgba,-e))},e.prototype.grayscale=function(){return em(Zv(this.rgba,-1))},e.prototype.lighten=function(e){return void 0===e&&(e=.1),em(Qv(this.rgba,e))},e.prototype.darken=function(e){return void 0===e&&(e=.1),em(Qv(this.rgba,-e))},e.prototype.rotate=function(e){return void 0===e&&(e=15),this.hue(this.hue()+e)},e.prototype.alpha=function(e){return"number"==typeof e?em({r:(t=this.rgba).r,g:t.g,b:t.b,a:e}):Ov(this.rgba.a,3);var t},e.prototype.hue=function(e){var t=zv(this.rgba);return"number"==typeof e?em({h:e,s:t.s,l:t.l,a:t.a}):Ov(t.h)},e.prototype.isEqual=function(e){return this.toHex()===em(e).toHex()},e}(),em=function(e){return e instanceof Jv?e:new Jv(e)},tm=[];!function(e){e.forEach((function(e){tm.indexOf(e)<0&&(e(Jv,Yv),tm.push(e))}))}([function(e,t){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var o={};e.prototype.toName=function(t){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var i,a,s=r[this.toHex()];if(s)return s;if(null==t?void 0:t.closest){var l=this.toRgb(),u=1/0,c="black";if(!o.length)for(var h in n)o[h]=new e(n[h]).toRgb();for(var d in n){var f=(i=l,a=o[d],Math.pow(i.r-a.r,2)+Math.pow(i.g-a.g,2)+Math.pow(i.b-a.b,2));f<u&&(u=f,c=d)}return c}},t.string.push([function(t){var r=t.toLowerCase(),i="transparent"===r?"#0000":n[r];return i?new e(i).toRgb():null},"name"])}]);var nm=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;u(this,e),this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}return f(e,[{key:"red",get:function(){return this._components[0]}},{key:"green",get:function(){return this._components[1]}},{key:"blue",get:function(){return this._components[2]}},{key:"alpha",get:function(){return this._components[3]}},{key:"setValue",value:function(e){return this.value=e,this}},{key:"value",get:function(){return this._value},set:function(t){if(t instanceof e)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(null===t)throw new Error("Cannot set PIXI.Color#value to null");null!==this._value&&this.isSourceEqual(this._value,t)||(this.normalize(t),this._value=this.cloneSource(t))}}},{key:"cloneSource",value:function(e){return"string"===typeof e||"number"===typeof e||e instanceof Number||null===e?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):"object"===typeof e&&null!==e?Re({},e):e}},{key:"isSourceEqual",value:function(e,t){var n=typeof e;if(n!==typeof t)return!1;if("number"===n||"string"===n||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length===t.length&&e.every((function(e,n){return e===t[n]}));if(null!==e&&null!==t){var r=Object.keys(e),i=Object.keys(t);return r.length===i.length&&r.every((function(n){return e[n]===t[n]}))}return e===t}},{key:"toRgba",value:function(){var e=Pt(this._components,4);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},{key:"toRgb",value:function(){var e=Pt(this._components,3);return{r:e[0],g:e[1],b:e[2]}}},{key:"toRgbaString",value:function(){var e=Pt(this.toUint8RgbArray(),3),t=e[0],n=e[1],r=e[2];return"rgba(".concat(t,",").concat(n,",").concat(r,",").concat(this.alpha,")")}},{key:"toUint8RgbArray",value:function(e){var t,n=Pt(this._components,3),r=n[0],i=n[1],o=n[2];return(e=null!==(t=e)&&void 0!==t?t:[])[0]=Math.round(255*r),e[1]=Math.round(255*i),e[2]=Math.round(255*o),e}},{key:"toRgbArray",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:[];var n=Pt(this._components,3),r=n[0],i=n[1],o=n[2];return e[0]=r,e[1]=i,e[2]=o,e}},{key:"toNumber",value:function(){return this._int}},{key:"toLittleEndianNumber",value:function(){var e=this._int;return(e>>16)+(65280&e)+((255&e)<<16)}},{key:"multiply",value:function(t){var n=Pt(e.temp.setValue(t)._components,4),r=n[0],i=n[1],o=n[2],a=n[3];return this._components[0]*=r,this._components[1]*=i,this._components[2]*=o,this._components[3]*=a,this.refreshInt(),this._value=null,this}},{key:"premultiply",value:function(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}},{key:"toPremultiplied",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===e)return(255<<24)+this._int;if(0===e)return t?0:this._int;var n=this._int>>16&255,r=this._int>>8&255,i=255&this._int;return t&&(n=n*e+.5|0,r=r*e+.5|0,i=i*e+.5|0),(255*e<<24)+(n<<16)+(r<<8)+i}},{key:"toHex",value:function(){var e=this._int.toString(16);return"#".concat("000000".substring(0,6-e.length)+e)}},{key:"toHexa",value:function(){var e=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}},{key:"setAlpha",value:function(e){return this._components[3]=this._clamp(e),this}},{key:"round",value:function(e){var t=Pt(this._components,3),n=t[0],r=t[1],i=t[2];return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}},{key:"toArray",value:function(e){var t;e=null!==(t=e)&&void 0!==t?t:[];var n=Pt(this._components,4),r=n[0],i=n[1],o=n[2],a=n[3];return e[0]=r,e[1]=i,e[2]=o,e[3]=a,e}},{key:"normalize",value:function(t){var n,r,i,o;if(("number"===typeof t||t instanceof Number)&&t>=0&&t<=16777215){n=(t>>16&255)/255,r=(t>>8&255)/255,i=(255&t)/255,o=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4){var a=Pt(t=this._clamp(t),4);n=a[0],r=a[1],i=a[2];var s=a[3];o=void 0===s?1:s}else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4){var l=Pt(t=this._clamp(t,0,255),4);n=l[0],r=l[1],i=l[2];var u=l[3];o=void 0===u?255:u,n/=255,r/=255,i/=255,o/=255}else if("string"===typeof t||"object"===typeof t){if("string"===typeof t){var c=e.HEX_PATTERN.exec(t);c&&(t="#".concat(c[2]))}var h=em(t);if(h.isValid()){var d=h.rgba;n=d.r,r=d.g,i=d.b,o=d.a,n/=255,r/=255,i/=255}}if(void 0===n)throw new Error("Unable to convert color ".concat(t));this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=o,this.refreshInt()}},{key:"refreshInt",value:function(){this._clamp(this._components);var e=Pt(this._components,3),t=e[0],n=e[1],r=e[2];this._int=(255*t<<16)+(255*n<<8)+(255*r|0)}},{key:"_clamp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"===typeof e?Math.min(Math.max(e,t),n):(e.forEach((function(r,i){e[i]=Math.min(Math.max(r,t),n)})),e)}}]),e}(),rm=nm;function im(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Tv("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),rm.shared.setValue(e).toRgbArray(t)}function om(e){return Tv("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),rm.shared.setValue(e).toHex()}function am(e){return Tv("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),rm.shared.setValue(e).toNumber()}function sm(e){return Tv("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),rm.shared.setValue(e).toNumber()}rm.shared=new nm,rm.temp=new nm,rm.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;var lm=function(){for(var e=[],t=[],n=0;n<32;n++)e[n]=n,t[n]=n;e[Mp.NORMAL_NPM]=Mp.NORMAL,e[Mp.ADD_NPM]=Mp.ADD,e[Mp.SCREEN_NPM]=Mp.SCREEN,t[Mp.NORMAL]=Mp.NORMAL_NPM,t[Mp.ADD]=Mp.ADD_NPM,t[Mp.SCREEN]=Mp.SCREEN_NPM;var r=[];return r.push(t),r.push(e),r}();function um(e,t){return lm[t?1:0][e]}function cm(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Tv("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),rm.shared.setValue(e).premultiply(t,r).toArray(null!==n&&void 0!==n?n:new Float32Array(4))}function hm(e,t){return Tv("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),rm.shared.setValue(e).toPremultiplied(t)}function dm(e,t,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return Tv("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),rm.shared.setValue(e).premultiply(t,r).toArray(null!==n&&void 0!==n?n:new Float32Array(4))}var fm=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function pm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=6*e;if((t=t||new Uint16Array(n)).length!==n)throw new Error("Out buffer length is incorrect, got ".concat(t.length," and expected ").concat(n));for(var r=0,i=0;r<n;r+=6,i+=4)t[r+0]=i+0,t[r+1]=i+1,t[r+2]=i+2,t[r+3]=i+0,t[r+4]=i+2,t[r+5]=i+3;return t}function vm(e){if(4===e.BYTES_PER_ELEMENT)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(2===e.BYTES_PER_ELEMENT){if(e instanceof Uint16Array)return"Uint16Array"}else if(1===e.BYTES_PER_ELEMENT&&e instanceof Uint8Array)return"Uint8Array";return null}var mm={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};function gm(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;for(var a=new ArrayBuffer(4*n),s=null,l=0,u=0;u<e.length;u++){var c=t[u],h=e[u],d=vm(h);i[d]||(i[d]=new mm[d](a)),s=i[d];for(var f=0;f<h.length;f++){s[(f/c|0)*r+l+f%c]=h[f]}l+=c}return new Float32Array(a)}function ym(e){return e+=0===e?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1}function bm(e){return!(e&e-1)&&!!e}function _m(e){var t=(e>65535?1:0)<<4,n=((e>>>=t)>255?1:0)<<3;return t|=n,t|=n=((e>>>=n)>15?1:0)<<2,(t|=n=((e>>>=n)>3?1:0)<<1)|(e>>>=n)>>1}function xm(e,t,n){var r,i=e.length;if(!(t>=i||0===n)){var o=i-(n=t+n>i?i-t:n);for(r=t;r<o;++r)e[r]=e[r+n];e.length=o}}function Em(e){return 0===e?0:e<0?-1:1}var wm=0;function Tm(){return++wm}var Sm=function(){function e(t,n,r,i){u(this,e),this.left=t,this.top=n,this.right=r,this.bottom=i}return f(e,[{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}},{key:"isEmpty",value:function(){return this.left===this.right||this.top===this.bottom}}]),e}(),km=Sm;km.EMPTY=new Sm(0,0,0,0);var Cm={},Am=Object.create(null),Im=Object.create(null);function Om(){var e;for(e in Am)Am[e].destroy();for(e in Im)Im[e].destroy()}function Pm(){var e;for(e in Am)delete Am[e];for(e in Im)delete Im[e]}var Mm,Rm=function(){function e(t,n,r){u(this,e),this._canvas=Zp.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||Zp.RESOLUTION,this.resize(t,n)}return f(e,[{key:"clear",value:function(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}},{key:"resize",value:function(e,t){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(t*this.resolution)}},{key:"destroy",value:function(){this._context=null,this._canvas=null}},{key:"width",get:function(){return this._checkDestroyed(),this._canvas.width},set:function(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}},{key:"height",get:function(){return this._checkDestroyed(),this._canvas.height},set:function(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}},{key:"canvas",get:function(){return this._checkDestroyed(),this._canvas}},{key:"context",get:function(){return this._checkDestroyed(),this._context}},{key:"_checkDestroyed",value:function(){if(null===this._canvas)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}]),e}();function Nm(e,t,n){for(var r=0,i=4*n*t;r<t;++r,i+=4)if(0!==e[i+3])return!1;return!0}function Dm(e,t,n,r,i){for(var o=4*t,a=r,s=r*o+4*n;a<=i;++a,s+=o)if(0!==e[s+3])return!1;return!0}function Lm(e){var t=e.width,n=e.height,r=e.getContext("2d",{willReadFrequently:!0});if(null===r)throw new TypeError("Failed to get canvas 2D context");for(var i=r.getImageData(0,0,t,n).data,o=0,a=0,s=t-1,l=n-1;a<n&&Nm(i,t,a);)++a;if(a===n)return km.EMPTY;for(;Nm(i,t,l);)--l;for(;Dm(i,t,o,a,l);)++o;for(;Dm(i,t,s,a,l);)--s;return++s,++l,new km(o,a,s,l)}function Fm(e){var t=Lm(e),n=t.width,r=t.height,i=null;if(!t.isEmpty()){var o=e.getContext("2d");if(null===o)throw new TypeError("Failed to get canvas 2D context");i=o.getImageData(t.left,t.top,n,r)}return{width:n,height:r,data:i}}function Bm(e){var t=fm.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}function Um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:globalThis.location;if(e.startsWith("data:"))return"";t=t||globalThis.location,Mm||(Mm=document.createElement("a")),Mm.href=e;var n=yv.parse(Mm.href),r=!n.port&&""===t.port||n.port===t.port;return n.hostname===t.hostname&&r&&n.protocol===t.protocol?"":"anonymous"}function Hm(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=null===(t=Zp.RETINA_PREFIX)||void 0===t?void 0:t.exec(e);return r?parseFloat(r[1]):n}function jm(){return jm="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},jm.apply(this,arguments)}var zm=function(e){return e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e}(zm||{}),Vm=function(e){if("function"===typeof e||"object"===typeof e&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e=Re(Re({},"object"!==typeof e.extension?{type:e.extension}:e.extension),{},{ref:e})}if("object"!==typeof e)throw new Error("Invalid extension type");return"string"===typeof(e=Re({},e)).type&&(e.type=[e.type]),e},Gm=function(e,t){var n;return null!==(n=Vm(e).priority)&&void 0!==n?n:t},Wm={_addHandlers:{},_removeHandlers:{},_queue:{},remove:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(Vm).forEach((function(t){t.type.forEach((function(n){var r,i;return null===(r=(i=e._removeHandlers)[n])||void 0===r?void 0:r.call(i,t)}))})),this},add:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.map(Vm).forEach((function(t){t.type.forEach((function(n){var r=e._addHandlers,i=e._queue;r[n]?r[n](t):(i[n]=i[n]||[],i[n].push(t))}))})),this},handle:function(e,t,n){var r=this._addHandlers,i=this._removeHandlers;if(r[e]||i[e])throw new Error("Extension type ".concat(e," already has a handler"));r[e]=t,i[e]=n;var o=this._queue;return o[e]&&(o[e].forEach((function(e){return t(e)})),delete o[e]),this},handleByMap:function(e,t){return this.handle(e,(function(e){t[e.name]=e.ref}),(function(e){delete t[e.name]}))},handleByList:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return this.handle(e,(function(e){t.includes(e.ref)||(t.push(e.ref),t.sort((function(e,t){return Gm(t,n)-Gm(e,n)})))}),(function(e){var n=t.indexOf(e.ref);-1!==n&&t.splice(n,1)}))}},Xm=function(){function e(t){u(this,e),"number"===typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}return f(e,[{key:"int8View",get:function(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}},{key:"uint8View",get:function(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}},{key:"int16View",get:function(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}},{key:"uint16View",get:function(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}},{key:"int32View",get:function(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}},{key:"view",value:function(e){return this["".concat(e,"View")]}},{key:"destroy",value:function(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}}],[{key:"sizeOf",value:function(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error("".concat(e," isn't a valid view type"))}}}]),e}(),Ym=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function Km(e){for(var t="",n=0;n<e;++n)n>0&&(t+="\nelse "),n<e-1&&(t+="if(test == ".concat(n,".0){}"));return t}function qm(e,t){if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");for(var n=t.createShader(t.FRAGMENT_SHADER);;){var r=Ym.replace(/%forloop%/gi,Km(e));if(t.shaderSource(n,r),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;e=e/2|0}return e}var Zm=function(){function e(){u(this,e),this.data=0,this.blendMode=Mp.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}return f(e,[{key:"blend",get:function(){return!!(1&this.data)},set:function(e){!!(1&this.data)!==e&&(this.data^=1)}},{key:"offsets",get:function(){return!!(2&this.data)},set:function(e){!!(2&this.data)!==e&&(this.data^=2)}},{key:"culling",get:function(){return!!(4&this.data)},set:function(e){!!(4&this.data)!==e&&(this.data^=4)}},{key:"depthTest",get:function(){return!!(8&this.data)},set:function(e){!!(8&this.data)!==e&&(this.data^=8)}},{key:"depthMask",get:function(){return!!(32&this.data)},set:function(e){!!(32&this.data)!==e&&(this.data^=32)}},{key:"clockwiseFrontFace",get:function(){return!!(16&this.data)},set:function(e){!!(16&this.data)!==e&&(this.data^=16)}},{key:"blendMode",get:function(){return this._blendMode},set:function(e){this.blend=e!==Mp.NONE,this._blendMode=e}},{key:"polygonOffset",get:function(){return this._polygonOffset},set:function(e){this.offsets=!!e,this._polygonOffset=e}},{key:"toString",value:function(){return"[@pixi/core:State blendMode=".concat(this.blendMode," clockwiseFrontFace=").concat(this.clockwiseFrontFace," culling=").concat(this.culling," depthMask=").concat(this.depthMask," polygonOffset=").concat(this.polygonOffset,"]")}}],[{key:"for2d",value:function(){var t=new e;return t.depthTest=!1,t.blend=!0,t}}]),e}(),$m=[];function Qm(e,t){if(!e)return null;var n="";if("string"===typeof e){var r=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);r&&(n=r[1].toLowerCase())}for(var i=$m.length-1;i>=0;--i){var o=$m[i];if(o.test&&o.test(e,n))return new o(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}var Jm=function(){function e(t){u(this,e),this.items=[],this._name=t,this._aliasCount=0}return f(e,[{key:"emit",value:function(e,t,n,r,i,o,a,s){if(arguments.length>8)throw new Error("max arguments reached");var l=this.name,u=this.items;this._aliasCount++;for(var c=0,h=u.length;c<h;c++)u[c][l](e,t,n,r,i,o,a,s);return u===this.items&&this._aliasCount--,this}},{key:"ensureNonAliasedItems",value:function(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}},{key:"add",value:function(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}},{key:"remove",value:function(e){var t=this.items.indexOf(e);return-1!==t&&(this.ensureNonAliasedItems(),this.items.splice(t,1)),this}},{key:"contains",value:function(e){return this.items.includes(e)}},{key:"removeAll",value:function(){return this.ensureNonAliasedItems(),this.items.length=0,this}},{key:"destroy",value:function(){this.removeAll(),this.items=null,this._name=null}},{key:"empty",get:function(){return 0===this.items.length}},{key:"name",get:function(){return this._name}}]),e}();Object.defineProperties(Jm.prototype,{dispatch:{value:Jm.prototype.emit},run:{value:Jm.prototype.emit}});var eg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this._width=t,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Jm("setRealSize"),this.onUpdate=new Jm("update"),this.onError=new Jm("onError")}return f(e,[{key:"bind",value:function(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}},{key:"unbind",value:function(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}},{key:"resize",value:function(e,t){e===this._width&&t===this._height||(this._width=e,this._height=t,this.onResize.emit(e,t))}},{key:"valid",get:function(){return!!this._width&&!!this._height}},{key:"update",value:function(){this.destroyed||this.onUpdate.emit()}},{key:"load",value:function(){return Promise.resolve(this)}},{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}},{key:"style",value:function(e,t,n){return!1}},{key:"dispose",value:function(){}},{key:"destroy",value:function(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}}],[{key:"test",value:function(e,t){return!1}}]),e}(),tg=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o=r||{},a=o.width,s=o.height;if(!a||!s)throw new Error("BufferResource width or height invalid");return(i=t.call(this,a,s)).data=e,i}return f(n,[{key:"upload",value:function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===jp.UNPACK);var i=t.realWidth,o=t.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(t.target,0,0,0,i,o,t.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(t.target,0,n.internalFormat,i,o,0,t.format,n.type,this.data)),!0}},{key:"dispose",value:function(){this.data=null}}],[{key:"test",value:function(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}]),n}(eg),ng={scaleMode:Bp.NEAREST,format:Np.RGBA,alphaMode:jp.NPM},rg=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;u(this,n),e=t.call(this);var o=i=Object.assign({},n.defaultOptions,i),a=o.alphaMode,s=o.mipmap,l=o.anisotropicLevel,c=o.scaleMode,h=o.width,d=o.height,f=o.wrapMode,p=o.format,v=o.type,m=o.target,g=o.resolution,y=o.resourceOptions;return!r||r instanceof eg||((r=Qm(r,y)).internal=!0),e.resolution=g||Zp.RESOLUTION,e.width=Math.round((h||0)*e.resolution)/e.resolution,e.height=Math.round((d||0)*e.resolution)/e.resolution,e._mipmap=s,e.anisotropicLevel=l,e._wrapMode=f,e._scaleMode=c,e.format=p,e.type=v,e.target=m,e.alphaMode=a,e.uid=Tm(),e.touched=0,e.isPowerOfTwo=!1,e._refreshPOT(),e._glTextures={},e.dirtyId=0,e.dirtyStyleId=0,e.cacheId=null,e.valid=h>0&&d>0,e.textureCacheIds=[],e.destroyed=!1,e.resource=null,e._batchEnabled=0,e._batchLocation=0,e.parentTextureArray=null,e.setResource(r),e}return f(n,[{key:"realWidth",get:function(){return Math.round(this.width*this.resolution)}},{key:"realHeight",get:function(){return Math.round(this.height*this.resolution)}},{key:"mipmap",get:function(){return this._mipmap},set:function(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}},{key:"scaleMode",get:function(){return this._scaleMode},set:function(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}},{key:"wrapMode",get:function(){return this._wrapMode},set:function(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}},{key:"setStyle",value:function(e,t){var n;return void 0!==e&&e!==this.scaleMode&&(this.scaleMode=e,n=!0),void 0!==t&&t!==this.mipmap&&(this.mipmap=t,n=!0),n&&this.dirtyStyleId++,this}},{key:"setSize",value:function(e,t,n){return n=n||this.resolution,this.setRealSize(e*n,t*n,n)}},{key:"setRealSize",value:function(e,t,n){return this.resolution=n||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}},{key:"_refreshPOT",value:function(){this.isPowerOfTwo=bm(this.realWidth)&&bm(this.realHeight)}},{key:"setResolution",value:function(e){var t=this.resolution;return t===e||(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT()),this}},{key:"setResource",value:function(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}},{key:"update",value:function(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}},{key:"onError",value:function(e){this.emit("error",this,e)}},{key:"destroy",value:function(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Im[this.cacheId],delete Am[this.cacheId],this.cacheId=null),this.dispose(),n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}},{key:"dispose",value:function(){this.emit("dispose",this)}},{key:"castToBaseTexture",value:function(){return this}}],[{key:"from",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp.STRICT_TEXTURE_CACHE,i="string"===typeof e,o=null;if(i)o=e;else{if(!e._pixiId){var a=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(a,"_").concat(Tm())}o=e._pixiId}var s=Im[o];if(i&&r&&!s)throw new Error('The cacheId "'.concat(o,'" does not exist in BaseTextureCache.'));return s||((s=new n(e,t)).cacheId=o,n.addToCache(s,o)),s}},{key:"fromBuffer",value:function(e,t,r,i){e=e||new Float32Array(t*r*4);var o=new tg(e,{width:t,height:r}),a=e instanceof Float32Array?Lp.FLOAT:Lp.UNSIGNED_BYTE;return new n(o,Object.assign({},ng,{type:a},i))}},{key:"addToCache",value:function(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Im[t]&&Im[t],Im[t]=e)}},{key:"removeFromCache",value:function(e){if("string"===typeof e){var t=Im[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Im[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)delete Im[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}}]),n}(vv),ig=rg;ig.defaultOptions={mipmap:Hp.POW2,anisotropicLevel:0,scaleMode:Bp.LINEAR,wrapMode:Up.CLAMP,alphaMode:jp.UNPACK,target:Dp.TEXTURE_2D,format:Np.RGBA,type:Lp.UNSIGNED_BYTE},ig._globalBatch=0;var og=f((function e(){u(this,e),this.texArray=null,this.blend=0,this.type=Rp.TRIANGLES,this.start=0,this.size=0,this.data=null})),ag=0,sg=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u(this,e),this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=ag++,this.disposeRunner=new Jm("disposeBuffer")}return f(e,[{key:"update",value:function(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroy",value:function(){this.dispose(),this.data=null}},{key:"index",get:function(){return this.type===Kp.ELEMENT_ARRAY_BUFFER},set:function(e){this.type=e?Kp.ELEMENT_ARRAY_BUFFER:Kp.ARRAY_BUFFER}}],[{key:"from",value:function(t){return t instanceof Array&&(t=new Float32Array(t)),new e(t)}}]),e}(),lg=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Lp.FLOAT,o=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;u(this,e),this.buffer=t,this.size=n,this.normalized=r,this.type=i,this.stride=o,this.start=a,this.instance=s,this.divisor=l}return f(e,[{key:"destroy",value:function(){this.buffer=null}}],[{key:"from",value:function(t,n,r,i,o){return new e(t,n,r,i,o)}}]),e}(),ug={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array};var cg={5126:4,5123:2,5121:1},hg=0,dg={Float32Array:Float32Array,Uint32Array:Uint32Array,Int32Array:Int32Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array},fg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e),this.buffers=t,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=hg++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Jm("disposeGeometry"),this.refCount=0}return f(e,[{key:"addAttribute",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(!t)throw new Error("You must pass a buffer when creating an attribute");t instanceof sg||(t instanceof Array&&(t=new Float32Array(t)),t=new sg(t));var l=e.split("|");if(l.length>1){for(var u=0;u<l.length;u++)this.addAttribute(l[u],t,n,r,i);return this}var c=this.buffers.indexOf(t);return-1===c&&(this.buffers.push(t),c=this.buffers.length-1),this.attributes[e]=new lg(c,n,r,i,o,a,s),this.instanced=this.instanced||s,this}},{key:"getAttribute",value:function(e){return this.attributes[e]}},{key:"getBuffer",value:function(e){return this.buffers[this.getAttribute(e).buffer]}},{key:"addIndex",value:function(e){return e instanceof sg||(e instanceof Array&&(e=new Uint16Array(e)),e=new sg(e)),e.type=Kp.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}},{key:"getIndex",value:function(){return this.indexBuffer}},{key:"interleave",value:function(){if(1===this.buffers.length||2===this.buffers.length&&this.indexBuffer)return this;var e,t=[],n=[],r=new sg;for(e in this.attributes){var i=this.attributes[e],o=this.buffers[i.buffer];t.push(o.data),n.push(i.size*cg[i.type]/4),i.buffer=0}for(r.data=function(e,t){for(var n=0,r=0,i={},o=0;o<e.length;o++)r+=t[o],n+=e[o].length;for(var a=new ArrayBuffer(4*n),s=null,l=0,u=0;u<e.length;u++){var c=t[u],h=e[u],d=vm(h);i[d]||(i[d]=new ug[d](a)),s=i[d];for(var f=0;f<h.length;f++)s[(f/c|0)*r+l+f%c]=h[f];l+=c}return new Float32Array(a)}(t,n),e=0;e<this.buffers.length;e++)this.buffers[e]!==this.indexBuffer&&this.buffers[e].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}},{key:"getSize",value:function(){for(var e in this.attributes){var t=this.attributes[e];return this.buffers[t.buffer].data.length/(t.stride/4||t.size)}return 0}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroy",value:function(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}},{key:"clone",value:function(){for(var t=new e,n=0;n<this.buffers.length;n++)t.buffers[n]=new sg(this.buffers[n].data.slice(0));for(var r in this.attributes){var i=this.attributes[r];t.attributes[r]=new lg(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=Kp.ELEMENT_ARRAY_BUFFER),t}}],[{key:"merge",value:function(t){for(var n,r=new e,i=[],o=[],a=[],s=0;s<t.length;s++){n=t[s];for(var l=0;l<n.buffers.length;l++)o[l]=o[l]||0,o[l]+=n.buffers[l].data.length,a[l]=0}for(var u=0;u<n.buffers.length;u++)i[u]=new(dg[vm(n.buffers[u].data)])(o[u]),r.buffers[u]=new sg(i[u]);for(var c=0;c<t.length;c++){n=t[c];for(var h=0;h<n.buffers.length;h++)i[h].set(n.buffers[h].data,a[h]),a[h]+=n.buffers[h].data.length}if(r.attributes=n.attributes,n.indexBuffer){r.indexBuffer=r.buffers[n.buffers.indexOf(n.indexBuffer)],r.indexBuffer.type=Kp.ELEMENT_ARRAY_BUFFER;for(var d=0,f=0,p=0,v=0,m=0;m<n.buffers.length;m++)if(n.buffers[m]!==n.indexBuffer){v=m;break}for(var g in n.attributes){var y=n.attributes[g];(0|y.buffer)===v&&(f+=y.size*cg[y.type]/4)}for(var b=0;b<t.length;b++){for(var _=t[b].indexBuffer.data,x=0;x<_.length;x++)r.indexBuffer.data[x+p]+=d;d+=t[b].buffers[v].data.length/f,p+=_.length}}return r}}]),e}(),pg=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u(this,n),(e=t.call(this))._buffer=new sg(null,r,!1),e._indexBuffer=new sg(null,r,!0),e.addAttribute("aVertexPosition",e._buffer,2,!1,Lp.FLOAT).addAttribute("aTextureCoord",e._buffer,2,!1,Lp.FLOAT).addAttribute("aColor",e._buffer,4,!0,Lp.UNSIGNED_BYTE).addAttribute("aTextureId",e._buffer,1,!0,Lp.FLOAT).addIndex(e._indexBuffer),e}return f(n)}(fg),vg=2*Math.PI,mg=180/Math.PI,gg=Math.PI/180,yg=function(e){return e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e}(yg||{}),bg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u(this,e),this.x=0,this.y=0,this.x=t,this.y=n}return f(e,[{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"copyFrom",value:function(e){return this.set(e.x,e.y),this}},{key:"copyTo",value:function(e){return e.set(this.x,this.y),e}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x=e,this.y=t,this}},{key:"toString",value:function(){return"[@pixi/math:Point x=".concat(this.x," y=").concat(this.y,"]")}}]),e}(),_g=[new bg,new bg,new bg,new bg],xg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this,e),this.x=Number(t),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=yg.RECT}return f(e,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}},{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"copyFrom",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"copyTo",value:function(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}},{key:"contains",value:function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}},{key:"intersects",value:function(e,t){if(!t){var n=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=n)return!1;var r=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>r}var i=this.left,o=this.right,a=this.top,s=this.bottom;if(o<=i||s<=a)return!1;var l=_g[0].set(e.left,e.top),u=_g[1].set(e.left,e.bottom),c=_g[2].set(e.right,e.top),h=_g[3].set(e.right,e.bottom);if(c.x<=l.x||u.y<=l.y)return!1;var d=Math.sign(t.a*t.d-t.b*t.c);if(0===d)return!1;if(t.apply(l,l),t.apply(u,u),t.apply(c,c),t.apply(h,h),Math.max(l.x,u.x,c.x,h.x)<=i||Math.min(l.x,u.x,c.x,h.x)>=o||Math.max(l.y,u.y,c.y,h.y)<=a||Math.min(l.y,u.y,c.y,h.y)>=s)return!1;var f=d*(u.y-l.y),p=d*(l.x-u.x),v=f*i+p*a,m=f*o+p*a,g=f*i+p*s,y=f*o+p*s;if(Math.max(v,m,g,y)<=f*l.x+p*l.y||Math.min(v,m,g,y)>=f*h.x+p*h.y)return!1;var b=d*(l.y-c.y),_=d*(c.x-l.x),x=b*i+_*a,E=b*o+_*a,w=b*i+_*s,T=b*o+_*s;return!(Math.max(x,E,w,T)<=b*l.x+_*l.y||Math.min(x,E,w,T)>=b*h.x+_*h.y)}},{key:"pad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t,this}},{key:"fit",value:function(e){var t=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),i=Math.min(this.y+this.height,e.y+e.height);return this.x=t,this.width=Math.max(n-t,0),this.y=r,this.height=Math.max(i-r,0),this}},{key:"ceil",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,n=Math.ceil((this.x+this.width-t)*e)/e,r=Math.ceil((this.y+this.height-t)*e)/e;return this.x=Math.floor((this.x+t)*e)/e,this.y=Math.floor((this.y+t)*e)/e,this.width=n-this.x,this.height=r-this.y,this}},{key:"enlarge",value:function(e){var t=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);return this.x=t,this.width=n-t,this.y=r,this.height=i-r,this}},{key:"toString",value:function(){return"[@pixi/math:Rectangle x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}],[{key:"EMPTY",get:function(){return new e(0,0,0,0)}}]),e}(),Eg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,e),this.x=t,this.y=n,this.radius=r,this.type=yg.CIRC}return f(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.radius)}},{key:"contains",value:function(e,t){if(this.radius<=0)return!1;var n=this.radius*this.radius,r=this.x-e,i=this.y-t;return(r*=r)+(i*=i)<=n}},{key:"getBounds",value:function(){return new xg(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}},{key:"toString",value:function(){return"[@pixi/math:Circle x=".concat(this.x," y=").concat(this.y," radius=").concat(this.radius,"]")}}]),e}(),wg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.type=yg.ELIP}return f(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;var n=(e-this.x)/this.width,r=(t-this.y)/this.height;return(n*=n)+(r*=r)<=1}},{key:"getBounds",value:function(){return new xg(this.x-this.width,this.y-this.height,this.width,this.height)}},{key:"toString",value:function(){return"[@pixi/math:Ellipse x=".concat(this.x," y=").concat(this.y," width=").concat(this.width," height=").concat(this.height,"]")}}]),e}(),Tg=function(){function e(){u(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Array.isArray(n[0])?n[0]:n;if("number"!==typeof i[0]){for(var o=[],a=0,s=i.length;a<s;a++)o.push(i[a].x,i[a].y);i=o}this.points=i,this.type=yg.POLY,this.closeStroke=!0}return f(e,[{key:"clone",value:function(){var t=new e(this.points.slice());return t.closeStroke=this.closeStroke,t}},{key:"contains",value:function(e,t){for(var n=!1,r=this.points.length/2,i=0,o=r-1;i<r;o=i++){var a=this.points[2*i],s=this.points[2*i+1],l=this.points[2*o],u=this.points[2*o+1];s>t!==u>t&&e<(t-s)/(u-s)*(l-a)+a&&(n=!n)}return n}},{key:"toString",value:function(){return"[@pixi/math:PolygoncloseStroke=".concat(this.closeStroke,"points=").concat(this.points.reduce((function(e,t){return"".concat(e,", ").concat(t)}),""),"]")}}]),e}(),Sg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;u(this,e),this.x=t,this.y=n,this.width=r,this.height=i,this.radius=o,this.type=yg.RREC}return f(e,[{key:"clone",value:function(){return new e(this.x,this.y,this.width,this.height,this.radius)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){var n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(t>=this.y+n&&t<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;var r=e-(this.x+n),i=t-(this.y+n),o=n*n;if(r*r+i*i<=o)return!0;if((r=e-(this.x+this.width-n))*r+i*i<=o)return!0;if(r*r+(i=t-(this.y+this.height-n))*i<=o)return!0;if((r=e-(this.x+n))*r+i*i<=o)return!0}return!1}},{key:"toString",value:function(){return"[@pixi/math:RoundedRectangle x=".concat(this.x," y=").concat(this.y,"width=").concat(this.width," height=").concat(this.height," radius=").concat(this.radius,"]")}}]),e}(),kg=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;u(this,e),this.array=null,this.a=t,this.b=n,this.c=r,this.d=i,this.tx=o,this.ty=a}return f(e,[{key:"fromArray",value:function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}},{key:"set",value:function(e,t,n,r,i,o){return this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this}},{key:"toArray",value:function(e,t){this.array||(this.array=new Float32Array(9));var n=t||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}},{key:"apply",value:function(e,t){t=t||new bg;var n=e.x,r=e.y;return t.x=this.a*n+this.c*r+this.tx,t.y=this.b*n+this.d*r+this.ty,t}},{key:"applyInverse",value:function(e,t){t=t||new bg;var n=1/(this.a*this.d+this.c*-this.b),r=e.x,i=e.y;return t.x=this.d*n*r+-this.c*n*i+(this.ty*this.c-this.tx*this.d)*n,t.y=this.a*n*i+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,t}},{key:"translate",value:function(e,t){return this.tx+=e,this.ty+=t,this}},{key:"scale",value:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),n=Math.sin(e),r=this.a,i=this.c,o=this.tx;return this.a=r*t-this.b*n,this.b=r*n+this.b*t,this.c=i*t-this.d*n,this.d=i*n+this.d*t,this.tx=o*t-this.ty*n,this.ty=o*n+this.ty*t,this}},{key:"append",value:function(e){var t=this.a,n=this.b,r=this.c,i=this.d;return this.a=e.a*t+e.b*r,this.b=e.a*n+e.b*i,this.c=e.c*t+e.d*r,this.d=e.c*n+e.d*i,this.tx=e.tx*t+e.ty*r+this.tx,this.ty=e.tx*n+e.ty*i+this.ty,this}},{key:"setTransform",value:function(e,t,n,r,i,o,a,s,l){return this.a=Math.cos(a+l)*i,this.b=Math.sin(a+l)*i,this.c=-Math.sin(a-s)*o,this.d=Math.cos(a-s)*o,this.tx=e-(n*this.a+r*this.c),this.ty=t-(n*this.b+r*this.d),this}},{key:"prepend",value:function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var n=this.a,r=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}},{key:"decompose",value:function(e){var t=this.a,n=this.b,r=this.c,i=this.d,o=e.pivot,a=-Math.atan2(-r,i),s=Math.atan2(n,t),l=Math.abs(a+s);return l<1e-5||Math.abs(vg-l)<1e-5?(e.rotation=s,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=s),e.scale.x=Math.sqrt(t*t+n*n),e.scale.y=Math.sqrt(r*r+i*i),e.position.x=this.tx+(o.x*t+o.y*r),e.position.y=this.ty+(o.x*n+o.y*i),e}},{key:"invert",value:function(){var e=this.a,t=this.b,n=this.c,r=this.d,i=this.tx,o=e*r-t*n;return this.a=r/o,this.b=-t/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-r*i)/o,this.ty=-(e*this.ty-t*i)/o,this}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"clone",value:function(){var t=new e;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}},{key:"copyTo",value:function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copyFrom",value:function(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}},{key:"toString",value:function(){return"[@pixi/math:Matrix a=".concat(this.a," b=").concat(this.b," c=").concat(this.c," d=").concat(this.d," tx=").concat(this.tx," ty=").concat(this.ty,"]")}}],[{key:"IDENTITY",get:function(){return new e}},{key:"TEMP_MATRIX",get:function(){return new e}}]),e}(),Cg=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ag=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Ig=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Og=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Pg=[],Mg=[],Rg=Math.sign;!function(){for(var e=0;e<16;e++){var t=[];Pg.push(t);for(var n=0;n<16;n++)for(var r=Rg(Cg[e]*Cg[n]+Ig[e]*Ag[n]),i=Rg(Ag[e]*Cg[n]+Og[e]*Ag[n]),o=Rg(Cg[e]*Ig[n]+Ig[e]*Og[n]),a=Rg(Ag[e]*Ig[n]+Og[e]*Og[n]),s=0;s<16;s++)if(Cg[s]===r&&Ag[s]===i&&Ig[s]===o&&Og[s]===a){t.push(s);break}}for(var l=0;l<16;l++){var u=new kg;u.set(Cg[l],Ag[l],Ig[l],Og[l],0,0),Mg.push(u)}}();var Ng={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:function(e){return Cg[e]},uY:function(e){return Ag[e]},vX:function(e){return Ig[e]},vY:function(e){return Og[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return Pg[e][t]},sub:function(e,t){return Pg[e][Ng.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2===(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?t>=0?Ng.S:Ng.N:2*Math.abs(t)<=Math.abs(e)?e>0?Ng.E:Ng.W:t>0?e>0?Ng.SE:Ng.SW:e>0?Ng.NE:Ng.NW},matrixAppendRotationInv:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=Mg[Ng.inv(t)];i.tx=n,i.ty=r,e.append(i)}},Dg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;u(this,e),this._x=r,this._y=i,this.cb=t,this.scope=n}return f(e,[{key:"clone",value:function(){return new e(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cb,arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.scope,this._x,this._y)}},{key:"set",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return this._x===e&&this._y===t||(this._x=e,this._y=t,this.cb.call(this.scope)),this}},{key:"copyFrom",value:function(e){return this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}},{key:"copyTo",value:function(e){return e.set(this._x,this._y),e}},{key:"equals",value:function(e){return e.x===this._x&&e.y===this._y}},{key:"toString",value:function(){return"[@pixi/math:ObservablePoint x=".concat(0," y=",0," scope=",this.scope,"]")}},{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),e}(),Lg=function(){function e(){u(this,e),this.worldTransform=new kg,this.localTransform=new kg,this.position=new Dg(this.onChange,this,0,0),this.scale=new Dg(this.onChange,this,1,1),this.pivot=new Dg(this.onChange,this,0,0),this.skew=new Dg(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}return f(e,[{key:"onChange",value:function(){this._localID++}},{key:"updateSkew",value:function(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}},{key:"toString",value:function(){return"[@pixi/math:Transform position=(".concat(this.position.x,", ").concat(this.position.y,") rotation=").concat(this.rotation," scale=(").concat(this.scale.x,", ").concat(this.scale.y,") skew=(").concat(this.skew.x,", ").concat(this.skew.y,") ]")}},{key:"updateLocalTransform",value:function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}},{key:"updateTransform",value:function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var n=e.worldTransform,r=this.worldTransform;r.a=t.a*n.a+t.b*n.c,r.b=t.a*n.b+t.b*n.d,r.c=t.c*n.a+t.d*n.c,r.d=t.c*n.b+t.d*n.d,r.tx=t.tx*n.a+t.ty*n.c+n.tx,r.ty=t.tx*n.b+t.ty*n.d+n.ty,this._parentID=e._worldID,this._worldID++}}},{key:"setFromMatrix",value:function(e){e.decompose(this),this._localID++}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),e}(),Fg=Lg;Fg.IDENTITY=new Lg;var Bg=[{test:function(e){return"float"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n            if(uv["'.concat(e,'"] !== ud["').concat(e,'"].value)\n            {\n                ud["').concat(e,'"].value = uv["').concat(e,'"]\n                gl.uniform1f(ud["').concat(e,'"].location, uv["').concat(e,'"])\n            }\n            ')}},{test:function(e,t){return("sampler2D"===e.type||"samplerCube"===e.type||"sampler2DArray"===e.type)&&1===e.size&&!e.isArray&&(null==t||void 0!==t.castToBaseTexture)},code:function(e){return't = syncData.textureCount++;\n\n            renderer.texture.bind(uv["'.concat(e,'"], t);\n\n            if(ud["').concat(e,'"].value !== t)\n            {\n                ud["').concat(e,'"].value = t;\n                gl.uniform1i(ud["').concat(e,'"].location, t);\n; // eslint-disable-line max-len\n            }')}},{test:function(e,t){return"mat3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.a},code:function(e){return'\n            gl.uniformMatrix3fv(ud["'.concat(e,'"].location, false, uv["').concat(e,'"].toArray(true));\n            ')},codeUbo:function(e){return"\n                var ".concat(e,"_matrix = uv.").concat(e,".toArray(true);\n\n                data[offset] = ").concat(e,"_matrix[0];\n                data[offset+1] = ").concat(e,"_matrix[1];\n                data[offset+2] = ").concat(e,"_matrix[2];\n        \n                data[offset + 4] = ").concat(e,"_matrix[3];\n                data[offset + 5] = ").concat(e,"_matrix[4];\n                data[offset + 6] = ").concat(e,"_matrix[5];\n        \n                data[offset + 8] = ").concat(e,"_matrix[6];\n                data[offset + 9] = ").concat(e,"_matrix[7];\n                data[offset + 10] = ").concat(e,"_matrix[8];\n            ")}},{test:function(e,t){return"vec2"===e.type&&1===e.size&&!e.isArray&&void 0!==t.x},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    gl.uniform2f(ud["').concat(e,'"].location, v.x, v.y);\n                }')},codeUbo:function(e){return"\n                v = uv.".concat(e,";\n\n                data[offset] = v.x;\n                data[offset+1] = v.y;\n            ")}},{test:function(e){return"vec2"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    gl.uniform2f(ud["').concat(e,'"].location, v[0], v[1]);\n                }\n            ')}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.width},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)\n                {\n                    cv[0] = v.x;\n                    cv[1] = v.y;\n                    cv[2] = v.width;\n                    cv[3] = v.height;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.x, v.y, v.width, v.height)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.x;\n                    data[offset+1] = v.y;\n                    data[offset+2] = v.width;\n                    data[offset+3] = v.height;\n                ")}},{test:function(e,t){return"vec4"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n                    cv[3] = v.alpha;\n                    gl.uniform4f(ud["').concat(e,'"].location, v.red, v.green, v.blue, v.alpha)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                    data[offset+3] = v.alpha;\n                ")}},{test:function(e,t){return"vec3"===e.type&&1===e.size&&!e.isArray&&void 0!==t.red},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)\n                {\n                    cv[0] = v.red;\n                    cv[1] = v.green;\n                    cv[2] = v.blue;\n    \n                    gl.uniform3f(ud["').concat(e,'"].location, v.red, v.green, v.blue)\n                }')},codeUbo:function(e){return"\n                    v = uv.".concat(e,";\n\n                    data[offset] = v.red;\n                    data[offset+1] = v.green;\n                    data[offset+2] = v.blue;\n                ")}},{test:function(e){return"vec4"===e.type&&1===e.size&&!e.isArray},code:function(e){return'\n                cv = ud["'.concat(e,'"].value;\n                v = uv["').concat(e,'"];\n\n                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n                {\n                    cv[0] = v[0];\n                    cv[1] = v[1];\n                    cv[2] = v[2];\n                    cv[3] = v[3];\n\n                    gl.uniform4f(ud["').concat(e,'"].location, v[0], v[1], v[2], v[3])\n                }')}}],Ug={float:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1f(location, v);\n    }",vec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2f(location, v[0], v[1])\n    }",vec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3f(location, v[0], v[1], v[2])\n    }",vec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n    }",int:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",ivec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",ivec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",ivec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",uint:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1ui(location, v);\n    }",uvec2:"\n    if (cv[0] !== v[0] || cv[1] !== v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2ui(location, v[0], v[1]);\n    }",uvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3ui(location, v[0], v[1], v[2]);\n    }",uvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n    }",bool:"\n    if (cv !== v)\n    {\n        cu.value = v;\n        gl.uniform1i(location, v);\n    }",bvec2:"\n    if (cv[0] != v[0] || cv[1] != v[1])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n\n        gl.uniform2i(location, v[0], v[1]);\n    }",bvec3:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n\n        gl.uniform3i(location, v[0], v[1], v[2]);\n    }",bvec4:"\n    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])\n    {\n        cv[0] = v[0];\n        cv[1] = v[1];\n        cv[2] = v[2];\n        cv[3] = v[3];\n\n        gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n    }",mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",samplerCube:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }",sampler2DArray:"\n    if (cv !== v)\n    {\n        cu.value = v;\n\n        gl.uniform1i(location, v);\n    }"},Hg={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};var jg,zg={},Vg=zg;function Gg(){var e;if(Vg===zg||null!==(e=Vg)&&void 0!==e&&e.isContextLost()){var t,n=Zp.ADAPTER.createCanvas();Zp.PREFER_ENV>=Ip.WEBGL2&&(t=n.getContext("webgl2",{})),t||((t=n.getContext("webgl",{})||n.getContext("experimental-webgl",{}))?t.getExtension("WEBGL_draw_buffers"):t=null),Vg=t}return Vg}var Wg={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function Xg(e){return Wg[e]}var Yg=null,Kg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function qg(e,t){if(!Yg){var n=Object.keys(Kg);Yg={};for(var r=0;r<n.length;++r){var i=n[r];Yg[e[i]]=Kg[i]}}return Yg[t]}function Zg(e,t,n){if("precision"!==e.substring(0,9)){var r=t;return t===Gp.HIGH&&n!==Gp.HIGH&&(r=Gp.MEDIUM),"precision ".concat(r," float;\n").concat(e)}return n!==Gp.HIGH&&"precision highp"===e.substring(0,15)?e.replace("precision highp","precision mediump"):e}var $g=0,Qg={},Jg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"pixi-shader",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};u(this,e),this.extra={},this.id=$g++,this.vertexSrc=t||e.defaultVertexSrc,this.fragmentSrc=n||e.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,"#version"!==this.vertexSrc.substring(0,8)&&(r=r.replace(/\s+/g,"-"),Qg[r]?(Qg[r]++,r+="-".concat(Qg[r])):Qg[r]=1,this.vertexSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.vertexSrc),this.fragmentSrc="#define SHADER_NAME ".concat(r,"\n").concat(this.fragmentSrc),this.vertexSrc=Zg(this.vertexSrc,e.defaultVertexPrecision,Gp.HIGH),this.fragmentSrc=Zg(this.fragmentSrc,e.defaultFragmentPrecision,function(){if(!jg){jg=Gp.MEDIUM;var e=Gg();if(e&&e.getShaderPrecisionFormat){var t=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT);jg=t.precision?Gp.HIGH:Gp.MEDIUM}}return jg}())),this.glPrograms={},this.syncUniforms=null}return f(e,null,[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n}\n"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor *= texture2D(uSampler, vTextureCoord);\n}"}},{key:"from",value:function(t,n,r){var i=t+n,o=Cm[i];return o||(Cm[i]=o=new e(t,n,r)),o}}]),e}(),ey=Jg;ey.defaultVertexPrecision=Gp.HIGH,ey.defaultFragmentPrecision=pv.apple.device?Gp.HIGH:Gp.MEDIUM;var ty=0,ny=function(){function e(t,n,r){u(this,e),this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=ty++,this.static=!!n,this.ubo=!!r,t instanceof sg?(this.buffer=t,this.buffer.type=Kp.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new sg(new Float32Array(1)),this.buffer.type=Kp.UNIFORM_BUFFER,this.autoManage=!0))}return f(e,[{key:"update",value:function(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}},{key:"add",value:function(t,n,r){if(this.ubo)throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them");this.uniforms[t]=new e(n,r)}}],[{key:"from",value:function(t,n,r){return new e(t,n,r)}},{key:"uboFrom",value:function(t,n){return new e(t,null===n||void 0===n||n,!0)}}]),e}(),ry=function(){function e(t,n){u(this,e),this.uniformBindCount=0,this.program=t,this.uniformGroup=n?n instanceof ny?n:new ny(n):new ny({}),this.disposeRunner=new Jm("disposeShader")}return f(e,[{key:"checkUniformExists",value:function(e,t){if(t.uniforms[e])return!0;for(var n in t.uniforms){var r=t.uniforms[n];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}},{key:"destroy",value:function(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}},{key:"uniforms",get:function(){return this.uniformGroup.uniforms}}],[{key:"from",value:function(t,n,r){return new e(ey.from(t,n),r)}}]),e}(),iy=function(){function e(t,n){if(u(this,e),this.vertexSrc=t,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}return f(e,[{key:"generateShader",value:function(e){if(!this.programCache[e]){for(var t=new Int32Array(e),n=0;n<e;n++)t[n]=n;this.defaultGroupCache[e]=ny.from({uSamplers:t},!0);var r=this.fragTemplate;r=(r=r.replace(/%count%/gi,"".concat(e))).replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new ey(this.vertexSrc,r)}var i={tint:new Float32Array([1,1,1,1]),translationMatrix:new kg,default:this.defaultGroupCache[e]};return new ry(this.programCache[e],i)}},{key:"generateSampleSrc",value:function(e){var t="";t+="\n",t+="\n";for(var n=0;n<e;n++)n>0&&(t+="\nelse "),n<e-1&&(t+="if(vTextureId < ".concat(n,".5)")),t+="\n{",t+="\n\tcolor = texture2D(uSamplers[".concat(n,"], vTextureCoord);"),t+="\n}";return t+="\n",t+="\n"}}]),e}(),oy=function(){function e(){u(this,e),this.elements=[],this.ids=[],this.count=0}return f(e,[{key:"clear",value:function(){for(var e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}]),e}();var ay=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"flush",value:function(){}},{key:"destroy",value:function(){this.renderer=null}},{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"render",value:function(e){}}]),e}(),sy=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).setShaderGenerator(),r.geometryClass=pg,r.vertexSize=6,r.state=Zm.for2d(),r.size=4*n.defaultBatchSize,r._vertexCount=0,r._indexCount=0,r._bufferedElements=[],r._bufferedTextures=[],r._bufferSize=0,r._shader=null,r._packedGeometries=[],r._packedGeometryPoolSize=2,r._flushId=0,r._aBuffers={},r._iBuffers={},r.maxTextures=1,r.renderer.on("prerender",r.onPrerender,g(r)),e.runners.contextChange.add(g(r)),r._dcIndex=0,r._aIndex=0,r._iIndex=0,r._attributeBuffer=null,r._indexBuffer=null,r._tempBoundTextures=[],r}return f(n,[{key:"MAX_TEXTURES",get:function(){return Tv("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}},{key:"setShaderGenerator",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.vertex,r=void 0===t?n.defaultVertexSrc:t,i=e.fragment,o=void 0===i?n.defaultFragmentTemplate:i;this.shaderGenerator=new iy(r,o)}},{key:"contextChange",value:function(){var e=this.renderer.gl;Zp.PREFER_ENV===Ip.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),n.defaultMaxTextures),this.maxTextures=qm(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(var t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}},{key:"initFlushBuffers",value:function(){for(var e=n._drawCallPool,t=n._textureArrayPool,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;e.length<r;)e.push(new og);for(;t.length<i;)t.push(new oy);for(var o=0;o<this.maxTextures;o++)this._tempBoundTextures[o]=null}},{key:"onPrerender",value:function(){this._flushId=0}},{key:"render",value:function(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}},{key:"buildTexturesAndDrawCalls",value:function(){var e=this._bufferedTextures,t=this.maxTextures,r=n._textureArrayPool,i=this.renderer.batch,o=this._tempBoundTextures,a=this.renderer.textureGC.count,s=++ig._globalBatch,l=0,u=r[0],c=0;i.copyBoundTextures(o,t);for(var h=0;h<this._bufferSize;++h){var d=e[h];e[h]=null,d._batchEnabled!==s&&(u.count>=t&&(i.boundArray(u,o,s,t),this.buildDrawCalls(u,c,h),c=h,u=r[++l],++s),d._batchEnabled=s,d.touched=a,u.elements[u.count++]=d)}u.count>0&&(i.boundArray(u,o,s,t),this.buildDrawCalls(u,c,this._bufferSize),++l,++s);for(var f=0;f<o.length;f++)o[f]=null;ig._globalBatch=s}},{key:"buildDrawCalls",value:function(e,t,r){var i=this._bufferedElements,o=this._attributeBuffer,a=this._indexBuffer,s=this.vertexSize,l=n._drawCallPool,u=this._dcIndex,c=this._aIndex,h=this._iIndex,d=l[u];d.start=this._iIndex,d.texArray=e;for(var f=t;f<r;++f){var p=i[f],v=p._texture.baseTexture,m=lm[v.alphaMode?1:0][p.blendMode];i[f]=null,t<f&&d.blend!==m&&(d.size=h-d.start,t=f,(d=l[++u]).texArray=e,d.start=h),this.packInterleavedGeometry(p,o,a,c,h),c+=p.vertexData.length/2*s,h+=p.indices.length,d.blend=m}t<r&&(d.size=h-d.start,++u),this._dcIndex=u,this._aIndex=c,this._iIndex=h}},{key:"bindAndClearTexArray",value:function(e){for(var t=this.renderer.texture,n=0;n<e.count;n++)t.bind(e.elements[n],e.ids[n]),e.elements[n]=null;e.count=0}},{key:"updateGeometry",value:function(){var e=this._packedGeometries,t=this._attributeBuffer,r=this._indexBuffer;n.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}},{key:"drawBatches",value:function(){for(var e=this._dcIndex,t=this.renderer,r=t.gl,i=t.state,o=n._drawCallPool,a=null,s=0;s<e;s++){var l=o[s],u=l.texArray,c=l.type,h=l.size,d=l.start,f=l.blend;a!==u&&(a=u,this.bindAndClearTexArray(u)),this.state.blendMode=f,i.set(this.state),r.drawElements(c,h,r.UNSIGNED_SHORT,2*d)}}},{key:"flush",value:function(){0!==this._vertexCount&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}},{key:"start",value:function(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),n.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}},{key:"stop",value:function(){this.flush()}},{key:"destroy",value:function(){for(var e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),jm(m(n.prototype),"destroy",this).call(this)}},{key:"getAttributeBuffer",value:function(e){var t=ym(Math.ceil(e/8)),n=_m(t),r=8*t;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._aBuffers[r];return i||(this._aBuffers[r]=i=new Xm(r*this.vertexSize*4)),i}},{key:"getIndexBuffer",value:function(e){var t=ym(Math.ceil(e/12)),n=_m(t),r=12*t;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);var i=this._iBuffers[n];return i||(this._iBuffers[n]=i=new Uint16Array(r)),i}},{key:"packInterleavedGeometry",value:function(e,t,n,r,i){for(var o=t.uint32View,a=t.float32View,s=r/this.vertexSize,l=e.uvs,u=e.indices,c=e.vertexData,h=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=rm.shared.setValue(e._tintRGB).toPremultiplied(d,e._texture.baseTexture.alphaMode>0),p=0;p<c.length;p+=2)a[r++]=c[p],a[r++]=c[p+1],a[r++]=l[p],a[r++]=l[p+1],o[r++]=f,a[r++]=h;for(var v=0;v<u.length;v++)n[i++]=s+u[v]}}],[{key:"defaultMaxTextures",get:function(){var e;return this._defaultMaxTextures=null!==(e=this._defaultMaxTextures)&&void 0!==e?e:function(e){var t=!0,n=Zp.ADAPTER.getNavigator();if(pv.tablet||pv.phone){if(pv.apple.device){var r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(t=!1)}if(pv.android.device){var i=n.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(t=!1)}}return t?e:4}(32),this._defaultMaxTextures},set:function(e){this._defaultMaxTextures=e}},{key:"canUploadSameBuffer",get:function(){var e;return this._canUploadSameBuffer=null!==(e=this._canUploadSameBuffer)&&void 0!==e?e:!pv.apple.device,this._canUploadSameBuffer},set:function(e){this._canUploadSameBuffer=e}},{key:"defaultVertexSrc",get:function(){return"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform vec4 tint;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor * tint;\n}\n"}},{key:"defaultFragmentTemplate",get:function(){return"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void){\n    vec4 color;\n    %forloop%\n    gl_FragColor = color * vColor;\n}\n"}}]),n}(ay),ly=sy;ly.defaultBatchSize=4096,ly.extension={name:"batch",type:zm.RendererPlugin},ly._drawCallPool=[],ly._textureArrayPool=[],Wm.add(ly);var uy=function(e){v(n,e);var t=y(n);function n(e,r,i){var o;u(this,n);var a=ey.from(e||n.defaultVertexSrc,r||n.defaultFragmentSrc);return(o=t.call(this,a,i)).padding=0,o.resolution=n.defaultResolution,o.multisample=n.defaultMultisample,o.enabled=!0,o.autoFit=!0,o.state=new Zm,o}return f(n,[{key:"apply",value:function(e,t,n,r,i){e.applyFilter(this,t,n,r)}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"}}]),n}(ry),cy=uy;cy.defaultResolution=1,cy.defaultMultisample=Yp.NONE;var hy=function(){function e(){u(this,e),this.clearBeforeRender=!0,this._backgroundColor=new rm(0),this.alpha=1}return f(e,[{key:"init",value:function(e){this.clearBeforeRender=e.clearBeforeRender;var t=e.backgroundColor,n=e.background,r=e.backgroundAlpha,i=null!==n&&void 0!==n?n:t;void 0!==i&&(this.color=i),this.alpha=r}},{key:"color",get:function(){return this._backgroundColor.value},set:function(e){this._backgroundColor.setValue(e)}},{key:"alpha",get:function(){return this._backgroundColor.alpha},set:function(e){this._backgroundColor.setAlpha(e)}},{key:"backgroundColor",get:function(){return this._backgroundColor}},{key:"destroy",value:function(){}}]),e}();hy.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},hy.extension={type:[zm.RendererSystem,zm.CanvasRendererSystem],name:"background"},Wm.add(hy);var dy=function(){function e(t){u(this,e),this.renderer=t,this.emptyRenderer=new ay(t),this.currentRenderer=this.emptyRenderer}return f(e,[{key:"setObjectRenderer",value:function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}},{key:"flush",value:function(){this.setObjectRenderer(this.emptyRenderer)}},{key:"reset",value:function(){this.setObjectRenderer(this.emptyRenderer)}},{key:"copyBoundTextures",value:function(e,t){for(var n=this.renderer.texture.boundTextures,r=t-1;r>=0;--r)e[r]=n[r]||null,e[r]&&(e[r]._batchLocation=r)}},{key:"boundArray",value:function(e,t,n,r){for(var i=e.elements,o=e.ids,a=e.count,s=0,l=0;l<a;l++){var u=i[l],c=u._batchLocation;if(c>=0&&c<r&&t[c]===u)o[l]=c;else for(;s<r;){var h=t[s];if(!h||h._batchEnabled!==n||h._batchLocation!==s){o[l]=s,u._batchLocation=s,t[s]=u;break}s++}}}},{key:"destroy",value:function(){this.renderer=null}}]),e}();dy.extension={type:zm.RendererSystem,name:"batch"},Wm.add(dy);var fy=0,py=function(){function e(t){u(this,e),this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}return f(e,[{key:"isLost",get:function(){return!this.gl||this.gl.isContextLost()}},{key:"contextChange",value:function(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=fy++}},{key:"init",value:function(e){if(e.context)this.initFromContext(e.context);else{var t=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:t,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}},{key:"initFromContext",value:function(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=fy++,this.renderer.runners.contextChange.emit(e);var t=this.renderer.view;void 0!==t.addEventListener&&(t.addEventListener("webglcontextlost",this.handleContextLost,!1),t.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}},{key:"initFromOptions",value:function(e){var t=this.createContext(this.renderer.view,e);this.initFromContext(t)}},{key:"createContext",value:function(e,t){var n;if(Zp.PREFER_ENV>=Ip.WEBGL2&&(n=e.getContext("webgl2",t)),n)this.webGLVersion=2;else if(this.webGLVersion=1,!(n=e.getContext("webgl",t)||e.getContext("experimental-webgl",t)))throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}},{key:"getExtensions",value:function(){var e=this.gl,t={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};1===this.webGLVersion?Object.assign(this.extensions,t,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):2===this.webGLVersion&&Object.assign(this.extensions,t,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}},{key:"handleContextLost",value:function(e){var t=this;e.preventDefault(),setTimeout((function(){t.gl.isContextLost()&&t.extensions.loseContext&&t.extensions.loseContext.restoreContext()}),0)}},{key:"handleContextRestored",value:function(){this.renderer.runners.contextChange.emit(this.gl)}},{key:"destroy",value:function(){var e=this.renderer.view;this.renderer=null,void 0!==e.removeEventListener&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}},{key:"postrender",value:function(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}},{key:"validateContext",value:function(e){var t=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),t&&t.stencil;var r=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r}}]),e}();py.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},py.extension={type:zm.RendererSystem,name:"context"},Wm.add(py);var vy=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"upload",value:function(e,t,n){var r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===jp.UNPACK);var i=t.realWidth,o=t.realHeight;return n.width===i&&n.height===o?r.texSubImage2D(t.target,0,0,0,i,o,t.format,n.type,this.data):(n.width=i,n.height=o,r.texImage2D(t.target,0,n.internalFormat,i,o,0,t.format,n.type,this.data)),!0}}]),n}(tg),my=function(){function e(t,n){u(this,e),this.width=Math.round(t||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Jm("disposeFramebuffer"),this.multisample=Yp.NONE}return f(e,[{key:"colorTexture",get:function(){return this.colorTextures[0]}},{key:"addColorTexture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.colorTextures[e]=t||new ig(null,{scaleMode:Bp.NEAREST,resolution:1,mipmap:Hp.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}},{key:"addDepthTexture",value:function(e){return this.depthTexture=e||new ig(new vy(null,{width:this.width,height:this.height}),{scaleMode:Bp.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Hp.OFF,format:Np.DEPTH_COMPONENT,type:Lp.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}},{key:"enableDepth",value:function(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}},{key:"enableStencil",value:function(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}},{key:"resize",value:function(e,t){if(e=Math.round(e),t=Math.round(t),e!==this.width||t!==this.height){this.width=e,this.height=t,this.dirtyId++,this.dirtySize++;for(var n=0;n<this.colorTextures.length;n++){var r=this.colorTextures[n],i=r.resolution;r.setSize(e/i,t/i)}if(this.depthTexture){var o=this.depthTexture.resolution;this.depthTexture.setSize(e/o,t/o)}}}},{key:"dispose",value:function(){this.disposeRunner.emit(this,!1)}},{key:"destroyDepthTexture",value:function(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}]),e}(),gy=function(e){v(n,e);var t=y(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};(u(this,n),"number"===typeof i)&&(i={width:arguments[0],height:arguments[1],scaleMode:arguments[2],resolution:arguments[3]});return i.width=i.width||100,i.height=i.height||100,null!==(e=i.multisample)&&void 0!==e||(i.multisample=Yp.NONE),(r=t.call(this,null,i)).mipmap=Hp.OFF,r.valid=!0,r._clear=new rm([0,0,0,0]),r.framebuffer=new my(r.realWidth,r.realHeight).addColorTexture(0,g(r)),r.framebuffer.multisample=i.multisample,r.maskStack=[],r.filterStack=[{}],r}return f(n,[{key:"clearColor",get:function(){return this._clear.value},set:function(e){this._clear.setValue(e)}},{key:"clear",get:function(){return this._clear}},{key:"resize",value:function(e,t){this.framebuffer.resize(e*this.resolution,t*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}},{key:"dispose",value:function(){this.framebuffer.dispose(),jm(m(n.prototype),"dispose",this).call(this)}},{key:"destroy",value:function(){jm(m(n.prototype),"destroy",this).call(this),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}]),n}(ig),yy=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n);var i=e,o=i.naturalWidth||i.videoWidth||i.width,a=i.naturalHeight||i.videoHeight||i.height;return(r=t.call(this,o,a)).source=e,r.noSubImage=!1,r}return f(n,[{key:"upload",value:function(e,t,n,r){var i=e.gl,o=t.realWidth,a=t.realHeight;if(r=r||this.source,"undefined"!==typeof HTMLImageElement&&r instanceof HTMLImageElement){if(!r.complete||0===r.naturalWidth)return!1}else if("undefined"!==typeof HTMLVideoElement&&r instanceof HTMLVideoElement&&r.readyState<=1&&0===r.buffered.length)return!1;return i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.alphaMode===jp.UNPACK),this.noSubImage||t.target!==i.TEXTURE_2D||n.width!==o||n.height!==a?(n.width=o,n.height=a,i.texImage2D(t.target,0,n.internalFormat,t.format,n.type,r)):i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.format,n.type,r),!0}},{key:"update",value:function(){if(!this.destroyed){var e=this.source,t=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(t,r),jm(m(n.prototype),"update",this).call(this)}}},{key:"dispose",value:function(){this.source=null}}],[{key:"crossOrigin",value:function(e,t,n){void 0!==n||t.startsWith("data:")?!1!==n&&(e.crossOrigin="string"===typeof n?n:"anonymous"):e.crossOrigin=Um(t)}}]),n}(eg),by=function(e){v(n,e);var t=y(n);function n(e,r){var i,o;if(u(this,n),r=r||{},"string"===typeof e){var a=new Image;yy.crossOrigin(a,e,r.crossorigin),a.src=e,e=a}return o=t.call(this,e),!e.complete&&o._width&&o._height&&(o._width=0,o._height=0),o.url=e.src,o._process=null,o.preserveBitmap=!1,o.createBitmap=(null!==(i=r.createBitmap)&&void 0!==i?i:Zp.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,o.alphaMode="number"===typeof r.alphaMode?r.alphaMode:null,o.bitmap=null,o._load=null,!1!==r.autoLoad&&o.load(),o}return f(n,[{key:"load",value:function(e){var t=this;return this._load||(void 0!==e&&(this.createBitmap=e),this._load=new Promise((function(e,n){var r=t.source;t.url=r.src;var i=function(){t.destroyed||(r.onload=null,r.onerror=null,t.resize(r.width,r.height),t._load=null,t.createBitmap?e(t.process()):e(t))};r.complete&&r.src?i():(r.onload=i,r.onerror=function(e){n(e),t.onError.emit(e)})}))),this._load}},{key:"process",value:function(){var e=this,t=this.source;if(null!==this._process)return this._process;if(null!==this.bitmap||!globalThis.createImageBitmap)return Promise.resolve(this);var n=globalThis.createImageBitmap,r=!t.crossOrigin||"anonymous"===t.crossOrigin;return this._process=fetch(t.src,{mode:r?"cors":"no-cors"}).then((function(e){return e.blob()})).then((function(r){return n(r,0,0,t.width,t.height,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===jp.UNPACK?"premultiply":"none"})})).then((function(t){return e.destroyed?Promise.reject():(e.bitmap=t,e.update(),e._process=null,Promise.resolve(e))})),this._process}},{key:"upload",value:function(e,t,r){if("number"===typeof this.alphaMode&&(t.alphaMode=this.alphaMode),!this.createBitmap)return jm(m(n.prototype),"upload",this).call(this,e,t,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(jm(m(n.prototype),"upload",this).call(this,e,t,r,this.bitmap),!this.preserveBitmap){var i=!0,o=t._glTextures;for(var a in o){var s=o[a];if(s!==r&&s.dirtyId!==t.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}},{key:"dispose",value:function(){this.source.onload=null,this.source.onerror=null,jm(m(n.prototype),"dispose",this).call(this),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}}],[{key:"test",value:function(e){return"undefined"!==typeof HTMLImageElement&&("string"===typeof e||e instanceof HTMLImageElement)}}]),n}(yy),_y=function(){function e(){u(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}return f(e,[{key:"set",value:function(e,t,n){var r=t.width,i=t.height;if(n){var o=e.width/2/r,a=e.height/2/i,s=e.x/r+o,l=e.y/i+a;n=Ng.add(n,Ng.NW),this.x0=s+o*Ng.uX(n),this.y0=l+a*Ng.uY(n),n=Ng.add(n,2),this.x1=s+o*Ng.uX(n),this.y1=l+a*Ng.uY(n),n=Ng.add(n,2),this.x2=s+o*Ng.uX(n),this.y2=l+a*Ng.uY(n),n=Ng.add(n,2),this.x3=s+o*Ng.uX(n),this.y3=l+a*Ng.uY(n)}else this.x0=e.x/r,this.y0=e.y/i,this.x1=(e.x+e.width)/r,this.y1=e.y/i,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/i,this.x3=e.x/r,this.y3=(e.y+e.height)/i;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}},{key:"toString",value:function(){return"[@pixi/core:TextureUvs x0=".concat(this.x0," y0=").concat(this.y0," x1=").concat(this.x1," y1=").concat(this.y1," x2=").concat(this.x2," y2=").concat(this.y2," x3=").concat(this.x3," y3=").concat(this.y3,"]")}}]),e}(),xy=new _y;function Ey(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}var wy=function(e){v(n,e);var t=y(n);function n(e,r,i,o,a,s,l){var c;if(u(this,n),(c=t.call(this)).noFrame=!1,r||(c.noFrame=!0,r=new xg(0,0,1,1)),e instanceof n&&(e=e.baseTexture),c.baseTexture=e,c._frame=r,c.trim=o,c.valid=!1,c._uvs=xy,c.uvMatrix=null,c.orig=i||r,c._rotate=Number(a||0),!0===a)c._rotate=2;else if(c._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.defaultAnchor=s?new bg(s.x,s.y):new bg(0,0),c.defaultBorders=l,c._updateID=0,c.textureCacheIds=[],e.valid?c.noFrame?e.valid&&c.onBaseTextureUpdated(e):c.frame=r:e.once("loaded",c.onBaseTextureUpdated,g(c)),c.noFrame&&e.on("update",c.onBaseTextureUpdated,g(c)),c}return f(n,[{key:"update",value:function(){this.baseTexture.resource&&this.baseTexture.resource.update()}},{key:"onBaseTextureUpdated",value:function(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}},{key:"destroy",value:function(e){if(this.baseTexture){if(e){var t=this.baseTexture.resource;null!==t&&void 0!==t&&t.url&&Am[t.url]&&n.removeFromCache(t.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,n.removeFromCache(this),this.textureCacheIds=null}},{key:"clone",value:function(){var e,t=this._frame.clone(),r=this._frame===this.orig?t:this.orig.clone(),i=new n(this.baseTexture,!this.noFrame&&t,r,null===(e=this.trim)||void 0===e?void 0:e.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(i._frame=t),i}},{key:"updateUvs",value:function(){this._uvs===xy&&(this._uvs=new _y),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}},{key:"resolution",get:function(){return this.baseTexture.resolution}},{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,n=e.y,r=e.width,i=e.height,o=t+r>this.baseTexture.width,a=n+i>this.baseTexture.height;if(o||a){var s=o&&a?"and":"or",l="X: ".concat(t," + ").concat(r," = ").concat(t+r," > ").concat(this.baseTexture.width),u="Y: ".concat(n," + ").concat(i," = ").concat(n+i," > ").concat(this.baseTexture.height);throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: ".concat(l," ").concat(s," ").concat(u))}this.valid=r&&i&&this.baseTexture.valid,this.trim||this.rotate||(this.orig=e),this.valid&&this.updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this.updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}},{key:"castToBaseTexture",value:function(){return this.baseTexture}}],[{key:"from",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zp.STRICT_TEXTURE_CACHE,i="string"===typeof e,o=null;if(i)o=e;else if(e instanceof ig){if(!e.cacheId){var a=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e.cacheId="".concat(a,"-").concat(Tm()),ig.addToCache(e,e.cacheId)}o=e.cacheId}else{if(!e._pixiId){var s=(null===t||void 0===t?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId="".concat(s,"_").concat(Tm())}o=e._pixiId}var l=Am[o];if(i&&r&&!l)throw new Error('The cacheId "'.concat(o,'" does not exist in TextureCache.'));return l||e instanceof ig?!l&&e instanceof ig&&(l=new n(e),n.addToCache(l,o)):(t.resolution||(t.resolution=Hm(e)),(l=new n(new ig(e,t))).baseTexture.cacheId=o,ig.addToCache(l.baseTexture,o),n.addToCache(l,o)),l}},{key:"fromURL",value:function(e,t){var r=Object.assign({autoLoad:!1},null===t||void 0===t?void 0:t.resourceOptions),i=n.from(e,Object.assign({resourceOptions:r},t),!1),o=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):o.load().then((function(){return Promise.resolve(i)}))}},{key:"fromBuffer",value:function(e,t,r,i){return new n(ig.fromBuffer(e,t,r,i))}},{key:"fromLoader",value:function(e,t,r,i){var o=new ig(e,Object.assign({scaleMode:ig.defaultOptions.scaleMode,resolution:Hm(t)},i)),a=o.resource;a instanceof by&&(a.url=t);var s=new n(o);return r||(r=t),ig.addToCache(s.baseTexture,r),n.addToCache(s,r),r!==t&&(ig.addToCache(s.baseTexture,t),n.addToCache(s,t)),s.baseTexture.valid?Promise.resolve(s):new Promise((function(e){s.baseTexture.once("loaded",(function(){return e(s)}))}))}},{key:"addToCache",value:function(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),Am[t]&&Am[t],Am[t]=e)}},{key:"removeFromCache",value:function(e){if("string"===typeof e){var t=Am[e];if(t){var n=t.textureCacheIds.indexOf(e);return n>-1&&t.textureCacheIds.splice(n,1),delete Am[e],t}}else if(null!==e&&void 0!==e&&e.textureCacheIds){for(var r=0;r<e.textureCacheIds.length;++r)Am[e.textureCacheIds[r]]===e&&delete Am[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}},{key:"EMPTY",get:function(){return n._EMPTY||(n._EMPTY=new n(new ig),Ey(n._EMPTY),Ey(n._EMPTY.baseTexture)),n._EMPTY}},{key:"WHITE",get:function(){if(!n._WHITE){var e=Zp.ADAPTER.createCanvas(16,16),t=e.getContext("2d");e.width=16,e.height=16,t.fillStyle="white",t.fillRect(0,0,16,16),n._WHITE=new n(ig.from(e)),Ey(n._WHITE),Ey(n._WHITE.baseTexture)}return n._WHITE}}]),n}(vv),Ty=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).valid=!0,i.filterFrame=null,i.filterPoolKey=null,i.updateUvs(),i}return f(n,[{key:"framebuffer",get:function(){return this.baseTexture.framebuffer}},{key:"multisample",get:function(){return this.framebuffer.multisample},set:function(e){this.framebuffer.multisample=e}},{key:"resize",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.baseTexture.resolution,i=Math.round(e*r)/r,o=Math.round(t*r)/r;this.valid=i>0&&o>0,this._frame.width=this.orig.width=i,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(i,o),this.updateUvs()}},{key:"setResolution",value:function(e){var t=this.baseTexture;t.resolution!==e&&(t.setResolution(e),this.resize(t.width,t.height,!1))}}],[{key:"create",value:function(e){return new n(new gy(e))}}]),n}(wy),Sy=function(){function e(t){u(this,e),this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}return f(e,[{key:"createTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yp.NONE,r=new gy(Object.assign({width:e,height:t,resolution:1,multisample:n},this.textureOptions));return new Ty(r)}},{key:"getOptimalTexture",value:function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yp.NONE;e=Math.ceil(e*r-1e-6),t=Math.ceil(t*r-1e-6),this.enableFullScreen&&e===this._pixelsWidth&&t===this._pixelsHeight?n=i>1?-i:-1:(n=((65535&(e=ym(e)))<<16|65535&(t=ym(t)))>>>0,i>1&&(n+=4294967296*i)),this.texturePool[n]||(this.texturePool[n]=[]);var o=this.texturePool[n].pop();return o||(o=this.createTexture(e,t,i)),o.filterPoolKey=n,o.setResolution(r),o}},{key:"getFilterTexture",value:function(e,t,n){var r=this.getOptimalTexture(e.width,e.height,t||e.resolution,n||Yp.NONE);return r.filterFrame=e.filterFrame,r}},{key:"returnTexture",value:function(e){var t=e.filterPoolKey;e.filterFrame=null,this.texturePool[t].push(e)}},{key:"returnFilterTexture",value:function(e){this.returnTexture(e)}},{key:"clear",value:function(e){if(e=!1!==e)for(var t in this.texturePool){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}}},{key:"setScreenSize",value:function(e){if(e.width!==this._pixelsWidth||e.height!==this._pixelsHeight){for(var t in this.enableFullScreen=e.width>0&&e.height>0,this.texturePool)if(Number(t)<0){var n=this.texturePool[t];if(n)for(var r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[t]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}]),e}();Sy.SCREEN_KEY=-1;var ky=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2]),e}return f(n)}(fg),Cy=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.uvs=new Float32Array([0,0,1,0,1,1,0,1]),e.vertexBuffer=new sg(e.vertices),e.uvBuffer=new sg(e.uvs),e.addAttribute("aVertexPosition",e.vertexBuffer).addAttribute("aTextureCoord",e.uvBuffer).addIndex([0,1,2,0,2,3]),e}return f(n,[{key:"map",value:function(e,t){var n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+t.width/e.width,this.uvs[3]=r,this.uvs[4]=n+t.width/e.width,this.uvs[5]=r+t.height/e.height,this.uvs[6]=n,this.uvs[7]=r+t.height/e.height,n=t.x,r=t.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+t.width,this.vertices[3]=r,this.vertices[4]=n+t.width,this.vertices[5]=r+t.height,this.vertices[6]=n,this.vertices[7]=r+t.height,this.invalidate(),this}},{key:"invalidate",value:function(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}]),n}(fg),Ay=function(){function e(){u(this,e),this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Yp.NONE,this.sourceFrame=new xg,this.destinationFrame=new xg,this.bindingSourceFrame=new xg,this.bindingDestinationFrame=new xg,this.filters=[],this.transform=null}return f(e,[{key:"clear",value:function(){this.target=null,this.filters=null,this.renderTexture=null}}]),e}(),Iy=[new bg,new bg,new bg,new bg],Oy=new kg,Py=function(){function e(t){u(this,e),this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new Sy,this.statePool=[],this.quad=new ky,this.quadUv=new Cy,this.tempRect=new xg,this.activeState={},this.globalUniforms=new ny({outputFrame:new xg,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}return f(e,[{key:"init",value:function(){this.texturePool.setScreenSize(this.renderer.view)}},{key:"push",value:function(e,t){for(var n,r=this.renderer,i=this.defaultFilterStack,o=this.statePool.pop()||new Ay,a=this.renderer.renderTexture,s=t[0].resolution,l=t[0].multisample,u=t[0].padding,c=t[0].autoFit,h=null===(n=t[0].legacy)||void 0===n||n,d=1;d<t.length;d++){var f,p=t[d];s=Math.min(s,p.resolution),l=Math.min(l,p.multisample),u=this.useMaxPadding?Math.max(u,p.padding):u+p.padding,c=c&&p.autoFit,h=h||null===(f=p.legacy)||void 0===f||f}1===i.length&&(this.defaultFilterStack[0].renderTexture=a.current),i.push(o),o.resolution=s,o.multisample=l,o.legacy=h,o.target=e,o.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),o.sourceFrame.pad(u);var v=this.tempRect.copyFrom(a.sourceFrame);r.projection.transform&&this.transformAABB(Oy.copyFrom(r.projection.transform).invert(),v),c?(o.sourceFrame.fit(v),(o.sourceFrame.width<=0||o.sourceFrame.height<=0)&&(o.sourceFrame.width=0,o.sourceFrame.height=0)):o.sourceFrame.intersects(v)||(o.sourceFrame.width=0,o.sourceFrame.height=0),this.roundFrame(o.sourceFrame,a.current?a.current.resolution:r.resolution,a.sourceFrame,a.destinationFrame,r.projection.transform),o.renderTexture=this.getOptimalFilterTexture(o.sourceFrame.width,o.sourceFrame.height,s,l),o.filters=t,o.destinationFrame.width=o.renderTexture.width,o.destinationFrame.height=o.renderTexture.height;var m=this.tempRect;m.x=0,m.y=0,m.width=o.sourceFrame.width,m.height=o.sourceFrame.height,o.renderTexture.filterFrame=o.sourceFrame,o.bindingSourceFrame.copyFrom(a.sourceFrame),o.bindingDestinationFrame.copyFrom(a.destinationFrame),o.transform=r.projection.transform,r.projection.transform=null,a.bind(o.renderTexture,o.sourceFrame,m),r.framebuffer.clear(0,0,0,0)}},{key:"pop",value:function(){var e=this.defaultFilterStack,t=e.pop(),n=t.filters;this.activeState=t;var r=this.globalUniforms.uniforms;r.outputFrame=t.sourceFrame,r.resolution=t.resolution;var i=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(i[0]=t.destinationFrame.width,i[1]=t.destinationFrame.height,i[2]=1/i[0],i[3]=1/i[1],o[0]=Math.round(i[0]*t.resolution),o[1]=Math.round(i[1]*t.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=t.sourceFrame.width*i[2]-.5*o[2],a[3]=t.sourceFrame.height*i[3]-.5*o[3],t.legacy){var s=r.filterArea;s[0]=t.destinationFrame.width,s[1]=t.destinationFrame.height,s[2]=t.sourceFrame.x,s[3]=t.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();var l=e[e.length-1];if(this.renderer.framebuffer.blit(),1===n.length)n[0].apply(this,t.renderTexture,l.renderTexture,zp.BLEND,t),this.returnFilterTexture(t.renderTexture);else{var u=t.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,t.resolution);c.filterFrame=u.filterFrame;var h=0;for(h=0;h<n.length-1;++h){1===h&&t.multisample>1&&((c=this.getOptimalFilterTexture(u.width,u.height,t.resolution)).filterFrame=u.filterFrame),n[h].apply(this,u,c,zp.CLEAR,t);var d=u;u=c,c=d}n[h].apply(this,u,l.renderTexture,zp.BLEND,t),h>1&&t.multisample>1&&this.returnFilterTexture(t.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}t.clear(),this.statePool.push(t)}},{key:"bindAndClear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zp.CLEAR,n=this.renderer,r=n.renderTexture,i=n.state;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,null!==e&&void 0!==e&&e.filterFrame){var o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);var a=1&i.stateId||this.forceClear;(t===zp.CLEAR||t===zp.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}},{key:"applyFilter",value:function(e,t,n,r){var i=this.renderer;i.state.set(e.state),this.bindAndClear(n,r),e.uniforms.uSampler=t,e.uniforms.filterGlobals=this.globalUniforms,i.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(t._frame,t.filterFrame),i.geometry.bind(this.quadUv),i.geometry.draw(Rp.TRIANGLES)):(i.geometry.bind(this.quad),i.geometry.draw(Rp.TRIANGLE_STRIP))}},{key:"calculateSpriteMatrix",value:function(e,t){var n=this.activeState,r=n.sourceFrame,i=n.destinationFrame,o=t._texture.orig,a=e.set(i.width,0,0,i.height,r.x,r.y),s=t.worldTransform.copyTo(kg.TEMP_MATRIX);return s.invert(),a.prepend(s),a.scale(1/o.width,1/o.height),a.translate(t.anchor.x,t.anchor.y),a}},{key:"destroy",value:function(){this.renderer=null,this.texturePool.clear(!1)}},{key:"getOptimalFilterTexture",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Yp.NONE;return this.texturePool.getOptimalTexture(e,t,n,r)}},{key:"getFilterTexture",value:function(e,t,n){if("number"===typeof e){var r=e;e=t,t=r}e=e||this.activeState.renderTexture;var i=this.texturePool.getOptimalTexture(e.width,e.height,t||e.resolution,n||Yp.NONE);return i.filterFrame=e.filterFrame,i}},{key:"returnFilterTexture",value:function(e){this.texturePool.returnTexture(e)}},{key:"emptyPool",value:function(){this.texturePool.clear(!0)}},{key:"resize",value:function(){this.texturePool.setScreenSize(this.renderer.view)}},{key:"transformAABB",value:function(e,t){var n=Iy[0],r=Iy[1],i=Iy[2],o=Iy[3];n.set(t.left,t.top),r.set(t.left,t.bottom),i.set(t.right,t.top),o.set(t.right,t.bottom),e.apply(n,n),e.apply(r,r),e.apply(i,i),e.apply(o,o);var a=Math.min(n.x,r.x,i.x,o.x),s=Math.min(n.y,r.y,i.y,o.y),l=Math.max(n.x,r.x,i.x,o.x),u=Math.max(n.y,r.y,i.y,o.y);t.x=a,t.y=s,t.width=l-a,t.height=u-s}},{key:"roundFrame",value:function(e,t,n,r,i){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(i){var o=i,a=o.a,s=o.b,l=o.c,u=o.d;if((Math.abs(s)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(a)>1e-4||Math.abs(u)>1e-4))return}(i=i?Oy.copyFrom(i):Oy.identity()).translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(i,e),e.ceil(t),this.transformAABB(i.invert(),e)}}}]),e}();Py.extension={type:zm.RendererSystem,name:"filter"},Wm.add(Py);var My=f((function e(t){u(this,e),this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Yp.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0})),Ry=new xg,Ny=function(){function e(t){u(this,e),this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new my(10,10),this.msaaSamples=null}return f(e,[{key:"contextChange",value:function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new xg,this.hasMRT=!0,this.writeDepthTexture=!0,1===this.renderer.context.webGLVersion){var t=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;Zp.PREFER_ENV===Ip.WEBGL_LEGACY&&(t=null,n=null),t?e.drawBuffers=function(e){return t.drawBuffersWEBGL(e)}:(this.hasMRT=!1,e.drawBuffers=function(){}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}},{key:"bind",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=this.gl;if(e){var i=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,i.framebuffer)),i.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,i.mipLevel=n),i.dirtyId!==e.dirtyId&&(i.dirtyId=e.dirtyId,i.dirtyFormat!==e.dirtyFormat?(i.dirtyFormat=e.dirtyFormat,i.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):i.dirtySize!==e.dirtySize&&(i.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(var o=0;o<e.colorTextures.length;o++){var a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),t){var s=t.width>>n,l=t.height>>n,u=s/t.width;this.setViewport(t.x*u,t.y*u,s,l)}else{var c=e.width>>n,h=e.height>>n;this.setViewport(0,0,c,h)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),t?this.setViewport(t.x,t.y,t.width,t.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}},{key:"setViewport",value:function(e,t,n,r){var i=this.viewport;e=Math.round(e),t=Math.round(t),n=Math.round(n),r=Math.round(r),i.width===n&&i.height===r&&i.x===e&&i.y===t||(i.x=e,i.y=t,i.width=n,i.height=r,this.gl.viewport(e,t,n,r))}},{key:"size",get:function(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}},{key:"clear",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Pp.COLOR|Pp.DEPTH,o=this.gl;o.clearColor(e,t,n,r),o.clear(i)}},{key:"initFramebuffer",value:function(e){var t=this.gl,n=new My(t.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}},{key:"resizeFramebuffer",value:function(e){var t=this.gl,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,n.stencil),n.msaaBuffer?t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,t.DEPTH24_STENCIL8,e.width,e.height):t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,e.width,e.height));var r=e.colorTextures,i=r.length;t.drawBuffers||(i=Math.min(i,1));for(var o=0;o<i;o++){var a=r[o],s=a.parentTextureArray||a;this.renderer.texture.bind(s,0),0===o&&n.msaaBuffer&&(t.bindRenderbuffer(t.RENDERBUFFER,n.msaaBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,n.multisample,s._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}},{key:"updateFramebuffer",value:function(e,t){var n=this.gl,r=e.glFramebuffers[this.CONTEXT_UID],i=e.colorTextures,o=i.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer():r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));for(var a=[],s=0;s<o;s++){var l=i[s],u=l.parentTextureArray||l;this.renderer.texture.bind(u,0),0===s&&r.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+s,l.target,u._glTextures[this.CONTEXT_UID].texture,t),a.push(n.COLOR_ATTACHMENT0+s))}if((a.length>1&&n.drawBuffers(a),e.depthTexture)&&this.writeDepthTexture){var c=e.depthTexture;this.renderer.texture.bind(c,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,c._glTextures[this.CONTEXT_UID].texture,t)}!e.stencil&&!e.depth||e.depthTexture&&this.writeDepthTexture?r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null):(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil))}},{key:"canMultisampleFramebuffer",value:function(e){return 1!==this.renderer.context.webGLVersion&&e.colorTextures.length<=1&&!e.depthTexture}},{key:"detectSamples",value:function(e){var t=this.msaaSamples,n=Yp.NONE;if(e<=1||null===t)return n;for(var r=0;r<t.length;r++)if(t[r]<=e){n=t[r];break}return 1===n&&(n=Yp.NONE),n}},{key:"blit",value:function(e,t,n){var r=this.current,i=this.renderer,o=this.gl,a=this.CONTEXT_UID;if(2===i.context.webGLVersion&&r){var s=r.glFramebuffers[a];if(s){if(!e){if(!s.msaaBuffer)return;var l=r.colorTextures[0];if(!l)return;s.blitFramebuffer||(s.blitFramebuffer=new my(r.width,r.height),s.blitFramebuffer.addColorTexture(0,l)),(e=s.blitFramebuffer).colorTextures[0]!==l&&(e.colorTextures[0]=l,e.dirtyId++,e.dirtyFormat++),e.width===r.width&&e.height===r.height||(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}t||((t=Ry).width=r.width,t.height=r.height),n||(n=t);var u=t.width===n.width&&t.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,s.framebuffer),o.blitFramebuffer(t.left,t.top,t.right,t.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}}}},{key:"disposeFramebuffer",value:function(e,t){var n=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(n){delete e.glFramebuffers[this.CONTEXT_UID];var i=this.managedFramebuffers.indexOf(e);i>=0&&this.managedFramebuffers.splice(i,1),e.disposeRunner.remove(this),t||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,t)}}},{key:"disposeAll",value:function(e){var t=this.managedFramebuffers;this.managedFramebuffers=[];for(var n=0;n<t.length;n++)this.disposeFramebuffer(t[n],e)}},{key:"forceStencil",value:function(){var e=this.current;if(e){var t=e.glFramebuffers[this.CONTEXT_UID];if(t&&!t.stencil){e.stencil=!0;var n=e.width,r=e.height,i=this.gl,o=i.createRenderbuffer();i.bindRenderbuffer(i.RENDERBUFFER,o),t.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,t.multisample,i.DEPTH24_STENCIL8,n,r):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,n,r),t.stencil=o,i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,o)}}}},{key:"reset",value:function(){this.current=this.unknownFramebuffer,this.viewport=new xg}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Ny.extension={type:zm.RendererSystem,name:"framebuffer"},Wm.add(Ny);var Dy={5126:4,5123:2,5121:1},Ly=function(){function e(t){u(this,e),this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}return f(e,[{key:"contextChange",value:function(){this.disposeAll(!0);var e=this.gl=this.renderer.gl,t=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,2!==t.webGLVersion){var n=this.renderer.context.extensions.vertexArrayObject;Zp.PREFER_ENV===Ip.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=function(){return n.createVertexArrayOES()},e.bindVertexArray=function(e){return n.bindVertexArrayOES(e)},e.deleteVertexArray=function(e){return n.deleteVertexArrayOES(e)}):(this.hasVao=!1,e.createVertexArray=function(){return null},e.bindVertexArray=function(){return null},e.deleteVertexArray=function(){return null})}if(2!==t.webGLVersion){var r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=function(e,t){return r.vertexAttribDivisorANGLE(e,t)},e.drawElementsInstanced=function(e,t,n,i,o){return r.drawElementsInstancedANGLE(e,t,n,i,o)},e.drawArraysInstanced=function(e,t,n,i){return r.drawArraysInstancedANGLE(e,t,n,i)}):this.hasInstance=!1}this.canUseUInt32ElementIndex=2===t.webGLVersion||!!t.extensions.uint32ElementIndex}},{key:"bind",value:function(e,t){t=t||this.renderer.shader.shader;var n=this.gl,r=e.glVertexArrayObjects[this.CONTEXT_UID],i=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},i=!0);var o=r[t.program.id]||this.initGeometryVao(e,t,i);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,t.program)),this.updateBuffers()}},{key:"reset",value:function(){this.unbind()}},{key:"updateBuffers",value:function(){for(var e=this._activeGeometry,t=this.renderer.buffer,n=0;n<e.buffers.length;n++){var r=e.buffers[n];t.update(r)}}},{key:"checkCompatibility",value:function(e,t){var n=e.attributes,r=t.attributeData;for(var i in r)if(!n[i])throw new Error('shader and geometry incompatible, geometry missing the "'.concat(i,'" attribute'))}},{key:"getSignature",value:function(e,t){var n=e.attributes,r=t.attributeData,i=["g",e.id];for(var o in n)r[o]&&i.push(o,r[o].location);return i.join("-")}},{key:"initGeometryVao",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=this.gl,i=this.CONTEXT_UID,o=this.renderer.buffer,a=t.program;a.glPrograms[i]||this.renderer.shader.generateProgram(t),this.checkCompatibility(e,a);var s=this.getSignature(e,a),l=e.glVertexArrayObjects[this.CONTEXT_UID],u=l[s];if(u)return l[a.id]=u,u;var c=e.buffers,h=e.attributes,d={},f={};for(var p in c)d[p]=0,f[p]=0;for(var v in h)!h[v].size&&a.attributeData[v]?h[v].size=a.attributeData[v].size:h[v].size,d[h[v].buffer]+=h[v].size*Dy[h[v].type];for(var m in h){var g=h[m],y=g.size;void 0===g.stride&&(d[g.buffer]===y*Dy[g.type]?g.stride=0:g.stride=d[g.buffer]),void 0===g.start&&(g.start=f[g.buffer],f[g.buffer]+=y*Dy[g.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(var b=0;b<c.length;b++){var _=c[b];o.bind(_),n&&_._glBuffers[i].refCount++}return this.activateVao(e,a),l[a.id]=u,l[s]=u,r.bindVertexArray(null),o.unbind(Kp.ARRAY_BUFFER),u}},{key:"disposeGeometry",value:function(e,t){var n;if(this.managedGeometries[e.id]){delete this.managedGeometries[e.id];var r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,o=e.buffers,a=null===(n=this.renderer)||void 0===n?void 0:n.buffer;if(e.disposeRunner.remove(this),r){if(a)for(var s=0;s<o.length;s++){var l=o[s]._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,0!==l.refCount||t||a.dispose(o[s],t))}if(!t)for(var u in r)if("g"===u[0]){var c=r[u];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}}},{key:"disposeAll",value:function(e){for(var t=Object.keys(this.managedGeometries),n=0;n<t.length;n++)this.disposeGeometry(this.managedGeometries[t[n]],e)}},{key:"activateVao",value:function(e,t){var n=this.gl,r=this.CONTEXT_UID,i=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&i.bind(e.indexBuffer);var s=null;for(var l in a){var u=a[l],c=o[u.buffer],h=c._glBuffers[r];if(t.attributeData[l]){s!==h&&(i.bind(c),s=h);var d=t.attributeData[l].location;if(n.enableVertexAttribArray(d),n.vertexAttribPointer(d,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");n.vertexAttribDivisor(d,u.divisor)}}}}},{key:"draw",value:function(e,t,n,r){var i=this.gl,o=this._activeGeometry;if(o.indexBuffer){var a=o.indexBuffer.data.BYTES_PER_ELEMENT,s=2===a?i.UNSIGNED_SHORT:i.UNSIGNED_INT;(2===a||4===a&&this.canUseUInt32ElementIndex)&&(o.instanced?i.drawElementsInstanced(e,t||o.indexBuffer.data.length,s,(n||0)*a,r||1):i.drawElements(e,t||o.indexBuffer.data.length,s,(n||0)*a))}else o.instanced?i.drawArraysInstanced(e,n,t||o.getSize(),r||1):i.drawArrays(e,n,t||o.getSize());return this}},{key:"unbind",value:function(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Ly.extension={type:zm.RendererSystem,name:"geometry"},Wm.add(Ly);var Fy=new kg,By=function(){function e(t,n){u(this,e),this._texture=t,this.mapCoord=new kg,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin="undefined"===typeof n?.5:n,this.isSimple=!1}return f(e,[{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._textureID=-1}},{key:"multiplyUvs",value:function(e,t){void 0===t&&(t=e);for(var n=this.mapCoord,r=0;r<e.length;r+=2){var i=e[r],o=e[r+1];t[r]=i*n.a+o*n.c+n.tx,t[r+1]=i*n.b+o*n.d+n.ty}return t}},{key:"update",value:function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._textureID===t._updateID)return!1;this._textureID=t._updateID,this._updateID++;var n=t._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);var r=t.orig,i=t.trim;i&&(Fy.set(r.width/i.width,0,0,r.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(Fy));var o=t.baseTexture,a=this.uClampFrame,s=this.clampMargin/o.resolution,l=this.clampOffset;return a[0]=(t._frame.x+s+l)/o.width,a[1]=(t._frame.y+s+l)/o.height,a[2]=(t._frame.x+t._frame.width-s+l)/o.width,a[3]=(t._frame.y+t._frame.height-s+l)/o.height,this.uClampOffset[0]=l/o.realWidth,this.uClampOffset[1]=l/o.realHeight,this.isSimple=t._frame.width===o.width&&t._frame.height===o.height&&0===t.rotate,!0}}]),e}(),Uy=function(e){v(n,e);var t=y(n);function n(e,r,i){var o;u(this,n);var a=null;return"string"!==typeof e&&void 0===r&&void 0===i&&(a=e,e=void 0,r=void 0,i=void 0),(o=t.call(this,e||"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n",r||"varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform float npmAlpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    original *= (alphaMul * masky.r * alpha * clip);\n\n    gl_FragColor = original;\n}\n",i)).maskSprite=a,o.maskMatrix=new kg,o}return f(n,[{key:"maskSprite",get:function(){return this._maskSprite},set:function(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}},{key:"apply",value:function(e,t,n,r){var i=this._maskSprite,o=i._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new By(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,i).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=i.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,t,n,r))}}]),n}(cy),Hy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;u(this,e),this.type=Wp.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=cy.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}return f(e,[{key:"filter",get:function(){return this._filters?this._filters[0]:null},set:function(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}},{key:"reset",value:function(){this.pooled&&(this.maskObject=null,this.type=Wp.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}},{key:"copyCountersOrReset",value:function(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}]),e}(),jy=function(){function e(t){u(this,e),this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}return f(e,[{key:"setMaskStack",value:function(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}},{key:"push",value:function(e,t){var n=t;if(!n.isMaskData){var r=this.maskDataPool.pop()||new Hy;r.pooled=!0,r.maskObject=t,n=r}var i=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Wp.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Wp.SCISSOR:this.renderer.scissor.push(n);break;case Wp.STENCIL:this.renderer.stencil.push(n);break;case Wp.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Wp.COLOR:this.pushColorMask(n)}n.type===Wp.SPRITE&&this.maskStack.push(n)}},{key:"pop",value:function(e){var t=this.maskStack.pop();if(t&&t._target===e){if(t.enabled)switch(t.type){case Wp.SCISSOR:this.renderer.scissor.pop(t);break;case Wp.STENCIL:this.renderer.stencil.pop(t.maskObject);break;case Wp.SPRITE:this.popSpriteMask(t);break;case Wp.COLOR:this.popColorMask(t)}if(t.reset(),t.pooled&&this.maskDataPool.push(t),0!==this.maskStack.length){var n=this.maskStack[this.maskStack.length-1];n.type===Wp.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}},{key:"detect",value:function(e){var t=e.maskObject;t?t.isSprite?e.type=Wp.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Wp.SCISSOR:e.type=Wp.STENCIL:e.type=Wp.COLOR}},{key:"pushSpriteMask",value:function(e){var t=e.maskObject,n=e._target,r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex])||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new Uy]);var i,o,a=this.renderer,s=a.renderTexture;if(s.current){var l,u=s.current;i=e.resolution||u.resolution,o=null!==(l=e.multisample)&&void 0!==l?l:u.multisample}else{var c;i=e.resolution||a.resolution,o=null!==(c=e.multisample)&&void 0!==c?c:a.multisample}r[0].resolution=i,r[0].multisample=o,r[0].maskSprite=t;var h=n.filterArea;n.filterArea=t.getBounds(!0),a.filter.push(n,r),n.filterArea=h,e._filters||this.alphaMaskIndex++}},{key:"popSpriteMask",value:function(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}},{key:"pushColorMask",value:function(e){var t=e._colorMask,n=e._colorMask=t&e.colorMask;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}},{key:"popColorMask",value:function(e){var t=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==t&&this.renderer.gl.colorMask(0!==(1&n),0!==(2&n),0!==(4&n),0!==(8&n))}},{key:"destroy",value:function(){this.renderer=null}}]),e}();jy.extension={type:zm.RendererSystem,name:"mask"},Wm.add(jy);var zy=function(){function e(t){u(this,e),this.renderer=t,this.maskStack=[],this.glConst=0}return f(e,[{key:"getStackLength",value:function(){return this.maskStack.length}},{key:"setMaskStack",value:function(e){var t=this.renderer.gl,n=this.getStackLength();this.maskStack=e;var r=this.getStackLength();r!==n&&(0===r?t.disable(this.glConst):(t.enable(this.glConst),this._useCurrent()))}},{key:"_useCurrent",value:function(){}},{key:"destroy",value:function(){this.renderer=null,this.maskStack=null}}]),e}(),Vy=new kg,Gy=[],Wy=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).glConst=Zp.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST,r}return f(n,[{key:"getStackLength",value:function(){var e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}},{key:"calcScissorRect",value:function(e){var t;if(!e._scissorRectLocal){var n=e._scissorRect,r=e.maskObject,i=this.renderer,o=i.renderTexture,a=r.getBounds(!0,null!==(t=Gy.pop())&&void 0!==t?t:new xg);this.roundFrameToPixels(a,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),n&&a.fit(n),e._scissorRectLocal=a}}},{key:"testScissor",value:function(e){var t=e.maskObject;if(!t.isFastRect||!t.isFastRect())return!1;if(n.isMatrixRotated(t.worldTransform))return!1;if(n.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);var r=e._scissorRectLocal;return r.width>0&&r.height>0}},{key:"roundFrameToPixels",value:function(e,t,r,i,o){n.isMatrixRotated(o)||((o=o?Vy.copyFrom(o):Vy.identity()).translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(o,e),e.fit(i),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}},{key:"push",value:function(e){e._scissorRectLocal||this.calcScissorRect(e);var t=this.renderer.gl;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}},{key:"pop",value:function(e){var t=this.renderer.gl;e&&Gy.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}},{key:"_useCurrent",value:function(){var e,t=this.maskStack[this.maskStack.length-1]._scissorRect;e=this.renderer.renderTexture.current?t.y:this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}}],[{key:"isMatrixRotated",value:function(e){if(!e)return!1;var t=e.a,n=e.b,r=e.c,i=e.d;return(Math.abs(n)>1e-4||Math.abs(r)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(i)>1e-4)}}]),n}(zy),Xy=Wy;Xy.extension={type:zm.RendererSystem,name:"scissor"},Wm.add(Xy);var Yy=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).glConst=Zp.ADAPTER.getWebGLRenderingContext().STENCIL_TEST,r}return f(n,[{key:"getStackLength",value:function(){var e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}},{key:"push",value:function(e){var t=e.maskObject,n=this.renderer.gl,r=e._stencilCounter;0===r&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;var i=e._colorMask;0!==i&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,0!==i&&(e._colorMask=i,n.colorMask(0!==(1&i),0!==(2&i),0!==(4&i),0!==(8&i))),this._useCurrent()}},{key:"pop",value:function(e){var t=this.renderer.gl;if(0===this.getStackLength())t.disable(t.STENCIL_TEST);else{var n=0!==this.maskStack.length?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;0!==r&&(n._colorMask=0,t.colorMask(!1,!1,!1,!1)),t.stencilOp(t.KEEP,t.KEEP,t.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,0!==r&&(n._colorMask=r,t.colorMask(0!==(1&r),0!==(2&r),0!==(4&r),0!==(8&r))),this._useCurrent()}}},{key:"_useCurrent",value:function(){var e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}]),n}(zy);Yy.extension={type:zm.RendererSystem,name:"stencil"},Wm.add(Yy);var Ky=function(){function e(t){u(this,e),this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get:function(){return Tv("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get:function(){return Tv("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get:function(){return Tv("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}return f(e,[{key:"init",value:function(){var e=this.rendererPlugins;for(var t in e)this.plugins[t]=new e[t](this.renderer)}},{key:"destroy",value:function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}]),e}();Ky.extension={type:[zm.RendererSystem,zm.CanvasRendererSystem],name:"_plugin"},Wm.add(Ky);var qy=function(){function e(t){u(this,e),this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new kg,this.transform=null}return f(e,[{key:"update",value:function(e,t,n,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);var i=this.renderer;i.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,i.globalUniforms.update(),i.shader.shader&&i.shader.syncUniformGroup(i.shader.shader.uniforms.globals)}},{key:"calculateProjection",value:function(e,t,n,r){var i=this.projectionMatrix,o=r?-1:1;i.identity(),i.a=1/t.width*2,i.d=o*(1/t.height*2),i.tx=-1-t.x*i.a,i.ty=-o-t.y*i.d}},{key:"setTransform",value:function(e){}},{key:"destroy",value:function(){this.renderer=null}}]),e}();qy.extension={type:zm.RendererSystem,name:"projection"},Wm.add(qy);var Zy=["region"],$y=new Fg,Qy=function(){function e(t){u(this,e),this.renderer=t,this._tempMatrix=new kg}return f(e,[{key:"generateTexture",value:function(e,t){var n=t||{},r=n.region,i=Yn(n,Zy),o=r||e.getLocalBounds(null,!0);0===o.width&&(o.width=1),0===o.height&&(o.height=1);var a=Ty.create(Re({width:o.width,height:o.height},i));this._tempMatrix.tx=-o.x,this._tempMatrix.ty=-o.y;var s=e.transform;return e.transform=$y,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=s,a}},{key:"destroy",value:function(){}}]),e}();Qy.extension={type:[zm.RendererSystem,zm.CanvasRendererSystem],name:"textureGenerator"},Wm.add(Qy);var Jy=new xg,eb=new xg,tb=function(){function e(t){u(this,e),this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new xg,this.destinationFrame=new xg,this.viewportFrame=new xg}return f(e,[{key:"contextChange",value:function(){var e,t=null===(e=this.renderer)||void 0===e?void 0:e.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(t&&t.alpha&&t.premultipliedAlpha)}},{key:"bind",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=this.renderer;this.current=r,r?(n=(e=r.baseTexture).resolution,i||(Jy.width=r.frame.width,Jy.height=r.frame.height,i=Jy),o||(eb.x=r.frame.x,eb.y=r.frame.y,eb.width=i.width,eb.height=i.height,o=eb),t=e.framebuffer):(n=a.resolution,i||(Jy.width=a._view.screen.width,Jy.height=a._view.screen.height,i=Jy),o||((o=Jy).width=i.width,o.height=i.height));var s=this.viewportFrame;s.x=o.x*n,s.y=o.y*n,s.width=o.width*n,s.height=o.height*n,r||(s.y=a.view.height-(s.y+s.height)),s.ceil(),this.renderer.framebuffer.bind(t,s),this.renderer.projection.update(o,i,n,!t),r?this.renderer.mask.setMaskStack(e.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(o)}},{key:"clear",value:function(e,t){var n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,r=rm.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&r.premultiply(r.alpha);var i=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=i.width!==o.width||i.height!==o.height;if(a){var s=this.viewportFrame,l=s.x,u=s.y,c=s.width,h=s.height;l=Math.round(l),u=Math.round(u),c=Math.round(c),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,c,h)}this.renderer.framebuffer.clear(r.red,r.green,r.blue,r.alpha,t),a&&this.renderer.scissor.pop()}},{key:"resize",value:function(){this.bind(null)}},{key:"reset",value:function(){this.bind(null)}},{key:"destroy",value:function(){this.renderer=null}}]),e}();tb.extension={type:zm.RendererSystem,name:"renderTexture"},Wm.add(tb);var nb=f((function e(){u(this,e)})),rb=function(){function e(t,n){u(this,e),this.program=t,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}return f(e,[{key:"destroy",value:function(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}]),e}();function ib(e,t,n){var r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}function ob(e){for(var t=new Array(e),n=0;n<t.length;n++)t[n]=!1;return t}function ab(e,t){switch(e){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ob(2*t);case"bvec3":return ob(3*t);case"bvec4":return ob(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}function sb(e,t){var n,r=e.getShaderSource(t).split("\n").map((function(e,t){return"".concat(t,": ").concat(e)})),i=e.getShaderInfoLog(t).split("\n"),o={},a=i.map((function(e){return parseFloat(e.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))})).filter((function(e){return!(!e||o[e])&&(o[e]=!0,!0)})),s=[""];a.forEach((function(e){r[e-1]="%c".concat(r[e-1],"%c"),s.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")}));var l=r.join("\n");s[0]=l,(n=console).warn.apply(n,s)}function lb(e,t){var n,r=ib(e,e.VERTEX_SHADER,t.vertexSrc),i=ib(e,e.FRAGMENT_SHADER,t.fragmentSrc),o=e.createProgram();e.attachShader(o,r),e.attachShader(o,i);var a=null===(n=t.extra)||void 0===n?void 0:n.transformFeedbackVaryings;if(a&&("function"!==typeof e.transformFeedbackVaryings||e.transformFeedbackVaryings(o,a.names,"separate"===a.bufferMode?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||function(e,t,n,r){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(n,e.COMPILE_STATUS)||sb(e,n),e.getShaderParameter(r,e.COMPILE_STATUS)||sb(e,r),e.getProgramInfoLog(t))}(e,o,r,i),t.attributeData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),i=0;i<r;i++){var o=t.getActiveAttrib(e,i);if(!o.name.startsWith("gl_")){var a=qg(t,o.type),s={type:a,name:o.name,size:Xg(a),location:t.getAttribLocation(e,o.name)};n[o.name]=s}}return n}(o,e),t.uniformData=function(e,t){for(var n={},r=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),i=0;i<r;i++){var o=t.getActiveUniform(e,i),a=o.name.replace(/\[.*?\]$/,""),s=!!o.name.match(/\[.*?\]$/),l=qg(t,o.type);n[a]={name:a,index:i,type:l,size:o.size,isArray:s,value:ab(l,o.size)}}return n}(o,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){var s=Object.keys(t.attributeData);s.sort((function(e,t){return e>t?1:-1}));for(var l=0;l<s.length;l++)t.attributeData[s[l]].location=l,e.bindAttribLocation(o,l,s[l]);e.linkProgram(o)}e.deleteShader(r),e.deleteShader(i);var u={};for(var c in t.uniformData){var h=t.uniformData[c];u[c]={location:e.getUniformLocation(o,c),value:ab(h.type,h.size)}}return new rb(o,u)}function ub(e,t,n,r,i){n.buffer.update(i)}var cb,hb={float:"\n        data[offset] = v;\n    ",vec2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n    ",vec3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n    ",vec4:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n        data[offset+3] = v[3];\n    ",mat2:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n\n        data[offset+4] = v[2];\n        data[offset+5] = v[3];\n    ",mat3:"\n        data[offset] = v[0];\n        data[offset+1] = v[1];\n        data[offset+2] = v[2];\n\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];\n    ",mat4:"\n        for(var i = 0; i < 16; i++)\n        {\n            data[offset + i] = v[i];\n        }\n    "},db={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:32,mat3:48,mat4:64};function fb(e){for(var t=e.map((function(e){return{data:e,offset:0,dataLen:0,dirty:0}})),n=0,r=0,i=0,o=0;o<t.length;o++){var a=t[o];if(n=db[a.data.type],a.data.size>1&&(n=Math.max(n,16)*a.data.size),a.dataLen=n,r%n!==0&&r<16){var s=r%n%16;r+=s,i+=s}r+n>16?(i=16*Math.ceil(i/16),a.offset=i,i+=n,r=n):(a.offset=i,r+=n,i+=n)}return{uboElements:t,size:i=16*Math.ceil(i/16)}}function pb(e,t){var n=[];for(var r in e)t[r]&&n.push(t[r]);return n.sort((function(e,t){return e.index-t.index})),n}function vb(e,t){if(!e.autoManage)return{size:0,syncFunc:ub};for(var n=fb(pb(e.uniforms,t)),r=n.uboElements,i=n.size,o=["\n    var v = null;\n    var v2 = null;\n    var cv = null;\n    var t = 0;\n    var gl = renderer.gl\n    var index = 0;\n    var data = buffer.data;\n    "],a=0;a<r.length;a++){for(var s=r[a],l=e.uniforms[s.data.name],u=s.data.name,c=!1,h=0;h<Bg.length;h++){var d=Bg[h];if(d.codeUbo&&d.test(s.data,l)){o.push("offset = ".concat(s.offset/4,";"),Bg[h].codeUbo(s.data.name,l)),c=!0;break}}if(!c)if(s.data.size>1){var f=Xg(s.data.type),p=Math.max(db[s.data.type]/16,1),v=f/p,m=(4-v%4)%4;o.push("\n                cv = ud.".concat(u,".value;\n                v = uv.").concat(u,";\n                offset = ").concat(s.offset/4,";\n\n                t = 0;\n\n                for(var i=0; i < ").concat(s.data.size*p,"; i++)\n                {\n                    for(var j = 0; j < ").concat(v,"; j++)\n                    {\n                        data[offset++] = v[t++];\n                    }\n                    offset += ").concat(m,";\n                }\n\n                "))}else{var g=hb[s.data.type];o.push("\n                cv = ud.".concat(u,".value;\n                v = uv.").concat(u,";\n                offset = ").concat(s.offset/4,";\n                ").concat(g,";\n                "))}}return o.push("\n       renderer.buffer.update(buffer);\n    "),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",o.join("\n"))}}function mb(){if("boolean"===typeof cb)return cb;try{var e=new Function("param1","param2","param3","return param1[param2] === param3;");cb=!0===e({a:"b"},"a","b")}catch(Pv){cb=!1}return cb}var gb=0,yb={textureCount:0,uboCount:0},bb=function(){function e(t){u(this,e),this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=gb++}return f(e,[{key:"systemCheck",value:function(){if(!mb())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}},{key:"contextChange",value:function(e){this.gl=e,this.reset()}},{key:"bind",value:function(e,t){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;var n=e.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),t||(yb.textureCount=0,yb.uboCount=0,this.syncUniformGroup(e.uniformGroup,yb)),r}},{key:"setUniforms",value:function(e){var t=this.shader.program,n=t.glPrograms[this.renderer.CONTEXT_UID];t.syncUniforms(n.uniformData,e,this.renderer)}},{key:"syncUniformGroup",value:function(e,t){var n=this.getGlProgram();e.static&&e.dirtyId===n.uniformDirtyGroups[e.id]||(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,t))}},{key:"syncUniforms",value:function(e,t,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(t.uniformData,e.uniforms,this.renderer,n)}},{key:"createSyncGroups",value:function(e){var t=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[t]||(this.cache[t]=function(e,t){var n=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n    "];for(var r in e.uniforms){var i=t[r];if(i){for(var o=e.uniforms[r],a=!1,s=0;s<Bg.length;s++)if(Bg[s].test(i,o)){n.push(Bg[s].code(r,o)),a=!0;break}if(!a){var l=(1!==i.size||i.isArray?Hg:Ug)[i.type].replace("location",'ud["'.concat(r,'"].location'));n.push('\n            cu = ud["'.concat(r,'"];\n            cv = cu.value;\n            v = uv["').concat(r,'"];\n            ').concat(l,";"))}}else{var u;null!==(u=e.uniforms[r])&&void 0!==u&&u.group&&(e.uniforms[r].ubo?n.push("\n                        renderer.shader.syncUniformBufferGroup(uv.".concat(r,", '").concat(r,"');\n                    ")):n.push("\n                        renderer.shader.syncUniformGroup(uv.".concat(r,", syncData);\n                    ")))}}return new Function("ud","uv","renderer","syncData",n.join("\n"))}(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[t],e.syncUniforms[this.shader.program.id]}},{key:"syncUniformBufferGroup",value:function(e,t){var n=this.getGlProgram();if(!e.static||0!==e.dirtyId||!n.uniformGroups[e.id]){e.dirtyId=0;var r=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,t);e.buffer.update(),r(n.uniformData,e.uniforms,this.renderer,yb,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[t])}},{key:"createSyncBufferGroup",value:function(e,t,n){var r=this.renderer.gl;this.renderer.buffer.bind(e.buffer);var i=this.gl.getUniformBlockIndex(t.program,n);t.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(t.program,i,this.shader.uniformBindCount),this.shader.uniformBindCount++;var o=this.getSignature(e,this.shader.program.uniformData,"ubo"),a=this._uboCache[o];if(a||(a=this._uboCache[o]=vb(e,this.shader.program.uniformData)),e.autoManage){var s=new Float32Array(a.size/4);e.buffer.update(s)}return t.uniformGroups[e.id]=a.syncFunc,t.uniformGroups[e.id]}},{key:"getSignature",value:function(e,t,n){var r=e.uniforms,i=["".concat(n,"-")];for(var o in r)i.push(o),t[o]&&i.push(t[o].type);return i.join("-")}},{key:"getGlProgram",value:function(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}},{key:"generateProgram",value:function(e){var t=this.gl,n=e.program,r=lb(t,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r}},{key:"reset",value:function(){this.program=null,this.shader=null}},{key:"disposeShader",value:function(e){this.shader===e&&(this.shader=null)}},{key:"destroy",value:function(){this.renderer=null,this.destroyed=!0}}]),e}();bb.extension={type:zm.RendererSystem,name:"shader"},Wm.add(bb);var _b=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"run",value:function(e){var t=this.renderer;t.runners.init.emit(t.options),e.hello,t.resize(t.screen.width,t.screen.height)}},{key:"destroy",value:function(){}}]),e}();_b.defaultOptions={hello:!1},_b.extension={type:[zm.RendererSystem,zm.CanvasRendererSystem],name:"startup"},Wm.add(_b);var xb=function(){function e(){u(this,e),this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Mp.NONE,this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=new Zm,this.defaultState.blend=!0}return f(e,[{key:"contextChange",value:function(e){this.gl=e,this.blendModes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t[Mp.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.ADD]=[e.ONE,e.ONE],t[Mp.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.NONE]=[0,0],t[Mp.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[Mp.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[Mp.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[Mp.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[Mp.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Mp.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[Mp.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[Mp.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[Mp.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[Mp.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[Mp.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}(e),this.set(this.defaultState),this.reset()}},{key:"set",value:function(e){if(e=e||this.defaultState,this.stateId!==e.data){for(var t=this.stateId^e.data,n=0;t;)1&t&&this.map[n].call(this,!!(e.data&1<<n)),t>>=1,n++;this.stateId=e.data}for(var r=0;r<this.checks.length;r++)this.checks[r](this,e)}},{key:"forceState",value:function(e){e=e||this.defaultState;for(var t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(var n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}},{key:"setBlend",value:function(t){this.updateCheck(e.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}},{key:"setOffset",value:function(t){this.updateCheck(e.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}},{key:"setDepthTest",value:function(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}},{key:"setDepthMask",value:function(e){this.gl.depthMask(e)}},{key:"setCullFace",value:function(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}},{key:"setFrontFace",value:function(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}},{key:"setBlendMode",value:function(e){if(e!==this.blendMode){this.blendMode=e;var t=this.blendModes[e],n=this.gl;2===t.length?n.blendFunc(t[0],t[1]):n.blendFuncSeparate(t[0],t[1],t[2],t[3]),6===t.length?(this._blendEq=!0,n.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}}},{key:"setPolygonOffset",value:function(e,t){this.gl.polygonOffset(e,t)}},{key:"reset",value:function(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}},{key:"updateCheck",value:function(e,t){var n=this.checks.indexOf(e);t&&-1===n?this.checks.push(e):t||-1===n||this.checks.splice(n,1)}},{key:"destroy",value:function(){this.gl=null}}],[{key:"checkBlendMode",value:function(e,t){e.setBlendMode(t.blendMode)}},{key:"checkPolygonOffset",value:function(e,t){e.setPolygonOffset(1,t.polygonOffset)}}]),e}(),Eb=xb;function wb(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}Eb.extension={type:zm.RendererSystem,name:"state"},Wm.add(Eb);var Tb=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).runners={},e._systemsHash={},e}return f(n,[{key:"setup",value:function(e){var t;this.addRunners.apply(this,Pe(e.runners));var n,r=(null!==(t=e.priority)&&void 0!==t?t:[]).filter((function(t){return e.systems[t]})),i=wb([].concat(Pe(r),Pe(Object.keys(e.systems).filter((function(e){return!r.includes(e)})))));try{for(i.s();!(n=i.n()).done;){var o=n.value;this.addSystem(e.systems[o],o)}}catch(a){i.e(a)}finally{i.f()}}},{key:"addRunners",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e.runners[t]=new Jm(t)}))}},{key:"addSystem",value:function(e,t){var n=new e(this);if(this[t])throw new Error('Whoops! The name "'.concat(t,'" is already in use'));for(var r in this[t]=n,this._systemsHash[t]=n,this.runners)this.runners[r].add(n);return this}},{key:"emitWithCustomOptions",value:function(e,t){var n=this,r=Object.keys(this._systemsHash);e.items.forEach((function(i){var o=r.find((function(e){return n._systemsHash[e]===i}));i[e.name](t[o])}))}},{key:"destroy",value:function(){Object.values(this.runners).forEach((function(e){e.destroy()})),this._systemsHash={}}}]),n}(vv),Sb=function(){function e(t){u(this,e),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=e.defaultMaxIdle,this.checkCountMax=e.defaultCheckCountMax,this.mode=e.defaultMode}return f(e,[{key:"postrender",value:function(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Vp.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}},{key:"run",value:function(){for(var e=this.renderer.texture,t=e.managedTextures,n=!1,r=0;r<t.length;r++){var i=t[r];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),t[r]=null,n=!0)}if(n){for(var o=0,a=0;a<t.length;a++)null!==t[a]&&(t[o++]=t[a]);t.length=o}}},{key:"unload",value:function(e){var t=this.renderer.texture,n=e._texture;n&&!n.framebuffer&&t.destroyTexture(n);for(var r=e.children.length-1;r>=0;r--)this.unload(e.children[r])}},{key:"destroy",value:function(){this.renderer=null}}]),e}(),kb=Sb;kb.defaultMode=Vp.AUTO,kb.defaultMaxIdle=3600,kb.defaultCheckCountMax=600,kb.extension={type:zm.RendererSystem,name:"textureGC"},Wm.add(kb);var Cb=f((function e(t){u(this,e),this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=Lp.UNSIGNED_BYTE,this.internalFormat=Np.RGBA,this.samplerType=0}));var Ab=function(){function e(t){u(this,e),this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ig,this.hasIntegerTextures=!1}return f(e,[{key:"contextChange",value:function(){var e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=function(e){var t,n,r,i,o,a,s,l,u,c,h,d,f;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?(b(h={},Lp.UNSIGNED_BYTE,(b(n={},Np.RGBA,e.RGBA8),b(n,Np.RGB,e.RGB8),b(n,Np.RG,e.RG8),b(n,Np.RED,e.R8),b(n,Np.RGBA_INTEGER,e.RGBA8UI),b(n,Np.RGB_INTEGER,e.RGB8UI),b(n,Np.RG_INTEGER,e.RG8UI),b(n,Np.RED_INTEGER,e.R8UI),b(n,Np.ALPHA,e.ALPHA),b(n,Np.LUMINANCE,e.LUMINANCE),b(n,Np.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA),n)),b(h,Lp.BYTE,(b(r={},Np.RGBA,e.RGBA8_SNORM),b(r,Np.RGB,e.RGB8_SNORM),b(r,Np.RG,e.RG8_SNORM),b(r,Np.RED,e.R8_SNORM),b(r,Np.RGBA_INTEGER,e.RGBA8I),b(r,Np.RGB_INTEGER,e.RGB8I),b(r,Np.RG_INTEGER,e.RG8I),b(r,Np.RED_INTEGER,e.R8I),r)),b(h,Lp.UNSIGNED_SHORT,(b(i={},Np.RGBA_INTEGER,e.RGBA16UI),b(i,Np.RGB_INTEGER,e.RGB16UI),b(i,Np.RG_INTEGER,e.RG16UI),b(i,Np.RED_INTEGER,e.R16UI),b(i,Np.DEPTH_COMPONENT,e.DEPTH_COMPONENT16),i)),b(h,Lp.SHORT,(b(o={},Np.RGBA_INTEGER,e.RGBA16I),b(o,Np.RGB_INTEGER,e.RGB16I),b(o,Np.RG_INTEGER,e.RG16I),b(o,Np.RED_INTEGER,e.R16I),o)),b(h,Lp.UNSIGNED_INT,(b(a={},Np.RGBA_INTEGER,e.RGBA32UI),b(a,Np.RGB_INTEGER,e.RGB32UI),b(a,Np.RG_INTEGER,e.RG32UI),b(a,Np.RED_INTEGER,e.R32UI),b(a,Np.DEPTH_COMPONENT,e.DEPTH_COMPONENT24),a)),b(h,Lp.INT,(b(s={},Np.RGBA_INTEGER,e.RGBA32I),b(s,Np.RGB_INTEGER,e.RGB32I),b(s,Np.RG_INTEGER,e.RG32I),b(s,Np.RED_INTEGER,e.R32I),s)),b(h,Lp.FLOAT,(b(l={},Np.RGBA,e.RGBA32F),b(l,Np.RGB,e.RGB32F),b(l,Np.RG,e.RG32F),b(l,Np.RED,e.R32F),b(l,Np.DEPTH_COMPONENT,e.DEPTH_COMPONENT32F),l)),b(h,Lp.HALF_FLOAT,(b(u={},Np.RGBA,e.RGBA16F),b(u,Np.RGB,e.RGB16F),b(u,Np.RG,e.RG16F),b(u,Np.RED,e.R16F),u)),b(h,Lp.UNSIGNED_SHORT_5_6_5,b({},Np.RGB,e.RGB565)),b(h,Lp.UNSIGNED_SHORT_4_4_4_4,b({},Np.RGBA,e.RGBA4)),b(h,Lp.UNSIGNED_SHORT_5_5_5_1,b({},Np.RGBA,e.RGB5_A1)),b(h,Lp.UNSIGNED_INT_2_10_10_10_REV,(b(c={},Np.RGBA,e.RGB10_A2),b(c,Np.RGBA_INTEGER,e.RGB10_A2UI),c)),b(h,Lp.UNSIGNED_INT_10F_11F_11F_REV,b({},Np.RGB,e.R11F_G11F_B10F)),b(h,Lp.UNSIGNED_INT_5_9_9_9_REV,b({},Np.RGB,e.RGB9_E5)),b(h,Lp.UNSIGNED_INT_24_8,b({},Np.DEPTH_STENCIL,e.DEPTH24_STENCIL8)),b(h,Lp.FLOAT_32_UNSIGNED_INT_24_8_REV,b({},Np.DEPTH_STENCIL,e.DEPTH32F_STENCIL8)),t=h):(b(f={},Lp.UNSIGNED_BYTE,(b(d={},Np.RGBA,e.RGBA),b(d,Np.RGB,e.RGB),b(d,Np.ALPHA,e.ALPHA),b(d,Np.LUMINANCE,e.LUMINANCE),b(d,Np.LUMINANCE_ALPHA,e.LUMINANCE_ALPHA),d)),b(f,Lp.UNSIGNED_SHORT_5_6_5,b({},Np.RGB,e.RGB)),b(f,Lp.UNSIGNED_SHORT_4_4_4_4,b({},Np.RGBA,e.RGBA)),b(f,Lp.UNSIGNED_SHORT_5_5_5_1,b({},Np.RGBA,e.RGBA)),t=f),t}(e);var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=t;for(var n=0;n<t;n++)this.boundTextures[n]=null;this.emptyTextures={};var r=new Cb(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Cb(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(var i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(var o=0;o<this.boundTextures.length;o++)this.bind(null,o)}},{key:"bind",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.gl;if(null!==(n=e=null===(t=e)||void 0===t?void 0:t.castToBaseTexture())&&void 0!==n&&n.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;var o=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(e.target,o.texture)),o.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),this.updateTexture(e)):o.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,i.activeTexture(i.TEXTURE0+r)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[r]=null}},{key:"reset",value:function(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}},{key:"unbind",value:function(e){var t=this.gl,n=this.boundTextures;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(var i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(t.activeTexture(t.TEXTURE0+i),this.currentLocation=i),t.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}},{key:"ensureSamplerType",value:function(e){var t=this.boundTextures,n=this.hasIntegerTextures,r=this.CONTEXT_UID;if(n)for(var i=e-1;i>=0;--i){var o=t[i];if(o)o._glTextures[r].samplerType!==Fp.FLOAT&&this.renderer.texture.unbind(o)}}},{key:"initTexture",value:function(e){var t=new Cb(this.gl.createTexture());return t.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=t,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),t}},{key:"initTextureType",value:function(e,t){var n,r;t.internalFormat=null!==(n=null===(r=this.internalFormats[e.type])||void 0===r?void 0:r[e.format])&&void 0!==n?n:e.format,2===this.webGLVersion&&e.type===Lp.HALF_FLOAT?t.type=this.gl.HALF_FLOAT:t.type=e.type}},{key:"updateTexture",value:function(e){var t,n=e._glTextures[this.CONTEXT_UID];if(n){var r=this.renderer;if(this.initTextureType(e,n),null!==(t=e.resource)&&void 0!==t&&t.upload(r,e,n))n.samplerType!==Fp.FLOAT&&(this.hasIntegerTextures=!0);else{var i=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==i||n.height!==o||n.dirtyId<0)&&(n.width=i,n.height=o,a.texImage2D(e.target,0,n.internalFormat,i,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}}},{key:"destroyTexture",value:function(e,t){var n=this.gl;if((e=e.castToBaseTexture())._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!t)){var r=this.managedTextures.indexOf(e);-1!==r&&xm(this.managedTextures,r,1)}}},{key:"updateTextureStyle",value:function(e){var t,n=e._glTextures[this.CONTEXT_UID];n&&(e.mipmap!==Hp.POW2&&2===this.webGLVersion||e.isPowerOfTwo?n.mipmap=e.mipmap>=1:n.mipmap=!1,2===this.webGLVersion||e.isPowerOfTwo?n.wrapMode=e.wrapMode:n.wrapMode=Up.CLAMP,null!==(t=e.resource)&&void 0!==t&&t.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}},{key:"setStyle",value:function(e,t){var n=this.gl;if(t.mipmap&&e.mipmap!==Hp.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,t.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,t.wrapMode),t.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Bp.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);var r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===Bp.LINEAR){var i=Math.min(e.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===Bp.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===Bp.LINEAR?n.LINEAR:n.NEAREST)}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Ab.extension={type:zm.RendererSystem,name:"texture"},Wm.add(Ab);var Ib=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"contextChange",value:function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}},{key:"bind",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,r)}},{key:"unbind",value:function(){var e=this.gl;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}},{key:"beginTransformFeedback",value:function(e,t){var n=this.gl,r=this.renderer;t&&r.shader.bind(t),n.beginTransformFeedback(e)}},{key:"endTransformFeedback",value:function(){this.gl.endTransformFeedback()}},{key:"createGLTransformFeedback",value:function(e){var t=this.gl,n=this.renderer,r=this.CONTEXT_UID,i=t.createTransformFeedback();e._glTransformFeedbacks[r]=i,t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,i);for(var o=0;o<e.buffers.length;o++){var a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[r].refCount++,t.bindBufferBase(t.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),i}},{key:"disposeTransformFeedback",value:function(e,t){var n=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);var i=this.renderer.buffer;if(i)for(var o=0;o<e.buffers.length;o++){var a=e.buffers[o];if(a){var s=a._glBuffers[this.CONTEXT_UID];s&&(s.refCount--,0!==s.refCount||t||i.dispose(a,t))}}n&&(t||r.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}},{key:"destroy",value:function(){this.renderer=null}}]),e}();Ib.extension={type:zm.RendererSystem,name:"transformFeedback"},Wm.add(Ib);var Ob=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"init",value:function(e){this.screen=new xg(0,0,e.width,e.height),this.element=e.view||Zp.ADAPTER.createCanvas(),this.resolution=e.resolution||Zp.RESOLUTION,this.autoDensity=!!e.autoDensity}},{key:"resizeView",value:function(e,t){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(t*this.resolution);var n=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.element.style.width="".concat(n,"px"),this.element.style.height="".concat(r,"px")),this.renderer.emit("resize",n,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}},{key:"destroy",value:function(e){var t;e&&(null===(t=this.element.parentNode)||void 0===t||t.removeChild(this.element));this.renderer=null,this.element=null,this.screen=null}}]),e}();Ob.defaultOptions={width:800,height:600,resolution:Zp.RESOLUTION,autoDensity:!1},Ob.extension={type:[zm.RendererSystem,zm.CanvasRendererSystem],name:"_view"},Wm.add(Ob),Zp.PREFER_ENV=Ip.WEBGL2,Zp.STRICT_TEXTURE_CACHE=!1,Zp.RENDER_OPTIONS=Re(Re(Re(Re({},py.defaultOptions),hy.defaultOptions),Ob.defaultOptions),_b.defaultOptions),Object.defineProperties(Zp,{WRAP_MODE:{get:function(){return ig.defaultOptions.wrapMode},set:function(e){Tv("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ig.defaultOptions.wrapMode=e}},SCALE_MODE:{get:function(){return ig.defaultOptions.scaleMode},set:function(e){Tv("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ig.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get:function(){return ig.defaultOptions.mipmap},set:function(e){Tv("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ig.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get:function(){return ig.defaultOptions.anisotropicLevel},set:function(e){Tv("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ig.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get:function(){return Tv("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),cy.defaultResolution},set:function(e){cy.defaultResolution=e}},FILTER_MULTISAMPLE:{get:function(){return Tv("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),cy.defaultMultisample},set:function(e){cy.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get:function(){return ly.defaultMaxTextures},set:function(e){Tv("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),ly.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get:function(){return ly.defaultBatchSize},set:function(e){Tv("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),ly.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get:function(){return ly.canUploadSameBuffer},set:function(e){Tv("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),ly.canUploadSameBuffer=e}},GC_MODE:{get:function(){return kb.defaultMode},set:function(e){Tv("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),kb.defaultMode=e}},GC_MAX_IDLE:{get:function(){return kb.defaultMaxIdle},set:function(e){Tv("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),kb.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get:function(){return kb.defaultCheckCountMax},set:function(e){Tv("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),kb.defaultCheckCountMax=e}},PRECISION_VERTEX:{get:function(){return ey.defaultVertexPrecision},set:function(e){Tv("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),ey.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get:function(){return ey.defaultFragmentPrecision},set:function(e){Tv("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),ey.defaultFragmentPrecision=e}}});var Pb=function(e){return e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e}(Pb||{}),Mb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,e),this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=n,this.priority=r,this.once=i}return f(e,[{key:"match",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.fn===e&&this.context===t}},{key:"emit",value:function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}},{key:"connect",value:function(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t}}]),e}(),Rb=function(){function e(){var t=this;u(this,e),this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Mb(null,null,1/0),this.deltaMS=1/e.targetFPMS,this.elapsedMS=1/e.targetFPMS,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return f(e,[{key:"_requestIfNeeded",value:function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}},{key:"_cancelIfNeeded",value:function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}},{key:"_startIfPossible",value:function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pb.NORMAL;return this._addListener(new Mb(e,t,n))}},{key:"addOnce",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pb.NORMAL;return this._addListener(new Mb(e,t,n,!0))}},{key:"_addListener",value:function(e){var t=this._head.next,n=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(n);break}n=t,t=t.next}e.previous||e.connect(n)}else e.connect(n);return this._startIfPossible(),this}},{key:"remove",value:function(e,t){for(var n=this._head.next;n;)n=n.match(e,t)?n.destroy():n.next;return this._head.next||this._cancelIfNeeded(),this}},{key:"count",get:function(){if(!this._head)return 0;for(var e=0,t=this._head;t=t.next;)e++;return e}},{key:"start",value:function(){this.started||(this.started=!0,this._requestIfNeeded())}},{key:"stop",value:function(){this.started&&(this.started=!1,this._cancelIfNeeded())}},{key:"destroy",value:function(){if(!this._protected){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}},{key:"update",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now();if(n>this.lastTime){if((t=this.elapsedMS=n-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){var r=n-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=n-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*e.targetFPMS;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=n}},{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var n=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,n)/1e3,e.targetFPMS);this._maxElapsedMS=1/r}},{key:"maxFPS",get:function(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0},set:function(e){if(0===e)this._minElapsedMS=0;else{var t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}}],[{key:"shared",get:function(){if(!e._shared){var t=e._shared=new e;t.autoStart=!0,t._protected=!0}return e._shared}},{key:"system",get:function(){if(!e._system){var t=e._system=new e;t.autoStart=!0,t._protected=!0}return e._system}}]),e}(),Nb=Rb;Nb.targetFPMS=.06,Object.defineProperties(Zp,{TARGET_FPMS:{get:function(){return Nb.targetFPMS},set:function(e){Tv("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Nb.targetFPMS=e}}});var Db=function(){function e(){u(this,e)}return f(e,null,[{key:"init",value:function(e){var t=this;e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set:function(e){this._ticker&&this._ticker.remove(this.render,this),this._ticker=e,e&&e.add(this.render,this,Pb.LOW)},get:function(){return this._ticker}}),this.stop=function(){t._ticker.stop()},this.start=function(){t._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Nb.shared:new Nb,e.autoStart&&this.start()}},{key:"destroy",value:function(){if(this._ticker){var e=this._ticker;this.ticker=null,e.destroy()}}}]),e}();Db.extension=zm.Application,Wm.add(Db);var Lb=[];function Fb(e){var t,n=wb(Lb);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.test(e))return new r(e)}}catch(i){n.e(i)}finally{n.f()}throw new Error("Unable to auto-detect a suitable renderer.")}Wm.handleByList(zm.Renderer,Lb);var Bb="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",Ub="attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition();\n    vTextureCoord = filterTextureCoord();\n}\n",Hb=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"contextChange",value:function(e){var t;if(1===this.renderer.context.webGLVersion){var n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{var r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),t=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}t>=Yp.HIGH?this.multisample=Yp.HIGH:t>=Yp.MEDIUM?this.multisample=Yp.MEDIUM:t>=Yp.LOW?this.multisample=Yp.LOW:this.multisample=Yp.NONE}},{key:"destroy",value:function(){}}]),e}();Hb.extension={type:zm.RendererSystem,name:"_multisample"},Wm.add(Hb);var jb=f((function e(t){u(this,e),this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0})),zb=function(){function e(t){u(this,e),this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}return f(e,[{key:"destroy",value:function(){this.renderer=null}},{key:"contextChange",value:function(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}},{key:"bind",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);t.bindBuffer(e.type,r.buffer)}},{key:"unbind",value:function(e){this.gl.bindBuffer(e,null)}},{key:"bindBufferBase",value:function(e,t){var n=this.gl,r=this.CONTEXT_UID;if(this.boundBufferBases[t]!==e){var i=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[t]=e,n.bindBufferBase(n.UNIFORM_BUFFER,t,i.buffer)}}},{key:"bindBufferRange",value:function(e,t,n){var r=this.gl,i=this.CONTEXT_UID;n=n||0;var o=e._glBuffers[i]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,t||0,o.buffer,256*n,256)}},{key:"update",value:function(e){var t=this.gl,n=this.CONTEXT_UID,r=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,t.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)t.bufferSubData(e.type,0,e.data);else{var i=e.static?t.STATIC_DRAW:t.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,t.bufferData(e.type,e.data,i)}}},{key:"dispose",value:function(e,t){if(this.managedBuffers[e.id]){delete this.managedBuffers[e.id];var n=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),n&&(t||r.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}}},{key:"disposeAll",value:function(e){for(var t=Object.keys(this.managedBuffers),n=0;n<t.length;n++)this.dispose(this.managedBuffers[t[n]],e)}},{key:"createGLBuffer",value:function(e){var t=this.CONTEXT_UID,n=this.gl;return e._glBuffers[t]=new jb(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[t]}}]),e}();zb.extension={type:zm.RendererSystem,name:"buffer"},Wm.add(zb);var Vb=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"render",value:function(e,t){var n,r,i,o,a,s=this.renderer;if(t&&(r=t.renderTexture,i=t.clear,o=t.transform,a=t.skipUpdateTransform),this.renderingToScreen=!r,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=o,!s.context.isLost){if(r||(this.lastObjectRendered=e),!a){var l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}s.renderTexture.bind(r),s.batch.currentRenderer.start(),(null!==(n=i)&&void 0!==n?n:s.background.clearBeforeRender)&&s.renderTexture.clear(),e.render(s),s.batch.currentRenderer.flush(),r&&(t.blit&&s.framebuffer.blit(),r.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}},{key:"destroy",value:function(){this.renderer=null,this.lastObjectRendered=null}}]),e}();Vb.extension={type:zm.RendererSystem,name:"objectRenderer"},Wm.add(Vb);var Gb=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this)).type=Op.WEBGL,e=Object.assign({},Zp.RENDER_OPTIONS,e),r.gl=null,r.CONTEXT_UID=0,r.globalUniforms=new ny({projectionMatrix:new kg},!0);var i={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:n.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};return r.setup(i),"useContextAlpha"in e&&(Tv("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&"notMultiplied"!==e.useContextAlpha,e.backgroundAlpha=!1===e.useContextAlpha?1:e.backgroundAlpha),r._plugin.rendererPlugins=n.__plugins,r.options=e,r.startup.run(r.options),r}return f(n,[{key:"render",value:function(e,t){this.objectRenderer.render(e,t)}},{key:"resize",value:function(e,t){this._view.resizeView(e,t)}},{key:"reset",value:function(){return this.runners.reset.emit(),this}},{key:"clear",value:function(){this.renderTexture.bind(),this.renderTexture.clear()}},{key:"destroy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),jm(m(n.prototype),"destroy",this).call(this)}},{key:"plugins",get:function(){return this._plugin.plugins}},{key:"multisample",get:function(){return this._multisample.multisample}},{key:"width",get:function(){return this._view.element.width}},{key:"height",get:function(){return this._view.element.height}},{key:"resolution",get:function(){return this._view.resolution},set:function(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}},{key:"autoDensity",get:function(){return this._view.autoDensity}},{key:"view",get:function(){return this._view.element}},{key:"screen",get:function(){return this._view.screen}},{key:"lastObjectRendered",get:function(){return this.objectRenderer.lastObjectRendered}},{key:"renderingToScreen",get:function(){return this.objectRenderer.renderingToScreen}},{key:"rendererLogId",get:function(){return"WebGL ".concat(this.context.webGLVersion)}},{key:"clearBeforeRender",get:function(){return Tv("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}},{key:"useContextAlpha",get:function(){return Tv("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}},{key:"preserveDrawingBuffer",get:function(){return Tv("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}},{key:"backgroundColor",get:function(){return Tv("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color},set:function(e){Tv("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}},{key:"backgroundAlpha",get:function(){return Tv("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha},set:function(e){Tv("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}},{key:"powerPreference",get:function(){return Tv("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}},{key:"generateTexture",value:function(e,t){return this.textureGenerator.generateTexture(e,t)}}],[{key:"test",value:function(e){return(null===e||void 0===e||!e.forceCanvas)&&Cv()}}]),n}(Tb),Wb=Gb;Wb.extension={type:zm.Renderer,priority:1},Wb.__plugins={},Wb.__systems={},Wm.handleByMap(zm.RendererPlugin,Wb.__plugins),Wm.handleByMap(zm.RendererSystem,Wb.__systems),Wm.add(Wb);var Xb=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o=r||{},a=o.width,s=o.height;(i=t.call(this,a,s)).items=[],i.itemDirtyIds=[];for(var l=0;l<e;l++){var c=new ig;i.items.push(c),i.itemDirtyIds.push(-2)}return i.length=e,i._load=null,i.baseTexture=null,i}return f(n,[{key:"initFromArray",value:function(e,t){for(var n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof eg?this.addResourceAt(e[n],n):this.addResourceAt(Qm(e[n],t),n))}},{key:"dispose",value:function(){for(var e=0,t=this.length;e<t;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}},{key:"addResourceAt",value:function(e,t){if(!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[t].setResource(e),this}},{key:"bind",value:function(e){if(null!==this.baseTexture)throw new Error("Only one base texture per TextureArray is allowed");jm(m(n.prototype),"bind",this).call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=e,this.items[t].on("update",e.update,e)}},{key:"unbind",value:function(e){jm(m(n.prototype),"unbind",this).call(this,e);for(var t=0;t<this.length;t++)this.items[t].parentTextureArray=null,this.items[t].off("update",e.update,e)}},{key:"load",value:function(){var e=this;if(this._load)return this._load;var t=this.items.map((function(e){return e.resource})).filter((function(e){return e})).map((function(e){return e.load()}));return this._load=Promise.all(t).then((function(){var t=e.items[0],n=t.realWidth,r=t.realHeight;return e.resize(n,r),Promise.resolve(e)})),this._load}}]),n}(eg),Yb=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o,a,s=r||{},l=s.width,c=s.height;return Array.isArray(e)?(o=e,a=e.length):a=e,i=t.call(this,a,{width:l,height:c}),o&&i.initFromArray(o,r),i}return f(n,[{key:"addBaseTextureAt",value:function(e,t){if(!e.resource)throw new Error("ArrayResource does not support RenderTexture");return this.addResourceAt(e.resource,t),this}},{key:"bind",value:function(e){jm(m(n.prototype),"bind",this).call(this,e),e.target=Dp.TEXTURE_2D_ARRAY}},{key:"upload",value:function(e,t,n){var r=this.length,i=this.itemDirtyIds,o=this.items,a=e.gl;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,t.format,n.type,null);for(var s=0;s<r;s++){var l=o[s];i[s]<l.dirtyId&&(i[s]=l.dirtyId,l.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,s,l.resource.width,l.resource.height,1,t.format,n.type,l.resource.source))}return!0}}]),n}(Xb),Kb=function(e){v(n,e);var t=y(n);function n(e){return u(this,n),t.call(this,e)}return f(n,null,[{key:"test",value:function(e){var t=globalThis.OffscreenCanvas;return!!(t&&e instanceof t)||globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}]),n}(yy),qb=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o=r||{},a=o.width,s=o.height,l=o.autoLoad,c=o.linkBaseTexture;if(e&&e.length!==n.SIDES)throw new Error("Invalid length. Got ".concat(e.length,", expected 6"));i=t.call(this,6,{width:a,height:s});for(var h=0;h<n.SIDES;h++)i.items[h].target=Dp.TEXTURE_CUBE_MAP_POSITIVE_X+h;return i.linkBaseTexture=!1!==c,e&&i.initFromArray(e,r),!1!==l&&i.load(),i}return f(n,[{key:"bind",value:function(e){jm(m(n.prototype),"bind",this).call(this,e),e.target=Dp.TEXTURE_CUBE_MAP}},{key:"addBaseTextureAt",value:function(e,t,n){if(void 0===n&&(n=this.linkBaseTexture),!this.items[t])throw new Error("Index ".concat(t," is out of bounds"));if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0){if(!e.resource)throw new Error("CubeResource does not support copying of renderTexture.");this.addResourceAt(e.resource,t)}else e.target=Dp.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}},{key:"upload",value:function(e,t,r){for(var i=this.itemDirtyIds,o=0;o<n.SIDES;o++){var a=this.items[o];(i[o]<a.dirtyId||r.dirtyId<t.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(e,a,r),i[o]=a.dirtyId):i[o]<-1&&(e.gl.texImage2D(a.target,0,r.internalFormat,t.realWidth,t.realHeight,0,t.format,r.type,null),i[o]=-1))}return!0}}],[{key:"test",value:function(e){return Array.isArray(e)&&e.length===n.SIDES}}]),n}(Xb),Zb=qb;Zb.SIDES=6;var $b=function(e){v(n,e);var t=y(n);function n(e,r){var i,o,a,s;return u(this,n),r=r||{},"string"===typeof e?(a=n.EMPTY,s=e):(a=e,s=null),(o=t.call(this,a)).url=s,o.crossOrigin=null===(i=r.crossOrigin)||void 0===i||i,o.alphaMode="number"===typeof r.alphaMode?r.alphaMode:null,o._load=null,!1!==r.autoLoad&&o.load(),o}return f(n,[{key:"load",value:function(){var e=this;return this._load||(this._load=new Promise(function(){var t=Ee(_e().mark((function t(n,r){var i,o,a;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.url){t.next=3;break}return n(e),t.abrupt("return");case 3:return t.prev=3,t.next=6,Zp.ADAPTER.fetch(e.url,{mode:e.crossOrigin?"cors":"no-cors"});case 6:if(i=t.sent,!e.destroyed){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,i.blob();case 11:if(o=t.sent,!e.destroyed){t.next=14;break}return t.abrupt("return");case 14:return t.next=16,createImageBitmap(o,{premultiplyAlpha:null===e.alphaMode||e.alphaMode===jp.UNPACK?"premultiply":"none"});case 16:if(a=t.sent,!e.destroyed){t.next=19;break}return t.abrupt("return");case 19:e.source=a,e.update(),n(e),t.next=30;break;case 24:if(t.prev=24,t.t0=t.catch(3),!e.destroyed){t.next=28;break}return t.abrupt("return");case 28:r(t.t0),e.onError.emit(t.t0);case 30:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e,n){return t.apply(this,arguments)}}())),this._load}},{key:"upload",value:function(e,t,r){return this.source instanceof ImageBitmap?("number"===typeof this.alphaMode&&(t.alphaMode=this.alphaMode),jm(m(n.prototype),"upload",this).call(this,e,t,r)):(this.load(),!1)}},{key:"dispose",value:function(){this.source instanceof ImageBitmap&&this.source.close(),jm(m(n.prototype),"dispose",this).call(this),this._load=null}}],[{key:"test",value:function(e){return!!globalThis.createImageBitmap&&"undefined"!==typeof ImageBitmap&&("string"===typeof e||e instanceof ImageBitmap)}},{key:"EMPTY",get:function(){var e;return n._EMPTY=null!==(e=n._EMPTY)&&void 0!==e?e:Zp.ADAPTER.createCanvas(0,0),n._EMPTY}}]),n}(yy),Qb=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),r=r||{},(i=t.call(this,Zp.ADAPTER.createCanvas()))._width=0,i._height=0,i.svg=e,i.scale=r.scale||1,i._overrideWidth=r.width,i._overrideHeight=r.height,i._resolve=null,i._crossorigin=r.crossorigin,i._load=null,!1!==r.autoLoad&&i.load(),i}return f(n,[{key:"load",value:function(){var e=this;return this._load||(this._load=new Promise((function(t){if(e._resolve=function(){e.resize(e.source.width,e.source.height),t(e)},n.SVG_XML.test(e.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");e.svg="data:image/svg+xml;base64,".concat(btoa(unescape(encodeURIComponent(e.svg))))}e._loadSvg()}))),this._load}},{key:"_loadSvg",value:function(){var e=this,t=new Image;yy.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=function(n){e._resolve&&(t.onerror=null,e.onError.emit(n))},t.onload=function(){if(e._resolve){var n=t.width,r=t.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");var i=n*e.scale,o=r*e.scale;(e._overrideWidth||e._overrideHeight)&&(i=e._overrideWidth||e._overrideHeight/r*n,o=e._overrideHeight||e._overrideWidth/n*r),i=Math.round(i),o=Math.round(o);var a=e.source;a.width=i,a.height=o,a._pixiId="canvas_".concat(Tm()),a.getContext("2d").drawImage(t,0,0,n,r,0,0,i,o),e._resolve(),e._resolve=null}}}},{key:"dispose",value:function(){jm(m(n.prototype),"dispose",this).call(this),this._resolve=null,this._crossorigin=null}}],[{key:"getSize",value:function(e){var t=n.SVG_SIZE.exec(e),r={};return t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7]))),r}},{key:"test",value:function(e,t){return"svg"===t||"string"===typeof e&&e.startsWith("data:image/svg+xml")||"string"===typeof e&&n.SVG_XML.test(e)}}]),n}(yy),Jb=Qb;Jb.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,Jb.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;var e_=function(e){v(n,e);var t=y(n);function n(e,r){var i;if(u(this,n),r=r||{},!(e instanceof HTMLVideoElement)){var o=document.createElement("video");o.setAttribute("preload","auto"),o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline",""),"string"===typeof e&&(e=[e]);var a=e[0].src||e[0];yy.crossOrigin(o,a,r.crossorigin);for(var s=0;s<e.length;++s){var l=document.createElement("source"),c=e[s],h=c.src,d=c.mime,f=(h=h||e[s]).split("?").shift().toLowerCase(),p=f.slice(f.lastIndexOf(".")+1);d=d||n.MIME_TYPES[p]||"video/".concat(p),l.src=h,l.type=d,o.appendChild(l)}e=o}return(i=t.call(this,e)).noSubImage=!0,i._autoUpdate=!0,i._isConnectedToTicker=!1,i._updateFPS=r.updateFPS||0,i._msToNextUpdate=0,i.autoPlay=!1!==r.autoPlay,i._load=null,i._resolve=null,i._onCanPlay=i._onCanPlay.bind(g(i)),i._onError=i._onError.bind(g(i)),!1!==r.autoLoad&&i.load(),i}return f(n,[{key:"update",value:function(){if(!this.destroyed){var e=Nb.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(jm(m(n.prototype),"update",this).call(this),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}},{key:"load",value:function(){var e=this;if(this._load)return this._load;var t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise((function(n){e.valid?n(e):(e._resolve=n,t.load())})),this._load}},{key:"_onError",value:function(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}},{key:"_isSourcePlaying",value:function(){var e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}},{key:"_isSourceReady",value:function(){return this.source.readyState>2}},{key:"_onPlayStart",value:function(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Nb.shared.add(this.update,this),this._isConnectedToTicker=!0)}},{key:"_onPlayStop",value:function(){this._isConnectedToTicker&&(Nb.shared.remove(this.update,this),this._isConnectedToTicker=!1)}},{key:"_onCanPlay",value:function(){var e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);var t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}},{key:"dispose",value:function(){this._isConnectedToTicker&&(Nb.shared.remove(this.update,this),this._isConnectedToTicker=!1);var e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),jm(m(n.prototype),"dispose",this).call(this)}},{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Nb.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Nb.shared.add(this.update,this),this._isConnectedToTicker=!0))}},{key:"updateFPS",get:function(){return this._updateFPS},set:function(e){e!==this._updateFPS&&(this._updateFPS=e)}}],[{key:"test",value:function(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||n.TYPES.includes(t)}}]),n}(yy),t_=e_;t_.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],t_.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},$m.push($b,by,Kb,t_,Jb,tg,Zb,Yb);var n_=function(){function e(){u(this,e),this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Jm("disposeTransformFeedback")}return f(e,[{key:"bindBuffer",value:function(e,t){this.buffers[e]=t}},{key:"destroy",value:function(){this.disposeRunner.emit(this,!1)}}]),e}(),r_="7.2.4",i_=function(){function e(){u(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}return f(e,[{key:"isEmpty",value:function(){return this.minX>this.maxX||this.minY>this.maxY}},{key:"clear",value:function(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}},{key:"getRectangle",value:function(e){return this.minX>this.maxX||this.minY>this.maxY?xg.EMPTY:((e=e||new xg(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}},{key:"addPoint",value:function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}},{key:"addPointMatrix",value:function(e,t){var n=e.a,r=e.b,i=e.c,o=e.d,a=e.tx,s=e.ty,l=n*t.x+i*t.y+a,u=r*t.x+o*t.y+s;this.minX=Math.min(this.minX,l),this.maxX=Math.max(this.maxX,l),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}},{key:"addQuad",value:function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY,o=e[0],a=e[1];t=o<t?o:t,n=a<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[2])<t?o:t,n=(a=e[3])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[4])<t?o:t,n=(a=e[5])<n?a:n,r=o>r?o:r,i=a>i?a:i,t=(o=e[6])<t?o:t,n=(a=e[7])<n?a:n,r=o>r?o:r,i=a>i?a:i,this.minX=t,this.minY=n,this.maxX=r,this.maxY=i}},{key:"addFrame",value:function(e,t,n,r,i){this.addFrameMatrix(e.worldTransform,t,n,r,i)}},{key:"addFrameMatrix",value:function(e,t,n,r,i){var o=e.a,a=e.b,s=e.c,l=e.d,u=e.tx,c=e.ty,h=this.minX,d=this.minY,f=this.maxX,p=this.maxY,v=o*t+s*n+u,m=a*t+l*n+c;h=v<h?v:h,d=m<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*n+u)<h?v:h,d=(m=a*r+l*n+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*t+s*i+u)<h?v:h,d=(m=a*t+l*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,h=(v=o*r+s*i+u)<h?v:h,d=(m=a*r+l*i+c)<d?m:d,f=v>f?v:f,p=m>p?m:p,this.minX=h,this.minY=d,this.maxX=f,this.maxY=p}},{key:"addVertexData",value:function(e,t,n){for(var r=this.minX,i=this.minY,o=this.maxX,a=this.maxY,s=t;s<n;s+=2){var l=e[s],u=e[s+1];r=l<r?l:r,i=u<i?u:i,o=l>o?l:o,a=u>a?u:a}this.minX=r,this.minY=i,this.maxX=o,this.maxY=a}},{key:"addVertices",value:function(e,t,n,r){this.addVerticesMatrix(e.worldTransform,t,n,r)}},{key:"addVerticesMatrix",value:function(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i,a=e.a,s=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty,d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,m=n;m<r;m+=2){var g=t[m],y=t[m+1],b=a*g+l*y+c,_=u*y+s*g+h;d=Math.min(d,b-i),p=Math.max(p,b+i),f=Math.min(f,_-o),v=Math.max(v,_+o)}this.minX=d,this.minY=f,this.maxX=p,this.maxY=v}},{key:"addBounds",value:function(e){var t=this.minX,n=this.minY,r=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>i?e.maxY:i}},{key:"addBoundsMask",value:function(e,t){var n=e.minX>t.minX?e.minX:t.minX,r=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,o=e.maxY<t.maxY?e.maxY:t.maxY;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}}},{key:"addBoundsMatrix",value:function(e,t){this.addFrameMatrix(t,e.minX,e.minY,e.maxX,e.maxY)}},{key:"addBoundsArea",value:function(e,t){var n=e.minX>t.x?e.minX:t.x,r=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,o=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(n<=i&&r<=o){var a=this.minX,s=this.minY,l=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<s?r:s,this.maxX=i>l?i:l,this.maxY=o>u?o:u}}},{key:"pad",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=t,this.maxY+=t)}},{key:"addFramePad",value:function(e,t,n,r,i,o){e-=i,t-=o,n+=i,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<t?this.minY:t,this.maxY=this.maxY>r?this.maxY:r}}]),e}(),o_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).tempDisplayObjectParent=null,e.transform=new Fg,e.alpha=1,e.visible=!0,e.renderable=!0,e.cullable=!1,e.cullArea=null,e.parent=null,e.worldAlpha=1,e._lastSortedIndex=0,e._zIndex=0,e.filterArea=null,e.filters=null,e._enabledFilters=null,e._bounds=new i_,e._localBounds=null,e._boundsID=0,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._maskRefCount=0,e._destroyed=!1,e.isSprite=!1,e.isMask=!1,e}return f(n,[{key:"destroyed",get:function(){return this._destroyed}},{key:"_recursivePostUpdateTransform",value:function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}},{key:"updateTransform",value:function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}},{key:"getBounds",value:function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),t||(this._boundsRect||(this._boundsRect=new xg),t=this._boundsRect),this._bounds.getRectangle(t)}},{key:"getLocalBounds",value:function(e){e||(this._localBoundsRect||(this._localBoundsRect=new xg),e=this._localBoundsRect),this._localBounds||(this._localBounds=new i_);var t=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;var r=this._bounds,i=this._boundsID;this._bounds=this._localBounds;var o=this.getBounds(!1,e);return this.parent=n,this.transform=t,this._bounds=r,this._bounds.updateID+=this._boundsID-i,o}},{key:"toGlobal",value:function(e,t){return arguments.length>2&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}},{key:"toLocal",value:function(e,t,n,r){return t&&(e=t.toGlobal(e,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}},{key:"setParent",value:function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}},{key:"removeFromParent",value:function(){var e;null===(e=this.parent)||void 0===e||e.removeChild(this)}},{key:"setTransform",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=n||1,this.scale.y=r||1,this.rotation=i,this.skew.x=o,this.skew.y=a,this.pivot.x=s,this.pivot.y=l,this}},{key:"destroy",value:function(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}},{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new a_),this.tempDisplayObjectParent}},{key:"enableTempParent",value:function(){var e=this.parent;return this.parent=this._tempDisplayObjectParent,e}},{key:"disableTempParent",value:function(e){this.parent=e}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copyFrom(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copyFrom(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copyFrom(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copyFrom(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"angle",get:function(){return this.transform.rotation*mg},set:function(e){this.transform.rotation=e*gg}},{key:"zIndex",get:function(){return this._zIndex},set:function(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){if(this._mask!==e){if(this._mask){var t=this._mask.isMaskData?this._mask.maskObject:this._mask;t&&(t._maskRefCount--,0===t._maskRefCount&&(t.renderable=!0,t.isMask=!1))}if(this._mask=e,this._mask){var n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(0===n._maskRefCount&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}],[{key:"mixin",value:function(e){for(var t=Object.keys(e),r=0;r<t.length;++r){var i=t[r];Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}}]),n}(vv),a_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).sortDirty=null,e}return f(n)}(o_);o_.prototype.displayObjectUpdateTransform=o_.prototype.updateTransform;var s_=new kg;function l_(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}var u_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).children=[],e.sortableChildren=n.defaultSortableChildren,e.sortDirty=!1,e}return f(n,[{key:"onChildrenChange",value:function(e){}},{key:"addChild",value:function(){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.addChild(e<0||arguments.length<=e?void 0:arguments[e]);else{var t=arguments.length<=0?void 0:arguments[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return arguments.length<=0?void 0:arguments[0]}},{key:"addChildAt",value:function(e,t){if(t<0||t>this.children.length)throw new Error("".concat(e,"addChildAt: The index ").concat(t," supplied is out of bounds ").concat(this.children.length));return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}},{key:"swapChildren",value:function(e,t){if(e!==t){var n=this.getChildIndex(e),r=this.getChildIndex(t);this.children[n]=t,this.children[r]=e,this.onChildrenChange(n<r?n:r)}}},{key:"getChildIndex",value:function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}},{key:"setChildIndex",value:function(e,t){if(t<0||t>=this.children.length)throw new Error("The index ".concat(t," supplied is out of bounds ").concat(this.children.length));var n=this.getChildIndex(e);xm(this.children,n,1),this.children.splice(t,0,e),this.onChildrenChange(t)}},{key:"getChildAt",value:function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index (".concat(e,") does not exist."));return this.children[e]}},{key:"removeChild",value:function(){if(arguments.length>1)for(var e=0;e<arguments.length;e++)this.removeChild(e<0||arguments.length<=e?void 0:arguments[e]);else{var t=arguments.length<=0?void 0:arguments[0],n=this.children.indexOf(t);if(-1===n)return null;t.parent=null,t.transform._parentID=-1,xm(this.children,n,1),this._boundsID++,this.onChildrenChange(n),t.emit("removed",this),this.emit("childRemoved",t,this,n)}return arguments.length<=0?void 0:arguments[0]}},{key:"removeChildAt",value:function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,xm(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}},{key:"removeChildren",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.children.length,r=t,i=n-r;if(i>0&&i<=n){e=this.children.splice(r,i);for(var o=0;o<e.length;++o)e[o].parent=null,e[o].transform&&(e[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<e.length;++a)e[a].emit("removed",this),this.emit("childRemoved",e[a],this,a);return e}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}},{key:"sortChildren",value:function(){for(var e=!1,t=0,n=this.children.length;t<n;++t){var r=this.children[t];r._lastSortedIndex=t,e||0===r.zIndex||(e=!0)}e&&this.children.length>1&&this.children.sort(l_),this.sortDirty=!1}},{key:"updateTransform",value:function(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var n=this.children[e];n.visible&&n.updateTransform()}}},{key:"calculateBounds",value:function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];if(t.visible&&t.renderable)if(t.calculateBounds(),t._mask){var n=t._mask.isMaskData?t._mask.maskObject:t._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(t._bounds,n._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}},{key:"getLocalBounds",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=jm(m(n.prototype),"getLocalBounds",this).call(this,e);if(!t)for(var i=0,o=this.children.length;i<o;++i){var a=this.children[i];a.visible&&a.updateTransform()}return r}},{key:"_calculateBounds",value:function(){}},{key:"_renderWithCulling",value:function(e){var t=e.renderTexture.sourceFrame;if(t.width>0&&t.height>0){var r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==n.prototype._render&&(r=this.getBounds(!0));var o=e.projection.transform;if(o&&(i?(i=s_.copyFrom(i)).prepend(o):i=o),r&&t.intersects(r,i))this._render(e);else if(this.cullArea)return;for(var a=0,s=this.children.length;a<s;++a){var l=this.children[a],u=l.cullable;l.cullable=u||!this.cullArea,l.render(e),l.cullable=u}}}},{key:"render",value:function(e){var t;if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||null!==(t=this.filters)&&void 0!==t&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(var n=0,r=this.children.length;n<r;++n)this.children[n].render(e)}}},{key:"renderAdvanced",value:function(e){var t,n,r,i=this.filters,o=this._mask;if(i){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var a=0;a<i.length;a++)i[a].enabled&&this._enabledFilters.push(i[a])}var s=i&&(null===(t=this._enabledFilters)||void 0===t?void 0:t.length)||o&&(!o.isMaskData||o.enabled&&(o.autoDetect||o.type!==Wp.NONE));if(s&&e.batch.flush(),i&&null!==(n=this._enabledFilters)&&void 0!==n&&n.length&&e.filter.push(this,this._enabledFilters),o&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(var l=0,u=this.children.length;l<u;++l)this.children[l].render(e)}s&&e.batch.flush(),o&&e.mask.pop(this),i&&null!==(r=this._enabledFilters)&&void 0!==r&&r.length&&e.filter.pop()}},{key:"_render",value:function(e){}},{key:"destroy",value:function(e){jm(m(n.prototype),"destroy",this).call(this),this.sortDirty=!1;var t="boolean"===typeof e?e:null===e||void 0===e?void 0:e.children,r=this.removeChildren(0,this.children.length);if(t)for(var i=0;i<r.length;++i)r[i].destroy(e)}},{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),n}(o_),c_=u_;c_.defaultSortableChildren=!1,c_.prototype.containerUpdateTransform=c_.prototype.updateTransform,Object.defineProperties(Zp,{SORTABLE_CHILDREN:{get:function(){return c_.defaultSortableChildren},set:function(e){Tv("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),c_.defaultSortableChildren=e}}});var h_=new bg,d_=new Uint16Array([0,1,2,0,2,3]),f_=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this))._anchor=new Dg(r._onAnchorUpdate,g(r),e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tintColor=new rm(16777215),r._tintRGB=null,r.tint=16777215,r.blendMode=Mp.NORMAL,r._cachedTint=16777215,r.uvs=null,r.texture=e||wy.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.indices=d_,r.pluginName="batch",r.isSprite=!0,r._roundPixels=Zp.ROUND_PIXELS,r}return f(n,[{key:"_onTextureUpdate",value:function(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Em(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Em(this.scale.y)*this._height/this._texture.orig.height)}},{key:"_onAnchorUpdate",value:function(){this._transformID=-1,this._transformTrimmedID=-1}},{key:"calculateVertices",value:function(){var e=this._texture;if(this._transformID!==this.transform._worldID||this._textureID!==e._updateID){this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this.vertexData,u=e.trim,c=e.orig,h=this._anchor,d=0,f=0,p=0,v=0;if(u?(d=(f=u.x-h._x*c.width)+u.width,p=(v=u.y-h._y*c.height)+u.height):(d=(f=-h._x*c.width)+c.width,p=(v=-h._y*c.height)+c.height),l[0]=n*f+i*v+a,l[1]=o*v+r*f+s,l[2]=n*d+i*v+a,l[3]=o*v+r*d+s,l[4]=n*d+i*p+a,l[5]=o*p+r*d+s,l[6]=n*f+i*p+a,l[7]=o*p+r*f+s,this._roundPixels)for(var m=Zp.RESOLUTION,g=0;g<l.length;++g)l[g]=Math.round(l[g]*m)/m}}},{key:"calculateTrimmedVertices",value:function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,n=e.orig,r=this._anchor,i=this.transform.worldTransform,o=i.a,a=i.b,s=i.c,l=i.d,u=i.tx,c=i.ty,h=-r._x*n.width,d=h+n.width,f=-r._y*n.height,p=f+n.height;t[0]=o*h+s*f+u,t[1]=l*f+a*h+c,t[2]=o*d+s*f+u,t[3]=l*f+a*d+c,t[4]=o*d+s*p+u,t[5]=l*p+a*d+c,t[6]=o*h+s*p+u,t[7]=l*p+a*h+c}},{key:"_render",value:function(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}},{key:"_calculateBounds",value:function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}},{key:"getLocalBounds",value:function(e){return 0===this.children.length?(this._localBounds||(this._localBounds=new i_),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xg),e=this._localBoundsRect),this._localBounds.getRectangle(e)):jm(m(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"containsPoint",value:function(e){this.worldTransform.applyInverse(e,h_);var t=this._texture.orig.width,n=this._texture.orig.height,r=-t*this.anchor.x,i=0;return h_.x>=r&&h_.x<r+t&&(i=-n*this.anchor.y,h_.y>=i&&h_.y<i+n)}},{key:"destroy",value:function(e){if(jm(m(n.prototype),"destroy",this).call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"===typeof e?e:null===e||void 0===e?void 0:e.texture){var t="boolean"===typeof e?e:null===e||void 0===e?void 0:e.baseTexture;this._texture.destroy(!!t)}this._texture=null}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=Em(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=Em(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copyFrom(e)}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}},{key:"tintValue",get:function(){return this._tintColor.toNumber()}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||wy.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}],[{key:"from",value:function(e,t){return new n(e instanceof wy?e:wy.from(e,t))}}]),n}(c_),p_=new kg;o_.prototype._cacheAsBitmap=!1,o_.prototype._cacheData=null,o_.prototype._cacheAsBitmapResolution=null,o_.prototype._cacheAsBitmapMultisample=null;var v_=f((function e(){u(this,e),this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}));Object.defineProperties(o_.prototype,{cacheAsBitmapResolution:{get:function(){return this._cacheAsBitmapResolution},set:function(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get:function(){return this._cacheAsBitmapMultisample},set:function(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(e){var t;this._cacheAsBitmap!==e&&(this._cacheAsBitmap=e,e?(this._cacheData||(this._cacheData=new v_),(t=this._cacheData).originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((t=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea))}}}),o_.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))},o_.prototype._initCachedDisplayObject=function(e){var t,n,r;if(null===(t=this._cacheData)||void 0===t||!t.sprite){var i=this.alpha;this.alpha=1,e.batch.flush();var o=this.getLocalBounds(null,!0).clone();if(null!==(n=this.filters)&&void 0!==n&&n.length){var a=this.filters[0].padding;o.pad(a)}o.ceil(Zp.RESOLUTION);var s=e.renderTexture.current,l=e.renderTexture.sourceFrame.clone(),u=e.renderTexture.destinationFrame.clone(),c=e.projection.transform,h=Ty.create({width:o.width,height:o.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:null!==(r=this.cacheAsBitmapMultisample)&&void 0!==r?r:e.multisample}),d="cacheAsBitmap_".concat(Tm());this._cacheData.textureCacheId=d,ig.addToCache(h.baseTexture,d),wy.addToCache(h,d);var f=this.transform.localTransform.copyTo(p_).invert().translate(-o.x,-o.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:h,clear:!0,transform:f,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=c,e.renderTexture.bind(s,l,u),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;var p=new f_(h);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-o.x/o.width,p.anchor.y=-o.y/o.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=p.containsPoint.bind(p)}},o_.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))},o_.prototype._initCachedDisplayObjectCanvas=function(e){var t;if(null===(t=this._cacheData)||void 0===t||!t.sprite){var n=this.getLocalBounds(null,!0),r=this.alpha;this.alpha=1;var i=e.canvasContext.activeContext,o=e._projTransform;n.ceil(Zp.RESOLUTION);var a=Ty.create({width:n.width,height:n.height}),s="cacheAsBitmap_".concat(Tm());this._cacheData.textureCacheId=s,ig.addToCache(a.baseTexture,s),wy.addToCache(a,s);var l=p_;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:a,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=o,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;var u=new f_(a);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-n.x/n.width,u.anchor.y=-n.y/n.height,u.alpha=r,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)}},o_.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},o_.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},o_.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ig.removeFromCache(this._cacheData.textureCacheId),wy.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},o_.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)},o_.prototype.name=null,c_.prototype.getChildByName=function(e,t){for(var n=0,r=this.children.length;n<r;n++)if(this.children[n].name===e)return this.children[n];if(t)for(var i=0,o=this.children.length;i<o;i++){var a=this.children[i];if(a.getChildByName){var s=a.getChildByName(e,!0);if(s)return s}}return null},o_.prototype.getGlobalPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bg,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,e,t):(e.x=this.position.x,e.y=this.position.y),e};var m_=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return u(this,n),(e=t.call(this,Bb,"varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n",{uAlpha:1})).alpha=r,e}return f(n,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),n}(cy),g_={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},y_=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n");var b_=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:cy.defaultResolution,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5;u(this,n);var l=function(e,t){var n,r=Math.ceil(e/2),i="\n    attribute vec2 aVertexPosition;\n\n    uniform mat3 projectionMatrix;\n\n    uniform float strength;\n\n    varying vec2 vBlurTexCoords[%size%];\n\n    uniform vec4 inputSize;\n    uniform vec4 outputFrame;\n\n    vec4 filterVertexPosition( void )\n    {\n        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n    }\n\n    vec2 filterTextureCoord( void )\n    {\n        return aVertexPosition * (outputFrame.zw * inputSize.zw);\n    }\n\n    void main(void)\n    {\n        gl_Position = filterVertexPosition();\n\n        vec2 textureCoord = filterTextureCoord();\n        %blur%\n    }",o="";n=t?"vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<e;a++){var s=n.replace("%index%",a.toString());o+=s=s.replace("%sampleIndex%","".concat(a-(r-1),".0")),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(s,e),c=function(e){for(var t,n=g_[e],r=n.length,i=y_,o="",a=0;a<e;a++){var s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",a.toString());t=a,a>=r&&(t=e-a-1),o+=s=s.replace("%value%",n[t].toString()),o+="\n"}return(i=i.replace("%blur%",o)).replace("%size%",e.toString())}(s);return(r=t.call(this,l,c)).horizontal=e,r.resolution=a,r._quality=0,r.quality=o,r.blur=i,r}return f(n,[{key:"apply",value:function(e,t,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/t.width):this.uniforms.strength=1/n.height*(n.height/t.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/t.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/t.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)e.applyFilter(this,t,n,r);else{var i=e.getFilterTexture(),o=e.renderer,a=t,s=i;this.state.blend=!1,e.applyFilter(this,a,s,zp.CLEAR);for(var l=1;l<this.passes-1;l++){e.bindAndClear(a,zp.BLIT),this.uniforms.uSampler=s;var u=s;s=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,s,n,r),e.returnFilterTexture(i)}}},{key:"blur",get:function(){return this.strength},set:function(e){this.padding=1+2*Math.abs(e),this.strength=e}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=e,this.passes=e}}]),n}(cy),__=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cy.defaultResolution,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;return u(this,n),(e=t.call(this))._repeatEdgePixels=!1,e.blurXFilter=new b_(!0,r,i,o,a),e.blurYFilter=new b_(!1,r,i,o,a),e.resolution=o,e.quality=i,e.blur=r,e.repeatEdgePixels=!1,e}return f(n,[{key:"apply",value:function(e,t,n,r){var i=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(i&&o){var a=e.getFilterTexture();this.blurXFilter.apply(e,t,a,zp.CLEAR),this.blurYFilter.apply(e,a,n,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,t,n,r):this.blurXFilter.apply(e,t,n,r)}},{key:"updatePadding",value:function(){this._repeatEdgePixels?this.padding=0:this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blur",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(e){this.blurXFilter.quality=this.blurYFilter.quality=e}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(e){this.blurXFilter.blur=e,this.updatePadding()}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(e){this.blurYFilter.blur=e,this.updatePadding()}},{key:"blendMode",get:function(){return this.blurYFilter.blendMode},set:function(e){this.blurYFilter.blendMode=e}},{key:"repeatEdgePixels",get:function(){return this._repeatEdgePixels},set:function(e){this._repeatEdgePixels=e,this.updatePadding()}}]),n}(cy),x_=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);var r={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};return(e=t.call(this,Ub,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n",r)).alpha=1,e}return f(n,[{key:"_loadMatrix",value:function(e){var t=e;arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(t,this.uniforms.m,e),t=this._colorMatrix(t)),this.uniforms.m=t}},{key:"_multiply",value:function(e,t,n){return e[0]=t[0]*n[0]+t[1]*n[5]+t[2]*n[10]+t[3]*n[15],e[1]=t[0]*n[1]+t[1]*n[6]+t[2]*n[11]+t[3]*n[16],e[2]=t[0]*n[2]+t[1]*n[7]+t[2]*n[12]+t[3]*n[17],e[3]=t[0]*n[3]+t[1]*n[8]+t[2]*n[13]+t[3]*n[18],e[4]=t[0]*n[4]+t[1]*n[9]+t[2]*n[14]+t[3]*n[19]+t[4],e[5]=t[5]*n[0]+t[6]*n[5]+t[7]*n[10]+t[8]*n[15],e[6]=t[5]*n[1]+t[6]*n[6]+t[7]*n[11]+t[8]*n[16],e[7]=t[5]*n[2]+t[6]*n[7]+t[7]*n[12]+t[8]*n[17],e[8]=t[5]*n[3]+t[6]*n[8]+t[7]*n[13]+t[8]*n[18],e[9]=t[5]*n[4]+t[6]*n[9]+t[7]*n[14]+t[8]*n[19]+t[9],e[10]=t[10]*n[0]+t[11]*n[5]+t[12]*n[10]+t[13]*n[15],e[11]=t[10]*n[1]+t[11]*n[6]+t[12]*n[11]+t[13]*n[16],e[12]=t[10]*n[2]+t[11]*n[7]+t[12]*n[12]+t[13]*n[17],e[13]=t[10]*n[3]+t[11]*n[8]+t[12]*n[13]+t[13]*n[18],e[14]=t[10]*n[4]+t[11]*n[9]+t[12]*n[14]+t[13]*n[19]+t[14],e[15]=t[15]*n[0]+t[16]*n[5]+t[17]*n[10]+t[18]*n[15],e[16]=t[15]*n[1]+t[16]*n[6]+t[17]*n[11]+t[18]*n[16],e[17]=t[15]*n[2]+t[16]*n[7]+t[17]*n[12]+t[18]*n[17],e[18]=t[15]*n[3]+t[16]*n[8]+t[17]*n[13]+t[18]*n[18],e[19]=t[15]*n[4]+t[16]*n[9]+t[17]*n[14]+t[18]*n[19]+t[19],e}},{key:"_colorMatrix",value:function(e){var t=new Float32Array(e);return t[4]/=255,t[9]/=255,t[14]/=255,t[19]/=255,t}},{key:"brightness",value:function(e,t){var n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"tint",value:function(e,t){var n=Pt(rm.shared.setValue(e).toArray(),3),r=[n[0],0,0,0,0,0,n[1],0,0,0,0,0,n[2],0,0,0,0,0,1,0];this._loadMatrix(r,t)}},{key:"greyscale",value:function(e,t){var n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"blackAndWhite",value:function(e){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],e)}},{key:"hue",value:function(e,t){e=(e||0)/180*Math.PI;var n=Math.cos(e),r=Math.sin(e),i=1/3,o=(0,Math.sqrt)(i),a=[n+(1-n)*i,i*(1-n)-o*r,i*(1-n)+o*r,0,0,i*(1-n)+o*r,n+i*(1-n),i*(1-n)-o*r,0,0,i*(1-n)-o*r,i*(1-n)+o*r,n+i*(1-n),0,0,0,0,0,1,0];this._loadMatrix(a,t)}},{key:"contrast",value:function(e,t){var n=(e||0)+1,r=-.5*(n-1),i=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(i,t)}},{key:"saturate",value:function(){var e=arguments.length>1?arguments[1]:void 0,t=2*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/3+1,n=-.5*(t-1),r=[t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)}},{key:"desaturate",value:function(){this.saturate(-1)}},{key:"negative",value:function(e){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],e)}},{key:"sepia",value:function(e){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],e)}},{key:"technicolor",value:function(e){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],e)}},{key:"polaroid",value:function(e){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],e)}},{key:"toBGR",value:function(e){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],e)}},{key:"kodachrome",value:function(e){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],e)}},{key:"browni",value:function(e){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],e)}},{key:"vintage",value:function(e){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],e)}},{key:"colorTone",value:function(e,t,n,r,i){e=e||.2,t=t||.15,n=n||16770432,r=r||3375104;var o=rm.shared,a=Pt(o.setValue(n).toArray(),3),s=a[0],l=a[1],u=a[2],c=Pt(o.setValue(r).toArray(),3),h=c[0],d=c[1],f=c[2],p=[.3,.59,.11,0,0,s,l,u,e,0,h,d,f,t,0,s-h,l-d,u-f,0,0];this._loadMatrix(p,i)}},{key:"night",value:function(e,t){var n=[-2*(e=e||.1),-e,0,0,0,-e,0,e,0,0,0,e,2*e,0,0,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"predator",value:function(e,t){var n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,t)}},{key:"lsd",value:function(e){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],e)}},{key:"reset",value:function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)}},{key:"matrix",get:function(){return this.uniforms.m},set:function(e){this.uniforms.m=e}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}}]),n}(cy);x_.prototype.grayscale=x_.prototype.greyscale;var E_=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o=new kg;return e.renderable=!1,(i=t.call(this,"attribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord( void )\n{\n    return aVertexPosition * (outputFrame.zw * inputSize.zw);\n}\n\nvoid main(void)\n{\n\tgl_Position = filterVertexPosition();\n\tvTextureCoord = filterTextureCoord();\n\tvFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\nuniform mat2 rotation;\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform highp vec4 inputSize;\nuniform vec4 inputClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy = scale * inputSize.zw * (rotation * map.xy);\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));\n}\n",{mapSampler:e._texture,filterMatrix:o,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])})).maskSprite=e,i.maskMatrix=o,null!==r&&void 0!==r||(r=20),i.scale=new bg(r,r),i}return f(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;var i=this.maskSprite.worldTransform,o=Math.sqrt(i.a*i.a+i.b*i.b),a=Math.sqrt(i.c*i.c+i.d*i.d);0!==o&&0!==a&&(this.uniforms.rotation[0]=i.a/o,this.uniforms.rotation[1]=i.b/o,this.uniforms.rotation[2]=i.c/a,this.uniforms.rotation[3]=i.d/a),e.applyFilter(this,t,n,r)}},{key:"map",get:function(){return this.uniforms.mapSampler},set:function(e){this.uniforms.mapSampler=e}}]),n}(cy),w_=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,"\nattribute vec2 aVertexPosition;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\n\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvec4 filterVertexPosition( void )\n{\n    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;\n\n    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n}\n\nvoid texcoords(vec2 fragCoord, vec2 inverseVP,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = filterVertexPosition();\n\n   vFragCoord = aVertexPosition * outputFrame.zw;\n\n   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}\n",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vFragCoord;\nuniform sampler2D uSampler;\nuniform highp vec4 inputSize;\n\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n\n --\n\n From:\n https://github.com/mitsuhiko/webgl-meincraft\n\n Copyright (c) 2011 by Armin Ronacher.\n\n Some rights reserved.\n\n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n\n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n\n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n\n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n\n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec4 color;\n\n      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n')}return f(n)}(cy),T_=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();return u(this,n),(e=t.call(this,Ub,"precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n",{uNoise:0,uSeed:0})).noise=r,e.seed=i,e}return f(n,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(e){this.uniforms.uNoise=e}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(e){this.uniforms.uSeed=e}}]),n}(cy),S_={AlphaFilter:m_,BlurFilter:__,BlurFilterPass:b_,ColorMatrixFilter:x_,DisplacementFilter:E_,FXAAFilter:w_,NoiseFilter:T_};Object.entries(S_).forEach((function(e){var t=Pt(e,2),n=t[0],r=t[1];Object.defineProperty(S_,n,{get:function(){return Tv("7.1.0","filters.".concat(n," has moved to ").concat(n)),r}})}));var k_=function(){function e(){u(this,e),this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}return f(e,[{key:"init",value:function(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}},{key:"pauseUpdate",get:function(){return this._pauseUpdate},set:function(e){this._pauseUpdate=e}},{key:"addTickerListener",value:function(){!this.tickerAdded&&this.domElement&&(Nb.system.add(this.tickerUpdate,this,Pb.INTERACTION),this.tickerAdded=!0)}},{key:"removeTickerListener",value:function(){this.tickerAdded&&(Nb.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}},{key:"pointerMoved",value:function(){this._didMove=!0}},{key:"update",value:function(){if(this.domElement&&!this._pauseUpdate)if(this._didMove)this._didMove=!1;else{var e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&"touch"===e.pointerType||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}}},{key:"tickerUpdate",value:function(e){this._deltaTime+=e,this._deltaTime<this.interactionFrequency||(this._deltaTime=0,this.update())}}]),e}(),C_=new k_,A_=function(){function e(t){u(this,e),this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=e.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new bg,this.page=new bg,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}return f(e,[{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"data",get:function(){return this}},{key:"composedPath",value:function(){return!this.manager||this.path&&this.path[this.path.length-1]===this.target||(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"initEvent",value:function(e,t,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"initUIEvent",value:function(e,t,n,r,i){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}}]),e}(),I_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).client=new bg,e.movement=new bg,e.offset=new bg,e.global=new bg,e.screen=new bg,e}return f(n,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"x",get:function(){return this.clientX}},{key:"y",get:function(){return this.clientY}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getLocalPosition",value:function(e,t,n){return e.worldTransform.applyInverse(n||this.global,t)}},{key:"getModifierState",value:function(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}},{key:"initMouseEvent",value:function(e,t,n,r,i,o,a,s,l,u,c,h,d,f,p){throw new Error("Method not implemented.")}}]),n}(A_),O_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).width=0,e.height=0,e.isPrimary=!1,e}return f(n,[{key:"getCoalescedEvents",value:function(){return"pointermove"===this.type||"mousemove"===this.type||"touchmove"===this.type?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}}]),n}(I_),P_=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).DOM_DELTA_PIXEL=0,e.DOM_DELTA_LINE=1,e.DOM_DELTA_PAGE=2,e}return f(n)}(I_);P_.DOM_DELTA_PIXEL=0,P_.DOM_DELTA_LINE=1,P_.DOM_DELTA_PAGE=2;var M_=new bg,R_=new bg,N_=function(){function e(t){u(this,e),this.dispatch=new vv,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}return f(e,[{key:"addEventMapping",value:function(e,t){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:t,priority:0}),this.mappingTable[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"dispatchEvent",value:function(e,t){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,t),this.dispatch.emit(t||e.type,e)}},{key:"mapEvent",value:function(e){if(this.rootTarget){var t=this.mappingTable[e.type];if(t)for(var n=0,r=t.length;n<r;n++)t[n].fn(e)}}},{key:"hitTest",value:function(e,t){C_.pauseUpdate=!0;var n=this[this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive"](this.rootTarget,this.rootTarget.eventMode,M_.set(e,t),this.hitTestFn,this.hitPruneFn);return n&&n[0]}},{key:"propagate",value:function(e,t){if(e.target){var n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var r=0,i=n.length-1;r<i;r++)if(e.currentTarget=n[r],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,t),!e.propagationStopped&&!e.propagationImmediatelyStopped){e.eventPhase=e.BUBBLING_PHASE;for(var o=n.length-2;o>=0;o--)if(e.currentTarget=n[o],this.notifyTarget(e,t),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"all",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._allInteractiveElements;if(0!==r.length){e.eventPhase=e.BUBBLING_PHASE;for(var i=Array.isArray(t)?t:[t],o=function(t){i.forEach((function(i){e.currentTarget=r[t],n.notifyTarget(e,i)}))},a=r.length-1;a>=0;a--)o(a)}}},{key:"propagationPath",value:function(e){for(var t=[e],n=0;n<2048&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");t.push(e.parent),e=e.parent}return t.reverse(),t}},{key:"hitTestMoveRecursive",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=!1;if(this._interactivePrune(e))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(C_.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var s=e.children,l=s.length-1;l>=0;l--){var u=s[l],c=this.hitTestMoveRecursive(u,this._isInteractive(t)?t:u.eventMode,n,r,i,o||i(e,n));if(c){if(c.length>0&&!c[c.length-1].parent)continue;var h=e.isInteractive();(c.length>0||h)&&(h&&this._allInteractiveElements.push(e),c.push(e)),0===this._hitElements.length&&(this._hitElements=c),a=!0}}var d=this._isInteractive(t),f=e.isInteractive();return f&&f&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:d&&!i(e,n)&&r(e,n)?f?[e]:[]:null}},{key:"hitTestRecursive",value:function(e,t,n,r,i){if(this._interactivePrune(e)||i(e,n))return null;if("dynamic"!==e.eventMode&&"dynamic"!==t||(C_.pauseUpdate=!1),e.interactiveChildren&&e.children)for(var o=e.children,a=o.length-1;a>=0;a--){var s=o[a],l=this.hitTestRecursive(s,this._isInteractive(t)?t:s.eventMode,n,r,i);if(l){if(l.length>0&&!l[l.length-1].parent)continue;var u=e.isInteractive();return(l.length>0||u)&&l.push(e),l}}var c=this._isInteractive(t),h=e.isInteractive();return c&&r(e,n)?h?[e]:[]:null}},{key:"_isInteractive",value:function(e){return"static"===e||"dynamic"===e}},{key:"_interactivePrune",value:function(e){return!(e&&!e.isMask&&e.visible&&e.renderable)||("none"===e.eventMode||("passive"===e.eventMode&&!e.interactiveChildren||!!e.isMask))}},{key:"hitPruneFn",value:function(e,t){if(e.hitArea&&(e.worldTransform.applyInverse(t,R_),!e.hitArea.contains(R_.x,R_.y)))return!0;if(e._mask){var n,r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&(null===(n=r.containsPoint)||void 0===n||!n.call(r,t)))return!0}return!1}},{key:"hitTestFn",value:function(e,t){return"passive"!==e.eventMode&&(!!e.hitArea||!!e.containsPoint&&e.containsPoint(t))}},{key:"notifyTarget",value:function(e,t){var n,r,i;t=null!==(n=t)&&void 0!==n?n:e.type;var o="on".concat(t);null===(r=(i=e.currentTarget)[o])||void 0===r||r.call(i,e);var a=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(t,"capture"):t;this.notifyListeners(e,a),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,t)}},{key:"mapPointerDown",value:function(e){if(e instanceof O_){var t=this.createPointerEvent(e);if(this.dispatchEvent(t,"pointerdown"),"touch"===t.pointerType)this.dispatchEvent(t,"touchstart");else if("mouse"===t.pointerType||"pen"===t.pointerType){var n=2===t.button;this.dispatchEvent(t,n?"rightdown":"mousedown")}this.trackingData(e.pointerId).pressTargetsByButton[e.button]=t.composedPath(),this.freeEvent(t)}}},{key:"mapPointerMove",value:function(e){var t,n;if(e instanceof O_){this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;var r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;var i="mouse"===r.pointerType||"pen"===r.pointerType,o=this.trackingData(e.pointerId),a=this.findMountedTarget(o.overTargets);if((null===(t=o.overTargets)||void 0===t?void 0:t.length)>0&&a!==r.target){var s="mousemove"===e.type?"mouseout":"pointerout",l=this.createPointerEvent(e,s,a);if(this.dispatchEvent(l,"pointerout"),i&&this.dispatchEvent(l,"mouseout"),!r.composedPath().includes(a)){var u=this.createPointerEvent(e,"pointerleave",a);for(u.eventPhase=u.AT_TARGET;u.target&&!r.composedPath().includes(u.target);)u.currentTarget=u.target,this.notifyTarget(u),i&&this.notifyTarget(u,"mouseleave"),u.target=u.target.parent;this.freeEvent(u)}this.freeEvent(l)}if(a!==r.target){var c="mousemove"===e.type?"mouseover":"pointerover",h=this.clonePointerEvent(r,c);this.dispatchEvent(h,"pointerover"),i&&this.dispatchEvent(h,"mouseover");for(var d=null===a||void 0===a?void 0:a.parent;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){var f=this.clonePointerEvent(r,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==a&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(h)}var p,v=[],m=null===(n=this.enableGlobalMoveEvents)||void 0===n||n;if(this.moveOnAll?v.push("pointermove"):this.dispatchEvent(r,"pointermove"),m&&v.push("globalpointermove"),"touch"===r.pointerType&&(this.moveOnAll?v.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),m&&v.push("globaltouchmove")),i)this.moveOnAll?v.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),m&&v.push("globalmousemove"),this.cursor=null===(p=r.target)||void 0===p?void 0:p.cursor;v.length>0&&this.all(r,v),this._allInteractiveElements.length=0,this._hitElements.length=0,o.overTargets=r.composedPath(),this.freeEvent(r)}}},{key:"mapPointerOver",value:function(e){var t;if(e instanceof O_){var n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i="mouse"===r.pointerType||"pen"===r.pointerType;this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),"mouse"===r.pointerType&&(this.cursor=null===(t=r.target)||void 0===t?void 0:t.cursor);var o=this.clonePointerEvent(r,"pointerenter");for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseenter"),o.target=o.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(o)}}},{key:"mapPointerOut",value:function(e){if(e instanceof O_){var t=this.trackingData(e.pointerId);if(t.overTargets){var n="mouse"===e.pointerType||"pen"===e.pointerType,r=this.findMountedTarget(t.overTargets),i=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(i),n&&this.dispatchEvent(i,"mouseout");var o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;t.overTargets=null,this.freeEvent(i),this.freeEvent(o)}this.cursor=null}}},{key:"mapPointerUp",value:function(e){if(e instanceof O_){var t=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),"touch"===n.pointerType)this.dispatchEvent(n,"touchend");else if("mouse"===n.pointerType||"pen"===n.pointerType){var r=2===n.button;this.dispatchEvent(n,r?"rightup":"mouseup")}var i=this.trackingData(e.pointerId),o=this.findMountedTarget(i.pressTargetsByButton[e.button]),a=o;if(o&&!n.composedPath().includes(o)){for(var s=o;s&&!n.composedPath().includes(s);){if(n.currentTarget=s,this.notifyTarget(n,"pointerupoutside"),"touch"===n.pointerType)this.notifyTarget(n,"touchendoutside");else if("mouse"===n.pointerType||"pen"===n.pointerType){var l=2===n.button;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}s=s.parent}delete i.pressTargetsByButton[e.button],a=s}if(a){var u=this.clonePointerEvent(n,"click");u.target=a,u.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:u.target,timeStamp:t});var c=i.clicksByButton[e.button];if(c.target===u.target&&t-c.timeStamp<200?++c.clickCount:c.clickCount=1,c.target=u.target,c.timeStamp=t,u.detail=c.clickCount,"mouse"===u.pointerType){var h=2===u.button;this.dispatchEvent(u,h?"rightclick":"click")}else"touch"===u.pointerType&&this.dispatchEvent(u,"tap");this.dispatchEvent(u,"pointertap"),this.freeEvent(u)}this.freeEvent(n)}}},{key:"mapPointerUpOutside",value:function(e){if(e instanceof O_){var t=this.trackingData(e.pointerId),n=this.findMountedTarget(t.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(n){for(var i=n;i;)r.currentTarget=i,this.notifyTarget(r,"pointerupoutside"),"touch"===r.pointerType?this.notifyTarget(r,"touchendoutside"):"mouse"!==r.pointerType&&"pen"!==r.pointerType||this.notifyTarget(r,2===r.button?"rightupoutside":"mouseupoutside"),i=i.parent;delete t.pressTargetsByButton[e.button]}this.freeEvent(r)}}},{key:"mapWheel",value:function(e){if(e instanceof P_){var t=this.createWheelEvent(e);this.dispatchEvent(t),this.freeEvent(t)}}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var t=e[0],n=1;n<e.length&&e[n].parent===t;n++)t=e[n];return t}},{key:"createPointerEvent",value:function(e,t,n){var r,i=this.allocateEvent(O_);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=null!==(r=null!==n&&void 0!==n?n:this.hitTest(i.global.x,i.global.y))&&void 0!==r?r:this._hitElements[0],"string"===typeof t&&(i.type=t),i}},{key:"createWheelEvent",value:function(e){var t=this.allocateEvent(P_);return this.copyWheelData(e,t),this.copyMouseData(e,t),this.copyData(e,t),t.nativeEvent=e.nativeEvent,t.originalEvent=e,t.target=this.hitTest(t.global.x,t.global.y),t}},{key:"clonePointerEvent",value:function(e,t){var n=this.allocateEvent(O_);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=null!==t&&void 0!==t?t:n.type,n}},{key:"copyWheelData",value:function(e,t){t.deltaMode=e.deltaMode,t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ}},{key:"copyPointerData",value:function(e,t){e instanceof O_&&t instanceof O_&&(t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist)}},{key:"copyMouseData",value:function(e,t){e instanceof I_&&t instanceof I_&&(t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.copyFrom(e.client),t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.copyFrom(e.movement),t.screen.copyFrom(e.screen),t.shiftKey=e.shiftKey,t.global.copyFrom(e.global))}},{key:"copyData",value:function(e,t){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.detail=e.detail,t.view=e.view,t.which=e.which,t.layer.copyFrom(e.layer),t.page.copyFrom(e.page)}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var t=this.eventPool.get(e).pop()||new e(this);return t.eventPhase=t.NONE,t.currentTarget=null,t.path=null,t.target=null,t}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var t=e.constructor;this.eventPool.has(t)||this.eventPool.set(t,[]),this.eventPool.get(t).push(e)}},{key:"notifyListeners",value:function(e,t){var n=e.currentTarget._events[t];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(t,n.fn,void 0,!0),n.fn.call(n.context,e);else for(var r=0,i=n.length;r<i&&!e.propagationImmediatelyStopped;r++)n[r].once&&e.currentTarget.removeListener(t,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,e)}}]),e}(),D_={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},L_=function(){function e(t){var n=this;u(this,e),this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new N_(null),C_.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new O_(null),this.rootWheelEvent=new P_(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy(Re({},e.defaultEventFeatures),{set:function(e,t,r){return"globalMove"===t&&(n.rootBoundary.enableGlobalMoveEvents=r),e[t]=r,!0}}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}return f(e,[{key:"init",value:function(t){var n,r,i=this.renderer,o=i.view,a=i.resolution;this.setTargetElement(o),this.resolution=a,e._defaultEventMode=null!==(n=t.eventMode)&&void 0!==n?n:"auto",Object.assign(this.features,null!==(r=t.eventFeatures)&&void 0!==r?r:{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}},{key:"resolutionChange",value:function(e){this.resolution=e}},{key:"destroy",value:function(){this.setTargetElement(null),this.renderer=null}},{key:"setCursor",value:function(e){e=e||"default";var t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor!==e){this.currentCursor=e;var n=this.cursorStyles[e];if(n)switch(typeof n){case"string":t&&(this.domElement.style.cursor=n);break;case"function":n(e);break;case"object":t&&Object.assign(this.domElement.style,n)}else t&&"string"===typeof e&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}}},{key:"pointer",get:function(){return this.rootPointerEvent}},{key:"onPointerDown",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){var t=this.normalizeToPointerData(e);if(this.autoPreventDefault&&t[0].isNormalized)(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(var n=0,r=t.length;n<r;n++){var i=t[n],o=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerMove",value:function(e){if(this.features.move&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){C_.pointerMoved();for(var t=this.normalizeToPointerData(e),n=0,r=t.length;n<r;n++){var i=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerUp",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){var t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);for(var n=t!==this.domElement?"outside":"",r=this.normalizeToPointerData(e),i=0,o=r.length;i<o;i++){var a=this.bootstrapEvent(this.rootPointerEvent,r[i]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onPointerOverOut",value:function(e){if(this.features.click&&(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,!this.supportsTouchEvents||"touch"!==e.pointerType)){for(var t=this.normalizeToPointerData(e),n=0,r=t.length;n<r;n++){var i=this.bootstrapEvent(this.rootPointerEvent,t[n]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}}},{key:"onWheel",value:function(e){if(this.features.wheel){var t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}}},{key:"setTargetElement",value:function(e){this.removeEvents(),this.domElement=e,C_.domElement=e,this.addEvents()}},{key:"addEvents",value:function(){if(!this.eventsAdded&&this.domElement){C_.addTickerListener();var e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}}},{key:"removeEvents",value:function(){if(this.eventsAdded&&this.domElement){C_.removeTickerListener();var e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}}},{key:"mapPositionToPoint",value:function(e,t,n){var r;r=this.domElement.parentElement?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};var i=1/this.resolution;e.x=(t-r.left)*(this.domElement.width/r.width)*i,e.y=(n-r.top)*(this.domElement.height/r.height)*i}},{key:"normalizeToPointerData",value:function(e){var t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(var n=0,r=e.changedTouches.length;n<r;n++){var i=e.changedTouches[n];"undefined"===typeof i.button&&(i.button=0),"undefined"===typeof i.buttons&&(i.buttons=1),"undefined"===typeof i.isPrimary&&(i.isPrimary=1===e.touches.length&&"touchstart"===e.type),"undefined"===typeof i.width&&(i.width=i.radiusX||1),"undefined"===typeof i.height&&(i.height=i.radiusY||1),"undefined"===typeof i.tiltX&&(i.tiltX=0),"undefined"===typeof i.tiltY&&(i.tiltY=0),"undefined"===typeof i.pointerType&&(i.pointerType="touch"),"undefined"===typeof i.pointerId&&(i.pointerId=i.identifier||0),"undefined"===typeof i.pressure&&(i.pressure=i.force||.5),"undefined"===typeof i.twist&&(i.twist=0),"undefined"===typeof i.tangentialPressure&&(i.tangentialPressure=0),"undefined"===typeof i.layerX&&(i.layerX=i.offsetX=i.clientX),"undefined"===typeof i.layerY&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=e.type,t.push(i)}else if(globalThis.MouseEvent&&(!(e instanceof MouseEvent)||this.supportsPointerEvents&&e instanceof globalThis.PointerEvent))t.push(e);else{var o=e;"undefined"===typeof o.isPrimary&&(o.isPrimary=!0),"undefined"===typeof o.width&&(o.width=1),"undefined"===typeof o.height&&(o.height=1),"undefined"===typeof o.tiltX&&(o.tiltX=0),"undefined"===typeof o.tiltY&&(o.tiltY=0),"undefined"===typeof o.pointerType&&(o.pointerType="mouse"),"undefined"===typeof o.pointerId&&(o.pointerId=1),"undefined"===typeof o.pressure&&(o.pressure=.5),"undefined"===typeof o.twist&&(o.twist=0),"undefined"===typeof o.tangentialPressure&&(o.tangentialPressure=0),o.isNormalized=!0,t.push(o)}return t}},{key:"normalizeWheelEvent",value:function(e){var t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}},{key:"bootstrapEvent",value:function(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,"pointerleave"===e.type&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=D_[e.type]||e.type),e}},{key:"transferMouseData",value:function(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}}],[{key:"defaultEventMode",get:function(){return this._defaultEventMode}}]),e}(),F_=L_;function B_(e){return"dynamic"===e||"static"===e}F_.extension={name:"events",type:[zm.RendererSystem,zm.CanvasRendererSystem]},F_.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},Wm.add(F_);var U_={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){var e;return null!==(e=this._internalInteractive)&&void 0!==e?e:B_(F_.defaultEventMode)},set interactive(e){Tv("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){var e;return null!==(e=this._internalEventMode)&&void 0!==e?e:F_.defaultEventMode},set eventMode(e){this._internalInteractive=B_(e),this._internalEventMode=e},isInteractive:function(){return"static"===this.eventMode||"dynamic"===this.eventMode},interactiveChildren:!0,hitArea:null,addEventListener:function(e,t,n){var r="function"===typeof t?void 0:t;e="boolean"===typeof n&&n||"object"===typeof n&&n.capture?"".concat(e,"capture"):e,t="function"===typeof t?t:t.handleEvent,this.on(e,t,r)},removeEventListener:function(e,t,n){var r="function"===typeof t?void 0:t;e="boolean"===typeof n&&n||"object"===typeof n&&n.capture?"".concat(e,"capture"):e,t="function"===typeof t?t:t.handleEvent,this.off(e,t,r)},dispatchEvent:function(e){if(!(e instanceof A_))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};o_.mixin(U_);var H_={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};o_.mixin(H_);var j_=100,z_=function(){function e(t){u(this,e),this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(pv.tablet||pv.phone)&&this.createTouchHook();var n=document.createElement("div");n.style.width="".concat(j_,"px"),n.style.height="".concat(j_,"px"),n.style.position="absolute",n.style.top="".concat(0,"px"),n.style.left="".concat(0,"px"),n.style.zIndex=2..toString(),this.div=n,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}return f(e,[{key:"isActive",get:function(){return this._isActive}},{key:"isMobileAccessibility",get:function(){return this._isMobileAccessibility}},{key:"createTouchHook",value:function(){var e=this,t=document.createElement("button");t.style.width="".concat(1,"px"),t.style.height="".concat(1,"px"),t.style.position="absolute",t.style.top="".concat(-1e3,"px"),t.style.left="".concat(-1e3,"px"),t.style.zIndex=2..toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",(function(){e._isMobileAccessibility=!0,e.activate(),e.destroyTouchHook()})),document.body.appendChild(t),this._hookDiv=t}},{key:"destroyTouchHook",value:function(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}},{key:"activate",value:function(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),null===(e=this.renderer.view.parentNode)||void 0===e||e.appendChild(this.div))}},{key:"deactivate",value:function(){var e;this._isActive&&!this._isMobileAccessibility&&(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),null===(e=this.div.parentNode)||void 0===e||e.removeChild(this.div))}},{key:"updateAccessibleObjects",value:function(e){if(e.visible&&e.accessibleChildren){e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);var t=e.children;if(t)for(var n=0;n<t.length;n++)this.updateAccessibleObjects(t[n])}}},{key:"update",value:function(){var e=performance.now();if(!(pv.android.device&&e<this.androidUpdateCount)&&(this.androidUpdateCount=e+this.androidUpdateFrequency,this.renderer.renderingToScreen)){this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),n=t.x,r=t.y,i=t.width,o=t.height,a=this.renderer,s=a.width,l=a.height,u=a.resolution,c=i/s*u,h=o/l*u,d=this.div;d.style.left="".concat(n,"px"),d.style.top="".concat(r,"px"),d.style.width="".concat(s,"px"),d.style.height="".concat(l,"px");for(var f=0;f<this.children.length;f++){var p=this.children[f];if(p.renderId!==this.renderId)p._accessibleActive=!1,xm(this.children,f,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,f--;else{d=p._accessibleDiv;var v=p.hitArea,m=p.worldTransform;p.hitArea?(d.style.left="".concat((m.tx+v.x*m.a)*c,"px"),d.style.top="".concat((m.ty+v.y*m.d)*h,"px"),d.style.width="".concat(v.width*m.a*c,"px"),d.style.height="".concat(v.height*m.d*h,"px")):(v=p.getBounds(),this.capHitArea(v),d.style.left="".concat(v.x*c,"px"),d.style.top="".concat(v.y*h,"px"),d.style.width="".concat(v.width*c,"px"),d.style.height="".concat(v.height*h,"px"),d.title!==p.accessibleTitle&&null!==p.accessibleTitle&&(d.title=p.accessibleTitle),d.getAttribute("aria-label")!==p.accessibleHint&&null!==p.accessibleHint&&d.setAttribute("aria-label",p.accessibleHint)),p.accessibleTitle===d.title&&p.tabIndex===d.tabIndex||(d.title=p.accessibleTitle,d.tabIndex=p.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}}},{key:"updateDebugHTML",value:function(e){e.innerHTML="type: ".concat(e.type,"</br> title : ").concat(e.title,"</br> tabIndex: ").concat(e.tabIndex)}},{key:"capHitArea",value:function(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);var t=this.renderer,n=t.width,r=t.height;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}},{key:"addChild",value:function(e){var t=this.pool.pop();t||((t=document.createElement("button")).style.width="".concat(j_,"px"),t.style.height="".concat(j_,"px"),t.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",t.style.position="absolute",t.style.zIndex=2..toString(),t.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?t.setAttribute("aria-live","off"):t.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?t.setAttribute("aria-relevant","additions"):t.setAttribute("aria-relevant","text"),t.addEventListener("click",this._onClick.bind(this)),t.addEventListener("focus",this._onFocus.bind(this)),t.addEventListener("focusout",this._onFocusOut.bind(this))),t.style.pointerEvents=e.accessiblePointerEvents,t.type=e.accessibleType,e.accessibleTitle&&null!==e.accessibleTitle?t.title=e.accessibleTitle:e.accessibleHint&&null!==e.accessibleHint||(t.title="displayObject ".concat(e.tabIndex)),e.accessibleHint&&null!==e.accessibleHint&&t.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(t),e._accessibleActive=!0,e._accessibleDiv=t,t.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}},{key:"_dispatchEvent",value:function(e,t){var n=e.target.displayObject,r=this.renderer.events.rootBoundary,i=Object.assign(new A_(r),{target:n});r.rootTarget=this.renderer.lastObjectRendered,t.forEach((function(e){return r.dispatchEvent(i,e)}))}},{key:"_onClick",value:function(e){this._dispatchEvent(e,["click","pointertap","tap"])}},{key:"_onFocus",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}},{key:"_onFocusOut",value:function(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}},{key:"_onKeyDown",value:function(e){9===e.keyCode&&this.activate()}},{key:"_onMouseMove",value:function(e){0===e.movementX&&0===e.movementY||this.deactivate()}},{key:"destroy",value:function(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}]),e}();z_.extension={name:"accessibility",type:[zm.RendererPlugin,zm.CanvasRendererPlugin]},Wm.add(z_);var V_=function(){function e(t){var n=this;u(this,e),this.stage=new c_,t=Object.assign({forceCanvas:!1},t),this.renderer=Fb(t),e._plugins.forEach((function(e){e.init.call(n,t)}))}return f(e,[{key:"render",value:function(){this.renderer.render(this.stage)}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}},{key:"destroy",value:function(t,n){var r=this,i=e._plugins.slice(0);i.reverse(),i.forEach((function(e){e.destroy.call(r)})),this.stage.destroy(n),this.stage=null,this.renderer.destroy(t),this.renderer=null}}]),e}(),G_=V_;G_._plugins=[],Wm.handleByList(zm.Application,G_._plugins);var W_=function(){function e(){u(this,e)}return f(e,null,[{key:"init",value:function(e){var t=this;Object.defineProperty(this,"resizeTo",{set:function(e){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=e,e&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get:function(){return this._resizeTo}}),this.queueResize=function(){t._resizeTo&&(t.cancelResize(),t._resizeId=requestAnimationFrame((function(){return t.resize()})))},this.cancelResize=function(){t._resizeId&&(cancelAnimationFrame(t._resizeId),t._resizeId=null)},this.resize=function(){if(t._resizeTo){var e,n;if(t.cancelResize(),t._resizeTo===globalThis.window)e=globalThis.innerWidth,n=globalThis.innerHeight;else{var r=t._resizeTo;e=r.clientWidth,n=r.clientHeight}t.renderer.resize(e,n),t.render()}},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}},{key:"destroy",value:function(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}]),e}();W_.extension=zm.Application,Wm.add(W_);var X_={loader:zm.LoadParser,resolver:zm.ResolveParser,cache:zm.CacheParser,detection:zm.DetectionParser};Wm.handle(zm.Asset,(function(e){var t=e.ref;Object.entries(X_).filter((function(e){var n=Pt(e,1)[0];return!!t[n]})).forEach((function(e){var n,r=Pt(e,2),i=r[0],o=r[1];return Wm.add(Object.assign(t[i],{extension:null!==(n=t[i].extension)&&void 0!==n?n:o}))}))}),(function(e){var t=e.ref;Object.keys(X_).filter((function(e){return!!t[e]})).forEach((function(e){return Wm.remove(t[e])}))}));var Y_=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];u(this,e),this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}return f(e,[{key:"add",value:function(e){var t=this;e.forEach((function(e){t._assetList.push(e)})),this.verbose,this._isActive&&!this._isLoading&&this._next()}},{key:"_next",value:function(){var e=Ee(_e().mark((function e(){var t,n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._assetList.length||!this._isActive){e.next=9;break}for(this._isLoading=!0,t=[],n=Math.min(this._assetList.length,this._maxConcurrent),r=0;r<n;r++)t.push(this._assetList.pop());return e.next=7,this._loader.load(t);case 7:this._isLoading=!1,this._next();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"active",get:function(){return this._isActive},set:function(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}]),e}();function K_(e,t){var n=e.split("?")[0],r=Ev.extname(n).toLowerCase();return Array.isArray(t)?t.includes(r):r===t}var q_=function(e,t){return Array.isArray(e)||(e=[e]),t?e.map((function(e){return"string"===typeof e?t(e):e})):e},Z_=function(){function e(){u(this,e),this._parsers=[],this._cache=new Map,this._cacheMap=new Map}return f(e,[{key:"reset",value:function(){this._cacheMap.clear(),this._cache.clear()}},{key:"has",value:function(e){return this._cache.has(e)}},{key:"get",value:function(e){var t=this._cache.get(e);return t}},{key:"set",value:function(e,t){for(var n,r=this,i=q_(e),o=0;o<this.parsers.length;o++){var a=this.parsers[o];if(a.test(t)){n=a.getCacheableAssets(i,t);break}}n||(n={},i.forEach((function(e){n[e]=t})));var s=Object.keys(n),l={cacheKeys:s,keys:i};if(i.forEach((function(e){r._cacheMap.set(e,l)})),s.forEach((function(e){r._cache.has(e)&&r._cache.get(e),r._cache.set(e,n[e])})),t instanceof wy){var u=t;i.forEach((function(e){u.baseTexture!==wy.EMPTY.baseTexture&&ig.addToCache(u.baseTexture,e),wy.addToCache(u,e)}))}}},{key:"remove",value:function(e){var t=this;if(this._cacheMap.get(e),this._cacheMap.has(e)){var n=this._cacheMap.get(e);n.cacheKeys.forEach((function(e){t._cache.delete(e)})),n.keys.forEach((function(e){t._cacheMap.delete(e)}))}}},{key:"parsers",get:function(){return this._parsers}}]),e}(),$_=new Z_,Q_=function(e){return!Array.isArray(e)},J_=function(){function e(){var t=this;u(this,e),this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:function(e,n,r){return t._parsersValidated=!1,e[n]=r,!0}}),this.promiseCache={}}return f(e,[{key:"reset",value:function(){this._parsersValidated=!1,this.promiseCache={}}},{key:"_getLoadPromiseAndParser",value:function(e,t){var n=this,r={promise:null,parser:null};return r.promise=Ee(_e().mark((function i(){var o,a,s,l,u,c,h,d;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=null,a=null,t.loadParser&&(a=n._parserHash[t.loadParser]),a){i.next=16;break}s=0;case 5:if(!(s<n.parsers.length)){i.next=13;break}if(!(u=n.parsers[s]).load||null===(l=u.test)||void 0===l||!l.call(u,e,t,n)){i.next=10;break}return a=u,i.abrupt("break",13);case 10:s++,i.next=5;break;case 13:if(a){i.next=16;break}return i.abrupt("return",null);case 16:return i.next=18,a.load(e,t,n);case 18:o=i.sent,r.parser=a,c=0;case 21:if(!(c<n.parsers.length)){i.next=40;break}if(!(h=n.parsers[c]).parse){i.next=37;break}if(i.t0=h.parse,!i.t0){i.next=29;break}return i.next=28,null===(d=h.testParse)||void 0===d?void 0:d.call(h,o,t,n);case 28:i.t0=i.sent;case 29:if(!i.t0){i.next=37;break}return i.next=32,h.parse(o,t,n);case 32:if(i.t1=i.sent,i.t1){i.next=35;break}i.t1=o;case 35:o=i.t1,r.parser=h;case 37:c++,i.next=21;break;case 40:return i.abrupt("return",o);case 41:case"end":return i.stop()}}),i)})))(),r}},{key:"load",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._parsersValidated||this._validateParsers(),r=0,i={},o=Q_(t),a=q_(t,(function(e){return{src:e}})),s=a.length,l=a.map(function(){var e=Ee(_e().mark((function e(t){var o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=Ev.toAbsolute(t.src),i[t.src]){e.next=15;break}return e.prev=2,u.promiseCache[o]||(u.promiseCache[o]=u._getLoadPromiseAndParser(o,t)),e.next=6,u.promiseCache[o].promise;case 6:i[t.src]=e.sent,n&&n(++r/s),e.next=15;break;case 10:throw e.prev=10,e.t0=e.catch(2),delete u.promiseCache[o],delete i[t.src],new Error("[Loader.load] Failed to load ".concat(o,".\n").concat(e.t0));case 15:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(l);case 9:return e.abrupt("return",o?i[a[0].src]:i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=Ee(_e().mark((function e(t){var n,r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=q_(t,(function(e){return{src:e}})),r=n.map(function(){var e=Ee(_e().mark((function e(t){var n,r,o,a,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Ev.toAbsolute(t.src),!(r=i.promiseCache[n])){e.next=8;break}return e.next=5,r.promise;case 5:s=e.sent,null===(o=r.parser)||void 0===o||null===(a=o.unload)||void 0===a||a.call(o,s,t,i),delete i.promiseCache[n];case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=4,Promise.all(r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"_validateParsers",value:function(){this._parsersValidated=!0,this._parserHash=this._parsers.filter((function(e){return e.name})).reduce((function(e,t){return e[t.name],Re(Re({},e),{},b({},t.name,t))}),{})}}]),e}(),ex=function(e){return e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e}(ex||{});function tx(e,t){if(Array.isArray(t)){var n,r=wb(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(e.startsWith("data:".concat(i)))return!0}}catch(o){r.e(o)}finally{r.f()}return!1}return e.startsWith("data:".concat(t))}var nx={extension:{type:zm.LoadParser,priority:ex.Low},name:"loadJson",test:function(e){return tx(e,"application/json")||K_(e,".json")},load:function(e){return Ee(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp.ADAPTER.fetch(e);case 2:return n=t.sent,t.next=5,n.json();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()}};Wm.add(nx);var rx={name:"loadTxt",extension:{type:zm.LoadParser,priority:ex.Low},test:function(e){return tx(e,"text/plain")||K_(e,".txt")},load:function(e){return Ee(_e().mark((function t(){var n,r;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp.ADAPTER.fetch(e);case 2:return n=t.sent,t.next=5,n.text();case 5:return r=t.sent,t.abrupt("return",r);case 7:case"end":return t.stop()}}),t)})))()}};Wm.add(rx);var ix=["normal","bold","100","200","300","400","500","600","700","800","900"],ox=[".ttf",".otf",".woff",".woff2"],ax=["font/ttf","font/otf","font/woff","font/woff2"],sx=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function lx(e){var t,n=Ev.extname(e),r=Ev.basename(e,n).replace(/(-|_)/g," ").toLowerCase().split(" ").map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),i=r.length>0,o=wb(r);try{for(o.s();!(t=o.n()).done;){if(!t.value.match(sx)){i=!1;break}}}catch(s){o.e(s)}finally{o.f()}var a=r.join(" ");return i||(a='"'.concat(a.replace(/[\\"]/g,"\\$&"),'"')),a}var ux={extension:{type:zm.LoadParser,priority:ex.Low},name:"loadWebFont",test:function(e){return tx(e,ax)||K_(e,ox)},load:function(e,t){return Ee(_e().mark((function n(){var r,i,o,a,s,l,u,c,h,d,f,p,v,m;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=Zp.ADAPTER.getFontFaceSet())){n.next=18;break}c=[],h=null!==(i=null===(o=t.data)||void 0===o?void 0:o.family)&&void 0!==i?i:lx(e),d=null!==(a=null===(s=t.data)||void 0===s||null===(l=s.weights)||void 0===l?void 0:l.filter((function(e){return ix.includes(e)})))&&void 0!==a?a:["normal"],f=null!==(u=t.data)&&void 0!==u?u:{},p=0;case 7:if(!(p<d.length)){n.next=17;break}return v=d[p],m=new FontFace(h,"url(".concat(encodeURI(e),")"),Re(Re({},f),{},{weight:v})),n.next=12,m.load();case 12:r.add(m),c.push(m);case 14:p++,n.next=7;break;case 17:return n.abrupt("return",1===c.length?c[0]:c);case 18:return n.abrupt("return",null);case 20:case"end":return n.stop()}}),n)})))()},unload:function(e){(Array.isArray(e)?e:[e]).forEach((function(e){return Zp.ADAPTER.getFontFaceSet().delete(e)}))}};Wm.add(ux);var cx,hx,dx=0,fx={id:"checkImageBitmap",code:"\n    async function checkImageBitmap()\n    {\n        try\n        {\n            if (typeof createImageBitmap !== 'function') return false;\n\n            const response = await fetch('".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=","');\n            const imageBlob =  await response.blob();\n            const imageBitmap = await createImageBitmap(imageBlob);\n\n            return imageBitmap.width === 1 && imageBitmap.height === 1;\n        }\n        catch (e)\n        {\n            return false;\n        }\n    }\n    checkImageBitmap().then((result) => { self.postMessage(result); });\n    ")},px="\n    async function loadImageBitmap(url)\n    {\n        const response = await fetch(url);\n\n        if (!response.ok)\n        {\n            throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: `\n                + `${response.status} ${response.statusText}`);\n        }\n\n        const imageBlob =  await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n\n        return imageBitmap;\n    }\n    self.onmessage = async (event) =>\n    {\n        try\n        {\n            const imageBitmap = await loadImageBitmap(event.data.data[0]);\n\n            self.postMessage({\n                data: imageBitmap,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            }, [imageBitmap]);\n        }\n        catch(e)\n        {\n            self.postMessage({\n                error: e,\n                uuid: event.data.uuid,\n                id: event.data.id,\n            });\n        }\n    };",vx=function(){function e(){u(this,e),this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}return f(e,[{key:"isImageBitmapSupported",value:function(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise((function(e){var t=URL.createObjectURL(new Blob([fx.code],{type:"application/javascript"})),n=new Worker(t);n.addEventListener("message",(function(r){n.terminate(),URL.revokeObjectURL(t),e(r.data)}))}))),this._isImageBitmapSupported}},{key:"loadImageBitmap",value:function(e){return this._run("loadImageBitmap",[e])}},{key:"_initWorkers",value:function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._initialized){e.next=2;break}return e.abrupt("return");case 2:this._initialized=!0;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getWorker",value:function(){var e=this;void 0===cx&&(cx=navigator.hardwareConcurrency||4);var t=this.workerPool.pop();return!t&&this._createdWorkers<cx&&(hx||(hx=URL.createObjectURL(new Blob([px],{type:"application/javascript"}))),this._createdWorkers++,(t=new Worker(hx)).addEventListener("message",(function(t){e.complete(t.data),e.returnWorker(t.target),e.next()}))),t}},{key:"returnWorker",value:function(e){this.workerPool.push(e)}},{key:"complete",value:function(e){void 0!==e.error?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}},{key:"_run",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initWorkers();case 2:return r=new Promise((function(e,r){i.queue.push({id:t,arguments:n,resolve:e,reject:r})})),this.next(),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"next",value:function(){if(this.queue.length){var e=this.getWorker();if(e){var t=this.queue.pop(),n=t.id;this.resolveHash[dx]={resolve:t.resolve,reject:t.reject},e.postMessage({data:t.arguments,uuid:dx++,id:n})}}}}]),e}(),mx=new vx;function gx(e,t,n){var r=new wy(e);return r.baseTexture.on("dispose",(function(){delete t.promiseCache[n]})),r}var yx=[".jpeg",".jpg",".png",".webp",".avif"],bx=["image/jpeg","image/png","image/webp","image/avif"];function _x(e){return xx.apply(this,arguments)}function xx(){return xx=Ee(_e().mark((function e(t){var n,r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zp.ADAPTER.fetch(t);case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("[loadImageBitmap] Failed to fetch ".concat(t,": ").concat(n.status," ").concat(n.statusText));case 5:return e.next=7,n.blob();case 7:return r=e.sent,e.next=10,createImageBitmap(r);case 10:return i=e.sent,e.abrupt("return",i);case 12:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}var Ex={name:"loadTextures",extension:{type:zm.LoadParser,priority:ex.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:function(e){return tx(e,bx)||K_(e,yx)},load:function(e,t,n){var r=this;return Ee(_e().mark((function i(){var o,a;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=null,!globalThis.createImageBitmap||!r.config.preferCreateImageBitmap){i.next=18;break}if(i.t0=r.config.preferWorkers,!i.t0){i.next=7;break}return i.next=6,mx.isImageBitmapSupported();case 6:i.t0=i.sent;case 7:if(!i.t0){i.next=13;break}return i.next=10,mx.loadImageBitmap(e);case 10:o=i.sent,i.next=16;break;case 13:return i.next=15,_x(e);case 15:o=i.sent;case 16:i.next=21;break;case 18:return i.next=20,new Promise((function(t){(o=new Image).crossOrigin=r.config.crossOrigin,o.src=e,o.complete?t(o):o.onload=function(){t(o)}}));case 20:o=i.sent;case 21:return(a=new ig(o,Re({resolution:Hm(e)},t.data))).resource.src=e,i.abrupt("return",gx(a,n,e));case 24:case"end":return i.stop()}}),i)})))()},unload:function(e){e.destroy(!0)}};Wm.add(Ex);var wx={extension:{type:zm.LoadParser,priority:ex.High},name:"loadSVG",test:function(e){return tx(e,"image/svg+xml")||K_(e,".svg")},testParse:function(e){return Ee(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Jb.test(e));case 1:case"end":return t.stop()}}),t)})))()},parse:function(e,t,n){return Ee(_e().mark((function r(){var i,o,a,s;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=new Jb(e,null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.resourceOptions),r.next=3,o.load();case 3:return(a=new ig(o,Re({resolution:Hm(e)},null===t||void 0===t?void 0:t.data))).resource.src=e,s=gx(a,n,e),r.abrupt("return",s);case 7:case"end":return r.stop()}}),r)})))()},load:function(e,t){return Ee(_e().mark((function t(){var n;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp.ADAPTER.fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}}),t)})))()},unload:Ex.unload};function Tx(e,t,n,r,i){for(var o=t[n],a=0;a<o.length;a++){var s=o[a];n<t.length-1?Tx(e.replace(r[n],s),t,n+1,r,i):i.push(e.replace(r[n],s))}}function Sx(e){var t=e.match(/\{(.*?)\}/g),n=[];if(t){var r=[];t.forEach((function(e){var t=e.substring(1,e.length-1).split(",");r.push(t)})),Tx(e,r,0,t,n)}else n.push(e);return n}Wm.add(wx);var kx=function(){function e(){var t=this;u(this,e),this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:function(e,n){return"".concat(e).concat(t._bundleIdConnector).concat(n)},extractAssetIdFromBundle:function(e,n){return n.replace("".concat(e).concat(t._bundleIdConnector),"")}},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}return f(e,[{key:"setBundleIdentifier",value:function(e){var t,n,r;if(this._bundleIdConnector=null!==(t=e.connector)&&void 0!==t?t:this._bundleIdConnector,this._createBundleAssetId=null!==(n=e.createBundleAssetId)&&void 0!==n?n:this._createBundleAssetId,this._extractAssetIdFromBundle=null!==(r=e.extractAssetIdFromBundle)&&void 0!==r?r:this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}},{key:"prefer",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach((function(t){e._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))})),this._resolverHash={}}},{key:"basePath",get:function(){return this._basePath},set:function(e){this._basePath=e}},{key:"rootPath",get:function(){return this._rootPath},set:function(e){this._rootPath=e}},{key:"parsers",get:function(){return this._parsers}},{key:"reset",value:function(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}},{key:"setDefaultSearchParams",value:function(e){if("string"===typeof e)this._defaultSearchParams=e;else{var t=e;this._defaultSearchParams=Object.keys(t).map((function(e){return"".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(t[e]))})).join("&")}}},{key:"addManifest",value:function(e){var t=this;this._manifest,this._manifest=e,e.bundles.forEach((function(e){t.addBundle(e.name,e.assets)}))}},{key:"addBundle",value:function(e,t){var n=this,r=[];Array.isArray(t)?t.forEach((function(t){if("string"===typeof t.name){var i=n._createBundleAssetId(e,t.name);r.push(i),n.add([t.name,i],t.srcs,t.data)}else{var o=t.name.map((function(t){return n._createBundleAssetId(e,t)}));o.forEach((function(e){r.push(e)})),n.add([].concat(Pe(t.name),Pe(o)),t.srcs)}})):Object.keys(t).forEach((function(i){r.push(n._createBundleAssetId(e,i)),n.add([i,n._createBundleAssetId(e,i)],t[i])})),this._bundles[e]=r}},{key:"add",value:function(e,t,n){var r=this,i=q_(e);i.forEach((function(e){r.hasKey(e)})),Array.isArray(t)||(t="string"===typeof t?Sx(t):[t]);var o=t.map((function(e){var t,o=e;if("string"===typeof e){for(var a=!1,s=0;s<r._parsers.length;s++){var l=r._parsers[s];if(l.test(e)){o=l.parse(e),a=!0;break}}a||(o={src:e})}return o.format||(o.format=o.src.split(".").pop()),o.alias||(o.alias=i),(r._basePath||r._rootPath)&&(o.src=Ev.toAbsolute(o.src,r._basePath,r._rootPath)),o.src=r._appendDefaultSearchParams(o.src),o.data=null!==(t=o.data)&&void 0!==t?t:n,o}));i.forEach((function(e){r._assetMap[e]=o}))}},{key:"resolveBundle",value:function(e){var t=this,n=Q_(e);e=q_(e);var r={};return e.forEach((function(e){var n=t._bundles[e];if(n){var i=t.resolve(n),o={};for(var a in i){var s=i[a];o[t._extractAssetIdFromBundle(e,a)]=s}r[e]=o}})),n?r[e[0]]:r}},{key:"resolveUrl",value:function(e){var t=this.resolve(e);if("string"!==typeof e){var n={};for(var r in t)n[r]=t[r].src;return n}return t.src}},{key:"resolve",value:function(e){var t=this,n=Q_(e);e=q_(e);var r={};return e.forEach((function(e){if(!t._resolverHash[e])if(t._assetMap[e]){var n,i=t._assetMap[e],o=t._getPreferredOrder(i),a=i[0];null===o||void 0===o||o.priority.forEach((function(e){o.params[e].forEach((function(t){var n=i.filter((function(n){return!!n[e]&&n[e]===t}));n.length&&(i=n)}))})),t._resolverHash[e]=null!==(n=i[0])&&void 0!==n?n:a}else{var s=e;(t._basePath||t._rootPath)&&(s=Ev.toAbsolute(s,t._basePath,t._rootPath)),s=t._appendDefaultSearchParams(s),t._resolverHash[e]={src:s}}r[e]=t._resolverHash[e]})),n?r[e[0]]:r}},{key:"hasKey",value:function(e){return!!this._assetMap[e]}},{key:"hasBundle",value:function(e){return!!this._bundles[e]}},{key:"_getPreferredOrder",value:function(e){for(var t=this,n=function(){var n=e[0],r=t._preferredOrder.find((function(e){return e.params.format.includes(n.format)}));if(r)return{v:r}},r=0;r<e.length;r++){var i=n();if("object"===typeof i)return i.v}return this._preferredOrder[0]}},{key:"_appendDefaultSearchParams",value:function(e){if(!this._defaultSearchParams)return e;var t=/\?/.test(e)?"&":"?";return"".concat(e).concat(t).concat(this._defaultSearchParams)}}]),e}(),Cx=function(){function e(){u(this,e),this._detections=[],this._initialized=!1,this.resolver=new kx,this.loader=new J_,this.cache=$_,this._backgroundLoader=new Y_(this.loader),this._backgroundLoader.active=!0,this.reset()}return f(e,[{key:"init",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i,o,a,s,l,u,c,h,d,f,p,v,m,g=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=g.length>0&&void 0!==g[0]?g[0]:{},!this._initialized){e.next=4;break}return e.abrupt("return");case 4:if(this._initialized=!0,i.defaultSearchParams&&this.resolver.setDefaultSearchParams(i.defaultSearchParams),i.basePath&&(this.resolver.basePath=i.basePath),i.bundleIdentifier&&this.resolver.setBundleIdentifier(i.bundleIdentifier),!i.manifest){e.next=15;break}if("string"!==typeof(o=i.manifest)){e.next=14;break}return e.next=13,this.load(o);case 13:o=e.sent;case 14:this.resolver.addManifest(o);case 15:if(a=null!==(t=null===(n=i.texturePreference)||void 0===n?void 0:n.resolution)&&void 0!==t?t:1,s="number"===typeof a?[a]:a,l=[],null===(r=i.texturePreference)||void 0===r||!r.format){e.next=44;break}c=null===(u=i.texturePreference)||void 0===u?void 0:u.format,l="string"===typeof c?[c]:c,h=wb(this._detections),e.prev=22,h.s();case 24:if((d=h.n()).done){e.next=34;break}return f=d.value,e.next=28,f.test();case 28:if(e.sent){e.next=32;break}return e.next=31,f.remove(l);case 31:l=e.sent;case 32:e.next=24;break;case 34:e.next=39;break;case 36:e.prev=36,e.t0=e.catch(22),h.e(e.t0);case 39:return e.prev=39,h.f(),e.finish(39);case 42:e.next=65;break;case 44:p=wb(this._detections),e.prev=45,p.s();case 47:if((v=p.n()).done){e.next=57;break}return m=v.value,e.next=51,m.test();case 51:if(!e.sent){e.next=55;break}return e.next=54,m.add(l);case 54:l=e.sent;case 55:e.next=47;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(45),p.e(e.t1);case 62:return e.prev=62,p.f(),e.finish(62);case 65:this.resolver.prefer({params:{format:l,resolution:s}}),i.preferences&&this.setPreferences(i.preferences);case 67:case"end":return e.stop()}}),e,this,[[22,36,39,42],[45,59,62,65]])})));return function(){return e.apply(this,arguments)}}()},{key:"add",value:function(e,t,n){this.resolver.add(e,t,n)}},{key:"load",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a,s=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return r=Q_(t),i=q_(t).map((function(e){return"string"!==typeof e?(s.resolver.add(e.src,e),e.src):(s.resolver.hasKey(e)||s.resolver.add(e,e),e)})),o=this.resolver.resolve(i),e.next=8,this._mapLoadToResolve(o,n);case 8:return a=e.sent,e.abrupt("return",r?a[i[0]]:a);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"addBundle",value:function(e,t){this.resolver.addBundle(e,t)}},{key:"loadBundle",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return r=!1,"string"===typeof t&&(r=!0,t=[t]),i=this.resolver.resolveBundle(t),o={},a=Object.keys(i),s=0,l=0,u=function(){null===n||void 0===n||n(++s/l)},c=a.map((function(e){var t=i[e];return l+=Object.keys(t).length,h._mapLoadToResolve(t,u).then((function(t){o[e]=t}))})),e.next=14,Promise.all(c);case 14:return e.abrupt("return",r?o[t[0]]:o);case 15:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"backgroundLoad",value:function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:"string"===typeof t&&(t=[t]),n=this.resolver.resolve(t),this._backgroundLoader.add(Object.values(n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"backgroundLoadBundle",value:function(){var e=Ee(_e().mark((function e(t){var n,r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:"string"===typeof t&&(t=[t]),n=this.resolver.resolveBundle(t),Object.values(n).forEach((function(e){r._backgroundLoader.add(Object.values(e))}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}},{key:"get",value:function(e){if("string"===typeof e)return $_.get(e);for(var t={},n=0;n<e.length;n++)t[n]=$_.get(e[n]);return t}},{key:"_mapLoadToResolve",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.values(t),i=Object.keys(t),this._backgroundLoader.active=!1,e.next=5,this.loader.load(r,n);case 5:return o=e.sent,this._backgroundLoader.active=!0,a={},r.forEach((function(e,t){var n=o[e.src],r=[e.src];e.alias&&r.push.apply(r,Pe(e.alias)),a[i[t]]=n,$_.set(r,n)})),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unload",value:function(){var e=Ee(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return n=q_(t).map((function(e){return"string"!==typeof e?e.src:e})),r=this.resolver.resolve(n),e.next=7,this._unloadFromResolved(r);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"unloadBundle",value:function(){var e=Ee(_e().mark((function e(t){var n,r,i=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:return t=q_(t),n=this.resolver.resolveBundle(t),r=Object.keys(n).map((function(e){return i._unloadFromResolved(n[e])})),e.next=8,Promise.all(r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_unloadFromResolved",value:function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object.values(t)).forEach((function(e){$_.remove(e.src)})),e.next=4,this.loader.unload(n);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"detections",get:function(){return this._detections}},{key:"preferWorkers",get:function(){return Ex.config.preferWorkers},set:function(e){Tv("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}},{key:"setPreferences",value:function(e){this.loader.parsers.forEach((function(t){t.config&&Object.keys(t.config).filter((function(t){return t in e})).forEach((function(n){t.config[n]=e[n]}))}))}}]),e}(),Ax=new Cx;Wm.handleByList(zm.LoadParser,Ax.loader.parsers).handleByList(zm.ResolveParser,Ax.resolver.parsers).handleByList(zm.CacheParser,Ax.cache.parsers).handleByList(zm.DetectionParser,Ax.detections);var Ix={extension:zm.CacheParser,test:function(e){return Array.isArray(e)&&e.every((function(e){return e instanceof wy}))},getCacheableAssets:function(e,t){var n={};return e.forEach((function(e){t.forEach((function(t,r){n[e+(0===r?"":r+1)]=t}))})),n}};Wm.add(Ix);var Ox={extension:{type:zm.DetectionParser,priority:1},test:function(){var e=Ee(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(globalThis.createImageBitmap){e.next=2;break}return e.abrupt("return",!1);case 2:return"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e.next=5,Zp.ADAPTER.fetch("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=").then((function(e){return e.blob()}));case 5:return t=e.sent,e.abrupt("return",createImageBitmap(t).then((function(){return!0}),(function(){return!1})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Pe(t),["avif"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return"avif"!==e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};Wm.add(Ox);var Px={extension:{type:zm.DetectionParser,priority:0},test:function(){var e=Ee(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(globalThis.createImageBitmap){e.next=2;break}return e.abrupt("return",!1);case 2:return"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e.next=5,Zp.ADAPTER.fetch("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=").then((function(e){return e.blob()}));case 5:return t=e.sent,e.abrupt("return",createImageBitmap(t).then((function(){return!0}),(function(){return!1})));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Pe(t),["webp"]));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return"webp"!==e})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};Wm.add(Px);var Mx=["png","jpg","jpeg"],Rx={extension:{type:zm.DetectionParser,priority:-1},test:function(){return Promise.resolve(!0)},add:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[].concat(Pe(t),Mx));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.filter((function(e){return!Mx.includes(e)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};Wm.add(Rx);var Nx={extension:zm.ResolveParser,test:Ex.test,parse:function(e){var t,n;return{resolution:parseFloat(null!==(t=null===(n=Zp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:e.split(".").pop(),src:e}}};Wm.add(Nx);var Dx,Lx,Fx,Bx=function(e,t){var n=t.split("?")[1];return n&&(e+="?".concat(n)),e},Ux=function(e){return e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e}(Ux||{}),Hx=(b(Dx={},33776,.5),b(Dx,33777,.5),b(Dx,33778,1),b(Dx,33779,1),b(Dx,35916,.5),b(Dx,35917,.5),b(Dx,35918,1),b(Dx,35919,1),b(Dx,37488,.5),b(Dx,37489,.5),b(Dx,37490,1),b(Dx,37491,1),b(Dx,37492,.5),b(Dx,37496,1),b(Dx,37493,.5),b(Dx,37497,1),b(Dx,37494,.5),b(Dx,37495,.5),b(Dx,35840,.5),b(Dx,35842,.5),b(Dx,35841,.25),b(Dx,35843,.25),b(Dx,36196,.5),b(Dx,35986,.5),b(Dx,35986,1),b(Dx,34798,1),b(Dx,37808,1),Dx);function jx(){Fx={s3tc:Lx.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:Lx.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:Lx.getExtension("WEBGL_compressed_texture_etc"),etc1:Lx.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:Lx.getExtension("WEBGL_compressed_texture_pvrtc")||Lx.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:Lx.getExtension("WEBGL_compressed_texture_atc"),astc:Lx.getExtension("WEBGL_compressed_texture_astc")}}var zx={extension:{type:zm.DetectionParser,priority:2},test:function(){var e=Ee(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Zp.ADAPTER.createCanvas(),n=t.getContext("webgl")){e.next=5;break}return e.abrupt("return",!1);case 5:return Lx=n,e.abrupt("return",!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),add:function(){var e=Ee(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Fx||jx(),n=[],e.t0=_e().keys(Fx);case 3:if((e.t1=e.t0()).done){e.next=11;break}if(r=e.t1.value,Fx[r]){e.next=8;break}return e.abrupt("continue",3);case 8:n.push(r),e.next=3;break;case 11:return e.abrupt("return",[].concat(n,Pe(t)));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),remove:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fx||jx(),e.abrupt("return",t.filter((function(e){return!(e in Fx)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};Wm.add(zx);var Vx,Gx,Wx,Xx,Yx,Kx=function(e){v(n,e);var t=y(n);function n(e){var r,i,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{width:1,height:1,autoLoad:!0};return u(this,n),"string"===typeof e?(i=e,o=new Uint8Array):(i=null,o=e),(r=t.call(this,o,a)).origin=i,r.buffer=o?new Xm(o):null,r._load=null,r.loaded=!1,null!==r.origin&&!1!==a.autoLoad&&r.load(),null===r.origin&&r.buffer&&(r._load=Promise.resolve(g(r)),r.loaded=!0,r.onBlobLoaded(r.buffer.rawBinaryData)),r}return f(n,[{key:"onBlobLoaded",value:function(e){}},{key:"load",value:function(){var e=this;return this._load||(this._load=fetch(this.origin).then((function(e){return e.blob()})).then((function(e){return e.arrayBuffer()})).then((function(t){return e.data=new Uint32Array(t),e.buffer=new Xm(t),e.loaded=!0,e.onBlobLoaded(t),e.update(),e}))),this._load}}]),n}(tg),qx=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r)).format=r.format,i.levels=r.levels||1,i._width=r.width,i._height=r.height,i._extension=n._formatToExtension(i.format),(r.levelBuffers||i.buffer)&&(i._levelBuffers=r.levelBuffers||n._createLevelBuffers(e instanceof Uint8Array?e:i.buffer.uint8View,i.format,i.levels,4,4,i.width,i.height)),i}return f(n,[{key:"upload",value:function(e,t,n){var r=e.gl;if(!e.context.extensions[this._extension])throw new Error("".concat(this._extension," textures are not supported on the current machine"));if(!this._levelBuffers)return!1;for(var i=0,o=this.levels;i<o;i++){var a=this._levelBuffers[i],s=a.levelID,l=a.levelWidth,u=a.levelHeight,c=a.levelBuffer;r.compressedTexImage2D(r.TEXTURE_2D,s,this.format,l,u,0,c)}return!0}},{key:"onBlobLoaded",value:function(){this._levelBuffers=n._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}}],[{key:"_formatToExtension",value:function(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}},{key:"_createLevelBuffers",value:function(e,t,n,r,i,o,a){for(var s=new Array(n),l=e.byteOffset,u=o,c=a,h=u+r-1&~(r-1),d=c+i-1&~(i-1),f=h*d*Hx[t],p=0;p<n;p++)s[p]={levelID:p,levelWidth:n>1?u:h,levelHeight:n>1?c:d,levelBuffer:new Uint8Array(e.buffer,l,f)},l+=f,f=(h=(u=u>>1||1)+r-1&~(r-1))*(d=(c=c>>1||1)+i-1&~(i-1))*Hx[t];return s}}]),n}(Kx),Zx=4,$x=124,Qx=32,Jx=20,eE=542327876,tE={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},nE={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},rE={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},iE=1,oE=2,aE=4,sE=64,lE=512,uE=131072,cE=808540228,hE=4,dE=(b(Vx={},827611204,Ux.COMPRESSED_RGBA_S3TC_DXT1_EXT),b(Vx,861165636,Ux.COMPRESSED_RGBA_S3TC_DXT3_EXT),b(Vx,894720068,Ux.COMPRESSED_RGBA_S3TC_DXT5_EXT),Vx),fE=(b(Gx={},70,Ux.COMPRESSED_RGBA_S3TC_DXT1_EXT),b(Gx,71,Ux.COMPRESSED_RGBA_S3TC_DXT1_EXT),b(Gx,73,Ux.COMPRESSED_RGBA_S3TC_DXT3_EXT),b(Gx,74,Ux.COMPRESSED_RGBA_S3TC_DXT3_EXT),b(Gx,76,Ux.COMPRESSED_RGBA_S3TC_DXT5_EXT),b(Gx,77,Ux.COMPRESSED_RGBA_S3TC_DXT5_EXT),b(Gx,72,Ux.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT),b(Gx,75,Ux.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT),b(Gx,78,Ux.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT),Gx);function pE(e){var t=new Uint32Array(e);if(t[0]!==eE)throw new Error("Invalid DDS file magic word");var n=new Uint32Array(e,0,$x/Uint32Array.BYTES_PER_ELEMENT),r=n[tE.HEIGHT],i=n[tE.WIDTH],o=n[tE.MIPMAP_COUNT],a=new Uint32Array(e,tE.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Qx/Uint32Array.BYTES_PER_ELEMENT),s=a[iE];if(s&aE){var l=a[nE.FOURCC];if(l!==cE){var u=dE[l],c=new Uint8Array(e,Zx+$x);return[new qx(c,{format:u,width:i,height:r,levels:o})]}var h=Zx+$x,d=new Uint32Array(t.buffer,h,Jx/Uint32Array.BYTES_PER_ELEMENT),f=d[rE.DXGI_FORMAT],p=d[rE.RESOURCE_DIMENSION],v=d[rE.MISC_FLAG],m=d[rE.ARRAY_SIZE],g=fE[f];if(void 0===g)throw new Error("DDSParser cannot parse texture data with DXGI format ".concat(f));if(v===hE)throw new Error("DDSParser does not support cubemap textures");if(6===p)throw new Error("DDSParser does not supported 3D texture data");var y=new Array,b=Zx+$x+Jx;if(1===m)y.push(new Uint8Array(e,b));else{for(var _=Hx[g],x=0,E=i,w=r,T=0;T<o;T++){x+=Math.max(1,E+3&-4)*Math.max(1,w+3&-4)*_,E>>>=1,w>>>=1}for(var S=b,k=0;k<m;k++)y.push(new Uint8Array(e,S,x)),S+=x}return y.map((function(e){return new qx(e,{format:g,width:i,height:r,levels:o})}))}if(s&sE)throw new Error("DDSParser does not support uncompressed texture data.");if(s&lE)throw new Error("DDSParser does not supported YUV uncompressed texture data.");if(s&uE)throw new Error("DDSParser does not support single-channel (lumninance) texture data!");if(s&oE)throw new Error("DDSParser does not support single-channel (alpha) texture data!");throw new Error("DDSParser failed to load a texture file due to an unknown reason!")}var vE=[171,75,84,88,32,49,49,187,13,10,26,10],mE=67305985,gE={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},yE=64,bE=(b(Wx={},Lp.UNSIGNED_BYTE,1),b(Wx,Lp.UNSIGNED_SHORT,2),b(Wx,Lp.INT,4),b(Wx,Lp.UNSIGNED_INT,4),b(Wx,Lp.FLOAT,4),b(Wx,Lp.HALF_FLOAT,8),Wx),_E=(b(Xx={},Np.RGBA,4),b(Xx,Np.RGB,3),b(Xx,Np.RG,2),b(Xx,Np.RED,1),b(Xx,Np.LUMINANCE,1),b(Xx,Np.LUMINANCE_ALPHA,2),b(Xx,Np.ALPHA,1),Xx),xE=(b(Yx={},Lp.UNSIGNED_SHORT_4_4_4_4,2),b(Yx,Lp.UNSIGNED_SHORT_5_5_5_1,2),b(Yx,Lp.UNSIGNED_SHORT_5_6_5,2),Yx);function EE(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new DataView(t);if(!function(e,t){for(var n=0;n<vE.length;n++)if(t.getUint8(n)!==vE[n])return!1;return!0}(0,r))return null;var i=r.getUint32(gE.ENDIANNESS,!0)===mE,o=r.getUint32(gE.GL_TYPE,i),a=r.getUint32(gE.GL_FORMAT,i),s=r.getUint32(gE.GL_INTERNAL_FORMAT,i),l=r.getUint32(gE.PIXEL_WIDTH,i),u=r.getUint32(gE.PIXEL_HEIGHT,i)||1,c=r.getUint32(gE.PIXEL_DEPTH,i)||1,h=r.getUint32(gE.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=r.getUint32(gE.NUMBER_OF_FACES,i),f=r.getUint32(gE.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(gE.BYTES_OF_KEY_VALUE_DATA,i);if(0===u||1!==c)throw new Error("Only 2D textures are supported");if(1!==d)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(1!==h)throw new Error("WebGL does not support array textures");var v,m=l+3&-4,g=u+3&-4,y=new Array(h),b=l*u;if(0===o&&(b=m*g),void 0===(v=0!==o?bE[o]?bE[o]*_E[a]:xE[o]:Hx[s]))throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");for(var _=n?function(e,t,n){var r=new Map,i=0;for(;i<t;){var o=e.getUint32(yE+i,n),a=yE+i+4,s=3-(o+3)%4;if(0===o||o>t-i)break;for(var l=0;l<o&&0!==e.getUint8(a+l);l++);if(-1===l)break;var u=(new TextDecoder).decode(new Uint8Array(e.buffer,a,l)),c=new DataView(e.buffer,a+l+1,o-l-1);r.set(u,c),i+=4+o+s}return r}(r,p,i):null,x=b*v,E=l,w=u,T=m,S=g,k=yE+p,C=0;C<f;C++){for(var A=r.getUint32(k,i),I=k+4,O=0;O<h;O++){var P=y[O];P||(P=y[O]=new Array(f)),P[C]={levelID:C,levelWidth:f>1||0!==o?E:T,levelHeight:f>1||0!==o?w:S,levelBuffer:new Uint8Array(t,I,x)},I+=x}k=(k+=A+4)%4!==0?k+4-k%4:k,x=(T=(E=E>>1||1)+4-1&-4)*(S=(w=w>>1||1)+4-1&-4)*v}return 0!==o?{uncompressed:y.map((function(e){var t=e[0].levelBuffer,n=!1;return o===Lp.FLOAT?t=new Float32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4):o===Lp.UNSIGNED_INT?(n=!0,t=new Uint32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)):o===Lp.INT&&(n=!0,t=new Int32Array(e[0].levelBuffer.buffer,e[0].levelBuffer.byteOffset,e[0].levelBuffer.byteLength/4)),{resource:new tg(t,{width:e[0].levelWidth,height:e[0].levelHeight}),type:o,format:n?wE(a):a}})),kvData:_}:{compressed:y.map((function(e){return new qx(null,{format:s,width:l,height:u,levels:f,levelBuffers:e})})),kvData:_}}function wE(e){switch(e){case Np.RGBA:return Np.RGBA_INTEGER;case Np.RGB:return Np.RGB_INTEGER;case Np.RG:return Np.RG_INTEGER;case Np.RED:return Np.RED_INTEGER;default:return e}}var TE={extension:{type:zm.LoadParser,priority:ex.High},name:"loadDDS",test:function(e){return K_(e,".dds")},load:function(e,t,n){return Ee(_e().mark((function r(){var i,o,a,s;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Zp.ADAPTER.fetch(e);case 2:return i=r.sent,r.next=5,i.arrayBuffer();case 5:return o=r.sent,a=pE(o),s=a.map((function(r){return gx(new ig(r,Re({mipmap:Hp.OFF,alphaMode:jp.NO_PREMULTIPLIED_ALPHA,resolution:Hm(e)},t.data)),n,e)})),r.abrupt("return",1===s.length?s[0]:s);case 9:case"end":return r.stop()}}),r)})))()},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}};Wm.add(TE);var SE={extension:{type:zm.LoadParser,priority:ex.High},name:"loadKTX",test:function(e){return K_(e,".ktx")},load:function(e,t,n){return Ee(_e().mark((function r(){var i,o,a,s,l,u,c,h,d;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Zp.ADAPTER.fetch(e);case 2:return i=r.sent,r.next=5,i.arrayBuffer();case 5:return o=r.sent,a=EE(e,o),s=a.compressed,l=a.uncompressed,u=a.kvData,c=null!==s&&void 0!==s?s:l,h=Re({mipmap:Hp.OFF,alphaMode:jp.NO_PREMULTIPLIED_ALPHA,resolution:Hm(e)},t.data),d=c.map((function(t){c===l&&Object.assign(h,{type:t.type,format:t.format});var r=new ig(t,h);return r.ktxKeyValueData=u,gx(r,n,e)})),r.abrupt("return",1===d.length?d[0]:d);case 11:case"end":return r.stop()}}),r)})))()},unload:function(e){Array.isArray(e)?e.forEach((function(e){return e.destroy(!0)})):e.destroy(!0)}};Wm.add(SE);var kE={extension:zm.ResolveParser,test:function(e){var t=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(t)},parse:function(e){var t,n;if("ktx"===e.split("?")[0].split(".").pop()){var r,i,o=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(o.some((function(t){return e.endsWith(t)})))return{resolution:parseFloat(null!==(r=null===(i=Zp.RETINA_PREFIX.exec(e))||void 0===i?void 0:i[1])&&void 0!==r?r:"1"),format:o.find((function(t){return e.endsWith(t)})),src:e}}return{resolution:parseFloat(null!==(t=null===(n=Zp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:e.split(".").pop(),src:e}}};Wm.add(kE);var CE=new xg,AE=function(){function e(t){u(this,e),this.renderer=t}return f(e,[{key:"image",value:function(){var e=Ee(_e().mark((function e(t,n,r){var i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new Image,e.next=3,this.base64(t,n,r);case 3:return i.src=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"base64",value:function(){var e=Ee(_e().mark((function e(t,n,r){var i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===(i=this.canvas(t)).toBlob){e.next=3;break}return e.abrupt("return",new Promise((function(e,t){i.toBlob((function(n){if(n){var r=new FileReader;r.onload=function(){return e(r.result)},r.onerror=t,r.readAsDataURL(n)}else t(new Error("ICanvas.toBlob failed!"))}),n,r)})));case 3:if(void 0===i.toDataURL){e.next=5;break}return e.abrupt("return",i.toDataURL(n,r));case 5:if(void 0===i.convertToBlob){e.next=10;break}return e.next=8,i.convertToBlob({type:n,quality:r});case 8:return o=e.sent,e.abrupt("return",new Promise((function(e,t){var n=new FileReader;n.onload=function(){return e(n.result)},n.onerror=t,n.readAsDataURL(o)})));case 10:throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented");case 11:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"canvas",value:function(t,n){var r=this._rawPixels(t,n),i=r.pixels,o=r.width,a=r.height;r.flipY&&e._flipY(i,o,a),e._unpremultiplyAlpha(i);var s=new Rm(o,a,1),l=new ImageData(new Uint8ClampedArray(i.buffer),o,a);return s.context.putImageData(l,0,0),s.canvas}},{key:"pixels",value:function(t,n){var r=this._rawPixels(t,n),i=r.pixels,o=r.width,a=r.height;return r.flipY&&e._flipY(i,o,a),e._unpremultiplyAlpha(i),i}},{key:"_rawPixels",value:function(e,t){var n,r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");var i,o,a=!1,s=!1;if(e&&(e instanceof Ty?i=e:(i=r.generateTexture(e,{resolution:r.resolution,multisample:r.multisample}),s=!0)),i){if(n=i.baseTexture.resolution,t=null!==(o=t)&&void 0!==o?o:i.frame,a=!1,!s){r.renderTexture.bind(i);var l=i.framebuffer.glFramebuffers[r.CONTEXT_UID];l.blitFramebuffer&&r.framebuffer.bind(l.blitFramebuffer)}}else n=r.resolution,t||((t=CE).width=r.width/n,t.height=r.height/n),a=!0,r.renderTexture.bind();var u,c=Math.round(t.width*n),h=Math.round(t.height*n),d=new Uint8Array(4*c*h),f=r.gl;(f.readPixels(Math.round(t.x*n),Math.round(t.y*n),c,h,f.RGBA,f.UNSIGNED_BYTE,d),s)&&(null===(u=i)||void 0===u||u.destroy(!0));return{pixels:d,width:c,height:h,flipY:a}}},{key:"destroy",value:function(){this.renderer=null}}],[{key:"_flipY",value:function(e,t,n){for(var r=t<<2,i=n>>1,o=new Uint8Array(r),a=0;a<i;a++){var s=a*r,l=(n-a-1)*r;o.set(e.subarray(s,s+r)),e.copyWithin(s,l,l+r),e.set(o,l)}}},{key:"_unpremultiplyAlpha",value:function(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));for(var t=e.length,n=0;n<t;n+=4){var r=e[n+3];if(0!==r){var i=255.001/r;e[n]=e[n]*i+.5,e[n+1]=e[n+1]*i+.5,e[n+2]=e[n+2]*i+.5}}}}]),e}(),IE=AE;IE.extension={name:"extract",type:zm.RendererSystem},Wm.add(IE);var OE={build:function(e){var t,n,r,i,o,a,s=e.points;if(e.type===yg.CIRC){var l=e.shape;t=l.x,n=l.y,o=a=l.radius,r=i=0}else if(e.type===yg.ELIP){var u=e.shape;t=u.x,n=u.y,o=u.width,a=u.height,r=i=0}else{var c=e.shape,h=c.width/2,d=c.height/2;t=c.x+h,n=c.y+d,r=h-(o=a=Math.max(0,Math.min(c.radius,Math.min(h,d)))),i=d-a}if(o>=0&&a>=0&&r>=0&&i>=0){var f=Math.ceil(2.3*Math.sqrt(o+a)),p=8*f+(r?4:0)+(i?4:0);if(s.length=p,0!==p){if(0===f)return s.length=8,s[0]=s[6]=t+r,s[1]=s[3]=n+i,s[2]=s[4]=t-r,void(s[5]=s[7]=n-i);var v=0,m=4*f+(r?2:0)+2,g=m,y=p,b=r+o,_=i,x=t+b,E=t-b,w=n+_;if(s[v++]=x,s[v++]=w,s[--m]=w,s[--m]=E,i){var T=n-_;s[g++]=E,s[g++]=T,s[--y]=T,s[--y]=x}for(var S=1;S<f;S++){var k=Math.PI/2*(S/f),C=r+Math.cos(k)*o,A=i+Math.sin(k)*a,I=t+C,O=t-C,P=n+A,M=n-A;s[v++]=I,s[v++]=P,s[--m]=P,s[--m]=O,s[g++]=O,s[g++]=M,s[--y]=M,s[--y]=I}var R=i+a,N=t+r,D=t-r,L=n+R,F=n-R;s[v++]=N,s[v++]=L,s[--y]=F,s[--y]=N,r&&(s[v++]=D,s[v++]=L,s[--y]=F,s[--y]=D)}}else s.length=0},triangulate:function(e,t){var n=e.points,r=t.points,i=t.indices;if(0!==n.length){var o,a,s=r.length/2,l=s;if(e.type!==yg.RREC){var u=e.shape;o=u.x,a=u.y}else{var c=e.shape;o=c.x+c.width/2,a=c.y+c.height/2}var h=e.matrix;r.push(e.matrix?h.a*o+h.c*a+h.tx:o,e.matrix?h.b*o+h.d*a+h.ty:a),s++,r.push(n[0],n[1]);for(var d=2;d<n.length;d+=2)r.push(n[d],n[d+1]),i.push(s++,l,s);i.push(l+1,l,s)}}};function PE(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.length;if(!(n<6)){for(var r=0,i=0,o=e[n-2],a=e[n-1];i<n;i+=2){var s=e[i],l=e[i+1];r+=(s-o)*(l+a),o=s,a=l}if(!t&&r>0||t&&r<=0)for(var u=n/2,c=u+u%2;c<n;c+=2){var h=n-c-2,d=n-c-1,f=c,p=c+1,v=[e[f],e[h]];e[h]=v[0],e[f]=v[1];var m=[e[p],e[d]];e[d]=m[0],e[p]=m[1]}}}var ME={build:function(e){e.points=e.shape.points.slice()},triangulate:function(e,t){var n=e.points,r=e.holes,i=t.points,o=t.indices;if(n.length>=6){PE(n,!1);for(var a=[],s=0;s<r.length;s++){var l=r[s];PE(l.points,!0),a.push(n.length/2),n=n.concat(l.points)}var u=mv(n,a,2);if(!u)return;for(var c=i.length/2,h=0;h<u.length;h+=3)o.push(u[h]+c),o.push(u[h+1]+c),o.push(u[h+2]+c);for(var d=0;d<n.length;d++)i.push(n[d])}}},RE={build:function(e){var t=e.shape,n=t.x,r=t.y,i=t.width,o=t.height,a=e.points;a.length=0,i>=0&&o>=0&&a.push(n,r,n+i,r,n+i,r+o,n,r+o)},triangulate:function(e,t){var n=e.points,r=t.points;if(0!==n.length){var i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),t.indices.push(i,i+1,i+2,i+1,i+2,i+3)}}},NE={build:function(e){OE.build(e)},triangulate:function(e,t){OE.triangulate(e,t)}},DE=function(e){return e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e}(DE||{}),LE=function(e){return e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e}(LE||{}),FE={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;if(!this.adaptive||!e||isNaN(e))return t;var n=Math.ceil(e/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},BE=FE,UE=function(){function e(){u(this,e)}return f(e,null,[{key:"curveTo",value:function(e,t,n,r,i,o){var a=o[o.length-2],s=o[o.length-1]-t,l=a-e,u=r-t,c=n-e,h=Math.abs(s*c-l*u);if(h<1e-8||0===i)return o[o.length-2]===e&&o[o.length-1]===t||o.push(e,t),null;var d=s*s+l*l,f=u*u+c*c,p=s*u+l*c,v=i*Math.sqrt(d)/h,m=i*Math.sqrt(f)/h,g=v*p/d,y=m*p/f,b=v*c+m*l,_=v*u+m*s,x=l*(m+g),E=s*(m+g),w=c*(v+y),T=u*(v+y);return{cx:b+e,cy:_+t,radius:i,startAngle:Math.atan2(E-_,x-b),endAngle:Math.atan2(T-_,w-b),anticlockwise:l*u>c*s}}},{key:"arc",value:function(e,t,n,r,i,o,a,s,l){for(var u=a-o,c=FE._segmentsCount(Math.abs(u)*i,40*Math.ceil(Math.abs(u)/vg)),h=u/(2*c),d=2*h,f=Math.cos(h),p=Math.sin(h),v=c-1,m=v%1/v,g=0;g<=v;++g){var y=h+o+d*(g+m*g),b=Math.cos(y),_=-Math.sin(y);l.push((f*b+p*_)*i+n,(f*-_+p*b)*i+r)}}}]),e}(),HE=function(){function e(){u(this,e)}return f(e,null,[{key:"curveLength",value:function(e,t,n,r,i,o,a,s){for(var l=0,u=0,c=0,h=0,d=0,f=0,p=0,v=0,m=0,g=0,y=0,b=e,_=t,x=1;x<=10;++x)g=b-(v=(p=(f=(d=1-(u=x/10))*d)*d)*e+3*f*u*n+3*d*(c=u*u)*i+(h=c*u)*a),y=_-(m=p*t+3*f*u*r+3*d*c*o+h*s),b=v,_=m,l+=Math.sqrt(g*g+y*y);return l}},{key:"curveTo",value:function(t,n,r,i,o,a,s){var l=s[s.length-2],u=s[s.length-1];s.length-=2;var c=FE._segmentsCount(e.curveLength(l,u,t,n,r,i,o,a)),h=0,d=0,f=0,p=0,v=0;s.push(l,u);for(var m=1,g=0;m<=c;++m)f=(d=(h=1-(g=m/c))*h)*h,v=(p=g*g)*g,s.push(f*l+3*d*g*t+3*h*p*r+v*o,f*u+3*d*g*n+3*h*p*i+v*a)}}]),e}();function jE(e,t,n,r,i,o,a,s){var l,u;a?(l=r,u=-n):(l=-r,u=n);var c=e-n*i+l,h=t-r*i+u,d=e+n*o+l,f=t+r*o+u;return s.push(c,h,d,f),2}function zE(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,c=Math.atan2(l,u),h=Math.atan2(i-e,o-t);s&&c<h?c+=2*Math.PI:!s&&c>h&&(h+=2*Math.PI);var d=c,f=h-c,p=Math.abs(f),v=Math.sqrt(l*l+u*u),m=1+(15*p*Math.sqrt(v)/Math.PI>>0),g=f/m;if(d+=g,s){a.push(e,t,n,r);for(var y=1,b=d;y<m;y++,b+=g)a.push(e,t,e+Math.sin(b)*v,t+Math.cos(b)*v);a.push(e,t,i,o)}else{a.push(n,r,e,t);for(var _=1,x=d;_<m;_++,x+=g)a.push(e+Math.sin(x)*v,t+Math.cos(x)*v,e,t);a.push(i,o,e,t)}return 2*m}function VE(e,t){e.lineStyle.native?function(e,t){var n=0,r=e.shape,i=e.points||r.points,o=r.type!==yg.POLY||r.closeStroke;if(0!==i.length){var a=t.points,s=t.indices,l=i.length/2,u=a.length/2,c=u;for(a.push(i[0],i[1]),n=1;n<l;n++)a.push(i[2*n],i[2*n+1]),s.push(c,c+1),c++;o&&s.push(c,u)}}(e,t):function(e,t){var n=e.shape,r=e.points||n.points.slice(),i=t.closePointEps;if(0!==r.length){var o=e.lineStyle,a=new bg(r[0],r[1]),s=new bg(r[r.length-2],r[r.length-1]),l=n.type!==yg.POLY||n.closeStroke,u=Math.abs(a.x-s.x)<i&&Math.abs(a.y-s.y)<i;if(l){r=r.slice(),u&&(r.pop(),r.pop(),s.set(r[r.length-2],r[r.length-1]));var c=.5*(a.x+s.x),h=.5*(s.y+a.y);r.unshift(c,h),r.push(c,h)}var d=t.points,f=r.length/2,p=r.length,v=d.length/2,m=o.width/2,g=m*m,y=o.miterLimit*o.miterLimit,b=r[0],_=r[1],x=r[2],E=r[3],w=0,T=0,S=-(_-E),k=b-x,C=0,A=0,I=Math.sqrt(S*S+k*k);S/=I,k/=I,S*=m,k*=m;var O=o.alignment,P=2*(1-O),M=2*O;l||(o.cap===LE.ROUND?p+=zE(b-S*(P-M)*.5,_-k*(P-M)*.5,b-S*P,_-k*P,b+S*M,_+k*M,d,!0)+2:o.cap===LE.SQUARE&&(p+=jE(b,_,S,k,P,M,!0,d))),d.push(b-S*P,_-k*P,b+S*M,_+k*M);for(var R=1;R<f-1;++R){b=r[2*(R-1)],_=r[2*(R-1)+1],x=r[2*R],E=r[2*R+1],w=r[2*(R+1)],T=r[2*(R+1)+1],S=-(_-E),k=b-x,S/=I=Math.sqrt(S*S+k*k),k/=I,S*=m,k*=m,C=-(E-T),A=x-w,C/=I=Math.sqrt(C*C+A*A),A/=I,C*=m,A*=m;var N=x-b,D=_-E,L=x-w,F=T-E,B=N*L+D*F,U=D*L-F*N,H=U<0;if(Math.abs(U)<.001*Math.abs(B))d.push(x-S*P,E-k*P,x+S*M,E+k*M),B>=0&&(o.join===DE.ROUND?p+=zE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+4:p+=2,d.push(x-C*M,E-A*M,x+C*P,E+A*P));else{var j=(-S+b)*(-k+E)-(-S+x)*(-k+_),z=(-C+w)*(-A+E)-(-C+x)*(-A+T),V=(N*z-L*j)/U,G=(F*j-D*z)/U,W=(V-x)*(V-x)+(G-E)*(G-E),X=x+(V-x)*P,Y=E+(G-E)*P,K=x-(V-x)*M,q=E-(G-E)*M,Z=H?P:M,$=W<=Math.min(N*N+D*D,L*L+F*F)+Z*Z*g,Q=o.join;if(Q===DE.MITER&&W/g>y&&(Q=DE.BEVEL),$)switch(Q){case DE.MITER:d.push(X,Y,K,q);break;case DE.BEVEL:H?d.push(X,Y,x+S*M,E+k*M,X,Y,x+C*M,E+A*M):d.push(x-S*P,E-k*P,K,q,x-C*P,E-A*P,K,q),p+=2;break;case DE.ROUND:H?(d.push(X,Y,x+S*M,E+k*M),p+=zE(x,E,x+S*M,E+k*M,x+C*M,E+A*M,d,!0)+4,d.push(X,Y,x+C*M,E+A*M)):(d.push(x-S*P,E-k*P,K,q),p+=zE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+4,d.push(x-C*P,E-A*P,K,q))}else{switch(d.push(x-S*P,E-k*P,x+S*M,E+k*M),Q){case DE.MITER:H?d.push(K,q,K,q):d.push(X,Y,X,Y),p+=2;break;case DE.ROUND:p+=H?zE(x,E,x+S*M,E+k*M,x+C*M,E+A*M,d,!0)+2:zE(x,E,x-S*P,E-k*P,x-C*P,E-A*P,d,!1)+2}d.push(x-C*P,E-A*P,x+C*M,E+A*M),p+=2}}}b=r[2*(f-2)],_=r[2*(f-2)+1],x=r[2*(f-1)],S=-(_-(E=r[2*(f-1)+1])),k=b-x,S/=I=Math.sqrt(S*S+k*k),k/=I,S*=m,k*=m,d.push(x-S*P,E-k*P,x+S*M,E+k*M),l||(o.cap===LE.ROUND?p+=zE(x-S*(P-M)*.5,E-k*(P-M)*.5,x-S*P,E-k*P,x+S*M,E+k*M,d,!1)+2:o.cap===LE.SQUARE&&(p+=jE(x,E,S,k,P,M,!1,d)));for(var J=t.indices,ee=FE.epsilon*FE.epsilon,te=v;te<p+v-2;++te)b=d[2*te],_=d[2*te+1],x=d[2*(te+1)],E=d[2*(te+1)+1],w=d[2*(te+2)],T=d[2*(te+2)+1],Math.abs(b*(E-T)+x*(T-_)+w*(_-E))<ee||J.push(te,te+1,te+2)}}(e,t)}var GE,WE=function(){function e(){u(this,e)}return f(e,null,[{key:"curveLength",value:function(e,t,n,r,i,o){var a=e-2*n+i,s=t-2*r+o,l=2*n-2*e,u=2*r-2*t,c=4*(a*a+s*s),h=4*(a*l+s*u),d=l*l+u*u,f=2*Math.sqrt(c+h+d),p=Math.sqrt(c),v=2*c*p,m=2*Math.sqrt(d),g=h/p;return(v*f+p*h*(f-m)+(4*d*c-h*h)*Math.log((2*p+g+f)/(g+m)))/(4*v)}},{key:"curveTo",value:function(t,n,r,i,o){for(var a=o[o.length-2],s=o[o.length-1],l=FE._segmentsCount(e.curveLength(a,s,t,n,r,i)),u=0,c=0,h=1;h<=l;++h){var d=h/l;u=a+(t-a)*d,c=s+(n-s)*d,o.push(u+(t+(r-t)*d-u)*d,c+(n+(i-n)*d-c)*d)}}}]),e}(),XE=(b(GE={},yg.POLY,ME),b(GE,yg.CIRC,OE),b(GE,yg.ELIP,OE),b(GE,yg.RECT,RE),b(GE,yg.RREC,NE),GE),YE=[],KE=[],qE=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;u(this,e),this.points=[],this.holes=[],this.shape=t,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=t.type}return f(e,[{key:"clone",value:function(){return new e(this.shape,this.fillStyle,this.lineStyle,this.matrix)}},{key:"destroy",value:function(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}]),e}(),ZE=function(){function e(){u(this,e),this.reset()}return f(e,[{key:"begin",value:function(e,t,n){this.reset(),this.style=e,this.start=t,this.attribStart=n}},{key:"end",value:function(e,t){this.attribSize=t-this.attribStart,this.size=e-this.start}},{key:"reset",value:function(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}]),e}(),$E=new bg,QE=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).closePointEps=1e-4,e.boundsPadding=0,e.uvsFloat32=null,e.indicesUint16=null,e.batchable=!1,e.points=[],e.colors=[],e.uvs=[],e.indices=[],e.textureIds=[],e.graphicsData=[],e.drawCalls=[],e.batchDirty=-1,e.batches=[],e.dirty=0,e.cacheDirty=-1,e.clearDirty=0,e.shapeIndex=0,e._bounds=new i_,e.boundsDirty=-1,e}return f(n,[{key:"bounds",get:function(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}},{key:"invalidate",value:function(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(var e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),KE.push(this.drawCalls[e]);this.drawCalls.length=0;for(var t=0;t<this.batches.length;t++){var n=this.batches[t];n.reset(),YE.push(n)}this.batches.length=0}},{key:"clear",value:function(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}},{key:"drawShape",value:function(e){var t=new qE(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,arguments.length>3&&void 0!==arguments[3]?arguments[3]:null);return this.graphicsData.push(t),this.dirty++,this}},{key:"drawHole",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.graphicsData.length)return null;var n=new qE(e,null,null,t),r=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=r.lineStyle,r.holes.push(n),this.dirty++,this}},{key:"destroy",value:function(){jm(m(n.prototype),"destroy",this).call(this);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}},{key:"containsPoint",value:function(e){for(var t=this.graphicsData,n=0;n<t.length;++n){var r=t[n];if(r.fillStyle.visible&&(r.shape&&(r.matrix?r.matrix.applyInverse(e,$E):$E.copyFrom(e),r.shape.contains($E.x,$E.y)))){var i=!1;if(r.holes)for(var o=0;o<r.holes.length;o++){if(r.holes[o].shape.contains($E.x,$E.y)){i=!0;break}}if(!i)return!0}}return!1}},{key:"updateBatches",value:function(){if(this.graphicsData.length){if(this.validateBatching()){this.cacheDirty=this.dirty;var e=this.uvs,t=this.graphicsData,n=null,r=null;this.batches.length>0&&(r=(n=this.batches[this.batches.length-1]).style);for(var i=this.shapeIndex;i<t.length;i++){this.shapeIndex++;var o=t[i],a=o.fillStyle,s=o.lineStyle;XE[o.type].build(o),o.matrix&&this.transformPoints(o.points,o.matrix),(a.visible||s.visible)&&this.processHoles(o.holes);for(var l=0;l<2;l++){var u=0===l?a:s;if(u.visible){var c=u.texture.baseTexture,h=this.indices.length,d=this.points.length/2;c.wrapMode=Up.REPEAT,0===l?this.processFill(o):this.processLine(o);var f=this.points.length/2-d;0!==f&&(n&&!this._compareStyles(r,u)&&(n.end(h,d),n=null),n||((n=YE.pop()||new ZE).begin(u,h,d),this.batches.push(n),r=u),this.addUvs(this.points,e,u.texture,d,f,u.matrix))}}}var p=this.indices.length,v=this.points.length/2;if(n&&n.end(p,v),0!==this.batches.length){var m=v>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&m===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=m?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}else this.batchable=!0}}else this.batchable=!0}},{key:"_compareStyles",value:function(e,t){return!(!e||!t)&&(e.texture.baseTexture===t.texture.baseTexture&&(e.color+e.alpha===t.color+t.alpha&&!!e.native===!!t.native))}},{key:"validateBatching",value:function(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(var e=0,t=this.graphicsData.length;e<t;e++){var n=this.graphicsData[e],r=n.fillStyle,i=n.lineStyle;if(r&&!r.texture.baseTexture.valid)return!1;if(i&&!i.texture.baseTexture.valid)return!1}return!0}},{key:"packBatches",value:function(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);for(var e=this.batches,t=0,n=e.length;t<n;t++)for(var r=e[t],i=0;i<r.size;i++){var o=r.start+i;this.indicesUint16[o]=this.indicesUint16[o]-r.attribStart}}},{key:"isBatchable",value:function(){if(this.points.length>131070)return!1;for(var e=this.batches,t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<2*n.BATCHABLE_SIZE}},{key:"buildDrawCalls",value:function(){for(var e=++ig._globalBatch,t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),KE.push(this.drawCalls[t]);this.drawCalls.length=0;var n=this.colors,r=this.textureIds,i=KE.pop();i||((i=new og).texArray=new oy),i.texArray.count=0,i.start=0,i.size=0,i.type=Rp.TRIANGLES;var o=0,a=null,s=0,l=!1,u=Rp.TRIANGLES,c=0;this.drawCalls.push(i);for(var h=0;h<this.batches.length;h++){var d=this.batches[h],f=d.style,p=f.texture.baseTexture;l!==!!f.native&&(u=(l=!!f.native)?Rp.LINES:Rp.TRIANGLES,a=null,o=8,e++),a!==p&&(a=p,p._batchEnabled!==e&&(8===o&&(e++,o=0,i.size>0&&((i=KE.pop())||((i=new og).texArray=new oy),this.drawCalls.push(i)),i.start=c,i.size=0,i.texArray.count=0,i.type=u),p.touched=1,p._batchEnabled=e,p._batchLocation=o,p.wrapMode=Up.REPEAT,i.texArray.elements[i.texArray.count++]=p,o++)),i.size+=d.size,c+=d.size,s=p._batchLocation,this.addColors(n,f.color,f.alpha,d.attribSize,d.attribStart),this.addTextureIds(r,s,d.attribSize,d.attribStart)}ig._globalBatch=e,this.packAttributes()}},{key:"packAttributes",value:function(){for(var e=this.points,t=this.uvs,n=this.colors,r=this.textureIds,i=new ArrayBuffer(3*e.length*4),o=new Float32Array(i),a=new Uint32Array(i),s=0,l=0;l<e.length/2;l++)o[s++]=e[2*l],o[s++]=e[2*l+1],o[s++]=t[2*l],o[s++]=t[2*l+1],a[s++]=n[l],o[s++]=r[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}},{key:"processFill",value:function(e){e.holes.length?ME.triangulate(e,this):XE[e.type].triangulate(e,this)}},{key:"processLine",value:function(e){VE(e,this);for(var t=0;t<e.holes.length;t++)VE(e.holes[t],this)}},{key:"processHoles",value:function(e){for(var t=0;t<e.length;t++){var n=e[t];XE[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}},{key:"calculateBounds",value:function(){var e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}},{key:"transformPoints",value:function(e,t){for(var n=0;n<e.length/2;n++){var r=e[2*n],i=e[2*n+1];e[2*n]=t.a*r+t.c*i+t.tx,e[2*n+1]=t.b*r+t.d*i+t.ty}}},{key:"addColors",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=rm.shared.setValue(t).toLittleEndianNumber(),a=rm.shared.setValue(o).toPremultiplied(n);e.length=Math.max(e.length,i+r);for(var s=0;s<r;s++)e[i+s]=a}},{key:"addTextureIds",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e.length=Math.max(e.length,r+n);for(var i=0;i<n;i++)e[r+i]=t}},{key:"addUvs",value:function(e,t,n,r,i){for(var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=0,s=t.length,l=n.frame;a<i;){var u=e[2*(r+a)],c=e[2*(r+a)+1];if(o){var h=o.a*u+o.c*c+o.tx;c=o.b*u+o.d*c+o.ty,u=h}a++,t.push(u/l.width,c/l.height)}var d=n.baseTexture;(l.width<d.width||l.height<d.height)&&this.adjustUvs(t,n,s,i)}},{key:"adjustUvs",value:function(e,t,n,r){for(var i=t.baseTexture,o=1e-6,a=n+2*r,s=t.frame,l=s.width/i.width,u=s.height/i.height,c=s.x/s.width,h=s.y/s.height,d=Math.floor(e[n]+o),f=Math.floor(e[n+1]+o),p=n+2;p<a;p+=2)d=Math.min(d,Math.floor(e[p]+o)),f=Math.min(f,Math.floor(e[p+1]+o));c-=d,h-=f;for(var v=n;v<a;v+=2)e[v]=(e[v]+c)*l,e[v+1]=(e[v+1]+h)*u}}]),n}(pg),JE=QE;JE.BATCHABLE_SIZE=100;var ew=function(){function e(){u(this,e),this.color=16777215,this.alpha=1,this.texture=wy.WHITE,this.matrix=null,this.visible=!1,this.reset()}return f(e,[{key:"clone",value:function(){var t=new e;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}},{key:"reset",value:function(){this.color=16777215,this.alpha=1,this.texture=wy.WHITE,this.matrix=null,this.visible=!1}},{key:"destroy",value:function(){this.texture=null,this.matrix=null}}]),e}(),tw=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments)).width=0,e.alignment=.5,e.native=!1,e.cap=LE.BUTT,e.join=DE.MITER,e.miterLimit=10,e}return f(n,[{key:"clone",value:function(){var e=new n;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}},{key:"reset",value:function(){jm(m(n.prototype),"reset",this).call(this),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}]),n}(ew),nw={},rw=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return u(this,n),(e=t.call(this)).shader=null,e.pluginName="batch",e.currentPath=null,e.batches=[],e.batchTint=-1,e.batchDirty=-1,e.vertexData=null,e._fillStyle=new ew,e._lineStyle=new tw,e._matrix=null,e._holeMode=!1,e.state=Zm.for2d(),e._geometry=r||new JE,e._geometry.refCount++,e._transformID=-1,e._tintColor=new rm(16777215),e.blendMode=Mp.NORMAL,e}return f(n,[{key:"geometry",get:function(){return this._geometry}},{key:"clone",value:function(){return this.finishPoly(),new n(this._geometry)}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e)}},{key:"fill",get:function(){return this._fillStyle}},{key:"line",get:function(){return this._lineStyle}},{key:"lineStyle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return"number"===typeof e&&(e={width:e,color:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,alpha:arguments.length>2?arguments[2]:void 0,alignment:arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,native:arguments.length>4&&void 0!==arguments[4]&&arguments[4]}),this.lineTextureStyle(e)}},{key:"lineTextureStyle",value:function(e){var t,n={width:0,texture:wy.WHITE,color:null!==(t=e)&&void 0!==t&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LE.BUTT,join:DE.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();var r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}},{key:"startPoly",value:function(){if(this.currentPath){var e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Tg,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Tg,this.currentPath.closeStroke=!1}},{key:"finishPoly",value:function(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}},{key:"moveTo",value:function(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}},{key:"lineTo",value:function(e,t){this.currentPath||this.moveTo(0,0);var n=this.currentPath.points,r=n[n.length-2],i=n[n.length-1];return r===e&&i===t||n.push(e,t),this}},{key:"_initCurve",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.currentPath?0===this.currentPath.points.length&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}},{key:"quadraticCurveTo",value:function(e,t,n,r){this._initCurve();var i=this.currentPath.points;return 0===i.length&&this.moveTo(0,0),WE.curveTo(e,t,n,r,i),this}},{key:"bezierCurveTo",value:function(e,t,n,r,i,o){return this._initCurve(),HE.curveTo(e,t,n,r,i,o,this.currentPath.points),this}},{key:"arcTo",value:function(e,t,n,r,i){this._initCurve(e,t);var o=this.currentPath.points,a=UE.curveTo(e,t,n,r,i,o);if(a){var s=a.cx,l=a.cy,u=a.radius,c=a.startAngle,h=a.endAngle,d=a.anticlockwise;this.arc(s,l,u,c,h,d)}return this}},{key:"arc",value:function(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(r===i)return this;if(!o&&i<=r?i+=vg:o&&r<=i&&(r+=vg),0===i-r)return this;var a=e+Math.cos(r)*n,s=t+Math.sin(r)*n,l=this._geometry.closePointEps,u=this.currentPath?this.currentPath.points:null;if(u){var c=Math.abs(u[u.length-2]-a),h=Math.abs(u[u.length-1]-s);c<l&&h<l||u.push(a,s)}else this.moveTo(a,s),u=this.currentPath.points;return UE.arc(a,s,e,t,n,r,i,o,u),this}},{key:"beginFill",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return this.beginTextureFill({texture:wy.WHITE,color:e,alpha:t})}},{key:"normalizeColor",value:function(e){var t,n,r=rm.shared.setValue(null!==(t=e.color)&&void 0!==t?t:0);e.color=r.toNumber(),null!==(n=e.alpha)&&void 0!==n||(e.alpha=r.alpha)}},{key:"beginTextureFill",value:function(e){var t={texture:wy.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();var n=e.alpha>0;return n?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:n},e)):this._fillStyle.reset(),this}},{key:"endFill",value:function(){return this.finishPoly(),this._fillStyle.reset(),this}},{key:"drawRect",value:function(e,t,n,r){return this.drawShape(new xg(e,t,n,r))}},{key:"drawRoundedRect",value:function(e,t,n,r,i){return this.drawShape(new Sg(e,t,n,r,i))}},{key:"drawCircle",value:function(e,t,n){return this.drawShape(new Eg(e,t,n))}},{key:"drawEllipse",value:function(e,t,n,r){return this.drawShape(new wg(e,t,n,r))}},{key:"drawPolygon",value:function(){for(var e,t=!0,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=r[0];o.points?(t=o.closeStroke,e=o.points):e=Array.isArray(r[0])?r[0]:r;var a=new Tg(e);return a.closeStroke=t,this.drawShape(a),this}},{key:"drawShape",value:function(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}},{key:"clear",value:function(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}},{key:"isFastRect",value:function(){var e=this._geometry.graphicsData;return 1===e.length&&e[0].shape.type===yg.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}},{key:"_render",value:function(e){this.finishPoly();var t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}},{key:"_populateBatches",value:function(){var e=this._geometry,t=this.blendMode,n=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(e.points);for(var r=0;r<n;r++){var i=e.batches[r],o=i.style.color,a=new Float32Array(this.vertexData.buffer,4*i.attribStart*2,2*i.attribSize),s=new Float32Array(e.uvsFloat32.buffer,4*i.attribStart*2,2*i.attribSize),l={vertexData:a,blendMode:t,indices:new Uint16Array(e.indicesUint16.buffer,2*i.start,i.size),uvs:s,_batchRGB:rm.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[r]=l}}},{key:"_renderBatched",value:function(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(var t=0,n=this.batches.length;t<n;t++){var r=this.batches[t];r.worldAlpha=this.worldAlpha*r.alpha,e.plugins[this.pluginName].render(r)}}}},{key:"_renderDirect",value:function(e){var t=this._resolveDirectShader(e),n=this._geometry,r=this.worldAlpha,i=t.uniforms,o=n.drawCalls;i.translationMatrix=this.transform.worldTransform,rm.shared.setValue(this._tintColor).premultiply(r).toArray(i.tint),e.shader.bind(t),e.geometry.bind(n,t),e.state.set(this.state);for(var a=0,s=o.length;a<s;a++)this._renderDrawCallDirect(e,n.drawCalls[a])}},{key:"_renderDrawCallDirect",value:function(e,t){for(var n=t.texArray,r=t.type,i=t.size,o=t.start,a=n.count,s=0;s<a;s++)e.texture.bind(n.elements[s],s);e.geometry.draw(r,i,o)}},{key:"_resolveDirectShader",value:function(e){var t=this.shader,n=this.pluginName;if(!t){if(!nw[n]){for(var r=e.plugins[n].maxTextures,i=new Int32Array(r),o=0;o<r;o++)i[o]=o;var a={tint:new Float32Array([1,1,1,1]),translationMatrix:new kg,default:ny.from({uSamplers:i},!0)},s=e.plugins[n]._shader.program;nw[n]=new ry(s,a)}t=nw[n]}return t}},{key:"_calculateBounds",value:function(){this.finishPoly();var e=this._geometry;if(e.graphicsData.length){var t=e.bounds,n=t.minX,r=t.minY,i=t.maxX,o=t.maxY;this._bounds.addFrame(this.transform,n,r,i,o)}}},{key:"containsPoint",value:function(e){return this.worldTransform.applyInverse(e,n._TEMP_POINT),this._geometry.containsPoint(n._TEMP_POINT)}},{key:"calculateTints",value:function(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(var e=0;e<this.batches.length;e++){var t=this.batches[e];t._tintRGB=rm.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}},{key:"calculateVertices",value:function(){var e=this.transform._worldID;if(this._transformID!==e){this._transformID=e;for(var t=this.transform.worldTransform,n=t.a,r=t.b,i=t.c,o=t.d,a=t.tx,s=t.ty,l=this._geometry.points,u=this.vertexData,c=0,h=0;h<l.length;h+=2){var d=l[h],f=l[h+1];u[c++]=n*d+i*f+a,u[c++]=o*f+r*d+s}}}},{key:"closePath",value:function(){var e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}},{key:"setMatrix",value:function(e){return this._matrix=e,this}},{key:"beginHole",value:function(){return this.finishPoly(),this._holeMode=!0,this}},{key:"endHole",value:function(){return this.finishPoly(),this._holeMode=!1,this}},{key:"destroy",value:function(e){this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,jm(m(n.prototype),"destroy",this).call(this,e)}}]),n}(c_),iw=rw;iw.curves=FE,iw._TEMP_POINT=new bg;var ow={buildPoly:ME,buildCircle:OE,buildRectangle:RE,buildRoundedRectangle:NE,buildLine:VE,ArcUtils:UE,BezierUtils:HE,QuadraticUtils:WE,BatchPart:ZE,FILL_COMMANDS:XE,BATCH_POOL:YE,DRAW_CALL_POOL:KE},aw=function(){function e(t,n){u(this,e),this.uvBuffer=t,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}return f(e,[{key:"update",value:function(e){if(e||this._bufferUpdateId!==this.uvBuffer._updateID||this._textureUpdateId!==this.uvMatrix._updateID){this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;var t=this.uvBuffer.data;this.data&&this.data.length===t.length||(this.data=new Float32Array(t.length)),this.uvMatrix.multiplyUvs(t,this.data),this._updateID++}}}]),e}(),sw=new bg,lw=new Tg,uw=function(e){v(n,e);var t=y(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rp.TRIANGLES;return u(this,n),(o=t.call(this)).geometry=e,o.shader=r,o.state=i||Zm.for2d(),o.drawMode=a,o.start=0,o.size=0,o.uvs=null,o.indices=null,o.vertexData=new Float32Array(1),o.vertexDirty=-1,o._transformID=-1,o._roundPixels=Zp.ROUND_PIXELS,o.batchUvs=null,o}return f(n,[{key:"geometry",get:function(){return this._geometry},set:function(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,0===this._geometry.refCount&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}},{key:"uvBuffer",get:function(){return this.geometry.buffers[1]}},{key:"verticesBuffer",get:function(){return this.geometry.buffers[0]}},{key:"material",get:function(){return this.shader},set:function(e){this.shader=e}},{key:"blendMode",get:function(){return this.state.blendMode},set:function(e){this.state.blendMode=e}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}},{key:"tint",get:function(){return"tint"in this.shader?this.shader.tint:null},set:function(e){this.shader.tint=e}},{key:"tintValue",get:function(){return this.shader.tintValue}},{key:"texture",get:function(){return"texture"in this.shader?this.shader.texture:null},set:function(e){this.shader.texture=e}},{key:"_render",value:function(e){var t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Rp.TRIANGLES&&t.length<2*n.BATCHABLE_SIZE?this._renderToBatch(e):this._renderDefault(e)}},{key:"_renderDefault",value:function(e){var t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}},{key:"_renderToBatch",value:function(e){var t=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;var r=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[r]),e.plugins[r].render(this)}},{key:"calculateVertices",value:function(){var e=this.geometry.buffers[0],t=e.data,n=e._updateID;if(n!==this.vertexDirty||this._transformID!==this.transform._worldID){this._transformID=this.transform._worldID,this.vertexData.length!==t.length&&(this.vertexData=new Float32Array(t.length));for(var r=this.transform.worldTransform,i=r.a,o=r.b,a=r.c,s=r.d,l=r.tx,u=r.ty,c=this.vertexData,h=0;h<c.length/2;h++){var d=t[2*h],f=t[2*h+1];c[2*h]=i*d+a*f+l,c[2*h+1]=o*d+s*f+u}if(this._roundPixels)for(var p=Zp.RESOLUTION,v=0;v<c.length;++v)c[v]=Math.round(c[v]*p)/p;this.vertexDirty=n}}},{key:"calculateUvs",value:function(){var e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new aw(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}},{key:"_calculateBounds",value:function(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}},{key:"containsPoint",value:function(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,sw);for(var t=this.geometry.getBuffer("aVertexPosition").data,n=lw.points,r=this.geometry.getIndex().data,i=r.length,o=4===this.drawMode?3:1,a=0;a+2<i;a+=o){var s=2*r[a],l=2*r[a+1],u=2*r[a+2];if(n[0]=t[s],n[1]=t[s+1],n[2]=t[l],n[3]=t[l+1],n[4]=t[u],n[5]=t[u+1],lw.contains(sw.x,sw.y))return!0}return!1}},{key:"destroy",value:function(e){jm(m(n.prototype),"destroy",this).call(this,e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}}]),n}(c_),cw=uw;cw.BATCHABLE_SIZE=100;var hw=function(e){v(n,e);var t=y(n);function n(e,r,i){var o;u(this,n),o=t.call(this);var a=new sg(e),s=new sg(r,!0),l=new sg(i,!0,!0);return o.addAttribute("aVertexPosition",a,2,!1,Lp.FLOAT).addAttribute("aTextureCoord",s,2,!1,Lp.FLOAT).addIndex(l),o._updateId=-1,o}return f(n,[{key:"vertexDirtyId",get:function(){return this.buffers[0]._updateID}}]),n}(fg),dw=function(e){v(n,e);var t=y(n);function n(e,r){var i;u(this,n);var o={uSampler:e,alpha:1,uTextureMatrix:kg.IDENTITY,uColor:new Float32Array([1,1,1,1])};return(r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r)).uniforms&&Object.assign(o,r.uniforms),(i=t.call(this,r.program||ey.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTextureMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n"),o))._colorDirty=!1,i.uvMatrix=new By(e),i.batchable=void 0===r.program,i.pluginName=r.pluginName,i._tintColor=new rm(r.tint),i._tintRGB=i._tintColor.toLittleEndianNumber(),i._colorDirty=!0,i.alpha=r.alpha,i}return f(n,[{key:"texture",get:function(){return this.uniforms.uSampler},set:function(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!==!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}},{key:"alpha",get:function(){return this._alpha},set:function(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}},{key:"tintValue",get:function(){return this._tintColor.toNumber()}},{key:"update",value:function(){if(this._colorDirty){this._colorDirty=!1;var e=this.texture.baseTexture.alphaMode;rm.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}]),n}(ry),fw=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return u(this,n),(e=t.call(this)).segWidth=o,e.segHeight=a,e.width=r,e.height=i,e.build(),e}return f(n,[{key:"build",value:function(){for(var e=this.segWidth*this.segHeight,t=[],n=[],r=[],i=this.segWidth-1,o=this.segHeight-1,a=this.width/i,s=this.height/o,l=0;l<e;l++){var u=l%this.segWidth,c=l/this.segWidth|0;t.push(u*a,c*s),n.push(u/i,c/o)}for(var h=i*o,d=0;d<h;d++){var f=d%i,p=d/i|0,v=p*this.segWidth+f,m=p*this.segWidth+f+1,g=(p+1)*this.segWidth+f,y=(p+1)*this.segWidth+f+1;r.push(v,m,g,m,y,g)}this.buffers[0].data=new Float32Array(t),this.buffers[1].data=new Float32Array(n),this.indexBuffer.data=new Uint16Array(r),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}]),n}(hw),pw=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u(this,n),(e=t.call(this,new Float32Array(4*i.length),new Float32Array(4*i.length),new Uint16Array(6*(i.length-1)))).points=i,e._width=r,e.textureScale=o,e.build(),e}return f(n,[{key:"width",get:function(){return this._width}},{key:"build",value:function(){var e=this.points;if(e){var t=this.getBuffer("aVertexPosition"),n=this.getBuffer("aTextureCoord"),r=this.getIndex();if(!(e.length<1)){t.data.length/4!==e.length&&(t.data=new Float32Array(4*e.length),n.data=new Float32Array(4*e.length),r.data=new Uint16Array(6*(e.length-1)));var i=n.data,o=r.data;i[0]=0,i[1]=0,i[2]=0,i[3]=1;for(var a=0,s=e[0],l=this._width*this.textureScale,u=e.length,c=0;c<u;c++){var h=4*c;if(this.textureScale>0){var d=s.x-e[c].x,f=s.y-e[c].y,p=Math.sqrt(d*d+f*f);s=e[c],a+=p/l}else a=c/(u-1);i[h]=a,i[h+1]=0,i[h+2]=a,i[h+3]=1}for(var v=0,m=0;m<u-1;m++){var g=2*m;o[v++]=g,o[v++]=g+1,o[v++]=g+2,o[v++]=g+2,o[v++]=g+1,o[v++]=g+3}n.update(),r.update(),this.updateVertices()}}}},{key:"updateVertices",value:function(){var e=this.points;if(!(e.length<1)){for(var t,n=e[0],r=0,i=0,o=this.buffers[0].data,a=e.length,s=this.textureScale>0?this.textureScale*this._width/2:this._width/2,l=0;l<a;l++){var u=e[l],c=4*l;i=-((t=l<e.length-1?e[l+1]:u).x-n.x),r=t.y-n.y;var h=10*(1-l/(a-1));h>1&&(h=1);var d=Math.sqrt(r*r+i*i);d<1e-6?(r=0,i=0):(r/=d,i/=d,r*=s,i*=s),o[c]=u.x+r,o[c+1]=u.y+i,o[c+2]=u.x-r,o[c+3]=u.y-i,n=u}this.buffers[0].update()}}},{key:"update",value:function(){this.textureScale>0?this.build():this.updateVertices()}}]),n}(hw),vw=function(e){v(n,e);var t=y(n);function n(e,r,i){var o;u(this,n);var a=new fw(e.width,e.height,r,i),s=new dw(wy.WHITE);return(o=t.call(this,a,s)).texture=e,o.autoResize=!0,o}return f(n,[{key:"textureUpdated",value:function(){this._textureID=this.shader.texture._updateID;var e=this.geometry,t=this.shader.texture,n=t.width,r=t.height;!this.autoResize||e.width===n&&e.height===r||(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}},{key:"texture",get:function(){return this.shader.texture},set:function(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}},{key:"_render",value:function(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),jm(m(n.prototype),"_render",this).call(this,e)}},{key:"destroy",value:function(e){this.shader.texture.off("update",this.textureUpdated,this),jm(m(n.prototype),"destroy",this).call(this,e)}}]),n}(cw),mw=function(e){v(n,e);var t=y(n);function n(e,r,i,o,a){var s,l,c,h,d,f,p,v,m;return u(this,n),(m=t.call(this,wy.WHITE,4,4))._origWidth=e.orig.width,m._origHeight=e.orig.height,m._width=m._origWidth,m._height=m._origHeight,m._leftWidth=null!==(s=null!==r&&void 0!==r?r:null===(l=e.defaultBorders)||void 0===l?void 0:l.left)&&void 0!==s?s:10,m._rightWidth=null!==(c=null!==o&&void 0!==o?o:null===(h=e.defaultBorders)||void 0===h?void 0:h.right)&&void 0!==c?c:10,m._topHeight=null!==(d=null!==i&&void 0!==i?i:null===(f=e.defaultBorders)||void 0===f?void 0:f.top)&&void 0!==d?d:10,m._bottomHeight=null!==(p=null!==a&&void 0!==a?a:null===(v=e.defaultBorders)||void 0===v?void 0:v.bottom)&&void 0!==p?p:10,m.texture=e,m}return f(n,[{key:"textureUpdated",value:function(){this._textureID=this.shader.texture._updateID,this._refresh()}},{key:"vertices",get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e}},{key:"updateHorizontalVertices",value:function(){var e=this.vertices,t=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*t,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*t,e[25]=e[27]=e[29]=e[31]=this._height}},{key:"updateVerticalVertices",value:function(){var e=this.vertices,t=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*t,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*t,e[6]=e[14]=e[22]=e[30]=this._width}},{key:"_getMinScale",value:function(){var e=this._leftWidth+this._rightWidth,t=this._width>e?1:this._width/e,n=this._topHeight+this._bottomHeight,r=this._height>n?1:this._height/n;return Math.min(t,r)}},{key:"width",get:function(){return this._width},set:function(e){this._width=e,this._refresh()}},{key:"height",get:function(){return this._height},set:function(e){this._height=e,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(e){this._leftWidth=e,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(e){this._rightWidth=e,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(e){this._topHeight=e,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(e){this._bottomHeight=e,this._refresh()}},{key:"_refresh",value:function(){var e=this.texture,t=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var n=1/this._origWidth,r=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=n*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-n*this._rightWidth,t[9]=t[11]=t[13]=t[15]=r*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-r*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}]),n}(vw),gw=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wy.EMPTY,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;u(this,n);var l=new hw(i,o,a);l.getBuffer("aVertexPosition").static=!1;var c=new dw(r);return(e=t.call(this,l,c,null,s)).autoUpdate=!0,e}return f(n,[{key:"vertices",get:function(){return this.geometry.getBuffer("aVertexPosition").data},set:function(e){this.geometry.getBuffer("aVertexPosition").data=e}},{key:"_render",value:function(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),jm(m(n.prototype),"_render",this).call(this,e)}}]),n}(cw),yw=function(e){v(n,e);var t=y(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;u(this,n);var a=new pw(e.height,r,o),s=new dw(e);return o>0&&(e.baseTexture.wrapMode=Up.REPEAT),(i=t.call(this,a,s)).autoUpdate=!0,i}return f(n,[{key:"_render",value:function(e){var t=this.geometry;(this.autoUpdate||t._width!==this.shader.texture.height)&&(t._width=this.shader.texture.height,t.update()),jm(m(n.prototype),"_render",this).call(this,e)}}]),n}(cw),bw=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];u(this,n);return o>16384&&(o=16384),(e=t.call(this))._properties=[!1,!0,!1,!1,!1],e._maxSize=r,e._batchSize=o,e._buffers=null,e._bufferUpdateIDs=[],e._updateID=0,e.interactiveChildren=!1,e.blendMode=Mp.NORMAL,e.autoResize=a,e.roundPixels=!0,e.baseTexture=null,e.setProperties(i),e._tintColor=new rm(0),e.tintRgb=new Float32Array(3),e.tint=16777215,e}return f(n,[{key:"setProperties",value:function(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}},{key:"updateTransform",value:function(){this.displayObjectUpdateTransform()}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}},{key:"render",value:function(e){var t=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",(function(){return t.onChildrenChange(0)}))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}},{key:"onChildrenChange",value:function(e){for(var t=Math.floor(e/this._batchSize);this._bufferUpdateIDs.length<t;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[t]=++this._updateID}},{key:"dispose",value:function(){if(this._buffers){for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}},{key:"destroy",value:function(e){jm(m(n.prototype),"destroy",this).call(this,e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}]),n}(c_),_w=function(){function e(t,n,r){u(this,e),this.geometry=new fg,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0;i<t.length;++i){var o=t[i];o={attributeName:o.attributeName,size:o.size,uploadFunction:o.uploadFunction,type:o.type||Lp.FLOAT,offset:o.offset},n[i]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return f(e,[{key:"initBuffers",value:function(){var e=this.geometry,t=0;this.indexBuffer=new sg(pm(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(var n=0;n<this.dynamicProperties.length;++n){var r=this.dynamicProperties[n];r.offset=t,t+=r.size,this.dynamicStride+=r.size}var i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new sg(this.dynamicData,!1,!1);var o=0;this.staticStride=0;for(var a=0;a<this.staticProperties.length;++a){var s=this.staticProperties[a];s.offset=o,o+=s.size,this.staticStride+=s.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=new sg(this.staticData,!0,!1);for(var u=0;u<this.dynamicProperties.length;++u){var c=this.dynamicProperties[u];e.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===Lp.UNSIGNED_BYTE,c.type,4*this.dynamicStride,4*c.offset)}for(var h=0;h<this.staticProperties.length;++h){var d=this.staticProperties[h];e.addAttribute(d.attributeName,this.staticBuffer,0,d.type===Lp.UNSIGNED_BYTE,d.type,4*this.staticStride,4*d.offset)}}},{key:"uploadDynamic",value:function(e,t,n){for(var r=0;r<this.dynamicProperties.length;r++){var i=this.dynamicProperties[r];i.uploadFunction(e,t,n,i.type===Lp.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,i.offset)}this.dynamicBuffer._updateID++}},{key:"uploadStatic",value:function(e,t,n){for(var r=0;r<this.staticProperties.length;r++){var i=this.staticProperties[r];i.uploadFunction(e,t,n,i.type===Lp.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,i.offset)}this.staticBuffer._updateID++}},{key:"destroy",value:function(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}]),e}(),xw=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).shader=null,r.properties=null,r.tempMatrix=new kg,r.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:r.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:r.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:r.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:r.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:Lp.UNSIGNED_BYTE,uploadFunction:r.uploadTint,offset:0}],r.shader=ry.from("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 translationMatrix;\nuniform vec4 uColor;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nvoid main(void){\n    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n\n    vec2 v = vec2(x, y);\n    v = v + aPositionCoord;\n\n    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vColor = aColor * uColor;\n}\n","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void){\n    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n    gl_FragColor = color;\n}",{}),r.state=Zm.for2d(),r}return f(n,[{key:"render",value:function(e){var t=e.children,n=e._maxSize,r=e._batchSize,i=this.renderer,o=t.length;if(0!==o){o>n&&!e.autoResize&&(o=n);var a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));var s=t[0]._texture.baseTexture,l=s.alphaMode>0;this.state.blendMode=um(e.blendMode,l),i.state.set(this.state);var u=i.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(i.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=rm.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,l).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=s,this.renderer.shader.bind(this.shader);for(var h=!1,d=0,f=0;d<o;d+=r,f+=1){var p=o-d;p>r&&(p=r),f>=a.length&&a.push(this._generateOneMoreBuffer(e));var v=a[f];v.uploadDynamic(t,d,p);var m=e._bufferUpdateIDs[f]||0;(h=h||v._updateID<m)&&(v._updateID=e._updateID,v.uploadStatic(t,d,p)),i.geometry.bind(v.geometry),u.drawElements(u.TRIANGLES,6*p,u.UNSIGNED_SHORT,0)}}}},{key:"generateBuffers",value:function(e){for(var t=[],n=e._maxSize,r=e._batchSize,i=e._properties,o=0;o<n;o+=r)t.push(new _w(this.properties,i,r));return t}},{key:"_generateOneMoreBuffer",value:function(e){var t=e._batchSize,n=e._properties;return new _w(this.properties,n,t)}},{key:"uploadVertices",value:function(e,t,n,r,i,o){for(var a=0,s=0,l=0,u=0,c=0;c<n;++c){var h=e[t+c],d=h._texture,f=h.scale.x,p=h.scale.y,v=d.trim,m=d.orig;v?(a=(s=v.x-h.anchor.x*m.width)+v.width,l=(u=v.y-h.anchor.y*m.height)+v.height):(a=m.width*(1-h.anchor.x),s=m.width*-h.anchor.x,l=m.height*(1-h.anchor.y),u=m.height*-h.anchor.y),r[o]=s*f,r[o+1]=u*p,r[o+i]=a*f,r[o+i+1]=u*p,r[o+2*i]=a*f,r[o+2*i+1]=l*p,r[o+3*i]=s*f,r[o+3*i+1]=l*p,o+=4*i}}},{key:"uploadPosition",value:function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].position;r[o]=s.x,r[o+1]=s.y,r[o+i]=s.x,r[o+i+1]=s.y,r[o+2*i]=s.x,r[o+2*i+1]=s.y,r[o+3*i]=s.x,r[o+3*i+1]=s.y,o+=4*i}}},{key:"uploadRotation",value:function(e,t,n,r,i,o){for(var a=0;a<n;a++){var s=e[t+a].rotation;r[o]=s,r[o+i]=s,r[o+2*i]=s,r[o+3*i]=s,o+=4*i}}},{key:"uploadUvs",value:function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a]._texture._uvs;s?(r[o]=s.x0,r[o+1]=s.y0,r[o+i]=s.x1,r[o+i+1]=s.y1,r[o+2*i]=s.x2,r[o+2*i+1]=s.y2,r[o+3*i]=s.x3,r[o+3*i+1]=s.y3,o+=4*i):(r[o]=0,r[o+1]=0,r[o+i]=0,r[o+i+1]=0,r[o+2*i]=0,r[o+2*i+1]=0,r[o+3*i]=0,r[o+3*i+1]=0,o+=4*i)}}},{key:"uploadTint",value:function(e,t,n,r,i,o){for(var a=0;a<n;++a){var s=e[t+a],l=rm.shared.setValue(s._tintRGB).toPremultiplied(s.alpha,s.texture.baseTexture.alphaMode>0);r[o]=l,r[o+i]=l,r[o+2*i]=l,r[o+3*i]=l,o+=4*i}}},{key:"destroy",value:function(){jm(m(n.prototype),"destroy",this).call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}]),n}(ay);xw.extension={name:"particle",type:zm.RendererPlugin},Wm.add(xw);var Ew=function(e){return e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e}(Ew||{}),ww={willReadFrequently:!0},Tw=function(){function e(t,n,r,i,o,a,s,l,c){u(this,e),this.text=t,this.style=n,this.width=r,this.height=i,this.lines=o,this.lineWidths=a,this.lineHeight=s,this.maxLineWidth=l,this.fontProperties=c}return f(e,null,[{key:"experimentalLetterSpacingSupported",get:function(){var t=e._experimentalLetterSpacingSupported;if(void 0!==t){var n=Zp.ADAPTER.getCanvasRenderingContext2D().prototype;t=e._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return t}},{key:"measureText",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e._canvas;r=void 0===r||null===r?n.wordWrap:r;var o=n.toFontString(),a=e.measureFont(o);0===a.fontSize&&(a.fontSize=n.fontSize,a.ascent=n.fontSize);var s=i.getContext("2d",ww);s.font=o;for(var l=(r?e.wordWrap(t,n,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length),c=0,h=0;h<l.length;h++){var d=e._measureText(l[h],n.letterSpacing,s);u[h]=d,c=Math.max(c,d)}var f=c+n.strokeThickness;n.dropShadow&&(f+=n.dropShadowDistance);var p=n.lineHeight||a.fontSize+n.strokeThickness,v=Math.max(p,a.fontSize+2*n.strokeThickness)+(l.length-1)*(p+n.leading);return n.dropShadow&&(v+=n.dropShadowDistance),new e(t,n,f,v,l,u,p+n.leading,c,a)}},{key:"_measureText",value:function(t,n,r){var i=!1;e.experimentalLetterSpacingSupported&&(e.experimentalLetterSpacing?(r.letterSpacing="".concat(n,"px"),r.textLetterSpacing="".concat(n,"px"),i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));var o=r.measureText(t).width;return o>0&&(i?o-=n:o+=(e.graphemeSegmenter(t).length-1)*n),o}},{key:"wordWrap",value:function(t,n){for(var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e._canvas).getContext("2d",ww),i=0,o="",a="",s=Object.create(null),l=n.letterSpacing,u=n.whiteSpace,c=e.collapseSpaces(u),h=e.collapseNewlines(u),d=!c,f=n.wordWrapWidth+l,p=e.tokenize(t),v=0;v<p.length;v++){var m=p[v];if(e.isNewline(m)){if(!h){a+=e.addLine(o),d=!c,o="",i=0;continue}m=" "}if(c){var g=e.isBreakingSpace(m),y=e.isBreakingSpace(o[o.length-1]);if(g&&y)continue}var b=e.getFromCache(m,l,s,r);if(b>f)if(""!==o&&(a+=e.addLine(o),o="",i=0),e.canBreakWords(m,n.breakWords))for(var _=e.wordWrapSplit(m),x=0;x<_.length;x++){for(var E=_[x],w=E,T=1;_[x+T];){var S=_[x+T];if(e.canBreakChars(w,S,m,x,n.breakWords))break;E+=S,w=S,T++}x+=T-1;var k=e.getFromCache(E,l,s,r);k+i>f&&(a+=e.addLine(o),d=!1,o="",i=0),o+=E,i+=k}else{o.length>0&&(a+=e.addLine(o),o="",i=0);var C=v===p.length-1;a+=e.addLine(m,!C),d=!1,o="",i=0}else b+i>f&&(d=!1,a+=e.addLine(o),o="",i=0),(o.length>0||!e.isBreakingSpace(m)||d)&&(o+=m,i+=b)}return a+=e.addLine(o,!1)}},{key:"addLine",value:function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=e.trimRight(t),t=n?"".concat(t,"\n"):t}},{key:"getFromCache",value:function(t,n,r,i){var o=r[t];return"number"!==typeof o&&(o=e._measureText(t,n,i)+n,r[t]=o),o}},{key:"collapseSpaces",value:function(e){return"normal"===e||"pre-line"===e}},{key:"collapseNewlines",value:function(e){return"normal"===e}},{key:"trimRight",value:function(t){if("string"!==typeof t)return"";for(var n=t.length-1;n>=0;n--){var r=t[n];if(!e.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}},{key:"isNewline",value:function(t){return"string"===typeof t&&e._newlines.includes(t.charCodeAt(0))}},{key:"isBreakingSpace",value:function(t,n){return"string"===typeof t&&e._breakingSpaces.includes(t.charCodeAt(0))}},{key:"tokenize",value:function(t){var n=[],r="";if("string"!==typeof t)return n;for(var i=0;i<t.length;i++){var o=t[i],a=t[i+1];e.isBreakingSpace(o,a)||e.isNewline(o)?(""!==r&&(n.push(r),r=""),n.push(o)):r+=o}return""!==r&&n.push(r),n}},{key:"canBreakWords",value:function(e,t){return t}},{key:"canBreakChars",value:function(e,t,n,r,i){return!0}},{key:"wordWrapSplit",value:function(t){return e.graphemeSegmenter(t)}},{key:"measureFont",value:function(t){if(e._fonts[t])return e._fonts[t];var n={ascent:0,descent:0,fontSize:0},r=e._canvas,i=e._context;i.font=t;var o=e.METRICS_STRING+e.BASELINE_SYMBOL,a=Math.ceil(i.measureText(o).width),s=Math.ceil(i.measureText(e.BASELINE_SYMBOL).width),l=Math.ceil(e.HEIGHT_MULTIPLIER*s);if(s=s*e.BASELINE_MULTIPLIER|0,0===a||0===l)return e._fonts[t]=n,n;r.width=a,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,a,l),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,s);var u=i.getImageData(0,0,a,l).data,c=u.length,h=4*a,d=0,f=0,p=!1;for(d=0;d<s;++d){for(var v=0;v<h;v+=4)if(255!==u[f+v]){p=!0;break}if(p)break;f+=h}for(n.ascent=s-d,f=c-h,p=!1,d=l;d>s;--d){for(var m=0;m<h;m+=4)if(255!==u[f+m]){p=!0;break}if(p)break;f-=h}return n.descent=d-s,n.fontSize=n.ascent+n.descent,e._fonts[t]=n,n}},{key:"clearMetrics",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t?delete e._fonts[t]:e._fonts={}}},{key:"_canvas",get:function(){if(!e.__canvas){var t;try{var n=new OffscreenCanvas(0,0),r=n.getContext("2d",ww);if(null!==r&&void 0!==r&&r.measureText)return e.__canvas=n,n;t=Zp.ADAPTER.createCanvas()}catch(i){t=Zp.ADAPTER.createCanvas()}t.width=t.height=10,e.__canvas=t}return e.__canvas}},{key:"_context",get:function(){return e.__context||(e.__context=e._canvas.getContext("2d",ww)),e.__context}}]),e}(),Sw=Tw;Sw.METRICS_STRING="|\xc9q\xc5",Sw.BASELINE_SYMBOL="M",Sw.BASELINE_MULTIPLIER=1.4,Sw.HEIGHT_MULTIPLIER=2,Sw.graphemeSegmenter=function(){var e;if("function"===typeof(null===(e=Intl)||void 0===e?void 0:e.Segmenter)){var t=new Intl.Segmenter;return function(e){return Pe(t.segment(e)).map((function(e){return e.segment}))}}return function(e){return Pe(e)}}(),Sw.experimentalLetterSpacing=!1,Sw._fonts={},Sw._newlines=[10,13],Sw._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];var kw=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Cw=function(){function e(t){u(this,e),this.styleID=0,this.reset(),Ow(this,t,t)}return f(e,[{key:"clone",value:function(){var t={};return Ow(t,this,e.defaultStyle),new e(t)}},{key:"reset",value:function(){Ow(this,e.defaultStyle,e.defaultStyle)}},{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(e){var t=Iw(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(e){var t=Iw(e);this._fill!==t&&(this._fill=t,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(e){(function(e,t){if(!Array.isArray(e)||!Array.isArray(t))return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0})(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(e){this._leading!==e&&(this._leading=e,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(e){this._padding!==e&&(this._padding=e,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(e){var t=Iw(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(e){this._trim!==e&&(this._trim=e,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}},{key:"toFontString",value:function(){var e="number"===typeof this.fontSize?"".concat(this.fontSize,"px"):this.fontSize,t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(var n=t.length-1;n>=0;n--){var r=t[n].trim();/([\"\'])[^\'\"]+\1/.test(r)||kw.includes(r)||(r='"'.concat(r,'"')),t[n]=r}return"".concat(this.fontStyle," ").concat(this.fontVariant," ").concat(this.fontWeight," ").concat(e," ").concat(t.join(","))}}]),e}(),Aw=Cw;function Iw(e){var t=rm.shared;return Array.isArray(e)?e.map((function(e){return t.setValue(e).toHex()})):t.setValue(e).toHex()}function Ow(e,t,n){for(var r in n)Array.isArray(t[r])?e[r]=t[r].slice():e[r]=t[r]}Aw.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Ew.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};var Pw={texture:!0,children:!1,baseTexture:!0},Mw=function(e){v(n,e);var t=y(n);function n(e,r,i){var o,a;u(this,n);var s=!1;i||(i=Zp.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;var l=wy.from(i);return l.orig=new xg,l.trim=new xg,(a=t.call(this,l))._ownCanvas=s,a.canvas=i,a.context=i.getContext("2d",{willReadFrequently:!0}),a._resolution=null!==(o=n.defaultResolution)&&void 0!==o?o:Zp.RESOLUTION,a._autoResolution=n.defaultAutoResolution,a._text=null,a._style=null,a._styleListener=null,a._font="",a.text=e,a.style=r,a.localStyleID=-1,a}return f(n,[{key:"updateText",value:function(e){var t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),this.dirty||!e){this._font=this._style.toFontString();var n,r,i=this.context,o=Sw.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),a=o.width,s=o.height,l=o.lines,u=o.lineHeight,c=o.lineWidths,h=o.maxLineWidth,d=o.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,a)+2*t.padding)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+2*t.padding)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;for(var f=t.dropShadow?2:1,p=0;p<f;++p){var v=t.dropShadow&&0===p,m=v?Math.ceil(Math.max(1,s)+2*t.padding):0,g=m*this._resolution;if(v){i.fillStyle="black",i.strokeStyle="black";var y=t.dropShadowColor,b=t.dropShadowBlur*this._resolution,_=t.dropShadowDistance*this._resolution;i.shadowColor=rm.shared.setValue(y).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=b,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*_,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*_+g}else i.fillStyle=this._generateFillStyle(t,l,o),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;var x=(u-d.fontSize)/2;u-d.fontSize<0&&(x=0);for(var E=0;E<l.length;E++)n=t.strokeThickness/2,r=t.strokeThickness/2+E*u+d.ascent+x,"right"===t.align?n+=h-c[E]:"center"===t.align&&(n+=(h-c[E])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(l[E],n+t.padding,r+t.padding-m,!0),t.fill&&this.drawLetterSpacing(l[E],n+t.padding,r+t.padding-m)}this.updateTexture()}}},{key:"drawLetterSpacing",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this._style.letterSpacing,o=!1;if(Sw.experimentalLetterSpacingSupported&&(Sw.experimentalLetterSpacing?(this.context.letterSpacing="".concat(i,"px"),this.context.textLetterSpacing="".concat(i,"px"),o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),0===i||o)r?this.context.strokeText(e,t,n):this.context.fillText(e,t,n);else for(var a=t,s=Sw.graphemeSegmenter(e),l=this.context.measureText(e).width,u=0,c=0;c<s.length;++c){var h=s[c];r?this.context.strokeText(h,a,n):this.context.fillText(h,a,n);for(var d="",f=c+1;f<s.length;++f)d+=s[f];a+=l-(u=this.context.measureText(d).width)+i,l=u}}},{key:"updateTexture",value:function(){var e=this.canvas;if(this._style.trim){var t=Fm(e);t.data&&(e.width=t.width,e.height=t.height,this.context.putImageData(t.data,0,0))}var n=this._texture,r=this._style,i=r.trim?0:r.padding,o=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-2*i,n.orig.height=n._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),jm(m(n.prototype),"_render",this).call(this,e)}},{key:"updateTransform",value:function(){this.updateText(!0),jm(m(n.prototype),"updateTransform",this).call(this)}},{key:"getBounds",value:function(e,t){return this.updateText(!0),-1===this._textureID&&(e=!1),jm(m(n.prototype),"getBounds",this).call(this,e,t)}},{key:"getLocalBounds",value:function(e){return this.updateText(!0),jm(m(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"_calculateBounds",value:function(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}},{key:"_generateFillStyle",value:function(e,t,n){var r,i=e.fill;if(!Array.isArray(i))return i;if(1===i.length)return i[0];var o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,s=this.canvas.width/this._resolution-o-2*a,l=this.canvas.height/this._resolution-o-2*a,u=i.slice(),c=e.fillGradientStops.slice();if(!c.length)for(var h=u.length+1,d=1;d<h;++d)c.push(d/h);if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),e.fillGradientType===Ew.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,a,s/2,l+a);for(var f=n.fontProperties.fontSize+e.strokeThickness,p=0;p<t.length;p++){var v=n.lineHeight*(p-1)+f,m=n.lineHeight*p,g=m;p>0&&v>m&&(g=(m+v)/2);var y=m+f,b=n.lineHeight*(p+1),_=y;p+1<t.length&&b<y&&(_=(y+b)/2);for(var x=(_-g)/l,E=0;E<u.length;E++){var w=0;w="number"===typeof c[E]?c[E]:E/u.length;var T=Math.min(1,Math.max(0,g/l+w*x));T=Number(T.toFixed(5)),r.addColorStop(T,u[E])}}}else{r=this.context.createLinearGradient(a,l/2,s+a,l/2);for(var S=u.length+1,k=1,C=0;C<u.length;C++){var A=void 0;A="number"===typeof c[C]?c[C]:k/S,r.addColorStop(A,u[C]),k++}}return r}},{key:"destroy",value:function(e){"boolean"===typeof e&&(e={children:e}),e=Object.assign({},Pw,e),jm(m(n.prototype),"destroy",this).call(this,e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}},{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){this.updateText(!0);var t=Em(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){this.updateText(!0);var t=Em(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){e=e||{},this._style=e instanceof Aw?e:new Aw(e),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(e){e=String(null===e||void 0===e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}}],[{key:"experimentalLetterSpacing",get:function(){return Sw.experimentalLetterSpacing},set:function(e){Tv("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Sw.experimentalLetterSpacing=e}}]),n}(f_),Rw=Mw;Rw.defaultAutoResolution=!0;var Nw=function(){function e(t){u(this,e),this.maxItemsPerFrame=t,this.itemsLeft=0}return f(e,[{key:"beginFrame",value:function(){this.itemsLeft=this.maxItemsPerFrame}},{key:"allowedToUpload",value:function(){return this.itemsLeft-- >0}}]),e}();function Dw(e,t){var n,r=!1;if(null!==e&&void 0!==e&&null!==(n=e._textures)&&void 0!==n&&n.length)for(var i=0;i<e._textures.length;i++)if(e._textures[i]instanceof wy){var o=e._textures[i].baseTexture;t.includes(o)||(t.push(o),r=!0)}return r}function Lw(e,t){if(e.baseTexture instanceof ig){var n=e.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function Fw(e,t){if(e._texture&&e._texture instanceof wy){var n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function Bw(e,t){return t instanceof Rw&&(t.updateText(!0),!0)}function Uw(e,t){if(t instanceof Aw){var n=t.toFontString();return Sw.measureFont(n),!0}return!1}function Hw(e,t){if(e instanceof Rw){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);var n=e._texture.baseTexture;return t.includes(n)||t.push(n),!0}return!1}function jw(e,t){return e instanceof Aw&&(t.includes(e)||t.push(e),!0)}var zw=function(){function e(t){var n=this;u(this,e),this.limiter=new Nw(e.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){n.queue&&n.prepareItems()},this.registerFindHook(Hw),this.registerFindHook(jw),this.registerFindHook(Dw),this.registerFindHook(Lw),this.registerFindHook(Fw),this.registerUploadHook(Bw),this.registerUploadHook(Uw)}return f(e,[{key:"upload",value:function(e){var t=this;return new Promise((function(n){e&&t.add(e),t.queue.length?(t.completes.push(n),t.ticking||(t.ticking=!0,Nb.system.addOnce(t.tick,t,Pb.UTILITY))):n()}))}},{key:"tick",value:function(){setTimeout(this.delayedTick,0)}},{key:"prepareItems",value:function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var e=this.queue[0],t=!1;if(e&&!e._destroyed)for(var n=0,r=this.uploadHooks.length;n<r;n++)if(this.uploadHooks[n](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}t||this.queue.shift()}if(this.queue.length)Nb.system.addOnce(this.tick,this,Pb.UTILITY);else{this.ticking=!1;var i=this.completes.slice(0);this.completes.length=0;for(var o=0,a=i.length;o<a;o++)i[o]()}}},{key:"registerFindHook",value:function(e){return e&&this.addHooks.push(e),this}},{key:"registerUploadHook",value:function(e){return e&&this.uploadHooks.push(e),this}},{key:"add",value:function(e){for(var t=0,n=this.addHooks.length;t<n&&!this.addHooks[t](e,this.queue);t++);if(e instanceof c_)for(var r=e.children.length-1;r>=0;r--)this.add(e.children[r]);return this}},{key:"destroy",value:function(){this.ticking&&Nb.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}}]),e}(),Vw=zw;function Gw(e,t){return t instanceof ig&&(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0)}function Ww(e,t){if(!(t instanceof iw))return!1;var n=t.geometry;t.finishPoly(),n.updateBatches();for(var r=n.batches,i=0;i<r.length;i++){var o=r[i].style.texture;o&&Gw(e,o.baseTexture)}return n.batchable||e.geometry.bind(n,t._resolveDirectShader(e)),!0}function Xw(e,t){return e instanceof iw&&(t.push(e),!0)}Vw.uploadsPerFrame=4,Object.defineProperties(Zp,{UPLOADS_PER_FRAME:{get:function(){return Vw.uploadsPerFrame},set:function(e){Tv("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Vw.uploadsPerFrame=e}}});var Yw=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).uploadHookHelper=r.renderer,r.registerFindHook(Xw),r.registerUploadHook(Gw),r.registerUploadHook(Ww),r}return f(n)}(Vw);Yw.extension={name:"prepare",type:zm.RendererSystem},Wm.add(Yw);var Kw=function(){function e(t){u(this,e),this.maxMilliseconds=t,this.frameStart=0}return f(e,[{key:"beginFrame",value:function(){this.frameStart=Date.now()}},{key:"allowedToUpload",value:function(){return Date.now()-this.frameStart<this.maxMilliseconds}}]),e}(),qw=function(e){v(n,e);var t=y(n);function n(e){var r,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u(this,n),(r=t.call(this,e[0]instanceof wy?e[0]:e[0].texture))._textures=null,r._durations=null,r._autoUpdate=i,r._isConnectedToTicker=!1,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r._playing=!1,r._previousFrame=null,r.textures=e,r}return f(n,[{key:"stop",value:function(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Nb.shared.remove(this.update,this),this._isConnectedToTicker=!1))}},{key:"play",value:function(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Nb.shared.add(this.update,this,Pb.HIGH),this._isConnectedToTicker=!0))}},{key:"gotoAndStop",value:function(e){this.stop(),this.currentFrame=e}},{key:"gotoAndPlay",value:function(e){this.currentFrame=e,this.play()}},{key:"update",value:function(e){if(this._playing){var t=this.animationSpeed*e,n=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=t/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var i=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*i,this._currentTime+=i;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=t;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):n!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<n||this.animationSpeed<0&&this.currentFrame>n)&&this.onLoop(),this.updateTexture())}}},{key:"updateTexture",value:function(){var e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}},{key:"destroy",value:function(e){this.stop(),jm(m(n.prototype),"destroy",this).call(this,e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}},{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(e){if(e[0]instanceof wy)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(var t=0;t<e.length;t++)this._textures.push(e[t].texture),this._durations.push(e[t].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e},set:function(e){if(e<0||e>this.totalFrames-1)throw new Error("[AnimatedSprite]: Invalid frame index value ".concat(e,", expected to be between 0 and totalFrames ").concat(this.totalFrames,"."));var t=this.currentFrame;this._currentTime=e,t!==this.currentFrame&&this.updateTexture()}},{key:"playing",get:function(){return this._playing}},{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Nb.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Nb.shared.add(this.update,this),this._isConnectedToTicker=!0))}}],[{key:"fromFrames",value:function(e){for(var t=[],r=0;r<e.length;++r)t.push(wy.from(e[r]));return new n(t)}},{key:"fromImages",value:function(e){for(var t=[],r=0;r<e.length;++r)t.push(wy.from(e[r]));return new n(t)}}]),n}(f_),Zw=new bg,$w=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;return u(this,n),(r=t.call(this,e)).tileTransform=new Fg,r._width=i,r._height=o,r.uvMatrix=r.texture.uvMatrix||new By(e),r.pluginName="tilingSprite",r.uvRespectAnchor=!1,r}return f(n,[{key:"clampMargin",get:function(){return this.uvMatrix.clampMargin},set:function(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(e){this.tileTransform.scale.copyFrom(e)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(e){this.tileTransform.position.copyFrom(e)}},{key:"_onTextureUpdate",value:function(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}},{key:"_render",value:function(e){var t=this._texture;t&&t.valid&&(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}},{key:"_calculateBounds",value:function(){var e=this._width*-this._anchor._x,t=this._height*-this._anchor._y,n=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,t,n,r)}},{key:"getLocalBounds",value:function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new xg),e=this._localBoundsRect),this._bounds.getRectangle(e)):jm(m(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"containsPoint",value:function(e){this.worldTransform.applyInverse(e,Zw);var t=this._width,n=this._height,r=-t*this.anchor._x;if(Zw.x>=r&&Zw.x<r+t){var i=-n*this.anchor._y;if(Zw.y>=i&&Zw.y<i+n)return!0}return!1}},{key:"destroy",value:function(e){jm(m(n.prototype),"destroy",this).call(this,e),this.tileTransform=null,this.uvMatrix=null}},{key:"width",get:function(){return this._width},set:function(e){this._width=e}},{key:"height",get:function(){return this._height},set:function(e){this._height=e}}],[{key:"from",value:function(e,t){return new n(e instanceof wy?e:wy.from(e,t),t.width,t.height)}}]),n}(f_),Qw="#version 100\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n",Jw=new kg,eT=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),r=t.call(this,e),e.runners.contextChange.add(g(r)),r.quad=new Cy,r.state=Zm.for2d(),r}return f(n,[{key:"contextChange",value:function(){var e=this.renderer,t={globals:e.globalUniforms};this.simpleShader=ry.from(Qw,"#version 100\n#define SHADER_NAME Tiling-Sprite-Simple-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 texSample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = texSample * uColor;\n}\n",t),this.shader=e.context.webGLVersion>1?ry.from("#version 300 es\n#define SHADER_NAME Tiling-Sprite-300\n\nprecision lowp float;\n\nin vec2 aVertexPosition;\nin vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nout vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","#version 300 es\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nin vec2 vTextureCoord;\n\nout vec4 fragmentColor;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0\n\n    fragmentColor = texSample * uColor;\n}\n",t):ry.from(Qw,"#version 100\n#ifdef GL_EXT_shader_texture_lod\n    #extension GL_EXT_shader_texture_lod : enable\n#endif\n#define SHADER_NAME Tiling-Sprite-100\n\nprecision lowp float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    vec2 unclamped = coord;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    #ifdef GL_EXT_shader_texture_lod\n        vec4 texSample = unclamped == coord\n            ? texture2D(uSampler, coord) \n            : texture2DLodEXT(uSampler, coord, 0);\n    #else\n        vec4 texSample = texture2D(uSampler, coord);\n    #endif\n\n    gl_FragColor = texSample * uColor;\n}\n",t)}},{key:"render",value:function(e){var t=this.renderer,n=this.quad,r=n.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);var i=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;(r=n.uvs)[0]=r[6]=-i,r[1]=r[3]=-o,r[2]=r[4]=1-i,r[5]=r[7]=1-o,n.invalidate();var a=e._texture,s=a.baseTexture,l=s.alphaMode>0,u=e.tileTransform.localTransform,c=e.uvMatrix,h=s.isPowerOfTwo&&a.frame.width===s.width&&a.frame.height===s.height;h&&(s._glTextures[t.CONTEXT_UID]?h=s.wrapMode!==Up.CLAMP:s.wrapMode===Up.CLAMP&&(s.wrapMode=Up.REPEAT));var d=h?this.simpleShader:this.shader,f=a.width,p=a.height,v=e._width,m=e._height;Jw.set(u.a*f/v,u.b*f/m,u.c*p/v,u.d*p/m,u.tx/v,u.ty/m),Jw.invert(),h?Jw.prepend(c.mapCoord):(d.uniforms.uMapCoord=c.mapCoord.toArray(!0),d.uniforms.uClampFrame=c.uClampFrame,d.uniforms.uClampOffset=c.uClampOffset),d.uniforms.uTransform=Jw.toArray(!0),d.uniforms.uColor=rm.shared.setValue(e.tint).premultiply(e.worldAlpha,l).toArray(d.uniforms.uColor),d.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),d.uniforms.uSampler=a,t.shader.bind(d),t.geometry.bind(n),this.state.blendMode=um(e.blendMode,l),t.state.set(this.state),t.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}]),n}(ay);eT.extension={name:"tilingSprite",type:zm.RendererPlugin},Wm.add(eT);var tT=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;u(this,e),this.linkedSheets=[],this._texture=t instanceof wy?t:null,this.baseTexture=t instanceof ig?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=n;var i=this.baseTexture.resource;this.resolution=this._updateResolution(r||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return f(e,[{key:"_updateResolution",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this.data.meta.scale,n=Hm(e,null);return null===n&&(n=parseFloat(null!==t&&void 0!==t?t:"1")),1!==n&&this.baseTexture.setResolution(n),n}},{key:"parse",value:function(){var t=this;return new Promise((function(n){t._callback=n,t._batchIndex=0,t._frameKeys.length<=e.BATCH_SIZE?(t._processFrames(0),t._processAnimations(),t._parseComplete()):t._nextBatch()}))}},{key:"_processFrames",value:function(t){for(var n=t,r=e.BATCH_SIZE;n-t<r&&n<this._frameKeys.length;){var i=this._frameKeys[n],o=this._frames[i],a=o.frame;if(a){var s=null,l=null,u=!1!==o.trimmed&&o.sourceSize?o.sourceSize:o.frame,c=new xg(0,0,Math.floor(u.w)/this.resolution,Math.floor(u.h)/this.resolution);s=o.rotated?new xg(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):new xg(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),!1!==o.trimmed&&o.spriteSourceSize&&(l=new xg(Math.floor(o.spriteSourceSize.x)/this.resolution,Math.floor(o.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[i]=new wy(this.baseTexture,s,c,l,o.rotated?2:0,o.anchor,o.borders),wy.addToCache(this.textures[i],i)}n++}}},{key:"_processAnimations",value:function(){var e=this.data.animations||{};for(var t in e){this.animations[t]=[];for(var n=0;n<e[t].length;n++){var r=e[t][n];this.animations[t].push(this.textures[r])}}}},{key:"_parseComplete",value:function(){var e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}},{key:"_nextBatch",value:function(){var t=this;this._processFrames(this._batchIndex*e.BATCH_SIZE),this._batchIndex++,setTimeout((function(){t._batchIndex*e.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())}),0)}},{key:"destroy",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var n in this.textures)this.textures[n].destroy();(this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t)&&(null===(e=this._texture)||void 0===e||e.destroy(),this.baseTexture.destroy());this._texture=null,this.baseTexture=null,this.linkedSheets=[]}}]),e}(),nT=tT;nT.BATCH_SIZE=1e3;var rT=["jpg","png","jpeg","avif","webp"];function iT(e,t,n){var r={};if(e.forEach((function(e){r[e]=t})),Object.keys(t.textures).forEach((function(e){r[e]=t.textures[e]})),!n){var i=Ev.dirname(e[0]);t.linkedSheets.forEach((function(e,n){var o=iT(["".concat(i,"/").concat(t.data.meta.related_multi_packs[n])],e,!0);Object.assign(r,o)}))}return r}var oT={extension:zm.Asset,cache:{test:function(e){return e instanceof nT},getCacheableAssets:function(e,t){return iT(e,t,!1)}},resolver:{test:function(e){var t=e.split("?")[0].split("."),n=t.pop(),r=t.pop();return"json"===n&&rT.includes(r)},parse:function(e){var t,n,r=e.split(".");return{resolution:parseFloat(null!==(t=null===(n=Zp.RETINA_PREFIX.exec(e))||void 0===n?void 0:n[1])&&void 0!==t?t:"1"),format:r[r.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:zm.LoadParser,priority:ex.Normal},testParse:function(e,t){return Ee(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",".json"===Ev.extname(t.src).toLowerCase()&&!!e.frames);case 1:case"end":return n.stop()}}),n)})))()},parse:function(e,t,n){return Ee(_e().mark((function r(){var i,o,a,s,l,u,c,h,d,f,p,v,m,g;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return(o=Ev.dirname(t.src))&&o.lastIndexOf("/")!==o.length-1&&(o+="/"),a=o+e.meta.image,a=Bx(a,t.src),r.next=6,n.load([a]);case 6:return s=r.sent,l=s[a],u=new nT(l.baseTexture,e,t.src),r.next=11,u.parse();case 11:if(c=null===e||void 0===e||null===(i=e.meta)||void 0===i?void 0:i.related_multi_packs,!Array.isArray(c)){r.next=41;break}h=[],d=wb(c),r.prev=15,d.s();case 17:if((f=d.n()).done){r.next=28;break}if("string"===typeof(v=f.value)){r.next=21;break}return r.abrupt("continue",26);case 21:if(m=o+v,null===(p=t.data)||void 0===p||!p.ignoreMultiPack){r.next=24;break}return r.abrupt("continue",26);case 24:m=Bx(m,t.src),h.push(n.load({src:m,data:{ignoreMultiPack:!0}}));case 26:r.next=17;break;case 28:r.next=33;break;case 30:r.prev=30,r.t0=r.catch(15),d.e(r.t0);case 33:return r.prev=33,d.f(),r.finish(33);case 36:return r.next=38,Promise.all(h);case 38:g=r.sent,u.linkedSheets=g,g.forEach((function(e){e.linkedSheets=[u].concat(u.linkedSheets.filter((function(t){return t!==e})))}));case 41:return r.abrupt("return",u);case 42:case"end":return r.stop()}}),r,null,[[15,30,33,36]])})))()},unload:function(e){e.destroy(!0)}}};Wm.add(oT);var aT=f((function e(){u(this,e),this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]})),sT=function(){function e(){u(this,e)}return f(e,null,[{key:"test",value:function(e){return"string"===typeof e&&e.startsWith("info face=")}},{key:"parse",value:function(e){var t=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(var r in t){var i=t[r].match(/^[a-z]+/gm)[0],o=t[r].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),a={};for(var s in o){var l=o[s].split("="),u=l[0],c=l[1].replace(/"/gm,""),h=parseFloat(c),d=isNaN(h)?c:h;a[u]=d}n[i].push(a)}var f=new aT;return n.info.forEach((function(e){return f.info.push({face:e.face,size:parseInt(e.size,10)})})),n.common.forEach((function(e){return f.common.push({lineHeight:parseInt(e.lineHeight,10)})})),n.page.forEach((function(e){return f.page.push({id:parseInt(e.id,10),file:e.file})})),n.char.forEach((function(e){return f.char.push({id:parseInt(e.id,10),page:parseInt(e.page,10),x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xoffset:parseInt(e.xoffset,10),yoffset:parseInt(e.yoffset,10),xadvance:parseInt(e.xadvance,10)})})),n.kerning.forEach((function(e){return f.kerning.push({first:parseInt(e.first,10),second:parseInt(e.second,10),amount:parseInt(e.amount,10)})})),n.distanceField.forEach((function(e){return f.distanceField.push({distanceRange:parseInt(e.distanceRange,10),fieldType:e.fieldType})})),f}}]),e}(),lT=function(){function e(){u(this,e)}return f(e,null,[{key:"test",value:function(e){var t=e;return"getElementsByTagName"in t&&t.getElementsByTagName("page").length&&null!==t.getElementsByTagName("info")[0].getAttribute("face")}},{key:"parse",value:function(e){for(var t=new aT,n=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),i=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),s=e.getElementsByTagName("distanceField"),l=0;l<n.length;l++)t.info.push({face:n[l].getAttribute("face"),size:parseInt(n[l].getAttribute("size"),10)});for(var u=0;u<r.length;u++)t.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(var c=0;c<i.length;c++)t.page.push({id:parseInt(i[c].getAttribute("id"),10)||0,file:i[c].getAttribute("file")});for(var h=0;h<o.length;h++){var d=o[h];t.char.push({id:parseInt(d.getAttribute("id"),10),page:parseInt(d.getAttribute("page"),10)||0,x:parseInt(d.getAttribute("x"),10),y:parseInt(d.getAttribute("y"),10),width:parseInt(d.getAttribute("width"),10),height:parseInt(d.getAttribute("height"),10),xoffset:parseInt(d.getAttribute("xoffset"),10),yoffset:parseInt(d.getAttribute("yoffset"),10),xadvance:parseInt(d.getAttribute("xadvance"),10)})}for(var f=0;f<a.length;f++)t.kerning.push({first:parseInt(a[f].getAttribute("first"),10),second:parseInt(a[f].getAttribute("second"),10),amount:parseInt(a[f].getAttribute("amount"),10)});for(var p=0;p<s.length;p++)t.distanceField.push({fieldType:s[p].getAttribute("fieldType"),distanceRange:parseInt(s[p].getAttribute("distanceRange"),10)});return t}}]),e}(),uT=function(){function e(){u(this,e)}return f(e,null,[{key:"test",value:function(e){return!("string"!==typeof e||!e.includes("<font>"))&&lT.test(Zp.ADAPTER.parseXML(e))}},{key:"parse",value:function(e){return lT.parse(Zp.ADAPTER.parseXML(e))}}]),e}(),cT=[sT,lT,uT];function hT(e){for(var t=0;t<cT.length;t++)if(cT[t].test(e))return cT[t];return null}function dT(e,t,n,r,i,o,a){var s=n.text,l=n.fontProperties;t.translate(r,i),t.scale(o,o);var u=a.strokeThickness/2,c=-a.strokeThickness/2;if(t.font=a.toFontString(),t.lineWidth=a.strokeThickness,t.textBaseline=a.textBaseline,t.lineJoin=a.lineJoin,t.miterLimit=a.miterLimit,t.fillStyle=function(e,t,n,r,i,o){var a,s=n.fill;if(!Array.isArray(s))return s;if(1===s.length)return s[0];var l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=e.width/r-l-2*u,h=e.height/r-l-2*u,d=s.slice(),f=n.fillGradientStops.slice();if(!f.length)for(var p=d.length+1,v=1;v<p;++v)f.push(v/p);if(d.unshift(s[0]),f.unshift(0),d.push(s[s.length-1]),f.push(1),n.fillGradientType===Ew.LINEAR_VERTICAL){a=t.createLinearGradient(c/2,u,c/2,h+u);for(var m=0,g=(o.fontProperties.fontSize+n.strokeThickness)/h,y=0;y<i.length;y++)for(var b=o.lineHeight*y,_=0;_<d.length;_++){var x=b/h+("number"===typeof f[_]?f[_]:_/d.length)*g,E=Math.max(m,x);E=Math.min(E,1),a.addColorStop(E,d[_]),m=E}}else{a=t.createLinearGradient(u,h/2,c+u,h/2);for(var w=d.length+1,T=1,S=0;S<d.length;S++){var k=void 0;k="number"===typeof f[S]?f[S]:T/w,a.addColorStop(k,d[S]),T++}}return a}(e,t,a,o,[s],n),t.strokeStyle=a.stroke,a.dropShadow){var h=a.dropShadowColor,d=a.dropShadowBlur*o,f=a.dropShadowDistance*o;t.shadowColor=rm.shared.setValue(h).setAlpha(a.dropShadowAlpha).toRgbaString(),t.shadowBlur=d,t.shadowOffsetX=Math.cos(a.dropShadowAngle)*f,t.shadowOffsetY=Math.sin(a.dropShadowAngle)*f}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;a.stroke&&a.strokeThickness&&t.strokeText(s,u,c+n.lineHeight-l.descent),a.fill&&t.fillText(s,u,c+n.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function fT(e){return Array.from?Array.from(e):e.split("")}function pT(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}var vT=["chars","padding","resolution","textureWidth","textureHeight"],mT=function(){function e(t,n,r){var i,o;u(this,e);var a=Pt(t.info,1)[0],s=Pt(t.common,1)[0],l=Pt(t.page,1)[0],c=Pt(t.distanceField,1)[0],h=Hm(l.file),d={};this._ownsTextures=r,this.font=a.face,this.size=a.size,this.lineHeight=s.lineHeight/h,this.chars={},this.pageTextures=d;for(var f=0;f<t.page.length;f++){var p=t.page[f],v=p.id,m=p.file;d[v]=n instanceof Array?n[f]:n[m],null!==c&&void 0!==c&&c.fieldType&&"none"!==c.fieldType&&(d[v].baseTexture.alphaMode=jp.NO_PREMULTIPLIED_ALPHA,d[v].baseTexture.mipmap=Hp.OFF)}for(var g=0;g<t.char.length;g++){var y=t.char[g],b=y.id,_=y.page,x=t.char[g],E=x.x,w=x.y,T=x.width,S=x.height,k=x.xoffset,C=x.yoffset,A=x.xadvance;w/=h,T/=h,S/=h,k/=h,C/=h,A/=h;var I=new xg((E/=h)+d[_].frame.x/h,w+d[_].frame.y/h,T,S);this.chars[b]={xOffset:k,yOffset:C,xAdvance:A,kerning:{},texture:new wy(d[_].baseTexture,I),page:_}}for(var O=0;O<t.kerning.length;O++){var P=t.kerning[O],M=P.first,R=P.second,N=P.amount;M/=h,R/=h,N/=h,this.chars[R]&&(this.chars[R].kerning[M]=N)}this.distanceFieldRange=null===c||void 0===c?void 0:c.distanceRange,this.distanceFieldType=null!==(i=null===c||void 0===c||null===(o=c.fieldType)||void 0===o?void 0:o.toLowerCase())&&void 0!==i?i:"none"}return f(e,[{key:"destroy",value:function(){for(var e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(var t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}}],[{key:"install",value:function(t,n,r){var i;if(t instanceof aT)i=t;else{var o=hT(t);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(t)}n instanceof wy&&(n=[n]);var a=new e(i,n,r);return e.available[a.font]=a,a}},{key:"uninstall",value:function(t){var n=e.available[t];if(!n)throw new Error("No font found named '".concat(t,"'"));n.destroy(),delete e.available[t]}},{key:"from",value:function(t,n,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");var i=Object.assign({},e.defaultOptions,r),o=i.chars,a=i.padding,s=i.resolution,l=i.textureWidth,u=i.textureHeight,c=Yn(i,vT),h=function(e){"string"===typeof e&&(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];if(Array.isArray(i)){if(2!==i.length)throw new Error("[BitmapFont]: Invalid character range length, expecting 2 got ".concat(i.length,"."));var o=i[0].charCodeAt(0),a=i[1].charCodeAt(0);if(a<o)throw new Error("[BitmapFont]: Invalid character range.");for(var s=o,l=a;s<=l;s++)t.push(String.fromCharCode(s))}else t.push.apply(t,Pe(fT(i)))}if(0===t.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}(o),d=n instanceof Aw?n:new Aw(n),f=l,p=new aT;p.info[0]={face:d.fontFamily,size:d.fontSize},p.common[0]={lineHeight:d.fontSize};for(var v,m,g,y=0,b=0,_=0,x=[],E=[],w=0;w<h.length;w++){v||((v=Zp.ADAPTER.createCanvas()).width=l,v.height=u,m=v.getContext("2d"),g=new ig(v,Re({resolution:s},c)),x.push(g),E.push(new wy(g)),p.page.push({id:E.length-1,file:""}));var T=h[w],S=Sw.measureText(T,d,!1,v),k=S.width,C=Math.ceil(S.height),A=Math.ceil(("italic"===d.fontStyle?2:1)*k);if(b>=u-C*s){if(0===b)throw new Error("[BitmapFont] textureHeight ".concat(u,"px is too small (fontFamily: '").concat(d.fontFamily,"', fontSize: ").concat(d.fontSize,"px, char: '").concat(T,"')"));--w,v=null,m=null,g=null,b=0,y=0,_=0}else if(_=Math.max(C+S.fontProperties.descent,_),A*s+y>=f){if(0===y)throw new Error("[BitmapFont] textureWidth ".concat(l,"px is too small (fontFamily: '").concat(d.fontFamily,"', fontSize: ").concat(d.fontSize,"px, char: '").concat(T,"')"));--w,b+=_*s,b=Math.ceil(b),y=0,_=0}else{dT(v,m,S,y,b,s,d);var I=pT(S.text);p.char.push({id:I,page:E.length-1,x:y/s,y:b/s,width:A,height:C,xoffset:0,yoffset:0,xadvance:k-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),y+=(A+2*a)*s,y=Math.ceil(y)}}for(var O=0,P=h.length;O<P;O++)for(var M=h[O],R=0;R<P;R++){var N=h[R],D=m.measureText(M).width,L=m.measureText(N).width,F=m.measureText(M+N).width-(D+L);F&&p.kerning.push({first:pT(M),second:pT(N),amount:F})}var B=new e(p,E,!0);return void 0!==e.available[t]&&e.uninstall(t),e.available[t]=B,B}}]),e}(),gT=mT;gT.ALPHA=[["a","z"],["A","Z"]," "],gT.NUMERIC=[["0","9"]],gT.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],gT.ASCII=[[" ","~"]],gT.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:mT.ALPHANUMERIC},gT.available={};var yT=[],bT=[],_T=[],xT=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,n),r=t.call(this);var o=Object.assign({},n.styleDefaults,i),a=o.align,s=o.tint,l=o.maxWidth,c=o.letterSpacing,h=o.fontName,d=o.fontSize;if(!gT.available[h])throw new Error('Missing BitmapFont "'.concat(h,'"'));return r._activePagesMeshData=[],r._textWidth=0,r._textHeight=0,r._align=a,r._tintColor=new rm(s),r._font=void 0,r._fontName=h,r._fontSize=d,r.text=e,r._maxWidth=l,r._maxLineHeight=0,r._letterSpacing=c,r._anchor=new Dg((function(){r.dirty=!0}),g(r),0,0),r._roundPixels=Zp.ROUND_PIXELS,r.dirty=!0,r._resolution=Zp.RESOLUTION,r._autoResolution=!0,r._textureCache={},r}return f(n,[{key:"updateText",value:function(){for(var e=gT.available[this._fontName],t=this.fontSize,n=t/e.size,r=new bg,i=[],o=[],a=[],s=fT(this._text.replace(/(?:\r\n|\r)/g,"\n")||" "),l=this._maxWidth*e.size/t,u="none"===e.distanceFieldType?yT:bT,c=null,h=0,d=0,f=0,p=-1,v=0,m=0,g=0,y=0,b=0;b<s.length;b++){var _=s[b],x=pT(_);if(/(?:\s)/.test(_)&&(p=b,v=h,y++),"\r"!==_&&"\n"!==_){var E=e.chars[x];if(E){c&&E.kerning[c]&&(r.x+=E.kerning[c]);var w=_T.pop()||{texture:wy.EMPTY,line:0,charCode:0,prevSpaces:0,position:new bg};w.texture=E.texture,w.line=f,w.charCode=x,w.position.x=Math.round(r.x+E.xOffset+this._letterSpacing/2),w.position.y=Math.round(r.y+E.yOffset),w.prevSpaces=y,i.push(w),h=w.position.x+Math.max(E.xAdvance-E.xOffset,E.texture.orig.width),r.x+=E.xAdvance+this._letterSpacing,g=Math.max(g,E.yOffset+E.texture.height),c=x,-1!==p&&l>0&&r.x>l&&(xm(i,1+p-++m,1+b-p),b=p,p=-1,o.push(v),a.push(i.length>0?i[i.length-1].prevSpaces:0),d=Math.max(d,v),f++,r.x=0,r.y+=e.lineHeight,c=null,y=0)}}else o.push(h),a.push(-1),d=Math.max(d,h),++f,++m,r.x=0,r.y+=e.lineHeight,c=null,y=0}var T=s[s.length-1];"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(h=v),o.push(h),d=Math.max(d,h),a.push(-1));for(var S=[],k=0;k<=f;k++){var C=0;"right"===this._align?C=d-o[k]:"center"===this._align?C=(d-o[k])/2:"justify"===this._align&&(C=a[k]<0?0:(d-o[k])/a[k]),S.push(C)}var A=i.length,I={},O=[],P=this._activePagesMeshData;u.push.apply(u,Pe(P));for(var M=0;M<A;M++){var R=i[M].texture,N=R.baseTexture.uid;if(!I[N]){var D=u.pop();if(!D){var L=new hw,F=void 0,B=void 0;"none"===e.distanceFieldType?(F=new dw(wy.EMPTY),B=Mp.NORMAL):(F=new dw(wy.EMPTY,{program:ey.from("// Mesh material default fragment\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTextureMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","// Pixi texture info\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\n\r\n// Tint\r\nuniform vec4 uColor;\r\n\r\n// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r\nuniform float uFWidth;\r\n\r\nvoid main(void) {\r\n\r\n  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r\n  vec4 texColor = texture2D(uSampler, vTextureCoord);\r\n\r\n  // MSDF\r\n  float median = texColor.r + texColor.g + texColor.b -\r\n                  min(texColor.r, min(texColor.g, texColor.b)) -\r\n                  max(texColor.r, max(texColor.g, texColor.b));\r\n  // SDF\r\n  median = min(median, texColor.a);\r\n\r\n  float screenPxDistance = uFWidth * (median - 0.5);\r\n  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r\n  if (median < 0.01) {\r\n    alpha = 0.0;\r\n  } else if (median > 0.99) {\r\n    alpha = 1.0;\r\n  }\r\n\r\n  // Gamma correction for coverage-like alpha\r\n  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r\n  float gamma = mix(1.0, 1.0 / 2.2, luma);\r\n  float coverage = pow(uColor.a * alpha, gamma);  \r\n\r\n  // NPM Textures, NPM outputs\r\n  gl_FragColor = vec4(uColor.rgb, coverage);\r\n}\r\n"),uniforms:{uFWidth:0}}),B=Mp.NORMAL_NPM);var U=new cw(L,F);U.blendMode=B,D={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:U,vertices:null,uvs:null,indices:null}}D.index=0,D.indexCount=0,D.vertexCount=0,D.uvsCount=0,D.total=0;var H=this._textureCache;H[N]=H[N]||new wy(R.baseTexture),D.mesh.texture=H[N],D.mesh.tint=this._tintColor.value,O.push(D),I[N]=D}I[N].total++}for(var j=0;j<P.length;j++)O.includes(P[j])||this.removeChild(P[j].mesh);for(var z=0;z<O.length;z++)O[z].mesh.parent!==this&&this.addChild(O[z].mesh);for(var V in this._activePagesMeshData=O,I){var G,W=I[V],X=W.total;if(!((null===(G=W.indices)||void 0===G?void 0:G.length)>6*X)||W.vertices.length<2*cw.BATCHABLE_SIZE)W.vertices=new Float32Array(8*X),W.uvs=new Float32Array(8*X),W.indices=new Uint16Array(6*X);else for(var Y=W.total,K=W.vertices,q=4*Y*2;q<K.length;q++)K[q]=0;W.mesh.size=6*X}for(var Z=0;Z<A;Z++){var $=i[Z],Q=$.position.x+S[$.line]*("justify"===this._align?$.prevSpaces:1);this._roundPixels&&(Q=Math.round(Q));var J=Q*n,ee=$.position.y*n,te=$.texture,ne=I[te.baseTexture.uid],re=te.frame,ie=te._uvs,oe=ne.index++;ne.indices[6*oe+0]=0+4*oe,ne.indices[6*oe+1]=1+4*oe,ne.indices[6*oe+2]=2+4*oe,ne.indices[6*oe+3]=0+4*oe,ne.indices[6*oe+4]=2+4*oe,ne.indices[6*oe+5]=3+4*oe,ne.vertices[8*oe+0]=J,ne.vertices[8*oe+1]=ee,ne.vertices[8*oe+2]=J+re.width*n,ne.vertices[8*oe+3]=ee,ne.vertices[8*oe+4]=J+re.width*n,ne.vertices[8*oe+5]=ee+re.height*n,ne.vertices[8*oe+6]=J,ne.vertices[8*oe+7]=ee+re.height*n,ne.uvs[8*oe+0]=ie.x0,ne.uvs[8*oe+1]=ie.y0,ne.uvs[8*oe+2]=ie.x1,ne.uvs[8*oe+3]=ie.y1,ne.uvs[8*oe+4]=ie.x2,ne.uvs[8*oe+5]=ie.y2,ne.uvs[8*oe+6]=ie.x3,ne.uvs[8*oe+7]=ie.y3}for(var ae in this._textWidth=d*n,this._textHeight=(r.y+e.lineHeight)*n,I){var se=I[ae];if(0!==this.anchor.x||0!==this.anchor.y)for(var le=0,ue=this._textWidth*this.anchor.x,ce=this._textHeight*this.anchor.y,he=0;he<se.total;he++)se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce,se.vertices[le++]-=ue,se.vertices[le++]-=ce;this._maxLineHeight=g*n;var de=se.mesh.geometry.getBuffer("aVertexPosition"),fe=se.mesh.geometry.getBuffer("aTextureCoord"),pe=se.mesh.geometry.getIndex();de.data=se.vertices,fe.data=se.uvs,pe.data=se.indices,de.update(),fe.update(),pe.update()}for(var ve=0;ve<i.length;ve++)_T.push(i[ve]);this._font=e,this.dirty=!1}},{key:"updateTransform",value:function(){this.validate(),this.containerUpdateTransform()}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);var t=gT.available[this._fontName],r=t.distanceFieldRange,i=t.distanceFieldType,o=t.size;if("none"!==i){var a,s=this.worldTransform,l=s.a,u=s.b,c=s.c,h=s.d,d=Math.sqrt(l*l+u*u),f=Math.sqrt(c*c+h*h),p=(Math.abs(d)+Math.abs(f))/2,v=this.fontSize/o,g=e._view.resolution,y=wb(this._activePagesMeshData);try{for(y.s();!(a=y.n()).done;){a.value.mesh.shader.uniforms.uFWidth=p*r*v*g}}catch(b){y.e(b)}finally{y.f()}}jm(m(n.prototype),"_render",this).call(this,e)}},{key:"getLocalBounds",value:function(){return this.validate(),jm(m(n.prototype),"getLocalBounds",this).call(this)}},{key:"validate",value:function(){var e=gT.available[this._fontName];if(!e)throw new Error('Missing BitmapFont "'.concat(this._fontName,'"'));this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}},{key:"tint",get:function(){return this._tintColor.value},set:function(e){if(this.tint!==e){this._tintColor.setValue(e);for(var t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}},{key:"align",get:function(){return this._align},set:function(e){this._align!==e&&(this._align=e,this.dirty=!0)}},{key:"fontName",get:function(){return this._fontName},set:function(e){if(!gT.available[e])throw new Error('Missing BitmapFont "'.concat(e,'"'));this._fontName!==e&&(this._fontName=e,this.dirty=!0)}},{key:"fontSize",get:function(){var e;return null!==(e=this._fontSize)&&void 0!==e?e:gT.available[this._fontName].size},set:function(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}},{key:"anchor",get:function(){return this._anchor},set:function(e){"number"===typeof e?this._anchor.set(e):this._anchor.copyFrom(e)}},{key:"text",get:function(){return this._text},set:function(e){e=String(null===e||void 0===e?"":e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}},{key:"roundPixels",get:function(){return this._roundPixels},set:function(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}},{key:"destroy",value:function(e){var t=this._textureCache,r="none"===gT.available[this._fontName].distanceFieldType?yT:bT;r.push.apply(r,Pe(this._activePagesMeshData));var i,o=wb(this._activePagesMeshData);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.removeChild(a.mesh)}}catch(l){o.e(l)}finally{o.f()}for(var s in this._activePagesMeshData=[],r.filter((function(e){return t[e.mesh.texture.baseTexture.uid]})).forEach((function(e){e.mesh.texture=wy.EMPTY})),t){t[s].destroy(),delete t[s]}this._font=null,this._tintColor=null,this._textureCache=null,jm(m(n.prototype),"destroy",this).call(this,e)}}]),n}(c_),ET=xT;ET.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};var wT=[".xml",".fnt"],TT={extension:{type:zm.LoadParser,priority:ex.Normal},name:"loadBitmapFont",test:function(e){return wT.includes(Ev.extname(e).toLowerCase())},testParse:function(e){return Ee(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",sT.test(e)||uT.test(e));case 1:case"end":return t.stop()}}),t)})))()},parse:function(e,t,n){return Ee(_e().mark((function r(){var i,o,a,s,l,u,c,h,d;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:for(i=sT.test(e)?sT.parse(e):uT.parse(e),o=t.src,a=i.page,s=[],l=0;l<a.length;++l)u=a[l].file,c=Ev.join(Ev.dirname(o),u),c=Bx(c,o),s.push(c);return r.next=7,n.load(s);case 7:return h=r.sent,d=s.map((function(e){return h[e]})),r.abrupt("return",gT.install(i,d,!0));case 10:case"end":return r.stop()}}),r)})))()},load:function(e,t){return Ee(_e().mark((function t(){var n;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zp.ADAPTER.fetch(e);case 2:return n=t.sent,t.abrupt("return",n.text());case 4:case"end":return t.stop()}}),t)})))()},unload:function(e){e.destroy()}};Wm.add(TT);var ST=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.apply(this,arguments))._fonts=[],e._overrides=[],e._stylesheet="",e.fontsDirty=!1,e}return f(n,[{key:"cleanFonts",value:function(){this._fonts.length>0&&(this._fonts.forEach((function(e){URL.revokeObjectURL(e.src),e.refs--,0===e.refs&&(e.fontFace&&document.fonts.delete(e.fontFace),delete n.availableFonts[e.originalUrl])})),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}},{key:"loadFont",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=n.availableFonts;if(i[e]){var o=i[e];return this._fonts.push(o),o.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return Zp.ADAPTER.fetch(e).then((function(e){return e.blob()})).then(function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=URL.createObjectURL(t),i=new FileReader;i.onload=function(){return e([r,i.result])},i.onerror=n,i.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then(function(){var n=Ee(_e().mark((function n(o){var a,s,l,u,c;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=Pt(o,2),s=a[0],l=a[1],u=Object.assign({family:Ev.basename(e,Ev.extname(e)),weight:"normal",style:"normal",src:s,dataSrc:l,refs:1,originalUrl:e,fontFace:null},r),i[e]=u,t._fonts.push(u),t.styleID++,c=new FontFace(u.family,"url(".concat(u.src,")"),{weight:u.weight,style:u.style}),u.fontFace=c,n.next=9,c.load();case 9:return document.fonts.add(c),n.next=12,document.fonts.ready;case 12:t.styleID++,t.fontsDirty=!0;case 14:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}())}},{key:"addOverride",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i,o=n.filter((function(t){return!e._overrides.includes(t)}));o.length>0&&((i=this._overrides).push.apply(i,Pe(o)),this.styleID++)}},{key:"removeOverride",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=n.filter((function(t){return e._overrides.includes(t)}));i.length>0&&(this._overrides=this._overrides.filter((function(e){return!i.includes(e)})),this.styleID++)}},{key:"toCSS",value:function(e){return["transform: scale(".concat(e,")"),"transform-origin: top left","display: inline-block","color: ".concat(this.normalizeColor(this.fill)),"font-size: ".concat(this.fontSize,"px"),"font-family: ".concat(this.fontFamily),"font-weight: ".concat(this.fontWeight),"font-style: ".concat(this.fontStyle),"font-variant: ".concat(this.fontVariant),"letter-spacing: ".concat(this.letterSpacing,"px"),"text-align: ".concat(this.align),"padding: ".concat(this.padding,"px"),"white-space: ".concat(this.whiteSpace)].concat(Pe(this.lineHeight?["line-height: ".concat(this.lineHeight,"px")]:[]),Pe(this.wordWrap?["word-wrap: ".concat(this.breakWords?"break-all":"break-word"),"max-width: ".concat(this.wordWrapWidth,"px")]:[]),Pe(this.strokeThickness?["-webkit-text-stroke-width: ".concat(this.strokeThickness,"px"),"-webkit-text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"text-stroke-width: ".concat(this.strokeThickness,"px"),"text-stroke-color: ".concat(this.normalizeColor(this.stroke)),"paint-order: stroke"]:[]),Pe(this.dropShadow?[this.dropShadowToCSS()]:[]),Pe(this._overrides)).join(";")}},{key:"toGlobalCSS",value:function(){return this._fonts.reduce((function(e,t){return"".concat(e,'\n            @font-face {\n                font-family: "').concat(t.family,"\";\n                src: url('").concat(t.dataSrc,"');\n                font-weight: ").concat(t.weight,";\n                font-style: ").concat(t.style,"; \n            }")}),this._stylesheet)}},{key:"stylesheet",get:function(){return this._stylesheet},set:function(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}},{key:"normalizeColor",value:function(e){return Array.isArray(e)&&(e=sm(e)),"number"===typeof e?om(e):e}},{key:"dropShadowToCSS",value:function(){var e=this.normalizeColor(this.dropShadowColor),t=this.dropShadowAlpha,n=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),r=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(255*t|0).toString(16).padStart(2,"0"));var i="".concat(n,"px ").concat(r,"px");return this.dropShadowBlur>0?"text-shadow: ".concat(i," ").concat(this.dropShadowBlur,"px ").concat(e):"text-shadow: ".concat(i," ").concat(e)}},{key:"reset",value:function(){Object.assign(this,n.defaultOptions)}},{key:"onBeforeDraw",value:function(){var e=this.fontsDirty;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise((function(e){return setTimeout(e,100)})):Promise.resolve()}},{key:"isSafari",get:function(){var e=Zp.ADAPTER.getNavigator().userAgent;return/^((?!chrome|android).)*safari/i.test(e)}},{key:"fillGradientStops",get:function(){return jm(m(n.prototype),"fillGradientStops",this)},set:function(e){}},{key:"fillGradientType",get:function(){return jm(m(n.prototype),"fillGradientType",this)},set:function(e){}},{key:"miterLimit",get:function(){return jm(m(n.prototype),"miterLimit",this)},set:function(e){}},{key:"trim",get:function(){return jm(m(n.prototype),"trim",this)},set:function(e){}},{key:"textBaseline",get:function(){return jm(m(n.prototype),"textBaseline",this)},set:function(e){}},{key:"leading",get:function(){return jm(m(n.prototype),"leading",this)},set:function(e){}},{key:"lineJoin",get:function(){return jm(m(n.prototype),"lineJoin",this)},set:function(e){}}],[{key:"from",value:function(e){return new n(Object.keys(n.defaultOptions).reduce((function(t,n){return Re(Re({},t),{},b({},n,e[n]))}),{}))}}]),n}(Aw),kT=ST;kT.availableFonts={},kT.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};var CT=function(e){v(n,e);var t=y(n);function n(){var e,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,n),(r=t.call(this,wy.EMPTY))._text=null,r._style=null,r._autoResolution=!0,r._loading=!1,r.localStyleID=-1,r.dirty=!1,r.ownsStyle=!1;var a=new Image,s=wy.from(a,{scaleMode:Zp.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new xg,s.trim=new xg,r.texture=s;var l="http://www.w3.org/2000/svg",c="http://www.w3.org/1999/xhtml",h=document.createElementNS(l,"svg"),d=document.createElementNS(l,"foreignObject"),f=document.createElementNS(c,"div"),p=document.createElementNS(c,"style");return d.setAttribute("width","10000"),d.setAttribute("height","10000"),d.style.overflow="hidden",h.appendChild(d),r.maxWidth=n.defaultMaxWidth,r.maxHeight=n.defaultMaxHeight,r._domElement=f,r._styleElement=p,r._svgRoot=h,r._foreignObject=d,r._foreignObject.appendChild(p),r._foreignObject.appendChild(f),r._image=a,r._loadImage=new Image,r._autoResolution=n.defaultAutoResolution,r._resolution=null!==(e=n.defaultResolution)&&void 0!==e?e:Zp.RESOLUTION,r.text=i,r.style=o,r}return f(n,[{key:"measureText",value:function(e){var t=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e),n=t.text,r=t.style,i=t.resolution;Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);var o=this._domElement.getBoundingClientRect();this._svgRoot.remove();var a,s,l=Math.min(this.maxWidth,Math.ceil(o.width)),u=Math.min(this.maxHeight,Math.ceil(o.height));(this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",u.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style)&&(Object.assign(this._domElement,{style:null===(a=this._style)||void 0===a?void 0:a.toCSS(i)}),this._styleElement.textContent=null===(s=this._style)||void 0===s?void 0:s.toGlobalCSS());return{width:l+2*r.padding,height:u+2*r.padding}}},{key:"updateText",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i,o,a,s,l=this,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!(u.length>0&&void 0!==u[0])||u[0],n=this.style,r=this._image,i=this._loadImage,this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),this.dirty||!t){e.next=5;break}return e.abrupt("return");case 5:if(o=this.measureText(),a=o.width,s=o.height,r.width=i.width=Math.ceil(Math.max(1,a)),r.height=i.height=Math.ceil(Math.max(1,s)),this._loading){e.next=12;break}return this._loading=!0,e.next=12,new Promise((function(e){i.onload=Ee(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.onBeforeDraw();case 2:l._loading=!1,r.src=i.src,i.onload=null,i.src="",l.updateTexture(),e();case 8:case"end":return t.stop()}}),t)})));var t=(new XMLSerializer).serializeToString(l._svgRoot);i.src="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(t))}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"source",get:function(){return this._image}},{key:"updateTexture",value:function(){var e=this.style,t=this.texture,n=this._image,r=this.resolution,i=e.padding,o=t.baseTexture;t.trim.width=t._frame.width=n.width/r,t.trim.height=t._frame.height=n.height/r,t.trim.x=-i,t.trim.y=-i,t.orig.width=t._frame.width-2*i,t.orig.height=t._frame.height-2*i,this._onTextureUpdate(),o.setRealSize(n.width,n.height,r),this.dirty=!1}},{key:"_render",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),jm(m(n.prototype),"_render",this).call(this,e)}},{key:"_renderCanvas",value:function(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),jm(m(n.prototype),"_renderCanvas",this).call(this,e)}},{key:"getLocalBounds",value:function(e){return this.updateText(!0),jm(m(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"_calculateBounds",value:function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}},{key:"_onStyleChange",value:function(){this.dirty=!0}},{key:"destroy",value:function(e){var t,r,i,o;"boolean"===typeof e&&(e={children:e}),e=Object.assign({},n.defaultDestroyOptions,e),jm(m(n.prototype),"destroy",this).call(this,e);var a,s=null;this.ownsStyle&&(null===(a=this._style)||void 0===a||a.cleanFonts());this._style=s,null===(t=this._svgRoot)||void 0===t||t.remove(),this._svgRoot=s,null===(r=this._domElement)||void 0===r||r.remove(),this._domElement=s,null===(i=this._foreignObject)||void 0===i||i.remove(),this._foreignObject=s,null===(o=this._styleElement)||void 0===o||o.remove(),this._styleElement=s,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=s,this._image.src="",this._image=s}},{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution},set:function(e){this.updateText(!0);var t=Em(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution},set:function(e){this.updateText(!0);var t=Em(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}},{key:"style",get:function(){return this._style},set:function(e){this._style!==e&&((e=e||{})instanceof kT?(this.ownsStyle=!1,this._style=e):e instanceof Aw?(this.ownsStyle=!0,this._style=kT.from(e)):(this.ownsStyle=!0,this._style=new kT(e)),this.localStyleID=-1,this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(e){e=String(""===e||null===e||void 0===e?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}},{key:"sanitiseText",value:function(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}}]),n}(f_),AT=CT;AT.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},AT.defaultMaxWidth=2024,AT.defaultMaxHeight=2024,AT.defaultAutoResolution=!0;var IT=function(){function e(){u(this,e)}return f(e,null,[{key:"packTextures",value:function(t,n,r,i){for(var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],s=0,l=0,u=[],c=0,h=i.length;c<h;c++){var d=i[c];s+=d.width*d.height,u.push(d),l=Math.max(d.width,l)}u.sort(e.sortRectList),0===t&&(t=Math.sqrt(s)),t=Math.max(l+2*n,t);var f,p,v,m,g,y,b,_,x,E=this.HIGHEST,w=[];w.push({x:0,y:0,width:t,height:E});do{m=this.getHighestArea(w),b=w.indexOf(m),f=!1,_=0;for(var T=0,S=u.length;T<S;T++){if(p=(x=u[T]).width+n,v=x.height+r,m.width>=p&&m.height>=v&&(!o||(!(v>4*p)||(!(b>0)||m.height-v>=w[b-1].height)))){f=!0;break}_++}f?(x.x=m.x+n,x.y=m.y+r,u.splice(_,1),w.splice(b+1,0,{x:m.x+p,y:m.y,width:m.width-p,height:m.height}),m.y+=v,m.width=p,m.height-=v):(0===b?y=w[b+1]:b===w.length-1?y=w[b-1]:(g=w[b-1],y=w[b+1],y=g.height<=y.height?y:g),m.x<y.x&&(y.x=m.x),y.width=m.width+y.width,w.splice(b,1))}while(u.length>0);var k=e.getRightBottomRect(i);return E=k[1].y+k[1].height+r,t=k[0].x+k[0].width+n,a&&(E=e.getNearest2N(E),t=e.getNearest2N(t)),{x:0,y:0,width:t,height:E}}},{key:"sortRectList",value:function(e,t){var n=e.width+e.height,r=t.width+t.height;return n===r?e.width>t.width?-1:1:n>r?-1:1}},{key:"getNearest2N",value:function(e){return e&e-1?1<<e.toString(2).length:e}},{key:"getHighestArea",value:function(e){for(var t,n=0,r=0,i=e.length;r<i;r++){var o=e[r];o.height>n&&(n=o.height,t=o)}return t}},{key:"getLowestArea",value:function(e){for(var t,n=this.HIGHEST,r=0,i=e.length;r<i;r++){var o=e[r];o.height<n&&(n=o.height,t=o)}return t}},{key:"getRightBottomRect",value:function(e){var t,n,r=-1,i=-1;for(var o in e){var a=e[o];a.x+a.width>r&&(r=(t=a).x+a.width),a.y+a.height>i&&(i=(n=a).y+a.height)}return[t,n]}},{key:"packing",value:function(t,n,r,i,o){var a,s=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wp.BestAreaFit,u=[];for(var c in o){var h=o[c];u.push({x:0,y:0,width:h.width,height:h.height,data:h.name})}switch(Cp.setCanRotate(!1),Cp.setGap(r,i),Cp.setLayoutMath(l),Cp.setSortOn(Sp.AREA),t>0&&n>0?(Cp.setMaxSize(t-r,n-i),Cp.insertRectanglesToMult(u)):(a=!0,Cp.setMaxSize(),Cp.insertRectangles(u)),Cp.resultType){case kp.SHEET_TO_BIG:return null;case kp.SUCCESS:Cp.resultSize.x>2048||Cp.resultSize.y;var d,f=Cp.results,p=0,v=0,m=0;for(d=0;d<f.length;d++){for(var g=0,y=0,b=0,_=f[d].length;b<_;b++){g=g>f[d][b].x+f[d][b].width?g:f[d][b].x+f[d][b].width,y=y>f[d][b].y+f[d][b].height?y:f[d][b].y+f[d][b].height;var x=o[f[d][b].data];x&&(x.x=f[d][b].x,x.y=f[d][b].y,x.page=d)}p=p>g?p:g,v=v>y?v:y,m+=g*y}return e.areaRate=Cp.area/m,a?s?{x:0,y:0,width:Cp.resultSize.x,height:Cp.resultSize.y}:{x:0,y:0,width:p+r,height:v+i}:{x:0,y:0,width:t,height:n}}return null}},{key:"createTextureConfig",value:function(){var e=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in o={imagePath:"".concat(r,".png"),name:i,SubTexture:[]},n)s=n[a],l={x:s.x,y:s.y,width:s.width,height:s.height,name:s.name},o.SubTexture.push(l);return e.abrupt("return",o);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"drawTexture",value:function(){var e=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l,u,c,h=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=new c_,a=0;case 2:if(!(a<n.length)){e.next=14;break}return s=n[a],e.next=6,this.getPixiTexture(s);case 6:l=e.sent,(u=new f_(l)).x=s.x,u.y=s.y,o.addChild(u);case 11:a++,e.next=2;break;case 14:return c=Ty.create(t),this.renderApp||(this.renderApp=new G_),this.renderApp.renderer.render(o,{renderTexture:c,clear:!0}),e.abrupt("return",new Promise((function(e,t){h.renderApp.renderer.extract.canvas(c).toBlob((function(t){e(t)}))})));case 18:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"getPixiTexture",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$2.instance.res.getImageAsset(t.assetId);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();IT.HIGHEST=4294967295,IT.areaRate=void 0,IT.renderApp=void 0;var OT=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n),e=t.call(this,"dragonbones");var r=new Ep,i=new PT,o=new gp;return e.addModule(r),e.addModule(i),e.addModule(o),e}return f(n,[{key:"getCurArmature",value:function(){var e=this.rootState.runtime.editing.editingArmatureId;return this.rootState.runtime.dragonbones.armatureMap[e]}},{key:"getCurAnimation",value:function(){var e=this.getCurArmature(),t=this.rootState.runtime.editing.selectedAnimationId;if(e.animations.includes(t))return this.rootState.runtime.dragonbones.animationMap[t]}},{key:"getCurRootBone",value:function(){var e=this.getCurArmature();for(var t in e.bones.map){var n=e.bones.map[t];if(n&&!n.parentId)return n}}},{key:"getAssetById",value:function(e){var t=this.rootState.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r){if(r.id===e)return r;if(r.children)for(var i=0,o=r.children.length;i<o;i++){var a=r.children[i];if(a.id===e)return a}}}}},{key:"mutations",get:function(){return b({},_.TEST,(function(e,t){}))}},{key:"actions",get:function(){var e=this;return b({},F.ADD_SLOT,(function(t,n){var r=n.x,i=n.y,o=n.assetId,a=e.rootState.runtime.editing.editingArmatureId,s=e.getAssetById(o),l=e.getCurRootBone();if(s&&l){var u=e.rootState.editor.over.overBone;if(u>0)l=e.rootState.runtime.dragonbones.armatureMap[a].bones.map[u];var c=l.globalTransform||l.transform,h=vp.transformInverseApplyPoint(c,{x:r,y:i}),d=e.getId(),f=e.getId(),p={name:s.name,id:d,parentId:l.id,zOrder:0,displayIndex:0,displays:{ids:[f],map:b({},f,{name:s.name,id:f,transform:{x:h.x,y:h.y,scaleX:1,scaleY:1,skewX:0,skewY:0},type:T.IMAGE,pivot:[.5,.5],assetId:o,width:0,height:0})}},v=(e.rootState.runtime.dragonbones.assetMap,e.rootState.library);Ep.getAssetSize(s,v).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var n=e[0],r=e[1];p.displays.map[f].width=n,p.displays.map[f].height=r}t.commit(B.ADD_SLOT,{armatureId:a,slot:p})})).catch((function(e){t.commit(B.ADD_SLOT,{armatureId:a,slot:p})}))}}))}}],[{key:"getExportTextureIdNameMap",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportPreviewTexture(t,n);case 2:return r=e.sent,i=Pt(r,2),i[0],o=i[1],e.abrupt("return",o);case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportNewTexture",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h,d,f,p,v,m,g,y;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.exportPreviewTexture(t,n);case 2:for(l in r=e.sent,i=Pt(r,2),o=i[0],a=i[1],s=[],o)for(u=o[l],c=0,h=u.SubTexture.length;c<h;c++)d=u.SubTexture[c],s.push({width:d.width,height:d.height,assetId:d.assetId,name:d.name,x:0,y:0});if(s.length){e.next=10;break}return e.abrupt("return",[void 0,void 0,void 0]);case 10:return f="texture",p=t.name,1024,2,2,e.next=17,IT.packTextures(1024,2,2,s);case 17:return v=e.sent,e.next=20,IT.drawTexture(v,s,f,p);case 20:return m=e.sent,g=[m],e.next=24,IT.createTextureConfig(v,s,f,p);case 24:return y=e.sent,e.abrupt("return",[y,g,a]);case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"exportFiles",value:function(e,t){var n={};for(var r in e){var i=e[r],o=t.files[i.fileId];n[i.fileId]=o}return n}},{key:"exportPreviewTexture",value:function(){var e=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,w,T,S,k,C,A,I,O,P,M;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in o=t.name,a=[],t.armatureMap)if((l=t.armatureMap[s])&&(!r||l.id===r))for(u=0,c=l.slots.ids.length;u<c;u++)for(h=l.slots.map[l.slots.ids[u]],d=0,f=h.displays.ids.length;d<f;d++)p=h.displays.ids[d],(v=h.displays.map[p]).assetId&&-1===a.indexOf(v.assetId)&&a.push(v.assetId);m={},g={},y={},b=0,_=a.length;case 7:if(!(b<_)){e.next=41;break}if(x=a[b],w=this.findAssetById(x,t.assetMap)){e.next=12;break}return e.abrupt("continue",38);case 12:T=!1,g[w.name]?T=!0:g[w.name]=!0,e.t0=w.type,e.next=e.t0===E.JPEG||e.t0===E.JPG||e.t0===E.PNG?17:e.t0===E.SUB_TEXTURE?29:38;break;case 17:if(S=w.fileIds[0],k=m[S]){e.next=28;break}return e.next=22,Ep.getAssetSize(w,n);case 22:C=e.sent,A=T?w.name+"_"+x:w.name,"id"===i&&(A=x),k={assetId:x,fileId:S,width:C[0],height:C[1],name:o,imagePath:w.name,SubTexture:[{width:C[0],height:C[1],y:0,x:0,name:A,assetId:w.id}]},m[S]=k,y[x]=A;case 28:return e.abrupt("break",38);case 29:return I=T?w.name+"_"+x:w.name,"id"===i&&(I=x),O=w.fileIds[1],(P=m[O])||(P={assetId:x,fileId:O,name:o,SubTexture:[]},m[O]=P),M={x:w.data.x,y:w.data.y,width:w.data.width,height:w.data.height,name:I,assetId:w.id},P.SubTexture.push(M),y[x]=I,e.abrupt("break",38);case 38:b++,e.next=7;break;case 41:return e.abrupt("return",[m,y]);case 42:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"findAssetById",value:function(e,t){if(t[e])return t[e];for(var n in t){var r=t[n],i=e;if(r.children)for(var o=0,a=r.children.length;o<a;o++)if(r.children[o].id===i)return r.children[o]}}},{key:"findAllAssetByArmature",value:function(e){for(var t=[],n=0,r=e.slots.ids.length;n<r;n++)for(var i=e.slots.ids[n],o=e.slots.map[i],a=0,s=o.displays.ids.length;a<s;a++){var l=o.displays.ids[a],u=o.displays.map[l];u.assetId&&-1===t.indexOf(u.assetId)&&t.push(u.assetId)}}}]),n}(mp),PT=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,"armatureMap")}return f(n,[{key:"getCurArmature",value:function(){var e=this.rootState.runtime.editing.editingArmatureId;return this.rootState.runtime.dragonbones.armatureMap[e]}},{key:"getCurAnimation",value:function(){var e=this.getCurArmature(),t=this.rootState.runtime.editing.selectedAnimationId;if(e.animations&&e.animations.includes(t))return this.rootState.runtime.dragonbones.animationMap[t]}},{key:"getBoneById",value:function(e){return this.getCurArmature().bones.map[e]}},{key:"getSlotById",value:function(e){return this.getCurArmature().slots.map[e]}},{key:"createBoneFrameData",value:function(e,t,n,r){var i={id:-1,frame:r,value:{},curve:[1]};switch(n){case k.TRANSLATE:i.value={x:t.x-e.transform.x,y:t.y-e.transform.y};break;case k.SCALE:i.value={x:t.scaleX/e.transform.scaleX,y:t.scaleY/e.transform.scaleY};break;case k.ROTATE:i.value={rotate:t.skewX-e.transform.skewX}}return i}},{key:"createSlotFrameData",value:function(e,t,n,r){var i={id:-1,frame:r,value:0};switch(n){case k.COLOR:i.value=t,i.curve=[1];break;case k.DISPLAY_INDEX:i.value=t;break;default:throw new Error("not support slot frame type: "+n)}return i}},{key:"getDiffITransformKey",value:function(e,t){for(var n=[],r=["x","y","scaleX","scaleY","skewX","skewY"],i=0,o=r.length;i<o;i++){var a=r[i];vp.isNumberEqual(e[a],t[a],1e-4)||n.push(a)}return n}},{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e,t){})),b(e,K.LOAD_SUCCESS,(function(e,t){if(t){var n=t.runtime.dragonbones.armatureMap;Object.assign(e,n)}})),b(e,B.ADD_SLOT,(function(e,t){var r=t.armatureId,i=t.slot,o=e[r];o.slots.ids.push(i.id),o.slots.map[i.id]=i,n.updateGlobalTransform(o)})),b(e,G.ADD_BONE,(function(e,t){var r=t.armatureId,i=t.bone,o=e[r];if(o.bones.ids.indexOf(i.id)>=0||o.bones.map[i.id])throw new Error("same bone id:"+i.id);o.bones.ids.push(i.id),o.bones.map[i.id]=i,n.updateGlobalTransform(o)})),b(e,D.ADD_ARMATURES,(function(e,r){for(var i=r.armatures,o=0,a=i.length;o<a;o++){var s=i[o];if(s){if(s.id||(s.id=t.getId()),e[s.id])throw new Error("same armature id:"+s.id);e[s.id]=s,n.updateGlobalTransform(s)}}})),b(e,P.UPDATE_ANIMATED_PROPERTY,(function(e,r){var i=r.armatureId,o=r.animatedProperties,a=e[i];if(a){if(n.clearArmatureAnimationData(a),a.bones)for(var s=0,l=a.bones.ids.length;s<l;s++){var u=a.bones.ids[s],c=a.bones.map[u];if(c&&o.bones){var h=o.bones[u];h&&(c.animatedProperties=h)}}if(a.constraint.ik)for(var d in a.constraint.ik){var f=a.constraint.ik[d];o.iks&&o.iks[d]&&(f.animatedValue=o.iks[d].ik)}if(a.slots)for(var p=0,v=a.slots.ids.length;p<v;p++){var m=a.slots.ids[p],g=a.slots.map[m];if(o.slots&&o.slots[m]){var y=o.slots[m];if(void 0!==y.color){var b=vp.splitAlphaColor(y.color);g.animatedColor=b.color,g.animatedAlpha=b.alpha}void 0!==y.displayIndex&&(g.animatedDisplayIndex=y.displayIndex)}if(g.displays)for(var _=0,x=g.displays.ids.length;_<x;_++){var E=g.displays.ids[_],w=g.displays.map[E];if(o.ffds&&o.ffds[E]){var T=w.mesh.points,S={},k=o.ffds[E].ffd;for(var C in k){var A=k[C];if(A){var I=T[C].vertices;S[C]=[I[0]+A[0],I[1]+A[1]]}}w.mesh.animatedFFD=S}}}r.animatedProperties.zOrder&&r.animatedProperties.zOrder.zOrder&&(a.animatedZOrder=r.animatedProperties.zOrder.zOrder);t.rootState.runtime.editing.selectedAnimationId,t.rootState.editor.dopesheet.curTime;var O=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(a,O)}})),b(e,M.ADD_ANIMATION,(function(e,t){var n=t.armatureId,r=t.animation,i=e[n];i.animations||(i.animations=[]),i.animations.push(r.id)})),b(e,M.REMOVE_ANIMATION,(function(e,t){var n=t.armatureId,r=t.animationId,i=e[n],o=i.animations.indexOf(r);o>=0&&i.animations.splice(o,1)})),b(e,D.CHANGE_SLOT_ORDER,(function(e,t){var n=t.id,r=t.newOrder,i=e[n];i.slots&&(i.slots.ids=r)})),b(e,D.CACHE_SLOT_ORDER,(function(e,t){var n=t.id,r=t.newOrder;e[n].cacheZOrder=r})),b(e,G.UPDATE_LOCAL_TRANSFORMS,(function(e,t){var r=t.armatureId,i=t.bones,o=e[r];for(var a in i){var s=o.bones.map[a];s&&Object.assign(s.transform,i[a].local)}n.clearGlobalTransform(o),n.updateGlobalTransform(o)})),b(e,B.UPDATE_LOCAL_TRANSFORMS,(function(e,r){var i=r.armatureId,o=r.slots,a=e[i],s=t.rootState.runtime.editing.editMode;for(var l in o){var u=a.slots.map[l],c=n.getSlotCurDisplay(u);Object.assign(c.transform,o[l].local)}n.clearSlotGlobalTransform(a),n.updateSlotGlobalTransform(a,s),n.calculateRigging(a,s)})),b(e,G.UPDATE_CACHE_TRANSFORMS,(function(e,r){var i=e[t.rootState.runtime.editing.editingArmatureId];for(var o in r){var a=parseInt(o),s=r[o],l=i.bones.map[a];l.cacheTransform=s.local,l.cacheProperties||(l.cacheProperties={}),l.cacheProperties.transform=s.local}t.rootState.runtime.editing.selectedAnimationId,t.rootState.editor.dopesheet.curTime;var u=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(i,u)})),b(e,G.UPDATE_PROPERTIES,(function(e,r){var i=r.armatureId,o=r.bones,a=e[i],s=!1;for(var l in o){var u=o[l],c=a.bones.map[l];if(c)for(var h in u){var d=u[h];c[h]=d,"inheritRotation"!==h&&"inheritScale"!==h||(s=!0)}}if(s){var f=t.rootState.runtime.editing.editMode;n.calculateAnimatedProperty(a,f)}})),b(e,D.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.properties,i=e[n];if(i)for(var o in r){var a=r[o];i[o]=a}})),b(e,B.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slots,i=e[n];for(var o in r){var a=r[o],s=i.slots.map[o];if(s)for(var l in a){var u=a[l];s[l]=u}}})),b(e,B.UPDATE_CACHE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slots,i=e[n];for(var o in r){var a=r[o],s=i.slots.map[o];if(s)for(var l in a){var u=a[l];"color"===l?s.cacheColor=u:"alpha"===l?s.cacheAlpha=u:"displayIndex"===l&&(s.cacheDisplayIndex=u)}}})),b(e,j.UPDATE_PROPERTIES,(function(e,t){var n=t.armatureId,r=t.slotId,i=t.displays,o=e[n].slots.map[r];if(o)for(var a in i){var s=i[a],l=parseInt(a),u=o.displays.map[l];if(u&&u.id===l)for(var c in s){var h=s[c];u[c]=h}}})),b(e,G.SET_PARENT,(function(e,r){for(var i=r.armatureId,o=r.boneIds,a=r.parentId,s=r.newLocalTransforms,l=e[i],u=0,c=o.length;u<c;u++){var h=o[u],d=l.bones.map[h];d.parentId=a,d.transform=s[h].local}var f=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(l),n.updateGlobalTransform(l,f)})),b(e,B.SET_PARENT,(function(e,r){for(var i=r.armatureId,o=r.slotIds,a=r.parentId,s=r.newLocalTransforms,l=e[i],u=0,c=o.length;u<c;u++){var h=o[u],d=l.slots.map[h];if(d.parentId=a,s[h])n.getSlotCurDisplay(d).transform=s[h].local}var f=t.rootState.runtime.editing.editMode;n.clearSlotGlobalTransform(l),n.updateSlotGlobalTransform(l,f)})),b(e,j.SET_PARENT,(function(e,t){for(var n=t.armatureId,r=t.displays,i=e[n],o=0,a=r.length;o<a;o++)for(var s=r[o],l=s.slotId,u=s.displayId,c=s.parentId,h=s.local,d=i.slots.map[l],f=i.slots.map[c],p=0,v=d.displays.ids.length;p<v;p++){var m=d.displays.ids[p],g=d.displays.map[m];if(g.id===u){d.displayIndex===p&&(d.displayIndex=-1),s.local&&(g.transform=h),d.displays.ids.splice(p,1),delete d.displays.map[u],d.displays.ids.length>0&&d.displayIndex<0&&(d.displayIndex=0),f.displays||(f.displays={ids:[],map:{}}),f.displays.ids.push(g.id),f.displays.map[g.id]=g,f.displayIndex<0&&(f.displayIndex=0);break}}})),b(e,G.ADD_IK,(function(e,r){var i=r.armatureId,o=r.ik,a=e[i];a.constraint.ik[o.id]=o;var s=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(a),n.updateGlobalTransform(a,s)})),b(e,G.DELETE_IKS,(function(e,r){for(var i=r.armatureId,o=r.ikIds,a=e[i],s=0,l=o.length;s<l;s++){var u=o[s];delete a.constraint.ik[u]}var c=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(a),n.updateGlobalTransform(a,c)})),b(e,G.UPDATE_IK,(function(e,r){var i=r.armatureId,o=r.ikId,a=r.properties,s=e[i],l=s.constraint.ik[o];for(var u in a)l[u]=a[u];var c=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(s),n.updateGlobalTransform(s,c)})),b(e,G.UPDATE_CACHE_IK,(function(e,r){var i,o,a=r.armatureId,s=r.ikId,l=r.properties,u=e[a],c=u.constraint.ik[s];c.cacheValue||(c.cacheValue={bendPositive:(null===(i=c.animatedValue)||void 0===i?void 0:i.bendPositive)||c.bendPositive,weight:(null===(o=c.animatedValue)||void 0===o?void 0:o.weight)||c.weight});for(var h in l)c.cacheValue[h]=l[h];var d=t.rootState.runtime.editing.editMode;n.clearGlobalTransform(u),n.updateGlobalTransform(u,d)})),b(e,G.DELETE_BONES,(function(e,t){for(var n=t.armatureId,r=t.boneIds,i=e[n],o=0,a=r.length;o<a;o++){var s=r[o],l=i.bones.ids.indexOf(s);i.bones.ids.splice(l,1),i.bones.map[s]=void 0,delete i.bones.map[s]}})),b(e,B.DELETE_SLOTS,(function(e,t){for(var n=t.armatureId,r=t.slotIds,i=e[n],o=0,a=r.length;o<a;o++){var s=r[o],l=i.slots.ids.indexOf(s);i.slots.ids.splice(l,1),i.slots.map[s]=void 0,delete i.slots.map[s]}})),b(e,H.UPDATE_MESH,(function(e,r){var i=r.armatureId,o=r.slotId,a=r.displayId,s=r.mesh,l=e[i],u=l.slots.map[o],c=n.getSlotDisplay(u,a);if(c.id===a){if(s.points)for(var h in s.points){var d=s.points[h];void 0!==d?(c.mesh.points[h]||(c.mesh.points[h]={}),d.vertices&&(c.mesh.points[h].vertices=d.vertices),d.uvs&&(c.mesh.points[h].uvs=d.uvs)):(c.mesh.points[h]=void 0,delete c.mesh.points[h])}if(s.triangles&&(c.mesh.triangles=s.triangles),s.outlines&&(c.mesh.outlines=s.outlines),s.userEdges&&(c.mesh.userEdges=s.userEdges),c.mesh.bonePose&&c.mesh.slotPose){var f=t.rootState.runtime.editing.editMode;n.calculateRiggingDisplay(l,c,f)}}})),b(e,H.UPDATE_CACHE_FFD,(function(e,t){var r=t.armatureId,i=t.slotId,o=t.displayId,a=t.mesh,s=e[r].slots.map[i],l=n.getSlotDisplay(s,o),u={};for(var c in a.points){var h=a.points[c];h.vertices&&(u[c]=[h.vertices[0],h.vertices[1]])}l.mesh.cacheFFD=u})),b(e,H.UPDATE_RIG_BONE,(function(e,r){var i=r.armatureId,o=r.slotId,a=r.displayId,s=r.bonePose,l=r.slotPose,u=r.boneWeights,c=e[i],h=c.slots.map[o],d=n.getSlotDisplay(h,a);if(r.hasOwnProperty("slotPose")&&(void 0===l?(d.mesh.slotPose=void 0,delete d.mesh.slotPose):d.mesh.slotPose=l),r.hasOwnProperty("bonePose"))if(void 0===s)d.mesh.bonePose=void 0,delete d.mesh.bonePose;else for(var f in d.mesh.bonePose||(d.mesh.bonePose={}),s)void 0===s[f]?delete d.mesh.bonePose[f]:d.mesh.bonePose[f]?(d.mesh.bonePose[f].pose=s[f].pose,s[f].color&&(d.mesh.bonePose[f].color=s[f].color)):d.mesh.bonePose[f]={pose:s[f].pose,color:s[f].color};if(r.hasOwnProperty("boneWeights"))if(void 0===u)d.mesh.boneWeights=void 0,delete d.mesh.boneWeights;else for(var p in u){var v=u[p];if(void 0!==v)for(var m in d.mesh.boneWeights||(d.mesh.boneWeights={}),d.mesh.boneWeights[p]||(d.mesh.boneWeights[p]={}),v)d.mesh.boneWeights[p][m]=v[m],void 0===v[m]&&delete d.mesh.boneWeights[p][m];else d.mesh.boneWeights[p]=void 0,delete d.mesh.boneWeights[p]}var g=t.rootState.runtime.editing.editMode;n.calculateRiggingDisplay(c,d,g)})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},L.CHANGE_SLOT_ORDER,(function(e,n){var r=t.rootState.runtime.editing.editMode,i=t.rootState.editor.dopesheet.curTime;switch(r){case Y.ANIMATION:if(t.rootState.editor.dopesheet.autoKey){var o=t.getCurArmature();if(o){var a=t.getCurAnimation();a||(a={id:0,name:de});var s,l={armatureId:o.id,animationId:a.id,timelineInfo:{zOrder:[]}};a&&a.zOrder&&(l.animationId=a.id,s=a.zOrder),[k.Z_ORDER].forEach((function(e){var t=i;if(s){var r=gp.getTimelineByType(s,e);if(r){var o=gp.getTimelineRealFrame(r,i);t=Math.floor(o)}}var a={id:-1,frame:t,value:n.newOrder};l.timelineInfo.zOrder||(l.timelineInfo.zOrder=[]),l.timelineInfo.zOrder.push(a)})),e.commit(M.AUTO_KEY,l)}}else e.commit(D.CACHE_SLOT_ORDER,n);break;case Y.POSE:e.commit(D.CHANGE_SLOT_ORDER,n)}})),b(e,F.UPDATE_PROPERTIES,(function(e,r){var i=r.armatureId,o=r.slots,a=r.addKey,s=["color","alpha","displayIndex"];if(t.rootState.runtime.editing.editMode===Y.ANIMATION){var l=t.rootState.editor.dopesheet.autoKey||a,u={},c={},h=!1,d=!1,f={};for(var p in o){var v=parseInt(p),m=o[p];for(var g in m)if(s.includes(g)){if(u[p]||(u[p]={}),f[p]||(f[p]={}),u[p][g]=m[g],f[p][g]=m[g],l&&("color"===g||"alpha"===g)){var y=t.getSlotById(v),b=f[v].color||n.getSlotCurColor(y),_=f[v].alpha||n.getSlotCurAlpha(y),x=vp.mergeAlphaColor(b,_);u[p].color=x,"alpha"===g&&delete u[p].alpha}h=!0}else c[p]||(c[p]={}),c[p][g]=m[g],d=!0}if(d&&e.commit(B.UPDATE_PROPERTIES,{armatureId:i,slots:c}),h){var E=t.rootState.editor.dopesheet.curTime;if(l){var w=t.getCurArmature();if(w){var T=t.getCurAnimation();T||(T={id:0,name:de});var S={armatureId:w.id,animationId:T.id,timelineInfo:{slot:{}}};for(var C in u){var A=parseInt(C),I=t.getSlotById(A),O=u[C];S.timelineInfo.slot[A]={};var P=void 0;T&&T.slots&&(S.animationId=T.id,P=T.slots[A]);var R=[],N=[],D=Object.keys(O);D.includes("color")&&(R.push(k.COLOR),N.push(O.color)),D.includes("displayIndex")&&(R.push(k.DISPLAY_INDEX),N.push(O.displayIndex));for(var L=0,F=R.length;L<F;L++){var U=R[L],H=N[L],j=E;if(P){var z=gp.getTimelineByType(P,U);if(z){var V=gp.getTimelineRealFrame(z,E);j=Math.floor(V)}}var G=t.createSlotFrameData(I,H,U,j);S.timelineInfo.slot[A]||(S.timelineInfo.slot[A]={}),S.timelineInfo.slot[A][U]||(S.timelineInfo.slot[A][U]=[]),S.timelineInfo.slot[A][U].push(G)}}e.commit(M.AUTO_KEY,S)}}else e.commit(B.UPDATE_CACHE_PROPERTIES,{armatureId:i,slots:u})}}else e.commit(B.UPDATE_PROPERTIES,r)})),b(e,V.ADD_BONE,(function(e,t){e.commit(G.ADD_BONE,t),e.commit(G.SELECT_BONES,[t.bone.id])})),b(e,F.UPDATE_LOCAL_TRANSFORMS,(function(e,r){var i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.runtime.dragonbones.armatureMap[i];for(var a in e.commit(gmvc.GHistoryMutation.MERGE_START),r){var s=o.slots.map[a],l=n.getSlotCurDisplay(s);if(l&&l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD){var u={armatureId:o.id,slotId:s.id,displayId:l.id,mesh:{points:{}}},c=r[a].global;for(var h in l.mesh.riggingFFD){var d=parseInt(h),f=l.mesh.riggingFFD[h],p={x:f[0],y:f[1]},v=vp.transformApplyPoint(c,p),m=n.getMeshPointFFDByRiggingPos(o,l,d,[v.x,v.y]);u.mesh.points[h]={vertices:m}}e.dispatch(U.UPDATE_MESH,u)}}e.commit(B.UPDATE_LOCAL_TRANSFORMS,{armatureId:i,slots:r}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,V.UPDATE_GLOBAL_TRANSFORMS,(function(e,r){var i=t.rootState.runtime.editing.editMode;for(var o in r){var a=parseInt(o),s=t.getBoneById(a),l=r[o],u=n.getBoneLocalTransformByGlobal(s,t.getCurArmature().bones.map,i,l.global);l.local=u}e.dispatch(V.UPDATE_LOCAL_TRANSFORMS,r)})),b(e,V.UPDATE_LOCAL_TRANSFORMS,(function(e,n){var r=t.rootState.runtime.editing.editMode,i=t.rootState.runtime.editing.editingArmatureId;switch(r){case Y.POSE:e.commit(G.UPDATE_LOCAL_TRANSFORMS,{armatureId:i,bones:n});break;case Y.ANIMATION:var o=t.rootState.editor.dopesheet.autoKey,a=t.rootState.editor.dopesheet.curTime;for(var s in n)if(n[s].addKey){o=!0;break}if(o){var l=t.getCurArmature();if(l){var u=t.getCurAnimation(),c=u?u.id:0,h={armatureId:l.id,animationId:c,timelineInfo:{bone:{}}};for(var d in n){var f=parseInt(d),p=t.getBoneById(f),v=n[d];h.timelineInfo.bone[f]={};var m=void 0;u&&u.bones&&(h.animationId=u.id,m=u.bones[f]);var g=[];(v.diffKeys.includes("x")||v.diffKeys.includes("y"))&&g.push(k.TRANSLATE),(v.diffKeys.includes("scaleX")||v.diffKeys.includes("scaleY"))&&g.push(k.SCALE),(v.diffKeys.includes("skewX")||v.diffKeys.includes("skewY"))&&g.push(k.ROTATE);for(var y=0,b=g.length;y<b;y++){var _=g[y],x=a;if(m){var E=gp.getTimelineByType(m,_);if(E){var w=gp.getTimelineRealFrame(E,a);x=Math.floor(w)}}var T=t.createBoneFrameData(p,v.local,_,x);h.timelineInfo.bone[f]||(h.timelineInfo.bone[f]={}),h.timelineInfo.bone[f][_]||(h.timelineInfo.bone[f][_]=[]),h.timelineInfo.bone[f][_].push(T)}}e.commit(M.AUTO_KEY,h)}}else e.commit(G.UPDATE_CACHE_TRANSFORMS,n)}})),b(e,V.UPDATE_ROTATE_FRAME,(function(e,n){n.armatureId;var r=n.bones;if(t.rootState.runtime.editing.editMode===Y.ANIMATION){var i=t.rootState.editor.dopesheet.autoKey,o=t.rootState.editor.dopesheet.curTime;if(i){var a=t.getCurArmature();if(a){var s=t.getCurAnimation(),l=s?s.id:0,u={armatureId:a.id,animationId:l,timelineInfo:{bone:{}}};for(var c in r){var h,d,f=parseInt(c),p=t.getBoneById(f),v=p.mixTransform?p.mixTransform.skewX:p.transform.skewX;null!==(h=p.cacheTransform)&&void 0!==h&&h.skewX?v=p.cacheTransform.skewX:null!==(d=p.animatedTransform)&&void 0!==d&&d.skewX&&(v=p.animatedTransform.skewX);var m=r[c];u.timelineInfo.bone[f]={};var g=void 0;s&&s.bones&&(u.animationId=s.id,g=s.bones[f]);var y=k.ROTATE,b=o,_=void 0;if(!g)return;if(g){var x=gp.getTimelineByType(g,y);if(!x)return;if(x){var E=gp.getTimelineRealFrame(x,o);if(b=Math.floor(E),(_=gp.getFrameByFrameIndex(x,b))||(_=gp.getFrameBeforeFrameIndex(x,b))&&(b=_.frame),!_)return}}var w=t.createBoneFrameData(p,{skewX:v,skewY:v,x:0,y:0,scaleX:1,scaleY:1},y,b);for(var T in m)w.value[T]=m[T];delete w.value.rotate,w.value.clockwise===S.AUTO?w.value.clockwiseNum=0:w.value.clockwise||_.value.clockwise||(w.value.clockwiseNum=0),u.timelineInfo.bone[f]||(u.timelineInfo.bone[f]={}),u.timelineInfo.bone[f][y]||(u.timelineInfo.bone[f][y]=[]),u.timelineInfo.bone[f][y].push(w)}e.commit(M.AUTO_KEY,u)}}}})),b(e,L.UPDATE_PROPERTIES,(function(e,t){})),b(e,V.SET_PARENT,(function(e,n){if(t.rootState.runtime.editing.editMode===Y.POSE){for(var r=n.armatureId,i=n.boneIds,o=n.parentId,a=e._state[r],s=a.bones.map[o],l={},u=0,c=i.length;u<c;u++){var h=i[u],d=a.bones.map[h],f=vp.transformInvertCross(s.globalTransform,d.globalTransform);!1===d.inheritRotation&&(f.skewX=d.transform.skewX,f.skewY=d.transform.skewY),!1===d.inheritScale&&(f.scaleX=d.transform.scaleX,f.scaleY=d.transform.scaleY),l[h]={local:f}}e.commit(G.SET_PARENT,Re(Re({},n),{},{newLocalTransforms:l}))}else yf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),b(e,F.SET_PARENT,(function(e,r){if(t.rootState.runtime.editing.editMode===Y.POSE){for(var i=r.armatureId,o=r.slotIds,a=r.parentId,s=e._state[i],l=s.bones.map[a],u={},c=0,h=o.length;c<h;c++){var d=o[c],f=s.slots.map[d],p=n.getSlotCurDisplay(f);if(p){var v=vp.transformInvertCross(l.globalTransform,p.globalTransform);u[d]={local:v}}}e.commit(B.SET_PARENT,Re(Re({},r),{},{newLocalTransforms:u}))}else yf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),b(e,z.SET_PARENT,(function(e,r){if(t.rootState.runtime.editing.editMode===Y.POSE){for(var i=r.armatureId,o=r.displays,a=0,s=o.length;a<s;a++){var l=o[a],u=l.slotId,c=l.displayId,h=l.parentId,d=e._state[i],f=d.slots.map[h],p=d.bones.map[f.parentId],v=d.slots.map[u],m=n.getSlotDisplay(v,c);if(m){var g=vp.transformInvertCross(p.globalTransform,m.globalTransform);r.displays[a].local=g}}e.commit(j.SET_PARENT,r)}else yf.warn("\u8bf7\u5207\u6362\u5230\u9aa8\u67b6\u6a21\u5f0f\u540e\u8c03\u6574")})),b(e,V.ADD_IK_AT_TAIL,(function(e,r){var i=r.armatureId,o=r.parentId,a=r.childId,s=e._state[i];if(a&&s.bones.map[a].parentId!==o)throw new Error("child bone is not the child of parent bone");var l=e.rootState.runtime.editing.editMode,u=s.bones.map[o],c=n.getRootBone(s),h=a&&s.bones.map[a]||u,d=n.getBoneTailPosition(h,s,l);d=vp.transformInverseApplyPoint(c.globalTransform,d),e.commit(gmvc.GHistoryMutation.MERGE_START);var f={id:t.getId(),name:n.createBoneName("ik_target",s),parentId:c.id,transform:{x:d.x,y:d.y,skewX:0,skewY:0,scaleX:1,scaleY:1},length:0,inheritRotation:!0,inheritScale:!0};e.commit(G.ADD_BONE,{armatureId:i,bone:f});var p=n.createIKConStraintName(f.name+"_ik",s),v={id:t.getId(),name:p,targetId:f.id,parentId:o,childId:a,weight:1,bendPositive:!0,scaleEnabled:!1};e.commit(G.ADD_IK,{armatureId:i,ik:v}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,V.ADD_IK_BY_TARGET,(function(e,r){var i=r.armatureId,o=r.parentId,a=r.childId,s=r.targetId,l=e._state[i],u=l.bones.map[s];if(a&&l.bones.map[a].parentId!==o)throw new Error("child bone is not the child of parent bone");if(s===o||s===a)throw new Error("target bone is the same as parent bone or child bone");if(n.isDescendantBone(l,o,s))throw new Error("target bone is the descendant of parent bone");var c=n.createIKConStraintName(u.name+"_ik",l),h={id:t.getId(),name:c,targetId:s,parentId:o,childId:a,weight:1,bendPositive:!0,scaleEnabled:!1};e.commit(G.ADD_IK,{armatureId:i,ik:h})})),b(e,V.DELETE_IKS,(function(e,t){e.commit(G.DELETE_IKS,t)})),b(e,V.UPDATE_IK,(function(e,n){var r=t.rootState.runtime.editing.editMode;if(r===Y.POSE)e.commit(G.UPDATE_IK,n);else if(r===Y.ANIMATION){var i=t.getCurArmature(),o=t.getCurAnimation();o||(o={id:0,name:de});var a=t.rootState.editor.dopesheet.curTime,s=n.ikId,l=n.properties,u=n.addKey;if(t.rootState.editor.dopesheet.autoKey||u){var c=i.constraint.ik[s],h=Re({bendPositive:c.bendPositive,weight:c.weight},l),d={armatureId:i.id,animationId:o.id,timelineInfo:{ik:b({},s,b({},k.IK,[{id:-1,frame:a,value:h,curve:[1]}]))}};e.commit(M.AUTO_KEY,d)}else e.commit(G.UPDATE_CACHE_IK,n)}})),b(e,P.ADD_KEY,(function(e,t){e.commit(M.AUTO_KEY,t)})),b(e,X.DELETE_SELECTED_BONES_AND_SLOTS,(function(e){var r=t.rootState.runtime.editing.selectedBoneIds,i=t.rootState.runtime.editing.selectedSlotIds,o=t.rootState.runtime.editing.editingArmatureId,a=e._state[o],s=n.getAllDescendantBonesAndSlotsAndIKsAndSelf(a,r),l=n.getRootBone(a),u=s.bones,c=u.indexOf(l.id);c>=0&&u.splice(c,1);var h=s.slots.concat(i);if(h=Array.from(new Set(h)),e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(G.SELECT_BONES,[]),e.commit(B.SELECT_SLOTS,[]),s.iks&&e.commit(G.DELETE_IKS,{armatureId:o,ikIds:s.iks}),u&&u.length){var d=n.findRiggingDisplayByBoneIds(a,u);if(d&&d.length)for(var f=0,p=d.length;f<p;f++){var v=d[f],m=v.slotId,g=v.displayId,y=v.boneIds;e.dispatch(U.DELETE_RIG_BONES,{armatureId:o,slotId:m,displayId:g,boneIds:y})}e.commit(G.DELETE_BONES,{armatureId:o,boneIds:u})}h&&h.length&&e.commit(B.DELETE_SLOTS,{armatureId:o,slotIds:h}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,V.DELETE_BONES,(function(e,r){var i=r.armatureId,o=r.boneIds,a=e._state[i],s=n.getAllDescendantBonesAndSlotsAndIKsAndSelf(a,o);yf.confirm("\u5220\u9664\u9aa8\u9abc","\u5220\u9664\u9aa8\u9abc\u4f1a\u5220\u9664\u6240\u6709\u5b50\u9aa8\u9abc\u63d2\u69fd\u548cik\uff0c\u662f\u5426\u7ee7\u7eed\uff1f","\u786e\u5b9a\u5220\u9664","\u53d6\u6d88",(function(){e.commit(gmvc.GHistoryMutation.MERGE_START);var r=t.rootState.runtime.editing.selectedBoneIds;if(vp.isArrayCross(r,s.bones)&&e.commit(G.SELECT_BONES,[]),s.iks&&e.commit(G.DELETE_IKS,{armatureId:i,ikIds:s.iks}),s.bones){var o=n.findRiggingDisplayByBoneIds(a,s.bones);if(o&&o.length)for(var l=0,u=o.length;l<u;l++){var c=o[l],h=c.slotId,d=c.displayId,f=c.boneIds;e.dispatch(U.DELETE_RIG_BONES,{armatureId:i,slotId:h,displayId:d,boneIds:f})}e.commit(G.DELETE_BONES,{armatureId:i,boneIds:s.bones})}s.slots&&e.commit(B.DELETE_SLOTS,{armatureId:i,slotIds:s.slots}),e.commit(gmvc.GHistoryMutation.MERGE_END)}))})),b(e,F.DELETE_SLOTS,(function(e,n){n.armatureId;var r=n.slotIds;yf.confirm("\u5220\u9664\u63d2\u69fd","","\u786e\u5b9a\u5220\u9664","\u53d6\u6d88",(function(){e.commit(gmvc.GHistoryMutation.MERGE_START);var i=t.rootState.runtime.editing.selectedSlotIds;vp.isArrayCross(i,r)&&e.commit(B.SELECT_SLOTS,[]),e.commit(B.DELETE_SLOTS,n),e.commit(gmvc.GHistoryMutation.MERGE_END)}))})),b(e,U.UPDATE_MESH,(function(e,r){var i=t.rootState.runtime.editing.editMode;if(i===Y.POSE)e.commit(H.UPDATE_MESH,r);else if(i===Y.ANIMATION){var o=r.armatureId,a=r.slotId,s=r.displayId,l=r.mesh,u=t.rootState.runtime.dragonbones.armatureMap[o],c=u.slots.map[a],h=n.getSlotDisplay(c,s),d=t.getCurAnimation();d||(d={id:0,name:de});var f=t.rootState.editor.dopesheet.curTime;if(t.rootState.editor.dopesheet.autoKey||r.addKey){var p={},v=h.mesh;for(var m in v.points){var g=h.mesh.points[m],y=l.points[m];if(void 0===y&&(h.mesh.cacheFFD&&h.mesh.cacheFFD[m]?y={vertices:h.mesh.cacheFFD[m]}:h.mesh.animatedFFD&&h.mesh.animatedFFD[m]&&(y={vertices:h.mesh.animatedFFD[m]})),y){var _=y.vertices[0]-g.vertices[0],x=y.vertices[1]-g.vertices[1];0===_&&0===x||(p[m]=[_,x])}}var E={armatureId:u.id,animationId:d.id,timelineInfo:{ffd:b({},h.id,b({},k.FFD,[{id:-1,frame:f,value:p,curve:[1]}]))}};e.commit(M.AUTO_KEY,E)}else e.commit(H.UPDATE_CACHE_FFD,r)}})),b(e,U.RESET_MESH,(function(e,r){var i=r.armatureId,o=r.slotId,a=r.displayId,s=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[o],l=n.getSlotDisplay(s,a);if(l.mesh&&l.width&&l.height){var u=l.width/2,c=l.height/2,h={points:{0:{vertices:[-u,-c],uvs:[0,0]},1:{vertices:[u,-c],uvs:[1,0]},2:{vertices:[-u,c],uvs:[0,1]},3:{vertices:[u,c],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]};for(var d in l.mesh.points)h.points[d]||(h.points[d]=void 0);var f={armatureId:i,slotId:o,displayId:a,mesh:h};e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(H.UPDATE_MESH,f),e.commit(W.UPDATE_MESH_TOOL,{curTool:ee.EDIT}),e.commit(gmvc.GHistoryMutation.MERGE_END)}})),b(e,U.ADD_RIG_BONE,(function(e,r){var i=r.armatureId,o=r.slotId,a=r.displayId,s=r.boneId,l=r.bonePose,u=r.autoWeight,c=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[o],h=n.getSlotDisplay(c,a),d={armatureId:i,slotId:o,displayId:a};h.mesh.slotPose||(d.slotPose=Re({},h.globalTransform));var f=n.getNextRiggingBoneColor(h.mesh);d.bonePose=b({},s,{pose:l,color:f});var p={};for(var v in h.mesh.points)h.mesh.boneWeights&&h.mesh.boneWeights[v]?p[v]=b({},s,0):p[v]=b({},s,1);d.boneWeights=p,u&&e.commit(W.FLAG_AUTO_WEIGHT,{autoWeight:u}),e.commit(H.UPDATE_RIG_BONE,d)})),b(e,U.DELETE_RIG_BONES,(function(e,r){var i=r.armatureId,o=r.slotId,a=r.displayId,s=r.boneIds,l=t.rootState.runtime.dragonbones.armatureMap[i].slots.map[o],u=n.getSlotDisplay(l,a);if(Object.keys(u.mesh.bonePose).length!==s.length){for(var c={armatureId:i,slotId:o,displayId:a,bonePose:{}},h=0,d=s.length;h<d;h++){var f=s[h];c.bonePose[f]=void 0}var p={};for(var v in u.mesh.points){var m=parseInt(v);p[m]=n.deleteBoneWeight(u.mesh.boneWeights,m,s);for(var g=0,y=s.length;g<y;g++){var b=s[g];p[m][b]=void 0}}c.boneWeights=p,e.commit(H.UPDATE_RIG_BONE,c)}else{for(var _=0,x=s.length;_<x;_++){var E=s[_];if(!u.mesh.bonePose[E])throw new Error("bone is not in rig: "+E)}var w={armatureId:i,slotId:o,displayId:a,slotPose:void 0,bonePose:void 0,boneWeights:void 0};e.commit(H.UPDATE_RIG_BONE,w)}})),b(e,U.AUTO_WEIGHT,(function(e,r){return Ee(_e().mark((function i(){var o,a,s,l,u,c,h,d;return _e().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=r.armatureId,a=r.slotId,s=r.displayId,l=t.rootState.runtime.dragonbones.armatureMap[o],u=l.slots.map[a],(c=n.getSlotDisplay(u,s)).mesh&&c.mesh.bonePose){i.next=6;break}return i.abrupt("return");case 6:return i.next=8,n.calculateAutoWeight(l,c);case 8:h=i.sent,d={armatureId:o,slotId:a,displayId:s,boneWeights:h},e.commit(H.UPDATE_RIG_BONE,d),yf.info("\u81ea\u52a8\u6743\u91cd\u8ba1\u7b97\u5b8c\u6bd5");case 12:case"end":return i.stop()}}),i)})))()})),b(e,L.ADD_ARMATURE,(function(e,n){var r=t.getId(),i={id:t.getId(),name:"root",length:0,transform:{x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},parentId:0},o={id:r,name:n.name,bones:{ids:[i.id],map:b({},i.id,i)},slots:{ids:[],map:{}},skins:{ids:[],map:{}},constraint:{ik:{}}};e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(D.ADD_ARMATURES,{armatures:[o]}),e.commit(D.SELECT_ARMATURE,{armatureId:r}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,L.DELETE_ARMATURES,(function(e,n){var r=n.armatureIds,i=t.rootState.runtime.dragonbones.armatureMap,o=0;for(var a in i)o++;if(o!==r.length){for(var s=[],l=0,u=r.length;l<u;l++){var c=i[r[l]];c.animations&&(s=s.concat(c.animations))}e.commit(gmvc.GHistoryMutation.MERGE_START),s&&s.length&&e.commit(M.DELETE_ANIMATIONS,{animationIds:s}),e.commit(D.DELETE_ARMATURES,{armatureIds:r});var h=t.rootState.runtime.editing.editingArmatureId,d=0;if(r.indexOf(h)>=0)for(var f in i){var p=i[f];p&&r.indexOf(p.id)<0&&(d=p.id)}e.commit(D.SELECT_ARMATURE,{armatureId:d}),e.commit(gmvc.GHistoryMutation.MERGE_END)}else yf.warn("\u6700\u540e\u4e00\u4e2a\u9aa8\u67b6\u4e0d\u80fd\u5220\u9664")})),e}}],[{key:"clearArmatureAnimationData",value:function(e){if(e&&e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(delete i.animatedProperties,delete i.animatedTransform,delete i.cacheTransform,delete i.cacheProperties)}if(e.constraint.ik)for(var o in e.constraint.ik){var a=e.constraint.ik[o];a&&(delete a.animatedValue,delete a.cacheValue)}if(e.slots)for(var s=0,l=e.slots.ids.length;s<l;s++){var u=e.slots.ids[s],c=e.slots.map[u];if(c&&(delete c.animatedColor,delete c.animatedAlpha,delete c.animatedDisplayIndex,delete c.cacheColor,delete c.cacheAlpha,delete c.cacheDisplayIndex,c.displays))for(var h in c.displays.map){var d=c.displays.map[h];d&&d.mesh&&(delete d.mesh.animatedFFD,delete d.mesh.cacheFFD)}}delete e.animatedZOrder,delete e.cacheZOrder}},{key:"clearCache",value:function(e){if(e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(i.cacheTransform&&delete i.cacheTransform,i.cacheProperties&&delete i.cacheProperties)}if(e.slots)for(var o=0,a=e.slots.ids.length;o<a;o++){var s=e.slots.ids[o],l=e.slots.map[s];for(var u in l&&(delete l.cacheColor,delete l.cacheAlpha,delete l.cacheDisplayIndex),l.displays.map){var c=l.displays.map[u];c&&c.mesh&&c.mesh.cacheFFD&&delete c.mesh.cacheFFD}}if(e.cacheZOrder&&delete e.cacheZOrder,e.constraint&&e.constraint.ik)for(var h in e.constraint.ik){var d=e.constraint.ik[h];d&&d.cacheValue&&delete d.cacheValue}}},{key:"clearGlobalTransform",value:function(e){n.clearBoneGlobalTransform(e),n.clearSlotGlobalTransform(e)}},{key:"clearBoneGlobalTransform",value:function(e){if(e.bones)for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];i&&(i.globalTransform&&delete i.globalTransform,i.ikGlobalTransform&&delete i.ikGlobalTransform,i.ikTransform&&delete i.ikTransform,i.fkTransform&&delete i.fkTransform,i.fkGlobalTransform&&delete i.fkGlobalTransform,i.mixTransform&&delete i.mixTransform)}}},{key:"clearSlotGlobalTransform",value:function(e){if(e.slots)for(var t=0,n=e.slots.ids.length;t<n;t++){var r=e.slots.ids[t],i=e.slots.map[r];if(i&&i.displays)for(var o=0,a=i.displays.ids.length;o<a;o++){var s=i.displays.ids[o],l=i.displays.map[s];l&&l.globalTransform&&delete l.globalTransform}}}},{key:"updateGlobalTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.POSE;n.updateBoneGlobalTransform(e,t),n.updateSlotGlobalTransform(e,t),n.calculateRigging(e,t)}},{key:"calculateAnimatedProperty",value:function(e,t){n.clearGlobalTransform(e),n.updateGlobalTransform(e,t)}},{key:"updateArmatureAnimationProperty",value:function(e,t){if(e.bones)for(var n=0,r=e.bones.ids.length;n<r;n++){var i=e.bones.ids[n],o=e.bones.map[i];if(o&&t.bones){var a=t.bones[i];a&&(o.animatedProperties=a)}}if(e.constraint.ik)for(var s in e.constraint.ik){var l=e.constraint.ik[s];t.iks&&t.iks[s]&&(l.animatedValue=t.iks[s].ik)}if(e.slots)for(var u=0,c=e.slots.ids.length;u<c;u++){var h=e.slots.ids[u],d=e.slots.map[h];if(t.slots&&t.slots[h]){var f=t.slots[h];if(void 0!==f.color){var p=vp.splitAlphaColor(f.color);d.animatedColor=p.color,d.animatedAlpha=p.alpha}void 0!==f.displayIndex&&(d.animatedDisplayIndex=f.displayIndex)}if(d.displays)for(var v=0,m=d.displays.ids.length;v<m;v++){var g=d.displays.ids[v],y=d.displays.map[g];if(t.ffds&&t.ffds[g]){var b=y.mesh.points,_={},x=t.ffds[g].ffd;for(var E in x){var w=x[E];if(w){var T=b[E].vertices;_[E]=[T[0]+w[0],T[1]+w[1]]}}y.mesh.animatedFFD=_}}}t.zOrder&&t.zOrder.zOrder&&(e.animatedZOrder=t.zOrder.zOrder)}},{key:"updateArmatureAnimationPropertyAndGlobalTransform",value:function(e,t,r,i){if(t!==Y.POSE&&r){if(r){var o=gp.calculateAnimationProperties(r,i);n.clearArmatureAnimationData(e),n.updateArmatureAnimationProperty(e,o),n.calculateAnimatedProperty(e,t)}}else n.clearGlobalTransform(e),n.updateGlobalTransform(e,Y.POSE)}},{key:"calculateIK",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Y.POSE,r=e.bones.map[t.parentId],i=t.childId?e.bones.map[t.childId]:null,o=t.targetId?e.bones.map[t.targetId]:null;if(!1!==r.inheritRotation&&(!i||!1!==i.inheritRotation)){var a=n===Y.POSE?r.transform:r.cacheTransform||r.animatedTransform||r.transform,s=e.bones.map[r.parentId],l=t.bendPositive,u=t.weight;if(n===Y.ANIMATION&&(t.cacheValue?(l=t.cacheValue.bendPositive,u=t.cacheValue.weight):t.animatedValue&&(l=t.animatedValue.bendPositive,u=t.animatedValue.weight)),i){var c={x:0,y:0},h=(r.globalTransform.x,r.globalTransform.y),d=(i.globalTransform.x,i.globalTransform.y),f=s.globalTransform,p=vp.transform2Matrix(f),v=(vp.matrixInvert(p),vp.transformInverseApplyPoint(f,{x:o.globalTransform.x,y:o.globalTransform.y})),m=v.x,g=v.y;h=vp.transformInverseApplyPoint(f,{x:r.globalTransform.x,y:r.globalTransform.y}),d=vp.transformInverseApplyPoint(f,{x:i.globalTransform.x,y:i.globalTransform.y});var y=n===Y.POSE?i.transform:i.cacheTransform||i.animatedTransform||i.transform,b=a.scaleX,_=a.scaleY,x=y.scaleX,E=d.x-h.x,w=d.y-h.y,T=Math.sqrt(E*E+w*w),S=0,k=0,C=1,A=0,I=0;b<0?(b=-b,A=Math.PI,C=-1):(A=0,C=1),_<0&&(_=-_,C=-C),x<0?(x=-x,I=Math.PI):I=0;var O=l?1:-1;if(O*=C,Math.abs(b-_)<=.001){var P=i.length*x,M=((m-=h.x)*m+(g-=h.y)*g-T*T-P*P)/(2*T*P);M<-1?M=-1:M>1&&(M=1),k=Math.acos(M)*O;var R=T+P*M,N=P*Math.sin(k);S=Math.atan2(g*R-m*N,m*R+g*N)}else{var D=T,L=m-h.x,F=g-h.y,B=i.length*y.scaleX,U=b*B,H=_*B,j=Math.atan2(F,L),z=U*U,V=H*H,G=L*L+F*F,W=V*(D*D)+z*G-z*V,X=-2*V*D,K=V-z,q=X*X-4*K*W;if(q>=0){var Z=Math.sqrt(q);X<0&&(Z=-Z);var $=(Z=-(X+Z)/2)/K,Q=W/Z,J=Math.abs($)<Math.abs(Q)?$:Q;if(J*J<=G){var ee=Math.sqrt(G-J*J)*O;S=j-Math.atan2(ee,J),k=Math.atan2(ee/_,(J-D)/b);var te=y.x,ne=y.y*_,re=Math.atan2(ne,te)*C;c.x=S-re+A,c.y=(k+re)*C+I,c.x=vp.normalizeRadian(c.x),c.y=vp.normalizeRadian(c.y);var ie=vp.normalizeRadian(c.x-a.skewX),oe=vp.normalizeRadian(c.y-y.skewX),ae=a.skewX+ie,se=y.skewX+oe;return r.ikTransform=Re(Re({},a),{},{skewX:ae,skewY:ae}),r.fkTransform=Re({},a),r.mixTransform=Re(Re({},a),{},{skewX:a.skewX+ie*u,skewY:a.skewY+ie*u}),r.globalTransform=vp.transformCross(s.globalTransform,r.mixTransform),r.ikGlobalTransform=vp.transformCross(s.globalTransform,r.ikTransform),r.fkGlobalTransform=vp.transformCross(s.globalTransform,r.fkTransform),i.ikTransform=Re(Re({},y),{},{skewX:se,skewY:se}),i.fkTransform=Re({},y),i.mixTransform=Re(Re({},y),{},{skewX:y.skewX+oe*u,skewY:y.skewY+oe*u}),i.globalTransform=vp.transformCross(r.globalTransform,i.mixTransform),i.ikGlobalTransform=vp.transformCross(r.ikGlobalTransform,i.ikTransform),void(i.fkGlobalTransform=vp.transformCross(r.fkGlobalTransform,i.fkTransform))}}var le=0,ue=Number.MAX_VALUE,ce=0,he=0,de=0,fe=0,pe=0,ve=0,me=D+U,ge=me*me;ge>fe&&(de=0,fe=ge,pe=me),(ge=(me=D-U)*me)<ue&&(le=Math.PI,ue=ge,ce=me);var ye=Math.acos(-U*D/(z-V));me=U*Math.cos(ye)+D;var be=H*Math.sin(ye);(ge=me*me+be*be)<ue&&(le=ye,ue=ge,ce=me,he=be),ge>fe&&(de=ye,fe=ge,pe=me,ve=be),G<=(ue+fe)/2?(S=j-Math.atan2(he*O,ce),k=le*O):(S=j-Math.atan2(ve*O,pe),k=de*O)}var _e=y.x,xe=y.y*_,Ee=Math.atan2(xe,_e)*C;c.x=S-Ee+A,c.y=(k+Ee)*C+I,c.x=vp.normalizeRadian(c.x),c.y=vp.normalizeRadian(c.y);var we=vp.normalizeRadian(c.x-a.skewX),Te=vp.normalizeRadian(c.y-y.skewX),Se=a.skewX+we,ke=y.skewX+Te;r.ikTransform=Re(Re({},a),{},{skewX:Se,skewY:Se}),r.fkTransform=Re({},a),r.mixTransform=Re(Re({},a),{},{skewX:a.skewX+we*u,skewY:a.skewY+we*u}),r.globalTransform=vp.transformCross(s.globalTransform,r.mixTransform),r.ikGlobalTransform=vp.transformCross(s.globalTransform,r.ikTransform),r.fkGlobalTransform=vp.transformCross(s.globalTransform,r.fkTransform),i.ikTransform=Re(Re({},y),{},{skewX:ke,skewY:ke}),i.fkTransform=Re({},y),i.mixTransform=Re(Re({},y),{},{skewX:y.skewX+Te*u,skewY:y.skewY+Te*u}),i.globalTransform=vp.transformCross(r.globalTransform,i.mixTransform),i.ikGlobalTransform=vp.transformCross(r.ikGlobalTransform,i.ikTransform),i.fkGlobalTransform=vp.transformCross(r.fkGlobalTransform,i.fkTransform)}else{var Ce=r.globalTransform.skewX,Ae=Math.atan2(o.globalTransform.y-r.globalTransform.y,o.globalTransform.x-r.globalTransform.x);r.fkTransform=Re({},a),r.fkGlobalTransform=Re({},r.globalTransform),r.ikGlobalTransform=Re(Re({},r.globalTransform),{},{skewX:Ae,skewY:Ae}),r.ikTransform=vp.transformInvertCross(s.globalTransform,r.ikGlobalTransform);var Ie=Ce+vp.normalizeRadian(Ae-Ce)*u;r.globalTransform=Re(Re({},r.ikGlobalTransform),{},{skewX:Ie,skewY:Ie}),r.mixTransform=vp.transformInvertCross(s.globalTransform,r.globalTransform)}}}},{key:"sortBones",value:function(e){for(var t=e.bones.ids.concat(),n=[],r=[];t.length>0;){for(var i=[],o=0,a=t.length;o<a;o++){var s=t[o],l=e.bones.map[s];(0===r.length&&!l.parentId||r.includes(l.parentId))&&(n.push(l),i.push(l.id),t.splice(o,1),o--,a--)}r=i}return n}},{key:"getIKByBone",value:function(e,t){if(t.constraint&&t.constraint.ik)for(var n in t.constraint.ik){var r=t.constraint.ik[n];if(r.childId&&r.childId===e.id)return r;if(!r.childId&&r.parentId===e.id)return r}return null}},{key:"updateBoneGlobalTransform",value:function(e,t){for(var r=n.sortBones(e),i=0,o=r.length;i<o;i++){var a=r[i];a.globalTransform||(a.globalTransform=n.getBoneGlobalTransform(a,e.bones.map,t));var s=this.getIKByBone(a,e);if(s){var l=s.childId?e.bones.map[s.childId]:null,u=e.bones.map[s.parentId],c=s.targetId?e.bones.map[s.targetId]:null;u&&!u.globalTransform&&(u.globalTransform=n.getBoneGlobalTransform(u,e.bones.map,t)),l&&!l.globalTransform&&(l.globalTransform=n.getBoneGlobalTransform(l,e.bones.map,t)),c&&!c.globalTransform&&(c.globalTransform=n.getBoneGlobalTransform(c,e.bones.map,t)),this.calculateIK(e,s,t)}}}},{key:"updateSlotGlobalTransform",value:function(e,t){if(e.slots)for(var r=0,i=e.slots.ids.length;r<i;r++){var o=e.slots.ids[r],a=e.slots.map[o];if(a&&a.displays)for(var s=0,l=a.displays.ids.length;s<l;s++){var u=a.displays.ids[s],c=a.displays.map[u];c.globalTransform||(c.globalTransform=n.getDisplayGlobalTransform(c,a,e.bones.map,t))}}}},{key:"getDisplayGlobalTransform",value:function(e,t,r,i){if(e.globalTransform)return e.globalTransform;var o=r[t.parentId],a=be(e.transform);if(o){var s=n.getBoneGlobalTransform(o,r,i);a=vp.transformCross(s,e.transform)}return a}},{key:"updateBoneAnimatedTransform",value:function(e){if(e.animatedProperties)for(var t in e.animatedTransform=be(e.transform),e.animatedProperties){var n=e.animatedProperties[t];switch(t){case"x":e.animatedTransform.x+=n;break;case"y":e.animatedTransform.y+=n;break;case"rotated":e.animatedTransform.skewX+=n,e.animatedTransform.skewY+=n;break;case"scaleX":e.animatedTransform.scaleX*=n;break;case"scaleY":e.animatedTransform.scaleY*=n;break;case k.TRANSLATE:e.animatedTransform.x+=n.x,e.animatedTransform.y+=n.y;break;case k.ROTATE:e.animatedTransform.skewX+=n.rotate,e.animatedTransform.skewY+=n.rotate;break;case k.SCALE:e.animatedTransform.scaleX*=n.x,e.animatedTransform.scaleY*=n.y}}}},{key:"getBoneGlobalTransform",value:function(e,t,r){if(e.globalTransform)return e.globalTransform;var i=t[e.parentId],o=be(e.transform);if(this.updateBoneAnimatedTransform(e),i){var a=n.getBoneGlobalTransform(i,t,r),s=e.transform;r===Y.ANIMATION?e.cacheTransform?(o=vp.transformCross(a,e.cacheTransform),s=e.cacheTransform):e.animatedProperties?(o=vp.transformCross(a,e.animatedTransform),s=e.animatedTransform):(o=vp.transformCross(a,e.transform),s=e.transform):(o=vp.transformCross(a,e.transform),s=e.transform),!1===e.inheritRotation&&(o.skewX=s.skewX,o.skewY=s.skewY),!1===e.inheritScale&&(o.scaleX=s.scaleX,o.scaleY=s.scaleY)}else r===Y.ANIMATION&&(e.cacheTransform?o=be(e.cacheTransform):e.animatedTransform&&(o=be(e.animatedTransform)));return o.skewX=vp.normalizeRadian(o.skewX),o.skewY=vp.normalizeRadian(o.skewY),o}},{key:"getBoneLocalTransformByGlobal",value:function(e,t,r,i){var o=t[e.parentId];if(o){var a=n.getBoneGlobalTransform(o,t,r),s=vp.transformInvertCross(a,i);return!1===e.inheritRotation&&(s.skewX=e.transform.skewX,s.skewY=e.transform.skewY),!1===e.inheritScale&&(s.scaleX=e.transform.scaleX,s.scaleY=e.transform.scaleY),s}return i}},{key:"getLocalTransform",value:function(e,t,r){if(e.globalTransform){var i=t[e.parentId];if(i){var o=n.getBoneGlobalTransform(i,t,r);return vp.transformInvertCross(o,e.globalTransform)}return e.globalTransform}return e.transform}},{key:"getDisplayLocalTransform",value:function(e,t,r,i){if(t&&e.globalTransform){var o=n.getBoneGlobalTransform(t,r,i);return vp.transformInvertCross(o,e.globalTransform)}return e.transform}},{key:"getSlotCurDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Y.POSE,n=e.displayIndex;if(t===Y.ANIMATION&&(void 0!==e.cacheDisplayIndex?n=e.cacheDisplayIndex:void 0!==e.animatedDisplayIndex&&(n=e.animatedDisplayIndex)),n<0)return null;var r=e.displays.ids[n];return e.displays.map[r]}},{key:"getSlotLocalTransformByGlobal",value:function(e,t,r,i){var o=n.getSlotCurDisplay(e),a=t.bones.map[e.parentId];if(a&&o){var s=n.getBoneGlobalTransform(a,t.bones.map,r);return vp.transformInvertCross(s,i)}return o.transform}},{key:"getSlotDisplay",value:function(e,t){return e.displays.map[t]}},{key:"getRootBone",value:function(e){for(var t=0,n=e.bones.ids.length;t<n;t++){var r=e.bones.ids[t],i=e.bones.map[r];if(!i.parentId)return i}}},{key:"getBoneById",value:function(e,t){return e.bones.map[t]}},{key:"getSlotByDisplayId",value:function(e,t){for(var n=0,r=e.slots.ids.length;n<r;n++){var i=e.slots.ids[n],o=e.slots.map[i];if(o.displays)if(o.displays.map[t])return o}}},{key:"getAllSlotDisplay",value:function(e,t){var r=[];if(e.slots){var i=e.slots.ids;t===Y.ANIMATION&&(e.cacheZOrder?i=e.cacheZOrder:e.animatedZOrder&&(i=e.animatedZOrder));for(var o=i.length-1;o>=0;o--){var a=i[o],s=e.slots.map[a],l=n.getSlotCurDisplay(s);r.push({slot:s,display:l})}}return r}},{key:"getBoneChains",value:function(e,t){for(var r=[],i=t.concat();i.length>0;){var o=[],a=i.shift(),s=e.bones.map[a];o.push(s);for(var l=0,u=i.length;l<u;l++){var c=i[l];n.isDescendantBone(e,a,c)?(i.splice(l,1),o.push(e.bones.map[c]),u--,l--):n.isAncestorBone(e,a,c)&&(i.splice(l,1),o.unshift(e.bones.map[c]),u--,l--)}r.push(o)}return r}},{key:"findBoneSlots",value:function(e,t){for(var n=[],r=0,i=e.slots.ids.length;r<i;r++){var o=e.slots.ids[r],a=e.slots.map[o];a.parentId===t&&n.push(a)}return n}},{key:"findBoneChildren",value:function(e,t){for(var n=[],r=0,i=e.bones.ids.length;r<i;r++){var o=e.bones.ids[r],a=e.bones.map[o];a.parentId===t&&n.push(a)}return n}},{key:"findBoneParent",value:function(e,t){var n=e.bones.map[t];if(n)return e.bones.map[n.parentId]}},{key:"getAllDescendantBones",value:function(e,t){for(var r=[],i=n.findBoneChildren(e,t),o=0,a=i.length;o<a;o++){var s=i[o];r.push(s);var l=n.getAllDescendantBones(e,s.id);r.push.apply(r,Pe(l))}return r}},{key:"getAllDescendantBonesAndSlotsAndIKsAndSelf",value:function(e,t){var r=[],i=[],o=[];r.push.apply(r,Pe(t));for(var a=0,s=t.length;a<s;a++)for(var l=n.getAllDescendantBones(e,t[a]),u=0,c=l.length;u<c;u++)r.indexOf(l[u].id)<0&&r.push(l[u].id);for(var h=0,d=r.length;h<d;h++)for(var f=n.findBoneSlots(e,r[h]),p=0,v=f.length;p<v;p++)i.push(f[p].id);for(var m in e.constraint.ik){var g=e.constraint.ik[m];(r.indexOf(g.parentId)>=0||r.indexOf(g.childId)>=0||r.indexOf(g.targetId)>=0)&&o.push(g.id)}return{bones:r,slots:i,iks:o}}},{key:"isDescendantBone",value:function(e,t,n){for(var r=e.bones.map[n];r;){if(r.id===t)return!0;r=e.bones.map[r.parentId]}return!1}},{key:"isAncestorBone",value:function(e,t,n){for(var r=e.bones.map[t];r;){if(r.id===n)return!0;r=e.bones.map[r.parentId]}return!1}},{key:"createArmatureName",value:function(e,t){return BT.createName(e,t)}},{key:"createBoneName",value:function(e,t){return BT.createName(e,t.bones.map)}},{key:"createIKConStraintName",value:function(e,t){return BT.createName(e,t.constraint.ik)}},{key:"checkBoneNameConflict",value:function(e,t){return BT.checkNameConflict(e,t.bones.map)}},{key:"createSlotName",value:function(e,t){return BT.createName(e,t.slots.map)}},{key:"checkSlotNameConflict",value:function(e,t){return BT.checkNameConflict(e,t.slots.map)}},{key:"checkDisplayNameConflict",value:function(e,t){for(var n={},r=0,i=t.slots.ids.length;r<i;r++){var o=t.slots.ids[r],a=t.slots.map[o];a.displays&&(n=Re(Re({},n),a.displays.map))}return BT.checkNameConflict(e,n)}},{key:"checkArmatureNameConflict",value:function(e,t){return BT.checkNameConflict(e,t)}},{key:"getMaxChainBones",value:function(e,t){for(var n,r={},i=0,o=0,a=t.length;o<a;o++){var s=t[o],l=e.bones.map[s],u=[];do{u.unshift(l.id),l=e.bones.map[l.parentId]}while(l&&t.includes(l.id));r[s]=u,u.length>i&&(i=u.length,n=u)}return n}},{key:"getBoneTailPosition",value:function(e,t,r){var i=t.bones.map,o=n.getBoneGlobalTransform(e,i,r);return{x:o.x+Math.cos(o.skewX)*e.length*e.globalTransform.scaleX,y:o.y+Math.sin(o.skewY)*e.length*e.globalTransform.scaleY}}},{key:"getBoneTailLocalPosition",value:function(e){return{x:Math.cos(e.transform.skewX)*e.length*e.transform.scaleX,y:Math.sin(e.transform.skewY)*e.length*e.transform.scaleY}}},{key:"getDisplaySize",value:function(){var e=Ee(_e().mark((function e(t,n,r){var i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.assetId,o=OT.findAssetById(i,n),e.next=4,Ep.getAssetSize(o,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"getMeshPointNumber",value:function(e){if(e.mesh&&e.mesh.points){var t=0;for(var n in e.mesh.points)t++;return t}return 0}},{key:"deleteBoneWeight",value:function(e,t,n,r){for(var i=(r||e)[t],o={},a=0,s=0,l=n.length;s<l;s++){a+=i[n[s]]}if(a<=0)return be(i);var u={},c=1,h=0,d=0;for(var f in i){var p=parseInt(f);n.indexOf(p)<0?(u[f]=i[f],h+=i[f],d++):(i[f],c-=i[f])}for(var v in u){var m=u[v];u[v]=c>0&&h>0?m/c:1/d}for(var g in u)o[g]=u[g];return o}},{key:"calculateBoneWeight",value:function(e,t,n,r,i){var o=(i||e)[t],a=n.toString(),s={};if(1===r){for(var l in o)s[l]=l!==a?0:1;return s}if(r<=0&&o[a]<=0)return be(o);var u={},c=0,h=0,d=0,f=0;for(var p in o)p!==a?(u[p]=o[p],h+=o[p],d++):(f=o[p],c=1-o[p]);for(var v in u){var m=u[v];u[v]=c>0&&h>0?m/c:1/d}var g=f-r;if(0===g)return be(o);var y=0;for(var b in u)s[b]=o[b]+g*u[b],s[b]<0&&(y+=s[b],s[b]=0);if(y)for(var _ in s)s[_]>0&&(s[_]+y>0?s[_]+=y:(s[_]=0,y+=s[_]));return s}},{key:"calculateRiggingDisplay",value:function(e,t,n){var r={};if(t.mesh.bonePose&&t.mesh.slotPose){for(var i in t.mesh.bonePose){var o=t.mesh.bonePose[i],a=vp.transform2Matrix(o.pose),s=vp.matrixInvert(a);r[i]=s}var l=vp.transform2Matrix(t.mesh.slotPose),u=vp.transform2Matrix(t.globalTransform),c=vp.matrixInvert(u);for(var h in t.mesh.points){t.mesh.boneWeights[h];var d=this.getMeshRiggingPointMatrix(e,t,parseInt(h),!1,r,l,c),f=t.mesh.points[h],p={x:f.vertices[0],y:f.vertices[1]};if(n===Y.ANIMATION)if(t.mesh.cacheFFD&&t.mesh.cacheFFD[h]){var v=t.mesh.cacheFFD[h];p.x=v[0],p.y=v[1]}else if(t.mesh.animatedFFD&&t.mesh.animatedFFD[h]){var m=t.mesh.animatedFFD[h];p.x=m[0],p.y=m[1]}var g=vp.matrixApplyPoint(d,p);t.mesh.riggingFFD||(t.mesh.riggingFFD={}),t.mesh.riggingFFD[h]=[g.x,g.y]}}else t.mesh.riggingFFD=void 0}},{key:"calculateRigging",value:function(e,t){if(e.slots)for(var r=0,i=e.slots.ids.length;r<i;r++){var o=e.slots.ids[r],a=e.slots.map[o],s=n.getSlotCurDisplay(a);s&&s.mesh&&n.calculateRiggingDisplay(e,s,t)}return{}}},{key:"getMeshRiggingPointMatrix",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;if(!i)for(var s in i={},t.mesh.bonePose){var l=t.mesh.bonePose[s],u=vp.transform2Matrix(l.pose),c=vp.matrixInvert(u);i[s]=c}var h,d=t.mesh.boneWeights[n];for(var f in d){var p=e.bones.map[f],v=d[f],m=Re({},i[f]),g=vp.transform2Matrix(p.globalTransform);m=vp.matrixCross(g,m),vp.matrixMultiply(m,v),h?vp.matrixAdd(h,m):h=m}if(o||(o=vp.transform2Matrix(t.mesh.slotPose)),!a&&!r){var y=vp.transform2Matrix(t.globalTransform);a=vp.matrixInvert(y)}return h=vp.matrixCross(h,o),r||(h=vp.matrixCross(a,h)),h}},{key:"getMeshPointFFDByRiggingPos",value:function(e,t,r,i){if(!t.mesh.bonePose||!t.mesh.slotPose)throw new Error("no rigging data");var o=n.getMeshRiggingPointMatrix(e,t,r,!0),a=vp.matrixInvert(o),s={x:i[0],y:i[1]},l=vp.matrixApplyPoint(a,s);return[l.x,l.y]}},{key:"getNextRiggingBoneColor",value:function(e){for(var t=yp.RIG_BONE_COLOR,n=t[0],r=0;n;){var i=!1;for(var o in e.bonePose){if(e.bonePose[o].color===n){if(++r>=t.length)return t[r%t.length];n=t[r],i=!0;break}}if(!i)return n}}},{key:"calculateAutoWeight",value:function(){var e=Ee(_e().mark((function e(t,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 4,.01,100,e.abrupt("return",new Promise((function(e,i){var o=r.mesh,a=r.globalTransform,s=[];for(var l in o.bonePose){o.bonePose[l]&&s.push(t.bones.map[l])}var u={},c=Number.MAX_VALUE,h=0,d=0,f=0;for(var p in o.points){var v=o.riggingFFD[p],m=vp.transformApplyPoint(a,{x:v[0],y:v[1]});u[p]={};for(var g=0,y=s.length;g<y;g++){var b=s[g],_=n.getBoneTailPosition(b,t,Y.POSE),x={x:b.globalTransform.x,y:b.globalTransform.y},E=vp.distance2PointToSeg(m.x,m.y,x.x,x.y,_.x,_.y);E<100&&(E=100),u[p][b.id]=E,E<c&&(c=E),E>h&&(h=E),d+=E,f++}}var w={};for(var T in u){var S=u[T],k=[];for(var C in S){var A=S[C];k.push({boneId:C,distance:A})}k.sort((function(e,t){return e.distance-t.distance}));for(var I=0,O=Math.min(k.length,4),P=0,M=O;P<M;P++)I+=1/k[P].distance;var R=0;w[T]={};for(var N=0,D=k.length;N<D;N++){var L=k[N];if(N<O-1){var F=1/L.distance/I;F<.01&&(F=0),R+=F,w[T][L.boneId]=F}else w[T][L.boneId]=N===O-1?1-R:0}}e(w)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getSlotCurColor",value:function(e){return void 0!==e.cacheColor?e.cacheColor:void 0!==e.animatedColor?e.animatedColor:void 0!==e.color?e.color:16777215}},{key:"getSlotCurAlpha",value:function(e){return void 0!==e.cacheAlpha?e.cacheAlpha:void 0!==e.animatedAlpha?e.animatedAlpha:void 0!==e.alpha?e.alpha:1}},{key:"getSlotColorAlpha",value:function(e){var t=n.getSlotCurColor(e),r=n.getSlotCurAlpha(e);return vp.mergeAlphaColor(r,t)}},{key:"findRiggingDisplayByBoneIds",value:function(e,t){var n=[];for(var r in e.slots.map){var i=e.slots.map[r];if(i)for(var o in i.displays.map){var a=i.displays.map[o];if(a&&a.mesh&&a.mesh.bonePose){for(var s=[],l=0,u=t.length;l<u;l++){var c=t[l];a.mesh.bonePose[c]&&s.push(c)}s.length>0&&n.push({slotId:i.id,displayId:a.id,boneIds:s})}}}return n}}]),n}(mp),MT=function(e){v(n,gmvc.GModule);var t=y(n);function n(){return u(this,n),t.call(this,"dopesheet")}return f(n,[{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e,t){})),b(e,Q.UPDATE_SCALE,(function(e,n){t.setScale(n,e),t.refreshDopeConfig(e)})),b(e,Q.UPDATE_OFFSET,(function(e,n){e.offset=n,t.refreshDopeConfig(e)})),b(e,Q.UPDATE_LABEL_WIDTH,(function(e,n){e.labelWidth=n,t.refreshDopeConfig(e)})),b(e,Q.UPDATE_SIZE,(function(e,n){var r=t.rootState.config.timeline.LABEL_LEFT_WIDTH;e.labelWidth=n.width-r,e.width=n.width,e.height=n.height,t.refreshDopeConfig(e)})),b(e,Q.UPDATE_FRAME,(function(e,n){e.curTime=n;var r=t.rootState.runtime.editing.selectedAnimationId,i=t.rootState.runtime.editing.editingArmatureId,o=t.rootState.runtime.dragonbones.armatureMap[i];PT.clearCache(o),i>0&&r>0&&t.commit(P.CALCULATE_ANIMATED_PROPERTY,{animationId:r,armatureId:i,frameIndex:n})})),b(e,Q.UPDATE_FPS,(function(e,t){e.fps=t})),e}},{key:"minScale",get:function(){var e=this.rootState.config.timeline,t=e.MIN_GAP,n=e.SCALE_LEVEL;return t/(e.MAX_GAP*n[n.length-1])}},{key:"setScale",value:function(e,t){var n=this.minScale;if(e<n?e=n:e>1&&(e=1),t.scale!==e){for(var r,i,o=e,a=this.rootState.config.timeline,s=a.MIN_GAP,l=a.SCALE_LEVEL,u=a.MAX_GAP,c=a.LABEL_LEVEL,h=a.TWO_LABEL_GAP,d=a.FIVE_LABEL_GAP,f=u*o,p=0,v=0;f<s&&p<l.length;)f=u*o*l[++p];p>=l.length&&(p=l.length-1),v=p>0?c[2]:f>h?c[0]:f>d?c[1]:c[2],r=l[p],i=Math.round(f),t.scale=o,t.curGap=i,t.scaleLevel=r,t.labelLevel=v}}},{key:"refreshDopeConfig",value:function(e){var t=this.rootState.config.timeline.FIRST_X,n=e.offset,r=e.curGap,i=e.scaleLevel,o=e.labelWidth,a=Math.ceil((o+t)/r),s=Math.floor(n/r);(s-=Math.floor(t/r))<0&&(s=0),e.startIndex=s*i,e.endIndex=(s+a)*i}}]),n}(),RT=function(e){v(n,gmvc.GModule);var t=y(n);function n(){var e;u(this,n),(e=t.call(this,"editor")).rootStore=void 0;var r=new MT;return e.addModule(r),e}return f(n,[{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e,t){})),b(e,K.LOAD_SUCCESS,(function(e,t){if(t){var n=t.editor;e.idGen=n.idGen,e.lastModify=n.lastModify,e.saveTime=n.saveTime,n.layout&&(n.layout.animationLayout&&(e.layout.animationLayout=n.layout.animationLayout),n.layout.poseLayout&&(e.layout.poseLayout=n.layout.poseLayout))}})),b(e,X.UPDATE_SIZE,(function(e,t){e.stage.width=t.width-e.stage.ruleSize,e.stage.height=t.height-e.stage.ruleSize})),b(e,X.UPDATE_POSITION,(function(e,t){e.stage.x=t.x,e.stage.y=t.y})),b(e,X.UPDATE_SCALE,(function(e,t){e.stage.scale=t})),b(e,X.MOUSE_MOVE,(function(e,t){e.stage.mouseCanvasX=t.canvasPos.x,e.stage.mouseCanvasY=t.canvasPos.y,e.stage.mouseStageX=t.stagePos.x,e.stage.mouseStageY=t.stagePos.y})),b(e,X.MOUSE_DOWN,(function(e,t){})),b(e,X.MOUSE_UP,(function(e,t){})),b(e,X.RIGHT_DOWN,(function(e,t){})),b(e,X.RIGHT_UP,(function(e,t){})),b(e,G.OVER_BONE,(function(e,n){t.rootState.runtime.editing.boneSlotControl.boneSelectEnable&&(-1===t.rootState.runtime.editing.lockBoneSlotIds.indexOf(n)&&(e.over.overBone=n))})),b(e,B.OVER_SLOT,(function(e,n){t.rootState.runtime.editing.boneSlotControl.slotSelectEnable&&(-1===t.rootState.runtime.editing.lockBoneSlotIds.indexOf(n)&&(e.over.overSlotId=n))})),b(e,Z.OVER_FRAME,(function(e,t){e.over.overFrameIds=t})),b(e,X.SWITCH_AUTO_KEY,(function(e,t){e.dopesheet.autoKey=t})),b(e,X.SWITCH_AUTO_FIRST_FRAME,(function(e,t){e.dopesheet.autoFirstFrame=!e.dopesheet.autoFirstFrame})),b(e,Q.SWITCH_FILTER,(function(e,t){e.dopesheet.filter=!e.dopesheet.filter})),b(e,W.OPEN_EXPORT_WINDOW,(function(e,t){e.openExportWindow=!0})),b(e,W.CLOSE_EXPORT_WINDOW,(function(e,t){e.openExportWindow=!1})),b(e,W.OPEN_IMPORT_WINDOW,(function(e,t){e.openImportWindow=!0})),b(e,W.CLOSE_IMPORT_WINDOW,(function(e,t){e.openImportWindow=!1})),b(e,W.OPEN_PREVIEW_WINDOW,(function(e,t){e.openPreviewWindow=!0})),b(e,W.CLOSE_PREVIEW_WINDOW,(function(e,t){e.openPreviewWindow=!1})),b(e,W.UNDO,(function(e,n){t.commit(gmvc.GHistoryMutation.UNDO)})),b(e,W.REDO,(function(e,n){t.commit(gmvc.GHistoryMutation.REDO)})),b(e,W.LAYOUT_CHANGE,(function(e,t){e.layoutChange=!0})),b(e,W.UPDATE_LAYOUT,(function(e,t){t.animationLayout&&(e.layout.animationLayout=t.animationLayout),t.poseLayout&&(e.layout.poseLayout=t.poseLayout),e.layoutChange=!1})),b(e,D.SELECT_ARMATURE,(function(e,t){e.over.overBone=0,e.over.overSlotId=0,e.over.overFrameIds=[]})),b(e,$.UPDATE_SIZE,(function(e,t){e.curveBox||(e.curveBox={width:0,height:0}),e.curveBox.height=t.height,e.curveBox.width=t.width})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},X.UNDO,(function(e,n){BT.instances.getHistoryMergeName()?yf.warn("\u6709\u672a\u5b8c\u6210\u7684\u64cd\u4f5c\uff0c\u8bf7\u5148\u5b8c\u6210\u518d\u64a4\u9500"):t.commit(W.UNDO,{})})),b(e,X.REDO,(function(e,n){BT.instances.getHistoryMergeName()?yf.warn("\u6709\u672a\u5b8c\u6210\u7684\u64cd\u4f5c\uff0c\u8bf7\u5148\u5b8c\u6210\u518d\u91cd\u505a"):t.commit(W.REDO,{})})),b(e,X.CLEAR_LOCAL_DATA,(function(e,t){yf.confirm("","\u662f\u5426\u6e05\u7a7a\u672c\u5730\u6570\u636e\uff1f\u6e05\u7a7a\u540e\u6570\u636e\u4e0d\u53ef\u6062\u590d\uff01\n                \u6e05\u7a7a\u540e\u5237\u65b0\u9875\u9762\uff0c\u53ef\u91cd\u65b0\u5f00\u59cb\u521b\u5efa\u3002","\u6e05\u7a7a","\u53d6\u6d88",(function(){Ce.instance.clearAll()}))})),e}}]),n}(),NT=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,"editing")}return f(n,[{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e,t){})),b(e,G.SELECT_BONES,(function(e,t){if(e.boneSlotControl.boneSelectEnable){for(var n=0;n<t.length;n++){var r=t[n];-1!==e.lockBoneSlotIds.indexOf(r)&&(t.splice(n,1),n--)}e.selectedBoneIds=t}})),b(e,B.SELECT_SLOTS,(function(e,t){if(e.boneSlotControl.slotSelectEnable){for(var n=0;n<t.length;n++){var r=t[n];-1!==e.lockBoneSlotIds.indexOf(r)&&(t.splice(n,1),n--)}e.selectedSlotIds=t,e.selectedDisplayId=0}})),b(e,j.SELECT_DISPLAY,(function(e,t){e.boneSlotControl.slotSelectEnable&&(e.selectedSlotIds=[t.slotId],e.selectedDisplayId=t.displayId)})),b(e,D.SELECT_ARMATURE,(function(e,n){e.editingArmatureId=n.armatureId,e.selectedBoneIds=[],e.selectedSlotIds=[],e.selectedMeshPointIds=[],e.selectedDisplayId=0,e.selectedAnimationId=0,e.selectedFrameIds=[],e.riggingSelectedBoneId=0;var r=BT.getCurrentArmature(t.rootState);r&&r.animations?e.selectedAnimationId=r.animations[0]:e.selectedAnimationId=0})),b(e,M.SELECT_ANIMATION,(function(e,t){e.selectedAnimationId=t.animationId})),b(e,W.SWITCH_MODE,(function(e,n){e.stageTool!==J.SELECT&&t.commit(W.SWITCH_TOOL,{tool:J.SELECT}),e.editMode=n.mode})),b(e,Q.SELECT_FRAME,(function(e,t){var n=t.filter((function(e,t,n){return n.indexOf(e)===t}));e.selectedFrameIds=n})),b(e,X.LOCK_ITEMS,(function(e,n){e.lockBoneSlotIds=n;for(var r=!1,i=0,o=e.selectedBoneIds.length;i<o;i++){var a=e.selectedBoneIds[i];-1!==n.indexOf(a)&&(e.selectedBoneIds.splice(i,1),i--,r=!0)}r&&t.commit(G.SELECT_BONES,e.selectedBoneIds);for(var s=!1,l=0,u=e.selectedSlotIds.length;l<u;l++){var c=e.selectedSlotIds[l];-1!==n.indexOf(c)&&(e.selectedSlotIds.splice(l,1),l--,s=!0)}s&&t.commit(B.SELECT_SLOTS,e.selectedSlotIds)})),b(e,X.HIDE_ITEMS,(function(e,t){e.hideBoneSlotIds=t})),b(e,W.SWITCH_TOOL,(function(e,t){e.lastStageTool=e.stageTool,e.stageTool=t.tool})),b(e,W.CHANGE_BONE_SLOT_CONTROL,(function(e,t){e.boneSlotControl[t.property]=t.value})),b(e,H.SELECT_MESH_POINTS,(function(e,t){e.selectedMeshPointIds=t.points})),b(e,W.UPDATE_MESH_TOOL,(function(e,t){var n=t.deformed,r=t.curTool,i=t.autoOutlineNum;void 0!==r&&(e.meshEditTool.curTool=r),void 0!==n&&(e.meshEditTool.deformed=n),void 0!==i&&(e.meshEditTool.autoOutlineNum=i),e.meshEditTool.curTool===ee.DRAW?(e.meshEditTool.deformed=!1,e.meshEditTool.drawOutlines||(e.meshEditTool.drawOutlines=[]),t.hasOwnProperty("drawOutlines")&&(e.meshEditTool.drawOutlines=t.drawOutlines)):e.meshEditTool.drawOutlines=void 0})),b(e,W.SET_DEFAULT_TOOLTIP_TOP,(function(e,t){e.defaultTips=t.tooltip})),b(e,W.SELECT_RIGGING_BONE,(function(e,t){e.riggingSelectedBoneId=t.boneId})),b(e,W.FLAG_AUTO_WEIGHT,(function(e,t){e.autoWeight=t.autoWeight})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},V.SELECT_BONES,(function(e,t){e.commit(G.SELECT_BONES,t)})),b(e,F.SELECT_SLOTS,(function(e,t){e.commit(B.SELECT_SLOTS,t)})),b(e,V.SELECT_ONE_BONE,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e._state.selectedSlotIds.length&&e.commit(B.SELECT_SLOTS,[]),e.commit(G.SELECT_BONES,t),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,F.SELECT_ONE_SLOT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e._state.selectedBoneIds.length&&e.commit(G.SELECT_BONES,[]),e.commit(B.SELECT_SLOTS,t),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.SWITCH_MODE,(function(e,n){e._state.StageTool===J.MESH_EDIT_TOOL&&e.dispatch(X.CLOSE_MESH_EDIT_TOOL),e.commit(gmvc.GHistoryMutation.MERGE_START);var r=BT.getCurrentArmature(t.rootState);if(n.mode===Y.ANIMATION){if(e.commit(W.SWITCH_MODE,n),!BT.hasAnimation(r,t.state.selectedAnimationId)){var i=BT.getDefaultAnimationId(r);t.commit(M.SELECT_ANIMATION,{animationId:i})}var o=t.rootState.editor.dopesheet.curTime;t.commit(Q.UPDATE_FRAME,o)}else PT.clearArmatureAnimationData(r),PT.calculateAnimatedProperty(r,Y.POSE),e.commit(W.SWITCH_MODE,n);e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.CHANGE_BONE_SLOT_CONTROL,(function(e,n){t.commit(gmvc.GHistoryMutation.MERGE_START),"boneSelectEnable"!==n.property||n.value||e._state.selectedBoneIds.length&&t.commit(G.SELECT_BONES,[]),"slotSelectEnable"!==n.property||n.value||e._state.selectedSlotIds.length&&t.commit(B.SELECT_SLOTS,[]),t.commit(W.CHANGE_BONE_SLOT_CONTROL,n),t.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.SWITCH_TOOL,(function(e,n){if(t.commit(gmvc.GHistoryMutation.MERGE_START),n===J.POSE_TOOL){var r=e._state.selectedSlotIds;r&&r.length&&e.commit(B.SELECT_SLOTS,[])}if(n===J.WEIGHT_TOOL){if(e._state.selectedBoneIds.length&&e.commit(G.SELECT_BONES,[]),e._state.selectedSlotIds.length>1)e.commit(B.SELECT_SLOTS,[]);else if(1===e._state.selectedSlotIds.length){var i=e._state.selectedSlotIds[0],o=BT.getCurrentArmature(t.rootState).slots.map[i],a=PT.getSlotCurDisplay(o);a&&a.mesh||e.commit(B.SELECT_SLOTS,[])}}else e._state.riggingSelectedBoneId&&e.commit(W.SELECT_RIGGING_BONE,{boneId:0});t.commit(W.SWITCH_TOOL,{tool:n}),t.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,V.PICK_IK_TARGET,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_IK_TARGET"}),e.commit(W.SWITCH_TOOL,{tool:J.IK_PICK_TARGET_TOOL}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9IK\u7ea6\u675f\u7684\u76ee\u6807\u9aa8\u9abc\uff0c \u4e0d\u80fd\u9009\u5b50\u7ea7\u9aa8\u9abc, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),b(e,V.PICK_IK_TARGET_END,(function(e,t){e.commit(W.SWITCH_TOOL,{tool:t.lastTool}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_IK_TARGET"})})),b(e,V.PICK_BONE_PARENT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_BONE_PARENT"}),e.commit(W.SWITCH_TOOL,{tool:J.PICK_BONE_PARENT_TOOL}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u4e2a\u9aa8\u9abc\u4f5c\u4e3a\u65b0\u7684\u7236\u7ea7, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),b(e,V.PICK_BONE_PARENT_END,(function(e,t){e.commit(W.SWITCH_TOOL,{tool:t.lastTool}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_BONE_PARENT"})})),b(e,F.PICK_SLOT_PARENT,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START,{name:"PICK_SLOT_PARENT"}),e.commit(W.SWITCH_TOOL,{tool:J.PICK_SLOT_PARENT_TOOL}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u4e2a\u9aa8\u9abc\u4f5c\u4e3a\u65b0\u7684\u7236\u7ea7, \u6309ESC\u53d6\u6d88\u9009\u62e9"})})),b(e,F.PICK_SLOT_PARENT_END,(function(e,t){e.commit(W.SWITCH_TOOL,{tool:t.lastTool}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(gmvc.GHistoryMutation.MERGE_END,{name:"PICK_SLOT_PARENT"})})),b(e,X.OPEN_MESH_EDIT_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(W.UPDATE_MESH_TOOL,{curTool:ee.EDIT}),e.commit(W.SWITCH_TOOL,{tool:J.MESH_EDIT_TOOL}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u7f51\u683c\u7f16\u8f91\u5de5\u5177"}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.CLOSE_MESH_EDIT_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(W.UPDATE_MESH_TOOL,{curTool:ee.EDIT}),e.commit(W.SWITCH_TOOL,{tool:J.SELECT}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.OPEN_RIGGING_TOOL,(function(e,t){e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(W.SWITCH_TOOL,{tool:J.RIGGING_TOOL}),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:"\u9009\u62e9\u4e00\u6839\u9aa8\u9abc"}),e.commit(gmvc.GHistoryMutation.MERGE_END)})),b(e,X.CLOSE_RIGGING_TOOL,(function(e,n){return Ee(_e().mark((function n(){var r,i,o,a,s;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.commit(gmvc.GHistoryMutation.MERGE_START),e.commit(W.SET_DEFAULT_TOOLTIP_TOP,{tooltip:""}),e.commit(W.SWITCH_TOOL,{tool:J.SELECT}),e._state.autoWeight&&(r=BT.getCurrentArmature(t.rootState),i=e._state.selectedSlotIds,o=i[0],a=r.slots.map[o],s=PT.getSlotCurDisplay(a),e.commit(W.FLAG_AUTO_WEIGHT,{autoWeight:!1}),e.dispatch(U.AUTO_WEIGHT,{armatureId:r.id,slotId:o,displayId:s.id})),e.commit(gmvc.GHistoryMutation.MERGE_END);case 6:case"end":return n.stop()}}),n)})))()})),b(e,U.SELECT_MESH_POINTS,(function(e,n){var r=n.points,i=(n.displayId,n.slotId),o=t.rootState.runtime.editing.selectedDisplayId,a=r.length;e.commit(gmvc.GHistoryMutation.MERGE_START),!o&&a>0?e.commit(j.SELECT_DISPLAY,n):o&&0===a&&e.commit(j.SELECT_DISPLAY,{slotId:i,displayId:0}),e.commit(H.SELECT_MESH_POINTS,n),e.commit(gmvc.GHistoryMutation.MERGE_END)})),e}}]),n}(mp),DT=function(e){v(n,gmvc.GModule);var t=y(n);function n(){var e;u(this,n),e=t.call(this,"runtime");var r=new NT,i=new OT;return e.addModule(r),e.addModule(i),e}return f(n,[{key:"mutations",get:function(){var e;return b(e={},_.TEST,(function(e,t){})),b(e,K.LOAD_SUCCESS,(function(e,t){})),e}}]),n}(),LT=function(){function e(){u(this,e)}return f(e,null,[{key:"getUserInfo",value:function(e,t,n){return new Promise((function(e,n){t&&(t(),e(!0))}))}},{key:"getNZDocument",value:function(e){return new Promise((function(t,n){Ce.instance.getDocumentDataByName(e).then((function(e){if(e)try{var n=JSON.parse(e.data);t(n)}catch(Pv){t(void 0)}else t(void 0)}))}))}},{key:"getUserAssets",value:function(t){return e.userId=t,new Promise((function(e,t){var n;Ce.instance.getAllFiles().then((function(t){t?(n=t,1):(n=void 0,-1),function(){var t={};if(n)if(Array.isArray(n))for(var r=0,i=n.length;r<i;r++){var o=n[r];o&&(t[o.id]=o)}else for(var a in n){var s=n[a];s&&(t[a]=s)}e(t)}()}))}))}},{key:"checkServerData",value:function(e){var t,n=0;try{var r=JSON.parse(e);r.success?t=r:n=1}catch(Pv){n=1}return{errorCode:n,result:t}}},{key:"save",value:function(e,t,n,r){return new Promise((function(e,n){var i=0;function o(){var t=3;-1==i&&(t=2),yf.success("\u4fdd\u5b58\u6210\u529f"),e(t)}Ce.instance.updateDocumentData(t,r).then((function(e){e?(i=1,o()):(i=-1,o())}))}))}},{key:"checkUploadLocalFile",value:function(t){for(var n in t){var r=t[n];!r||!r.data||r.url&&r.sid||e.waitToUploadFileArr.push(r)}}},{key:"uploadFileToServer",value:function(e){return new Promise((function(t,n){Ce.instance.addFile(e.name,e.type,e.data,e.url).then((function(r){r?(e.id=r,t(e)):n()}))}))}}]),e}();LT.serverDocumentData=void 0,LT.waitToUploadFileArr=[],LT.waitAssetFileChange=[],LT.uploading=void 0,LT.userId=void 0;var FT=function(e){v(n,gmvc.GModule);var t=y(n);function n(){return u(this,n),t.call(this,"user")}return f(n,[{key:"mutations",get:function(){var e;return b(e={},_.TEST,(function(e,t){})),b(e,K.CHANGE_NAME,(function(e,t){e.name=t})),b(e,K.USER_LOGIN_SUCCESS,(function(e,t){e.uuid=t})),b(e,K.GET_USER_INFO_SUCCESS,(function(e){})),b(e,K.GET_USER_ASSETS_SUCCESS,(function(e){})),b(e,K.LOAD_SUCCESS,(function(e){})),e}},{key:"actions",get:function(){var e,t=this;return b(e={},K.USER_LOGIN,(function(e,n){return new Promise((function(e,n){Ce.instance.getUserData().then((function(n){var r=n.uuid;t.commit(K.USER_LOGIN_SUCCESS,r),e(r)}))}))})),b(e,K.GET_USER_INFO,(function(e,n){var r=e.rootState.user.uuid;return LT.getUserInfo(r,(function(){t.commit(K.GET_USER_INFO_SUCCESS)}),(function(){t.commit(K.GET_USER_INFO_SUCCESS)}))})),b(e,K.GET_USER_ASSETS,(function(e){var n=e.rootState.user.uuid;return LT.getUserAssets(n).then((function(e){t.commit(K.GET_USER_ASSETS_SUCCESS,e)}))})),b(e,K.LOAD,(function(e){return LT.getNZDocument("dragonbones-web").then((function(e){t.commit(K.LOAD_SUCCESS,e)})).catch((function(){t.commit(K.LOAD_SUCCESS,void 0)}))})),e}}]),n}(),BT=function(e){v(n,gmvc.GStore);var t=y(n);function n(){var e;u(this,n),(e=t.call(this)).history=void 0,n._instance=g(e);var r=new RT,i=new DT,o=new FT,a=new _p,s=new gmvc.GHistory(g(e),i.name);return e.history=s,e.initHistory(),e.addModule(s),e.addModule(r),e.addModule(i),e.addModule(o),e.addModule(a),e.state=be(pe),e.init(),e}return f(n,[{key:"initHistory",value:function(){this.history.undoMutation=[V.SELECT_BONES]}},{key:"historyBeginMerge",value:function(e){this.commit(gmvc.GHistoryMutation.MERGE_START,{name:e||"autoMerge"})}},{key:"historyEndMerge",value:function(e){this.commit(gmvc.GHistoryMutation.MERGE_END,{name:e})}},{key:"getHistoryMergeName",value:function(){return this.history.curMergeName}},{key:"getId",value:function(){return++this.state.editor.idGen}},{key:"getSlotById",value:function(e){var t=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[t].slots.map[e]}},{key:"getSelectedSlots",value:function(){var e=this.state.runtime.editing.selectedSlotIds,t=[];if(e&&e.length)for(var n=0,r=e.length;n<r;n++){var i=e[n],o=this.getSlotById(i);o&&t.push(o)}return t}},{key:"getSelectedDisplay",value:function(){var e=this.state.runtime.editing.selectedSlotIds,t=this.state.runtime.editing.editMode;if(e&&1===e.length){var n=e[0],r=this.getSlotById(n);if(r.displayIndex>=0)return PT.getSlotCurDisplay(r,t)}}},{key:"getBoneById",value:function(e){var t=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[t].bones.map[e]}},{key:"getSelectedBones",value:function(){var e=this.state.runtime.editing.selectedBoneIds,t=[];if(e&&e.length)for(var n=0,r=e.length;n<r;n++){var i=e[n],o=this.getBoneById(i);o&&t.push(o)}return t}},{key:"getCurArmature",value:function(){var e=this.state.runtime.editing.editingArmatureId;return this.state.runtime.dragonbones.armatureMap[e]}},{key:"getCurArmatureCurAnimation",value:function(){var e=this.getCurArmature();return this.getCurAnimation(e)}},{key:"getCurAnimation",value:function(e){var t=this.state.runtime.editing.selectedAnimationId,n=this.state.runtime.dragonbones.animationMap;if(e&&e.animations)for(var r=0,i=e.animations.length;r<i;r++){var o=e.animations[r];if(t===o)return n[o]}}},{key:"getDefaultAnimation",value:function(e){if(e.animations&&e.animations.length){var t=e.animations[0];return this.state.runtime.dragonbones.animationMap[t]}}},{key:"getSaveData",value:function(e){var t=be({editor:e.editor,runtime:e.runtime,history:e.history});return JSON.stringify(t)}},{key:"getAnimationDuration",value:function(){var e=this.getCurArmature();if(e){var t=this.getCurAnimation(e);if(t)return gp.getAnimationDuration(t)}return[-1,-1]}},{key:"getAssetById",value:function(e){var t=this.state.runtime.dragonbones.assetMap[e];if(t)return t;for(var r in this.state.runtime.dragonbones.assetMap){var i=this.state.runtime.dragonbones.assetMap[r];if(i.children&&i.children.length)for(var o=0,a=i.children.length;o<a;o++){var s=i.children[o];if(s.id===e)return s}}return n.missingAsset}},{key:"dopesheetConfig",get:function(){return this.state.config.timeline}},{key:"dopesheetData",get:function(){return this.state.editor.dopesheet}},{key:"curFrame",get:function(){return this.state.editor.dopesheet.curTime}},{key:"getPlayHeadX",value:function(){var e=this.state.editor.dopesheet.curTime;return this.getXFromFrame(e)}},{key:"getXFromFrame",value:function(e){var t=this.state.config.timeline.FIRST_X,n=this.state.editor.dopesheet,r=n.offset;return n.curGap/n.scaleLevel*e+t-r}},{key:"getAnimationLength",value:function(e){return-1}},{key:"getFramePerLength",value:function(){var e=this.state.editor.dopesheet,t=e.curGap;return e.scaleLevel/t}},{key:"getLengthPerFrame",value:function(){var e=this.state.editor.dopesheet;return e.curGap/e.scaleLevel}},{key:"getFrameFromX",value:function(e){var t=this.state.config.timeline.FIRST_X,n=this.state.editor.dopesheet,r=n.offset,i=n.curGap;return(e+r-t)*n.scaleLevel/i}},{key:"getAnimationById",value:function(e){}},{key:"overFrameIds",get:function(){return this.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.state.runtime.editing.selectedFrameIds}},{key:"checkDataCompleted",value:function(){var e=this.state.runtime.dragonbones.armatureMap;for(var t in e){var n=e[t];PT.clearBoneGlobalTransform(n),PT.updateGlobalTransform(n)}}},{key:"mutations",get:function(){var e,t=this;return b(e={},_.TEST,(function(e){})),b(e,x.SAVE_LAYOUT,(function(e){})),b(e,x.SAVE,(function(e,n){var r=e.user.uuid||"",i=e;if(i){var o=i.runtime.dragonbones.name,a=i.editor.lastModify;if(a!==i.editor.saveTime||!!n){t.commit(x.SAVE_LAYOUT,{});var s=t.getSaveData(i);LT.save(r,o,a,s).then((function(e){t.commit(K.SAVE_SUCCESS)})).catch((function(){}))}}})),b(e,K.SAVE_SUCCESS,(function(e,t){})),e}},{key:"actions",get:function(){var e=this;return b({},_.TOOLBAR_COMMAND,(function(t,n){"ACTION"===n.trigger?e.dispatch(n.action,n.data):n.action===X.SWITCH_MODE?e.dispatch(X.SWITCH_MODE,n.data):e.commit(n.action,n.data)}))}}],[{key:"instances",get:function(){return n._instance}},{key:"getXFromFrame",value:function(e){return n._instance.getXFromFrame(e)}},{key:"dopesheetConfig",get:function(){return n._instance.state.config.timeline}},{key:"getAnimationLength",value:function(e){return n._instance.getAnimationLength(e)}},{key:"getAnimationById",value:function(e){return n._instance.getAnimationById(e)}},{key:"getLengthPerFrame",value:function(){return n._instance.getLengthPerFrame()}},{key:"getArrayFromMap",value:function(e){for(var t=[],n=0,r=e.ids.length;n<r;n++){var i=e.ids[n],o=e.map[i];if(!o)throw new Error("can not find id:".concat(i," in map ").concat(e.map));t.push(o)}return t}},{key:"getCurrentArmature",value:function(e){var t=e.runtime.editing.editingArmatureId;return e.runtime.dragonbones.armatureMap[t]}},{key:"getArmatureDefaultAnimation",value:function(e,t){var n=e.runtime.dragonbones,r=t.animations[0];return n.animationMap[r]}},{key:"hasAnimation",value:function(e,t){return!(!e||!e.animations)&&-1!==e.animations.indexOf(t)}},{key:"getDefaultAnimationId",value:function(e){if(e.animations&&e.animations.length)return e.animations[0]}},{key:"createName",value:function(e,t,n){if(!this.checkNameConflict(e,t,n))return e;for(var r=["0","1","2","3","4","5","6","7","8","9"],i="",o=e.length-1;o>=0;o--){var a=e.charAt(o);r.indexOf(a)>=0&&(i=a+i)}var s=1;""!==i&&(s=parseInt(i)),s<=0&&(s=1);for(var l=e+s;this.checkNameConflict(l,t,n);)l=e+ ++s;return l}},{key:"checkNameConflict",value:function(e,t,n){if(n&&0!==n.length)for(var r=0,i=n.length;r<i;r++){var o=t[n[r]];if(o&&o.name===e)return!0}else for(var a in t){var s=t[a];if(s&&s.name===e)return!0}return!1}}]),n}();BT._instance=void 0,BT.missingAsset={fileIds:[],id:0,type:E.MISSING_IMAGE,name:"missing"};var UT=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){BT.instances.checkDataCompleted()}}]),n}(),HT=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=BT.instances.history,t=[G.SELECT_BONES,G.UPDATE_LOCAL_TRANSFORMS,G.UPDATE_PROPERTIES,G.ADD_BONE,G.SET_PARENT,G.ADD_IK,G.DELETE_IKS,G.UPDATE_IK,G.DELETE_BONES,G.UPDATE_CACHE_IK,G.UPDATE_CACHE_TRANSFORMS,B.SELECT_SLOTS,B.UPDATE_LOCAL_TRANSFORMS,B.UPDATE_PROPERTIES,B.SET_PARENT,B.DELETE_SLOTS,B.UPDATE_CACHE_PROPERTIES,j.SELECT_DISPLAY,j.UPDATE_PROPERTIES,j.SET_PARENT,H.SELECT_MESH_POINTS,H.UPDATE_MESH,H.UPDATE_RIG_BONE,D.UPDATE_PROPERTIES,D.ADD_ARMATURES,D.SELECT_ARMATURE,W.CHANGE_BONE_SLOT_CONTROL,W.SWITCH_TOOL,W.UPDATE_MESH_TOOL,W.SET_DEFAULT_TOOLTIP_TOP,W.SELECT_RIGGING_BONE,W.SWITCH_MODE,M.AUTO_KEY,M.DELETE_FRAMES,M.SELECT_ANIMATION,M.ADD_ANIMATION,M.MODIFY_FRAMES,M.REMOVE_ANIMATION,M.MODIFY_TIMELINE],n=[P.CALCULATE_ANIMATED_PROPERTY];e.undoMutation=t,e.mustSendMutation=n,BT.instances.commit(gmvc.GHistoryMutation.ENABLE)}}]),n}(),jT=function(){function e(){u(this,e)}return f(e,null,[{key:"decode",value:function(t){var n=t.slice(0,1);if(111===new Int8Array(n)[0]){for(var r=0,i=new Int8Array(t.byteLength-1),o=new Int8Array(t),a=1;a<t.byteLength;a++,r++)r>=e.KEY.length&&(r=0),i[a-1]=o[a]-e.KEY.charCodeAt(r);if(window.amf)return new window.amf.Reader(i).readObject()}}}]),e}();jT.KEY="DRAGONBONES_IS_BEST";var zT=["className","component","viewBox","spin","rotate","tabIndex","onClick","children"],VT=a.forwardRef((function(e,t){var n=e.className,r=e.component,i=e.viewBox,o=e.spin,s=e.rotate,l=e.tabIndex,u=e.onClick,c=e.children,h=Yn(e,zT);xs(Boolean(r||c),"Should have `component` prop or `children`."),As();var d=a.useContext(Xn),f=d.prefixCls,p=void 0===f?"anticon":f,v=d.rootClassName,m=Ko()(v,p,n),g=Ko()(b({},"".concat(p,"-spin"),!!o)),y=s?{msTransform:"rotate(".concat(s,"deg)"),transform:"rotate(".concat(s,"deg)")}:void 0,_=Re(Re({},Cs),{},{className:g,style:y,viewBox:i});i||delete _.viewBox;var x=l;return void 0===x&&u&&(x=-1),a.createElement("span",Re(Re({role:"img"},h),{},{ref:t,tabIndex:x,onClick:u,className:m}),r?a.createElement(r,Re({},_),c):c?(xs(Boolean(i)||1===a.Children.count(c)&&a.isValidElement(c)&&"use"===a.Children.only(c).type,"Make sure that you provide correct `viewBox` prop (default `0 0 1024 1024`) to the icon."),a.createElement("svg",Re(Re({},_),{},{viewBox:i}),c)):null)}));VT.displayName="AntdIcon";var GT=VT,WT=["type","children"],XT=new Set;function YT(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e[n];if(t=r,Boolean("string"===typeof t&&t.length&&!XT.has(t))){var i=document.createElement("script");i.setAttribute("src",r),i.setAttribute("data-namespace",r),e.length>n+1&&(i.onload=function(){YT(e,n+1)},i.onerror=function(){YT(e,n+1)}),XT.add(r),document.body.appendChild(i)}}var KT=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scriptUrl,n=e.extraCommonProps,r=void 0===n?{}:n;t&&"undefined"!==typeof document&&"undefined"!==typeof window&&"function"===typeof document.createElement&&(Array.isArray(t)?YT(t.reverse()):YT([t]));var i=a.forwardRef((function(e,t){var n=e.type,i=e.children,o=Yn(e,WT),s=null;return e.type&&(s=a.createElement("use",{xlinkHref:"#".concat(n)})),i&&(s=i),a.createElement(GT,Re(Re(Re({},r),o),{},{ref:t}),s)}));return i.displayName="Iconfont",i}({scriptUrl:"./libs/icon.js"}),qT=void 0,ZT=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).refs=void 0,r._treeData=[],r.onClickFolder=function(e,t){t.stopPropagation();var n=parseInt(t.currentTarget.getAttribute("id")),i=r.state.openIds.concat(),o=i.indexOf(n);o<0?i.push(n):i.splice(o,1),r.setState({openIds:i})},r.onItemOver=function(e){r.props.onItemOver&&r.props.onItemOver(e)},r.onItemOut=function(e){r.props.onItemOut&&r.props.onItemOut(e)},r.onItemSelect=function(e){r.props.onlyView||r.props.onItemSelect&&r.props.onItemSelect(e)};var i=e.openIds||[];return e.openAll&&(i=r.allItemIds),r.state={openIds:i,openAll:e.openAll,propsOpenIds:e.openIds,propsSelectedIds:e.selectedIds||[],isSelectChange:!1},r}return f(n,[{key:"treeData",get:function(){this._treeData||(this._treeData=[]);var e=this.props.value;if(e){this._treeData.length=0;for(var t=0,n=e.length;t<n;t++){var r=e[t],i=this.getShowItemTree(r,0);this._treeData=this._treeData.concat(i)}return this._treeData}return[]}},{key:"allItemIds",get:function(){return n.getAllItemIds(this.props.value)}},{key:"getShowItemTree",value:function(e,t){var n=[];if(e.deep=t,n.push(e),this.isOpen(e)&&e.children)for(var r=0,i=e.children.length||0;r<i;r++){var o=this.getShowItemTree(e.children[r],t+1);n=n.concat(o)}return n}},{key:"render",value:function(){var e=[];if(this.props.value)for(var t=this.treeData,n=0,r=t.length;n<r;n++){var i=t[n];e.push(this.renderItem(i,n))}return(0,ff.jsx)("div",{className:"v-tree",ref:"vTree",children:e})}},{key:"componentDidUpdate",value:function(e,t,n){if(this.state.isSelectChange){var r=0;if(this.props.selectedIds&&this.props.selectedIds.length&&(r=this.props.selectedIds[0]),r){var i=this.refs.vTree.querySelector('.v-tree-item[id="'.concat(r,'"]'));if(i){var o=i.getBoundingClientRect(),a=this.refs.vTree.getBoundingClientRect();(o.top<a.top||o.bottom>a.bottom)&&(this.refs.vTree.scrollTop=o.top-a.top)}}}}},{key:"renderItem",value:function(e,t){var n=this.props.children,r=null;"function"==typeof n&&(r=n(e));var i=this.renderFolderIcon(e,this.onClickFolder);return(0,ff.jsx)($T,{index:t,itemData:e,folderIcon:i,onClickFolder:this.onClickFolder,onItemOver:this.onItemOver,onItemOut:this.onItemOut,onItemSelect:this.onItemSelect,item:r,foldByIcon:this.props.foldByIcon,gap:this.props.gap},t)}},{key:"renderFolderIcon",value:function(e,t){if(e&&(e.children&&e.children.length||e.isFolder)){var n=this.isOpen(e)?"icon-arrow-down-filling":"icon-arrow-right-filling";return(0,ff.jsx)(KT,{type:n,id:e.id,onClick:t.bind(this,e)})}return(0,ff.jsx)("div",{className:this.props.hideFolderClassName||"hide-folder"})}},{key:"isFolder",value:function(e){return e&&e.children}},{key:"isOpen",value:function(e){return e&&e.children&&this.state.openIds.indexOf(e.id)>=0}},{key:"openItem",value:function(e,t){if(this.isFolder(e)&&(t.includes(e.id)||t.push(e.id)),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.openItem(i,t)}}}],[{key:"getItemsPathIds",value:function(e,t){var n=[];if(t&&t.length){for(var r=0,i=t.length;r<i;r++){var o=t[r],a=this.getItemPathIds(e,o,[]);a&&(n=n.concat(a))}n=Array.from(new Set(n))}return n}},{key:"getItemPathIds",value:function(e,t,n){for(var r=0,i=e.length;r<i;r++){var o=e[r];if(o.id===t)return n.push(t),n;if(o.children){if(n.push(o.id),this.getItemPathIds(o.children,t,n))return n;n.pop()}}return!1}},{key:"getAllItemIds",value:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.getItemIds(i,t)}return t}},{key:"getItemIds",value:function(e,t){if(t.push(e.id),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.getItemIds(i,t)}}},{key:"getDerivedStateFromProps",value:function(e,t){if(e.openAll!==t.openAll){if(!e.openAll)return{openIds:[],openAll:e.openAll,propsOpenIds:e.openIds};var r=e.value;if(r)return{openIds:n.getAllItemIds(r),openAll:e.openAll,propsOpenIds:e.openIds}}else if(e.openIds!==t.propsOpenIds)return{openIds:e.openIds,propsOpenIds:e.openIds};if(e.selectedIds!==t.propsSelectedIds){var i=n.getItemsPathIds(e.value,e.selectedIds),o=t.openIds.concat(i);return o=Array.from(new Set(o)),{propsSelectedIds:e.selectedIds,openIds:o,isSelectChange:!0}}return t.isSelectChange?{isSelectChange:!1}:null}}]),n}(a.Component),$T=function(e){var t=e.index,n=e.itemData,r=e.onItemOut,i=e.onItemOver,o=e.onClickFolder,a=e.folderIcon,s=e.item,l=e.onItemSelect,u=e.foldByIcon,c=e.gap;return(0,ff.jsxs)("div",{className:"v-tree-item",id:n.id,style:{display:"flex"},onMouseOver:i.bind(qT,n),onMouseOut:r.bind(qT,n),onClick:n.children?u?l.bind(qT,n):o.bind(qT,n):l.bind(qT,n),children:[(0,ff.jsx)("div",{style:{width:"".concat((c||20)*n.deep,"px")}}),a,s]},t)},QT=function(e){v(n,gboxLayout.GPanel);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).label=void 0,r.icon=void 0,r.componentClass=void 0,r.store=void 0,r.eventBus=void 0,r.labelRoot=void 0,r.componentRoot=void 0,r.label=e.label,r.icon=e.icon,r.type=void 0===e.type?gboxLayout.GPanelType.TAB:e.type,r.componentClass=e.componentClass,r.store=$2.instance.store,r.eventBus=$2.instance.eventBus,r}return f(n,[{key:"renderLabel",value:function(){null==this.labelElement&&(this.labelElement=document.createElement("span"));var e=(0,ff.jsxs)("div",{children:[(0,ff.jsx)(KT,{type:this.icon}),this.label]});this.labelRoot||(this.labelRoot=(0,l.createRoot)(this.labelElement)),this.labelRoot.render(e)}},{key:"renderElement",value:function(){null==this.contentElement&&(this.contentElement=document.createElement("div"),this.contentElement.style.height="100%"),null==this.toolBarElement&&(this.toolBarElement=document.createElement("div"));var e=this.componentClass;this.componentRoot||(this.componentRoot=(0,l.createRoot)(this.contentElement)),this.componentRoot.render((0,ff.jsx)(e,{store:$2.instance.store,eventBus:$2.instance.eventBus}))}}]),n}(),JT=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:tS,label:"\u5e93",icon:"icon-bx-library"})}return f(n)}(QT),eS=function(e){return e[e.IMAGE=0]="IMAGE",e[e.SPRITE_SHEET=1]="SPRITE_SHEET",e[e.ARMATURE=2]="ARMATURE",e}(eS||{}),tS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.onListChange=function(e){r.refresh()},r.onItemOut=function(e){r.showPreview(-1)},r.onItemOver=function(e){r.showPreview(e.id)},r.onDragOver=function(e){e.stopPropagation(),e.preventDefault()},r.onDrop=function(e){if(!r.state.disabled&&(e.stopPropagation(),e.preventDefault(),e&&e.dataTransfer&&e.dataTransfer.files)){var t=e.dataTransfer.files;r.uploadFiles(t)}},r.state={assets:r.getAllAsset(),disabled:!1},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(N.ADD_ASSET,this.refresh,this),this.props.eventBus.on(D.ADD_ARMATURES,this.refresh,this),this.props.eventBus.on(D.DELETE_ARMATURES,this.refresh,this),this.props.eventBus.on(q.SELECT_ARMATURE,this.selectArmature,this),this.props.eventBus.on(D.UPDATE_PROPERTIES,this.refresh,this),this.props.eventBus.on(W.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"selectArmature",value:function(e){this.props.store.commit(D.SELECT_ARMATURE,{armatureId:e.data.id})}},{key:"refresh",value:function(){this.setState({assets:this.getAllAsset()})}},{key:"getAllAsset",value:function(){var e=[{id:eS.IMAGE,name:"\u56fe\u7247",children:[],isFolder:!0},{id:eS.SPRITE_SHEET,name:"\u7cbe\u7075\u56fe",children:[],isFolder:!0},{id:eS.ARMATURE,name:"\u9aa8\u67b6",children:[],isFolder:!0}],t=this.props.store.state.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r)switch(r.type){case E.PNG:case E.JPG:case E.JPEG:case E.SVG:e[eS.IMAGE].children||(e[eS.IMAGE].children=[]),e[eS.IMAGE].children.push({id:r.id,name:r.name,data:r});break;case E.SPRITE_SHEET:e[eS.SPRITE_SHEET].children||(e[eS.SPRITE_SHEET].children=[]),e[eS.SPRITE_SHEET].children.push({id:r.id,name:r.name,data:r,children:r.children})}}var i=this.props.store.state.runtime.dragonbones.armatureMap;for(var o in i){var a=i[o];if(a){e[eS.ARMATURE].children||(e[eS.ARMATURE].children=[]);var s=[];if(a.skins)for(var l in a.skins.map){var u=a.skins.map[l];u&&s.push({id:u.id,name:u.name})}var c={id:a.id,name:a.name,data:{assetType:eS.ARMATURE,type:"armature"}};s.length>1&&(c.children=s),e[eS.ARMATURE].children.push(c)}}return e}},{key:"render",value:function(){for(var e=this,t=this.state.assets,n=!1,r=0,i=0,o=t.length;i<o;i++){var a=t[i];if(a.children&&a.children.length&&(r+=a.children.length)>5){n=!0;break}}return(0,ff.jsxs)("div",{className:"library"+(this.state.disabled?" panel-disabled":""),onDrop:this.onDrop,children:[(0,ff.jsxs)("div",{className:"preview",ref:"previewDiv",children:[(0,ff.jsx)("img",{src:"",ref:"preview"}),(0,ff.jsx)("audio",{src:"",ref:"previewAudio"}),(0,ff.jsx)("div",{ref:"previewSheet"})]}),(0,ff.jsx)(ZT,{value:t,openAll:!0,onItemOut:this.onItemOut,onItemOver:this.onItemOver,hideFolderClassName:"no-folder",onlyView:this.state.disabled,children:function(t){return(0,ff.jsx)(nS,{data:t,store:e.props.store,eventBus:e.props.eventBus,disabled:e.state.disabled})}}),!n&&(0,ff.jsx)("div",{className:"empty-tip",children:"\u53ef\u62d6\u62fdpng\uff0cjpg\uff0cjson\uff0cdbproj\u683c\u5f0f\u7684\u6587\u4ef6\u5230\u8fd9\u91cc\uff0c\u6765\u5bfc\u5165\u56fe\u7247\uff0c\u7eb9\u7406\u96c6\uff0c\u548c\u9f99\u9aa8\u6570\u636e"})]})}},{key:"componentDidMount",value:function(){}},{key:"getIcon",value:function(e){if(!e.children)return(0,ff.jsx)(KT,{type:"icon-code"})}},{key:"onDragStart",value:function(e){}},{key:"getItemDataById",value:function(e){var t=this.props.store.state.runtime.dragonbones.assetMap;for(var n in t){var r=t[n];if(r&&r.id===e)return r;if(r.children)for(var i=0,o=r.children.length;i<o;i++){var a=r.children[i];if(a&&a.id===e)return a}}}},{key:"getFileById",value:function(e){return this.props.store.state.library.files[e]}},{key:"showPreview",value:function(e){var t="",n=this.refs.preview,r=this.refs.previewSheet,i=this.refs.previewAudio;n&&(n.src=t,n.style.display="none"),r&&(r.style.display="none"),i.src=t;var o=this.getItemDataById(e);if(o&&o.fileIds[0])switch(o.type){case E.PNG:case E.SVG:case E.JPG:case E.JPEG:var a=this.getFileById(o.fileIds[0]);a&&(a.url?t=a.url:a.data&&(t=a.data));var s=this.refs.preview;s.src=t,s.style.display="";break;case E.MP3:var l=this.getFileById(o.fileIds[0]);l&&(l.url?t=l.url:l.data&&(t=l.data));var u=this.refs.previewAudio;u.src=t;var c=u.play();void 0!==c&&c.then((function(e){})).catch((function(e){}));break;case E.SPRITE_SHEET:var h=this.getFileById(o.fileIds[1]);h&&(h.url?t=h.url:h.data&&(t=h.data));var d=this.refs.preview;d.src=t,d.style.display="";break;case E.SUB_TEXTURE:var f,p,v=this.getFileById(o.fileIds[1]);v&&(v.url?t=v.url:v.data&&(t=v.data));var m=this.refs.previewSheet,g=(null===(f=m.parentElement)||void 0===f?void 0:f.clientWidth)||100,y=(null===(p=m.parentElement)||void 0===p?void 0:p.clientHeight)||100,b=g/o.data.width,_=y/o.data.height,x=Math.min(b,_,1);m.style.backgroundImage="url(".concat(v.data,")"),m.style.width="".concat(o.data.width,"px"),m.style.height="".concat(o.data.height,"px"),m.style.backgroundPositionX="-".concat(o.data.x,"px"),m.style.backgroundPositionY="-".concat(o.data.y,"px"),m.style.position="relative",m.style.scale=x+"",m.style.display=""}}},{key:"supportFile",value:function(e){var t=Pt(e.name.split("."),2),n=(t[0],t[1]);return!!["json","png","jpg","jpeg","dbproj"].includes(n)}},{key:"supportFileAndType",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=Pt(t.name.split("."),2),i=(r[0],r[1]);if(["json","png","jpg","jpeg","dbproj"].includes(i)){if(t){if("dbproj"===i)return void e("dragonboneProj");t.name;var o=new FileReader;o.onloadend=function(n){if(n&&n.target&&n.target.result){var r=n.target.result,i=t.type.split("/");switch(i[0]){case"image":e("image");break;case"application":if("json"===i[1]){var o=r.split("base64,")[1],a=window.atob(o),s=JSON.parse(a);s&&(s.SubTexture&&s.name&&s.imagePath?e("spritesheet"):xp.isDragonbonesJson(s)?e("dragonboneJson"):e("unknown"))}break;default:e("unknown")}}},o.readAsDataURL(t)}}else e("unknown")})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"isDBPROJ",value:function(e){var t=Pt(e.name.split("."),2);t[0];return"dbproj"===t[1]}},{key:"uploadFiles",value:function(){var e=Ee(_e().mark((function e(t){var n,r,i,o,a,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.length){e.next=30;break}n=[],r=0,i=t.length;case 3:if(!(r<i)){e.next=12;break}return e.next=6,this.supportFileAndType(t[r]);case 6:"unknown"===(o=e.sent)&&yf.warn("\u4e0d\u652f\u6301\u7684\u6587\u4ef6"),"dragonboneJson"===o||"dragonboneProj"===o?n.push(t[r]):n.unshift(t[r]);case 9:r++,e.next=3;break;case 12:a=0,s=n.length;case 13:if(!(a<s)){e.next=30;break}if(e.prev=14,!this.isDBPROJ(n[a])){e.next=20;break}return e.next=18,this.importDBProj(n[a]);case 18:e.next=22;break;case 20:return e.next=22,this.uploadFile(n[a]);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(14);case 27:a++,e.next=13;break;case 30:case"end":return e.stop()}}),e,this,[[14,24]])})));return function(t){return e.apply(this,arguments)}}()},{key:"importDBProj",value:function(){var e=Ee(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t){var i=new FileReader;i.onloadend=function(e){if(e&&e.target&&e.target.result){var t=e.target.result,r=jT.decode(t);n.props.store.dispatch(R.LOAD_DRAGON_BONES_DATA,r)}},i.readAsArrayBuffer(t)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"importJsonDBData",value:function(e,t){this.props.store.dispatch(R.LOAD_DRAGON_BONES_JSON_DATA,{data:e,version:t})}},{key:"importJson",value:function(){var e=Ee(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){try{var i=t.data,o=JSON.parse(i);o&&(o.SubTexture&&o.name&&o.imagePath?n.uploadFileToServe(n.props.store,t).then((function(){e(t)})):xp.isDragonbonesJson(o)?(n.importJsonDBData(o,o.version),e(o)):(yf.warn("\u4e0d\u652f\u6301\u7684\u6587\u4ef6"),e("unkonwn")))}catch(a){r(a)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"uploadFile",value:function(){var e=Ee(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){if(t){var i=t.name,o=new FileReader;o.onloadend=function(o){if(o&&o.target&&o.target.result){var a=o.target.result,s=t.type.split("/");switch(s[0]){case"audio":case"image":var l={name:i,type:s[1].toLowerCase(),data:a};n.uploadFileToServe(n.props.store,l).then((function(){e(l)}));break;case"application":if("json"===s[1]){var u=a.split("base64,")[1],c=window.atob(u),h={name:i,type:s[1].toLowerCase(),data:c};n.importJson(h).then((function(){e(h)}))}break;default:r("\u4e0d\u652f\u6301\u7684\u6587\u4ef6".concat(s[0]))}}},o.readAsDataURL(t)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAssetNameByFileName",value:function(e){var t=Pt(e.split("."),2),n=t[0];t[1];return n}},{key:"uploadFileToServe",value:function(){var e=Ee(_e().mark((function e(t,n){var r=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,i){LT.uploadFileToServer(n).then((function(o){if(o){t.commit(_.UPLOAD_FILE,o);var a={id:t.getId(),name:r.getAssetNameByFileName(o.name),fileIds:[o.id],type:o.type,data:o.data};"mpeg"===n.type&&(a.type=E.MP3),t.dispatch(R.ADD_FILE,a),e(o)}else i()}))})));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(a.Component),nS=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).refs={},e.getIcon=function(e){if(!e.children){if("subTexture"===e.type)return(0,ff.jsx)(KT,{type:"icon-picture1"});if(e.data&&e.data.type){if("png"===e.data.type||"jpg"===e.data.type||"jpeg"===e.data.type)return(0,ff.jsx)(KT,{type:"icon-picture"});if("armature"===e.data.type)return(0,ff.jsx)(KT,{type:"icon-man1"})}return(0,ff.jsx)(KT,{type:"unknown"})}},e.onDoubleClick=function(t){var n;if(!e.props.disabled){var r=e.props.data;(null===r||void 0===r||null===(n=r.data)||void 0===n?void 0:n.assetType)===eS.ARMATURE&&e.props.eventBus.dispatchEventWidth(q.SELECT_ARMATURE,r)}},e.onDragStart=function(t){if(!e.props.disabled){var n=e.props.data,r=e.props.data.data;if(r){var i=n;if(r.type===I.MOVIECLIP);else{var o=t.dataTransfer,a=Pt(e.getFileDataById(n.id),2),s=a[0],l=a[1];if(s)if(l){var u=document.createElement("div"),c=l.data.width,h=l.data.height;u.style.backgroundImage="url(".concat(s.data,")"),u.style.width="".concat(l.data.width,"px"),u.style.height="".concat(l.data.height,"px"),u.style.backgroundPositionX="-".concat(l.data.x,"px"),u.style.backgroundPositionY="-".concat(l.data.y,"px"),o.setData("size",{width:c,height:h}),o.setDragImage(u,.5*c,.5*h)}else{var d=document.createElement("img");d.src=s.url||s.data;var f=d.width,p=d.height;o.setData("size",{width:f,height:p}),o.setDragImage(d,.5*f,.5*p)}}i&&t.dataTransfer.setData("dropToScene",i)}}},e.onDragEnter=function(t){if(!e.props.disabled){var n=t.dataTransfer;if(n){var r=t.dataTransfer.target;if(n.getData("size"))if(r&&r.parentElement&&"stage"===r.parentElement.className){var i=e.getCameraScale();n.setDragScale(i),n.setDragAlpha(.5)}else{n.setDragScale(1),n.setDragAlpha(1)}}}},e}return f(n,[{key:"render",value:function(){var e=this.props.data;return(0,ff.jsxs)("div",{className:"library-item",ref:"libraryItem","data-draggable":!this.props.disabled&&!e.children&&e.data!==eS.ARMATURE,onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,children:[this.getIcon(e),(0,ff.jsx)("div",{children:e.name})]})}},{key:"getCameraScale",value:function(){return this.props.store.state.editor.stage.scale}},{key:"getFileDataById",value:function(e){var t=this.props.store.state.library.files,n=this.props.store.state.runtime.dragonbones.assetMap;for(var r in n){var i=n[r];if(i&&i.id===e)return[t[i.fileIds[0]],null];if(i.children)for(var o=0,a=i.children.length;o<a;o++){var s=i.children[o];if(s.id===e)return[t[i.fileIds[1]],s]}}return[null,null]}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.libraryItem)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.libraryItem)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.libraryItem)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),rS=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._data=void 0,e._over=!1,e._selected=!1,e._ik=!1,e._ikTarget=!1,e._selectedIk=!1,e._color=void 0,e._selectedRiggingBoneId=0,e}return f(n,[{key:"data",get:function(){return this._data},set:function(e){if(this._data=e,this.clear(),e){this.refresh();var t=e.globalTransform;t||(t=e.transform),this.x=t.x,this.y=t.y,this.scale.set(t.scaleX,t.scaleY),this.skew.set(-t.skewX,t.skewY)}}},{key:"setColor",value:function(e){this._color!==e&&(this._color=e)}},{key:"color",set:function(e){this._color!==e&&(this._color=e,this.refresh())}},{key:"over",set:function(e){this._over!==e&&(this._over=e,this.refresh())}},{key:"selected",set:function(e){this._selected!==e&&(this._selected=e,this.refresh())}},{key:"setIk",value:function(e){this._ik!==e&&(this._ik=e)}},{key:"ik",set:function(e){this._ik!==e&&(this._ik=e,this.refresh())}},{key:"setIkTarget",value:function(e){this._ikTarget!==e&&(this._ikTarget=e)}},{key:"ikTarget",set:function(e){this._ikTarget!==e&&(this._ikTarget=e,this.refresh())}},{key:"setSelectedIk",value:function(e){this._selectedIk!==e&&(this._selectedIk=e)}},{key:"selectedIk",set:function(e){this._selectedIk!==e&&(this._selectedIk=e,this.refresh())}},{key:"selectedRiggingBoneId",set:function(e){this._selectedRiggingBoneId!==e&&(this._selectedRiggingBoneId=e,this.refresh())}},{key:"clearData",value:function(){this._data=void 0,this._ik=!1,this._ikTarget=!1,this._selectedIk=!1,this._over=!1,this._selected=!1,this._color=void 0}},{key:"drawIK",value:function(){if(this._data&&this._data.ikTransform){var e=this._data.ikGlobalTransform,t=this._data.globalTransform,n=this._data.fkGlobalTransform;vp.transformEqual(e,t)||this.drawIKLine(e,t,yp.BONE_IK_LINE),vp.transformEqual(n,t)||this.drawIKLine(n,t,yp.BONE_FK_LINE)}}},{key:"drawIKLine",value:function(e,t,n){var r=vp.transformInvertCross(t,e),i=r.x,o=r.y,a=vp.transformApplyPoint(r,{y:0,x:this._data.length});this.lineStyle(1,n),this.moveTo(i,o),this.lineTo(a.x,a.y)}},{key:"refresh",value:function(){var e;if(this.clear(),this._data){var t,n=1,r=this._color||yp.BONE_FILL_UP,i=yp.BONE_FILL_UP;if(this._selectedRiggingBoneId)n=.5,this._selectedRiggingBoneId===(null===(t=this._data)||void 0===t?void 0:t.id)&&(n=1);this._selected&&this._over?r=yp.BONE_FILL_DOWN_OVER:this._selected?r=yp.BONE_FILL_DOWN:this._over&&(r=yp.BONE_FILL_OVER),i=r,this._ik&&(n=.1),this._ikTarget&&(i=yp.BONE_FILL_IK),this.lineStyle(1,i,1,0),this.beginFill(0,.1),this.drawCircle(0,0,5),this.endFill(),this.beginFill(r,1),this.drawCircle(0,0,1),this.endFill(),this.lineStyle(1,i,1),this.moveTo(0,0),this.lineTo(4,0);var o=(null===(e=this._data)||void 0===e?void 0:e.length)||0;o<=10?(this.lineStyle(1,i,1),this.lineStyle({cap:LE.BUTT,join:DE.ROUND}),this.moveTo(0,0),this.lineTo(o,0)):(this.lineStyle(1,i,1),this.moveTo(0,0),this.lineTo(5,0),this.lineStyle(1,i,1,0),this.beginFill(r,n),this.moveTo(5,0),this.lineTo(8,4),this.lineTo(o,0),this.lineTo(8,-4),this.lineTo(5,0),this.endFill()),this._selectedIk&&this.drawIK()}}}]),n}(iw),iS=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;u(this,e),this._maxCount=100,this._pool=[],this._classType=void 0,this._classType=t,this._maxCount=n}return f(e,[{key:"maxCount",get:function(){return this._maxCount},set:function(e){this._maxCount=e}},{key:"length",get:function(){return this._pool.length}},{key:"get",value:function(){return this._pool.length>0?this._pool.pop():new this._classType}},{key:"put",value:function(e){this._pool.length<this._maxCount&&this._pool.push(e)}},{key:"clearArray",value:function(e){for(var t=0,n=e.length;t<n;t++)this.put(e[t]);e.length=0}}],[{key:"toString",value:function(){return"ObjectPool"}}]),e}(),oS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this))._app=void 0,r._center=void 0,r._bones=[],r._overBoneId=0,r._selectedBoneIds=[],r._boneShapes=[],r._boneShapePool=new iS(rS),r._ikBoneIds=[],r._ikTargetBoneIds=[],r._selectedIkBoneIds=[],r._selectedRiggingBoneId=0,r._riggingBoneIds=void 0,r._boneColor={},r._app=e,r._center=new bg(0,0),r._width=0,r._height=0,r}return f(n,[{key:"setBones",value:function(e){this._bones=e}},{key:"bones",set:function(e){this._bones=e,this.refresh()}},{key:"overBoneId",set:function(e){this._overBoneId!==e&&(this._overBoneId=e,this.refreshBoneOverAndSelected())}},{key:"selectedBoneIds",set:function(e){this._selectedBoneIds=e,this.refreshBoneOverAndSelected()}},{key:"ikBoneIds",set:function(e){this._ikBoneIds=e,this.refreshIK()}},{key:"ikTargetBoneIds",set:function(e){this._ikTargetBoneIds=e,this.refreshIK()}},{key:"selectedIkBoneIds",set:function(e){this._selectedIkBoneIds=e}},{key:"riggingBoneIds",set:function(e){this._riggingBoneIds=e}},{key:"selectedRiggingBoneId",set:function(e){this._selectedRiggingBoneId!==e&&(this._selectedRiggingBoneId=e,this.refreshBoneOverAndSelected())}},{key:"hideBoneIds",set:function(e){for(var t=0,n=this._boneShapes.length;t<n;t++){var r=this._boneShapes[t];r.visible=e.indexOf(r.data.id)<0}}},{key:"refreshBoneOverAndSelected",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.over=n.data.id===this._overBoneId,n.selectedIk=this._selectedIkBoneIds.indexOf(n.data.id)>=0,n.selected=this._selectedBoneIds.indexOf(n.data.id)>=0,this._riggingBoneIds&&this._riggingBoneIds.indexOf(n.data.id)>=0?n.selectedRiggingBoneId=this._selectedRiggingBoneId:n.selectedRiggingBoneId=0)}}},{key:"refreshBones",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.ik=this._ikBoneIds.indexOf(n.data.id)>=0,n.ikTarget=this._ikTargetBoneIds.indexOf(n.data.id)>=0,n.refresh())}}},{key:"stopOverCheck",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.removeAllListeners("mouseover"),n.removeAllListeners("mouseout")}}},{key:"refreshIK",value:function(){for(var e=0,t=this._boneShapes.length;e<t;e++){var n=this._boneShapes[e];n.data&&(n.selectedIk=this._selectedIkBoneIds.indexOf(n.data.id)>=0,n.ik=this._ikBoneIds.indexOf(n.data.id)>=0,n.ikTarget=this._ikTargetBoneIds.indexOf(n.data.id)>=0)}}},{key:"startOvercheck",value:function(){var e=this;this.stopOverCheck();for(var t=function(){var t=e._boneShapes[n];t.addEventListener("mouseover",(function(){var n;e.emit(q.OVER_BONE,null===(n=t.data)||void 0===n?void 0:n.id)})),t.addEventListener("mouseout",(function(){e.emit(q.OUT_BONE)}))},n=0,r=this._boneShapes.length;n<r;n++)t()}},{key:"refreshColor",value:function(e){this._boneColor=be(e);for(var t=0,n=this._boneShapes.length;t<n;t++){var r,i=this._boneShapes[t];if(e)i.color=(null===(r=e[i.data.id])||void 0===r?void 0:r.color)||void 0;else i.color=void 0}}},{key:"refresh",value:function(){var e=this;this.clear();for(var t=function(){var t,r=e._bones[n],i=e._boneShapePool.get();i.eventMode="static",i.setIk(e._ikBoneIds.indexOf(r.id)>=0),i.setIkTarget(e._ikTargetBoneIds.indexOf(r.id)>=0),i.setSelectedIk(e._selectedIkBoneIds.indexOf(r.id)>=0),i.setColor(e._boneColor&&(null===(t=e._boneColor[r.id])||void 0===t?void 0:t.color)),i.data=r,e.addChild(i),i.addEventListener("mouseover",(function(){e.emit(q.OVER_BONE,r.id)})),i.addEventListener("mouseout",(function(){e.emit(q.OUT_BONE)})),e._boneShapes.push(i)},n=0,r=this._bones.length;n<r;n++)t();this.refreshBoneOverAndSelected()}},{key:"clear",value:function(){this.stopOverCheck();for(var e=0,t=this._boneShapes.length;e<t;e++){this._boneShapes[e].clearData()}this._boneShapePool.clearArray(this._boneShapes),this.children.length=0}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.x=e,this._center.y=t,this.x=e,this.y=t}},{key:"setScale",value:function(e){this.scale.set(e)}}]),n}(c_),aS=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",o?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"))._kernels=[],e._blur=4,e._quality=3,e.uniforms.uOffset=new Float32Array(2),e._pixelSize=new bg,e.pixelSize=1,e._clamp=o,Array.isArray(r)?e.kernels=r:(e._blur=r,e.quality=i),e}return f(n,[{key:"apply",value:function(e,t,n,r){var i,o=this._pixelSize.x/t._frame.width,a=this._pixelSize.y/t._frame.height;if(1===this._quality||0===this._blur)i=this._kernels[0]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,t,n,r);else{for(var s,l=e.getFilterTexture(),u=t,c=l,h=this._quality-1,d=0;d<h;d++)i=this._kernels[d]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,u,c,1),s=u,u=c,c=s;i=this._kernels[h]+.5,this.uniforms.uOffset[0]=i*o,this.uniforms.uOffset[1]=i*a,e.applyFilter(this,u,n,r),e.returnFilterTexture(l)}}},{key:"_updatePadding",value:function(){this.padding=Math.ceil(this._kernels.reduce((function(e,t){return e+t+.5}),0))}},{key:"_generateKernels",value:function(){var e=this._blur,t=this._quality,n=[e];if(e>0)for(var r=e,i=e/t,o=1;o<t;o++)r-=i,n.push(r);this._kernels=n,this._updatePadding()}},{key:"kernels",get:function(){return this._kernels},set:function(e){Array.isArray(e)&&e.length>0?(this._kernels=e,this._quality=e.length,this._blur=Math.max.apply(Math,Pe(e))):(this._kernels=[0],this._quality=1)}},{key:"clamp",get:function(){return this._clamp}},{key:"pixelSize",get:function(){return this._pixelSize},set:function(e){"number"==typeof e?(this._pixelSize.x=e,this._pixelSize.y=e):Array.isArray(e)?(this._pixelSize.x=e[0],this._pixelSize.y=e[1]):e instanceof bg?(this._pixelSize.x=e.x,this._pixelSize.y=e.y):(this._pixelSize.x=1,this._pixelSize.y=1)}},{key:"quality",get:function(){return this._quality},set:function(e){this._quality=Math.max(1,Math.round(e)),this._generateKernels()}},{key:"blur",get:function(){return this._blur},set:function(e){this._blur=e,this._generateKernels()}}]),n}(cy),sS="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",lS=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return u(this,n),(e=t.call(this,sS,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n")).threshold=r,e}return f(n,[{key:"threshold",get:function(){return this.uniforms.threshold},set:function(e){this.uniforms.threshold=e}}]),n}(cy),uS=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,sS,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n")).bloomScale=1,r.brightness=1,r._resolution=Zp.FILTER_RESOLUTION,"number"==typeof e&&(e={threshold:e});var i=Object.assign(n.defaults,e);r.bloomScale=i.bloomScale,r.brightness=i.brightness;var o=i.kernels,a=i.blur,s=i.quality,l=i.pixelSize,c=i.resolution;return r._extractFilter=new lS(i.threshold),r._extractFilter.resolution=c,r._blurFilter=o?new aS(o):new aS(a,s),r.pixelSize=l,r.resolution=c,r}return f(n,[{key:"apply",value:function(e,t,n,r,i){var o=e.getFilterTexture();this._extractFilter.apply(e,t,o,1,i);var a=e.getFilterTexture();this._blurFilter.apply(e,o,a,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=a,e.applyFilter(this,t,n,r),e.returnFilterTexture(a),e.returnFilterTexture(o)}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e,this._extractFilter&&(this._extractFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}},{key:"threshold",get:function(){return this._extractFilter.threshold},set:function(e){this._extractFilter.threshold=e}},{key:"kernels",get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e}},{key:"blur",get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e}},{key:"quality",get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e}},{key:"pixelSize",get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e}}]),n}(cy);uS.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:Zp.FILTER_RESOLUTION};var cS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n")).uniforms.dimensions=new Float32Array(2),Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,o=i.width,a=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,e.applyFilter(this,t,n,r)}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}},{key:"strength",get:function(){return this.uniforms.strength},set:function(e){this.uniforms.strength=e}},{key:"center",get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e}}]),n}(cy);cS.defaults={center:[.5,.5],radius:100,strength:1};var hS;(hS=hS||{}).stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var n=e.visit(t.orientation);return n&&(n+=", "),t.type+"("+n+e.visit(t.colorStops)+")"},visit_shape:function(t){var n=t.value,r=e.visit(t.at),i=e.visit(t.style);return i&&(n+=" "+i),r&&(n+=" at "+r),n},"visit_default-radial":function(t){var n="",r=e.visit(t.at);return r&&(n+=r),n},"visit_extent-keyword":function(t){var n=t.value,r=e.visit(t.at);return r&&(n+=" at "+r),n},"visit_position-keyword":function(e){return e.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(e){return e.value+"%"},visit_em:function(e){return e.value+"em"},visit_px:function(e){return e.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,n){var r=t,i=e.visit(n.length);return i&&(r+=" "+i),r},visit_angular:function(e){return e.value+"deg"},visit_directional:function(e){return"to "+e.value},visit_array:function(t){var n="",r=t.length;return t.forEach((function(t,i){n+=e.visit(t),i<r-1&&(n+=", ")})),n},visit:function(t){if(!t)return"";if(t instanceof Array)return e.visit_array(t,"");if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}throw Error("Invalid node.")}};return function(t){return e.visit(t)}}(),(hS=hS||{}).parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function n(e){var n=new Error(t+": "+e);throw n.source=t,n}function r(){var e=f(i);return t.length>0&&n("Invalid input not EOF"),e}function i(){return o("linear-gradient",e.linearGradient,s)||o("repeating-linear-gradient",e.repeatingLinearGradient,s)||o("radial-gradient",e.radialGradient,l)||o("repeating-radial-gradient",e.repeatingRadialGradient,l)}function o(t,r,i){return a(r,(function(r){var o=i();return o&&(b(e.comma)||n("Missing comma before color stops")),{type:t,orientation:o,colorStops:f(p)}}))}function a(t,r){var i=b(t);if(i){b(e.startCall)||n("Missing (");var o=r(i);return b(e.endCall)||n("Missing )"),o}}function s(){return y("directional",e.sideOrCorner,1)||y("angular",e.angleValue,1)}function l(){var n,r,i=u();return i&&((n=[]).push(i),r=t,b(e.comma)&&((i=u())?n.push(i):t=r)),n}function u(){var e=function(){var e=y("shape",/^(circle)/i,0);return e&&(e.style=g()||c()),e}()||function(){var e=y("shape",/^(ellipse)/i,0);return e&&(e.style=m()||c()),e}();if(e)e.at=h();else{var t=c();if(t){e=t;var n=h();n&&(e.at=n)}else{var r=d();r&&(e={type:"default-radial",at:r})}}return e}function c(){return y("extent-keyword",e.extentKeywords,1)}function h(){if(y("position",/^at/,0)){var e=d();return e||n("Missing positioning value"),e}}function d(){var e={x:m(),y:m()};if(e.x||e.y)return{type:"position",value:e}}function f(t){var r=t(),i=[];if(r)for(i.push(r);b(e.comma);)(r=t())?i.push(r):n("One extra comma");return i}function p(){var t=y("hex",e.hexColor,1)||a(e.rgbaColor,(function(){return{type:"rgba",value:f(v)}}))||a(e.rgbColor,(function(){return{type:"rgb",value:f(v)}}))||y("literal",e.literalColor,0);return t||n("Expected color definition"),t.length=m(),t}function v(){return b(e.number)[1]}function m(){return y("%",e.percentageValue,1)||y("position-keyword",e.positionKeywords,1)||g()}function g(){return y("px",e.pixelValue,1)||y("em",e.emValue,1)}function y(e,t,n){var r=b(t);if(r)return{type:e,value:r[n]}}function b(e){var n,r;return(r=/^[\n\r\t\s]+/.exec(t))&&_(r[0].length),(n=e.exec(t))&&_(n[0].length),n}function _(e){t=t.substr(e)}return function(e){return t=e.toString(),r()}}();var dS=hS.parse;hS.stringify;var fS={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},pS={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};var vS={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},mS={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return[o=255*l,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0?r++:r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*o;return i}};function gS(e){Array.isArray(e)&&e.raw&&(e=String.raw.apply(String,arguments));var t,n=function(e){var t,n,r=[],i=1;if("string"==typeof e)if(fS[e])r=fS[e].slice(),n="rgb";else if("transparent"===e)i=0,n="rgb",r=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(e)){var o=e.slice(1);i=1,(l=o.length)<=4?(r=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],4===l&&(i=parseInt(o[3]+o[3],16)/255)):(r=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],8===l&&(i=parseInt(o[6]+o[7],16)/255)),r[0]||(r[0]=0),r[1]||(r[1]=0),r[2]||(r[2]=0),n="rgb"}else if(t=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(e)){var a=t[1],s="rgb"===a;n=o=a.replace(/a$/,"");var l="cmyk"===o?4:"gray"===o?1:3;r=t[2].trim().split(/\s*[,\/]\s*|\s+/).map((function(e,t){if(/%$/.test(e))return t===l?parseFloat(e)/100:"rgb"===o?255*parseFloat(e)/100:parseFloat(e);if("h"===o[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==pS[e])return pS[e]}return parseFloat(e)})),a===o&&r.push(1),i=s||void 0===r[l]?1:r[l],r=r.slice(0,l)}else e.length>10&&/[0-9](?:\s|\/)/.test(e)&&(r=e.match(/([0-9]+)/g).map((function(e){return parseFloat(e)})),n=e.match(/([a-z])/gi).join("").toLowerCase());else isNaN(e)?Array.isArray(e)||e.length?(r=[e[0],e[1],e[2]],n="rgb",i=4===e.length?e[3]:1):e instanceof Object&&(null!=e.r||null!=e.red||null!=e.R?(n="rgb",r=[e.r||e.red||e.R||0,e.g||e.green||e.G||0,e.b||e.blue||e.B||0]):(n="hsl",r=[e.h||e.hue||e.H||0,e.s||e.saturation||e.S||0,e.l||e.lightness||e.L||e.b||e.brightness]),i=e.a||e.alpha||e.opacity||1,null!=e.opacity&&(i/=100)):(n="rgb",r=[e>>>16,(65280&e)>>>8,255&e]);return{space:n,values:r,alpha:i}}(e);if(!n.space)return[];var r="h"===n.space[0]?mS.min:vS.min,i="h"===n.space[0]?mS.max:vS.max;return(t=Array(3))[0]=Math.min(Math.max(n.values[0],r[0]),i[0]),t[1]=Math.min(Math.max(n.values[1],r[1]),i[1]),t[2]=Math.min(Math.max(n.values[2],r[2]),i[2]),"h"===n.space[0]&&(t=mS.rgb(t)),t.push(Math.min(Math.max(n.alpha,0),1)),t}function yS(e){switch(typeof e){case"string":return function(e){var t=gS(e);if(!t)throw new Error('Unable to parse color "'.concat(e,'" as RGBA.'));return[t[0]/255,t[1]/255,t[2]/255,t[3]]}(e);case"number":return im(e);default:return e}}function bS(e){var t=dS(function(e){var t=e.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]{2,}/g," ");return t=t.replace(/;/g,""),t=t.replace(/ ,/g,","),t=t.replace(/\( /g,"("),t=t.replace(/ \)/g,")"),t.trim()}(e));if(0===t.length)throw new Error("Invalid CSS gradient.");if(1!==t.length)throw new Error("Unsupported CSS gradient (multiple gradients is not supported).");var n=t[0],r=function(e){var t={"linear-gradient":0,"radial-gradient":1};if(!(e in t))throw new Error('Unsupported gradient type "'.concat(e,'"'));return t[e]}(n.type),i=function(e){for(var t=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=-1;"literal"===r.type&&r.length&&"type"in r.length&&"%"===r.length.type&&"value"in r.length&&(i=parseFloat(r.length.value)/100),t.push(i)}for(var o=function(e){for(var n=e;n<t.length;n++)if(-1!==t[n])return{indexDelta:n-e,offset:t[n]};return{indexDelta:t.length-1-e,offset:1}},a=0,s=0;s<t.length;s++){var l=t[s];if(-1!==l)a=l;else if(0===s)t[s]=0;else if(s+1===t.length)t[s]=1;else{for(var u=o(s),c=(u.offset-a)/(1+u.indexDelta),h=0;h<=u.indexDelta;h++)t[s+h]=a+(h+1)*c;s+=u.indexDelta,a=t[s]}}return t.map(xS)}(e),n=[],r=0;r<e.length;r++){var i=_S(e[r]);n.push({offset:t[r],color:i.slice(0,3),alpha:i[3]})}return n}(n.colorStops),o=function(e){if("undefined"==typeof e)return 0;if("type"in e&&"value"in e)switch(e.type){case"angular":return parseFloat(e.value);case"directional":return function(e){var t={left:270,top:0,bottom:180,right:90,"left top":315,"top left":315,"left bottom":225,"bottom left":225,"right top":45,"top right":45,"right bottom":135,"bottom right":135};if(!(e in t))throw new Error('Unsupported directional value "'.concat(e,'"'));return t[e]}(e.value)}return 0}(n.orientation);return{type:r,stops:i,angle:o}}function _S(e){return yS(function(e){switch(e.type){case"hex":return"#".concat(e.value);case"literal":return e.value;default:return"".concat(e.type,"(").concat(e.value.join(","),")")}}(e))}function xS(e){return e.toString().length>6?parseFloat(e.toString().substring(0,6)):e}vS.hsl=function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a;return s===a?t=0:r===s?t=(i-o)/l:i===s?t=2+(o-r)/l:o===s&&(t=4+(r-i)/l),(t=Math.min(60*t,360))<0&&(t+=360),n=(a+s)/2,[t,100*(s===a?0:n<=.5?l/(s+a):l/(2-s-a)),100*n]};var ES=Object.defineProperty,wS=Object.defineProperties,TS=Object.getOwnPropertyDescriptors,SS=Object.getOwnPropertySymbols,kS=Object.prototype.hasOwnProperty,CS=Object.prototype.propertyIsEnumerable,AS=function(e,t,n){return t in e?ES(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},IS=function(e,t){for(var n in t||(t={}))kS.call(t,n)&&AS(e,n,t[n]);if(SS){var r,i=wb(SS(t));try{for(i.s();!(r=i.n()).done;){n=r.value;CS.call(t,n)&&AS(e,n,t[n])}}catch(o){i.e(o)}finally{i.f()}}return e};var OS=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),e&&"css"in e&&(e=function(e,t){return wS(e,TS(t))}(IS({},bS(e.css||"")),{alpha:e.alpha,maxColors:e.maxColors}));var i=IS(IS({},n.defaults),e);if(!i.stops||i.stops.length<2)throw new Error("ColorGradientFilter requires at least 2 color stops.");return(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform vec4 inputSize;\nuniform vec4 outputFrame;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n    vFilterCoord = vTextureCoord * inputSize.xy / outputFrame.zw;\n}\n","const float PI = 3.1415926538;\nconst float PI_2 = PI*2.;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\n\nconst int TYPE_LINEAR = 0;\nconst int TYPE_RADIAL = 1;\nconst int TYPE_CONIC = 2;\nconst int MAX_STOPS = 32;\n\nuniform int uNumStops;\nuniform float uAlphas[3*MAX_STOPS];\nuniform vec3 uColors[MAX_STOPS];\nuniform float uOffsets[MAX_STOPS];\nuniform int uType;\nuniform float uAngle;\nuniform float uAlpha;\nuniform int uMaxColors;\n\nstruct ColorStop {\n    float offset;\n    vec3 color;\n    float alpha;\n};\n\nmat2 rotate2d(float angle){\n    return mat2(cos(angle), -sin(angle),\n    sin(angle), cos(angle));\n}\n\nfloat projectLinearPosition(vec2 pos, float angle){\n    vec2 center = vec2(0.5);\n    vec2 result = pos - center;\n    result = rotate2d(angle) * result;\n    result = result + center;\n    return clamp(result.x, 0., 1.);\n}\n\nfloat projectRadialPosition(vec2 pos) {\n    float r = distance(vFilterCoord, vec2(0.5));\n    return clamp(2.*r, 0., 1.);\n}\n\nfloat projectAnglePosition(vec2 pos, float angle) {\n    vec2 center = pos - vec2(0.5);\n    float polarAngle=atan(-center.y, center.x);\n    return mod(polarAngle + angle, PI_2) / PI_2;\n}\n\nfloat projectPosition(vec2 pos, int type, float angle) {\n    if (type == TYPE_LINEAR) {\n        return projectLinearPosition(pos, angle);\n    } else if (type == TYPE_RADIAL) {\n        return projectRadialPosition(pos);\n    } else if (type == TYPE_CONIC) {\n        return projectAnglePosition(pos, angle);\n    }\n\n    return pos.y;\n}\n\nvoid main(void) {\n    // current/original color\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n\n    // skip calculations if gradient alpha is 0\n    if (0.0 == uAlpha) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // project position\n    float y = projectPosition(vFilterCoord, uType, radians(uAngle));\n\n    // check gradient bounds\n    float offsetMin = uOffsets[0];\n    float offsetMax = 0.0;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (i == uNumStops-1){ // last index\n            offsetMax = uOffsets[i];\n        }\n    }\n\n    if (y  < offsetMin || y > offsetMax) {\n        gl_FragColor = currentColor;\n        return;\n    }\n\n    // limit colors\n    if (uMaxColors > 0) {\n        float stepSize = 1./float(uMaxColors);\n        float stepNumber = float(floor(y/stepSize));\n        y = stepSize * (stepNumber + 0.5);// offset by 0.5 to use color from middle of segment\n    }\n\n    // find color stops\n    ColorStop from;\n    ColorStop to;\n\n    for (int i = 0; i < MAX_STOPS; i++) {\n        if (y >= uOffsets[i]) {\n            from = ColorStop(uOffsets[i], uColors[i], uAlphas[i]);\n            to = ColorStop(uOffsets[i+1], uColors[i+1], uAlphas[i+1]);\n        }\n\n        if (i == uNumStops-1){ // last index\n            break;\n        }\n    }\n\n    // mix colors from stops\n    vec4 colorFrom = vec4(from.color * from.alpha, from.alpha);\n    vec4 colorTo = vec4(to.color * to.alpha, to.alpha);\n\n    float segmentHeight = to.offset - from.offset;\n    float relativePos = y - from.offset;// position from 0 to [segmentHeight]\n    float relativePercent = relativePos / segmentHeight;// position in percent between [from.offset] and [to.offset].\n\n    float gradientAlpha = uAlpha * currentColor.a;\n    vec4 gradientColor = mix(colorFrom, colorTo, relativePercent) * gradientAlpha;\n\n    // mix resulting color with current color\n    gl_FragColor = gradientColor + currentColor*(1.-gradientColor.a);\n}\n"))._stops=[],r.autoFit=!1,Object.assign(g(r),i),r}return f(n,[{key:"stops",get:function(){return this._stops},set:function(e){for(var t=function(e){return Pe(e).sort((function(e,t){return e.offset-t.offset}))}(e),n=new Float32Array(3*t.length),r=0;r<t.length;r++){var i=yS(t[r].color),o=3*r;n[o+0]=i[0],n[o+1]=i[1],n[o+2]=i[2]}this.uniforms.uColors=n,this.uniforms.uOffsets=t.map((function(e){return e.offset})),this.uniforms.uAlphas=t.map((function(e){return e.alpha})),this.uniforms.uNumStops=t.length,this._stops=t}},{key:"type",get:function(){return this.uniforms.uType},set:function(e){this.uniforms.uType=e}},{key:"angle",get:function(){return this.uniforms.uAngle+90},set:function(e){this.uniforms.uAngle=e-90}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}},{key:"maxColors",get:function(){return this.uniforms.uMaxColors},set:function(e){this.uniforms.uMaxColors=e}}]),n}(cy),PS=OS;PS.LINEAR=0,PS.RADIAL=1,PS.CONIC=2,PS.defaults={type:OS.LINEAR,stops:[{offset:0,color:16711680,alpha:1},{offset:1,color:255,alpha:1}],alpha:1,angle:90,maxColors:0};var MS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));\n    \n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0)\n    {\n        float _c = curvature > 0. ? curvature : 1.;\n        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n        vec2 uv = dir * k;\n\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n")).time=0,r.seed=0,r.uniforms.dimensions=new Float32Array(2),Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,o=i.width,a=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,this.uniforms.seed=this.seed,this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"curvature",get:function(){return this.uniforms.curvature},set:function(e){this.uniforms.curvature=e}},{key:"lineWidth",get:function(){return this.uniforms.lineWidth},set:function(e){this.uniforms.lineWidth=e}},{key:"lineContrast",get:function(){return this.uniforms.lineContrast},set:function(e){this.uniforms.lineContrast=e}},{key:"verticalLine",get:function(){return this.uniforms.verticalLine},set:function(e){this.uniforms.verticalLine=e}},{key:"noise",get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e}},{key:"noiseSize",get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e}},{key:"vignetting",get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e}},{key:"vignettingAlpha",get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e}},{key:"vignettingBlur",get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e}}]),n}(cy);MS.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0};var RS=Object.defineProperty,NS=Object.getOwnPropertySymbols,DS=Object.prototype.hasOwnProperty,LS=Object.prototype.propertyIsEnumerable,FS=function(e,t,n){return t in e?RS(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},BS=function(e,t){for(var n in t||(t={}))DS.call(t,n)&&FS(e,n,t[n]);if(NS){var r,i=wb(NS(t));try{for(i.s();!(r=i.n()).done;){n=r.value;LS.call(t,n)&&FS(e,n,t[n])}}catch(o){i.e(o)}finally{i.f()}}return e},US=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this)).angle=45,r._distance=5,r._resolution=Zp.FILTER_RESOLUTION;var i=e?BS(BS({},n.defaults),e):n.defaults,o=i.kernels,a=i.blur,s=i.quality,l=i.pixelSize,c=i.resolution;r._offset=new Dg(r._updatePadding,g(r)),r._tintFilter=new cy("attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\n\nuniform vec2 shift;\nuniform vec4 inputSize;\n\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);\n\n    // Premultiply alpha\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}"),r._tintFilter.uniforms.color=new Float32Array(4),r._tintFilter.uniforms.shift=r._offset,r._tintFilter.resolution=c,r._blurFilter=o?new aS(o):new aS(a,s),r.pixelSize=l,r.resolution=c;var h=i.shadowOnly,d=i.rotation,f=i.distance,p=i.offset,v=i.alpha,m=i.color;return r.shadowOnly=h,void 0!==d&&void 0!==f?(r.rotation=d,r.distance=f):r.offset=p,r.alpha=v,r.color=m,r}return f(n,[{key:"apply",value:function(e,t,n,r){var i=e.getFilterTexture();this._tintFilter.apply(e,t,i,1),this._blurFilter.apply(e,i,n,r),!0!==this.shadowOnly&&e.applyFilter(this,t,n,0),e.returnFilterTexture(i)}},{key:"_updatePadding",value:function(){var e=Math.max(Math.abs(this._offset.x),Math.abs(this._offset.y));this.padding=e+2*this.blur}},{key:"_updateShift",value:function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))}},{key:"offset",get:function(){return this._offset},set:function(e){this._offset.copyFrom(e),this._updatePadding()}},{key:"resolution",get:function(){return this._resolution},set:function(e){this._resolution=e,this._tintFilter&&(this._tintFilter.resolution=e),this._blurFilter&&(this._blurFilter.resolution=e)}},{key:"distance",get:function(){return this._distance},set:function(e){Tv("5.3.0","DropShadowFilter distance is deprecated, use offset"),this._distance=e,this._updatePadding(),this._updateShift()}},{key:"rotation",get:function(){return this.angle/gg},set:function(e){Tv("5.3.0","DropShadowFilter rotation is deprecated, use offset"),this.angle=e*gg,this._updateShift()}},{key:"alpha",get:function(){return this._tintFilter.uniforms.alpha},set:function(e){this._tintFilter.uniforms.alpha=e}},{key:"color",get:function(){return sm(this._tintFilter.uniforms.color)},set:function(e){im(e,this._tintFilter.uniforms.color)}},{key:"kernels",get:function(){return this._blurFilter.kernels},set:function(e){this._blurFilter.kernels=e}},{key:"blur",get:function(){return this._blurFilter.blur},set:function(e){this._blurFilter.blur=e,this._updatePadding()}},{key:"quality",get:function(){return this._blurFilter.quality},set:function(e){this._blurFilter.quality=e}},{key:"pixelSize",get:function(){return this._blurFilter.pixelSize},set:function(e){this._blurFilter.pixelSize=e}}]),n}(cy);US.defaults={offset:{x:4,y:4},color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:Zp.FILTER_RESOLUTION};var HS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == TRANSPARENT) {\n                discard;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n")).offset=100,r.fillMode=n.TRANSPARENT,r.average=!1,r.seed=0,r.minSize=8,r.sampleSize=512,r._slices=0,r._offsets=new Float32Array(1),r._sizes=new Float32Array(1),r._direction=-1,r.uniforms.dimensions=new Float32Array(2),r._canvas=document.createElement("canvas"),r._canvas.width=4,r._canvas.height=r.sampleSize,r.texture=wy.from(r._canvas,{scaleMode:Bp.NEAREST}),Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,o=i.width,a=i.height;this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/o,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,e.applyFilter(this,t,n,r)}},{key:"_randomizeSizes",value:function(){var e=this._sizes,t=this._slices-1,n=this.sampleSize,r=Math.min(this.minSize/n,.9/this._slices);if(this.average){for(var i=this._slices,o=1,a=0;a<t;a++){var s=o/(i-a),l=Math.max(s*(1-.6*Math.random()),r);e[a]=l,o-=l}e[t]=o}else{for(var u=1,c=Math.sqrt(1/this._slices),h=0;h<t;h++){var d=Math.max(c*u*Math.random(),r);e[h]=d,u-=d}e[t]=u}this.shuffle()}},{key:"shuffle",value:function(){for(var e=this._sizes,t=this._slices-1;t>0;t--){var n=Math.random()*t>>0,r=e[t];e[t]=e[n],e[n]=r}}},{key:"_randomizeOffsets",value:function(){for(var e=0;e<this._slices;e++)this._offsets[e]=Math.random()*(Math.random()<.5?-1:1)}},{key:"refresh",value:function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()}},{key:"redraw",value:function(){var e=this.sampleSize,t=this.texture,n=this._canvas.getContext("2d");n.clearRect(0,0,8,e);for(var r,i=0,o=0;o<this._slices;o++){r=Math.floor(256*this._offsets[o]);var a=this._sizes[o]*e,s=r>0?r:0,l=r<0?-r:0;n.fillStyle="rgba(".concat(s,", ").concat(l,", 0, 1)"),n.fillRect(0,i>>0,e,a+1>>0),i+=a}t.baseTexture.update(),this.uniforms.displacementMap=t}},{key:"sizes",get:function(){return this._sizes},set:function(e){for(var t=Math.min(this._slices,e.length),n=0;n<t;n++)this._sizes[n]=e[n]}},{key:"offsets",get:function(){return this._offsets},set:function(e){for(var t=Math.min(this._slices,e.length),n=0;n<t;n++)this._offsets[n]=e[n]}},{key:"slices",get:function(){return this._slices},set:function(e){this._slices!==e&&(this._slices=e,this.uniforms.slices=e,this._sizes=this.uniforms.slicesWidth=new Float32Array(e),this._offsets=this.uniforms.slicesOffset=new Float32Array(e),this.refresh())}},{key:"direction",get:function(){return this._direction},set:function(e){if(this._direction!==e){this._direction=e;var t=e*gg;this.uniforms.sinDir=Math.sin(t),this.uniforms.cosDir=Math.cos(t)}}},{key:"red",get:function(){return this.uniforms.red},set:function(e){this.uniforms.red=e}},{key:"green",get:function(){return this.uniforms.green},set:function(e){this.uniforms.green=e}},{key:"blue",get:function(){return this.uniforms.blue},set:function(e){this.uniforms.blue=e}},{key:"destroy",value:function(){var e;null==(e=this.texture)||e.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null}}]),n}(cy),jS=HS;jS.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},jS.TRANSPARENT=0,jS.ORIGINAL=1,jS.LOOP=2,jS.CLAMP=3,jS.MIRROR=4;var zS=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n);var i=Object.assign({},n.defaults,e),o=i.outerStrength,a=i.innerStrength,s=i.color,l=i.knockout,c=i.quality,h=i.alpha,d=Math.round(i.distance);return(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float outerStrength;\nuniform float innerStrength;\n\nuniform vec4 glowColor;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform bool knockout;\nuniform float alpha;\n\nconst float PI = 3.14159265358979323846264;\n\nconst float DIST = __DIST__;\nconst float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);\nconst float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);\n\nconst float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n\n    float totalAlpha = 0.0;\n\n    vec2 direction;\n    vec2 displaced;\n    vec4 curColor;\n\n    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {\n       direction = vec2(cos(angle), sin(angle)) * px;\n\n       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {\n           displaced = clamp(vTextureCoord + direction * \n                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);\n\n           curColor = texture2D(uSampler, displaced);\n\n           totalAlpha += (DIST - curDistance) * curColor.a;\n       }\n    }\n    \n    curColor = texture2D(uSampler, vTextureCoord);\n\n    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);\n\n    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;\n    float innerGlowStrength = min(1.0, innerGlowAlpha);\n    \n    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);\n\n    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);\n    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);\n\n    if (knockout) {\n      float resultAlpha = (outerGlowAlpha + innerGlowAlpha) * alpha;\n      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);\n    }\n    else {\n      vec4 outerGlowColor = outerGlowStrength * glowColor.rgba * alpha;\n      gl_FragColor = innerColor + outerGlowColor;\n    }\n}\n".replace(/__ANGLE_STEP_SIZE__/gi,"".concat((1/c/d).toFixed(7))).replace(/__DIST__/gi,"".concat(d.toFixed(0),".0")))).uniforms.glowColor=new Float32Array([0,0,0,1]),r.uniforms.alpha=1,Object.assign(g(r),{color:s,outerStrength:o,innerStrength:a,padding:d,knockout:l,alpha:h}),r}return f(n,[{key:"color",get:function(){return sm(this.uniforms.glowColor)},set:function(e){im(e,this.uniforms.glowColor)}},{key:"outerStrength",get:function(){return this.uniforms.outerStrength},set:function(e){this.uniforms.outerStrength=e}},{key:"innerStrength",get:function(){return this.uniforms.innerStrength},set:function(e){this.uniforms.innerStrength=e}},{key:"knockout",get:function(){return this.uniforms.knockout},set:function(e){this.uniforms.knockout=e}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e}}]),n}(cy);zS.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1,alpha:1};var VS=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\nuniform float alpha;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n    // apply user alpha\n    mist *= alpha;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n\n}\n".replace("${perlin}","vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n"))).parallel=!0,r.time=0,r._angle=0,r.uniforms.dimensions=new Float32Array(2);var i=Object.assign(n.defaults,e);return r._angleLight=new bg,r.angle=i.angle,r.gain=i.gain,r.lacunarity=i.lacunarity,r.alpha=i.alpha,r.parallel=i.parallel,r.center=i.center,r.time=i.time,r}return f(n,[{key:"apply",value:function(e,t,n,r){var i=t.filterFrame,o=i.width,a=i.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=a,this.uniforms.aspect=a/o,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,e.applyFilter(this,t,n,r)}},{key:"angle",get:function(){return this._angle},set:function(e){this._angle=e;var t=e*gg;this._angleLight.x=Math.cos(t),this._angleLight.y=Math.sin(t)}},{key:"gain",get:function(){return this.uniforms.gain},set:function(e){this.uniforms.gain=e}},{key:"lacunarity",get:function(){return this.uniforms.lacunarity},set:function(e){this.uniforms.lacunarity=e}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha=e}}]),n}(cy);VS.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1};var GS=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float uHue;\nuniform float uAlpha;\nuniform bool uColorize;\nuniform float uSaturation;\nuniform float uLightness;\n\n// https://en.wikipedia.org/wiki/Luma_(video)\nconst vec3 weight = vec3(0.299, 0.587, 0.114);\n\nfloat getWeightedAverage(vec3 rgb) {\n    return rgb.r * weight.r + rgb.g * weight.g + rgb.b * weight.b;\n}\n\n// https://gist.github.com/mairod/a75e7b44f68110e1576d77419d608786?permalink_comment_id=3195243#gistcomment-3195243\nconst vec3 k = vec3(0.57735, 0.57735, 0.57735);\n\nvec3 hueShift(vec3 color, float angle) {\n    float cosAngle = cos(angle);\n    return vec3(\n    color * cosAngle +\n    cross(k, color) * sin(angle) +\n    k * dot(k, color) * (1.0 - cosAngle)\n    );\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    vec4 result = color;\n\n    // colorize\n    if (uColorize) {\n        result.rgb = vec3(getWeightedAverage(result.rgb), 0., 0.);\n    }\n\n    // hue\n    result.rgb = hueShift(result.rgb, uHue);\n\n    // saturation\n    // https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/huesaturation.js\n    float average = (result.r + result.g + result.b) / 3.0;\n\n    if (uSaturation > 0.) {\n        result.rgb += (average - result.rgb) * (1. - 1. / (1.001 - uSaturation));\n    } else {\n        result.rgb -= (average - result.rgb) * uSaturation;\n    }\n\n    // lightness\n    result.rgb = mix(result.rgb, vec3(ceil(uLightness)) * color.a, abs(uLightness));\n\n    // alpha\n    gl_FragColor = mix(color, result, uAlpha);\n}\n"))._hue=0;var i=Object.assign({},n.defaults,e);return Object.assign(g(r),i),r}return f(n,[{key:"hue",get:function(){return this._hue},set:function(e){this._hue=e,this.uniforms.uHue=this._hue*(Math.PI/180)}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(e){this.uniforms.uAlpha=e}},{key:"colorize",get:function(){return this.uniforms.uColorize},set:function(e){this.uniforms.uColorize=e}},{key:"lightness",get:function(){return this.uniforms.uLightness},set:function(e){this.uniforms.uLightness=e}},{key:"saturation",get:function(){return this.uniforms.uSaturation},set:function(e){this.uniforms.uSaturation=e}}]),n}(cy);GS.defaults={hue:0,saturation:0,lightness:0,colorize:!1,alpha:1};var WS=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n")).seed=0,r.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(r.seed=e,e=void 0):r.seed=i,Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"apply",value:function(e,t,n,r){var i,o;this.uniforms.dimensions[0]=null==(i=t.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(o=t.filterFrame)?void 0:o.height,this.uniforms.seed=this.seed,e.applyFilter(this,t,n,r)}},{key:"sepia",get:function(){return this.uniforms.sepia},set:function(e){this.uniforms.sepia=e}},{key:"noise",get:function(){return this.uniforms.noise},set:function(e){this.uniforms.noise=e}},{key:"noiseSize",get:function(){return this.uniforms.noiseSize},set:function(e){this.uniforms.noiseSize=e}},{key:"scratch",get:function(){return this.uniforms.scratch},set:function(e){this.uniforms.scratch=e}},{key:"scratchDensity",get:function(){return this.uniforms.scratchDensity},set:function(e){this.uniforms.scratchDensity=e}},{key:"scratchWidth",get:function(){return this.uniforms.scratchWidth},set:function(e){this.uniforms.scratchWidth=e}},{key:"vignetting",get:function(){return this.uniforms.vignetting},set:function(e){this.uniforms.vignetting=e}},{key:"vignettingAlpha",get:function(){return this.uniforms.vignettingAlpha},set:function(e){this.uniforms.vignettingAlpha=e}},{key:"vignettingBlur",get:function(){return this.uniforms.vignettingBlur},set:function(e){this.uniforms.vignettingBlur=e}}]),n}(cy);WS.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3};var XS=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return u(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterClamp;\n\nuniform float uAlpha;\nuniform vec2 uThickness;\nuniform vec4 uColor;\nuniform bool uKnockout;\n\nconst float DOUBLE_PI = 2. * 3.14159265358979323846264;\nconst float ANGLE_STEP = ${angleStep};\n\nfloat outlineMaxAlphaAtPos(vec2 pos) {\n    if (uThickness.x == 0. || uThickness.y == 0.) {\n        return 0.;\n    }\n\n    vec4 displacedColor;\n    vec2 displacedPos;\n    float maxAlpha = 0.;\n\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {\n        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);\n        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);\n        displacedColor = texture2D(uSampler, clamp(displacedPos, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, displacedColor.a);\n    }\n\n    return maxAlpha;\n}\n\nvoid main(void) {\n    vec4 sourceColor = texture2D(uSampler, vTextureCoord);\n    vec4 contentColor = sourceColor * float(!uKnockout);\n    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);\n    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);\n    gl_FragColor = contentColor + outlineColor;\n}\n".replace(/\$\{angleStep\}/,n.getAngleStep(o))))._thickness=1,e._alpha=1,e._knockout=!1,e.uniforms.uThickness=new Float32Array([0,0]),e.uniforms.uColor=new Float32Array([0,0,0,1]),e.uniforms.uAlpha=a,e.uniforms.uKnockout=s,Object.assign(g(e),{thickness:r,color:i,quality:o,alpha:a,knockout:s}),e}return f(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.uThickness[0]=this._thickness/t._frame.width,this.uniforms.uThickness[1]=this._thickness/t._frame.height,this.uniforms.uAlpha=this._alpha,this.uniforms.uKnockout=this._knockout,e.applyFilter(this,t,n,r)}},{key:"alpha",get:function(){return this._alpha},set:function(e){this._alpha=e}},{key:"color",get:function(){return sm(this.uniforms.uColor)},set:function(e){im(e,this.uniforms.uColor)}},{key:"knockout",get:function(){return this._knockout},set:function(e){this._knockout=e}},{key:"thickness",get:function(){return this._thickness},set:function(e){this._thickness=e,this.padding=e}}],[{key:"getAngleStep",value:function(e){var t=Math.max(e*n.MAX_SAMPLES,n.MIN_SAMPLES);return(2*Math.PI/t).toFixed(7)}}]),n}(cy),YS=XS;YS.MIN_SAMPLES=1,YS.MAX_SAMPLES=100;var KS=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n")).time=0,r.uniforms.amplitude=new Float32Array(2),r.uniforms.waveLength=new Float32Array(2),r.uniforms.alpha=new Float32Array(2),r.uniforms.dimensions=new Float32Array(2),Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"apply",value:function(e,t,n,r){var i,o;this.uniforms.dimensions[0]=null==(i=t.filterFrame)?void 0:i.width,this.uniforms.dimensions[1]=null==(o=t.filterFrame)?void 0:o.height,this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"mirror",get:function(){return this.uniforms.mirror},set:function(e){this.uniforms.mirror=e}},{key:"boundary",get:function(){return this.uniforms.boundary},set:function(e){this.uniforms.boundary=e}},{key:"amplitude",get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude[0]=e[0],this.uniforms.amplitude[1]=e[1]}},{key:"waveLength",get:function(){return this.uniforms.waveLength},set:function(e){this.uniforms.waveLength[0]=e[0],this.uniforms.waveLength[1]=e[1]}},{key:"alpha",get:function(){return this.uniforms.alpha},set:function(e){this.uniforms.alpha[0]=e[0],this.uniforms.alpha[1]=e[1]}}]),n}(cy);KS.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0};var qS=function(e){v(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0],i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u(this,n),(e=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n")).center=r,Object.assign(g(e),n.defaults,i),e.time=o,e}return f(n,[{key:"apply",value:function(e,t,n,r){this.uniforms.time=this.time,e.applyFilter(this,t,n,r)}},{key:"center",get:function(){return this.uniforms.center},set:function(e){this.uniforms.center=e}},{key:"amplitude",get:function(){return this.uniforms.amplitude},set:function(e){this.uniforms.amplitude=e}},{key:"wavelength",get:function(){return this.uniforms.wavelength},set:function(e){this.uniforms.wavelength=e}},{key:"brightness",get:function(){return this.uniforms.brightness},set:function(e){this.uniforms.brightness=e}},{key:"speed",get:function(){return this.uniforms.speed},set:function(e){this.uniforms.speed=e}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}}]),n}(cy);qS.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1};var ZS=function(e){v(n,e);var t=y(n);function n(e){var r,i,o;return u(this,n),(r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n")).uniforms.blur=e.blur,r.uniforms.gradientBlur=e.gradientBlur,r.uniforms.start=null!=(i=e.start)?i:new bg(0,window.innerHeight/2),r.uniforms.end=null!=(o=e.end)?o:new bg(600,window.innerHeight/2),r.uniforms.delta=new bg(30,30),r.uniforms.texSize=new bg(window.innerWidth,window.innerHeight),r.updateDelta(),r}return f(n,[{key:"updateDelta",value:function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0}},{key:"blur",get:function(){return this.uniforms.blur},set:function(e){this.uniforms.blur=e}},{key:"gradientBlur",get:function(){return this.uniforms.gradientBlur},set:function(e){this.uniforms.gradientBlur=e}},{key:"start",get:function(){return this.uniforms.start},set:function(e){this.uniforms.start=e,this.updateDelta()}},{key:"end",get:function(){return this.uniforms.end},set:function(e){this.uniforms.end=e,this.updateDelta()}}]),n}(cy),$S=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"updateDelta",value:function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.x=e/n,this.uniforms.delta.y=t/n}}]),n}(ZS),QS=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"updateDelta",value:function(){var e=this.uniforms.end.x-this.uniforms.start.x,t=this.uniforms.end.y-this.uniforms.start.y,n=Math.sqrt(e*e+t*t);this.uniforms.delta.x=-t/n,this.uniforms.delta.y=e/n}}]),n}(ZS),JS=function(e){v(n,e);var t=y(n);function n(e,r,i,o){var a;return u(this,n),a=t.call(this),"number"==typeof e&&(Tv("5.3.0","TiltShiftFilter constructor arguments is deprecated, use options."),e={blur:e,gradientBlur:r,start:i,end:o}),e=Object.assign({},n.defaults,e),a.tiltShiftXFilter=new $S(e),a.tiltShiftYFilter=new QS(e),a}return f(n,[{key:"apply",value:function(e,t,n,r){var i=e.getFilterTexture();this.tiltShiftXFilter.apply(e,t,i,1),this.tiltShiftYFilter.apply(e,i,n,r),e.returnFilterTexture(i)}},{key:"blur",get:function(){return this.tiltShiftXFilter.blur},set:function(e){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=e}},{key:"gradientBlur",get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(e){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=e}},{key:"start",get:function(){return this.tiltShiftXFilter.start},set:function(e){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=e}},{key:"end",get:function(){return this.tiltShiftXFilter.end},set:function(e){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=e}}]),n}(cy);JS.defaults={blur:100,gradientBlur:600,start:void 0,end:void 0};var ek=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),Object.assign(g(r),n.defaults,e),r}return f(n,[{key:"offset",get:function(){return this.uniforms.offset},set:function(e){this.uniforms.offset=e}},{key:"radius",get:function(){return this.uniforms.radius},set:function(e){this.uniforms.radius=e}},{key:"angle",get:function(){return this.uniforms.angle},set:function(e){this.uniforms.angle=e}}]),n}(cy);ek.defaults={radius:200,angle:4,padding:20,offset:new bg};var tk=Object.getOwnPropertySymbols,nk=Object.prototype.hasOwnProperty,rk=Object.prototype.propertyIsEnumerable,ik=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n);var i=Object.assign(n.defaults,e),o=i.maxKernelSize,a=function(e,t){var n={};for(var r in e)nk.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&tk){var i,o=wb(tk(e));try{for(o.s();!(i=o.n()).done;)r=i.value,t.indexOf(r)<0&&rk.call(e,r)&&(n[r]=e[r])}catch(a){o.e(a)}finally{o.f()}}return n}(i,["maxKernelSize"]);return r=t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = ${maxKernelSize};\n\n// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand(vec2 co, float seed) {\n    const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);\n    return fract(sin(sn) * c + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = rand(vTextureCoord, 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    // color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n".replace("${maxKernelSize}",o.toFixed(1))),Object.assign(g(r),a),r}return f(n,[{key:"center",get:function(){return this.uniforms.uCenter},set:function(e){this.uniforms.uCenter=e}},{key:"strength",get:function(){return this.uniforms.uStrength},set:function(e){this.uniforms.uStrength=e}},{key:"innerRadius",get:function(){return this.uniforms.uInnerRadius},set:function(e){this.uniforms.uInnerRadius=e}},{key:"radius",get:function(){return this.uniforms.uRadius},set:function(e){(e<0||e===1/0)&&(e=-1),this.uniforms.uRadius=e}}]),n}(cy);function ok(e,t){return(e.x-t.x)*(e.x-t.x)+(e.y-t.y)*(e.y-t.y)}function ak(e,t,n){return(e.x-n.x)*(t.y-n.y)-(t.x-n.x)*(e.y-n.y)}function sk(e,t,n){return(e[0]-n[0])*(t[1]-n[1])-(t[0]-n[0])*(e[1]-n[1])}function lk(e,t,n){if(vp.isNumberEqual(e[0],n[0])&&vp.isNumberEqual(e[1],n[1]))return[t[0],t[1]];if(vp.isNumberEqual(e[2],n[0])&&vp.isNumberEqual(e[3],n[1]))return[t[2],t[3]];if(vp.isNumberEqual(e[4],n[0])&&vp.isNumberEqual(e[5],n[1]))return[t[4],t[5]];var r=[e[0],e[1]],i=[e[2],e[3]],o=[e[4],e[5]],a=n,s=[t[0],t[1]],l=[t[2],t[3]],u=[t[4],t[5]],c=uk([e[0],e[1]],a,[e[2],e[3]],[e[4],e[5]]);return null==c?null==(c=uk(i,a,o,r))?ck(e,t,a,c=uk(o,a,r,i)):ck([o[0],o[1],r[0],r[1],i[0],i[1]],[u[0],u[1],s[0],s[1],l[0],l[1]],a,c):ck([i[0],i[1],o[0],o[1],r[0],r[1]],[l[0],l[1],u[0],u[1],s[0],s[1]],a,c)}function uk(e,t,n,r){var i=e[1]-t[1],o=t[0]-e[0],a=e[0]*t[1]-t[0]*e[1],s=n[1]-r[1],l=r[0]-n[0],u=n[0]*r[1]-r[0]*n[1],c=i*l-s*o;return 0===c?null:[(o*u-l*a)/c,(a*s-u*i)/c]}function ck(e,t,n,r){var i,o,a;return i=dk([e[0],e[1]],r,[e[2],e[3]]),o=dk([e[4],e[5]],n,r),a=fk([t[0],t[1]],[t[2],t[3]],i),0===o?a:fk([t[4],t[5]],a,o)}function hk(e,t){return vp.isNumberEqual(e[0],t[0])&&vp.isNumberEqual(e[1],t[1])}function dk(e,t,n){return vp.isNumberEqual(n[0],e[0])?vp.isNumberEqual(n[1],e[1])?1:(t[1]-e[1])/(n[1]-e[1]):(t[0]-e[0])/(n[0]-e[0])}function fk(e,t,n){var r=[0,0];return null!=e&&null!=t&&(r[0]=e[0]+(t[0]-e[0])*n,r[1]=e[1]+(t[1]-e[1])*n),r}function pk(e){var t,n=e.concat(),r=[];for(r.push(n.shift()),r.push(n.shift()),r.push(n.shift()),r.push(n.shift()),t=[r[2],r[3]];n.length>0;)for(var i=0;i<n.length;i+=4){if(n[i]===t[0]&&n[i+1]===t[1]){t=[n[i+2],n[i+3]],r=r.concat(n.splice(i,4));break}if(n[i+2]===t[0]&&n[i+3]===t[1]){t=[n[i],n[i+1]],r=r.concat(n.splice(i,4));break}if(i>=n.length-4)return null}return r}function vk(e,t){var n,r,i=e[0],o=e[1],a=!1;if(null==t)return!1;for(n=0,r=t.length;n<r;n+=4){var s=t[n],l=t[n+1],u=t[n+2],c=t[n+3];l>o!==c>o&&i<(u-s)*(o-l)/(c-l)+s&&(a=!a)}return a}function mk(e,t){return vk(e,t=pk(t))}function gk(e,t,n,r,i,o){var a,s,l,u,c,h,d,f,p,v,m=5e-6,g=e[0],y=e[1],b=t[0],_=t[1],x=n[0],E=n[1],w=Math.abs(y-_),T=Math.abs(_-E);if(w<m&&T<m)throw new Error("Eek! Coincident points!");return w<m?s=(u=-(x-b)/(E-_))*((a=(b+g)/2)-(h=(b+x)/2))+(f=(_+E)/2):T<m?s=(l=-(b-g)/(_-y))*((a=(x+b)/2)-(c=(g+b)/2))+(d=(y+_)/2):(a=((l=-(b-g)/(_-y))*(c=(g+b)/2)-(u=-(x-b)/(E-_))*(h=(b+x)/2)+(f=(_+E)/2)-(d=(y+_)/2))/(l-u),s=w>T?l*(a-c)+d:u*(a-h)+f),{i:r,j:i,k:o,x:a,y:s,r:(p=b-a)*p+(v=_-s)*v}}function yk(e,t){for(var n,r,i,o,a=t.length;a;){r=e[t[--a]].uvs,n=e[t[--a]].uvs;for(var s=a;s;)if(o=e[t[--s]].uvs,hk(n,i=e[t[--s]].uvs)&&hk(r,o)||hk(n,o)&&hk(r,i)){t.splice(a,2),t.splice(s,2),a-=2;break}}}function bk(e,t){return!mk([(e[0]+e[2]+e[4])/3,(e[1]+e[3]+e[5])/3],t)}function _k(e,t,n){if(null!=n){for(var r=[],i=0;i<n.length;i++){var o=n[i];r.push(e[o].uvs[0],e[o].uvs[1])}var a=pk(r);if(null==a)return[];for(var s=[],l=0,u=t.length;l<u;l+=3){var c=t[l],h=t[l+1],d=t[l+2],f=e[c].uvs,p=e[h].uvs,v=e[d].uvs;bk([f[0],f[1],p[0],p[1],v[0],v[1]],a)||s.push(c,h,d)}return s}return t}function xk(e,t){var n,r,i,o,a,s,l,u,c,h,d,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,p=t.length,v=[];if(p<3)return v;if(3===p)return v.push(t[0],t[1],t[2]),v;t.sort((function(t,n){var r=e[t].uvs;return e[n].uvs[0]-r[0]})),n=function(e,t){var n,r,i,o,a,s,l=Number.POSITIVE_INFINITY,u=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY;for(n=t.length;n--;){var d=e[t[n]].uvs;d[0]<l&&(l=d[0]),d[0]>c&&(c=d[0]),d[1]<u&&(u=d[1]),d[1]>h&&(h=d[1])}r=c-l,i=h-u,o=Math.max(r,i),a=l+.5*r,s=u+.5*i;var f=[];return f.push([a-2e3*o,s-o]),f.push([a,s+2e3*o]),f.push([a+2e3*o,s-o]),f}(e,t),e[-1]={uvs:n[0],vertices:n[0]},e[-2]={uvs:n[1],vertices:n[1]},e[-3]={uvs:n[2],vertices:n[2]},r=[gk(n[0],n[1],n[2],-1,-2,-3)],i=[],o=[];for(var m=t.length;m--;o.length=0){var g=t[m];h=e[g].uvs;for(var y=r.length;y--;)null!=r[y]&&((a=h[0]-r[y].x)>0&&a*a>r[y].r?(i.push(r[y]),r.splice(y,1)):a*a+(s=h[1]-r[y].y)*s-r[y].r>5e-4||(r[y].i!=r[y].j&&o.push(r[y].i,r[y].j),r[y].j!=r[y].k&&o.push(r[y].j,r[y].k),r[y].k!=r[y].i&&o.push(r[y].k,r[y].i),r.splice(y,1)));yk(e,o);for(var b=o.length;b;){var _=o[--b],x=o[--b];d=e[_].uvs;var E=gk(e[x].uvs,d,h,x,_,g);null!=E&&r.push(E)}}for(var w=r.length;w--;)i.push(r[w]);r.length=0;for(var T=i.length;T--;)l=i[T].i,u=i[T].j,c=i[T].k,l>=0&&u>=0&&c>=0&&v.push(l,u,c);return e[-1]=void 0,e[-2]=void 0,e[-3]=void 0,delete e[-1],delete e[-2],delete e[-3],null!=f?_k(e,v,f):v}function Ek(e,t,n,r){return!(hk(e,n)||hk(e,r)||hk(t,n)||hk(t,r))&&(!(Math.max(e[0],t[0])<Math.min(n[0],r[0]))&&(!(Math.max(e[1],t[1])<Math.min(n[1],r[1]))&&(!(Math.max(n[0],r[0])<Math.min(e[0],t[0]))&&(!(Math.max(n[1],r[1])<Math.min(e[1],t[1]))&&(!(sk(n,t,e)*sk(t,r,e)<0)&&!(sk(e,r,n)*sk(r,t,n)<0))))))}function wk(e,t,n,r){var i=[],o=r[0],a=r[1],s=r[2],l=e[o].uvs,u=e[a].uvs,c=e[s].uvs,h=e[t].uvs,d=e[n].uvs;return Ek(l,u,h,d)||i.push(o,a),Ek(u,c,h,d)||i.push(a,s),Ek(c,l,h,d)||i.push(s,o),i.length>=6?null:i}function Tk(e,t,n){var r=t[0]-e[0],i=t[1]-e[1],o=n[0]-e[0];return r*(n[1]-e[1])-o*i>0}function Sk(e,t,n,r){for(var i=[],o=[],a=[],s=t,l=n,u=0,c=r.length;u<c;u+=3){var h=[r[u],r[u+1],r[u+2]];if(h.indexOf(s)>-1&&h.indexOf(l)>-1)return r}for(var d=0,f=r.length;d<f;d+=3){var p=[r[d],r[d+1],r[d+2]],v=wk(e,t,n,p);null!=v&&v.length>0?(i.push.apply(i,p),a=a.concat(v)):o.push.apply(o,p)}for(var m=[],g=0,y=i.length;g<y;g+=3){var b=i[g],_=i[g+1],x=i[g+2];-1===m.indexOf(b)&&m.push(b),-1===m.indexOf(_)&&m.push(_),-1===m.indexOf(x)&&m.push(x)}for(var E=[],w=[],T=0,S=m.length;T<S;T++){var k=m[T];Tk(e[k].uvs,e[t].uvs,e[n].uvs)?E.push(k):w.push(k)}E.push(t),E.push(n),w.push(t),w.push(n);for(var C=xk(e,E,a),A=xk(e,w,a),I=0,O=C.length;I<O;I++)o.push(C[I]);for(var P=0,M=A.length;P<M;P++)o.push(A[P]);return o}ik.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32};var kk={getVerticesUVs:function(e,t,n,r){var i=[],o=[];for(var a in e){var s=e[a];s&&(r&&r[a]?i.push.apply(i,Pe(r[a])):n&&n[a]?i.push.apply(i,Pe(n[a])):t&&t[a]?i.push.apply(i,Pe(t[a])):i.push.apply(i,Pe(s.vertices)),o.push.apply(o,Pe(s.uvs)))}return{vertices:i,uvs:o}},overPoint:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n},getHull:function(e){var t,n,r=e.length,i=[];for(t=0,r=e.length;t<r;t++)i.push(t);n=i.sort((function(t,n){var r=e[t],i=e[n];return vp.isNumberEqual(r.x,i.x)?r.y<i.y?-1:1:r.x<i.x?-1:1}));var o=[],a=n[0];for(o.push(a),n.shift(),n.push(a);n.length>0;){var s=l();if(o.push(s),a===s)break}return o;function l(){var i=0,a=o[o.length-1];for(t=0,r=n.length;t<r;t++)if(i!==t&&n[t]!==a){var s=e[a],l=e[n[t]],c=e[n[i]],h=ak(s,l,c);(h>0||0===h&&u(s,l,c))&&(i=t)}var d=n[i];return n.splice(i,1),d}function u(e,t,n){return ok(e,t)<ok(e,n)}},length2:ok,crossProduct:ak,pointNearSegDist:function(e,t,n,r,i,o,a){var s=(i-n)*(e-n)+(o-r)*(t-r);if(s<=0)return!1;var l=(i-n)*(i-n)+(o-r)*(o-r);if(s>=l)return!1;var u=s/l,c=n+(i-n)*u,h=r+(o-r)*u;return(e-c)*(e-c)+(t-h)*(t-h)<a},findTriangle:function(e,t){for(var n=t.triangles,r=0;r<n.length;r+=3)if(n[r]===e||n[r+1]===e||n[r+2]===e)return[n[r],n[r+1],n[r+2]];return null},getTrianglePointAByTrianglePointB:function(e,t,n){var r=function(e,t){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=t[0],u=t[1],c=(o-s)*(n-a)+(a-i)*(r-s),h=((o-s)*(l-a)+(a-i)*(u-s))/c,d=((s-r)*(l-a)+(n-a)*(u-s))/c,f=1-h-d;return[h,d,f]}(e,n);return function(e,t){return[e[0]*t[0]+e[2]*t[1]+e[4]*t[2],e[1]*t[0]+e[3]*t[1]+e[5]*t[2]]}(t,r)},getTrianglePointAByTrianglePointB2:lk,getVerticesByUVs:function(e,t,n){var r=t[0],i=t[1],o=t[2],a=[e.points[r].vertices[0],e.points[r].vertices[1],e.points[i].vertices[0],e.points[i].vertices[1],e.points[o].vertices[0],e.points[o].vertices[1]];return lk([e.points[r].uvs[0],e.points[r].uvs[1],e.points[i].uvs[0],e.points[i].uvs[1],e.points[o].uvs[0],e.points[o].uvs[1]],a,n)},getUVsByVertices:function(e,t,n){var r=t[0],i=t[1],o=t[2];return lk([e.points[r].vertices[0],e.points[r].vertices[1],e.points[i].vertices[0],e.points[i].vertices[1],e.points[o].vertices[0],e.points[o].vertices[1]],[e.points[r].uvs[0],e.points[r].uvs[1],e.points[i].uvs[0],e.points[i].uvs[1],e.points[o].uvs[0],e.points[o].uvs[1]],n)},rankOutlines:pk,pointInRankPolygon:vk,pointInPolygon:mk,pointProjectEdge:function(e,t,n,r,i,o){var a=(i-n)*(e-n)+(o-r)*(t-r);if(a<=0)return null;var s=(i-n)*(i-n)+(o-r)*(o-r);if(a>=s)return null;var l=a/s;return[n+(i-n)*l,r+(o-r)*l]},getPointByAnother:function(e,t,n,r,i){return fk(r,i,dk(e,n,t))},pointInTriangle:function(e,t){for(var n=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[0],t[1]]],r=!1,i=0;i<n.length;i+=1){var o=n[i][0],a=n[i][1],s=n[i][2],l=n[i][3];a>e[1]!==l>e[1]&&e[0]<(s-o)*(e[1]-a)/(l-a)+o&&(r=!r)}return r},customizeTriangulate:function(e,t,n){var r=[],i=[],o=[];for(var a in e)e[a]&&o.push(parseInt(a));for(var s=0,l=o.length;s<l;s++){var u=o[s];if(t.indexOf(u)>-1)r.push(u);else{for(var c=e[u].uvs,h=[],d=0;d<t.length;d++){var f=e[t[d]].uvs;h.push(f[0],f[1])}mk(c,h)?r.push(u):i.push(u)}}for(var p=xk(e,r),v=0,m=t.length;v<m;v+=2)p=Sk(e,t[v],t[v+1],p);if(p=_k(e,p,t),n&&n.length>0)for(var g=0,y=n.length;g<y;g+=2)p=Sk(e,n[g],n[g+1],p);return p},isLineEqual:function(e,t){return e[0]===t[0]&&e[1]===t[1]||e[0]===t[1]&&e[1]===t[0]},crossPointArr:Ek,getMeshPointNum:function(e){var t=0;for(var n in e)e[n]&&t++;return t},meshPointToArr:function(e){var t=[];for(var n in e){var r=e[n];r&&t.push({x:r.uvs[0],y:r.uvs[1]})}return t},hullToOutline:function(e){for(var t=[],n=0,r=e.length-1;n<r;n++)t.push(e[n],e[n+1]);return t}},Ck=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).image=new f_,e.mesh=new gw,e.isDirty=!1,e._assetId=-1,e._textures=[],e._pivotX=0,e._pivotY=0,e._data=void 0,e._uvEditMode=!1,e._tint=16777215,e.editMode=void 0,e.addChild(e.image),e}return f(n,[{key:"blendMode",set:function(e){this.image.blendMode=e,this.mesh.blendMode=e}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX=e}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY=e}},{key:"scaleX",get:function(){return this.scale.x},set:function(e){this.scale.x=e}},{key:"scaleY",get:function(){return this.scale.y},set:function(e){this.scale.y=e}},{key:"skewX",get:function(){return this.skew.x},set:function(e){this.skew.x=e}},{key:"skewY",get:function(){return this.skew.y},set:function(e){this.skew.y=e}},{key:"assetId",get:function(){return this._assetId},set:function(e){this._assetId=e,this.data.type!==T.MESH||this._uvEditMode?this.setTexture():this.setMeshTexture()}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.refresh()}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint!==e&&(this._tint=e,this.mesh&&(this.mesh.tint=e),this.image&&(this.image.tint=e))}},{key:"refresh",value:function(){this.data&&(this.data.type!==T.MESH||this._uvEditMode?(this.data.type===T.IMAGE||this._uvEditMode)&&this.refreshImage():this.refreshMesh())}},{key:"refreshMesh",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.data.mesh&&(this.removeChildren(),n=this.data.mesh.riggingFFD,r=this.editMode===Y.ANIMATION?this.data.mesh.animatedFFD:void 0,i=this.editMode===Y.ANIMATION?this.data.mesh.cacheFFD:void 0,o=kk.getVerticesUVs(this.data.mesh.points,r,i,n),this.mesh.geometry.getBuffer("aVertexPosition").update(new Float32Array(o.vertices)),this.mesh.geometry.getBuffer("aTextureCoord").update(new Float32Array(o.uvs)),this.mesh.geometry.getIndex().update(new Uint16Array(this.data.mesh.triangles)),this._data&&void 0!==(null===(t=this.data)||void 0===t?void 0:t.assetId)&&(this.assetId=this.data.assetId),this.addChild(this.mesh));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"refreshImage",value:function(){var e;this.removeChildren(),this._data&&void 0!==(null===(e=this.data)||void 0===e?void 0:e.assetId)&&(this.assetId=this.data.assetId),this.updatePivot(),this.addChild(this.image)}},{key:"getTexture",value:function(){var e=Ee(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this._textures.length){e.next=19;break}if(null!=(t=this.res)){e.next=4;break}return e.abrupt("return");case 4:return e.prev=4,e.next=7,t.getImageAsset(this.assetId);case 7:if(n=e.sent){e.next=12;break}return e.next=11,t.getMissingTexture();case 11:n=e.sent;case 12:return e.abrupt("return",n);case 16:e.prev=16,e.t0=e.catch(4);case 19:case"end":return e.stop()}}),e,this,[[4,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"setMeshTexture",value:function(){var e=Ee(_e().mark((function e(){var t;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.assetId){e.next=5;break}return e.next=3,this.getTexture();case 3:(t=e.sent)&&(this._textures.push(t),this.mesh.texture=this._textures[0]);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setTexture",value:function(){var e=Ee(_e().mark((function e(){var t,n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===this.assetId){e.next=5;break}return e.next=3,this.getTexture();case 3:(t=e.sent)&&(this._textures.push(t),this.image.texture=this._textures[0],this._textures[0].once("update",(function(){n.updatePivot()})),this.updatePivot());case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updatePivot",value:function(){this.data&&(this.pivotX=this.data.pivot[0],this.pivotY=this.data.pivot[1]),this.pivot.set(this._pivotX*this.image.texture.width,this._pivotY*this.image.texture.height)}},{key:"res",get:function(){return $2.instance.res}},{key:"dispose",value:function(){}}]),n}(c_);Ck.maxHashCode=1e4;var Ak=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._data=void 0,e._over=!1,e._selected=!1,e._curDisplay=void 0,e._uvEditMode=!1,e.editMode=void 0,e}return f(n,[{key:"data",get:function(){return this._data},set:function(e){if(this.clear(),this._data=e,this.refresh(),e){var t=this.curGlobalTransform;t||(t=this.curTransform,this.curDisplay&&this.curAlpha),t&&(this.x=t.x,this.y=t.y,this._uvEditMode?(this.scale.set(1,1),this.skew.set(0,0)):(this.scale.set(t.scaleX,t.scaleY),this.skew.set(-t.skewX,t.skewY)))}}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"curDisplay",get:function(){if(this.data){var e=this.data.displayIndex;this.editMode===Y.ANIMATION&&(void 0!==this.data.cacheDisplayIndex?e=this.data.cacheDisplayIndex:void 0!==this.data.animatedDisplayIndex&&(e=this.data.animatedDisplayIndex));var t=this.data.displays.ids[e];return this.data.displays.map[t]}return null}},{key:"curColor",get:function(){if(this.data){var e=void 0===this.data.color?16777215:this.data.color;return this.editMode===Y.ANIMATION&&(void 0!==this.data.cacheColor?e=this.data.cacheColor:void 0!==this.data.animatedColor&&(e=this.data.animatedColor)),e}return 16777215}},{key:"curAlpha",get:function(){if(this.data){var e=void 0===this.data.alpha?1:this.data.alpha;return this.editMode===Y.ANIMATION&&(void 0!==this.data.cacheAlpha?e=this.data.cacheAlpha:void 0!==this.data.animatedAlpha&&(e=this.data.animatedAlpha)),e}return 0}},{key:"curBlendMode",get:function(){if(this.data){var e=Mp.NORMAL;if(void 0!==this.data.blendMode)switch(this.data.blendMode){case w.Normal:e=Mp.NORMAL;break;case w.Add:e=Mp.ADD;break;case w.Multiply:e=Mp.MULTIPLY;break;case w.Screen:e=Mp.SCREEN;break;case w.Overlay:e=Mp.OVERLAY;break;case w.Darken:e=Mp.DARKEN;break;case w.Lighten:e=Mp.LIGHTEN;break;case w.Erase:e=Mp.ERASE}return e}return Mp.NORMAL}},{key:"curGlobalTransform",get:function(){return this.curDisplay?this.curDisplay.globalTransform:null}},{key:"curTransform",get:function(){return this.curDisplay?this.curDisplay.transform:null}},{key:"over",set:function(e){this._over!==e&&(this._over=e,this.refreshOverSelect())}},{key:"selected",set:function(e){this._selected!==e&&(this._selected=e,this.refreshOverSelect())}},{key:"clear",value:function(){this._curDisplay&&(this.removeChild(this._curDisplay),this._curDisplay=void 0)}},{key:"refresh",value:function(){if(this.data){var e=this.curDisplay,t=this.curAlpha,n=this.curColor,r=new Ck;r.uvEditMode=this._uvEditMode,r.editMode=this.editMode,r.data=e,r.alpha=t,r.tint=n,r.blendMode=this.curBlendMode,this._curDisplay=r,this.addChild(r)}}},{key:"refreshOverSelect",value:function(){this._curDisplay&&(this._over&&this._selected?this.filters=[new YS(2,yp.COLOR_SELECT_OVER_RECT)]:this._selected?this.filters=[new YS(2,yp.COLOR_SELECT_RECT)]:this._over?this.filters=[new YS(2,yp.COLOR_OVER_RECT)]:this.filters=[])}}]),n}(c_),Ik=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this))._app=void 0,r._center=void 0,r._slotDataList=[],r._overSlotId=0,r._selectedSlotIds=[],r._slotList=[],r._slotListPool=new iS(Ak),r._hideSlotIds=[],r._uvEditMode=!1,r.editMode=void 0,r._dopesheetMouseDown=!1,r._app=e,r._center=new bg(0,0),r._width=0,r._height=0,r.initEvent(),r}return f(n,[{key:"initEvent",value:function(){var e=this;$2.instance&&$2.instance.eventBus&&($2.instance.eventBus.on("dopesheetMouseUp",(function(){e._dopesheetMouseDown=!1}),this),$2.instance.eventBus.on("dopesheetMouseDown",(function(){e._dopesheetMouseDown=!0}),this))}},{key:"uvEditMode",set:function(e){this._uvEditMode=e}},{key:"slots",set:function(e){this._slotDataList=e,this.refresh()}},{key:"overSlotId",set:function(e){this._overSlotId!==e&&(this._overSlotId=e,this.refreshSlotOverAndSelect())}},{key:"selectedSlotIds",set:function(e){this._selectedSlotIds=e,this.refreshSlotOverAndSelect()}},{key:"hideSlotIds",set:function(e){this._hideSlotIds=e,this.refresh()}},{key:"refreshSlotOverAndSelect",value:function(){for(var e=0,t=this._slotList.length;e<t;e++){var n=this._slotList[e];n.data&&(n.over=n.data.id===this._overSlotId,n.selected=this._selectedSlotIds.indexOf(n.data.id)>=0)}}},{key:"stopOverCheck",value:function(){for(var e=0,t=this._slotList.length;e<t;e++){var n=this._slotList[e];n.removeAllListeners("mouseover"),n.removeAllListeners("mouseout")}}},{key:"startOvercheck",value:function(){for(var e=this,t=function(){var t=e._slotList[n];t.addEventListener("mouseover",(function(n){var r;e.emit(q.OVER_SLOT,null===(r=t.data)||void 0===r?void 0:r.id)})),t.addEventListener("mouseout",(function(){e.emit(q.OUT_SLOT)}))},n=0,r=this._slotList.length;n<r;n++)t()}},{key:"refresh",value:function(){var e=this;this.clear();for(var t=function(){var t=e._slotDataList[n];if(e._hideSlotIds&&e._hideSlotIds.indexOf(t.id)>=0)return"continue";var r=e._slotListPool.get();r.visible=!0,r.uvEditMode=e._uvEditMode,r.editMode=e.editMode,r.eventMode="static",r.data=t,e.addChild(r),r.addEventListener("mouseover",(function(n){e._dopesheetMouseDown||e.emit(q.OVER_SLOT,t.id)})),r.addEventListener("mouseout",(function(){e._dopesheetMouseDown||e.emit(q.OUT_SLOT)})),e._slotList.push(r)},n=0,r=this._slotDataList.length;n<r;n++)t();this.refreshSlotOverAndSelect()}},{key:"clear",value:function(){this.stopOverCheck(),this._slotListPool.clearArray(this._slotList),this._slotList.length=0,this.children.length=0}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.x=e,this._center.y=t,this.x=e,this.y=t}},{key:"setScale",value:function(e){this.scale.set(e)}}]),n}(c_),Ok=function(e){return e.aa="url(assets/run.png),auto",e.hand="pointer",e.default="default",e.auto="auto",e.crosshair="crosshair",e.pointer="pointer",e.move="move",e.e_resize="e-resize",e.ne_resize="ne-resize",e.nw_resize="nw-resize",e.n_resize="n-resize",e.se_resize="se-resize",e.sw_resize="sw-resize",e.s_resize="s-resize",e.w_resize="w-resize",e.col_resize="col-resize",e.row_resize="row-resize",e.text="text",e.wait="wait",e.help="help",e.alias="alias",e}({}),Pk=function(){function e(){u(this,e)}return f(e,null,[{key:"setCursor",value:function(t){e.pixiLayer.style.cursor=t,e.dopeLayer&&(e.dopeLayer.style.cursor=t)}},{key:"setDisplayCursor",value:function(t,n){t.on("mouseover",(function(t){e.setCursor(n),t.stopPropagation()})),t.on("mouseout",(function(){e.setCursor(Ok.auto)}))}}]),e}();Pk.pixiLayer=void 0,Pk.dopeLayer=void 0;var Mk={x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:1,height:1,pivotX:0,pivotY:0},Rk=function(e){return e[e.DRAGONBONES=0]="DRAGONBONES",e[e.NORMAL=1]="NORMAL",e[e.XY=2]="XY",e[e.SCALE=3]="SCALE",e[e.ROTATION=4]="ROTATION",e[e.SKEW=5]="SKEW",e[e.FRAME_8=6]="FRAME_8",e[e.X=7]="X",e[e.Y=8]="Y",e[e.SCALE_X=9]="SCALE_X",e[e.SCALE_Y=10]="SCALE_Y",e[e.SKEW_X=11]="SKEW_X",e[e.SKEW_Y=12]="SKEW_Y",e}({}),Nk=function(e){return e[e.LOCAL=0]="LOCAL",e[e.GLOBAL=1]="GLOBAL",e[e.PARENT=2]="PARENT",e}({}),Dk=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).displayHandler=void 0,e.moveXHandler=void 0,e.moveYHandler=void 0,e.moveHandler=void 0,e.scaleXHandler=void 0,e.scaleYHandler=void 0,e.scaleHandler=void 0,e.rotationHandler=void 0,e.pivotHandler=void 0,e.scaleLeftTop=void 0,e.scaleCenterTop=void 0,e.scaleRightTop=void 0,e.scaleLeftMiddle=void 0,e.scaleRightMiddle=void 0,e.scaleLeftBottom=void 0,e.scaleCenterBottom=void 0,e.scaleRightBottom=void 0,e._transforming=!1,e._type=Rk.DRAGONBONES,e._overX=!1,e._overY=!1,e._overScaleX=!1,e._overScaleY=!1,e._overScale=!1,e._overRotation=!1,e._offScaleX=1,e._offScaleY=1,e._target=void 0,e._targetCameraTransform=Re({},Mk),e.cameraTransform=new Fg,e._downPos={x:0,y:0},e._coordinateType=Nk.GLOBAL,e.onXOver=function(){e._overX=!0,e.transforming||e.drawMoveXHandler()},e.onXOut=function(){e._overX=!1,e.transforming||e.drawMoveXHandler()},e.onYOver=function(){e._overY=!0,e.transforming||e.drawMoveYHandler()},e.onYOut=function(){e._overY=!1,e.transforming||e.drawMoveYHandler()},e.onScaleXOver=function(){e._overScaleX=!0,e.transforming||e.drawScaleXHandler()},e.onScaleXOut=function(){e._overScaleX=!1,e.transforming||e.drawScaleXHandler()},e.onScaleYOver=function(){e._overScaleY=!0,e.transforming||e.drawScaleYHandler()},e.onScaleYOut=function(){e._overScaleY=!1,e.transforming||e.drawScaleYHandler()},e.onScaleOver=function(){e._overScale=!0,e.transforming||(e._type,Rk.DRAGONBONES)},e.onScaleOut=function(){e._overScale=!1,e.transforming||(e._type,Rk.DRAGONBONES)},e.onRotationOver=function(){e._overRotation=!0,e.transforming},e.onRotationOut=function(){e._overRotation=!1,e.transforming},e.displayHandler=new iw,e.moveXHandler=new iw,e.moveYHandler=new iw,e.moveHandler=new iw,e.scaleXHandler=new iw,e.scaleYHandler=new iw,e.scaleHandler=new iw,e.rotationHandler=new iw,e.pivotHandler=new iw,e.scaleLeftTop=new iw,e.scaleCenterTop=new iw,e.scaleRightTop=new iw,e.scaleLeftMiddle=new iw,e.scaleRightMiddle=new iw,e.scaleLeftBottom=new iw,e.scaleCenterBottom=new iw,e.scaleRightBottom=new iw,e.addChild(e.displayHandler),e.addChild(e.moveHandler),e.addChild(e.moveXHandler),e.addChild(e.moveYHandler),e.addChild(e.scaleHandler),e.addChild(e.scaleXHandler),e.addChild(e.scaleYHandler),e.addChild(e.scaleLeftTop),e.addChild(e.scaleCenterTop),e.addChild(e.scaleRightTop),e.addChild(e.scaleLeftMiddle),e.addChild(e.scaleRightMiddle),e.addChild(e.scaleLeftBottom),e.addChild(e.scaleCenterBottom),e.addChild(e.scaleRightBottom),e.addChild(e.rotationHandler),e.addChild(e.pivotHandler),e.updateType(),e.moveXHandler.eventMode="static",e.moveYHandler.eventMode="static",e.moveHandler.eventMode="static",e.scaleXHandler.eventMode="static",e.scaleYHandler.eventMode="static",e.scaleHandler.eventMode="static",e.rotationHandler.eventMode="static",e.pivotHandler.eventMode="static",e.scaleLeftTop.eventMode="static",e.scaleCenterTop.eventMode="static",e.scaleRightTop.eventMode="static",e.scaleLeftMiddle.eventMode="static",e.scaleRightMiddle.eventMode="static",e.scaleLeftBottom.eventMode="static",e.scaleCenterBottom.eventMode="static",e.scaleRightBottom.eventMode="static",e.moveXHandler.on("mouseover",e.onXOver,g(e)),e.moveXHandler.on("mouseout",e.onXOut,g(e)),e.moveYHandler.on("mouseover",e.onYOver,g(e)),e.moveYHandler.on("mouseout",e.onYOut,g(e)),e.scaleXHandler.on("mouseover",e.onScaleXOver,g(e)),e.scaleXHandler.on("mouseout",e.onScaleXOut,g(e)),e.scaleYHandler.on("mouseover",e.onScaleYOver,g(e)),e.scaleYHandler.on("mouseout",e.onScaleYOut,g(e)),e.scaleHandler.on("mouseover",e.onScaleOver,g(e)),e.scaleHandler.on("mouseout",e.onScaleOut,g(e)),e.rotationHandler.on("mouseover",e.onRotationOver,g(e)),e.rotationHandler.on("mouseout",e.onRotationOut,g(e)),Pk.setDisplayCursor(e.scaleXHandler,Ok.e_resize),Pk.setDisplayCursor(e.scaleYHandler,Ok.s_resize),Pk.setDisplayCursor(e.moveHandler,Ok.move),Pk.setDisplayCursor(e.moveXHandler,Ok.move),Pk.setDisplayCursor(e.moveYHandler,Ok.move),Pk.setDisplayCursor(e.scaleHandler,Ok.nw_resize),Pk.setDisplayCursor(e.rotationHandler,Ok.alias),e.target=void 0,e}return f(n,[{key:"target",get:function(){return this._target},set:function(e){this._target=e,this.updateTarget()}},{key:"type",get:function(){return this._type},set:function(e){this._type!==e&&(this._type=e,this.updateType())}},{key:"transforming",get:function(){return this._transforming},set:function(e){this._transforming=e,e||(this.updateType(),this.offScaleX=1,this.offScaleY=1)}},{key:"offScaleX",set:function(e){this._offScaleX!==e&&(this._offScaleX=e,this.scaleXHandler.visible&&this.drawScaleXHandler())}},{key:"offScaleY",set:function(e){this._offScaleY!==e&&(this._offScaleY=e,this.scaleYHandler.visible&&this.drawScaleYHandler())}},{key:"updateType",value:function(){switch(this.moveXHandler.visible=!1,this.moveYHandler.visible=!1,this.scaleXHandler.visible=!1,this.scaleYHandler.visible=!1,this.scaleHandler.visible=!1,this.rotationHandler.visible=!1,this.scaleLeftTop.visible=!1,this.scaleCenterTop.visible=!1,this.scaleRightTop.visible=!1,this.scaleLeftMiddle.visible=!1,this.scaleRightMiddle.visible=!1,this.scaleLeftBottom.visible=!1,this.scaleCenterBottom.visible=!1,this.scaleRightBottom.visible=!1,this._type){case Rk.DRAGONBONES:this.drawMoveXHandler(),this.drawMoveYHandler(),this.drawMoveHandler(),this.drawScaleHandler(),this.drawScaleXHandler(),this.drawScaleYHandler(),this.drawRotationSectorHandler();break;case Rk.NORMAL:this.drawScaleXHandler(),this.drawScaleYHandler(),this.drawScaleHandler(),this.drawRotationHandler(),this.drawPivotHandler();break;case Rk.XY:this.drawMoveXHandler(),this.drawMoveYHandler();break;case Rk.SCALE:this.drawScaleXHandler(),this.drawScaleYHandler(),this.drawScaleHandler();break;case Rk.ROTATION:this.drawRotationHandler();break;case Rk.SKEW:break;case Rk.FRAME_8:this.refreshFrame8()}}},{key:"updateSize",value:function(e,t,n,r){this.moveHandler.clear(),this.moveHandler.lineStyle(1,yp.SELECTED_LINE_COLOR,1,.5),this.moveHandler.beginFill(0,0);var i=-n*e,o=-r*t;this.moveHandler.drawRect(i,o,e,t),this.moveHandler.endFill(),this.moveHandler.hitArea=new xg(i,o,e,t)}},{key:"refreshFrame8",value:function(){var e=yp.HANDLER_SCALE;this.drawScaleLeftTop(this.scaleLeftTop,e),this.drawScaleCenterTop(this.scaleCenterTop,e),this.drawScaleRightTop(this.scaleRightTop,e),this.drawScaleLeftMiddle(this.scaleLeftMiddle,e),this.drawScaleRightMiddle(this.scaleRightMiddle,e),this.drawScaleLeftBottom(this.scaleLeftBottom,e),this.drawScaleCenterBottom(this.scaleCenterBottom,e),this.drawScaleRightBottom(this.scaleRightBottom,e),this.drawRotationHandler(),this.drawPivotHandler(),this.drawMove()}},{key:"drawMoveXHandler",value:function(){this.moveXHandler.visible=!0;var e=yp.HANDLER_X_MOVE,t=yp.HANDLER_NORMAL;this._overX&&(e=yp.HANDLER_OVER_2),this.moveXHandler.clear(),this.moveXHandler.lineStyle(1,t,0),this.moveXHandler.beginFill(e),this.drawMoveX(this.moveXHandler),this.moveXHandler.endFill()}},{key:"drawMoveYHandler",value:function(){this.moveYHandler.visible=!0;var e=yp.HANDLER_Y_MOVE,t=yp.HANDLER_NORMAL;this._overY&&(e=yp.HANDLER_OVER_2),this.moveYHandler.clear(),this.moveYHandler.lineStyle(1,t,0),this.moveYHandler.beginFill(e),this.drawMoveY(this.moveYHandler),this.moveYHandler.endFill()}},{key:"drawMoveHandler",value:function(){this.moveHandler.visible=!0;var e=yp.HANDLER_MOVE,t=1,n=yp.HANDLER_NORMAL,r=1;this.moveHandler.clear(),this.moveHandler.rotation=0,this._targetCameraTransform.width>0&&this._targetCameraTransform.height>0?(n=yp.HANDLER_MOVE,r=1,t=.01,this.moveHandler.lineStyle(1,n,r),this.moveHandler.beginFill(e,t),this.moveHandler.drawRect(.5*-this._targetCameraTransform.width,.5*-this._targetCameraTransform.height,this._targetCameraTransform.width,this._targetCameraTransform.height),this.moveHandler.rotation=this._targetCameraTransform.rotation):(this.moveHandler.lineStyle(1,n,r),this.moveHandler.beginFill(e,t),this.moveHandler.drawCircle(0,0,5)),this.moveHandler.endFill()}},{key:"drawScaleXHandler",value:function(){this.scaleXHandler.visible=!0;var e=yp.HANDLER_X_SCALE,t=yp.HANDLER_NORMAL;this._overScaleX&&(e=yp.HANDLER_OVER),this.scaleXHandler.clear(),this.scaleXHandler.lineStyle(1,t,0),this.scaleXHandler.beginFill(e),this.drawScaleX(this.scaleXHandler,this._offScaleX),this.scaleXHandler.endFill()}},{key:"drawScaleYHandler",value:function(){this.scaleYHandler.visible=!0;var e=yp.HANDLER_Y_SCALE,t=yp.HANDLER_NORMAL;this._overScaleY&&(e=yp.HANDLER_OVER),this.scaleYHandler.clear(),this.scaleYHandler.lineStyle(1,t,0),this.scaleYHandler.beginFill(e),this.drawScaleY(this.scaleYHandler,this._offScaleY),this.scaleYHandler.endFill()}},{key:"drawScaleAllHandler",value:function(){this.scaleHandler.visible=!0;var e=yp.HANDLER_SCALE_ALL,t=yp.HANDLER_NORMAL;this._overScale&&(e=yp.HANDLER_OVER_2),this.scaleHandler.clear(),this.scaleHandler.lineStyle(1,t,0),this.scaleHandler.beginFill(e),this.drawScaleAll(this.scaleHandler,this._offScaleY),this.scaleHandler.endFill(),this.scaleHandler.angle=-45}},{key:"drawScaleHandler",value:function(){this.scaleHandler.angle=0,this.scaleHandler.visible=!0;var e=yp.HANDLER_SCALE,t=yp.HANDLER_SCALE;this.scaleHandler.clear(),this.scaleHandler.lineStyle(1,t,.7),this.scaleHandler.beginFill(e,.5),this.drawScale(this.scaleHandler,40),this.scaleHandler.endFill()}},{key:"drawRotationHandler",value:function(){this.rotationHandler.visible=!0;var e=yp.HANDLER_ROTATION,t=yp.HANDLER_ROTATION;this._overRotation&&(e=yp.HANDLER_OVER,t=yp.HANDLER_OVER);this.rotationHandler.clear(),this.rotationHandler.lineStyle(1,t,1),this.rotationHandler.beginFill(e,1),this.drawRotation(this.rotationHandler),this.rotationHandler.endFill()}},{key:"drawRotationSectorHandler",value:function(){this.rotationHandler.visible=!0;var e=yp.HANDLER_ROTATION_SECTOR,t=yp.HANDLER_ROTATION_SECTOR;this.rotationHandler.clear(),this.rotationHandler.lineStyle(1,t,.7),this.rotationHandler.beginFill(e,.5),this.drawRotationSector(this.rotationHandler,40),this.rotationHandler.endFill()}},{key:"drawMoveX",value:function(e){e.moveTo(5,1),e.lineTo(50,1),e.lineTo(55,6),e.lineTo(70,0),e.lineTo(55,-6),e.lineTo(50,-1),e.lineTo(5,-1),e.lineTo(5,1)}},{key:"drawMoveY",value:function(e){e.moveTo(1,5),e.lineTo(1,50),e.lineTo(6,55),e.lineTo(0,70),e.lineTo(-6,55),e.lineTo(-1,50),e.lineTo(-1,5),e.lineTo(1,5)}},{key:"drawScaleX",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(-5,1),e.lineTo(-n,1),e.lineTo(-(n+5),6),e.lineTo(-(n+r),6),e.lineTo(-(n+r),-6),e.lineTo(-(n+5),-6),e.lineTo(-n,-1),e.lineTo(-5,-1),e.lineTo(-5,1)}},{key:"drawScaleY",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(1,-5),e.lineTo(1,-n),e.lineTo(6,-(n+5)),e.lineTo(6,-(n+r)),e.lineTo(-6,-(n+r)),e.lineTo(-6,-(n+5)),e.lineTo(-1,-n),e.lineTo(-1,-5),e.lineTo(1,-5)}},{key:"drawScaleAll",value:function(e,t){var n=50,r=20;t>1?r*=t:((n*=t)<8&&(n=8),(r*=t)<10&&(r=10)),e.moveTo(1,-5),e.lineTo(1,-n),e.lineTo(6,-(n+5)),e.lineTo(6,-(n+r)),e.lineTo(-6,-(n+r)),e.lineTo(-6,-(n+5)),e.lineTo(-1,-n),e.lineTo(-1,-5),e.lineTo(1,-5)}},{key:"drawRotation",value:function(e){var t=60,n=0,r=5,i=0;if(this._type===Rk.FRAME_8)t=r=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,n=(i=-(this._targetCameraTransform.anchorY||0))-50;e.moveTo(r,i),e.lineTo(t,n),e.drawCircle(t,n,5)}},{key:"drawRotationSector",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;e.moveTo(2,2);for(var n=t,r=0,i=t,o=0;o<n+1;o++)r=Math.sin(.5*Math.PI/n*o)*(t-2)+2,i=Math.cos(.5*Math.PI/n*o)*(t-2)+2,e.lineTo(r,i);e.lineTo(2,2)}},{key:"drawScale",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;e.moveTo(-2,-2);for(var n=t,r=0,i=t,o=0;o<n+1;o++)r=Math.sin(.5*Math.PI/n*o+Math.PI)*(t-2)-2,i=Math.cos(.5*Math.PI/n*o+Math.PI)*(t-2)-2,e.lineTo(r,i);e.lineTo(-2,-2)}},{key:"drawMove",value:function(){this.drawMoveHandler()}},{key:"drawPivotHandler",value:function(){this.pivotHandler.visible=!0;var e=yp.HANDLER_PIVOT,t=yp.HANDLER_PIVOT_LINE;this.pivotHandler.clear(),this.pivotHandler.lineStyle(1,t,1),this.pivotHandler.beginFill(e,.5),this.pivotHandler.drawCircle(0,0,5),this.pivotHandler.moveTo(0,5),this.pivotHandler.lineTo(0,-5),this.pivotHandler.moveTo(5,0),this.pivotHandler.lineTo(-5,0),this.pivotHandler.endFill()}},{key:"drawScaleFrame8Handler",value:function(e,t){e.clear(),e.beginFill(t,1),e.drawCircle(0,0,5),e.endFill(),e.visible=!0}},{key:"drawScaleLeftTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleCenterTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleRightTop",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)}},{key:"drawScaleLeftMiddle",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)+.5*this._targetCameraTransform.height}},{key:"drawScaleRightMiddle",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+.5*this._targetCameraTransform.height}},{key:"drawScaleLeftBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0),e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"drawScaleCenterBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+.5*this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"drawScaleRightBottom",value:function(e,t){this.drawScaleFrame8Handler(e,t),e.x=-(this._targetCameraTransform.anchorX||0)+this._targetCameraTransform.width,e.y=-(this._targetCameraTransform.anchorY||0)+this._targetCameraTransform.height}},{key:"updateTarget",value:function(){if(this._target){switch(this.updateCameraTransform(),this._type===Rk.FRAME_8?this.refreshFrame8():this._type===Rk.DRAGONBONES&&this.drawMove(),this.x=this._targetCameraTransform.x,this.y=this._targetCameraTransform.y,this._coordinateType){case Nk.LOCAL:this.rotation=this._targetCameraTransform.rotation;break;case Nk.GLOBAL:case Nk.PARENT:this.rotation=0}this.visible=!0}else this.visible=!1}},{key:"updateCameraTransform",value:function(){this._target&&(!function(e,t){t.x=e.x,t.y=e.y,t.scaleX=e.scaleX,t.scaleY=e.scaleY,t.rotation=e.rotation,t.skewX=e.skewX,t.skewY=e.skewY,t.width=e.width,t.height=e.height,t.pivotX=e.pivotX,t.pivotY=e.pivotY}(this._target,this._targetCameraTransform),this._targetCameraTransform.x=this._target.x*this.cameraTransform.scale.x+this.cameraTransform.position.x,this._targetCameraTransform.y=this._target.y*this.cameraTransform.scale.y+this.cameraTransform.position.y,this._targetCameraTransform.width=this._target.width*this._target.scaleX*this.cameraTransform.scale.x,this._targetCameraTransform.height=this._target.height*this._target.scaleY*this.cameraTransform.scale.y,this._targetCameraTransform.pivotX=this._target.pivotX,this._targetCameraTransform.pivotY=this._target.pivotY,this._targetCameraTransform.anchorX=this._target.pivotX*this._targetCameraTransform.width,this._targetCameraTransform.anchorY=this._target.pivotY*this._targetCameraTransform.height)}}]),n}(c_),Lk=function(e){return e[e.OVER=0]="OVER",e[e.NORMAL=1]="NORMAL",e[e.SELECT=2]="SELECT",e}({}),Fk=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._color=65280,e._poseType=Lk.OVER,e.eventMode="static",e.poseType=Lk.NORMAL,e.on("mouseover",e.onMouseOver,g(e)),e.on("mouseout",e.onMouseOut,g(e)),e}return f(n,[{key:"poseType",get:function(){return this._poseType},set:function(e){if(this._poseType!==e&&(this._poseType!==Lk.SELECT||e!==Lk.OVER)){switch(this._poseType=e,e){case Lk.OVER:this._color=16711680;break;case Lk.NORMAL:this._color=65280;break;case Lk.SELECT:this._color=255}this.drawPose()}}},{key:"onMouseOver",value:function(){this.poseType=Lk.OVER}},{key:"onMouseOut",value:function(){this._poseType!==Lk.SELECT&&(this.poseType=Lk.NORMAL)}},{key:"drawPose",value:function(){var e=this._color;this.clear(),this.lineStyle(2,e),this.beginFill(16777215,.1),this.drawCircle(0,0,4),this.endFill(),this.lineStyle(2,e),this.moveTo(-5,-5),this.lineTo(-3,-3),this.moveTo(3,3),this.lineTo(5,5),this.moveTo(5,-5),this.lineTo(3,-3),this.moveTo(-3,3),this.lineTo(-5,5),this.endFill()}}]),n}(iw),Bk=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._center=new bg,e._bgOffX=0,e._bgOffY=0,e._showHeight=0,e._showWidth=0,e._scale=1,e.overRect=void 0,e.frameRect=void 0,e.helpRect0=new xg,e.helpTransform0=new Fg,e.overLayer=void 0,e.selectLayer=void 0,e.transformHandler=new Dk,e.meshTransformHandler=new Dk,e.poseHandler=new Fk,e._posePos={x:0,y:0},e.overLayer=new c_,e.selectLayer=new c_,e.addChild(e.selectLayer),e.addChild(e.overLayer),e.overRect=new iw,e.frameRect=new iw,e.overLayer.addChild(e.frameRect),e.overLayer.addChild(e.overRect),e.overLayer.addChild(e.transformHandler),e.overLayer.addChild(e.meshTransformHandler),e.meshTransformHandler.type=Rk.XY,e}return f(n,[{key:"resizeStage",value:function(e,t){this._showWidth===e&&this._showHeight===t||(this._showWidth=e,this._showHeight=t)}},{key:"refreshStage",value:function(){this.poseHandler&&this.poseHandler.parent&&this.showPoseHandler(this._posePos.x,this._posePos.y)}},{key:"setCenter",value:function(e,t){this._center.set(e,t),this.refreshStage()}},{key:"setScale",value:function(e){this._scale=e,this.refreshStage()}},{key:"drawFrameSelect",value:function(e,t,n,r){var i=Math.min(e,n),o=Math.max(e,n),a=Math.min(t,r),s=Math.max(t,r);i===o||a===s?this.frameRect.visible=!1:(this.frameRect.clear(),this.frameRect.lineStyle(1,yp.SELECTED_LINE_COLOR,1),this.frameRect.drawRect(i,a,o-i,s-a),this.frameRect.visible=!0)}},{key:"clearFrameSelect",value:function(){this.frameRect.visible=!1}},{key:"showPoseHandler",value:function(e,t){this._posePos.x=e,this._posePos.y=t,this.helpTransform0.position.set(this._center.x,this._center.y),this.helpTransform0.scale.set(this._scale,this._scale),this.helpTransform0.rotation=0,this.helpTransform0.updateLocalTransform();var n=this.helpTransform0.localTransform.apply(this._posePos);this.poseHandler.x=n.x,this.poseHandler.y=n.y,this.overLayer.addChild(this.poseHandler)}},{key:"hidePoseHandler",value:function(){this.poseHandler.parent&&this.overLayer.removeChild(this.poseHandler)}}]),n}(c_),Uk=function(e){v(n,gmvc.ViewController);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).store=$2.instance.store,e._enable=!1,e._cacheEnable=!1,e._pausing=!1,e}return f(n,[{key:"enable",set:function(e){this._pausing?this._cacheEnable=e:this._enable!==e&&(e?this.start():this.stop(),this._enable=!this._enable)}},{key:"start",value:function(){}},{key:"stop",value:function(){}},{key:"pause",value:function(){this._pausing||(this._cacheEnable=this._enable,this.enable=!1,this._pausing=!0)}},{key:"resume",value:function(){this._pausing&&(this._pausing=!1,this.enable=this._cacheEnable)}}]),n}(),Hk=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).rectSelecting=!1,e._downRectSelectPos={x:0,y:0},e._downStagePos={x:0,y:0},e._rightDownStagePos={x:0,y:0},e._rectSelectAdd=!1,e._cacheBoneSelectIds=[],e._cacheSlotSelectIds=[],e._mouseDown=!1,e._readyRectSelect=!1,e._selectBoneEnable=!1,e._selectSlotEnable=!1,e._selectFrameEnable=!1,e._selectOneEnable=!1,e._overBoneEnable=!1,e._overSlotEnable=!1,e._selectOneBone=!1,e._selectOneSlot=!1,e._notBeginMerge=!1,e._selectBoneChains=void 0,e._selectSlotChain=void 0,e.reFrameSelectEnable=!1,e._mouseEnterDopeSheet=!1,e.onMouseEnterDopeSheet=function(t){e._mouseEnterDopeSheet=!0},e.onMouseLeaveDopeSheet=function(t){e._mouseEnterDopeSheet=!1},e.onOverBone=function(t){e._overBoneEnable&&!e._mouseEnterDopeSheet&&e.store.commit(G.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(G.OVER_BONE,0)},e.onOverSlot=function(t){e._overSlotEnable&&!e._mouseEnterDopeSheet&&e.store.commit(B.OVER_SLOT,t)},e.onOutSlot=function(){e.store.commit(B.OVER_SLOT,0)},e.onMouseMove=function(t){e._mouseDown&&(e.rectSelecting?e.updateRectSelect(t.data):e._readyRectSelect&&e.startRectSelect(t.data))},e.selectOne=function(t){var n=t.data.nativeEvent,r=n.ctrlKey||n.metaKey,i=e.store.state.editor.over.overSlotId,o=e.store.state.editor.over.overBone;if(r){if(o>0){var a=e.store.state.runtime.editing.selectedBoneIds,s=a.concat(),l=a.indexOf(o);-1===l?s.push(o):s.splice(l,1),e.store.dispatch(V.SELECT_BONES,s)}if(i>0){var u=e.store.state.runtime.editing.selectedSlotIds,c=u.concat(),h=u.indexOf(i);-1===h?c.push(i):c.splice(h,1),e.store.dispatch(F.SELECT_SLOTS,c)}}else i>0&&e.store.dispatch(F.SELECT_ONE_SLOT,[i]),o>0&&e.store.dispatch(V.SELECT_ONE_BONE,[o])},e.onSelectBoneChange=function(t){e._selectBoneChains=null,e._selectSlotChain=null},e.onMouseDown=function(t){var n=e.store.state.editor.over.overBone,r=e.store.state.editor.over.overSlotId;e._downStagePos.x=t.data.stagePos.x,e._downStagePos.y=t.data.stagePos.y,n>0||r>0||(e.preRectSelect(t.data),e._mouseDown=!0)},e.onRightDown=function(t){var n=t.data.stagePos.x,r=t.data.stagePos.y;e._rightDownStagePos.x=n,e._rightDownStagePos.y=r},e.onRightUp=function(t){var n=t.data.stagePos.x,r=t.data.stagePos.y;n===e._rightDownStagePos.x&&r===e._rightDownStagePos.y&&(e.store.state.runtime.editing.selectedBoneIds.length>0&&e.store.dispatch(V.SELECT_BONES,[]),e.store.state.runtime.editing.selectedSlotIds.length>0&&e.store.dispatch(F.SELECT_SLOTS,[]))},e.onMouseUp=function(t){e._mouseDown=!1,e._readyRectSelect=!1,e.rectSelecting&&(e.stopRectSelect(),e._notBeginMerge&&(e._notBeginMerge=!1,e.store.historyEndMerge()))},e}return f(n,[{key:"getSelectBoneChains",value:function(){if(this._selectBoneChains)return this._selectBoneChains;var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.getCurArmature();if(e.length>1)this._selectBoneChains=PT.getBoneChains(t,e);else if(1===e.length){var n=t.bones.map[e[0]];this._selectBoneChains=[[n]]}return this._selectBoneChains}},{key:"getSelectSlotChain",value:function(){if(this._selectSlotChain)return this._selectSlotChain;for(var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.state.runtime.editing.selectedSlotIds,n=this.store.getCurArmature(),r=[],i=0,o=t.length;i<o;i++){var a=t[i],s=n.slots.map[a];-1===e.indexOf(s.parentId)&&r.push(s)}return r.length>0&&(this._selectSlotChain=r),this._selectSlotChain}},{key:"start",value:function(){this.selectBoneEnable=!0,this.selectSlotEnable=!0,this.selectOneEnable=!0,this.selectFrameEnable=!0,this.overEnable=!0,this._addNotification(X.MOUSE_DOWN,this.selectOne),this._addNotification(G.SELECT_BONES,this.onSelectBoneChange),this._addNotification(D.SELECT_ARMATURE,this.onSelectBoneChange),this._addNotification(B.SELECT_SLOTS,this.onSelectBoneChange),this._addNotification(j.SELECT_DISPLAY,this.onSelectBoneChange),this._addNotification("dopesheetMouseEnter",this.onMouseEnterDopeSheet),this._addNotification("dopesheetMouseLeave",this.onMouseLeaveDopeSheet)}},{key:"stop",value:function(){this.selectBoneEnable=!1,this.selectSlotEnable=!1,this.selectOneEnable=!1,this.selectFrameEnable=!1,this._removeNotification(X.MOUSE_DOWN,this.selectOne),this._removeNotification(G.SELECT_BONES,this.onSelectBoneChange),this._removeNotification(D.SELECT_ARMATURE,this.onSelectBoneChange),this._removeNotification(B.SELECT_SLOTS,this.onSelectBoneChange),this._removeNotification(j.SELECT_DISPLAY,this.onSelectBoneChange),this._removeNotification("dopesheetMouseEnter",this.onMouseEnterDopeSheet),this._removeNotification("dopesheetMouseLeave",this.onMouseLeaveDopeSheet)}},{key:"selectOneBone",set:function(e){if(this._selectOneBone!==e){this._selectOneBone=e;var t=this.view.getView(oS);this._selectOneBone?(t.on(q.OVER_BONE,this.onOverBone,this),t.on(q.OUT_BONE,this.onOutBone,this)):(t.off(q.OVER_BONE),t.off(q.OUT_BONE))}}},{key:"selectOneSlot",set:function(e){if(this._selectOneSlot!==e){this._selectOneSlot=e;var t=this.view.getView(Ik);this._selectOneSlot?(t.on(q.OVER_SLOT,this.onOverSlot,this),t.on(q.OUT_SLOT,this.onOutSlot,this)):(t.off(q.OVER_SLOT),t.off(q.OUT_SLOT))}}},{key:"overEnable",set:function(e){this._overBoneEnable=e,this._overSlotEnable=e}},{key:"selectBoneEnable",set:function(e){this._selectBoneEnable!==e&&(this._selectBoneEnable=e,this.selectOneBone=this._selectBoneEnable&&this._selectOneEnable)}},{key:"selectSlotEnable",set:function(e){this._selectSlotEnable!==e&&(this._selectSlotEnable=e,this.selectOneSlot=this._selectSlotEnable&&this._selectOneEnable)}},{key:"selectFrameEnable",set:function(e){this._selectFrameEnable!==e&&(this._selectFrameEnable=e,this._selectFrameEnable?(this._addNotification(X.MOUSE_MOVE,this.onMouseMove),this._addNotification(X.MOUSE_DOWN,this.onMouseDown),this._addNotification(X.MOUSE_UP,this.onMouseUp),this._addNotification(X.RIGHT_DOWN,this.onRightDown),this._addNotification(X.RIGHT_UP,this.onRightUp)):(this._removeNotification(X.MOUSE_MOVE,this.onMouseMove),this._removeNotification(X.MOUSE_DOWN,this.onMouseDown),this._removeNotification(X.MOUSE_UP,this.onMouseUp),this._removeNotification(X.RIGHT_DOWN,this.onRightDown),this._removeNotification(X.RIGHT_UP,this.onRightUp)))}},{key:"selectOneEnable",set:function(e){this._selectOneEnable!==e&&(this._selectOneEnable=e,this.selectOneBone=this._selectBoneEnable&&this._selectOneEnable,this.selectOneSlot=this._selectSlotEnable&&this._selectOneEnable)}},{key:"startRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;t===this._downStagePos.x&&n===this._downStagePos.y||(this.rectSelecting=!0)}},{key:"preRectSelect",value:function(e){var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.state.runtime.editing.selectedSlotIds,r=e.nativeEvent;if(this._rectSelectAdd=r.ctrlKey||r.metaKey,this.reFrameSelectEnable||this._rectSelectAdd||!(t.length>0||n.length>0)){if(0===t.length&&1===n.length){var i=n[0],o=this.store.getCurArmature().slots.map[i],a=PT.getSlotCurDisplay(o);if(a&&a.type===T.MESH)return}this._readyRectSelect=!0,this._downRectSelectPos.x=e.canvasPos.x,this._downRectSelectPos.y=e.canvasPos.y,this._rectSelectAdd&&(this._cacheBoneSelectIds=t.concat(),this._cacheSlotSelectIds=n.concat())}}},{key:"updateRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;this.checkFrameSelect(this._downStagePos.x,this._downStagePos.y,t,n);var r=e.canvasPos.x,i=e.canvasPos.y;this.view.getView(Bk).drawFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,r,i)}},{key:"stopRectSelect",value:function(){this.rectSelecting=!1,this.view.getView(Bk).clearFrameSelect()}},{key:"checkFrameSelect",value:function(e,t,n,r){if(this._selectBoneEnable||this._selectSlotEnable){var i=[],o=[],a=Math.min(e,n),s=Math.max(e,n),l=Math.min(t,r),u=Math.max(t,r),c=this.store.getCurArmature(),h=c.bones.ids,d=this.store.state.runtime.editing.lockBoneSlotIds,f=this.store.state.runtime.editing.boneSlotControl.boneSelectEnable,p=this.store.state.runtime.editing.boneSlotControl.slotSelectEnable;if(f&&this._selectBoneEnable){for(var v=0,m=h.length;v<m;v++){var g=h[v];if(-1===d.indexOf(g)){var y=c.bones.map[g],b=y.globalTransform.x,_=y.globalTransform.y;b>a&&b<s&&_>l&&_<u&&i.push(g)}}var x=i;this._rectSelectAdd&&this._cacheBoneSelectIds.length>0&&(x=i.concat(this._cacheBoneSelectIds));var E=this.store.state.runtime.editing.selectedBoneIds;vp.arrayEqualArray(E,x)||(this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge()),this.store.dispatch(V.SELECT_BONES,x))}if(p&&this._selectSlotEnable){for(var w=c.slots.ids,T=0,S=w.length;T<S;T++){var k=w[T];if(-1===d.indexOf(k)){var C=c.slots.map[k];if(0!==C.displays.ids.length){var A=PT.getSlotCurDisplay(C);if(A){var I=A.globalTransform.x,O=A.globalTransform.y;I>a&&I<s&&O>l&&O<u&&o.push(k)}}}}var P=o;this._rectSelectAdd&&this._cacheSlotSelectIds.length>0&&(P=o.concat(this._cacheSlotSelectIds));var M=this.store.state.runtime.editing.selectedSlotIds;vp.arrayEqualArray(M,P)||(this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge()),this.store.dispatch(F.SELECT_SLOTS,P))}}}}],[{key:"toString",value:function(){return"BoneSlotSelectController"}}]),n}(Uk),jk=function(e){return e[e.X=0]="X",e[e.Y=1]="Y",e[e.XY=2]="XY",e[e.SCALE_X=3]="SCALE_X",e[e.SCALE_Y=4]="SCALE_Y",e[e.SCALE=5]="SCALE",e[e.ROTATION=6]="ROTATION",e[e.PIVOT=7]="PIVOT",e[e.SKEW_X=8]="SKEW_X",e[e.SKEW_Y=9]="SKEW_Y",e[e.WIDTH=10]="WIDTH",e[e.HEIGHT=11]="HEIGHT",e[e.SIZE=12]="SIZE",e[e.SCALE_LEFT_TOP=13]="SCALE_LEFT_TOP",e[e.SCALE_LEFT_MIDDLE=14]="SCALE_LEFT_MIDDLE",e[e.SCALE_LEFT_BOTTOM=15]="SCALE_LEFT_BOTTOM",e[e.SCALE_RIGHT_TOP=16]="SCALE_RIGHT_TOP",e[e.SCALE_RIGHT_MIDDLE=17]="SCALE_RIGHT_MIDDLE",e[e.SCALE_RIGHT_BOTTOM=18]="SCALE_RIGHT_BOTTOM",e[e.SCALE_CENTER_TOP=19]="SCALE_CENTER_TOP",e[e.SCALE_CENTER_BOTTOM=20]="SCALE_CENTER_BOTTOM",e}({}),zk=function(){function e(){u(this,e),this.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},this.target=void 0,this.cacheTarget={x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:0,height:0,pivotX:0,pivotY:0},this.beginPos={x:0,y:0},this.curTransformFun=void 0,this.transformFunMap=new Map,this.offsetScaleX=1,this.offsetScaleY=1,this._type=jk.HEIGHT,this.lastX=0,this.lastY=0,this._lastWorkX=0,this._lastWorkY=0,this.transformFunMap.set(jk.X,Vk),this.transformFunMap.set(jk.Y,Gk),this.transformFunMap.set(jk.XY,Wk),this.transformFunMap.set(jk.SCALE_X,Xk),this.transformFunMap.set(jk.SCALE_Y,Yk),this.transformFunMap.set(jk.SCALE,Kk),this.transformFunMap.set(jk.ROTATION,qk),this.transformFunMap.set(jk.PIVOT,Zk),this.transformFunMap.set(jk.SCALE_LEFT_BOTTOM,eC),this.transformFunMap.set(jk.SCALE_LEFT_TOP,Jk),this.transformFunMap.set(jk.SCALE_LEFT_MIDDLE,tC),this.transformFunMap.set(jk.SCALE_RIGHT_BOTTOM,$k),this.transformFunMap.set(jk.SCALE_RIGHT_TOP,Qk),this.transformFunMap.set(jk.SCALE_RIGHT_MIDDLE,nC),this.transformFunMap.set(jk.SCALE_CENTER_TOP,iC),this.transformFunMap.set(jk.SCALE_CENTER_BOTTOM,rC)}return f(e,[{key:"beginTransform",value:function(e,t,n){this._type=n,this.beginPos.x=e,this.beginPos.y=t,this._lastWorkX=e,this._lastWorkY=t,this.lastX=e,this.lastY=t,this.target&&(this.cacheTarget.x=this.target.x,this.cacheTarget.y=this.target.y,this.cacheTarget.scaleX=this.target.scaleX,this.cacheTarget.scaleY=this.target.scaleY,this.cacheTarget.rotation=this.target.rotation,this.cacheTarget.skewX=this.target.skewX,this.cacheTarget.skewY=this.target.skewY,this.cacheTarget.width=this.target.width,this.cacheTarget.height=this.target.height,this.cacheTarget.pivotX=this.target.pivotX,this.cacheTarget.pivotY=this.target.pivotY,this.curTransformFun=this.getCurTransformFun(n))}},{key:"getCurTransformFun",value:function(e){return this.transformFunMap.get(e)}},{key:"updateKey",value:function(e){if(this.curTransformFun&&this.target&&this.cacheTarget){var t=this.lastX,n=this.lastY,r=this.curTransformFun(this.beginPos.x,this.beginPos.y,t,n,this.target,this.cacheTarget,e);this.target.updateLocalTransform&&this.target.updateLocalTransform(r)}}},{key:"updateTransform",value:function(e,t,n){if(!this.target)return!1;if(this.curTransformFun){this.controlKey.ctrl=n.ctrlKey,this.controlKey.alt=n.altKey,this.controlKey.shift=n.shiftKey,this.controlKey.meta=n.metaKey;var r=e-this.lastX,i=t-this.lastY;this.lastX=e,this.lastY=t;var o=this._lastWorkX+r,a=this._lastWorkY+i,s=this.curTransformFun(this.beginPos.x,this.beginPos.y,o,a,this.target,this.cacheTarget,this.controlKey);switch(this._type){case jk.SCALE_X:this.offsetScaleX=s.scaleX;break;case jk.SCALE_Y:this.offsetScaleY=s.scaleY;break;case jk.SCALE:this.offsetScaleX=s.scale||s.scaleX}if(this.target.updateLocalTransform)this.target.updateLocalTransform(s)&&(this._lastWorkX=o,this._lastWorkY=a)}return!1}},{key:"endTransform",value:function(e,t){this.offsetScaleX=1,this.offsetScaleY=1}}],[{key:"toString",value:function(){return"TransformController"}}]),e}();function Vk(e,t,n,r,i,o){var a=n-e;return i.x=o.x+a,{x:a}}function Gk(e,t,n,r,i,o){var a=r-t;return i.y=o.y+a,{y:a}}function Wk(e,t,n,r,i,o){var a=n-e,s=r-t;return i.x=o.x+a,i.y=o.y+s,{x:a,y:s}}function Xk(e,t,n,r,i,o){var a=zk.helpPoint0,s=zk.helpPoint1;zk.helpPoint2;a.x=e,a.y=t;var l=a;s.x=n,s.y=r;var u=s,c=l.x-u.x,h=(c+=200)/200;return i.scaleX=o.scaleX*h,{scaleX:h}}function Yk(e,t,n,r,i,o){var a=zk.helpPoint0,s=zk.helpPoint1;a.x=e,a.y=t;var l=a;s.x=n,s.y=r;var u=s,c=l.y-u.y,h=(c+=200)/200;return i.scaleY=o.scaleY*h,{scaleY:h}}function Kk(e,t,n,r,i,o){var a=zk.helpPoint0,s=zk.helpPoint1;a.x=e,a.y=t;var l=a;s.x=n,s.y=r;var u=s,c=vp.distanceBetweenPoints(l,u);l.x-u.x<0&&l.y-u.y<0&&(c=-c);var h=(c+=200)/200;return i.scaleX=o.scaleX*h,i.scaleY=o.scaleY*h,{scaleX:h,scaleY:h}}function qk(e,t,n,r,i,o){var a=zk.helpPoint0,s=zk.helpPoint1,l=zk.helpPoint2;a.x=e-i.x,a.y=t-i.y,s.x=n-i.x,s.y=r-i.y,l.x=0,l.y=0;var u=vp.radianBetweenLines(a,l,s,l);return i.rotation=o.rotation+u,{rotation:u}}function Zk(e,t,n,r,i,o){var a=o.width*o.scaleX,s=o.height*o.scaleY,l=zk.helpMatrix0,u=zk.helpPoint0,c=zk.helpPoint1,h=zk.helpPoint2;l.setTransform(0,0,0,0,1,1,o.rotation,o.skewX,o.skewY),l.invert(),u.x=e,u.y=t,l.apply(u,c),u.x=n,u.y=r,l.apply(u,h);var d=h.x-c.x,f=h.y-c.y,p=d/a,v=f/s;return i.pivotX=o.pivotX+p,i.pivotY=o.pivotY+v,d=n-e,f=r-t,i.x=o.x+d,i.y=o.y+f,{pivotX:p,pivotY:v,x:d,y:f}}function $k(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=-1,c=-1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,1,u,c)}function Qk(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=-1,c=1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,1,u,c)}function Jk(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=1,c=1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,1,u,c)}function eC(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=1,c=-1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,1,u,c)}function tC(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=1,c=.5;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,0,u,c)}function nC(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=-1,c=.5;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,1,0,u,c)}function rC(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=.5,c=-1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,0,1,u,c)}function iC(e,t,n,r,i,o,a){var s=!1,l=!1;a&&(s=a.shift,l=a.alt);var u=.5,c=1;return l||(u=0,c=0),aC(e,t,n,r,i,o,s,0,1,u,c)}function oC(e,t,n){var r=0,i=0;return t<0?r=e.width*e.scaleX*(e.pivotX*t):0===t?r=0:t>0&&(r=e.width*e.scaleX*(t-e.pivotX)),n<0?i=e.height*e.scaleY*(e.pivotY*n):0===n?i=0:n>0&&(i=e.height*e.scaleY*(n-e.pivotY)),[r,i]}function aC(e,t,n,r,i,o,a,s,l,u,c){var h=1,d=1;if(a){var f=function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,c=zk.helpMatrix0,h=zk.helpPoint0,d=zk.helpPoint1,f=zk.helpPoint2;c.identity(),c.rotate(i.rotation),c.invert();var p=Pt(oC(o,l,u),2),v=p[0],m=p[1];h.x=o.x,h.y=o.y;var g=c.apply(h,d);g.x+=v,g.y+=m,h.x=e,h.y=t;var y=c.apply(h,f),b=(y.x-g.x)*a,_=(y.y-g.y)*s;h.x=n,h.y=r;var x=c.apply(h,f),E=(x.x-g.x)*a,w=(x.y-g.y)*s,T=1,S=1;return vp.isNumberEqual(b,0)||(T=E/b),vp.isNumberEqual(_,0)||(S=w/_),[T,S]}(e,t,n,r,i,o,s,l,u,c),p=Pt(f,2);h=p[0],d=p[1]}else{var v=function(e,t,n,r,i,o){var a=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,s=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,l=zk.helpMatrix0,u=zk.helpPoint0,c=zk.helpPoint1,h=zk.helpPoint2;l.identity(),l.rotate(i.rotation),l.invert();var d=Pt(oC(o,a,s),2),f=d[0],p=d[1];u.x=o.x+f,u.y=o.y+p;var v=l.apply(u,c);u.x=n,u.y=r;var m=l.apply(u,h),g=vp.distanceBetweenPoints(v,m);u.x=e,u.y=t;var y=l.apply(u,h),b=g/vp.distanceBetweenPoints(v,y);return[b,b]}(e,t,n,r,i,o,s,l,u,c),m=Pt(v,2);h=m[0],d=m[1]}i.scaleX=o.scaleX*h,i.scaleY=o.scaleY*d;var g=Pt(oC(o,u,c),2),y=g[0],b=g[1];if(i.rotation){var _=zk.helpMatrix0;_.identity(),_.rotate(i.rotation),_.invert();var x=zk.helpPoint0,E=zk.helpPoint1;x.x=o.x,x.y=o.y;var w=_.apply(x,E);w.x+=y*(1-h),w.y+=b*(1-d),_.identity(),_.rotate(i.rotation),_.apply(w,x),i.x=x.x,i.y=x.y}else i.x=o.x+y*(1-h),i.y=o.y+b*(1-d);return{scaleX:h,scaleY:d,x:i.x-o.x,y:i.y-o.y}}zk.helpMatrix0=new kg,zk.helpPoint0=new bg,zk.helpPoint1=new bg,zk.helpPoint2=new bg;var sC=function(){function e(){u(this,e),this._cacheCalcMatrixMap={},this._cacheTransformableMap={},this._cacheTransformable=Re({},Mk),this._selfTransformable=Re({},Mk),this._transformDirtyMap={x:!1,y:!1,scaleX:!1,scaleY:!1,rotation:!1,skewX:!1,skewY:!1,width:!1,height:!1,pivotX:!1,pivotY:!1},this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._skewX=0,this._skewY=0,this._width=1,this._height=1,this._pivotX=0,this._pivotY=0,this.offsetScaleX=1,this.offsetScaleY=1,this.store=void 0}return f(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._transformDirtyMap.x=!0)}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._transformDirtyMap.y=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(e){this._scaleX&&(this.offsetScaleX=this._scaleX/e,this._scaleX=e,this._transformDirtyMap.scaleX=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(e){this._scaleY!==e&&(this.offsetScaleY=this._scaleY/e,this._scaleY=e,this._transformDirtyMap.scaleY=!0)}},{key:"rotation",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._skewY=e,this._transformDirtyMap.rotation=!0)}},{key:"skewX",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._transformDirtyMap.skewX=!0)}},{key:"skewY",get:function(){return this._skewY},set:function(e){this._skewY!==e&&(this._skewY=e,this._transformDirtyMap.skewY=!0)}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX!==e&&(this._pivotX=e,this._transformDirtyMap.pivotX=!0)}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY!==e&&(this._pivotY=e,this._transformDirtyMap.pivotY=!0)}},{key:"width",get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._transformDirtyMap.width=!0)}},{key:"height",get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._transformDirtyMap.height=!0)}},{key:"beginTransform",value:function(){this.cacheSelectedBoneSlotTransform(),this.clearDirtyMap()}},{key:"endTransform",value:function(){this.clearDirtyMap()}},{key:"clearDirtyMap",value:function(){this._transformDirtyMap.x=!1,this._transformDirtyMap.y=!1,this._transformDirtyMap.scaleX=!1,this._transformDirtyMap.scaleY=!1,this._transformDirtyMap.rotation=!1,this._transformDirtyMap.skewX=!1,this._transformDirtyMap.skewY=!1,this._transformDirtyMap.width=!1,this._transformDirtyMap.height=!1,this._transformDirtyMap.pivotX=!1,this._transformDirtyMap.pivotY=!1}},{key:"cacheSelectedBoneSlotTransform",value:function(){if(this._cacheTransformableMap={},this.store){for(var e=this.store.getSelectedBones(),t=this.store.getSelectedSlots(),n=this.store.rootState.runtime.editing.editMode,r=this.store.rootState.runtime.editing.boneSlotControl.slotInheritEnable,i=this.store.rootState.runtime.editing.boneSlotControl.boneInheritEnable,o=0,a=e.length;o<a;o++){var s=e[o],l=s.transform,u=s.globalTransform;if(n===Y.ANIMATION&&(l=s.cacheTransform||s.animatedTransform||s.transform),this._cacheTransformableMap[s.id]={local:Re({},l),global:Re({},u)},!1===r&&n===Y.POSE)for(var c=PT.findBoneSlots(this.store.getCurArmature(),s.id),h=0,d=c.length;h<d;h++){var f=c[h],p=PT.getSlotCurDisplay(f);if(p){var v=p.transform,m=p.globalTransform;this._cacheTransformableMap[f.id]={local:v,global:m}}}if(!1===i&&n===Y.POSE)for(var g=PT.findBoneChildren(this.store.getCurArmature(),s.id),y=0,b=g.length;y<b;y++){var _=g[y];this._cacheTransformableMap[_.id]||(this._cacheTransformableMap[_.id]={local:Re({},_.transform),global:Re({},_.globalTransform)})}}for(var x=0,E=t.length;x<E;x++){var w=t[x],T=PT.getSlotCurDisplay(w);if(T){var S=T.transform,k=T.globalTransform;this._cacheTransformableMap[w.id]={local:S,global:k}}}}}},{key:"setValue",value:function(e){e&&(this.offsetScaleX=1,this.offsetScaleY=1,this._x=e.x,this._y=e.y,this._scaleX=e.scaleX,this._scaleY=e.scaleY,this._width=e.width,this._height=e.height,this._skewX=e.skewX,this._skewY=e.skewY,this._pivotX=e.pivotX,this._pivotY=e.pivotY)}},{key:"changeRotationToSkew",value:function(e){e.rotation=0}},{key:"updateLocalTransform",value:function(e){var t=Hk.getInstance(Hk),n=t.getSelectBoneChains(),r={},i=this.store.rootState.runtime.editing.editMode,o=this.store.rootState.runtime.editing.boneSlotControl.boneInheritEnable,a=this.store.rootState.runtime.editing.boneSlotControl.slotInheritEnable,s=this.store.getCurArmature(),l={},u=[],c=[];i===Y.POSE&&(c=t.getSelectSlotChain());var h=!1;if(n&&n.length){if(e.rotation)for(var d=0,f=n.length;d<f;d++)for(var p=n[d],v=0,m=p.length;v<m;v++)if(!1===o&&i===Y.POSE){var g=p[v],y=this._cacheTransformableMap[g.id].local;l[g.id]&&(y=l[g.id].local);var b=this._cacheTransformableMap[g.id].global;l[g.id]&&(b=l[g.id].global);var _=Re({},y);_.skewX+=e.rotation,_.skewY+=e.rotation,_.skewX=vp.normalizeRadian(_.skewX),_.skewY=vp.normalizeRadian(_.skewY);var x=Re({},b);x.skewX+=e.rotation,x.skewY+=e.rotation,x.skewX=vp.normalizeRadian(x.skewX),x.skewY=vp.normalizeRadian(x.skewY),r[g.id]={local:_,diffKeys:["skewX","skewY"]},void 0===l[g.id]&&(l[g.id]={local:_,global:x}),!1===a&&i===Y.POSE&&u.push(g.id);for(var E=this.store.getCurArmature(),w=PT.findBoneChildren(E,g.id),T=0,S=w.length;T<S;T++){var k=w[T];this._cacheTransformableMap[k.id]||(this._cacheTransformableMap[k.id]={local:Re({},k.transform),global:Re({},k.globalTransform)});var C=this._cacheTransformableMap[k.id].global,A=vp.transformInvertCross(x,C);l[k.id]={local:Re({},A),global:Re({},C)},r[k.id]={local:A,diffKeys:["skewX","skewY","x","y"]}}}else{var I=p[v],O=Re({},this._cacheTransformableMap[I.id].local);if(O.skewX+=e.rotation,O.skewY+=e.rotation,O.skewX=vp.normalizeRadian(O.skewX),O.skewY=vp.normalizeRadian(O.skewY),r[I.id]={local:O,diffKeys:["skewX","skewY"]},!1===a&&i===Y.POSE){var P=Re({},this._cacheTransformableMap[I.id].global);P.skewX+=e.rotation,P.skewY+=e.rotation,P.skewX=vp.normalizeRadian(P.skewX),P.skewY=vp.normalizeRadian(P.skewY),l[I.id]={local:Re({},O),global:Re({},P)},u.push(I.id)}}else if(e.x||e.y)for(var M=0,R=n.length;M<R;M++){var N=n[M][0],D=Re({},this._cacheTransformableMap[N.id].global);for(var L in e)switch(L){case"x":case"y":D[L]+=e[L]}var B=PT.getBoneLocalTransformByGlobal(N,s.bones.map,i,D);if(N.fkTransform&&(B.skewX=N.fkTransform.skewX,B.skewY=N.fkTransform.skewY),r[N.id]={local:B,diffKeys:["x","y"]},!1===a&&i===Y.POSE&&(l[N.id]={local:Re({},B),global:Re({},D)},u.push(N.id)),!1===o&&i===Y.POSE)for(var U=this.store.getCurArmature(),H=PT.findBoneChildren(U,N.id),j=0,z=H.length;j<z;j++){var G=H[j];this._cacheTransformableMap[G.id]||(this._cacheTransformableMap[G.id]={local:Re({},G.transform),global:Re({},G.globalTransform)});var W=this._cacheTransformableMap[G.id].global,X=vp.transformInvertCross(D,W);r[G.id]={local:X,diffKeys:["x","y"]}}}else for(var K=0,q=n.length;K<q;K++)if(!1===o&&i===Y.POSE)for(var Z=n[K],$=0,Q=Z.length;$<Q;$++){var J=Z[$],ee=this._cacheTransformableMap[J.id].local;l[J.id]&&(ee=l[J.id].local);var te=this._cacheTransformableMap[J.id].global;l[J.id]&&(te=l[J.id].global);var ne=Re({},ee);ne.scaleX*=e.scaleX,ne.scaleY*=e.scaleY;var re=Re({},te);re.scaleX*=e.scaleX,re.scaleY*=e.scaleY,r[J.id]={local:ne,diffKeys:["scaleX","scaleY"]},void 0===l[J.id]&&(l[J.id]={local:ne,global:re}),!1===a&&i===Y.POSE&&u.push(J.id);for(var ie=this.store.getCurArmature(),oe=PT.findBoneChildren(ie,J.id),ae=0,se=oe.length;ae<se;ae++){var le=oe[ae];this._cacheTransformableMap[le.id]||(this._cacheTransformableMap[le.id]={local:Re({},le.transform),global:Re({},le.globalTransform)});var ue=this._cacheTransformableMap[le.id].global,ce=vp.transformInvertCross(re,ue);l[le.id]={local:Re({},ce),global:Re({},ue)},r[le.id]={local:ce,diffKeys:["scaleX","scaleY"]}}}else{var he=n[K][0],de=Re({},this._cacheTransformableMap[he.id].local),fe=[];for(var pe in e)switch(fe.push(pe),pe){case"scaleX":case"scaleY":de[pe]*=e[pe];break;case"skewX":case"skewY":de[pe]+=e[pe],de[pe]=vp.normalizeRadian(de[pe])}if(r[he.id]={local:de,diffKeys:fe},!1===a&&i===Y.POSE){var ve=Re({},this._cacheTransformableMap[he.id].global);ve.scaleX*=e.scaleX,ve.scaleY*=e.scaleY,l[he.id]={local:Re({},de),global:Re({},ve)},u.push(he.id)}}if(h=!0,this.store.dispatch(V.UPDATE_LOCAL_TRANSFORMS,r),!1===a&&i===Y.POSE&&u.length){for(var me={},ge=!1,ye=0,be=u.length;ye<be;ye++)for(var _e=u[ye],xe=l[_e].global,Ee=PT.findBoneSlots(s,_e),we=0,Te=Ee.length;we<Te;we++){var Se=Ee[we],ke=PT.getSlotCurDisplay(Se);if(ke){this._cacheTransformableMap[Se.id]||(this._cacheTransformableMap[Se.id]={local:Re({},ke.transform),global:Re({},ke.globalTransform)});var Ce=this._cacheTransformableMap[Se.id].global,Ae=vp.transformInvertCross(xe,Ce);me[Se.id]={local:Ae,global:Ce},ge=!0}}ge&&this.store.dispatch(F.UPDATE_LOCAL_TRANSFORMS,me)}}if(c&&c.length){for(var Ie={},Oe=0,Pe=c.length;Oe<Pe;Oe++){var Me=c[Oe];if(this._cacheTransformableMap[Me.id]){var Ne=Re({},this._cacheTransformableMap[Me.id].global);for(var De in e)switch(De){case"x":case"y":case"skewX":case"skewY":Ne[De]+=e[De];break;case"rotation":Ne.skewX+=e[De],Ne.skewY+=e[De];break;case"scaleX":case"scaleY":Ne[De]*=e[De]}var Le=PT.getSlotLocalTransformByGlobal(Me,s,i,Ne);Ie[Me.id]={local:Le,global:Ne},h=!0}}h&&this.store.dispatch(F.UPDATE_LOCAL_TRANSFORMS,Ie)}return h}}]),e}();var lC={getBoneTransformable:function(e){var t=e.globalTransform||e.transform;return{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleX,rotation:0,skewX:t.skewX,skewY:t.skewY,width:0,height:0,pivotX:0,pivotY:0,anchorX:0,anchorY:0}},getSlotTransformable:function(e){if(e.displays){var t=e.displays.ids[e.displayIndex],n=e.displays.map[t];if(n){var r=n.globalTransform||n.transform,i=n.width,o=n.height;return n.mesh&&n.type===T.MESH&&(i=0,o=0),{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleX,rotation:0,skewX:r.skewX,skewY:r.skewY,width:i,height:o,pivotX:0,pivotY:0,anchorX:0,anchorY:0}}}return{x:0,y:0,scaleX:1,scaleY:1,rotation:0,skewX:0,skewY:0,width:0,height:0,pivotX:0,pivotY:0,anchorX:0,anchorY:0}}},uC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._helpPoint0=new bg,e._helpPoint1=new bg,e.cameraTransform=void 0,e.transformController=new zk,e.transformProxy=new sC,e.transformHandler=void 0,e.type=void 0,e.controlKey=void 0,e._pivotEnable=!0,e._notHistoryMerge=!1,e.curHandler=void 0,e.bindViewHandlerMap={},e.onWindowMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;if(e._notHistoryMerge||(e.model.historyBeginMerge(),e._notHistoryMerge=!0,Hk.getInstance(Hk).overEnable=!1),e.transformHandler)switch(e.transformController.updateTransform(n,r,t),e.type){case jk.SCALE_X:e.transformHandler.offScaleX=e.transformController.offsetScaleX;break;case jk.SCALE_Y:e.transformHandler.offScaleY=e.transformController.offsetScaleY;break;case jk.SCALE:e.transformHandler.offScaleX=e.transformController.offsetScaleX,e.transformHandler.offScaleY=e.transformController.offsetScaleX}},e.onWindowUp=function(t){t.stopImmediatePropagation();var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;if(e.transformController.endTransform(n,r),e.transformProxy.endTransform(),window.removeEventListener("mousemove",e.onWindowMove),window.removeEventListener("mouseup",e.onWindowUp),window.removeEventListener("keydown",e.onKeyDown),window.removeEventListener("keyup",e.onKeyUp),e._notHistoryMerge&&(e._notHistoryMerge=!1,e.model.historyEndMerge(),Hk.getInstance(Hk).overEnable=!0),e.model.commit(V.TRANSFORM_END),e.transformHandler){switch(e.type){case jk.SCALE_X:e.transformHandler.offScaleX=1;break;case jk.SCALE_Y:e.transformHandler.offScaleY=1;break;case jk.SCALE:e.transformHandler.offScaleX=1,e.transformHandler.offScaleY=1}e.type=void 0}},e.onKeyDown=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift||(e.controlKey.shift=!0,n=!0);break;case 17:e.controlKey.ctrl||(e.controlKey.ctrl=!0,n=!0);break;case 18:e.controlKey.alt||(e.controlKey.alt=!0,n=!0);break;case 91:e.controlKey.meta||(e.controlKey.meta=!0,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.onKeyUp=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift&&(e.controlKey.shift=!1,n=!0);break;case 17:e.controlKey.ctrl&&(e.controlKey.ctrl=!1,n=!0);break;case 18:e.controlKey.alt&&(e.controlKey.alt=!1,n=!0);break;case 91:e.controlKey.meta&&(e.controlKey.meta=!1,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.asyncProxyTransform=function(){var t=e.store.state.runtime.editing.selectedBoneIds,n=e.store.state.runtime.editing.selectedSlotIds;if(t.length){var r=e.store.getBoneById(t[0]);e.transformProxy.setValue(lC.getBoneTransformable(r)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else if(n.length){var i=e.store.getSlotById(n[0]);e.transformProxy.setValue(lC.getSlotTransformable(i)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}},e.onSWitchMode=function(t){e.onSelectChange(),e.onUpdateAnimationTransform(t)},e.onUpdateAnimationTransform2=function(t){var n,r;"undo"!==(null===t||void 0===t||null===(n=t.data)||void 0===n?void 0:n.from)&&"redo"!==(null===t||void 0===t||null===(r=t.data)||void 0===r?void 0:r.from)||e.onUpdateAnimationTransform(t)},e.onUpdateAnimationTransform=function(t){e.cameraTransform&&e.transformHandler&&(e.asyncProxyTransform(),e.transformHandler.updateTarget())},e.onUpdateBoneTransform=function(t){e.cameraTransform&&e.transformHandler&&e.transformHandler.updateTarget()},e.onUpdateCameraTransform=function(t){if(e.cameraTransform&&e.transformHandler){var n=e.store.state.editor.stage;switch(t.type){case X.UPDATE_SCALE:e.cameraTransform.scale.set(n.scale,n.scale);break;case X.UPDATE_POSITION:e.cameraTransform.position.set(n.x,n.y)}e.transformHandler.updateTarget()}},e.onSelectChange=function(){var t=e.store.state.runtime.editing.selectedBoneIds,n=[];if(e.store.state.runtime.editing.editMode===Y.POSE&&(n=e.store.state.runtime.editing.selectedSlotIds),e.stopTransform(),t.length+n.length>=1){e.startTransform();var r=e.store.getCurArmature();if(t.length){var i;if(t.length>1)i=PT.getBoneChains(r,t)[0][0];else i=e.store.getBoneById(t[0]);e.transformProxy.setValue(lC.getBoneTransformable(i)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else{var o=e.store.getSlotById(n[0]);e.transformProxy.setValue(lC.getSlotTransformable(o)),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}}else e.transformHandler&&(e.transformHandler.target=void 0)},e.onUpdateSlot=function(t){var n=!1;if(t.data.slots)for(var r in t.data.slots){if(void 0!==t.data.slots[r].displayIndex){n=!0;break}}n&&e.onSelectChange()},e.transformController.target=e.transformProxy,e.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},e}return f(n,[{key:"pivotEnable",get:function(){return this._pivotEnable},set:function(e){this._pivotEnable!==e&&(this._pivotEnable=e,this.transformHandler&&(this.transformHandler.pivotHandler.interactive=this._pivotEnable))}},{key:"start",value:function(){this._addNotification(G.SELECT_BONES,this.onSelectChange),this._addNotification(B.SELECT_SLOTS,this.onSelectChange),this._addNotification(B.UPDATE_PROPERTIES,this.onUpdateSlot),this._addNotification(D.SELECT_ARMATURE,this.onSelectChange),this._addNotification(B.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(G.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(j.SET_PARENT,this.onUpdateAnimationTransform),this._addNotification(j.SELECT_DISPLAY,this.onSelectChange),this._addNotification(X.UPDATE_POSITION,this.onUpdateCameraTransform),this._addNotification(X.UPDATE_SCALE,this.onUpdateCameraTransform),this._addNotification(G.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(G.UPDATE_IK,this.onUpdateAnimationTransform),this._addNotification(P.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimationTransform),this._addNotification(G.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(B.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._addNotification(M.MODIFY_FRAMES,this.onUpdateAnimationTransform2),this._addNotification(W.SWITCH_MODE,this.onSWitchMode);var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.state.runtime.editing.selectedSlotIds;(e.length||t.length)&&this.onSelectChange()}},{key:"stop",value:function(){this._removeNotification(G.SELECT_BONES,this.onSelectChange),this._removeNotification(B.SELECT_SLOTS,this.onSelectChange),this._removeNotification(B.UPDATE_PROPERTIES,this.onUpdateSlot),this._removeNotification(D.SELECT_ARMATURE,this.onSelectChange),this._removeNotification(j.SELECT_DISPLAY,this.onSelectChange),this._removeNotification(X.UPDATE_POSITION,this.onUpdateCameraTransform),this._removeNotification(X.UPDATE_SCALE,this.onUpdateCameraTransform),this._removeNotification(G.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(P.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimationTransform),this._removeNotification(G.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(B.UPDATE_LOCAL_TRANSFORMS,this.onUpdateAnimationTransform),this._removeNotification(W.SWITCH_MODE,this.onSWitchMode),this.stopTransform()}},{key:"startTransform",value:function(){this.transformHandler=this.view.transformHandler,this.cameraTransform=this.transformHandler.cameraTransform,this.transformProxy.store=this.store,this.resetCameraTransform(),this.bindHandler(),this.updateDisplays()}},{key:"stopTransform",value:function(){this.unBindHandler(),this.transformHandler&&(Pk.setCursor(Ok.auto),this.transformHandler.target=void 0,this.transformHandler=void 0),this.cameraTransform=void 0,this.transformProxy.store=void 0}},{key:"updateDisplays",value:function(){}},{key:"getViewStage",value:function(){if(this.view)for(var e=this.view;e;){if(!e.parent)return e;e=e.parent}}},{key:"bindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.bindView(e,jk.ROTATION),this.bindView(this.transformHandler.moveXHandler,jk.X),this.bindView(this.transformHandler.moveYHandler,jk.Y),this.bindView(this.transformHandler.moveHandler,jk.XY),this.bindViewDoubleClick(this.transformHandler.moveHandler),this.bindView(this.transformHandler.scaleXHandler,jk.SCALE_X),this.bindView(this.transformHandler.scaleYHandler,jk.SCALE_Y),this.bindView(this.transformHandler.scaleHandler,jk.SCALE),this.bindView(this.transformHandler.rotationHandler,jk.ROTATION),this.bindView(this.transformHandler.pivotHandler,jk.PIVOT),this.bindView(this.transformHandler.scaleLeftTop,jk.SCALE_LEFT_TOP),this.bindView(this.transformHandler.scaleLeftBottom,jk.SCALE_LEFT_BOTTOM),this.bindView(this.transformHandler.scaleLeftMiddle,jk.SCALE_LEFT_MIDDLE),this.bindView(this.transformHandler.scaleRightBottom,jk.SCALE_RIGHT_BOTTOM),this.bindView(this.transformHandler.scaleRightMiddle,jk.SCALE_RIGHT_MIDDLE),this.bindView(this.transformHandler.scaleRightTop,jk.SCALE_RIGHT_TOP),this.bindView(this.transformHandler.scaleCenterBottom,jk.SCALE_CENTER_BOTTOM),this.bindView(this.transformHandler.scaleCenterTop,jk.SCALE_CENTER_TOP),this.bindNotification(X.SELECT_MOVE_START,jk.XY)}}},{key:"unBindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.unBindView(e),this.unBindView(this.transformHandler.moveXHandler),this.unBindView(this.transformHandler.moveYHandler),this.unBindView(this.transformHandler.moveHandler),this.unBindView(this.transformHandler.scaleXHandler),this.unBindView(this.transformHandler.scaleYHandler),this.unBindView(this.transformHandler.scaleHandler),this.unBindView(this.transformHandler.rotationHandler),this.unBindView(this.transformHandler.pivotHandler),this.unbindNotification(X.SELECT_MOVE_START)}window.removeEventListener("mousemove",this.onWindowMove),window.removeEventListener("mouseup",this.onWindowUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"bindNotification",value:function(e,t){this._addNotification(e,this.transformXYNotication)}},{key:"transformXYNotication",value:function(){}},{key:"unbindNotification",value:function(e){this._removeNotification(e,this.transformXYNotication)}},{key:"bindViewDoubleClick",value:function(e){var t=0;e.on("mousedown",(function(n){n.stopPropagation(),t++,setTimeout((function(){t>0&&t--}),200),t>=2&&(e.emit("dblclick"),t=0)}))}},{key:"viewMouseDownHandler",value:function(e){if(!e.ctrlKey&&!e.metaKey&&this._enable){var t=e.currentTarget.transformType;e.stopPropagation(),this.type=t,this.model.commit(V.UPDATE_TRANSFORM_SHELL),this.model.commit(V.TRANSFORM_START),this.asyncProxyTransform(),this.transformController.beginTransform(this.model.state.editor.stage.mouseStageX,this.model.state.editor.stage.mouseStageY,t),this.transformProxy.beginTransform(),window.addEventListener("mousemove",this.onWindowMove),window.addEventListener("mouseup",this.onWindowUp),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)}}},{key:"bindView",value:function(e,t){e.transformType=t,this.unBindView(e),e.on("mousedown",this.viewMouseDownHandler,this)}},{key:"unBindView",value:function(e){e.off("mousedown",this.viewMouseDownHandler,this)}},{key:"resetCameraTransform",value:function(){if(this.cameraTransform){var e=this.store.state.editor.stage;this.cameraTransform.scale.set(e.scale,e.scale),this.cameraTransform.position.set(e.x,e.y)}}}],[{key:"toString",value:function(){return"BoneSlotTransformController"}}]),n}(Uk),cC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._transformed=!1,e._hideAllBone=!1,e}return f(n,[{key:"start",value:function(){this.view&&(this.view.setBones(this.getCurBones()),this.refreshIk(),this.onHideBone()),this._addNotification(D.SELECT_ARMATURE,this.onArmatureChange),this._addNotification(G.ADD_BONE,this.onArmatureChange),this._addNotification(G.DELETE_BONES,this.onArmatureChange),this._addNotification(G.SET_PARENT,this.onArmatureChange),this._addNotification(G.OVER_BONE,this.refreshOver),this._addNotification(G.SELECT_BONES,this.refreshSelected),this._addNotification(B.SELECT_SLOTS,this.refreshColor),this._addNotification(H.UPDATE_RIG_BONE,this.refreshColor),this._addNotification(G.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(G.UPDATE_PROPERTIES,this.refreshBone),this._addNotification(V.TRANSFORM_START,this.onStartTransform),this._addNotification(V.TRANSFORM_END,this.onEndTranform),this._addNotification(P.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimatedProperty),this._addNotification(M.AUTO_KEY,this.onUpdateAnimatedProperty),this._addNotification(G.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimatedProperty),this._addNotification(M.MODIFY_FRAMES,this.onRerenderBone),this._addNotification(M.MODIFY_TIMELINE,this.onRerenderBone),this._addNotification(W.SWITCH_MODE,this.onSwitchMode),this._addNotification(M.SELECT_ANIMATION,this.onSwitchMode),this._addNotification(X.HIDE_ITEMS,this.onHideBone),this._addNotification(W.CHANGE_BONE_SLOT_CONTROL,this.onChangeBoneSlotControl),this._addNotification(G.ADD_IK,this.refreshIk),this._addNotification(G.DELETE_IKS,this.refreshIk),this._addNotification(G.UPDATE_IK,this.refreshIk),this._addNotification(G.UPDATE_CACHE_IK,this.refreshIk),this._addNotification(W.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(W.SWITCH_TOOL,this.onUpdateMeshTool),this._addNotification(W.SELECT_RIGGING_BONE,this.onSelectRiggingBone)}},{key:"stop",value:function(){this.view&&(this.view.bones=[]),this._removeNotification(D.SELECT_ARMATURE,this.onArmatureChange),this._removeNotification(G.ADD_BONE,this.onArmatureChange),this._removeNotification(G.DELETE_BONES,this.onArmatureChange),this._removeNotification(G.SET_PARENT,this.onArmatureChange),this._removeNotification(G.OVER_BONE,this.refreshOver),this._removeNotification(G.SELECT_BONES,this.refreshSelected),this._removeNotification(B.SELECT_SLOTS,this.refreshColor),this._removeNotification(H.UPDATE_RIG_BONE,this.refreshColor),this._removeNotification(G.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._removeNotification(G.UPDATE_PROPERTIES,this.refreshBone),this._removeNotification(V.TRANSFORM_START,this.onStartTransform),this._removeNotification(V.TRANSFORM_END,this.onEndTranform),this._removeNotification(P.UPDATE_ANIMATED_PROPERTY,this.onUpdateAnimatedProperty),this._removeNotification(M.AUTO_KEY,this.onUpdateAnimatedProperty),this._removeNotification(G.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimatedProperty),this._removeNotification(W.SWITCH_MODE,this.onSwitchMode),this._removeNotification(M.SELECT_ANIMATION,this.onSwitchMode),this._removeNotification(X.HIDE_ITEMS,this.onHideBone),this._removeNotification(W.CHANGE_BONE_SLOT_CONTROL,this.onChangeBoneSlotControl),this._removeNotification(G.ADD_IK,this.refreshIk),this._removeNotification(G.DELETE_IKS,this.refreshIk),this._removeNotification(G.UPDATE_IK,this.refreshIk),this._removeNotification(G.UPDATE_CACHE_IK,this.refreshIk),this._removeNotification(W.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._removeNotification(W.SWITCH_TOOL,this.onUpdateMeshTool),this._removeNotification(W.SELECT_RIGGING_BONE,this.onSelectRiggingBone)}},{key:"onEndTranform",value:function(e){this.view.startOvercheck()}},{key:"onStartTransform",value:function(e){this.view.stopOverCheck()}},{key:"hideAllBone",set:function(e){this._hideAllBone!==e&&(this._hideAllBone=e,this.view&&(this._hideAllBone?this.view.bones=[]:this.view.bones=this.getCurBones()))}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.hideAllBone=!e.deformed&&t===J.MESH_EDIT_TOOL}},{key:"onSwitchMode",value:function(){this.view.refresh()}},{key:"onOverBone",value:function(e){this.store.commit(G.OVER_BONE,e)}},{key:"onArmatureChange",value:function(){this.view&&(this.view.setBones(this.getCurBones()),this.refreshIk())}},{key:"onOutBone",value:function(e){this.store.commit(G.OVER_BONE,0)}},{key:"onRerenderBone",value:function(e){var t,n;"undo"!==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.from)&&"redo"!==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.from)||(this.calculateRenderProperty(),this.refreshIk())}},{key:"onUpdateAnimatedProperty",value:function(e){var t,n;"undo"!==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.from)&&"redo"!==(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.from)||this.calculateRenderProperty(),this.refreshIk()}},{key:"onSelectRiggingBone",value:function(){var e=this.store.state.runtime.editing.riggingSelectedBoneId,t=[];if(e){var n=this.store.getCurArmature(),r=this.store.state.runtime.editing.selectedSlotIds[0],i=n.slots.map[r],o=PT.getSlotCurDisplay(i);if(o&&o.mesh&&o.mesh.bonePose)for(var a in o.mesh.bonePose)t.push(parseInt(a))}this.view.riggingBoneIds=t,this.view.selectedRiggingBoneId=e}},{key:"refreshColor",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds;if(0===this.store.state.runtime.editing.selectedBoneIds.length&&1===e.length){var t=this.store.getCurArmature().slots.map[e[0]],n=PT.getSlotCurDisplay(t);if(n&&n.mesh&&n.mesh.bonePose)return void this.view.refreshColor(n.mesh.bonePose)}this.view.refreshColor(void 0)}},{key:"refreshOver",value:function(){var e=this.store.state.editor.over.overBone;this.view.overBoneId=e}},{key:"onChangeBoneSlotControl",value:function(e){"boneVisible"===e.data.property&&this.onHideBone()}},{key:"onHideBone",value:function(){if(this.store.state.runtime.editing.boneSlotControl.boneVisible)this.view.hideBoneIds=this.store.state.runtime.editing.hideBoneSlotIds;else{var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];this.view.hideBoneIds=t.bones.ids}}},{key:"refreshSelected",value:function(){this._transformed=!1;var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedBoneIds,n=[],r=e.constraint.ik;for(var i in r){var o=r[i];if(o){var a=!1;o.childId&&t.indexOf(o.childId)>=0&&(a=!0),t.indexOf(o.parentId)>=0&&(a=!0),t.indexOf(o.targetId)>=0&&(a=!0),a&&1!==o.weight&&(n.push(o.parentId),o.childId&&n.push(o.childId))}}this.view.selectedIkBoneIds=n,this.view.selectedBoneIds=t}},{key:"refreshTransform",value:function(){this._transformed=!0,this.view.refresh()}},{key:"refreshIk",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedBoneIds,n=e.constraint.ik,r=[],i=[],o=[];for(var a in n){var s=n[a];if(s){var l=!1;s.childId&&(r.push(s.childId),t.indexOf(s.childId)>=0&&(l=!0)),r.push(s.parentId),t.indexOf(s.parentId)>=0&&(l=!0),i.push(s.targetId),t.indexOf(s.targetId)>=0&&(l=!0),l&&1!==s.weight&&(o.push(s.parentId),s.childId&&o.push(s.childId))}}this.view.ikBoneIds=r,this.view.ikTargetBoneIds=i,this.view.selectedIkBoneIds=o,this.view.refresh()}},{key:"refreshBone",value:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.bones,r=!1;if(n)for(var i in n){var o=n[i];void 0===o.inheritRotation&&void 0===o.inheritScale||(r=!0)}r?this.view.refresh():this.view.refreshBones()}},{key:"mouseDown",value:function(){this._transformed=!1;var e=this.store.state.editor.over.overBone;e>0&&this.store.dispatch(V.SELECT_ONE_BONE,[e])}},{key:"getCurBones",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];return t?BT.getArrayFromMap(t.bones):[]}},{key:"calculateRenderProperty",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.editing.selectedAnimationId,n=this.store.state.editor.dopesheet.curTime,r=this.store.state.runtime.editing.editMode,i=this.store.state.runtime.dragonbones.armatureMap[e],o=this.store.state.runtime.dragonbones.animationMap[t];PT.updateArmatureAnimationPropertyAndGlobalTransform(i,r,o,n)}}],[{key:"toString",value:function(){return"StageBoneController"}}]),n}(Uk),hC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).cameraTransform={x:0,y:0,scaleX:1,scaleY:1,skewX:0,skewY:0},e.slotTransform=void 0,e.globalTransform=void 0,e._displayData=void 0,e._meshGraphics=void 0,e._meshBorderGraphics=void 0,e._overPointIndex="",e._overLine=void 0,e._selectedPointIndices=[],e._uvEditMode=!1,e._meshTool=void 0,e.pointPosMap={},e._limitBorder=void 0,e._addPointPreview=void 0,e._deletePointIndex=void 0,e._deleteUserEdge=void 0,e._drawOutlines=void 0,e._addOutlinePoint=void 0,e.editMode=void 0,e._weightMode=void 0,e.init(),e}return f(n,[{key:"setScale",value:function(e){this.cameraTransform.scaleX=e,this.cameraTransform.scaleY=e,this.refresh()}},{key:"setCenter",value:function(e,t){this.cameraTransform.x=e,this.cameraTransform.y=t,this.refresh()}},{key:"resizeStage",value:function(e,t){}},{key:"setMeshEditTool",value:function(e){this._meshTool=e,this._uvEditMode=e&&!e.deformed}},{key:"meshEditTool",set:function(e){this._meshTool=e,this._uvEditMode=e&&!e.deformed,this.refresh()}},{key:"setWeightMode",value:function(e){this._weightMode!==e&&(this._weightMode=e)}},{key:"weightMode",set:function(e){this._weightMode!==e&&(this._weightMode=e,this.refresh())}},{key:"display",set:function(e){this._displayData!==e&&(e&&e.type===T.MESH?this._displayData=e:this._displayData=void 0,this.refresh())}},{key:"selectedPoints",set:function(e){this._selectedPointIndices=e,this.refresh()}},{key:"overPointIndex",set:function(e){this._overPointIndex!==e&&(this._overPointIndex=e,this.refresh())}},{key:"overLine",set:function(e){(this._overLine||e)&&(this._overLine&&e&&this._overLine[0]===e[0]&&this._overLine[1]===e[1]||(this._overLine=e,this.refresh()))}},{key:"addPointPreview",set:function(e){this._addPointPreview!==e&&(this._addPointPreview=e,this.drawAddPointPreview())}},{key:"deleteUserEdge",set:function(e){this._deleteUserEdge=e,this.refresh()}},{key:"deletePointIndex",set:function(e){this._deletePointIndex=e,this.refresh()}},{key:"setDrawOutlines",value:function(e,t){this._drawOutlines=e,this._addOutlinePoint=t,this.refresh()}},{key:"drawPreviewLine",value:function(e,t){var n=vp.transformApplyPoint(this.globalTransform,e),r=vp.transformApplyPoint(this.globalTransform,t);this._meshBorderGraphics.lineStyle(1,yp.MESH_USER_LINE_NORMAL,1),this._meshBorderGraphics.moveTo(n.x,n.y),this._meshBorderGraphics.lineTo(r.x,r.y)}},{key:"refresh",value:function(){this._meshGraphics.clear(),this._meshBorderGraphics.clear(),this._displayData&&(this.updateMeshGlobalTransform(),this._drawOutlines?this.drawCustomOutlines():(this._uvEditMode?this.drawUVEditMesh():this.drawVertexEditMesh(),this._limitBorder?this.drawLimitUVBorder():this.drawAddPointPreview()))}},{key:"drawVertexEditMesh",value:function(){this._meshGraphics.clear(),this.updatePointPosition(),this._meshTool&&this.drawLines(),this.drawOutline(),this.drawUserLine(),this.drawUVPoints()}},{key:"drawUVEditMesh",value:function(){this._meshGraphics.clear(),this.updatePointPosition(),this.drawBorder(),this.drawLines(),this.drawOutline(),this.drawUserLine(),this.drawUVPoints()}},{key:"updateMeshGlobalTransform",value:function(){var e=Re({},this._displayData.globalTransform);this._uvEditMode&&(e.skewX=0,e.skewY=0,e.scaleX=1,e.scaleY=1),this.globalTransform=vp.transformCross(this.cameraTransform,e)}},{key:"updatePointPosition",value:function(){var e=this._displayData.mesh;if(!this._displayData.width||!this._displayData.height)throw new Error("mesh width or height is 0");for(var t in e.points){if(e.points[t]){var n=e.points[t];if(n){var r=n.vertices[0],i=n.vertices[1];e.riggingFFD&&e.riggingFFD[t]?(r=e.riggingFFD[t][0],i=e.riggingFFD[t][1]):this.editMode===Y.ANIMATION&&(e.cacheFFD&&e.cacheFFD[t]?(r=e.cacheFFD[t][0],i=e.cacheFFD[t][1]):e.animatedFFD&&e.animatedFFD[t]&&(r=e.animatedFFD[t][0],i=e.animatedFFD[t][1])),this._uvEditMode&&(r=(n.uvs[0]-.5)*this._displayData.width,i=(n.uvs[1]-.5)*this._displayData.height);var o=vp.transformApplyPoint(this.globalTransform,{x:r,y:i});this.pointPosMap[t]=o}}}}},{key:"drawBorder",value:function(){if(this._displayData.width&&this._displayData.height){var e=this._displayData.width/2,t=this._displayData.height/2,n=vp.transformApplyPoint(this.globalTransform,{x:-e,y:-t}),r=vp.transformApplyPoint(this.globalTransform,{x:e,y:-t}),i=vp.transformApplyPoint(this.globalTransform,{x:e,y:t}),o=vp.transformApplyPoint(this.globalTransform,{x:-e,y:t});this._meshGraphics.lineStyle(1,yp.MESH_LINE_BORDER,1),this._meshGraphics.moveTo(n.x,n.y),this._meshGraphics.lineTo(r.x,r.y),this._meshGraphics.lineTo(i.x,i.y),this._meshGraphics.lineTo(o.x,o.y),this._meshGraphics.lineTo(n.x,n.y)}}},{key:"drawUVPoints",value:function(){var e=this._displayData.mesh;for(var t in e.points){if(e.points[t]){var n=this.pointPosMap[t];if(n){var r=yp.MESH_POINT_NORMAL,i=5,o=1;this._selectedPointIndices.length>0&&(o=.5),this._selectedPointIndices&&this._selectedPointIndices.indexOf(t)>=0?(r=yp.MESH_POINT_SELECTED,i=10,o=1):this._overPointIndex===t||this._overLine&&this._overLine.indexOf(parseInt(t))>=0?(r=yp.MESH_POINT_OVER,i=7,o=.7):this._deletePointIndex===parseInt(t)&&(r=yp.MESH_POINT_DELETE),e.bonePose&&e.boneWeights&&this._weightMode?this.drawRiggingPoint(n,e.boneWeights[t],e.bonePose,i,o):this.drawOnePoint(n,r,5,1)}}}}},{key:"drawLines",value:function(){for(var e=this,t=this._displayData.mesh,n=function(t,n){var r=yp.MESH_LINE_AUTO,i=1;e._selectedPointIndices&&e._selectedPointIndices.indexOf(t.toString())>=0&&e._selectedPointIndices.indexOf(n.toString())>=0?(r=yp.MESH_LINE_SELECTED,i=2):e._overLine&&e._overLine.indexOf(t)>=0&&e._overLine.indexOf(n)>=0&&(r=yp.MESH_LINE_OVER,i=2),e.drawOneLine(e.pointPosMap[t],e.pointPosMap[n],r,i,1)},r=0,i=t.triangles.length;r<i;r+=3){var o=t.triangles[r],a=t.triangles[r+1],s=t.triangles[r+2];n(o,a),n(a,s),n(s,o)}}},{key:"drawOutline",value:function(){for(var e=this._displayData.mesh,t=0,n=e.outlines.length;t<n;t+=2){var r=e.outlines[t],i=e.outlines[t+1],o=this.pointPosMap[r],a=this.pointPosMap[i],s=yp.MESH_OUTLINE_NORMAL,l=1;this._selectedPointIndices&&this._selectedPointIndices.indexOf(r.toString())>=0&&this._selectedPointIndices.indexOf(i.toString())>=0?(s=yp.MESH_OUTLINE_SELECTED,l=2):this._overLine&&this._overLine.indexOf(r)>=0&&this._overLine.indexOf(i)>=0&&(s=yp.MESH_OUTLINE_OVER,l=2),void 0===this._deletePointIndex||this._deletePointIndex!==r&&this._deletePointIndex!==i||(s=yp.MESH_LINE_DELETE,l=2),this.drawOneLine(o,a,s,l,1)}}},{key:"drawUserLine",value:function(){for(var e=this._displayData.mesh,t=0,n=e.userEdges.length;t<n;t+=2){var r=e.userEdges[t],i=e.userEdges[t+1],o=this.pointPosMap[r],a=this.pointPosMap[i],s=yp.MESH_USER_LINE_NORMAL,l=1;this._selectedPointIndices&&this._selectedPointIndices.indexOf(r.toString())>=0&&this._selectedPointIndices.indexOf(i.toString())>=0?(s=yp.MESH_USER_LINE_SELECTED,l=2):this._overLine&&this._overLine.indexOf(r)>=0&&this._overLine.indexOf(i)>=0&&(s=yp.MESH_USER_LINE_OVER,l=2),this._deleteUserEdge&&kk.isLineEqual([r,i],this._deleteUserEdge)?(s=yp.MESH_LINE_DELETE,l=2):void 0===this._deletePointIndex||this._deletePointIndex!==r&&this._deletePointIndex!==i||(s=yp.MESH_LINE_DELETE,l=2),this.drawOneLine(o,a,s,l,1)}}},{key:"drawOneLine",value:function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;this._meshGraphics.lineStyle(r,n,i),this._meshGraphics.moveTo(e.x,e.y),this._meshGraphics.lineTo(t.x,t.y)}},{key:"drawOnePoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this._meshGraphics;i.lineStyle(0,t,1),i.beginFill(t,r),i.drawCircle(e.x,e.y,n),i.endFill()}},{key:"init",value:function(){var e=new iw;this.addChild(e),this._meshGraphics=e,this._meshBorderGraphics=new iw,this.addChild(this._meshBorderGraphics)}},{key:"updateBorder",value:function(e){this._limitBorder=e,this.drawLimitUVBorder()}},{key:"drawLimitUVBorder",value:function(){if(this._meshBorderGraphics.clear(),this._limitBorder){var e=this._limitBorder,t=vp.transformApplyPoint(this.globalTransform,{x:e[0][0],y:e[0][1]}),n=vp.transformApplyPoint(this.globalTransform,{x:e[1][0],y:e[1][1]}),r=vp.transformApplyPoint(this.globalTransform,{x:e[2][0],y:e[2][1]}),i=vp.transformApplyPoint(this.globalTransform,{x:e[3][0],y:e[3][1]});this._meshBorderGraphics.lineStyle(1,yp.MESH_LINE_BORDER,1),this._meshBorderGraphics.moveTo(t.x,t.y),this._meshBorderGraphics.lineTo(n.x,n.y),this._meshBorderGraphics.lineTo(r.x,r.y),this._meshBorderGraphics.lineTo(i.x,i.y),this._meshBorderGraphics.lineTo(t.x,t.y)}}},{key:"drawAddPointPreview",value:function(){if(this._meshBorderGraphics.clear(),this._addPointPreview){var e=vp.transformApplyPoint(this.globalTransform,this._addPointPreview);this.drawOnePoint(e,yp.MESH_POINT_ADD,5,1,this._meshBorderGraphics)}}},{key:"drawCustomOutlines",value:function(){this._meshGraphics.clear(),this.drawBorder();for(var e=0,t=this._drawOutlines.length-2;e<t;e+=2){var n=this._drawOutlines[e],r=this._drawOutlines[e+1],i=this._drawOutlines[e+2],o=this._drawOutlines[e+3],a=vp.transformApplyPoint(this.globalTransform,{x:n,y:r}),s=vp.transformApplyPoint(this.globalTransform,{x:i,y:o}),l=yp.MESH_OUTLINE_NORMAL;this.drawOneLine(a,s,l,1,1);0===e&&this.drawOnePoint(a,l,5),this.drawOnePoint(s,l,5)}var u=vp.transformApplyPoint(this.globalTransform,{x:this._addOutlinePoint[0],y:this._addOutlinePoint[1]});if(this.drawOnePoint(u,yp.MESH_POINT_ADD,5),this._drawOutlines.length>0){var c=this._drawOutlines[this._drawOutlines.length-2],h=this._drawOutlines[this._drawOutlines.length-1],d=vp.transformApplyPoint(this.globalTransform,{x:c,y:h});this.drawOneLine(d,u,yp.MESH_USER_LINE_NORMAL,1,1)}if(this._drawOutlines.length>1){var f=this._drawOutlines[0],p=this._drawOutlines[1],v=vp.transformApplyPoint(this.globalTransform,{x:f,y:p});this.drawOneLine(v,u,yp.MESH_LINE_NORMAL,1,1)}}},{key:"drawRiggingPoint",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,i=arguments.length>4?arguments[4]:void 0;if(t&&n){var o=0;for(var a in t){var s=t[a],l=n[a].color;s<=0||(this.drawSector(e.x,e.y,r,s,o,l,i),o+=s)}}}},{key:"drawSector",value:function(e,t,n,r,i,o){var a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=this._meshGraphics;s.beginFill(o,a),s.lineStyle(0,o,0),s.moveTo(e,t),r*=360,i=360*i-90,r=Math.abs(r)>360?360:r;var l,u,c,h,d,f,p=Math.ceil(Math.abs(r)/45),v=r/p;for(v=v*Math.PI/180,i=i*Math.PI/180,s.lineTo(e+n*Math.cos(i),t+n*Math.sin(i)),l=1;l<=p;l++)u=(i+=v)-v/2,c=e+n/Math.cos(v/2)*Math.cos(u),h=t+n/Math.cos(v/2)*Math.sin(u),d=e+n*Math.cos(i),f=t+n*Math.sin(i),s.quadraticCurveTo(c,h,d,f);360!=r&&s.lineTo(e,t),s.endFill()}}]),n}(c_),dC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._outline=void 0,e._rankOutline=void 0,e._previewPoint=void 0,e._overPointId=void 0,e._overOutlineId=void 0,e._overUserEdgeId=void 0,e._downPoint=void 0,e._lineStartId=void 0,e.onMouseDown=function(t){if(e._previewPoint){var n=void 0;if(e._overOutlineId){var r=e._display.mesh.points[e._overOutlineId[0]],i=e._display.mesh.points[e._overOutlineId[1]],o=[r.vertices[0],r.vertices[1]],a=[i.vertices[0],i.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getPointByAnother(o,a,[e._previewPoint.x,e._previewPoint.y],r.uvs,i.uvs)}else if(e._overUserEdgeId){var s=e._display.mesh.points[e._overUserEdgeId[0]],l=e._display.mesh.points[e._overUserEdgeId[1]],u=[s.vertices[0],s.vertices[1]],c=[l.vertices[0],l.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getPointByAnother(u,c,[e._previewPoint.x,e._previewPoint.y],s.uvs,l.uvs)}else if(void 0===e._overPointId){var h=e.findTriangle([e._previewPoint.x,e._previewPoint.y]);if(!h)throw new Error("can not find triangle");n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getUVsByVertices(e._display.mesh,h,[e._previewPoint.x,e._previewPoint.y])}else e._lineStartId=e._overPointId;n&&e.addPoint({vertices:[e._previewPoint.x,e._previewPoint.y],uvs:n}),e._downPoint=e._previewPoint,e._addNotification(X.MOUSE_UP,e.onMouseUp)}},e.onMouseUp=function(t){if(e._removeNotification(X.MOUSE_UP,e.onMouseUp),e._downPoint&&e._previewPoint){if(!vp.isPointEqual(e._downPoint,e._previewPoint)&&e._previewPoint){var n=void 0,r=void 0;if(e._overOutlineId){var i=e._display.mesh.points[e._overOutlineId[0]],o=e._display.mesh.points[e._overOutlineId[1]],a=[i.vertices[0],i.vertices[1]],s=[o.vertices[0],o.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getPointByAnother(a,s,[e._previewPoint.x,e._previewPoint.y],i.uvs,o.uvs)}else if(e._overUserEdgeId){var l=e._display.mesh.points[e._overUserEdgeId[0]],u=e._display.mesh.points[e._overUserEdgeId[1]],c=[l.vertices[0],l.vertices[1]],h=[u.vertices[0],u.vertices[1]];n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getPointByAnother(c,h,[e._previewPoint.x,e._previewPoint.y],l.uvs,u.uvs)}else if(void 0===e._overPointId){var d=e.findTriangle([e._previewPoint.x,e._previewPoint.y]);if(!d)throw new Error("can not find triangle");n=e.uvEditMode?[e._previewPoint.x/e._display.width+.5,e._previewPoint.y/e._display.height+.5]:kk.getUVsByVertices(e._display.mesh,d,[e._previewPoint.x,e._previewPoint.y])}else r=e._overPointId;var f=void 0;n&&(f={vertices:[e._previewPoint.x,e._previewPoint.y],uvs:n}),e.addPointAndLine(f,e._lineStartId,r),e._previewPoint=void 0}e._downPoint=void 0,e._lineStartId=void 0}},e.onMouseMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.store.getSelectedDisplay(),o=e.getEditGlobalTransform(i),a=vp.transformInverseApplyPoint(o,{x:n,y:r}),s=e._display,l=s.mesh.points,u=s.mesh.outlines,c=s.mesh.userEdges;if(e._overPointId=void 0,e._overOutlineId=void 0,e._overUserEdgeId=void 0,e._previewPoint=void 0,e.view.overLine=void 0,e.view.addPointPreview=void 0,!(a.x<e._aabb.left||a.x>e._aabb.right||a.y<e._aabb.top||a.y>e._aabb.bottom)){for(var h=0,d=e._outline.length;h<d;h+=4){var f={x:e._outline[h],y:e._outline[h+1]},p={x:e._outline[h+2],y:e._outline[h+3]},v=h/2;if(kk.overPoint(a,f,e.overPrecision))return e._overPointId=s.mesh.outlines[v],e._previewPoint=f,e.view.addPointPreview=f,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(kk.overPoint(a,p,e.overPrecision))return e._overPointId=s.mesh.outlines[v+1],e._previewPoint=p,e.view.addPointPreview=p,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(kk.pointNearSegDist(a.x,a.y,f.x,f.y,p.x,p.y,e.overPrecision)){e.view.overLine=[u[h/2],u[h/2+1]];var m=kk.pointProjectEdge(a.x,a.y,f.x,f.y,p.x,p.y);return e._overOutlineId=[s.mesh.outlines[v],s.mesh.outlines[v+1]],e.view.addPointPreview={x:m[0],y:m[1]},e._previewPoint={x:m[0],y:m[1]},void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}if(!e._outline||kk.pointInRankPolygon([a.x,a.y],e._rankOutline)){for(var g=0,y=c.length;g<y;g+=2){var b=c[g],_=c[g+1],x={x:l[b].vertices[0],y:l[b].vertices[1]},E={x:l[_].vertices[0],y:l[_].vertices[1]};if(e.uvEditMode&&(x={x:(l[b].uvs[0]-.5)*s.width,y:(l[b].uvs[1]-.5)*s.height},E={x:(l[_].uvs[0]-.5)*s.width,y:(l[_].uvs[1]-.5)*s.height}),kk.overPoint(a,x,e.overPrecision))return e._overPointId=b,e.view.addPointPreview=x,e._previewPoint=x,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(kk.overPoint(a,E,e.overPrecision))return e._overPointId=_,e.view.addPointPreview=E,e._previewPoint=E,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint));if(kk.pointNearSegDist(a.x,a.y,x.x,x.y,E.x,E.y,e.overPrecision)){var w=kk.pointProjectEdge(a.x,a.y,x.x,x.y,E.x,E.y);return e._overUserEdgeId=[b,_],e.view.overLine=[u[g/2],u[g/2+1]],e.view.addPointPreview={x:w[0],y:w[1]},e._previewPoint={x:w[0],y:w[1]},void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}for(var T in l){var S=l[T];if(S){var k={x:S.vertices[0],y:S.vertices[1]};if(e.uvEditMode&&(k={x:(S.uvs[0]-.5)*s.width,y:(S.uvs[1]-.5)*s.height}),kk.overPoint(a,k,e.overPrecision))return e._overPointId=parseInt(T),e.view.addPointPreview=k,e._previewPoint=k,void(e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint))}}if(e._downPoint){var C=[e._downPoint.x,e._downPoint.y],A=[a.x,a.y];if(e.isCrossOutlineOrUserEdges(s.mesh,C,A,s.width,s.height))return e.view.addPointPreview=void 0,void(e._previewPoint=void 0)}e.view.addPointPreview=a,e._previewPoint=a,e._downPoint&&e.view.drawPreviewLine(e._downPoint,e._previewPoint)}else e.view.addPointPreview=void 0}},e}return f(n,[{key:"start",value:function(){this._addNotification(X.MOUSE_DOWN,this.onMouseDown),this._addNotification(X.MOUSE_MOVE,this.onMouseMove),this._addNotification(H.UPDATE_MESH,this.updateView);var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.updateOutline(),this.onMouseMove(void 0)}},{key:"stop",value:function(){this._overPointId=void 0,this._overOutlineId=void 0,this._overUserEdgeId=void 0,this._previewPoint=void 0,this.view&&(this.view.overLine=void 0,this.view.addPointPreview=void 0),this._removeNotification(X.MOUSE_DOWN,this.onMouseDown),this._removeNotification(X.MOUSE_MOVE,this.onMouseMove),this._removeNotification(H.UPDATE_MESH,this.updateView),this._removeNotification(X.MOUSE_UP,this.onMouseUp)}},{key:"updateView",value:function(){var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.updateOutline(),this.view.refresh()}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===J.MESH_EDIT_TOOL}},{key:"updateAABB",value:function(){var e=this._display,t={top:Number.MAX_VALUE,left:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};if(this.uvEditMode)t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};else for(var n in this._display.mesh.points){var r=this._display.mesh.points[n];r&&(r.vertices[0]<t.left&&(t.left=r.vertices[0]),r.vertices[0]>t.right&&(t.right=r.vertices[0]),r.vertices[1]<t.top&&(t.top=r.vertices[1]),r.vertices[1]>t.bottom&&(t.bottom=r.vertices[1]))}return t.top-=this.overPrecision,t.left-=this.overPrecision,t.right+=this.overPrecision,t.bottom+=this.overPrecision,this._aabb=t,t}},{key:"updateOutline",value:function(){for(var e=this._display,t=e.mesh.points,n=e.mesh.outlines,r=[],i=0,o=n.length;i<o;i+=2){var a=t[n[i]],s=t[n[i+1]];this.uvEditMode?r.push((a.uvs[0]-.5)*e.width,(a.uvs[1]-.5)*e.height,(s.uvs[0]-.5)*e.width,(s.uvs[1]-.5)*e.height):r.push(a.vertices[0],a.vertices[1],s.vertices[0],s.vertices[1])}this._outline=r,this._rankOutline=kk.rankOutlines(r)}},{key:"getEditGlobalTransform",value:function(e){if(this.uvEditMode){var t=Re({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}},{key:"findTriangle",value:function(e){for(var t=this._display,n=t.mesh.points,r=t.mesh.triangles,i=0,o=r.length;i<o;i+=3){var a=n[r[i]],s=n[r[i+1]],l=n[r[i+2]],u=[a.vertices[0],a.vertices[1]],c=[s.vertices[0],s.vertices[1]],h=[l.vertices[0],l.vertices[1]];if(this.uvEditMode&&(u[0]=(a.uvs[0]-.5)*t.width,u[1]=(a.uvs[1]-.5)*t.height,c[0]=(s.uvs[0]-.5)*t.width,c[1]=(s.uvs[1]-.5)*t.height,h[0]=(l.uvs[0]-.5)*t.width,h[1]=(l.uvs[1]-.5)*t.height),kk.pointInTriangle(e,[u[0],u[1],c[0],c[1],h[0],h[1]]))return[r[i],r[i+1],r[i+2]]}}},{key:"addPoint",value:function(e){var t=be(this._display.mesh),n=0;for(var r in t.points)t.points[r]&&n++;t.points[n]=e;var i=void 0,o=void 0;if(this._overOutlineId){for(var a=0,s=t.outlines.length;a<s;a+=2){var l=t.outlines[a],u=t.outlines[a+1];if(kk.isLineEqual([l,u],this._overOutlineId)){t.outlines.splice(a,2,l,n,n,u);break}}i=t.outlines}if(this._overUserEdgeId){for(var c=0,h=t.userEdges.length;c<h;c+=2){var d=t.userEdges[c],f=t.userEdges[c+1];if(kk.isLineEqual([d,f],this._overUserEdgeId)){t.userEdges.splice(c,2,d,n,n,f);break}}o=t.userEdges}var p=kk.customizeTriangulate(t.points,t.outlines,t.userEdges);t.triangles=p;var v=this.store.getCurArmature(),m=this.store.getSelectedSlots()[0],g=PT.getSlotCurDisplay(m),y={armatureId:v.id,slotId:m.id,displayId:g.id,mesh:{points:{}}};i&&(y.mesh.outlines=i),o&&(y.mesh.userEdges=o),y.mesh.points[n]=e,y.mesh.triangles=p,this.store.dispatch(U.UPDATE_MESH,y),this._lineStartId=n}},{key:"isCrossOutlineOrUserEdges",value:function(e,t,n,r,i){for(var o=e.outlines,a=e.userEdges,s=0,l=o.length;s<l;s+=2){var u=e.points[o[s]],c=e.points[o[s+1]],h=[u.vertices[0],u.vertices[1]],d=[c.vertices[0],c.vertices[1]];if(this.uvEditMode&&(h=[(u.uvs[0]-.5)*r,(u.uvs[1]-.5)*i],d=[(c.uvs[0]-.5)*r,(c.uvs[1]-.5)*i]),kk.crossPointArr(t,n,h,d))return!0}for(var f=0,p=a.length;f<p;f+=2){var v=e.points[a[f]],m=e.points[a[f+1]],g=[v.vertices[0],v.vertices[1]],y=[m.vertices[0],m.vertices[1]];if(this.uvEditMode&&(g=[(v.uvs[0]-.5)*r,(v.uvs[1]-.5)*i],y=[(m.uvs[0]-.5)*r,(m.uvs[1]-.5)*i]),kk.crossPointArr(t,n,g,y))return!0}return!1}},{key:"addPointAndLine",value:function(e,t,n){if(void 0!==t){var r=be(this._display.mesh),i=void 0,o=void 0,a=0;if(e){for(var s in r.points)r.points[s]&&a++;if(n=a,r.points[a]=e,this._overOutlineId){for(var l=0,u=r.outlines.length;l<u;l+=2){var c=r.outlines[l],h=r.outlines[l+1];if(kk.isLineEqual([c,h],this._overOutlineId)){r.outlines.splice(l,2,c,a,a,h);break}}o=r.outlines}if(this._overUserEdgeId){for(var d=0,f=r.userEdges.length;d<f;d+=2){var p=r.userEdges[d],v=r.userEdges[d+1];if(kk.isLineEqual([p,v],this._overUserEdgeId)){r.userEdges.splice(d,2,p,a,a,v);break}}i=r.userEdges}}if(this._previewPoint&&t!==n){i||(i=r.userEdges||[]),i.push(t,n);var m=kk.customizeTriangulate(r.points,r.outlines,i);r.triangles=m;var g=this.store.getCurArmature(),y=this.store.getSelectedSlots()[0],b=PT.getSlotCurDisplay(y),_={armatureId:g.id,slotId:y.id,displayId:b.id,mesh:{points:{}}};o&&(_.mesh.outlines=o),i&&(_.mesh.userEdges=i),e&&(_.mesh.points[a]=e),_.mesh.triangles=m,this.store.dispatch(U.UPDATE_MESH,_)}}}}],[{key:"toString",value:function(){return"MeshAddPointController"}}]),n}(Uk),fC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._overPointId=void 0,e._overUserEdgeId=void 0,e.onMouseDown=function(t){if(e._overUserEdgeId){for(var n=e._display.mesh,r=n.userEdges,i=[],o=0,a=r.length;o<a;o+=2)r[o]===e._overUserEdgeId[0]&&r[o+1]===e._overUserEdgeId[1]||(i.push(r[o]),i.push(r[o+1]));var s=kk.customizeTriangulate(n.points,n.outlines,i),l=e.store.getCurArmature(),u=e.store.getSelectedSlots()[0],c=PT.getSlotCurDisplay(u),h={armatureId:l.id,slotId:u.id,displayId:c.id,mesh:{}};return h.mesh.userEdges=i,h.mesh.triangles=s,void e.store.dispatch(U.UPDATE_MESH,h)}if(void 0!==e._overPointId){var d=e._display.mesh;if(d.triangles.length<=3)return;for(var f=[],p=[],v=d.userEdges,m=d.outlines,g=[],y=[],b=0,_=v.length;b<_;b+=2)v[b]!==e._overPointId&&v[b+1]!==e._overPointId?(g.push(v[b]),g.push(v[b+1])):p.push(v[b],v[b+1]);for(var x=0,E=m.length;x<E;x+=2)m[x]!==e._overPointId&&m[x+1]!==e._overPointId?y.push(m[x]):f.push(m[x],m[x+1]);var w=e.meshDataDeletePoint(d,e._overPointId);if(w.outlines.length!==d.outlines.length){var T=kk.meshPointToArr(w.points),S=kk.getHull(T),k=kk.hullToOutline(S);w.outlines=k}var C=kk.customizeTriangulate(w.points,w.outlines,w.userEdges);w.triangles=C;var A=e.store.getCurArmature(),I=e.store.getSelectedSlots()[0],O=PT.getSlotCurDisplay(I),P=kk.getMeshPointNum(w.points);w.points[P]=void 0;var M={armatureId:A.id,slotId:I.id,displayId:O.id,mesh:w};e.store.dispatch(U.UPDATE_MESH,M),e._overPointId=void 0,e.view.deletePointIndex=void 0,e.view.deleteUserEdge=void 0}},e.onMouseMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.store.getSelectedDisplay(),o=e.getEditGlobalTransform(i),a=vp.transformInverseApplyPoint(o,{x:n,y:r}),s=e._display,l=s.mesh.points,u=s.mesh.userEdges;if(e._overPointId=void 0,e._overUserEdgeId=void 0,e.view.overLine=void 0,e.view.addPointPreview=void 0,e.view.deletePointIndex=void 0,e.view.deleteUserEdge=void 0,!(a.x<e._aabb.left||a.x>e._aabb.right||a.y<e._aabb.top||a.y>e._aabb.bottom)){for(var c=0,h=u.length;c<h;c+=2){var d=u[c],f=u[c+1],p={x:l[d].vertices[0],y:l[d].vertices[1]},v={x:l[f].vertices[0],y:l[f].vertices[1]};if(e.uvEditMode&&(p={x:(l[d].uvs[0]-.5)*s.width,y:(l[d].uvs[1]-.5)*s.height},v={x:(l[f].uvs[0]-.5)*s.width,y:(l[f].uvs[1]-.5)*s.height}),kk.pointNearSegDist(a.x,a.y,p.x,p.y,v.x,v.y,e.overPrecision))return e._overUserEdgeId=[d,f],void(e.view.deleteUserEdge=e._overUserEdgeId)}for(var m in l){var g=l[m];if(g){var y={x:g.vertices[0],y:g.vertices[1]};if(e.uvEditMode&&(y={x:(g.uvs[0]-.5)*s.width,y:(g.uvs[1]-.5)*s.height}),kk.overPoint(a,y,e.overPrecision))return e._overPointId=parseInt(m),void(e.view.deletePointIndex=e._overPointId)}}}},e}return f(n,[{key:"start",value:function(){this._addNotification(X.MOUSE_DOWN,this.onMouseDown),this._addNotification(X.MOUSE_MOVE,this.onMouseMove),this._addNotification(H.UPDATE_MESH,this.updateView);var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e,this.updateAABB(),this.onMouseMove(void 0)}},{key:"stop",value:function(){this._removeNotification(X.MOUSE_DOWN,this.onMouseDown),this._removeNotification(X.MOUSE_MOVE,this.onMouseMove),this._removeNotification(H.UPDATE_MESH,this.updateView)}},{key:"updateView",value:function(){this.updateAABB(),this.view.refresh()}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===J.MESH_EDIT_TOOL}},{key:"meshDataDeletePoint",value:function(e,t){var n=be(e);for(var r in n.points){n.points[r]||delete n.points[r]}var i=n.points;delete i[t];var o={},a=0;for(var s in i)o[s]=a,a++;var l={};for(var u in i){var c=i[u];if(c)l[o[u]]=c;n.points=l}for(var h=n.userEdges,d=0,f=h.length;d<f;d+=2)h[d]!==t&&h[d+1]!==t||(h.splice(d,2),d-=2,f-=2);if(h.length){for(var p=[],v=0,m=h.length;v<m;v++)p[v]=o[h[v]];n.userEdges=p}for(var g=n.outlines,y=0,b=g.length;y<b;y+=2)g[y]!==t&&g[y+1]!==t||(g.splice(y,2),y-=2,b-=2);if(g.length){for(var _=[],x=0,E=g.length;x<E;x++)_[x]=o[g[x]];n.outlines=_}return n}},{key:"updateAABB",value:function(){var e=this._display,t={top:Number.MAX_VALUE,left:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE};if(this.uvEditMode)t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};else for(var n in this._display.mesh.points){var r=this._display.mesh.points[n];r&&(r.vertices[0]<t.left&&(t.left=r.vertices[0]),r.vertices[0]>t.right&&(t.right=r.vertices[0]),r.vertices[1]<t.top&&(t.top=r.vertices[1]),r.vertices[1]>t.bottom&&(t.bottom=r.vertices[1]))}return t.top-=this.overPrecision,t.left-=this.overPrecision,t.right+=this.overPrecision,t.bottom+=this.overPrecision,this._aabb=t,t}},{key:"getEditGlobalTransform",value:function(e){if(this.uvEditMode){var t=Re({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}}],[{key:"toString",value:function(){return"MeshDeletePointController"}}]),n}(Uk),pC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._display=void 0,e.overPrecision=5,e._aabb=void 0,e._mousePoint=void 0,e.onMouseDown=function(t){for(var n=e.store.state.runtime.editing.meshEditTool.drawOutlines,r=!1,i=0;i<n.length;i+=2){var o={x:n[i],y:n[i+1]};if(vp.isPointEqual(o,e._mousePoint)){if(0===i&&n.length>2){r=!0;break}return}}if(r){e.store.historyBeginMerge();for(var a=e.store.getCurArmature(),s=e.store.getSelectedSlots()[0],l=PT.getSlotCurDisplay(s),u=l.mesh,c={points:{},triangles:[],outlines:[],userEdges:[]},h=0;h<n.length;h+=2){var d=n[h],f=n[h+1],p=d/l.width+.5,v=f/l.height+.5,m=h/2;c.points[m]={vertices:[d,f],uvs:[p,v]};var g=(h+2)%n.length/2;c.outlines.push(m,g)}var y=kk.customizeTriangulate(c.points,c.outlines,c.userEdges);for(var b in c.triangles=y,u.points)c.points[b]||(c.points[b]=void 0);var _={armatureId:a.id,slotId:s.id,displayId:l.id,mesh:c};e.store.dispatch(U.UPDATE_MESH,_),e.store.commit(W.UPDATE_MESH_TOOL,{curTool:ee.EDIT}),e.store.historyEndMerge()}else n.push(e._mousePoint.x),n.push(e._mousePoint.y),e.store.commit(W.UPDATE_MESH_TOOL,{drawOutlines:n})},e.onMouseMove=function(t){if(e.store.state.runtime.editing.meshEditTool.drawOutlines){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY,i=e.fixMousePoint(n,r);e.view.setDrawOutlines(e.store.state.runtime.editing.meshEditTool.drawOutlines,[i.x,i.y]),e._mousePoint=i}},e}return f(n,[{key:"start",value:function(){this._addNotification(X.MOUSE_DOWN,this.onMouseDown),this._addNotification(X.MOUSE_MOVE,this.onMouseMove),this._addNotification(W.UPDATE_MESH_TOOL,this.updateView),this.updateView()}},{key:"stop",value:function(){this._removeNotification(X.MOUSE_DOWN,this.onMouseDown),this._removeNotification(X.MOUSE_MOVE,this.onMouseMove),this._removeNotification(W.UPDATE_MESH_TOOL,this.updateView),this.view&&this.view.setDrawOutlines(void 0,void 0)}},{key:"updateView",value:function(){var e=this.store.getSelectedDisplay();this.view.display=e,this._display=e;var t=this.store.state.runtime.editing.meshEditTool;this.view.meshEditTool=t,this.updateAABB(),this.onMouseMove(void 0)}},{key:"uvEditMode",get:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;return!e.deformed&&t===J.MESH_EDIT_TOOL}},{key:"fixMousePoint",value:function(e,t){var n=this.store.getSelectedDisplay(),r=this.getEditGlobalTransform(n),i=vp.transformInverseApplyPoint(r,{x:e,y:t});(i.x<this._aabb.left||i.x>this._aabb.right||i.y<this._aabb.top||i.y>this._aabb.bottom)&&(i.x<this._aabb.left&&(i.x=this._aabb.left),i.x>this._aabb.right&&(i.x=this._aabb.right),i.y<this._aabb.top&&(i.y=this._aabb.top),i.y>this._aabb.bottom&&(i.y=this._aabb.bottom));for(var o=this.store.state.runtime.editing.meshEditTool.drawOutlines,a=0;a<o.length;a+=2){var s={x:o[a],y:o[a+1]};if(vp.distanceBetweenPoints(i,s)<this.overPrecision)return i.x=s.x,i.y=s.y,i}return i}},{key:"updateAABB",value:function(){var e=this._display,t={top:-.5*e.height,left:-.5*e.width,right:.5*e.width,bottom:.5*e.height};return this._aabb=t,t}},{key:"getEditGlobalTransform",value:function(e){var t=Re({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}}],[{key:"toString",value:function(){return"MeshDrawOutlineController"}}]),n}(Uk),vC=function(){function e(){u(this,e),this._cacheCalcMatrixMap={},this._cacheTransformableMap=void 0,this._cacheTransformable=Re({},Mk),this._selfTransformable=Re({},Mk),this._transformDirtyMap={x:!1,y:!1,scaleX:!1,scaleY:!1,rotation:!1,skewX:!1,skewY:!1,width:!1,height:!1,pivotX:!1,pivotY:!1},this._x=0,this._y=0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._skewX=0,this._skewY=0,this._width=1,this._height=1,this._pivotX=0,this._pivotY=0,this.offsetScaleX=1,this.offsetScaleY=1,this.store=void 0,this.cacheTriangle=void 0}return f(e,[{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this._transformDirtyMap.x=!0)}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this._transformDirtyMap.y=!0)}},{key:"scaleX",get:function(){return this._scaleX},set:function(e){this._scaleX&&(this.offsetScaleX=this._scaleX/e,this._scaleX=e,this._transformDirtyMap.scaleX=!0)}},{key:"scaleY",get:function(){return this._scaleY},set:function(e){this._scaleY!==e&&(this.offsetScaleY=this._scaleY/e,this._scaleY=e,this._transformDirtyMap.scaleY=!0)}},{key:"rotation",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._skewY=e,this._transformDirtyMap.rotation=!0)}},{key:"skewX",get:function(){return this._skewX},set:function(e){this._skewX!==e&&(this._skewX=e,this._transformDirtyMap.skewX=!0)}},{key:"skewY",get:function(){return this._skewY},set:function(e){this._skewY!==e&&(this._skewY=e,this._transformDirtyMap.skewY=!0)}},{key:"pivotX",get:function(){return this._pivotX},set:function(e){this._pivotX!==e&&(this._pivotX=e,this._transformDirtyMap.pivotX=!0)}},{key:"pivotY",get:function(){return this._pivotY},set:function(e){this._pivotY!==e&&(this._pivotY=e,this._transformDirtyMap.pivotY=!0)}},{key:"width",get:function(){return this._width},set:function(e){this._width!==e&&(this._width=e,this._transformDirtyMap.width=!0)}},{key:"height",get:function(){return this._height},set:function(e){this._height!==e&&(this._height=e,this._transformDirtyMap.height=!0)}},{key:"beginTransform",value:function(){this.cacheSelectedMeshPoints(),this.clearDirtyMap()}},{key:"endTransform",value:function(){this.clearDirtyMap(),this.cacheTriangle=void 0}},{key:"clearDirtyMap",value:function(){this._transformDirtyMap.x=!1,this._transformDirtyMap.y=!1,this._transformDirtyMap.scaleX=!1,this._transformDirtyMap.scaleY=!1,this._transformDirtyMap.rotation=!1,this._transformDirtyMap.skewX=!1,this._transformDirtyMap.skewY=!1,this._transformDirtyMap.width=!1,this._transformDirtyMap.height=!1,this._transformDirtyMap.pivotX=!1,this._transformDirtyMap.pivotY=!1}},{key:"cacheSelectedMeshPoints",value:function(){this._cacheTransformableMap={points:{}};var e=this.store.getSelectedSlots()[0],t=PT.getSlotCurDisplay(e).mesh;this._cacheTransformableMap.points=be(t.points),t.cacheFFD&&(this._cacheTransformableMap.cacheFFD=be(t.cacheFFD)),t.animatedFFD&&(this._cacheTransformableMap.animatedFFD=be(t.animatedFFD)),t.riggingFFD&&(this._cacheTransformableMap.riggingFFD=be(t.riggingFFD))}},{key:"setValue",value:function(e){e&&(this.offsetScaleX=1,this.offsetScaleY=1,this._x=e.x,this._y=e.y)}},{key:"changeRotationToSkew",value:function(e){e.rotation=0}},{key:"updateLocalTransform",value:function(e){for(var t=this.store.getCurArmature(),n=this.store.getSelectedSlots(),r=this.store.state.runtime.editing.selectedMeshPointIds,i=this.store.state.runtime.editing.stageTool,o=this.store.state.runtime.editing.meshEditTool,a=this.store.state.runtime.editing.editMode,s=n[0],l=PT.getSlotCurDisplay(s),u=l.mesh,c=u.points,h=l.globalTransform,d={armatureId:t.id,slotId:s.id,displayId:l.id,mesh:{points:{},triangles:void 0}},f=0,p=r.length;f<p;f++){var v=r[f],m=parseInt(v),g=this._cacheTransformableMap.points[v];if(i===J.MESH_EDIT_TOOL){var y=be(c);if(o.deformed){var b={x:g.vertices[0],y:g.vertices[1]},_=vp.transformApplyPoint(h,b);_.x+=e.x||0,_.y+=e.y||0;var x=vp.transformInverseApplyPoint(h,_),E=this.cacheTriangle;if(E||(E=kk.findTriangle(parseInt(v),u),this.cacheTriangle=E),!E)return!1;var w=kk.getUVsByVertices(u,E,[x.x,x.y]);if(w[0]<0)return!1;if(w[0]>1)return!1;if(w[1]<0)return!1;if(w[1]>1)return!1;d.mesh.points[v]={vertices:[x.x,x.y],uvs:w},y[v].vertices=[x.x,x.y],y[v].uvs=w}else{var T=g.uvs,S={x:(T[0]-.5)*l.width,y:(T[1]-.5)*l.height},k={x:S.x+e.x||0,y:S.y+e.y||0},C=[k.x/l.width+.5,k.y/l.height+.5];C[0]<0?C[0]=0:C[0]>1&&(C[0]=1),C[1]<0?C[1]=0:C[1]>1&&(C[1]=1),d.mesh.points[v]={uvs:C},y[v].uvs=C}var A=kk.customizeTriangulate(y,u.outlines,u.userEdges);d.mesh.triangles=A}else{delete d.mesh.triangles;var I={x:g.vertices[0],y:g.vertices[1]};l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD&&l.mesh.riggingFFD[v]&&this._cacheTransformableMap.riggingFFD&&this._cacheTransformableMap.riggingFFD[v]?(I.x=this._cacheTransformableMap.riggingFFD[v][0],I.y=this._cacheTransformableMap.riggingFFD[v][1]):a===Y.ANIMATION&&(this._cacheTransformableMap.cacheFFD&&this._cacheTransformableMap.cacheFFD[v]?(I.x=this._cacheTransformableMap.cacheFFD[v][0],I.y=this._cacheTransformableMap.cacheFFD[v][1]):this._cacheTransformableMap.animatedFFD&&this._cacheTransformableMap.animatedFFD[v]&&(I.x=this._cacheTransformableMap.animatedFFD[v][0],I.y=this._cacheTransformableMap.animatedFFD[v][1]));var O=vp.transformApplyPoint(h,I);if(O.x+=e.x||0,O.y+=e.y||0,l.mesh&&l.mesh.bonePose&&l.mesh.riggingFFD&&l.mesh.riggingFFD[v]){var P=PT.getMeshPointFFDByRiggingPos(t,l,m,[O.x,O.y]);d.mesh.points[v]={vertices:P}}else{var M=vp.transformInverseApplyPoint(h,O);d.mesh.points[v]={vertices:[M.x,M.y]}}}}return this.store.dispatch(U.UPDATE_MESH,d),!0}}]),e}(),mC=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._helpPoint0=new bg,e._helpPoint1=new bg,e.cameraTransform=void 0,e.transformController=new zk,e.transformProxy=new vC,e.transformHandler=void 0,e.type=void 0,e.controlKey=void 0,e._pivotEnable=!0,e._notHistoryMerge=!1,e.curHandler=void 0,e.bindViewHandlerMap={},e._limitBorder=void 0,e._uvEditMode=!1,e.meshView=void 0,e.onSwitchTool=function(t){var n=e.store.state.runtime.editing.stageTool,r=e.store.state.runtime.editing.meshEditTool;n===J.MESH_EDIT_TOOL&&r.deformed?e.updateMeshLimitBorder():e.clearMeshLimitBorder()},e.onWindowMove=function(t){var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;e._notHistoryMerge||(e.model.historyBeginMerge(),e._notHistoryMerge=!0),e.transformController.updateTransform(n,r,t)},e.onWindowUp=function(t){t.stopImmediatePropagation();var n=e.model.state.editor.stage.mouseStageX,r=e.model.state.editor.stage.mouseStageY;e.transformController.endTransform(n,r),e.transformProxy.endTransform(),window.removeEventListener("mousemove",e.onWindowMove),window.removeEventListener("mouseup",e.onWindowUp),window.removeEventListener("keydown",e.onKeyDown),window.removeEventListener("keyup",e.onKeyUp),e._notHistoryMerge&&(e._notHistoryMerge=!1,e.model.historyEndMerge()),e.type=void 0,e.meshView.updateBorder()},e.onKeyDown=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift||(e.controlKey.shift=!0,n=!0);break;case 17:e.controlKey.ctrl||(e.controlKey.ctrl=!0,n=!0);break;case 18:e.controlKey.alt||(e.controlKey.alt=!0,n=!0);break;case 91:e.controlKey.meta||(e.controlKey.meta=!0,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.onKeyUp=function(t){var n=!1;switch(t.keyCode){case 16:e.controlKey.shift&&(e.controlKey.shift=!1,n=!0);break;case 17:e.controlKey.ctrl&&(e.controlKey.ctrl=!1,n=!0);break;case 18:e.controlKey.alt&&(e.controlKey.alt=!1,n=!0);break;case 91:e.controlKey.meta&&(e.controlKey.meta=!1,n=!0)}n&&e.transformController.updateKey(e.controlKey)},e.asyncProxyTransform=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds,n=e.store.state.runtime.editing.editMode,r=e.store.getSelectedDisplay();if(t.length)if(r){var i=e.getEditGlobalTransform(r),o=e.getEditPointPosition(r,t[0],n),a=vp.transformApplyPoint(i,o);e.transformProxy.setValue(a),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else e.transformHandler&&(e.transformHandler.target=void 0)},e.onUpdateAnimationTransform=function(t){e.cameraTransform&&e.transformHandler&&(e.asyncProxyTransform(),e.transformHandler.updateTarget())},e.onUpdateBoneTransform=function(t){e.cameraTransform&&e.transformHandler&&e.transformHandler.updateTarget()},e.onUpdateCameraTransform=function(t){if(e.cameraTransform&&e.transformHandler){var n=e.store.state.editor.stage;switch(t.type){case X.UPDATE_SCALE:e.cameraTransform.scale.set(n.scale,n.scale);break;case X.UPDATE_POSITION:e.cameraTransform.position.set(n.x,n.y)}e.transformHandler.updateTarget()}},e.onSelectChange=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds,n=e.store.state.runtime.editing.editMode,r=e.store.getSelectedDisplay();if(t.length){e.startTransform();var i=e.getEditGlobalTransform(r),o=e.getEditPointPosition(r,t[0],n),a=vp.transformApplyPoint(i,o);e.transformProxy.setValue(a),e.transformHandler&&(e.transformHandler.target=e.transformProxy)}else e.transformHandler&&(e.transformHandler.target=void 0),e.stopTransform()},e.transformController.target=e.transformProxy,e.controlKey={ctrl:!1,alt:!1,shift:!1,meta:!1},e}return f(n,[{key:"pivotEnable",get:function(){return this._pivotEnable},set:function(e){this._pivotEnable!==e&&(this._pivotEnable=e,this.transformHandler&&(this.transformHandler.pivotHandler.interactive=this._pivotEnable))}},{key:"uvEditMode",set:function(e){this._uvEditMode!==e&&(this._uvEditMode=e,this.onUpdateAnimationTransform(void 0))}},{key:"start",value:function(){this._addNotification(H.SELECT_MESH_POINTS,this.onSelectChange),this._addNotification(D.SELECT_ARMATURE,this.onSelectChange),this._addNotification(X.UPDATE_POSITION,this.onUpdateCameraTransform),this._addNotification(X.UPDATE_SCALE,this.onUpdateCameraTransform),this._addNotification(H.UPDATE_MESH,this.onUpdateAnimationTransform),this._addNotification(H.UPDATE_CACHE_FFD,this.onUpdateAnimationTransform),this._addNotification(M.AUTO_KEY,this.onUpdateAnimationTransform),this._addNotification(Q.UPDATE_FRAME,this.onUpdateAnimationTransform),this._addNotification(H.UPDATE_RIG_BONE,this.onUpdateAnimationTransform),this._addNotification(W.SWITCH_MODE,this.onUpdateAnimationTransform),this._addNotification(W.SWITCH_TOOL,this.onSwitchTool),this._addNotification(W.UPDATE_MESH_TOOL,this.onSwitchTool),this.store.state.runtime.editing.selectedMeshPointIds.length&&this.onSelectChange()}},{key:"stop",value:function(){this._removeNotification(H.SELECT_MESH_POINTS,this.onSelectChange),this._removeNotification(D.SELECT_ARMATURE,this.onSelectChange),this._removeNotification(X.UPDATE_POSITION,this.onUpdateCameraTransform),this._removeNotification(X.UPDATE_SCALE,this.onUpdateCameraTransform),this._removeNotification(H.UPDATE_MESH,this.onUpdateAnimationTransform),this._removeNotification(H.UPDATE_CACHE_FFD,this.onUpdateAnimationTransform),this._removeNotification(M.AUTO_KEY,this.onUpdateAnimationTransform),this._removeNotification(Q.UPDATE_FRAME,this.onUpdateAnimationTransform),this._removeNotification(H.UPDATE_RIG_BONE,this.onUpdateAnimationTransform),this._removeNotification(W.SWITCH_MODE,this.onUpdateAnimationTransform),this._removeNotification(W.SWITCH_TOOL,this.onSwitchTool),this._removeNotification(W.UPDATE_MESH_TOOL,this.onSwitchTool),this.stopTransform()}},{key:"startTransform",value:function(){this.transformHandler=this.view.meshTransformHandler,this.cameraTransform=this.transformHandler.cameraTransform,this.transformProxy.store=this.store,this.resetCameraTransform(),this.bindHandler(),this.updateDisplays(),this.onSwitchTool(void 0)}},{key:"updateMeshLimitBorder",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds[0],n=e.slots.map[t],r=PT.getSlotCurDisplay(n),i=this.store.state.runtime.editing.selectedMeshPointIds;if(0!==i.length){var o=parseInt(i[0]),a=kk.findTriangle(o,r.mesh);if(a){var s=kk.getVerticesByUVs(r.mesh,a,[0,0]),l=kk.getVerticesByUVs(r.mesh,a,[1,0]),u=kk.getVerticesByUVs(r.mesh,a,[1,1]),c=kk.getVerticesByUVs(r.mesh,a,[0,1]);this._limitBorder=[s,l,u,c]}}}},{key:"clearMeshLimitBorder",value:function(){this._limitBorder=void 0}},{key:"stopTransform",value:function(){this.unBindHandler(),this.transformHandler&&(Pk.setCursor(Ok.auto),this.transformHandler.target=void 0,this.transformHandler=void 0),this.cameraTransform=void 0,this.transformProxy.store=void 0,this.meshView.updateBorder()}},{key:"updateDisplays",value:function(){}},{key:"getViewStage",value:function(){if(this.view)for(var e=this.view;e;){if(!e.parent)return e;e=e.parent}}},{key:"bindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.bindView(e,jk.XY),this.bindView(this.transformHandler.moveXHandler,jk.X),this.bindView(this.transformHandler.moveYHandler,jk.Y),this.bindView(this.transformHandler.moveHandler,jk.XY),this.bindViewDoubleClick(this.transformHandler.moveHandler)}}},{key:"unBindHandler",value:function(){if(this.transformHandler){var e=this.getViewStage();e&&this.unBindView(e),this.unBindView(this.transformHandler.moveXHandler),this.unBindView(this.transformHandler.moveYHandler),this.unBindView(this.transformHandler.moveHandler)}window.removeEventListener("mousemove",this.onWindowMove),window.removeEventListener("mouseup",this.onWindowUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}},{key:"bindViewDoubleClick",value:function(e){var t=0;e.on("mousedown",(function(n){n.stopPropagation(),t++,setTimeout((function(){t>0&&t--}),200),t>=2&&(e.emit("dblclick"),t=0)}))}},{key:"viewMouseDownHandler",value:function(e){if(!e.ctrlKey&&!e.metaKey){var t=e.currentTarget.transformType;e.stopPropagation(),this.type=t,this.asyncProxyTransform(),this.transformController.beginTransform(this.model.state.editor.stage.mouseStageX,this.model.state.editor.stage.mouseStageY,t),this.transformProxy.beginTransform(),window.addEventListener("mousemove",this.onWindowMove),window.addEventListener("mouseup",this.onWindowUp),window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this._limitBorder&&this.meshView.updateBorder(this._limitBorder)}}},{key:"bindView",value:function(e,t){e.transformType=t,this.unBindView(e),e.on("mousedown",this.viewMouseDownHandler,this)}},{key:"unBindView",value:function(e){e.off("mousedown",this.viewMouseDownHandler,this)}},{key:"resetCameraTransform",value:function(){if(this.cameraTransform){var e=this.store.state.editor.stage;this.cameraTransform.scale.set(e.scale,e.scale),this.cameraTransform.position.set(e.x,e.y)}}},{key:"getEditGlobalTransform",value:function(e){if(this._uvEditMode){var t=Re({},e.globalTransform);return t.skewX=0,t.skewY=0,t.scaleX=1,t.scaleY=1,t}return e.globalTransform}},{key:"getEditPointPosition",value:function(e,t,n){if(!e.width||!e.height)throw new Error("display width or height is 0");var r=e.mesh.points[t],i=r.vertices[0],o=r.vertices[1];return e.mesh.riggingFFD&&e.mesh.riggingFFD[t]?(i=e.mesh.riggingFFD[t][0],o=e.mesh.riggingFFD[t][1]):n===Y.ANIMATION&&(e.mesh.cacheFFD&&e.mesh.cacheFFD[t]?(i=e.mesh.cacheFFD[t][0],o=e.mesh.cacheFFD[t][1]):e.mesh.animatedFFD&&e.mesh.animatedFFD[t]&&(i=e.mesh.animatedFFD[t][0],o=e.mesh.animatedFFD[t][1])),this._uvEditMode&&(i=(r.uvs[0]-.5)*e.width,o=(r.uvs[1]-.5)*e.height),{x:i,y:o}}}],[{key:"toString",value:function(){return"MeshTransformController"}}]),n}(Uk),gC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._overPointIndex="",e._overLine=void 0,e._downStagePos={x:0,y:0},e._display=void 0,e._rectSelectAdd=!1,e._cacheMeshPointSelectIds=[],e._readyRectSelect=!1,e._downRectSelectPos={x:0,y:0},e._mouseDown=!1,e._rectSelecting=!1,e._notBeginMerge=!1,e.widgetView=void 0,e._startEditing=!1,e._justSelectedBone=!1,e.startEditMesh=function(){e._addNotification(X.MOUSE_MOVE,e.onMouseMove),e._startEditing=!0},e.stopEditMesh=function(){e.view.display=void 0,e._display=void 0,e._mouseDown=!1,e._rectSelecting=!1,e._notBeginMerge=!1,e._readyRectSelect=!1,e._rectSelectAdd=!1,e._removeNotification(X.MOUSE_MOVE,e.onMouseMove),e._startEditing=!1},e.onUpdateSlot=function(t){var n=!1;if(t.data.slots)for(var r in t.data.slots){if(void 0!==t.data.slots[r].displayIndex){n=!0;break}}n&&e.onSelectedSlots()},e.onSelectedSlots=function(){e.stopEditMesh();var t=e.store.state.runtime.editing.selectedSlotIds;e.store.state.runtime.editing.selectedDisplayId;if(1!==t.length);else{var n=t[0],r=e.store.getCurArmature().slots.map[n],i=r.displayIndex>=0?PT.getSlotCurDisplay(r):void 0;if(i&&i.type===T.MESH){var o=e.store.state.runtime.editing.meshEditTool,a=e.store.state.runtime.editing.stageTool;e.view.setMeshEditTool(a===J.MESH_EDIT_TOOL?o:void 0),e.view.setWeightMode(a===J.WEIGHT_TOOL),e.view.display=i,e._display=i,e.startEditMesh()}}},e.onSelectedPoints=function(){var t=e.store.state.runtime.editing.selectedMeshPointIds;e.view.selectedPoints=t},e.refreshAnimationView=function(){var t=e.store.state.runtime.editing.editMode;e.view.editMode=t,e.view.display=e.getCurDisplay(),e.view.refresh()},e.refreshView=function(){var t=e.store.state.runtime.editing.editMode;e.view.editMode=t,e.view.refresh()},e.onSelectRiggingBone=function(){e._justSelectedBone=!0},e.onMouseMove=function(t){e._mouseDown?e._rectSelecting?e.updateRectSelect(t.data):e._readyRectSelect&&e.startRectSelect(t.data):e.checkOverPoint(t.data.canvasPos)},e.onMouseDown=function(t){if(e._downStagePos.x=t.data.stagePos.x,e._downStagePos.y=t.data.stagePos.y,e._overPointIndex){var n=e.store.state.runtime.editing.selectedSlotIds;if(1===n.length){var r=n[0],i=e.store.getCurArmature().slots.map[r],o=i.displayIndex>=0?PT.getSlotCurDisplay(i):void 0;o&&o.type===T.MESH&&e.store.dispatch(U.SELECT_MESH_POINTS,{points:[e._overPointIndex],slotId:r,displayId:o.id})}}else if(e._overLine){var a=e.store.state.runtime.editing.selectedSlotIds;if(1===a.length){var s=a[0],l=e.store.getCurArmature().slots.map[s],u=l.displayIndex>=0?PT.getSlotCurDisplay(l):void 0;u&&u.type===T.MESH&&e.store.dispatch(U.SELECT_MESH_POINTS,{points:[e._overLine[0].toString(),e._overLine[1].toString()],slotId:s,displayId:u.id})}}else e.preRectSelect(t.data);e._mouseDown=!0},e.onMouseUp=function(t){e._mouseDown=!1,e._readyRectSelect=!1,e._rectSelectAdd=!1;var n=t.data.stagePos.x,r=t.data.stagePos.y;if(e._rectSelecting)e.stopRectSelect(),e._notBeginMerge&&(e._notBeginMerge=!1,e.store.historyEndMerge());else{if(e._justSelectedBone)return void(e._justSelectedBone=!1);if(n!==e._downStagePos.x||r!==e._downStagePos.y)return;if(!e._overPointIndex&&!e._overLine)if(e.store.state.runtime.editing.selectedMeshPointIds.length>0){var i=e.store.state.runtime.editing.selectedSlotIds;if(1===i.length){var o=i[0],a=e.store.getCurArmature().slots.map[o],s=a.displayIndex>=0?PT.getSlotCurDisplay(a):void 0;s&&s.type===T.MESH&&e.store.dispatch(U.SELECT_MESH_POINTS,{points:[],slotId:o,displayId:s.id})}}}},e}return f(n,[{key:"start",value:function(){this._addNotification(B.SELECT_SLOTS,this.onSelectedSlots),this._addNotification(B.UPDATE_PROPERTIES,this.onUpdateSlot),this._addNotification(H.SELECT_MESH_POINTS,this.onSelectedPoints),this._addNotification(H.UPDATE_MESH,this.refreshView),this._addNotification(H.UPDATE_CACHE_FFD,this.refreshView),this._addNotification(Q.UPDATE_FRAME,this.refreshAnimationView),this._addNotification(M.AUTO_KEY,this.refreshAnimationView),this._addNotification(H.UPDATE_RIG_BONE,this.refreshView),this._addNotification(B.UPDATE_LOCAL_TRANSFORMS,this.refreshView),this._addNotification(W.SWITCH_MODE,this.refreshView),this._addNotification(X.MOUSE_DOWN,this.onMouseDown),this._addNotification(X.MOUSE_UP,this.onMouseUp),this._addNotification(W.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(W.SWITCH_TOOL,this.onUpdateMeshTool),this._addNotification(W.SELECT_RIGGING_BONE,this.onSelectRiggingBone),this.onSelectedSlots()}},{key:"stop",value:function(){this.view&&(this._removeNotification(B.SELECT_SLOTS,this.onSelectedSlots),this._removeNotification(B.UPDATE_PROPERTIES,this.onUpdateSlot),this._removeNotification(H.SELECT_MESH_POINTS,this.onSelectedPoints),this._removeNotification(H.UPDATE_MESH,this.refreshView),this._removeNotification(H.UPDATE_CACHE_FFD,this.refreshView),this._removeNotification(Q.UPDATE_FRAME,this.refreshAnimationView),this._removeNotification(M.AUTO_KEY,this.refreshAnimationView),this._removeNotification(B.UPDATE_LOCAL_TRANSFORMS,this.refreshView),this._removeNotification(W.SWITCH_MODE,this.refreshView),this._removeNotification(X.MOUSE_DOWN,this.onMouseDown),this._removeNotification(X.MOUSE_UP,this.onMouseUp),this._removeNotification(W.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._removeNotification(W.SWITCH_TOOL,this.onUpdateMeshTool),this._removeNotification(W.SELECT_RIGGING_BONE,this.onSelectRiggingBone)),this.stopEditMesh()}},{key:"pauseSelect",value:function(){this._removeNotification(X.MOUSE_MOVE,this.onMouseMove)}},{key:"resumeSelect",value:function(){this._startEditing&&this._addNotification(X.MOUSE_MOVE,this.onMouseMove)}},{key:"getCurDisplay",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds,t=this.store.state.runtime.editing.editMode;if(1===e.length){var n=e[0],r=this.store.getCurArmature().slots.map[n],i=PT.getSlotCurDisplay(r,t);if(i&&i.type===T.MESH)return i}return null}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.view.meshEditTool=t===J.MESH_EDIT_TOOL?e:void 0,this.view.weightMode=t===J.WEIGHT_TOOL}},{key:"checkOverPoint",value:function(e){if(this._enable){for(var t in this.view.pointPosMap){var n=this.view.pointPosMap[t];if(n&&kk.overPoint(n,e))return this.view.overPointIndex=t,this.view.overLine=void 0,this._overPointIndex=t,void(this._overLine=void 0)}for(var r=0,i=this._display.mesh.outlines.length;r<i;r+=2){var o=this._display.mesh.outlines[r],a=this._display.mesh.outlines[r+1],s=this.view.pointPosMap[o],l=this.view.pointPosMap[a];if(kk.pointNearSegDist(e.x,e.y,s.x,s.y,l.x,l.y,10))return this.view.overLine=[o,a],this.view.overPointIndex="",this._overPointIndex="",void(this._overLine=[o,a])}this.view.overPointIndex="",this.view.overLine=void 0,this._overPointIndex="",this._overLine=void 0}}},{key:"preRectSelect",value:function(e){var t=this.store.state.runtime.editing.selectedMeshPointIds,n=e.nativeEvent;this._rectSelectAdd=n.ctrlKey||n.metaKey,this._rectSelectAdd&&(this._readyRectSelect=!0,this._downRectSelectPos.x=e.canvasPos.x,this._downRectSelectPos.y=e.canvasPos.y,this._rectSelectAdd&&(this._cacheMeshPointSelectIds=t.concat()))}},{key:"startRectSelect",value:function(e){var t=e.stagePos.x,n=e.stagePos.y;t===this._downStagePos.x&&n===this._downStagePos.y||(this._rectSelecting=!0)}},{key:"stopRectSelect",value:function(){this._rectSelecting=!1,this.widgetView&&this.widgetView.clearFrameSelect()}},{key:"updateRectSelect",value:function(e){var t=e.canvasPos.x,n=e.canvasPos.y;this.checkFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,t,n);var r=e.canvasPos.x,i=e.canvasPos.y;this.widgetView&&this.widgetView.drawFrameSelect(this._downRectSelectPos.x,this._downRectSelectPos.y,r,i)}},{key:"checkFrameSelect",value:function(e,t,n,r){var i=[],o=Math.min(e,n),a=Math.max(e,n),s=Math.min(t,r),l=Math.max(t,r);for(var u in this.view.pointPosMap){var c=this.view.pointPosMap[u];if(c){var h=c.x,d=c.y;h>o&&h<a&&d>s&&d<l&&i.push(u)}}var f=i;this._rectSelectAdd&&this._cacheMeshPointSelectIds.length>0&&(f=i.concat(this._cacheMeshPointSelectIds));var p=this.store.state.runtime.editing.selectedMeshPointIds;if(!vp.arrayEqualArray(p,f)){this._notBeginMerge||(this._notBeginMerge=!0,this.store.historyBeginMerge());var v=this.store.state.runtime.editing.selectedSlotIds;if(1===v.length){var m=v[0],g=this.store.getCurArmature().slots.map[m],y=g.displayIndex>=0?PT.getSlotCurDisplay(g):void 0;y&&y.type===T.MESH&&this.store.dispatch(U.SELECT_MESH_POINTS,{points:f,slotId:m,displayId:y.id})}}}}],[{key:"toString",value:function(){return"StageMeshSelectController"}}]),n}(Uk),yC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).selectController=void 0,e.transformController=void 0,e.addPointController=void 0,e.deletePointController=void 0,e.drawOutlineController=void 0,e._initialized=!1,e.onSwitchTool=function(){var t=e.store.state.runtime.editing.stageTool,n=e.store.state.runtime.editing.meshEditTool;if(e.transformController.uvEditMode=!n.deformed&&t===J.MESH_EDIT_TOOL,t===J.RIGGING_TOOL)return e.selectController.pauseSelect(),void(e.transformController.enable=!1);if(e.selectController.resumeSelect(),t===J.WEIGHT_TOOL?e.transformController.enable=!1:e.transformController.enable=!0,t===J.MESH_EDIT_TOOL)switch(n.curTool){case ee.ADD:e.selectController.enable=!1,e.transformController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1,e.addPointController.enable=!0;break;case ee.EDIT:e.addPointController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1,e.selectController.enable=!0,e.transformController.enable=!0;break;case ee.DELETE:e.addPointController.enable=!1,e.selectController.enable=!1,e.transformController.enable=!1,e.drawOutlineController.enable=!1,e.deletePointController.enable=!0;break;case ee.DRAW:e.addPointController.enable=!1,e.selectController.enable=!1,e.transformController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!0}else e.onSelectedSlots()},e.onSelectedSlots=function(){e.selectController.enable=!1,e.transformController.enable=!1,e.addPointController.enable=!1,e.deletePointController.enable=!1,e.drawOutlineController.enable=!1;var t=e.store.state.runtime.editing.selectedBoneIds,n=e.store.state.runtime.editing.selectedSlotIds;e.store.state.runtime.editing.selectedDisplayId;if(!(t.length>0)&&0!==n.length&&1===n.length){var r=n[0],i=e.store.getCurArmature().slots.map[r],o=i.displayIndex>=0?PT.getSlotCurDisplay(i):void 0;if(o&&o.type===T.MESH)e.selectController.enable=!0,e.store.state.runtime.editing.stageTool!==J.WEIGHT_TOOL?e.transformController.enable=!0:e.transformController.enable=!1}},e}return f(n,[{key:"start",value:function(){if(!this._initialized){this.selectController=gC.getInstance(gC),this.transformController=mC.getInstance(mC);var e=this.view.getView(hC),t=this.view.getView(Bk);this.selectController.initialize(this.store,e),this.selectController.widgetView=t,this.transformController.initialize(this.store,t),this.transformController.meshView=e,this.addPointController=dC.getInstance(dC),this.addPointController.initialize(this.store,e),this.deletePointController=fC.getInstance(fC),this.deletePointController.initialize(this.store,e),this.drawOutlineController=pC.getInstance(pC),this.drawOutlineController.initialize(this.store,e),this._initialized=!0}this._addNotification(B.SELECT_SLOTS,this.onSelectedSlots),this._addNotification(G.SELECT_BONES,this.onSelectedSlots),this._addNotification(D.SELECT_ARMATURE,this.onSelectedSlots),this._addNotification(j.UPDATE_PROPERTIES,this.onSelectedSlots),this._addNotification(W.SWITCH_TOOL,this.onSwitchTool),this._addNotification(W.UPDATE_MESH_TOOL,this.onSwitchTool)}},{key:"stop",value:function(){this.selectController.enable=!1,this.transformController.enable=!1,this.addPointController.enable=!1,this.deletePointController.enable=!1,this.drawOutlineController.enable=!1}}],[{key:"toString",value:function(){return"StageMeshController"}}]),n}(Uk),bC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).mouseDownData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.mouseUpData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.mouseData={canvasPos:{x:0,y:0},stagePos:{x:0,y:0}},e.rightDownCanvasPos={x:0,y:0},e.justStageRightDown=!1,e.downStageCenterPos={x:0,y:0},e.upNum=0,e.upTime=0,e.onStageMouseRightMove=function(e){},e.onWindowMouseUp=function(t){null!=document&&(document.removeEventListener("mouseup",e.onWindowMouseUp),e.store.commit(X.MOUSE_UP,e.mouseUpData))},e.onWindowRightUp=function(t){null!=document&&e.store.commit(X.RIGHT_UP,e.mouseUpData)},e}return f(n,[{key:"start",value:function(){this.view.stage.on("mousedown",this.onStageMouseDown,this),this.view.stage.on("mousemove",this.onStageMouseMove,this),this.view.stage.on("mouseover",this.onStageMouseOver,this),this.view.stage.on("mouseout",this.onStageMouseOut,this),this.view.stage.on("rightdown",this.onStageRightDown,this)}},{key:"stop",value:function(){}},{key:"onStageMouseMove",value:function(e){var t=e.data.global,n=this.getStagePosition(t);this.mouseData.canvasPos.x=t.x,this.mouseData.canvasPos.y=t.y,this.mouseData.stagePos.x=n.x,this.mouseData.stagePos.y=n.y,this.mouseData.nativeEvent=e,this.store.commit(X.MOUSE_MOVE,this.mouseData)}},{key:"onStageMouseDown",value:function(e){document.addEventListener("mouseup",this.onWindowMouseUp),this.view.stage.on("mouseup",this.onStageMouseUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseDownData.canvasPos.x=t.x,this.mouseDownData.canvasPos.y=t.y,this.mouseDownData.stagePos.x=n.x,this.mouseDownData.stagePos.y=n.y,this.mouseDownData.nativeEvent=e,this.store.commit(X.MOUSE_DOWN,this.mouseDownData)}},{key:"onStageMouseUp",value:function(e){document.removeEventListener("mouseup",this.onWindowMouseUp),this.view.stage.off("mouseup",this.onStageMouseUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseUpData.canvasPos.x=t.x,this.mouseUpData.canvasPos.y=t.y,this.mouseUpData.stagePos.x=n.x,this.mouseUpData.stagePos.y=n.y,this.mouseUpData.nativeEvent=e,this.upNum++;var r=(new Date).getTime();if(this.upTime>0&&r-this.upTime<=200)return this.store.commit(X.DOUBLE_CLICK,this.mouseUpData),void(this.upTime=0);this.upTime=r,this.store.commit(X.MOUSE_UP,this.mouseUpData)}},{key:"onStageRightDown",value:function(e){this.view.stage.on("rightup",this.onStageRightUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseDownData.canvasPos.x=t.x,this.mouseDownData.canvasPos.y=t.y,this.mouseDownData.stagePos.x=n.x,this.mouseDownData.stagePos.y=n.y,this.mouseDownData.nativeEvent=e,this.store.commit(X.RIGHT_DOWN,this.mouseDownData)}},{key:"onStageRightUp",value:function(e){this.view.stage.off("rightup",this.onStageRightUp,this);var t=e.data.global,n=this.getStagePosition(t);this.mouseUpData.canvasPos.x=t.x,this.mouseUpData.canvasPos.y=t.y,this.mouseUpData.stagePos.x=n.x,this.mouseUpData.stagePos.y=n.y,this.mouseUpData.nativeEvent=e,this.store.commit(X.RIGHT_UP,this.mouseUpData)}},{key:"onStageMouseOver",value:function(e){this._sendNotification(X.MOUSE_OVER)}},{key:"onStageMouseOut",value:function(e){this._sendNotification(X.MOUSE_OUT)}},{key:"getStagePosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:(e.x-t)/r,y:(e.y-n)/r}}}],[{key:"toString",value:function(){return"StageMouseController"}}]),n}(Uk),_C=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._transformed=!1,e._hideAllSlot=!1,e}return f(n,[{key:"start",value:function(){this.view&&(this.view.slots=this.getShowSlot(),this.onHideSlot()),this._addNotification(D.SELECT_ARMATURE,this.onArmatureChange),this._addNotification(B.SET_PARENT,this.refreshSlot),this._addNotification(j.SET_PARENT,this.refreshSlot),this._addNotification(G.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(B.UPDATE_LOCAL_TRANSFORMS,this.refreshTransform),this._addNotification(G.ADD_IK,this.refreshTransform),this._addNotification(G.UPDATE_IK,this.refreshTransform),this._addNotification(G.UPDATE_CACHE_IK,this.refreshTransform),this._addNotification(G.DELETE_IKS,this.refreshTransform),this._addNotification(B.ADD_SLOT,this.refreshSlot),this._addNotification(B.DELETE_SLOTS,this.refreshSlot),this._addNotification(B.OVER_SLOT,this.refreshOver),this._addNotification(B.SELECT_SLOTS,this.refreshSelected),this._addNotification(j.SELECT_DISPLAY,this.refreshSelected),this._addNotification(D.CHANGE_SLOT_ORDER,this.refreshSlot),this._addNotification(Q.UPDATE_FRAME,this.refreshSlot),this._addNotification(D.CACHE_SLOT_ORDER,this.refreshSlot),this._addNotification(H.UPDATE_MESH,this.refreshSlot),this._addNotification(H.UPDATE_CACHE_FFD,this.refreshSlot),this._addNotification(H.UPDATE_RIG_BONE,this.refreshSlot),this._addNotification(j.UPDATE_PROPERTIES,this.refreshSlot),this._addNotification(M.AUTO_KEY,this.onUpdateAnimatedProperty),this._addNotification(G.UPDATE_CACHE_TRANSFORMS,this.onUpdateAnimatedProperty),this._addNotification(W.SWITCH_MODE,this.refreshSlot),this._addNotification(M.SELECT_ANIMATION,this.refreshSlot),this._addNotification(X.HIDE_ITEMS,this.onHideSlot),this._addNotification(W.CHANGE_BONE_SLOT_CONTROL,this.onChangeBoneSlotControl),this._addNotification(G.UPDATE_PROPERTIES,this.refreshBone),this._addNotification(B.UPDATE_PROPERTIES,this.refreshSlot),this._addNotification(B.UPDATE_CACHE_PROPERTIES,this.refreshSlot),this._addNotification(W.UPDATE_MESH_TOOL,this.onUpdateMeshTool),this._addNotification(W.SWITCH_TOOL,this.onUpdateMeshTool)}},{key:"stop",value:function(){this.view}},{key:"onEndTranform",value:function(e){this.view.startOvercheck()}},{key:"onStartTransform",value:function(e){this.view.stopOverCheck()}},{key:"onUpdateMeshTool",value:function(){var e=this.store.state.runtime.editing.meshEditTool,t=this.store.state.runtime.editing.stageTool;this.hideAllSlot=!e.deformed&&t===J.MESH_EDIT_TOOL}},{key:"getShowSlot",value:function(){return this._hideAllSlot?this.getSelectedSlot():this.getCurSlots()}},{key:"hideAllSlot",set:function(e){this._hideAllSlot!==e&&(this._hideAllSlot=e,this.view&&(this._hideAllSlot?this.view.uvEditMode=!0:this.view.uvEditMode=!1,this.view.slots=this.getShowSlot()))}},{key:"onSwitchMode",value:function(){this.view.refresh()}},{key:"onArmatureChange",value:function(){this.view&&(this.view.slots=this.getShowSlot())}},{key:"onOverSlot",value:function(e){this.store.commit(B.OVER_SLOT,e)}},{key:"onOutSlot",value:function(e){this.store.commit(B.OVER_SLOT,0)}},{key:"onUpdateAnimatedProperty",value:function(){this.view.refresh()}},{key:"onChangeBoneSlotControl",value:function(e){"slotVisible"===e.data.property&&this.onHideSlot()}},{key:"onHideSlot",value:function(){if(this.store.state.runtime.editing.boneSlotControl.slotVisible)this.view.hideSlotIds=this.store.state.runtime.editing.hideBoneSlotIds;else{var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap[e];this.view.hideSlotIds=t.slots.ids}}},{key:"refreshBone",value:function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.bones,r=!1;if(n)for(var i in n){var o=n[i];void 0===o.inheritRotation&&void 0===o.inheritScale||(r=!0)}r&&this.view.refresh()}},{key:"refreshSlot",value:function(){var e=this.store.state.runtime.editing.editMode;this.view.editMode=e,this.view.slots=this.getShowSlot()}},{key:"refreshOver",value:function(){var e=this.store.state.editor.over.overSlotId;this.view.overSlotId=e}},{key:"refreshSelected",value:function(){this._transformed=!1;var e=this.store.state.runtime.editing.selectedSlotIds;this.view.selectedSlotIds=e}},{key:"refreshTransform",value:function(){this._transformed=!0,this.view.refresh()}},{key:"mouseDown",value:function(){this._transformed=!1;var e=this.store.state.editor.over.overSlotId;e>0&&this.store.dispatch(F.SELECT_ONE_SLOT,[e])}},{key:"getSelectedSlot",value:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds;return[e.slots.map[t[0]]]}},{key:"getCurSlots",value:function(){var e=this.store.state.runtime.editing.editingArmatureId,t=this.store.state.runtime.dragonbones.armatureMap,n=this.store.state.runtime.editing.editMode,r=t[e];if(r){var i=r.slots.ids;n===Y.ANIMATION&&(r.cacheZOrder?i=r.cacheZOrder:r.animatedZOrder&&(i=r.animatedZOrder));for(var o=[],a=0,s=i.length;a<s;a++){var l=i[a],u=r.slots.map[l];o.push(u)}return o}return[]}}],[{key:"toString",value:function(){return"StageSlotController"}}]),n}(Uk),xC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).lastTool=J.SELECT,e._escHandler=void 0,e._rightDownPos={x:0,y:0},e.onOverBone=function(t){e.checkOverEnable(t)&&e.store.commit(G.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(G.OVER_BONE,0)},e}return f(n,[{key:"start",value:function(){this.view.on(q.OVER_BONE,this.onOverBone,this),this.view.on(q.OUT_BONE,this.onOutBone,this),this._escHandler=this.escHandler.bind(this),window.addEventListener("keydown",this._escHandler),this._addNotification(X.MOUSE_DOWN,this.mouseDown),this._addNotification(X.RIGHT_DOWN,this.rightDown),this._addNotification(X.RIGHT_UP,this.rightUp)}},{key:"stop",value:function(){this.view.off(q.OVER_BONE,this.onOverBone),this.view.off(q.OUT_BONE,this.onOutBone),window.removeEventListener("keydown",this._escHandler),this._removeNotification(X.MOUSE_DOWN,this.mouseDown),this._removeNotification(X.RIGHT_DOWN,this.rightDown),this._removeNotification(X.RIGHT_UP,this.rightUp)}},{key:"checkOverEnable",value:function(e){return!0}},{key:"mouseUp",value:function(e){this._removeNotification(X.MOUSE_UP,this.mouseUp),this.model.historyEndMerge()}},{key:"escHandler",value:function(e){27===e.keyCode&&(e.stopPropagation(),e.preventDefault(),this.cancelPickBone())}},{key:"rightDown",value:function(e){this._rightDownPos={x:e.data.stagePos.x,y:e.data.stagePos.y}}},{key:"rightUp",value:function(e){var t=e.data.stagePos.x,n=e.data.stagePos.y;t===this._rightDownPos.x&&n===this._rightDownPos.y&&this.cancelPickBone()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;t>0&&this.pickBone(t)}},{key:"cancelPickBone",value:function(){}},{key:"pickBone",value:function(e){}}],[{key:"toString",value:function(){return"SelectBoneController"}}]),n}(Uk),EC=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var o=t[r];if(o===e)return!1;if(PT.isDescendantBone(n,o,e))return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(V.PICK_IK_TARGET_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedBoneIds;if(1===n.length){var r={armatureId:t.id,parentId:n[0],targetId:e};this.store.dispatch(V.ADD_IK_BY_TARGET,r),this.store.dispatch(V.PICK_IK_TARGET_END,{lastTool:this.lastTool})}else if(2===n.length){var i=t.bones.map[n[0]],o=t.bones.map[n[1]],a=0,s=0;if(i.parentId===o.id?(a=o.id,s=i.id):o.parentId===i.id&&(a=i.id,s=o.id),a&&s){var l={armatureId:t.id,parentId:a,childId:s,targetId:e};this.store.dispatch(V.ADD_IK_BY_TARGET,l),this.store.dispatch(V.PICK_IK_TARGET_END,{lastTool:this.lastTool})}}}}],[{key:"toString",value:function(){return"IKSelectBoneController"}}]),n}(xC),wC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._downPos={x:0,y:0},e.cacheBoneWeights=void 0,e.onOverSlot=function(t){e.checkOverSlot(t)&&e.store.commit(B.OVER_SLOT,t)},e.onOutSlot=function(){e.store.commit(B.OVER_SLOT,0)},e.onOverBone=function(t){e.checkOverEnable(t)&&e.store.commit(G.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(G.OVER_BONE,0)},e.mouseMove=function(t){t.data.canvasPos.x;var n=t.data.canvasPos.y,r=(e._downPos.y-n)/5*.01,i=e.store.state.runtime.editing.selectedMeshPointIds,o=e.store.getCurArmature(),a=e.store.state.runtime.editing.selectedSlotIds[0],s=o.slots.map[a],l=s.displayIndex>=0?PT.getSlotCurDisplay(s):void 0;if(l.mesh){for(var u={armatureId:o.id,slotId:a,displayId:l.id,boneWeights:{}},c=l.mesh,h=e.store.state.runtime.editing.riggingSelectedBoneId,d=!1,f=0,p=i.length;f<p;f++){var v,m=parseInt(i[f]),g=(null===(v=e.cacheBoneWeights[m])||void 0===v?void 0:v[h])||0,y=g+r;if(y<0&&(y=0),y>1&&(y=1),y!==g){var b=u.boneWeights;b[m]=PT.calculateBoneWeight(c.boneWeights,m,h,y,e.cacheBoneWeights),b[m][h]=y,d=!0}}d&&e.store.commit(H.UPDATE_RIG_BONE,u)}},e.onWindowUp=function(t){e.stopModifyWeight()},e}return f(n,[{key:"boneStage",get:function(){return this.view.getView(oS)}},{key:"slotStage",get:function(){return this.view.getView(Ik)}},{key:"display",get:function(){var e=this.store.getCurArmature(),t=this.store.state.runtime.editing.selectedSlotIds[0],n=e.slots.map[t];return n.displayIndex>=0?PT.getSlotCurDisplay(n):void 0}},{key:"start",value:function(){this._addNotification(B.SELECT_SLOTS,this.onSlotSelect),this._addNotification(X.MOUSE_DOWN,this.mouseDown),this.startSlotSelect(),this.onSlotSelect()}},{key:"stop",value:function(){this.stopBoneSelect(),this.stopSlotSelect(),this._removeNotification(X.MOUSE_DOWN,this.mouseDown)}},{key:"startSlotSelect",value:function(){this.slotStage.on(q.OVER_SLOT,this.onOverSlot,this),this.slotStage.on(q.OUT_SLOT,this.onOutSlot,this)}},{key:"stopSlotSelect",value:function(){this.slotStage.off(q.OVER_SLOT,this.onOverSlot),this.slotStage.off(q.OUT_SLOT,this.onOutSlot)}},{key:"startBoneSelect",value:function(){this.boneStage.on(q.OVER_BONE,this.onOverBone,this),this.boneStage.on(q.OUT_BONE,this.onOutBone,this)}},{key:"stopBoneSelect",value:function(){this.boneStage.off(q.OVER_BONE,this.onOverBone),this.boneStage.off(q.OUT_BONE,this.onOutBone)}},{key:"onSlotSelect",value:function(){1===this.store.state.runtime.editing.selectedSlotIds.length?this.startBoneSelect():this.stopBoneSelect()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;if(t>0)this.pickBone(t);else{var n=this.store.state.editor.over.overSlotId;if(n>0)this.pickSlot(n);else if(1===this.store.state.runtime.editing.selectedSlotIds.length)if(0!==this.store.state.runtime.editing.selectedMeshPointIds.length)this.store.state.runtime.editing.riggingSelectedBoneId?(this._downPos={x:e.data.canvasPos.x,y:e.data.canvasPos.y},this.startModifyWeight()):yf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u7ed1\u5b9a\u7684\u9aa8\u9abc");else yf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u7f51\u683c\u4e0a\u7684\u70b9");else yf.warn("\u8981\u8c03\u8282\u7f51\u683c\u7684\u6743\u91cd\uff0c\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u7f51\u683c")}}},{key:"startModifyWeight",value:function(){this.store.historyBeginMerge(),this.cacheBoneWeights=be(this.display.mesh.boneWeights),this._addNotification(X.MOUSE_MOVE,this.mouseMove),window.addEventListener("mouseup",this.onWindowUp)}},{key:"stopModifyWeight",value:function(){this.store.historyEndMerge(),this._removeNotification(X.MOUSE_MOVE,this.mouseMove),window.removeEventListener("mouseup",this.onWindowUp)}},{key:"checkOverSlot",value:function(e){var t=this.store.getCurArmature(),n=(this.store.state.runtime.editing.selectedSlotIds,t.slots.map[e]);return!!(n.displayIndex>=0?PT.getSlotCurDisplay(n):void 0).mesh}},{key:"checkOverEnable",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?PT.getSlotCurDisplay(r):void 0;if(!i.mesh)return!1;var o=[];if(i.mesh.bonePose)for(var a in i.mesh.bonePose)o.push(parseInt(a));return o.indexOf(e)>-1}},{key:"pickBone",value:function(e){this.store.commit(W.SELECT_RIGGING_BONE,{boneId:e})}},{key:"pickSlot",value:function(e){this.store.commit(B.SELECT_SLOTS,[e])}}],[{key:"toString",value:function(){return"RiggingWeightController"}}]),n}(Uk),TC=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedBoneIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var o=t[r];if(n.bones.map[o].parentId===e)return!1;if(o===e)return!1;if(PT.isDescendantBone(n,o,e))return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(V.PICK_BONE_PARENT_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedBoneIds;this.store.dispatch(V.SET_PARENT,{armatureId:t.id,boneIds:n,parentId:e}),this.store.dispatch(V.PICK_BONE_PARENT_END,{lastTool:this.lastTool})}}],[{key:"toString",value:function(){return"SelectBoneParentController"}}]),n}(xC),SC=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"checkOverEnable",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?PT.getSlotCurDisplay(r):void 0;if(!i.mesh)return!1;var o=[];if(i.mesh.bonePose)for(var a in i.mesh.bonePose)o.push(parseInt(a));return!(o.indexOf(e)>-1)}},{key:"cancelPickBone",value:function(){this.store.dispatch(X.CLOSE_RIGGING_TOOL,{})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds[0],r=t.slots.map[n],i=r.displayIndex>=0?PT.getSlotCurDisplay(r):void 0;if(i.mesh){var o=t.bones.map[e].globalTransform,a=!1;if(i.mesh.bonePose){var s=0;for(var l in i.mesh.bonePose){i.mesh.bonePose[l]&&s++}0===s&&(a=!0)}else a=!0;this.store.dispatch(U.ADD_RIG_BONE,{armatureId:t.id,slotId:n,displayId:i.id,boneId:e,bonePose:o,autoWeight:a})}}}],[{key:"toString",value:function(){return"SelectBoneRigController"}}]),n}(xC),kC=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"checkOverEnable",value:function(e){for(var t=this.store.state.runtime.editing.selectedSlotIds,n=this.store.getCurArmature(),r=0,i=t.length;r<i;r++){var o=t[r];if(n.slots.map[o].parentId===e&&1===t.length)return!1}return!0}},{key:"cancelPickBone",value:function(){this.store.dispatch(F.PICK_SLOT_PARENT_END,{lastTool:this.lastTool})}},{key:"pickBone",value:function(e){var t=this.store.getCurArmature(),n=this.store.state.runtime.editing.selectedSlotIds;this.store.historyBeginMerge(),this.store.dispatch(F.SET_PARENT,{armatureId:t.id,slotIds:n,parentId:e}),this.store.dispatch(F.PICK_SLOT_PARENT_END,{lastTool:this.lastTool}),this.store.historyEndMerge()}}],[{key:"toString",value:function(){return"SelectSlotParentController"}}]),n}(xC),CC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._downPos=void 0,e._curBoneData=void 0,e.onOverBone=function(t){e.store.commit(G.OVER_BONE,t)},e.onOutBone=function(){e.store.commit(G.OVER_BONE,0)},e}return f(n,[{key:"start",value:function(){var e=this.store.state.runtime.editing.selectedSlotIds,t=this.store.state.runtime.editing.selectedBoneIds;if(e.length>0&&this.store.dispatch(F.SELECT_SLOTS,[]),t.length>1)this.store.dispatch(V.SELECT_BONES,[t[0]]);else if(0===t.length){var n=this.store.getCurArmature(),r=PT.getRootBone(n);this.store.dispatch(V.SELECT_BONES,[r.id])}this.view.on(q.OVER_BONE,this.onOverBone,this),this.view.on(q.OUT_BONE,this.onOutBone,this),this._addNotification(X.MOUSE_DOWN,this.mouseDown)}},{key:"stop",value:function(){this.view.off(q.OVER_BONE,this.onOverBone),this.view.off(q.OUT_BONE,this.onOutBone),this._removeNotification(X.MOUSE_DOWN,this.mouseDown)}},{key:"mouseMove",value:function(e){var t=e.data.stagePos,n=vp.radianBetweenLineAndX(this._downPos,t),r=vp.distanceBetweenPoints(this._downPos,t),i=Re(Re({},this._curBoneData.globalTransform),{},{skewX:n,skewY:n});this.store.dispatch(V.UPDATE_GLOBAL_TRANSFORMS,b({},this._curBoneData.id,{global:i,diffKeys:["skewX","skewY"]}));var o=this.store.getCurArmature();this.store.commit(G.UPDATE_PROPERTIES,{armatureId:o.id,bones:b({},this._curBoneData.id,{length:r})})}},{key:"mouseUp",value:function(e){this._removeNotification(X.MOUSE_MOVE,this.mouseMove),this._removeNotification(X.MOUSE_UP,this.mouseUp),this.model.historyEndMerge()}},{key:"mouseDown",value:function(e){var t=this.store.state.editor.over.overBone;if(t>0)this.store.dispatch(V.SELECT_ONE_BONE,[t]);else{var n=e.data.stagePos;this._downPos=n;var r=this.store.getCurArmature(),i=this.store.state.runtime.editing.selectedBoneIds;if(0===i.length)return;var o=PT.getBoneById(r,i[0]),a=vp.transformInverseApplyPoint(o.globalTransform,n),s=PT.createBoneName("bone",r),l={id:this.store.getId(),name:s,parentId:o.id,length:0,transform:{x:a.x,y:a.y,scaleX:1,scaleY:1,skewX:0,skewY:0}};if((e.data.nativeEvent.ctrlKey||e.data.nativeEvent.metaKey)&&o){this.model.historyBeginMerge();var u={x:o.globalTransform.x,y:o.globalTransform.y},c=e.data.stagePos,h=vp.radianBetweenLineAndX(u,c),d=vp.distanceBetweenPoints(u,c),f=Re(Re({},o.globalTransform),{},{skewX:h,skewY:h});this.store.dispatch(V.UPDATE_GLOBAL_TRANSFORMS,b({},o.id,{global:f,diffKeys:["skewX","skewY"]}));var p=this.store.getCurArmature();this.store.commit(G.UPDATE_PROPERTIES,{armatureId:p.id,bones:b({},o.id,{length:d})}),this._curBoneData=l;var v=vp.transformInverseApplyPoint(f,c);l.transform.x=v.x,l.transform.y=v.y,this.store.dispatch(V.ADD_BONE,{armatureId:p.id,bone:l}),this.model.historyEndMerge()}else this.model.historyBeginMerge(),this._addNotification(X.MOUSE_MOVE,this.mouseMove),this._addNotification(X.MOUSE_UP,this.mouseUp),this._curBoneData=l,this.store.dispatch(V.ADD_BONE,{armatureId:r.id,bone:l})}}}],[{key:"toString",value:function(){return"StageToolAddBoneController"}}]),n}(Uk),AC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._downPos=void 0,e._curBoneData=void 0,e.poseHandler=void 0,e.boneChain=[],e.poseChain=[],e.boneSlotSelectController=void 0,e.maxChainBones=[],e}return f(n,[{key:"start",value:function(){this.boneSlotSelectController=Hk.getInstance(Hk),this._addNotification(G.SELECT_BONES,this.onSelectBones),this._addNotification(G.UPDATE_LOCAL_TRANSFORMS,this.updatePoseHandler),this._addNotification(M.AUTO_KEY,this.updatePoseHandler),this._addNotification(G.UPDATE_CACHE_TRANSFORMS,this.updatePoseHandler),this._addNotification(Q.UPDATE_FRAME,this.updatePoseHandler),this.poseHandler=this.view.poseHandler,this.poseHandler.on("mousedown",this.poseMouseDown,this),this.updateSelectedBone()}},{key:"stop",value:function(){this._removeNotification(G.SELECT_BONES,this.onSelectBones),this._removeNotification(G.UPDATE_LOCAL_TRANSFORMS,this.updatePoseHandler),this._removeNotification(M.AUTO_KEY,this.updatePoseHandler),this._removeNotification(G.UPDATE_CACHE_TRANSFORMS,this.updatePoseHandler),this._removeNotification(Q.UPDATE_FRAME,this.updatePoseHandler),this.poseHandler.off("mousedown",this.poseMouseDown,this),this.poseMouseUp(),this.view&&this.view.hidePoseHandler(),this.poseHandler=null}},{key:"onSelectBones",value:function(){this.updateSelectedBone()}},{key:"updateSelectedBone",value:function(){var e=this.store.state.runtime.editing.selectedBoneIds,t=this.store.getCurArmature();if(this.maxChainBones=PT.getMaxChainBones(t,e),this.boneChain=[],this.maxChainBones&&this.maxChainBones.length>0)for(var n=0;n<this.maxChainBones.length;n++)this.boneChain.push(t.bones.map[this.maxChainBones[n]]);this.updatePoseHandler()}},{key:"updatePoseHandler",value:function(){if(this.maxChainBones&&this.maxChainBones.length>0){var e=this.store.state.runtime.editing.editMode,t=this.store.getCurArmature(),n=this.maxChainBones[this.maxChainBones.length-1],r=t.bones.map[n],i=PT.getBoneTailPosition(r,t,e);this.view.showPoseHandler(i.x,i.y)}else this.view.hidePoseHandler()}},{key:"poseMouseDown",value:function(e){this.model.historyBeginMerge(),this.boneSlotSelectController.reFrameSelectEnable=!1,this.boneSlotSelectController.overEnable=!1,this.poseHandler.poseType=Lk.SELECT;var t=this.model.state.editor.stage.mouseStageX,n=this.model.state.editor.stage.mouseStageY;this.poseChain=this.createPoseChainData(this.boneChain,{x:t,y:n}),this._addNotification(X.MOUSE_MOVE,this.poseMouseMove),this._addNotification(X.MOUSE_UP,this.poseMouseUp)}},{key:"poseMouseUp",value:function(){this._removeNotification(X.MOUSE_MOVE,this.poseMouseMove),this._removeNotification(X.MOUSE_UP,this.poseMouseUp),this.boneSlotSelectController.reFrameSelectEnable=!0,this.boneSlotSelectController.overEnable=!0,this.poseHandler.poseType=Lk.NORMAL,this.model.historyEndMerge()}},{key:"poseMouseMove",value:function(){var e=this.model.state.editor.stage.mouseStageX,t=this.model.state.editor.stage.mouseStageY;this.poseChain=this.createPoseChainData(this.boneChain,{x:e,y:t}),this.modifyBoneRotation(this.boneChain,this.poseChain)}},{key:"modifyBoneRotation",value:function(e,t){var n=0,r=[],i=e[0],o=this.store.getCurArmature();for(n=0;n<t.length;n++){if(n<1)if(i.parentId>0&&!1!==i.inheritRotation){var a=o.bones.map[i.parentId];t[n].localRotation=t[n].rotation-180*a.globalTransform.skewX/Math.PI}else t[n].localRotation=t[n].rotation;else!1!==e[n].inheritRotation?t[n].localRotation=t[n].rotation-(t[n-1].rotation+t[n-1].initialRotation):t[n].localRotation=t[n].rotation;t[n].localRotation=t[n].localRotation+t[n].initialRotation,t[n].localRotation>180&&(t[n].localRotation=t[n].localRotation-360),t[n].localRotation<-180&&(t[n].localRotation=360+t[n].localRotation),r[n]=t[n].localRotation*Math.PI/180}var s={};for(n=0;n<e.length;n++){var l=e[n],u=Re({},l.transform);u.skewX=r[n],u.skewY=r[n],s[l.id]={local:u,diffKeys:["skewX","skewY"]}}this.store.dispatch(V.UPDATE_LOCAL_TRANSFORMS,s)}},{key:"createPoseChainData",value:function(e,t){var n=1,r=[],i=0;for(n=0;n<e.length;n++){var o=e[n],a=new IC;a.x=o.globalTransform.x,a.y=o.globalTransform.y,e[n+1]?(a.bone=e[n],a.child=e[n+1],a.setRotation(e[n+1].globalTransform.x,e[n+1].globalTransform.y)):(a.bone=e[n],a.child=null,a.rotation=180*o.globalTransform.skewX/Math.PI),i+=a.length,a.initialRotation=180*o.globalTransform.skewY/Math.PI-a.rotation,r[e.length-n-1]=a}if(vp.distanceBetweenPoints(t,e[0].globalTransform)>=i){var s=t.x-e[0].globalTransform.x,l=t.y-e[0].globalTransform.y,u=Math.atan2(l,s);for(n=0;n<r.length;n++)r[n].rotation=180*u/Math.PI}else this.segmentLoop(r,t);return r.reverse(),r}},{key:"segmentLoop",value:function(e,t){var n=0,r=this.reach(e[0],t.x,t.y);for(n=1;n<e.length;n++){var i=e[n];r=this.reach(i,r.x,r.y)}for(n=e.length-1;n>0;n--){var o=e[n-1],a=e[n];this.position(o,a)}}},{key:"reach",value:function(e,t,n){var r=t-e.x,i=n-e.y,o=Math.atan2(i,r);return e.rotation=180*o/Math.PI,{x:t-(this.getPin(e).x-e.x),y:n-(this.getPin(e).y-e.y)}}},{key:"position",value:function(e,t){e.x=this.getPin(t).x,e.y=this.getPin(t).y}},{key:"getPin",value:function(e){var t=e.rotation,n=e.x,r=e.y,i=this.getSegmentLength(e),o=t*Math.PI/180;return{x:n+Math.cos(o)*i,y:r+Math.sin(o)*i}}},{key:"getSegmentLength",value:function(e){var t=e.bone,n=e.child;if(t){if(n){var r=n.globalTransform.x-t.globalTransform.x,i=n.globalTransform.y-t.globalTransform.y,o=vp.transformApplyPoint(t.globalTransform,{x:r,y:i}),a=o.x-t.globalTransform.x,s=o.y-t.globalTransform.y;return Math.sqrt(a*a+s*s)}var l=t.length,u=vp.transformApplyPoint(t.globalTransform,{x:l,y:0}),c=u.x-t.globalTransform.x,h=u.y-t.globalTransform.y;return Math.sqrt(c*c+h*h)}return 0}}],[{key:"toString",value:function(){return"StageToolPoseBoneController"}}]),n}(Uk),IC=function(){function e(){u(this,e),this.x=void 0,this.y=void 0,this.rotation=void 0,this.initialRotation=void 0,this.localRotation=void 0,this.length=void 0,this.bone=void 0,this.child=void 0}return f(e,[{key:"setRotation",value:function(e,t){var n=e-this.x,r=t-this.y;this.rotation=180*Math.atan2(r,n)/Math.PI}}]),e}(),OC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).boneTransformController=void 0,e.boneSlotSelectController=void 0,e.stageToolAddBoneController=void 0,e.stageToolPoseBoneController=void 0,e.ikSelectBoneController=void 0,e.selectBoneParentController=void 0,e.selectSlotParentController=void 0,e.riggingController=void 0,e.weightController=void 0,e}return f(n,[{key:"start",value:function(){this.boneTransformController=uC.getInstance(uC),this.boneSlotSelectController=Hk.getInstance(Hk),this.stageToolAddBoneController=CC.getInstance(CC),this.stageToolAddBoneController.initialize(this.store,this.view.getView(oS)),this.stageToolPoseBoneController=AC.getInstance(AC),this.stageToolPoseBoneController.initialize(this.store,this.view.getView(Bk)),this.ikSelectBoneController=EC.getInstance(EC),this.ikSelectBoneController.initialize(this.store,this.view.getView(oS)),this.selectBoneParentController=TC.getInstance(TC),this.selectBoneParentController.initialize(this.store,this.view.getView(oS)),this.selectSlotParentController=kC.getInstance(kC),this.selectSlotParentController.initialize(this.store,this.view.getView(oS)),this.riggingController=SC.getInstance(SC),this.riggingController.initialize(this.store,this.view.getView(oS)),this.weightController=wC.getInstance(wC),this.weightController.initialize(this.store,this.view),this._addNotification(V.PICK_IK_TARGET,this.onPickIKTarget),this._addNotification(V.PICK_BONE_PARENT,this.onPickBoneParent),this._addNotification(F.PICK_SLOT_PARENT,this.onPickBoneParent),this._addNotification(W.SWITCH_TOOL,this.onSwitchTool)}},{key:"onPickIKTarget",value:function(e){var t=this.store.state.runtime.editing.lastStageTool;this.ikSelectBoneController.lastTool=t}},{key:"onPickBoneParent",value:function(e){var t=this.store.state.runtime.editing.lastStageTool;this.selectBoneParentController.lastTool=t}},{key:"onSwitchTool",value:function(e){var t=this.store.state.runtime.editing.stageTool;switch(this.boneSlotSelectController.enable=!1,this.boneTransformController.enable=!1,this.stageToolAddBoneController.enable=!1,this.stageToolPoseBoneController.enable=!1,this.ikSelectBoneController.enable=!1,this.boneSlotSelectController.reFrameSelectEnable=!1,this.boneSlotSelectController.selectSlotEnable=!0,this.selectBoneParentController.enable=!1,this.selectSlotParentController.enable=!1,this.riggingController.enable=!1,this.weightController.enable=!1,t){case J.SELECT:this.boneTransformController.enable=!0,this.boneSlotSelectController.enable=!0;break;case J.ADD_BONE:this.stageToolAddBoneController.enable=!0;break;case J.POSE_TOOL:this.boneSlotSelectController.enable=!0,this.boneSlotSelectController.selectSlotEnable=!1,this.boneSlotSelectController.reFrameSelectEnable=!0,this.stageToolPoseBoneController.enable=!0;break;case J.IK_PICK_TARGET_TOOL:this.ikSelectBoneController.enable=!0;break;case J.PICK_BONE_PARENT_TOOL:this.selectBoneParentController.enable=!0;break;case J.PICK_SLOT_PARENT_TOOL:this.selectSlotParentController.enable=!0;break;case J.MESH_EDIT_TOOL:break;case J.RIGGING_TOOL:this.riggingController.enable=!0;break;case J.WEIGHT_TOOL:this.weightController.enable=!0}}}],[{key:"toString",value:function(){return"StageToolsController"}}]),n}(Uk),PC=function(e){return e[e.INIT=100]="INIT",e[e.SAVE=101]="SAVE",e[e.SHORTCUT=102]="SHORTCUT",e[e.LOAD_PARTICLE=103]="LOAD_PARTICLE",e[e.OPEN_VIEW=104]="OPEN_VIEW",e[e.RESET_VIEW=105]="RESET_VIEW",e[e.RIGHT_MENU=106]="RIGHT_MENU",e[e.CREATE_MOVIECLIP=107]="CREATE_MOVIECLIP",e[e.PREVIEW=108]="PREVIEW",e}({}),MC=9.99,RC=.1,NC=function(e){return e.UPDATE_LABEL_OFFSET="UPDATE_LABEL_OFFSET",e.EVENT_COLLAPSE="EVENT_COLLAPSE",e}({}),DC=function(e){return e[e.UPDATE_FRAME=700]="UPDATE_FRAME",e[e.OVER_FRAME=701]="OVER_FRAME",e[e.UPDATE_SELECT_FRAME=702]="UPDATE_SELECT_FRAME",e[e.UPDATE_FRAME_BLOCK=703]="UPDATE_FRAME_BLOCK",e[e.UPDATE_FRAME_BLOCK_START=704]="UPDATE_FRAME_BLOCK_START",e[e.UPDATE_FRAME_BLOCK_END=705]="UPDATE_FRAME_BLOCK_END",e[e.MOVE_FRAME=706]="MOVE_FRAME",e[e.MOVE_FRAME_COMPLETED=707]="MOVE_FRAME_COMPLETED",e[e.REMOVE_FRAMES=708]="REMOVE_FRAMES",e[e.UPDATE_LOOP=709]="UPDATE_LOOP",e[e.UPDATE_SCALE=710]="UPDATE_SCALE",e[e.UPDATE_OFFSET=711]="UPDATE_OFFSET",e[e.UPDATE_NAME=712]="UPDATE_NAME",e}({}),LC=function(e){return e.MOVE_BLOCK="MOVE_BLOCK",e.SCALE_LEFT_BLOCK="SCALE_LEFT_BLOCK",e.SCALE_RIGHT_BLOCK="SCALE_RIGHT_BLOCK",e}({}),FC=function(e){return e[e.UNDO=200]="UNDO",e[e.REDO=201]="REDO",e[e.DELETE=202]="DELETE",e[e.CREATE_MOVIECLIP=203]="CREATE_MOVIECLIP",e[e.SWITCH_MODE=204]="SWITCH_MODE",e[e.SWITCH_MODE_POSE=205]="SWITCH_MODE_POSE",e[e.SWITCH_MODE_ANIMATION=206]="SWITCH_MODE_ANIMATION",e[e.COPY=207]="COPY",e[e.PASTE=208]="PASTE",e[e.CUT=209]="CUT",e}({}),BC=function(){function e(){u(this,e),this.fps=33,this.tweenQueue=[],this.ticker=void 0,this.working=!1}return f(e,[{key:"setTicker",value:function(e){this.ticker=e}},{key:"to",value:function(e,t,n,r){var i=this.getTween(e,t);if(null==i){var o=e[t];i={target:e,property:t,to:n,time:r,from:o,curValue:o,interval:(n-o)/(r/this.fps)},this.tweenQueue.push(i)}else{var a=(n-e[t])/(r/this.fps);i.to=n,i.time=r,i.interval=a}this.working||this.ticker&&(this.working=!0,this.ticker.add(this.tick,this))}},{key:"getTween",value:function(e,t){for(var n=0,r=this.tweenQueue.length;n<r;n++){var i=this.tweenQueue[n];if(i.target===e&&i.property===t)return i}}},{key:"tick",value:function(e){var t;if(this.tweenQueue.length>0)for(var n=0,r=this.tweenQueue.length;n<r;n++){var i=this.tweenQueue[n];this.runTween(i,e)&&(this.tweenQueue.splice(n,1),n--,r--)}else null===(t=this.ticker)||void 0===t||t.remove(this.tick,this),this.working=!1}},{key:"runTween",value:function(e,t){var n=e.curValue>e.to,r=e.curValue+e.interval,i=!1;return n===r>e.to&&r!==e.to||(r=e.to,i=!0),e.target[e.property]=r,e.curValue=r,i}}],[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}},{key:"setTicker",value:function(t){e.instance.setTicker(t)}},{key:"to",value:function(t,n,r,i){e.instance.to(t,n,r,i)}}]),e}();BC._instance=void 0;var UC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).justStageRightDown=!0,e.downStageX=0,e.downStageY=0,e.downCenterX=0,e.downCenterY=0,e.rightDownX=0,e.rightDownY=0,e.targetScale=1,e._stageScale=1,e.delta=0,e._tweenCenterX=0,e._tweenCenterY=0,e.onStageMove=function(t){e.view.setCenter(t.data.x,t.data.y)},e.onStageScale=function(t){e.view.setScale(t.data)},e.onStageResize=function(t){var n=e.store.state.editor.stage,r=n.width,i=n.height,o=.5*(r-n.cameraWidth),a=.5*(i-n.cameraHeight);BC.to(g(e),"tweenCenterX",o,500),BC.to(g(e),"tweenCenterY",a,500),e._removeNotification(X.UPDATE_SIZE,e.onStageResize)},e.onStageRestore=function(t){var n=e.store.state.editor.stage,r=n.width,i=n.height,o=.5*(r-n.cameraWidth),a=.5*(i-n.cameraHeight);BC.to(g(e),"tweenCenterX",o,500),BC.to(g(e),"tweenCenterY",a,500),BC.to(g(e),"onlyScale",1,500)},e.onStageMouseRightMove=function(t){if(e.justStageRightDown)e.justStageRightDown=!1,e.rightDownX=t.clientX,e.rightDownY=t.clientY;else{var n=t.clientX-e.rightDownX,r=t.clientY-e.rightDownY;e.store.commit(X.UPDATE_POSITION,{x:e.downCenterX+n,y:e.downCenterY+r})}},e.onSheetMouseWheel=function(t){var n=t.wheelDelta;e.delta=5,e.targetScale=n>0?1.1*e.targetScale:.9*e.targetScale,e.targetScale>MC?e.targetScale=MC:e.targetScale<RC&&(e.targetScale=RC),BC.to(g(e),"stageScale",e.targetScale,500)},e}return f(n,[{key:"start",value:function(){this.view.stage.eventMode="dynamic",this.view.stage.on("rightdown",this.onStageMouseRightDown,this),this.view.stage.on("rightup",this.onStageMouseRightUp,this),this.view.stage.on("rightupoutside",this.onStageMouseRightUp,this),this.view.view.addEventListener("mouseover",this.onStageMouseOver.bind(this)),this.view.view.addEventListener("mouseout",this.onStageMouseOut.bind(this)),this._addNotification(X.UPDATE_POSITION,this.onStageMove),this._addNotification(X.UPDATE_SCALE,this.onStageScale),this._addNotification(X.RESET_SCALE,this.onStageRestore)}},{key:"stop",value:function(){}},{key:"stageScale",get:function(){return this._stageScale},set:function(e){this._stageScale=e,this.model&&(this.delta>0?this.scaleCenterMouse(e):this.scaleCenterAniMouse(e))}},{key:"onlyScale",get:function(){return this._stageScale},set:function(e){this._stageScale=e,this.store.commit(X.UPDATE_SCALE,e)}},{key:"tweenCenterX",get:function(){return this._tweenCenterX},set:function(e){this._tweenCenterX=e}},{key:"tweenCenterY",get:function(){return this._tweenCenterY},set:function(e){this._tweenCenterY=e,this.store.commit(X.UPDATE_POSITION,{x:this._tweenCenterX,y:this._tweenCenterY})}},{key:"scaleCenterMouse",value:function(e){var t=this.store.state.editor.stage.mouseCanvasX,n=this.store.state.editor.stage.mouseCanvasY;this.scaleInViewCenter(e,{x:t,y:n})}},{key:"scaleCenterAniMouse",value:function(e){var t=this.store.state.editor.stage,n=t.width-t.mouseCanvasX,r=t.height-t.mouseCanvasY;this.scaleInViewCenter(e,{x:n,y:r})}},{key:"scaleInViewCenter",value:function(e,t){var n=this.getStagePosition(t);this.store.commit(X.UPDATE_SCALE,e);var r=this.getCanvasPosition(n),i=r.x-t.x,o=r.y-t.y,a=this.store.state.editor.stage.x-i,s=this.store.state.editor.stage.y-o;this.store.commit(X.UPDATE_POSITION,{x:a,y:s})}},{key:"onStageMouseRightDown",value:function(e){this.justStageRightDown=!0,this.downStageX=0,this.downStageY=0,this.downCenterX=this.store.state.editor.stage.x,this.downCenterY=this.store.state.editor.stage.y,document.addEventListener("mousemove",this.onStageMouseRightMove)}},{key:"onStageMouseRightUp",value:function(e){this.justStageRightDown=!1,document.removeEventListener("mousemove",this.onStageMouseRightMove)}},{key:"onStageMouseOver",value:function(e){this.targetScale=this.store.state.editor.stage.scale,document.addEventListener("mousewheel",this.onSheetMouseWheel)}},{key:"onStageMouseOut",value:function(e){document.removeEventListener("mousewheel",this.onSheetMouseWheel)}},{key:"getStagePosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:(e.x-t)/r,y:(e.y-n)/r}}},{key:"getCanvasPosition",value:function(e){var t=this.store.state.editor.stage.x,n=this.store.state.editor.stage.y,r=this.store.state.editor.stage.scale;return{x:e.x*r+t,y:e.y*r+n}}}],[{key:"toString",value:function(){return"StageTransformController"}}]),n}(Uk),HC=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).stageTransformController=void 0,e.stageMouseController=void 0,e.stageBoneController=void 0,e.stageSlotController=void 0,e.boneTransformController=void 0,e.boneSlotSelectController=void 0,e.stageToolsController=void 0,e.stageMeshController=void 0,e.onSelectMeshPoint=function(){e.store.state.runtime.editing.selectedMeshPointIds.length>0?(e.boneSlotSelectController.pause(),e.boneTransformController.pause()):(e.boneSlotSelectController.resume(),e.boneTransformController.resume())},e}return f(n,[{key:"start",value:function(){this.stageTransformController=UC.getInstance(UC),this.stageTransformController.initialize(this.store,this.view),this.stageTransformController.enable=!0,this.stageMouseController=bC.getInstance(bC),this.stageMouseController.initialize(this.store,this.view),this.stageMouseController.enable=!0,this.stageBoneController=cC.getInstance(cC);var e=this.view.getView(oS);e&&(this.stageBoneController.initialize(this.store,e),this.stageBoneController.enable=!0),this.stageSlotController=_C.getInstance(_C);var t=this.view.getView(Ik);t&&(this.stageSlotController.initialize(this.store,t),this.stageSlotController.enable=!0),this.boneTransformController=uC.getInstance(uC);var n=this.view.getView(Bk);n&&(this.boneTransformController.initialize(this.store,n),this.boneTransformController.enable=!0),this.stageMeshController=yC.getInstance(yC),this.stageMeshController.initialize(this.store,this.view),this.stageMeshController.enable=!0,this.boneSlotSelectController=Hk.getInstance(Hk),this.boneSlotSelectController.initialize(this.store,this.view),this.boneSlotSelectController.enable=!0,this.stageToolsController=OC.getInstance(OC),this.stageToolsController.initialize(this.store,this.view),this.stageToolsController.enable=!0,this._addNotification(X.UPDATE_SIZE,this.updateSize),this._addNotification(H.SELECT_MESH_POINTS,this.onSelectMeshPoint)}},{key:"updateSize",value:function(e){var t=this.store.state.editor.stage,n=t.width,r=t.height;this.view.resizeStage(n,r)}}],[{key:"toString",value:function(){return"StageController"}}]),n}(Uk),jC=function(e){return e.SHORT="short",e.MIDDLE="middle",e.LONG="long",e}({});function zC(e,t,n){var r=[],i=10*n,o=1;if(i>10){var a=Math.floor(n);a>1&&(i/=a,o*=a)}else{for(var s=i;s<=5;)s*=2,o/=2;i=s}for(var l=e-t,u=Math.ceil(l/i),c=t,h=Math.ceil(c/i),d=0;d<u;d++){var f=t+d*i;d%10===0?r.push({type:jC.LONG,pos:f,value:Math.round(10*d/o).toString()}):d%5===0?r.push({type:jC.MIDDLE,pos:f}):r.push({type:jC.SHORT,pos:f})}for(var p=1;p<h;p++){var v=t-p*i;p%10===0?r.push({type:jC.LONG,pos:v,value:"-"+Math.round(10*p/o)}):p%5===0?r.push({type:jC.MIDDLE,pos:v}):r.push({type:jC.SHORT,pos:v})}return r}var VC=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e))._rulerSVG=void 0,r._pen=void 0,r._textPool=void 0,r.fontSize=9,r.textColor="#888888",r.refs=void 0,r.state={rule:zC(e.size,e.offset,e.scale),scale:e.scale},r.init(),r}return f(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({rule:zC(e.size,e.offset,e.scale),scale:e.scale})}},{key:"setData",value:function(e,t,n){this.setState({rule:zC(e,t,n),scale:n})}},{key:"init",value:function(){this.initSVG()}},{key:"render",value:function(){for(var e=[],t=this.props.vertical?"v-":"h-",n=0,r=this.state.rule.length;n<r;n++){var i=this.state.rule[n];e.push(this.getRuleItem(n,i,this.props.vertical)),i.value&&e.push(this.getRuleLabel(n,i,this.props.vertical))}return this.drawSVGRuler(),(0,ff.jsx)("div",{className:t+"ruler",ref:"ruler"})}},{key:"componentDidMount",value:function(){this.refs.ruler.appendChild(this._rulerSVG)}},{key:"getRuleItem",value:function(e,t,n){return n?(0,ff.jsx)("div",{className:t.type,style:{position:"absolute",top:t.pos-2}},e):(0,ff.jsx)("div",{className:t.type,style:{position:"absolute",left:t.pos}},e)}},{key:"getRuleLabel",value:function(e,t,n){return n?(0,ff.jsx)("div",{className:"label",style:{position:"absolute",top:t.pos-2},children:t.value},e+.5):(0,ff.jsx)("div",{className:"label",style:{position:"absolute",left:t.pos},children:t.value},e+.5)}},{key:"initSVG",value:function(){var e="http://www.w3.org/2000/svg";this._rulerSVG=document.createElementNS(e,"svg"),this._rulerSVG.style.position="absolute",this._rulerSVG.style.pointerEvents="none",this._rulerSVG.style.width="100%",this._rulerSVG.style.height="100%",this._rulerSVG.style.top=this._rulerSVG.style.left="0px",this._rulerSVG.style.shapeRendering="crispEdges",this._pen=document.createElementNS(e,"path"),this._pen.style.pointerEvents="none",this._pen.style.fill="none",this._pen.style.strokeWidth="1",this._pen.style.stroke="#bbbbbb",this._textPool=[],this._rulerSVG.appendChild(this._pen)}},{key:"drawSVGRuler",value:function(){if(this._pen){var e="",t=10,n=0;this.hideText();for(var r=0,i=this.state.rule.length;r<i;r++){var o=this.state.rule[r],a=o;if(t=a.type===jC.LONG?0:a.type===jC.MIDDLE?5:10,this.props.vertical?e+="M ".concat(t," ").concat(a.pos," H ").concat(20," "):e+="M ".concat(a.pos," ").concat(t," V ").concat(20," "),o.value&&a){var s=this.getText(n++);s.textContent=((null===a||void 0===a?void 0:a.value)||0).toString(),this.props.vertical?s.style.transform="translate(".concat(10,"px, ",a.pos-2,"px) rotate(-90deg)"):s.style.transform="translate(".concat(a.pos+2,"px,",10,"px)"),s.style.opacity="1"}}this._pen.setAttribute("d",e)}}},{key:"getText",value:function(e){if(this._textPool||(this._textPool=[]),this._textPool.length>e)return this._textPool[e];var t=document.createElementNS("http://www.w3.org/2000/svg","text");return t.style.position="absolute",t.style.fill=this.textColor,t.style.fontSize=this.fontSize+"px",this._rulerSVG.appendChild(t),this._textPool.push(t),t}},{key:"hideText",value:function(){this._textPool||(this._textPool=[]);for(var e=0,t=this._textPool.length;e<t;e++){var n=this._textPool[e];n&&(n.style.opacity="0")}}}]),n}(a.Component),GC=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).BASE_SIZE=100,r._app=void 0,r._bgGraphic=void 0,r._brt=void 0,r._rt=void 0,r._bg=void 0,r._cross=void 0,r._center=void 0,r._bgOffX=0,r._bgOffY=0,r._bgSize=r.BASE_SIZE,r._brt=new gy({width:200,height:200,scaleMode:Bp.LINEAR,resolution:1}),r._rt=new Ty(r._brt),r._bg=new $w(r._rt),r._bgGraphic=new iw,r._cross=new iw,r._center=new bg(0,0),r._width=0,r._height=0,r.addChild(r._bg),r.addChild(r._cross),r._app=e,r.app=e,r}return f(n,[{key:"app",set:function(e){this._app=e,this.drawTexture(1)}},{key:"resizeStage",value:function(e,t){this._width===e&&this._height===t||(this._width=e,this._height=t,this._bg.width=this._width+this.BASE_SIZE*MC*2,this._bg.height=this._height+this.BASE_SIZE*MC*2,this.setCenter(this._center.x,this._center.y))}},{key:"setCenter",value:function(e,t){this._center.set(e,t),this.drawCross();var n=2*this._bgSize;this._bgOffX=e%n,this._bgOffY=t%n,this._bgOffX<0&&(this._bgOffX+=n),this._bgOffY<0&&(this._bgOffY+=n),this._bg.x=-n+this._bgOffX,this._bg.y=-n+this._bgOffY}},{key:"setScale",value:function(e){var t=this.BASE_SIZE*e;this._bgSize=t,this._bg.tileScale.set(e,e),this.setCenter(this._center.x,this._center.y)}},{key:"drawTexture",value:function(e){var t=this.BASE_SIZE*e;this._brt.resize(2*t,2*t),this._bgGraphic.beginFill(yp.BG_TRANSPARENT_F),this._bgGraphic.drawRect(0,0,t,t),this._bgGraphic.drawRect(t,t,t,t),this._bgGraphic.endFill(),this._bgGraphic.beginFill(yp.BG_TRANSPARENT_B),this._bgGraphic.drawRect(0,t,t,t),this._bgGraphic.drawRect(t,0,t,t),this._bgGraphic.endFill(),this._app&&this._app.renderer.render(this._bgGraphic,{renderTexture:this._rt})}},{key:"drawCross",value:function(){this._cross.clear(),this._cross.lineStyle(1,0,1,1,!1);this._center.x>=0&&this._center.x<=this._width&&(this._cross.moveTo(this._center.x-0,0),this._cross.lineTo(this._center.x-0,this._height)),this._center.y>=0&&this._center.y<=this.height&&(this._cross.moveTo(0,this._center.y+0),this._cross.lineTo(this._width,this._center.y+0))}}]),n}(c_),WC=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).pixiTexture={},r.store=void 0,r._resources=[],r.store=e,r}return f(n,[{key:"addResource",value:function(e){this._resources.push(e)}},{key:"getAssetById",value:function(e,t){for(var n in e){var r=e[n];if(r){if(r.id===t)return r;if(r.children)for(var i=0,o=r.children.length;i<o;i++){var a=r.children[i];if(a.id===t)return a}}}}},{key:"getImageAsset",value:function(){var e=Ee(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.store.rootState.runtime.dragonbones.assetMap,!(r=this.getAssetById(n,t))){e.next=30;break}e.t0=r.type,e.next=e.t0===E.JPEG||e.t0===E.JPG||e.t0===E.PNG?6:e.t0===E.SUB_TEXTURE?17:28;break;case 6:return e.prev=6,e.next=9,this.getTextureByFileId(r.fileIds[0]);case 9:case 16:case 20:case 27:case 32:return e.abrupt("return",e.sent);case 12:return e.prev=12,e.t1=e.catch(6),e.next=16,this.getMissingTexture();case 17:return e.prev=17,e.next=20,this.getSubTextureAsset(r);case 23:return e.prev=23,e.t2=e.catch(17),e.next=27,this.getMissingTexture();case 28:e.next=33;break;case 30:return e.next=32,this.getMissingTexture();case 33:case"end":return e.stop()}}),e,this,[[6,12],[17,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTextureByFileId",value:function(){var e=Ee(_e().mark((function e(t){var n=this;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var i=n.store.rootState.library.files[t];if(i){var o=i.id;if(n.pixiTexture[o])e(n.pixiTexture[o]);else{var a=n.store.state.library.files[o];if(a)if(a.data){var s=wy.from(a.data);n.pixiTexture[o]=s,e(n.pixiTexture[o])}else a.url&&wy.fromURL(a.url).then((function(t){n.pixiTexture[o]=t,e(n.pixiTexture[o])})).catch((function(e){r(e)}));else r()}}else r()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMissingTexture",value:function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){n.missingTexture?e(n.missingTexture):setTimeout((function(){n.missingTexture?e(n.missingTexture):t()}),5e3)})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSubTextureAsset",value:function(){var e=Ee(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getTextureByFileId(t.fileIds[1]);case 3:if(n=e.sent,r=t.data,!n||!n.baseTexture){e.next=7;break}return e.abrupt("return",new wy(n.baseTexture,new xg(r.x,r.y,r.width,r.height)));case 7:e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(0),e.next=13,this.getMissingTexture();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()}]),n}(vv);WC.missingTexture=void 0;var XC=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e))._parentHtml=void 0,r._layers=void 0,r.registerLayers=[GC,Ik,oS,hC,Bk],r._layers=[],r.initStage((null===e||void 0===e?void 0:e.width)||100,(null===e||void 0===e?void 0:e.height)||100),BC.setTicker(r.ticker),r}return f(n,[{key:"getView",value:function(e){for(var t=0,n=this._layers.length;t<n;t++){var r=this._layers[t];if(r instanceof e)return r}}},{key:"setScale",value:function(e){for(var t=0,n=this._layers.length;t<n;t++)this._layers[t].setScale(e)}},{key:"setCenter",value:function(e,t){for(var n=0,r=this._layers.length;n<r;n++)this._layers[n].setCenter(e,t)}},{key:"resizeStage",value:function(e,t){this.renderer.resize(e,t);for(var n=0,r=this._layers.length;n<r;n++)this._layers[n].resizeStage(e,t)}},{key:"initStage",value:function(e,t){this.initLayers(),this.resizeStage(e,t),this.renderMissingTexture()}},{key:"initLayers",value:function(){for(var e=0,t=this.registerLayers.length;e<t;e++){var n=new(0,this.registerLayers[e])(this);this._layers.push(n),this.stage.addChild(n)}}},{key:"addToContainer",value:function(e){e&&(this._parentHtml=e,e.appendChild(this.view))}},{key:"renderMissingTexture",value:function(){var e=200,t=200,n=16711680,r="Missing",i=new gy({width:e,height:t,scaleMode:Bp.LINEAR,resolution:1}),o=new Ty(i),a=new c_,s=new iw;s.lineStyle({width:10,color:n,alpha:.5}),s.beginFill(n,.1),s.drawRect(0,0,e,t),s.endFill();var l=new Rw(r,{align:"center",fill:n});l.x=.5*(e-l.width),l.y=.5*(t-l.height),a.addChild(s),a.addChild(l),this.renderer.render(a,{renderTexture:o}),WC.missingTexture=o}}]),n}(G_),YC=function(e){var t=e.name,n=e.bgColor;return(0,ff.jsx)("img",{className:"noDrag",style:{backgroundColor:n||"transparent"},src:"./assets/icon/".concat(t,".png"),alt:"icon",width:"16",height:"16"})},KC=function(){if("undefined"===typeof navigator||"undefined"===typeof window)return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(null===e||void 0===e?void 0:e.substr(0,4))},qC=a.createContext(null);function ZC(e){return e?Array.isArray(e)?e:[e]:[]}function $C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return(arguments.length>2?arguments[2]:void 0)?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function QC(e,t,n,r){return t||(n?{motionName:"".concat(e,"-").concat(n)}:r?{motionName:r}:null)}function JC(e){return e.ownerDocument.defaultView}function eA(e){for(var t=[],n=null===e||void 0===e?void 0:e.parentElement,r=["hidden","scroll","clip","auto"];n;){var i=JC(n).getComputedStyle(n);[i.overflowX,i.overflowY,i.overflow].some((function(e){return r.includes(e)}))&&t.push(n),n=n.parentElement}return t}function tA(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Number.isNaN(e)?t:e}function nA(e){return tA(parseFloat(e),0)}function rA(e,t){var n=Re({},e);return(t||[]).forEach((function(e){if(!(e instanceof HTMLBodyElement)){var t=JC(e).getComputedStyle(e),r=t.overflow,i=t.overflowClipMargin,o=t.borderTopWidth,a=t.borderBottomWidth,s=t.borderLeftWidth,l=t.borderRightWidth,u=e.getBoundingClientRect(),c=e.offsetHeight,h=e.clientHeight,d=e.offsetWidth,f=e.clientWidth,p=nA(o),v=nA(a),m=nA(s),g=nA(l),y=tA(Math.round(u.width/d*1e3)/1e3),b=tA(Math.round(u.height/c*1e3)/1e3),_=(d-f-m-g)*y,x=(c-h-p-v)*b,E=p*b,w=v*b,T=m*y,S=g*y,k=0,C=0;if("clip"===r){var A=nA(i);k=A*y,C=A*b}var I=u.x+T-k,O=u.y+E-C,P=I+u.width+2*k-T-S-_,M=O+u.height+2*C-E-w-x;n.left=Math.max(n.left,I),n.top=Math.max(n.top,O),n.right=Math.min(n.right,P),n.bottom=Math.min(n.bottom,M)}})),n}function iA(e){var t="".concat(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),n=t.match(/^(.*)\%$/);return n?e*(parseFloat(n[1])/100):parseFloat(t)}function oA(e,t){var n=Pt(t||[],2),r=n[0],i=n[1];return[iA(e.width,r),iA(e.height,i)]}function aA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return[e[0],e[1]]}function sA(e,t){var n,r=t[0],i=t[1];return n="t"===r?e.y:"b"===r?e.y+e.height:e.y+e.height/2,{x:"l"===i?e.x:"r"===i?e.x+e.width:e.x+e.width/2,y:n}}function lA(e,t){var n={t:"b",b:"t",l:"r",r:"l"};return e.map((function(e,r){return r===t?n[e]||"c":e})).join("")}function uA(e){var t=e.prefixCls,n=e.align,r=e.arrow,i=e.arrowPos,o=r||{},s=o.className,l=o.content,u=i.x,c=void 0===u?0:u,h=i.y,d=void 0===h?0:h,f=a.useRef();if(!n||!n.points)return null;var p={position:"absolute"};if(!1!==n.autoArrow){var v=n.points[0],m=n.points[1],g=v[0],y=v[1],b=m[0],_=m[1];g!==b&&["t","b"].includes(g)?"t"===g?p.top=0:p.bottom=0:p.top=d,y!==_&&["l","r"].includes(y)?"l"===y?p.left=0:p.right=0:p.left=c}return a.createElement("div",{ref:f,className:Ko()("".concat(t,"-arrow"),s),style:p},l)}function cA(e){var t=e.prefixCls,n=e.open,r=e.zIndex,i=e.mask,o=e.motion;return i?a.createElement(ts,Ut({},o,{motionAppear:!0,visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:Ko()("".concat(t,"-mask"),n)})})):null}var hA=a.memo((function(e){return e.children}),(function(e,t){return t.cache}));var dA=hA,fA=a.forwardRef((function(e,t){var n=e.popup,r=e.className,i=e.prefixCls,o=e.style,s=e.target,l=e.onVisibleChanged,u=e.open,c=e.keepDom,h=e.onClick,d=e.mask,f=e.arrow,p=e.arrowPos,v=e.align,m=e.motion,g=e.maskMotion,y=e.forceRender,b=e.getPopupContainer,_=e.autoDestroy,x=e.portal,E=e.zIndex,w=e.onMouseEnter,T=e.onMouseLeave,S=e.ready,k=e.offsetX,C=e.offsetY,A=e.onAlign,I=e.onPrepare,O=e.stretch,P=e.targetWidth,M=e.targetHeight,R="function"===typeof n?n():n,N=u||c,D=(null===b||void 0===b?void 0:b.length)>0,L=Pt(a.useState(!b||!D),2),F=L[0],B=L[1];if(xu((function(){!F&&D&&s&&B(!0)}),[F,D,s]),!F)return null;var U=S||!u?{left:k,top:C}:{left:"-1000vw",top:"-1000vh"},H={};return O&&(O.includes("height")&&M?H.height=M:O.includes("minHeight")&&M&&(H.minHeight=M),O.includes("width")&&P?H.width=P:O.includes("minWidth")&&P&&(H.minWidth=P)),u||(H.pointerEvents="none"),a.createElement(x,{open:y||N,getContainer:b&&function(){return b(s)},autoDestroy:_},a.createElement(cA,{prefixCls:i,open:u,zIndex:E,mask:d,motion:g}),a.createElement(Ed,{onResize:A,disabled:!u},(function(e){return a.createElement(ts,Ut({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:y,leavedClassName:"".concat(i,"-hidden")},m,{onAppearPrepare:I,onEnterPrepare:I,visible:u,onVisibleChanged:function(e){var t;null===m||void 0===m||null===(t=m.onVisibleChanged)||void 0===t||t.call(m,e),l(e)}}),(function(n,s){var l=n.className,c=n.style,d=Ko()(i,l,r);return a.createElement("div",{ref:Qo(e,t,s),className:d,style:Re(Re(Re(Re({"--arrow-x":"".concat(p.x||0,"px"),"--arrow-y":"".concat(p.y||0,"px")},U),H),c),{},{boxSizing:"border-box",zIndex:E},o),onMouseEnter:w,onMouseLeave:T,onClick:h},f&&a.createElement(uA,{prefixCls:i,arrow:f,arrowPos:p,align:v}),a.createElement(dA,{cache:!u},R))}))})))}));var pA=fA,vA=a.forwardRef((function(e,t){var n=e.children,r=e.getTriggerDOMNode,i=ea(n),o=a.useCallback((function(e){$o(t,r?r(e):e)}),[r]),s=Jo(o,n.ref);return i?a.cloneElement(n,{ref:s}):n}));var mA=vA,gA=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];var yA=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pu,t=a.forwardRef((function(t,n){var r=t.prefixCls,i=void 0===r?"rc-trigger-popup":r,o=t.children,s=t.action,l=void 0===s?"hover":s,u=t.showAction,c=t.hideAction,h=t.popupVisible,d=t.defaultPopupVisible,f=t.onPopupVisibleChange,p=t.afterPopupVisibleChange,v=t.mouseEnterDelay,m=t.mouseLeaveDelay,g=void 0===m?.1:m,y=t.focusDelay,b=t.blurDelay,_=t.mask,x=t.maskClosable,E=void 0===x||x,w=t.getPopupContainer,T=t.forceRender,S=t.autoDestroy,k=t.destroyPopupOnHide,C=t.popup,A=t.popupClassName,I=t.popupStyle,O=t.popupPlacement,P=t.builtinPlacements,M=void 0===P?{}:P,R=t.popupAlign,N=t.zIndex,D=t.stretch,L=t.getPopupClassNameFromAlign,F=t.alignPoint,B=t.onPopupClick,U=t.onPopupAlign,H=t.arrow,j=t.popupMotion,z=t.maskMotion,V=t.popupTransitionName,G=t.popupAnimation,W=t.maskTransitionName,X=t.maskAnimation,Y=t.className,K=t.getTriggerDOMNode,q=Yn(t,gA),Z=S||k||!1,$=Pt(a.useState(!1),2),Q=$[0],J=$[1];xu((function(){J(KC())}),[]);var ee=a.useRef({}),te=a.useContext(qC),ne=a.useMemo((function(){return{registerSubPopup:function(e,t){ee.current[e]=t,null===te||void 0===te||te.registerSubPopup(e,t)}}}),[te]),re=Ru(),ie=Pt(a.useState(null),2),oe=ie[0],ae=ie[1],se=mh((function(e){qo(e)&&oe!==e&&ae(e),null===te||void 0===te||te.registerSubPopup(re,e)})),le=Pt(a.useState(null),2),ue=le[0],ce=le[1],he=mh((function(e){qo(e)&&ue!==e&&ce(e)})),de=a.Children.only(o),fe=(null===de||void 0===de?void 0:de.props)||{},pe={},ve=mh((function(e){var t,n,r=ue;return(null===r||void 0===r?void 0:r.contains(e))||(null===r||void 0===r||null===(t=r.getRootNode())||void 0===t?void 0:t.host)===e||e===r||(null===oe||void 0===oe?void 0:oe.contains(e))||(null===oe||void 0===oe||null===(n=oe.getRootNode())||void 0===n?void 0:n.host)===e||e===oe||Object.values(ee.current).some((function(t){return(null===t||void 0===t?void 0:t.contains(e))||e===t}))})),me=QC(i,j,G,V),ge=QC(i,z,X,W),ye=Pt(a.useState(d||!1),2),be=ye[0],_e=ye[1],xe=null!==h&&void 0!==h?h:be,Ee=mh((function(e){void 0===h&&_e(e)}));xu((function(){_e(h||!1)}),[h]);var we=a.useRef(xe);we.current=xe;var Te=mh((function(e){xe!==e&&(Ee(e),null===f||void 0===f||f(e))})),Se=a.useRef(),ke=function(){clearTimeout(Se.current)},Ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;ke(),0===t?Te(e):Se.current=setTimeout((function(){Te(e)}),1e3*t)};a.useEffect((function(){return ke}),[]);var Ae=Pt(a.useState(!1),2),Ie=Ae[0],Oe=Ae[1],Me=a.useRef(!0);xu((function(){Me.current&&!xe||Oe(!0),Me.current=!0}),[xe]);var Ne=Pt(a.useState(null),2),De=Ne[0],Le=Ne[1],Fe=Pt(a.useState([0,0]),2),Be=Fe[0],Ue=Fe[1],He=function(e){Ue([e.clientX,e.clientY])},je=function(e,t,n,r,i,o,s){var l=Pt(a.useState({ready:!1,offsetX:0,offsetY:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:i[r]||{}}),2),u=l[0],c=l[1],h=a.useRef(0),d=a.useMemo((function(){return t?eA(t):[]}),[t]),f=a.useRef({});e||(f.current={});var p=mh((function(){if(t&&n&&e){var a,l=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V,r=_.x+e,i=_.y+t,o=r+M,a=i+P,s=Math.max(r,n.left),l=Math.max(i,n.top),u=Math.min(o,n.right),c=Math.min(a,n.bottom);return Math.max(0,(u-s)*(c-l))},u=function(){te=_.y+fe,ne=te+P,re=_.x+de,ie=re+M},h=t,p=h.style.left,v=h.style.top,m=h.ownerDocument,g=JC(h),y=Re(Re({},i[r]),o);if(h.style.left="0",h.style.top="0",Array.isArray(n))a={x:n[0],y:n[1],width:0,height:0};else{var b=n.getBoundingClientRect();a={x:b.x,y:b.y,width:b.width,height:b.height}}var _=h.getBoundingClientRect(),x=g.getComputedStyle(h),E=x.width,w=x.height,T=m.documentElement,S=T.clientWidth,k=T.clientHeight,C=T.scrollWidth,A=T.scrollHeight,I=T.scrollTop,O=T.scrollLeft,P=_.height,M=_.width,R=a.height,N=a.width,D={left:0,top:0,right:S,bottom:k},L={left:-O,top:-I,right:C-O,bottom:A-I},F=y.htmlRegion,B="visible",U="visibleFirst";"scroll"!==F&&F!==U&&(F=B);var H=F===U,j=rA(L,d),z=rA(D,d),V=F===B?z:j,G=H?z:V;h.style.left=p,h.style.top=v;var W=tA(Math.round(M/parseFloat(E)*1e3)/1e3),X=tA(Math.round(P/parseFloat(w)*1e3)/1e3);if(0===W||0===X||qo(n)&&!Zs(n))return;var Y=y.offset,K=y.targetOffset,q=Pt(oA(_,Y),2),Z=q[0],$=q[1],Q=Pt(oA(a,K),2),J=Q[0],ee=Q[1];a.x-=J,a.y-=ee;var te,ne,re,ie,oe=Pt(y.points||[],2),ae=oe[0],se=aA(oe[1]),le=aA(ae),ue=sA(a,se),ce=sA(_,le),he=Re({},y),de=ue.x-ce.x+Z,fe=ue.y-ce.y+$,pe=l(de,fe),ve=l(de,fe,z),me=sA(a,["t","l"]),ge=sA(_,["t","l"]),ye=sA(a,["b","r"]),be=sA(_,["b","r"]),_e=y.overflow||{},xe=_e.adjustX,Ee=_e.adjustY,we=_e.shiftX,Te=_e.shiftY,Se=function(e){return"boolean"===typeof e?e:e>=0};u();var ke=Se(Ee),Ce=le[0]===se[0];if(ke&&"t"===le[0]&&(ne>G.bottom||f.current.bt)){var Ae=fe;Ce?Ae-=P-R:Ae=me.y-be.y-$;var Ie=l(de,Ae),Oe=l(de,Ae,z);Ie>pe||Ie===pe&&(!H||Oe>=ve)?(f.current.bt=!0,fe=Ae,he.points=[lA(le,0),lA(se,0)]):f.current.bt=!1}if(ke&&"b"===le[0]&&(te<G.top||f.current.tb)){var Pe=fe;Ce?Pe+=P-R:Pe=ye.y-ge.y-$;var Me=l(de,Pe),Ne=l(de,Pe,z);Me>pe||Me===pe&&(!H||Ne>=ve)?(f.current.tb=!0,fe=Pe,he.points=[lA(le,0),lA(se,0)]):f.current.tb=!1}var De=Se(xe),Le=le[1]===se[1];if(De&&"l"===le[1]&&(ie>G.right||f.current.rl)){var Fe=de;Le?Fe-=M-N:Fe=me.x-be.x-Z;var Be=l(Fe,fe),Ue=l(Fe,fe,z);Be>pe||Be===pe&&(!H||Ue>=ve)?(f.current.rl=!0,de=Fe,he.points=[lA(le,1),lA(se,1)]):f.current.rl=!1}if(De&&"r"===le[1]&&(re<G.left||f.current.lr)){var He=de;Le?He+=M-N:He=ye.x-ge.x-Z;var je=l(He,fe),ze=l(He,fe,z);je>pe||je===pe&&(!H||ze>=ve)?(f.current.lr=!0,de=He,he.points=[lA(le,1),lA(se,1)]):f.current.lr=!1}u();var Ve=!0===we?0:we;"number"===typeof Ve&&(re<V.left&&(de-=re-V.left,a.x+N<V.left+Ve&&(de+=a.x-V.left+N-Ve)),ie>V.right&&(de-=ie-V.right,a.x>V.right-Ve&&(de+=a.x-V.right+Ve)));var Ge=!0===Te?0:Te;"number"===typeof Ge&&(te<V.top&&(fe-=te-V.top,a.y+R<V.top+Ge&&(fe+=a.y-V.top+R-Ge)),ne>V.bottom&&(fe-=ne-V.bottom,a.y>V.bottom-Ge&&(fe+=a.y-V.bottom+Ge)));var We=_.x+de,Xe=We+M,Ye=_.y+fe,Ke=Ye+P,qe=a.x,Ze=qe+N,$e=a.y,Qe=$e+R,Je=(Math.max(We,qe)+Math.min(Xe,Ze))/2-We,et=(Math.max(Ye,$e)+Math.min(Ke,Qe))/2-Ye;null===s||void 0===s||s(t,he),c({ready:!0,offsetX:de/W,offsetY:fe/X,arrowX:Je/W,arrowY:et/X,scaleX:W,scaleY:X,align:he})}})),v=function(){c((function(e){return Re(Re({},e),{},{ready:!1})}))};return xu(v,[r]),xu((function(){e||v()}),[e]),[u.ready,u.offsetX,u.offsetY,u.arrowX,u.arrowY,u.scaleX,u.scaleY,u.align,function(){h.current+=1;var e=h.current;Promise.resolve().then((function(){h.current===e&&p()}))}]}(xe,oe,F?Be:ue,O,M,R,U),ze=Pt(je,9),Ve=ze[0],Ge=ze[1],We=ze[2],Xe=ze[3],Ye=ze[4],Ke=ze[5],qe=ze[6],Ze=ze[7],$e=ze[8],Qe=mh((function(){Ie||$e()}));!function(e,t,n,r){xu((function(){if(e&&t&&n){var i=function(){r()},o=n,a=eA(t),s=eA(o),l=JC(o),u=new Set([l].concat(Pe(a),Pe(s)));return u.forEach((function(e){e.addEventListener("scroll",i,{passive:!0})})),l.addEventListener("resize",i,{passive:!0}),r(),function(){u.forEach((function(e){e.removeEventListener("scroll",i),l.removeEventListener("resize",i)}))}}}),[e,t,n])}(xe,ue,oe,Qe),xu((function(){Qe()}),[Be,O]),xu((function(){!xe||null!==M&&void 0!==M&&M[O]||Qe()}),[JSON.stringify(R)]);var Je=a.useMemo((function(){var e=function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s,l=o[a];if($C(null===(s=e[l])||void 0===s?void 0:s.points,i,r))return"".concat(t,"-placement-").concat(l)}return""}(M,i,Ze,F);return Ko()(e,null===L||void 0===L?void 0:L(Ze))}),[Ze,L,M,i,F]);a.useImperativeHandle(n,(function(){return{forceAlign:Qe}}));xu((function(){De&&($e(),De(),Le(null))}),[De]);var et=Pt(a.useState(0),2),tt=et[0],nt=et[1],rt=Pt(a.useState(0),2),it=rt[0],ot=rt[1],at=function(e,t,n,r){return a.useMemo((function(){var i=ZC(null!==n&&void 0!==n?n:t),o=ZC(null!==r&&void 0!==r?r:t),a=new Set(i),s=new Set(o);return e&&(a.has("hover")&&(a.delete("hover"),a.add("click")),s.has("hover")&&(s.delete("hover"),s.add("click"))),[a,s]}),[e,t,n,r])}(Q,l,u,c),st=Pt(at,2),lt=st[0],ut=st[1],ct=function(e,t,n,r){pe[e]=function(i){var o;null===r||void 0===r||r(i),Ce(t,n);for(var a=arguments.length,s=new Array(a>1?a-1:0),l=1;l<a;l++)s[l-1]=arguments[l];null===(o=fe[e])||void 0===o||o.call.apply(o,[fe,i].concat(s))}},ht=lt.has("click"),dt=ut.has("click")||ut.has("contextMenu");(ht||dt)&&(pe.onClick=function(e){var t;we.current&&dt?Ce(!1):!we.current&&ht&&(He(e),Ce(!0));for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=fe.onClick)||void 0===t||t.call.apply(t,[fe,e].concat(r))}),a.useEffect((function(){if(dt&&oe&&(!_||E)){var e=!1,t=function(t){var n=t.target;e=ve(n)},n=function(t){var n=t.target;!we.current||e||ve(n)||Ce(!1)},r=JC(oe),i=null===ue||void 0===ue?void 0:ue.getRootNode();r.addEventListener("mousedown",t),r.addEventListener("click",n);var o=i&&i!==ue.ownerDocument;return o&&(i.addEventListener("mousedown",t),i.addEventListener("click",n)),function(){r.removeEventListener("mousedown",t),r.removeEventListener("click",n),o&&(i.removeEventListener("mousedown",t),i.removeEventListener("click",n))}}}),[dt,ue,oe,_,E]);var ft,pt,vt=lt.has("hover"),mt=ut.has("hover");vt&&(ct("onMouseEnter",!0,v,(function(e){He(e)})),ft=function(){Ce(!0,v)},F&&(pe.onMouseMove=function(e){var t;null===(t=fe.onMouseMove)||void 0===t||t.call(fe,e)})),mt&&(ct("onMouseLeave",!1,g),pt=function(){Ce(!1,g)}),lt.has("focus")&&ct("onFocus",!0,y),ut.has("focus")&&ct("onBlur",!1,b),lt.has("contextMenu")&&(pe.onContextMenu=function(e){var t;He(e),Ce(!0),e.preventDefault();for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];null===(t=fe.onContextMenu)||void 0===t||t.call.apply(t,[fe,e].concat(r))}),Y&&(pe.className=Ko()(fe.className,Y));var gt=Re(Re({},fe),pe),yt={};["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"].forEach((function(e){q[e]&&(yt[e]=function(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=gt[e])||void 0===t||t.call.apply(t,[gt].concat(r)),q[e].apply(q,r)})}));var bt=a.cloneElement(de,Re(Re({},gt),yt)),_t={x:Xe,y:Ye},xt=H?Re({},!0!==H?H:{}):null;return a.createElement(a.Fragment,null,a.createElement(Ed,{disabled:!xe,ref:he,onResize:function(e,t){if(Qe(),D){var n=t.getBoundingClientRect();nt(n.width),ot(n.height)}}},a.createElement(mA,{getTriggerDOMNode:K},bt)),a.createElement(qC.Provider,{value:ne},a.createElement(pA,{portal:e,ref:se,prefixCls:i,popup:C,className:Ko()(A,Je),style:I,target:ue,onMouseEnter:ft,onMouseLeave:pt,zIndex:N,open:xe,keepDom:Ie,onClick:B,mask:_,motion:me,maskMotion:ge,onVisibleChanged:function(e){Oe(!1),$e(),null===p||void 0===p||p(e)},onPrepare:function(){return new Promise((function(e){Le((function(){return e}))}))},forceRender:T,autoDestroy:Z,getPopupContainer:w,align:Ze,arrow:xt,arrowPos:_t,ready:Ve,offsetX:Ge,offsetY:We,onAlign:Qe,stretch:D,targetWidth:tt/Ke,targetHeight:it/qe})))}));return t}(Pu),bA={shiftX:64,adjustY:1},_A={adjustX:1,shiftY:!0},xA=[0,0],EA={left:{points:["cr","cl"],overflow:_A,offset:[-4,0],targetOffset:xA},right:{points:["cl","cr"],overflow:_A,offset:[4,0],targetOffset:xA},top:{points:["bc","tc"],overflow:bA,offset:[0,-4],targetOffset:xA},bottom:{points:["tc","bc"],overflow:bA,offset:[0,4],targetOffset:xA},topLeft:{points:["bl","tl"],overflow:bA,offset:[0,-4],targetOffset:xA},leftTop:{points:["tr","tl"],overflow:_A,offset:[-4,0],targetOffset:xA},topRight:{points:["br","tr"],overflow:bA,offset:[0,-4],targetOffset:xA},rightTop:{points:["tl","tr"],overflow:_A,offset:[4,0],targetOffset:xA},bottomRight:{points:["tr","br"],overflow:bA,offset:[0,4],targetOffset:xA},rightBottom:{points:["bl","br"],overflow:_A,offset:[4,0],targetOffset:xA},bottomLeft:{points:["tl","bl"],overflow:bA,offset:[0,4],targetOffset:xA},leftBottom:{points:["br","bl"],overflow:_A,offset:[-4,0],targetOffset:xA}};function wA(e){var t=e.children,n=e.prefixCls,r=e.id,i=e.overlayInnerStyle,o=e.className,s=e.style;return a.createElement("div",{className:Ko()("".concat(n,"-content"),o),style:s},a.createElement("div",{className:"".concat(n,"-inner"),id:r,role:"tooltip",style:i},"function"===typeof t?t():t))}var TA=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],SA=function(e,t){var n=e.overlayClassName,r=e.trigger,i=void 0===r?["hover"]:r,o=e.mouseEnterDelay,s=void 0===o?0:o,l=e.mouseLeaveDelay,u=void 0===l?.1:l,c=e.overlayStyle,h=e.prefixCls,d=void 0===h?"rc-tooltip":h,f=e.children,p=e.onVisibleChange,v=e.afterVisibleChange,m=e.transitionName,g=e.animation,y=e.motion,b=e.placement,_=void 0===b?"right":b,x=e.align,E=void 0===x?{}:x,w=e.destroyTooltipOnHide,T=void 0!==w&&w,S=e.defaultVisible,k=e.getTooltipContainer,C=e.overlayInnerStyle,A=(e.arrowContent,e.overlay),I=e.id,O=e.showArrow,P=void 0===O||O,M=Yn(e,TA),R=(0,a.useRef)(null);(0,a.useImperativeHandle)(t,(function(){return R.current}));var N=Re({},M);"visible"in e&&(N.popupVisible=e.visible);return a.createElement(yA,Ut({popupClassName:n,prefixCls:d,popup:function(){return a.createElement(wA,{key:"content",prefixCls:d,id:I,overlayInnerStyle:C},A)},action:i,builtinPlacements:EA,popupPlacement:_,ref:R,popupAlign:E,getPopupContainer:k,onPopupVisibleChange:p,afterPopupVisibleChange:v,popupTransitionName:m,popupAnimation:g,popupMotion:y,defaultPopupVisible:S,autoDestroy:T,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s,arrow:P},N),f)},kA=(0,a.forwardRef)(SA),CA=function(e,t,n,r,i){var o=e/2,a=o,s=1*n/Math.sqrt(2),l=o-n*(1-1/Math.sqrt(2)),u=o-t*(1/Math.sqrt(2)),c=n*(Math.sqrt(2)-1)+t*(1/Math.sqrt(2)),h=2*o-u,d=c,f=2*o-s,p=l,v=2*o-0,m=a,g=o*Math.sqrt(2)+n*(Math.sqrt(2)-2),y=n*(Math.sqrt(2)-1);return{pointerEvents:"none",width:e,height:e,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:e,height:e/2,background:r,clipPath:{_multi_value_:!0,value:["polygon(".concat(y,"px 100%, 50% ").concat(y,"px, ").concat(2*o-y,"px 100%, ").concat(y,"px 100%)"),"path('M ".concat(0," ").concat(a," A ").concat(n," ").concat(n," 0 0 0 ").concat(s," ").concat(l," L ").concat(u," ").concat(c," A ").concat(t," ").concat(t," 0 0 1 ").concat(h," ").concat(d," L ").concat(f," ").concat(p," A ").concat(n," ").concat(n," 0 0 0 ").concat(v," ").concat(m," Z')")]},content:'""'},"&::after":{content:'""',position:"absolute",width:g,height:g,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:"0 0 ".concat(t,"px 0")},transform:"translateY(50%) rotate(-135deg)",boxShadow:i,zIndex:0,background:"transparent"}}},AA=8;function IA(e){var t=AA,n=e.contentRadius,r=n>12?n+2:12;return{dropdownArrowOffset:r,dropdownArrowOffsetVertical:e.limitVerticalRadius?t:r}}function OA(e,t){return e?t:{}}function PA(e,t){var n,r,i,o,a=e.componentCls,s=e.sizePopupArrow,l=e.borderRadiusXS,u=e.borderRadiusOuter,c=e.boxShadowPopoverArrow,h=t.colorBg,d=t.contentRadius,f=void 0===d?e.borderRadiusLG:d,p=t.limitVerticalRadius,v=t.arrowDistance,m=void 0===v?0:v,g=t.arrowPlacement,y=void 0===g?{left:!0,right:!0,top:!0,bottom:!0}:g,_=IA({contentRadius:f,limitVerticalRadius:p}),x=_.dropdownArrowOffsetVertical,E=_.dropdownArrowOffset;return b({},a,Object.assign(Object.assign(Object.assign(Object.assign(b({},"".concat(a,"-arrow"),[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},CA(s,l,u,h,c)),{"&:before":{background:h}})]),OA(!!y.top,(b(n={},["&-placement-top ".concat(a,"-arrow"),"&-placement-topLeft ".concat(a,"-arrow"),"&-placement-topRight ".concat(a,"-arrow")].join(","),{bottom:m,transform:"translateY(100%) rotate(180deg)"}),b(n,"&-placement-top ".concat(a,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"}),b(n,"&-placement-topLeft ".concat(a,"-arrow"),{left:{_skip_check_:!0,value:E}}),b(n,"&-placement-topRight ".concat(a,"-arrow"),{right:{_skip_check_:!0,value:E}}),n))),OA(!!y.bottom,(b(r={},["&-placement-bottom ".concat(a,"-arrow"),"&-placement-bottomLeft ".concat(a,"-arrow"),"&-placement-bottomRight ".concat(a,"-arrow")].join(","),{top:m,transform:"translateY(-100%)"}),b(r,"&-placement-bottom ".concat(a,"-arrow"),{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"}),b(r,"&-placement-bottomLeft ".concat(a,"-arrow"),{left:{_skip_check_:!0,value:E}}),b(r,"&-placement-bottomRight ".concat(a,"-arrow"),{right:{_skip_check_:!0,value:E}}),r))),OA(!!y.left,(b(i={},["&-placement-left ".concat(a,"-arrow"),"&-placement-leftTop ".concat(a,"-arrow"),"&-placement-leftBottom ".concat(a,"-arrow")].join(","),{right:{_skip_check_:!0,value:m},transform:"translateX(100%) rotate(90deg)"}),b(i,"&-placement-left ".concat(a,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"}),b(i,"&-placement-leftTop ".concat(a,"-arrow"),{top:x}),b(i,"&-placement-leftBottom ".concat(a,"-arrow"),{bottom:x}),i))),OA(!!y.right,(b(o={},["&-placement-right ".concat(a,"-arrow"),"&-placement-rightTop ".concat(a,"-arrow"),"&-placement-rightBottom ".concat(a,"-arrow")].join(","),{left:{_skip_check_:!0,value:m},transform:"translateX(-100%) rotate(-90deg)"}),b(o,"&-placement-right ".concat(a,"-arrow"),{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"}),b(o,"&-placement-rightTop ".concat(a,"-arrow"),{top:x}),b(o,"&-placement-rightBottom ".concat(a,"-arrow"),{bottom:x}),o))))}var MA={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},RA={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},NA=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function DA(e){var t=e.arrowWidth,n=e.autoAdjustOverflow,r=e.arrowPointAtCenter,i=e.offset,o=e.borderRadius,a=t/2,s={};return Object.keys(MA).forEach((function(e){var l=r&&RA[e]||MA[e],u=Object.assign(Object.assign({},l),{offset:[0,0]});switch(s[e]=u,NA.has(e)&&(u.autoArrow=!1),e){case"top":case"topLeft":case"topRight":u.offset[1]=-a-i;break;case"bottom":case"bottomLeft":case"bottomRight":u.offset[1]=a+i;break;case"left":case"leftTop":case"leftBottom":u.offset[0]=-a-i;break;case"right":case"rightTop":case"rightBottom":u.offset[0]=a+i}var c=IA({contentRadius:o,limitVerticalRadius:!0});if(r)switch(e){case"topLeft":case"bottomLeft":u.offset[0]=-c.dropdownArrowOffset-a;break;case"topRight":case"bottomRight":u.offset[0]=c.dropdownArrowOffset+a;break;case"leftTop":case"rightTop":u.offset[1]=-c.dropdownArrowOffset-a;break;case"leftBottom":case"rightBottom":u.offset[1]=c.dropdownArrowOffset+a}u.overflow=function(e,t,n,r){if(!1===r)return{adjustX:!1,adjustY:!1};var i=r&&"object"===typeof r?r:{},o={};switch(e){case"top":case"bottom":o.shiftX=2*t.dropdownArrowOffset+n;break;case"left":case"right":o.shiftY=2*t.dropdownArrowOffsetVertical+n}var a=Object.assign(Object.assign({},o),i);return a.shiftX||(a.adjustX=!0),a.shiftY||(a.adjustY=!0),a}(e,c,t,n)})),s}var LA=function(e,t){return new yo(e).setAlpha(t).toRgbString()},FA=function(e,t){return new yo(e).lighten(t).toHexString()},BA=function(e){var t=uo(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},UA=function(e,t){var n=e||"#000",r=t||"#fff";return{colorBgBase:n,colorTextBase:r,colorText:LA(r,.85),colorTextSecondary:LA(r,.65),colorTextTertiary:LA(r,.45),colorTextQuaternary:LA(r,.25),colorFill:LA(r,.18),colorFillSecondary:LA(r,.12),colorFillTertiary:LA(r,.08),colorFillQuaternary:LA(r,.04),colorBgElevated:FA(n,12),colorBgContainer:FA(n,8),colorBgLayout:FA(n,0),colorBgSpotlight:FA(n,26),colorBorder:FA(n,26),colorBorderSecondary:FA(n,19)}},HA=function(e,t){var n=Object.keys(mo).map((function(t){var n=uo(e[t],{theme:"dark"});return new Array(10).fill(1).reduce((function(e,r,i){return e["".concat(t,"-").concat(i+1)]=n[i],e["".concat(t).concat(i+1)]=n[i],e}),{})})).reduce((function(e,t){return e=Object.assign(Object.assign({},e),t)}),{}),r=null!==t&&void 0!==t?t:ko(e);return Object.assign(Object.assign(Object.assign({},r),n),bo(e,{generateColorPalettes:BA,generateNeutralColorPalettes:UA}))};var jA=function(e,t){var n=null!==t&&void 0!==t?t:ko(e),r=n.fontSizeSM,i=n.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},n),function(e){var t=e.sizeUnit,n=e.sizeStep-2;return{sizeXXL:t*(n+10),sizeXL:t*(n+6),sizeLG:t*(n+2),sizeMD:t*(n+2),sizeMS:t*(n+1),size:t*n,sizeSM:t*n,sizeXS:t*(n-1),sizeXXS:t*(n-1)}}(null!==t&&void 0!==t?t:e)),So(r)),{controlHeight:i}),vo(Object.assign(Object.assign({},n),{controlHeight:i})))};var zA={defaultConfig:Mo,defaultSeed:Mo.token,useToken:function(){var e=Pt(No(),3);return{theme:e[0],token:e[1],hashId:e[2]}},defaultAlgorithm:ko,darkAlgorithm:HA,compactAlgorithm:jA},VA=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"];function GA(e,t){return VA.reduce((function(n,r){var i=e["".concat(r,"1")],o=e["".concat(r,"3")],a=e["".concat(r,"6")],s=e["".concat(r,"7")];return Object.assign(Object.assign({},n),t(r,{lightColor:i,lightBorderColor:o,darkColor:a,textColor:s}))}),{})}var WA=function(e){var t,n=e.componentCls,r=e.tooltipMaxWidth,i=e.tooltipColor,o=e.tooltipBg,a=e.tooltipBorderRadius,s=e.zIndexPopup,l=e.controlHeight,u=e.boxShadowSecondary,c=e.paddingSM,h=e.paddingXS,d=e.tooltipRadiusOuter;return[b({},n,Object.assign(Object.assign(Object.assign(Object.assign({},as(e)),(t={position:"absolute",zIndex:s,display:"block",width:"max-content",maxWidth:r,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":o},b(t,"".concat(n,"-inner"),{minWidth:l,minHeight:l,padding:"".concat(c/2,"px ").concat(h,"px"),color:i,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:o,borderRadius:a,boxShadow:u}),b(t,["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(","),b({},"".concat(n,"-inner"),{borderRadius:Math.min(a,AA)})),b(t,"".concat(n,"-content"),{position:"relative"}),t)),GA(e,(function(e,t){var r,i=t.darkColor;return b({},"&".concat(n,"-").concat(e),(b(r={},"".concat(n,"-inner"),{backgroundColor:i}),b(r,"".concat(n,"-arrow"),{"--antd-arrow-background-color":i}),r))}))),{"&-rtl":{direction:"rtl"}})),PA(nl(e,{borderRadiusOuter:d}),{colorBg:"var(--antd-arrow-background-color)",contentRadius:a,limitVerticalRadius:!0}),b({},"".concat(n,"-pure"),{position:"relative",maxWidth:"none",margin:e.sizePopupArrow})]},XA=function(e,t){var n=ol("Tooltip",(function(e){if(!1===t)return[];var n=e.borderRadius,r=e.colorTextLightSolid,i=e.colorBgDefault,o=e.borderRadiusOuter,a=nl(e,{tooltipMaxWidth:250,tooltipColor:r,tooltipBorderRadius:n,tooltipBg:i,tooltipRadiusOuter:o>4?4:o});return[WA(a),gc(e,"zoom-big-fast")]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+70,colorBgDefault:e.colorBgSpotlight}}));return n(e)},YA=VA.map((function(e){return"".concat(e,"-inverse")}));function KA(e,t){var n=function(e){return arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?VA.includes(e):[].concat(Pe(YA),Pe(VA)).includes(e)}(t),r=Ko()(b({},"".concat(e,"-").concat(t),t&&n)),i={},o={};return t&&!n&&(i.background=t,o["--antd-arrow-background-color"]=t),{className:r,overlayStyle:i,arrowStyle:o}}var qA=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},ZA=zA.useToken;function $A(e,t){var n=e.type;if((!0===n.__ANT_BUTTON||"button"===e.type)&&e.props.disabled||!0===n.__ANT_SWITCH&&(e.props.disabled||e.props.loading)||!0===n.__ANT_RADIO&&e.props.disabled){var r=function(e,t){var n={},r=Object.assign({},e);return t.forEach((function(t){e&&t in e&&(n[t]=e[t],delete r[t])})),{picked:n,omitted:r}}(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),i=r.picked,o=r.omitted,s=Object.assign(Object.assign({display:"inline-block"},i),{cursor:"not-allowed",width:e.props.block?"100%":void 0}),l=Js(e,{style:Object.assign(Object.assign({},o),{pointerEvents:"none"}),className:null});return a.createElement("span",{style:s,className:Ko()(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},l)}return e}var QA=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.openClassName,s=e.getTooltipContainer,l=e.overlayClassName,u=e.color,c=e.overlayInnerStyle,h=e.children,d=e.afterOpenChange,f=e.afterVisibleChange,p=e.destroyTooltipOnHide,v=e.arrow,m=void 0===v||v,g=e.title,y=e.overlay,_=e.builtinPlacements,x=e.arrowPointAtCenter,E=void 0!==x&&x,w=e.autoAdjustOverflow,T=void 0===w||w,S=!!m,k=ZA().token,C=a.useContext(Lo),A=C.getPopupContainer,I=C.getPrefixCls,O=C.direction,P=a.useRef(null),M=function(){var e;null===(e=P.current)||void 0===e||e.forceAlign()};a.useImperativeHandle(t,(function(){return{forceAlign:M,forcePopupAlign:function(){M()}}}));var R=Pt(yh(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(r=e.defaultOpen)&&void 0!==r?r:e.defaultVisible}),2),N=R[0],D=R[1],L=!g&&!y&&0!==g,F=a.useMemo((function(){var e,t,n=E;return"object"===typeof m&&(n=null!==(t=null!==(e=m.pointAtCenter)&&void 0!==e?e:m.arrowPointAtCenter)&&void 0!==t?t:E),_||DA({arrowPointAtCenter:n,autoAdjustOverflow:T,arrowWidth:S?k.sizePopupArrow:0,borderRadius:k.borderRadius,offset:k.marginXXS})}),[E,m,_,k]),B=a.useMemo((function(){return 0===g?g:y||g||""}),[y,g]),U=a.createElement(bl,null,"function"===typeof B?B():B),H=e.getPopupContainer,j=e.placement,z=void 0===j?"top":j,V=e.mouseEnterDelay,G=void 0===V?.1:V,W=e.mouseLeaveDelay,X=void 0===W?.1:W,Y=e.overlayStyle,K=e.rootClassName,q=qA(e,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),Z=I("tooltip",i),$=I(),Q=e["data-popover-inject"],J=N;"open"in e||"visible"in e||!L||(J=!1);var ee=$A($s(h)&&!Qs(h)?h:a.createElement("span",null,h),Z),te=ee.props,ne=te.className&&"string"!==typeof te.className?te.className:Ko()(te.className,b({},o||"".concat(Z,"-open"),!0)),re=Pt(XA(Z,!Q),2),ie=re[0],oe=re[1],ae=KA(Z,u),se=Object.assign(Object.assign({},c),ae.overlayStyle),le=ae.arrowStyle,ue=Ko()(l,b({},"".concat(Z,"-rtl"),"rtl"===O),ae.className,K,oe);return ie(a.createElement(kA,Object.assign({},q,{showArrow:S,placement:z,mouseEnterDelay:G,mouseLeaveDelay:X,prefixCls:Z,overlayClassName:ue,overlayStyle:Object.assign(Object.assign({},le),Y),getTooltipContainer:H||s||A,ref:P,builtinPlacements:F,overlay:U,visible:J,onVisibleChange:function(t){var n,r;D(!L&&t),L||(null===(n=e.onOpenChange)||void 0===n||n.call(e,t),null===(r=e.onVisibleChange)||void 0===r||r.call(e,t))},afterVisibleChange:null!==d&&void 0!==d?d:f,overlayInnerStyle:se,arrowContent:a.createElement("span",{className:"".concat(Z,"-arrow-content")}),motion:{motionName:gu($,"zoom-big-fast",e.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!p}),J?Js(ee,{className:ne}):ee))}));QA._InternalPanelDoNotUseOrYouWillBeFired=function(e){var t=e.prefixCls,n=e.className,r=e.placement,i=void 0===r?"top":r,o=e.title,s=e.color,l=e.overlayInnerStyle,u=(0,a.useContext(Lo).getPrefixCls)("tooltip",t),c=Pt(XA(u,!0),2),h=c[0],d=c[1],f=KA(u,s),p=Object.assign(Object.assign({},l),f.overlayStyle),v=f.arrowStyle;return h(a.createElement("div",{className:Ko()(d,u,"".concat(u,"-pure"),"".concat(u,"-placement-").concat(i),n,f.className),style:v},a.createElement("div",{className:"".concat(u,"-arrow")}),a.createElement(wA,Object.assign({},e,{className:d,prefixCls:u,overlayInnerStyle:p}),o)))};var JA=QA,eI=function(e){var t=e.normal,n=e.down,r=e.over,i=e.normalColor,o=e.downColor,s=e.overColor,l=e.toggle,u=e.isDown,c=e.onToggle,h=e.onClick,d=e.onDown,f=e.tooltip,p=e.className,v=Pt(a.useState("normal"),2),m=v[0],g=v[1],y=Pt(a.useState(l&&u&&n||t),2),b=y[0],_=y[1],x=Pt(a.useState(i||"transparent"),2),E=x[0],w=x[1];a.useEffect((function(){var e=l&&u?n:t,r=i||"transparent";l&&(b!==e&&_(e||t),u||E===r||w(r),u&&E!==o&&w(o||"transparent"))}),[u]);var T=function(){l?function(){var e=i||"transparent";u?(g("normal"),_(t),w(e)):(g("down"),w(o||"transparent"),_(n||t)),c&&c(!u)}():(w(o||"transparent"),_(n||t)),d&&d()},S=function(){r&&_(r),s&&w(s),h&&h()},k=function(){"normal"===m&&(g("over"),w(s||"transparent"),_(r||t))},C=function(){if(l)if(u)g("down"),w(o||"transparent"),_(n||t);else{var e=i||"transparent";g("normal"),w(e),_(t)}else{var r=i||"transparent";g("normal"),w(r),_(t)}};return f?(0,ff.jsx)(JA,{title:f,mouseEnterDelay:.5,children:(0,ff.jsx)("span",{className:p,onMouseDown:T,onMouseUp:S,onMouseOver:k,onMouseOut:C,children:(0,ff.jsx)(YC,{name:"".concat(b),bgColor:E})})}):(0,ff.jsx)("span",{className:p,onMouseDown:T,onMouseUp:S,onMouseOver:k,onMouseOut:C,children:(0,ff.jsx)(YC,{name:"".concat(b),bgColor:E})})},tI=function(e,t){return function(){t(e)}},nI=function(e){var t=e.curTool,n=e.editMode,r=e.onSwitchTool;return(0,ff.jsxs)("span",{className:"stage-tools",children:[(0,ff.jsx)(eI,{normal:"stage-tools/selector",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===J.SELECT,onClick:tI(J.SELECT,r)}),n===Y.POSE&&(0,ff.jsx)(eI,{normal:"stage-tools/addBone",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===J.ADD_BONE,onClick:tI(J.ADD_BONE,r)}),(0,ff.jsx)(eI,{normal:"stage-tools/pose",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===J.POSE_TOOL,onClick:tI(J.POSE_TOOL,r)}),(0,ff.jsx)(eI,{normal:"stage-tools/meshWeight",normalColor:"#333333",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t===J.WEIGHT_TOOL,onClick:tI(J.WEIGHT_TOOL,r)})]})},rI=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).onClick=function(e){if(!r.props.disabled&&(e.stopPropagation(),r.props.clickCallback&&r.props.clickCallback(e),r.props.toggle)){var t=!r.state.selected;r.props.controlled||r.setState({selected:t}),r.props.changeCallback&&r.props.changeCallback(t)}},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return f(n,[{key:"render",value:function(){var e=this.props.icon;return this.props.toggle&&this.state.selected&&this.props.selectedIcon&&(e=this.props.selectedIcon),this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsx)("div",{className:"icon-button"+(this.props.disabled?" panel-disabled":""),onClick:this.onClick,children:(0,ff.jsx)(KT,{type:e})})}):(0,ff.jsx)("div",{className:"icon-button"+(this.props.disabled?" panel-disabled":""),onClick:this.onClick,children:(0,ff.jsx)(KT,{type:e})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),iI=function(e,t,n){return function(){n(e,t)}},oI=function(e){return(0,ff.jsxs)("div",{className:"bone-slot-control",children:[(0,ff.jsxs)("div",{className:"bone-slot-control-row",children:[(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-a-Property1interfaceProperty2bulkProperty3"})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-eye1"})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-lock"})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-inherit1"})})]}),(0,ff.jsxs)("div",{className:"bone-slot-control-row",children:[(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-bone"})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("boneVisible",!e.boneVisible,e.onChange),selected:e.boneVisible,toggle:!0})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("boneSelectEnable",!e.boneSelectEnable,e.onChange),selected:e.boneSelectEnable,toggle:!0})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("boneInheritEnable",!e.boneInheritEnable,e.onChange),selected:e.boneInheritEnable,toggle:!0})})]}),(0,ff.jsxs)("div",{className:"bone-slot-control-row",children:[(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(KT,{type:"icon-image3"})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("slotVisible",!e.slotVisible,e.onChange),selected:e.slotVisible,toggle:!0})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("slotSelectEnable",!e.slotSelectEnable,e.onChange),selected:e.slotSelectEnable,toggle:!0})}),(0,ff.jsx)("span",{className:"bone-slot-control-item",children:(0,ff.jsx)(rI,{icon:"icon-cc-dot-o",selectedIcon:"icon-cc-dot",changeCallback:iI("slotInheritEnable",!e.slotInheritEnable,e.onChange),selected:e.slotInheritEnable,toggle:!0})})]})]})},aI=function(e,t,n,r,i,o){if(r>0&&n.bones.map[r])return"\u9aa8\u9abc\uff1a".concat(n.bones.map[r].name);if(i>0&&n.slots.map[i])return"\u63d2\u69fd\uff1a".concat(n.slots.map[i].name);if(o)return o;if(0===e.length&&0===t.length)return"";var a="\u9009\u4e2d".concat(e.length+t.length,"\u9879\uff1a");return e.length>0&&(a+="\u9aa8\u9abc\uff1a".concat(e.map((function(e){return n.bones.map[e].name})).join(","))),t.length>0&&(a+="".concat(e.length?"-":"","\u63d2\u69fd\uff1a").concat(t.map((function(e){return n.slots.map[e].name})).join(","))),a},sI=function(e){var t=e.selectBoneIds,n=e.selectSlotIds,r=e.armature,i=e.overBoneId,o=e.overSlotId,a=e.defaultTips;return(0,ff.jsx)("span",{className:"stage-tip",children:aI(t,n,r,i,o,a)})},lI=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],uI=void 0;function cI(e,t){var n=e.prefixCls,r=e.invalidate,i=e.item,o=e.renderItem,s=e.responsive,l=e.responsiveDisabled,u=e.registerSize,c=e.itemKey,h=e.className,d=e.style,f=e.children,p=e.display,v=e.order,m=e.component,g=void 0===m?"div":m,y=Yn(e,lI),b=s&&!p;function _(e){u(c,e)}a.useEffect((function(){return function(){_(null)}}),[]);var x,E=o&&i!==uI?o(i):f;r||(x={opacity:b?0:1,height:b?0:uI,overflowY:b?"hidden":uI,order:s?v:uI,pointerEvents:b?"none":uI,position:b?"absolute":uI});var w={};b&&(w["aria-hidden"]=!0);var T=a.createElement(g,Ut({className:Ko()(!r&&n,h),style:Re(Re({},x),d)},w,y,{ref:t}),E);return s&&(T=a.createElement(Ed,{onResize:function(e){_(e.offsetWidth)},disabled:l},T)),T}var hI=a.forwardRef(cI);hI.displayName="Item";var dI=hI;function fI(){var e=a.useRef(null);return function(t){e.current||(e.current=[],function(e){if("undefined"===typeof MessageChannel)Fa(e);else{var t=new MessageChannel;t.port1.onmessage=function(){return e()},t.port2.postMessage(void 0)}}((function(){(0,De.unstable_batchedUpdates)((function(){e.current.forEach((function(e){e()})),e.current=null}))}))),e.current.push(t)}}function pI(e,t){var n=Pt(a.useState(t),2),r=n[0],i=n[1];return[r,mh((function(t){e((function(){i(t)}))}))]}var vI=["component"],mI=["className"],gI=["className"],yI=function(e,t){var n=a.useContext(EI);if(!n){var r=e.component,i=void 0===r?"div":r,o=Yn(e,vI);return a.createElement(i,Ut({},o,{ref:t}))}var s=n.className,l=Yn(n,mI),u=e.className,c=Yn(e,gI);return a.createElement(EI.Provider,{value:null},a.createElement(dI,Ut({ref:t,className:Ko()(s,u)},l,c)))},bI=a.forwardRef(yI);bI.displayName="RawItem";var _I=bI,xI=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],EI=a.createContext(null),wI="responsive",TI="invalidate";function SI(e){return"+ ".concat(e.length," ...")}function kI(e,t){var n=e.prefixCls,r=void 0===n?"rc-overflow":n,i=e.data,o=void 0===i?[]:i,s=e.renderItem,l=e.renderRawItem,u=e.itemKey,c=e.itemWidth,h=void 0===c?10:c,d=e.ssr,f=e.style,p=e.className,v=e.maxCount,m=e.renderRest,g=e.renderRawRest,y=e.suffix,b=e.component,_=void 0===b?"div":b,x=e.itemComponent,E=e.onVisibleChange,w=Yn(e,xI),T="full"===d,S=fI(),k=Pt(pI(S,null),2),C=k[0],A=k[1],I=C||0,O=Pt(pI(S,new Map),2),P=O[0],M=O[1],R=Pt(pI(S,0),2),N=R[0],D=R[1],L=Pt(pI(S,0),2),F=L[0],B=L[1],U=Pt(pI(S,0),2),H=U[0],j=U[1],z=Pt((0,a.useState)(null),2),V=z[0],G=z[1],W=Pt((0,a.useState)(null),2),X=W[0],Y=W[1],K=a.useMemo((function(){return null===X&&T?Number.MAX_SAFE_INTEGER:X||0}),[X,C]),q=Pt((0,a.useState)(!1),2),Z=q[0],$=q[1],Q="".concat(r,"-item"),J=Math.max(N,F),ee=v===wI,te=o.length&&ee,ne=v===TI,re=te||"number"===typeof v&&o.length>v,ie=(0,a.useMemo)((function(){var e=o;return te?e=null===C&&T?o:o.slice(0,Math.min(o.length,I/h)):"number"===typeof v&&(e=o.slice(0,v)),e}),[o,h,C,v,te]),oe=(0,a.useMemo)((function(){return te?o.slice(K+1):o.slice(ie.length)}),[o,ie,te,K]),ae=(0,a.useCallback)((function(e,t){var n;return"function"===typeof u?u(e):null!==(n=u&&(null===e||void 0===e?void 0:e[u]))&&void 0!==n?n:t}),[u]),se=(0,a.useCallback)(s||function(e){return e},[s]);function le(e,t,n){(X!==e||void 0!==t&&t!==V)&&(Y(e),n||($(e<o.length-1),null===E||void 0===E||E(e)),void 0!==t&&G(t))}function ue(e,t){M((function(n){var r=new Map(n);return null===t?r.delete(e):r.set(e,t),r}))}function ce(e){return P.get(ae(ie[e],e))}xu((function(){if(I&&"number"===typeof J&&ie){var e=H,t=ie.length,n=t-1;if(!t)return void le(0,null);for(var r=0;r<t;r+=1){var i=ce(r);if(T&&(i=i||0),void 0===i){le(r-1,void 0,!0);break}if(e+=i,0===n&&e<=I||r===n-1&&e+ce(n)<=I){le(n,null);break}if(e+J>I){le(r-1,e-i-H+F);break}}y&&ce(0)+H>I&&G(null)}}),[I,P,F,H,ae,ie]);var he=Z&&!!oe.length,de={};null!==V&&te&&(de={position:"absolute",left:V,top:0});var fe,pe={prefixCls:Q,responsive:te,component:x,invalidate:ne},ve=l?function(e,t){var n=ae(e,t);return a.createElement(EI.Provider,{key:n,value:Re(Re({},pe),{},{order:t,item:e,itemKey:n,registerSize:ue,display:t<=K})},l(e,t))}:function(e,t){var n=ae(e,t);return a.createElement(dI,Ut({},pe,{order:t,key:n,item:e,renderItem:se,itemKey:n,registerSize:ue,display:t<=K}))},me={order:he?K:Number.MAX_SAFE_INTEGER,className:"".concat(Q,"-rest"),registerSize:function(e,t){B(t),D(F)},display:he};if(g)g&&(fe=a.createElement(EI.Provider,{value:Re(Re({},pe),me)},g(oe)));else{var ge=m||SI;fe=a.createElement(dI,Ut({},pe,me),"function"===typeof ge?ge(oe):ge)}var ye=a.createElement(_,Ut({className:Ko()(!ne&&r,p),style:f,ref:t},w),ie.map(ve),re?fe:null,y&&a.createElement(dI,Ut({},pe,{responsive:ee,responsiveDisabled:!te,order:K,className:"".concat(Q,"-suffix"),registerSize:function(e,t){j(t)},display:!0,style:de}),y));return ee&&(ye=a.createElement(Ed,{onResize:function(e,t){A(t.clientWidth)},disabled:!te},ye)),ye}var CI=a.forwardRef(kI);CI.displayName="Overflow",CI.Item=_I,CI.RESPONSIVE=wI,CI.INVALIDATE=TI;var AI=CI,II=a.createContext(null);function OI(e,t){return void 0===e?null:"".concat(e,"-").concat(t)}function PI(e){return OI(a.useContext(II),e)}var MI=["children","locked"],RI=a.createContext(null);function NI(e){var t=e.children,n=e.locked,r=Yn(e,MI),i=a.useContext(RI),o=qe((function(){return function(e,t){var n=Re({},e);return Object.keys(t).forEach((function(e){var r=t[e];void 0!==r&&(n[e]=r)})),n}(i,r)}),[i,r],(function(e,t){return!n&&(e[0]!==t[0]||!rt(e[1],t[1],!0))}));return a.createElement(RI.Provider,{value:o},t)}var DI=[],LI=a.createContext(null);function FI(){return a.useContext(LI)}var BI=a.createContext(DI);function UI(e){var t=a.useContext(BI);return a.useMemo((function(){return void 0!==e?[].concat(Pe(t),[e]):t}),[t,e])}var HI=a.createContext(null),jI=a.createContext({});function zI(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(Zs(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||"a"===n&&!!e.getAttribute("href"),i=e.getAttribute("tabindex"),o=Number(i),a=null;return i&&!Number.isNaN(o)?a=o:r&&null===a&&(a=0),r&&e.disabled&&(a=null),null!==a&&(a>=0||t&&a<0)}return!1}function VI(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Pe(e.querySelectorAll("*")).filter((function(e){return zI(e,t)}));return zI(e,t)&&n.unshift(e),n}var GI=Du.LEFT,WI=Du.RIGHT,XI=Du.UP,YI=Du.DOWN,KI=Du.ENTER,qI=Du.ESC,ZI=Du.HOME,$I=Du.END,QI=[XI,YI,GI,WI];function JI(e,t){return VI(e,!0).filter((function(e){return t.has(e)}))}function eO(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!e)return null;var i=JI(e,t),o=i.length,a=i.findIndex((function(e){return n===e}));return r<0?-1===a?a=o-1:a-=1:r>0&&(a+=1),i[a=(a+o)%o]}function tO(e,t,n,r,i,o,s,l,u,c){var h=a.useRef(),d=a.useRef();d.current=t;var f=function(){Fa.cancel(h.current)};return a.useEffect((function(){return function(){f()}}),[]),function(a){var p=a.which;if([].concat(QI,[KI,qI,ZI,$I]).includes(p)){var v,m,g,y=function(){return v=new Set,m=new Map,g=new Map,o().forEach((function(e){var t=document.querySelector("[data-menu-id='".concat(OI(r,e),"']"));t&&(v.add(t),g.set(t,e),m.set(e,t))})),v};y();var _=function(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}(m.get(t),v),x=g.get(_),E=function(e,t,n,r){var i,o,a,s,l="prev",u="next",c="children",h="parent";if("inline"===e&&r===KI)return{inlineTrigger:!0};var d=(b(i={},XI,l),b(i,YI,u),i),f=(b(o={},GI,n?u:l),b(o,WI,n?l:u),b(o,YI,c),b(o,KI,c),o),p=(b(a={},XI,l),b(a,YI,u),b(a,KI,c),b(a,qI,h),b(a,GI,n?c:h),b(a,WI,n?h:c),a);switch(null===(s={inline:d,horizontal:f,vertical:p,inlineSub:d,horizontalSub:p,verticalSub:p}["".concat(e).concat(t?"":"Sub")])||void 0===s?void 0:s[r]){case l:return{offset:-1,sibling:!0};case u:return{offset:1,sibling:!0};case h:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}(e,1===s(x,!0).length,n,p);if(!E&&p!==ZI&&p!==$I)return;(QI.includes(p)||[ZI,$I].includes(p))&&a.preventDefault();var w=function(e){if(e){var t=e,n=e.querySelector("a");null!==n&&void 0!==n&&n.getAttribute("href")&&(t=n);var r=g.get(e);l(r),f(),h.current=Fa((function(){d.current===r&&t.focus()}))}};if([ZI,$I].includes(p)||E.sibling||!_){var T,S,k=JI(T=_&&"inline"!==e?function(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}(_):i.current,v);S=p===ZI?k[0]:p===$I?k[k.length-1]:eO(T,v,_,E.offset),w(S)}else if(E.inlineTrigger)u(x);else if(E.offset>0)u(x,!0),f(),h.current=Fa((function(){y();var e=_.getAttribute("aria-controls"),t=eO(document.getElementById(e),v);w(t)}),5);else if(E.offset<0){var C=s(x,!0),A=C[C.length-2],I=m.get(A);u(A,!1),w(I)}}null===c||void 0===c||c(a)}}var nO="__RC_UTIL_PATH_SPLIT__",rO=function(e){return e.join(nO)},iO="rc-menu-more";function oO(){var e=Pt(a.useState({}),2)[1],t=(0,a.useRef)(new Map),n=(0,a.useRef)(new Map),r=Pt(a.useState([]),2),i=r[0],o=r[1],s=(0,a.useRef)(0),l=(0,a.useRef)(!1),u=(0,a.useCallback)((function(r,i){var o=rO(i);n.current.set(o,r),t.current.set(r,o),s.current+=1;var a,u=s.current;a=function(){u===s.current&&(l.current||e({}))},Promise.resolve().then(a)}),[]),c=(0,a.useCallback)((function(e,r){var i=rO(r);n.current.delete(i),t.current.delete(e)}),[]),h=(0,a.useCallback)((function(e){o(e)}),[]),d=(0,a.useCallback)((function(e,n){var r=t.current.get(e)||"",o=r.split(nO);return n&&i.includes(o[0])&&o.unshift(iO),o}),[i]),f=(0,a.useCallback)((function(e,t){return e.some((function(e){return d(e,!0).includes(t)}))}),[d]),p=(0,a.useCallback)((function(e){var r="".concat(t.current.get(e)).concat(nO),i=new Set;return Pe(n.current.keys()).forEach((function(e){e.startsWith(r)&&i.add(n.current.get(e))})),i}),[]);return a.useEffect((function(){return function(){l.current=!0}}),[]),{registerPath:u,unregisterPath:c,refreshOverflowKeys:h,isSubPathKey:f,getKeyPath:d,getKeys:function(){var e=Pe(t.current.keys());return i.length&&e.push(iO),e},getSubPathKeys:p}}function aO(e){var t=a.useRef(e);t.current=e;var n=a.useCallback((function(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}),[]);return e?n:void 0}var sO=Math.random().toFixed(5).toString().slice(2),lO=0;function uO(e,t,n,r){var i=a.useContext(RI),o=i.activeKey,s=i.onActive,l=i.onInactive,u={active:o===e};return t||(u.onMouseEnter=function(t){null===n||void 0===n||n({key:e,domEvent:t}),s(e)},u.onMouseLeave=function(t){null===r||void 0===r||r({key:e,domEvent:t}),l(e)}),u}function cO(e){var t=a.useContext(RI),n=t.mode,r=t.rtl,i=t.inlineIndent;if("inline"!==n)return null;return r?{paddingRight:e*i}:{paddingLeft:e*i}}function hO(e){var t=e.icon,n=e.props,r=e.children;return("function"===typeof t?a.createElement(t,Re({},n)):t)||r||null}var dO=["item"];function fO(e){var t=e.item,n=Yn(e,dO);return Object.defineProperty(n,"item",{get:function(){return nt(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}var pO=["title","attribute","elementRef"],vO=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],mO=["active"],gO=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.attribute,r=e.elementRef,i=qs(Yn(e,pO),["eventKey","popupClassName","popupOffset","onTitleClick"]);return nt(!n,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),a.createElement(AI.Item,Ut({},n,{title:"string"===typeof t?t:void 0},i,{ref:r}))}}]),n}(a.Component),yO=a.forwardRef((function(e,t){var n,r=e.style,i=e.className,o=e.eventKey,s=(e.warnKey,e.disabled),l=e.itemIcon,u=e.children,c=e.role,h=e.onMouseEnter,d=e.onMouseLeave,f=e.onClick,p=e.onKeyDown,v=e.onFocus,m=Yn(e,vO),g=PI(o),y=a.useContext(RI),_=y.prefixCls,x=y.onItemClick,E=y.disabled,w=y.overflowDisabled,T=y.itemIcon,S=y.selectedKeys,k=y.onActive,C=a.useContext(jI)._internalRenderMenuItem,A="".concat(_,"-item"),I=a.useRef(),O=a.useRef(),P=E||s,M=Jo(t,O),R=UI(o);var N=function(e){return{key:o,keyPath:Pe(R).reverse(),item:I.current,domEvent:e}},D=l||T,L=uO(o,P,h,d),F=L.active,B=Yn(L,mO),U=S.includes(o),H=cO(R.length),j={};"option"===e.role&&(j["aria-selected"]=U);var z=a.createElement(gO,Ut({ref:I,elementRef:M,role:null===c?"none":c||"menuitem",tabIndex:s?null:-1,"data-menu-id":w&&g?null:g},m,B,j,{component:"li","aria-disabled":s,style:Re(Re({},H),r),className:Ko()(A,(n={},b(n,"".concat(A,"-active"),F),b(n,"".concat(A,"-selected"),U),b(n,"".concat(A,"-disabled"),P),n),i),onClick:function(e){if(!P){var t=N(e);null===f||void 0===f||f(fO(t)),x(t)}},onKeyDown:function(e){if(null===p||void 0===p||p(e),e.which===Du.ENTER){var t=N(e);null===f||void 0===f||f(fO(t)),x(t)}},onFocus:function(e){k(o),null===v||void 0===v||v(e)}}),u,a.createElement(hO,{props:Re(Re({},e),{},{isSelected:U}),icon:D}));return C&&(z=C(z,e,{selected:U})),z}));function bO(e,t){var n=e.eventKey,r=FI(),i=UI(n);return a.useEffect((function(){if(r)return r.registerPath(n,i),function(){r.unregisterPath(n,i)}}),[i]),r?null:a.createElement(yO,Ut({},e,{ref:t}))}var _O=a.forwardRef(bO),xO=["className","children"],EO=function(e,t){var n=e.className,r=e.children,i=Yn(e,xO),o=a.useContext(RI),s=o.prefixCls,l=o.mode,u=o.rtl;return a.createElement("ul",Ut({className:Ko()(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat("inline"===l?"inline":"vertical"),n),role:"menu"},i,{"data-menu-list":!0,ref:t}),r)},wO=a.forwardRef(EO);wO.displayName="SubMenuList";var TO=wO,SO=["label","children","key","type"];function kO(e,t){return qn(e).map((function(e,n){if(a.isValidElement(e)){var r,i,o=e.key,s=null!==(r=null===(i=e.props)||void 0===i?void 0:i.eventKey)&&void 0!==r?r:o;(null===s||void 0===s)&&(s="tmp_key-".concat([].concat(Pe(t),[n]).join("-")));var l={key:s,eventKey:s};return a.cloneElement(e,l)}return e}))}function CO(e){return(e||[]).map((function(e,t){if(e&&"object"===c(e)){var n=e,r=n.label,i=n.children,o=n.key,s=n.type,l=Yn(n,SO),u=null!==o&&void 0!==o?o:"tmp-".concat(t);return i||"group"===s?"group"===s?a.createElement(wM,Ut({key:u},l,{title:r}),CO(i)):a.createElement(mM,Ut({key:u},l,{title:r}),CO(i)):"divider"===s?a.createElement(TM,Ut({key:u},l)):a.createElement(_O,Ut({key:u},l),r)}return null})).filter((function(e){return e}))}function AO(e,t,n){var r=e;return t&&(r=CO(t)),kO(r,n)}function IO(e,t,n,r){var i=De.unstable_batchedUpdates?function(e){De.unstable_batchedUpdates(n,e)}:n;return e.addEventListener&&e.addEventListener(t,i,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,i,r)}}}var OO,PO=(0,a.forwardRef)((function(e,t){var n=e.didUpdate,r=e.getContainer,i=e.children,o=(0,a.useRef)(),s=(0,a.useRef)();(0,a.useImperativeHandle)(t,(function(){return{}}));var l=(0,a.useRef)(!1);return!l.current&&dt()&&(s.current=r(),o.current=s.current.parentNode,l.current=!0),(0,a.useEffect)((function(){null===n||void 0===n||n(e)})),(0,a.useEffect)((function(){return null===s.current.parentNode&&null!==o.current&&o.current.appendChild(s.current),function(){var e,t;null===(e=s.current)||void 0===e||null===(t=e.parentNode)||void 0===t||t.removeChild(s.current)}}),[]),s.current?De.createPortal(i,s.current):null})),MO=PO;function RO(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function NO(e){var t=e.prefixCls,n=e.motion,r=e.animation,i=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:i?{motionName:i}:null)}function DO(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,i=e.mask,o=e.maskMotion,s=e.maskAnimation,l=e.maskTransitionName;if(!i)return null;var u={};return(o||l||s)&&(u=Re({motionAppear:!0},NO({motion:o,prefixCls:t,transitionName:l,animation:s}))),a.createElement(ts,Ut({},u,{visible:n,removeOnLeave:!0}),(function(e){var n=e.className;return a.createElement("div",{style:{zIndex:r},className:Ko()("".concat(t,"-mask"),n)})}))}function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function FO(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LO(Object(n),!0).forEach((function(t){UO(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function BO(e){return BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},BO(e)}function UO(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var HO={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function jO(){if(void 0!==OO)return OO;OO="";var e=document.createElement("p").style;for(var t in HO)t+"Transform"in e&&(OO=t);return OO}function zO(){return jO()?"".concat(jO(),"TransitionProperty"):"transitionProperty"}function VO(){return jO()?"".concat(jO(),"Transform"):"transform"}function GO(e,t){var n=zO();n&&(e.style[n]=t,"transitionProperty"!==n&&(e.style.transitionProperty=t))}function WO(e,t){var n=VO();n&&(e.style[n]=t,"transform"!==n&&(e.style.transform=t))}var XO,YO=/matrix\((.*)\)/,KO=/matrix3d\((.*)\)/;function qO(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function ZO(e,t,n){var r=n;if("object"!==BO(t))return"undefined"!==typeof r?("number"===typeof r&&(r="".concat(r,"px")),void(e.style[t]=r)):XO(e,t);for(var i in t)t.hasOwnProperty(i)&&ZO(e,i,t[i])}function $O(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if("number"!==typeof n){var i=e.document;"number"!==typeof(n=i.documentElement[r])&&(n=i.body[r])}return n}function QO(e){return $O(e)}function JO(e){return $O(e,!0)}function eP(e){var t=function(e){var t,n,r,i=e.ownerDocument,o=i.body,a=i&&i.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),{left:n-=a.clientLeft||o.clientLeft||0,top:r-=a.clientTop||o.clientTop||0}}(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=QO(r),t.top+=JO(r),t}function tP(e){return null!==e&&void 0!==e&&e==e.window}function nP(e){return tP(e)?e.document:9===e.nodeType?e:e.ownerDocument}var rP=new RegExp("^(".concat(/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,")(?!px)[a-z%]+$"),"i"),iP=/^(top|right|bottom|left)$/,oP="currentStyle",aP="runtimeStyle",sP="left";function lP(e,t){return"left"===e?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function uP(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"bottom"===e?"top":void 0}function cP(e,t,n){"static"===ZO(e,"position")&&(e.style.position="relative");var r=-999,i=-999,o=lP("left",n),a=lP("top",n),s=uP(o),l=uP(a);"left"!==o&&(r=999),"top"!==a&&(i=999);var u="",c=eP(e);("left"in t||"top"in t)&&(u=function(e){return e.style.transitionProperty||e.style[zO()]}(e)||"",GO(e,"none")),"left"in t&&(e.style[s]="",e.style[o]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[a]="".concat(i,"px")),qO(e);var h=eP(e),d={};for(var f in t)if(t.hasOwnProperty(f)){var p=lP(f,n),v="left"===f?r:i,m=c[f]-h[f];d[p]=p===f?v+m:v-m}ZO(e,d),qO(e),("left"in t||"top"in t)&&GO(e,u);var g={};for(var y in t)if(t.hasOwnProperty(y)){var b=lP(y,n),_=t[y]-c[y];g[b]=y===b?d[b]+_:d[b]-_}ZO(e,g)}function hP(e,t){var n=eP(e),r=function(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(VO());if(n&&"none"!==n){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}(e),i={x:r.x,y:r.y};"left"in t&&(i.x=r.x+t.left-n.left),"top"in t&&(i.y=r.y+t.top-n.top),function(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(VO());if(r&&"none"!==r){var i,o=r.match(YO);o?((i=(o=o[1]).split(",").map((function(e){return parseFloat(e,10)})))[4]=t.x,i[5]=t.y,WO(e,"matrix(".concat(i.join(","),")"))):((i=r.match(KO)[1].split(",").map((function(e){return parseFloat(e,10)})))[12]=t.x,i[13]=t.y,WO(e,"matrix3d(".concat(i.join(","),")")))}else WO(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}(e,i)}function dP(e,t){for(var n=0;n<e.length;n++)t(e[n])}function fP(e){return"border-box"===XO(e,"boxSizing")}"undefined"!==typeof window&&(XO=window.getComputedStyle?function(e,t,n){var r=n,i="",o=nP(e);return(r=r||o.defaultView.getComputedStyle(e,null))&&(i=r.getPropertyValue(t)||r[t]),i}:function(e,t){var n=e[oP]&&e[oP][t];if(rP.test(n)&&!iP.test(t)){var r=e.style,i=r[sP],o=e[aP][sP];e[aP][sP]=e[oP][sP],r[sP]="fontSize"===t?"1em":n||0,n=r.pixelLeft+"px",r[sP]=i,e[aP][sP]=o}return""===n?"auto":n});var pP=["margin","border","padding"],vP=-1,mP=2,gP=1;function yP(e,t,n){var r,i,o,a=0;for(i=0;i<t.length;i++)if(r=t[i])for(o=0;o<n.length;o++){var s=void 0;s="border"===r?"".concat(r).concat(n[o],"Width"):r+n[o],a+=parseFloat(XO(e,s))||0}return a}var bP={getParent:function(e){var t=e;do{t=11===t.nodeType&&t.host?t.host:t.parentNode}while(t&&1!==t.nodeType&&9!==t.nodeType);return t}};function _P(e,t,n){var r=n;if(tP(e))return"width"===t?bP.viewportWidth(e):bP.viewportHeight(e);if(9===e.nodeType)return"width"===t?bP.docWidth(e):bP.docHeight(e);var i="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?Math.floor(e.getBoundingClientRect().width):Math.floor(e.getBoundingClientRect().height),a=fP(e),s=0;(null===o||void 0===o||o<=0)&&(o=void 0,(null===(s=XO(e,t))||void 0===s||Number(s)<0)&&(s=e.style[t]||0),s=Math.floor(parseFloat(s))||0),void 0===r&&(r=a?gP:vP);var l=void 0!==o||a,u=o||s;return r===vP?l?u-yP(e,["border","padding"],i):s:l?r===gP?u:u+(r===mP?-yP(e,["border"],i):yP(e,["margin"],i)):s+yP(e,pP.slice(r),i)}dP(["Width","Height"],(function(e){bP["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],bP["viewport".concat(e)](n))},bP["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,i=r.body,o=r.documentElement[n];return"CSS1Compat"===r.compatMode&&o||i&&i[n]||o}}));var xP={position:"absolute",visibility:"hidden",display:"block"};function EP(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i=t[0];return 0!==i.offsetWidth?r=_P.apply(void 0,t):function(e,t,n){var r,i={},o=e.style;for(r in t)t.hasOwnProperty(r)&&(i[r]=o[r],o[r]=t[r]);for(r in n.call(e),t)t.hasOwnProperty(r)&&(o[r]=i[r])}(i,xP,(function(){r=_P.apply(void 0,t)})),r}function wP(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}dP(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);bP["outer".concat(t)]=function(t,n){return t&&EP(t,e,n?0:gP)};var n="width"===e?["Left","Right"]:["Top","Bottom"];bP[e]=function(t,r){var i=r;return void 0!==i?t?(fP(t)&&(i+=yP(t,["padding","border"],n)),ZO(t,e,i)):void 0:t&&EP(t,e,vP)}}));var TP={getWindow:function(e){if(e&&e.document&&e.setTimeout)return e;var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getDocument:nP,offset:function(e,t,n){if("undefined"===typeof t)return eP(e);!function(e,t,n){if(n.ignoreShake){var r=eP(e),i=r.left.toFixed(0),o=r.top.toFixed(0),a=t.left.toFixed(0),s=t.top.toFixed(0);if(i===a&&o===s)return}n.useCssRight||n.useCssBottom?cP(e,t,n):n.useCssTransform&&VO()in document.body.style?hP(e,t):cP(e,t,n)}(e,t,n||{})},isWindow:tP,each:dP,css:ZO,clone:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);if(e.overflow)for(t in e)e.hasOwnProperty(t)&&(n.overflow[t]=e.overflow[t]);return n},mix:wP,getWindowScrollLeft:function(e){return QO(e)},getWindowScrollTop:function(e){return JO(e)},merge:function(){for(var e={},t=0;t<arguments.length;t++)TP.mix(e,t<0||arguments.length<=t?void 0:arguments[t]);return e},viewportWidth:0,viewportHeight:0};wP(TP,bP);var SP=TP.getParent;function kP(e){if(TP.isWindow(e)||9===e.nodeType)return null;var t,n=TP.getDocument(e).body,r=TP.css(e,"position");if(!("fixed"===r||"absolute"===r))return"html"===e.nodeName.toLowerCase()?null:SP(e);for(t=SP(e);t&&t!==n&&9!==t.nodeType;t=SP(t))if("static"!==(r=TP.css(t,"position")))return t;return null}var CP=TP.getParent;function AP(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=kP(e),i=TP.getDocument(e),o=i.defaultView||i.parentWindow,a=i.body,s=i.documentElement;r;){if(-1!==navigator.userAgent.indexOf("MSIE")&&0===r.clientWidth||r===a||r===s||"visible"===TP.css(r,"overflow")){if(r===a||r===s)break}else{var l=TP.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}r=kP(r)}var u=null;TP.isWindow(e)||9===e.nodeType||(u=e.style.position,"absolute"===TP.css(e,"position")&&(e.style.position="fixed"));var c=TP.getWindowScrollLeft(o),h=TP.getWindowScrollTop(o),d=TP.viewportWidth(o),f=TP.viewportHeight(o),p=s.scrollWidth,v=s.scrollHeight,m=window.getComputedStyle(a);if("hidden"===m.overflowX&&(p=o.innerWidth),"hidden"===m.overflowY&&(v=o.innerHeight),e.style&&(e.style.position=u),t||function(e){if(TP.isWindow(e)||9===e.nodeType)return!1;var t=TP.getDocument(e),n=t.body,r=null;for(r=CP(e);r&&r!==n&&r!==t;r=CP(r))if("fixed"===TP.css(r,"position"))return!0;return!1}(e))n.left=Math.max(n.left,c),n.top=Math.max(n.top,h),n.right=Math.min(n.right,c+d),n.bottom=Math.min(n.bottom,h+f);else{var g=Math.max(p,c+d);n.right=Math.min(n.right,g);var y=Math.max(v,h+f);n.bottom=Math.min(n.bottom,y)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function IP(e){var t,n,r;if(TP.isWindow(e)||9===e.nodeType){var i=TP.getWindow(e);t={left:TP.getWindowScrollLeft(i),top:TP.getWindowScrollTop(i)},n=TP.viewportWidth(i),r=TP.viewportHeight(i)}else t=TP.offset(e),n=TP.outerWidth(e),r=TP.outerHeight(e);return t.width=n,t.height=r,t}function OP(e,t){var n=t.charAt(0),r=t.charAt(1),i=e.width,o=e.height,a=e.left,s=e.top;return"c"===n?s+=o/2:"b"===n&&(s+=o),"c"===r?a+=i/2:"r"===r&&(a+=i),{left:a,top:s}}function PP(e,t,n,r,i){var o=OP(t,n[1]),a=OP(e,n[0]),s=[a.left-o.left,a.top-o.top];return{left:Math.round(e.left-s[0]+r[0]-i[0]),top:Math.round(e.top-s[1]+r[1]-i[1])}}function MP(e,t,n){return e.left<n.left||e.left+t.width>n.right}function RP(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function NP(e,t,n){var r=[];return TP.each(e,(function(e){r.push(e.replace(t,(function(e){return n[e]})))})),r}function DP(e,t){return e[t]=-e[t],e}function LP(e,t){return(/%$/.test(e)?parseInt(e.substring(0,e.length-1),10)/100*t:parseInt(e,10))||0}function FP(e,t){e[0]=LP(e[0],t.width),e[1]=LP(e[1],t.height)}function BP(e,t,n,r){var i=n.points,o=n.offset||[0,0],a=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;o=[].concat(o),a=[].concat(a);var u={},c=0,h=AP(l,!(!(s=s||{})||!s.alwaysByViewport)),d=IP(l);FP(o,d),FP(a,t);var f=PP(d,t,i,o,a),p=TP.merge(d,f);if(h&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&MP(f,d,h)){var v=NP(i,/[lr]/gi,{l:"r",r:"l"}),m=DP(o,0),g=DP(a,0);(function(e,t,n){return e.left>n.right||e.left+t.width<n.left})(PP(d,t,v,m,g),d,h)||(c=1,i=v,o=m,a=g)}if(s.adjustY&&RP(f,d,h)){var y=NP(i,/[tb]/gi,{t:"b",b:"t"}),b=DP(o,1),_=DP(a,1);(function(e,t,n){return e.top>n.bottom||e.top+t.height<n.top})(PP(d,t,y,b,_),d,h)||(c=1,i=y,o=b,a=_)}c&&(f=PP(d,t,i,o,a),TP.mix(p,f));var x=MP(f,d,h),E=RP(f,d,h);if(x||E){var w=i;x&&(w=NP(i,/[lr]/gi,{l:"r",r:"l"})),E&&(w=NP(i,/[tb]/gi,{t:"b",b:"t"})),i=w,o=n.offset||[0,0],a=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&x,u.adjustY=s.adjustY&&E,(u.adjustX||u.adjustY)&&(p=function(e,t,n,r){var i=TP.clone(e),o={width:t.width,height:t.height};return r.adjustX&&i.left<n.left&&(i.left=n.left),r.resizeWidth&&i.left>=n.left&&i.left+o.width>n.right&&(o.width-=i.left+o.width-n.right),r.adjustX&&i.left+o.width>n.right&&(i.left=Math.max(n.right-o.width,n.left)),r.adjustY&&i.top<n.top&&(i.top=n.top),r.resizeHeight&&i.top>=n.top&&i.top+o.height>n.bottom&&(o.height-=i.top+o.height-n.bottom),r.adjustY&&i.top+o.height>n.bottom&&(i.top=Math.max(n.bottom-o.height,n.top)),TP.mix(i,o)}(f,d,h,u))}return p.width!==d.width&&TP.css(l,"width",TP.width(l)+p.width-d.width),p.height!==d.height&&TP.css(l,"height",TP.height(l)+p.height-d.height),TP.offset(l,{left:p.left,top:p.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:i,offset:o,targetOffset:a,overflow:u}}function UP(e,t,n){var r=n.target||t,i=IP(r),o=!function(e,t){var n=AP(e,t),r=IP(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}(r,n.overflow&&n.overflow.alwaysByViewport);return BP(e,i,n,o)}UP.__getOffsetParent=kP,UP.__getVisibleRectForElement=AP;function HP(e,t){var n=null,r=null;var i=new dd((function(e){var i=Pt(e,1)[0].target;if(document.documentElement.contains(i)){var o=i.getBoundingClientRect(),a=o.width,s=o.height,l=Math.floor(a),u=Math.floor(s);n===l&&r===u||Promise.resolve().then((function(){t({width:l,height:u})})),n=l,r=u}}));return e&&i.observe(e),function(){i.disconnect()}}function jP(e){return"function"!==typeof e?null:e()}function zP(e){return"object"===c(e)&&e?e:null}var VP=function(e,t){var n=e.children,r=e.disabled,i=e.target,o=e.align,s=e.onAlign,l=e.monitorWindowResize,u=e.monitorBufferTime,c=void 0===u?0:u,h=a.useRef({}),d=a.useRef(),f=a.Children.only(n),p=a.useRef({});p.current.disabled=r,p.current.target=i,p.current.align=o,p.current.onAlign=s;var v=function(e,t){var n=a.useRef(!1),r=a.useRef(null);function i(){window.clearTimeout(r.current)}return[function o(a){if(i(),n.current&&!0!==a)r.current=window.setTimeout((function(){n.current=!1,o()}),t);else{if(!1===e(a))return;n.current=!0,r.current=window.setTimeout((function(){n.current=!1}),t)}},function(){n.current=!1,i()}]}((function(){var e=p.current,t=e.disabled,n=e.target,r=e.align,i=e.onAlign,o=d.current;if(!t&&n&&o){var a,s=jP(n),l=zP(n);h.current.element=s,h.current.point=l,h.current.align=r;var u=document.activeElement;return s&&Zs(s)?a=UP(o,s,r):l&&(a=function(e,t,n){var r,i,o=TP.getDocument(e),a=o.defaultView||o.parentWindow,s=TP.getWindowScrollLeft(a),l=TP.getWindowScrollTop(a),u=TP.viewportWidth(a),c=TP.viewportHeight(a),h={left:r="pageX"in t?t.pageX:s+t.clientX,top:i="pageY"in t?t.pageY:l+t.clientY,width:0,height:0},d=r>=0&&r<=s+u&&i>=0&&i<=l+c,f=[n.points[0],"cc"];return BP(e,h,FO(FO({},n),{},{points:f}),d)}(o,l,r)),function(e,t){e!==document.activeElement&&ft(t,e)&&"function"===typeof e.focus&&e.focus()}(u,o),i&&a&&i(o,a),!0}return!1}),c),m=Pt(v,2),g=m[0],y=m[1],b=Pt(a.useState(),2),_=b[0],x=b[1],E=Pt(a.useState(),2),w=E[0],T=E[1];return xu((function(){x(jP(i)),T(zP(i))})),a.useEffect((function(){h.current.element===_&&function(e,t){return e===t||!(!e||!t)&&("pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t&&e.clientX===t.clientX&&e.clientY===t.clientY)}(h.current.point,w)&&rt(h.current.align,o)||g()})),a.useEffect((function(){return HP(d.current,g)}),[d.current]),a.useEffect((function(){return HP(_,g)}),[_]),a.useEffect((function(){r?y():g()}),[r]),a.useEffect((function(){if(l)return IO(window,"resize",g).remove}),[l]),a.useEffect((function(){return function(){y()}}),[]),a.useImperativeHandle(t,(function(){return{forceAlign:function(){return g(!0)}}})),a.isValidElement(f)&&(f=a.cloneElement(f,{ref:Qo(f.ref,d)})),f},GP=a.forwardRef(VP);GP.displayName="Align";var WP=GP,XP=["measure","alignPre","align",null,"motion"],YP=a.forwardRef((function(e,t){var n=e.visible,r=e.prefixCls,i=e.className,o=e.style,s=e.children,l=e.zIndex,u=e.stretch,c=e.destroyPopupOnHide,h=e.forceRender,d=e.align,f=e.point,p=e.getRootDomNode,v=e.getClassNameFromAlign,m=e.onAlign,g=e.onMouseEnter,y=e.onMouseLeave,b=e.onMouseDown,_=e.onTouchStart,x=e.onClick,E=(0,a.useRef)(),w=(0,a.useRef)(),T=Pt((0,a.useState)(),2),S=T[0],k=T[1],C=function(e){var t=Pt(a.useState({width:0,height:0}),2),n=t[0],r=t[1];return[a.useMemo((function(){var t={};if(e){var r=n.width,i=n.height;-1!==e.indexOf("height")&&i?t.height=i:-1!==e.indexOf("minHeight")&&i&&(t.minHeight=i),-1!==e.indexOf("width")&&r?t.width=r:-1!==e.indexOf("minWidth")&&r&&(t.minWidth=r)}return t}),[e,n]),function(e){var t=e.offsetWidth,n=e.offsetHeight,i=e.getBoundingClientRect(),o=i.width,a=i.height;Math.abs(t-o)<1&&Math.abs(n-a)<1&&(t=o,n=a),r({width:t,height:n})}]}(u),A=Pt(C,2),I=A[0],O=A[1];var P=function(e,t){var n=Pt(aa(null),2),r=n[0],i=n[1],o=(0,a.useRef)();function s(e){i(e,!0)}function l(){Fa.cancel(o.current)}return(0,a.useEffect)((function(){s("measure")}),[e]),(0,a.useEffect)((function(){"measure"===r&&t(),r&&(o.current=Fa(Ee(_e().mark((function e(){var t,n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=XP.indexOf(r),(n=XP[t+1])&&-1!==t&&s(n);case 3:case"end":return e.stop()}}),e)})))))}),[r]),(0,a.useEffect)((function(){return function(){l()}}),[]),[r,function(e){l(),o.current=Fa((function(){s((function(e){switch(r){case"align":return"motion";case"motion":return"stable"}return e})),null===e||void 0===e||e()}))}]}(n,(function(){u&&O(p())})),M=Pt(P,2),R=M[0],N=M[1],D=Pt((0,a.useState)(0),2),L=D[0],F=D[1],B=(0,a.useRef)();function U(){var e;null===(e=E.current)||void 0===e||e.forceAlign()}function H(e,t){var n=v(t);S!==n&&k(n),F((function(e){return e+1})),"align"===R&&(null===m||void 0===m||m(e,t))}xu((function(){"alignPre"===R&&F(0)}),[R]),xu((function(){"align"===R&&(L<3?U():N((function(){var e;null===(e=B.current)||void 0===e||e.call(B)})))}),[L]);var j=Re({},NO(e));function z(){return new Promise((function(e){B.current=e}))}["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach((function(e){var t=j[e];j[e]=function(e,n){return N(),null===t||void 0===t?void 0:t(e,n)}})),a.useEffect((function(){j.motionName||"motion"!==R||N()}),[j.motionName,R]),a.useImperativeHandle(t,(function(){return{forceAlign:U,getElement:function(){return w.current}}}));var V=Re(Re({},I),{},{zIndex:l,opacity:"motion"!==R&&"stable"!==R&&n?0:void 0,pointerEvents:n||"stable"===R?void 0:"none"},o),G=!0;null===d||void 0===d||!d.points||"align"!==R&&"stable"!==R||(G=!1);var W=s;return a.Children.count(s)>1&&(W=a.createElement("div",{className:"".concat(r,"-content")},s)),a.createElement(ts,Ut({visible:n,ref:w,leavedClassName:"".concat(r,"-hidden")},j,{onAppearPrepare:z,onEnterPrepare:z,removeOnLeave:c,forceRender:h}),(function(e,t){var n=e.className,o=e.style,s=Ko()(r,i,S,n);return a.createElement(WP,{target:f||p,key:"popup",ref:E,monitorWindowResize:!0,disabled:G,align:d,onAlign:H},a.createElement("div",{ref:t,className:s,onMouseEnter:g,onMouseLeave:y,onMouseDownCapture:b,onTouchStartCapture:_,onClick:x,style:Re(Re({},o),V)},W))}))}));YP.displayName="PopupInner";var KP=YP,qP=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.visible,i=e.zIndex,o=e.children,s=e.mobile,l=(s=void 0===s?{}:s).popupClassName,u=s.popupStyle,c=s.popupMotion,h=void 0===c?{}:c,d=s.popupRender,f=e.onClick,p=a.useRef();a.useImperativeHandle(t,(function(){return{forceAlign:function(){},getElement:function(){return p.current}}}));var v=Re({zIndex:i},u),m=o;return a.Children.count(o)>1&&(m=a.createElement("div",{className:"".concat(n,"-content")},o)),d&&(m=d(m)),a.createElement(ts,Ut({visible:r,ref:p,removeOnLeave:!0},h),(function(e,t){var r=e.className,i=e.style,o=Ko()(n,l,r);return a.createElement("div",{ref:t,className:o,onClick:f,style:Re(Re({},i),v)},m)}))}));qP.displayName="MobilePopupInner";var ZP=qP,$P=["visible","mobile"],QP=a.forwardRef((function(e,t){var n=e.visible,r=e.mobile,i=Yn(e,$P),o=Pt((0,a.useState)(n),2),s=o[0],l=o[1],u=Pt((0,a.useState)(!1),2),c=u[0],h=u[1],d=Re(Re({},i),{},{visible:s});(0,a.useEffect)((function(){l(n),n&&r&&h(KC())}),[n,r]);var f=c?a.createElement(ZP,Ut({},d,{mobile:r,ref:t})):a.createElement(KP,Ut({},d,{ref:t}));return a.createElement("div",null,a.createElement(DO,d),f)}));QP.displayName="Popup";var JP=QP,eM=a.createContext(null);function tM(){}function nM(){return""}function rM(e){return e?e.ownerDocument:window.document}var iM=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];var oM=function(e){var t=function(t){v(r,t);var n=y(r);function r(e){var t,i;return u(this,r),b(g(t=n.call(this,e)),"popupRef",a.createRef()),b(g(t),"triggerRef",a.createRef()),b(g(t),"portalContainer",void 0),b(g(t),"attachId",void 0),b(g(t),"clickOutsideHandler",void 0),b(g(t),"touchOutsideHandler",void 0),b(g(t),"contextMenuOutsideHandler1",void 0),b(g(t),"contextMenuOutsideHandler2",void 0),b(g(t),"mouseDownTimeout",void 0),b(g(t),"focusTime",void 0),b(g(t),"preClickTime",void 0),b(g(t),"preTouchTime",void 0),b(g(t),"delayTimer",void 0),b(g(t),"hasPopupMouseDown",void 0),b(g(t),"onMouseEnter",(function(e){var n=t.props.mouseEnterDelay;t.fireEvents("onMouseEnter",e),t.delaySetPopupVisible(!0,n,n?null:e)})),b(g(t),"onMouseMove",(function(e){t.fireEvents("onMouseMove",e),t.setPoint(e)})),b(g(t),"onMouseLeave",(function(e){t.fireEvents("onMouseLeave",e),t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),b(g(t),"onPopupMouseEnter",(function(){t.clearDelayTimer()})),b(g(t),"onPopupMouseLeave",(function(e){var n;e.relatedTarget&&!e.relatedTarget.setTimeout&&ft(null===(n=t.popupRef.current)||void 0===n?void 0:n.getElement(),e.relatedTarget)||t.delaySetPopupVisible(!1,t.props.mouseLeaveDelay)})),b(g(t),"onFocus",(function(e){t.fireEvents("onFocus",e),t.clearDelayTimer(),t.isFocusToShow()&&(t.focusTime=Date.now(),t.delaySetPopupVisible(!0,t.props.focusDelay))})),b(g(t),"onMouseDown",(function(e){t.fireEvents("onMouseDown",e),t.preClickTime=Date.now()})),b(g(t),"onTouchStart",(function(e){t.fireEvents("onTouchStart",e),t.preTouchTime=Date.now()})),b(g(t),"onBlur",(function(e){t.fireEvents("onBlur",e),t.clearDelayTimer(),t.isBlurToHide()&&t.delaySetPopupVisible(!1,t.props.blurDelay)})),b(g(t),"onContextMenu",(function(e){e.preventDefault(),t.fireEvents("onContextMenu",e),t.setPopupVisible(!0,e)})),b(g(t),"onContextMenuClose",(function(){t.isContextMenuToShow()&&t.close()})),b(g(t),"onClick",(function(e){if(t.fireEvents("onClick",e),t.focusTime){var n;if(t.preClickTime&&t.preTouchTime?n=Math.min(t.preClickTime,t.preTouchTime):t.preClickTime?n=t.preClickTime:t.preTouchTime&&(n=t.preTouchTime),Math.abs(n-t.focusTime)<20)return;t.focusTime=0}t.preClickTime=0,t.preTouchTime=0,t.isClickToShow()&&(t.isClickToHide()||t.isBlurToHide())&&e&&e.preventDefault&&e.preventDefault();var r=!t.state.popupVisible;(t.isClickToHide()&&!r||r&&t.isClickToShow())&&t.setPopupVisible(!t.state.popupVisible,e)})),b(g(t),"onPopupMouseDown",(function(){var e;(t.hasPopupMouseDown=!0,clearTimeout(t.mouseDownTimeout),t.mouseDownTimeout=window.setTimeout((function(){t.hasPopupMouseDown=!1}),0),t.context)&&(e=t.context).onPopupMouseDown.apply(e,arguments)})),b(g(t),"onDocumentClick",(function(e){if(!t.props.mask||t.props.maskClosable){var n=e.target,r=t.getRootDomNode(),i=t.getPopupDomNode();ft(r,n)&&!t.isContextMenuOnly()||ft(i,n)||t.hasPopupMouseDown||t.close()}})),b(g(t),"getRootDomNode",(function(){var e=t.props.getTriggerDOMNode;if(e)return e(t.triggerRef.current);try{var n=Zo(t.triggerRef.current);if(n)return n}catch(r){}return De.findDOMNode(g(t))})),b(g(t),"getPopupClassNameFromAlign",(function(e){var n=[],r=t.props,i=r.popupPlacement,o=r.builtinPlacements,a=r.prefixCls,s=r.alignPoint,l=r.getPopupClassNameFromAlign;return i&&o&&n.push(function(e,t,n,r){for(var i=n.points,o=Object.keys(e),a=0;a<o.length;a+=1){var s=o[a];if(RO(e[s].points,i,r))return"".concat(t,"-placement-").concat(s)}return""}(o,a,e,s)),l&&n.push(l(e)),n.join(" ")})),b(g(t),"getComponent",(function(){var e=t.props,n=e.prefixCls,r=e.destroyPopupOnHide,i=e.popupClassName,o=e.onPopupAlign,s=e.popupMotion,l=e.popupAnimation,u=e.popupTransitionName,c=e.popupStyle,h=e.mask,d=e.maskAnimation,f=e.maskTransitionName,p=e.maskMotion,v=e.zIndex,m=e.popup,g=e.stretch,y=e.alignPoint,b=e.mobile,_=e.forceRender,x=e.onPopupClick,E=t.state,w=E.popupVisible,T=E.point,S=t.getPopupAlign(),k={};return t.isMouseEnterToShow()&&(k.onMouseEnter=t.onPopupMouseEnter),t.isMouseLeaveToHide()&&(k.onMouseLeave=t.onPopupMouseLeave),k.onMouseDown=t.onPopupMouseDown,k.onTouchStart=t.onPopupMouseDown,a.createElement(JP,Ut({prefixCls:n,destroyPopupOnHide:r,visible:w,point:y&&T,className:i,align:S,onAlign:o,animation:l,getClassNameFromAlign:t.getPopupClassNameFromAlign},k,{stretch:g,getRootDomNode:t.getRootDomNode,style:c,mask:h,zIndex:v,transitionName:u,maskAnimation:d,maskTransitionName:f,maskMotion:p,ref:t.popupRef,motion:s,mobile:b,forceRender:_,onClick:x}),"function"===typeof m?m():m)})),b(g(t),"attachParent",(function(e){Fa.cancel(t.attachId);var n,r=t.props,i=r.getPopupContainer,o=r.getDocument,a=t.getRootDomNode();i?(a||0===i.length)&&(n=i(a)):n=o(t.getRootDomNode()).body,n?n.appendChild(e):t.attachId=Fa((function(){t.attachParent(e)}))})),b(g(t),"getContainer",(function(){if(!t.portalContainer){var e=(0,t.props.getDocument)(t.getRootDomNode()).createElement("div");e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",t.portalContainer=e}return t.attachParent(t.portalContainer),t.portalContainer})),b(g(t),"setPoint",(function(e){t.props.alignPoint&&e&&t.setState({point:{pageX:e.pageX,pageY:e.pageY}})})),b(g(t),"handlePortalUpdate",(function(){t.state.prevPopupVisible!==t.state.popupVisible&&t.props.afterPopupVisibleChange(t.state.popupVisible)})),b(g(t),"triggerContextValue",{onPopupMouseDown:t.onPopupMouseDown}),i="popupVisible"in e?!!e.popupVisible:!!e.defaultPopupVisible,t.state={prevPopupVisible:i,popupVisible:i},iM.forEach((function(e){t["fire".concat(e)]=function(n){t.fireEvents(e,n)}})),t}return f(r,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var e,t=this.props;if(this.state.popupVisible)return this.clickOutsideHandler||!this.isClickToHide()&&!this.isContextMenuToShow()||(e=t.getDocument(this.getRootDomNode()),this.clickOutsideHandler=IO(e,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(e=e||t.getDocument(this.getRootDomNode()),this.touchOutsideHandler=IO(e,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(e=e||t.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=IO(e,"scroll",this.onContextMenuClose)),void(!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=IO(window,"blur",this.onContextMenuClose)));this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),Fa.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var e;return(null===(e=this.popupRef.current)||void 0===e?void 0:e.getElement())||null}},{key:"getPopupAlign",value:function(){var e=this.props,t=e.popupPlacement,n=e.popupAlign,r=e.builtinPlacements;return t&&r?function(e,t,n){return Re(Re({},e[t]||{}),n)}(r,t,n):n}},{key:"setPopupVisible",value:function(e,t){var n=this.props.alignPoint,r=this.state.popupVisible;this.clearDelayTimer(),r!==e&&("popupVisible"in this.props||this.setState({popupVisible:e,prevPopupVisible:r}),this.props.onPopupVisibleChange(e)),n&&t&&e&&this.setPoint(t)}},{key:"delaySetPopupVisible",value:function(e,t,n){var r=this,i=1e3*t;if(this.clearDelayTimer(),i){var o=n?{pageX:n.pageX,pageY:n.pageY}:null;this.delayTimer=window.setTimeout((function(){r.setPopupVisible(e,o),r.clearDelayTimer()}),i)}else this.setPopupVisible(e,n)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(e){var t=this.props.children.props,n=this.props;return t[e]&&n[e]?this["fire".concat(e)]:t[e]||n[e]}},{key:"isClickToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isContextMenuOnly",value:function(){var e=this.props.action;return"contextMenu"===e||1===e.length&&"contextMenu"===e[0]}},{key:"isContextMenuToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("contextMenu")||-1!==n.indexOf("contextMenu")}},{key:"isClickToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("click")||-1!==n.indexOf("click")}},{key:"isMouseEnterToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseEnter")}},{key:"isMouseLeaveToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("hover")||-1!==n.indexOf("mouseLeave")}},{key:"isFocusToShow",value:function(){var e=this.props,t=e.action,n=e.showAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("focus")}},{key:"isBlurToHide",value:function(){var e=this.props,t=e.action,n=e.hideAction;return-1!==t.indexOf("focus")||-1!==n.indexOf("blur")}},{key:"forcePopupAlign",value:function(){var e;this.state.popupVisible&&(null===(e=this.popupRef.current)||void 0===e||e.forceAlign())}},{key:"fireEvents",value:function(e,t){var n=this.props.children.props[e];n&&n(t);var r=this.props[e];r&&r(t)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var t=this.state.popupVisible,n=this.props,r=n.children,i=n.forceRender,o=n.alignPoint,s=n.className,l=n.autoDestroy,u=a.Children.only(r),c={key:"trigger"};this.isContextMenuToShow()?c.onContextMenu=this.onContextMenu:c.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(c.onClick=this.onClick,c.onMouseDown=this.onMouseDown,c.onTouchStart=this.onTouchStart):(c.onClick=this.createTwoChains("onClick"),c.onMouseDown=this.createTwoChains("onMouseDown"),c.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(c.onMouseEnter=this.onMouseEnter,o&&(c.onMouseMove=this.onMouseMove)):c.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?c.onMouseLeave=this.onMouseLeave:c.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(c.onFocus=this.onFocus,c.onBlur=this.onBlur):(c.onFocus=this.createTwoChains("onFocus"),c.onBlur=this.createTwoChains("onBlur"));var h=Ko()(u&&u.props&&u.props.className,s);h&&(c.className=h);var d=Re({},c);ea(u)&&(d.ref=Qo(this.triggerRef,u.ref));var f,p=a.cloneElement(u,d);return(t||this.popupRef.current||i)&&(f=a.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!t&&l&&(f=null),a.createElement(eM.Provider,{value:this.triggerContextValue},p,f)}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.popupVisible,r={};return void 0!==n&&t.popupVisible!==n&&(r.popupVisible=n,r.prevPopupVisible=t.popupVisible),r}}]),r}(a.Component);return b(t,"contextType",eM),b(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:nM,getDocument:rM,onPopupVisibleChange:tM,afterPopupVisibleChange:tM,onPopupAlign:tM,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}(MO),aM={adjustX:1,adjustY:1},sM={topLeft:{points:["bl","tl"],overflow:aM,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:aM,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:aM,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:aM,offset:[4,0]}},lM={topLeft:{points:["bl","tl"],overflow:aM,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:aM,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:aM,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:aM,offset:[4,0]}};function uM(e,t,n){return t||(n?n[e]||n.other:void 0)}var cM={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function hM(e){var t=e.prefixCls,n=e.visible,r=e.children,i=e.popup,o=e.popupClassName,s=e.popupOffset,l=e.disabled,u=e.mode,c=e.onVisibleChange,h=a.useContext(RI),d=h.getPopupContainer,f=h.rtl,p=h.subMenuOpenDelay,v=h.subMenuCloseDelay,m=h.builtinPlacements,g=h.triggerSubMenuAction,y=h.forceSubMenuRender,_=h.rootClassName,x=h.motion,E=h.defaultMotions,w=Pt(a.useState(!1),2),T=w[0],S=w[1],k=Re(Re({},f?lM:sM),m),C=cM[u],A=uM(u,x,E),I=a.useRef(A);"inline"!==u&&(I.current=A);var O=Re(Re({},I.current),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),P=a.useRef();return a.useEffect((function(){return P.current=Fa((function(){S(n)})),function(){Fa.cancel(P.current)}}),[n]),a.createElement(oM,{prefixCls:t,popupClassName:Ko()("".concat(t,"-popup"),b({},"".concat(t,"-rtl"),f),o,_),stretch:"horizontal"===u?"minWidth":null,getPopupContainer:d,builtinPlacements:k,popupPlacement:C,popupVisible:T,popup:i,popupAlign:s&&{offset:s},action:l?[]:[g],mouseEnterDelay:p,mouseLeaveDelay:v,onPopupVisibleChange:c,forceRender:y,popupMotion:O},r)}function dM(e){var t=e.id,n=e.open,r=e.keyPath,i=e.children,o="inline",s=a.useContext(RI),l=s.prefixCls,u=s.forceSubMenuRender,c=s.motion,h=s.defaultMotions,d=s.mode,f=a.useRef(!1);f.current=d===o;var p=Pt(a.useState(!f.current),2),v=p[0],m=p[1],g=!!f.current&&n;a.useEffect((function(){f.current&&m(!1)}),[d]);var y=Re({},uM(o,c,h));r.length>1&&(y.motionAppear=!1);var b=y.onVisibleChanged;return y.onVisibleChanged=function(e){return f.current||e||m(!0),null===b||void 0===b?void 0:b(e)},v?null:a.createElement(NI,{mode:o,locked:!f.current},a.createElement(ts,Ut({visible:g},y,{forceRender:u,removeOnLeave:!1,leavedClassName:"".concat(l,"-hidden")}),(function(e){var n=e.className,r=e.style;return a.createElement(TO,{id:t,className:n,style:r},i)})))}var fM=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],pM=["active"],vM=function(e){var t,n=e.style,r=e.className,i=e.title,o=e.eventKey,s=(e.warnKey,e.disabled),l=e.internalPopupClose,u=e.children,c=e.itemIcon,h=e.expandIcon,d=e.popupClassName,f=e.popupOffset,p=e.onClick,v=e.onMouseEnter,m=e.onMouseLeave,g=e.onTitleClick,y=e.onTitleMouseEnter,_=e.onTitleMouseLeave,x=Yn(e,fM),E=PI(o),w=a.useContext(RI),T=w.prefixCls,S=w.mode,k=w.openKeys,C=w.disabled,A=w.overflowDisabled,I=w.activeKey,O=w.selectedKeys,P=w.itemIcon,M=w.expandIcon,R=w.onItemClick,N=w.onOpenChange,D=w.onActive,L=a.useContext(jI)._internalRenderSubMenuItem,F=a.useContext(HI).isSubPathKey,B=UI(),U="".concat(T,"-submenu"),H=C||s,j=a.useRef(),z=a.useRef();var V=c||P,G=h||M,W=k.includes(o),X=!A&&W,Y=F(O,o),K=uO(o,H,y,_),q=K.active,Z=Yn(K,pM),$=Pt(a.useState(!1),2),Q=$[0],J=$[1],ee=function(e){H||J(e)},te=a.useMemo((function(){return q||"inline"!==S&&(Q||F([I],o))}),[S,q,I,Q,o,F]),ne=cO(B.length),re=aO((function(e){null===p||void 0===p||p(fO(e)),R(e)})),ie=E&&"".concat(E,"-popup"),oe=a.createElement("div",Ut({role:"menuitem",style:ne,className:"".concat(U,"-title"),tabIndex:H?null:-1,ref:j,title:"string"===typeof i?i:null,"data-menu-id":A&&E?null:E,"aria-expanded":X,"aria-haspopup":!0,"aria-controls":ie,"aria-disabled":H,onClick:function(e){H||(null===g||void 0===g||g({key:o,domEvent:e}),"inline"===S&&N(o,!W))},onFocus:function(){D(o)}},Z),i,a.createElement(hO,{icon:"horizontal"!==S?G:null,props:Re(Re({},e),{},{isOpen:X,isSubMenu:!0})},a.createElement("i",{className:"".concat(U,"-arrow")}))),ae=a.useRef(S);if("inline"!==S&&B.length>1?ae.current="vertical":ae.current=S,!A){var se=ae.current;oe=a.createElement(hM,{mode:se,prefixCls:U,visible:!l&&X&&"inline"!==S,popupClassName:d,popupOffset:f,popup:a.createElement(NI,{mode:"horizontal"===se?"vertical":se},a.createElement(TO,{id:ie,ref:z},u)),disabled:H,onVisibleChange:function(e){"inline"!==S&&N(o,e)}},oe)}var le=a.createElement(AI.Item,Ut({role:"none"},x,{component:"li",style:n,className:Ko()(U,"".concat(U,"-").concat(S),r,(t={},b(t,"".concat(U,"-open"),X),b(t,"".concat(U,"-active"),te),b(t,"".concat(U,"-selected"),Y),b(t,"".concat(U,"-disabled"),H),t)),onMouseEnter:function(e){ee(!0),null===v||void 0===v||v({key:o,domEvent:e})},onMouseLeave:function(e){ee(!1),null===m||void 0===m||m({key:o,domEvent:e})}}),oe,!A&&a.createElement(dM,{id:ie,open:X,keyPath:B},u));return L&&(le=L(le,e,{selected:Y,active:te,open:X,disabled:H})),a.createElement(NI,{onItemClick:re,mode:"horizontal"===S?"vertical":S,itemIcon:V,expandIcon:G},le)};function mM(e){var t,n=e.eventKey,r=e.children,i=UI(n),o=kO(r,i),s=FI();return a.useEffect((function(){if(s)return s.registerPath(n,i),function(){s.unregisterPath(n,i)}}),[i]),t=s?o:a.createElement(vM,e,o),a.createElement(BI.Provider,{value:i},t)}var gM=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],yM=[],bM=a.forwardRef((function(e,t){var n,r,i=e,o=i.prefixCls,s=void 0===o?"rc-menu":o,l=i.rootClassName,u=i.style,c=i.className,h=i.tabIndex,d=void 0===h?0:h,f=i.items,p=i.children,v=i.direction,m=i.id,g=i.mode,y=void 0===g?"vertical":g,_=i.inlineCollapsed,x=i.disabled,E=i.disabledOverflow,w=i.subMenuOpenDelay,T=void 0===w?.1:w,S=i.subMenuCloseDelay,k=void 0===S?.1:S,C=i.forceSubMenuRender,A=i.defaultOpenKeys,I=i.openKeys,O=i.activeKey,P=i.defaultActiveFirst,M=i.selectable,R=void 0===M||M,N=i.multiple,D=void 0!==N&&N,L=i.defaultSelectedKeys,F=i.selectedKeys,B=i.onSelect,U=i.onDeselect,H=i.inlineIndent,j=void 0===H?24:H,z=i.motion,V=i.defaultMotions,G=i.triggerSubMenuAction,W=void 0===G?"hover":G,X=i.builtinPlacements,Y=i.itemIcon,K=i.expandIcon,q=i.overflowedIndicator,Z=void 0===q?"...":q,$=i.overflowedIndicatorPopupClassName,Q=i.getPopupContainer,J=i.onClick,ee=i.onOpenChange,te=i.onKeyDown,ne=(i.openAnimation,i.openTransitionName,i._internalRenderMenuItem),re=i._internalRenderSubMenuItem,ie=Yn(i,gM),oe=a.useMemo((function(){return AO(p,f,yM)}),[p,f]),ae=Pt(a.useState(!1),2),se=ae[0],le=ae[1],ue=a.useRef(),ce=function(e){var t=Pt(yh(e,{value:e}),2),n=t[0],r=t[1];return a.useEffect((function(){lO+=1;var e="".concat(sO,"-").concat(lO);r("rc-menu-uuid-".concat(e))}),[]),n}(m),he="rtl"===v;var de=yh(A,{value:I,postState:function(e){return e||yM}}),fe=Pt(de,2),pe=fe[0],ve=fe[1],me=function(e){function t(){ve(e),null===ee||void 0===ee||ee(e)}arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(0,De.flushSync)(t):t()},ge=Pt(a.useState(pe),2),ye=ge[0],be=ge[1],_e=a.useRef(!1),xe=Pt(a.useMemo((function(){return"inline"!==y&&"vertical"!==y||!_?[y,!1]:["vertical",_]}),[y,_]),2),Ee=xe[0],we=xe[1],Te="inline"===Ee,Se=Pt(a.useState(Ee),2),ke=Se[0],Ce=Se[1],Ae=Pt(a.useState(we),2),Ie=Ae[0],Oe=Ae[1];a.useEffect((function(){Ce(Ee),Oe(we),_e.current&&(Te?ve(ye):me(yM))}),[Ee,we]);var Me=Pt(a.useState(0),2),Ne=Me[0],Le=Me[1],Fe=Ne>=oe.length-1||"horizontal"!==ke||E;a.useEffect((function(){Te&&be(pe)}),[pe]),a.useEffect((function(){return _e.current=!0,function(){_e.current=!1}}),[]);var Be=oO(),Ue=Be.registerPath,He=Be.unregisterPath,je=Be.refreshOverflowKeys,ze=Be.isSubPathKey,Ve=Be.getKeyPath,Ge=Be.getKeys,We=Be.getSubPathKeys,Xe=a.useMemo((function(){return{registerPath:Ue,unregisterPath:He}}),[Ue,He]),Ye=a.useMemo((function(){return{isSubPathKey:ze}}),[ze]);a.useEffect((function(){je(Fe?yM:oe.slice(Ne+1).map((function(e){return e.key})))}),[Ne,Fe]);var Ke=Pt(yh(O||P&&(null===(n=oe[0])||void 0===n?void 0:n.key),{value:O}),2),qe=Ke[0],Ze=Ke[1],$e=aO((function(e){Ze(e)})),Qe=aO((function(){Ze(void 0)}));(0,a.useImperativeHandle)(t,(function(){return{list:ue.current,focus:function(e){var t,n,r,i,o=null!==qe&&void 0!==qe?qe:null===(t=oe.find((function(e){return!e.props.disabled})))||void 0===t?void 0:t.key;o&&(null===(n=ue.current)||void 0===n||null===(r=n.querySelector("li[data-menu-id='".concat(OI(ce,o),"']")))||void 0===r||null===(i=r.focus)||void 0===i||i.call(r,e))}}}));var Je=yh(L||[],{value:F,postState:function(e){return Array.isArray(e)?e:null===e||void 0===e?yM:[e]}}),et=Pt(Je,2),tt=et[0],nt=et[1],it=aO((function(e){null===J||void 0===J||J(fO(e)),function(e){if(R){var t,n=e.key,r=tt.includes(n);t=D?r?tt.filter((function(e){return e!==n})):[].concat(Pe(tt),[n]):[n],nt(t);var i=Re(Re({},e),{},{selectedKeys:t});r?null===U||void 0===U||U(i):null===B||void 0===B||B(i)}!D&&pe.length&&"inline"!==ke&&me(yM)}(e)})),ot=aO((function(e,t){var n=pe.filter((function(t){return t!==e}));if(t)n.push(e);else if("inline"!==ke){var r=We(e);n=n.filter((function(e){return!r.has(e)}))}rt(pe,n,!0)||me(n,!0)})),at=aO(Q),st=tO(ke,qe,he,ce,ue,Ge,Ve,Ze,(function(e,t){var n=null!==t&&void 0!==t?t:!pe.includes(e);ot(e,n)}),te);a.useEffect((function(){le(!0)}),[]);var lt=a.useMemo((function(){return{_internalRenderMenuItem:ne,_internalRenderSubMenuItem:re}}),[ne,re]),ut="horizontal"!==ke||E?oe:oe.map((function(e,t){return a.createElement(NI,{key:e.key,overflowDisabled:t>Ne},e)})),ct=a.createElement(AI,Ut({id:m,ref:ue,prefixCls:"".concat(s,"-overflow"),component:"ul",itemComponent:_O,className:Ko()(s,"".concat(s,"-root"),"".concat(s,"-").concat(ke),c,(r={},b(r,"".concat(s,"-inline-collapsed"),Ie),b(r,"".concat(s,"-rtl"),he),r),l),dir:v,style:u,role:"menu",tabIndex:d,data:ut,renderRawItem:function(e){return e},renderRawRest:function(e){var t=e.length,n=t?oe.slice(-t):null;return a.createElement(mM,{eventKey:iO,title:Z,disabled:Fe,internalPopupClose:0===t,popupClassName:$},n)},maxCount:"horizontal"!==ke||E?AI.INVALIDATE:AI.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(e){Le(e)},onKeyDown:st},ie));return a.createElement(jI.Provider,{value:lt},a.createElement(II.Provider,{value:ce},a.createElement(NI,{prefixCls:s,rootClassName:l,mode:ke,openKeys:pe,rtl:he,disabled:x,motion:se?z:null,defaultMotions:se?V:null,activeKey:qe,onActive:$e,onInactive:Qe,selectedKeys:tt,inlineIndent:j,subMenuOpenDelay:T,subMenuCloseDelay:k,forceSubMenuRender:C,builtinPlacements:X,triggerSubMenuAction:W,getPopupContainer:at,itemIcon:Y,expandIcon:K,onItemClick:it,onOpenChange:ot},a.createElement(HI.Provider,{value:Ye},ct),a.createElement("div",{style:{display:"none"},"aria-hidden":!0},a.createElement(LI.Provider,{value:Xe},oe)))))})),_M=["className","title","eventKey","children"],xM=["children"],EM=function(e){var t=e.className,n=e.title,r=(e.eventKey,e.children),i=Yn(e,_M),o=a.useContext(RI).prefixCls,s="".concat(o,"-item-group");return a.createElement("li",Ut({role:"presentation"},i,{onClick:function(e){return e.stopPropagation()},className:Ko()(s,t)}),a.createElement("div",{role:"presentation",className:"".concat(s,"-title"),title:"string"===typeof n?n:void 0},n),a.createElement("ul",{role:"group",className:"".concat(s,"-list")},r))};function wM(e){var t=e.children,n=Yn(e,xM),r=kO(t,UI(n.eventKey));return FI()?r:a.createElement(EM,qs(n,["warnKey"]),r)}function TM(e){var t=e.className,n=e.style,r=a.useContext(RI).prefixCls;return FI()?null:a.createElement("li",{className:Ko()("".concat(r,"-item-divider"),t),style:n})}var SM=bM;SM.Item=_O,SM.SubMenu=mM,SM.ItemGroup=wM,SM.Divider=TM;var kM=SM,CM={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},AM=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:CM}))};var IM=a.forwardRef(AM),OM=function(e){var t;return b({},e.componentCls,(b(t={},"".concat(e.antCls,"-motion-collapse-legacy"),{overflow:"hidden","&-active":{transition:"height ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut,",\n        opacity ").concat(e.motionDurationMid," ").concat(e.motionEaseInOut," !important")}}),b(t,"".concat(e.antCls,"-motion-collapse"),{overflow:"hidden",transition:"height ".concat(e.motionDurationMid," ").concat(e.motionEaseInOut,",\n        opacity ").concat(e.motionDurationMid," ").concat(e.motionEaseInOut," !important")}),t))},PM=new Un("antSlideUpIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1}}),MM=new Un("antSlideUpOut",{"0%":{transform:"scaleY(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"0% 0%",opacity:0}}),RM=new Un("antSlideDownIn",{"0%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0},"100%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1}}),NM=new Un("antSlideDownOut",{"0%":{transform:"scaleY(1)",transformOrigin:"100% 100%",opacity:1},"100%":{transform:"scaleY(0.8)",transformOrigin:"100% 100%",opacity:0}}),DM=new Un("antSlideLeftIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1}}),LM=new Un("antSlideLeftOut",{"0%":{transform:"scaleX(1)",transformOrigin:"0% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"0% 0%",opacity:0}}),FM=new Un("antSlideRightIn",{"0%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0},"100%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1}}),BM=new Un("antSlideRightOut",{"0%":{transform:"scaleX(1)",transformOrigin:"100% 0%",opacity:1},"100%":{transform:"scaleX(0.8)",transformOrigin:"100% 0%",opacity:0}}),UM={"slide-up":{inKeyframes:PM,outKeyframes:MM},"slide-down":{inKeyframes:RM,outKeyframes:NM},"slide-left":{inKeyframes:DM,outKeyframes:LM},"slide-right":{inKeyframes:FM,outKeyframes:BM}},HM=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),o=UM[t],a=o.inKeyframes,s=o.outKeyframes;return[ac(i,a,s,e.motionDurationMid),(n={},b(n,"\n      ".concat(i,"-enter,\n      ").concat(i,"-appear\n    "),b({transform:"scale(0)",transformOrigin:"0% 0%",opacity:0,animationTimingFunction:e.motionEaseOutQuint},"&-prepare",{transform:"scale(1)"})),b(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInQuint}),n)]},jM=function(e){var t,n=e.componentCls,r=e.motionDurationSlow,i=e.menuHorizontalHeight,o=e.colorSplit,a=e.lineWidth,s=e.lineType,l=e.menuItemPaddingInline;return b({},"".concat(n,"-horizontal"),(b(t={lineHeight:"".concat(i,"px"),border:0,borderBottom:"".concat(a,"px ").concat(s," ").concat(o),boxShadow:"none","&::after":{display:"block",clear:"both",height:0,content:'"\\20"'}},"".concat(n,"-item, ").concat(n,"-submenu"),{position:"relative",display:"inline-block",verticalAlign:"bottom",paddingInline:l}),b(t,"> ".concat(n,"-item:hover,\n        > ").concat(n,"-item-active,\n        > ").concat(n,"-submenu ").concat(n,"-submenu-title:hover"),{backgroundColor:"transparent"}),b(t,"".concat(n,"-item, ").concat(n,"-submenu-title"),{transition:["border-color ".concat(r),"background ".concat(r)].join(",")}),b(t,"".concat(n,"-submenu-arrow"),{display:"none"}),t))},zM=function(e){var t,n=e.componentCls,r=e.menuArrowOffset;return b(t={},"".concat(n,"-rtl"),{direction:"rtl"}),b(t,"".concat(n,"-submenu-rtl"),{transformOrigin:"100% 0"}),b(t,"".concat(n,"-rtl").concat(n,"-vertical,\n    ").concat(n,"-submenu-rtl ").concat(n,"-vertical"),b({},"".concat(n,"-submenu-arrow"),{"&::before":{transform:"rotate(-45deg) translateY(-".concat(r,")")},"&::after":{transform:"rotate(45deg) translateY(".concat(r,")")}})),t},VM=function(e){return Object.assign({},us(e))},GM=function(e,t){var n,r,i,o,a,s,l=e.componentCls,u=e.colorItemText,c=e.colorItemTextSelected,h=e.colorGroupTitle,d=e.colorItemBg,f=e.colorSubItemBg,p=e.colorItemBgSelected,v=e.colorActiveBarHeight,m=e.colorActiveBarWidth,g=e.colorActiveBarBorderSize,y=e.motionDurationSlow,_=e.motionEaseInOut,x=e.motionEaseOut,E=e.menuItemPaddingInline,w=e.motionDurationMid,T=e.colorItemTextHover,S=e.lineType,k=e.colorSplit,C=e.colorItemTextDisabled,A=e.colorDangerItemText,I=e.colorDangerItemTextHover,O=e.colorDangerItemTextSelected,P=e.colorDangerItemBgActive,M=e.colorDangerItemBgSelected,R=e.colorItemBgHover,N=e.menuSubMenuBg,D=e.colorItemTextSelectedHorizontal,L=e.colorItemBgSelectedHorizontal;return b({},"".concat(l,"-").concat(t,", ").concat(l,"-").concat(t," > ").concat(l),(b(s={color:u,background:d},"&".concat(l,"-root:focus-visible"),Object.assign({},VM(e))),b(s,"".concat(l,"-item-group-title"),{color:h}),b(s,"".concat(l,"-submenu-selected"),b({},"> ".concat(l,"-submenu-title"),{color:c})),b(s,"".concat(l,"-item-disabled, ").concat(l,"-submenu-disabled"),{color:"".concat(C," !important")}),b(s,"".concat(l,"-item:hover, ").concat(l,"-submenu-title:hover"),b({},"&:not(".concat(l,"-item-selected):not(").concat(l,"-submenu-selected)"),{color:T})),b(s,"&:not(".concat(l,"-horizontal)"),(b(n={},"".concat(l,"-item:not(").concat(l,"-item-selected)"),{"&:hover":{backgroundColor:R},"&:active":{backgroundColor:p}}),b(n,"".concat(l,"-submenu-title"),{"&:hover":{backgroundColor:R},"&:active":{backgroundColor:p}}),n)),b(s,"".concat(l,"-item-danger"),(b(r={color:A},"&".concat(l,"-item:hover"),b({},"&:not(".concat(l,"-item-selected):not(").concat(l,"-submenu-selected)"),{color:I})),b(r,"&".concat(l,"-item:active"),{background:P}),r)),b(s,"".concat(l,"-item a"),{"&, &:hover":{color:"inherit"}}),b(s,"".concat(l,"-item-selected"),(b(i={color:c},"&".concat(l,"-item-danger"),{color:O}),b(i,"a, a:hover",{color:"inherit"}),i)),b(s,"& ".concat(l,"-item-selected"),b({backgroundColor:p},"&".concat(l,"-item-danger"),{backgroundColor:M})),b(s,"".concat(l,"-item, ").concat(l,"-submenu-title"),b({},"&:not(".concat(l,"-item-disabled):focus-visible"),Object.assign({},VM(e)))),b(s,"&".concat(l,"-submenu > ").concat(l),{backgroundColor:N}),b(s,"&".concat(l,"-popup > ").concat(l),{backgroundColor:d}),b(s,"&".concat(l,"-horizontal"),Object.assign(Object.assign({},"dark"===t?{borderBottom:0}:{}),b({},"> ".concat(l,"-item, > ").concat(l,"-submenu"),(b(o={top:g,marginTop:-g,marginBottom:0,borderRadius:0,"&::after":{position:"absolute",insetInline:E,bottom:0,borderBottom:"".concat(v,"px solid transparent"),transition:"border-color ".concat(y," ").concat(_),content:'""'}},"&:hover, &-active, &-open",{"&::after":{borderBottomWidth:v,borderBottomColor:D}}),b(o,"&-selected",{color:D,backgroundColor:L,"&::after":{borderBottomWidth:v,borderBottomColor:D}}),o)))),b(s,"&".concat(l,"-root"),b({},"&".concat(l,"-inline, &").concat(l,"-vertical"),{borderInlineEnd:"".concat(g,"px ").concat(S," ").concat(k)})),b(s,"&".concat(l,"-inline"),(b(a={},"".concat(l,"-sub").concat(l,"-inline"),{background:f}),b(a,"".concat(l,"-item, ").concat(l,"-submenu-title"),g&&m?{width:"calc(100% + ".concat(g,"px)")}:{}),b(a,"".concat(l,"-item"),b({position:"relative","&::after":{position:"absolute",insetBlock:0,insetInlineEnd:0,borderInlineEnd:"".concat(m,"px solid ").concat(c),transform:"scaleY(0.0001)",opacity:0,transition:["transform ".concat(w," ").concat(x),"opacity ".concat(w," ").concat(x)].join(","),content:'""'}},"&".concat(l,"-item-danger"),{"&::after":{borderInlineEndColor:O}})),b(a,"".concat(l,"-selected, ").concat(l,"-item-selected"),{"&::after":{transform:"scaleY(1)",opacity:1,transition:["transform ".concat(w," ").concat(_),"opacity ".concat(w," ").concat(_)].join(",")}}),a)),s))},WM=function(e){var t,n=e.componentCls,r=e.menuItemHeight,i=e.itemMarginInline,o=e.padding,a=e.menuArrowSize,s=e.marginXS,l=e.marginXXS,u=o+a+s;return b(t={},"".concat(n,"-item"),b({position:"relative"},"&:not(:last-child)",{marginBottom:s})),b(t,"".concat(n,"-item, ").concat(n,"-submenu-title"),{height:r,lineHeight:"".concat(r,"px"),paddingInline:o,overflow:"hidden",textOverflow:"ellipsis",marginInline:i,marginBlock:l,width:"calc(100% - ".concat(2*i,"px)")}),b(t,"".concat(n,"-submenu"),{paddingBottom:.02}),b(t,"> ".concat(n,"-item,\n            > ").concat(n,"-submenu > ").concat(n,"-submenu-title"),{height:r,lineHeight:"".concat(r,"px")}),b(t,"".concat(n,"-item-group-list ").concat(n,"-submenu-title,\n            ").concat(n,"-submenu-title"),{paddingInlineEnd:u}),t},XM=function(e){var t,n,r,i,o,a,s,l=e.componentCls,u=e.iconCls,c=e.menuItemHeight,h=e.colorTextLightSolid,d=e.dropdownWidth,f=e.controlHeightLG,p=e.motionDurationMid,v=e.motionEaseOut,m=e.paddingXL,g=e.fontSizeSM,y=e.fontSizeLG,_=e.motionDurationSlow,x=e.paddingXS,E=e.boxShadowSecondary,w={height:c,lineHeight:"".concat(c,"px"),listStylePosition:"inside",listStyleType:"disc"};return[(t={},b(t,l,b({},"&-inline, &-vertical",Object.assign(b({},"&".concat(l,"-root"),{boxShadow:"none"}),WM(e)))),b(t,"".concat(l,"-submenu-popup"),b({},"".concat(l,"-vertical"),Object.assign(Object.assign({},WM(e)),{boxShadow:E}))),t),b({},"".concat(l,"-submenu-popup ").concat(l,"-vertical").concat(l,"-sub"),{minWidth:d,maxHeight:"calc(100vh - ".concat(2.5*f,"px)"),padding:"0",overflow:"hidden",borderInlineEnd:0,"&:not([class*='-active'])":{overflowX:"hidden",overflowY:"auto"}}),b({},"".concat(l,"-inline"),(i={width:"100%"},b(i,"&".concat(l,"-root"),b({},"".concat(l,"-item, ").concat(l,"-submenu-title"),(n={display:"flex",alignItems:"center",transition:["border-color ".concat(_),"background ".concat(_),"padding ".concat(p," ").concat(v)].join(",")},b(n,"> ".concat(l,"-title-content"),{flex:"auto",minWidth:0,overflow:"hidden",textOverflow:"ellipsis"}),b(n,"> *",{flex:"none"}),n))),b(i,"".concat(l,"-sub").concat(l,"-inline"),(r={padding:0,border:0,borderRadius:0,boxShadow:"none"},b(r,"& > ".concat(l,"-submenu > ").concat(l,"-submenu-title"),w),b(r,"& ".concat(l,"-item-group-title"),{paddingInlineStart:m}),r)),b(i,"".concat(l,"-item"),w),i)),b({},"".concat(l,"-inline-collapsed"),(s={width:2*c},b(s,"&".concat(l,"-root"),b({},"".concat(l,"-item, ").concat(l,"-submenu ").concat(l,"-submenu-title"),b({},"> ".concat(l,"-inline-collapsed-noicon"),{fontSize:y,textAlign:"center"}))),b(s,"> ".concat(l,"-item,\n          > ").concat(l,"-item-group > ").concat(l,"-item-group-list > ").concat(l,"-item,\n          > ").concat(l,"-item-group > ").concat(l,"-item-group-list > ").concat(l,"-submenu > ").concat(l,"-submenu-title,\n          > ").concat(l,"-submenu > ").concat(l,"-submenu-title"),(o={insetInlineStart:0,paddingInline:"calc(50% - ".concat(g,"px)"),textOverflow:"clip"},b(o,"\n            ".concat(l,"-submenu-arrow,\n            ").concat(l,"-submenu-expand-icon\n          "),{opacity:0}),b(o,"".concat(l,"-item-icon, ").concat(u),{margin:0,fontSize:y,lineHeight:"".concat(c,"px"),"+ span":{display:"inline-block",opacity:0}}),o)),b(s,"".concat(l,"-item-icon, ").concat(u),{display:"inline-block"}),b(s,"&-tooltip",(a={pointerEvents:"none"},b(a,"".concat(l,"-item-icon, ").concat(u),{display:"none"}),b(a,"a, a:hover",{color:h}),a)),b(s,"".concat(l,"-item-group-title"),Object.assign(Object.assign({},os),{paddingInline:x})),s))]},YM=function(e){var t,n,r=e.componentCls,i=e.fontSize,o=e.motionDurationSlow,a=e.motionDurationMid,s=e.motionEaseInOut,l=e.motionEaseOut,u=e.iconCls,c=e.controlHeightSM;return b(n={},"".concat(r,"-item, ").concat(r,"-submenu-title"),(b(t={position:"relative",display:"block",margin:0,whiteSpace:"nowrap",cursor:"pointer",transition:["border-color ".concat(o),"background ".concat(o),"padding ".concat(o," ").concat(s)].join(",")},"".concat(r,"-item-icon, ").concat(u),{minWidth:i,fontSize:i,transition:["font-size ".concat(a," ").concat(l),"margin ".concat(o," ").concat(s),"color ".concat(o)].join(","),"+ span":{marginInlineStart:c-i,opacity:1,transition:["opacity ".concat(o," ").concat(s),"margin ".concat(o),"color ".concat(o)].join(",")}}),b(t,"".concat(r,"-item-icon"),Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}})),b(t,"&".concat(r,"-item-only-child"),b({},"> ".concat(u,", > ").concat(r,"-item-icon"),{marginInlineEnd:0})),t)),b(n,"".concat(r,"-item-disabled, ").concat(r,"-submenu-disabled"),b({background:"none !important",cursor:"not-allowed","&::after":{borderColor:"transparent !important"},a:{color:"inherit !important"}},"> ".concat(r,"-submenu-title"),{color:"inherit !important",cursor:"not-allowed"})),n},KM=function(e){var t,n=e.componentCls,r=e.motionDurationSlow,i=e.motionEaseInOut,o=e.borderRadius,a=e.menuArrowSize,s=e.menuArrowOffset;return b({},"".concat(n,"-submenu"),(b(t={},"&-expand-icon, &-arrow",{position:"absolute",top:"50%",insetInlineEnd:e.margin,width:a,color:"currentcolor",transform:"translateY(-50%)",transition:"transform ".concat(r," ").concat(i,", opacity ").concat(r)}),b(t,"&-arrow",{"&::before, &::after":{position:"absolute",width:.6*a,height:.15*a,backgroundColor:"currentcolor",borderRadius:o,transition:["background ".concat(r," ").concat(i),"transform ".concat(r," ").concat(i),"top ".concat(r," ").concat(i),"color ".concat(r," ").concat(i)].join(","),content:'""'},"&::before":{transform:"rotate(45deg) translateY(-".concat(s,")")},"&::after":{transform:"rotate(-45deg) translateY(".concat(s,")")}}),t))},qM=function(e){var t,n,r,i,o=e.antCls,a=e.componentCls,s=e.fontSize,l=e.motionDurationSlow,u=e.motionDurationMid,c=e.motionEaseInOut,h=e.lineHeight,d=e.paddingXS,f=e.padding,p=e.colorSplit,v=e.lineWidth,m=e.zIndexPopup,g=e.borderRadiusLG,y=e.radiusSubMenuItem,_=e.menuArrowSize,x=e.menuArrowOffset,E=e.lineType,w=e.menuPanelMaskInset;return[b({"":b({},"".concat(a),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),b({},"&-hidden",{display:"none"})))},"".concat(a,"-submenu-hidden"),{display:"none"}),b({},a,Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},as(e)),{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(t={marginBottom:0,paddingInlineStart:0,fontSize:s,lineHeight:0,listStyle:"none",outline:"none",transition:"width ".concat(l," cubic-bezier(0.2, 0, 0, 1) 0s")},b(t,"ul, ol",{margin:0,padding:0,listStyle:"none"}),b(t,"&-overflow",b({display:"flex"},"".concat(a,"-item"),{flex:"none"})),b(t,"".concat(a,"-item, ").concat(a,"-submenu, ").concat(a,"-submenu-title"),{borderRadius:e.radiusItem}),b(t,"".concat(a,"-item-group-title"),{padding:"".concat(d,"px ").concat(f,"px"),fontSize:s,lineHeight:h,transition:"all ".concat(l)}),b(t,"&-horizontal ".concat(a,"-submenu"),{transition:["border-color ".concat(l," ").concat(c),"background ".concat(l," ").concat(c)].join(",")}),b(t,"".concat(a,"-submenu, ").concat(a,"-submenu-inline"),{transition:["border-color ".concat(l," ").concat(c),"background ".concat(l," ").concat(c),"padding ".concat(u," ").concat(c)].join(",")}),b(t,"".concat(a,"-submenu ").concat(a,"-sub"),{cursor:"initial",transition:["background ".concat(l," ").concat(c),"padding ".concat(l," ").concat(c)].join(",")}),b(t,"".concat(a,"-title-content"),{transition:"color ".concat(l)}),b(t,"".concat(a,"-item a"),{"&::before":{position:"absolute",inset:0,backgroundColor:"transparent",content:'""'}}),b(t,"".concat(a,"-item-divider"),{overflow:"hidden",lineHeight:0,borderColor:p,borderStyle:E,borderWidth:0,borderTopWidth:v,marginBlock:v,padding:0,"&-dashed":{borderStyle:"dashed"}}),t)),YM(e)),(r={},b(r,"".concat(a,"-item-group"),b({},"".concat(a,"-item-group-list"),b({margin:0,padding:0},"".concat(a,"-item, ").concat(a,"-submenu-title"),{paddingInline:"".concat(2*s,"px ").concat(f,"px")}))),b(r,"&-submenu",b({"&-popup":{position:"absolute",zIndex:m,background:"transparent",borderRadius:g,boxShadow:"none",transformOrigin:"0 0","&::before":{position:"absolute",inset:"".concat(w,"px 0 0"),zIndex:-1,width:"100%",height:"100%",opacity:0,content:'""'}},"&-placement-rightTop::before":{top:0,insetInlineStart:w}},"> ".concat(a),Object.assign(Object.assign(Object.assign({borderRadius:g},YM(e)),KM(e)),(n={},b(n,"".concat(a,"-item, ").concat(a,"-submenu > ").concat(a,"-submenu-title"),{borderRadius:y}),b(n,"".concat(a,"-submenu-title::after"),{transition:"transform ".concat(l," ").concat(c)}),n)))),r)),KM(e)),(i={},b(i,"&-inline-collapsed ".concat(a,"-submenu-arrow,\n        &-inline ").concat(a,"-submenu-arrow"),{"&::before":{transform:"rotate(-45deg) translateX(".concat(x,")")},"&::after":{transform:"rotate(45deg) translateX(-".concat(x,")")}}),b(i,"".concat(a,"-submenu-open").concat(a,"-submenu-inline > ").concat(a,"-submenu-title > ").concat(a,"-submenu-arrow"),{transform:"translateY(-".concat(.2*_,"px)"),"&::after":{transform:"rotate(-45deg) translateX(-".concat(x,")")},"&::before":{transform:"rotate(45deg) translateX(".concat(x,")")}}),i))),b({},"".concat(o,"-layout-header"),b({},a,{lineHeight:"inherit"}))]},ZM=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},$M=a.createContext(null),QM=function(e){var t=e.children,n=ZM(e,["children"]),r=a.useContext($M),i=a.useMemo((function(){return Object.assign(Object.assign({},r),n)}),[r,n.prefixCls,n.mode,n.selectable]);return a.createElement($M.Provider,{value:i},t)},JM=$M,eR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},tR=function(e){var t=e.prefixCls,n=e.className,r=e.dashed,i=eR(e,["prefixCls","className","dashed"]),o=(0,a.useContext(Lo).getPrefixCls)("menu",t),s=Ko()(b({},"".concat(o,"-item-divider-dashed"),!!r),n);return a.createElement(TM,Object.assign({className:s},i))},nR=a.createContext({});!function(){var e=0}();var rR=(0,a.createContext)({prefixCls:"",firstLevel:!0,inlineCollapsed:!1}),iR=function(e){var t,n,r=e.className,i=e.children,o=e.icon,s=e.title,l=e.danger,u=a.useContext(rR),c=u.prefixCls,h=u.firstLevel,d=u.direction,f=u.disableMenuItemTitleTooltip,p=u.inlineCollapsed,v=a.useContext(nR).siderCollapsed,m=s;"undefined"===typeof s?m=h?i:"":!1===s&&(m="");var g={title:m};v||p||(g.title=null,g.open=!1);var y=qn(i).length,_=a.createElement(_O,Object.assign({},qs(e,["title","icon","danger"]),{className:Ko()((t={},b(t,"".concat(c,"-item-danger"),l),b(t,"".concat(c,"-item-only-child"),1===(o?y+1:y)),t),r),title:"string"===typeof s?s:void 0}),Js(o,{className:Ko()($s(o)?null===(n=o.props)||void 0===n?void 0:n.className:"","".concat(c,"-item-icon"))}),function(e){var t=a.createElement("span",{className:"".concat(c,"-title-content")},i);return(!o||$s(i)&&"span"===i.type)&&i&&e&&h&&"string"===typeof i?a.createElement("div",{className:"".concat(c,"-inline-collapsed-noicon")},i.charAt(0)):t}(p));return f||(_=a.createElement(JA,Object.assign({},g,{placement:"rtl"===d?"left":"right",overlayClassName:"".concat(c,"-inline-collapsed-tooltip")}),_)),_},oR=function(e){var t,n,r=e.popupClassName,i=e.icon,o=e.title,s=e.theme,l=a.useContext(rR),u=l.prefixCls,c=l.inlineCollapsed,h=l.theme,d=l.mode,f=UI();if(i){var p=$s(o)&&"span"===o.type;n=a.createElement(a.Fragment,null,Js(i,{className:Ko()($s(i)?null===(t=i.props)||void 0===t?void 0:t.className:"","".concat(u,"-item-icon"))}),p?o:a.createElement("span",{className:"".concat(u,"-title-content")},o))}else n=c&&!f.length&&o&&"string"===typeof o?a.createElement("div",{className:"".concat(u,"-inline-collapsed-noicon")},o.charAt(0)):a.createElement("span",{className:"".concat(u,"-title-content")},o);var v=a.useMemo((function(){return Object.assign(Object.assign({},l),{firstLevel:!1})}),[l]),m="horizontal"===d?[0,8]:[10,0];return a.createElement(rR.Provider,{value:v},a.createElement(mM,Object.assign({popupOffset:m},qs(e,["icon"]),{title:n,popupClassName:Ko()(u,r,"".concat(u,"-").concat(s||h))})))},aR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function sR(e){return(e||[]).map((function(e,t){if(e&&"object"===typeof e){var n=e,r=n.label,i=n.children,o=n.key,s=n.type,l=aR(n,["label","children","key","type"]),u=null!==o&&void 0!==o?o:"tmp-".concat(t);return i||"group"===s?"group"===s?a.createElement(wM,Object.assign({key:u},l,{title:r}),sR(i)):a.createElement(oR,Object.assign({key:u},l,{title:r}),sR(i)):"divider"===s?a.createElement(tR,Object.assign({key:u},l)):a.createElement(iR,Object.assign({key:u},l),r)}return null})).filter((function(e){return e}))}function lR(e){return a.useMemo((function(){return e?sR(e):e}),[e])}var uR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},cR=(0,a.forwardRef)((function(e,t){var n,r,i=a.useContext(JM),o=i||{},s=a.useContext(Lo),l=s.getPrefixCls,u=s.getPopupContainer,c=s.direction,h=l(),d=e.prefixCls,f=e.className,p=e.theme,v=void 0===p?"light":p,m=e.expandIcon,g=e._internalDisableMenuItemTitleTooltip,y=e.inlineCollapsed,b=e.siderCollapsed,_=e.items,x=e.children,E=e.rootClassName,w=e.mode,T=e.selectable,S=e.onClick,k=qs(uR(e,["prefixCls","className","theme","expandIcon","_internalDisableMenuItemTitleTooltip","inlineCollapsed","siderCollapsed","items","children","rootClassName","mode","selectable","onClick"]),["collapsedWidth"]),C=lR(_)||x;null===(n=o.validator)||void 0===n||n.call(o,{mode:w});var A,I=mh((function(){var e;null===S||void 0===S||S.apply(void 0,arguments),null===(e=o.onClick)||void 0===e||e.call(o)})),O=o.mode||w,P=null!==T&&void 0!==T?T:o.selectable,M=a.useMemo((function(){return void 0!==b?b:y}),[y,b]),R={horizontal:{motionName:"".concat(h,"-slide-up")},inline:yu(h),other:{motionName:"".concat(h,"-zoom-big")}},N=l("menu",d||o.prefixCls),D=function(e,t){var n=ol("Menu",(function(e,n){var r=n.overrideComponentToken;if(!1===t)return[];var i=e.colorBgElevated,o=e.colorPrimary,a=e.colorError,s=e.colorErrorHover,l=e.colorTextLightSolid,u=e.controlHeightLG,c=e.fontSize/7*5,h=nl(e,{menuItemHeight:u,menuItemPaddingInline:e.margin,menuArrowSize:c,menuHorizontalHeight:1.15*u,menuArrowOffset:"".concat(.25*c,"px"),menuPanelMaskInset:-7,menuSubMenuBg:i}),d=new yo(l).setAlpha(.65).toRgbString(),f=nl(h,{colorItemText:d,colorItemTextHover:l,colorGroupTitle:d,colorItemTextSelected:l,colorItemBg:"#001529",colorSubItemBg:"#000c17",colorItemBgActive:"transparent",colorItemBgSelected:o,colorActiveBarWidth:0,colorActiveBarHeight:0,colorActiveBarBorderSize:0,colorItemTextDisabled:new yo(l).setAlpha(.25).toRgbString(),colorDangerItemText:a,colorDangerItemTextHover:s,colorDangerItemTextSelected:l,colorDangerItemBgActive:a,colorDangerItemBgSelected:a,menuSubMenuBg:"#001529",colorItemTextSelectedHorizontal:l,colorItemBgSelectedHorizontal:o},Object.assign({},r));return[qM(h),jM(h),XM(h),GM(h,"light"),GM(f,"dark"),zM(h),OM(h),HM(h,"slide-up"),HM(h,"slide-down"),gc(h,"zoom-big")]}),(function(e){var t=e.colorPrimary,n=e.colorError,r=e.colorTextDisabled,i=e.colorErrorBg,o=e.colorText,a=e.colorTextDescription,s=e.colorBgContainer,l=e.colorFillAlter,u=e.colorFillContent,c=e.lineWidth,h=e.lineWidthBold,d=e.controlItemBgActive,f=e.colorBgTextHover;return{dropdownWidth:160,zIndexPopup:e.zIndexPopupBase+50,radiusItem:e.borderRadiusLG,radiusSubMenuItem:e.borderRadiusSM,colorItemText:o,colorItemTextHover:o,colorItemTextHoverHorizontal:t,colorGroupTitle:a,colorItemTextSelected:t,colorItemTextSelectedHorizontal:t,colorItemBg:s,colorItemBgHover:f,colorItemBgActive:u,colorSubItemBg:l,colorItemBgSelected:d,colorItemBgSelectedHorizontal:"transparent",colorActiveBarWidth:0,colorActiveBarHeight:h,colorActiveBarBorderSize:c,colorItemTextDisabled:r,colorDangerItemText:n,colorDangerItemTextHover:n,colorDangerItemTextSelected:n,colorDangerItemBgActive:i,colorDangerItemBgSelected:i,itemMarginInline:e.marginXXS}}));return n(e)}(N,!i),L=Pt(D,2),F=L[0],B=L[1],U=Ko()("".concat(N,"-").concat(v),f);if("function"===typeof m)A=m;else{var H=m||o.expandIcon;A=Js(H,{className:Ko()("".concat(N,"-submenu-expand-icon"),null===(r=null===H||void 0===H?void 0:H.props)||void 0===r?void 0:r.className)})}var j=a.useMemo((function(){return{prefixCls:N,inlineCollapsed:M||!1,direction:c,firstLevel:!0,theme:v,mode:O,disableMenuItemTitleTooltip:g}}),[N,M,c,g,v]);return F(a.createElement(JM.Provider,{value:null},a.createElement(rR.Provider,{value:j},a.createElement(kM,Object.assign({getPopupContainer:u,overflowedIndicator:a.createElement(IM,null),overflowedIndicatorPopupClassName:Ko()(N,"".concat(N,"-").concat(v)),mode:O,selectable:P,onClick:I},k,{inlineCollapsed:M,className:U,prefixCls:N,direction:c,defaultMotions:R,expandIcon:A,ref:t,rootClassName:Ko()(E,B)}),C))))})),hR=cR,dR=(0,a.forwardRef)((function(e,t){var n=(0,a.useRef)(null),r=a.useContext(nR);return(0,a.useImperativeHandle)(t,(function(){return{menu:n.current,focus:function(e){var t;null===(t=n.current)||void 0===t||t.focus(e)}}})),a.createElement(hR,Object.assign({ref:n},e,r))}));dR.Item=iR,dR.SubMenu=oR,dR.Divider=tR,dR.ItemGroup=wM;var fR=dR,pR={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 00302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 000-50.4z"}}]},name:"right",theme:"outlined"},vR=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:pR}))};var mR=a.forwardRef(vR),gR=Du.ESC,yR=Du.TAB;var bR=(0,a.forwardRef)((function(e,t){var n=e.overlay,r=e.arrow,i=e.prefixCls,o=(0,a.useMemo)((function(){return"function"===typeof n?n():n}),[n]),s=Qo(t,null===o||void 0===o?void 0:o.ref);return a.createElement(a.Fragment,null,r&&a.createElement("div",{className:"".concat(i,"-arrow")}),a.cloneElement(o,{ref:ea(o)?s:void 0}))})),_R={adjustX:1,adjustY:1},xR=[0,0],ER={topLeft:{points:["bl","tl"],overflow:_R,offset:[0,-4],targetOffset:xR},top:{points:["bc","tc"],overflow:_R,offset:[0,-4],targetOffset:xR},topRight:{points:["br","tr"],overflow:_R,offset:[0,-4],targetOffset:xR},bottomLeft:{points:["tl","bl"],overflow:_R,offset:[0,4],targetOffset:xR},bottom:{points:["tc","bc"],overflow:_R,offset:[0,4],targetOffset:xR},bottomRight:{points:["tr","br"],overflow:_R,offset:[0,4],targetOffset:xR}},wR=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus","overlay","children","onVisibleChange"];function TR(e,t){var n,r=e.arrow,i=void 0!==r&&r,o=e.prefixCls,s=void 0===o?"rc-dropdown":o,l=e.transitionName,u=e.animation,c=e.align,h=e.placement,d=void 0===h?"bottomLeft":h,f=e.placements,p=void 0===f?ER:f,v=e.getPopupContainer,m=e.showAction,g=e.hideAction,y=e.overlayClassName,_=e.overlayStyle,x=e.visible,E=e.trigger,w=void 0===E?["hover"]:E,T=e.autoFocus,S=e.overlay,k=e.children,C=e.onVisibleChange,A=Yn(e,wR),I=Pt(a.useState(),2),O=I[0],P=I[1],M="visible"in e?x:O,R=a.useRef(null),N=a.useRef(null),D=a.useRef(null);a.useImperativeHandle(t,(function(){return R.current}));var L=function(e){P(e),null===C||void 0===C||C(e)};!function(e){var t=e.visible,n=e.triggerRef,r=e.onVisibleChange,i=e.autoFocus,o=e.overlayRef,s=a.useRef(!1),l=function(){var e,i;t&&(null===(e=n.current)||void 0===e||null===(i=e.focus)||void 0===i||i.call(e),null===r||void 0===r||r(!1))},u=function(){var e;return!(null===(e=o.current)||void 0===e||!e.focus)&&(o.current.focus(),s.current=!0,!0)},c=function(e){switch(e.keyCode){case gR:l();break;case yR:var t=!1;s.current||(t=u()),t?e.preventDefault():l()}};a.useEffect((function(){return t?(window.addEventListener("keydown",c),i&&Fa(u,3),function(){window.removeEventListener("keydown",c),s.current=!1}):function(){s.current=!1}}),[t])}({visible:M,triggerRef:D,onVisibleChange:L,autoFocus:T,overlayRef:N});var F=function(){return a.createElement(bR,{ref:N,overlay:S,prefixCls:s,arrow:i})},B=a.cloneElement(k,{className:Ko()(null===(n=k.props)||void 0===n?void 0:n.className,M&&function(){var t=e.openClassName;return void 0!==t?t:"".concat(s,"-open")}()),ref:ea(k)?Qo(D,k.ref):void 0}),U=g;return U||-1===w.indexOf("contextMenu")||(U=["click"]),a.createElement(yA,Ut({builtinPlacements:p},A,{prefixCls:s,ref:R,popupClassName:Ko()(y,b({},"".concat(s,"-show-arrow"),i)),popupStyle:_,action:w,showAction:m,hideAction:U,popupPlacement:d,popupAlign:c,popupTransitionName:l,popupAnimation:u,popupVisible:M,stretch:function(){var t=e.minOverlayWidthMatchTrigger,n=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?t:!n}()?"minWidth":"",popup:"function"===typeof S?F:F(),onPopupVisibleChange:L,onPopupClick:function(t){var n=e.onOverlayClick;P(!1),n&&n(t)},getPopupContainer:v}),B)}var SR=a.forwardRef(TR);var kR=function(){var e=Pt(a.useState(!1),2),t=e[0],n=e[1];return a.useEffect((function(){n(function(){if(!nc())return!1;if(void 0!==Qu)return Qu;var e=document.createElement("div");return e.style.display="flex",e.style.flexDirection="column",e.style.rowGap="1px",e.appendChild(document.createElement("div")),e.appendChild(document.createElement("div")),document.body.appendChild(e),Qu=1===e.scrollHeight,document.body.removeChild(e),Qu}())}),[]),t};function CR(e){var t=e.className,n=e.direction,r=e.index,i=e.marginDirection,o=e.children,s=e.split,l=e.wrap,u=a.useContext(IR),c=u.horizontalSize,h=u.verticalSize,d=u.latestIndex,f={};return u.supportFlexGap||("vertical"===n?r<d&&(f={marginBottom:c/(s?2:1)}):f=Object.assign(Object.assign({},r<d&&b({},i,c/(s?2:1))),l&&{paddingBottom:h})),null===o||void 0===o?null:a.createElement(a.Fragment,null,a.createElement("div",{className:t,style:f},o),r<d&&s&&a.createElement("span",{className:"".concat(t,"-split"),style:f},s))}var AR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},IR=a.createContext({latestIndex:0,horizontalSize:0,verticalSize:0,supportFlexGap:!1}),OR={small:8,middle:16,large:24};var PR=a.forwardRef((function(e,t){var n,r=a.useContext(Lo),i=r.getPrefixCls,o=r.space,s=r.direction,l=e.size,u=void 0===l?(null===o||void 0===o?void 0:o.size)||"small":l,c=e.align,h=e.className,d=e.rootClassName,f=e.children,p=e.direction,v=void 0===p?"horizontal":p,m=e.prefixCls,g=e.split,y=e.style,_=e.wrap,x=void 0!==_&&_,E=AR(e,["size","align","className","rootClassName","children","direction","prefixCls","split","style","wrap"]),w=kR(),T=Pt(a.useMemo((function(){return(Array.isArray(u)?u:[u,u]).map((function(e){return function(e){return"string"===typeof e?OR[e]:e||0}(e)}))}),[u]),2),S=T[0],k=T[1],C=qn(f,{keepEmpty:!0}),A=void 0===c&&"horizontal"===v?"center":c,I=i("space",m),O=Pt(vl(I),2),P=O[0],M=O[1],R=Ko()(I,M,"".concat(I,"-").concat(v),(b(n={},"".concat(I,"-rtl"),"rtl"===s),b(n,"".concat(I,"-align-").concat(A),A),n),h,d),N="".concat(I,"-item"),D="rtl"===s?"marginLeft":"marginRight",L=0,F=C.map((function(e,t){null!==e&&void 0!==e&&(L=t);var n=e&&e.key||"".concat(N,"-").concat(t);return a.createElement(CR,{className:N,key:n,direction:v,index:t,marginDirection:D,split:g,wrap:x},e)})),B=a.useMemo((function(){return{horizontalSize:S,verticalSize:k,latestIndex:L,supportFlexGap:w}}),[S,k,L,w]);if(0===C.length)return null;var U={};return x&&(U.flexWrap="wrap",w||(U.marginBottom=-k)),w&&(U.columnGap=S,U.rowGap=k),P(a.createElement("div",Object.assign({ref:t,className:R,style:Object.assign(Object.assign({},U),y)},E),a.createElement(IR.Provider,{value:B},F)))}));var MR=PR;MR.Compact=xl;var RR=MR,NR=new Un("antMoveDownIn",{"0%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),DR=new Un("antMoveDownOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, 100%, 0)",transformOrigin:"0 0",opacity:0}}),LR=new Un("antMoveLeftIn",{"0%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),FR=new Un("antMoveLeftOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(-100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),BR=new Un("antMoveRightIn",{"0%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),UR=new Un("antMoveRightOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(100%, 0, 0)",transformOrigin:"0 0",opacity:0}}),HR={"move-up":{inKeyframes:new Un("antMoveUpIn",{"0%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1}}),outKeyframes:new Un("antMoveUpOut",{"0%":{transform:"translate3d(0, 0, 0)",transformOrigin:"0 0",opacity:1},"100%":{transform:"translate3d(0, -100%, 0)",transformOrigin:"0 0",opacity:0}})},"move-down":{inKeyframes:NR,outKeyframes:DR},"move-left":{inKeyframes:LR,outKeyframes:FR},"move-right":{inKeyframes:BR,outKeyframes:UR}},jR=function(e,t){var n,r=e.antCls,i="".concat(r,"-").concat(t),o=HR[t],a=o.inKeyframes,s=o.outKeyframes;return[ac(i,a,s,e.motionDurationMid),(n={},b(n,"\n        ".concat(i,"-enter,\n        ").concat(i,"-appear\n      "),{opacity:0,animationTimingFunction:e.motionEaseOutCirc}),b(n,"".concat(i,"-leave"),{animationTimingFunction:e.motionEaseInOutCirc}),n)]},zR=function(e){var t=e.componentCls,n=e.menuCls,r=e.colorError,i=e.colorTextLightSolid,o="".concat(n,"-item");return b({},"".concat(t,", ").concat(t,"-menu-submenu"),b({},"".concat(n," ").concat(o),b({},"&".concat(o,"-danger:not(").concat(o,"-disabled)"),{color:r,"&:hover":{color:i,backgroundColor:r}})))},VR=function(e){var t,n,r,i,o=e.componentCls,a=e.menuCls,s=e.zIndexPopup,l=e.dropdownArrowDistance,u=e.sizePopupArrow,c=e.antCls,h=e.iconCls,d=e.motionDurationMid,f=e.dropdownPaddingVertical,p=e.fontSize,v=e.dropdownEdgeChildPadding,m=e.colorTextDisabled,g=e.fontSizeIcon,y=e.controlPaddingHorizontal,_=e.colorBgElevated;return[b({},o,Object.assign(Object.assign({},as(e)),(n={position:"absolute",top:-9999,left:{_skip_check_:!0,value:-9999},zIndex:s,display:"block","&::before":{position:"absolute",insetBlock:u/2-l,zIndex:-9999,opacity:1e-4,content:'""'}},b(n,"&-trigger".concat(c,"-btn > ").concat(h,"-down"),{fontSize:g,transform:"none"}),b(n,"".concat(o,"-wrap"),(t={position:"relative"},b(t,"".concat(c,"-btn > ").concat(h,"-down"),{fontSize:g}),b(t,"".concat(h,"-down::before"),{transition:"transform ".concat(d)}),t)),b(n,"".concat(o,"-wrap-open"),b({},"".concat(h,"-down::before"),{transform:"rotate(180deg)"})),b(n,"\n        &-hidden,\n        &-menu-hidden,\n        &-menu-submenu-hidden\n      ",{display:"none"}),b(n,"&".concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(o,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(o,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(o,"-placement-bottom,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(o,"-placement-bottom,\n          &").concat(c,"-slide-down-enter").concat(c,"-slide-down-enter-active").concat(o,"-placement-bottomRight,\n          &").concat(c,"-slide-down-appear").concat(c,"-slide-down-appear-active").concat(o,"-placement-bottomRight"),{animationName:PM}),b(n,"&".concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(o,"-placement-topLeft,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(o,"-placement-topLeft,\n          &").concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(o,"-placement-top,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(o,"-placement-top,\n          &").concat(c,"-slide-up-enter").concat(c,"-slide-up-enter-active").concat(o,"-placement-topRight,\n          &").concat(c,"-slide-up-appear").concat(c,"-slide-up-appear-active").concat(o,"-placement-topRight"),{animationName:RM}),b(n,"&".concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(o,"-placement-bottomLeft,\n          &").concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(o,"-placement-bottom,\n          &").concat(c,"-slide-down-leave").concat(c,"-slide-down-leave-active").concat(o,"-placement-bottomRight"),{animationName:MM}),b(n,"&".concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(o,"-placement-topLeft,\n          &").concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(o,"-placement-top,\n          &").concat(c,"-slide-up-leave").concat(c,"-slide-up-leave-active").concat(o,"-placement-topRight"),{animationName:NM}),n))),PA(e,{colorBg:_,limitVerticalRadius:!0,arrowPlacement:{top:!0,bottom:!0}}),(i={},b(i,"".concat(o," ").concat(a),{position:"relative",margin:0}),b(i,"".concat(a,"-submenu-popup"),{position:"absolute",zIndex:s,background:"transparent",boxShadow:"none",transformOrigin:"0 0","ul, li":{listStyle:"none",margin:0}}),b(i,"".concat(o,", ").concat(o,"-menu-submenu"),b({},a,Object.assign(Object.assign({padding:v,listStyleType:"none",backgroundColor:_,backgroundClip:"padding-box",borderRadius:e.borderRadiusLG,outline:"none",boxShadow:e.boxShadowSecondary},cs(e)),(r={},b(r,"".concat(a,"-item-group-title"),{padding:"".concat(f,"px ").concat(y,"px"),color:e.colorTextDescription,transition:"all ".concat(d)}),b(r,"".concat(a,"-item"),{position:"relative",display:"flex",alignItems:"center"}),b(r,"".concat(a,"-item-icon"),{minWidth:p,marginInlineEnd:e.marginXS,fontSize:e.fontSizeSM}),b(r,"".concat(a,"-title-content"),{flex:"auto","> a":{color:"inherit",transition:"all ".concat(d),"&:hover":{color:"inherit"},"&::after":{position:"absolute",inset:0,content:'""'}}}),b(r,"".concat(a,"-item, ").concat(a,"-submenu-title"),Object.assign(Object.assign(b({clear:"both",margin:0,padding:"".concat(f,"px ").concat(y,"px"),color:e.colorText,fontWeight:"normal",fontSize:p,lineHeight:e.lineHeight,cursor:"pointer",transition:"all ".concat(d),borderRadius:e.borderRadiusSM},"&:hover, &-active",{backgroundColor:e.controlItemBgHover}),cs(e)),b({"&-selected":{color:e.colorPrimary,backgroundColor:e.controlItemBgActive,"&:hover, &-active":{backgroundColor:e.controlItemBgActiveHover}},"&-disabled":{color:m,cursor:"not-allowed","&:hover":{color:m,backgroundColor:_,cursor:"not-allowed"},a:{pointerEvents:"none"}},"&-divider":{height:1,margin:"".concat(e.marginXXS,"px 0"),overflow:"hidden",lineHeight:0,backgroundColor:e.colorSplit}},"".concat(o,"-menu-submenu-expand-icon"),b({position:"absolute",insetInlineEnd:e.paddingXS},"".concat(o,"-menu-submenu-arrow-icon"),{marginInlineEnd:"0 !important",color:e.colorTextDescription,fontSize:g,fontStyle:"normal"})))),b(r,"".concat(a,"-item-group-list"),{margin:"0 ".concat(e.marginXS,"px"),padding:0,listStyle:"none"}),b(r,"".concat(a,"-submenu-title"),{paddingInlineEnd:y+e.fontSizeSM}),b(r,"".concat(a,"-submenu-vertical"),{position:"relative"}),b(r,"".concat(a,"-submenu").concat(a,"-submenu-disabled ").concat(o,"-menu-submenu-title"),b({},"&, ".concat(o,"-menu-submenu-arrow-icon"),{color:m,backgroundColor:_,cursor:"not-allowed"})),b(r,"".concat(a,"-submenu-selected ").concat(o,"-menu-submenu-title"),{color:e.colorPrimary}),r)))),i),[HM(e,"slide-up"),HM(e,"slide-down"),jR(e,"move-up"),jR(e,"move-down"),gc(e,"zoom-big")]]},GR=ol("Dropdown",(function(e,t){var n=t.rootPrefixCls,r=e.marginXXS,i=e.sizePopupArrow,o=e.controlHeight,a=e.fontSize,s=e.lineHeight,l=e.paddingXXS,u=e.componentCls,c=(o-a*s)/2,h=IA({contentRadius:e.borderRadiusLG}).dropdownArrowOffset,d=nl(e,{menuCls:"".concat(u,"-menu"),rootPrefixCls:n,dropdownArrowDistance:i/2+r,dropdownArrowOffset:h,dropdownPaddingVertical:c,dropdownEdgeChildPadding:l});return[VR(d),zR(d)]}),(function(e){return{zIndexPopup:e.zIndexPopupBase+50}})),WR=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},XR=function(e){var t=a.useContext(Lo),n=t.getPopupContainer,r=t.getPrefixCls,i=t.direction,o=e.prefixCls,s=e.type,l=void 0===s?"default":s,u=e.danger,c=e.disabled,h=e.loading,d=e.onClick,f=e.htmlType,p=e.children,v=e.className,m=e.menu,g=e.arrow,y=e.autoFocus,b=e.overlay,_=e.trigger,x=e.align,E=e.open,w=e.onOpenChange,T=e.placement,S=e.getPopupContainer,k=e.href,C=e.icon,A=void 0===C?a.createElement(IM,null):C,I=e.title,O=e.buttonsRender,P=void 0===O?function(e){return e}:O,M=e.mouseEnterDelay,R=e.mouseLeaveDelay,N=e.overlayClassName,D=e.overlayStyle,L=e.destroyPopupOnHide,F=e.dropdownRender,B=WR(e,["prefixCls","type","danger","disabled","loading","onClick","htmlType","children","className","menu","arrow","autoFocus","overlay","trigger","align","open","onOpenChange","placement","getPopupContainer","href","icon","title","buttonsRender","mouseEnterDelay","mouseLeaveDelay","overlayClassName","overlayStyle","destroyPopupOnHide","dropdownRender"]),U=r("dropdown",o),H="".concat(U,"-button"),j=Pt(GR(U),2),z=j[0],V=j[1],G={menu:m,arrow:g,autoFocus:y,align:x,disabled:c,trigger:c?[]:_,onOpenChange:w,getPopupContainer:S||n,mouseEnterDelay:M,mouseLeaveDelay:R,overlayClassName:N,overlayStyle:D,destroyPopupOnHide:L,dropdownRender:F},W=yl(U,i),X=W.compactSize,Y=W.compactItemClassnames,K=Ko()(H,Y,v,V);"overlay"in e&&(G.overlay=b),"open"in e&&(G.open=E),G.placement="placement"in e?T:"rtl"===i?"bottomLeft":"bottomRight";var q=Pt(P([a.createElement(uu,{type:l,danger:u,disabled:c,loading:h,onClick:d,htmlType:f,href:k,title:I},p),a.createElement(uu,{type:l,danger:u,icon:A})]),2),Z=q[0],$=q[1];return z(a.createElement(RR.Compact,Object.assign({className:K,size:X,block:!0},B),Z,a.createElement($R,Object.assign({},G),$)))};XR.__ANT_BUTTON=!0;var YR=function(e){var t=e.menu,n=e.arrow,r=e.prefixCls,i=e.children,o=e.trigger,s=e.disabled,l=e.dropdownRender,u=e.getPopupContainer,c=e.overlayClassName,h=e.rootClassName,d=e.open,f=e.onOpenChange,p=e.visible,v=e.onVisibleChange,m=e.mouseEnterDelay,g=void 0===m?.15:m,y=e.mouseLeaveDelay,_=void 0===y?.1:y,x=e.autoAdjustOverflow,E=void 0===x||x,w=e.placement,T=void 0===w?"":w,S=e.overlay,k=e.transitionName,C=a.useContext(Lo),A=C.getPopupContainer,I=C.getPrefixCls,O=C.direction;var P=a.useMemo((function(){var e=I();return void 0!==k?k:T.includes("top")?"".concat(e,"-slide-down"):"".concat(e,"-slide-up")}),[I,T,k]),M=a.useMemo((function(){return T?T.includes("Center")?T.slice(0,T.indexOf("Center")):T:"rtl"===O?"bottomRight":"bottomLeft"}),[T,O]);var R,N=I("dropdown",r),D=Pt(GR(N),2),L=D[0],F=D[1],B=zA.useToken().token,U=a.Children.only(i),H=Js(U,{className:Ko()("".concat(N,"-trigger"),b({},"".concat(N,"-rtl"),"rtl"===O),U.props.className),disabled:s}),j=s?[]:o;j&&j.includes("contextMenu")&&(R=!0);var z=Pt(yh(!1,{value:null!==d&&void 0!==d?d:p}),2),V=z[0],G=z[1],W=mh((function(e){null===f||void 0===f||f(e),null===v||void 0===v||v(e),G(e)})),X=Ko()(c,h,F,b({},"".concat(N,"-rtl"),"rtl"===O)),Y=DA({arrowPointAtCenter:"object"===typeof n&&n.pointAtCenter,autoAdjustOverflow:E,offset:B.marginXXS,arrowWidth:n?B.sizePopupArrow:0,borderRadius:B.borderRadius}),K=a.useCallback((function(){G(!1)}),[]);return L(a.createElement(SR,Object.assign({alignPoint:R},qs(e,["rootClassName"]),{mouseEnterDelay:g,mouseLeaveDelay:_,visible:V,builtinPlacements:Y,arrow:!!n,overlayClassName:X,prefixCls:N,getPopupContainer:u||A,transitionName:P,trigger:j,overlay:function(){var e;return e=(null===t||void 0===t?void 0:t.items)?a.createElement(fR,Object.assign({},t)):"function"===typeof S?S():S,l&&(e=l(e)),e=a.Children.only("string"===typeof e?a.createElement("span",null,e):e),a.createElement(QM,{prefixCls:"".concat(N,"-menu"),expandIcon:a.createElement("span",{className:"".concat(N,"-menu-submenu-arrow")},a.createElement(mR,{className:"".concat(N,"-menu-submenu-arrow-icon")})),mode:"vertical",selectable:!1,onClick:K,validator:function(e){e.mode}},a.createElement(bl,null,e))},placement:M,onVisibleChange:W}),H))};YR.Button=XR;var KR=function(e,t,n,r){return function(i){var o=i.prefixCls,s=i.style,l=a.useRef(null),u=Pt(a.useState(0),2),c=u[0],h=u[1],d=Pt(a.useState(0),2),f=d[0],p=d[1],v=Pt(yh(!1,{value:i.open}),2),m=v[0],g=v[1],y=(0,a.useContext(Lo).getPrefixCls)(t||"select",o);a.useEffect((function(){if(g(!0),"undefined"!==typeof ResizeObserver){var e=new ResizeObserver((function(e){var t=e[0].target;h(t.offsetHeight+8),p(t.offsetWidth)})),t=setInterval((function(){var r,i=n?".".concat(n(y)):".".concat(y,"-dropdown"),o=null===(r=l.current)||void 0===r?void 0:r.querySelector(i);o&&(clearInterval(t),e.observe(o))}),10);return function(){clearInterval(t),e.disconnect()}}}),[]);var b=Object.assign(Object.assign({},i),{style:Object.assign(Object.assign({},s),{margin:0}),open:m,visible:m,getPopupContainer:function(){return l.current}});return r&&(b=r(b)),a.createElement(bs,{theme:{token:{motion:!1}}},a.createElement("div",{ref:l,style:{paddingBottom:c,position:"relative",minWidth:f}},a.createElement(e,Object.assign({},b))))}}(YR,"dropdown",(function(e){return e}),(function(e){return Object.assign(Object.assign({},e),{align:{overflow:{adjustX:!1,adjustY:!1}}})}));YR._InternalPanelDoNotUseOrYouWillBeFired=function(e){return a.createElement(KR,Object.assign({},e),a.createElement("span",null))};var qR,ZR,$R=YR,QR=$R,JR=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.menuData=[],r.handleMenuClick=function(e){var t=parseInt(e.key),n=r.menuData[t].value;r.props.onChange&&r.props.onChange(n)},r.onOpenChange=function(e){r.setState({opened:e})},r.onChange=function(e){var t=e.target.value;r.setState({value:t})},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue,opened:!1},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"getMenu",value:function(){this.menuData=[];var e=this.menuData;return this.props.getItems&&(e=this.props.getItems()),(!e||e.length<=0)&&(e=this.props.items),(!e||e.length<=0)&&(e=[]),this.menuData=e,(0,ff.jsx)(fR,{onClick:this.handleMenuClick,children:e.map((function(e,t){return(0,ff.jsx)(fR.Item,{children:(0,ff.jsx)("div",{children:e.label})},t)}))})}},{key:"getMenu2",value:function(){this.menuData=[];var e=this.menuData;this.props.getItems&&(e=this.props.getItems()),(!e||e.length<=0)&&(e=this.props.items),(!e||e.length<=0)&&(e=[]),this.menuData=e;var t=[];return e.forEach((function(e,n){t.push({label:e.label,key:n})})),t}},{key:"getSelectedLabel",value:function(){for(var e=0,t=this.menuData.length;e<t;e++)if(this.menuData[e].value===this.state.value)return this.menuData[e].label;if(this.props.defaultValue)for(var n=0,r=this.menuData.length;n<r;n++)if(this.menuData[n].value===this.props.defaultValue)return this.menuData[n].label;return this.props.displayTextWhenEmpty||"\u8bf7\u9009\u62e9"}},{key:"render",value:function(){this.state.value,this.getMenu();var e=this.getSelectedLabel(),t=this.getMenu2();return this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsx)(QR,{menu:{items:t,onClick:this.handleMenuClick},trigger:["click"],onOpenChange:this.onOpenChange,children:(0,ff.jsxs)("div",{className:"dropdown-input",children:[(0,ff.jsx)(KT,{type:this.state.opened?"icon-arrow-down-filling":"icon-arrow-right-filling"}),(0,ff.jsx)("div",{className:"dropdown-label",children:e})]})})}):(0,ff.jsx)(QR,{menu:{items:t,onClick:this.handleMenuClick},trigger:["click"],onOpenChange:this.onOpenChange,children:(0,ff.jsxs)("div",{className:"dropdown-input",children:[(0,ff.jsx)(KT,{type:this.state.opened?"icon-arrow-down-filling":"icon-arrow-right-filling"}),(0,ff.jsx)("div",{className:"dropdown-label",children:e})]})})}}]),n}(a.Component),eN=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e){var t=r.props,n=t.booleanValues,i=t.onChange,o=r.state.value,a=!0,s=a=!(a=n?o===n[0]:!0===o);n&&(s=a?n[0]:n[1]),i&&i(s)},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.props,t=e.booleanIcons,n=e.booleanValues,r=this.state.value,i=(n?r===n[0]:!0===r)?t[0]:t[1];return(0,ff.jsxs)("div",{className:"boolean-input",onClick:this.onChange,children:[(0,ff.jsx)(KT,{type:i}),this.props.children]})}}]),n}(a.Component),tN=15,nN=256,rN=573,iN=256,oN=-2,aN=-5;function sN(e){return lN(e.map((function(e){var t=Pt(e,2),n=t[0],r=t[1];return new Array(n).fill(r,0,n)})))}function lN(e){return e.reduce((function(e,t){return e.concat(Array.isArray(t)?lN(t):t)}),[])}var uN=(qR=[0,1,2,3]).concat.apply(qR,Pe(sN([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]])));function cN(){var e=this;function t(e,t){var n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.build_tree=function(n){var r,i,o,a=e.dyn_tree,s=e.stat_desc.static_tree,l=e.stat_desc.elems,u=-1;for(n.heap_len=0,n.heap_max=rN,r=0;r<l;r++)0!==a[2*r]?(n.heap[++n.heap_len]=u=r,n.depth[r]=0):a[2*r+1]=0;for(;n.heap_len<2;)a[2*(o=n.heap[++n.heap_len]=u<2?++u:0)]=1,n.depth[o]=0,n.opt_len--,s&&(n.static_len-=s[2*o+1]);for(e.max_code=u,r=Math.floor(n.heap_len/2);r>=1;r--)n.pqdownheap(a,r);o=l;do{r=n.heap[1],n.heap[1]=n.heap[n.heap_len--],n.pqdownheap(a,1),i=n.heap[1],n.heap[--n.heap_max]=r,n.heap[--n.heap_max]=i,a[2*o]=a[2*r]+a[2*i],n.depth[o]=Math.max(n.depth[r],n.depth[i])+1,a[2*r+1]=a[2*i+1]=o,n.heap[1]=o++,n.pqdownheap(a,1)}while(n.heap_len>=2);n.heap[--n.heap_max]=n.heap[1],function(t){var n,r,i,o,a,s,l=e.dyn_tree,u=e.stat_desc.static_tree,c=e.stat_desc.extra_bits,h=e.stat_desc.extra_base,d=e.stat_desc.max_length,f=0;for(o=0;o<=tN;o++)t.bl_count[o]=0;for(l[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<rN;n++)(o=l[2*l[2*(r=t.heap[n])+1]+1]+1)>d&&(o=d,f++),l[2*r+1]=o,r>e.max_code||(t.bl_count[o]++,a=0,r>=h&&(a=c[r-h]),s=l[2*r],t.opt_len+=s*(o+a),u&&(t.static_len+=s*(u[2*r+1]+a)));if(0!==f){do{for(o=d-1;0===t.bl_count[o];)o--;t.bl_count[o]--,t.bl_count[o+1]+=2,t.bl_count[d]--,f-=2}while(f>0);for(o=d;0!==o;o--)for(r=t.bl_count[o];0!==r;)(i=t.heap[--n])>e.max_code||(l[2*i+1]!=o&&(t.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),r--)}}(n),function(e,n,r){var i,o,a,s=[],l=0;for(i=1;i<=tN;i++)s[i]=l=l+r[i-1]<<1;for(o=0;o<=n;o++)0!==(a=e[2*o+1])&&(e[2*o]=t(s[a]++,a))}(a,e.max_code,n.bl_count)}}function hN(e,t,n,r,i){var o=this;o.static_tree=e,o.extra_bits=t,o.extra_base=n,o.elems=r,o.max_length=i}cN._length_code=(ZR=[0,1,2,3,4,5,6,7]).concat.apply(ZR,Pe(sN([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]]))),cN.base_length=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],cN.base_dist=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],cN.d_code=function(e){return e<256?uN[e]:uN[256+(e>>>7)]},cN.extra_lbits=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],cN.extra_dbits=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],cN.extra_blbits=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],cN.bl_order=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];var dN=sN([[144,8],[112,9],[24,7],[8,8]]);hN.static_ltree=lN([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map((function(e,t){return[e,dN[t]]})));var fN=sN([[30,5]]);hN.static_dtree=lN([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map((function(e,t){return[e,fN[t]]}))),hN.static_l_desc=new hN(hN.static_ltree,cN.extra_lbits,257,286,tN),hN.static_d_desc=new hN(hN.static_dtree,cN.extra_dbits,0,30,tN),hN.static_bl_desc=new hN(null,cN.extra_blbits,0,19,7);function pN(e,t,n,r,i){var o=this;o.good_length=e,o.max_lazy=t,o.nice_length=n,o.max_chain=r,o.func=i}var vN=[new pN(0,0,0,0,0),new pN(4,4,8,4,1),new pN(4,5,16,8,1),new pN(4,6,32,32,1),new pN(4,4,16,16,2),new pN(8,16,32,32,2),new pN(8,16,128,128,2),new pN(8,32,128,256,2),new pN(32,128,258,1024,2),new pN(32,258,258,4096,2)],mN=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],gN=113,yN=666,bN=258,_N=262;function xN(e,t,n,r){var i=e[2*t],o=e[2*n];return i<o||i==o&&r[t]<=r[n]}function EN(){var e,t,n,r,i,o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U=this,H=new cN,j=new cN,z=new cN;function V(){var e;for(e=0;e<286;e++)O[2*e]=0;for(e=0;e<30;e++)P[2*e]=0;for(e=0;e<19;e++)M[2*e]=0;O[512]=1,U.opt_len=U.static_len=0,N=D=0}function G(e,t){var n,r=-1,i=e[1],o=0,a=7,s=4;0===i&&(a=138,s=3),e[2*(t+1)+1]=65535;for(var l=0;l<=t;l++)n=i,i=e[2*(l+1)+1],++o<a&&n==i||(o<s?M[2*n]+=o:0!==n?(n!=r&&M[2*n]++,M[32]++):o<=10?M[34]++:M[36]++,o=0,r=n,0===i?(a=138,s=3):n==i?(a=6,s=3):(a=7,s=4))}function W(e){U.pending_buf[U.pending++]=e}function X(e){W(255&e),W(e>>>8&255)}function Y(e,t){var n,r=t;B>16-r?(X(F|=(n=e)<<B&65535),F=n>>>16-B,B+=r-16):(F|=e<<B&65535,B+=r)}function K(e,t){var n=2*e;Y(65535&t[n],65535&t[n+1])}function q(e,t){var n,r,i=-1,o=e[1],a=0,s=7,l=4;for(0===o&&(s=138,l=3),n=0;n<=t;n++)if(r=o,o=e[2*(n+1)+1],!(++a<s&&r==o)){if(a<l)do{K(r,M)}while(0!==--a);else 0!==r?(r!=i&&(K(r,M),a--),K(16,M),Y(a-3,2)):a<=10?(K(17,M),Y(a-3,3)):(K(18,M),Y(a-11,7));a=0,i=r,0===o?(s=138,l=3):r==o?(s=6,l=3):(s=7,l=4)}}function Z(){16==B?(X(F),F=0,B=0):B>=8&&(W(255&F),F>>>=8,B-=8)}function $(e,t){var n,r,i;if(U.dist_buf[N]=e,U.lc_buf[N]=255&t,N++,0===e?O[2*t]++:(D++,e--,O[2*(cN._length_code[t]+nN+1)]++,P[2*cN.d_code(e)]++),0===(8191&N)&&k>2){for(n=8*N,r=_-m,i=0;i<30;i++)n+=P[2*i]*(5+cN.extra_dbits[i]);if(n>>>=3,D<Math.floor(N/2)&&n<Math.floor(r/2))return!0}return N==R-1}function Q(e,t){var n,r,i,o,a=0;if(0!==N)do{n=U.dist_buf[a],r=U.lc_buf[a],a++,0===n?K(r,e):(K((i=cN._length_code[r])+nN+1,e),0!==(o=cN.extra_lbits[i])&&Y(r-=cN.base_length[i],o),n--,K(i=cN.d_code(n),t),0!==(o=cN.extra_dbits[i])&&Y(n-=cN.base_dist[i],o))}while(a<N);K(iN,e),L=e[513]}function J(){B>8?X(F):B>0&&W(255&F),F=0,B=0}function ee(e,t,n){Y(0+(n?1:0),3),function(e,t,n){J(),L=8,n&&(X(t),X(~t)),U.pending_buf.set(s.subarray(e,e+t),U.pending),U.pending+=t}(e,t,!0)}function te(e,t,n){var r,i,o=0;k>0?(H.build_tree(U),j.build_tree(U),o=function(){var e;for(G(O,H.max_code),G(P,j.max_code),z.build_tree(U),e=18;e>=3&&0===M[2*cN.bl_order[e]+1];e--);return U.opt_len+=3*(e+1)+5+5+4,e}(),r=U.opt_len+3+7>>>3,(i=U.static_len+3+7>>>3)<=r&&(r=i)):r=i=t+5,t+4<=r&&-1!=e?ee(e,t,n):i==r?(Y(2+(n?1:0),3),Q(hN.static_ltree,hN.static_dtree)):(Y(4+(n?1:0),3),function(e,t,n){var r;for(Y(e-257,5),Y(t-1,5),Y(n-4,4),r=0;r<n;r++)Y(M[2*cN.bl_order[r]+1],3);q(O,e-1),q(P,t-1)}(H.max_code+1,j.max_code+1,o+1),Q(O,P)),V(),n&&J()}function ne(t){te(m>=0?m:-1,_-m,t),m=_,e.flush_pending()}function re(){var t,n,r,o;do{if(0===(o=l-E-_)&&0===_&&0===E)o=i;else if(-1==o)o--;else if(_>=i+i-_N){s.set(s.subarray(i,i+i),0),x-=i,_-=i,m-=i,r=t=d;do{n=65535&c[--r],c[r]=n>=i?n-i:0}while(0!==--t);r=t=i;do{n=65535&u[--r],u[r]=n>=i?n-i:0}while(0!==--t);o+=i}if(0===e.avail_in)return;t=e.read_buf(s,_+E,o),(E+=t)>=3&&(h=((h=255&s[_])<<v^255&s[_+1])&p)}while(E<_N&&0!==e.avail_in)}function ie(e){var t,n,r=T,o=_,l=w,c=_>i-_N?_-(i-_N):0,h=I,d=a,f=_+bN,p=s[o+l-1],v=s[o+l];w>=A&&(r>>=2),h>E&&(h=E);do{if(s[(t=e)+l]==v&&s[t+l-1]==p&&s[t]==s[o]&&s[++t]==s[o+1]){o+=2,t++;do{}while(s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&s[++o]==s[++t]&&o<f);if(n=bN-(f-o),o=f-bN,n>l){if(x=e,l=n,n>=h)break;p=s[o+l-1],v=s[o+l]}}}while((e=65535&u[e&d])>c&&0!==--r);return l<=E?l:E}function oe(e){return e.total_in=e.total_out=0,e.msg=null,U.pending=0,U.pending_out=0,t=gN,r=0,H.dyn_tree=O,H.stat_desc=hN.static_l_desc,j.dyn_tree=P,j.stat_desc=hN.static_d_desc,z.dyn_tree=M,z.stat_desc=hN.static_bl_desc,F=0,B=0,L=8,V(),function(){l=2*i,c[d-1]=0;for(var e=0;e<d-1;e++)c[e]=0;S=vN[k].max_lazy,A=vN[k].good_length,I=vN[k].nice_length,T=vN[k].max_chain,_=0,m=0,E=0,g=w=2,b=0,h=0}(),0}U.depth=[],U.bl_count=[],U.heap=[],O=[],P=[],M=[],U.pqdownheap=function(e,t){for(var n=U.heap,r=n[t],i=t<<1;i<=U.heap_len&&(i<U.heap_len&&xN(e,n[i+1],n[i],U.depth)&&i++,!xN(e,r,n[i],U.depth));)n[t]=n[i],t=i,i<<=1;n[t]=r},U.deflateInit=function(e,t,r,l,h,m){return l||(l=8),h||(h=8),m||(m=0),e.msg=null,-1==t&&(t=6),h<1||h>9||8!=l||r<9||r>15||t<0||t>9||m<0||m>2?oN:(e.dstate=U,a=(i=1<<(o=r))-1,p=(d=1<<(f=h+7))-1,v=Math.floor((f+3-1)/3),s=new Uint8Array(2*i),u=[],c=[],R=1<<h+6,U.pending_buf=new Uint8Array(4*R),n=4*R,U.dist_buf=new Uint16Array(R),U.lc_buf=new Uint8Array(R),k=t,C=m,oe(e))},U.deflateEnd=function(){return 42!=t&&t!=gN&&t!=yN?oN:(U.lc_buf=null,U.dist_buf=null,U.pending_buf=null,c=null,u=null,s=null,U.dstate=null,t==gN?-3:0)},U.deflateParams=function(e,t,n){var r=0;return-1==t&&(t=6),t<0||t>9||n<0||n>2?oN:(vN[k].func!=vN[t].func&&0!==e.total_in&&(r=e.deflate(1)),k!=t&&(S=vN[k=t].max_lazy,A=vN[k].good_length,I=vN[k].nice_length,T=vN[k].max_chain),C=n,r)},U.deflateSetDictionary=function(e,n,r){var o,l=r,d=0;if(!n||42!=t)return oN;if(l<3)return 0;for(l>i-_N&&(d=r-(l=i-_N)),s.set(n.subarray(d,d+l),0),_=l,m=l,h=((h=255&s[0])<<v^255&s[1])&p,o=0;o<=l-3;o++)h=(h<<v^255&s[o+2])&p,u[o&a]=c[h],c[h]=o;return 0},U.deflate=function(l,f){var T,A,I,O,P;if(f>4||f<0)return oN;if(!l.next_out||!l.next_in&&0!==l.avail_in||t==yN&&4!=f)return l.msg=mN[4],oN;if(0===l.avail_out)return l.msg=mN[7],aN;if(e=l,O=r,r=f,42==t&&(A=8+(o-8<<4)<<8,(I=(k-1&255)>>1)>3&&(I=3),A|=I<<6,0!==_&&(A|=32),t=gN,function(e){W(e>>8&255),W(255&e)}(A+=31-A%31)),0!==U.pending){if(e.flush_pending(),0===e.avail_out)return r=-1,0}else if(0===e.avail_in&&f<=O&&4!=f)return e.msg=mN[7],aN;if(t==yN&&0!==e.avail_in)return l.msg=mN[7],aN;if(0!==e.avail_in||0!==E||0!=f&&t!=yN){switch(P=-1,vN[k].func){case 0:P=function(t){var r,o=65535;for(o>n-5&&(o=n-5);;){if(E<=1){if(re(),0===E&&0==t)return 0;if(0===E)break}if(_+=E,E=0,r=m+o,(0===_||_>=r)&&(E=_-r,_=r,ne(!1),0===e.avail_out))return 0;if(_-m>=i-_N&&(ne(!1),0===e.avail_out))return 0}return ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 1:P=function(t){for(var n,r=0;;){if(E<_N){if(re(),E<_N&&0==t)return 0;if(0===E)break}if(E>=3&&(h=(h<<v^255&s[_+2])&p,r=65535&c[h],u[_&a]=c[h],c[h]=_),0!==r&&(_-r&65535)<=i-_N&&2!=C&&(g=ie(r)),g>=3)if(n=$(_-x,g-3),E-=g,g<=S&&E>=3){g--;do{_++,h=(h<<v^255&s[_+2])&p,r=65535&c[h],u[_&a]=c[h],c[h]=_}while(0!==--g);_++}else _+=g,g=0,h=((h=255&s[_])<<v^255&s[_+1])&p;else n=$(0,255&s[_]),E--,_++;if(n&&(ne(!1),0===e.avail_out))return 0}return ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f);break;case 2:P=function(t){for(var n,r,o=0;;){if(E<_N){if(re(),E<_N&&0==t)return 0;if(0===E)break}if(E>=3&&(h=(h<<v^255&s[_+2])&p,o=65535&c[h],u[_&a]=c[h],c[h]=_),w=g,y=x,g=2,0!==o&&w<S&&(_-o&65535)<=i-_N&&(2!=C&&(g=ie(o)),g<=5&&(1==C||3==g&&_-x>4096)&&(g=2)),w>=3&&g<=w){r=_+E-3,n=$(_-1-y,w-3),E-=w-1,w-=2;do{++_<=r&&(h=(h<<v^255&s[_+2])&p,o=65535&c[h],u[_&a]=c[h],c[h]=_)}while(0!==--w);if(b=0,g=2,_++,n&&(ne(!1),0===e.avail_out))return 0}else if(0!==b){if((n=$(0,255&s[_-1]))&&ne(!1),_++,E--,0===e.avail_out)return 0}else b=1,_++,E--}return 0!==b&&(n=$(0,255&s[_-1]),b=0),ne(4==t),0===e.avail_out?4==t?2:0:4==t?3:1}(f)}if(2!=P&&3!=P||(t=yN),0==P||2==P)return 0===e.avail_out&&(r=-1),0;if(1==P){if(1==f)Y(2,3),K(iN,hN.static_ltree),Z(),1+L+10-B<9&&(Y(2,3),K(iN,hN.static_ltree),Z()),L=7;else if(ee(0,0,!1),3==f)for(T=0;T<d;T++)c[T]=0;if(e.flush_pending(),0===e.avail_out)return r=-1,0}}return 4!=f?0:1}}function wN(){var e=this;e.next_in_index=0,e.next_out_index=0,e.avail_in=0,e.total_in=0,e.avail_out=0,e.total_out=0}wN.prototype={deflateInit:function(e,t){var n=this;return n.dstate=new EN,t||(t=tN),n.dstate.deflateInit(n,e,t)},deflate:function(e){var t=this;return t.dstate?t.dstate.deflate(t,e):oN},deflateEnd:function(){var e=this;if(!e.dstate)return oN;var t=e.dstate.deflateEnd();return e.dstate=null,t},deflateParams:function(e,t){var n=this;return n.dstate?n.dstate.deflateParams(n,e,t):oN},deflateSetDictionary:function(e,t){var n=this;return n.dstate?n.dstate.deflateSetDictionary(n,e,t):oN},read_buf:function(e,t,n){var r=this,i=r.avail_in;return i>n&&(i=n),0===i?0:(r.avail_in-=i,e.set(r.next_in.subarray(r.next_in_index,r.next_in_index+i),t),r.next_in_index+=i,r.total_in+=i,i)},flush_pending:function(){var e=this,t=e.dstate.pending;t>e.avail_out&&(t=e.avail_out),0!==t&&(e.next_out.set(e.dstate.pending_buf.subarray(e.dstate.pending_out,e.dstate.pending_out+t),e.next_out_index),e.next_out_index+=t,e.dstate.pending_out+=t,e.total_out+=t,e.avail_out-=t,e.dstate.pending-=t,0===e.dstate.pending&&(e.dstate.pending_out=0))}};var TN=0,SN=1,kN=-2,CN=-3,AN=-4,IN=-5,ON=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],PN=1440,MN=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],RN=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],NN=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],DN=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],LN=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],FN=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],BN=15;function UN(){var e,t,n,r,i,o;function a(e,t,a,s,l,u,c,h,d,f,p){var v,m,g,y,b,_,x,E,w,T,S,k,C,A,I;T=0,b=a;do{n[e[t+T]]++,T++,b--}while(0!==b);if(n[0]==a)return c[0]=-1,h[0]=0,TN;for(E=h[0],_=1;_<=BN&&0===n[_];_++);for(x=_,E<_&&(E=_),b=BN;0!==b&&0===n[b];b--);for(g=b,E>b&&(E=b),h[0]=E,A=1<<_;_<b;_++,A<<=1)if((A-=n[_])<0)return CN;if((A-=n[b])<0)return CN;for(n[b]+=A,o[1]=_=0,T=1,C=2;0!==--b;)o[C]=_+=n[T],C++,T++;b=0,T=0;do{0!==(_=e[t+T])&&(p[o[_]++]=b),T++}while(++b<a);for(a=o[g],o[0]=b=0,T=0,y=-1,k=-E,i[0]=0,S=0,I=0;x<=g;x++)for(v=n[x];0!==v--;){for(;x>k+E;){if(y++,I=(I=g-(k+=E))>E?E:I,(m=1<<(_=x-k))>v+1&&(m-=v+1,C=x,_<I))for(;++_<I&&!((m<<=1)<=n[++C]);)m-=n[C];if(I=1<<_,f[0]+I>PN)return CN;i[y]=S=f[0],f[0]+=I,0!==y?(o[y]=b,r[0]=_,r[1]=E,_=b>>>k-E,r[2]=S-i[y-1]-_,d.set(r,3*(i[y-1]+_))):c[0]=S}for(r[1]=x-k,T>=a?r[0]=192:p[T]<s?(r[0]=p[T]<256?0:96,r[2]=p[T++]):(r[0]=u[p[T]-s]+16+64,r[2]=l[p[T++]-s]),m=1<<x-k,_=b>>>k;_<I;_+=m)d.set(r,3*(S+_));for(_=1<<x-1;0!==(b&_);_>>>=1)b^=_;for(b^=_,w=(1<<k)-1;(b&w)!=o[y];)y--,w=(1<<(k-=E))-1}return 0!==A&&1!=g?IN:TN}function s(a){var s;for(e||(e=[],t=[],n=new Int32Array(BN+1),r=[],i=new Int32Array(BN),o=new Int32Array(BN+1)),t.length<a&&(t=[]),s=0;s<a;s++)t[s]=0;for(s=0;s<BN+1;s++)n[s]=0;for(s=0;s<3;s++)r[s]=0;i.set(n.subarray(0,BN),0),o.set(n.subarray(0,BN+1),0)}this.inflate_trees_bits=function(n,r,i,o,l){var u;return s(19),e[0]=0,(u=a(n,0,19,19,null,null,i,r,o,e,t))==CN?l.msg="oversubscribed dynamic bit lengths tree":u!=IN&&0!==r[0]||(l.msg="incomplete dynamic bit lengths tree",u=CN),u},this.inflate_trees_dynamic=function(n,r,i,o,l,u,c,h,d){var f;return s(288),e[0]=0,(f=a(i,0,n,257,NN,DN,u,o,h,e,t))!=TN||0===o[0]?(f==CN?d.msg="oversubscribed literal/length tree":f!=AN&&(d.msg="incomplete literal/length tree",f=CN),f):(s(288),(f=a(i,n,r,0,LN,FN,c,l,h,e,t))!=TN||0===l[0]&&n>257?(f==CN?d.msg="oversubscribed distance tree":f==IN?(d.msg="incomplete distance tree",f=CN):f!=AN&&(d.msg="empty distance tree with lengths",f=CN),f):TN)}}UN.inflate_trees_fixed=function(e,t,n,r){return e[0]=9,t[0]=5,n[0]=MN,r[0]=RN,TN};var HN=0,jN=1,zN=2,VN=3,GN=4,WN=5,XN=6,YN=7,KN=8,qN=9;function ZN(){var e,t,n,r,i=this,o=0,a=0,s=0,l=0,u=0,c=0,h=0,d=0,f=0,p=0;function v(e,t,n,r,i,o,a,s){var l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w;p=s.next_in_index,v=s.avail_in,d=a.bitb,f=a.bitk,g=(m=a.write)<a.read?a.read-m-1:a.end-m,y=ON[e],b=ON[t];do{for(;f<20;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;if(0!==(h=(u=n)[w=3*((c=r)+(l=d&y))]))for(;;){if(d>>=u[w+1],f-=u[w+1],0!==(16&h)){for(h&=15,_=u[w+2]+(d&ON[h]),d>>=h,f-=h;f<15;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;for(h=(u=i)[w=3*((c=o)+(l=d&b))];;){if(d>>=u[w+1],f-=u[w+1],0!==(16&h)){for(h&=15;f<h;)v--,d|=(255&s.read_byte(p++))<<f,f+=8;if(x=u[w+2]+(d&ON[h]),d>>=h,f-=h,g-=_,m>=x)m-(E=m-x)>0&&2>m-E?(a.win[m++]=a.win[E++],a.win[m++]=a.win[E++],_-=2):(a.win.set(a.win.subarray(E,E+2),m),m+=2,E+=2,_-=2);else{E=m-x;do{E+=a.end}while(E<0);if(_>(h=a.end-E)){if(_-=h,m-E>0&&h>m-E)do{a.win[m++]=a.win[E++]}while(0!==--h);else a.win.set(a.win.subarray(E,E+h),m),m+=h,E+=h,h=0;E=0}}if(m-E>0&&_>m-E)do{a.win[m++]=a.win[E++]}while(0!==--_);else a.win.set(a.win.subarray(E,E+_),m),m+=_,E+=_,_=0;break}if(0!==(64&h))return s.msg="invalid distance code",v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,a.bitb=d,a.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=m,CN;l+=u[w+2],h=u[w=3*(c+(l+=d&ON[h]))]}break}if(0!==(64&h))return 0!==(32&h)?(v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,a.bitb=d,a.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=m,SN):(s.msg="invalid literal/length code",v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,a.bitb=d,a.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=m,CN);if(l+=u[w+2],0===(h=u[w=3*(c+(l+=d&ON[h]))])){d>>=u[w+1],f-=u[w+1],a.win[m++]=u[w+2],g--;break}}else d>>=u[w+1],f-=u[w+1],a.win[m++]=u[w+2],g--}while(g>=258&&v>=10);return v+=_=f>>3<(_=s.avail_in-v)?f>>3:_,p-=_,f-=_<<3,a.bitb=d,a.bitk=f,s.avail_in=v,s.total_in+=p-s.next_in_index,s.next_in_index=p,a.write=m,TN}i.init=function(i,o,a,s,l,u){e=HN,h=i,d=o,n=a,f=s,r=l,p=u,t=null},i.proc=function(i,m,g){var y,b,_,x,E,w,T,S=0,k=0,C=0;for(C=m.next_in_index,x=m.avail_in,S=i.bitb,k=i.bitk,w=(E=i.write)<i.read?i.read-E-1:i.end-E;;)switch(e){case HN:if(w>=258&&x>=10&&(i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,g=v(h,d,n,f,r,p,i,m),C=m.next_in_index,x=m.avail_in,S=i.bitb,k=i.bitk,w=(E=i.write)<i.read?i.read-E-1:i.end-E,g!=TN)){e=g==SN?YN:qN;break}s=h,t=n,a=f,e=jN;case jN:for(y=s;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=TN,x--,S|=(255&m.read_byte(C++))<<k,k+=8}if(b=3*(a+(S&ON[y])),S>>>=t[b+1],k-=t[b+1],0===(_=t[b])){l=t[b+2],e=XN;break}if(0!==(16&_)){u=15&_,o=t[b+2],e=zN;break}if(0===(64&_)){s=_,a=b/3+t[b+2];break}if(0!==(32&_)){e=YN;break}return e=qN,m.msg="invalid literal/length code",g=CN,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case zN:for(y=u;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=TN,x--,S|=(255&m.read_byte(C++))<<k,k+=8}o+=S&ON[y],S>>=y,k-=y,s=d,t=r,a=p,e=VN;case VN:for(y=s;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=TN,x--,S|=(255&m.read_byte(C++))<<k,k+=8}if(b=3*(a+(S&ON[y])),S>>=t[b+1],k-=t[b+1],0!==(16&(_=t[b]))){u=15&_,c=t[b+2],e=GN;break}if(0===(64&_)){s=_,a=b/3+t[b+2];break}return e=qN,m.msg="invalid distance code",g=CN,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case GN:for(y=u;k<y;){if(0===x)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=TN,x--,S|=(255&m.read_byte(C++))<<k,k+=8}c+=S&ON[y],S>>=y,k-=y,e=WN;case WN:for(T=E-c;T<0;)T+=i.end;for(;0!==o;){if(0===w&&(E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w&&(i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w)))return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);i.win[E++]=i.win[T++],w--,T==i.end&&(T=0),o--}e=HN;break;case XN:if(0===w&&(E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w&&(i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,E==i.end&&0!==i.read&&(w=(E=0)<i.read?i.read-E-1:i.end-E),0===w)))return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);g=TN,i.win[E++]=l,w--,e=HN;break;case YN:if(k>7&&(k-=8,x++,C--),i.write=E,g=i.inflate_flush(m,g),w=(E=i.write)<i.read?i.read-E-1:i.end-E,i.read!=i.write)return i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);e=KN;case KN:return g=SN,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);case qN:return g=CN,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g);default:return g=kN,i.bitb=S,i.bitk=k,m.avail_in=x,m.total_in+=C-m.next_in_index,m.next_in_index=C,i.write=E,i.inflate_flush(m,g)}},i.free=function(){}}var $N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],QN=0,JN=1,eD=2,tD=3,nD=4,rD=5,iD=6,oD=7,aD=8,sD=9;function lD(e,t){var n,r=this,i=QN,o=0,a=0,s=0,l=[0],u=[0],c=new ZN,h=0,d=new Int32Array(3*PN),f=new UN;r.bitk=0,r.bitb=0,r.win=new Uint8Array(t),r.end=t,r.read=0,r.write=0,r.reset=function(e,t){t&&(t[0]=0),i==iD&&c.free(e),i=QN,r.bitk=0,r.bitb=0,r.read=r.write=0},r.reset(e,null),r.inflate_flush=function(e,t){var n,i,o;return i=e.next_out_index,(n=((o=r.read)<=r.write?r.write:r.end)-o)>e.avail_out&&(n=e.avail_out),0!==n&&t==IN&&(t=TN),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(o,o+n),i),i+=n,(o+=n)==r.end&&(o=0,r.write==r.end&&(r.write=0),(n=r.write-o)>e.avail_out&&(n=e.avail_out),0!==n&&t==IN&&(t=TN),e.avail_out-=n,e.total_out+=n,e.next_out.set(r.win.subarray(o,o+n),i),i+=n,o+=n),e.next_out_index=i,r.read=o,t},r.proc=function(e,t){var p,v,m,g,y,b,_,x;for(g=e.next_in_index,y=e.avail_in,v=r.bitb,m=r.bitk,_=(b=r.write)<r.read?r.read-b-1:r.end-b;;){var E=void 0,w=void 0,T=void 0,S=void 0,k=void 0,C=void 0,A=void 0,I=void 0;switch(i){case QN:for(;m<3;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}switch(h=1&(p=7&v),p>>>1){case 0:v>>>=3,v>>>=p=7&(m-=3),m-=p,i=JN;break;case 1:E=[],w=[],T=[[]],S=[[]],UN.inflate_trees_fixed(E,w,T,S),c.init(E[0],w[0],T[0],0,S[0],0),v>>>=3,m-=3,i=iD;break;case 2:v>>>=3,m-=3,i=tD;break;case 3:return v>>>=3,m-=3,i=sD,e.msg="invalid block type",t=CN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t)}break;case JN:for(;m<32;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if((~v>>>16&65535)!=(65535&v))return i=sD,e.msg="invalid stored block lengths",t=CN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);o=65535&v,v=m=0,i=0!==o?eD:0!==h?oD:QN;break;case eD:if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(0===_&&(b==r.end&&0!==r.read&&(_=(b=0)<r.read?r.read-b-1:r.end-b),0===_&&(r.write=b,t=r.inflate_flush(e,t),_=(b=r.write)<r.read?r.read-b-1:r.end-b,b==r.end&&0!==r.read&&(_=(b=0)<r.read?r.read-b-1:r.end-b),0===_)))return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(t=TN,(p=o)>y&&(p=y),p>_&&(p=_),r.win.set(e.read_buf(g,p),b),g+=p,y-=p,b+=p,_-=p,0!==(o-=p))break;i=0!==h?oD:QN;break;case tD:for(;m<14;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(a=p=16383&v,(31&p)>29||(p>>5&31)>29)return i=sD,e.msg="too many length or distance symbols",t=CN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);if(p=258+(31&p)+(p>>5&31),!n||n.length<p)n=[];else for(x=0;x<p;x++)n[x]=0;v>>>=14,m-=14,s=0,i=nD;case nD:for(;s<4+(a>>>10);){for(;m<3;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}n[$N[s++]]=7&v,v>>>=3,m-=3}for(;s<19;)n[$N[s++]]=0;if(l[0]=7,(p=f.inflate_trees_bits(n,l,u,d,e))!=TN)return(t=p)==CN&&(n=null,i=sD),r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);s=0,i=rD;case rD:for(;!(s>=258+(31&(p=a))+(p>>5&31));){var O=void 0,P=void 0;for(p=l[0];m<p;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(p=d[3*(u[0]+(v&ON[p]))+1],(P=d[3*(u[0]+(v&ON[p]))+2])<16)v>>>=p,m-=p,n[s++]=P;else{for(x=18==P?7:P-14,O=18==P?11:3;m<p+x;){if(0===y)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);t=TN,y--,v|=(255&e.read_byte(g++))<<m,m+=8}if(m-=p,O+=(v>>>=p)&ON[x],v>>>=x,m-=x,(x=s)+O>258+(31&(p=a))+(p>>5&31)||16==P&&x<1)return n=null,i=sD,e.msg="invalid bit length repeat",t=CN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);P=16==P?n[x-1]:0;do{n[x++]=P}while(0!==--O);s=x}}if(u[0]=-1,C=[],A=[],I=[],(k=[])[0]=9,C[0]=6,p=a,(p=f.inflate_trees_dynamic(257+(31&p),1+(p>>5&31),n,k,C,A,I,d,e))!=TN)return p==CN&&(n=null,i=sD),t=p,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);c.init(k[0],C[0],d,A[0],d,I[0]),i=iD;case iD:if(r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,(t=c.proc(r,e,t))!=SN)return r.inflate_flush(e,t);if(t=TN,c.free(e),g=e.next_in_index,y=e.avail_in,v=r.bitb,m=r.bitk,_=(b=r.write)<r.read?r.read-b-1:r.end-b,0===h){i=QN;break}i=oD;case oD:if(r.write=b,t=r.inflate_flush(e,t),_=(b=r.write)<r.read?r.read-b-1:r.end-b,r.read!=r.write)return r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);i=aD;case aD:return t=SN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);case sD:return t=CN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t);default:return t=kN,r.bitb=v,r.bitk=m,e.avail_in=y,e.total_in+=g-e.next_in_index,e.next_in_index=g,r.write=b,r.inflate_flush(e,t)}}},r.free=function(e){r.reset(e,null),r.win=null,d=null},r.set_dictionary=function(e,t,n){r.win.set(e.subarray(t,t+n),0),r.read=r.write=n},r.sync_point=function(){return i==JN?1:0}}var uD=13,cD=[0,0,255,255];function hD(){var e=this;function t(e){return e&&e.istate?(e.total_in=e.total_out=0,e.msg=null,e.istate.mode=7,e.istate.blocks.reset(e,null),TN):kN}e.mode=0,e.method=0,e.was=[0],e.need=0,e.marker=0,e.wbits=0,e.inflateEnd=function(t){return e.blocks&&e.blocks.free(t),e.blocks=null,TN},e.inflateInit=function(n,r){return n.msg=null,e.blocks=null,r<8||r>15?(e.inflateEnd(n),kN):(e.wbits=r,n.istate.blocks=new lD(n,1<<r),t(n),TN)},e.inflate=function(e,t){var n,r;if(!e||!e.istate||!e.next_in)return kN;var i=e.istate;for(t=4==t?IN:TN,n=IN;;)switch(i.mode){case 0:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,8!=(15&(i.method=e.read_byte(e.next_in_index++)))){i.mode=uD,e.msg="unknown compression method",i.marker=5;break}if(8+(i.method>>4)>i.wbits){i.mode=uD,e.msg="invalid win size",i.marker=5;break}i.mode=1;case 1:if(0===e.avail_in)return n;if(n=t,e.avail_in--,e.total_in++,r=255&e.read_byte(e.next_in_index++),((i.method<<8)+r)%31!==0){i.mode=uD,e.msg="incorrect header check",i.marker=5;break}if(0===(32&r)){i.mode=7;break}i.mode=2;case 2:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need=(255&e.read_byte(e.next_in_index++))<<24&4278190080,i.mode=3;case 3:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need+=(255&e.read_byte(e.next_in_index++))<<16&16711680,i.mode=4;case 4:if(0===e.avail_in)return n;n=t,e.avail_in--,e.total_in++,i.need+=(255&e.read_byte(e.next_in_index++))<<8&65280,i.mode=5;case 5:return 0===e.avail_in?n:(n=t,e.avail_in--,e.total_in++,i.need+=255&e.read_byte(e.next_in_index++),i.mode=6,2);case 6:return i.mode=uD,e.msg="need dictionary",i.marker=0,kN;case 7:if((n=i.blocks.proc(e,n))==CN){i.mode=uD,i.marker=0;break}if(n==TN&&(n=t),n!=SN)return n;n=t,i.blocks.reset(e,i.was),i.mode=12;case 12:return e.avail_in=0,SN;case uD:return CN;default:return kN}},e.inflateSetDictionary=function(e,t,n){var r=0,i=n;if(!e||!e.istate||6!=e.istate.mode)return kN;var o=e.istate;return i>=1<<o.wbits&&(r=n-(i=(1<<o.wbits)-1)),o.blocks.set_dictionary(t,r,i),o.mode=7,TN},e.inflateSync=function(e){var n,r,i,o,a;if(!e||!e.istate)return kN;var s=e.istate;if(s.mode!=uD&&(s.mode=uD,s.marker=0),0===(n=e.avail_in))return IN;for(r=e.next_in_index,i=s.marker;0!==n&&i<4;)e.read_byte(r)==cD[i]?i++:i=0!==e.read_byte(r)?0:4-i,r++,n--;return e.total_in+=r-e.next_in_index,e.next_in_index=r,e.avail_in=n,s.marker=i,4!=i?CN:(o=e.total_in,a=e.total_out,t(e),e.total_in=o,e.total_out=a,s.mode=7,TN)},e.inflateSyncPoint=function(e){return e&&e.istate&&e.istate.blocks?e.istate.blocks.sync_point():kN}}function dD(){}dD.prototype={inflateInit:function(e){var t=this;return t.istate=new hD,e||(e=15),t.istate.inflateInit(t,e)},inflate:function(e){var t=this;return t.istate?t.istate.inflate(t,e):kN},inflateEnd:function(){var e=this;if(!e.istate)return kN;var t=e.istate.inflateEnd(e);return e.istate=null,t},inflateSync:function(){var e=this;return e.istate?e.istate.inflateSync(e):kN},inflateSetDictionary:function(e,t){var n=this;return n.istate?n.istate.inflateSetDictionary(n,e,t):kN},read_byte:function(e){return this.next_in[e]},read_buf:function(e,t){return this.next_in.subarray(e,e+t)}};var fD=4294967295,pD=65535,vD=8,mD=0,gD=99,yD=67324752,bD=134695760,_D=bD,xD=33639248,ED=101010256,wD=101075792,TD=117853008,SD=22,kD=20,CD=56,AD=SD+kD+CD,ID=1,OD=39169,PD=10,MD=1,RD=21589,ND=6534,DD=1,LD=8,FD=2048,BD=16,UD=20,HD=45,jD=51,zD="/",VD=new Date(2107,11,31),GD=new Date(1980,0,1),WD=void 0,XD="undefined",YD="function",KD=f((function e(t){return u(this,e),function(e){v(r,TransformStream);var n=y(r);function r(e,i){u(this,r);var o=new t(i);return n.call(this,{transform:function(e,t){t.enqueue(o.append(e))},flush:function(e){var t=o.flush();t&&e.enqueue(t)}})}return f(r)}()})),qD=64,ZD=2;try{typeof navigator!=XD&&navigator.hardwareConcurrency&&(ZD=navigator.hardwareConcurrency)}catch(r3){}var $D={chunkSize:524288,maxWorkers:ZD,terminateWorkerTimeout:5e3,useWebWorkers:!0,useCompressionStream:!0,workerScripts:WD,CompressionStreamNative:typeof CompressionStream!=XD&&CompressionStream,DecompressionStreamNative:typeof DecompressionStream!=XD&&DecompressionStream},QD=Object.assign({},$D);function JD(){return QD}function eL(e){return Math.max(e.chunkSize,qD)}function tL(e){var t=e.baseURL,n=e.chunkSize,r=e.maxWorkers,i=e.terminateWorkerTimeout,o=e.useCompressionStream,a=e.useWebWorkers,s=e.Deflate,l=e.Inflate,u=e.CompressionStream,c=e.DecompressionStream,h=e.workerScripts;if(nL("baseURL",t),nL("chunkSize",n),nL("maxWorkers",r),nL("terminateWorkerTimeout",i),nL("useCompressionStream",o),nL("useWebWorkers",a),s&&(QD.CompressionStream=new KD(s)),l&&(QD.DecompressionStream=new KD(l)),nL("CompressionStream",u),nL("DecompressionStream",c),h!==WD){var d=h.deflate,f=h.inflate;if((d||f)&&(QD.workerScripts||(QD.workerScripts={})),d){if(!Array.isArray(d))throw new Error("workerScripts.deflate must be an array");QD.workerScripts.deflate=d}if(f){if(!Array.isArray(f))throw new Error("workerScripts.inflate must be an array");QD.workerScripts.inflate=f}}}function nL(e,t){t!==WD&&(QD[e]=t)}var rL={application:{"andrew-inset":"ez",annodex:"anx","atom+xml":"atom","atomcat+xml":"atomcat","atomserv+xml":"atomsrv",bbolin:"lin","cu-seeme":"cu","davmount+xml":"davmount",dsptype:"tsp",ecmascript:["es","ecma"],futuresplash:"spl",hta:"hta","java-archive":"jar","java-serialized-object":"ser","java-vm":"class",m3g:"m3g","mac-binhex40":"hqx",mathematica:["nb","ma","mb"],msaccess:"mdb",msword:["doc","dot","wiz"],mxf:"mxf",oda:"oda",ogg:"ogx",pdf:"pdf","pgp-keys":"key","pgp-signature":["asc","sig"],"pics-rules":"prf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],rar:"rar","rdf+xml":"rdf","rss+xml":"rss",rtf:"rtf","xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","xpdl"],"xspf+xml":"xspf",zip:"zip","vnd.android.package-archive":"apk","vnd.cinderella":"cdy","vnd.google-earth.kml+xml":"kml","vnd.google-earth.kmz":"kmz","vnd.mozilla.xul+xml":"xul","vnd.ms-excel":["xls","xlb","xlt","xlm","xla","xlc","xlw"],"vnd.ms-pki.seccat":"cat","vnd.ms-pki.stl":"stl","vnd.ms-powerpoint":["ppt","pps","pot","ppa","pwz"],"vnd.oasis.opendocument.chart":"odc","vnd.oasis.opendocument.database":"odb","vnd.oasis.opendocument.formula":"odf","vnd.oasis.opendocument.graphics":"odg","vnd.oasis.opendocument.graphics-template":"otg","vnd.oasis.opendocument.image":"odi","vnd.oasis.opendocument.presentation":"odp","vnd.oasis.opendocument.presentation-template":"otp","vnd.oasis.opendocument.spreadsheet":"ods","vnd.oasis.opendocument.spreadsheet-template":"ots","vnd.oasis.opendocument.text":"odt","vnd.oasis.opendocument.text-master":["odm","otm"],"vnd.oasis.opendocument.text-template":"ott","vnd.oasis.opendocument.text-web":"oth","vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","vnd.openxmlformats-officedocument.presentationml.slideshow":"ppsx","vnd.openxmlformats-officedocument.presentationml.template":"potx","vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","vnd.smaf":"mmf","vnd.stardivision.calc":"sdc","vnd.stardivision.chart":"sds","vnd.stardivision.draw":"sda","vnd.stardivision.impress":"sdd","vnd.stardivision.math":["sdf","smf"],"vnd.stardivision.writer":["sdw","vor"],"vnd.stardivision.writer-global":"sgl","vnd.sun.xml.calc":"sxc","vnd.sun.xml.calc.template":"stc","vnd.sun.xml.draw":"sxd","vnd.sun.xml.draw.template":"std","vnd.sun.xml.impress":"sxi","vnd.sun.xml.impress.template":"sti","vnd.sun.xml.math":"sxm","vnd.sun.xml.writer":"sxw","vnd.sun.xml.writer.global":"sxg","vnd.sun.xml.writer.template":"stw","vnd.symbian.install":["sis","sisx"],"vnd.visio":["vsd","vst","vss","vsw","vsdx","vssx","vstx","vssm","vstm"],"vnd.wap.wbxml":"wbxml","vnd.wap.wmlc":"wmlc","vnd.wap.wmlscriptc":"wmlsc","vnd.wordperfect":"wpd","vnd.wordperfect5.1":"wp5","x-123":"wk","x-7z-compressed":"7z","x-abiword":"abw","x-apple-diskimage":"dmg","x-bcpio":"bcpio","x-bittorrent":"torrent","x-cbr":["cbr","cba","cbt","cb7"],"x-cbz":"cbz","x-cdf":["cdf","cda"],"x-cdlink":"vcd","x-chess-pgn":"pgn","x-cpio":"cpio","x-csh":"csh","x-director":["dir","dxr","cst","cct","cxt","w3d","fgd","swa"],"x-dms":"dms","x-doom":"wad","x-dvi":"dvi","x-httpd-eruby":"rhtml","x-font":"pcf.Z","x-freemind":"mm","x-gnumeric":"gnumeric","x-go-sgf":"sgf","x-graphing-calculator":"gcf","x-gtar":["gtar","taz"],"x-hdf":"hdf","x-httpd-php":["phtml","pht","php"],"x-httpd-php-source":"phps","x-httpd-php3":"php3","x-httpd-php3-preprocessed":"php3p","x-httpd-php4":"php4","x-httpd-php5":"php5","x-ica":"ica","x-info":"info","x-internet-signup":["ins","isp"],"x-iphone":"iii","x-iso9660-image":"iso","x-java-jnlp-file":"jnlp","x-jmol":"jmz","x-killustrator":"kil","x-latex":"latex","x-lyx":"lyx","x-lzx":"lzx","x-maker":["frm","fb","fbdoc"],"x-ms-wmd":"wmd","x-msdos-program":["com","exe","bat","dll"],"x-netcdf":["nc"],"x-ns-proxy-autoconfig":["pac","dat"],"x-nwc":"nwc","x-object":"o","x-oz-application":"oza","x-pkcs7-certreqresp":"p7r","x-python-code":["pyc","pyo"],"x-qgis":["qgs","shp","shx"],"x-quicktimeplayer":"qtl","x-redhat-package-manager":["rpm","rpa"],"x-ruby":"rb","x-sh":"sh","x-shar":"shar","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","x-stuffit":"sit","x-sv4cpio":"sv4cpio","x-sv4crc":"sv4crc","x-tar":"tar","x-tex-gf":"gf","x-tex-pk":"pk","x-texinfo":["texinfo","texi"],"x-trash":["~","%","bak","old","sik"],"x-ustar":"ustar","x-wais-source":"src","x-wingz":"wz","x-x509-ca-cert":["crt","der","cer"],"x-xcf":"xcf","x-xfig":"fig","x-xpinstall":"xpi",applixware:"aw","atomsvc+xml":"atomsvc","ccxml+xml":"ccxml","cdmi-capability":"cdmia","cdmi-container":"cdmic","cdmi-domain":"cdmid","cdmi-object":"cdmio","cdmi-queue":"cdmiq","docbook+xml":"dbk","dssc+der":"dssc","dssc+xml":"xdssc","emma+xml":"emma","epub+zip":"epub",exi:"exi","font-tdpfr":"pfr","gml+xml":"gml","gpx+xml":"gpx",gxf:"gxf",hyperstudio:"stk","inkml+xml":["ink","inkml"],ipfix:"ipfix","jsonml+json":"jsonml","lost+xml":"lostxml","mads+xml":"mads",marc:"mrc","marcxml+xml":"mrcx","mathml+xml":["mathml","mml"],mbox:"mbox","mediaservercontrol+xml":"mscml","metalink+xml":"metalink","metalink4+xml":"meta4","mets+xml":"mets","mods+xml":"mods",mp21:["m21","mp21"],mp4:"mp4s","oebps-package+xml":"opf","omdoc+xml":"omdoc",onenote:["onetoc","onetoc2","onetmp","onepkg"],oxps:"oxps","patch-ops-error+xml":"xer","pgp-encrypted":"pgp",pkcs10:"p10","pkcs7-mime":["p7m","p7c"],"pkcs7-signature":"p7s",pkcs8:"p8","pkix-attr-cert":"ac","pkix-crl":"crl","pkix-pkipath":"pkipath",pkixcmp:"pki","pls+xml":"pls","prs.cww":"cww","pskc+xml":"pskcxml","reginfo+xml":"rif","relax-ng-compact-syntax":"rnc","resource-lists+xml":"rl","resource-lists-diff+xml":"rld","rls-services+xml":"rs","rpki-ghostbusters":"gbr","rpki-manifest":"mft","rpki-roa":"roa","rsd+xml":"rsd","sbml+xml":"sbml","scvp-cv-request":"scq","scvp-cv-response":"scs","scvp-vp-request":"spq","scvp-vp-response":"spp",sdp:"sdp","set-payment-initiation":"setpay","set-registration-initiation":"setreg","shf+xml":"shf","sparql-query":"rq","sparql-results+xml":"srx",srgs:"gram","srgs+xml":"grxml","sru+xml":"sru","ssdl+xml":"ssdl","ssml+xml":"ssml","tei+xml":["tei","teicorpus"],"thraud+xml":"tfi","timestamped-data":"tsd","vnd.3gpp.pic-bw-large":"plb","vnd.3gpp.pic-bw-small":"psb","vnd.3gpp.pic-bw-var":"pvb","vnd.3gpp2.tcap":"tcap","vnd.3m.post-it-notes":"pwn","vnd.accpac.simply.aso":"aso","vnd.accpac.simply.imp":"imp","vnd.acucobol":"acu","vnd.acucorp":["atc","acutc"],"vnd.adobe.air-application-installer-package+zip":"air","vnd.adobe.formscentral.fcdt":"fcdt","vnd.adobe.fxp":["fxp","fxpl"],"vnd.adobe.xdp+xml":"xdp","vnd.adobe.xfdf":"xfdf","vnd.ahead.space":"ahead","vnd.airzip.filesecure.azf":"azf","vnd.airzip.filesecure.azs":"azs","vnd.amazon.ebook":"azw","vnd.americandynamics.acc":"acc","vnd.amiga.ami":"ami","vnd.anser-web-certificate-issue-initiation":"cii","vnd.anser-web-funds-transfer-initiation":"fti","vnd.antix.game-component":"atx","vnd.apple.installer+xml":"mpkg","vnd.apple.mpegurl":"m3u8","vnd.aristanetworks.swi":"swi","vnd.astraea-software.iota":"iota","vnd.audiograph":"aep","vnd.blueice.multipass":"mpm","vnd.bmi":"bmi","vnd.businessobjects":"rep","vnd.chemdraw+xml":"cdxml","vnd.chipnuts.karaoke-mmd":"mmd","vnd.claymore":"cla","vnd.cloanto.rp9":"rp9","vnd.clonk.c4group":["c4g","c4d","c4f","c4p","c4u"],"vnd.cluetrust.cartomobile-config":"c11amc","vnd.cluetrust.cartomobile-config-pkg":"c11amz","vnd.commonspace":"csp","vnd.contact.cmsg":"cdbcmsg","vnd.cosmocaller":"cmc","vnd.crick.clicker":"clkx","vnd.crick.clicker.keyboard":"clkk","vnd.crick.clicker.palette":"clkp","vnd.crick.clicker.template":"clkt","vnd.crick.clicker.wordbank":"clkw","vnd.criticaltools.wbs+xml":"wbs","vnd.ctc-posml":"pml","vnd.cups-ppd":"ppd","vnd.curl.car":"car","vnd.curl.pcurl":"pcurl","vnd.dart":"dart","vnd.data-vision.rdz":"rdz","vnd.dece.data":["uvf","uvvf","uvd","uvvd"],"vnd.dece.ttml+xml":["uvt","uvvt"],"vnd.dece.unspecified":["uvx","uvvx"],"vnd.dece.zip":["uvz","uvvz"],"vnd.denovo.fcselayout-link":"fe_launch","vnd.dna":"dna","vnd.dolby.mlp":"mlp","vnd.dpgraph":"dpg","vnd.dreamfactory":"dfac","vnd.ds-keypoint":"kpxx","vnd.dvb.ait":"ait","vnd.dvb.service":"svc","vnd.dynageo":"geo","vnd.ecowin.chart":"mag","vnd.enliven":"nml","vnd.epson.esf":"esf","vnd.epson.msf":"msf","vnd.epson.quickanime":"qam","vnd.epson.salt":"slt","vnd.epson.ssf":"ssf","vnd.eszigno3+xml":["es3","et3"],"vnd.ezpix-album":"ez2","vnd.ezpix-package":"ez3","vnd.fdf":"fdf","vnd.fdsn.mseed":"mseed","vnd.fdsn.seed":["seed","dataless"],"vnd.flographit":"gph","vnd.fluxtime.clip":"ftc","vnd.framemaker":["fm","frame","maker","book"],"vnd.frogans.fnc":"fnc","vnd.frogans.ltf":"ltf","vnd.fsc.weblaunch":"fsc","vnd.fujitsu.oasys":"oas","vnd.fujitsu.oasys2":"oa2","vnd.fujitsu.oasys3":"oa3","vnd.fujitsu.oasysgp":"fg5","vnd.fujitsu.oasysprs":"bh2","vnd.fujixerox.ddd":"ddd","vnd.fujixerox.docuworks":"xdw","vnd.fujixerox.docuworks.binder":"xbd","vnd.fuzzysheet":"fzs","vnd.genomatix.tuxedo":"txd","vnd.geogebra.file":"ggb","vnd.geogebra.tool":"ggt","vnd.geometry-explorer":["gex","gre"],"vnd.geonext":"gxt","vnd.geoplan":"g2w","vnd.geospace":"g3w","vnd.gmx":"gmx","vnd.grafeq":["gqf","gqs"],"vnd.groove-account":"gac","vnd.groove-help":"ghf","vnd.groove-identity-message":"gim","vnd.groove-injector":"grv","vnd.groove-tool-message":"gtm","vnd.groove-tool-template":"tpl","vnd.groove-vcard":"vcg","vnd.hal+xml":"hal","vnd.handheld-entertainment+xml":"zmm","vnd.hbci":"hbci","vnd.hhe.lesson-player":"les","vnd.hp-hpgl":"hpgl","vnd.hp-hpid":"hpid","vnd.hp-hps":"hps","vnd.hp-jlyt":"jlt","vnd.hp-pcl":"pcl","vnd.hp-pclxl":"pclxl","vnd.hydrostatix.sof-data":"sfd-hdstx","vnd.ibm.minipay":"mpy","vnd.ibm.modcap":["afp","listafp","list3820"],"vnd.ibm.rights-management":"irm","vnd.ibm.secure-container":"sc","vnd.iccprofile":["icc","icm"],"vnd.igloader":"igl","vnd.immervision-ivp":"ivp","vnd.immervision-ivu":"ivu","vnd.insors.igm":"igm","vnd.intercon.formnet":["xpw","xpx"],"vnd.intergeo":"i2g","vnd.intu.qbo":"qbo","vnd.intu.qfx":"qfx","vnd.ipunplugged.rcprofile":"rcprofile","vnd.irepository.package+xml":"irp","vnd.is-xpr":"xpr","vnd.isac.fcs":"fcs","vnd.jam":"jam","vnd.jcp.javame.midlet-rms":"rms","vnd.jisp":"jisp","vnd.joost.joda-archive":"joda","vnd.kahootz":["ktz","ktr"],"vnd.kde.karbon":"karbon","vnd.kde.kchart":"chrt","vnd.kde.kformula":"kfo","vnd.kde.kivio":"flw","vnd.kde.kontour":"kon","vnd.kde.kpresenter":["kpr","kpt"],"vnd.kde.kspread":"ksp","vnd.kde.kword":["kwd","kwt"],"vnd.kenameaapp":"htke","vnd.kidspiration":"kia","vnd.kinar":["kne","knp"],"vnd.koan":["skp","skd","skt","skm"],"vnd.kodak-descriptor":"sse","vnd.las.las+xml":"lasxml","vnd.llamagraphics.life-balance.desktop":"lbd","vnd.llamagraphics.life-balance.exchange+xml":"lbe","vnd.lotus-1-2-3":"123","vnd.lotus-approach":"apr","vnd.lotus-freelance":"pre","vnd.lotus-notes":"nsf","vnd.lotus-organizer":"org","vnd.lotus-screencam":"scm","vnd.lotus-wordpro":"lwp","vnd.macports.portpkg":"portpkg","vnd.mcd":"mcd","vnd.medcalcdata":"mc1","vnd.mediastation.cdkey":"cdkey","vnd.mfer":"mwf","vnd.mfmp":"mfm","vnd.micrografx.flo":"flo","vnd.micrografx.igx":"igx","vnd.mif":"mif","vnd.mobius.daf":"daf","vnd.mobius.dis":"dis","vnd.mobius.mbk":"mbk","vnd.mobius.mqy":"mqy","vnd.mobius.msl":"msl","vnd.mobius.plc":"plc","vnd.mobius.txf":"txf","vnd.mophun.application":"mpn","vnd.mophun.certificate":"mpc","vnd.ms-artgalry":"cil","vnd.ms-cab-compressed":"cab","vnd.ms-excel.addin.macroenabled.12":"xlam","vnd.ms-excel.sheet.binary.macroenabled.12":"xlsb","vnd.ms-excel.sheet.macroenabled.12":"xlsm","vnd.ms-excel.template.macroenabled.12":"xltm","vnd.ms-fontobject":"eot","vnd.ms-htmlhelp":"chm","vnd.ms-ims":"ims","vnd.ms-lrm":"lrm","vnd.ms-officetheme":"thmx","vnd.ms-powerpoint.addin.macroenabled.12":"ppam","vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","vnd.ms-powerpoint.slide.macroenabled.12":"sldm","vnd.ms-powerpoint.slideshow.macroenabled.12":"ppsm","vnd.ms-powerpoint.template.macroenabled.12":"potm","vnd.ms-project":["mpp","mpt"],"vnd.ms-word.document.macroenabled.12":"docm","vnd.ms-word.template.macroenabled.12":"dotm","vnd.ms-works":["wps","wks","wcm","wdb"],"vnd.ms-wpl":"wpl","vnd.ms-xpsdocument":"xps","vnd.mseq":"mseq","vnd.musician":"mus","vnd.muvee.style":"msty","vnd.mynfc":"taglet","vnd.neurolanguage.nlu":"nlu","vnd.nitf":["ntf","nitf"],"vnd.noblenet-directory":"nnd","vnd.noblenet-sealer":"nns","vnd.noblenet-web":"nnw","vnd.nokia.n-gage.data":"ngdat","vnd.nokia.n-gage.symbian.install":"n-gage","vnd.nokia.radio-preset":"rpst","vnd.nokia.radio-presets":"rpss","vnd.novadigm.edm":"edm","vnd.novadigm.edx":"edx","vnd.novadigm.ext":"ext","vnd.oasis.opendocument.chart-template":"otc","vnd.oasis.opendocument.formula-template":"odft","vnd.oasis.opendocument.image-template":"oti","vnd.olpc-sugar":"xo","vnd.oma.dd2+xml":"dd2","vnd.openofficeorg.extension":"oxt","vnd.openxmlformats-officedocument.presentationml.slide":"sldx","vnd.osgeo.mapguide.package":"mgp","vnd.osgi.dp":"dp","vnd.osgi.subsystem":"esa","vnd.palm":["pdb","pqa","oprc"],"vnd.pawaafile":"paw","vnd.pg.format":"str","vnd.pg.osasli":"ei6","vnd.picsel":"efif","vnd.pmi.widget":"wg","vnd.pocketlearn":"plf","vnd.powerbuilder6":"pbd","vnd.previewsystems.box":"box","vnd.proteus.magazine":"mgz","vnd.publishare-delta-tree":"qps","vnd.pvi.ptid1":"ptid","vnd.quark.quarkxpress":["qxd","qxt","qwd","qwt","qxl","qxb"],"vnd.realvnc.bed":"bed","vnd.recordare.musicxml":"mxl","vnd.recordare.musicxml+xml":"musicxml","vnd.rig.cryptonote":"cryptonote","vnd.rn-realmedia":"rm","vnd.rn-realmedia-vbr":"rmvb","vnd.route66.link66+xml":"link66","vnd.sailingtracker.track":"st","vnd.seemail":"see","vnd.sema":"sema","vnd.semd":"semd","vnd.semf":"semf","vnd.shana.informed.formdata":"ifm","vnd.shana.informed.formtemplate":"itp","vnd.shana.informed.interchange":"iif","vnd.shana.informed.package":"ipk","vnd.simtech-mindmapper":["twd","twds"],"vnd.smart.teacher":"teacher","vnd.solent.sdkm+xml":["sdkm","sdkd"],"vnd.spotfire.dxp":"dxp","vnd.spotfire.sfs":"sfs","vnd.stepmania.package":"smzip","vnd.stepmania.stepchart":"sm","vnd.sus-calendar":["sus","susp"],"vnd.svd":"svd","vnd.syncml+xml":"xsm","vnd.syncml.dm+wbxml":"bdm","vnd.syncml.dm+xml":"xdm","vnd.tao.intent-module-archive":"tao","vnd.tcpdump.pcap":["pcap","cap","dmp"],"vnd.tmobile-livetv":"tmo","vnd.trid.tpt":"tpt","vnd.triscape.mxs":"mxs","vnd.trueapp":"tra","vnd.ufdl":["ufd","ufdl"],"vnd.uiq.theme":"utz","vnd.umajin":"umj","vnd.unity":"unityweb","vnd.uoml+xml":"uoml","vnd.vcx":"vcx","vnd.visionary":"vis","vnd.vsf":"vsf","vnd.webturbo":"wtb","vnd.wolfram.player":"nbp","vnd.wqd":"wqd","vnd.wt.stf":"stf","vnd.xara":"xar","vnd.xfdl":"xfdl","vnd.yamaha.hv-dic":"hvd","vnd.yamaha.hv-script":"hvs","vnd.yamaha.hv-voice":"hvp","vnd.yamaha.openscoreformat":"osf","vnd.yamaha.openscoreformat.osfpvg+xml":"osfpvg","vnd.yamaha.smaf-audio":"saf","vnd.yamaha.smaf-phrase":"spf","vnd.yellowriver-custom-menu":"cmp","vnd.zul":["zir","zirz"],"vnd.zzazz.deck+xml":"zaz","voicexml+xml":"vxml",widget:"wgt",winhlp:"hlp","wsdl+xml":"wsdl","wspolicy+xml":"wspolicy","x-ace-compressed":"ace","x-authorware-bin":["aab","x32","u32","vox"],"x-authorware-map":"aam","x-authorware-seg":"aas","x-blorb":["blb","blorb"],"x-bzip":"bz","x-bzip2":["bz2","boz"],"x-cfs-compressed":"cfs","x-chat":"chat","x-conference":"nsc","x-dgc-compressed":"dgc","x-dtbncx+xml":"ncx","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-eva":"eva","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-freearc":"arc","x-gca-compressed":"gca","x-glulx":"ulx","x-gramps-xml":"gramps","x-install-instructions":"install","x-lzh-compressed":["lzh","lha"],"x-mie":"mie","x-mobipocket-ebook":["prc","mobi"],"x-ms-application":"application","x-ms-shortcut":"lnk","x-ms-xbap":"xbap","x-msbinder":"obd","x-mscardfile":"crd","x-msclip":"clp","application/x-ms-installer":"msi","x-msmediaview":["mvb","m13","m14"],"x-msmetafile":["wmf","wmz","emf","emz"],"x-msmoney":"mny","x-mspublisher":"pub","x-msschedule":"scd","x-msterminal":"trm","x-mswrite":"wri","x-nzb":"nzb","x-pkcs12":["p12","pfx"],"x-pkcs7-certificates":["p7b","spc"],"x-research-info-systems":"ris","x-silverlight-app":"xap","x-sql":"sql","x-stuffitx":"sitx","x-subrip":"srt","x-t3vm-image":"t3","x-tex-tfm":"tfm","x-tgif":"obj","x-xliff+xml":"xlf","x-xz":"xz","x-zmachine":["z1","z2","z3","z4","z5","z6","z7","z8"],"xaml+xml":"xaml","xcap-diff+xml":"xdf","xenc+xml":"xenc","xml-dtd":"dtd","xop+xml":"xop","xproc+xml":"xpl","xslt+xml":"xslt","xv+xml":["mxml","xhvml","xvml","xvm"],yang:"yang","yin+xml":"yin",envoy:"evy",fractals:"fif","internet-property-stream":"acx",olescript:"axs","vnd.ms-outlook":"msg","vnd.ms-pkicertstore":"sst","x-compress":"z","x-perfmon":["pma","pmc","pmr","pmw"],"ynd.ms-pkipko":"pko",gzip:["gz","tgz"],"smil+xml":["smi","smil"],"vnd.debian.binary-package":["deb","udeb"],"vnd.hzn-3d-crossword":"x3d","vnd.sqlite3":["db","sqlite","sqlite3","db-wal","sqlite-wal","db-shm","sqlite-shm"],"vnd.wap.sic":"sic","vnd.wap.slc":"slc","x-krita":["kra","krz"],"x-perl":["pm","pl"],yaml:["yaml","yml"]},audio:{amr:"amr","amr-wb":"awb",annodex:"axa",basic:["au","snd"],flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"prs.sid":"sid","x-aiff":"aifc","x-gsm":"gsm","x-ms-wma":"wma","x-ms-wax":"wax","x-pn-realaudio":"ram","x-realaudio":"ra","x-sd2":"sd2",adpcm:"adp",mp4:"mp4a",s3m:"s3m",silk:"sil","vnd.dece.audio":["uva","uvva"],"vnd.digital-winds":"eol","vnd.dra":"dra","vnd.dts":"dts","vnd.dts.hd":"dtshd","vnd.lucent.voice":"lvp","vnd.ms-playready.media.pya":"pya","vnd.nuera.ecelp4800":"ecelp4800","vnd.nuera.ecelp7470":"ecelp7470","vnd.nuera.ecelp9600":"ecelp9600","vnd.rip":"rip",webm:"weba","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",aac:"aac",aiff:["aiff","aif","aff"],opus:"opus",wav:"wav"},chemical:{"x-alchemy":"alc","x-cache":["cac","cache"],"x-cache-csf":"csf","x-cactvs-binary":["cbin","cascii","ctab"],"x-cdx":"cdx","x-chem3d":"c3d","x-cif":"cif","x-cmdf":"cmdf","x-cml":"cml","x-compass":"cpa","x-crossfire":"bsd","x-csml":["csml","csm"],"x-ctx":"ctx","x-cxf":["cxf","cef"],"x-embl-dl-nucleotide":["emb","embl"],"x-gamess-input":["inp","gam","gamin"],"x-gaussian-checkpoint":["fch","fchk"],"x-gaussian-cube":"cub","x-gaussian-input":["gau","gjc","gjf"],"x-gaussian-log":"gal","x-gcg8-sequence":"gcg","x-genbank":"gen","x-hin":"hin","x-isostar":["istr","ist"],"x-jcamp-dx":["jdx","dx"],"x-kinemage":"kin","x-macmolecule":"mcm","x-macromodel-input":"mmod","x-mdl-molfile":"mol","x-mdl-rdfile":"rd","x-mdl-rxnfile":"rxn","x-mdl-sdfile":"sd","x-mdl-tgf":"tgf","x-mmcif":"mcif","x-mol2":"mol2","x-molconn-Z":"b","x-mopac-graph":"gpt","x-mopac-input":["mop","mopcrt","zmt"],"x-mopac-out":"moo","x-ncbi-asn1":"asn","x-ncbi-asn1-ascii":["prt","ent"],"x-ncbi-asn1-binary":"val","x-rosdal":"ros","x-swissprot":"sw","x-vamas-iso14976":"vms","x-vmd":"vmd","x-xtel":"xtel","x-xyz":"xyz"},font:{otf:"otf",woff:"woff",woff2:"woff2"},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe","jfif","jfif-tbnl","jif"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"vnd.djvu":["djvu","djv"],"vnd.wap.wbmp":"wbmp","x-canon-cr2":"cr2","x-canon-crw":"crw","x-cmu-raster":"ras","x-coreldraw":"cdr","x-coreldrawpattern":"pat","x-coreldrawtemplate":"cdt","x-corelphotopaint":"cpt","x-epson-erf":"erf","x-icon":"ico","x-jg":"art","x-jng":"jng","x-nikon-nef":"nef","x-olympus-orf":"orf","x-portable-anymap":"pnm","x-portable-bitmap":"pbm","x-portable-graymap":"pgm","x-portable-pixmap":"ppm","x-rgb":"rgb","x-xbitmap":"xbm","x-xpixmap":"xpm","x-xwindowdump":"xwd",bmp:"bmp",cgm:"cgm",g3fax:"g3",ktx:"ktx","prs.btif":"btif",sgi:"sgi","vnd.dece.graphic":["uvi","uvvi","uvg","uvvg"],"vnd.dwg":"dwg","vnd.dxf":"dxf","vnd.fastbidsheet":"fbs","vnd.fpx":"fpx","vnd.fst":"fst","vnd.fujixerox.edmics-mmr":"mmr","vnd.fujixerox.edmics-rlc":"rlc","vnd.ms-modi":"mdi","vnd.ms-photo":"wdp","vnd.net-fpx":"npx","vnd.xiff":"xif",webp:"webp","x-3ds":"3ds","x-cmx":"cmx","x-freehand":["fh","fhc","fh4","fh5","fh7"],"x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod",avif:"avifs",heic:["heif","heic"],pjpeg:["pjpg"],"vnd.adobe.photoshop":"psd","x-adobe-dng":"dng","x-fuji-raf":"raf","x-icns":"icns","x-kodak-dcr":"dcr","x-kodak-k25":"k25","x-kodak-kdc":"kdc","x-minolta-mrw":"mrw","x-panasonic-raw":["raw","rw2","rwl"],"x-pentax-pef":["pef","ptx"],"x-sigma-x3f":"x3f","x-sony-arw":"arw","x-sony-sr2":"sr2","x-sony-srf":"srf"},message:{rfc822:["eml","mime","mht","mhtml","nws"]},model:{iges:["igs","iges"],mesh:["msh","mesh","silo"],vrml:["wrl","vrml"],"x3d+vrml":["x3dv","x3dvz"],"x3d+xml":"x3dz","x3d+binary":["x3db","x3dbz"],"vnd.collada+xml":"dae","vnd.dwf":"dwf","vnd.gdl":"gdl","vnd.gtw":"gtw","vnd.mts":"mts","vnd.usdz+zip":"usdz","vnd.vtu":"vtu"},text:{"cache-manifest":["manifest","appcache"],calendar:["ics","icz","ifb"],css:"css",csv:"csv",h323:"323",html:["html","htm","shtml","stm"],iuls:"uls",plain:["txt","text","brf","conf","def","list","log","in","bas","diff","ksh"],richtext:"rtx",scriptlet:["sct","wsc"],texmacs:"tm","tab-separated-values":"tsv","vnd.sun.j2me.app-descriptor":"jad","vnd.wap.wml":"wml","vnd.wap.wmlscript":"wmls","x-bibtex":"bib","x-boo":"boo","x-c++hdr":["h++","hpp","hxx","hh"],"x-c++src":["c++","cpp","cxx","cc"],"x-component":"htc","x-dsrc":"d","x-diff":"patch","x-haskell":"hs","x-java":"java","x-literate-haskell":"lhs","x-moc":"moc","x-pascal":["p","pas","pp","inc"],"x-pcs-gcd":"gcd","x-python":"py","x-scala":"scala","x-setext":"etx","x-tcl":["tcl","tk"],"x-tex":["tex","ltx","sty","cls"],"x-vcalendar":"vcs","x-vcard":"vcf",n3:"n3","prs.lines.tag":"dsc",sgml:["sgml","sgm"],troff:["t","tr","roff","man","me","ms"],turtle:"ttl","uri-list":["uri","uris","urls"],vcard:"vcard","vnd.curl":"curl","vnd.curl.dcurl":"dcurl","vnd.curl.scurl":"scurl","vnd.curl.mcurl":"mcurl","vnd.dvb.subtitle":"sub","vnd.fly":"fly","vnd.fmi.flexstor":"flx","vnd.graphviz":"gv","vnd.in3d.3dml":"3dml","vnd.in3d.spot":"spot","x-asm":["s","asm"],"x-c":["c","h","dic"],"x-fortran":["f","for","f77","f90"],"x-opml":"opml","x-nfo":"nfo","x-sfv":"sfv","x-uuencode":"uu",webviewhtml:"htt",javascript:"js",json:"json",markdown:["md","markdown","mdown","markdn"],"vnd.wap.si":"si","vnd.wap.sl":"sl"},video:{avif:"avif","3gpp":"3gp",annodex:"axv",dl:"dl",dv:["dif","dv"],fli:"fli",gl:"gl",mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.dece.hd":["uvh","uvvh"],"vnd.dece.mobile":["uvm","uvvm"],"vnd.dece.pd":["uvp","uvvp"],"vnd.dece.sd":["uvs","uvvs"],"vnd.dece.video":["uvv","uvvv"],"vnd.dvb.file":"dvb","vnd.fvt":"fvt","vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv",mp2t:"ts"},"x-conference":{"x-cooltalk":"ice"},"x-world":{"x-vrml":["vrm","flr","wrz","xaf","xof"]}};!function(){for(var e={},t=0,n=Object.keys(rL);t<n.length;t++)for(var r=n[t],i=0,o=Object.keys(rL[r]);i<o.length;i++){var a=o[i],s=rL[r][a];if("string"==typeof s)e[s]=r+"/"+a;else for(var l=0;l<s.length;l++)e[s[l]]=r+"/"+a}}();for(var iL=[],oL=0;oL<256;oL++){for(var aL=oL,sL=0;sL<8;sL++)1&aL?aL=aL>>>1^3988292384:aL>>>=1;iL[oL]=aL}var lL=function(){function e(t){u(this,e),this.crc=t||-1}return f(e,[{key:"append",value:function(e){for(var t=0|this.crc,n=0,r=0|e.length;n<r;n++)t=t>>>8^iL[255&(t^e[n])];this.crc=t}},{key:"get",value:function(){return~this.crc}}]),e}(),uL=function(e){v(n,TransformStream);var t=y(n);function n(){var e,r;u(this,n);var i=new lL;return e=t.call(this,{transform:function(e,t){i.append(e),t.enqueue(e)},flush:function(){var e=new Uint8Array(4);new DataView(e.buffer).setUint32(0,i.get()),r.value=e}}),r=g(e),e}return f(n)}();function cL(e){if(typeof TextEncoder==XD){e=unescape(encodeURIComponent(e));for(var t=new Uint8Array(e.length),n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new TextEncoder).encode(e)}var hL={concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var n=e[e.length-1],r=hL.getPartial(n);return 32===r?e.concat(t):hL._shiftRight(t,r,0|n,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;if(0===t)return 0;var n=e[t-1];return 32*(t-1)+hL.getPartial(n)},clamp:function(e,t){if(32*e.length<t)return e;var n=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=hL.partial(t,e[n-1]&2147483648>>t-1,1)),e},partial:function(e,t,n){return 32===e?t:(n?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},_shiftRight:function(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(var i=0;i<e.length;i++)r.push(n|e[i]>>>t),n=e[i]<<32-t;var o=e.length?e[e.length-1]:0,a=hL.getPartial(o);return r.push(hL.partial(t+a&31,t+a>32?n:r.pop(),1)),r}},dL={bytes:{fromBits:function(e){for(var t,n=hL.bitLength(e)/8,r=new Uint8Array(n),i=0;i<n;i++)0===(3&i)&&(t=e[i/4]),r[i]=t>>>24,t<<=8;return r},toBits:function(e){var t,n=[],r=0;for(t=0;t<e.length;t++)r=r<<8|e[t],3===(3&t)&&(n.push(r),r=0);return 3&t&&n.push(hL.partial(8*(3&t),r)),n}}},fL={};fL.sha1=function(){function e(t){u(this,e);var n=this;n.blockSize=512,n._init=[1732584193,4023233417,2562383102,271733878,3285377520],n._key=[1518500249,1859775393,2400959708,3395469782],t?(n._h=t._h.slice(0),n._buffer=t._buffer.slice(0),n._length=t._length):n.reset()}return f(e,[{key:"reset",value:function(){var e=this;return e._h=e._init.slice(0),e._buffer=[],e._length=0,e}},{key:"update",value:function(e){var t=this;"string"===typeof e&&(e=dL.utf8String.toBits(e));var n=t._buffer=hL.concat(t._buffer,e),r=t._length,i=t._length=r+hL.bitLength(e);if(i>9007199254740991)throw new Error("Cannot hash more than 2^53 - 1 bits");for(var o=new Uint32Array(n),a=0,s=t.blockSize+r-(t.blockSize+r&t.blockSize-1);s<=i;s+=t.blockSize)t._block(o.subarray(16*a,16*(a+1))),a+=1;return n.splice(0,16*a),t}},{key:"finalize",value:function(){for(var e=this,t=e._buffer,n=e._h,r=(t=hL.concat(t,[hL.partial(1,1)])).length+2;15&r;r++)t.push(0);for(t.push(Math.floor(e._length/4294967296)),t.push(0|e._length);t.length;)e._block(t.splice(0,16));return e.reset(),n}},{key:"_f",value:function(e,t,n,r){return e<=19?t&n|~t&r:e<=39?t^n^r:e<=59?t&n|t&r|n&r:e<=79?t^n^r:void 0}},{key:"_S",value:function(e,t){return t<<e|t>>>32-e}},{key:"_block",value:function(e){for(var t=this,n=t._h,r=Array(80),i=0;i<16;i++)r[i]=e[i];for(var o=n[0],a=n[1],s=n[2],l=n[3],u=n[4],c=0;c<=79;c++){c>=16&&(r[c]=t._S(1,r[c-3]^r[c-8]^r[c-14]^r[c-16]));var h=t._S(5,o)+t._f(c,a,s,l)+u+r[c]+t._key[Math.floor(c/20)]|0;u=l,l=s,s=t._S(30,a),a=o,o=h}n[0]=n[0]+o|0,n[1]=n[1]+a|0,n[2]=n[2]+s|0,n[3]=n[3]+l|0,n[4]=n[4]+u|0}}]),e}();var pL={};pL.aes=function(){function e(t){u(this,e);var n=this;n._tables=[[[],[],[],[],[]],[[],[],[],[],[]]],n._tables[0][0][0]||n._precompute();var r,i,o,a=n._tables[0][4],s=n._tables[1],l=t.length,c=1;if(4!==l&&6!==l&&8!==l)throw new Error("invalid aes key size");for(n._key=[i=t.slice(0),o=[]],r=l;r<4*l+28;r++){var h=i[r-1];(r%l===0||8===l&&r%l===4)&&(h=a[h>>>24]<<24^a[h>>16&255]<<16^a[h>>8&255]<<8^a[255&h],r%l===0&&(h=h<<8^h>>>24^c<<24,c=c<<1^283*(c>>7))),i[r]=i[r-l]^h}for(var d=0;r;d++,r--){var f=i[3&d?r:r-4];o[d]=r<=4||d<4?f:s[0][a[f>>>24]]^s[1][a[f>>16&255]]^s[2][a[f>>8&255]]^s[3][a[255&f]]}}return f(e,[{key:"encrypt",value:function(e){return this._crypt(e,0)}},{key:"decrypt",value:function(e){return this._crypt(e,1)}},{key:"_precompute",value:function(){for(var e,t,n,r=this._tables[0],i=this._tables[1],o=r[4],a=i[4],s=[],l=[],u=0;u<256;u++)l[(s[u]=u<<1^283*(u>>7))^u]=u;for(var c=e=0;!o[c];c^=t||1,e=l[e]||1){var h=e^e<<1^e<<2^e<<3^e<<4;h=h>>8^255&h^99,o[c]=h,a[h]=c;for(var d=16843009*s[n=s[t=s[c]]]^65537*n^257*t^16843008*c,f=257*s[h]^16843008*h,p=0;p<4;p++)r[p][c]=f=f<<24^f>>>8,i[p][h]=d=d<<24^d>>>8}for(var v=0;v<5;v++)r[v]=r[v].slice(0),i[v]=i[v].slice(0)}},{key:"_crypt",value:function(e,t){if(4!==e.length)throw new Error("invalid aes block size");for(var n,r,i,o=this._key[t],a=o.length/4-2,s=[0,0,0,0],l=this._tables[t],u=l[0],c=l[1],h=l[2],d=l[3],f=l[4],p=e[0]^o[0],v=e[t?3:1]^o[1],m=e[2]^o[2],g=e[t?1:3]^o[3],y=4,b=0;b<a;b++)n=u[p>>>24]^c[v>>16&255]^h[m>>8&255]^d[255&g]^o[y],r=u[v>>>24]^c[m>>16&255]^h[g>>8&255]^d[255&p]^o[y+1],i=u[m>>>24]^c[g>>16&255]^h[p>>8&255]^d[255&v]^o[y+2],g=u[g>>>24]^c[p>>16&255]^h[v>>8&255]^d[255&m]^o[y+3],y+=4,p=n,v=r,m=i;for(var _=0;_<4;_++)s[t?3&-_:_]=f[p>>>24]<<24^f[v>>16&255]<<16^f[m>>8&255]<<8^f[255&g]^o[y++],n=p,p=v,v=m,m=g,g=n;return s}}]),e}();var vL={getRandomValues:function(e){for(var t,n=new Uint32Array(e.buffer),r=function(e){var t=987654321,n=4294967295;return function(){return((((t=36969*(65535&t)+(t>>16)&n)<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(Math.random()>.5?1:-1)}},i=0;i<e.length;i+=4){var o=r(4294967296*(t||Math.random()));t=987654071*o(),n[i/4]=4294967296*o()|0}return e}},mL={};mL.ctrGladman=function(){function e(t,n){u(this,e),this._prf=t,this._initIv=n,this._iv=n}return f(e,[{key:"reset",value:function(){this._iv=this._initIv}},{key:"update",value:function(e){return this.calculate(this._prf,e,this._iv)}},{key:"incWord",value:function(e){if(255===(e>>24&255)){var t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}else e+=1<<24;return e}},{key:"incCounter",value:function(e){0===(e[0]=this.incWord(e[0]))&&(e[1]=this.incWord(e[1]))}},{key:"calculate",value:function(e,t,n){var r;if(!(r=t.length))return[];for(var i=hL.bitLength(t),o=0;o<r;o+=4){this.incCounter(n);var a=e.encrypt(n);t[o]^=a[0],t[o+1]^=a[1],t[o+2]^=a[2],t[o+3]^=a[3]}return hL.clamp(t,i)}}]),e}();var gL={importKey:function(e){return new gL.hmacSha1(dL.bytes.toBits(e))},pbkdf2:function(e,t,n,r){if(n=n||1e4,r<0||n<0)throw new Error("invalid params to pbkdf2");var i,o,a,s,l,u=1+(r>>5)<<2,c=new ArrayBuffer(u),h=new DataView(c),d=0,f=hL;for(t=dL.bytes.toBits(t),l=1;d<(u||1);l++){for(i=o=e.encrypt(f.concat(t,[l])),a=1;a<n;a++)for(o=e.encrypt(o),s=0;s<o.length;s++)i[s]^=o[s];for(a=0;d<(u||1)&&a<i.length;a++)h.setInt32(d,i[a]),d+=4}return c.slice(0,r/8)}};gL.hmacSha1=function(){function e(t){u(this,e);var n=this,r=n._hash=fL.sha1,i=[[],[]];n._baseHash=[new r,new r];var o=n._baseHash[0].blockSize/32;t.length>o&&(t=(new r).update(t).finalize());for(var a=0;a<o;a++)i[0][a]=909522486^t[a],i[1][a]=1549556828^t[a];n._baseHash[0].update(i[0]),n._baseHash[1].update(i[1]),n._resultHash=new r(n._baseHash[0])}return f(e,[{key:"reset",value:function(){var e=this;e._resultHash=new e._hash(e._baseHash[0]),e._updated=!1}},{key:"update",value:function(e){this._updated=!0,this._resultHash.update(e)}},{key:"digest",value:function(){var e=this,t=e._resultHash.finalize(),n=new e._hash(e._baseHash[1]).update(t).finalize();return e.reset(),n}},{key:"encrypt",value:function(e){if(this._updated)throw new Error("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}]),e}();var yL=typeof crypto!=XD&&typeof crypto.getRandomValues==YD,bL="Invalid password",_L="Invalid signature",xL="zipjs-abort-check-password";function EL(e){return yL?crypto.getRandomValues(e):vL.getRandomValues(e)}var wL=16,TL="raw",SL={name:"PBKDF2"},kL=Object.assign({hash:{name:"HMAC"}},SL),CL=Object.assign({iterations:1e3,hash:{name:"SHA-1"}},SL),AL=["deriveBits"],IL=[8,12,16],OL=[16,24,32],PL=10,ML=[0,0,0,0],RL=typeof crypto!=XD,NL=RL&&crypto.subtle,DL=RL&&typeof NL!=XD,LL=dL.bytes,FL=pL.aes,BL=mL.ctrGladman,UL=gL.hmacSha1,HL=RL&&DL&&typeof NL.importKey==YD,jL=RL&&DL&&typeof NL.deriveBits==YD,zL=function(e){v(n,TransformStream);var t=y(n);function n(e){var r=e.password,i=e.rawPassword,o=e.signed,a=e.encryptionStrength,s=e.checkPasswordOnly;return u(this,n),t.call(this,{start:function(){var e=this;Object.assign(this,{ready:new Promise((function(t){return e.resolveReady=t})),password:tF(r,i),signed:o,strength:a-1,pending:new Uint8Array})},transform:function(e,t){var n=this;return Ee(_e().mark((function r(){var i,o,a,l,u,c;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=(i=n).password,a=i.strength,l=i.resolveReady,u=i.ready,!o){r.next=9;break}return r.next=5,WL(i,a,o,rF(e,0,IL[a]+2));case 5:e=rF(e,IL[a]+2),s?t.error(new Error(xL)):l(),r.next=11;break;case 9:return r.next=11,u;case 11:c=new Uint8Array(e.length-PL-(e.length-PL)%wL),t.enqueue(GL(i,e,c,0,PL,!0));case 13:case"end":return r.stop()}}),r)})))()},flush:function(e){var t=this;return Ee(_e().mark((function n(){var r,i,o,a,s,l,u,c,h,d,f,p;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.signed,i=t.ctr,o=t.hmac,a=t.pending,s=t.ready,!o||!i){n.next=18;break}return n.next=4,s;case 4:if(l=rF(a,0,a.length-PL),u=rF(a,a.length-PL),c=new Uint8Array,l.length&&(h=oF(LL,l),o.update(h),d=i.update(h),c=iF(LL,d)),!r){n.next=17;break}f=rF(iF(LL,o.digest()),0,PL),p=0;case 11:if(!(p<PL)){n.next=17;break}if(f[p]==u[p]){n.next=14;break}throw new Error(_L);case 14:p++,n.next=11;break;case 17:e.enqueue(c);case 18:case"end":return n.stop()}}),n)})))()}})}return f(n)}(),VL=function(e){v(n,TransformStream);var t=y(n);function n(e){var r,i,o=e.password,a=e.rawPassword,s=e.encryptionStrength;return u(this,n),r=t.call(this,{start:function(){var e=this;Object.assign(this,{ready:new Promise((function(t){return e.resolveReady=t})),password:tF(o,a),strength:s-1,pending:new Uint8Array})},transform:function(e,t){var n=this;return Ee(_e().mark((function r(){var i,o,a,s,l,u,c;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o=(i=n).password,a=i.strength,s=i.resolveReady,l=i.ready,u=new Uint8Array,!o){r.next=10;break}return r.next=6,YL(i,a,o);case 6:u=r.sent,s(),r.next=12;break;case 10:return r.next=12,l;case 12:(c=new Uint8Array(u.length+e.length-e.length%wL)).set(u,0),t.enqueue(GL(i,e,c,u.length,0));case 15:case"end":return r.stop()}}),r)})))()},flush:function(e){var t=this;return Ee(_e().mark((function n(){var r,o,a,s,l,u;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=t.ctr,o=t.hmac,a=t.pending,s=t.ready,!o||!r){n.next=8;break}return n.next=4,s;case 4:l=new Uint8Array,a.length&&(u=r.update(oF(LL,a)),o.update(u),l=iF(LL,u)),i.signature=iF(LL,o.digest()).slice(0,PL),e.enqueue(nF(l,i.signature));case 8:case"end":return n.stop()}}),n)})))()}}),i=g(r),r}return f(n)}();function GL(e,t,n,r,i,o){var a,s=e.ctr,l=e.hmac,u=e.pending,c=t.length-i;for(u.length&&(t=nF(u,t),n=function(e,t){if(t&&t>e.length){var n=e;(e=new Uint8Array(t)).set(n,0)}return e}(n,c-c%wL)),a=0;a<=c-wL;a+=wL){var h=oF(LL,rF(t,a,a+wL));o&&l.update(h);var d=s.update(h);o||l.update(d),n.set(iF(LL,d),a+r)}return e.pending=rF(t,a),n}function WL(e,t,n,r){return XL.apply(this,arguments)}function XL(){return XL=Ee(_e().mark((function e(t,n,r,i){var o,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,qL(t,n,r,rF(i,0,IL[n]));case 2:if(o=e.sent,a=rF(i,IL[n]),o[0]==a[0]&&o[1]==a[1]){e.next=6;break}throw new Error(bL);case 6:case"end":return e.stop()}}),e)}))),XL.apply(this,arguments)}function YL(e,t,n){return KL.apply(this,arguments)}function KL(){return KL=Ee(_e().mark((function e(t,n,r){var i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=EL(new Uint8Array(IL[n])),e.next=3,qL(t,n,r,i);case 3:return o=e.sent,e.abrupt("return",nF(i,o));case 5:case"end":return e.stop()}}),e)}))),KL.apply(this,arguments)}function qL(e,t,n,r){return ZL.apply(this,arguments)}function ZL(){return(ZL=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l,u,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.password=null,e.next=3,$L(TL,r,kL,!1,AL);case 3:return o=e.sent,e.next=6,JL(Object.assign({salt:i},CL),o,8*(2*OL[n]+2));case 6:return a=e.sent,s=new Uint8Array(a),l=oF(LL,rF(s,0,OL[n])),u=oF(LL,rF(s,OL[n],2*OL[n])),c=rF(s,2*OL[n]),Object.assign(t,{keys:{key:l,authentication:u,passwordVerification:c},ctr:new BL(new FL(l),Array.from(ML)),hmac:new UL(u)}),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $L(e,t,n,r,i){return QL.apply(this,arguments)}function QL(){return QL=Ee(_e().mark((function e(t,n,r,i,o){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!HL){e.next=13;break}return e.prev=1,e.next=4,NL.importKey(t,n,r,i,o);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),HL=!1,e.abrupt("return",gL.importKey(n));case 11:e.next=14;break;case 13:return e.abrupt("return",gL.importKey(n));case 14:case"end":return e.stop()}}),e,null,[[1,7]])}))),QL.apply(this,arguments)}function JL(e,t,n){return eF.apply(this,arguments)}function eF(){return(eF=Ee(_e().mark((function e(t,n,r){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jL){e.next=13;break}return e.prev=1,e.next=4,NL.deriveBits(t,n,r);case 4:return e.abrupt("return",e.sent);case 7:return e.prev=7,e.t0=e.catch(1),jL=!1,e.abrupt("return",gL.pbkdf2(n,t.salt,CL.iterations,r));case 11:e.next=14;break;case 13:return e.abrupt("return",gL.pbkdf2(n,t.salt,CL.iterations,r));case 14:case"end":return e.stop()}}),e,null,[[1,7]])})))).apply(this,arguments)}function tF(e,t){return t===WD?cL(e):t}function nF(e,t){var n=e;return e.length+t.length&&((n=new Uint8Array(e.length+t.length)).set(e,0),n.set(t,e.length)),n}function rF(e,t,n){return e.subarray(t,n)}function iF(e,t){return e.fromBits(t)}function oF(e,t){return e.toBits(t)}var aF=12,sF=function(e){v(n,TransformStream);var t=y(n);function n(e){var r=e.password,i=e.passwordVerification,o=e.checkPasswordOnly;return u(this,n),t.call(this,{start:function(){Object.assign(this,{password:r,passwordVerification:i}),hF(this,r)},transform:function(e,t){var n=this;if(n.password){var r=uF(n,e.subarray(0,aF));if(n.password=null,r[11]!=n.passwordVerification)throw new Error(bL);e=e.subarray(aF)}o?t.error(new Error(xL)):t.enqueue(uF(n,e))}})}return f(n)}(),lF=function(e){v(n,TransformStream);var t=y(n);function n(e){var r=e.password,i=e.passwordVerification;return u(this,n),t.call(this,{start:function(){Object.assign(this,{password:r,passwordVerification:i}),hF(this,r)},transform:function(e,t){var n,r,i=this;if(i.password){i.password=null;var o=EL(new Uint8Array(aF));o[11]=i.passwordVerification,(n=new Uint8Array(e.length+o.length)).set(cF(i,o),0),r=aF}else n=new Uint8Array(e.length),r=0;n.set(cF(i,e),r),t.enqueue(n)}})}return f(n)}();function uF(e,t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=fF(e)^t[r],dF(e,n[r]);return n}function cF(e,t){for(var n=new Uint8Array(t.length),r=0;r<t.length;r++)n[r]=fF(e)^t[r],dF(e,t[r]);return n}function hF(e,t){var n=[305419896,591751049,878082192];Object.assign(e,{keys:n,crcKey0:new lL(n[0]),crcKey2:new lL(n[2])});for(var r=0;r<t.length;r++)dF(e,t.charCodeAt(r))}function dF(e,t){var n=Pt(e.keys,3),r=n[0],i=n[1],o=n[2];e.crcKey0.append([t]),r=~e.crcKey0.get(),i=vF(Math.imul(vF(i+pF(r)),134775813)+1),e.crcKey2.append([i>>>24]),o=~e.crcKey2.get(),e.keys=[r,i,o]}function fF(e){var t=2|e.keys[2];return pF(Math.imul(t,1^t)>>>8)}function pF(e){return 255&e}function vF(e){return 4294967295&e}var mF="deflate-raw",gF=function(e){v(n,TransformStream);var t=y(n);function n(e,r){var i,o,a=r.chunkSize,s=r.CompressionStream,l=r.CompressionStreamNative;u(this,n),o=t.call(this,{});var c,h,d=e.compressed,f=e.encrypted,p=e.useCompressionStream,v=e.zipCrypto,y=e.signed,b=e.level,_=g(o),x=bF(jm((i=g(o),m(n.prototype)),"readable",i));return f&&!v||!y||(x=EF(x,c=new uL)),d&&(x=xF(x,p,{level:b,chunkSize:a},l,s)),f&&(x=EF(x,v?new lF(e):h=new VL(e))),_F(_,x,(function(){var e;f&&!v&&(e=h.signature),f&&!v||!y||(e=new DataView(c.value.buffer).getUint32(0)),_.signature=e})),o}return f(n)}(),yF=function(e){v(n,TransformStream);var t=y(n);function n(e,r){var i,o,a=r.chunkSize,s=r.DecompressionStream,l=r.DecompressionStreamNative;u(this,n),o=t.call(this,{});var c,h=e.zipCrypto,d=e.encrypted,f=e.signed,p=e.signature,v=e.compressed,y=e.useCompressionStream,b=bF(jm((i=g(o),m(n.prototype)),"readable",i));return d&&(b=EF(b,h?new sF(e):new zL(e))),v&&(b=xF(b,y,{chunkSize:a},l,s)),d&&!h||!f||(b=EF(b,c=new uL)),_F(g(o),b,(function(){if((!d||h)&&f){var e=new DataView(c.value.buffer);if(p!=e.getUint32(0,!1))throw new Error(_L)}})),o}return f(n)}();function bF(e){return EF(e,new TransformStream({transform:function(e,t){e&&e.length&&t.enqueue(e)}}))}function _F(e,t,n){t=EF(t,new TransformStream({flush:n})),Object.defineProperty(e,"readable",{get:function(){return t}})}function xF(e,t,n,r,i){try{e=EF(e,new(t&&r?r:i)(mF,n))}catch(o){if(!t)return e;try{e=EF(e,new i(mF,n))}catch(o){return e}}return e}function EF(e,t){return e.pipeThrough(t)}var wF="message",TF="start",SF="pull",kF="data",CF="ack",AF="close",IF="deflate",OF="inflate",PF=function(e){v(n,TransformStream);var t=y(n);function n(e,r){var i,o;u(this,n);var a,s=g(o=t.call(this,{})),l=e.codecType;l.startsWith(IF)?a=gF:l.startsWith(OF)&&(a=yF);var c=0,h=0,d=new a(e,r),f=jm((i=g(o),m(n.prototype)),"readable",i),p=new TransformStream({transform:function(e,t){e&&e.length&&(h+=e.length,t.enqueue(e))},flush:function(){Object.assign(s,{inputSize:h})}}),v=new TransformStream({transform:function(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush:function(){var e=d.signature;Object.assign(s,{signature:e,outputSize:c,inputSize:h})}});return Object.defineProperty(s,"readable",{get:function(){return f.pipeThrough(p).pipeThrough(d).pipeThrough(v)}}),o}return f(n)}(),MF=function(e){v(n,TransformStream);var t=y(n);function n(e){var r,i;return u(this,n),r=t.call(this,{transform:function t(n,r){if(i){var o=new Uint8Array(i.length+n.length);o.set(i),o.set(n,i.length),n=o,i=null}n.length>e?(r.enqueue(n.slice(0,e)),t(n.slice(e),r)):i=n},flush:function(e){i&&i.length&&e.enqueue(i)}}),r}return f(n)}(),RF=typeof Worker!=XD,NF=f((function e(t,n,r,i){var o=n.readable,a=n.writable,s=r.options,l=r.config,c=r.streamOptions,h=r.useWebWorkers,d=r.transferStreams,f=r.scripts;u(this,e);var p=c.signal;return Object.assign(t,{busy:!0,readable:o.pipeThrough(new MF(l.chunkSize)).pipeThrough(new DF(o,c),{signal:p}),writable:a,options:Object.assign({},s),scripts:f,transferStreams:d,terminate:function(){return new Promise((function(e){var n=t.worker,r=t.busy;n?(r?t.resolveTerminated=e:(n.terminate(),e()),t.interface=null):e()}))},onTaskFinished:function(){var e=t.resolveTerminated;e&&(t.resolveTerminated=null,t.terminated=!0,t.worker.terminate(),e()),t.busy=!1,i(t)}}),(h&&RF?UF:BF)(t,l)})),DF=function(e){v(n,TransformStream);var t=y(n);function n(e,r){var i=r.onstart,o=r.onprogress,a=r.size,s=r.onend;u(this,n);var l=0;return t.call(this,{start:function(){return Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=3;break}return e.next=3,LF(i,a);case 3:case"end":return e.stop()}}),e)})))()},transform:function(e,t){return Ee(_e().mark((function n(){return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l+=e.length,!o){n.next=4;break}return n.next=4,LF(o,l,a);case 4:t.enqueue(e);case 5:case"end":return n.stop()}}),n)})))()},flush:function(){return Ee(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.size=l,!s){t.next=4;break}return t.next=4,LF(s,l);case 4:case"end":return t.stop()}}),t)})))()}})}return f(n)}();function LF(e){return FF.apply(this,arguments)}function FF(){return FF=Ee(_e().mark((function e(t){var n,r,i,o=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(e.prev=0,n=o.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=o[i];return e.next=4,t.apply(void 0,r);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])}))),FF.apply(this,arguments)}function BF(e,t){return{run:function(){return function(e,t){return HF.apply(this,arguments)}(e,t)}}}function UF(e,t){var n=t.baseURL,r=t.chunkSize;if(!e.interface){var i;try{i=function(e,t,n){var r,i,o={type:"module"};typeof e==YD&&(e=e());try{r=new URL(e,t)}catch(r3){r=e}if(VF)try{i=new Worker(r)}catch(r3){VF=!1,i=new Worker(r,o)}else i=new Worker(r,o);return i.addEventListener(wF,(function(e){return function(e,t){return XF.apply(this,arguments)}(e,n)})),i}(e.scripts[0],n,e)}catch(o){return RF=!1,BF(e,t)}Object.assign(e,{worker:i,interface:{run:function(){return function(e,t){return jF.apply(this,arguments)}(e,{chunkSize:r})}}})}return e.interface}function HF(){return HF=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.options,i=t.readable,o=t.writable,a=t.onTaskFinished,e.prev=1,s=new PF(r,n),e.next=5,i.pipeThrough(s).pipeTo(o,{preventClose:!0,preventAbort:!0});case 5:return l=s.signature,u=s.inputSize,c=s.outputSize,e.abrupt("return",{signature:l,inputSize:u,outputSize:c});case 7:return e.prev=7,a(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])}))),HF.apply(this,arguments)}function jF(){return jF=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h,d,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new Promise((function(e,t){r=e,i=t})),Object.assign(t,{reader:null,writer:null,resolveResult:r,rejectResult:i,result:o}),a=t.readable,s=t.options,l=t.scripts,u=zF(t.writable),c=u.writable,h=u.closed,(d=WF({type:TF,scripts:l.slice(1),options:s,config:n,readable:a,writable:c},t))||Object.assign(t,{reader:a.getReader(),writer:c.getWriter()}),e.next=8,o;case 8:if(f=e.sent,d){e.next=12;break}return e.next=12,c.getWriter().close();case 12:return e.next=14,h;case 14:return e.abrupt("return",f);case 15:case"end":return e.stop()}}),e)}))),jF.apply(this,arguments)}function zF(e){var t,n=new Promise((function(e){return t=e}));return{writable:new WritableStream({write:function(t){return Ee(_e().mark((function n(){var r;return _e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.getWriter(),n.next=3,r.ready;case 3:return n.next=5,r.write(t);case 5:r.releaseLock();case 6:case"end":return n.stop()}}),n)})))()},close:function(){t()},abort:function(t){return e.getWriter().abort(t)}}),closed:n}}var VF=!0,GF=!0;function WF(e,t){var n=t.worker,r=t.writer,i=t.onTaskFinished,o=t.transferStreams;try{var a=e.value,s=e.readable,l=e.writable,u=[];if(a&&(a.byteLength<a.buffer.byteLength?e.value=a.buffer.slice(0,a.byteLength):e.value=a.buffer,u.push(e.value)),o&&GF?(s&&u.push(s),l&&u.push(l)):e.readable=e.writable=null,u.length)try{return n.postMessage(e,u),!0}catch(r3){GF=!1,e.readable=e.writable=null,n.postMessage(e)}else n.postMessage(e)}catch(c){throw r&&r.releaseLock(),i(),c}}function XF(){return XF=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(E=function(e,t){e?d(e):h(t),c&&c.releaseLock(),f()},r=t.data,i=r.type,o=r.value,a=r.messageId,s=r.result,l=r.error,u=n.reader,c=n.writer,h=n.resolveResult,d=n.rejectResult,f=n.onTaskFinished,e.prev=4,!l){e.next=12;break}p=l.message,v=l.stack,m=l.code,g=l.name,y=new Error(p),Object.assign(y,{stack:v,code:m,name:g}),E(y),e.next=26;break;case 12:if(i!=SF){e.next=19;break}return e.next=15,u.read();case 15:b=e.sent,_=b.value,x=b.done,WF({type:kF,value:_,done:x,messageId:a},n);case 19:if(i!=kF){e.next=25;break}return e.next=22,c.ready;case 22:return e.next=24,c.write(new Uint8Array(o));case 24:WF({type:CF,messageId:a},n);case 25:i==AF&&E(null,s);case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(4),WF({type:AF,messageId:a},n),E(e.t0);case 32:case"end":return e.stop()}}),e,null,[[4,28]])}))),XF.apply(this,arguments)}var YF=[],KF=[],qF=0;function ZF(e,t){return $F.apply(this,arguments)}function $F(){return $F=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h,d,f,p,v,m,g;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g=function(e){if(KF.length){var t=Pt(KF.splice(0,1),1)[0],r=t.resolve,i=t.stream,o=t.workerOptions;r(new NF(e,i,o,g))}else e.worker?(JF(e),QF(e,n)):YF=YF.filter((function(t){return t!=e}))},m=function(){return(m=Ee(_e().mark((function e(){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=YF.find((function(e){return!e.busy})))){e.next=6;break}return JF(r),e.abrupt("return",new NF(r,t,n,g));case 6:if(!(YF.length<f)){e.next=13;break}return i={indexWorker:qF},qF++,YF.push(i),e.abrupt("return",new NF(i,t,n,g));case 13:return e.abrupt("return",new Promise((function(e){return KF.push({resolve:e,stream:t,workerOptions:n})})));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)},v=function(){return m.apply(this,arguments)},r=n.options,i=n.config,o=r.transferStreams,a=r.useWebWorkers,s=r.useCompressionStream,l=r.codecType,u=r.compressed,c=r.signed,h=r.encrypted,d=i.workerScripts,f=i.maxWorkers,n.transferStreams=o||o===WD,p=!u&&!c&&!h&&!n.transferStreams,n.useWebWorkers=!p&&(a||a===WD&&i.useWebWorkers),n.scripts=n.useWebWorkers&&d?d[l]:[],r.useCompressionStream=s||s===WD&&i.useCompressionStream,e.next=13,v();case 13:return e.abrupt("return",e.sent.run());case 14:case"end":return e.stop()}}),e)}))),$F.apply(this,arguments)}function QF(e,t){var n=t.config.terminateWorkerTimeout;Number.isFinite(n)&&n>=0&&(e.terminated?e.terminated=!1:e.terminateTimeout=setTimeout(Ee(_e().mark((function t(){return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return YF=YF.filter((function(t){return t!=e})),t.prev=1,t.next=4,e.terminate();case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,null,[[1,6]])}))),n))}function JF(e){var t=e.terminateTimeout;t&&(clearTimeout(t),e.terminateTimeout=null)}var eB="writable",tB=function(){function e(){u(this,e),this.size=0}return f(e,[{key:"init",value:function(){this.initialized=!0}}]),e}(),nB=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"readable",get:function(){var e=this,t=e.chunkSize,n=void 0===t?65536:t,r=new ReadableStream({start:function(){this.chunkOffset=0},pull:function(t){var i=this;return Ee(_e().mark((function o(){var a,s,l,u,c;return _e().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return a=r.offset,s=void 0===a?0:a,l=r.size,u=r.diskNumberStart,c=i.chunkOffset,o.t0=t,o.next=5,dB(e,s+c,Math.min(n,l-c),u);case 5:o.t1=o.sent,o.t0.enqueue.call(o.t0,o.t1),c+n>l?t.close():i.chunkOffset+=n;case 8:case"end":return o.stop()}}),o)})))()}});return r}}]),n}(tB),rB=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),r=t.call(this),Object.assign(g(r),{blob:e,size:e.size}),r}return f(n,[{key:"readUint8Array",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this,i=t+n,o=t||i<r.size?r.blob.slice(t,i):r.blob,e.next=5,o.arrayBuffer();case 5:return(a=e.sent).byteLength>n&&(a=a.slice(t,i)),e.abrupt("return",new Uint8Array(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(nB),iB=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n);var i=g(r=t.call(this)),o=new TransformStream,a=[];return e&&a.push(["Content-Type",e]),Object.defineProperty(i,eB,{get:function(){return o.writable}}),i.blob=new Response(o.readable,{headers:a}).blob(),r}return f(n,[{key:"getData",value:function(){return this.blob}}]),n}(tB),oB=function(e){v(n,e);var t=y(n);function n(e){return u(this,n),t.call(this,new Blob([e],{type:"text/plain"}))}return f(n)}(rB);var aB=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).readers=e,r}return f(n,[{key:"init",value:function(){var e=Ee(_e().mark((function e(){var t,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this).readers,t.lastDiskNumber=0,t.lastDiskOffset=0,e.next=6,Promise.all(r.map(function(){var e=Ee(_e().mark((function e(n,i){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.init();case 2:i!=r.length-1&&(t.lastDiskOffset+=n.size),t.size+=n.size;case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:jm(m(n.prototype),"init",this).call(this);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"readUint8Array",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i,o,a,s,l,u,c,h,d=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=d.length>2&&void 0!==d[2]?d[2]:0,i=this,o=this.readers,-1==(s=r)&&(s=o.length-1),l=t;l>=o[s].size;)l-=o[s].size,s++;if(u=o[s],c=u.size,!(l+n<=c)){e.next=15;break}return e.next=12,dB(u,l,n);case 12:a=e.sent,e.next=28;break;case 15:return h=c-l,a=new Uint8Array(n),e.t0=a,e.next=20,dB(u,l,h);case 20:return e.t1=e.sent,e.t0.set.call(e.t0,e.t1),e.t2=a,e.next=25,i.readUint8Array(t+h,n-h,r);case 25:e.t3=e.sent,e.t4=h,e.t2.set.call(e.t2,e.t3,e.t4);case 28:return i.lastDiskNumber=Math.max(s,i.lastDiskNumber),e.abrupt("return",a);case 30:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(nB),sB=function(e){v(n,e);var t=y(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4294967295;u(this,n);var o,a,s,l=g(r=t.call(this));Object.assign(l,{diskNumber:0,diskOffset:0,size:0,maxSize:i,availableSize:i});var c=new WritableStream({write:function(t){var n=this;return Ee(_e().mark((function r(){var i,u,c;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=l.availableSize,s){r.next=23;break}return r.next=4,e.next();case 4:if(u=r.sent,c=u.value,!u.done||c){r.next=11;break}throw new Error("Writer iterator completed too soon");case 11:return(o=c).size=0,o.maxSize&&(l.maxSize=o.maxSize),l.availableSize=l.maxSize,r.next=17,lB(o);case 17:a=c.writable,s=a.getWriter();case 19:return r.next=21,n.write(t);case 21:r.next=37;break;case 23:if(!(t.length>=i)){r.next=35;break}return r.next=26,h(t.slice(0,i));case 26:return r.next=28,f();case 28:return l.diskOffset+=o.size,l.diskNumber++,s=null,r.next=33,n.write(t.slice(i));case 33:r.next=37;break;case 35:return r.next=37,h(t);case 37:case"end":return r.stop()}}),r)})))()},close:function(){return Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.ready;case 2:return e.next=4,f();case 4:case"end":return e.stop()}}),e)})))()}});function h(e){return d.apply(this,arguments)}function d(){return(d=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.length)){e.next=9;break}return e.next=4,s.ready;case 4:return e.next=6,s.write(t);case 6:o.size+=n,l.size+=n,l.availableSize-=n;case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return p.apply(this,arguments)}function p(){return(p=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.size=o.size,e.next=3,s.close();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object.defineProperty(l,eB,{get:function(){return c}}),r}return f(n)}(tB);function lB(e,t){return uB.apply(this,arguments)}function uB(){return(uB=Ee(_e().mark((function e(t,n){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.init||t.initialized){e.next=5;break}return e.next=3,t.init(n);case 3:e.next=6;break;case 5:return e.abrupt("return",Promise.resolve());case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cB(e){return Array.isArray(e)&&(e=new aB(e)),e instanceof ReadableStream&&(e={readable:e}),e}function hB(e){e.writable===WD&&typeof e.next==YD&&(e=new sB(e)),e instanceof WritableStream&&(e={writable:e});var t=e.writable;return t.size===WD&&(t.size=0),e instanceof sB||Object.assign(e,{diskNumber:0,diskOffset:0,availableSize:1/0,maxSize:1/0}),e}function dB(e,t,n,r){return e.readUint8Array(t,n,r)}function fB(e){var t,n,r,i=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);i--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new pB(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function pB(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return pB=function(e){this.s=e,this.n=e.next},pB.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new pB(e)}function vB(e,t){this.v=e,this.k=t}function mB(e){return new vB(e,0)}function gB(e){var t,n;function r(t,n){try{var o=e[t](n),a=o.value,s=a instanceof vB;Promise.resolve(s?a.v:a).then((function(n){if(s){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(o.done?"return":"normal",n)}),(function(e){r("throw",e)}))}catch(l){i("throw",l)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise((function(o,a){var s={key:e,arg:i,resolve:o,reject:a,next:null};n?n=n.next=s:(t=n=s,r(e,i))}))},"function"!=typeof e.return&&(this.return=void 0)}function yB(e){return function(){return new gB(e.apply(this,arguments))}}gB.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},gB.prototype.next=function(e){return this._invoke("next",e)},gB.prototype.throw=function(e){return this._invoke("throw",e)},gB.prototype.return=function(e){return this._invoke("return",e)};var bB="\0\u263a\u263b\u2665\u2666\u2663\u2660\u2022\u25d8\u25cb\u25d9\u2642\u2640\u266a\u266b\u263c\u25ba\u25c4\u2195\u203c\xb6\xa7\u25ac\u21a8\u2191\u2193\u2192\u2190\u221f\u2194\u25b2\u25bc !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\u2302\xc7\xfc\xe9\xe2\xe4\xe0\xe5\xe7\xea\xeb\xe8\xef\xee\xec\xc4\xc5\xc9\xe6\xc6\xf4\xf6\xf2\xfb\xf9\xff\xd6\xdc\xa2\xa3\xa5\u20a7\u0192\xe1\xed\xf3\xfa\xf1\xd1\xaa\xba\xbf\u2310\xac\xbd\xbc\xa1\xab\xbb\u2591\u2592\u2593\u2502\u2524\u2561\u2562\u2556\u2555\u2563\u2551\u2557\u255d\u255c\u255b\u2510\u2514\u2534\u252c\u251c\u2500\u253c\u255e\u255f\u255a\u2554\u2569\u2566\u2560\u2550\u256c\u2567\u2568\u2564\u2565\u2559\u2558\u2552\u2553\u256b\u256a\u2518\u250c\u2588\u2584\u258c\u2590\u2580\u03b1\xdf\u0393\u03c0\u03a3\u03c3\xb5\u03c4\u03a6\u0398\u03a9\u03b4\u221e\u03c6\u03b5\u2229\u2261\xb1\u2265\u2264\u2320\u2321\xf7\u2248\xb0\u2219\xb7\u221a\u207f\xb2\u25a0 ".split("");bB.length;var _B,xB="filename",EB="rawFilename",wB="comment",TB="rawComment",SB="uncompressedSize",kB="compressedSize",CB="offset",AB="diskNumberStart",IB="lastModDate",OB="rawLastModDate",PB="lastAccessDate",MB="creationDate",RB="internalFileAttribute",NB="externalFileAttribute",DB="msDosCompatible",LB="zip64",FB=[xB,EB,kB,SB,IB,OB,wB,TB,PB,MB,CB,AB,AB,RB,NB,DB,LB,"directory","bitFlag","encrypted","signature","filenameUTF8","commentUTF8","compressionMethod","version","versionMadeBy","extraField","rawExtraField","extraFieldZip64","extraFieldUnicodePath","extraFieldUnicodeComment","extraFieldAES","extraFieldNTFS","extraFieldExtendedTimestamp"],BB=f((function e(t){var n=this;u(this,e),FB.forEach((function(e){return n[e]=t[e]}))}));b(_B={},pD,{getValue:UB,bytes:4}),b(_B,fD,{getValue:HB,bytes:8});function UB(e,t){return e.getUint32(t,!0)}function HB(e,t){return Number(e.getBigUint64(t,!0))}var jB="Zip file comment exceeds 64KB",zB="File entry comment exceeds 64KB",VB="File entry name exceeds 64KB",GB="Version exceeds 65535",WB="The strength must equal 1, 2, or 3",XB="Extra field type exceeds 65535",YB="Extra field data exceeds 64KB",KB="Zip64 is not supported (make sure 'keepOrder' is set to 'true')",qB=new Uint8Array([7,0,2,0,65,69,3,0,0]),ZB=0,$B=[],QB=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this,e);var r=(t=hB(t)).availableSize!==WD&&t.availableSize>0&&t.availableSize!==1/0&&t.maxSize!==WD&&t.maxSize>0&&t.maxSize!==1/0;Object.assign(this,{writer:t,addSplitZipSignature:r,options:n,config:JD(),files:new Map,filenames:new Set,offset:t.writable.size,pendingEntriesSize:0,pendingAddFileCalls:new Set,bufferedWrites:0})}return f(e,[{key:"add",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i,o,a,s,l,u=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:"",n=u.length>1?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},o=(i=this).pendingAddFileCalls,a=i.config,!(ZB<a.maxWorkers)){e.next=9;break}ZB++,e.next=11;break;case 9:return e.next=11,new Promise((function(e){return $B.push(e)}));case 11:if(e.prev=11,t=t.trim(),!i.filenames.has(t)){e.next=15;break}throw new Error("File already exists");case 15:return i.filenames.add(t),s=JB(i,t,n,r),o.add(s),e.next=20,s;case 20:return e.abrupt("return",e.sent);case 23:throw e.prev=23,e.t0=e.catch(11),i.filenames.delete(t),e.t0;case 27:return e.prev=27,o.delete(s),(l=$B.shift())?l():ZB--,e.finish(27);case 32:case"end":return e.stop()}}),e,this,[[11,23,27,32]])})));return function(){return e.apply(this,arguments)}}()},{key:"close",value:function(){var e=Ee(_e().mark((function e(){var t,n,r,i,o,a,s=arguments;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:new Uint8Array,n=s.length>1&&void 0!==s[1]?s[1]:{},r=this,i=this.pendingAddFileCalls,o=this.writer,a=o.writable;case 5:if(!i.size){e.next=10;break}return e.next=8,Promise.allSettled(Array.from(i));case 8:e.next=5;break;case 10:return e.next=12,dU(this,t,n);case 12:if(gU(r,n,"preventClose")){e.next=16;break}return e.next=16,a.getWriter().close();case 16:return e.abrupt("return",o.getData?o.getData():a);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function JB(e,t,n,r){return eU.apply(this,arguments)}function eU(){return eU=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,Z,$;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=n.trim(),i.directory&&!n.endsWith(zD)?n+=zD:i.directory=n.endsWith(zD),o=gU(t,i,"encodeText",cL),!(SU(a=o(n))>pD)){e.next=6;break}throw new Error(VB);case 6:if(s=i.comment||"",!(SU(l=o(s))>pD)){e.next=10;break}throw new Error(zB);case 10:if(!((u=gU(t,i,"version",UD))>pD)){e.next=13;break}throw new Error(GB);case 13:if(!((c=gU(t,i,"versionMadeBy",20))>pD)){e.next=16;break}throw new Error(GB);case 16:if(h=gU(t,i,IB,new Date),d=gU(t,i,PB),f=gU(t,i,MB),p=gU(t,i,DB,!0),v=gU(t,i,RB,0),m=gU(t,i,NB,0),g=gU(t,i,"password"),y=gU(t,i,"rawPassword"),b=gU(t,i,"encryptionStrength",3),_=gU(t,i,"zipCrypto"),x=gU(t,i,"extendedTimestamp",!0),E=gU(t,i,"keepOrder",!0),w=gU(t,i,"level"),T=gU(t,i,"useWebWorkers"),S=gU(t,i,"bufferedWrite"),k=gU(t,i,"dataDescriptorSignature",!1),C=gU(t,i,"signal"),A=gU(t,i,"useCompressionStream"),I=gU(t,i,"dataDescriptor",!0),O=gU(t,i,LB),g===WD||b===WD||!(b<1||b>3)){e.next=38;break}throw new Error(WB);case 38:if(P=new Uint8Array,(M=i.extraField)&&(R=0,N=0,M.forEach((function(e){return R+=4+SU(e)})),P=new Uint8Array(R),M.forEach((function(e,t){if(t>pD)throw new Error(XB);if(SU(e)>pD)throw new Error(YB);wU(P,new Uint16Array([t]),N),wU(P,new Uint16Array([SU(e)]),N+2),wU(P,e,N+4),N+=4+SU(e)}))),D=0,L=0,F=0,B=!0===O,!r){e.next=50;break}return r=cB(r),e.next=49,lB(r);case 49:r.size===WD?(I=!0,(O||O===WD)&&(O=!0,F=D=fD)):(F=r.size,D=yU(F));case 50:if(U=t.writer,H=U.diskOffset,j=U.diskNumber,z=U.maxSize,V=B||F>=fD,G=B||D>=fD,W=B||t.offset+t.pendingEntriesSize-H>=fD,X=gU(t,i,"supportZip64SplitFile",!0),Y=X&&B||j+Math.ceil(t.pendingEntriesSize/z)>=pD,!(W||V||G||Y)){e.next=62;break}if(!1!==O&&E){e.next=61;break}throw new Error(KB);case 61:O=!0;case 62:return O=O||!1,i=Object.assign({},i,{rawFilename:a,rawComment:l,version:u,versionMadeBy:c,lastModDate:h,lastAccessDate:d,creationDate:f,rawExtraField:P,zip64:O,zip64UncompressedSize:V,zip64CompressedSize:G,zip64Offset:W,zip64DiskNumberStart:Y,password:g,rawPassword:y,level:A||t.config.CompressionStream!==WD?w:0,useWebWorkers:T,encryptionStrength:b,extendedTimestamp:x,zipCrypto:_,bufferedWrite:S,keepOrder:E,dataDescriptor:I,dataDescriptorSignature:k,signal:C,msDosCompatible:p,internalFileAttribute:v,externalFileAttribute:m,useCompressionStream:A}),K=oU(i),q=sU(i),Z=SU(K.localHeaderArray,q.dataDescriptorArray),L=Z+D,t.options.usdz&&(L+=L+64),t.pendingEntriesSize+=L,e.prev=70,e.next=73,tU(t,n,r,{headerInfo:K,dataDescriptorInfo:q,metadataSize:Z},i);case 73:$=e.sent;case 74:return e.prev=74,t.pendingEntriesSize-=L,e.finish(74);case 77:return Object.assign($,{name:n,comment:s,extraField:M}),e.abrupt("return",new BB($));case 79:case"end":return e.stop()}}),e,null,[[70,,74,77]])}))),eU.apply(this,arguments)}function tU(e,t,n,r,i){return nU.apply(this,arguments)}function nU(){return nU=Ee(_e().mark((function e(t,n,r,i,o){var a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(M=function(){return M=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(SU(h.localHeaderArray)>s.availableSize)){e.next=4;break}return s.availableSize=0,e.next=4,pU(t,new Uint8Array);case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)},P=function(e){return M.apply(this,arguments)},O=function(){return(O=Ee(_e().mark((function e(){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.writerLocked=!0,n=t.lockWriter,t.lockWriter=new Promise((function(e){return m=function(){t.writerLocked=!1,e()}})),e.next=5,n;case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)},I=function(){return O.apply(this,arguments)},A=function(){p.lock=new Promise((function(e){return g=e}))},a=t.files,s=t.writer,l=o.keepOrder,u=o.dataDescriptor,c=o.signal,h=i.headerInfo,d=t.options.usdz,f=Array.from(a.values()).pop(),p={},a.set(n,p),e.prev=12,l&&(E=f&&f.lock,A()),!(o.bufferedWrite||t.writerLocked||t.bufferedWrites&&l)&&u||d){e.next=24;break}return _=new TransformStream,x=new Response(_.readable).blob(),_.writable.size=0,v=!0,t.bufferedWrites++,e.next=22,lB(s);case 22:e.next=27;break;case 24:return _=s,e.next=27,I();case 27:return e.next=29,lB(_);case 29:if(w=s.writable,T=s.diskOffset,!t.addSplitZipSignature){e.next=39;break}return delete t.addSplitZipSignature,S=new Uint8Array(4),xU(TU(S),0,bD),e.next=38,pU(w,S);case 38:t.offset+=4;case 39:if(d&&aU(i,t.offset-T),v){e.next=45;break}return e.next=43,E;case 43:return e.next=45,P(w);case 45:return k=s.diskNumber,b=!0,p.diskNumberStart=k,e.next=50,rU(r,_,p,i,t.config,o);case 50:if(p=e.sent,b=!1,a.set(n,p),p.filename=n,!v){e.next=77;break}return e.next=57,_.writable.getWriter().close();case 57:return e.next=59,x;case 59:return C=e.sent,e.next=62,E;case 62:return e.next=64,I();case 64:if(y=!0,u){e.next=69;break}return e.next=68,uU(p,C,w,o);case 68:C=e.sent;case 69:return e.next=71,P(w);case 71:return p.diskNumberStart=s.diskNumber,T=s.diskOffset,e.next=75,C.stream().pipeTo(w,{preventClose:!0,preventAbort:!0,signal:c});case 75:w.size+=C.size,y=!1;case 77:if(p.offset=t.offset-T,!p.zip64){e.next=82;break}hU(p,o),e.next=84;break;case 82:if(!(p.offset>=fD)){e.next=84;break}throw new Error(KB);case 84:return t.offset+=p.size,e.abrupt("return",p);case 88:if(e.prev=88,e.t0=e.catch(12),v&&y||!v&&b){if(t.hasCorruptedEntries=!0,e.t0)try{e.t0.corruptedEntry=!0}catch(r3){}v?t.offset+=_.writable.size:t.offset=_.writable.size}throw a.delete(n),e.t0;case 93:return e.prev=93,v&&t.bufferedWrites--,g&&g(),m&&m(),e.finish(93);case 98:case"end":return e.stop()}}),e,null,[[12,88,93,98]])}))),nU.apply(this,arguments)}function rU(e,t,n,r,i,o){return iU.apply(this,arguments)}function iU(){return iU=Ee(_e().mark((function e(t,n,r,i,o,a){var s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,Z,$,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ue;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=r.diskNumberStart,l=r.lock,u=i.headerInfo,c=i.dataDescriptorInfo,h=i.metadataSize,d=u.localHeaderArray,f=u.headerArray,p=u.lastModDate,v=u.rawLastModDate,m=u.encrypted,g=u.compressed,y=u.version,b=u.compressionMethod,_=u.rawExtraFieldExtendedTimestamp,x=u.extraFieldExtendedTimestampFlag,E=u.rawExtraFieldNTFS,w=u.rawExtraFieldAES,T=c.dataDescriptorArray,S=a.rawFilename,k=a.lastAccessDate,C=a.creationDate,A=a.password,I=a.rawPassword,O=a.level,P=a.zip64,M=a.zip64UncompressedSize,R=a.zip64CompressedSize,N=a.zip64Offset,D=a.zip64DiskNumberStart,L=a.zipCrypto,F=a.dataDescriptor,B=a.directory,U=a.versionMadeBy,H=a.rawComment,j=a.rawExtraField,z=a.useWebWorkers,V=a.onstart,G=a.onprogress,W=a.onend,X=a.signal,Y=a.encryptionStrength,K=a.extendedTimestamp,q=a.msDosCompatible,Z=a.internalFileAttribute,$=a.externalFileAttribute,Q=a.useCompressionStream,J={lock:l,versionMadeBy:U,zip64:P,directory:Boolean(B),filenameUTF8:!0,rawFilename:S,commentUTF8:!0,rawComment:H,rawExtraFieldExtendedTimestamp:_,rawExtraFieldNTFS:E,rawExtraFieldAES:w,rawExtraField:j,extendedTimestamp:K,msDosCompatible:q,internalFileAttribute:Z,externalFileAttribute:$,diskNumberStart:s},ee=0,te=0,re=n.writable,!t){e.next=25;break}return t.chunkSize=eL(o),e.next=13,pU(re,d);case 13:return ie=t.readable,oe=ie.size=t.size,ae={options:{codecType:IF,level:O,rawPassword:I,password:A,encryptionStrength:Y,zipCrypto:m&&L,passwordVerification:m&&L&&v>>8&255,signed:!0,compressed:g,encrypted:m,useWebWorkers:z,useCompressionStream:Q,transferStreams:!1},config:o,streamOptions:{signal:X,size:oe,onstart:V,onprogress:G,onend:W}},e.next=18,ZF({readable:ie,writable:re},ae);case 18:se=e.sent,te=se.inputSize,ee=se.outputSize,ne=se.signature,re.size+=te,e.next=27;break;case 25:return e.next=27,pU(re,d);case 27:if(P?(ue=4,M&&(ue+=8),R&&(ue+=8),N&&(ue+=8),D&&(ue+=4),le=new Uint8Array(ue)):le=new Uint8Array,lU({signature:ne,rawExtraFieldZip64:le,compressedSize:ee,uncompressedSize:te,headerInfo:u,dataDescriptorInfo:c},a),!F){e.next=32;break}return e.next=32,pU(re,T);case 32:return Object.assign(J,{uncompressedSize:te,compressedSize:ee,lastModDate:p,rawLastModDate:v,creationDate:C,lastAccessDate:k,encrypted:m,size:h+ee,compressionMethod:b,version:y,headerArray:f,signature:ne,rawExtraFieldZip64:le,extraFieldExtendedTimestampFlag:x,zip64UncompressedSize:M,zip64CompressedSize:R,zip64Offset:N,zip64DiskNumberStart:D}),e.abrupt("return",J);case 34:case"end":return e.stop()}}),e)}))),iU.apply(this,arguments)}function oU(e){var t,n,r,i,o=e.rawFilename,a=e.lastModDate,s=e.lastAccessDate,l=e.creationDate,u=e.rawPassword,c=e.password,h=e.level,d=e.zip64,f=e.zipCrypto,p=e.dataDescriptor,v=e.directory,m=e.rawExtraField,g=e.encryptionStrength,y=e.extendedTimestamp,b=0!==h&&!v,_=Boolean(c&&SU(c)||u&&SU(u)),x=e.version;if(_&&!f){var E=TU(t=new Uint8Array(SU(qB)+2));_U(E,0,OD),wU(t,qB,2),bU(E,8,g)}else t=new Uint8Array;if(y){var w=TU(r=new Uint8Array(9+(s?4:0)+(l?4:0)));_U(w,0,RD),_U(w,2,SU(r)-4),bU(w,4,i=1+(s?2:0)+(l?4:0));var T=5;xU(w,T,Math.floor(a.getTime()/1e3)),T+=4,s&&(xU(w,T,Math.floor(s.getTime()/1e3)),T+=4),l&&xU(w,T,Math.floor(l.getTime()/1e3));try{var S=TU(n=new Uint8Array(36)),k=mU(a);_U(S,0,PD),_U(S,2,32),_U(S,8,MD),_U(S,10,24),EU(S,12,k),EU(S,20,mU(s)||k),EU(S,28,mU(l)||k)}catch(r3){n=new Uint8Array}}else n=r=new Uint8Array;var C=FD;p&&(C|=LD);var A=mD;b&&(A=vD),d&&(x=x>HD?x:HD),_&&(C|=DD,f||(x=x>jD?x:jD,A=gD,b&&(t[9]=vD)));var I=new Uint8Array(26),O=TU(I);_U(O,0,x),_U(O,2,C),_U(O,4,A);var P,M=new Uint32Array(1),R=TU(M);_U(R,0,((P=a<GD?GD:a>VD?VD:a).getHours()<<6|P.getMinutes())<<5|P.getSeconds()/2),_U(R,2,(P.getFullYear()-1980<<4|P.getMonth()+1)<<5|P.getDate());var N=M[0];xU(O,6,N),_U(O,22,SU(o));var D=SU(t,r,n,m);_U(O,24,D);var L=new Uint8Array(30+SU(o)+D);return xU(TU(L),0,yD),wU(L,I,4),wU(L,o,30),wU(L,t,30+SU(o)),wU(L,r,30+SU(o,t)),wU(L,n,30+SU(o,t,r)),wU(L,m,30+SU(o,t,r,n)),{localHeaderArray:L,headerArray:I,headerView:O,lastModDate:a,rawLastModDate:N,encrypted:_,compressed:b,version:x,compressionMethod:A,extraFieldExtendedTimestampFlag:i,rawExtraFieldExtendedTimestamp:r,rawExtraFieldNTFS:n,rawExtraFieldAES:t,extraFieldLength:D}}function aU(e,t){var n=e.headerInfo,r=n.localHeaderArray,i=n.extraFieldLength,o=(TU(r),64-(t+SU(r))%64);o<4&&(o+=64);var a=new Uint8Array(o),s=TU(a);_U(s,0,ND),_U(s,2,o-2);var l=r;n.localHeaderArray=r=new Uint8Array(SU(l)+o),wU(r,l),wU(r,a,SU(l)),_U(TU(r),28,i+o),e.metadataSize+=o}function sU(e){var t,n=e.zip64,r=e.dataDescriptor,i=e.dataDescriptorSignature,o=new Uint8Array,a=0;return r&&(t=TU(o=new Uint8Array(n?i?24:20:i?16:12)),i&&(a=4,xU(t,0,_D))),{dataDescriptorArray:o,dataDescriptorView:t,dataDescriptorOffset:a}}function lU(e,t){var n=e.signature,r=e.rawExtraFieldZip64,i=e.compressedSize,o=e.uncompressedSize,a=e.headerInfo,s=e.dataDescriptorInfo,l=a.headerView,u=a.encrypted,c=s.dataDescriptorView,h=s.dataDescriptorOffset,d=t.zip64,f=t.zip64UncompressedSize,p=t.zip64CompressedSize,v=t.zipCrypto,m=t.dataDescriptor;if(u&&!v||n===WD||(xU(l,10,n),m&&xU(c,h,n)),d){var g=TU(r);_U(g,0,ID),_U(g,2,SU(r)-4);var y=4;f&&(xU(l,18,fD),EU(g,y,BigInt(o)),y+=8),p&&(xU(l,14,fD),EU(g,y,BigInt(i))),m&&(EU(c,h+4,BigInt(i)),EU(c,h+12,BigInt(o)))}else xU(l,14,i),xU(l,18,o),m&&(xU(c,h+4,i),xU(c,h+8,o))}function uU(e,t,n,r){return cU.apply(this,arguments)}function cU(){return(cU=Ee(_e().mark((function e(t,n,r,i){var o,a,s;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=i.zipCrypto,e.next=3,n.slice(0,26).arrayBuffer();case 3:return 26!=(a=e.sent).byteLength&&(a=a.slice(0,26)),s=new DataView(a),t.encrypted&&!o||xU(s,14,t.signature),t.zip64?(xU(s,18,fD),xU(s,22,fD)):(xU(s,18,t.compressedSize),xU(s,22,t.uncompressedSize)),e.next=10,pU(r,new Uint8Array(a));case 10:return e.abrupt("return",n.slice(a.byteLength));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hU(e,t){var n=e.rawExtraFieldZip64,r=e.offset,i=e.diskNumberStart,o=t.zip64UncompressedSize,a=t.zip64CompressedSize,s=t.zip64Offset,l=t.zip64DiskNumberStart,u=TU(n),c=4;o&&(c+=8),a&&(c+=8),s&&(EU(u,c,BigInt(r)),c+=8),l&&xU(u,c,i)}function dU(e,t,n){return fU.apply(this,arguments)}function fU(){return fU=Ee(_e().mark((function e(t,n,r){var i,o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D,L,F,B,U,H,j,z,V,G,W,X,Y,K,q,Z,$,Q,J,ee,te,ne,re,ie,oe,ae,se,le,ue,ce,he;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=t.files,o=t.writer,a=o.diskOffset,s=o.writable,l=o.diskNumber,u=0,c=0,h=t.offset-a,d=i.size,f=wb(i);try{for(f.s();!(p=f.n()).done;)v=Pt(p.value,2),m=v[1],g=m.rawFilename,y=m.rawExtraFieldZip64,b=m.rawExtraFieldAES,_=m.rawComment,x=m.rawExtraFieldNTFS,E=m.rawExtraField,w=m.extendedTimestamp,T=m.extraFieldExtendedTimestampFlag,S=m.lastModDate,k=void 0,w?(k=new Uint8Array(9),_U(C=TU(k),0,RD),_U(C,2,5),bU(C,4,T),xU(C,5,Math.floor(S.getTime()/1e3))):k=new Uint8Array,m.rawExtraFieldCDExtendedTimestamp=k,c+=46+SU(g,_,y,b,x,k,E)}catch(de){f.e(de)}finally{f.f()}return A=new Uint8Array(c),I=TU(A),e.next=13,lB(o);case 13:O=0,P=wb(Array.from(i.values()).entries()),e.prev=15,P.s();case 17:if((M=P.n()).done){e.next=57;break}if(R=Pt(M.value,2),N=R[0],D=R[1],L=D.offset,F=D.rawFilename,B=D.rawExtraFieldZip64,U=D.rawExtraFieldAES,H=D.rawExtraFieldCDExtendedTimestamp,j=D.rawExtraFieldNTFS,z=D.rawExtraField,V=D.rawComment,G=D.versionMadeBy,W=D.headerArray,X=D.directory,Y=D.zip64,K=D.zip64UncompressedSize,q=D.zip64CompressedSize,Z=D.zip64DiskNumberStart,$=D.zip64Offset,Q=D.msDosCompatible,J=D.internalFileAttribute,ee=D.externalFileAttribute,te=D.diskNumberStart,ne=D.uncompressedSize,re=D.compressedSize,ie=SU(B,U,H,j,z),xU(I,u,xD),_U(I,u+4,G),oe=TU(W),K||xU(oe,18,ne),q||xU(oe,14,re),wU(A,W,u+6),_U(I,u+30,ie),_U(I,u+32,SU(V)),_U(I,u+34,Y&&Z?pD:te),_U(I,u+36,J),ee?xU(I,u+38,ee):X&&Q&&bU(I,u+38,BD),xU(I,u+42,Y&&$?fD:L),wU(A,F,u+46),wU(A,B,u+46+SU(F)),wU(A,U,u+46+SU(F,B)),wU(A,H,u+46+SU(F,B,U)),wU(A,j,u+46+SU(F,B,U,H)),wU(A,z,u+46+SU(F,B,U,H,j)),wU(A,V,u+46+SU(F)+ie),ae=46+SU(F,V)+ie,!(u-O>o.availableSize)){e.next=46;break}return o.availableSize=0,e.next=45,pU(s,A.slice(O,u));case 45:O=u;case 46:if(u+=ae,!r.onprogress){e.next=55;break}return e.prev=48,e.next=51,r.onprogress(N+1,i.size,new BB(D));case 51:e.next=55;break;case 53:e.prev=53,e.t0=e.catch(48);case 55:e.next=17;break;case 57:e.next=62;break;case 59:e.prev=59,e.t1=e.catch(15),P.e(e.t1);case 62:return e.prev=62,P.f(),e.finish(62);case 65:return e.next=67,pU(s,O?A.slice(O):A);case 67:if(se=o.diskNumber,o.availableSize<SD&&se++,le=gU(t,r,"zip64"),!(h>=fD||c>=fD||d>=pD||se>=pD)){e.next=77;break}if(!1!==le){e.next=76;break}throw new Error(KB);case 76:le=!0;case 77:if(ue=new Uint8Array(le?AD:SD),ce=TU(ue),u=0,le&&(xU(ce,0,wD),EU(ce,4,BigInt(44)),_U(ce,12,45),_U(ce,14,45),xU(ce,16,se),xU(ce,20,l),EU(ce,24,BigInt(d)),EU(ce,32,BigInt(d)),EU(ce,40,BigInt(c)),EU(ce,48,BigInt(h)),xU(ce,56,TD),EU(ce,64,BigInt(h)+BigInt(c)),xU(ce,72,se+1),gU(t,r,"supportZip64SplitFile",!0)&&(se=pD,l=pD),d=pD,h=fD,c=fD,u+=CD+kD),xU(ce,u,ED),_U(ce,u+4,se),_U(ce,u+6,l),_U(ce,u+8,d),_U(ce,u+10,d),xU(ce,u+12,c),xU(ce,u+16,h),!(he=SU(n))){e.next=95;break}if(!(he<=pD)){e.next=94;break}_U(ce,u+20,he),e.next=95;break;case 94:throw new Error(jB);case 95:return e.next=97,pU(s,ue);case 97:if(!he){e.next=100;break}return e.next=100,pU(s,n);case 100:case"end":return e.stop()}}),e,null,[[15,59,62,65],[48,53]])}))),fU.apply(this,arguments)}function pU(e,t){return vU.apply(this,arguments)}function vU(){return vU=Ee(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.getWriter(),e.prev=1,e.next=4,r.ready;case 4:return t.size+=SU(n),e.next=7,r.write(n);case 7:return e.prev=7,r.releaseLock(),e.finish(7);case 10:case"end":return e.stop()}}),e,null,[[1,,7,10]])}))),vU.apply(this,arguments)}function mU(e){if(e)return(BigInt(e.getTime())+BigInt(116444736e5))*BigInt(1e4)}function gU(e,t,n,r){var i=t[n]===WD?e.options[n]:t[n];return i===WD?r:i}function yU(e){return e+5*(Math.floor(e/16383)+1)}function bU(e,t,n){e.setUint8(t,n)}function _U(e,t,n){e.setUint16(t,n,!0)}function xU(e,t,n){e.setUint32(t,n,!0)}function EU(e,t,n){e.setBigUint64(t,n,!0)}function wU(e,t,n){e.set(t,n)}function TU(e){return new DataView(e.buffer)}function SU(){for(var e=0,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach((function(t){return t&&(e+=t.length)})),e}var kU;try{kU="file:///D:/sukui/work2023/dragonbones-web/node_modules/@zip.js/zip.js/lib/zip-fs.js"}catch(r3){}function CU(e){if(e)for(;e.childElementCount;)e.firstChild&&e.removeChild(e.firstChild)}function AU(e,t){var n=JSON.stringify(e),r=new Blob([n],{type:"application/json"}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,o.click(),URL.revokeObjectURL(i)}function IU(e,t){var n=URL.createObjectURL(e),r=document.createElement("a");r.href=n,r.download=t,r.click(),URL.revokeObjectURL(n)}function OU(e,t,n){var r=new Blob([e],{type:n}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=t,o.click(),URL.revokeObjectURL(i)}function PU(e,t){return MU.apply(this,arguments)}function MU(){return(MU=Ee(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new iB("application/zip"),i=new QB(r,{bufferedWrite:!0}),t.forEach((function(e){"json"===e.type?i.add(e.name,new oB(JSON.stringify(e.data))):i.add(e.name,new rB(new Blob([e.data])))})),e.next=5,i.close();case 5:return e.next=7,r.getData();case 7:OU(e.sent,"".concat(n,".zip"),"application/zip");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function RU(e){return NU.apply(this,arguments)}function NU(){return NU=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new FileReader;r.onload=function(){e(r.result)},r.onerror=function(e){n(e)},r.readAsDataURL(t)})));case 1:case"end":return e.stop()}}),e)}))),NU.apply(this,arguments)}tL({baseURL:kU}),function(e){var t=function(){return URL.createObjectURL(new Blob(['const{Array:e,Object:t,Number:n,Math:r,Error:s,Uint8Array:i,Uint16Array:o,Uint32Array:c,Int32Array:f,Map:a,DataView:l,Promise:u,TextEncoder:w,crypto:h,postMessage:d,TransformStream:p,ReadableStream:y,WritableStream:m,CompressionStream:b,DecompressionStream:g}=self,k=void 0,v="undefined",S="function";class z{constructor(e){return class extends p{constructor(t,n){const r=new e(n);super({transform(e,t){t.enqueue(r.append(e))},flush(e){const t=r.flush();t&&e.enqueue(t)}})}}}}const C=[];for(let e=0;256>e;e++){let t=e;for(let e=0;8>e;e++)1&t?t=t>>>1^3988292384:t>>>=1;C[e]=t}class x{constructor(e){this.t=e||-1}append(e){let t=0|this.t;for(let n=0,r=0|e.length;r>n;n++)t=t>>>8^C[255&(t^e[n])];this.t=t}get(){return~this.t}}class A extends p{constructor(){let e;const t=new x;super({transform(e,n){t.append(e),n.enqueue(e)},flush(){const n=new i(4);new l(n.buffer).setUint32(0,t.get()),e.value=n}}),e=this}}const _={concat(e,t){if(0===e.length||0===t.length)return e.concat(t);const n=e[e.length-1],r=_.i(n);return 32===r?e.concat(t):_.o(t,r,0|n,e.slice(0,e.length-1))},l(e){const t=e.length;if(0===t)return 0;const n=e[t-1];return 32*(t-1)+_.i(n)},u(e,t){if(32*e.length<t)return e;const n=(e=e.slice(0,r.ceil(t/32))).length;return t&=31,n>0&&t&&(e[n-1]=_.h(t,e[n-1]&2147483648>>t-1,1)),e},h:(e,t,n)=>32===e?t:(n?0|t:t<<32-e)+1099511627776*e,i:e=>r.round(e/1099511627776)||32,o(e,t,n,r){for(void 0===r&&(r=[]);t>=32;t-=32)r.push(n),n=0;if(0===t)return r.concat(e);for(let s=0;s<e.length;s++)r.push(n|e[s]>>>t),n=e[s]<<32-t;const s=e.length?e[e.length-1]:0,i=_.i(s);return r.push(_.h(t+i&31,t+i>32?n:r.pop(),1)),r}},I={p:{m(e){const t=_.l(e)/8,n=new i(t);let r;for(let s=0;t>s;s++)3&s||(r=e[s/4]),n[s]=r>>>24,r<<=8;return n},k(e){const t=[];let n,r=0;for(n=0;n<e.length;n++)r=r<<8|e[n],3&~n||(t.push(r),r=0);return 3&n&&t.push(_.h(8*(3&n),r)),t}}},P=class{constructor(e){const t=this;t.blockSize=512,t.v=[1732584193,4023233417,2562383102,271733878,3285377520],t.S=[1518500249,1859775393,2400959708,3395469782],e?(t.C=e.C.slice(0),t.A=e.A.slice(0),t._=e._):t.reset()}reset(){const e=this;return e.C=e.v.slice(0),e.A=[],e._=0,e}update(e){const t=this;"string"==typeof e&&(e=I.I.k(e));const n=t.A=_.concat(t.A,e),r=t._,i=t._=r+_.l(e);if(i>9007199254740991)throw new s("Cannot hash more than 2^53 - 1 bits");const o=new c(n);let f=0;for(let e=t.blockSize+r-(t.blockSize+r&t.blockSize-1);i>=e;e+=t.blockSize)t.P(o.subarray(16*f,16*(f+1))),f+=1;return n.splice(0,16*f),t}D(){const e=this;let t=e.A;const n=e.C;t=_.concat(t,[_.h(1,1)]);for(let e=t.length+2;15&e;e++)t.push(0);for(t.push(r.floor(e._/4294967296)),t.push(0|e._);t.length;)e.P(t.splice(0,16));return e.reset(),n}V(e,t,n,r){return e>19?e>39?e>59?e>79?void 0:t^n^r:t&n|t&r|n&r:t^n^r:t&n|~t&r}R(e,t){return t<<e|t>>>32-e}P(t){const n=this,s=n.C,i=e(80);for(let e=0;16>e;e++)i[e]=t[e];let o=s[0],c=s[1],f=s[2],a=s[3],l=s[4];for(let e=0;79>=e;e++){16>e||(i[e]=n.R(1,i[e-3]^i[e-8]^i[e-14]^i[e-16]));const t=n.R(5,o)+n.V(e,c,f,a)+l+i[e]+n.S[r.floor(e/20)]|0;l=a,a=f,f=n.R(30,c),c=o,o=t}s[0]=s[0]+o|0,s[1]=s[1]+c|0,s[2]=s[2]+f|0,s[3]=s[3]+a|0,s[4]=s[4]+l|0}},D={getRandomValues(e){const t=new c(e.buffer),n=e=>{let t=987654321;const n=4294967295;return()=>(t=36969*(65535&t)+(t>>16)&n,(((t<<16)+(e=18e3*(65535&e)+(e>>16)&n)&n)/4294967296+.5)*(r.random()>.5?1:-1))};for(let s,i=0;i<e.length;i+=4){const e=n(4294967296*(s||r.random()));s=987654071*e(),t[i/4]=4294967296*e()|0}return e}},V={importKey:e=>new V.B(I.p.k(e)),M(e,t,n,r){if(n=n||1e4,0>r||0>n)throw new s("invalid params to pbkdf2");const i=1+(r>>5)<<2;let o,c,f,a,u;const w=new ArrayBuffer(i),h=new l(w);let d=0;const p=_;for(t=I.p.k(t),u=1;(i||1)>d;u++){for(o=c=e.encrypt(p.concat(t,[u])),f=1;n>f;f++)for(c=e.encrypt(c),a=0;a<c.length;a++)o[a]^=c[a];for(f=0;(i||1)>d&&f<o.length;f++)h.setInt32(d,o[f]),d+=4}return w.slice(0,r/8)},B:class{constructor(e){const t=this,n=t.U=P,r=[[],[]];t.K=[new n,new n];const s=t.K[0].blockSize/32;e.length>s&&(e=(new n).update(e).D());for(let t=0;s>t;t++)r[0][t]=909522486^e[t],r[1][t]=1549556828^e[t];t.K[0].update(r[0]),t.K[1].update(r[1]),t.N=new n(t.K[0])}reset(){const e=this;e.N=new e.U(e.K[0]),e.O=!1}update(e){this.O=!0,this.N.update(e)}digest(){const e=this,t=e.N.D(),n=new e.U(e.K[1]).update(t).D();return e.reset(),n}encrypt(e){if(this.O)throw new s("encrypt on already updated hmac called!");return this.update(e),this.digest(e)}}},R=typeof h!=v&&typeof h.getRandomValues==S,B="Invalid password",E="Invalid signature",M="zipjs-abort-check-password";function U(e){return R?h.getRandomValues(e):D.getRandomValues(e)}const K=16,N={name:"PBKDF2"},O=t.assign({hash:{name:"HMAC"}},N),T=t.assign({iterations:1e3,hash:{name:"SHA-1"}},N),W=["deriveBits"],j=[8,12,16],H=[16,24,32],L=10,F=[0,0,0,0],q=typeof h!=v,G=q&&h.subtle,J=q&&typeof G!=v,Q=I.p,X=class{constructor(e){const t=this;t.T=[[[],[],[],[],[]],[[],[],[],[],[]]],t.T[0][0][0]||t.W();const n=t.T[0][4],r=t.T[1],i=e.length;let o,c,f,a=1;if(4!==i&&6!==i&&8!==i)throw new s("invalid aes key size");for(t.S=[c=e.slice(0),f=[]],o=i;4*i+28>o;o++){let e=c[o-1];(o%i==0||8===i&&o%i==4)&&(e=n[e>>>24]<<24^n[e>>16&255]<<16^n[e>>8&255]<<8^n[255&e],o%i==0&&(e=e<<8^e>>>24^a<<24,a=a<<1^283*(a>>7))),c[o]=c[o-i]^e}for(let e=0;o;e++,o--){const t=c[3&e?o:o-4];f[e]=4>=o||4>e?t:r[0][n[t>>>24]]^r[1][n[t>>16&255]]^r[2][n[t>>8&255]]^r[3][n[255&t]]}}encrypt(e){return this.j(e,0)}decrypt(e){return this.j(e,1)}W(){const e=this.T[0],t=this.T[1],n=e[4],r=t[4],s=[],i=[];let o,c,f,a;for(let e=0;256>e;e++)i[(s[e]=e<<1^283*(e>>7))^e]=e;for(let l=o=0;!n[l];l^=c||1,o=i[o]||1){let i=o^o<<1^o<<2^o<<3^o<<4;i=i>>8^255&i^99,n[l]=i,r[i]=l,a=s[f=s[c=s[l]]];let u=16843009*a^65537*f^257*c^16843008*l,w=257*s[i]^16843008*i;for(let n=0;4>n;n++)e[n][l]=w=w<<24^w>>>8,t[n][i]=u=u<<24^u>>>8}for(let n=0;5>n;n++)e[n]=e[n].slice(0),t[n]=t[n].slice(0)}j(e,t){if(4!==e.length)throw new s("invalid aes block size");const n=this.S[t],r=n.length/4-2,i=[0,0,0,0],o=this.T[t],c=o[0],f=o[1],a=o[2],l=o[3],u=o[4];let w,h,d,p=e[0]^n[0],y=e[t?3:1]^n[1],m=e[2]^n[2],b=e[t?1:3]^n[3],g=4;for(let e=0;r>e;e++)w=c[p>>>24]^f[y>>16&255]^a[m>>8&255]^l[255&b]^n[g],h=c[y>>>24]^f[m>>16&255]^a[b>>8&255]^l[255&p]^n[g+1],d=c[m>>>24]^f[b>>16&255]^a[p>>8&255]^l[255&y]^n[g+2],b=c[b>>>24]^f[p>>16&255]^a[y>>8&255]^l[255&m]^n[g+3],g+=4,p=w,y=h,m=d;for(let e=0;4>e;e++)i[t?3&-e:e]=u[p>>>24]<<24^u[y>>16&255]<<16^u[m>>8&255]<<8^u[255&b]^n[g++],w=p,p=y,y=m,m=b,b=w;return i}},Y=class{constructor(e,t){this.H=e,this.L=t,this.F=t}reset(){this.F=this.L}update(e){return this.q(this.H,e,this.F)}G(e){if(255&~(e>>24))e+=1<<24;else{let t=e>>16&255,n=e>>8&255,r=255&e;255===t?(t=0,255===n?(n=0,255===r?r=0:++r):++n):++t,e=0,e+=t<<16,e+=n<<8,e+=r}return e}J(e){0===(e[0]=this.G(e[0]))&&(e[1]=this.G(e[1]))}q(e,t,n){let r;if(!(r=t.length))return[];const s=_.l(t);for(let s=0;r>s;s+=4){this.J(n);const r=e.encrypt(n);t[s]^=r[0],t[s+1]^=r[1],t[s+2]^=r[2],t[s+3]^=r[3]}return _.u(t,s)}},Z=V.B;let $=q&&J&&typeof G.importKey==S,ee=q&&J&&typeof G.deriveBits==S;class te extends p{constructor({password:e,rawPassword:n,signed:r,encryptionStrength:o,checkPasswordOnly:c}){super({start(){t.assign(this,{ready:new u((e=>this.X=e)),password:ie(e,n),signed:r,Y:o-1,pending:new i})},async transform(e,t){const n=this,{password:r,Y:o,X:f,ready:a}=n;r?(await(async(e,t,n,r)=>{const i=await se(e,t,n,ce(r,0,j[t])),o=ce(r,j[t]);if(i[0]!=o[0]||i[1]!=o[1])throw new s(B)})(n,o,r,ce(e,0,j[o]+2)),e=ce(e,j[o]+2),c?t.error(new s(M)):f()):await a;const l=new i(e.length-L-(e.length-L)%K);t.enqueue(re(n,e,l,0,L,!0))},async flush(e){const{signed:t,Z:n,$:r,pending:o,ready:c}=this;if(r&&n){await c;const f=ce(o,0,o.length-L),a=ce(o,o.length-L);let l=new i;if(f.length){const e=ae(Q,f);r.update(e);const t=n.update(e);l=fe(Q,t)}if(t){const e=ce(fe(Q,r.digest()),0,L);for(let t=0;L>t;t++)if(e[t]!=a[t])throw new s(E)}e.enqueue(l)}}})}}class ne extends p{constructor({password:e,rawPassword:n,encryptionStrength:r}){let s;super({start(){t.assign(this,{ready:new u((e=>this.X=e)),password:ie(e,n),Y:r-1,pending:new i})},async transform(e,t){const n=this,{password:r,Y:s,X:o,ready:c}=n;let f=new i;r?(f=await(async(e,t,n)=>{const r=U(new i(j[t]));return oe(r,await se(e,t,n,r))})(n,s,r),o()):await c;const a=new i(f.length+e.length-e.length%K);a.set(f,0),t.enqueue(re(n,e,a,f.length,0))},async flush(e){const{Z:t,$:n,pending:r,ready:o}=this;if(n&&t){await o;let c=new i;if(r.length){const e=t.update(ae(Q,r));n.update(e),c=fe(Q,e)}s.signature=fe(Q,n.digest()).slice(0,L),e.enqueue(oe(c,s.signature))}}}),s=this}}function re(e,t,n,r,s,o){const{Z:c,$:f,pending:a}=e,l=t.length-s;let u;for(a.length&&(t=oe(a,t),n=((e,t)=>{if(t&&t>e.length){const n=e;(e=new i(t)).set(n,0)}return e})(n,l-l%K)),u=0;l-K>=u;u+=K){const e=ae(Q,ce(t,u,u+K));o&&f.update(e);const s=c.update(e);o||f.update(s),n.set(fe(Q,s),u+r)}return e.pending=ce(t,u),n}async function se(n,r,s,o){n.password=null;const c=await(async(e,t,n,r,s)=>{if(!$)return V.importKey(t);try{return await G.importKey("raw",t,n,!1,s)}catch(e){return $=!1,V.importKey(t)}})(0,s,O,0,W),f=await(async(e,t,n)=>{if(!ee)return V.M(t,e.salt,T.iterations,n);try{return await G.deriveBits(e,t,n)}catch(r){return ee=!1,V.M(t,e.salt,T.iterations,n)}})(t.assign({salt:o},T),c,8*(2*H[r]+2)),a=new i(f),l=ae(Q,ce(a,0,H[r])),u=ae(Q,ce(a,H[r],2*H[r])),w=ce(a,2*H[r]);return t.assign(n,{keys:{key:l,ee:u,passwordVerification:w},Z:new Y(new X(l),e.from(F)),$:new Z(u)}),w}function ie(e,t){return t===k?(e=>{if(typeof w==v){const t=new i((e=unescape(encodeURIComponent(e))).length);for(let n=0;n<t.length;n++)t[n]=e.charCodeAt(n);return t}return(new w).encode(e)})(e):t}function oe(e,t){let n=e;return e.length+t.length&&(n=new i(e.length+t.length),n.set(e,0),n.set(t,e.length)),n}function ce(e,t,n){return e.subarray(t,n)}function fe(e,t){return e.m(t)}function ae(e,t){return e.k(t)}class le extends p{constructor({password:e,passwordVerification:n,checkPasswordOnly:r}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;if(n.password){const t=we(n,e.subarray(0,12));if(n.password=null,t[11]!=n.passwordVerification)throw new s(B);e=e.subarray(12)}r?t.error(new s(M)):t.enqueue(we(n,e))}})}}class ue extends p{constructor({password:e,passwordVerification:n}){super({start(){t.assign(this,{password:e,passwordVerification:n}),de(this,e)},transform(e,t){const n=this;let r,s;if(n.password){n.password=null;const t=U(new i(12));t[11]=n.passwordVerification,r=new i(e.length+t.length),r.set(he(n,t),0),s=12}else r=new i(e.length),s=0;r.set(he(n,e),s),t.enqueue(r)}})}}function we(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,n[r]);return n}function he(e,t){const n=new i(t.length);for(let r=0;r<t.length;r++)n[r]=ye(e)^t[r],pe(e,t[r]);return n}function de(e,n){const r=[305419896,591751049,878082192];t.assign(e,{keys:r,te:new x(r[0]),ne:new x(r[2])});for(let t=0;t<n.length;t++)pe(e,n.charCodeAt(t))}function pe(e,t){let[n,s,i]=e.keys;e.te.append([t]),n=~e.te.get(),s=be(r.imul(be(s+me(n)),134775813)+1),e.ne.append([s>>>24]),i=~e.ne.get(),e.keys=[n,s,i]}function ye(e){const t=2|e.keys[2];return me(r.imul(t,1^t)>>>8)}function me(e){return 255&e}function be(e){return 4294967295&e}const ge="deflate-raw";class ke extends p{constructor(e,{chunkSize:t,CompressionStream:n,CompressionStreamNative:r}){super({});const{compressed:s,encrypted:i,useCompressionStream:o,zipCrypto:c,signed:f,level:a}=e,u=this;let w,h,d=Se(super.readable);i&&!c||!f||(w=new A,d=xe(d,w)),s&&(d=Ce(d,o,{level:a,chunkSize:t},r,n)),i&&(c?d=xe(d,new ue(e)):(h=new ne(e),d=xe(d,h))),ze(u,d,(()=>{let e;i&&!c&&(e=h.signature),i&&!c||!f||(e=new l(w.value.buffer).getUint32(0)),u.signature=e}))}}class ve extends p{constructor(e,{chunkSize:t,DecompressionStream:n,DecompressionStreamNative:r}){super({});const{zipCrypto:i,encrypted:o,signed:c,signature:f,compressed:a,useCompressionStream:u}=e;let w,h,d=Se(super.readable);o&&(i?d=xe(d,new le(e)):(h=new te(e),d=xe(d,h))),a&&(d=Ce(d,u,{chunkSize:t},r,n)),o&&!i||!c||(w=new A,d=xe(d,w)),ze(this,d,(()=>{if((!o||i)&&c){const e=new l(w.value.buffer);if(f!=e.getUint32(0,!1))throw new s(E)}}))}}function Se(e){return xe(e,new p({transform(e,t){e&&e.length&&t.enqueue(e)}}))}function ze(e,n,r){n=xe(n,new p({flush:r})),t.defineProperty(e,"readable",{get:()=>n})}function Ce(e,t,n,r,s){try{e=xe(e,new(t&&r?r:s)(ge,n))}catch(r){if(!t)return e;try{e=xe(e,new s(ge,n))}catch(t){return e}}return e}function xe(e,t){return e.pipeThrough(t)}const Ae="data",_e="close";class Ie extends p{constructor(e,n){super({});const r=this,{codecType:s}=e;let i;s.startsWith("deflate")?i=ke:s.startsWith("inflate")&&(i=ve);let o=0,c=0;const f=new i(e,n),a=super.readable,l=new p({transform(e,t){e&&e.length&&(c+=e.length,t.enqueue(e))},flush(){t.assign(r,{inputSize:c})}}),u=new p({transform(e,t){e&&e.length&&(o+=e.length,t.enqueue(e))},flush(){const{signature:e}=f;t.assign(r,{signature:e,outputSize:o,inputSize:c})}});t.defineProperty(r,"readable",{get:()=>a.pipeThrough(l).pipeThrough(f).pipeThrough(u)})}}class Pe extends p{constructor(e){let t;super({transform:function n(r,s){if(t){const e=new i(t.length+r.length);e.set(t),e.set(r,t.length),r=e,t=null}r.length>e?(s.enqueue(r.slice(0,e)),n(r.slice(e),s)):t=r},flush(e){t&&t.length&&e.enqueue(t)}})}}const De=new a,Ve=new a;let Re,Be=0,Ee=!0;async function Me(e){try{const{options:t,scripts:r,config:s}=e;if(r&&r.length)try{Ee?importScripts.apply(k,r):await Ue(r)}catch(e){Ee=!1,await Ue(r)}self.initCodec&&self.initCodec(),s.CompressionStreamNative=self.CompressionStream,s.DecompressionStreamNative=self.DecompressionStream,self.Deflate&&(s.CompressionStream=new z(self.Deflate)),self.Inflate&&(s.DecompressionStream=new z(self.Inflate));const i={highWaterMark:1},o=e.readable||new y({async pull(e){const t=new u((e=>De.set(Be,e)));Ke({type:"pull",messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER;const{value:r,done:s}=await t;e.enqueue(r),s&&e.close()}},i),c=e.writable||new m({async write(e){let t;const r=new u((e=>t=e));Ve.set(Be,t),Ke({type:Ae,value:e,messageId:Be}),Be=(Be+1)%n.MAX_SAFE_INTEGER,await r}},i),f=new Ie(t,s);Re=new AbortController;const{signal:a}=Re;await o.pipeThrough(f).pipeThrough(new Pe(s.chunkSize)).pipeTo(c,{signal:a,preventClose:!0,preventAbort:!0}),await c.getWriter().close();const{signature:l,inputSize:w,outputSize:h}=f;Ke({type:_e,result:{signature:l,inputSize:w,outputSize:h}})}catch(e){Ne(e)}}async function Ue(e){for(const t of e)await import(t)}function Ke(e){let{value:t}=e;if(t)if(t.length)try{t=new i(t),e.value=t.buffer,d(e,[e.value])}catch(t){d(e)}else d(e);else d(e)}function Ne(e=new s("Unknown error")){const{message:t,stack:n,code:r,name:i}=e;d({error:{message:t,stack:n,code:r,name:i}})}addEventListener("message",(({data:e})=>{const{type:t,messageId:n,value:r,done:s}=e;try{if("start"==t&&Me(e),t==Ae){const e=De.get(n);De.delete(n),e({value:new i(r),done:s})}if("ack"==t){const e=Ve.get(n);Ve.delete(n),e()}t==_e&&Re.abort()}catch(e){Ne(e)}}));const Oe=15,Te=573,We=-2;function je(t){return He(t.map((([t,n])=>new e(t).fill(n,0,t))))}function He(t){return t.reduce(((t,n)=>t.concat(e.isArray(n)?He(n):n)),[])}const Le=[0,1,2,3].concat(...je([[2,4],[2,5],[4,6],[4,7],[8,8],[8,9],[16,10],[16,11],[32,12],[32,13],[64,14],[64,15],[2,0],[1,16],[1,17],[2,18],[2,19],[4,20],[4,21],[8,22],[8,23],[16,24],[16,25],[32,26],[32,27],[64,28],[64,29]]));function Fe(){const e=this;function t(e,t){let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1}e.re=n=>{const s=e.se,i=e.oe.ie,o=e.oe.ce;let c,f,a,l=-1;for(n.fe=0,n.ae=Te,c=0;o>c;c++)0!==s[2*c]?(n.le[++n.fe]=l=c,n.ue[c]=0):s[2*c+1]=0;for(;2>n.fe;)a=n.le[++n.fe]=2>l?++l:0,s[2*a]=1,n.ue[a]=0,n.we--,i&&(n.he-=i[2*a+1]);for(e.de=l,c=r.floor(n.fe/2);c>=1;c--)n.pe(s,c);a=o;do{c=n.le[1],n.le[1]=n.le[n.fe--],n.pe(s,1),f=n.le[1],n.le[--n.ae]=c,n.le[--n.ae]=f,s[2*a]=s[2*c]+s[2*f],n.ue[a]=r.max(n.ue[c],n.ue[f])+1,s[2*c+1]=s[2*f+1]=a,n.le[1]=a++,n.pe(s,1)}while(n.fe>=2);n.le[--n.ae]=n.le[1],(t=>{const n=e.se,r=e.oe.ie,s=e.oe.ye,i=e.oe.me,o=e.oe.be;let c,f,a,l,u,w,h=0;for(l=0;Oe>=l;l++)t.ge[l]=0;for(n[2*t.le[t.ae]+1]=0,c=t.ae+1;Te>c;c++)f=t.le[c],l=n[2*n[2*f+1]+1]+1,l>o&&(l=o,h++),n[2*f+1]=l,f>e.de||(t.ge[l]++,u=0,i>f||(u=s[f-i]),w=n[2*f],t.we+=w*(l+u),r&&(t.he+=w*(r[2*f+1]+u)));if(0!==h){do{for(l=o-1;0===t.ge[l];)l--;t.ge[l]--,t.ge[l+1]+=2,t.ge[o]--,h-=2}while(h>0);for(l=o;0!==l;l--)for(f=t.ge[l];0!==f;)a=t.le[--c],a>e.de||(n[2*a+1]!=l&&(t.we+=(l-n[2*a+1])*n[2*a],n[2*a+1]=l),f--)}})(n),((e,n,r)=>{const s=[];let i,o,c,f=0;for(i=1;Oe>=i;i++)s[i]=f=f+r[i-1]<<1;for(o=0;n>=o;o++)c=e[2*o+1],0!==c&&(e[2*o]=t(s[c]++,c))})(s,e.de,n.ge)}}function qe(e,t,n,r,s){const i=this;i.ie=e,i.ye=t,i.me=n,i.ce=r,i.be=s}Fe.ke=[0,1,2,3,4,5,6,7].concat(...je([[2,8],[2,9],[2,10],[2,11],[4,12],[4,13],[4,14],[4,15],[8,16],[8,17],[8,18],[8,19],[16,20],[16,21],[16,22],[16,23],[32,24],[32,25],[32,26],[31,27],[1,28]])),Fe.ve=[0,1,2,3,4,5,6,7,8,10,12,14,16,20,24,28,32,40,48,56,64,80,96,112,128,160,192,224,0],Fe.Se=[0,1,2,3,4,6,8,12,16,24,32,48,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096,6144,8192,12288,16384,24576],Fe.ze=e=>256>e?Le[e]:Le[256+(e>>>7)],Fe.Ce=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],Fe.xe=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Fe.Ae=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Fe._e=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];const Ge=je([[144,8],[112,9],[24,7],[8,8]]);qe.Ie=He([12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254,1,129,65,193,33,161,97,225,17,145,81,209,49,177,113,241,9,137,73,201,41,169,105,233,25,153,89,217,57,185,121,249,5,133,69,197,37,165,101,229,21,149,85,213,53,181,117,245,13,141,77,205,45,173,109,237,29,157,93,221,61,189,125,253,19,275,147,403,83,339,211,467,51,307,179,435,115,371,243,499,11,267,139,395,75,331,203,459,43,299,171,427,107,363,235,491,27,283,155,411,91,347,219,475,59,315,187,443,123,379,251,507,7,263,135,391,71,327,199,455,39,295,167,423,103,359,231,487,23,279,151,407,87,343,215,471,55,311,183,439,119,375,247,503,15,271,143,399,79,335,207,463,47,303,175,431,111,367,239,495,31,287,159,415,95,351,223,479,63,319,191,447,127,383,255,511,0,64,32,96,16,80,48,112,8,72,40,104,24,88,56,120,4,68,36,100,20,84,52,116,3,131,67,195,35,163,99,227].map(((e,t)=>[e,Ge[t]])));const Je=je([[30,5]]);function Qe(e,t,n,r,s){const i=this;i.Pe=e,i.De=t,i.Ve=n,i.Re=r,i.Be=s}qe.Ee=He([0,16,8,24,4,20,12,28,2,18,10,26,6,22,14,30,1,17,9,25,5,21,13,29,3,19,11,27,7,23].map(((e,t)=>[e,Je[t]]))),qe.Me=new qe(qe.Ie,Fe.Ce,257,286,Oe),qe.Ue=new qe(qe.Ee,Fe.xe,0,30,Oe),qe.Ke=new qe(null,Fe.Ae,0,19,7);const Xe=[new Qe(0,0,0,0,0),new Qe(4,4,8,4,1),new Qe(4,5,16,8,1),new Qe(4,6,32,32,1),new Qe(4,4,16,16,2),new Qe(8,16,32,32,2),new Qe(8,16,128,128,2),new Qe(8,32,128,256,2),new Qe(32,128,258,1024,2),new Qe(32,258,258,4096,2)],Ye=["need dictionary","stream end","","","stream error","data error","","buffer error","",""],Ze=113,$e=666,et=262;function tt(e,t,n,r){const s=e[2*t],i=e[2*n];return i>s||s==i&&r[t]<=r[n]}function nt(){const e=this;let t,n,s,c,f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z,C,x,A,_,I,P,D,V,R,B,E,M,U;const K=new Fe,N=new Fe,O=new Fe;let T,W,j,H,L,F;function q(){let t;for(t=0;286>t;t++)E[2*t]=0;for(t=0;30>t;t++)M[2*t]=0;for(t=0;19>t;t++)U[2*t]=0;E[512]=1,e.we=e.he=0,W=j=0}function G(e,t){let n,r=-1,s=e[1],i=0,o=7,c=4;0===s&&(o=138,c=3),e[2*(t+1)+1]=65535;for(let f=0;t>=f;f++)n=s,s=e[2*(f+1)+1],++i<o&&n==s||(c>i?U[2*n]+=i:0!==n?(n!=r&&U[2*n]++,U[32]++):i>10?U[36]++:U[34]++,i=0,r=n,0===s?(o=138,c=3):n==s?(o=6,c=3):(o=7,c=4))}function J(t){e.Ne[e.pending++]=t}function Q(e){J(255&e),J(e>>>8&255)}function X(e,t){let n;const r=t;F>16-r?(n=e,L|=n<<F&65535,Q(L),L=n>>>16-F,F+=r-16):(L|=e<<F&65535,F+=r)}function Y(e,t){const n=2*e;X(65535&t[n],65535&t[n+1])}function Z(e,t){let n,r,s=-1,i=e[1],o=0,c=7,f=4;for(0===i&&(c=138,f=3),n=0;t>=n;n++)if(r=i,i=e[2*(n+1)+1],++o>=c||r!=i){if(f>o)do{Y(r,U)}while(0!=--o);else 0!==r?(r!=s&&(Y(r,U),o--),Y(16,U),X(o-3,2)):o>10?(Y(18,U),X(o-11,7)):(Y(17,U),X(o-3,3));o=0,s=r,0===i?(c=138,f=3):r==i?(c=6,f=3):(c=7,f=4)}}function $(){16==F?(Q(L),L=0,F=0):8>F||(J(255&L),L>>>=8,F-=8)}function ee(t,n){let s,i,o;if(e.Oe[W]=t,e.Te[W]=255&n,W++,0===t?E[2*n]++:(j++,t--,E[2*(Fe.ke[n]+256+1)]++,M[2*Fe.ze(t)]++),!(8191&W)&&D>2){for(s=8*W,i=C-k,o=0;30>o;o++)s+=M[2*o]*(5+Fe.xe[o]);if(s>>>=3,j<r.floor(W/2)&&s<r.floor(i/2))return!0}return W==T-1}function te(t,n){let r,s,i,o,c=0;if(0!==W)do{r=e.Oe[c],s=e.Te[c],c++,0===r?Y(s,t):(i=Fe.ke[s],Y(i+256+1,t),o=Fe.Ce[i],0!==o&&(s-=Fe.ve[i],X(s,o)),r--,i=Fe.ze(r),Y(i,n),o=Fe.xe[i],0!==o&&(r-=Fe.Se[i],X(r,o)))}while(W>c);Y(256,t),H=t[513]}function ne(){F>8?Q(L):F>0&&J(255&L),L=0,F=0}function re(t,n,r){X(0+(r?1:0),3),((t,n)=>{ne(),H=8,Q(n),Q(~n),e.Ne.set(u.subarray(t,t+n),e.pending),e.pending+=n})(t,n)}function se(n){((t,n,r)=>{let s,i,o=0;D>0?(K.re(e),N.re(e),o=(()=>{let t;for(G(E,K.de),G(M,N.de),O.re(e),t=18;t>=3&&0===U[2*Fe._e[t]+1];t--);return e.we+=14+3*(t+1),t})(),s=e.we+3+7>>>3,i=e.he+3+7>>>3,i>s||(s=i)):s=i=n+5,n+4>s||-1==t?i==s?(X(2+(r?1:0),3),te(qe.Ie,qe.Ee)):(X(4+(r?1:0),3),((e,t,n)=>{let r;for(X(e-257,5),X(t-1,5),X(n-4,4),r=0;n>r;r++)X(U[2*Fe._e[r]+1],3);Z(E,e-1),Z(M,t-1)})(K.de+1,N.de+1,o+1),te(E,M)):re(t,n,r),q(),r&&ne()})(0>k?-1:k,C-k,n),k=C,t.We()}function ie(){let e,n,r,s;do{if(s=w-A-C,0===s&&0===C&&0===A)s=f;else if(-1==s)s--;else if(C>=f+f-et){u.set(u.subarray(f,f+f),0),x-=f,C-=f,k-=f,e=y,r=e;do{n=65535&d[--r],d[r]=f>n?0:n-f}while(0!=--e);e=f,r=e;do{n=65535&h[--r],h[r]=f>n?0:n-f}while(0!=--e);s+=f}if(0===t.je)return;e=t.He(u,C+A,s),A+=e,3>A||(p=255&u[C],p=(p<<g^255&u[C+1])&b)}while(et>A&&0!==t.je)}function oe(e){let t,n,r=I,s=C,i=_;const o=C>f-et?C-(f-et):0;let c=B;const a=l,w=C+258;let d=u[s+i-1],p=u[s+i];R>_||(r>>=2),c>A&&(c=A);do{if(t=e,u[t+i]==p&&u[t+i-1]==d&&u[t]==u[s]&&u[++t]==u[s+1]){s+=2,t++;do{}while(u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&u[++s]==u[++t]&&w>s);if(n=258-(w-s),s=w-258,n>i){if(x=e,i=n,n>=c)break;d=u[s+i-1],p=u[s+i]}}}while((e=65535&h[e&a])>o&&0!=--r);return i>A?A:i}e.ue=[],e.ge=[],e.le=[],E=[],M=[],U=[],e.pe=(t,n)=>{const r=e.le,s=r[n];let i=n<<1;for(;i<=e.fe&&(i<e.fe&&tt(t,r[i+1],r[i],e.ue)&&i++,!tt(t,s,r[i],e.ue));)r[n]=r[i],n=i,i<<=1;r[n]=s},e.Le=(t,S,x,W,j,G)=>(W||(W=8),j||(j=8),G||(G=0),t.Fe=null,-1==S&&(S=6),1>j||j>9||8!=W||9>x||x>15||0>S||S>9||0>G||G>2?We:(t.qe=e,a=x,f=1<<a,l=f-1,m=j+7,y=1<<m,b=y-1,g=r.floor((m+3-1)/3),u=new i(2*f),h=[],d=[],T=1<<j+6,e.Ne=new i(4*T),s=4*T,e.Oe=new o(T),e.Te=new i(T),D=S,V=G,(t=>(t.Ge=t.Je=0,t.Fe=null,e.pending=0,e.Qe=0,n=Ze,c=0,K.se=E,K.oe=qe.Me,N.se=M,N.oe=qe.Ue,O.se=U,O.oe=qe.Ke,L=0,F=0,H=8,q(),(()=>{w=2*f,d[y-1]=0;for(let e=0;y-1>e;e++)d[e]=0;P=Xe[D].De,R=Xe[D].Pe,B=Xe[D].Ve,I=Xe[D].Re,C=0,k=0,A=0,v=_=2,z=0,p=0})(),0))(t))),e.Xe=()=>42!=n&&n!=Ze&&n!=$e?We:(e.Te=null,e.Oe=null,e.Ne=null,d=null,h=null,u=null,e.qe=null,n==Ze?-3:0),e.Ye=(e,t,n)=>{let r=0;return-1==t&&(t=6),0>t||t>9||0>n||n>2?We:(Xe[D].Be!=Xe[t].Be&&0!==e.Ge&&(r=e.Ze(1)),D!=t&&(D=t,P=Xe[D].De,R=Xe[D].Pe,B=Xe[D].Ve,I=Xe[D].Re),V=n,r)},e.$e=(e,t,r)=>{let s,i=r,o=0;if(!t||42!=n)return We;if(3>i)return 0;for(i>f-et&&(i=f-et,o=r-i),u.set(t.subarray(o,o+i),0),C=i,k=i,p=255&u[0],p=(p<<g^255&u[1])&b,s=0;i-3>=s;s++)p=(p<<g^255&u[s+2])&b,h[s&l]=d[p],d[p]=s;return 0},e.Ze=(r,i)=>{let o,w,m,I,R;if(i>4||0>i)return We;if(!r.et||!r.tt&&0!==r.je||n==$e&&4!=i)return r.Fe=Ye[4],We;if(0===r.nt)return r.Fe=Ye[7],-5;var B;if(t=r,I=c,c=i,42==n&&(w=8+(a-8<<4)<<8,m=(D-1&255)>>1,m>3&&(m=3),w|=m<<6,0!==C&&(w|=32),w+=31-w%31,n=Ze,J((B=w)>>8&255),J(255&B)),0!==e.pending){if(t.We(),0===t.nt)return c=-1,0}else if(0===t.je&&I>=i&&4!=i)return t.Fe=Ye[7],-5;if(n==$e&&0!==t.je)return r.Fe=Ye[7],-5;if(0!==t.je||0!==A||0!=i&&n!=$e){switch(R=-1,Xe[D].Be){case 0:R=(e=>{let n,r=65535;for(r>s-5&&(r=s-5);;){if(1>=A){if(ie(),0===A&&0==e)return 0;if(0===A)break}if(C+=A,A=0,n=k+r,(0===C||C>=n)&&(A=C-n,C=n,se(!1),0===t.nt))return 0;if(C-k>=f-et&&(se(!1),0===t.nt))return 0}return se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i);break;case 1:R=(e=>{let n,r=0;for(;;){if(et>A){if(ie(),et>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C),0===r||(C-r&65535)>f-et||2!=V&&(v=oe(r)),3>v)n=ee(0,255&u[C]),A--,C++;else if(n=ee(C-x,v-3),A-=v,v>P||3>A)C+=v,v=0,p=255&u[C],p=(p<<g^255&u[C+1])&b;else{v--;do{C++,p=(p<<g^255&u[C+2])&b,r=65535&d[p],h[C&l]=d[p],d[p]=C}while(0!=--v);C++}if(n&&(se(!1),0===t.nt))return 0}return se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i);break;case 2:R=(e=>{let n,r,s=0;for(;;){if(et>A){if(ie(),et>A&&0==e)return 0;if(0===A)break}if(3>A||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C),_=v,S=x,v=2,0!==s&&P>_&&f-et>=(C-s&65535)&&(2!=V&&(v=oe(s)),5>=v&&(1==V||3==v&&C-x>4096)&&(v=2)),3>_||v>_)if(0!==z){if(n=ee(0,255&u[C-1]),n&&se(!1),C++,A--,0===t.nt)return 0}else z=1,C++,A--;else{r=C+A-3,n=ee(C-1-S,_-3),A-=_-1,_-=2;do{++C>r||(p=(p<<g^255&u[C+2])&b,s=65535&d[p],h[C&l]=d[p],d[p]=C)}while(0!=--_);if(z=0,v=2,C++,n&&(se(!1),0===t.nt))return 0}}return 0!==z&&(n=ee(0,255&u[C-1]),z=0),se(4==e),0===t.nt?4==e?2:0:4==e?3:1})(i)}if(2!=R&&3!=R||(n=$e),0==R||2==R)return 0===t.nt&&(c=-1),0;if(1==R){if(1==i)X(2,3),Y(256,qe.Ie),$(),9>1+H+10-F&&(X(2,3),Y(256,qe.Ie),$()),H=7;else if(re(0,0,!1),3==i)for(o=0;y>o;o++)d[o]=0;if(t.We(),0===t.nt)return c=-1,0}}return 4!=i?0:1}}function rt(){const e=this;e.rt=0,e.st=0,e.je=0,e.Ge=0,e.nt=0,e.Je=0}function st(e){const t=new rt,n=(o=e&&e.chunkSize?e.chunkSize:65536)+5*(r.floor(o/16383)+1);var o;const c=new i(n);let f=e?e.level:-1;void 0===f&&(f=-1),t.Le(f),t.et=c,this.append=(e,r)=>{let o,f,a=0,l=0,u=0;const w=[];if(e.length){t.rt=0,t.tt=e,t.je=e.length;do{if(t.st=0,t.nt=n,o=t.Ze(0),0!=o)throw new s("deflating: "+t.Fe);t.st&&(t.st==n?w.push(new i(c)):w.push(c.subarray(0,t.st))),u+=t.st,r&&t.rt>0&&t.rt!=a&&(r(t.rt),a=t.rt)}while(t.je>0||0===t.nt);return w.length>1?(f=new i(u),w.forEach((e=>{f.set(e,l),l+=e.length}))):f=w[0]?new i(w[0]):new i,f}},this.flush=()=>{let e,r,o=0,f=0;const a=[];do{if(t.st=0,t.nt=n,e=t.Ze(4),1!=e&&0!=e)throw new s("deflating: "+t.Fe);n-t.nt>0&&a.push(c.slice(0,t.st)),f+=t.st}while(t.je>0||0===t.nt);return t.Xe(),r=new i(f),a.forEach((e=>{r.set(e,o),o+=e.length})),r}}rt.prototype={Le(e,t){const n=this;return n.qe=new nt,t||(t=Oe),n.qe.Le(n,e,t)},Ze(e){const t=this;return t.qe?t.qe.Ze(t,e):We},Xe(){const e=this;if(!e.qe)return We;const t=e.qe.Xe();return e.qe=null,t},Ye(e,t){const n=this;return n.qe?n.qe.Ye(n,e,t):We},$e(e,t){const n=this;return n.qe?n.qe.$e(n,e,t):We},He(e,t,n){const r=this;let s=r.je;return s>n&&(s=n),0===s?0:(r.je-=s,e.set(r.tt.subarray(r.rt,r.rt+s),t),r.rt+=s,r.Ge+=s,s)},We(){const e=this;let t=e.qe.pending;t>e.nt&&(t=e.nt),0!==t&&(e.et.set(e.qe.Ne.subarray(e.qe.Qe,e.qe.Qe+t),e.st),e.st+=t,e.qe.Qe+=t,e.Je+=t,e.nt-=t,e.qe.pending-=t,0===e.qe.pending&&(e.qe.Qe=0))}};const it=0,ot=1,ct=-2,ft=-3,at=-4,lt=-5,ut=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],wt=1440,ht=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],dt=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],pt=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],yt=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,112,112],mt=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],bt=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],gt=15;function kt(){let e,t,n,r,s,i;function o(e,t,o,c,f,a,l,u,w,h,d){let p,y,m,b,g,k,v,S,z,C,x,A,_,I,P;C=0,g=o;do{n[e[t+C]]++,C++,g--}while(0!==g);if(n[0]==o)return l[0]=-1,u[0]=0,it;for(S=u[0],k=1;gt>=k&&0===n[k];k++);for(v=k,k>S&&(S=k),g=gt;0!==g&&0===n[g];g--);for(m=g,S>g&&(S=g),u[0]=S,I=1<<k;g>k;k++,I<<=1)if(0>(I-=n[k]))return ft;if(0>(I-=n[g]))return ft;for(n[g]+=I,i[1]=k=0,C=1,_=2;0!=--g;)i[_]=k+=n[C],_++,C++;g=0,C=0;do{0!==(k=e[t+C])&&(d[i[k]++]=g),C++}while(++g<o);for(o=i[m],i[0]=g=0,C=0,b=-1,A=-S,s[0]=0,x=0,P=0;m>=v;v++)for(p=n[v];0!=p--;){for(;v>A+S;){if(b++,A+=S,P=m-A,P=P>S?S:P,(y=1<<(k=v-A))>p+1&&(y-=p+1,_=v,P>k))for(;++k<P&&(y<<=1)>n[++_];)y-=n[_];if(P=1<<k,h[0]+P>wt)return ft;s[b]=x=h[0],h[0]+=P,0!==b?(i[b]=g,r[0]=k,r[1]=S,k=g>>>A-S,r[2]=x-s[b-1]-k,w.set(r,3*(s[b-1]+k))):l[0]=x}for(r[1]=v-A,o>C?d[C]<c?(r[0]=256>d[C]?0:96,r[2]=d[C++]):(r[0]=a[d[C]-c]+16+64,r[2]=f[d[C++]-c]):r[0]=192,y=1<<v-A,k=g>>>A;P>k;k+=y)w.set(r,3*(x+k));for(k=1<<v-1;g&k;k>>>=1)g^=k;for(g^=k,z=(1<<A)-1;(g&z)!=i[b];)b--,A-=S,z=(1<<A)-1}return 0!==I&&1!=m?lt:it}function c(o){let c;for(e||(e=[],t=[],n=new f(gt+1),r=[],s=new f(gt),i=new f(gt+1)),t.length<o&&(t=[]),c=0;o>c;c++)t[c]=0;for(c=0;gt+1>c;c++)n[c]=0;for(c=0;3>c;c++)r[c]=0;s.set(n.subarray(0,gt),0),i.set(n.subarray(0,gt+1),0)}this.it=(n,r,s,i,f)=>{let a;return c(19),e[0]=0,a=o(n,0,19,19,null,null,s,r,i,e,t),a==ft?f.Fe="oversubscribed dynamic bit lengths tree":a!=lt&&0!==r[0]||(f.Fe="incomplete dynamic bit lengths tree",a=ft),a},this.ot=(n,r,s,i,f,a,l,u,w)=>{let h;return c(288),e[0]=0,h=o(s,0,n,257,pt,yt,a,i,u,e,t),h!=it||0===i[0]?(h==ft?w.Fe="oversubscribed literal/length tree":h!=at&&(w.Fe="incomplete literal/length tree",h=ft),h):(c(288),h=o(s,n,r,0,mt,bt,l,f,u,e,t),h!=it||0===f[0]&&n>257?(h==ft?w.Fe="oversubscribed distance tree":h==lt?(w.Fe="incomplete distance tree",h=ft):h!=at&&(w.Fe="empty distance tree with lengths",h=ft),h):it)}}kt.ct=(e,t,n,r)=>(e[0]=9,t[0]=5,n[0]=ht,r[0]=dt,it);const vt=0,St=1,zt=2,Ct=3,xt=4,At=5,_t=6,It=7,Pt=8,Dt=9;function Vt(){const e=this;let t,n,r,s,i=0,o=0,c=0,f=0,a=0,l=0,u=0,w=0,h=0,d=0;function p(e,t,n,r,s,i,o,c){let f,a,l,u,w,h,d,p,y,m,b,g,k,v,S,z;d=c.rt,p=c.je,w=o.ft,h=o.lt,y=o.write,m=y<o.read?o.read-y-1:o.end-y,b=ut[e],g=ut[t];do{for(;20>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;if(f=w&b,a=n,l=r,z=3*(l+f),0!==(u=a[z]))for(;;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15,k=a[z+2]+(w&ut[u]),w>>=u,h-=u;15>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;for(f=w&g,a=s,l=i,z=3*(l+f),u=a[z];;){if(w>>=a[z+1],h-=a[z+1],16&u){for(u&=15;u>h;)p--,w|=(255&c.ut(d++))<<h,h+=8;if(v=a[z+2]+(w&ut[u]),w>>=u,h-=u,m-=k,v>y){S=y-v;do{S+=o.end}while(0>S);if(u=o.end-S,k>u){if(k-=u,y-S>0&&u>y-S)do{o.wt[y++]=o.wt[S++]}while(0!=--u);else o.wt.set(o.wt.subarray(S,S+u),y),y+=u,S+=u,u=0;S=0}}else S=y-v,y-S>0&&2>y-S?(o.wt[y++]=o.wt[S++],o.wt[y++]=o.wt[S++],k-=2):(o.wt.set(o.wt.subarray(S,S+2),y),y+=2,S+=2,k-=2);if(y-S>0&&k>y-S)do{o.wt[y++]=o.wt[S++]}while(0!=--k);else o.wt.set(o.wt.subarray(S,S+k),y),y+=k,S+=k,k=0;break}if(64&u)return c.Fe="invalid distance code",k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ft;f+=a[z+2],f+=w&ut[u],z=3*(l+f),u=a[z]}break}if(64&u)return 32&u?(k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ot):(c.Fe="invalid literal/length code",k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,ft);if(f+=a[z+2],f+=w&ut[u],z=3*(l+f),0===(u=a[z])){w>>=a[z+1],h-=a[z+1],o.wt[y++]=a[z+2],m--;break}}else w>>=a[z+1],h-=a[z+1],o.wt[y++]=a[z+2],m--}while(m>=258&&p>=10);return k=c.je-p,k=k>h>>3?h>>3:k,p+=k,d-=k,h-=k<<3,o.ft=w,o.lt=h,c.je=p,c.Ge+=d-c.rt,c.rt=d,o.write=y,it}e.init=(e,i,o,c,f,a)=>{t=vt,u=e,w=i,r=o,h=c,s=f,d=a,n=null},e.ht=(e,y,m)=>{let b,g,k,v,S,z,C,x=0,A=0,_=0;for(_=y.rt,v=y.je,x=e.ft,A=e.lt,S=e.write,z=S<e.read?e.read-S-1:e.end-S;;)switch(t){case vt:if(z>=258&&v>=10&&(e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,m=p(u,w,r,h,s,d,e,y),_=y.rt,v=y.je,x=e.ft,A=e.lt,S=e.write,z=S<e.read?e.read-S-1:e.end-S,m!=it)){t=m==ot?It:Dt;break}c=u,n=r,o=h,t=St;case St:for(b=c;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}if(g=3*(o+(x&ut[b])),x>>>=n[g+1],A-=n[g+1],k=n[g],0===k){f=n[g+2],t=_t;break}if(16&k){a=15&k,i=n[g+2],t=zt;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}if(32&k){t=It;break}return t=Dt,y.Fe="invalid literal/length code",m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case zt:for(b=a;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}i+=x&ut[b],x>>=b,A-=b,c=w,n=s,o=d,t=Ct;case Ct:for(b=c;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}if(g=3*(o+(x&ut[b])),x>>=n[g+1],A-=n[g+1],k=n[g],16&k){a=15&k,l=n[g+2],t=xt;break}if(!(64&k)){c=k,o=g/3+n[g+2];break}return t=Dt,y.Fe="invalid distance code",m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case xt:for(b=a;b>A;){if(0===v)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,v--,x|=(255&y.ut(_++))<<A,A+=8}l+=x&ut[b],x>>=b,A-=b,t=At;case At:for(C=S-l;0>C;)C+=e.end;for(;0!==i;){if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);e.wt[S++]=e.wt[C++],z--,C==e.end&&(C=0),i--}t=vt;break;case _t:if(0===z&&(S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z&&(e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,S==e.end&&0!==e.read&&(S=0,z=S<e.read?e.read-S-1:e.end-S),0===z)))return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);m=it,e.wt[S++]=f,z--,t=vt;break;case It:if(A>7&&(A-=8,v++,_--),e.write=S,m=e.dt(y,m),S=e.write,z=S<e.read?e.read-S-1:e.end-S,e.read!=e.write)return e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);t=Pt;case Pt:return m=ot,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);case Dt:return m=ft,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m);default:return m=ct,e.ft=x,e.lt=A,y.je=v,y.Ge+=_-y.rt,y.rt=_,e.write=S,e.dt(y,m)}},e.yt=()=>{}}const Rt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Bt=0,Et=1,Mt=2,Ut=3,Kt=4,Nt=5,Ot=6,Tt=7,Wt=8,jt=9;function Ht(e,t){const n=this;let r,s=Bt,o=0,c=0,a=0;const l=[0],u=[0],w=new Vt;let h=0,d=new f(3*wt);const p=new kt;n.lt=0,n.ft=0,n.wt=new i(t),n.end=t,n.read=0,n.write=0,n.reset=(e,t)=>{t&&(t[0]=0),s==Ot&&w.yt(e),s=Bt,n.lt=0,n.ft=0,n.read=n.write=0},n.reset(e,null),n.dt=(e,t)=>{let r,s,i;return s=e.st,i=n.read,r=(i>n.write?n.end:n.write)-i,r>e.nt&&(r=e.nt),0!==r&&t==lt&&(t=it),e.nt-=r,e.Je+=r,e.et.set(n.wt.subarray(i,i+r),s),s+=r,i+=r,i==n.end&&(i=0,n.write==n.end&&(n.write=0),r=n.write-i,r>e.nt&&(r=e.nt),0!==r&&t==lt&&(t=it),e.nt-=r,e.Je+=r,e.et.set(n.wt.subarray(i,i+r),s),s+=r,i+=r),e.st=s,n.read=i,t},n.ht=(e,t)=>{let i,f,y,m,b,g,k,v;for(m=e.rt,b=e.je,f=n.ft,y=n.lt,g=n.write,k=g<n.read?n.read-g-1:n.end-g;;){let S,z,C,x,A,_,I,P;switch(s){case Bt:for(;3>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}switch(i=7&f,h=1&i,i>>>1){case 0:f>>>=3,y-=3,i=7&y,f>>>=i,y-=i,s=Et;break;case 1:S=[],z=[],C=[[]],x=[[]],kt.ct(S,z,C,x),w.init(S[0],z[0],C[0],0,x[0],0),f>>>=3,y-=3,s=Ot;break;case 2:f>>>=3,y-=3,s=Ut;break;case 3:return f>>>=3,y-=3,s=jt,e.Fe="invalid block type",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t)}break;case Et:for(;32>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if((~f>>>16&65535)!=(65535&f))return s=jt,e.Fe="invalid stored block lengths",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);o=65535&f,f=y=0,s=0!==o?Mt:0!==h?Tt:Bt;break;case Mt:if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(0===k&&(g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k&&(n.write=g,t=n.dt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,g==n.end&&0!==n.read&&(g=0,k=g<n.read?n.read-g-1:n.end-g),0===k)))return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(t=it,i=o,i>b&&(i=b),i>k&&(i=k),n.wt.set(e.He(m,i),g),m+=i,b-=i,g+=i,k-=i,0!=(o-=i))break;s=0!==h?Tt:Bt;break;case Ut:for(;14>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(c=i=16383&f,(31&i)>29||(i>>5&31)>29)return s=jt,e.Fe="too many length or distance symbols",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);if(i=258+(31&i)+(i>>5&31),!r||r.length<i)r=[];else for(v=0;i>v;v++)r[v]=0;f>>>=14,y-=14,a=0,s=Kt;case Kt:for(;4+(c>>>10)>a;){for(;3>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}r[Rt[a++]]=7&f,f>>>=3,y-=3}for(;19>a;)r[Rt[a++]]=0;if(l[0]=7,i=p.it(r,l,u,d,e),i!=it)return(t=i)==ft&&(r=null,s=jt),n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);a=0,s=Nt;case Nt:for(;i=c,258+(31&i)+(i>>5&31)>a;){let o,w;for(i=l[0];i>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(i=d[3*(u[0]+(f&ut[i]))+1],w=d[3*(u[0]+(f&ut[i]))+2],16>w)f>>>=i,y-=i,r[a++]=w;else{for(v=18==w?7:w-14,o=18==w?11:3;i+v>y;){if(0===b)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);t=it,b--,f|=(255&e.ut(m++))<<y,y+=8}if(f>>>=i,y-=i,o+=f&ut[v],f>>>=v,y-=v,v=a,i=c,v+o>258+(31&i)+(i>>5&31)||16==w&&1>v)return r=null,s=jt,e.Fe="invalid bit length repeat",t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);w=16==w?r[v-1]:0;do{r[v++]=w}while(0!=--o);a=v}}if(u[0]=-1,A=[],_=[],I=[],P=[],A[0]=9,_[0]=6,i=c,i=p.ot(257+(31&i),1+(i>>5&31),r,A,_,I,P,d,e),i!=it)return i==ft&&(r=null,s=jt),t=i,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);w.init(A[0],_[0],d,I[0],d,P[0]),s=Ot;case Ot:if(n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,(t=w.ht(n,e,t))!=ot)return n.dt(e,t);if(t=it,w.yt(e),m=e.rt,b=e.je,f=n.ft,y=n.lt,g=n.write,k=g<n.read?n.read-g-1:n.end-g,0===h){s=Bt;break}s=Tt;case Tt:if(n.write=g,t=n.dt(e,t),g=n.write,k=g<n.read?n.read-g-1:n.end-g,n.read!=n.write)return n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);s=Wt;case Wt:return t=ot,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);case jt:return t=ft,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t);default:return t=ct,n.ft=f,n.lt=y,e.je=b,e.Ge+=m-e.rt,e.rt=m,n.write=g,n.dt(e,t)}}},n.yt=e=>{n.reset(e,null),n.wt=null,d=null},n.bt=(e,t,r)=>{n.wt.set(e.subarray(t,t+r),0),n.read=n.write=r},n.gt=()=>s==Et?1:0}const Lt=13,Ft=[0,0,255,255];function qt(){const e=this;function t(e){return e&&e.kt?(e.Ge=e.Je=0,e.Fe=null,e.kt.mode=7,e.kt.vt.reset(e,null),it):ct}e.mode=0,e.method=0,e.St=[0],e.zt=0,e.marker=0,e.Ct=0,e.xt=t=>(e.vt&&e.vt.yt(t),e.vt=null,it),e.At=(n,r)=>(n.Fe=null,e.vt=null,8>r||r>15?(e.xt(n),ct):(e.Ct=r,n.kt.vt=new Ht(n,1<<r),t(n),it)),e._t=(e,t)=>{let n,r;if(!e||!e.kt||!e.tt)return ct;const s=e.kt;for(t=4==t?lt:it,n=lt;;)switch(s.mode){case 0:if(0===e.je)return n;if(n=t,e.je--,e.Ge++,8!=(15&(s.method=e.ut(e.rt++)))){s.mode=Lt,e.Fe="unknown compression method",s.marker=5;break}if(8+(s.method>>4)>s.Ct){s.mode=Lt,e.Fe="invalid win size",s.marker=5;break}s.mode=1;case 1:if(0===e.je)return n;if(n=t,e.je--,e.Ge++,r=255&e.ut(e.rt++),((s.method<<8)+r)%31!=0){s.mode=Lt,e.Fe="incorrect header check",s.marker=5;break}if(!(32&r)){s.mode=7;break}s.mode=2;case 2:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt=(255&e.ut(e.rt++))<<24&4278190080,s.mode=3;case 3:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt+=(255&e.ut(e.rt++))<<16&16711680,s.mode=4;case 4:if(0===e.je)return n;n=t,e.je--,e.Ge++,s.zt+=(255&e.ut(e.rt++))<<8&65280,s.mode=5;case 5:return 0===e.je?n:(n=t,e.je--,e.Ge++,s.zt+=255&e.ut(e.rt++),s.mode=6,2);case 6:return s.mode=Lt,e.Fe="need dictionary",s.marker=0,ct;case 7:if(n=s.vt.ht(e,n),n==ft){s.mode=Lt,s.marker=0;break}if(n==it&&(n=t),n!=ot)return n;n=t,s.vt.reset(e,s.St),s.mode=12;case 12:return e.je=0,ot;case Lt:return ft;default:return ct}},e.It=(e,t,n)=>{let r=0,s=n;if(!e||!e.kt||6!=e.kt.mode)return ct;const i=e.kt;return s<1<<i.Ct||(s=(1<<i.Ct)-1,r=n-s),i.vt.bt(t,r,s),i.mode=7,it},e.Pt=e=>{let n,r,s,i,o;if(!e||!e.kt)return ct;const c=e.kt;if(c.mode!=Lt&&(c.mode=Lt,c.marker=0),0===(n=e.je))return lt;for(r=e.rt,s=c.marker;0!==n&&4>s;)e.ut(r)==Ft[s]?s++:s=0!==e.ut(r)?0:4-s,r++,n--;return e.Ge+=r-e.rt,e.rt=r,e.je=n,c.marker=s,4!=s?ft:(i=e.Ge,o=e.Je,t(e),e.Ge=i,e.Je=o,c.mode=7,it)},e.Dt=e=>e&&e.kt&&e.kt.vt?e.kt.vt.gt():ct}function Gt(){}function Jt(e){const t=new Gt,n=e&&e.chunkSize?r.floor(2*e.chunkSize):131072,o=new i(n);let c=!1;t.At(),t.et=o,this.append=(e,r)=>{const f=[];let a,l,u=0,w=0,h=0;if(0!==e.length){t.rt=0,t.tt=e,t.je=e.length;do{if(t.st=0,t.nt=n,0!==t.je||c||(t.rt=0,c=!0),a=t._t(0),c&&a===lt){if(0!==t.je)throw new s("inflating: bad input")}else if(a!==it&&a!==ot)throw new s("inflating: "+t.Fe);if((c||a===ot)&&t.je===e.length)throw new s("inflating: bad input");t.st&&(t.st===n?f.push(new i(o)):f.push(o.subarray(0,t.st))),h+=t.st,r&&t.rt>0&&t.rt!=u&&(r(t.rt),u=t.rt)}while(t.je>0||0===t.nt);return f.length>1?(l=new i(h),f.forEach((e=>{l.set(e,w),w+=e.length}))):l=f[0]?new i(f[0]):new i,l}},this.flush=()=>{t.xt()}}Gt.prototype={At(e){const t=this;return t.kt=new qt,e||(e=15),t.kt.At(t,e)},_t(e){const t=this;return t.kt?t.kt._t(t,e):ct},xt(){const e=this;if(!e.kt)return ct;const t=e.kt.xt(e);return e.kt=null,t},Pt(){const e=this;return e.kt?e.kt.Pt(e):ct},It(e,t){const n=this;return n.kt?n.kt.It(n,e,t):ct},ut(e){return this.tt[e]},He(e,t){return this.tt.subarray(e,e+t)}},self.initCodec=()=>{self.Deflate=st,self.Inflate=Jt};\n'],{type:"text/javascript"}))};e({workerScripts:{inflate:[t],deflate:[t]}})}(tL),tL({Deflate:function(e){var t,n=new wN,r=(t=e&&e.chunkSize?e.chunkSize:65536)+5*(Math.floor(t/16383)+1),i=new Uint8Array(r),o=e?e.level:-1;"undefined"==typeof o&&(o=-1),n.deflateInit(o),n.next_out=i,this.append=function(e,t){var o,a=0,s=0,l=0,u=[];if(e.length){n.next_in_index=0,n.next_in=e,n.avail_in=e.length;do{if(n.next_out_index=0,n.avail_out=r,0!=n.deflate(0))throw new Error("deflating: "+n.msg);n.next_out_index&&(n.next_out_index==r?u.push(new Uint8Array(i)):u.push(i.subarray(0,n.next_out_index))),l+=n.next_out_index,t&&n.next_in_index>0&&n.next_in_index!=a&&(t(n.next_in_index),a=n.next_in_index)}while(n.avail_in>0||0===n.avail_out);return u.length>1?(o=new Uint8Array(l),u.forEach((function(e){o.set(e,s),s+=e.length}))):o=u[0]?new Uint8Array(u[0]):new Uint8Array,o}},this.flush=function(){var e,t,o=0,a=0,s=[];do{if(n.next_out_index=0,n.avail_out=r,1!=(e=n.deflate(4))&&0!=e)throw new Error("deflating: "+n.msg);r-n.avail_out>0&&s.push(i.slice(0,n.next_out_index)),a+=n.next_out_index}while(n.avail_in>0||0===n.avail_out);return n.deflateEnd(),t=new Uint8Array(a),s.forEach((function(e){t.set(e,o),o+=e.length})),t}},Inflate:function(e){var t=new dD,n=e&&e.chunkSize?Math.floor(2*e.chunkSize):131072,r=new Uint8Array(n),i=!1;t.inflateInit(),t.next_out=r,this.append=function(e,o){var a,s,l=[],u=0,c=0,h=0;if(0!==e.length){t.next_in_index=0,t.next_in=e,t.avail_in=e.length;do{if(t.next_out_index=0,t.avail_out=n,0!==t.avail_in||i||(t.next_in_index=0,i=!0),a=t.inflate(0),i&&a===IN){if(0!==t.avail_in)throw new Error("inflating: bad input")}else if(a!==TN&&a!==SN)throw new Error("inflating: "+t.msg);if((i||a===SN)&&t.avail_in===e.length)throw new Error("inflating: bad input");t.next_out_index&&(t.next_out_index===n?l.push(new Uint8Array(r)):l.push(r.subarray(0,t.next_out_index))),h+=t.next_out_index,o&&t.next_in_index>0&&t.next_in_index!=u&&(o(t.next_in_index),u=t.next_in_index)}while(t.avail_in>0||0===t.avail_out);return l.length>1?(s=new Uint8Array(h),l.forEach((function(e){s.set(e,c),c+=e.length}))):s=l[0]?new Uint8Array(l[0]):new Uint8Array,s}},this.flush=function(){t.inflateEnd()}}});var DU=function(){return[{label:"DragonBones Json",value:"json"}]},LU=function(){return[{label:"5.5",value:"5.5"}]},FU=function(){return[{label:"\u7eb9\u7406\u96c6",value:"texture"}]},BU=function(e){var t=e.show,n=e.store,r=Pt((0,a.useState)("json"),2),i=r[0],o=r[1],s=Pt((0,a.useState)("5.5"),2),l=s[0],u=s[1],c=Pt((0,a.useState)("texture"),2),h=c[0],d=c[1],f=Pt((0,a.useState)(1),2),p=(f[0],f[1],Pt((0,a.useState)(!0),2)),v=p[0],m=p[1],g=Pt((0,a.useState)(!0),2),y=g[0],b=g[1],_=Pt((0,a.useState)(!0),2),x=_[0],E=_[1],w=function(){var e=Ee(_e().mark((function e(){var t,r,i,o,a,s,l,u,c,h,d,f,p,m,g,b,_,E,w;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,r=void 0,i=void 0,o=void 0,a=void 0,s=!1,!y){e.next=15;break}return e.next=9,OT.exportNewTexture(n.rootState.runtime.dragonbones,n.rootState.library);case 9:l=e.sent,u=Pt(l,3),c=u[0],h=u[1],d=u[2],c&&h&&d?(t=d,r={textureConfigFile:c,images:h},a="texture",s=!0):s=!1;case 15:if(!v){e.next=24;break}if(t){e.next=20;break}return e.next=19,OT.getExportTextureIdNameMap(n.rootState.runtime.dragonbones,n.rootState.library);case 19:t=e.sent;case 20:f=n.rootState.editor.dopesheet.fps||30,p=xp.exportDragonbonesData(n.rootState.runtime.dragonbones,void 0,t,f),i=p,o=p.name;case 24:if(x){if(m=[],g="",i&&(m.push({type:"json",name:"".concat(o,".json"),data:i}),g=o),s&&r){if(m.push({type:"json",name:"".concat(a,".json"),data:r.textureConfigFile}),r.images)if(1===r.images.length)m.push({type:"img",name:"".concat(a,".png"),data:r.images[0]});else for(b=0;b<r.images.length;b++)_=r.images[b],E=a+"_"+b+".png",m.push({type:"img",name:E,data:_});g||(g=a)}g&&m.length>0&&PU(m,g+".zip")}else if(i&&AU(i,o+".json"),s&&r&&(AU(r.textureConfigFile,a+".json"),r.images))if(1===r.images.length)IU(r.images[0],a+".png");else for(w=0;w<r.images.length;w++)IU(r.images[w],a+"_"+w+".png");n.commit(W.CLOSE_EXPORT_WINDOW,!1);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ff.jsx)(Zc,{title:"\u5bfc\u51fa",open:t,onOk:w,onCancel:function(){n.commit(W.CLOSE_EXPORT_WINDOW,!1)},children:(0,ff.jsxs)("div",{className:"export-window",children:[(0,ff.jsxs)("div",{className:"export-block",children:[(0,ff.jsxs)("div",{className:"export-item",children:[(0,ff.jsx)("span",{className:"export-item-label",children:"\u6570\u636e\u7c7b\u578b"}),(0,ff.jsx)(JR,{getItems:DU,value:i,onChange:function(e){o(e)}})]}),(0,ff.jsxs)("div",{className:"export-item",children:[(0,ff.jsx)("span",{className:"export-item-label",children:"\u6570\u636e\u7248\u672c"}),(0,ff.jsx)(JR,{getItems:LU,value:l,onChange:function(e){u(e)}})]})]}),(0,ff.jsx)("div",{className:"export-block",children:(0,ff.jsxs)("div",{className:"export-item",children:[(0,ff.jsx)("span",{className:"export-item-label",children:"\u7eb9\u7406\u7c7b\u578b"}),(0,ff.jsx)(JR,{getItems:FU,value:h,onChange:function(e){d(e)}})]})}),(0,ff.jsx)("div",{className:"export-block",children:(0,ff.jsxs)("div",{className:"export-item export-content",children:[(0,ff.jsx)(eN,{value:v,onChange:function(e){m(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"\u6570\u636e"}),(0,ff.jsx)(eN,{value:y,onChange:function(e){b(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"\u7eb9\u7406"}),(0,ff.jsx)(eN,{value:x,onChange:function(e){E(e)},booleanIcons:["icon-checkbox-checked","icon-checkbox"],children:"zip"})]})})]})})},UU=function(e){v(n,dragonBones.TextureAtlasData);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._renderTexture=null,e}return f(n,[{key:"_onClear",value:function(){jm(m(n.prototype),"_onClear",this).call(this),this._renderTexture,this._renderTexture=null}},{key:"createTexture",value:function(){return dragonBones.BaseObject.borrowObject(HU)}},{key:"renderTexture",get:function(){return this._renderTexture},set:function(e){if(this._renderTexture!==e)if(this._renderTexture=e,null!==this._renderTexture)for(var t in this.textures){var n=this.textures[t];n.renderTexture=new wy(this._renderTexture,new xg(n.region.x,n.region.y,n.region.width,n.region.height),new xg(n.region.x,n.region.y,n.region.width,n.region.height),new xg(0,0,n.region.width,n.region.height),n.rotated)}else for(var r in this.textures){this.textures[r].renderTexture=null}}},{key:"getTexture",value:function(e){return e in this.textures?this.textures[e]:null}}],[{key:"toString",value:function(){return"[class dragonBones.PixiTextureAtlasData]"}}]),n}(),HU=function(e){v(n,dragonBones.TextureData);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).renderTexture=null,e}return f(n,[{key:"_onClear",value:function(){jm(m(n.prototype),"_onClear",this).call(this),null!==this.renderTexture&&this.renderTexture.destroy(!1),this.renderTexture=null}}],[{key:"toString",value:function(){return"[class dragonBones.PixiTextureData]"}}]),n}(),jU=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).debugDraw=!1,e._debugDraw=!1,e._armature=null,e._debugDrawer=null,e}return f(n,[{key:"dbInit",value:function(e){this._armature=e}},{key:"dbClear",value:function(){null!==this._debugDrawer&&this._debugDrawer.destroy({children:!0,texture:!0,baseTexture:!0}),this._armature=null,this._debugDrawer=null,jm(m(n.prototype),"destroy",this).call(this)}},{key:"dbUpdate",value:function(){var e=dragonBones.DragonBones.debugDraw||this.debugDraw;if(e||this._debugDraw)if(this._debugDraw=e,this._debugDraw){if(null===this._debugDrawer){this._debugDrawer=new f_(wy.EMPTY);var t=new iw;this._debugDrawer.addChild(t)}this.addChild(this._debugDrawer);var n=this._debugDrawer.getChildAt(0);n.clear();for(var r=this._armature.getBones(),i=0,o=r.length;i<o;++i){var a=r[i],s=a.boneData.length,l=a.globalTransformMatrix.tx,u=a.globalTransformMatrix.ty,c=l+a.globalTransformMatrix.a*s,h=u+a.globalTransformMatrix.b*s;n.lineStyle(2,65535,.7),n.moveTo(l,u),n.lineTo(c,h),n.lineStyle(0,0,0),n.beginFill(65535,.7),n.drawCircle(l,u,3),n.endFill()}for(var d=this._armature.getSlots(),f=0,p=d.length;f<p;++f){var v=d[f],m=v.boundingBoxData;if(m){var g=this._debugDrawer.getChildByName(v.name);switch(g||((g=new iw).name=v.name,this._debugDrawer.addChild(g)),g.clear(),g.lineStyle(2,16711935,.7),m.type){case dragonBones.BoundingBoxType.Rectangle:g.drawRect(.5*-m.width,.5*-m.height,m.width,m.height);break;case dragonBones.BoundingBoxType.Ellipse:g.drawEllipse(.5*-m.width,.5*-m.height,m.width,m.height);break;case dragonBones.BoundingBoxType.Polygon:for(var y=m.vertices,b=0,_=y.length;b<_;b+=2){var x=y[b],E=y[b+1];0===b?g.moveTo(x,E):g.lineTo(x,E)}g.lineTo(y[0],y[1])}g.endFill(),v.updateTransformAndMatrix(),v.updateGlobalTransform();var w=v.global;g.setTransform(w.x,w.y,w.scaleX,w.scaleY,w.rotation,w.skew,0,v._pivotX,v._pivotY)}else{var T=this._debugDrawer.getChildByName(v.name);T&&this._debugDrawer.removeChild(T)}}}else null!==this._debugDrawer&&this._debugDrawer.parent===this&&this.removeChild(this._debugDrawer)}},{key:"dispose",value:function(){null!==this._armature&&(this._armature.dispose(),this._armature=null)}},{key:"destroy",value:function(){this.dispose()}},{key:"dispatchDBEvent",value:function(e,t){this.emit(e,t)}},{key:"hasDBEventListener",value:function(e){return this.listenerCount(e)>0}},{key:"addDBEventListener",value:function(e,t,n){this.addListener(e,t,n)}},{key:"removeDBEventListener",value:function(e,t,n){this.removeListener(e,t,n)}},{key:"armature",get:function(){return this._armature}},{key:"animation",get:function(){return this._armature.animation}}]),n}(f_),zU=function(e){return e[e.WeigthBoneCount=0]="WeigthBoneCount",e[e.WeigthFloatOffset=1]="WeigthFloatOffset",e[e.WeigthBoneIndices=2]="WeigthBoneIndices",e[e.MeshVertexCount=0]="MeshVertexCount",e[e.MeshTriangleCount=1]="MeshTriangleCount",e[e.MeshFloatOffset=2]="MeshFloatOffset",e[e.MeshWeightOffset=3]="MeshWeightOffset",e[e.MeshVertexIndices=4]="MeshVertexIndices",e[e.GeometryVertexCount=0]="GeometryVertexCount",e[e.GeometryTriangleCount=1]="GeometryTriangleCount",e[e.GeometryFloatOffset=2]="GeometryFloatOffset",e[e.GeometryWeightOffset=3]="GeometryWeightOffset",e[e.GeometryVertexIndices=4]="GeometryVertexIndices",e[e.TimelineScale=0]="TimelineScale",e[e.TimelineOffset=1]="TimelineOffset",e[e.TimelineKeyFrameCount=2]="TimelineKeyFrameCount",e[e.TimelineFrameValueCount=3]="TimelineFrameValueCount",e[e.TimelineFrameValueOffset=4]="TimelineFrameValueOffset",e[e.TimelineFrameOffset=5]="TimelineFrameOffset",e[e.FramePosition=0]="FramePosition",e[e.FrameTweenType=1]="FrameTweenType",e[e.FrameTweenEasingOrCurveSampleCount=2]="FrameTweenEasingOrCurveSampleCount",e[e.FrameCurveSamples=3]="FrameCurveSamples",e[e.FFDTimelineMeshOffset=0]="FFDTimelineMeshOffset",e[e.FFDTimelineFFDCount=1]="FFDTimelineFFDCount",e[e.FFDTimelineValueCount=2]="FFDTimelineValueCount",e[e.FFDTimelineValueOffset=3]="FFDTimelineValueOffset",e[e.FFDTimelineFloatOffset=4]="FFDTimelineFloatOffset",e}(zU||{}),VU=function(e){return e[e.Bone=0]="Bone",e[e.Surface=1]="Surface",e}(VU||{}),GU=function(e){v(n,dragonBones.Slot);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._textureScale=void 0,e._renderDisplay=void 0,e}return f(n,[{key:"_onClear",value:function(){jm(m(n.prototype),"_onClear",this).call(this),this._textureScale=1,this._renderDisplay=null,this._updateTransform="3"===r_[0]?this._updateTransformV3:this._updateTransformV4}},{key:"_initDisplay",value:function(e,t){}},{key:"_disposeDisplay",value:function(e,t){t||e.destroy()}},{key:"_onUpdateDisplay",value:function(){this._renderDisplay=this._display?this._display:this._rawDisplay}},{key:"_addDisplay",value:function(){this._armature.display.addChild(this._renderDisplay)}},{key:"_replaceDisplay",value:function(e){var t=this._armature.display,n=e;t.addChild(this._renderDisplay),t.swapChildren(this._renderDisplay,n),t.removeChild(n),this._textureScale=1}},{key:"_removeDisplay",value:function(){this._renderDisplay.parent.removeChild(this._renderDisplay)}},{key:"_updateZOrder",value:function(){var e=this._armature.display;e.getChildIndex(this._renderDisplay)!==this._zOrder&&e.addChildAt(this._renderDisplay,this._zOrder)}},{key:"_updateVisible",value:function(){this._renderDisplay.visible=this._parent.visible&&this._visible}},{key:"_updateBlendMode",value:function(){if(this._renderDisplay instanceof f_)switch(this._blendMode){case 0:this._renderDisplay.blendMode=Mp.NORMAL;break;case 1:this._renderDisplay.blendMode=Mp.ADD;break;case 3:this._renderDisplay.blendMode=Mp.DARKEN;break;case 4:this._renderDisplay.blendMode=Mp.DIFFERENCE;break;case 6:this._renderDisplay.blendMode=Mp.HARD_LIGHT;break;case 9:this._renderDisplay.blendMode=Mp.LIGHTEN;break;case 10:this._renderDisplay.blendMode=Mp.MULTIPLY;break;case 11:this._renderDisplay.blendMode=Mp.OVERLAY;break;case 12:this._renderDisplay.blendMode=Mp.SCREEN}}},{key:"_updateColor",value:function(){var e=this._colorTransform.alphaMultiplier*this._globalAlpha;if(this._renderDisplay.alpha=e,this._renderDisplay instanceof f_||this._renderDisplay instanceof gw){var t=(Math.round(255*this._colorTransform.redMultiplier)<<16)+(Math.round(255*this._colorTransform.greenMultiplier)<<8)+Math.round(255*this._colorTransform.blueMultiplier);this._renderDisplay.tint=t}}},{key:"_updateFrame",value:function(){var e=this._textureData;if(this._displayIndex>=0&&null!==this._display&&null!==e){var t=e.parent;null!==this._armature.replacedTexture&&(null===this._armature._replaceTextureAtlasData?((t=dragonBones.BaseObject.borrowObject(UU)).copyFrom(e.parent),t.renderTexture=this._armature.replacedTexture,this._armature._replaceTextureAtlasData=t):t=this._armature._replaceTextureAtlasData,e=t.getTexture(e.name));var n=e.renderTexture;if(null!==n){if(null!==this._geometryData){var r=this._geometryData.data,i=r.intArray,o=r.floatArray,a=i[this._geometryData.offset+zU.GeometryVertexCount],s=i[this._geometryData.offset+zU.GeometryTriangleCount],l=i[this._geometryData.offset+zU.GeometryFloatOffset];l<0&&(l+=65536);for(var u=l+2*a,c=this._armature._armatureData.scale,h=this._renderDisplay,d=new Float32Array(2*a),f=new Float32Array(2*a),p=new Uint16Array(3*s),v=0,m=2*a;v<m;++v)d[v]=o[l+v]*c;for(var g=0;g<3*s;++g)p[g]=i[this._geometryData.offset+zU.GeometryVertexIndices+g];for(var y=0,b=2*a;y<b;y+=2){var _=o[u+y],x=o[u+y+1];e.rotated?(f[y]=1-x,f[y+1]=_):(f[y]=_,f[y+1]=x)}this._textureScale=1,h.texture=n,h.vertices=d,h.uvBuffer.update(f),h.geometry.addIndex(p);var E=null!==this._geometryData.weight,w=this._parent._boneData.type!==VU.Bone;(E||w)&&this._identityTransform()}else{this._textureScale=e.parent.scale*this._armature._armatureData.scale,this._renderDisplay.texture=n}return void(this._visibleDirty=!0)}}if(null!==this._geometryData){var T=this._renderDisplay;T.texture=null,T.x=0,T.y=0,T.visible=!1}else{var S=this._renderDisplay;S.texture=null,S.x=0,S.y=0,S.visible=!1}}},{key:"_updateMesh",value:function(){var e=this._armature._armatureData.scale,t=this._displayFrame.deformVertices,n=this._geometryBones,r=this._geometryData,i=r.weight,o=t.length>0&&r.inheritDeform,a=this._renderDisplay;if(null!==i){var s=r.data,l=s.intArray,u=s.floatArray,c=l[r.offset+zU.GeometryVertexCount],h=l[i.offset+zU.WeigthFloatOffset];h<0&&(h+=65536);for(var d=0,f=0,p=i.offset+zU.WeigthBoneIndices+n.length,v=h,m=0;d<c;++d){for(var g=l[p++],y=0,b=0,_=0;_<g;++_){var x=n[l[p++]];if(null!==x){var E=x.globalTransformMatrix,w=u[v++],T=u[v++]*e,S=u[v++]*e;o&&(T+=t[m++],S+=t[m++]),y+=(E.a*T+E.c*S+E.tx)*w,b+=(E.b*T+E.d*S+E.ty)*w}}a.vertices[f++]=y,a.vertices[f++]=b}}else{var k=this._parent._boneData.type!==VU.Bone,C=r.data,A=C.intArray,I=C.floatArray,O=A[r.offset+zU.GeometryVertexCount],P=A[r.offset+zU.GeometryFloatOffset];P<0&&(P+=65536);for(var M=0,R=2*O;M<R;M+=2){var N=I[P+M]*e,D=I[P+M+1]*e;if(o&&(N+=t[M],D+=t[M+1]),k){var L=this._parent._getGlobalTransformMatrix(N,D);a.vertices[M]=L.a*N+L.c*D+L.tx,a.vertices[M+1]=L.b*N+L.d*D+L.ty}else a.vertices[M]=N,a.vertices[M+1]=D}}}},{key:"_updateTransform",value:function(){throw new Error}},{key:"_updateTransformV3",value:function(){this.updateGlobalTransform();var e=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var t=e.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=e.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(t,n,e.scaleX*this._textureScale,e.scaleY*this._textureScale,e.rotation,e.skew,0)}else this._renderDisplay.position.set(e.x,e.y),this._renderDisplay.rotation=e.rotation,this._renderDisplay.skew.set(e.skew,0),this._renderDisplay.scale.set(e.scaleX,e.scaleY)}},{key:"_updateTransformV4",value:function(){this.updateGlobalTransform();var e=this.global;if(this._renderDisplay===this._rawDisplay||this._renderDisplay===this._meshDisplay){var t=e.x-(this.globalTransformMatrix.a*this._pivotX+this.globalTransformMatrix.c*this._pivotY),n=e.y-(this.globalTransformMatrix.b*this._pivotX+this.globalTransformMatrix.d*this._pivotY);this._renderDisplay.setTransform(t,n,e.scaleX*this._textureScale,e.scaleY*this._textureScale,e.rotation,-e.skew,0)}else this._renderDisplay.position.set(e.x,e.y),this._renderDisplay.rotation=e.rotation,this._renderDisplay.skew.set(-e.skew,0),this._renderDisplay.scale.set(e.scaleX,e.scaleY)}},{key:"_identityTransform",value:function(){this._renderDisplay.setTransform(0,0,1,1,0,0,0)}}],[{key:"toString",value:function(){return"[class dragonBones.PixiSlot]"}}]),n}(),WU=function(e){v(n,dragonBones.BaseFactory);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(u(this,n),e=t.call(this,r),null===n._dragonBonesInstance){var o=new jU(wy.EMPTY);n._dragonBonesInstance=new dragonBones.DragonBones(o),i&&Nb.shared.add(n._clockHandler,n)}return e._dragonBones=n._dragonBonesInstance,e}return f(n,[{key:"_buildTextureAtlasData",value:function(e,t){return e?e.renderTexture=t:e=dragonBones.BaseObject.borrowObject(UU),e}},{key:"_buildArmature",value:function(e){var t=dragonBones.BaseObject.borrowObject(dragonBones.Armature),n=new jU(wy.EMPTY);return t.init(e.armature,n,n,this._dragonBones),t}},{key:"_buildSlot",value:function(e,t,n){var r=dragonBones.BaseObject.borrowObject(GU);return r.init(t,n,new f_(wy.EMPTY),new gw),r}},{key:"buildArmatureDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=this.buildArmature(e,t||"",n||"",r||"");return null!==i?(this._dragonBones.clock.add(i),i.display):null}},{key:"getTextureDisplay",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this._getTextureData(null!==t?t:"",e);return null!==n&&null!==n.renderTexture?new f_(n.renderTexture):null}},{key:"soundEventManager",get:function(){return this._dragonBones.eventManager}}],[{key:"_clockHandler",value:function(e){this._dragonBonesInstance.advanceTime(e/Zp.TARGET_FPMS*.001)}},{key:"advanceTime",value:function(e){this._dragonBonesInstance.advanceTime(e)}},{key:"factory",get:function(){return null===n._factory&&(n._factory=new n(null,n.useSharedTicker)),n._factory}},{key:"newInstance",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return null===n._factory&&(n._factory=new n(null,e)),n._factory}}]),n}();WU._dragonBonesInstance=null,WU._factory=null,WU.useSharedTicker=!0;var XU=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,{width:e||512,height:r||512,backgroundColor:2960685}))._renderer=new c_,i._background=void 0,i._resources=[],i._pixiResources=void 0,i.armatureDisplay=void 0,i._stageWidth=void 0,i._stageHeight=void 0,i._centerX=0,i._centerY=0,i._scale=1,i.justStageRightDown=!1,i.rightDownX=0,i.rightDownY=0,i.downStageX=0,i.downStageY=0,i.onStageMouseRightMove=function(e){if(i.justStageRightDown)i.justStageRightDown=!1,i.rightDownX=i._centerX,i.rightDownY=i._centerY,i.downStageX=e.clientX,i.downStageY=e.clientY;else{var t=e.clientX-i.downStageX,n=e.clientY-i.downStageY;i.setCenter(i.rightDownX+t,i.rightDownY+n)}},i._stageHeight=r,i._stageWidth=e,i.initStage(),i}return f(n,[{key:"initStage",value:function(){this.initBackground(),this.initArmatureContainer(),this.initUI(),this.initControl(),this.setCenter(.5*this._stageWidth,.5*this._stageHeight),this.setScale(1)}},{key:"resizeStage",value:function(e,t){this._stageWidth===e&&this._stageHeight===t||(this._stageWidth=e,this._stageHeight=t,this._background.resizeStage(this._stageWidth,this._stageHeight))}},{key:"setScale",value:function(e){this._scale=e,this._background.setScale(e),this._renderer.scale.set(e)}},{key:"setCenter",value:function(e,t){this._centerX=e,this._centerY=t,this._background.setCenter(e,t),this._renderer.position.set(e,t)}},{key:"initBackground",value:function(){this._background=new GC(this),this._background.setScale(1),this._background.resizeStage(this._stageWidth,this._stageHeight),this._background.setCenter(.5*this._stageWidth,.5*this._stageHeight),this.stage.addChild(this._background)}},{key:"initArmatureContainer",value:function(){this.stage.addChild(this._renderer)}},{key:"initUI",value:function(){}},{key:"initControl",value:function(){this.stage.eventMode="dynamic",this.stage.on("rightdown",this.onStageMouseRightDown,this),this.stage.on("wheel",this.onSheetMouseWheel,this)}},{key:"onStageMouseRightDown",value:function(e){this.justStageRightDown=!0,this.stage.on("mousemove",this.onStageMouseRightMove,this),document.addEventListener("mouseup",this.onStageMouseRightUp.bind(this))}},{key:"onStageMouseRightUp",value:function(e){this.justStageRightDown=!1,this.stage.off("mousemove",this.onStageMouseRightMove,this),document.removeEventListener("mouseup",this.onStageMouseRightUp)}},{key:"onSheetMouseWheel",value:function(e){var t=this._scale*(e.deltaY>0?.9:1.1);t<.1?t=.1:t>10&&(t=10),this.setScale(t)}},{key:"setPreviewData",value:function(){var e=Ee(_e().mark((function e(t,n,r,i){var o,a,s,l,u,c,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o in this.clear(),r)a=r[o],Ax.add(o,a.url||a.data),this._resources.push(o);return e.next=7,Ax.load(this._resources);case 7:for(u in s=e.sent,this._pixiResources=s,(l=WU.factory).parseDragonBonesData(t),n)c=n[u],l.parseTextureAtlasData(c,this._pixiResources[c.fileId]);h=t.armature[0],i||(i=h.animation&&h.animation.length?h.animation[0].name:""),this.armatureDisplay=l.buildArmatureDisplay(h.name,t.name),this.armatureDisplay.animation.play(i,0),this.armatureDisplay.x=0,this.armatureDisplay.y=0,this.armatureDisplay.debugDraw=!0,this._renderer.addChild(this.armatureDisplay);case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"clear",value:function(){for(var e in this._renderer.removeChildren(),this._pixiResources)this._pixiResources[e].destroy(!0);this._pixiResources={},this._resources.length=0,Ax.reset(),this.armatureDisplay&&(this.armatureDisplay.dispose(),this.armatureDisplay=null),WU.factory.clear(!0)}},{key:"_renderHandler",value:function(e){}},{key:"_startRenderTick",value:function(){Nb.shared.add(this._renderHandler,this)}},{key:"createText",value:function(e){var t=new Rw(e,{align:"center",fill:16777215});return t.text=e,t.scale.x=.7,t.scale.y=.7,t.x=.5*-t.width,t.y=.5*this.stageHeight-100,this.stage.addChild(t),t}},{key:"stageWidth",get:function(){return this._renderer.width}},{key:"stageHeight",get:function(){return this._renderer.height}}]),n}(G_);XU.BACKGROUND_URL="resource/background.png";var YU,KU=!1,qU=function(){var e=Ee(_e().mark((function e(t){var n,r,i,o,a,s,l,u,c,h,d,f;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.rootState.runtime.editing.editingArmatureId,r=t.rootState.runtime.editing.editMode,i=t.rootState.runtime.editing.selectedAnimationId,o="",r===Y.ANIMATION&&i&&(a=t.rootState.runtime.dragonbones.animationMap[i])&&(o=a.name),s=t.rootState.editor.dopesheet.fps,e.next=8,OT.exportPreviewTexture(t.rootState.runtime.dragonbones,t.rootState.library,n,"id");case 8:l=e.sent,u=Pt(l,2),c=u[0],h=u[1],d=xp.exportDragonbonesData(t.rootState.runtime.dragonbones,n,h,s),f=OT.exportFiles(c,t.rootState.library),YU.setPreviewData(d,c,f,o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ZU=function(e){var t=e.show,r=e.store,i=(0,a.useRef)(null);return(0,a.useEffect)((function(){!function(e,t,r){r&&(e&&!KU?(KU=!0,window.PIXI||(window.PIXI=n),YU=new XU(e.clientWidth,e.clientHeight),e.appendChild(YU.view),qU(t)):YU&&qU(t))}(i.current,r,t)}),[t]),(0,ff.jsx)(Zc,{title:"\u9884\u89c8",open:t,onOk:function(){r.commit(W.CLOSE_PREVIEW_WINDOW,!1)},onCancel:function(){r.commit(W.CLOSE_PREVIEW_WINDOW,!1)},okText:"\u5173\u95ed",className:"preview-modal",footer:null,children:(0,ff.jsx)("div",{className:"preview-window",ref:i})})},$U=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e){var t=r.props.onChange,n=r.state.value;t&&t(!n)},r.curValue=e.value,r.state={value:r.curValue,prevValue:r.curValue},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value?"icon-checkbox-checked":"icon-checkbox";return this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsxs)("div",{className:"boolean-check",onClick:this.onChange,children:[(0,ff.jsx)(KT,{type:e}),(0,ff.jsx)("span",{children:this.props.label})]})}):(0,ff.jsxs)("div",{className:"boolean-check",onClick:this.onChange,children:[(0,ff.jsx)(KT,{type:e}),(0,ff.jsx)("span",{children:this.props.label})]})}}]),n}(a.Component),QU=void 0,JU=function(e,t,n){return function(){n(e,t)}},eH=function(e){var t=e.store,n=(e.eventBus,e.store.state.runtime.editing.meshEditTool),r=e.store.state.runtime.editing.selectedSlotIds,i=e.store.state.runtime.editing.editingArmatureId,o=e.store.state.runtime.dragonbones.armatureMap[i].slots.map[r[0]],s=PT.getSlotCurDisplay(o),l=PT.getMeshPointNumber(s),u=Pt((0,a.useState)(n.deformed),2),c=u[0],h=u[1],d=Pt((0,a.useState)(n.curTool===ee.EDIT),2),f=d[0],p=d[1],v=Pt((0,a.useState)(n.curTool===ee.ADD),2),m=v[0],g=v[1],y=Pt((0,a.useState)(n.curTool===ee.DELETE),2),b=y[0],_=y[1],x=Pt((0,a.useState)(n.curTool===ee.DRAW),2),E=x[0],w=x[1],T=Pt((0,a.useState)(l),2),S=(T[0],T[1]),k=Pt((0,a.useState)(n.autoOutlineNum),2),C=k[0],A=k[1];(0,a.useEffect)((function(){e.eventBus.on(W.UPDATE_MESH_TOOL,(function(){var t=e.store.state.runtime.editing.meshEditTool;h(t.deformed),p(t.curTool===ee.EDIT),g(t.curTool===ee.ADD),_(t.curTool===ee.DELETE),w(t.curTool===ee.DRAW),A(t.autoOutlineNum)}),QU),e.eventBus.on(H.UPDATE_MESH,(function(){var e=PT.getMeshPointNumber(s);S(e)}),QU)}),[]);var I=function(e,n){switch(e){case"deformed":if(E)return;t.commit(W.UPDATE_MESH_TOOL,{deformed:n});break;case"editTool":if(f)return;t.commit(W.UPDATE_MESH_TOOL,{curTool:ee.EDIT});break;case"addTool":if(m)return;t.commit(W.UPDATE_MESH_TOOL,{curTool:ee.ADD});break;case"deleteTool":if(b)return;t.commit(W.UPDATE_MESH_TOOL,{curTool:ee.DELETE});break;case"drawTool":if(E)return;yf.confirm("\u63d0\u793a","\u91cd\u7ed8\u7f51\u683c\u8fb9\u7ebf\u4f1a\u5220\u9664\u5f53\u524d\u9009\u4e2d\u56fe\u7247\u4e0a\u6240\u6709\u5df2\u6dfb\u52a0\u7684\u7f51\u683c\u70b9\uff0c\u5220\u9664\u6240\u6709\u7ed1\u5b9a\u7684\u9aa8\u9abc\u6743\u91cd\uff0c\u5e76\u5220\u9664\u76f8\u5bf9\u5e94\u7684\u65f6\u95f4\u8f74\u5173\u952e\u5e27\uff0c\u60a8\u786e\u5b9a\u8981\u624b\u52a8\u91cd\u7ed8\u7f51\u683c\u8fb9\u7ebf\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88",(function(){t.commit(W.UPDATE_MESH_TOOL,{curTool:ee.DRAW})}));break;case"resetTool":yf.confirm("\u63d0\u793a","\u91cd\u7f6e\u4f1a\u5220\u9664\u5f53\u524d\u9009\u4e2d\u56fe\u7247\u4e0a\u6240\u6709\u5df2\u6dfb\u52a0\u7684\u7f51\u683c\u70b9\uff0c\u5220\u9664\u6240\u6709\u7ed1\u5b9a\u7684\u9aa8\u9abc\u6743\u91cd\uff0c\u5e76\u5220\u9664\u76f8\u5bf9\u5e94\u7684\u65f6\u95f4\u8f74\u5173\u952e\u5e27\uff0c\u60a8\u786e\u5b9a\u8981\u91cd\u7f6e\u5417\uff1f","\u786e\u5b9a","\u53d6\u6d88",(function(){t.dispatch(U.RESET_MESH,{armatureId:i,slotId:o.id,displayId:s.id})}));break;case"autoOutline":default:break;case"autoOutlineNum":if(C===n)return;t.commit(W.UPDATE_MESH_TOOL,{autoOutlineNum:n});break;case"meshToolClose":t.dispatch(X.CLOSE_MESH_EDIT_TOOL)}};return(0,ff.jsxs)("div",{className:"mesh-edit-tool",children:[(0,ff.jsxs)("div",{className:"mesh-edit-tool-row",children:[(0,ff.jsx)("span",{children:"\u7f16\u8f91\u7f51\u683c\u5de5\u5177\u7bb1"}),(0,ff.jsx)($U,{label:"\u53d8\u5f62",value:c,onChange:JU("deformed",!c,I)}),(0,ff.jsx)(rI,{icon:"icon-close",clickCallback:JU("meshToolClose",!0,I),tooltip:"\u5173\u95ed"})]}),(0,ff.jsxs)("div",{className:"mesh-edit-tool-row",children:[(0,ff.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,ff.jsx)(rI,{icon:"icon-vector-shape-pen-edit-copy",selectedIcon:"icon-vector-shape-pen-edit",clickCallback:JU("editTool",!f,I),tooltip:"\u7f16\u8f91\u5de5\u5177",selected:f,controlled:!0,toggle:!0})}),(0,ff.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,ff.jsx)(rI,{icon:"icon-vector-shape-pen-add-copy",selectedIcon:"icon-vector-shape-pen-add",tooltip:"\u6dfb\u52a0\u5de5\u5177",changeCallback:JU("addTool",!m,I),selected:m,controlled:!0,toggle:!0})}),(0,ff.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,ff.jsx)(rI,{icon:"icon-vector-shape-pen-delete-copy",selectedIcon:"icon-vector-shape-pen-delete",tooltip:"\u5220\u9664\u5de5\u5177",changeCallback:JU("deleteTool",!b,I),selected:b,controlled:!0,toggle:!0})}),(0,ff.jsx)("span",{className:"mesh-edit-tool-gap"}),(0,ff.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,ff.jsx)(rI,{icon:"icon-vector-polygon",selectedIcon:"icon-vector-polygon-copy",tooltip:"\u7ed8\u5236\u8fb9\u6846",changeCallback:JU("drawTool",!E,I),selected:E,controlled:!0,toggle:!0})}),(0,ff.jsx)("span",{className:"mesh-edit-tool-row-item",children:(0,ff.jsx)(rI,{icon:"icon-icon_redraw",tooltip:"\u91cd\u7f6e",clickCallback:JU("resetTool",!0,I)})})]})]})};function tH(e){var t=e.responseText||e.response;if(!t)return t;try{return JSON.parse(t)}catch(Pv){return t}}function nH(e){var t=new XMLHttpRequest;e.onProgress&&t.upload&&(t.upload.onprogress=function(t){t.total>0&&(t.percent=t.loaded/t.total*100),e.onProgress(t)});var n=new FormData;e.data&&Object.keys(e.data).forEach((function(t){var r=e.data[t];Array.isArray(r)?r.forEach((function(e){n.append("".concat(t,"[]"),e)})):n.append(t,r)})),e.file instanceof Blob?n.append(e.filename,e.file,e.file.name):n.append(e.filename,e.file),t.onerror=function(t){e.onError(t)},t.onload=function(){return t.status<200||t.status>=300?e.onError(function(e,t){var n="cannot ".concat(e.method," ").concat(e.action," ").concat(t.status,"'"),r=new Error(n);return r.status=t.status,r.method=e.method,r.url=e.action,r}(e,t),tH(t)):e.onSuccess(tH(t),t)},t.open(e.method,e.action,!0),e.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var r=e.headers||{};return null!==r["X-Requested-With"]&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(r).forEach((function(e){null!==r[e]&&t.setRequestHeader(e,r[e])})),t.send(n),{abort:function(){t.abort()}}}var rH=+new Date,iH=0;function oH(){return"rc-upload-".concat(rH,"-").concat(++iH)}var aH=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",i=e.type||"",o=i.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();if(/^\*(\/\*)?$/.test(e))return!0;if("."===t.charAt(0)){var n=r.toLowerCase(),a=t.toLowerCase(),s=[a];return".jpg"!==a&&".jpeg"!==a||(s=[".jpg",".jpeg"]),s.some((function(e){return n.endsWith(e)}))}return/\/\*$/.test(t)?o===t.replace(/\/.*$/,""):i===t||!!/^\w+$/.test(t)&&(nt(!1,"Upload takes an invalidate 'accept' type '".concat(t,"'.Skip for check.")),!0)}))}return!0};var sH=function(e,t,n){var r=function e(r,i){r.path=i||"",r.isFile?r.file((function(e){n(e)&&(r.fullPath&&!e.webkitRelativePath&&(Object.defineProperties(e,{webkitRelativePath:{writable:!0}}),e.webkitRelativePath=r.fullPath.replace(/^\//,""),Object.defineProperties(e,{webkitRelativePath:{writable:!1}})),t([e]))})):r.isDirectory&&function(e,t){var n=e.createReader(),r=[];!function e(){n.readEntries((function(n){var i=Array.prototype.slice.apply(n);r=r.concat(i),i.length?e():t(r)}))}()}(r,(function(t){t.forEach((function(t){e(t,"".concat(i).concat(r.name,"/"))}))}))};e.forEach((function(e){r(e.webkitGetAsEntry())}))},lH=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],uH=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={uid:oH()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(t){var n=e.props,r=n.accept,i=n.directory,o=Pe(t.target.files).filter((function(e){return!i||aH(e,r)}));e.uploadFiles(o),e.reset()},e.onClick=function(t){var n=e.fileInput;if(n){var r=e.props,i=r.children,o=r.onClick;if(i&&"button"===i.type){var a=n.parentNode;a.focus(),a.querySelector("button").blur()}n.click(),o&&o(t)}},e.onKeyDown=function(t){"Enter"===t.key&&e.onClick(t)},e.onFileDrop=function(t){var n=e.props.multiple;if(t.preventDefault(),"dragover"!==t.type)if(e.props.directory)sH(Array.prototype.slice.call(t.dataTransfer.items),e.uploadFiles,(function(t){return aH(t,e.props.accept)}));else{var r=Pe(t.dataTransfer.files).filter((function(t){return aH(t,e.props.accept)}));!1===n&&(r=r.slice(0,1)),e.uploadFiles(r)}},e.uploadFiles=function(t){var n=Pe(t),r=n.map((function(t){return t.uid=oH(),e.processFile(t,n)}));Promise.all(r).then((function(t){var n=e.props.onBatchStart;null===n||void 0===n||n(t.map((function(e){return{file:e.origin,parsedFile:e.parsedFile}}))),t.filter((function(e){return null!==e.parsedFile})).forEach((function(t){e.post(t)}))}))},e.processFile=function(){var t=Ee(_e().mark((function t(n,r){var i,o,a,s,l,u,h,d,f;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.props.beforeUpload,o=n,!i){t.next=14;break}return t.prev=3,t.next=6,i(n,r);case 6:o=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),o=!1;case 12:if(!1!==o){t.next=14;break}return t.abrupt("return",{origin:n,parsedFile:null,action:null,data:null});case 14:if("function"!==typeof(a=e.props.action)){t.next=21;break}return t.next=18,a(n);case 18:s=t.sent,t.next=22;break;case 21:s=a;case 22:if("function"!==typeof(l=e.props.data)){t.next=29;break}return t.next=26,l(n);case 26:u=t.sent,t.next=30;break;case 29:u=l;case 30:return h="object"!==c(o)&&"string"!==typeof o||!o?n:o,d=h instanceof File?h:new File([h],n.name,{type:n.type}),(f=d).uid=n.uid,t.abrupt("return",{origin:n,data:u,parsedFile:f,action:s});case 35:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}(),e.saveFileInput=function(t){e.fileInput=t},e}return f(n,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(e){var t=this,n=e.data,r=e.origin,i=e.action,o=e.parsedFile;if(this._isMounted){var a=this.props,s=a.onStart,l=a.customRequest,u=a.name,c=a.headers,h=a.withCredentials,d=a.method,f=r.uid,p=l||nH,v={action:i,filename:u,data:n,file:o,headers:c,withCredentials:h,method:d||"post",onProgress:function(e){var n=t.props.onProgress;null===n||void 0===n||n(e,o)},onSuccess:function(e,n){var r=t.props.onSuccess;null===r||void 0===r||r(e,o,n),delete t.reqs[f]},onError:function(e,n){var r=t.props.onError;null===r||void 0===r||r(e,n,o),delete t.reqs[f]}};s(r),this.reqs[f]=p(v)}}},{key:"reset",value:function(){this.setState({uid:oH()})}},{key:"abort",value:function(e){var t=this.reqs;if(e){var n=e.uid?e.uid:e;t[n]&&t[n].abort&&t[n].abort(),delete t[n]}else Object.keys(t).forEach((function(e){t[e]&&t[e].abort&&t[e].abort(),delete t[e]}))}},{key:"render",value:function(){var e,t=this.props,n=t.component,r=t.prefixCls,i=t.className,o=t.disabled,s=t.id,l=t.style,u=t.multiple,c=t.accept,h=t.capture,d=t.children,f=t.directory,p=t.openFileDialogOnClick,v=t.onMouseEnter,m=t.onMouseLeave,g=Yn(t,lH),y=Ko()((b(e={},r,!0),b(e,"".concat(r,"-disabled"),o),b(e,i,i),e)),_=f?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},x=o?{}:{onClick:p?this.onClick:function(){},onKeyDown:p?this.onKeyDown:function(){},onMouseEnter:v,onMouseLeave:m,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return a.createElement(n,Ut({},x,{className:y,role:"button",style:l}),a.createElement("input",Ut({},Hu(g,{aria:!0,data:!0}),{id:s,type:"file",ref:this.saveFileInput,onClick:function(e){return e.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:c},_,{multiple:u,onChange:this.onChange},null!=h?{capture:h}:{})),d)}}]),n}(a.Component),cH=uH;function hH(){}var dH=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).uploader=void 0,e.saveUploader=function(t){e.uploader=t},e}return f(n,[{key:"abort",value:function(e){this.uploader.abort(e)}},{key:"render",value:function(){return a.createElement(cH,Ut({},this.props,{ref:this.saveUploader}))}}]),n}(a.Component);dH.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:hH,onError:hH,onSuccess:hH,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};var fH=dH,pH={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:t}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:e}}]}},name:"file",theme:"twotone"},vH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:pH}))};var mH=a.forwardRef(vH),gH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"},yH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:gH}))};var bH=a.forwardRef(yH),_H={icon:function(e,t){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:e}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:t}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:t}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:t}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:e}}]}},name:"picture",theme:"twotone"},xH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:_H}))};var EH=a.forwardRef(xH);function wH(e){return Object.assign(Object.assign({},e),{lastModified:e.lastModified,lastModifiedDate:e.lastModifiedDate,name:e.name,size:e.size,type:e.type,uid:e.uid,percent:0,originFileObj:e})}function TH(e,t){var n=Pe(t),r=n.findIndex((function(t){return t.uid===e.uid}));return-1===r?n.push(e):n[r]=e,n}function SH(e,t){var n=void 0!==e.uid?"uid":"name";return t.filter((function(t){return t[n]===e[n]}))[0]}var kH=function(e){return 0===e.indexOf("image/")},CH=function(e){if(e.type&&!e.thumbUrl)return kH(e.type);var t=e.thumbUrl||e.url||"",n=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("/"),t=e[e.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(t)||[""])[0]}(t);return!(!/^data:image\//.test(t)&&!/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(n))||!/^data:/.test(t)&&!n},AH=200;function IH(e){return new Promise((function(t){if(e.type&&kH(e.type)){var n=document.createElement("canvas");n.width=AH,n.height=AH,n.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(AH,"px; height: ").concat(AH,"px; z-index: 9999; display: none;"),document.body.appendChild(n);var r=n.getContext("2d"),i=new Image;if(i.onload=function(){var e=i.width,o=i.height,a=AH,s=AH,l=0,u=0;e>o?u=-((s=o*(AH/e))-a)/2:l=-((a=e*(AH/o))-s)/2,r.drawImage(i,l,u,a,s);var c=n.toDataURL();document.body.removeChild(n),t(c)},i.crossOrigin="anonymous",e.type.startsWith("image/svg+xml")){var o=new FileReader;o.addEventListener("load",(function(){o.result&&(i.src=o.result)})),o.readAsDataURL(e)}else i.src=window.URL.createObjectURL(e)}else t("")}))}var OH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"},PH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:OH}))};var MH=a.forwardRef(PH),RH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},NH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:RH}))};var DH=a.forwardRef(NH),LH={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"},FH=function(e,t){return a.createElement(Ls,Re(Re({},e),{},{ref:t,icon:LH}))};var BH=a.forwardRef(FH),UH={className:"",percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,style:{},trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},HH=function(){var e=(0,a.useRef)([]),t=(0,a.useRef)(null);return(0,a.useEffect)((function(){var n=Date.now(),r=!1;e.current.forEach((function(e){if(e){r=!0;var i=e.style;i.transitionDuration=".3s, .3s, .3s, .06s",t.current&&n-t.current<100&&(i.transitionDuration="0s, 0s")}})),r&&(t.current=Date.now())})),e.current},jH=["className","percent","prefixCls","strokeColor","strokeLinecap","strokeWidth","style","trailColor","trailWidth","transition"],zH=function(e){var t=e.className,n=e.percent,r=e.prefixCls,i=e.strokeColor,o=e.strokeLinecap,s=e.strokeWidth,l=e.style,u=e.trailColor,c=e.trailWidth,h=e.transition,d=Yn(e,jH);delete d.gapPosition;var f=Array.isArray(n)?n:[n],p=Array.isArray(i)?i:[i],v=HH(),m=s/2,g=100-s/2,y="M ".concat("round"===o?m:0,",").concat(m,"\n         L ").concat("round"===o?g:100,",").concat(m),b="0 0 100 ".concat(s),_=0;return a.createElement("svg",Ut({className:Ko()("".concat(r,"-line"),t),viewBox:b,preserveAspectRatio:"none",style:l},d),a.createElement("path",{className:"".concat(r,"-line-trail"),d:y,strokeLinecap:o,stroke:u,strokeWidth:c||s,fillOpacity:"0"}),f.map((function(e,t){var n=1;switch(o){case"round":n=1-s/100;break;case"square":n=1-s/2/100;break;default:n=1}var i={strokeDasharray:"".concat(e*n,"px, 100px"),strokeDashoffset:"-".concat(_,"px"),transition:h||"stroke-dashoffset 0.3s ease 0s, stroke-dasharray .3s ease 0s, stroke 0.3s linear"},l=p[t]||p[p.length-1];return _+=e,a.createElement("path",{key:t,className:"".concat(r,"-line-path"),d:y,strokeLinecap:o,stroke:l,strokeWidth:s,fillOpacity:"0",ref:function(e){v[t]=e},style:i})})))};zH.defaultProps=UH,zH.displayName="Line";var VH=0,GH=dt();var WH=function(e){var t=Pt(a.useState(),2),n=t[0],r=t[1];return a.useEffect((function(){r("rc_progress_".concat(function(){var e;return GH?(e=VH,VH+=1):e="TEST_OR_SSR",e}()))}),[]),e||n},XH=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function YH(e){return+e.replace("%","")}function KH(e){var t=null!==e&&void 0!==e?e:[];return Array.isArray(t)?t:[t]}var qH=100,ZH=function(e,t,n,r,i,o,a,s,l,u){var c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,h=n/100*360*((360-o)/360),d=0===o?0:{bottom:0,top:180,left:90,right:-90}[a],f=(100-r)/100*t;return"round"===l&&100!==r&&(f+=u/2)>=t&&(f=t-.01),{stroke:"string"===typeof s?s:void 0,strokeDasharray:"".concat(t,"px ").concat(e),strokeDashoffset:f+c,transform:"rotate(".concat(i+h+d,"deg)"),transformOrigin:"0 0",transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},$H=function(e){var t=e.id,n=e.prefixCls,r=e.steps,i=e.strokeWidth,o=e.trailWidth,s=e.gapDegree,l=void 0===s?0:s,u=e.gapPosition,h=e.trailColor,d=e.strokeLinecap,f=e.style,p=e.className,v=e.strokeColor,m=e.percent,g=Yn(e,XH),y=WH(t),b="".concat(y,"-gradient"),_=50-i/2,x=2*Math.PI*_,E=l>0?90+l/2:-90,w=x*((360-l)/360),T="object"===c(r)?r:{count:r,space:2},S=T.count,k=T.space,C=ZH(x,w,0,100,E,l,u,h,d,i),A=KH(m),I=KH(v),O=I.find((function(e){return e&&"object"===c(e)})),P=HH();return a.createElement("svg",Ut({className:Ko()("".concat(n,"-circle"),p),viewBox:"".concat(-50," ").concat(-50," ").concat(qH," ").concat(qH),style:f,id:t,role:"presentation"},g),O&&a.createElement("defs",null,a.createElement("linearGradient",{id:b,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},Object.keys(O).sort((function(e,t){return YH(e)-YH(t)})).map((function(e,t){return a.createElement("stop",{key:t,offset:e,stopColor:O[e]})})))),!S&&a.createElement("circle",{className:"".concat(n,"-circle-trail"),r:_,cx:0,cy:0,stroke:h,strokeLinecap:d,strokeWidth:o||i,style:C}),S?function(){var e=Math.round(S*(A[0]/100)),t=100/S,r=0;return new Array(S).fill(null).map((function(o,s){var d=s<=e-1?I[0]:h,f=d&&"object"===c(d)?"url(#".concat(b,")"):void 0,p=ZH(x,w,r,t,E,l,u,d,"butt",i,k);return r+=100*(w-p.strokeDashoffset+k)/w,a.createElement("circle",{key:s,className:"".concat(n,"-circle-path"),r:_,cx:0,cy:0,stroke:f,strokeWidth:i,opacity:1,style:p,ref:function(e){P[s]=e}})}))}():function(){var e=0;return A.map((function(t,r){var o=I[r]||I[I.length-1],s=o&&"object"===c(o)?"url(#".concat(b,")"):void 0,h=ZH(x,w,e,t,E,l,u,o,d,i);return e+=t,a.createElement("circle",{key:r,className:"".concat(n,"-circle-path"),r:_,cx:0,cy:0,stroke:s,strokeLinecap:d,strokeWidth:i,opacity:0===t?0:1,style:h,ref:function(e){P[r]=e}})})).reverse()}())};$H.defaultProps=UH,$H.displayName="Circle";var QH=$H;function JH(e){return!e||e<0?0:e>100?100:e}function ej(e){var t=e.success,n=e.successPercent;return t&&"progress"in t&&(n=t.progress),t&&"percent"in t&&(n=t.percent),n}var tj=function(e){var t=e.percent,n=JH(ej({success:e.success,successPercent:e.successPercent}));return[n,JH(JH(t)-n)]},nj=function(e,t,n){var r,i,o,a,s=-1,l=-1;if("step"===t){var u=n.steps,c=n.strokeWidth;if("string"===typeof e||"undefined"===typeof e)s="small"===e?2:14,l=null!==c&&void 0!==c?c:8;else if("number"===typeof e)s=e,l=e;else{var h=Pt(e,2),d=h[0];s=void 0===d?14:d;var f=h[1];l=void 0===f?8:f}s*=u}else if("line"===t){var p=null===n||void 0===n?void 0:n.strokeWidth;if("string"===typeof e||"undefined"===typeof e)l=p||("small"===e?6:8);else if("number"===typeof e)s=e,l=e;else{var v=Pt(e,2),m=v[0];s=void 0===m?-1:m;var g=v[1];l=void 0===g?8:g}}else if("circle"===t||"dashboard"===t)if("string"===typeof e||"undefined"===typeof e){var y=Pt("small"===e?[60,60]:[120,120],2);s=y[0],l=y[1]}else"number"===typeof e?(s=e,l=e):(s=null!==(i=null!==(r=e[0])&&void 0!==r?r:e[1])&&void 0!==i?i:120,l=null!==(a=null!==(o=e[0])&&void 0!==o?o:e[1])&&void 0!==a?a:120);return[s,l]},rj=function(e){var t=e.prefixCls,n=e.trailColor,r=void 0===n?null:n,i=e.strokeLinecap,o=void 0===i?"round":i,s=e.gapPosition,l=e.gapDegree,u=e.width,c=void 0===u?120:u,h=e.type,d=e.children,f=e.success,p=e.size,v=Pt(nj(void 0===p?c:p,"circle"),2),m=v[0],g=v[1],y=e.strokeWidth;void 0===y&&(y=Math.max(function(e){return 3/e*100}(m),6));var _={width:m,height:g,fontSize:.15*m+6},x=a.useMemo((function(){return l||0===l?l:"dashboard"===h?75:void 0}),[l,h]),E=s||"dashboard"===h&&"bottom"||void 0,w="[object Object]"===Object.prototype.toString.call(e.strokeColor),T=function(e){var t=e.success,n=void 0===t?{}:t,r=e.strokeColor;return[n.strokeColor||co.green,r||null]}({success:f,strokeColor:e.strokeColor}),S=Ko()("".concat(t,"-inner"),b({},"".concat(t,"-circle-gradient"),w)),k=a.createElement(QH,{percent:tj(e),strokeWidth:y,trailWidth:y,strokeColor:T,strokeLinecap:o,trailColor:r,prefixCls:t,gapDegree:x,gapPosition:E});return a.createElement("div",{className:S,style:_},m<=20?a.createElement(JA,{title:d},a.createElement("span",null,k)):a.createElement(a.Fragment,null,k,d))},ij=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},oj=function(e,t){var n=e.from,r=void 0===n?co.blue:n,i=e.to,o=void 0===i?co.blue:i,a=e.direction,s=void 0===a?"rtl"===t?"to left":"to right":a,l=ij(e,["from","to","direction"]);if(0!==Object.keys(l).length){var u=function(e){var t=[];return Object.keys(e).forEach((function(n){var r=parseFloat(n.replace(/%/g,""));isNaN(r)||t.push({key:r,value:e[n]})})),t=t.sort((function(e,t){return e.key-t.key})),t.map((function(e){var t=e.key,n=e.value;return"".concat(n," ").concat(t,"%")})).join(", ")}(l);return{backgroundImage:"linear-gradient(".concat(s,", ").concat(u,")")}}return{backgroundImage:"linear-gradient(".concat(s,", ").concat(r,", ").concat(o,")")}},aj=function(e){var t=e.prefixCls,n=e.direction,r=e.percent,i=e.size,o=e.strokeWidth,s=e.strokeColor,l=e.strokeLinecap,u=void 0===l?"round":l,c=e.children,h=e.trailColor,d=void 0===h?null:h,f=e.success,p=s&&"string"!==typeof s?oj(s,n):{backgroundColor:s},v="square"===u||"butt"===u?0:void 0,m={backgroundColor:d||void 0,borderRadius:v},g=Pt(nj(null!==i&&void 0!==i?i:[-1,o||("small"===i?6:8)],"line",{strokeWidth:o}),2),y=g[0],b=g[1];var _=Object.assign({width:"".concat(JH(r),"%"),height:b,borderRadius:v},p),x=ej(e),E={width:"".concat(JH(x),"%"),height:b,borderRadius:v,backgroundColor:null===f||void 0===f?void 0:f.strokeColor},w={width:y<0?"100%":y,height:b};return a.createElement(a.Fragment,null,a.createElement("div",{className:"".concat(t,"-outer"),style:w},a.createElement("div",{className:"".concat(t,"-inner"),style:m},a.createElement("div",{className:"".concat(t,"-bg"),style:_}),void 0!==x?a.createElement("div",{className:"".concat(t,"-success-bg"),style:E}):null)),c)},sj=function(e){for(var t=e.size,n=e.steps,r=e.percent,i=void 0===r?0:r,o=e.strokeWidth,s=void 0===o?8:o,l=e.strokeColor,u=e.trailColor,c=void 0===u?null:u,h=e.prefixCls,d=e.children,f=Math.round(n*(i/100)),p=Pt(nj(null!==t&&void 0!==t?t:["small"===t?2:14,s],"step",{steps:n,strokeWidth:s}),2),v=p[0],m=p[1],g=v/n,y=new Array(n),_=0;_<n;_++){var x=Array.isArray(l)?l[_]:l;y[_]=a.createElement("div",{key:_,className:Ko()("".concat(h,"-steps-item"),b({},"".concat(h,"-steps-item-active"),_<=f-1)),style:{backgroundColor:_<=f-1?x:c,width:g,height:m}})}return a.createElement("div",{className:"".concat(h,"-steps-outer")},y,d)},lj=new Un("antProgressActive",{"0%":{transform:"translateX(-100%) scaleX(0)",opacity:.1},"20%":{transform:"translateX(-100%) scaleX(0)",opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}}),uj=function(e){var t,n,r,i=e.componentCls,o=e.iconCls;return b({},i,Object.assign(Object.assign({},as(e)),(b(r={display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:e.fontSize,marginInlineEnd:e.marginXS,marginBottom:e.marginXS}},"".concat(i,"-outer"),{display:"inline-block",width:"100%"}),b(r,"&".concat(i,"-show-info"),b({},"".concat(i,"-outer"),{marginInlineEnd:"calc(-2em - ".concat(e.marginXS,"px)"),paddingInlineEnd:"calc(2em + ".concat(e.paddingXS,"px)")})),b(r,"".concat(i,"-inner"),{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:e.progressRemainingColor,borderRadius:e.progressLineRadius}),b(r,"".concat(i,"-inner:not(").concat(i,"-circle-gradient)"),b({},"".concat(i,"-circle-path"),{stroke:e.colorInfo})),b(r,"".concat(i,"-success-bg, ").concat(i,"-bg"),{position:"relative",backgroundColor:e.colorInfo,borderRadius:e.progressLineRadius,transition:"all ".concat(e.motionDurationSlow," ").concat(e.motionEaseInOutCirc)}),b(r,"".concat(i,"-success-bg"),{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:e.colorSuccess}),b(r,"".concat(i,"-text"),b({display:"inline-block",width:"2em",marginInlineStart:e.marginXS,color:e.progressInfoTextColor,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal"},o,{fontSize:e.fontSize})),b(r,"&".concat(i,"-status-active"),b({},"".concat(i,"-bg::before"),{position:"absolute",inset:0,backgroundColor:e.colorBgContainer,borderRadius:e.progressLineRadius,opacity:0,animationName:lj,animationDuration:e.progressActiveMotionDuration,animationTimingFunction:e.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'})),b(r,"&".concat(i,"-status-exception"),(b(t={},"".concat(i,"-bg"),{backgroundColor:e.colorError}),b(t,"".concat(i,"-text"),{color:e.colorError}),t)),b(r,"&".concat(i,"-status-exception ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),b({},"".concat(i,"-circle-path"),{stroke:e.colorError})),b(r,"&".concat(i,"-status-success"),(b(n={},"".concat(i,"-bg"),{backgroundColor:e.colorSuccess}),b(n,"".concat(i,"-text"),{color:e.colorSuccess}),n)),b(r,"&".concat(i,"-status-success ").concat(i,"-inner:not(").concat(i,"-circle-gradient)"),b({},"".concat(i,"-circle-path"),{stroke:e.colorSuccess})),r)))},cj=function(e){var t,n,r=e.componentCls,i=e.iconCls;return b(n={},r,(b(t={},"".concat(r,"-circle-trail"),{stroke:e.progressRemainingColor}),b(t,"&".concat(r,"-circle ").concat(r,"-inner"),{position:"relative",lineHeight:1,backgroundColor:"transparent"}),b(t,"&".concat(r,"-circle ").concat(r,"-text"),b({position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:e.colorText,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)"},i,{fontSize:"".concat(e.fontSize/e.fontSizeSM,"em")})),b(t,"".concat(r,"-circle&-status-exception"),b({},"".concat(r,"-text"),{color:e.colorError})),b(t,"".concat(r,"-circle&-status-success"),b({},"".concat(r,"-text"),{color:e.colorSuccess})),t)),b(n,"".concat(r,"-inline-circle"),b({lineHeight:1},"".concat(r,"-inner"),{verticalAlign:"bottom"})),n},hj=function(e){var t=e.componentCls;return b({},t,b({},"".concat(t,"-steps"),{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:e.progressStepMinWidth,marginInlineEnd:e.progressStepMarginInlineEnd,backgroundColor:e.progressRemainingColor,transition:"all ".concat(e.motionDurationSlow),"&-active":{backgroundColor:e.colorInfo}}}))},dj=function(e){var t=e.componentCls,n=e.iconCls;return b({},t,b({},"".concat(t,"-small&-line, ").concat(t,"-small&-line ").concat(t,"-text ").concat(n),{fontSize:e.fontSizeSM}))},fj=ol("Progress",(function(e){var t=e.marginXXS/2,n=nl(e,{progressLineRadius:100,progressInfoTextColor:e.colorText,progressDefaultColor:e.colorInfo,progressRemainingColor:e.colorFillSecondary,progressStepMarginInlineEnd:t,progressStepMinWidth:t,progressActiveMotionDuration:"2.4s"});return[uj(n),cj(n),hj(n),dj(n)]})),pj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},vj=["normal","exception","active","success"],mj=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.className,o=e.rootClassName,s=e.steps,l=e.strokeColor,u=e.percent,c=void 0===u?0:u,h=e.size,d=void 0===h?"default":h,f=e.showInfo,p=void 0===f||f,v=e.type,m=void 0===v?"line":v,g=e.status,y=e.format,_=pj(e,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format"]),x=a.useMemo((function(){var t,n,r=ej(e);return parseInt(void 0!==r?null===(t=null!==r&&void 0!==r?r:0)||void 0===t?void 0:t.toString():null===(n=null!==c&&void 0!==c?c:0)||void 0===n?void 0:n.toString(),10)}),[c,e.success,e.successPercent]),E=a.useMemo((function(){return!vj.includes(g)&&x>=100?"success":g||"normal"}),[g,x]),w=a.useContext(Lo),T=w.getPrefixCls,S=w.direction,k=T("progress",r),C=Pt(fj(k),2),A=C[0],I=C[1],O=a.useMemo((function(){if(!p)return null;var t,n=ej(e),r=y||function(e){return"".concat(e,"%")},i="line"===m;return y||"exception"!==E&&"success"!==E?t=r(JH(c),JH(n)):"exception"===E?t=i?a.createElement(js,null):a.createElement(oc,null):"success"===E&&(t=i?a.createElement(Bs,null):a.createElement(BH,null)),a.createElement("span",{className:"".concat(k,"-text"),title:"string"===typeof t?t:void 0},t)}),[p,c,x,E,m,k,y]);var P,M=Array.isArray(l)?l[0]:l,R="string"===typeof l||Array.isArray(l)?l:void 0;"line"===m?P=s?a.createElement(sj,Object.assign({},e,{strokeColor:R,prefixCls:k,steps:s}),O):a.createElement(aj,Object.assign({},e,{strokeColor:M,prefixCls:k,direction:S}),O):"circle"!==m&&"dashboard"!==m||(P=a.createElement(rj,Object.assign({},e,{strokeColor:M,prefixCls:k,progressStatus:E}),O));var N=Ko()(k,(b(n={},"".concat(k,"-inline-circle"),"circle"===m&&nj(d,"circle")[0]<=20),b(n,"".concat(k,"-").concat(("dashboard"===m?"circle":s&&"steps")||m),!0),b(n,"".concat(k,"-status-").concat(E),!0),b(n,"".concat(k,"-show-info"),p),b(n,"".concat(k,"-").concat(d),"string"===typeof d),b(n,"".concat(k,"-rtl"),"rtl"===S),n),i,o,I);return A(a.createElement("div",Object.assign({ref:t,className:N,role:"progressbar"},qs(_,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),P))}));var gj=mj,yj=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.className,s=e.style,l=e.locale,u=e.listType,c=e.file,h=e.items,d=e.progress,f=e.iconRender,p=e.actionIconRender,v=e.itemRender,m=e.isImgUrl,g=e.showPreviewIcon,y=e.showRemoveIcon,_=e.showDownloadIcon,x=e.previewIcon,E=e.removeIcon,w=e.downloadIcon,T=e.onPreview,S=e.onDownload,k=e.onClose,C=c.status,A=Pt(a.useState(C),2),I=A[0],O=A[1];a.useEffect((function(){"removed"!==C&&O(C)}),[C]);var P=Pt(a.useState(!1),2),M=P[0],R=P[1],N=a.useRef(null);a.useEffect((function(){return N.current=setTimeout((function(){R(!0)}),300),function(){N.current&&clearTimeout(N.current)}}),[]);var D=f(c),L=a.createElement("div",{className:"".concat(i,"-icon")},D);if("picture"===u||"picture-card"===u||"picture-circle"===u)if("uploading"===I||!c.thumbUrl&&!c.url){var F,B=Ko()((b(F={},"".concat(i,"-list-item-thumbnail"),!0),b(F,"".concat(i,"-list-item-file"),"uploading"!==I),F));L=a.createElement("div",{className:B},D)}else{var U,H=(null===m||void 0===m?void 0:m(c))?a.createElement("img",{src:c.thumbUrl||c.url,alt:c.name,className:"".concat(i,"-list-item-image"),crossOrigin:c.crossOrigin}):D,j=Ko()((b(U={},"".concat(i,"-list-item-thumbnail"),!0),b(U,"".concat(i,"-list-item-file"),m&&!m(c)),U));L=a.createElement("a",{className:j,onClick:function(e){return T(c,e)},href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer"},H)}var z=Ko()("".concat(i,"-list-item"),"".concat(i,"-list-item-").concat(I)),V="string"===typeof c.linkProps?JSON.parse(c.linkProps):c.linkProps,G=y?p(("function"===typeof E?E(c):E)||a.createElement(MH,null),(function(){return k(c)}),i,l.removeFile):null,W=_&&"done"===I?p(("function"===typeof w?w(c):w)||a.createElement(DH,null),(function(){return S(c)}),i,l.downloadFile):null,X="picture-card"!==u&&"picture-circle"!==u&&a.createElement("span",{key:"download-delete",className:Ko()("".concat(i,"-list-item-actions"),{picture:"picture"===u})},W,G),Y=Ko()("".concat(i,"-list-item-name")),K=c.url?[a.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:Y,title:c.name},V,{href:c.url,onClick:function(e){return T(c,e)}}),c.name),X]:[a.createElement("span",{key:"view",className:Y,onClick:function(e){return T(c,e)},title:c.name},c.name),X],q=g?a.createElement("a",{href:c.url||c.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:c.url||c.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function(e){return T(c,e)},title:l.previewFile},"function"===typeof x?x(c):x||a.createElement(Rh,null)):null,Z=("picture-card"===u||"picture-circle"===u)&&"uploading"!==I&&a.createElement("span",{className:"".concat(i,"-list-item-actions")},q,"done"===I&&W,G),$=(0,a.useContext(Lo).getPrefixCls)(),Q=a.createElement("div",{className:z},L,K,Z,M&&a.createElement(ts,{motionName:"".concat($,"-fade"),visible:"uploading"===I,motionDeadline:2e3},(function(e){var t=e.className,n="percent"in c?a.createElement(gj,Object.assign({},d,{type:"line",percent:c.percent})):null;return a.createElement("div",{className:Ko()("".concat(i,"-list-item-progress"),t)},n)}))),J=c.response&&"string"===typeof c.response?c.response:(null===(n=c.error)||void 0===n?void 0:n.statusText)||(null===(r=c.error)||void 0===r?void 0:r.message)||l.uploadError,ee="error"===I?a.createElement(JA,{title:J,getPopupContainer:function(e){return e.parentNode}},Q):Q;return a.createElement("div",{className:Ko()("".concat(i,"-list-item-container"),o),style:s,ref:t},v?v(ee,c,h,{download:S.bind(null,c),preview:T.bind(null,c),remove:k.bind(null,c)}):ee)})),bj=yj,_j=function(e,t){var n,r=e.listType,i=void 0===r?"text":r,o=e.previewFile,s=void 0===o?IH:o,l=e.onPreview,u=e.onDownload,c=e.onRemove,h=e.locale,d=e.iconRender,f=e.isImageUrl,p=void 0===f?CH:f,v=e.prefixCls,m=e.items,g=void 0===m?[]:m,y=e.showPreviewIcon,_=void 0===y||y,x=e.showRemoveIcon,E=void 0===x||x,w=e.showDownloadIcon,T=void 0!==w&&w,S=e.removeIcon,k=e.previewIcon,C=e.downloadIcon,A=e.progress,I=void 0===A?{size:[-1,2],showInfo:!1}:A,O=e.appendAction,P=e.appendActionVisible,M=void 0===P||P,R=e.itemRender,N=e.disabled,D=function(){var e=a.useReducer((function(e){return e+1}),0);return Pt(e,2)[1]}(),L=Pt(a.useState(!1),2),F=L[0],B=L[1];a.useEffect((function(){"picture"!==i&&"picture-card"!==i&&"picture-circle"!==i||(g||[]).forEach((function(e){"undefined"!==typeof document&&"undefined"!==typeof window&&window.FileReader&&window.File&&(e.originFileObj instanceof File||e.originFileObj instanceof Blob)&&void 0===e.thumbUrl&&(e.thumbUrl="",s&&s(e.originFileObj).then((function(t){e.thumbUrl=t||"",D()})))}))}),[i,g,s]),a.useEffect((function(){B(!0)}),[]);var U=function(e,t){if(l)return null===t||void 0===t||t.preventDefault(),l(e)},H=function(e){"function"===typeof u?u(e):e.url&&window.open(e.url)},j=function(e){null===c||void 0===c||c(e)},z=function(e){if(d)return d(e,i);var t="uploading"===e.status,n=p&&p(e)?a.createElement(EH,null):a.createElement(mH,null),r=t?a.createElement(Tl,null):a.createElement(bH,null);return"picture"===i?r=t?a.createElement(Tl,null):n:"picture-card"!==i&&"picture-circle"!==i||(r=t?h.uploading:n),r},V=function(e,t,n,r){var i={type:"text",size:"small",title:r,onClick:function(n){t(),$s(e)&&e.props.onClick&&e.props.onClick(n)},className:"".concat(n,"-list-item-action"),disabled:N};if($s(e)){var o=Js(e,Object.assign(Object.assign({},e.props),{onClick:function(){}}));return a.createElement(uu,Object.assign({},i,{icon:o}))}return a.createElement(uu,Object.assign({},i),a.createElement("span",null,e))};a.useImperativeHandle(t,(function(){return{handlePreview:U,handleDownload:H}}));var G=a.useContext(Lo).getPrefixCls,W=G("upload",v),X=G(),Y=Ko()((b(n={},"".concat(W,"-list"),!0),b(n,"".concat(W,"-list-").concat(i),!0),n)),K=Pe(g.map((function(e){return{key:e.uid,file:e}}))),q="picture-card"===i||"picture-circle"===i?"animate-inline":"animate",Z={motionDeadline:2e3,motionName:"".concat(W,"-").concat(q),keys:K,motionAppear:F},$=a.useMemo((function(){var e=Object.assign({},yu(X));return delete e.onAppearEnd,delete e.onEnterEnd,delete e.onLeaveEnd,e}),[X]);return"picture-card"!==i&&"picture-circle"!==i&&(Z=Object.assign(Object.assign({},$),Z)),a.createElement("div",{className:Y},a.createElement(es,Object.assign({},Z,{component:!1}),(function(e){var t=e.key,n=e.file,r=e.className,o=e.style;return a.createElement(bj,{key:t,locale:h,prefixCls:W,className:r,style:o,file:n,items:g,progress:I,listType:i,isImgUrl:p,showPreviewIcon:_,showRemoveIcon:E,showDownloadIcon:T,removeIcon:S,previewIcon:k,downloadIcon:C,iconRender:z,actionIconRender:V,itemRender:R,onPreview:U,onDownload:H,onClose:j})})),O&&a.createElement(ts,Object.assign({},Z,{visible:M,forceRender:!0}),(function(e){var t=e.className,n=e.style;return Js(O,(function(e){return{className:Ko()(e.className,t),style:Object.assign(Object.assign(Object.assign({},n),{pointerEvents:t?"none":void 0}),e.style)}}))})))};var xj=a.forwardRef(_j),Ej=function(e){var t,n=e.componentCls,r=e.iconCls;return b({},"".concat(n,"-wrapper"),b({},"".concat(n,"-drag"),(b(t={position:"relative",width:"100%",height:"100%",textAlign:"center",background:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow)},n,{padding:"".concat(e.padding,"px 0")}),b(t,"".concat(n,"-btn"),{display:"table",width:"100%",height:"100%",outline:"none"}),b(t,"".concat(n,"-drag-container"),{display:"table-cell",verticalAlign:"middle"}),b(t,"&:not(".concat(n,"-disabled):hover"),{borderColor:e.colorPrimaryHover}),b(t,"p".concat(n,"-drag-icon"),b({marginBottom:e.margin},r,{color:e.colorPrimary,fontSize:e.uploadThumbnailSize})),b(t,"p".concat(n,"-text"),{margin:"0 0 ".concat(e.marginXXS,"px"),color:e.colorTextHeading,fontSize:e.fontSizeLG}),b(t,"p".concat(n,"-hint"),{color:e.colorTextDescription,fontSize:e.fontSize}),b(t,"&".concat(n,"-disabled"),b({cursor:"not-allowed"},"p".concat(n,"-drag-icon ").concat(r,",\n            p").concat(n,"-text,\n            p").concat(n,"-hint\n          "),{color:e.colorTextDisabled})),t)))},wj=function(e){var t,n,r,i,o,a=e.componentCls,s=e.antCls,l=e.iconCls,u=e.fontSize,c=e.lineHeight,h="".concat(a,"-list-item"),d="".concat(h,"-actions"),f="".concat(h,"-action"),p=Math.round(u*c);return b({},"".concat(a,"-wrapper"),b({},"".concat(a,"-list"),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(b(o={lineHeight:e.lineHeight},h,(b(n={position:"relative",height:e.lineHeight*u,marginTop:e.marginXS,fontSize:u,display:"flex",alignItems:"center",transition:"background-color ".concat(e.motionDurationSlow),"&:hover":{backgroundColor:e.controlItemBgHover}},"".concat(h,"-name"),Object.assign(Object.assign({},os),{padding:"0 ".concat(e.paddingXS,"px"),lineHeight:c,flex:"auto",transition:"all ".concat(e.motionDurationSlow)})),b(n,d,(b(t={},f,{opacity:0}),b(t,"".concat(f).concat(s,"-btn-sm"),{height:p,border:0,lineHeight:1,"> span":{transform:"scale(1)"}}),b(t,"\n              ".concat(f,":focus,\n              &.picture ").concat(f,"\n            "),{opacity:1}),b(t,l,{color:e.colorTextDescription,transition:"all ".concat(e.motionDurationSlow)}),b(t,"&:hover ".concat(l),{color:e.colorText}),t)),b(n,"".concat(a,"-icon ").concat(l),{color:e.colorTextDescription,fontSize:u}),b(n,"".concat(h,"-progress"),{position:"absolute",bottom:-e.uploadProgressOffset,width:"100%",paddingInlineStart:u+e.paddingXS,fontSize:u,lineHeight:0,pointerEvents:"none","> div":{margin:0}}),n)),b(o,"".concat(h,":hover ").concat(f),{opacity:1,color:e.colorText}),b(o,"".concat(h,"-error"),(b(i={color:e.colorError},"".concat(h,"-name, ").concat(a,"-icon ").concat(l),{color:e.colorError}),b(i,d,(b(r={},"".concat(l,", ").concat(l,":hover"),{color:e.colorError}),b(r,f,{opacity:1}),r)),i)),b(o,"".concat(a,"-list-item-container"),{transition:"opacity ".concat(e.motionDurationSlow,", height ").concat(e.motionDurationSlow),"&::before":{display:"table",width:0,height:0,content:'""'}}),o))))},Tj=new Un("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),Sj=new Un("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),kj=function(e){var t,n=e.componentCls,r="".concat(n,"-animate-inline");return[b({},"".concat(n,"-wrapper"),(t={},b(t,"".concat(r,"-appear, ").concat(r,"-enter, ").concat(r,"-leave"),{animationDuration:e.motionDurationSlow,animationTimingFunction:e.motionEaseInOutCirc,animationFillMode:"forwards"}),b(t,"".concat(r,"-appear, ").concat(r,"-enter"),{animationName:Tj}),b(t,"".concat(r,"-leave"),{animationName:Sj}),t)),Tj,Sj]},Cj=function(e){var t,n,r,i,o,a=e.componentCls,s=e.iconCls,l=e.uploadThumbnailSize,u=e.uploadProgressOffset,c="".concat(a,"-list"),h="".concat(c,"-item");return b({},"".concat(a,"-wrapper"),(b(o={},"\n        ".concat(c).concat(c,"-picture,\n        ").concat(c).concat(c,"-picture-card,\n        ").concat(c).concat(c,"-picture-circle\n      "),(b(i={},h,(b(n={position:"relative",height:l+2*e.lineWidth+2*e.paddingXS,padding:e.paddingXS,border:"".concat(e.lineWidth,"px ").concat(e.lineType," ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,"&:hover":{background:"transparent"}},"".concat(h,"-thumbnail"),Object.assign(Object.assign({},os),(b(t={width:l,height:l,lineHeight:"".concat(l+e.paddingSM,"px"),textAlign:"center",flex:"none"},s,{fontSize:e.fontSizeHeading2,color:e.colorPrimary}),b(t,"img",{display:"block",width:"100%",height:"100%",overflow:"hidden"}),t))),b(n,"".concat(h,"-progress"),{bottom:u,width:"calc(100% - ".concat(2*e.paddingSM,"px)"),marginTop:0,paddingInlineStart:l+e.paddingXS}),n)),b(i,"".concat(h,"-error"),b({borderColor:e.colorError},"".concat(h,"-thumbnail ").concat(s),(b(r={},"svg path[fill='#e6f7ff']",{fill:e.colorErrorBg}),b(r,"svg path[fill='#1890ff']",{fill:e.colorError}),r))),b(i,"".concat(h,"-uploading"),b({borderStyle:"dashed"},"".concat(h,"-name"),{marginBottom:u})),i)),b(o,"".concat(c).concat(c,"-picture-circle ").concat(h),b({},"&, &::before, ".concat(h,"-thumbnail"),{borderRadius:"50%"})),o))},Aj=function(e){var t,n,r,i,o,a=e.componentCls,s=e.iconCls,l=e.fontSizeLG,u=e.colorTextLightSolid,c="".concat(a,"-list"),h="".concat(c,"-item"),d=e.uploadPicCardSize;return b(o={},"\n      ".concat(a,"-wrapper").concat(a,"-picture-card-wrapper,\n      ").concat(a,"-wrapper").concat(a,"-picture-circle-wrapper\n    "),Object.assign(Object.assign({},{"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),(b(i={display:"inline-block",width:"100%"},"".concat(a).concat(a,"-select"),(b(t={width:d,height:d,marginInlineEnd:e.marginXS,marginBottom:e.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:e.colorFillAlter,border:"".concat(e.lineWidth,"px dashed ").concat(e.colorBorder),borderRadius:e.borderRadiusLG,cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow)},"> ".concat(a),{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"}),b(t,"&:not(".concat(a,"-disabled):hover"),{borderColor:e.colorPrimary}),t)),b(i,"".concat(c).concat(c,"-picture-card, ").concat(c).concat(c,"-picture-circle"),(b(r={},"".concat(c,"-item-container"),{display:"inline-block",width:d,height:d,marginBlock:"0 ".concat(e.marginXS,"px"),marginInline:"0 ".concat(e.marginXS,"px"),verticalAlign:"top"}),b(r,"&::after",{display:"none"}),b(r,h,{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),height:"calc(100% - ".concat(2*e.paddingXS,"px)"),backgroundColor:e.colorBgMask,opacity:0,transition:"all ".concat(e.motionDurationSlow),content:'" "'}}),b(r,"".concat(h,":hover"),b({},"&::before, ".concat(h,"-actions"),{opacity:1})),b(r,"".concat(h,"-actions"),b({position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:"all ".concat(e.motionDurationSlow)},"".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{zIndex:10,width:l,margin:"0 ".concat(e.marginXXS,"px"),fontSize:l,cursor:"pointer",transition:"all ".concat(e.motionDurationSlow),svg:{verticalAlign:"baseline"}})),b(r,"".concat(h,"-actions, ").concat(h,"-actions:hover"),b({},"".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{color:new yo(u).setAlpha(.65).toRgbString(),"&:hover":{color:u}})),b(r,"".concat(h,"-thumbnail, ").concat(h,"-thumbnail img"),{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"}),b(r,"".concat(h,"-name"),{display:"none",textAlign:"center"}),b(r,"".concat(h,"-file + ").concat(h,"-name"),{position:"absolute",bottom:e.margin,display:"block",width:"calc(100% - ".concat(2*e.paddingXS,"px)")}),b(r,"".concat(h,"-uploading"),(b(n={},"&".concat(h),{backgroundColor:e.colorFillAlter}),b(n,"&::before, ".concat(s,"-eye, ").concat(s,"-download, ").concat(s,"-delete"),{display:"none"}),n)),b(r,"".concat(h,"-progress"),{bottom:e.marginXL,width:"calc(100% - ".concat(2*e.paddingXS,"px)"),paddingInlineStart:0}),r)),i))),b(o,"".concat(a,"-wrapper").concat(a,"-picture-circle-wrapper"),b({},"".concat(a).concat(a,"-select"),{borderRadius:"50%"})),o},Ij=function(e){var t=e.componentCls;return b({},"".concat(t,"-rtl"),{direction:"rtl"})},Oj=function(e){var t,n=e.componentCls,r=e.colorTextDisabled;return b({},"".concat(n,"-wrapper"),Object.assign(Object.assign({},as(e)),(b(t={},n,{outline:0,"input[type='file']":{cursor:"pointer"}}),b(t,"".concat(n,"-select"),{display:"inline-block"}),b(t,"".concat(n,"-disabled"),{color:r,cursor:"not-allowed"}),t)))},Pj=ol("Upload",(function(e){var t=e.fontSizeHeading3,n=e.fontSize,r=e.lineHeight,i=e.lineWidth,o=e.controlHeightLG,a=nl(e,{uploadThumbnailSize:2*t,uploadProgressOffset:Math.round(n*r)/2+i,uploadPicCardSize:2.55*o});return[Oj(a),Ej(a),Cj(a),Aj(a),wj(a),kj(a),Ij(a),OM(a)]})),Mj=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(Pv){o(Pv)}}function s(e){try{l(r.throw(e))}catch(Pv){o(Pv)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))},Rj="__LIST_IGNORE_".concat(Date.now(),"__"),Nj=function(e,t){var n=e.fileList,r=e.defaultFileList,i=e.onRemove,o=e.showUploadList,s=void 0===o||o,l=e.listType,u=void 0===l?"text":l,c=e.onPreview,h=e.onDownload,d=e.onChange,f=e.onDrop,p=e.previewFile,v=e.disabled,m=e.locale,g=e.iconRender,y=e.isImageUrl,_=e.progress,x=e.prefixCls,E=e.className,w=e.type,T=void 0===w?"select":w,S=e.children,k=e.style,C=e.itemRender,A=e.maxCount,I=e.data,O=void 0===I?{}:I,P=e.multiple,M=void 0!==P&&P,R=e.action,N=void 0===R?"":R,D=e.accept,L=void 0===D?"":D,F=e.supportServerRender,B=void 0===F||F,U=a.useContext(jo),H=null!==v&&void 0!==v?v:U,j=yh(r||[],{value:n,postState:function(e){return null!==e&&void 0!==e?e:[]}}),z=Pt(j,2),V=z[0],G=z[1],W=Pt(a.useState("drop"),2),X=W[0],Y=W[1],K=a.useRef(null);a.useMemo((function(){var e=Date.now();(n||[]).forEach((function(t,n){t.uid||Object.isFrozen(t)||(t.uid="__AUTO__".concat(e,"_").concat(n,"__"))}))}),[n]);var q=function(e,t,n){var r=Pe(t);1===A?r=r.slice(-1):A&&(r=r.slice(0,A)),(0,De.flushSync)((function(){G(r)}));var i={file:e,fileList:r};n&&(i.event=n),(0,De.flushSync)((function(){null===d||void 0===d||d(i)}))},Z=function(e){var t=e.filter((function(e){return!e.file[Rj]}));if(t.length){var n=t.map((function(e){return wH(e.file)})),r=Pe(V);n.forEach((function(e){r=TH(e,r)})),n.forEach((function(e,n){var i=e;if(t[n].parsedFile)e.status="uploading";else{var o,a=e.originFileObj;try{o=new File([a],a.name,{type:a.type})}catch(Pv){(o=new Blob([a],{type:a.type})).name=a.name,o.lastModifiedDate=new Date,o.lastModified=(new Date).getTime()}o.uid=e.uid,i=o}q(i,r)}))}},$=function(e,t,n){try{"string"===typeof e&&(e=JSON.parse(e))}catch(Pv){}if(SH(t,V)){var r=wH(t);r.status="done",r.percent=100,r.response=e,r.xhr=n;var i=TH(r,V);q(r,i)}},Q=function(e,t){if(SH(t,V)){var n=wH(t);n.status="uploading",n.percent=e.percent;var r=TH(n,V);q(n,r,e)}},J=function(e,t,n){if(SH(n,V)){var r=wH(n);r.error=e,r.response=t,r.status="error";var i=TH(r,V);q(r,i)}},ee=function(e){var t;Promise.resolve("function"===typeof i?i(e):i).then((function(n){var r;if(!1!==n){var i=function(e,t){var n=void 0!==e.uid?"uid":"name",r=t.filter((function(t){return t[n]!==e[n]}));return r.length===t.length?null:r}(e,V);i&&(t=Object.assign(Object.assign({},e),{status:"removed"}),null===V||void 0===V||V.forEach((function(e){var n=void 0!==t.uid?"uid":"name";e[n]!==t[n]||Object.isFrozen(e)||(e.status="removed")})),null===(r=K.current)||void 0===r||r.abort(t),q(t,i))}}))},te=function(e){Y(e.type),"drop"===e.type&&(null===f||void 0===f||f(e))};a.useImperativeHandle(t,(function(){return{onBatchStart:Z,onSuccess:$,onProgress:Q,onError:J,fileList:V,upload:K.current}}));var ne=a.useContext(Lo),re=ne.getPrefixCls,ie=ne.direction,oe=re("upload",x),ae=Object.assign(Object.assign({onBatchStart:Z,onError:J,onProgress:Q,onSuccess:$},e),{data:O,multiple:M,action:N,accept:L,supportServerRender:B,prefixCls:oe,disabled:H,beforeUpload:function(t,n){return Mj(void 0,void 0,void 0,_e().mark((function r(){var i,o,a,s;return _e().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i=e.beforeUpload,o=e.transformFile,a=t,!i){r.next=13;break}return r.next=5,i(t,n);case 5:if(!1!==(s=r.sent)){r.next=8;break}return r.abrupt("return",!1);case 8:if(delete t[Rj],s!==Rj){r.next=12;break}return Object.defineProperty(t,Rj,{value:!0,configurable:!0}),r.abrupt("return",!1);case 12:"object"===typeof s&&s&&(a=s);case 13:if(!o){r.next=17;break}return r.next=16,o(a);case 16:a=r.sent;case 17:return r.abrupt("return",a);case 18:case"end":return r.stop()}}),r)})))},onChange:void 0});delete ae.className,delete ae.style,S&&!H||delete ae.id;var se=Pt(Pj(oe),2),le=se[0],ue=se[1],ce=Pt(Ks("Upload",Ti.Upload),1)[0],he="boolean"===typeof s?{}:s,de=he.showRemoveIcon,fe=he.showPreviewIcon,pe=he.showDownloadIcon,ve=he.removeIcon,me=he.previewIcon,ge=he.downloadIcon,ye=function(e,t){return s?a.createElement(xj,{prefixCls:oe,listType:u,items:V,previewFile:p,onPreview:c,onDownload:h,onRemove:ee,showRemoveIcon:!H&&de,showPreviewIcon:fe,showDownloadIcon:pe,removeIcon:ve,previewIcon:me,downloadIcon:ge,iconRender:g,locale:Object.assign(Object.assign({},ce),m),isImageUrl:y,progress:_,appendAction:e,appendActionVisible:t,itemRender:C,disabled:H}):e},be=b({},"".concat(oe,"-rtl"),"rtl"===ie);if("drag"===T){var xe,Ee=Ko()(oe,(b(xe={},"".concat(oe,"-drag"),!0),b(xe,"".concat(oe,"-drag-uploading"),V.some((function(e){return"uploading"===e.status}))),b(xe,"".concat(oe,"-drag-hover"),"dragover"===X),b(xe,"".concat(oe,"-disabled"),H),b(xe,"".concat(oe,"-rtl"),"rtl"===ie),xe),ue);return le(a.createElement("span",{className:Ko()("".concat(oe,"-wrapper"),be,E,ue)},a.createElement("div",{className:Ee,onDrop:te,onDragOver:te,onDragLeave:te,style:k},a.createElement(fH,Object.assign({},ae,{ref:K,className:"".concat(oe,"-btn")}),a.createElement("div",{className:"".concat(oe,"-drag-container")},S))),ye()))}var we,Te,Se=Ko()(oe,"".concat(oe,"-select"),b({},"".concat(oe,"-disabled"),H)),ke=(we=S?void 0:{display:"none"},a.createElement("div",{className:Se,style:we},a.createElement(fH,Object.assign({},ae,{ref:K}))));return le("picture-card"===u||"picture-circle"===u?a.createElement("span",{className:Ko()("".concat(oe,"-wrapper"),(Te={},b(Te,"".concat(oe,"-picture-card-wrapper"),"picture-card"===u),b(Te,"".concat(oe,"-picture-circle-wrapper"),"picture-circle"===u),Te),be,E,ue)},ye(ke,!!S)):a.createElement("span",{className:Ko()("".concat(oe,"-wrapper"),be,E,ue)},ke,ye()))};var Dj=a.forwardRef(Nj),Lj=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Fj=a.forwardRef((function(e,t){var n=e.style,r=e.height,i=Lj(e,["style","height"]);return a.createElement(Dj,Object.assign({ref:t},i,{type:"drag",style:Object.assign(Object.assign({},n),{height:r})}))}));var Bj=Fj,Uj=Dj;Uj.Dragger=Bj,Uj.LIST_IGNORE=Rj;var Hj=Uj;function jj(e,t){return function(){return e.apply(t,arguments)}}var zj,Vj=Object.prototype.toString,Gj=Object.getPrototypeOf,Wj=(zj=Object.create(null),function(e){var t=Vj.call(e);return zj[t]||(zj[t]=t.slice(8,-1).toLowerCase())}),Xj=function(e){return e=e.toLowerCase(),function(t){return Wj(t)===e}},Yj=function(e){return function(t){return typeof t===e}},Kj=Array.isArray,qj=Yj("undefined");var Zj=Xj("ArrayBuffer");var $j=Yj("string"),Qj=Yj("function"),Jj=Yj("number"),ez=function(e){return null!==e&&"object"===typeof e},tz=function(e){if("object"!==Wj(e))return!1;var t=Gj(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},nz=Xj("Date"),rz=Xj("File"),iz=Xj("Blob"),oz=Xj("FileList"),az=Xj("URLSearchParams"),sz=Pt(["ReadableStream","Request","Response","Headers"].map(Xj),4),lz=sz[0],uz=sz[1],cz=sz[2],hz=sz[3];function dz(e,t){var n,r,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).allOwnKeys,o=void 0!==i&&i;if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Kj(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{var a,s=o?Object.getOwnPropertyNames(e):Object.keys(e),l=s.length;for(n=0;n<l;n++)a=s[n],t.call(null,e[a],a,e)}}function fz(e,t){t=t.toLowerCase();for(var n,r=Object.keys(e),i=r.length;i-- >0;)if(t===(n=r[i]).toLowerCase())return n;return null}var pz="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,vz=function(e){return!qj(e)&&e!==pz};var mz,gz=(mz="undefined"!==typeof Uint8Array&&Gj(Uint8Array),function(e){return mz&&e instanceof mz}),yz=Xj("HTMLFormElement"),bz=function(e){var t=Object.prototype.hasOwnProperty;return function(e,n){return t.call(e,n)}}(),_z=Xj("RegExp"),xz=function(e,t){var n=Object.getOwnPropertyDescriptors(e),r={};dz(n,(function(n,i){var o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},Ez="abcdefghijklmnopqrstuvwxyz",wz="0123456789",Tz={DIGIT:wz,ALPHA:Ez,ALPHA_DIGIT:Ez+Ez.toUpperCase()+wz};var Sz,kz,Cz=Xj("AsyncFunction"),Az=(Sz="function"===typeof setImmediate,kz=Qj(pz.postMessage),Sz?setImmediate:kz?function(e,t){return pz.addEventListener("message",(function(n){var r=n.source,i=n.data;r===pz&&i===e&&t.length&&t.shift()()}),!1),function(n){t.push(n),pz.postMessage(e,"*")}}("axios@".concat(Math.random()),[]):function(e){return setTimeout(e)}),Iz="undefined"!==typeof queueMicrotask?queueMicrotask.bind(pz):"undefined"!==typeof process&&process.nextTick||Az,Oz={isArray:Kj,isArrayBuffer:Zj,isBuffer:function(e){return null!==e&&!qj(e)&&null!==e.constructor&&!qj(e.constructor)&&Qj(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:function(e){var t;return e&&("function"===typeof FormData&&e instanceof FormData||Qj(e.append)&&("formdata"===(t=Wj(e))||"object"===t&&Qj(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Zj(e.buffer)},isString:$j,isNumber:Jj,isBoolean:function(e){return!0===e||!1===e},isObject:ez,isPlainObject:tz,isReadableStream:lz,isRequest:uz,isResponse:cz,isHeaders:hz,isUndefined:qj,isDate:nz,isFile:rz,isBlob:iz,isRegExp:_z,isFunction:Qj,isStream:function(e){return ez(e)&&Qj(e.pipe)},isURLSearchParams:az,isTypedArray:gz,isFileList:oz,forEach:dz,merge:function e(){for(var t=(vz(this)&&this||{}).caseless,n={},r=function(r,i){var o=t&&fz(n,i)||i;tz(n[o])&&tz(r)?n[o]=e(n[o],r):tz(r)?n[o]=e({},r):Kj(r)?n[o]=r.slice():n[o]=r},i=0,o=arguments.length;i<o;i++)arguments[i]&&dz(arguments[i],r);return n},extend:function(e,t,n){return dz(t,(function(t,r){n&&Qj(t)?e[r]=jj(t,n):e[r]=t}),{allOwnKeys:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}).allOwnKeys}),e},trim:function(e){return e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},stripBOM:function(e){return 65279===e.charCodeAt(0)&&(e=e.slice(1)),e},inherits:function(e,t,n,r){e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:function(e,t,n,r){var i,o,a,s={};if(t=t||{},null==e)return t;do{for(o=(i=Object.getOwnPropertyNames(e)).length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Gj(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Wj,kindOfTest:Xj,endsWith:function(e,t,n){e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;var r=e.indexOf(t,n);return-1!==r&&r===n},toArray:function(e){if(!e)return null;if(Kj(e))return e;var t=e.length;if(!Jj(t))return null;for(var n=new Array(t);t-- >0;)n[t]=e[t];return n},forEachEntry:function(e,t){for(var n,r=(e&&e[Symbol.iterator]).call(e);(n=r.next())&&!n.done;){var i=n.value;t.call(e,i[0],i[1])}},matchAll:function(e,t){for(var n,r=[];null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:yz,hasOwnProperty:bz,hasOwnProp:bz,reduceDescriptors:xz,freezeMethods:function(e){xz(e,(function(t,n){if(Qj(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;var r=e[n];Qj(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=function(){throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:function(e,t){var n={},r=function(e){e.forEach((function(e){n[e]=!0}))};return Kj(e)?r(e):r(String(e).split(t)),n},toCamelCase:function(e){return e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))},noop:function(){},toFiniteNumber:function(e,t){return null!=e&&Number.isFinite(e=+e)?e:t},findKey:fz,global:pz,isContextDefined:vz,ALPHABET:Tz,generateString:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Tz.ALPHA_DIGIT,n="",r=t.length;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&Qj(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:function(e){var t=new Array(10);return function e(n,r){if(ez(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[r]=n;var i=Kj(n)?[]:{};return dz(n,(function(t,n){var o=e(t,r+1);!qj(o)&&(i[n]=o)})),t[r]=void 0,i}}return n}(e,0)},isAsyncFn:Cz,isThenable:function(e){return e&&(ez(e)||Qj(e))&&Qj(e.then)&&Qj(e.catch)},setImmediate:Az,asap:Iz};function Pz(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Oz.inherits(Pz,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Oz.toJSONObject(this.config),code:this.code,status:this.status}}});var Mz=Pz.prototype,Rz={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((function(e){Rz[e]={value:e}})),Object.defineProperties(Pz,Rz),Object.defineProperty(Mz,"isAxiosError",{value:!0}),Pz.from=function(e,t,n,r,i,o){var a=Object.create(Mz);return Oz.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(function(e){return"isAxiosError"!==e})),Pz.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};var Nz=Pz;function Dz(e){return Oz.isPlainObject(e)||Oz.isArray(e)}function Lz(e){return Oz.endsWith(e,"[]")?e.slice(0,-2):e}function Fz(e,t,n){return e?e.concat(t).map((function(e,t){return e=Lz(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}var Bz=Oz.toFlatObject(Oz,{},null,(function(e){return/^is[A-Z]/.test(e)}));var Uz=function(e,t,n){if(!Oz.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;var r=(n=Oz.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Oz.isUndefined(t[e])}))).metaTokens,i=n.visitor||u,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Oz.isSpecCompliantForm(t);if(!Oz.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Oz.isDate(e))return e.toISOString();if(!s&&Oz.isBlob(e))throw new Nz("Blob is not supported. Use a Buffer instead.");return Oz.isArrayBuffer(e)||Oz.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function u(e,n,i){var s=e;if(e&&!i&&"object"===typeof e)if(Oz.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Oz.isArray(e)&&function(e){return Oz.isArray(e)&&!e.some(Dz)}(e)||(Oz.isFileList(e)||Oz.endsWith(n,"[]"))&&(s=Oz.toArray(e)))return n=Lz(n),s.forEach((function(e,r){!Oz.isUndefined(e)&&null!==e&&t.append(!0===a?Fz([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!Dz(e)||(t.append(Fz(i,n,o),l(e)),!1)}var c=[],h=Object.assign(Bz,{defaultVisitor:u,convertValue:l,isVisitable:Dz});if(!Oz.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Oz.isUndefined(n)){if(-1!==c.indexOf(n))throw Error("Circular reference detected in "+r.join("."));c.push(n),Oz.forEach(n,(function(n,o){!0===(!(Oz.isUndefined(n)||null===n)&&i.call(t,n,Oz.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),c.pop()}}(e),t};function Hz(e){var t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function jz(e,t){this._pairs=[],e&&Uz(e,this,t)}var zz=jz.prototype;zz.append=function(e,t){this._pairs.push([e,t])},zz.toString=function(e){var t=e?function(t){return e.call(this,t,Hz)}:Hz;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};var Vz=jz;function Gz(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Wz(e,t,n){if(!t)return e;var r,i=n&&n.encode||Gz,o=n&&n.serialize;if(r=o?o(t,n):Oz.isURLSearchParams(t)?t.toString():new Vz(t,n).toString(i)){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}var Xz=function(){function e(){u(this,e),this.handlers=[]}return f(e,[{key:"use",value:function(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}},{key:"eject",value:function(e){this.handlers[e]&&(this.handlers[e]=null)}},{key:"clear",value:function(){this.handlers&&(this.handlers=[])}},{key:"forEach",value:function(e){Oz.forEach(this.handlers,(function(t){null!==t&&e(t)}))}}]),e}(),Yz=Xz,Kz={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},qz={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Vz,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Zz="undefined"!==typeof window&&"undefined"!==typeof document,$z="object"===typeof navigator&&navigator||void 0,Qz=Zz&&(!$z||["ReactNative","NativeScript","NS"].indexOf($z.product)<0),Jz="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,eV=Zz&&window.location.href||"http://localhost",tV=Re(Re({},i),qz);var nV=function(e){function t(e,n,r,i){var o=e[i++];if("__proto__"===o)return!0;var a=Number.isFinite(+o),s=i>=e.length;return o=!o&&Oz.isArray(r)?r.length:o,s?(Oz.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a):(r[o]&&Oz.isObject(r[o])||(r[o]=[]),t(e,n,r[o],i)&&Oz.isArray(r[o])&&(r[o]=function(e){var t,n,r={},i=Object.keys(e),o=i.length;for(t=0;t<o;t++)r[n=i[t]]=e[n];return r}(r[o])),!a)}if(Oz.isFormData(e)&&Oz.isFunction(e.entries)){var n={};return Oz.forEachEntry(e,(function(e,r){t(function(e){return Oz.matchAll(/\w+|\[(\w*)]/g,e).map((function(e){return"[]"===e[0]?"":e[1]||e[0]}))}(e),r,n,0)})),n}return null};var rV={transitional:Kz,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){var n,r=t.getContentType()||"",i=r.indexOf("application/json")>-1,o=Oz.isObject(e);if(o&&Oz.isHTMLForm(e)&&(e=new FormData(e)),Oz.isFormData(e))return i?JSON.stringify(nV(e)):e;if(Oz.isArrayBuffer(e)||Oz.isBuffer(e)||Oz.isStream(e)||Oz.isFile(e)||Oz.isBlob(e)||Oz.isReadableStream(e))return e;if(Oz.isArrayBufferView(e))return e.buffer;if(Oz.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Uz(e,new tV.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return tV.isNode&&Oz.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((n=Oz.isFileList(e))||r.indexOf("multipart/form-data")>-1){var a=this.env&&this.env.FormData;return Uz(n?{"files[]":e}:e,a&&new a,this.formSerializer)}}return o||i?(t.setContentType("application/json",!1),function(e,t,n){if(Oz.isString(e))try{return(t||JSON.parse)(e),Oz.trim(e)}catch(Pv){if("SyntaxError"!==Pv.name)throw Pv}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){var t=this.transitional||rV.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Oz.isResponse(e)||Oz.isReadableStream(e))return e;if(e&&Oz.isString(e)&&(n&&!this.responseType||r)){var i=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Pv){if(i){if("SyntaxError"===Pv.name)throw Nz.from(Pv,Nz.ERR_BAD_RESPONSE,this,null,this.response);throw Pv}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:tV.classes.FormData,Blob:tV.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Oz.forEach(["delete","get","head","post","put","patch"],(function(e){rV.headers[e]={}}));var iV=rV,oV=Oz.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),aV=Symbol("internals");function sV(e){return e&&String(e).trim().toLowerCase()}function lV(e){return!1===e||null==e?e:Oz.isArray(e)?e.map(lV):String(e)}function uV(e,t,n,r,i){return Oz.isFunction(r)?r.call(this,t,n):(i&&(t=n),Oz.isString(t)?Oz.isString(r)?-1!==t.indexOf(r):Oz.isRegExp(r)?r.test(t):void 0:void 0)}var cV=function(e,t){function n(e){u(this,n),e&&this.set(e)}return f(n,[{key:"set",value:function(e,t,n){var r=this;function i(e,t,n){var i=sV(t);if(!i)throw new Error("header name must be a non-empty string");var o=Oz.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=lV(e))}var o=function(e,t){return Oz.forEach(e,(function(e,n){return i(e,n,t)}))};if(Oz.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Oz.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o(function(e){var t,n,r,i={};return e&&e.split("\n").forEach((function(e){r=e.indexOf(":"),t=e.substring(0,r).trim().toLowerCase(),n=e.substring(r+1).trim(),!t||i[t]&&oV[t]||("set-cookie"===t?i[t]?i[t].push(n):i[t]=[n]:i[t]=i[t]?i[t]+", "+n:n)})),i}(e),t);else if(Oz.isHeaders(e)){var a,s=wb(e.entries());try{for(s.s();!(a=s.n()).done;){var l=Pt(a.value,2),u=l[0];i(l[1],u,n)}}catch(c){s.e(c)}finally{s.f()}}else null!=e&&i(t,e,n);return this}},{key:"get",value:function(e,t){if(e=sV(e)){var n=Oz.findKey(this,e);if(n){var r=this[n];if(!t)return r;if(!0===t)return function(e){for(var t,n=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;t=r.exec(e);)n[t[1]]=t[2];return n}(r);if(Oz.isFunction(t))return t.call(this,r,n);if(Oz.isRegExp(t))return t.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}},{key:"has",value:function(e,t){if(e=sV(e)){var n=Oz.findKey(this,e);return!(!n||void 0===this[n]||t&&!uV(0,this[n],n,t))}return!1}},{key:"delete",value:function(e,t){var n=this,r=!1;function i(e){if(e=sV(e)){var i=Oz.findKey(n,e);!i||t&&!uV(0,n[i],i,t)||(delete n[i],r=!0)}}return Oz.isArray(e)?e.forEach(i):i(e),r}},{key:"clear",value:function(e){for(var t=Object.keys(this),n=t.length,r=!1;n--;){var i=t[n];e&&!uV(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}},{key:"normalize",value:function(e){var t=this,n={};return Oz.forEach(this,(function(r,i){var o=Oz.findKey(n,i);if(o)return t[o]=lV(r),void delete t[i];var a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n}))}(i):String(i).trim();a!==i&&delete t[i],t[a]=lV(r),n[a]=!0})),this}},{key:"concat",value:function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=this.constructor).concat.apply(e,[this].concat(n))}},{key:"toJSON",value:function(e){var t=Object.create(null);return Oz.forEach(this,(function(n,r){null!=n&&!1!==n&&(t[r]=e&&Oz.isArray(n)?n.join(", "):n)})),t}},{key:Symbol.iterator,value:function(){return Object.entries(this.toJSON())[Symbol.iterator]()}},{key:"toString",value:function(){return Object.entries(this.toJSON()).map((function(e){var t=Pt(e,2);return t[0]+": "+t[1]})).join("\n")}},{key:Symbol.toStringTag,get:function(){return"AxiosHeaders"}}],[{key:"from",value:function(e){return e instanceof this?e:new this(e)}},{key:"concat",value:function(e){for(var t=new this(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((function(e){return t.set(e)})),t}},{key:"accessor",value:function(e){var t=(this[aV]=this[aV]={accessors:{}}).accessors,n=this.prototype;function r(e){var r=sV(e);t[r]||(!function(e,t){var n=Oz.toCamelCase(" "+t);["get","set","has"].forEach((function(r){Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Oz.isArray(e)?e.forEach(r):r(e),this}}]),n}();cV.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Oz.reduceDescriptors(cV.prototype,(function(e,t){var n=e.value,r=t[0].toUpperCase()+t.slice(1);return{get:function(){return n},set:function(e){this[r]=e}}})),Oz.freezeMethods(cV);var hV=cV;function dV(e,t){var n=this||iV,r=t||n,i=hV.from(r.headers),o=r.data;return Oz.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function fV(e){return!(!e||!e.__CANCEL__)}function pV(e,t,n){Nz.call(this,null==e?"canceled":e,Nz.ERR_CANCELED,t,n),this.name="CanceledError"}Oz.inherits(pV,Nz,{__CANCEL__:!0});var vV=pV;function mV(e,t,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Nz("Request failed with status code "+n.status,[Nz.ERR_BAD_REQUEST,Nz.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}var gV=function(e,t){e=e||10;var n,r=new Array(e),i=new Array(e),o=0,a=0;return t=void 0!==t?t:1e3,function(s){var l=Date.now(),u=i[a];n||(n=l),r[o]=s,i[o]=l;for(var c=a,h=0;c!==o;)h+=r[c++],c%=e;if((o=(o+1)%e)===a&&(a=(a+1)%e),!(l-n<t)){var d=u&&l-u;return d?Math.round(1e3*h/d):void 0}}};var yV=function(e,t){var n,r,i=0,o=1e3/t,a=function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){for(var e=Date.now(),t=e-i,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];t>=o?a(l,e):(n=l,r||(r=setTimeout((function(){r=null,a(n)}),o-t)))},function(){return n&&a(n)}]},bV=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0,i=gV(50,250);return yV((function(n){var o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,l=i(s);r=o;var u=b({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a},t?"download":"upload",!0);e(u)}),n)},_V=function(e,t){var n=null!=e;return[function(r){return t[0]({lengthComputable:n,total:e,loaded:r})},t[1]]},xV=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Oz.asap((function(){return e.apply(void 0,n)}))}},EV=tV.hasStandardBrowserEnv?function(){var e,t=tV.navigator&&/(msie|trident)/i.test(tV.navigator.userAgent),n=document.createElement("a");function r(e){var r=e;return t&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=r(window.location.href),function(t){var n=Oz.isString(t)?r(t):t;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0},wV=tV.hasStandardBrowserEnv?{write:function(e,t,n,r,i,o){var a=[e+"="+encodeURIComponent(t)];Oz.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Oz.isString(r)&&a.push("path="+r),Oz.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}};function TV(e,t){return e&&!function(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}var SV=function(e){return e instanceof hV?Re({},e):e};function kV(e,t){t=t||{};var n={};function r(e,t,n){return Oz.isPlainObject(e)&&Oz.isPlainObject(t)?Oz.merge.call({caseless:n},e,t):Oz.isPlainObject(t)?Oz.merge({},t):Oz.isArray(t)?t.slice():t}function i(e,t,n){return Oz.isUndefined(t)?Oz.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!Oz.isUndefined(t))return r(void 0,t)}function a(e,t){return Oz.isUndefined(t)?Oz.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}var l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:function(e,t){return i(SV(e),SV(t),!0)}};return Oz.forEach(Object.keys(Object.assign({},e,t)),(function(r){var o=l[r]||i,a=o(e[r],t[r],r);Oz.isUndefined(a)&&o!==s||(n[r]=a)})),n}var CV=function(e){var t,n=kV({},e),r=n.data,i=n.withXSRFToken,o=n.xsrfHeaderName,a=n.xsrfCookieName,s=n.headers,l=n.auth;if(n.headers=s=hV.from(s),n.url=Wz(TV(n.baseURL,n.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Oz.isFormData(r))if(tV.hasStandardBrowserEnv||tV.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(t=s.getContentType())){var u=t?t.split(";").map((function(e){return e.trim()})).filter(Boolean):[],c=Or(u),h=c[0],d=c.slice(1);s.setContentType([h||"multipart/form-data"].concat(Pe(d)).join("; "))}if(tV.hasStandardBrowserEnv&&(i&&Oz.isFunction(i)&&(i=i(n)),i||!1!==i&&EV(n.url))){var f=o&&a&&wV.read(a);f&&s.set(o,f)}return n},AV="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){var r,i,o,a,s,l=CV(e),u=l.data,c=hV.from(l.headers).normalize(),h=l.responseType,d=l.onUploadProgress,f=l.onDownloadProgress;function p(){a&&a(),s&&s(),l.cancelToken&&l.cancelToken.unsubscribe(r),l.signal&&l.signal.removeEventListener("abort",r)}var v=new XMLHttpRequest;function m(){if(v){var r=hV.from("getAllResponseHeaders"in v&&v.getAllResponseHeaders());mV((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:r,config:e,request:v}),v=null}}if(v.open(l.method.toUpperCase(),l.url,!0),v.timeout=l.timeout,"onloadend"in v?v.onloadend=m:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(m)},v.onabort=function(){v&&(n(new Nz("Request aborted",Nz.ECONNABORTED,e,v)),v=null)},v.onerror=function(){n(new Nz("Network Error",Nz.ERR_NETWORK,e,v)),v=null},v.ontimeout=function(){var t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",r=l.transitional||Kz;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),n(new Nz(t,r.clarifyTimeoutError?Nz.ETIMEDOUT:Nz.ECONNABORTED,e,v)),v=null},void 0===u&&c.setContentType(null),"setRequestHeader"in v&&Oz.forEach(c.toJSON(),(function(e,t){v.setRequestHeader(t,e)})),Oz.isUndefined(l.withCredentials)||(v.withCredentials=!!l.withCredentials),h&&"json"!==h&&(v.responseType=l.responseType),f){var g=Pt(bV(f,!0),2);o=g[0],s=g[1],v.addEventListener("progress",o)}if(d&&v.upload){var y=Pt(bV(d),2);i=y[0],a=y[1],v.upload.addEventListener("progress",i),v.upload.addEventListener("loadend",a)}(l.cancelToken||l.signal)&&(r=function(t){v&&(n(!t||t.type?new vV(null,e,v):t),v.abort(),v=null)},l.cancelToken&&l.cancelToken.subscribe(r),l.signal&&(l.signal.aborted?r():l.signal.addEventListener("abort",r)));var b=function(e){var t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(l.url);b&&-1===tV.protocols.indexOf(b)?n(new Nz("Unsupported protocol "+b+":",Nz.ERR_BAD_REQUEST,e)):v.send(u||null)}))},IV=function(e,t){var n=(e=e?e.filter(Boolean):[]).length;if(t||n){var r,i=new AbortController,o=function(e){if(!r){r=!0,s();var t=e instanceof Error?e:this.reason;i.abort(t instanceof Nz?t:new vV(t instanceof Error?t.message:t))}},a=t&&setTimeout((function(){a=null,o(new Nz("timeout ".concat(t," of ms exceeded"),Nz.ETIMEDOUT))}),t),s=function(){e&&(a&&clearTimeout(a),a=null,e.forEach((function(e){e.unsubscribe?e.unsubscribe(o):e.removeEventListener("abort",o)})),e=null)};e.forEach((function(e){return e.addEventListener("abort",o)}));var l=i.signal;return l.unsubscribe=function(){return Oz.asap(s)},l}};function OV(e){var t={},n=!1;function r(t,r){return n=!0,{done:!1,value:new vB(r=new Promise((function(n){n(e[t](r))})),1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}var PV,MV,RV=_e().mark((function e(t,n){var r,i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.byteLength,n&&!(r<n)){e.next=5;break}return e.next=4,t;case 4:return e.abrupt("return");case 5:i=0;case 6:if(!(i<r)){e.next=13;break}return o=i+n,e.next=10,t.slice(i,o);case 10:i=o,e.next=6;break;case 13:case"end":return e.stop()}}),e)})),NV=function(){var e=yB(_e().mark((function e(t,n){var r,i,o,a,s,l;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=!1,i=!1,e.prev=2,a=fB(DV(t));case 4:return e.next=6,mB(a.next());case 6:if(!(r=!(s=e.sent).done)){e.next=12;break}return l=s.value,e.delegateYield(OV(fB(RV(l,n))),"t0",9);case 9:r=!1,e.next=4;break;case 12:e.next=18;break;case 14:e.prev=14,e.t1=e.catch(2),i=!0,o=e.t1;case 18:if(e.prev=18,e.prev=19,!r||null==a.return){e.next=23;break}return e.next=23,mB(a.return());case 23:if(e.prev=23,!i){e.next=26;break}throw o;case 26:return e.finish(23);case 27:return e.finish(18);case 28:case"end":return e.stop()}}),e,null,[[2,14,18,28],[19,,23,27]])})));return function(t,n){return e.apply(this,arguments)}}(),DV=function(){var e=yB(_e().mark((function e(t){var n,r,i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t[Symbol.asyncIterator]){e.next=3;break}return e.delegateYield(OV(fB(t)),"t0",2);case 2:return e.abrupt("return");case 3:n=t.getReader(),e.prev=4;case 5:return e.next=7,mB(n.read());case 7:if(r=e.sent,i=r.done,o=r.value,!i){e.next=12;break}return e.abrupt("break",16);case 12:return e.next=14,o;case 14:e.next=5;break;case 16:return e.prev=16,e.next=19,mB(n.cancel());case 19:return e.finish(16);case 20:case"end":return e.stop()}}),e,null,[[4,,16,20]])})));return function(t){return e.apply(this,arguments)}}(),LV=function(e,t,n,r){var i,o=NV(e,t),a=0,s=function(e){i||(i=!0,r&&r(e))};return new ReadableStream({pull:function(e){return Ee(_e().mark((function t(){var r,i,l,u,c;return _e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o.next();case 3:if(r=t.sent,i=r.done,l=r.value,!i){t.next=10;break}return s(),e.close(),t.abrupt("return");case 10:u=l.byteLength,n&&(c=a+=u,n(c)),e.enqueue(new Uint8Array(l)),t.next=19;break;case 15:throw t.prev=15,t.t0=t.catch(0),s(t.t0),t.t0;case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},cancel:function(e){return s(e),o.return()}},{highWaterMark:2})},FV="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,BV=FV&&"function"===typeof ReadableStream,UV=FV&&("function"===typeof TextEncoder?(PV=new TextEncoder,function(e){return PV.encode(e)}):function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Uint8Array,e.next=3,new Response(t).arrayBuffer();case 3:return e.t1=e.sent,e.abrupt("return",new e.t0(e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),HV=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e.apply(void 0,n)}catch(Pv){return!1}},jV=BV&&HV((function(){var e=!1,t=new Request(tV.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),zV=BV&&HV((function(){return Oz.isReadableStream(new Response("").body)})),VV={stream:zV&&function(e){return e.body}};FV&&(MV=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((function(e){!VV[e]&&(VV[e]=Oz.isFunction(MV[e])?function(t){return t[e]()}:function(t,n){throw new Nz("Response type '".concat(e,"' is not supported"),Nz.ERR_NOT_SUPPORT,n)})})));var GV=function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",0);case 2:if(!Oz.isBlob(t)){e.next=4;break}return e.abrupt("return",t.size);case 4:if(!Oz.isSpecCompliantForm(t)){e.next=9;break}return n=new Request(tV.origin,{method:"POST",body:t}),e.next=8,n.arrayBuffer();case 8:case 15:return e.abrupt("return",e.sent.byteLength);case 9:if(!Oz.isArrayBufferView(t)&&!Oz.isArrayBuffer(t)){e.next=11;break}return e.abrupt("return",t.byteLength);case 11:if(Oz.isURLSearchParams(t)&&(t+=""),!Oz.isString(t)){e.next=16;break}return e.next=15,UV(t);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),WV=function(){var e=Ee(_e().mark((function e(t,n){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Oz.toFiniteNumber(t.getContentLength()),e.abrupt("return",null==r?GV(n):r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XV=FV&&function(){var e=Ee(_e().mark((function e(t){var n,r,i,o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C,A,I,O,P,M,R,N,D;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=CV(t),r=n.url,i=n.method,o=n.data,a=n.signal,s=n.cancelToken,l=n.timeout,u=n.onDownloadProgress,c=n.onUploadProgress,h=n.responseType,d=n.headers,f=n.withCredentials,p=void 0===f?"same-origin":f,v=n.fetchOptions,h=h?(h+"").toLowerCase():"text",m=IV([a,s&&s.toAbortSignal()],l),y=m&&m.unsubscribe&&function(){m.unsubscribe()},e.prev=4,e.t0=c&&jV&&"get"!==i&&"head"!==i,!e.t0){e.next=11;break}return e.next=9,WV(d,o);case 9:e.t1=b=e.sent,e.t0=0!==e.t1;case 11:if(!e.t0){e.next=15;break}_=new Request(r,{method:"POST",body:o,duplex:"half"}),Oz.isFormData(o)&&(x=_.headers.get("content-type"))&&d.setContentType(x),_.body&&(E=_V(b,bV(xV(c))),w=Pt(E,2),T=w[0],S=w[1],o=LV(_.body,65536,T,S));case 15:return Oz.isString(p)||(p=p?"include":"omit"),k="credentials"in Request.prototype,g=new Request(r,Re(Re({},v),{},{signal:m,method:i.toUpperCase(),headers:d.normalize().toJSON(),body:o,duplex:"half",credentials:k?p:void 0})),e.next=20,fetch(g);case 20:return C=e.sent,A=zV&&("stream"===h||"response"===h),zV&&(u||A&&y)&&(I={},["status","statusText","headers"].forEach((function(e){I[e]=C[e]})),O=Oz.toFiniteNumber(C.headers.get("content-length")),P=u&&_V(O,bV(xV(u),!0))||[],M=Pt(P,2),R=M[0],N=M[1],C=new Response(LV(C.body,65536,R,(function(){N&&N(),y&&y()})),I)),h=h||"text",e.next=26,VV[Oz.findKey(VV,h)||"text"](C,t);case 26:return D=e.sent,!A&&y&&y(),e.next=30,new Promise((function(e,n){mV(e,n,{data:D,headers:hV.from(C.headers),status:C.status,statusText:C.statusText,config:t,request:g})}));case 30:return e.abrupt("return",e.sent);case 33:if(e.prev=33,e.t2=e.catch(4),y&&y(),!e.t2||"TypeError"!==e.t2.name||!/fetch/i.test(e.t2.message)){e.next=38;break}throw Object.assign(new Nz("Network Error",Nz.ERR_NETWORK,t,g),{cause:e.t2.cause||e.t2});case 38:throw Nz.from(e.t2,e.t2&&e.t2.code,t,g);case 39:case"end":return e.stop()}}),e,null,[[4,33]])})));return function(t){return e.apply(this,arguments)}}(),YV={http:null,xhr:AV,fetch:XV};Oz.forEach(YV,(function(e,t){if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Pv){}Object.defineProperty(e,"adapterName",{value:t})}}));var KV=function(e){return"- ".concat(e)},qV=function(e){return Oz.isFunction(e)||null===e||!1===e},ZV=function(e){for(var t,n,r=(e=Oz.isArray(e)?e:[e]).length,i={},o=0;o<r;o++){var a=void 0;if(n=t=e[o],!qV(t)&&void 0===(n=YV[(a=String(t)).toLowerCase()]))throw new Nz("Unknown adapter '".concat(a,"'"));if(n)break;i[a||"#"+o]=n}if(!n){var s=Object.entries(i).map((function(e){var t=Pt(e,2),n=t[0],r=t[1];return"adapter ".concat(n," ")+(!1===r?"is not supported by the environment":"is not available in the build")})),l=r?s.length>1?"since :\n"+s.map(KV).join("\n"):" "+KV(s[0]):"as no adapter specified";throw new Nz("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return n};function $V(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new vV(null,e)}function QV(e){return $V(e),e.headers=hV.from(e.headers),e.data=dV.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ZV(e.adapter||iV.adapter)(e).then((function(t){return $V(e),t.data=dV.call(e,e.transformResponse,t),t.headers=hV.from(t.headers),t}),(function(t){return fV(t)||($V(e),t&&t.response&&(t.response.data=dV.call(e,e.transformResponse,t.response),t.response.headers=hV.from(t.response.headers))),Promise.reject(t)}))}var JV="1.7.7",eG={};["object","boolean","number","function","string","symbol"].forEach((function(e,t){eG[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));var tG={};eG.transitional=function(e,t,n){return function(r,i,o){if(!1===e)throw new Nz(function(e,t){return"[Axios v1.7.7] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),Nz.ERR_DEPRECATED);return t&&!tG[i]&&(tG[i]=!0),!e||e(r,i,o)}};var nG={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Nz("options must be an object",Nz.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(e),i=r.length;i-- >0;){var o=r[i],a=t[o];if(a){var s=e[o],l=void 0===s||a(s,o,e);if(!0!==l)throw new Nz("option "+o+" must be "+l,Nz.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Nz("Unknown option "+o,Nz.ERR_BAD_OPTION)}},validators:eG},rG=nG.validators,iG=function(){function e(t){u(this,e),this.defaults=t,this.interceptors={request:new Yz,response:new Yz}}return f(e,[{key:"request",value:function(){var e=Ee(_e().mark((function e(t,n){var r,i;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._request(t,n);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),e.t0 instanceof Error){Error.captureStackTrace?Error.captureStackTrace(r={}):r=new Error,i=r.stack?r.stack.replace(/^.+\n/,""):"";try{e.t0.stack?i&&!String(e.t0.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(e.t0.stack+="\n"+i):e.t0.stack=i}catch(Pv){}}throw e.t0;case 10:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_request",value:function(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{};var n=t=kV(this.defaults,t),r=n.transitional,i=n.paramsSerializer,o=n.headers;void 0!==r&&nG.assertOptions(r,{silentJSONParsing:rG.transitional(rG.boolean),forcedJSONParsing:rG.transitional(rG.boolean),clarifyTimeoutError:rG.transitional(rG.boolean)},!1),null!=i&&(Oz.isFunction(i)?t.paramsSerializer={serialize:i}:nG.assertOptions(i,{encode:rG.function,serialize:rG.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();var a=o&&Oz.merge(o.common,o[t.method]);o&&Oz.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete o[e]})),t.headers=hV.concat(a,o);var s=[],l=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(l=l&&e.synchronous,s.unshift(e.fulfilled,e.rejected))}));var u,c=[];this.interceptors.response.forEach((function(e){c.push(e.fulfilled,e.rejected)}));var h,d=0;if(!l){var f=[QV.bind(this),void 0];for(f.unshift.apply(f,s),f.push.apply(f,c),h=f.length,u=Promise.resolve(t);d<h;)u=u.then(f[d++],f[d++]);return u}h=s.length;var p=t;for(d=0;d<h;){var v=s[d++],m=s[d++];try{p=v(p)}catch(g){m.call(this,g);break}}try{u=QV.call(this,p)}catch(g){return Promise.reject(g)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}},{key:"getUri",value:function(e){return Wz(TV((e=kV(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}]),e}();Oz.forEach(["delete","get","head","options"],(function(e){iG.prototype[e]=function(t,n){return this.request(kV(n||{},{method:e,url:t,data:(n||{}).data}))}})),Oz.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(kV(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}iG.prototype[e]=t(),iG.prototype[e+"Form"]=t(!0)}));var oG=iG,aG=function(){function e(t){if(u(this,e),"function"!==typeof t)throw new TypeError("executor must be a function.");var n;this.promise=new Promise((function(e){n=e}));var r=this;this.promise.then((function(e){if(r._listeners){for(var t=r._listeners.length;t-- >0;)r._listeners[t](e);r._listeners=null}})),this.promise.then=function(e){var t,n=new Promise((function(e){r.subscribe(e),t=e})).then(e);return n.cancel=function(){r.unsubscribe(t)},n},t((function(e,t,i){r.reason||(r.reason=new vV(e,t,i),n(r.reason))}))}return f(e,[{key:"throwIfRequested",value:function(){if(this.reason)throw this.reason}},{key:"subscribe",value:function(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}},{key:"unsubscribe",value:function(e){if(this._listeners){var t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}}},{key:"toAbortSignal",value:function(){var e=this,t=new AbortController,n=function(e){t.abort(e)};return this.subscribe(n),t.signal.unsubscribe=function(){return e.unsubscribe(n)},t.signal}}],[{key:"source",value:function(){var t,n=new e((function(e){t=e}));return{token:n,cancel:t}}}]),e}(),sG=aG;var lG={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lG).forEach((function(e){var t=Pt(e,2),n=t[0],r=t[1];lG[r]=n}));var uG=lG;var cG=function e(t){var n=new oG(t),r=jj(oG.prototype.request,n);return Oz.extend(r,oG.prototype,n,{allOwnKeys:!0}),Oz.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(kV(t,n))},r}(iV);cG.Axios=oG,cG.CanceledError=vV,cG.CancelToken=sG,cG.isCancel=fV,cG.VERSION=JV,cG.toFormData=Uz,cG.AxiosError=Nz,cG.Cancel=cG.CanceledError,cG.all=function(e){return Promise.all(e)},cG.spread=function(e){return function(t){return e.apply(null,t)}},cG.isAxiosError=function(e){return Oz.isObject(e)&&!0===e.isAxiosError},cG.mergeConfig=kV,cG.AxiosHeaders=hV,cG.formToJSON=function(e){return nV(Oz.isHTMLForm(e)?new FormData(e):e)},cG.getAdapter=ZV,cG.HttpStatusCode=uG,cG.default=cG;var hG=cG,dG=(Hj.Dragger,{dragon:{dbJsonUrl:"./assets/examples/dragon/Dragon.json",textureUrl:"./assets/examples/dragon/texture.png",textureConfigUrl:"./assets/examples/dragon/texture.json",icon:"./assets/examples/DBa.png"},bicycle:{dbJsonUrl:"./assets/examples/Bicycle/Bicycle_ske.json",textureUrl:"./assets/examples/Bicycle/Bicycle_tex.png",textureConfigUrl:"./assets/examples/Bicycle/Bicycle_tex.json",icon:"./assets/examples/Dbf.png"},ubbie:{dbJsonUrl:"./assets/examples/Ubbie/Ubbie_ske.json",textureUrl:"./assets/examples/Ubbie/Ubbie_tex.png",textureConfigUrl:"./assets/examples/Ubbie/Ubbie_tex.json",icon:"./assets/examples/Dbe.png"},rooster:{dbJsonUrl:"./assets/examples/Rooster_Ani/Rooster_An_ske.json",textureUrl:"./assets/examples/Rooster_Ani/Rooster_An_tex.png",textureConfigUrl:"./assets/examples/Rooster_Ani/Rooster_An_tex.json",icon:"./assets/examples/DBk.png"},sheep:{dbJsonUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_ske.json",textureUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_tex.png",textureConfigUrl:"./assets/examples/Sheep_Ani/Sheep_Anim_tex.json",icon:"./assets/examples/DBj.png"}}),fG=function(e){var t=e.show,n=e.store,r=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.commit(W.CLOSE_IMPORT_WINDOW,!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){n.commit(W.CLOSE_IMPORT_WINDOW,!1)},o=function(){var e=Ee(_e().mark((function e(t){var n,r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hG.get(t,{responseType:"blob"});case 2:return n=e.sent,e.next=5,RU(n.data);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hG.get(t);case 2:return n=e.sent,e.abrupt("return",JSON.stringify(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,hG.get(t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=Pt(e.split("."),2),n=t[0];t[1];return n},u=function(){var e=Ee(_e().mark((function e(t){var r,i,o;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,LT.uploadFileToServer(t);case 2:r=e.sent,n.commit(_.UPLOAD_FILE,r),i=n.getId(),o={id:i,name:l(t.name),fileIds:[t.id],type:t.type,data:t.data},n.dispatch(R.ADD_FILE,o);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c=function(){var e=Ee(_e().mark((function e(t,n){var r,i,s,l,c,h;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.split("/").pop(),i=n.split("/").pop(),e.next=4,o(t);case 4:return s=e.sent,e.next=7,a(n);case 7:return l=e.sent,c={name:r,type:"png",data:s},e.next=11,u(c);case 11:return h={name:i,type:"json",data:l},e.next=14,u(h);case 14:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),h=function(){var e=Ee(_e().mark((function e(t){var r;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s(t);case 2:r=e.sent,xp.isDragonbonesJson(r)&&n.dispatch(R.LOAD_DRAGON_BONES_JSON_DATA,{data:r,version:r.version});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Ee(_e().mark((function e(t){var n;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=dG[t],e.next=4,c(n.textureUrl,n.textureConfigUrl);case 4:return e.sent,e.next=7,h(n.dbJsonUrl);case 7:return e.sent,yf.success("\u5bfc\u5165\u6210\u529f"),i(),e.abrupt("return",!0);case 13:return e.prev=13,e.t0=e.catch(0),yf.error("\u5bfc\u5165\u5931\u8d25"),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("dragon");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("bicycle");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("ubbie");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("rooster");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d("sheep");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,ff.jsx)(Zc,{title:"\u5bfc\u5165",open:t,onOk:r,onCancel:i,okText:"\u5bfc\u5165",width:660,children:(0,ff.jsxs)("div",{className:"import-window",children:[(0,ff.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u793a\u4f8b"}),(0,ff.jsxs)("div",{className:"import-example",children:[(0,ff.jsxs)("li",{onClick:f,children:[(0,ff.jsx)("img",{src:dG.dragon.icon}),(0,ff.jsx)("span",{children:"\u5c0f\u7eff\u9f99"})]}),(0,ff.jsxs)("li",{onClick:p,children:[(0,ff.jsx)("img",{src:dG.bicycle.icon}),(0,ff.jsx)("span",{children:"ik\u793a\u4f8b"})]}),(0,ff.jsxs)("li",{onClick:v,children:[(0,ff.jsx)("img",{src:dG.ubbie.icon}),(0,ff.jsx)("span",{children:"mesh\u793a\u4f8b"})]}),(0,ff.jsxs)("li",{onClick:m,children:[(0,ff.jsx)("img",{src:dG.rooster.icon}),(0,ff.jsx)("span",{children:"\u7ed1\u5b9a\u793a\u4f8b1"})]}),(0,ff.jsxs)("li",{onClick:g,children:[(0,ff.jsx)("img",{src:dG.sheep.icon}),(0,ff.jsx)("span",{children:"\u7ed1\u5b9a\u793a\u4f8b2"})]})]}),(0,ff.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u7d20\u6750"}),(0,ff.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165png\u3001jpg\u3001jpeg\u7684\u56fe\u7247\u6587\u4ef6\uff0c\u548c\u7eb9\u7406\u96c6\u7684json\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f"}),(0,ff.jsx)("div",{}),(0,ff.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u9f99\u9aa8\u6570\u636e"}),(0,ff.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165json\u683c\u5f0f\u7684\u9f99\u9aa8\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f\u5373\u53ef\uff0c\u5bfc\u5165\u9f99\u9aa8\u6587\u4ef6\u524d\u8981\u5148\u5bfc\u5165\u7d20\u6750"}),(0,ff.jsx)("div",{}),(0,ff.jsx)("div",{className:"import-title",children:"\u5bfc\u5165\u9f99\u9aa8\u5de5\u7a0b\u6587\u4ef6"}),(0,ff.jsx)("div",{className:"import-desc",children:"\u652f\u6301\u5bfc\u5165dbproj\u683c\u5f0f\u7684\u9f99\u9aa8\u6587\u4ef6, \u5c06\u6587\u4ef6\u62d6\u5165\u5230\u7d20\u6750\u5e93\u9762\u677f\u5373\u53ef\uff0c\u5bfc\u5165\u9f99\u9aa8\u5de5\u7a0b\u6587\u4ef6\u524d\u8981\u5148\u5bfc\u5165\u7d20\u6750"}),(0,ff.jsx)("div",{})]})})},pG=void 0,vG=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:mG,label:"\u821e\u53f0",icon:"icon-code",type:gboxLayout.GPanelType.BLOCK})}return f(n,[{key:"resize",value:function(e,t){this.store.commit(X.UPDATE_SIZE,{width:e,height:t})}}],[{key:"toString",value:function(){return"StagePanel"}}]),n}(QT),mG=function(e){var t=(0,a.useRef)(null),n=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)(null),o=e.store.state.editor.stage,s=e.store.state.runtime.editing.stageTool,l=e.store.state.runtime.editing.boneSlotControl,u=e.store.state.runtime.editing.selectedBoneIds,c=e.store.state.runtime.editing.selectedSlotIds,h=e.store.state.editor.over.overBone,d=e.store.state.editor.over.overSlotId,f=e.store.state.editor.openExportWindow||!1,p=e.store.state.editor.openImportWindow||!1,v=e.store.state.editor.openPreviewWindow||!1,m=e.store.state.runtime.editing.editMode,g=e.store.getCurArmature(),y=Pt((0,a.useState)(Re({},o)),2),b=y[0],_=y[1],x=Pt((0,a.useState)(s),2),E=x[0],w=x[1],T=Pt((0,a.useState)(Re({},l)),2),S=T[0],k=T[1],C=Pt((0,a.useState)(Pe(u)),2),A=C[0],I=C[1],O=Pt((0,a.useState)(Pe(c)),2),P=O[0],M=O[1],R=Pt((0,a.useState)(h),2),N=R[0],L=R[1],U=Pt((0,a.useState)(d),2),H=U[0],z=U[1],V=Pt((0,a.useState)(f),2),Y=V[0],K=V[1],q=Pt((0,a.useState)(p),2),Z=q[0],$=q[1],Q=Pt((0,a.useState)(v),2),ee=Q[0],te=Q[1],ne=Pt((0,a.useState)(""),2),re=ne[0],ie=ne[1],oe=Pt((0,a.useState)(m),2),ae=oe[0],se=oe[1],le=function(){_(Re({},o))};(0,a.useEffect)((function(){var n=e.store.state;e.eventBus.on(X.UPDATE_SIZE,(function(e){le()}),pG),e.eventBus.on(X.UPDATE_POSITION,(function(e){le()}),pG),e.eventBus.on(X.UPDATE_SCALE,(function(e){le()}),pG),e.eventBus.on(W.SWITCH_MODE,(function(){var t=e.store.state.runtime.editing.editMode;se(t)}),pG),e.eventBus.on(W.SWITCH_TOOL,(function(){var t=e.store.state.runtime.editing.stageTool;w(t)}),pG),e.eventBus.on(W.CHANGE_BONE_SLOT_CONTROL,(function(){var t=e.store.state.runtime.editing.boneSlotControl;k(Re({},t))}),pG),e.eventBus.on(G.UPDATE_PROPERTIES,(function(){var t=e.store.state.runtime.editing.selectedBoneIds;I(Pe(t))}),pG),e.eventBus.on(G.SELECT_BONES,(function(){var t=e.store.state.runtime.editing.selectedBoneIds;I(Pe(t))}),pG),e.eventBus.on(B.UPDATE_PROPERTIES,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Pe(t))}),pG),e.eventBus.on(B.SELECT_SLOTS,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Pe(t))}),pG),e.eventBus.on(j.SELECT_DISPLAY,(function(){var t=e.store.state.runtime.editing.selectedSlotIds;M(Pe(t))}),pG),e.eventBus.on(G.OVER_BONE,(function(){var t=e.store.state.editor.over.overBone;L(t)}),pG),e.eventBus.on(B.OVER_SLOT,(function(){var t=e.store.state.editor.over.overSlotId;z(t)}),pG),e.eventBus.on(W.OPEN_EXPORT_WINDOW,(function(){var t=e.store.state.editor.openExportWindow;K(t)}),pG),e.eventBus.on(W.CLOSE_EXPORT_WINDOW,(function(){var t=e.store.state.editor.openExportWindow;K(t)}),pG),e.eventBus.on(W.OPEN_IMPORT_WINDOW,(function(){e.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL&&e.store.dispatch(X.CLOSE_MESH_EDIT_TOOL,{});var t=e.store.state.editor.openImportWindow;$(t)}),pG),e.eventBus.on(W.CLOSE_IMPORT_WINDOW,(function(){var t=e.store.state.editor.openImportWindow;$(t)}),pG),e.eventBus.on(W.OPEN_PREVIEW_WINDOW,(function(){var t=e.store.state.editor.openPreviewWindow;te(t)}),pG),e.eventBus.on(W.CLOSE_PREVIEW_WINDOW,(function(){var t=e.store.state.editor.openPreviewWindow;te(t)}),pG),e.eventBus.on(W.SET_DEFAULT_TOOLTIP_TOP,(function(t){var n=e.store.state.runtime.editing.defaultTips;ie(n||"")}),pG),e.eventBus.on(D.SELECT_ARMATURE,(function(t){var n=e.store.state.runtime.editing.selectedBoneIds;I(Pe(n));var r=e.store.state.runtime.editing.selectedSlotIds;M(Pe(r));var i=e.store.state.editor.over.overSlotId;z(i);var o=e.store.state.editor.over.overBone;L(o),ie("")}),pG),function(e,t){var n=Math.round(window.devicePixelRatio),r=new XC({width:t.width,height:t.height,backgroundColor:10066329,backgroundAlpha:1,clearBeforeRender:!0,context:null,powerPreference:"default",premultipliedAlpha:!0,preserveDrawingBuffer:!1,resolution:n,autoDensity:!0,antialias:!1,hello:!0});r.addToContainer(e.current),Pk.pixiLayer=e.current,$2.instance.initViewController(HC,r)}(t,n.editor.stage)}),[]);return(0,ff.jsxs)("div",{className:"stage-panel",children:[(0,ff.jsx)("div",{className:"stage",ref:t,onDrop:function(t){var n=t.dataTransfer;if(n){var r=n.getData("dropToScene"),i=e.store.state.editor.stage.mouseStageX,o=e.store.state.editor.stage.mouseStageY;if(r&&r.id){var a={x:i,y:o,assetId:r.id};e.store.dispatch(F.ADD_SLOT,a)}}},onDragOver:function(){}}),(0,ff.jsxs)("div",{className:"scale-widget",ref:n,onClick:function(){e.eventBus.sendNotification(X.RESET_SCALE,void 0)},children:[Math.round(100*b.scale)," "]}),(0,ff.jsx)(VC,{size:b.width,offset:b.x,scale:b.scale,vertical:!1,ref:r}),(0,ff.jsx)(VC,{size:b.height,offset:b.y,scale:b.scale,vertical:!0,ref:i}),(0,ff.jsx)(nI,{curTool:E,editMode:ae,onSwitchTool:function(t){e.store.dispatch(X.SWITCH_TOOL,t)}}),s!==J.MESH_EDIT_TOOL&&s!==J.RIGGING_TOOL&&(0,ff.jsx)(oI,{boneVisible:S.boneVisible,boneSelectEnable:S.boneSelectEnable,boneInheritEnable:S.boneInheritEnable,slotVisible:S.slotVisible,slotSelectEnable:S.slotSelectEnable,slotInheritEnable:S.slotInheritEnable,onChange:function(t,n){e.store.dispatch(X.CHANGE_BONE_SLOT_CONTROL,{property:t,value:n})}}),(0,ff.jsx)(sI,{selectBoneIds:A,selectSlotIds:P,armature:g,overBoneId:N,overSlotId:H,defaultTips:re}),s===J.MESH_EDIT_TOOL&&(0,ff.jsx)(eH,{store:e.store,eventBus:e.eventBus}),(0,ff.jsx)(yf,{}),(0,ff.jsx)(BU,{show:Y,store:e.store}),(0,ff.jsx)(ZU,{show:ee,store:e.store}),(0,ff.jsx)(fG,{show:Z,store:e.store})]})},gG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).loopLeft=-1,r.loopRight=-1,r.degreeScale=void 0,r.model=void 0,r._realWidth=void 0,r._index=void 0,r._minScale=void 0,r._curNum=void 0,r.bg=void 0,r.txtContainer=void 0,r.pointerContainer=void 0,r.curPointer=void 0,r.lastPointer=void 0,r.txtPool=void 0,r.curTxts=void 0,r.txtCurFrame=void 0,r.zoomCenterFrame=0,r.model=e,r.bg=new iw,r.addChild(r.bg),r.degreeScale=new iw,r.addChild(r.degreeScale),r.txtContainer=new c_,r.addChild(r.txtContainer),r.pointerContainer=new c_,r.addChild(r.pointerContainer),r.curPointer=r.drawPointer(),r.lastPointer=r.drawLastPointer(),r.pointerContainer.addChild(r.lastPointer),r.pointerContainer.addChild(r.curPointer),r.txtCurFrame=new Rw(""),r.txtCurFrame.style.fill=yp.DOPESHEET_PLAY_HEAD,r.txtCurFrame.style.fontSize=9,r.txtCurFrame.style.align="center",r.pointerContainer.addChild(r.txtCurFrame),r.txtPool=[],r.curTxts=[],r._realWidth=100,r}return f(n,[{key:"curFrame",get:function(){return this.model.state.editor.dopesheet.curTime}},{key:"realWidth",get:function(){return this._realWidth}},{key:"timelineScale",get:function(){return this.model.state.editor.dopesheet.scale},set:function(e){this.model.commit(Q.UPDATE_SCALE,e)}},{key:"offsetX",get:function(){return this.model.state.editor.dopesheet.offset}},{key:"resize",value:function(e,t){isNaN(e)||this._realWidth===e||(this._realWidth=e,this.refreshBg(),this.draw())}},{key:"zoomOut",value:function(){var e=this.model.state.config.timeline.ZOOM_RATE,t=this.timelineScale;t*=e,this.zoomToScale(t)}},{key:"zoomIn",value:function(){var e=this.model.state.config.timeline.ZOOM_RATE,t=this.timelineScale;t/=e,this.zoomToScale(t)}},{key:"getOffsetFrame",value:function(){var e=this.model.getFramePerLength();return this.model.state.editor.dopesheet.offset*e}},{key:"getViewMinFrame",value:function(){var e=this.model.state.config.timeline.FIRST_X;return this.getFrameFromX(e)}},{key:"getViewMaxFrame",value:function(){var e=this.model.state.config.timeline.FIRST_X;return this.getFrameFromX(this.realWidth-e)}},{key:"updateFrame",value:function(){this.refreshPointer()}},{key:"draw",value:function(){this.drawDegreeScale(),this.refreshPointer(),this.refreshLastFrame()}},{key:"refreshLastFrame",value:function(){var e=this.model.getAnimationDuration()[1],t=this.getXFromFrame(e);t>0?(this.lastPointer.x=t,this.lastPointer.visible=!0):this.lastPointer.visible=!1}},{key:"getXFromFrame",value:function(e){return this.model.getXFromFrame(e)}},{key:"getFrameFromX",value:function(e){var t=this.model.getFrameFromX(e);return Math.round(t)}},{key:"drawPointer",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.POINTER_HEIGHT,r=new iw;return r.lineStyle(1,yp.DOPESHEET_PLAY_HEAD),r.moveTo(0,t),r.lineTo(0,t-n),r.moveTo(5,t-n-4),r.lineTo(0,t-n),r.moveTo(-5,t-n-4),r.lineTo(0,t-n),r}},{key:"drawLastPointer",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.LOW_FRAME_HEIGHT,r=new iw;return r.lineStyle(1,yp.DOPESHEET_LAST_FRAME),r.moveTo(0,t),r.lineTo(0,t-n),r}},{key:"zoomToScale",value:function(e){this.zoomCenterFrame=this.curFrame;var t=this.getXFromFrame(this.zoomCenterFrame),n=this.model.state.editor.dopesheet.offset;this.timelineScale=e;var r=n+this.getXFromFrame(this.zoomCenterFrame)-t;r<0&&(r=0),this.model.commit(Q.UPDATE_OFFSET,r)}},{key:"refreshPointer",value:function(){var e=this.model.state.config.timeline.TEXT_Y,t=this.curFrame,n=this.getXFromFrame(t);if(n>0){this.curPointer.x=n;var r=Math.round(100*t)/100;this.txtCurFrame.text=r.toString(),this.txtCurFrame.x=n-Math.round(this.txtCurFrame.width/2),this.txtCurFrame.y=e,this.curPointer.visible=!0,this.txtCurFrame.visible=!0}else this.curPointer.visible=!1,this.txtCurFrame.visible=!1}},{key:"refreshBg",value:function(){var e=this.model.state.config.timeline.LABEL_HEIGHT;this.bg.clear(),this.bg.beginFill(yp.DOPESHEET_LABEL_BG),this.bg.drawRect(0,0,this._realWidth,e),this.bg.endFill()}},{key:"drawDegreeScale",value:function(){var e=this.model.state.config.timeline,t=e.FIRST_X,n=e.LABEL_HEIGHT,r=e.LOW_FRAME_HEIGHT,i=e.HIGH_FRAME_HEIGHT,o=e.TEXT_Y,a=this.model.state.editor.dopesheet,s=a.offset,l=a.curGap,u=a.scaleLevel,c=a.labelLevel;this.degreeScale.clear(),this.degreeScale.lineStyle(1,yp.DOPESHEET_LABEL,1);var h=s,d=Math.ceil((this._realWidth+t)/l),f=Math.floor(h/l);(f-=Math.floor(t/l))<0&&(f=0),this.disposetAllText();for(var p=f;p<d+f;p++){var v=p%c===0,m=n-r;v&&(m=n-i);var g=p*l-h+t,y=n;if(g>0&&(this.degreeScale.moveTo(g,y),this.degreeScale.lineTo(g,m)),v&&g>0){var b=this.getLabelTxt();b.style.align="center",b.text=(p*u).toString(),b.x=g-Math.round(b.width/2),b.y=o,this.txtContainer.addChild(b),this.curTxts.push(b)}}}},{key:"disposetAllText",value:function(){var e,t;for(this.txtContainer.removeChildren(),e=0,t=this.curTxts.length;e<t;e++)this.txtPool.push(this.curTxts[e]);this.curTxts.length=0}},{key:"getLabelTxt",value:function(){var e,t=this.model.state.config.timeline.FONT_SIZE;return this.txtPool.length>0?e=this.txtPool.shift():((e=new Rw("")).style.fill=yp.DOPESHEET_LABEL,e.style.fontSize=t),e}}]),n}(c_),yG=function(){function e(){u(this,e),this._tickObjects=void 0,this._lastTickTime=void 0,this._curTime=void 0,this._newObjects=void 0,this._tickObjects=[],this._newObjects=[]}return f(e,[{key:"start",value:function(){}},{key:"tickHandler",value:function(){}},{key:"tick",value:function(e){for(var t=0,n=this._tickObjects.length;t<n;t++)this._tickObjects[t].tick(e);this.addAndRemoveObject()}},{key:"addAndRemoveObject",value:function(){this._tickObjects.splice(0,this._tickObjects.length);for(var e=0;e<this._newObjects.length;e++)this._tickObjects[e]=this._newObjects[e]}},{key:"stop",value:function(){}},{key:"registerTick",value:function(e){this._newObjects.push(e)}},{key:"unRegisterTick",value:function(e){var t=this._newObjects.indexOf(e);-1!==t&&this._newObjects.splice(t,1)}}],[{key:"instance",get:function(){return null==e._instance&&(e._instance=new e),e._instance}}]),e}();yG._instance=void 0;var bG=function(e){v(n,e);var t=y(n);function n(){var e,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return u(this,n),(e=t.call(this)).baseObjects=void 0,e.newObjects=void 0,e.parentObject=void 0,e._drawPriority=void 0,e._tooltipVars=void 0,e._tooltip=void 0,e._tickEnable=void 0,e._disable=void 0,e._userData=void 0,e.interactive=r,e._disable=!r,e}return f(n,[{key:"drawPriority",get:function(){return this._drawPriority},set:function(e){this._drawPriority!==e&&(this._drawPriority=e,null!=this.parent&&this.parent instanceof n&&this.parent.reinsert(this))}},{key:"stage",get:function(){for(var e=null,t=this;t.parent;)e=t.parent,t=t.parent;return e}},{key:"disable",get:function(){return this._disable},set:function(e){this._disable!==e&&(this._disable=e,this.interactive=!this._disable)}},{key:"init",value:function(e){}},{key:"addObject",value:function(e){var t=!0;if(null!=e&&-1===this.newObjects.indexOf(e)){null!=e.parent&&e.parent instanceof n&&e.parent.removeObject(e);for(var r=0,i=this.newObjects.length;r<i;r++)if(this.newObjects[r].drawPriority>e.drawPriority){this.addChildAt(e,this.getChildIndex(this.newObjects[r])),this.newObjects.splice(r,0,e),t=!1;break}t&&(this.newObjects.push(e),this.addChild(e))}}},{key:"removeObject",value:function(e){var t;null!==e&&-1!==(t=this.newObjects.indexOf(e))&&(this.newObjects.splice(t,1),null!=e.parent&&e.parent===this&&this.removeChild(e))}},{key:"reinsert",value:function(e){var t;if(e.parent===this){-1!==(t=this.newObjects.indexOf(e))&&(this.newObjects.splice(t,1),this.removeChild(e));for(var n=!1,r=0,i=this.newObjects.length;r<i;r++)if(e.drawPriority<this.newObjects[r].drawPriority){this.addChildAt(e,this.getChildIndex(this.newObjects[r])),this.newObjects.splice(r,0,e),n=!0;break}n||(this.addChild(e),this.newObjects.push(e))}}},{key:"destroy",value:function(){for(var e=0,t=this.newObjects.length;e<t;e++)this.newObjects[e]&&this.newObjects[e].destroy()}},{key:"manipulate",value:function(e){0===e?this.scale.set(1,1):e===n.FLIP_VERTICAL?this.scale.x>0&&(this.scale.x=-this.scale.x):e===n.FLIP_HORIZONTAL&&this.scale.y>0&&(this.scale.y=-this.scale.y)}},{key:"tickBase",value:function(e){for(var t,n;n<this.baseObjects.length;n++)t=this.baseObjects[n],-1!==this.newObjects.indexOf(t)&&t.tickBase(e);this.tick(e),this.addAndRemoveObject()}},{key:"addAndRemoveObject",value:function(){this.baseObjects.splice(0,this.baseObjects.length);for(var e=0;e<this.newObjects.length;e++)this.baseObjects[e]=this.newObjects[e]}},{key:"tick",value:function(e){}},{key:"setTip",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null!==this._tooltip&&this._tooltip.hide(),this._tooltip=e,this._tooltipVars=t,null==e?(this.off("mouseover",this.showTooltipHandler,this),this.off("mouseout",this.hideTooltipHandler,this)):(this.on("mouseover",this.showTooltipHandler,this),this.on("mouseout",this.hideTooltipHandler,this))}},{key:"changeTip",value:function(e){null!==this._tooltip&&(this._tooltipVars=e,this._tooltip.setData(this._tooltipVars))}},{key:"hideTooltipHandler",value:function(e){null!==this._tooltip&&this._tooltip.hide()}},{key:"showTooltipHandler",value:function(e){if(null!==this._tooltip){this._tooltip.setData(this._tooltipVars);var t=new bg;this._tooltip.setPosition(t.x,t.y,this.width,this.height),this._tooltip.show()}}},{key:"tickEnable",set:function(e){this._tickEnable!==e&&(this._tickEnable=e,e?yG.instance.registerTick(this):yG.instance.unRegisterTick(this))}},{key:"userData",get:function(){return this._userData},set:function(e){this._userData=e}}]),n}(c_);bG.FLIP_VERTICAL=1,bG.FLIP_HORIZONTAL=2;var _G=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e,!0))._normalPic=void 0,r._downPic=void 0,r._overPic=void 0,r._config=void 0,r._toggle=void 0,r._selected=void 0,r.init2(e),r}return f(n,[{key:"parse",value:function(e){e.normal&&(this._normalPic=f_.from(e.normal),this.addChild(this._normalPic)),e.down&&(this._downPic=f_.from(e.down),this.addChild(this._downPic),this._downPic.visible=!1),e.over&&(this._overPic=f_.from(e.over),this.addChild(this._overPic),this._overPic.visible=!1)}},{key:"init2",value:function(e){this._config=e,this.parse(this._config),this.on("mousedown",this.onMouseDown,this),this.on("mouseup",this.onMouseUp,this),this._config.over&&(this.on("mouseover",this.onMouseOver,this),this.on("mouseout",this.onMouseOut,this)),Pk.setDisplayCursor(this,Ok.hand)}},{key:"toggle",get:function(){return this._toggle},set:function(e){this._toggle!==e&&(this._toggle=e)}},{key:"selected",get:function(){return this._selected},set:function(e){this._selected!==e&&(this._selected=e,this._downPic&&this._normalPic&&(this._downPic.visible=this._selected,this._normalPic.visible=!this._selected),this._overPic&&(this._overPic.visible=!1))}},{key:"onMouseUp",value:function(e){e.stopPropagation(),this._toggle||this._downPic&&this._normalPic&&(this._downPic.visible=!1,this._normalPic.visible=!0)}},{key:"onMouseDown",value:function(e){e.stopPropagation(),this._toggle?this.selected=!this._selected:this._downPic&&this._normalPic&&(this._downPic.visible=!0,this._normalPic.visible=!1)}},{key:"onMouseOver",value:function(e){if(this._toggle&&this.selected)return this._downPic.visible=!0,this._normalPic.visible=!1,void(this._overPic.visible=!1);this._overPic&&(this._downPic.visible=!1,this._normalPic.visible=!1,this._overPic.visible=!0)}},{key:"onMouseOut",value:function(e){this._downPic&&this._normalPic&&this._overPic&&(this.selected?(this._downPic.visible=!0,this._normalPic.visible=!1):(this._downPic.visible=!1,this._normalPic.visible=!0),this._overPic.visible=!1)}}]),n}(bG),xG=function(e){return e.ListScroll="GUIEvent.ListScroll",e.DragStart="GUIEvent.DragStart",e.DragMove="GUIEvent.DragMove",e.DragEnd="GUIEvent.DragEnd",e.Scroll="GUIEvent.Scroll",e.Select="GUIEvent.Select",e.MouseDown="GUIEvent.MouseDown",e.MouseUp="GUIEvent.MouseUp",e.Change="GUIEvent.Change",e}({}),EG=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,!0)).realWidth=void 0,i.realHeight=void 0,i.virtualWidth=void 0,i.virtualHeight=void 0,i.gapH=0,i.initItemCallback=void 0,i._data=void 0,i._itemCreator=void 0,i._totalNum=void 0,i._viewNum=void 0,i._items=[],i._itemPool=[],i._curIndex=0,i._curOff=0,i._position=0,i._maxPosition=0,i._itemH=void 0,i._maskShape=void 0,i._selectable=!1,i._mousePressing=!1,i._mouseDownIndex=-1,i._mouseDownPos={x:0,y:0},i._itemCreator=r,i._maskShape=new iw,i._maskShape.beginFill(16776960,.5),i._maskShape.drawRect(0,0,1,1),i._maskShape.endFill(),i.resize(100,100),i}return f(n,[{key:"data",get:function(){return this._data},set:function(e){this.setData(e)}},{key:"totalHeight",get:function(){return this.virtualHeight}},{key:"viewHeight",get:function(){return this.realHeight>0?this.realHeight:0}},{key:"scrollPosition",get:function(){return this._position},set:function(e){e<0&&(e=0),e>this._maxPosition&&(e=this._maxPosition),this._position!==e&&(this._position=e,this.draw(),this.emit(xG.ListScroll,this._position))}},{key:"items",get:function(){return this._items}},{key:"selectable",get:function(){return this._selectable},set:function(e){this._selectable!==e&&(this.clearItems(),this._selectable=e,this.draw())}},{key:"resize",value:function(e,t){this.realWidth=e,this.realHeight=t,this._maskShape.width=this.realWidth,this._maskShape.height=this.realHeight,this.addChild(this._maskShape),this.mask=this._maskShape,this.calculateMaxPosition(),this.draw()}},{key:"draw",value:function(){var e,t;if(this._data)for(this.calculateSize(),this.clearItems(),e=0,t=this._viewNum;e<t;e++){var n=e+this._curIndex;if(!(n<this._data.length))break;var r=this.createItem();this._items.push(r),r.y=this._curOff+e*this._itemH,r.x=0,r.index=n,r.data=this._data[e+this._curIndex],this.addChild(r)}}},{key:"refreshItems",value:function(){for(var e=0,t=this._viewNum;e<t;e++){if(!(e+this._curIndex<this._data.length))break;this._items[e].data=this._data[e+this._curIndex]}}},{key:"init",value:function(e){this._data=e}},{key:"setData",value:function(e){this._data=e,this.calculateMaxPosition(),this.draw()}},{key:"createItem",value:function(){var e;return this._itemPool.length>0?e=this._itemPool.shift():this._itemCreator&&(e=new this._itemCreator),e&&(e.resize(this.realWidth,this.realHeight),this.initItemCallback&&this.initItemCallback(e),this._selectable?(e.interactive=!0,e.on("click",this.onClickSelectItem,this),e.on("mousedown",this.onMouseDownItem,this),e.on("mouseup",this.onMouseUpItem,this)):e.interactive=!1),e}},{key:"onMouseUpItem",value:function(e){var t=e.currentTarget.data,n=this._data.indexOf(t);this.emit(xG.MouseUp,e,n);var r=e.data.global.x-this._mouseDownPos.x,i=e.data.global.y-this._mouseDownPos.y;this._mousePressing&&this._mouseDownIndex===n&&Math.abs(r)<5&&Math.abs(i)<5&&this.emit(xG.Select,e,n),this._mousePressing=!1,this._mouseDownIndex=-1}},{key:"onMouseDownItem",value:function(e){this._mousePressing=!0;var t=e.currentTarget.data,n=this._data.indexOf(t);this._mouseDownIndex=n,this._mouseDownPos.x=e.data.global.x,this._mouseDownPos.y=e.data.global.y,this.emit(xG.MouseDown,e,n)}},{key:"onClickSelectItem",value:function(e){}},{key:"getItemH",value:function(){var e=this.createItem();if(e){e.realWidth;return e.realHeight+this.gapH}return 0}},{key:"calculateMaxPosition",value:function(){isNaN(this._itemH)&&(this._itemH=this.getItemH()),this.data&&(this._maxPosition=this._data.length*this._itemH-this.realHeight),this._maxPosition<0&&(this._maxPosition=0)}},{key:"calculateSize",value:function(){var e;isNaN(this._itemH)&&(this._itemH=this.getItemH());var t=this._itemH;this._totalNum=(null===(e=this._data)||void 0===e?void 0:e.length)||1,this.virtualWidth=this.realWidth,this.virtualHeight=t*this._totalNum,this._viewNum=(Math.ceil(this.realHeight/t)+1)*t,this._curIndex=Math.floor(this._position/t),this._curOff=-this._position+this._curIndex*t}},{key:"clearItems",value:function(){var e,t;for(e=0,t=this._items.length;e<t;e++){var n=this._items[e];this._selectable&&(n.off("click"),n.off("mousedown"),n.off("mouseup")),n.parent&&n.parent.removeChild(n),this._itemPool.push(n)}this._items.length=0}}]),n}(bG),wG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,void 0,!0)).item=void 0,r.list=void 0,r._data=void 0,r._show=!1,r._over=!1,r.hideList=function(){r.list.parent&&r.list.parent.removeChild(r.list),r._show=!1,window.removeEventListener("mousedown",r.hideList)},r.hideList2=function(){r._over||(r.list.parent&&r.list.parent.removeChild(r.list),r._show=!1,window.removeEventListener("mousedown",r.hideList))},r.item=new e,r.addChild(r.item),r.list=new EG([],e),r.list.selectable=!0,r.list.on(xG.Select,r.onSelect,g(r)),r.list.on("mousedown",r.onMouseDownList,g(r)),r.list.on("mouseover",r.onMouseOver,g(r)),r.list.on("mouseout",r.onMouseOut,g(r)),r.initControl(),r}return f(n,[{key:"data",get:function(){return this._data},set:function(e){var t=this;this._data=e,this.list.data=this._data,this.index=0,setTimeout((function(){var n=t.getBounds();t.list.resize(n.width,n.height*e.length)}),1)}},{key:"index",set:function(e){this._data.length>e&&(this.item.data=this._data[e])}},{key:"selectedData",get:function(){return this.item.data}},{key:"onSelect",value:function(e){this.index=e,this.emit(xG.Change,e),this.hideList()}},{key:"initControl",value:function(){this.on("click",this.onClick,this),this.on("mousedown",this.onMouseDown,this),this.on("mouseover",this.onMouseOver,this),this.on("mouseout",this.onMouseOut,this)}},{key:"onMouseDownList",value:function(e){e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.data.originalEvent.stopPropagation(),e.data.originalEvent.stopImmediatePropagation(),e.stopPropagation()}},{key:"onMouseOver",value:function(e){this._over=!0}},{key:"onMouseOut",value:function(e){this._over=!1}},{key:"onClick",value:function(e){this._show?this.hideList():this.showList()}},{key:"showList",value:function(){var e=this;if(this.stage){var t=this.getGlobalPosition();this.list.x=t.x,this.list.y=t.y+this.height,this.stage.addChild(this.list),this.stage.once("mousedown",this.hideList,this),window.addEventListener("mousedown",this.hideList2),this._show=!0,setTimeout((function(){e._show&&(e._over=!0)}),200)}}}]),n}(bG),TG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).realWidth=void 0,e.realHeight=void 0,e._data=void 0,e.index=0,e.txt=void 0,e.graphic=void 0,e.graphic=new iw,e.txt=new Rw(""),e.txt.style.fill=16777215,e.txt.style.fontSize=10,e.txt.style.align="right",e.addChild(e.graphic),e.addChild(e.txt),e.realHeight=18,e.resize(100,18),e}return f(n,[{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"resize",value:function(e,t){this.realWidth!=e&&(this.realWidth=e,this.draw())}},{key:"draw",value:function(){if(null!=this._data){var e=this.index%2==0?11184810:10066329;this.graphic.clear(),this.graphic.beginFill(e,1),this.graphic.drawRect(0,0,this.realWidth,this.realHeight),this.graphic.endFill(),this.txt.text=this._data.name}}}]),n}(c_),SG=function(e){v(n,e);var t=y(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return u(this,n),(i=t.call(this,[],r))._listData=void 0,i._treeNode=void 0,i._showRoot=void 0,i._treeNode=e,i._showRoot=o,i._listData=[],i.renderTree(),i}return f(n,[{key:"listData",get:function(){return this._listData}},{key:"collapseAll",value:function(e){this.collapseNode(this._listData,e),this.renderTree()}},{key:"collapseNode",value:function(e,t){if(e)for(var n=0,r=e.length;n<r;n++)e[n].collapse=t,e[n].nodes&&this.collapseNode(e[n].nodes,t)}},{key:"reRender",value:function(){this.draw()}},{key:"setData",value:function(e){this._treeNode=e,this.renderTree()}},{key:"createItem",value:function(){var e=jm(m(n.prototype),"createItem",this).call(this);return e.hasMyListener(n.EVENT_COLLAPSE)||e.addMyListener(n.EVENT_COLLAPSE,this.onCollapse,this),e}},{key:"parseListData",value:function(){this._listData.length=0,this.parseNode(this._treeNode,0),this._showRoot||this._listData.length>0&&this._listData.shift()}},{key:"parseNode",value:function(e,t){if(null!=e&&(e.item&&(e.item.depth=t,this._listData.push(e)),!e.collapse&&e.nodes)){var n,r=0;for(r=0,n=e.nodes.length;r<n;r++)this.parseNode(e.nodes[r],t+1)}}},{key:"renderTree",value:function(){this.parseListData(),jm(m(n.prototype),"setData",this).call(this,this._listData)}},{key:"onCollapse",value:function(e){this.renderTree(),this.emit(n.EVENT_COLLAPSE,e.data)}}]),n}(EG);SG.EVENT_COLLAPSE="EVENT_COLLAPSE";var kG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e,!0))._config=void 0,r._text=void 0,r.isFocus=!1,r._downY=void 0,r._downValue=void 0,r.isMouseDown=!1,r.isMouseMoved=!1,r._downTime=0,r.onMouseMove=function(e){if(0===r._downY)r._downY=e.clientY,r._downValue=r.value;else{r.isMouseMoved=!0;var t=r._config.speedDuration||1,n=Math.ceil((e.clientY-r._downY)/t);if(r._config.directUp&&(n=-n),0!==(n*=r.step))if(r._config.multiMode){r.addValue(n);n>0?"+"+n:n<0&&n.toString()}else r.changeValue(r._downValue+n,r.continuous)}},r.onMouseUp=function(e){!r.isMouseMoved&&r.isMouseDown,r.isMouseDown=!1,r.isMouseMoved=!1,r._config.multiMode,document.removeEventListener("mousemove",r.onMouseMove),document.removeEventListener("mouseup",r.onMouseUp),r.continuous&&r._config.continuousEndCallback&&r._config.continuousEndCallback()},r.init2(e),r}return f(n,[{key:"step",get:function(){return this._config.step?this._config.step:1}},{key:"minValue",get:function(){return null!=this._config.min?this._config.min:0}},{key:"maxValue",get:function(){return null!=this._config.max?this._config.max:100}},{key:"continuous",get:function(){var e=this._config.continuous;return void 0===e&&(e=!0),e}},{key:"init2",value:function(e){this._config=e,this.parse(this._config);var t=this._config.value||0;this._text=new Rw(t,{fontSize:10,fill:10066329}),this.addChild(this._text),this.on("mousedown",this.onMouseDown,this),this.on("click",this.onClick,this),this.on("doubleclick",this.onDoubleClick,this),Pk.setDisplayCursor(this,Ok.hand)}},{key:"parse",value:function(e){}},{key:"onClick",value:function(e){e.stopPropagation()}},{key:"onDoubleClick",value:function(e){void 0!==this._config.defaultValue&&this.value!==this._config.defaultValue&&this.changeValue(this._config.defaultValue)}},{key:"onMouseDown",value:function(e){if(e.stopPropagation(),!this.isFocus&&!this._config.lock){var t=Date.now();t-this._downTime<300?(this.emit("doubleclick"),this._downTime=0):this._downTime=t,this._config.continuous&&this._config.continuousStartCallback&&this._config.continuousStartCallback(),this._downY=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp)}}},{key:"value",get:function(){return isNaN(this._config.value)?0:this._config.value},set:function(e){this._config.value=e,this.setTextValue(e)}},{key:"setTextValue",value:function(e){if(this.step<1){var t=this.step.toString().split(".")[1].length;this._text.text=e.toFixed(t)}else this._text.text=e.toString()}},{key:"addValue",value:function(e){isNaN(e)||this._config.onAdd&&this._config.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setTextValue(e),t&&this._config.onChange&&this._config.onChange(e))}}]),n}(bG),CG=f((function e(){u(this,e)}));CG.gapGroupFill=1777701,CG.horizontalLineFill=3160896,CG.treeItemGapGroupFill=3355443,CG.backgroundColor=3355443,CG.boneFillUp=12303291,CG.boneFillOver=16777215,CG.boneFillDown=4652287,CG.boneFillIK=16728064,CG.boneBolder=0,CG.assistLine=4915199,CG.defaultCustomBoneSymbolColor=4294967295,CG.slotBolderOver=4294967295,CG.slotBolderDown=4282842367,CG.CoordinateX=16711680,CG.CoordinateY=65280,CG.CoordinateXY=16776960,CG.CoordinateOver=16777215,CG.resizeHighlight=65280,CG.poseNormal=16711680,CG.poseHighlight=16777215,CG.selectFrameBorder=3647,CG.selectFrameFill=11263,CG.TIMELINE_SELECT_FRAME_BORDER=3647,CG.TIMELINE_SELECT_FRAME_FILL=8959,CG.CURVE_COLOR=10066329,CG.CURVE_SELECTED_COLOR=16777215,CG.LAST_FRAME_COLOR=16711680,CG.HIGH_LIGHT_BG_COLOR=3100242,CG.OVER_BG_COLOR=2107952,CG.ANIMATION_TIMELINE_BG_COLOR=4214364,CG.BONE_TIMELINE_BG_COLOR=3160901,CG.SLOT_TIMELINE_BG_COLOR=2634042,CG.FFD_TIMELINE_BG_COLOR=2634042,CG.EVENT_TIMELINE_BG_COLOR=2634042,CG.ZORDER_TIMELINE_BG_COLOR=2634042,CG.IK_TIMELINE_BG_COLOR=2634042,CG.LINE_BG_COLOR=1118481,CG.STROKE_UP_COLOR=2236962,CG.STROKE_DOWN_COLOR=2686253,CG.STROKE_OVER_COLOR=16777215,CG.BONE_COLOR=14277081,CG.BONE_EVENT_COLOR=14518152,CG.SLOT_COLOR=15389783,CG.FFD_COLOR=65535,CG.EVENT_COLOR=14699856,CG.IK_COLOR=14699856,CG.MULT_COLOR=13487565,CG.TRANSLATE_FRAME_COLOR=43264,CG.ROTATE_FRAME_COLOR=226506,CG.SCALE_FRAME_COLOR=16596028,CG.COLOR_FRAME_COLOR=13258949,CG.INDEX_FRAME_COLOR=8158332,CG.VISIBLE_FRAME_COLOR=14965292,CG.Z_FRAME_COLOR=43e5,CG.TIMELINE_POINTER_COLOR=2686253,CG.TIMELINE_LOOP_COLOR=2669793,CG.TIMELINE_OFFSET_COLOR=16744192,CG.TIMELINE_LABEL_BG_COLOR=1778215,CG.TIMELINE_LABEL_STROKE_COLOR=1778215,CG.TIMELINE_LABEL_COLOR=3885139,CG.TIMELINE_LABEL_TEXT_COLOR=7241357,CG.TIMELINE_LABEL_LOOP_COLOR=22139,CG.TIMELINE_SLIDER_COLOR=3095108,CG.TIMELINE_SLIDER_OVER_COLOR=7380664,CG.IMAGE_TIP_BG_COLOR=3358281,CG.LABEL_KEY_COLOR=16711680,CG.ONION_BEFORE_COLOR=16711680,CG.ONION_AFTER_COLOR=255,CG.ONION_LABEL_COLOR=5730184,CG.ONION_BG_COLOR=5730184,CG.SYMBOL_TEST_COLOR=16711935,CG.SYMBOL_HOVERED_COLOR=16777215,CG.SYMBOL_SELECTED_COLOR=16777215,CG.SYMBOL_BORDER_COLOR=0,CG.SYMBOL_ENABLED_ALPHA=1,CG.SYMBOL_DISABLED_ALPHA=.5,CG.SYMBOL_BORDER_ALPHA=.5,CG.CURVEPANEL_CURVE_LINE_COLOR=15196005,CG.CURVEPANEL_CURVE_POINT_COLOR=15196005,CG.CURVEPANEL_CONTROL_LINE_COLOR=16777215,CG.CURVEPANEL_CONTROL_POINT_COLOR=16777215,CG.CURVEPANEL_OTHER_CURVE_COLOR=6710886,CG.CURVEPANEL_BG_COLOR=2501426,CG.CURVEPANEL_BG_LIGHT_COLOR=3159356,CG.RIG_BONE_COLOR=[65280,16737792,16711680,255,16776960,16711935,7221635,10416579,7575997,2365982,9001241,8773749,10467339,1548733,9199327,2258947,7706757,2941914,2888195,2163122,11841945,1122112,15327991,11001904,1220560],CG.COMIC_BG_COLOR=16777215,CG.COMIC_CAMERA_COLOR=4282842367,CG.BOUNDINGBOX_COLOR=65280,CG.LINK_COLOR=4647661,CG.colorToString=function(e){for(var t=e.toString(16);t.length<6;)t="0"+t;return t="#"+t};var AG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).over=!1,e.selected=!1,e.shape=void 0,e._data=void 0,e._type=void 0,e.shape=new iw,e.addChild(e.shape),e.interactive=!0,e}return f(n,[{key:"type",set:function(e){this._type=e}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"frameIds",get:function(){var e=[];if(this._data)for(var t=0,n=this._data.length;t<n;t++){var r=this._data[t].id;e.push(r)}return e}},{key:"draw",value:function(){if(this.shape.clear(),null!=this._data){var e=16711680,t=n.FRAME_WIDTH;switch(this._type){case k.X:e=yp.FRAME_X;break;case k.Y:e=yp.FRAME_Y;break;case k.SCALE_X:e=yp.FRAME_SCALE_X;break;case k.SCALE_Y:e=yp.FRAME_SCALE_Y;break;case k.SKEW_X:e=yp.FRAME_SKEW_X;break;case k.SKEW_Y:e=yp.FRAME_SKEW_Y;break;case k.ROTATION:e=yp.FRAME_ROTATION;break;case k.VISIBLE:e=yp.FRAME_VISIBLE;break;case k.TEXT:e=yp.FRAME_TEXT;break;case k.PROGRESS:e=yp.FRAME_PROGRESS;break;case k.COLOR:e=yp.FRAME_COLOR;break;case k.MIX:e=yp.FRAME_MIX;break;case k.TRANSLATE:e=CG.TRANSLATE_FRAME_COLOR;break;case k.ROTATE:e=CG.ROTATE_FRAME_COLOR;break;case k.SCALE:e=CG.SCALE_FRAME_COLOR;break;default:e=yp.FRAME_MIX}var r=0;this.selected&&this.over?r=yp.COLOR_SELECT_OVER_RECT:this.selected?r=yp.COLOR_SELECT_RECT:this.over&&(r=yp.COLOR_OVER_RECT),this.drawShape(e,r,t);var i=BT.getXFromFrame(this._data[0].frame),o=BT.dopesheetConfig.LABEL_LEFT_WIDTH;this.x=i+o}}},{key:"drawShape",value:function(e,t,r){this.shape.lineStyle(1,t,1),this.shape.beginFill(e,1),this.shape.drawRect(-n.FRAME_WIDTH/2,0,r,n.FRAME_HEIGHT),this.shape.endFill()}},{key:"dispose",value:function(){this.data=null,this.type=null}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrame]"}}]),n}(c_);AG.FRAME_WIDTH=4,AG.FRAME_HEIGHT=16;var IG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).text=void 0,e.fixShape=void 0,e.curAnimationLen=0,e.fixShape=new iw,e.addChild(e.fixShape),e.fixShape.visible=!1,e.text=new Rw("",{fontSize:12,fill:16777215}),e.addChild(e.text),e}return f(n,[{key:"getFrameLength",value:function(){var e=this._data[0],t=this._data[0].value,n=this._data[1],r=BT.getAnimationLength(t.animationId)*(t.playTimes||1),i=r;n&&(i=n.frame-e.frame);var o=this.curAnimationLen-e.frame,a=Math.min(r,i,o);return[a,r-a]}},{key:"draw",value:function(){if(this.shape.clear(),this.fixShape.visible=!1,null!=this._data){var e,t=AG.FRAME_WIDTH;e=yp.FRAME_PLAY;var n=this._data[0].value;if(n.animationId>0){var r=BT.getAnimationById(n.animationId),i=this.getFrameLength(),o=i[0],a=n.playTimes||1,s=BT.getLengthPerFrame();if(t=o*s,this.text.text=r.name+"x"+a,this.text.visible=!0,!this._data[1]&&i[1]>0){var l=i[1]*s;this.fixShape.clear(),this.fixShape.lineStyle(1,0,1),this.fixShape.beginFill(e,.5),this.fixShape.drawRect(-AG.FRAME_WIDTH/2,0,l,AG.FRAME_HEIGHT),this.fixShape.endFill(),this.fixShape.x=t,this.fixShape.visible=!0}}var u=0;this.selected&&this.over?u=yp.COLOR_SELECT_OVER_RECT:this.selected?u=yp.COLOR_SELECT_RECT:this.over&&(u=yp.COLOR_OVER_RECT),this.shape.lineStyle(1,u,1),this.shape.beginFill(e,1),this.shape.drawRect(-AG.FRAME_WIDTH/2,0,t,AG.FRAME_HEIGHT),this.shape.endFill();var c=BT.getXFromFrame(this._data[0].frame),h=BT.dopesheetConfig.LABEL_LEFT_WIDTH;this.x=c+h}}},{key:"dispose",value:function(){this.data=null,this.type=null}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopePlayFrame]"}}]),n}(AG),OG=function(){function e(){u(this,e)}return f(e,null,[{key:"create",value:function(t){var n=e.poolsMap[String(t)];return n&&n.length>0?n.pop():new t}},{key:"setMaxCount",value:function(t,n){if((n<0||n!==n)&&(n=0),t){var r=String(t);e.maxCountMap[r]=n;var i=e.poolsMap[r];i&&i.length>n&&(i.length=n)}else for(var o in e.defaultMaxCount=n,e.poolsMap)if(e.maxCountMap[o]){e.maxCountMap[o]=n;var a=e.poolsMap[o];a.length>n&&(a.length=n)}}},{key:"clearPool",value:function(t){if(t){var n=e.poolsMap[String(t)];n&&n.length&&(n.length=0)}else for(var r in e.poolsMap){e.poolsMap[r].length=0}}},{key:"returnToPool",value:function(t){var n=String(t.constructor),r=e.maxCountMap[n]>0?e.maxCountMap[n]:e.defaultMaxCount,i=e.poolsMap[n]=e.poolsMap[n]||[];t.dispose(),i.length<r&&i.push(t)}}]),e}();OG.defaultMaxCount=5e3,OG.instances={},OG.maxCountMap={},OG.poolsMap={};var PG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,null,!1))._icon=void 0,r._name=void 0,r.init2(e),r}return f(n,[{key:"getAssetPath",value:function(){return n.ICON_PATH_BASE+this._name}},{key:"init2",value:function(e){this._name=e;try{this._icon=f_.from(this.getAssetPath()),this.addChild(this._icon),this._icon.width=14,this._icon.height=14,this._icon.x=3,this._icon.y=3}catch(Pv){}}},{key:"iconName",set:function(e){this.setIcon(e)}},{key:"setIcon",value:function(e){this._name=e,this._icon.texture=wy.from(this.getAssetPath())}}]),n}(bG);PG.ICON_PATH_BASE="";var MG="./assets/icon/dopesheet/animation.png",RG="./assets/icon/dopesheet/bone.png",NG="./assets/icon/dopesheet/slot.png",DG="./assets/icon/dopesheet/bone_IK.png",LG="./assets/icon/dopesheet/mesh.png",FG="./assets/icon/dopesheet/event.png",BG="./assets/icon/dopesheet/zOrder.png",UG="./assets/icon/dopesheet/color.png",HG="./assets/icon/dopesheet/index.png",jG="./assets/icon/dopesheet/translate.png",zG="./assets/icon/dopesheet/rotate.png",VG="./assets/icon/dopesheet/scale.png",GG=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this)}return f(n,[{key:"drawShape",value:function(e,t,n){this.shape.lineStyle(1,t,1),this.shape.beginFill(e,1);var r=.9*AG.FRAME_WIDTH;this.shape.moveTo(0,5),this.shape.lineTo(0+1.4*r,r+2+5),this.shape.lineTo(0,2*r+4+5),this.shape.lineTo(0-1.4*r,r+2+5),this.shape.lineTo(0,5),this.shape.endFill()}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeMixFrame]"}}]),n}(AG);GG.FRAME_WIDTH=4,GG.FRAME_HEIGHT=16;var WG=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n),(e=t.call(this)).realWidth=void 0,e.realHeight=void 0,e.index=0,e.model=void 0,e._data=void 0,e.txt=void 0,e.graphic=void 0,e.icon=void 0,e.btnCollapse=void 0,e.btnLoop=void 0,e.inputOffset=void 0,e.inputScale=void 0,e.curPointer=void 0,e.headPointer=void 0,e.lastPointer=void 0,e.frameContainer=void 0,e.curveLayer=void 0,e._eventDispatcher=void 0,e._collapseEvent=void 0,e.onChangeOffset=function(t){var n=e.renderData;if(n.type===O.TIMELINE){var r=n.animation,i={armatureId:e.model.state.runtime.editing.editingArmatureId,animationId:n.animationId,timelineId:r.id,property:{offset:t}};e.model.commit(M.MODIFY_TIMELINE,i)}},e.onChangeScale=function(t){var n=e.renderData;if(n.type===O.TIMELINE){var r=n.animation,i={armatureId:e.model.state.runtime.editing.editingArmatureId,animationId:n.animationId,timelineId:r.id,property:{scale:t}};e.model.commit(M.MODIFY_TIMELINE,i)}},e.historyMergeEnd=function(){e.model.historyEndMerge("modifyTimeline")},e.historyMergeStart=function(){e.model.historyBeginMerge("modifyTimeline")};var r=BT.dopesheetConfig.ITEM_HEIGHT;e.realHeight=r,e._eventDispatcher=new gmvc.EventDispatcher,e._collapseEvent=new gmvc.Event,e._collapseEvent.type=SG.EVENT_COLLAPSE,e.graphic=new iw,e.txt=new Rw(""),e.txt.style.fill=16777215,e.txt.style.fontSize=10,e.txt.style.align="right",e.txt.x=20,e.txt.y=5,e.icon=new PG(MG),e.icon.x=10,e.btnCollapse=new _G({normal:"./assets/icon/dopesheet/arrow-right-filling.svg",down:"./assets/icon/dopesheet/arrow-down-filling.svg"}),e.btnLoop=new _G({normal:"./assets/icon/loop_2.svg",down:"./assets/icon/loop_1.svg"}),e.btnCollapse.toggle=!0,e.btnLoop.toggle=!0,e.inputOffset=new kG({min:-9999,max:9999,step:1,value:0,speedDuration:5,onChange:e.onChangeOffset,continuous:!0,continuousEndCallback:e.historyMergeEnd,continuousStartCallback:e.historyMergeStart,defaultValue:0}),e.inputScale=new kG({min:0,max:100,step:.01,value:1,speedDuration:5,onChange:e.onChangeScale,continuous:!0,continuousEndCallback:e.historyMergeEnd,continuousStartCallback:e.historyMergeStart,defaultValue:1});e.btnLoop.x=120,e.inputOffset.x=150,e.inputScale.x=170;return e.btnLoop.y=2,e.inputOffset.y=4,e.inputScale.y=4,e.curPointer=e.drawPointer(),e.lastPointer=e.drawPointer(yp.DOPESHEET_LAST_FRAME),e.headPointer=e.drawPointer(yp.DOPESHEET_PLAY_HEAD_VIRTUAL),e.frameContainer=new c_,e.curveLayer=new iw,e.addChild(e.graphic),e.addChild(e.icon),e.addChild(e.txt),e.addChild(e.btnCollapse),e.addChild(e.btnLoop),e.addChild(e.inputOffset),e.addChild(e.inputScale),e.addChild(e.curveLayer),e.addChild(e.lastPointer),e.addChild(e.headPointer),e.addChild(e.curPointer),e.addChild(e.frameContainer),e.resize(50,50),e.btnCollapse.on("click",e.onCollapse,g(e)),e.btnLoop.on("click",e.onLoop,g(e)),e}return f(n,[{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"renderData",get:function(){return this._data.item.data}},{key:"isTimeline",value:function(e){return!0}},{key:"onLoop",value:function(e){if(e.stopPropagation(),this.renderData.type===O.TIMELINE){var t=this.renderData;if(t.type===O.TIMELINE){var n=t.animation,r={armatureId:this.model.state.runtime.editing.editingArmatureId,animationId:t.animationId,timelineId:n.id,property:{loop:!n.loop}};this.model.commit(M.MODIFY_TIMELINE,r)}}}},{key:"resize",value:function(e,t){this.realWidth!==e&&(this.realWidth=e,this.draw())}},{key:"updatePosition",value:function(e){this.btnCollapse.x=e,this.icon.x=e+10,this.txt.x=e+30,this.icon.iconName=this.getIcon()||MG}},{key:"getIcon",value:function(){if(this.renderData)switch(this.renderData.type){case O.ARMATURE:return MG;case O.BONE:return RG;case O.SLOT:return NG;case O.TIMELINE:return this.getIconByTimeline(this.renderData.animation,this.renderData.name)}}},{key:"getIconByTimeline",value:function(e,t){var n=t;switch(e&&(n=e.type),n){case k.IK:return DG;case k.FFD:return LG;case k.EVENT:return FG;case k.Z_ORDER:return BG;case k.COLOR:return UG;case k.DISPLAY_INDEX:return HG;case k.TRANSLATE:return jG;case k.ROTATE:return zG;case k.SCALE:return VG}}},{key:"draw",value:function(){if(null!=this._data&&null!=this._data.item&&null!=this._data.item.data){var e,t=this.renderData,n=!1;this.txt.text=t.name,t.type!==O.TIMELINE?this.renderShowDopeSheetEnable(t):(this.renderTimeline(t),n=!!(e=t.animation)),this.renderBg(),this.renderPlayHead(),this.renderLastFrame();var r=10*this._data.item.depth;this.updatePosition(r);var i=!!this._data.nodes&&this._data.item.depth>0,o=i&&this._data.nodes.length>0;if(this.btnCollapse.visible=i,this.btnCollapse.disable=!o,i){var a=10*(this._data.item.depth-1);this.btnCollapse.x=a+2,this.btnCollapse.y=0,this.btnCollapse.selected=!this._data.collapse}this.btnLoop.visible=!1,this.inputOffset.visible=!1,this.inputScale.visible=!1,n&&e&&(this.btnLoop.visible=!0,this.inputOffset.visible=!0,this.inputScale.visible=!0,this.btnLoop.selected=!0===e.loop,this.inputOffset.value=e.offset||0,this.inputScale.value=e.scale||1)}}},{key:"hasMyListener",value:function(e){return this._eventDispatcher.hasEventListener(e)}},{key:"addMyListener",value:function(e,t,n,r,i){this._eventDispatcher.addEventListener(e,t,n,r,i)}},{key:"removeMyListener",value:function(e,t){this._eventDispatcher.removeEventListener(e,t)}},{key:"dispatchMy",value:function(e){this._eventDispatcher.dispatchEvent(e)}},{key:"drawPointer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yp.DOPESHEET_PLAY_HEAD,t=new iw;return t.lineStyle(1,e),t.moveTo(0,0),t.lineTo(0,this.realHeight),t}},{key:"onCollapse",value:function(e){e.stopPropagation(),this._data.collapse=!this._data.collapse,this.dispatchMy(this._collapseEvent)}},{key:"renderShowDopeSheetEnable",value:function(e){this.renderFramesFromShowDopeSheetEnable(e)}},{key:"renderTimeline",value:function(e){var t=e.animation,n=e.name,r=[];t&&(n=t.type,t.type,k.PLAY,r=BT.getArrayFromMap({ids:t.frames,map:t.frameMap}),this.inputOffset.value=t.offset||0,this.inputScale.value=t.scale||1,this.btnLoop.selected=!0===t.loop),this.renderFrames(r,n,0)}},{key:"renderPlayHead",value:function(){var e=this.model.getPlayHeadX(),t=this.model.state.config.timeline.LABEL_LEFT_WIDTH;e>0?(this.headPointer.x=t+e,this.curPointer.x=t+e,this.headPointer.visible=!0,this.curPointer.visible=!0):(this.headPointer.visible=!1,this.curPointer.visible=!1);var n=this.renderData;if(n.type===O.TIMELINE){var r=n.animation,i=this.model.curFrame;r&&(i=gp.getTimelineRealFrame(r,this.model.curFrame));var o=this.model.getXFromFrame(i);o>0?(this.curPointer.x=t+o,this.curPointer.visible=!0):this.curPointer.visible=!1}}},{key:"renderLastFrame",value:function(){var e=this.model.getAnimationDuration()[1],t=this.model.getXFromFrame(e),n=this.model.state.config.timeline.LABEL_LEFT_WIDTH;t>0?(this.lastPointer.x=n+t,this.lastPointer.visible=!0):this.lastPointer.visible=!1}},{key:"renderBg",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_LEFT_WIDTH,n=e.FIRST_X,r=this.model.state.editor.dopesheet,i=r.offset,o=r.curGap,a=(r.scaleLevel,r.labelLevel),s=this.index%2===0?3092271:2236962;this.graphic.clear(),this.graphic.beginFill(s,1),this.graphic.drawRect(0,0,this.realWidth,this.realHeight),this.graphic.endFill(),this.graphic.lineStyle(1,yp.DOPESHEET_LABEL,1);var l=i,u=n,c=t,h=Math.ceil((this.realWidth+u)/o),d=Math.floor(l/o);(d-=Math.floor(u/o))<0&&(d=0);for(var f=d;f<h+d;f++){if(f%a===0){var p=f*o-l+u+c,v=this.realHeight;p>0&&(this.graphic.moveTo(p,0),this.graphic.lineTo(p,v))}}}},{key:"getTimelineTracksByFrameIndex",value:function(e,t){if(e.type===O.ARMATURE){var n=e.animation;return gp.getAnimationTimelineFrameByFrameIndex(n,t)}if(e.type===O.BONE||e.type===O.SLOT){var r=e.animation;return gp.getTimelinesFramesByFrameIndex(r,t)}var i=e.animation;return gp.getTimelineFramesByFrameIndex(i,t)}},{key:"renderFramesFromShowDopeSheetEnable",value:function(e){this.clearFrameDisplays(),this.curveLayer.clear();for(var t,n=this.model.dopesheetData,r=n.startIndex,i=n.endIndex,o=[],a=r;a<i;a++){for(var s=this.getTimelineTracksByFrameIndex(e,a),l=s[0],u=s[1],c=[],h=0,d=u.length;h<d;h++){var f=u[h];f&&c.push(f.id)}if(u&&u.length){if(1===u.length&&!this._data.collapse&&this._data.item.depth>0)continue;var p=this.createFrameDisplay(k.MIX,e.type);this.model&&(p.over=vp.arrayIncludesArray(this.model.overFrameIds,c),p.selected=vp.arrayIncludesArray(this.model.selectedFrameIds,c),p.over&&(t=p),p.selected&&o.push(p)),1===u.length?(p.type=l[0].type,p.data=u):(p.type=k.MIX,p.data=u),this.frameContainer.addChild(p)}}if(o.length>0)for(var v=0,m=o.length;v<m;v++)this.frameContainer.addChild(o[v]);t&&this.frameContainer.addChild(t)}},{key:"renderFrames",value:function(e,t,n){this.clearFrameDisplays(),this.curveLayer.clear();var r=this.model.dopesheetData,i=r.startIndex,o=r.endIndex,a=r.curGap,s=this.model.dopesheetConfig.LABEL_LEFT_WIDTH;if(e){var l,u=0,c=e.length,h=!1,d=[];for(u=0;u<c;u++){var f=e[u];if(f.frame>=i&&f.frame<=o){var p=this.createFrameDisplay(t,O.TIMELINE);if(this.model&&(p.over=this.model.overFrameIds.includes(f.id),p.selected=this.model.selectedFrameIds.includes(f.id),p.over&&(l=p),p.selected&&d.push(p)),p.type=t,t===k.PLAY){var v=void 0;u<c-1&&(v=e[u+1]),p.curAnimationLen=n,p.data=[f,v]}else p.data=[f];if(this.frameContainer.addChild(p),u+1<c&&f.curve){var m=e[u+1],g=this.getCurveType(f.curve),y=m.frame-f.frame;this.renderCurve(p.x,y,g)}if(u>0&&!h){var b=e[u-1];if(b.curve){var _=this.getCurveType(b.curve),x=(f.frame,s-a),E=this.model.getXFromFrame(f.frame)+s;this.renderHalfCurve(x,E,_)}}h=!0}}if(d.length>0)for(var w=0,T=d.length;w<T;w++)this.frameContainer.addChild(d[w]);l&&this.frameContainer.addChild(l)}}},{key:"getCurveType",value:function(e){return e?1===e.length?0===e[0]?"none":1===e[0]?"line":"curve":e.length>=4?"curve":"none":"line"}},{key:"createFrameDisplay",value:function(e,t){return e===k.PLAY?OG.create(IG):t===O.ARMATURE?OG.create(GG):OG.create(AG)}},{key:"clearFrameDisplays",value:function(){var e=this.frameContainer.removeChildren();if(e)for(var t=0,n=e.length;t<n;t++){var r=e[t];OG.returnToPool(r)}}},{key:"renderCurve",value:function(e,t,n){var r=this.model.dopesheetData,i=r.curGap/r.scaleLevel;if(!((i*=t)<=AG.FRAME_WIDTH)){var o=Math.ceil(this.realHeight/2),a=yp.DOPESHEET_CURVE_NORMAL;switch(this.curveLayer.lineStyle(1,a,1),n){case"none":break;case"line":this.curveLayer.moveTo(e,o),this.curveLayer.lineTo(e+i,o);break;case"curve":var s=Math.ceil(6);i>12?(this.curveLayer.moveTo(e,o+s),this.curveLayer.lineTo(e+s,o),this.curveLayer.lineTo(e+i-s,o),this.curveLayer.lineTo(e+i,o-s)):(this.curveLayer.moveTo(e,o+s),this.curveLayer.lineTo(e+i,o-s))}}}},{key:"renderHalfCurve",value:function(e,t,n){var r=t,i=Math.ceil(this.realHeight/2),o=yp.DOPESHEET_CURVE_NORMAL;switch(this.curveLayer.lineStyle(1,o,1),n){case"none":break;case"line":this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(r,i);break;case"curve":var a=Math.ceil(6);r>12?(this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(r-a,i),this.curveLayer.lineTo(r,i-a)):(this.curveLayer.moveTo(e,i),this.curveLayer.lineTo(e+r,i-a))}}}]),n}(c_),XG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).animationList=void 0,e.btnAdd=void 0,e.btnRemove=void 0,e.initUI(),e.initControl(),e}return f(n,[{key:"initUI",value:function(){this.txt.visible=!1,this.animationList=new wG(TG),this.animationList.data=[],this.animationList.index=0,this.addChild(this.animationList),this.btnAdd=new _G({normal:"./assets/icon/animation/add.png",down:"./assets/icon/animation/add.png"}),this.btnAdd.x=152,this.btnRemove=new _G({normal:"./assets/icon/dopesheet/delete.png",down:"./assets/icon/dopesheet/delete.png"}),this.btnRemove.x=170}},{key:"initControl",value:function(){this.animationList.on(xG.Change,this.onChangeAnimation,this),this.btnAdd.on("click",this.onAddAnimation,this),this.btnRemove.on("click",this.onRemoveAnimation,this)}},{key:"onAddAnimation",value:function(e){this.emit(n.EVENT_ADD_ANIMATION)}},{key:"onRemoveAnimation",value:function(e){if(this.animationList.data.length>0){var t=this.animationList.selectedData.id;t>0&&this.emit(n.EVENT_REMOVE_ANIMATION,t)}}},{key:"onChangeAnimation",value:function(e){var t=this.animationList.data[e];this.emit(n.EVENT_SELECT_ANIMATION,t.id)}}]),n}(WG);XG.EVENT_SELECT_ANIMATION="EVENT_SELECT_ANIMATION",XG.EVENT_ADD_ANIMATION="EVENT_ADD_ANIMATION",XG.EVENT_REMOVE_ANIMATION="EVENT_REMOVE_ANIMATION";var YG=function(){function e(){var t=this;u(this,e),this._callbacks=[],this._callbackOnce=[],this._intervalMap=new Map,this.runNum=0,this.tickHandler=void 0,this.startTime=void 0,this.tick=function(){var e=Date.now(),n=e-t.startTime;t.startTime=e;for(var r=0,i=t._callbackOnce.length;r<i;r++)t._callbackOnce[r](n);for(var o=0,a=t._callbacks.length;o<a;o++)t._callbacks[o](n);t._callbackOnce.length=0,t.runNum>0&&(t.tickHandler=requestAnimationFrame(t.tick))}}return f(e,[{key:"next",value:function(e){this._callbackOnce.push(e),this.start(),this.stop()}},{key:"setInterval",value:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){this._intervalMap.get(e)&&this.clearInterval(e);var r=setInterval(t,n);this._intervalMap.set(e,r)}))},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){var t=this._intervalMap.get(e);t&&(clearInterval(t),this._intervalMap.delete(e))}))},{key:"setEnterFrame",value:function(e){this._callbacks.push(e),this.start()}},{key:"stopEnterFrame",value:function(e){if(this.stop(),e){var t=this._callbacks.indexOf(e);t>=0&&this._callbacks.splice(t,1)}else this._callbacks.length=0}},{key:"start",value:function(){this.startTime=Date.now(),this.runNum++,this.runNum>0&&(this.tickHandler=requestAnimationFrame(this.tick))}},{key:"stop",value:function(){this.runNum>0&&this.runNum--}},{key:"throttle",value:function(e,t){var n=!0;return function(){n&&(n=!1,setTimeout((function(){e(),n=!0}),t))}}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}},{key:"next",value:function(t){e.instance.next(t)}},{key:"setEnterFrame",value:function(t){e.instance.setEnterFrame(t)}},{key:"stopEnterFrame",value:function(t){e.instance.stopEnterFrame(t)}},{key:"setInterval",value:function(t,n,r){e.instance.setInterval(t,n,r)}},{key:"clearInterval",value:function(t){e.instance.clearInterval(t)}}]),e}();YG._instance=void 0;var KG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).model=void 0,e.btnPlayFirst=void 0,e.btnPlayPrev=void 0,e.btnPlay=void 0,e.btnPlayNext=void 0,e.btnPlayLast=void 0,e.btnLoop=void 0,e.playList=[],e.playFrameIndex=0,e.playDuration=0,e.loop=!1,e.playAnimation=function(){e.playFrameIndex+=1,e.playFrameIndex<e.playDuration?e.model.commit(Q.UPDATE_FRAME,e.playFrameIndex):(e.playFrameIndex=0,e.model.commit(Q.UPDATE_FRAME,e.playFrameIndex),e.loop||e.stop())},e.init(),e}return f(n,[{key:"init",value:function(){this.btnPlayFirst=new _G({normal:"./assets/icon/first.png",down:"./assets/icon/first.png"}),this.playList.push(this.btnPlayFirst),this.btnPlayPrev=new _G({normal:"./assets/icon/previous2.png",down:"./assets/icon/previous2.png"}),this.playList.push(this.btnPlayPrev),this.btnPlay=new _G({normal:"./assets/icon/caretdown-copy.png",down:"./assets/icon/pause1.png"}),this.btnPlay.toggle=!0,this.playList.push(this.btnPlay),this.btnPlayNext=new _G({normal:"./assets/icon/next.png",down:"./assets/icon/next.png"}),this.playList.push(this.btnPlayNext),this.btnPlayLast=new _G({normal:"./assets/icon/last.png",down:"./assets/icon/last.png"}),this.playList.push(this.btnPlayLast),this.btnLoop=new _G({normal:"./assets/icon/loop.png",down:"./assets/icon/loop_red.png"}),this.btnLoop.toggle=!0,this.playList.push(this.btnLoop);for(var e=0,t=this.playList.length;e<t;e++){var n=this.playList[e];n.x=20*e,this.addChild(n)}this.initControl()}},{key:"initControl",value:function(){this.btnPlayFirst.on("click",this.onPlayFirst,this),this.btnPlayPrev.on("click",this.onPlayPrev,this),this.btnPlay.on("click",this.onPlay,this),this.btnPlayNext.on("click",this.onPlayNext,this),this.btnPlayLast.on("click",this.onPlayLast,this),this.btnLoop.on("click",this.onPlayLoop,this)}},{key:"onPlayFirst",value:function(){this.model&&(0!=this.model.state.editor.dopesheet.curTime&&this.model.commit(Q.UPDATE_FRAME,0))}},{key:"onPlayPrev",value:function(){if(this.model){var e=this.model.state.editor.dopesheet.curTime;e>0&&this.model.commit(Q.UPDATE_FRAME,e-1)}}},{key:"onPlay",value:function(){this.model}},{key:"play",value:function(){var e=this.model.state.editor.dopesheet.curTime;this.playFrameIndex=e,YG.setEnterFrame(this.playAnimation)}},{key:"stop",value:function(){YG.stopEnterFrame(this.playAnimation),this.playFrameIndex=Math.round(this.playFrameIndex),this.model.commit(Q.UPDATE_FRAME,this.playFrameIndex),this.btnPlay.selected=!1}},{key:"onPlayNext",value:function(){this.model}},{key:"onPlayLast",value:function(){this.model}},{key:"onPlayLoop",value:function(){this.model&&(this.loop=this.btnLoop.selected)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopePlayTools]"}}]),n}(c_),qG=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).playTools=void 0,e.btnAutoKey=void 0,e.btnAutoFirstKey=void 0,e.btnDelete=void 0,e.btnCopy=void 0,e.btnCut=void 0,e.btnPaste=void 0,e.testInput=void 0,e.btnFilter=void 0,e.btnCollapse=void 0,e._model=void 0,e.init(),e.initData(),e.initControl(),e}return f(n,[{key:"model",get:function(){return this._model},set:function(e){this._model=e,this.playTools.model=e,this.initData()}},{key:"init",value:function(){this.playTools=new KG;var e=0;this.btnCopy=new _G({normal:"./assets/icon/dopesheet/timeline_copy.png",down:"./assets/icon/dopesheet/timeline_copy_d.png"}),this.btnCopy.x=0+20*e,this.addChild(this.btnCopy),e++,this.btnPaste=new _G({normal:"./assets/icon/dopesheet/timeline_paste.png",down:"./assets/icon/dopesheet/timeline_paste_d.png"}),this.btnPaste.x=0+20*e,this.addChild(this.btnPaste),e++,this.btnCut=new _G({normal:"./assets/icon/dopesheet/timeline_cut.png",down:"./assets/icon/dopesheet/timeline_cut_d.png"}),this.btnCut.x=0+20*e,this.addChild(this.btnCut),e++,this.btnDelete=new _G({normal:"./assets/icon/dopesheet/timeline_del.png",down:"./assets/icon/dopesheet/timeline_del_d.png"}),this.btnDelete.x=0+20*e,this.addChild(this.btnDelete),this.btnAutoKey=new _G({normal:"./assets/icon/flag4.png",down:"./assets/icon/flag4_red_auto.png"}),this.btnAutoKey.toggle=!0,this.btnAutoKey.x=140,this.addChild(this.btnAutoKey),this.btnAutoFirstKey=new _G({normal:"./assets/icon/flagto.png",down:"./assets/icon/flagto_red.png"}),this.btnAutoFirstKey.toggle=!0,this.btnAutoFirstKey.x=120,this.addChild(this.btnAutoFirstKey),this.btnFilter=new _G({normal:"./assets/icon/filter1.png",down:"./assets/icon/filter_red.png"}),this.btnFilter.toggle=!0,this.btnFilter.x=20,this.btnFilter.y=20,this.addChild(this.btnFilter),this.btnCollapse=new _G({normal:"./assets/icon/fileOpen.svg",down:"./assets/icon/fileClose.svg"}),this.btnCollapse.toggle=!0,this.btnCollapse.x=-2,this.btnCollapse.y=16,this.addChild(this.btnCollapse)}},{key:"isCollapse",get:function(){return!!this.btnCollapse&&this.btnCollapse.selected}},{key:"resetCollapse",value:function(){this.btnCollapse&&(this.btnCollapse.selected=!1)}},{key:"initData",value:function(){if(this._model){var e=this._model.state.editor.dopesheet.autoKey,t=this._model.state.editor.dopesheet.filter,n=this._model.state.editor.dopesheet.autoFirstFrame;this.btnAutoKey.selected=e,this.btnFilter.selected=t,this.btnAutoFirstKey.selected=n}}},{key:"initControl",value:function(){this.btnAutoKey.on("click",this.onSwitchAutoKey,this),this.btnAutoFirstKey.on("click",this.onSwitchAutoFirstFrame,this),this.btnFilter.on("click",this.onSwitchFilter,this),this.btnCollapse.on("click",this.onCollapseTree,this),this.btnCopy.on("click",this.onCopy,this),this.btnPaste.on("click",this.onPaste,this),this.btnCut.on("click",this.onCut,this),this.btnDelete.on("click",this.onDelete,this)}},{key:"onSwitchAutoKey",value:function(){this._model.commit(X.SWITCH_AUTO_KEY,this.btnAutoKey.selected)}},{key:"onSwitchAutoFirstFrame",value:function(){this._model.commit(X.SWITCH_AUTO_FIRST_FRAME)}},{key:"onSwitchFilter",value:function(){this._model.commit(Q.SWITCH_FILTER)}},{key:"onCopy",value:function(){}},{key:"onPaste",value:function(){}},{key:"onCut",value:function(){}},{key:"onDelete",value:function(){this._model.dispatch(P.DELETE_FRAMES,{})}},{key:"onCollapseTree",value:function(){var e=this.btnCollapse.selected;this.emit(NC.EVENT_COLLAPSE,e)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeTools]"}}]),n}(c_),ZG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).moveBlock=new iw,r.scaleLeftBlock=new iw,r.scaleRightBlock=new iw,r.offY=0,r._data=void 0,r.over=!1,r.data=e,r.interactiveChildren=!0,r.interactive=!0,r.moveBlock.interactive=!0,r.scaleLeftBlock.interactive=!0,r.scaleRightBlock.interactive=!0,r.addChild(r.moveBlock),r.addChild(r.scaleLeftBlock),r.addChild(r.scaleRightBlock),r.on("mouseover",r.onMouseOver,g(r)),r.on("mouseout",r.onMouseOut,g(r)),r.on("mousemove",r.onMouseMove,g(r)),r.on("mousedown",r.onMouseDown,g(r)),Pk.setDisplayCursor(r.moveBlock,Ok.move),Pk.setDisplayCursor(r.scaleLeftBlock,Ok.col_resize),Pk.setDisplayCursor(r.scaleRightBlock,Ok.col_resize),r}return f(n,[{key:"onMouseOver",value:function(e){this.over=!0,e.stopPropagation()}},{key:"onMouseOut",value:function(e){this.over=!1}},{key:"onMouseMove",value:function(e){this.over&&e.stopPropagation()}},{key:"onMouseDown",value:function(e){e.stopPropagation()}},{key:"data",get:function(){return this._data},set:function(e){this._data=e,this.draw()}},{key:"draw",value:function(){if(this.clear(),this._data){var e,t,n=BT.dopesheetConfig,r=n.ITEM_HEIGHT,i=n.LABEL_LEFT_WIDTH,o=n.LABEL_HEIGHT,a=this._data.end.y*r,s=this._data.start.y*r,l=Math.abs(s-a)+r,u=BT.getXFromFrame(this._data.start.x),c=BT.getXFromFrame(this._data.end.x),h=Math.abs(c-u);e=Math.min(u,c)+i;var d=l;if(!((t=Math.min(a,s)+o-this.offY)+l<o+r)){if(t<o+r){if(d=l-(o+r-t),e+h<i)return;if(e<i){var f=h-(i-e),p=i-e,v=l-(o+r-t),m=o+r-t;this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,0),this.moveBlock.beginFill(yp.FRAME_BLOCK,.1),this.moveBlock.drawRect(p,m,f,v),this.moveBlock.endFill(),this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,.5),this.moveBlock.moveTo(p+f,m),this.moveBlock.lineTo(p+f,l),this.moveBlock.lineTo(p,l)}else{var g=l-(o+r-t),y=o+r-t;this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,0),this.moveBlock.beginFill(yp.FRAME_BLOCK,.1),this.moveBlock.drawRect(0,y,h,g),this.moveBlock.endFill(),this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,.5),this.moveBlock.moveTo(0,y),this.moveBlock.lineTo(0,l),this.moveBlock.lineTo(h,l),this.moveBlock.lineTo(h,y)}}else{if(e+h<i)return;if(e<i){var b=h-(i-e);this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,0),this.moveBlock.beginFill(yp.FRAME_BLOCK,.1),this.moveBlock.drawRect(i-e,0,b,l),this.moveBlock.endFill(),this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,.5),this.moveBlock.moveTo(i-e,0),this.moveBlock.lineTo(i-e+b,0),this.moveBlock.lineTo(i-e+b,l),this.moveBlock.lineTo(i-e,l)}else this.moveBlock.lineStyle(1,yp.FRAME_BLOCK_LINE,.5),this.moveBlock.beginFill(yp.FRAME_BLOCK,.1),this.moveBlock.drawRect(0,0,h,l),this.moveBlock.endFill()}e>i&&(this.scaleLeftBlock.beginFill(yp.FRAME_SCALE_X,.01),this.scaleLeftBlock.drawRect(0,l-d,10,d),this.scaleLeftBlock.endFill(),this.scaleLeftBlock.x=-10),this.scaleRightBlock.beginFill(yp.FRAME_SCALE_X,.01),this.scaleRightBlock.drawRect(0,l-d,10,d),this.scaleRightBlock.endFill(),this.scaleRightBlock.x=h,this.x=e,this.y=t}}}},{key:"clear",value:function(){this.moveBlock.clear(),this.scaleLeftBlock.clear(),this.scaleRightBlock.clear()}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrameBlock]"}}]),n}(c_),$G=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._data=void 0,e.blocks=[],e.blockPool=[],e._offY=0,e}return f(n,[{key:"data",set:function(e){this._data=e,this.draw()}},{key:"offsetY",set:function(e){this._offY!==e&&(this._offY=e,this.draw())}},{key:"draw",value:function(){if(this.clear(),this._data)for(var e=0,t=this._data.length;e<t;e++){var n=this.createBlock(this._data[e]);this.blocks.push(n),this.addChild(n)}}},{key:"reRender",value:function(){for(var e=0,t=this.blocks.length;e<t;e++){var n=this.blocks[e];n&&n.draw()}}},{key:"clear",value:function(){for(var e=0,t=this.blocks.length;e<t;e++)this.blockPool.push(this.blocks[e]);this.blocks.length=0,this.removeChildren()}},{key:"createBlock",value:function(e){var t;return this.blockPool.length?t=this.blockPool.pop():((t=new ZG).moveBlock.on("mousedown",this.blockMoveDown,this),t.scaleLeftBlock.on("mousedown",this.blockScaleLeftDown,this),t.scaleRightBlock.on("mousedown",this.blockScaleRightDown,this)),t.offY=this._offY,t.data=e,t}},{key:"blockMoveDown",value:function(e){this.emit(LC.MOVE_BLOCK,e)}},{key:"blockScaleLeftDown",value:function(e){this.emit(LC.SCALE_LEFT_BLOCK,e)}},{key:"blockScaleRightDown",value:function(e){this.emit(LC.SCALE_RIGHT_BLOCK,e)}}],[{key:"toString",value:function(){return"[class view.dopeSheet.DopeFrameBlockContainer]"}}]),n}(c_),QG=function(){function e(){u(this,e)}return f(e,null,[{key:"dragEnableDisplay",value:function(t,n,r){-1===e.dragDisplayList.indexOf(t)&&(e.dragDisplayList.push(t),e.dragContextList.push({stage:n,context:r}),t.interactive=!0,t.on("mousedown",e.dragBegin,r))}},{key:"dragDisableDisplay",value:function(t){var n=e.dragDisplayList.indexOf(t);if(-1!==n){var r=e.dragContextList[n];e.dragDisplayList.splice(n,1),e.dragContextList.splice(n,1),t.off("mousedown",e.dragBegin,e._dragContext),r.stage&&(r.stage.off("globalmousemove",e.dragMove,e._dragContext),r.stage.off("mouseup",e.dragEnd,e._dragContext)),e._dragDisplay=void 0,e._dragStage=void 0,e._dragContext=void 0}}},{key:"dragBegin",value:function(t){var n=t.currentTarget,r=e.dragDisplayList.indexOf(n);if(-1!==r){var i=e.dragContextList[r],o=t.data.global.x,a=t.data.global.y;e._dragInfo.startPos.x=o,e._dragInfo.startPos.y=a,e._dragInfo.curPos.x=o,e._dragInfo.curPos.y=a,e._dragInfo.endPos.x=void 0,e._dragInfo.endPos.y=void 0,e._dragInfo.offset.x=0,e._dragInfo.offset.y=0,e._dragDisplay=n,e._dragStage=i.stage,e._dragContext=i.context,e._dragStage.on("globalmousemove",e.dragMove,e._dragContext),window.addEventListener("mouseup",e.dragEnd),e._dragDisplay.emit(xG.DragStart,e._dragInfo)}}},{key:"dragMove",value:function(t){var n=t.data.global.x,r=t.data.global.y;e._dragInfo.curPos.x=n,e._dragInfo.curPos.y=r,e._dragInfo.offset.x=n-e._dragInfo.startPos.x,e._dragInfo.offset.y=r-e._dragInfo.startPos.y,e._dragDisplay.emit(xG.DragMove,e._dragInfo)}},{key:"dragEnd",value:function(t){e._dragInfo.endPos.x=e._dragInfo.curPos.x,e._dragInfo.endPos.y=e._dragInfo.curPos.y,e._dragStage.off("globalmousemove",e.dragMove,e._dragContext),e._dragStage.off("mousemove",e.dragMove,e._dragContext),window.removeEventListener("mouseup",e.dragEnd),e._dragDisplay.emit(xG.DragEnd,e._dragInfo),e._dragDisplay=void 0,e._dragStage=void 0,e._dragContext=void 0}}]),e}();QG._dragStage=void 0,QG._dragDisplay=void 0,QG._dragContext=void 0,QG.dragDisplayList=[],QG.dragContextList=[],QG._dragInfo={startPos:{x:0,y:0},curPos:{x:0,y:0},endPos:{x:0,y:0},offset:{x:0,y:0}};var JG=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e))._config=void 0,r.bg=void 0,r.bar=void 0,r._max=1,r._cur=0,r._pos=0,r._dragStartPos=0,r._scaleOffset=1,r.init(e),r}return f(n,[{key:"max",get:function(){return this._max},set:function(e){this._max!==e&&(this._max=e,this.updateScaleOffset(),this.draw())}},{key:"cur",get:function(){return this._cur},set:function(e){this._cur!==e&&(this._cur=e,this.draw())}},{key:"pos",get:function(){return this._pos},set:function(e){this._pos!==e&&(this._pos=e,this._pos>this._max-this._cur&&(this._pos=this._max-this._cur),this.draw())}},{key:"updateScaleOffset",value:function(){if(this._config){var e=this._config.width;this._config.vertical&&(e=this._config.height),this._scaleOffset=this._max/e}}},{key:"init",value:function(e){this._config=e,this.bg=new iw,this.bar=new iw,this.bg.interactive=!0,this.bar.interactive=!0,this.addChild(this.bg),this.addChild(this.bar)}},{key:"start",value:function(){QG.dragEnableDisplay(this.bar,this.stage),this.bar.on(xG.DragStart,this.onDragStart,this),this.bar.on(xG.DragMove,this.onDragMove,this),this.bg.on("click",this.onClickBg,this)}},{key:"onClickBg",value:function(e){if(e.data.getLocalPosition(this.bg).x<this.bar.x)this.emit(xG.Scroll,0);else{var t=this._max-this._cur;this.emit(xG.Scroll,t)}}},{key:"onDragStart",value:function(e){this._dragStartPos=this._pos}},{key:"onDragMove",value:function(e){var t=e.offset.x;this._config.vertical&&(t=e.offset.y),t*=this._scaleOffset;var n=this._dragStartPos+t;n<0?n=0:n>this._max-this._cur&&(n=this._max-this._cur),this.emit(xG.Scroll,n)}},{key:"draw",value:function(){if(this._config){var e=this._cur/this.max;e>1&&(e=1);var t=this._config.width,n=this._config.height;this._config.vertical?n=this._config.height*e:t=this._config.width*e,this.bar.clear(),this.bar.beginFill(this._config.barColor),this.bar.drawRect(0,0,t,n),this.bar.endFill(),e=this._pos/this.max;var r=0,i=0;this._config.vertical?i=this._config.height*e:r=this._config.width*e,this.bar.x=r,this.bar.y=i}}},{key:"resize",value:function(e,t){this._config.width=e,this._config.height=t,this.bg.clear(),this.bg.beginFill(this._config.bgColor),this.bg.drawRect(0,0,this._config.width,this._config.height),this.bg.endFill(),this.updateScaleOffset(),this.draw()}}]),n}(bG),eW=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).stopCheckOver=void 0,e.upToSelect=void 0,e.startPoint=void 0,e._justDownSelect=void 0,e.multSelectEnable=!0,e._transforming=void 0,e._downFrame=0,e._cacheFrames=[],e._drawFrameBlockStart=!1,e.updateFrameBlockStart=function(t){e._drawFrameBlockStart=!0},e.updateFrameBlockEnd=function(t){e._drawFrameBlockStart=!1},e.rightDownPos={x:0,y:0},e.rightDownOffset=0,e.rightPressing=!1,e.rightDown=function(t){e.rightPressing=!0,e.rightDownOffset=e.model.state.editor.dopesheet.offset,e.rightDownPos.x=t.data.global.x,e.rightDownPos.y=t.data.global.y,document.addEventListener("mouseup",e.rightUp),e.view.stage.on("mousemove",e.rightMove)},e.rightMove=function(t){if(e.rightPressing){var n=Math.round(e.rightDownPos.x-t.data.global.x)+e.rightDownOffset;n<0&&(n=0),e.view.moveToOffset(n)}},e.rightUp=function(t){e.rightPressing=!1,document.removeEventListener("mouseup",e.rightUp),e.view.stage.off("mousemove",e.rightMove)},e.mouseout=function(t){e.overFrame=null},e.mousedown=function(t){if(!e._transforming){e.startPoint=e.getSheetPoint(t.data.global);var n=e.getSheetPoint(t.data.global),r=e.model.getFrameFromX(n.x),i=Math.round(r),o=!1;t&&t.ctrlKey&&(o=!0),e.multSelectEnable&&o?(e.upToSelect=!1,e.selectAddFrameIds(e.overFrameIds)):e.isSelected(e.overFrameIds)?e.upToSelect=!0:(e._justDownSelect=!0,e.selectFrameIds(e.overFrameIds)),window.addEventListener("mouseup",e.mouseup),e.overFrameIds.length>0&&e.selectedFrameIds.length>0&&(e._downFrame=i,e._transforming=!0,e.model.historyBeginMerge(),e.cacheSelectFrames(),e.view.sheetList.on("mousemove",e.onFrameMouseMove,g(e)))}},e.mouseup=function(t){e._justDownSelect&&(e._justDownSelect=!1),e.upToSelect&&e.overFrameIds.length>0&&e.selectFrameIds(e.overFrameIds),e._transforming&&(e.checkOverConflictFrame(),e.model.historyEndMerge(),e._transforming=!1),window.removeEventListener("mouseup",e.mouseup),e.view.sheetList.off("mousemove",e.onFrameMouseMove,g(e))},e.onFrameMouseMove=function(t){for(var n=e.getSheetPoint(t.data.global),r=e.model.getFrameFromX(n.x),i=Math.round(r)-e._downFrame,o=e.model.getCurArmature(),a=e.model.getCurAnimation(o),s=e.selectedFrameIds,l={armatureId:o.id,animationId:a.id,frames:{}},u=0,c=s.length;u<c;u++){var h=s[u],d=gp.getFrameById(a,h);if(d){var f=e._cacheFrames[u]+i;f<0&&(f=0),f!==d.frame&&(l.frames[h]={frame:f})}}e.model.commit(M.MODIFY_FRAMES,l)},e.checkOver=function(t){if(e.overFrame=null,!(t.data.global.x<0||t.data.global.y<0||t.data.global.x===1/0||t.data.global.y===1/0)&&!e.stopCheckOver&&!n.pauseOverCheck&&!e._transforming&&!e._drawFrameBlockStart){var r=e.getSheetPoint(t.data.global);if(!(r.y<0)){var i=e.view.getTimelineByY(r.y);if(null!=i){var o=e.model.dopesheetData,a=o.curGap,s=o.scaleLevel,l=AG.FRAME_WIDTH,u=e.model.getFrameFromX(r.x),c=Math.round(u),h=a/s;if(h<l){for(var d=Math.ceil(l/h),f=[c],p=1;p<d;p++){var v=c-p;v>=0&&f.push(v),v=c+p,f.push(v)}for(var m=f.length-1;m>=0;m--){var g=f[m],y=void 0;if(i.type===O.ARMATURE){var b=i.animation;y=gp.getAnimationTimelineFrameByFrameIndex(b,g)}else if(i.type===O.BONE||i.type===O.SLOT){var _=i.animation;y=gp.getTimelinesFramesByFrameIndex(_,g)}else if(i.type===O.TIMELINE){var x=i.animation;y=gp.getTimelineFramesByFrameIndex(x,g)}if(y[1].length)return void(e.overFrame=y[1])}}else{var E,w=e.model.getXFromFrame(c);if(!(w+.5*l>r.x&&w-.5*l<r.x))return;if(i.type===O.ARMATURE){var T=i.animation;E=gp.getAnimationTimelineFrameByFrameIndex(T,c)}else if(i.type===O.BONE||i.type===O.SLOT){var S=i.animation;E=gp.getTimelinesFramesByFrameIndex(S,c)}else if(i.type===O.TIMELINE){var k=i.animation;E=gp.getTimelineFramesByFrameIndex(k,c)}E[1].length&&(e.overFrame=E[1])}}}}},e}return f(n,[{key:"overFrame",set:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n].id;t.push(i)}var o=this.model.state.editor.over.overFrameIds;vp.arrayEqualArray(t,o)||this.model.commit(Z.OVER_FRAME,t)}},{key:"overFrameIds",get:function(){return this.model.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.model.state.runtime.editing.selectedFrameIds}},{key:"selectAddFrameIds",value:function(e){var t=this.model.state.runtime.editing.selectedFrameIds,n=t.concat(e);this.model.state.editor.over.overFrameIds;vp.arrayEqualArray(n,t)||this.model.commit(Q.SELECT_FRAME,n)}},{key:"selectFrameIds",value:function(e){var t=e.concat(),n=this.model.state.runtime.editing.selectedFrameIds;vp.arrayEqualArray(t,n)||this.model.commit(Q.SELECT_FRAME,t)}},{key:"isSelected",value:function(e){return 0!==e.length&&vp.arrayIncludesArray(this.selectedFrameIds,e)}},{key:"start",value:function(){this.view.sheetList.on("mousemove",this.checkOver,this),this.view.sheetList.on("mouseout",this.mouseout,this),this.view.sheetList.on("mousedown",this.mousedown,this),this.view.stage.on("rightdown",this.rightDown,this),this._addNotification(DC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._addNotification(DC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd)}},{key:"stop",value:function(){this.view&&this.view.sheet&&(this.view.sheetList.off("mousemove",this.checkOver,this),this.view.sheetList.off("mouseout",this.mouseout,this),this.view.sheetList.off("mousedown",this.mousedown,this)),this._removeNotification(DC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._removeNotification(DC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd)}},{key:"getSheetPoint",value:function(e){var t=n.helpPoint0,r=this.model.dopesheetConfig,i=r.LABEL_LEFT_WIDTH,o=r.LABEL_HEIGHT;return t.x=e.x-i,t.y=e.y-o,t}},{key:"checkOverConflictFrame",value:function(){var e=this.model.getCurArmature(),t=this.model.getCurAnimation(e);if(e&&t){var n={armatureId:e.id,animationId:t.id};this.model.commit(P.CHECK_OVERRIDE_FRAME,n)}}},{key:"cacheSelectFrames",value:function(){this._cacheFrames.length=0;for(var e=this.selectedFrameIds,t=this.model.getCurArmature(),n=this.model.getCurAnimation(t),r=0,i=e.length;r<i;r++){var o=e[r],a=gp.getFrameById(n,o);a&&this._cacheFrames.push(a.frame)}}}],[{key:"toString",value:function(){return"FrameSelectController"}}]),n}(Uk);eW.pauseOverCheck=!1,eW.helpMatrix0=new kg,eW.helpPoint0={x:0,y:0};var tW=function(e){return e[e.None=0]="None",e[e.Move=1]="Move",e[e.ScaleLeft=2]="ScaleLeft",e[e.ScaleRight=3]="ScaleRight",e}(tW||{}),nW=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._block={start:{x:0,y:0},end:{x:0,y:0}},e._mouseDown=!1,e.upToSelect=void 0,e.startPoint=void 0,e._justDownSelect=void 0,e.multSelectEnable=!0,e._transforming=void 0,e._downFrame=0,e._cacheFrames=[],e._mult=!1,e._moveBlockDownX=0,e._moveBlockFrameCache={},e._moveBlockCache=[],e._moveBlocked=!1,e._moveBlockMode=tW.None,e.moveBlockMinIndex=0,e._lastMoveFrame=-1,e._maxLeftMoveFrame=0,e._curSelectedFrames=void 0,e._frameBlocks=[],e._minOffsetFrame=0,e._historyMergeStart=!1,e.onSelectFrame=function(t){t.data&&Array.isArray(t.data)&&0===t.data.length&&(e.frameBlocks=[])},e.mousedown=function(t){if(!(e.model&&e.overFrameIds&&e.overFrameIds.length>0)){var n=e.getSheetPoint(t.data.global);if(!(e.view.stage.height-t.data.global.y<e.view.BOTTOM_BAR_HEIGHT)){var r=e.model.dopesheetConfig.LABEL_LEFT_WIDTH;if(!(e.view.screen.width-r-n.x<10)){var i=e.view.getVirtualTimelineIndex(n.y),o=Math.round(e.model.getFrameFromX(n.x));if(!(o<0)){i>=0&&(e._block.start.x=o,e._block.start.y=i,e._block.end.x=o,e._block.end.y=i,e._mouseDown=!0,e._sendNotification(DC.UPDATE_FRAME_BLOCK_START),window.addEventListener("mouseup",e.mouseup),e.view.stage.on("mousemove",e.onFrameMouseMove,g(e)));var a=!1;t&&t.data&&t.data.originalEvent&&t.ctrlKey&&(a=!0),e.multSelectEnable&&a||(e.selectFrames=[])}}}}},e.mouseup=function(t){e._mouseDown=!1,e._sendNotification(DC.UPDATE_FRAME_BLOCK_END),e._block&&(void 0===e._curSelectedFrames||0===e._curSelectedFrames.length||e._block.start.x===e._block.end.x?e.frameBlocks.length>0&&(e.frameBlocks=[]):e.model.selectedFrameIds&&0!==e.model.selectedFrameIds.length||e.frameBlocks.length>0&&(e.frameBlocks=[])),window.removeEventListener("mouseup",e.mouseup),e.view.stage.off("mousemove",e.onFrameMouseMove,g(e))},e.onFrameMouseMove=function(t){var n=e.getSheetPoint(t.data.global),r=e.view.getVirtualTimelineIndex(n.y),i=Math.round(e.model.getFrameFromX(n.x));i<0&&(i=0),r>=0&&(e._block.end.x===i&&e._block.end.y===r||(e._block.end.x=i,e._block.end.y>0&&r>0&&(e._block.end.y=r),e.frameBlocks=[e._block])),e._curSelectedFrames=e.getCoverFrames(e._block),e.selectFrames=e._curSelectedFrames},e.onMoveFrameBlockDown=function(t){e._sendNotification(DC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,tW.Move)},e.onScaleLeftFrameBlockDown=function(t){e._sendNotification(DC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,tW.ScaleLeft)},e.onScaleRightFrameBlockDown=function(t){e._sendNotification(DC.UPDATE_FRAME_BLOCK_START),e.moveFrameReady(t.data.global,tW.ScaleRight)},e.moveBlockUp=function(t){e.view&&e.view.stage&&e.view.stage.off("mousemove",e.onFrameBlockMove,g(e)),e._moveBlocked&&(e.checkOverConflictFrame(),e._moveBlocked=!1),e._historyMergeStart&&(e._historyMergeStart=!1,e.model.historyEndMerge()),e._sendNotification(DC.UPDATE_FRAME_BLOCK_END)},e.onFrameBlockMove=function(t){var n=e.getSheetPoint(t.data.global),r=Math.round(e.model.getFrameFromX(n.x));if(e._lastMoveFrame!==r){e._lastMoveFrame=r;var i=r-e._moveBlockDownX;switch(i<-e._minOffsetFrame&&(i=-e._minOffsetFrame),e._moveBlockMode){case tW.Move:e.frameBlockMove(i);break;case tW.ScaleRight:e.frameBlockScaleRight(i);break;case tW.ScaleLeft:e.frameBlockScaleLeft(i)}}},e.updateFrameBlockStart=function(t){e.view&&(e.view.drawFrameBlocking=!0)},e.updateFrameBlockEnd=function(t){e.view&&(e.view.drawFrameBlocking=!1)},e.reRenderBlockFrames=function(t){e.view&&e.view.reRenderFrameBlock()},e.refreshDeleteFrames=function(t){e.view&&(e.frameBlocks.length=0,e.view.refreshFrameBlock(e.frameBlocks))},e.refreshFrameBlock=function(t){e.view&&e.view.refreshFrameBlock(e.frameBlocks)},e.clearBlock=function(t){e.frameBlocks.length=0,e.view.refreshFrameBlock(e.frameBlocks)},e}return f(n,[{key:"overFrameIds",get:function(){return this.model.state.editor.over.overFrameIds}},{key:"selectedFrameIds",get:function(){return this.model.state.runtime.editing.selectedFrameIds}},{key:"frameBlocks",get:function(){return this._frameBlocks},set:function(e){this._frameBlocks=e,this._sendNotification(DC.UPDATE_FRAME_BLOCK)}},{key:"selectFrames",set:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n].id;-1===t.indexOf(i)&&t.push(i)}var o=this.model.state.runtime.editing.selectedFrameIds;vp.arrayEqualArray(t,o)||this.model.commit(Q.SELECT_FRAME,t)}},{key:"start",value:function(){this.view.stage.on("mousedown",this.mousedown,this),this.view.frameBlock.on(Z.MOVE_BLOCK,this.onMoveFrameBlockDown,this),this.view.frameBlock.on(Z.SCALE_LEFT_BLOCK,this.onScaleLeftFrameBlockDown,this),this.view.frameBlock.on(Z.SCALE_RIGHT_BLOCK,this.onScaleRightFrameBlockDown,this),this._addNotification(P.DELETE_FRAMES,this.refreshDeleteFrames),this._addNotification(DC.UPDATE_FRAME_BLOCK,this.refreshFrameBlock),this._addNotification(DC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._addNotification(DC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd),this._addNotification(Q.SELECT_FRAME,this.onSelectFrame),this._addNotification(Q.UPDATE_OFFSET,this.reRenderBlockFrames),this._addNotification(G.SELECT_BONES,this.clearBlock),this._addNotification(B.SELECT_SLOTS,this.clearBlock),this._addNotification(W.SWITCH_MODE,this.clearBlock)}},{key:"stop",value:function(){this.view&&(this.view.stage.off("mousedown",this.mousedown,this),this.view.frameBlock.off(Z.MOVE_BLOCK,this.onMoveFrameBlockDown,this),this.view.frameBlock.off(Z.SCALE_LEFT_BLOCK,this.onScaleLeftFrameBlockDown,this),this.view.frameBlock.off(Z.SCALE_RIGHT_BLOCK,this.onScaleRightFrameBlockDown,this)),this._removeNotification(P.DELETE_FRAMES,this.refreshDeleteFrames),this._removeNotification(DC.UPDATE_FRAME_BLOCK,this.refreshFrameBlock),this._removeNotification(DC.UPDATE_FRAME_BLOCK_START,this.updateFrameBlockStart),this._removeNotification(DC.UPDATE_FRAME_BLOCK_END,this.updateFrameBlockEnd),this._removeNotification(Q.SELECT_FRAME,this.onSelectFrame),this._removeNotification(Q.UPDATE_OFFSET,this.reRenderBlockFrames),this._removeNotification(G.SELECT_BONES,this.clearBlock),this._removeNotification(B.SELECT_SLOTS,this.clearBlock),this._removeNotification(W.SWITCH_MODE,this.clearBlock),this._historyMergeStart&&(this._historyMergeStart=!1,this.model.historyEndMerge())}},{key:"getSheetPoint",value:function(e){var t=n.helpPoint0,r=this.model.dopesheetConfig,i=r.LABEL_LEFT_WIDTH,o=r.LABEL_HEIGHT;return t.x=e.x-i,t.y=e.y-o,t}},{key:"getCoverFrames",value:function(e){return this.view?this.view.getCoverTracks(e):[]}},{key:"moveFrameReady",value:function(e,t){this._moveBlockMode=t;for(var n=this.getSheetPoint(e),r=Math.round(this.model.getFrameFromX(n.x)),i=this.model.getCurArmatureCurAnimation(),o=Number.MAX_SAFE_INTEGER,a=this.selectedFrameIds,s=0,l=a.length;s<l;s++){var u=a[s],c=gp.getFrameById(i,u);c&&o>c.frame&&(o=c.frame)}this.moveBlockMinIndex=o,this._lastMoveFrame=r,window.addEventListener("mouseup",this.moveBlockUp),this.view.stage.on("mousemove",this.onFrameBlockMove,this),this._moveBlockDownX=r,this._moveBlockFrameCache={};for(var h=Number.MAX_SAFE_INTEGER,d=0,f=a.length;d<f;d++){var p=a[d],v=gp.getFrameById(i,p);this._moveBlockFrameCache[p]=v.frame,v.frame<h&&(h=v.frame)}this._maxLeftMoveFrame=h,this._moveBlockCache.length=0;var m=this.frameBlocks;this._minOffsetFrame=Number.MAX_SAFE_INTEGER,this._moveBlockMode===tW.ScaleRight&&(this._minOffsetFrame=0);for(var g=0,y=m.length;g<y;g++){var b=m[g];this._moveBlockCache.push({startX:b.start.x,endX:b.end.x}),this._moveBlockMode===tW.Move||this._moveBlockMode===tW.ScaleLeft?(b.end.x<this._minOffsetFrame&&(this._minOffsetFrame=b.end.x),b.start.x<this._minOffsetFrame&&(this._minOffsetFrame=b.start.x)):this._moveBlockMode===tW.ScaleRight&&(b.end.x>this._minOffsetFrame&&(this._minOffsetFrame=b.end.x),b.start.x>this._minOffsetFrame&&(this._minOffsetFrame=b.start.x))}this._historyMergeStart=!0,this.model.historyBeginMerge()}},{key:"checkOverConflictFrame",value:function(){var e=this.model.getCurArmature(),t=this.model.getCurAnimation(e);if(e&&t){var n={armatureId:e.id,animationId:t.id},r=this.selectedFrameIds.concat();this.model.commit(P.CHECK_OVERRIDE_FRAME,n),r.length!==this.selectedFrameIds.length&&(this.frameBlocks=[])}}},{key:"frameBlockMove",value:function(e){var t=this.moveBlockMinIndex;e<0&&e<-t&&(e=-t);for(var n=this.selectedFrameIds,r=this.frameBlocks,i=0,o=r.length;i<o;i++){var a=r[i],s=this._moveBlockCache[i];a.start.x=s.startX+e,a.end.x=s.endX+e}this._sendNotification(DC.UPDATE_FRAME_BLOCK);for(var l={},u=0,c=n.length;u<c;u++){var h=n[u],d=this._moveBlockFrameCache[h];isNaN(d)||(l[h]={frame:d+e},this._moveBlocked=!0)}this.modifyFrames(l)}},{key:"frameBlockScaleRight",value:function(e){for(var t=this.selectedFrameIds,n=this.frameBlocks,r=0,i=n.length;r<i;r++){var o=n[r],a=this._moveBlockCache[r];a.startX>a.endX?o.start.x=a.startX+e:o.end.x=a.endX+e}this._sendNotification(DC.UPDATE_FRAME_BLOCK);for(var s={},l=0,u=t.length;l<u;l++){var c=t[l],h=this._moveBlockFrameCache[c];if(!isNaN(h)){var d=this.getBlockCache(this._moveBlockCache,h),f=this.getScaleOffFrame(h,d,e,!0);s[c]={frame:h+f},this._moveBlocked=!0}}this.modifyFrames(s)}},{key:"frameBlockScaleLeft",value:function(e){var t=this.moveBlockMinIndex,n=this.selectedFrameIds;e<0&&e<-t&&(e=-t);for(var r=this.frameBlocks,i=0,o=r.length;i<o;i++){var a=r[i],s=this._moveBlockCache[i];s.startX>s.endX?a.end.x=s.endX+e:a.start.x=s.startX+e}this._sendNotification(DC.UPDATE_FRAME_BLOCK);for(var l={},u=0,c=n.length;u<c;u++){var h=n[u],d=this._moveBlockFrameCache[h];if(!isNaN(d)){var f=this.getBlockCache(this._moveBlockCache,d),p=d+this.getScaleOffFrame(d,f,e,!1);p<0&&(p=0),l[h]={frame:p},this._moveBlocked=!0}}this.modifyFrames(l)}},{key:"getScaleOffFrame",value:function(e,t,n,r){var i=0,o=Math.min(t.startX,t.endX),a=Math.max(t.startX,t.endX),s=(e-o)/(a-o);if(r){var l=a+n;i=Math.round((l-o)*s)+o-e}else{var u=o+n;i=Math.round((a-u)*s)+u-e}return i}},{key:"getBlockCache",value:function(e,t){return e[0]}},{key:"modifyFrames",value:function(e){var t=this.model.getCurArmature(),n=this.model.getCurAnimation(t);if(t&&n){var r={armatureId:t.id,animationId:n.id,frames:e};this.model.commit(M.MODIFY_FRAMES,r)}}}],[{key:"toString",value:function(){return"FrameBlockSelectController"}}]),n}(Uk);nW.helpPoint0={x:0,y:0},nW.pauseOverCheck=!1;var rW=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,{width:512,height:512,backgroundColor:yp.DOPESHEET_BG})).label=void 0,r.sheet=void 0,r.sheetHead=void 0,r.sheetList=void 0,r.tools=void 0,r.frameBlock=void 0,r.LABEL_SCROLL_SPEED=8,r.SHEET_SCROLL_SPEED=10,r.BOTTOM_BAR_HEIGHT=20,r.frameSelectController=void 0,r.frameBlockSelectController=void 0,r._onLabelMouseWheel=void 0,r._onSheetMouseWheel=void 0,r._onLabelMouseRightMove=void 0,r._onLabelMouseMove=void 0,r._onLabelMouseUp=void 0,r._justLabelRightDown=void 0,r._justLabelDown=void 0,r._downLabelX=void 0,r._downLabelOffX=void 0,r._downGlobalX=void 0,r._parentHtml=void 0,r._labelTicker=void 0,r._labelScrollSpeed=r.LABEL_SCROLL_SPEED,r._bottomBar=new iw,r._scrollBar=void 0,r._model=void 0,r._dopesheetWidth=0,r._horizontalScroller=void 0,r._stageHeight=0,r._stageWidth=0,r.initDopeSheetItem=function(e){e.model=r._model},r._isSheetItemMouseMove=!0,r._onSheetItemMouseMoveThis=r.onSheetItemMouseMove.bind(g(r)),r._model=e,r._onLabelMouseWheel=r.onLabelMouseWheel.bind(g(r)),r._onSheetMouseWheel=r.onSheetMouseWheel.bind(g(r)),r._onLabelMouseRightMove=r.onLabelMouseRightMove.bind(g(r)),r._onLabelMouseMove=r.onLabelMouseMove.bind(g(r)),r._onLabelMouseUp=r.onLabelMouseUp.bind(g(r)),r._labelTicker=new Nb,r.stage.interactive=!0,r.initDope(),r.initController(),r}return f(n,[{key:"model",get:function(){return this._model},set:function(e){this._model=e,this.label.model=e}},{key:"drawFrameBlocking",set:function(e){this.frameBlock&&(this.frameBlock.interactiveChildren=!e)}},{key:"resizeStage",value:function(e,t){var n=this.model.state.config.timeline,r=n.LABEL_HEIGHT,i=n.LABEL_LEFT_WIDTH,o=n.ITEM_HEIGHT,a=0;if(this._stageHeight>0&&(a=t-this._stageHeight),this._stageHeight=t,this._stageWidth=e,this.renderer.resize(e,t),this.label&&this.label.resize(e-i,t),this.sheet){var s=t-r-6-this.BOTTOM_BAR_HEIGHT-20-o;this.sheet.resize(e,s)}this.sheetHead&&this.sheetHead.resize(e,o),this._bottomBar.y=t-this.BOTTOM_BAR_HEIGHT-25,this._scrollBar.y=t-this.BOTTOM_BAR_HEIGHT-25,this._horizontalScroller.y=r+o,this._horizontalScroller.x=e-10,this.updateHorizontalScroller(a),this._dopesheetWidth=e-i,this.refreshBottomBar(e),this.updateScrollBar()}},{key:"updateHorizontalScroller",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._horizontalScroller.resize(10,Math.min(this.sheet.viewHeight,this.sheet.totalHeight)),this._horizontalScroller.max=this.sheet.totalHeight,this._horizontalScroller.cur=this.sheet.viewHeight;var t=this.sheet.scrollPosition;t>0&&e>0&&((t-=e)<0&&(t=0),this.sheet.scrollPosition=t),this._horizontalScroller.pos=t,this._horizontalScroller.visible=this.sheet.totalHeight>this.sheet.viewHeight}},{key:"refreshBottomBar",value:function(e){this._bottomBar.clear(),this._bottomBar.beginFill(10066329,.5),this._bottomBar.drawRect(0,0,e,this.BOTTOM_BAR_HEIGHT),this._bottomBar.endFill(),this._scrollBar.resize(e,this.BOTTOM_BAR_HEIGHT)}},{key:"getTimelineByY",value:function(e){if(e<0)return null;var t,n,r=this.model.state.config.timeline.ITEM_HEIGHT;if(e<r)return null===(t=this.sheetHead.data)||void 0===t||null===(n=t.item)||void 0===n?void 0:n.data;e-=r;for(var i=0,o=this.sheet.items.length;i<o;i++){var a=this.sheet.items[i];if(e>a.y&&e<a.y+a.realHeight)return a.data.item.data}return null}},{key:"getVirtualTimelineIndex",value:function(e){var t=this.model.state.config.timeline.ITEM_HEIGHT,n=this.sheet.scrollPosition,r=e-this.sheet.y+n;return Math.ceil(r/t)}},{key:"updateScale",value:function(){this.label.draw(),this.sheet.reRender(),this.sheetHead.draw()}},{key:"updateOffset",value:function(){this.label.draw(),this.sheet.reRender(),this.sheetHead.draw(),this.updateScrollBar()}},{key:"updateTimeline",value:function(e){for(var t=0,n=this.sheet.items.length;t<n;t++){var r,i,o,a,s=this.sheet.items[t];if((null===s||void 0===s||null===(r=s.data)||void 0===r||null===(i=r.item)||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.animation)||void 0===a?void 0:a.id)===e)return void s.draw()}}},{key:"updateFrame",value:function(){this.label.updateFrame(),this.onDopeConfigChangeHead(),this.sheet.reRender(),this.sheetHead.draw(),this.updateScrollBar()}},{key:"refreshFrames",value:function(){this.updateLastFrame(),this.sheet.refreshItems(),this.sheetHead.draw()}},{key:"refreshFrameBlock",value:function(e){this.frameBlock&&(this.frameBlock.data=e)}},{key:"reRenderFrameBlock",value:function(){this.frameBlock&&this.frameBlock.reRender()}},{key:"updateSelectAnimation",value:function(){this.updateData()}},{key:"updateData",value:function(){var e=!1;this.tools.resetCollapse();var t,n=this.model.state.runtime.editing,r=this.model.state.runtime.dragonbones.animationMap,i=n.selectedAnimationId,o=n.selectedBoneIds.concat(),a=n.selectedSlotIds,s=this.model.state.editor.dopesheet.filter;if(a.length>0)for(var l=this.model.getCurArmature(),u=0,c=a.length;u<c;u++){var h=a[u],d=l.slots.map[h];o.indexOf(d.parentId)<0&&o.push(d.parentId)}var f=[],p=0,v=this.model.getCurArmature();if(v){var m;if(v.animations)for(var g=0,y=v.animations.length;g<y;g++){var b=v.animations[g],_=r[b];f.push({id:b,name:_.name}),b===i&&(m=_,p=g)}var x=m?m.id:-1;t={collapse:!1,item:{depth:0,data:{name:v.name,display:v,animation:m,type:O.ARMATURE,animationId:x}},nodes:[]};for(var E=0,w=0,T=v.bones.ids.length;w<T;w++){var S=v.bones.ids[w],C=v.bones.map[S];if((!(s&&o.length>0)||o.includes(S))&&C){var A=void 0;m&&m.bones&&(A=m.bones[S]);var I=void 0;if(A){var P=gp.getTimelinesFromSubAnimation(A);I={collapse:e,item:{depth:1,data:{name:C.name,display:C,animation:P,type:O.BONE,animationId:x}},nodes:[]};var M=gp.getSubAnimationDuration(A);for(var R in E<M[1]&&(E=M[1]),A.timelineMap){var N=A.timelineMap[R];if(N){var D={item:{depth:2,data:{name:N.type,animation:N,type:O.TIMELINE,animationId:x}}};I.nodes.push(D)}}}I||(I={collapse:e,item:{depth:1,data:{name:C.name,display:C,animation:[],type:O.BONE,animationId:x}},nodes:[]});for(var L=PT.findBoneSlots(v,S),F=0,B=L.length;F<B;F++){var U=L[F],H=U.id,j=void 0;m&&m.slots&&(j=m.slots[H]);var z={collapse:e,item:{depth:2,data:{name:U.name,display:U,animation:[],type:O.SLOT,animationId:x}},nodes:[]};if(j){var V=gp.getTimelinesFromSubAnimation(j);I.item.data.animation=I.item.data.animation.concat(V),z.item.data.animation=V,I.nodes.push(z);var G=j;if(G){var W=gp.getSubAnimationDuration(G);for(var X in E<W[1]&&(E=W[1]),G.timelineMap){var Y=G.timelineMap[X];if(Y){var K={item:{depth:3,data:{name:Y.type,animation:Y,type:O.TIMELINE,animationId:x}}};z.nodes.push(K)}}}}else s&&a.includes(H)&&I.nodes.push(z);var q=PT.getSlotCurDisplay(U);if(q&&q.mesh&&m&&m.ffds&&m.ffds[q.id]){var Z=m.ffds[q.id],$=gp.getTimelineByType(Z,k.FFD);I.item.data.animation.push($);var Q={collapse:e,item:{depth:2,data:{name:q.name,display:q,animation:$,type:O.TIMELINE,animationId:x}}};I.nodes.push(Q)}}I&&t.nodes.push(I)}}if(m){if(m.iks)for(var J in m.iks){var ee=m.iks[J],te=v.constraint.ik[J];if(ee){if(s&&o.length>0&&!(o.includes(te.parentId)||o.includes(te.childId)||o.includes(te.targetId)))continue;var ne=gp.getTimelineByType(ee,k.IK),re={collapse:e,item:{depth:1,data:{name:te.name,display:te,animation:ne,type:O.TIMELINE,animationId:x}}};t.nodes.push(re)}}if(m.zOrder){var ie=m.zOrder,oe=gp.getTimelineByType(ie,k.Z_ORDER),ae={item:{depth:1,data:{name:oe.type,animation:oe,type:O.TIMELINE,animationId:x}}};t.nodes.push(ae)}if(!s||0===o.length&&0===a.length){var se=null;if(m.event){var le=m.event;se=gp.getTimelineByType(le,k.EVENT)}var ue={item:{depth:1,data:{name:k.EVENT,animation:se,type:O.TIMELINE,animationId:x}}};t.nodes.push(ue)}}this.label.refreshLastFrame()}0===f.length&&(f.push({name:"\u8bf7\u5148\u6dfb\u52a0\u4e00\u4e2a\u52a8\u753b",id:-1}),p=0),this.sheet.data=t,this.sheetHead.data=t,this.sheetHead.animationList.data=f,this.sheetHead.animationList.index=p,this.updateScrollBar(),this.sheet.scrollPosition=0,this.updateHorizontalScroller(0)}},{key:"updateLastFrame",value:function(){this.model.getCurArmature()&&this.label.refreshLastFrame()}},{key:"updateScrollBar",value:function(){var e=this.model.getLengthPerFrame(),t=(this.model.curFrame+3)*e,n=this.model.state.editor.dopesheet.offset,r=this._dopesheetWidth+n,i=Math.max(t,1,r);this._scrollBar.max=i,this._scrollBar.cur=this._dopesheetWidth,this._scrollBar.pos=n}},{key:"addToContainer",value:function(e){e&&(this._parentHtml=e,e.appendChild(this.view))}},{key:"globalToLabelLocalPos",value:function(e,t){var n=this.model.state.config.timeline.LABEL_LEFT_WIDTH,r=this.getDopesheetGlobalPos();return{x:e-r.x-n,y:t-r.y}}},{key:"getDopesheetGlobalPos",value:function(){return this._parentHtml?function(e){for(var t=e,n={x:t.offsetLeft,y:t.offsetTop},r=t.offsetParent;r;)n.x+=r.offsetLeft,n.y+=r.offsetTop,r=r.offsetParent;return n}(this._parentHtml):{x:0,y:0}}},{key:"getCoverTracks",value:function(e){var t=[];if(this.sheet&&this.sheet.listData)for(var n=this.sheet.listData,r=Math.min(e.start.y,e.end.y),i=Math.max(e.start.y,e.end.y),o=r;o<=i;o++){var a=void 0;if(0===o)a=this.getTreeNodeCoverTracks(this.sheetHead.data,e);else{var s=n[o-1];a=this.getTreeNodeCoverTracks(s,e)}a&&a.length&&(t=t.concat(a))}return t}},{key:"getTreeNodeCoverTracks",value:function(e,t){var n=[];if(e&&t){var r=e.item.data;if(r){var i=Math.min(t.start.x,t.end.x),o=Math.max(t.start.x,t.end.x),a=[];if(r.type===O.ARMATURE){var s=r.animation;a=gp.getAnimationFramesFromTo(s,i,o)}else if(r.type===O.BONE||r.type===O.SLOT){var l=r.animation;a=gp.getTimelinesFramesFromTo(l,i,o)}else if(r.type===O.TIMELINE){var u=r.animation;u&&(a=gp.getFramesFromTo(u,i,o))}n=n.concat(a)}}return n}},{key:"initDope",value:function(){var e=this.model.state.config.timeline,t=e.LABEL_HEIGHT,n=e.LABEL_LEFT_WIDTH,r=e.ITEM_HEIGHT;this.label=new gG(this._model),this.label.x=n,this.stage.addChild(this.label),this.label.interactive=!0,this.label.interactiveChildren=!0,this.label.on("mouseover",this.onLabelMouseOver,this),this.label.on("mouseout",this.onLabelMouseOut,this),this.label.on("rightdown",this.onLabelMouseRightDown,this),this.label.on("rightup",this.onLabelMouseRightUp,this),this.label.on("rightupoutside",this.onLabelMouseRightUp,this),this.label.on("mousedown",this.onLabelMouseDown,this),this.label.on("mouseup",this.onLabelMouseUp,this),this.label.on("upoutside",this.onLabelMouseUp,this),this.label.on(NC.UPDATE_LABEL_OFFSET,this.reRenderFrameBlock,this),this.sheetList=new c_,this.sheetList.y=t,this.sheetList.interactive=!0,this.stage.addChild(this.sheetList),this.sheetHead=new XG,this.sheetHead.model=this.model,this.sheetHead.index=1,this.sheetHead.y=0,this.sheetList.addChild(this.sheetHead),this.sheet=new SG(null,WG,!1),this.sheet.selectable=!0,this.sheet.initItemCallback=this.initDopeSheetItem,this.sheet.y=r,this.sheetList.addChild(this.sheet),this.sheet.on("mouseover",this.onSheetMouseOver,this),this.sheet.on("mouseout",this.onSheetMouseOut,this),this.sheet.on(xG.ListScroll,this.onSheetScroll,this),this.sheet.on(xG.MouseDown,this.onSheetItemMouseDown,this),this.sheet.on(xG.MouseUp,this.onSheetItemMouseUp,this),this.sheet.on(xG.Select,this.onSheetItemSelect,this),this.frameBlock=new $G,this.stage.addChild(this.frameBlock),this.tools=new qG,this.tools.model=this._model,this.stage.addChild(this.tools),this.stage.addChild(this._bottomBar),this._scrollBar=new JG({vertical:!1,height:this.BOTTOM_BAR_HEIGHT,width:10,bgColor:10066329,barColor:6710886}),this._scrollBar.max=100,this._scrollBar.cur=10,this._scrollBar.pos=2,this.stage.addChild(this._scrollBar),this._scrollBar.start(),this._horizontalScroller=new JG({vertical:!0,height:100,width:10,bgColor:10066329,barColor:6710886}),this._horizontalScroller.max=100,this._horizontalScroller.cur=10,this._horizontalScroller.pos=2,this.stage.addChild(this._horizontalScroller),this._horizontalScroller.start()}},{key:"initController",value:function(){this.frameSelectController=eW.getInstance(eW),this.frameSelectController.initialize(this.model,this),this.frameSelectController.enable=!0,this.frameBlockSelectController=nW.getInstance(nW),this.frameBlockSelectController.initialize(this.model,this),this.frameBlockSelectController.enable=!0,this._scrollBar.on(xG.Scroll,this.onSheetLabelScroll,this),this._horizontalScroller.on(xG.Scroll,this.onSheetHorizontalScroll,this),this.sheetHead.on(XG.EVENT_SELECT_ANIMATION,this.onSelectAnimation,this),this.sheetHead.on(XG.EVENT_ADD_ANIMATION,this.onAddAnimation,this),this.sheetHead.on(XG.EVENT_REMOVE_ANIMATION,this.onRemoveAnimation,this),this.tools.on(NC.EVENT_COLLAPSE,this.onCollapseTree,this),this.sheet.on(SG.EVENT_COLLAPSE,this.onSheetCollapse,this)}},{key:"onAddAnimation",value:function(){var e=this.model.getCurArmature();this.model.dispatch(P.ADD_ANIMATION_INTERACTIVE,e.id)}},{key:"onCollapseTree",value:function(e){this.sheet.collapseAll(e),this.updateHorizontalScroller()}},{key:"onSheetCollapse",value:function(){this.updateHorizontalScroller()}},{key:"onRemoveAnimation",value:function(e){var t=this.model.getCurArmature(),n=t.id,r=this.model.state.runtime.editing.selectedAnimationId;if(e!==r){var i={animationId:e,armatureId:n};this.model.dispatch(P.REMOVE_ANIMATION_INTERACTIVE,i)}else{for(var o=-1,a=0,s=t.animations.length;a<s;a++){var l=t.animations[a];if(l!==r){o=l;break}}var u={animationId:e,armatureId:n,nextAnimationId:o};this.model.dispatch(P.REMOVE_ANIMATION_INTERACTIVE,u)}}},{key:"onSelectAnimation",value:function(e){e!==this.model.state.runtime.editing.selectedAnimationId&&this.model.commit(M.SELECT_ANIMATION,{animationId:e})}},{key:"onSheetLabelScroll",value:function(e){this.moveToOffset(e)}},{key:"onSheetHorizontalScroll",value:function(e){this.sheet.scrollPosition=e,this._horizontalScroller.pos=e}},{key:"onDopeConfigChange",value:function(){this.sheet&&this.sheet.reRender()}},{key:"onDopeConfigChangeHead",value:function(){this.sheet&&this.sheet.reRender()}},{key:"gotoFrame",value:function(e){e!==this.model.curFrame&&this.model.commit(Q.UPDATE_FRAME,e)}},{key:"moveToOffset",value:function(e){this.model.commit(Q.UPDATE_OFFSET,e)}},{key:"gotoFrameByStageX",value:function(e){var t=e-this.model.state.config.timeline.LABEL_LEFT_WIDTH,n=this.label.getFrameFromX(t);this.gotoFrame(n)}},{key:"onLabelMouseDown",value:function(e){var t=this.model.state.config.timeline.LABEL_LEFT_WIDTH;this._justLabelDown=!0,this._downLabelX=e.data.global.x-t,this.gotoFrameByStageX(e.data.global.x),document.addEventListener("mousemove",this._onLabelMouseMove),document.addEventListener("mouseup",this._onLabelMouseUp),e.stopPropagation(),$2.instance&&$2.instance.eventBus&&$2.instance.eventBus.dispatchEventWidth("dopesheetMouseDown",{})}},{key:"onLabelMouseUp",value:function(e){this._justLabelDown&&(this._justLabelDown=!1),this.stopLabelTicker(),document.removeEventListener("mousemove",this._onLabelMouseMove),$2.instance&&$2.instance.eventBus&&$2.instance.eventBus.dispatchEventWidth("dopesheetMouseUp",{})}},{key:"onLabelMouseMove",value:function(e){if(this._justLabelDown)this._downGlobalX=e.clientX,this._justLabelDown=!1;else{var t=this.globalToLabelLocalPos(e.clientX,e.clientY);if(t.x<=10)this.tickLabelLeft();else if(t.x>=this.label.realWidth-10)this.tickLabelRight();else{this.stopLabelTicker();var n=e.clientX-this._downGlobalX,r=this.label.getFrameFromX(this._downLabelX+n);r<0&&(r=0),this.gotoFrame(r)}}}},{key:"tickLabelLeft",value:function(){this._labelTicker.started||(this._labelScrollSpeed=-this.LABEL_SCROLL_SPEED,this._labelTicker.add(this.autoLabelMove,this),this._labelTicker.start())}},{key:"tickLabelRight",value:function(){this._labelTicker.started||(this._labelScrollSpeed=this.LABEL_SCROLL_SPEED,this._labelTicker.add(this.autoLabelMove,this),this._labelTicker.start())}},{key:"stopLabelTicker",value:function(){this._labelTicker.remove(this.autoLabelMove,this),this._labelTicker.stop()}},{key:"autoLabelMove",value:function(){var e=this.label.offsetX;if((e+=this._labelScrollSpeed)<0&&(e=0),this.moveToOffset(e),this._labelScrollSpeed<0){var t=this.label.getViewMinFrame();this.gotoFrame(t)}else{var n=this.label.getViewMaxFrame();this.gotoFrame(n)}}},{key:"onLabelMouseRightDown",value:function(e){this._justLabelRightDown=!0,this._downLabelX=0,this._downLabelOffX=this.label.offsetX,document.addEventListener("mousemove",this._onLabelMouseRightMove)}},{key:"onLabelMouseRightUp",value:function(e){this._justLabelRightDown=!1,document.removeEventListener("mousemove",this._onLabelMouseRightMove)}},{key:"onLabelMouseRightMove",value:function(e){if(this._justLabelRightDown)this._downLabelX=e.clientX,this._justLabelRightDown=!1;else{var t=e.clientX-this._downLabelX,n=this._downLabelOffX-t;n<0&&(n=0),this.moveToOffset(n)}}},{key:"onLabelMouseOut",value:function(e){document.removeEventListener("mousewheel",this._onLabelMouseWheel)}},{key:"onLabelMouseOver",value:function(e){document.addEventListener("mousewheel",this._onLabelMouseWheel)}},{key:"onSheetMouseOut",value:function(e){document.removeEventListener("mousewheel",this._onSheetMouseWheel)}},{key:"onSheetMouseOver",value:function(e){document.addEventListener("mousewheel",this._onSheetMouseWheel)}},{key:"onSheetItemMouseDown",value:function(e){var t=this.model.state.config.timeline.LABEL_LEFT_WIDTH;e.data.global.x-t<0?this._isSheetItemMouseMove=!0:(this._isSheetItemMouseMove=!1,document.addEventListener("mousemove",this._onSheetItemMouseMoveThis))}},{key:"onSheetItemMouseMove",value:function(e){this._isSheetItemMouseMove=!0,document.removeEventListener("mousemove",this._onSheetItemMouseMoveThis)}},{key:"onSheetItemMouseUp",value:function(e){document.removeEventListener("mousemove",this._onSheetItemMouseMoveThis),this._isSheetItemMouseMove||this.gotoFrameByStageX(e.data.global.x),this._isSheetItemMouseMove=!0}},{key:"onSheetItemSelect",value:function(e,t){var n=this.model.state.config.timeline.LABEL_LEFT_WIDTH;if(!(e.data.global.x-n>=0)){var r=this.sheet.data[t],i=null===r||void 0===r?void 0:r.item.data;switch(i.type){case O.ARMATURE:break;case O.BONE:this.model.dispatch(V.SELECT_BONES,[i.display.id]);break;case O.SLOT:this.model.dispatch(F.SELECT_SLOTS,[i.display.id]);break;case O.TIMELINE:if("event"===i.name);else if("zOrder"===i.name);else if(i.animation&&i.animation.type===k.IK){var o=i.display.parentId;this.model.dispatch(V.SELECT_BONES,[o])}else{var a=this.findParentItem(this.sheet.data,t);a&&a.item.data.type===O.BONE?this.model.dispatch(V.SELECT_BONES,[a.item.data.display.id]):a&&a.item.data.type===O.SLOT&&this.model.dispatch(F.SELECT_SLOTS,[a.item.data.display.id])}}}}},{key:"findParentItem",value:function(e,t){for(var n=t-1;n>=0;n--){var r=e[n];if(r.item.data.type===O.BONE||r.item.data.type===O.SLOT)return r}}},{key:"onSheetScroll",value:function(e){var t=e||0;this.frameBlock&&(this.frameBlock.offsetY=t)}},{key:"onLabelMouseWheel",value:function(e){e.wheelDelta>0?this.label.zoomIn():this.label.zoomOut()}},{key:"onSheetMouseWheel",value:function(e){e.wheelDelta>0?this.sheet.scrollPosition-=this.SHEET_SCROLL_SPEED:this.sheet.scrollPosition+=this.SHEET_SCROLL_SPEED,this._horizontalScroller&&(this._horizontalScroller.pos=this.sheet.scrollPosition)}}]),n}(G_),iW=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this))._domInput=void 0,r._selection=[0,0],r._restrictRegex=void 0,r._restrictValue="",r._onInputKeyDownBind=void 0,r._onInputInputBind=void 0,r._onInputKeyUpBind=void 0,r._onFocusedBind=void 0,r._onBlurredBind=void 0,r.parent=void 0,r.parentDom=void 0,r.onCompositionStart=function(e){r.emit(e.type,e)},r.onCompositionEnd=function(e){r.emit(e.type,e)},r._domInput=r.createDom(e),r.visible=!1,document.body.appendChild(r._domInput),r}return f(n,[{key:"domInput",get:function(){return this._domInput}},{key:"visible",get:function(){return"block"===this._domInput.style.display},set:function(e){var t=0,n=-5;if(this.parentDom){var r=this.parentDom.getBoundingClientRect();t+=r.x,n+=r.y}if(this.parent){var i=this.parent.getGlobalPosition();t+=i.x,n+=i.y,this._domInput.style.left=t+"px",this._domInput.style.top=n+"px"}this._domInput.style.display=e?"block":"none"}},{key:"value",get:function(){return this._domInput.value},set:function(e){this._domInput.value=e}},{key:"placeholder",set:function(e){this._domInput.placeholder=e}},{key:"disabled",set:function(e){this._domInput.disabled=e}},{key:"maxlength",get:function(){return this._domInput.maxLength},set:function(e){this._domInput.maxLength=e}},{key:"restrict",get:function(){return this._restrictRegex},set:function(e){if(void 0!==e){if(e instanceof RegExp){var t=e.toString().slice(1,-1);"^"!==t.charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),e=new RegExp(t)}else e=new RegExp("^["+e+"]*$");this._restrictRegex=e}}},{key:"createDom",value:function(e){return e?(this._domInput=document.createElement("textarea"),this._domInput.style.resize="none"):(this._domInput=document.createElement("input"),this._domInput.type="text"),this._domInput.style.position="absolute",this._domInput.style.zIndex="99",this._domInput.style.background="none",this._domInput.style.border="none",this._domInput.style.outline="none",this._domInput.style.padding="0",this.addEvent(),document.body.appendChild(this._domInput),this._domInput}},{key:"setStyle",value:function(e){for(var t in e)this._domInput.style[t]=e[t]}},{key:"setStyleValue",value:function(e,t){this._domInput.style[e]=t}},{key:"select",value:function(){this._domInput.select()}},{key:"getDOMInputBounds",value:function(){var e=this._domInput.style.transform,t=this._domInput.style.display;this._domInput.style.transform="",this._domInput.style.display="block";var n=this._domInput.getBoundingClientRect();return this._domInput.style.transform=e,this._domInput.style.display=t,n}},{key:"updatePostion",value:function(e,t,n,r){this._domInput.style.top=e+"px",this._domInput.style.left=t+"px",this._domInput.style.transform=n,r&&(this._domInput.style.opacity=r.toString())}},{key:"removeDom",value:function(){this._domInput&&document.body.removeChild(this._domInput)}},{key:"release",value:function(){this.removeDom(),this.removeEvent(),this.removeAllListeners(),this._domInput=void 0,this._restrictRegex=void 0}},{key:"addEvent",value:function(){this._onInputKeyDownBind||(this._onInputKeyDownBind=this._onInputKeyDown.bind(this),this._onInputInputBind=this._onInputInput.bind(this),this._onInputKeyUpBind=this._onInputKeyUp.bind(this),this._onFocusedBind=this._onFocused.bind(this),this._onBlurredBind=this._onBlurred.bind(this),this._domInput.addEventListener("keydown",this._onInputKeyDownBind,{passive:!1}),this._domInput.addEventListener("input",this._onInputInputBind,{passive:!1}),this._domInput.addEventListener("keyup",this._onInputKeyUpBind,{passive:!1}),this._domInput.addEventListener("focus",this._onFocusedBind,{passive:!1}),this._domInput.addEventListener("blur",this._onBlurredBind,{passive:!1}),this._domInput.addEventListener("compositionstart",this.onCompositionStart,{passive:!1}),this._domInput.addEventListener("compositionend",this.onCompositionEnd,{passive:!1}))}},{key:"removeEvent",value:function(){this._onInputKeyDownBind&&(this._domInput.removeEventListener("keydown",this._onInputKeyDownBind),this._domInput.removeEventListener("input",this._onInputInputBind),this._domInput.removeEventListener("keyup",this._onInputKeyUpBind),this._domInput.removeEventListener("focus",this._onFocusedBind),this._domInput.removeEventListener("blur",this._onBlurredBind),this._domInput.removeEventListener("compositionstart",this.onCompositionStart),this._domInput.removeEventListener("compositionend",this.onCompositionEnd),this._onInputKeyDownBind=void 0,this._onInputInputBind=void 0,this._onInputKeyUpBind=void 0,this._onFocusedBind=void 0,this._onBlurredBind=void 0)}},{key:"_applyRestriction",value:function(){this._restrictRegex&&(this._restrictRegex.test(this.value)?this._restrictValue=this.value:(this.value=this._restrictValue,this._domInput.setSelectionRange(this._selection[0],this._selection[1])))}},{key:"_onInputKeyDown",value:function(e){this._selection=[this._domInput.selectionStart||0,this._domInput.selectionEnd||0],this.emit(e.type,e)}},{key:"_onInputInput",value:function(e){null!=e.data&&this._restrictRegex&&this._applyRestriction(),this.emit(e.type,e),e.preventDefault()}},{key:"_onInputKeyUp",value:function(e){this.emit(e.type,e),e.preventDefault()}},{key:"_onFocused",value:function(e){this.emit("focus"),e.preventDefault()}},{key:"_onBlurred",value:function(e){this.emit("blur"),e.preventDefault()}},{key:"focus",value:function(){document.body.removeChild(this._domInput),document.body.appendChild(this._domInput),this._domInput.focus()}},{key:"blur",value:function(){this._domInput.blur()}}]),n}(vv);iW.shared=new iW(!1);var oW=function(e){var t=e.isLoop,n=e.isPlay,r=e.onPlay,i=e.onPlayPrev,o=e.onPlayNext,a=e.onLoop,s=e.onStop,l=e.onGotoFirst,u=e.onGotoLast;return(0,ff.jsxs)("span",{className:"dplay-tools",children:[(0,ff.jsx)(eI,{normal:"first",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:l}),(0,ff.jsx)(eI,{normal:"previous2",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:i}),(0,ff.jsx)(eI,{normal:"caretdown-copy",down:"pause1",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:n,onToggle:function(e){e?r():s()}}),(0,ff.jsx)(eI,{normal:"next",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:o}),(0,ff.jsx)(eI,{normal:"last",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:u}),(0,ff.jsx)(eI,{normal:"loop",downColor:"#999999",overColor:"#DDDDDD",toggle:!0,isDown:t,onToggle:function(e){a(e)}})]})},aW=function(e){e.color;return(0,ff.jsxs)("span",{children:[(0,ff.jsx)("span",{style:{width:"1px",height:"16px",display:"inline-block",backgroundColor:"#999999",marginLeft:"10px"}}),(0,ff.jsx)("span",{style:{width:"1px",height:"16px",display:"inline-block",backgroundColor:"#AAAAAA",marginRight:"10px"}})]})},sW=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this,{componentClass:lW,label:"\u6444\u5f71\u8868",icon:"icon-timeline-svgrepo-com",type:gboxLayout.GPanelType.TAB})).toolBarElement=document.createElement("span"),(0,l.createRoot)(e.toolBarElement).render((0,ff.jsx)(uW,{store:e.store,eventBus:e.eventBus})),e}return f(n,[{key:"resize",value:function(e,t){this.store.commit(Q.UPDATE_SIZE,{width:e,height:t})}}],[{key:"toString",value:function(){return"DopesheetPanel"}}]),n}(QT),lW=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).refs={},r.dopesheet=void 0,r.store=void 0,r.store=e.store;e.store.state.editor.dopesheet;return r.state={},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(Q.UPDATE_SIZE,this.updateSize,this),this.props.eventBus.on(Q.UPDATE_OFFSET,this.updateOffset,this),this.props.eventBus.on(Q.UPDATE_SCALE,this.updateScale,this),this.props.eventBus.on(Q.UPDATE_FRAME,this.updateFrame,this),this.props.eventBus.on(Z.OVER_FRAME,this.updateOverFrame,this),this.props.eventBus.on(Q.SELECT_FRAME,this.updateOverFrame,this),this.props.eventBus.on(M.MODIFY_FRAMES,this.updateOverFrame,this),this.props.eventBus.on(M.AUTO_KEY,this.updateFrameData,this),this.props.eventBus.on(M.DELETE_FRAMES,this.updateFrameData,this),this.props.eventBus.on(M.SELECT_ANIMATION,this.updateSelectAnimation,this),this.props.eventBus.on(M.ADD_ANIMATION,this.updateAddAnimation,this),this.props.eventBus.on(M.RENAME_ANIMATION,this.updateSelectAnimation,this),this.props.eventBus.on(M.MODIFY_TIMELINE,this.updateTimeline,this),this.props.eventBus.on(Q.SWITCH_FILTER,this.updateFrameData,this),this.props.eventBus.on(G.SELECT_BONES,this.updateFrameData,this),this.props.eventBus.on(B.SELECT_SLOTS,this.updateFrameData,this),this.props.eventBus.on(D.SELECT_ARMATURE,this.updateSelectAnimation,this)}},{key:"render",value:function(){return(0,ff.jsx)("div",{className:"dopesheet-panel",id:"dopeSheetContainer",ref:"dopeSheetContainer"})}},{key:"componentDidMount",value:function(){var e=this;this.initDopeSheet(this.store),this.refs.dopeSheetContainer&&(Pk.dopeLayer=this.refs.dopeSheetContainer),this.updateSize(),this.refs.dopeSheetContainer&&(this.refs.dopeSheetContainer.addEventListener("mouseenter",(function(){e.props.eventBus.dispatchEventWidth("dopesheetMouseEnter",null)})),this.refs.dopeSheetContainer.addEventListener("mouseleave",(function(){e.props.eventBus.dispatchEventWidth("dopesheetMouseLeave",null)})))}},{key:"updateAddAnimation",value:function(){}},{key:"updateSelectAnimation",value:function(){this.dopesheet.updateSelectAnimation()}},{key:"updateOffset",value:function(){this.dopesheet.updateOffset()}},{key:"updateScale",value:function(){this.dopesheet.updateScale()}},{key:"updateTimeline",value:function(e){if(e.data&&e.data.data)if("undo"===e.data.data.from||"redo"===e.data.data.from)this.dopesheet.updateFrame();else{var t=e.data.data.timelineId;this.dopesheet.updateTimeline(t)}}},{key:"updateFrame",value:function(){this.dopesheet.updateFrame()}},{key:"updateOverFrame",value:function(){this.dopesheet.refreshFrames()}},{key:"updateSize",value:function(){var e=this.store.state.editor.dopesheet,t=e.width,n=e.height;this.dopesheet&&this.dopesheet.resizeStage(t,n)}},{key:"updateFrameData",value:function(){this.dopesheet.updateData()}},{key:"updateSelectChild",value:function(){this.store.state.editor.dopesheet.filter&&this.dopesheet.updateData()}},{key:"initDopeSheet",value:function(e){this.dopesheet=new rW(e),this.dopesheet.addToContainer(this.refs.dopeSheetContainer),this.dopesheet.updateData(),this.refs.dopeSheetContainer&&(iW.shared.parentDom=this.refs.dopeSheetContainer)}}]),n}(a.Component),uW=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).playFrameIndex=0,r.playDuration=0,r.curDelta=0,r.playAnimation=function(e){var t=Math.round(1e3/r.state.fps/r.getRealSpeed());if(r.curDelta+=e,!(r.curDelta<t)){for(;r.curDelta>t;)r.curDelta-=t;r.playFrameIndex+=1,r.updateTime(),r.playFrameIndex<r.playDuration?r.props.store.commit(Q.UPDATE_FRAME,r.playFrameIndex):(r.playFrameIndex=0,r.props.store.commit(Q.UPDATE_FRAME,r.playFrameIndex),r.state.loop||r.stop())}},r.onChangeSpeed=function(e){var t=parseInt(e.target.value);r.setState({speed:t})},r.onFPSChange=function(e){var t=e.target.value,n=parseInt(t);t>60?n=60:t<1&&(n=1),r.setState({fps:n}),r.props.store.commit(Q.UPDATE_FPS,n),YG.next(r.updateTime.bind(g(r)))},r.state={loop:!1,isPlay:!1,speed:3,curTime:"0",fps:30},r}return f(n,[{key:"componentDidMount",value:function(){this.props.eventBus.on(Q.UPDATE_FRAME,this.syncTime,this),this.props.eventBus.on(M.SELECT_ANIMATION,this.updateAnimation,this),this.syncTime()}},{key:"syncTime",value:function(){var e=this.props.store.state.editor.dopesheet.curTime;this.playFrameIndex=e,this.updateTime()}},{key:"updateAnimation",value:function(){if(this.state.isPlay){var e=this.props.store.getAnimationDuration()[1];this.playDuration=e}}},{key:"updateTime",value:function(){var e=(this.playFrameIndex/this.state.fps).toFixed(2)+"\u79d2";this.setState({curTime:e})}},{key:"play",value:function(){this.curDelta=0;var e=this.props.store.getAnimationDuration()[1];this.playDuration=e;var t=this.props.store.state.editor.dopesheet.curTime;this.playFrameIndex=t,YG.setEnterFrame(this.playAnimation),this.setState({isPlay:!0})}},{key:"stop",value:function(){YG.stopEnterFrame(this.playAnimation),this.playFrameIndex=Math.round(this.playFrameIndex),this.props.store.commit(Q.UPDATE_FRAME,this.playFrameIndex),this.setState({isPlay:!1}),this.updateTime()}},{key:"getRealSpeed",value:function(){switch(this.state.speed){case 0:return.1;case 1:return.2;case 2:return.5;case 3:return 1;case 4:return 2;case 5:return 5;case 6:return 10}}},{key:"render",value:function(){var e=this;return(0,ff.jsxs)("span",{className:"dopesheet-toolbar",children:[(0,ff.jsx)(oW,{isLoop:this.state.loop,isPlay:this.state.isPlay,onPlay:function(){e.play()},onStop:function(){e.stop()},onPlayPrev:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime;t>0&&e.props.store.commit(Q.UPDATE_FRAME,t-1)}},onPlayNext:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime;t<e.props.store.getAnimationDuration()[1]&&e.props.store.commit(Q.UPDATE_FRAME,t+1)}},onLoop:function(t){e.setState({loop:t})},onGotoFirst:function(){e.props.store&&(0!==e.props.store.rootState.editor.dopesheet.curTime&&e.props.store.commit(Q.UPDATE_FRAME,0))},onGotoLast:function(){if(e.props.store){var t=e.props.store.rootState.editor.dopesheet.curTime,n=e.props.store.getAnimationDuration()[1];t!==n&&e.props.store.commit(Q.UPDATE_FRAME,n)}}}),(0,ff.jsx)(aW,{}),(0,ff.jsx)("span",{children:" \u901f\u5ea6\uff1a"}),(0,ff.jsx)("span",{children:(0,ff.jsx)("input",{type:"range",min:"0",max:"6",step:"1",value:this.state.speed,onChange:this.onChangeSpeed})}),(0,ff.jsxs)("span",{style:{width:"20px",display:"inline-block"},children:["x",this.getRealSpeed()]}),(0,ff.jsx)(aW,{}),(0,ff.jsx)("span",{children:"\u65f6\u95f4\uff1a"}),(0,ff.jsx)("span",{style:{width:"70px",display:"inline-block"},children:this.state.curTime}),(0,ff.jsx)("span",{children:"\u5e27\u7387\uff1a"}),(0,ff.jsx)("span",{children:(0,ff.jsx)("input",{type:"text",onChange:this.onFPSChange,value:this.state.fps,style:{width:"20px"}})})]})}}]),n}(a.Component),cW=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.forceRender,o=e.className,s=e.style,l=e.children,u=e.isActive,c=e.role,h=Pt(a.useState(u||i),2),d=h[0],f=h[1];return a.useEffect((function(){(i||u)&&f(!0)}),[i,u]),d?a.createElement("div",{ref:t,className:Ko()("".concat(r,"-content"),(n={},b(n,"".concat(r,"-content-active"),u),b(n,"".concat(r,"-content-inactive"),!u),n),o),style:s,role:c},a.createElement("div",{className:"".concat(r,"-content-box")},l)):null}));cW.displayName="PanelContent";var hW=cW,dW=["showArrow","headerClass","isActive","onItemClick","forceRender","className","prefixCls","collapsible","accordion","panelKey","extra","header","expandIcon","openMotion","destroyInactivePanel","children"],fW=a.forwardRef((function(e,t){var n,r,i=e.showArrow,o=void 0===i||i,s=e.headerClass,l=e.isActive,u=e.onItemClick,c=e.forceRender,h=e.className,d=e.prefixCls,f=e.collapsible,p=e.accordion,v=e.panelKey,m=e.extra,g=e.header,y=e.expandIcon,_=e.openMotion,x=e.destroyInactivePanel,E=e.children,w=Yn(e,dW),T="disabled"===f,S="header"===f,k="icon"===f,C=null!==m&&void 0!==m&&"boolean"!==typeof m,A=function(){null===u||void 0===u||u(v)},I="function"===typeof y?y(e):a.createElement("i",{className:"arrow"});I&&(I=a.createElement("div",{className:"".concat(d,"-expand-icon"),onClick:["header","icon"].includes(f)?A:void 0},I));var O=Ko()((b(n={},"".concat(d,"-item"),!0),b(n,"".concat(d,"-item-active"),l),b(n,"".concat(d,"-item-disabled"),T),n),h),P={className:Ko()((b(r={},"".concat(d,"-header"),!0),b(r,"headerClass",s),b(r,"".concat(d,"-header-collapsible-only"),S),b(r,"".concat(d,"-icon-collapsible-only"),k),r)),"aria-expanded":l,"aria-disabled":T,onKeyPress:function(e){"Enter"!==e.key&&e.keyCode!==Du.ENTER&&e.which!==Du.ENTER||A()}};return S||k||(P.onClick=A,P.role=p?"tab":"button",P.tabIndex=T?-1:0),a.createElement("div",Ut({},w,{ref:t,className:O}),a.createElement("div",P,o&&I,a.createElement("span",{className:"".concat(d,"-header-text"),onClick:"header"===f?A:void 0},g),C&&a.createElement("div",{className:"".concat(d,"-extra")},m)),a.createElement(ts,Ut({visible:l,leavedClassName:"".concat(d,"-content-hidden")},_,{forceRender:c,removeOnLeave:x}),(function(e,t){var n=e.className,r=e.style;return a.createElement(hW,{ref:t,prefixCls:d,className:n,style:r,isActive:l,forceRender:c,role:p?"tabpanel":void 0},E)})))})),pW=fW;function vW(e){var t=e;if(!Array.isArray(t)){var n=c(t);t="number"===n||"string"===n?[t]:[]}return t.map((function(e){return String(e)}))}var mW=a.forwardRef((function(e,t){var n=e.prefixCls,r=void 0===n?"rc-collapse":n,i=e.destroyInactivePanel,o=void 0!==i&&i,s=e.style,l=e.accordion,u=e.className,c=e.children,h=e.collapsible,d=e.openMotion,f=e.expandIcon,p=e.activeKey,v=e.defaultActiveKey,m=e.onChange,g=Ko()(r,u),y=yh([],{value:p,onChange:function(e){return null===m||void 0===m?void 0:m(e)},defaultValue:v,postState:vW}),b=Pt(y,2),_=b[0],x=b[1],E=qn(c).map((function(e,t){if(!e)return null;var n=e.key||String(t),i=e.props,s=i.header,u=i.headerClass,c=i.destroyInactivePanel,p=i.collapsible,v=i.onItemClick,m=!1;m=l?_[0]===n:_.indexOf(n)>-1;var g=null!==p&&void 0!==p?p:h,y={key:n,panelKey:n,header:s,headerClass:u,isActive:m,prefixCls:r,destroyInactivePanel:null!==c&&void 0!==c?c:o,openMotion:d,accordion:l,children:e.props.children,onItemClick:function(e){"disabled"!==g&&(!function(e){x((function(){return l?_[0]===e?[]:[e]:_.indexOf(e)>-1?_.filter((function(t){return t!==e})):[].concat(Pe(_),[e])}))}(e),null===v||void 0===v||v(e))},expandIcon:f,collapsible:g};return"string"===typeof e.type?e:(Object.keys(y).forEach((function(e){"undefined"===typeof y[e]&&delete y[e]})),a.cloneElement(e,y))}));return a.createElement("div",{ref:t,className:g,style:s,role:l?"tablist":void 0},E)})),gW=Object.assign(mW,{Panel:pW}),yW=gW,bW=(gW.Panel,a.forwardRef((function(e,t){var n=a.useContext(Lo).getPrefixCls,r=e.prefixCls,i=e.className,o=void 0===i?"":i,s=e.showArrow,l=void 0===s||s,u=n("collapse",r),c=Ko()(b({},"".concat(u,"-no-arrow"),!l),o);return a.createElement(yW.Panel,Object.assign({ref:t},e,{prefixCls:u,className:c}))}))),_W=function(e){var t,n,r,i,o,a,s=e.componentCls,l=e.collapseContentBg,u=e.padding,c=e.collapseContentPaddingHorizontal,h=e.collapseHeaderBg,d=e.collapseHeaderPadding,f=e.collapseHeaderPaddingSM,p=e.collapseHeaderPaddingLG,v=e.collapsePanelBorderRadius,m=e.lineWidth,g=e.lineType,y=e.colorBorder,_=e.colorText,x=e.colorTextHeading,E=e.colorTextDisabled,w=e.fontSize,T=e.fontSizeLG,S=e.lineHeight,k=e.marginSM,C=e.paddingSM,A=e.paddingLG,I=e.motionDurationSlow,O=e.fontSizeIcon,P="".concat(m,"px ").concat(g," ").concat(y);return b({},s,Object.assign(Object.assign({},as(e)),(b(a={backgroundColor:h,border:P,borderBottom:0,borderRadius:"".concat(v,"px")},"&-rtl",{direction:"rtl"}),b(a,"& > ".concat(s,"-item"),(b(n={borderBottom:P},"&:last-child",b({},"\n            &,\n            & > ".concat(s,"-header"),{borderRadius:"0 0 ".concat(v,"px ").concat(v,"px")})),b(n,"> ".concat(s,"-header"),(b(t={position:"relative",display:"flex",flexWrap:"nowrap",alignItems:"flex-start",padding:d,color:x,lineHeight:S,cursor:"pointer",transition:"all ".concat(I,", visibility 0s")},"> ".concat(s,"-header-text"),{flex:"auto"}),b(t,"&:focus",{outline:"none"}),b(t,"".concat(s,"-expand-icon"),{height:w*S,display:"flex",alignItems:"center",paddingInlineEnd:k}),b(t,"".concat(s,"-arrow"),Object.assign(Object.assign({},{display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),{fontSize:O,svg:{transition:"transform ".concat(I)}})),b(t,"".concat(s,"-header-text"),{marginInlineEnd:"auto"}),t)),b(n,"".concat(s,"-header-collapsible-only"),b({cursor:"default"},"".concat(s,"-header-text"),{flex:"none",cursor:"pointer"})),b(n,"".concat(s,"-icon-collapsible-only"),b({cursor:"default"},"".concat(s,"-expand-icon"),{cursor:"pointer"})),b(n,"&".concat(s,"-no-arrow"),b({},"> ".concat(s,"-header"),{paddingInlineStart:C})),n)),b(a,"".concat(s,"-content"),(b(r={color:_,backgroundColor:l,borderTop:P},"& > ".concat(s,"-content-box"),{padding:"".concat(u,"px ").concat(c,"px")}),b(r,"&-hidden",{display:"none"}),r)),b(a,"&-small",b({},"> ".concat(s,"-item"),(b(i={},"> ".concat(s,"-header"),{padding:f}),b(i,"> ".concat(s,"-content > ").concat(s,"-content-box"),{padding:C}),i))),b(a,"&-large",b({},"> ".concat(s,"-item"),(b(o={fontSize:T},"> ".concat(s,"-header"),b({padding:p},"> ".concat(s,"-expand-icon"),{height:T*S})),b(o,"> ".concat(s,"-content > ").concat(s,"-content-box"),{padding:A}),o))),b(a,"".concat(s,"-item:last-child"),b({},"> ".concat(s,"-content"),{borderRadius:"0 0 ".concat(v,"px ").concat(v,"px")})),b(a,"& ".concat(s,"-item-disabled > ").concat(s,"-header"),b({},"\n          &,\n          & > .arrow\n        ",{color:E,cursor:"not-allowed"})),b(a,"&".concat(s,"-icon-position-end"),b({},"& > ".concat(s,"-item"),b({},"> ".concat(s,"-header"),b({},"".concat(s,"-expand-icon"),{order:1,paddingInlineEnd:0,paddingInlineStart:k})))),a)))},xW=function(e){var t=e.componentCls,n="> ".concat(t,"-item > ").concat(t,"-header ").concat(t,"-arrow svg");return b({},"".concat(t,"-rtl"),b({},n,{transform:"rotate(180deg)"}))},EW=function(e){var t,n=e.componentCls,r=e.collapseHeaderBg,i=e.paddingXXS,o=e.colorBorder;return b({},"".concat(n,"-borderless"),(b(t={backgroundColor:r,border:0},"> ".concat(n,"-item"),{borderBottom:"1px solid ".concat(o)}),b(t,"\n        > ".concat(n,"-item:last-child,\n        > ").concat(n,"-item:last-child ").concat(n,"-header\n      "),{borderRadius:0}),b(t,"> ".concat(n,"-item:last-child"),{borderBottom:0}),b(t,"> ".concat(n,"-item > ").concat(n,"-content"),{backgroundColor:"transparent",borderTop:0}),b(t,"> ".concat(n,"-item > ").concat(n,"-content > ").concat(n,"-content-box"),{paddingTop:i}),t))},wW=function(e){var t=e.componentCls,n=e.paddingSM;return b({},"".concat(t,"-ghost"),b({backgroundColor:"transparent",border:0},"> ".concat(t,"-item"),b({borderBottom:0},"> ".concat(t,"-content"),b({backgroundColor:"transparent",border:0},"> ".concat(t,"-content-box"),{paddingBlock:n}))))},TW=ol("Collapse",(function(e){var t=nl(e,{collapseContentBg:e.colorBgContainer,collapseHeaderBg:e.colorFillAlter,collapseHeaderPadding:"".concat(e.paddingSM,"px ").concat(e.padding,"px"),collapseHeaderPaddingSM:"".concat(e.paddingXS,"px ").concat(e.paddingSM,"px"),collapseHeaderPaddingLG:"".concat(e.padding,"px ").concat(e.paddingLG,"px"),collapsePanelBorderRadius:e.borderRadiusLG,collapseContentPaddingHorizontal:16});return[_W(t),EW(t),wW(t),xW(t),OM(t)]})),SW=a.forwardRef((function(e,t){var n,r=a.useContext(Lo),i=r.getPrefixCls,o=r.direction,s=e.prefixCls,l=e.className,u=e.rootClassName,c=e.bordered,h=void 0===c||c,d=e.ghost,f=e.size,p=e.expandIconPosition,v=void 0===p?"start":p,m=e.children,g=e.expandIcon,y=zo((function(e){var t;return null!==(t=null!==f&&void 0!==f?f:e)&&void 0!==t?t:"middle"})),_=i("collapse",s),x=i(),E=Pt(TW(_),2),w=E[0],T=E[1],S=a.useMemo((function(){return"left"===v?"start":"right"===v?"end":v}),[v]),k=Ko()("".concat(_,"-icon-position-").concat(S),(b(n={},"".concat(_,"-borderless"),!h),b(n,"".concat(_,"-rtl"),"rtl"===o),b(n,"".concat(_,"-ghost"),!!d),b(n,"".concat(_,"-").concat(y),"middle"!==y),n),l,u,T),C=Object.assign(Object.assign({},yu(x)),{motionAppear:!1,leavedClassName:"".concat(_,"-content-hidden")}),A=a.useMemo((function(){return qn(m).map((function(e,t){var n,r;if(null===(n=e.props)||void 0===n?void 0:n.disabled){var i=null!==(r=e.key)&&void 0!==r?r:String(t),o=e.props,a=o.disabled,s=o.collapsible;return Js(e,Object.assign(Object.assign({},qs(e.props,["disabled"])),{key:i,collapsible:null!==s&&void 0!==s?s:a?"disabled":void 0}))}return e}))}),[m]);return w(a.createElement(yW,Object.assign({ref:t,openMotion:C},qs(e,["rootClassName"]),{expandIcon:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=g?g(e):a.createElement(mR,{rotate:e.isActive?90:void 0});return Js(t,(function(){return{className:Ko()(t.props.className,"".concat(_,"-arrow"))}}))},prefixCls:_,className:k}),A))}));var kW=Object.assign(SW,{Panel:bW}),CW=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).onAdd=function(){var e=be(r.state.value);e||(e=[]);var t=r.props.componentProp.defaultValue;e.push(t),r.props.componentProp.onChange&&r.props.componentProp.onChange(e)},r.onDel=function(e){var t=e.target.value,n=be(r.state.value);n&&n.length>t&&(n.splice(t,1),r.props.componentProp.onChange&&r.props.componentProp.onChange(n))};var i=e.componentProp.value;return void 0===i&&(i=[]),r.state={value:i},r}return f(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.componentProp.value;void 0===t&&(t=[]),this.state.value!==t&&this.setState({value:t})}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this,t=this.state.value;return t||(t=[]),(0,ff.jsxs)("div",{className:"array-input",children:[t.map((function(t,n){return e.renderArrayOne(t,n)})),(0,ff.jsx)("button",{onClick:this.onAdd,children:"add"})]})}},{key:"renderArrayOne",value:function(e,t){var n=Re({},this.props.componentProp);n.value=e,n.onChange=this.getValueChangeFunction(t),n.context=this;var r={property:this.props.property,type:this.props.type,componentType:this.props.componentType,componentProp:n};return(0,ff.jsxs)("div",{className:"array-input-item",children:[(0,ff.jsx)(a1,Re({},r)),(0,ff.jsx)("button",{onClick:this.onDel,value:t,children:"del"})]},t)}},{key:"getValueChangeFunction",value:function(e){var t=this;return function(n){var r=e,i=be(t.state.value);i&&i.length>r&&(i[r]=n,t.props.componentProp.onChange&&t.props.componentProp.onChange(i))}}}]),n}(a.Component),AW=["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"],IW=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=void 0===r?"rc-switch":r,o=e.className,s=e.checked,l=e.defaultChecked,u=e.disabled,c=e.loadingIcon,h=e.checkedChildren,d=e.unCheckedChildren,f=e.onClick,p=e.onChange,v=e.onKeyDown,m=Yn(e,AW),g=Pt(yh(!1,{value:s,defaultValue:l}),2),y=g[0],_=g[1];function x(e,t){var n=y;return u||(_(n=e),null===p||void 0===p||p(n,t)),n}var E=Ko()(i,o,(b(n={},"".concat(i,"-checked"),y),b(n,"".concat(i,"-disabled"),u),n));return a.createElement("button",Ut({},m,{type:"button",role:"switch","aria-checked":y,disabled:u,className:E,ref:t,onKeyDown:function(e){e.which===Du.LEFT?x(!1,e):e.which===Du.RIGHT&&x(!0,e),null===v||void 0===v||v(e)},onClick:function(e){var t=x(!y,e);null===f||void 0===f||f(t,e)}}),c,a.createElement("span",{className:"".concat(i,"-inner")},a.createElement("span",{className:"".concat(i,"-inner-checked")},h),a.createElement("span",{className:"".concat(i,"-inner-unchecked")},d)))}));IW.displayName="Switch";var OW=IW,PW=function(e){var t,n,r,i,o,a=e.componentCls,s="".concat(a,"-inner");return b({},a,b({},"&".concat(a,"-small"),(b(o={minWidth:e.switchMinWidthSM,height:e.switchHeightSM,lineHeight:"".concat(e.switchHeightSM,"px")},"".concat(a,"-inner"),(b(t={paddingInlineStart:e.switchInnerMarginMaxSM,paddingInlineEnd:e.switchInnerMarginMinSM},"".concat(s,"-checked"),{marginInlineStart:"calc(-100% + ".concat(e.switchPinSizeSM+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMaxSM,"px)"),marginInlineEnd:"calc(100% - ".concat(e.switchPinSizeSM+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMaxSM,"px)")}),b(t,"".concat(s,"-unchecked"),{marginTop:-e.switchHeightSM,marginInlineStart:0,marginInlineEnd:0}),t)),b(o,"".concat(a,"-handle"),{width:e.switchPinSizeSM,height:e.switchPinSizeSM}),b(o,"".concat(a,"-loading-icon"),{top:(e.switchPinSizeSM-e.switchLoadingIconSize)/2,fontSize:e.switchLoadingIconSize}),b(o,"&".concat(a,"-checked"),(b(r={},"".concat(a,"-inner"),(b(n={paddingInlineStart:e.switchInnerMarginMinSM,paddingInlineEnd:e.switchInnerMarginMaxSM},"".concat(s,"-checked"),{marginInlineStart:0,marginInlineEnd:0}),b(n,"".concat(s,"-unchecked"),{marginInlineStart:"calc(100% - ".concat(e.switchPinSizeSM+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMaxSM,"px)"),marginInlineEnd:"calc(-100% + ".concat(e.switchPinSizeSM+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMaxSM,"px)")}),n)),b(r,"".concat(a,"-handle"),{insetInlineStart:"calc(100% - ".concat(e.switchPinSizeSM+e.switchPadding,"px)")}),r)),b(o,"&:not(".concat(a,"-disabled):active"),(b(i={},"&:not(".concat(a,"-checked) ").concat(s),b({},"".concat(s,"-unchecked"),{marginInlineStart:e.marginXXS/2,marginInlineEnd:-e.marginXXS/2})),b(i,"&".concat(a,"-checked ").concat(s),b({},"".concat(s,"-checked"),{marginInlineStart:-e.marginXXS/2,marginInlineEnd:e.marginXXS/2})),i)),o)))},MW=function(e){var t,n=e.componentCls;return b({},n,(b(t={},"".concat(n,"-loading-icon").concat(e.iconCls),{position:"relative",top:(e.switchPinSize-e.fontSize)/2,color:e.switchLoadingIconColor,verticalAlign:"top"}),b(t,"&".concat(n,"-checked ").concat(n,"-loading-icon"),{color:e.switchColor}),t))},RW=function(e){var t,n,r=e.componentCls,i=e.motion,o="".concat(r,"-handle");return b({},r,(b(n={},o,{position:"absolute",top:e.switchPadding,insetInlineStart:e.switchPadding,width:e.switchPinSize,height:e.switchPinSize,transition:"all ".concat(e.switchDuration," ease-in-out"),"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:e.colorWhite,borderRadius:e.switchPinSize/2,boxShadow:e.switchHandleShadow,transition:"all ".concat(e.switchDuration," ease-in-out"),content:'""'}}),b(n,"&".concat(r,"-checked ").concat(o),{insetInlineStart:"calc(100% - ".concat(e.switchPinSize+e.switchPadding,"px)")}),b(n,"&:not(".concat(r,"-disabled):active"),i?(b(t={},"".concat(o,"::before"),{insetInlineEnd:e.switchHandleActiveInset,insetInlineStart:0}),b(t,"&".concat(r,"-checked ").concat(o,"::before"),{insetInlineEnd:0,insetInlineStart:e.switchHandleActiveInset}),t):{}),n))},NW=function(e){var t,n,r,i,o=e.componentCls,a="".concat(o,"-inner");return b({},o,(b(i={},a,(b(t={display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:e.switchInnerMarginMax,paddingInlineEnd:e.switchInnerMarginMin,transition:"padding-inline-start ".concat(e.switchDuration," ease-in-out, padding-inline-end ").concat(e.switchDuration," ease-in-out")},"".concat(a,"-checked, ").concat(a,"-unchecked"),{display:"block",color:e.colorTextLightSolid,fontSize:e.fontSizeSM,transition:"margin-inline-start ".concat(e.switchDuration," ease-in-out, margin-inline-end ").concat(e.switchDuration," ease-in-out"),pointerEvents:"none"}),b(t,"".concat(a,"-checked"),{marginInlineStart:"calc(-100% + ".concat(e.switchPinSize+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMax,"px)"),marginInlineEnd:"calc(100% - ".concat(e.switchPinSize+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMax,"px)")}),b(t,"".concat(a,"-unchecked"),{marginTop:-e.switchHeight,marginInlineStart:0,marginInlineEnd:0}),t)),b(i,"&".concat(o,"-checked ").concat(a),(b(n={paddingInlineStart:e.switchInnerMarginMin,paddingInlineEnd:e.switchInnerMarginMax},"".concat(a,"-checked"),{marginInlineStart:0,marginInlineEnd:0}),b(n,"".concat(a,"-unchecked"),{marginInlineStart:"calc(100% - ".concat(e.switchPinSize+2*e.switchPadding,"px + ").concat(2*e.switchInnerMarginMax,"px)"),marginInlineEnd:"calc(-100% + ".concat(e.switchPinSize+2*e.switchPadding,"px - ").concat(2*e.switchInnerMarginMax,"px)")}),n)),b(i,"&:not(".concat(o,"-disabled):active"),(b(r={},"&:not(".concat(o,"-checked) ").concat(a),b({},"".concat(a,"-unchecked"),{marginInlineStart:2*e.switchPadding,marginInlineEnd:2*-e.switchPadding})),b(r,"&".concat(o,"-checked ").concat(a),b({},"".concat(a,"-checked"),{marginInlineStart:2*-e.switchPadding,marginInlineEnd:2*e.switchPadding})),r)),i))},DW=function(e){var t,n=e.componentCls;return b({},n,Object.assign(Object.assign(Object.assign(Object.assign({},as(e)),b({position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:e.switchMinWidth,height:e.switchHeight,lineHeight:"".concat(e.switchHeight,"px"),verticalAlign:"middle",background:e.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:"all ".concat(e.motionDurationMid),userSelect:"none"},"&:hover:not(".concat(n,"-disabled)"),{background:e.colorTextTertiary})),cs(e)),(b(t={},"&".concat(n,"-checked"),b({background:e.switchColor},"&:hover:not(".concat(n,"-disabled)"),{background:e.colorPrimaryHover})),b(t,"&".concat(n,"-loading, &").concat(n,"-disabled"),{cursor:"not-allowed",opacity:e.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}}),b(t,"&".concat(n,"-rtl"),{direction:"rtl"}),t)))},LW=ol("Switch",(function(e){var t=e.fontSize*e.lineHeight,n=e.controlHeight/2,r=t-4,i=n-4,o=nl(e,{switchMinWidth:2*r+8,switchHeight:t,switchDuration:e.motionDurationMid,switchColor:e.colorPrimary,switchDisabledOpacity:e.opacityLoading,switchInnerMarginMin:r/2,switchInnerMarginMax:r+2+4,switchPadding:2,switchPinSize:r,switchBg:e.colorBgContainer,switchMinWidthSM:2*i+4,switchHeightSM:n,switchInnerMarginMinSM:i/2,switchInnerMarginMaxSM:i+2+4,switchPinSizeSM:i,switchHandleShadow:"0 2px 4px 0 ".concat(new yo("#00230b").setAlpha(.2).toRgbString()),switchLoadingIconSize:.75*e.fontSizeIcon,switchLoadingIconColor:"rgba(0, 0, 0, ".concat(e.opacityLoading,")"),switchHandleActiveInset:"-30%"});return[DW(o),NW(o),RW(o),MW(o),PW(o)]})),FW=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},BW=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=e.size,o=e.disabled,s=e.loading,l=e.className,u=e.rootClassName,c=FW(e,["prefixCls","size","disabled","loading","className","rootClassName"]),h=a.useContext(Lo),d=h.getPrefixCls,f=h.direction,p=a.useContext(jo),v=(null!==o&&void 0!==o?o:p)||s,m=d("switch",r),g=a.createElement("div",{className:"".concat(m,"-handle")},s&&a.createElement(Tl,{className:"".concat(m,"-loading-icon")})),y=Pt(LW(m),2),_=y[0],x=y[1],E=zo(i),w=Ko()((b(n={},"".concat(m,"-small"),"small"===E),b(n,"".concat(m,"-loading"),s),b(n,"".concat(m,"-rtl"),"rtl"===f),n),l,u,x);return _(a.createElement(dl,null,a.createElement(OW,Object.assign({},c,{prefixCls:m,className:w,disabled:v,ref:t,loadingIcon:g}))))}));BW.__ANT_SWITCH=!0;var UW=BW,HW=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).onChange=function(e){var t=r.props.onChange;t&&t(e)};var i=e.value;return r.state={value:i},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;void 0===t&&(t=!1),this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value;return(0,ff.jsx)(UW,{checked:e,onChange:this.onChange})}}]),n}(a.Component),jW=r(9584),zW={},VW=function(e,t,n,r){var i=e+"-"+t+"-"+n+(r?"-server":"");if(zW[i])return zW[i];var o=function(e,t,n,r){if("undefined"===typeof document&&!r)return null;var i=r?new r:document.createElement("canvas");i.width=2*n,i.height=2*n;var o=i.getContext("2d");return o?(o.fillStyle=e,o.fillRect(0,0,i.width,i.height),o.fillStyle=t,o.fillRect(0,0,n,n),o.translate(n,n),o.fillRect(0,0,n,n),i.toDataURL()):null}(e,t,n,r);return zW[i]=o,o},GW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},WW=function(e){var t=e.white,n=e.grey,r=e.size,i=e.renderers,o=e.borderRadius,s=e.boxShadow,l=e.children,u=(0,jW.ZP)({default:{grid:{borderRadius:o,boxShadow:s,absolute:"0px 0px 0px 0px",background:"url("+VW(t,n,r,i.canvas)+") center left"}}});return(0,a.isValidElement)(l)?a.cloneElement(l,GW({},l.props,{style:GW({},l.props.style,u.grid)})):a.createElement("div",{style:u.grid})};WW.defaultProps={size:8,white:"transparent",grey:"rgba(0,0,0,.08)",renderers:{}};var XW=WW,YW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KW=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qW(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var ZW=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=qW(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r,i){var o=i.clientWidth,a=i.clientHeight,s="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,l="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,u=s-(i.getBoundingClientRect().left+window.pageXOffset),c=l-(i.getBoundingClientRect().top+window.pageYOffset);if("vertical"===n){var h=void 0;if(h=c<0?0:c>a?1:Math.round(100*c/a)/100,t.a!==h)return{h:t.h,s:t.s,l:t.l,a:h,source:"rgb"}}else{var d=void 0;if(r!==(d=u<0?0:u>o?1:Math.round(100*u/o)/100))return{h:t.h,s:t.s,l:t.l,a:d,source:"rgb"}}return null}(e,r.props.hsl,r.props.direction,r.props.a,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},r.unbindEventListeners=function(){window.removeEventListener("mousemove",r.handleChange),window.removeEventListener("mouseup",r.handleMouseUp)},qW(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),KW(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"render",value:function(){var e=this,t=this.props.rgb,n=(0,jW.ZP)({default:{alpha:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},checkboard:{absolute:"0px 0px 0px 0px",overflow:"hidden",borderRadius:this.props.radius},gradient:{absolute:"0px 0px 0px 0px",background:"linear-gradient(to right, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)",boxShadow:this.props.shadow,borderRadius:this.props.radius},container:{position:"relative",height:"100%",margin:"0 3px"},pointer:{position:"absolute",left:100*t.a+"%"},slider:{width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",marginTop:"1px",transform:"translateX(-2px)"}},vertical:{gradient:{background:"linear-gradient(to bottom, rgba("+t.r+","+t.g+","+t.b+", 0) 0%,\n           rgba("+t.r+","+t.g+","+t.b+", 1) 100%)"},pointer:{left:0,top:100*t.a+"%"}},overwrite:YW({},this.props.style)},{vertical:"vertical"===this.props.direction,overwrite:!0});return a.createElement("div",{style:n.alpha},a.createElement("div",{style:n.checkboard},a.createElement(XW,{renderers:this.props.renderers})),a.createElement("div",{style:n.gradient}),a.createElement("div",{style:n.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("div",{style:n.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:n.slider}))))}}]),t}(a.PureComponent||a.Component),$W=ZW,QW=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var JW=[38,40],eX=1,tX=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.handleBlur=function(){n.state.blurValue&&n.setState({value:n.state.blurValue,blurValue:null})},n.handleChange=function(e){n.setUpdatedValue(e.target.value,e)},n.handleKeyDown=function(e){var t,r=function(e){return Number(String(e).replace(/%/g,""))}(e.target.value);if(!isNaN(r)&&(t=e.keyCode,JW.indexOf(t)>-1)){var i=n.getArrowOffset(),o=38===e.keyCode?r+i:r-i;n.setUpdatedValue(o,e)}},n.handleDrag=function(e){if(n.props.dragLabel){var t=Math.round(n.props.value+e.movementX);t>=0&&t<=n.props.dragMax&&n.props.onChange&&n.props.onChange(n.getValueObjectWithLabel(t),e)}},n.handleMouseDown=function(e){n.props.dragLabel&&(e.preventDefault(),n.handleDrag(e),window.addEventListener("mousemove",n.handleDrag),window.addEventListener("mouseup",n.handleMouseUp))},n.handleMouseUp=function(){n.unbindEventListeners()},n.unbindEventListeners=function(){window.removeEventListener("mousemove",n.handleDrag),window.removeEventListener("mouseup",n.handleMouseUp)},n.state={value:String(e.value).toUpperCase(),blurValue:String(e.value).toUpperCase()},n.inputId="rc-editable-input-"+eX++,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),QW(t,[{key:"componentDidUpdate",value:function(e,t){this.props.value===this.state.value||e.value===this.props.value&&t.value===this.state.value||(this.input===document.activeElement?this.setState({blurValue:String(this.props.value).toUpperCase()}):this.setState({value:String(this.props.value).toUpperCase(),blurValue:!this.state.blurValue&&String(this.props.value).toUpperCase()}))}},{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"getValueObjectWithLabel",value:function(e){return function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.label,e)}},{key:"getArrowOffset",value:function(){return this.props.arrowOffset||1}},{key:"setUpdatedValue",value:function(e,t){var n=this.props.label?this.getValueObjectWithLabel(e):e;this.props.onChange&&this.props.onChange(n,t),this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(0,jW.ZP)({default:{wrap:{position:"relative"}},"user-override":{wrap:this.props.style&&this.props.style.wrap?this.props.style.wrap:{},input:this.props.style&&this.props.style.input?this.props.style.input:{},label:this.props.style&&this.props.style.label?this.props.style.label:{}},"dragLabel-true":{label:{cursor:"ew-resize"}}},{"user-override":!0},this.props);return a.createElement("div",{style:t.wrap},a.createElement("input",{id:this.inputId,style:t.input,ref:function(t){return e.input=t},value:this.state.value,onKeyDown:this.handleKeyDown,onChange:this.handleChange,onBlur:this.handleBlur,placeholder:this.props.placeholder,spellCheck:"false"}),this.props.label&&!this.props.hideLabel?a.createElement("label",{htmlFor:this.inputId,style:t.label,onMouseDown:this.handleMouseDown},this.props.label):null)}}]),t}(a.PureComponent||a.Component),nX=tX,rX=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function iX(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var oX=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n=r=iX(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.handleChange=function(e){var t=function(e,t,n,r){var i=r.clientWidth,o=r.clientHeight,a="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(r.getBoundingClientRect().left+window.pageXOffset),u=s-(r.getBoundingClientRect().top+window.pageYOffset);if("vertical"===t){var c=void 0;if(c=u<0?359:u>o?0:360*(-100*u/o+100)/100,n.h!==c)return{h:c,s:n.s,l:n.l,a:n.a,source:"hsl"}}else{var h=void 0;if(h=l<0?0:l>i?359:100*l/i*360/100,n.h!==h)return{h:h,s:n.s,l:n.l,a:n.a,source:"hsl"}}return null}(e,r.props.direction,r.props.hsl,r.container);t&&"function"===typeof r.props.onChange&&r.props.onChange(t,e)},r.handleMouseDown=function(e){r.handleChange(e),window.addEventListener("mousemove",r.handleChange),window.addEventListener("mouseup",r.handleMouseUp)},r.handleMouseUp=function(){r.unbindEventListeners()},iX(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rX(t,[{key:"componentWillUnmount",value:function(){this.unbindEventListeners()}},{key:"unbindEventListeners",value:function(){window.removeEventListener("mousemove",this.handleChange),window.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.direction,n=void 0===t?"horizontal":t,r=(0,jW.ZP)({default:{hue:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius,boxShadow:this.props.shadow},container:{padding:"0 2px",position:"relative",height:"100%",borderRadius:this.props.radius},pointer:{position:"absolute",left:100*this.props.hsl.h/360+"%"},slider:{marginTop:"1px",width:"4px",borderRadius:"1px",height:"8px",boxShadow:"0 0 2px rgba(0, 0, 0, .6)",background:"#fff",transform:"translateX(-2px)"}},vertical:{pointer:{left:"0px",top:-100*this.props.hsl.h/360+100+"%"}}},{vertical:"vertical"===n});return a.createElement("div",{style:r.hue},a.createElement("div",{className:"hue-"+n,style:r.container,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("style",null,"\n            .hue-horizontal {\n              background: linear-gradient(to right, #f00 0%, #ff0 17%, #0f0\n                33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to right, #f00 0%, #ff0\n                17%, #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n\n            .hue-vertical {\n              background: linear-gradient(to top, #f00 0%, #ff0 17%, #0f0 33%,\n                #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n              background: -webkit-linear-gradient(to top, #f00 0%, #ff0 17%,\n                #0f0 33%, #0ff 50%, #00f 67%, #f0f 83%, #f00 100%);\n            }\n          "),a.createElement("div",{style:r.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:r.slider}))))}}]),t}(a.PureComponent||a.Component),aX=oX,sX=r(5192),lX=r.n(sX);var uX=function(){this.__data__=[],this.size=0};var cX=function(e,t){return e===t||e!==e&&t!==t};var hX=function(e,t){for(var n=e.length;n--;)if(cX(e[n][0],t))return n;return-1},dX=Array.prototype.splice;var fX=function(e){var t=this.__data__,n=hX(t,e);return!(n<0)&&(n==t.length-1?t.pop():dX.call(t,n,1),--this.size,!0)};var pX=function(e){var t=this.__data__,n=hX(t,e);return n<0?void 0:t[n][1]};var vX=function(e){return hX(this.__data__,e)>-1};var mX=function(e,t){var n=this.__data__,r=hX(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function gX(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}gX.prototype.clear=uX,gX.prototype.delete=fX,gX.prototype.get=pX,gX.prototype.has=vX,gX.prototype.set=mX;var yX=gX;var bX=function(){this.__data__=new yX,this.size=0};var _X=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var xX=function(e){return this.__data__.get(e)};var EX=function(e){return this.__data__.has(e)},wX="object"==typeof global&&global&&global.Object===Object&&global,TX="object"==typeof self&&self&&self.Object===Object&&self,SX=wX||TX||Function("return this")(),kX=SX.Symbol,CX=Object.prototype,AX=CX.hasOwnProperty,IX=CX.toString,OX=kX?kX.toStringTag:void 0;var PX=function(e){var t=AX.call(e,OX),n=e[OX];try{e[OX]=void 0;var r=!0}catch(Pv){}var i=IX.call(e);return r&&(t?e[OX]=n:delete e[OX]),i},MX=Object.prototype.toString;var RX=function(e){return MX.call(e)},NX=kX?kX.toStringTag:void 0;var DX=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":NX&&NX in Object(e)?PX(e):RX(e)};var LX=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var FX=function(e){if(!LX(e))return!1;var t=DX(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},BX=SX["__core-js_shared__"],UX=function(){var e=/[^.]+$/.exec(BX&&BX.keys&&BX.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var HX=function(e){return!!UX&&UX in e},jX=Function.prototype.toString;var zX=function(e){if(null!=e){try{return jX.call(e)}catch(Pv){}try{return e+""}catch(Pv){}}return""},VX=/^\[object .+?Constructor\]$/,GX=Function.prototype,WX=Object.prototype,XX=GX.toString,YX=WX.hasOwnProperty,KX=RegExp("^"+XX.call(YX).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var qX=function(e){return!(!LX(e)||HX(e))&&(FX(e)?KX:VX).test(zX(e))};var ZX=function(e,t){return null==e?void 0:e[t]};var $X=function(e,t){var n=ZX(e,t);return qX(n)?n:void 0},QX=$X(SX,"Map"),JX=$X(Object,"create");var eY=function(){this.__data__=JX?JX(null):{},this.size=0};var tY=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nY=Object.prototype.hasOwnProperty;var rY=function(e){var t=this.__data__;if(JX){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return nY.call(t,e)?t[e]:void 0},iY=Object.prototype.hasOwnProperty;var oY=function(e){var t=this.__data__;return JX?void 0!==t[e]:iY.call(t,e)};var aY=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=JX&&void 0===t?"__lodash_hash_undefined__":t,this};function sY(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}sY.prototype.clear=eY,sY.prototype.delete=tY,sY.prototype.get=rY,sY.prototype.has=oY,sY.prototype.set=aY;var lY=sY;var uY=function(){this.size=0,this.__data__={hash:new lY,map:new(QX||yX),string:new lY}};var cY=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var hY=function(e,t){var n=e.__data__;return cY(t)?n["string"==typeof t?"string":"hash"]:n.map};var dY=function(e){var t=hY(this,e).delete(e);return this.size-=t?1:0,t};var fY=function(e){return hY(this,e).get(e)};var pY=function(e){return hY(this,e).has(e)};var vY=function(e,t){var n=hY(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function mY(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}mY.prototype.clear=uY,mY.prototype.delete=dY,mY.prototype.get=fY,mY.prototype.has=pY,mY.prototype.set=vY;var gY=mY;var yY=function(e,t){var n=this.__data__;if(n instanceof yX){var r=n.__data__;if(!QX||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new gY(r)}return n.set(e,t),this.size=n.size,this};function bY(e){var t=this.__data__=new yX(e);this.size=t.size}bY.prototype.clear=bX,bY.prototype.delete=_X,bY.prototype.get=xX,bY.prototype.has=EX,bY.prototype.set=yY;var _Y=bY,xY=function(){try{var e=$X(Object,"defineProperty");return e({},"",{}),e}catch(Pv){}}();var EY=function(e,t,n){"__proto__"==t&&xY?xY(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};var wY=function(e,t,n){(void 0!==n&&!cX(e[t],n)||void 0===n&&!(t in e))&&EY(e,t,n)};var TY=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}},SY=TY(),kY="object"==typeof exports&&exports&&!exports.nodeType&&exports,CY=kY&&"object"==typeof module&&module&&!module.nodeType&&module,AY=CY&&CY.exports===kY?SX.Buffer:void 0,IY=AY?AY.allocUnsafe:void 0;var OY=function(e,t){if(t)return e.slice();var n=e.length,r=IY?IY(n):new e.constructor(n);return e.copy(r),r},PY=SX.Uint8Array;var MY=function(e){var t=new e.constructor(e.byteLength);return new PY(t).set(new PY(e)),t};var RY=function(e,t){var n=t?MY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};var NY=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t},DY=Object.create,LY=function(){function e(){}return function(t){if(!LX(t))return{};if(DY)return DY(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),FY=LY;var BY=function(e,t){return function(n){return e(t(n))}},UY=BY(Object.getPrototypeOf,Object),HY=Object.prototype;var jY=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||HY)};var zY=function(e){return"function"!=typeof e.constructor||jY(e)?{}:FY(UY(e))};var VY=function(e){return null!=e&&"object"==typeof e};var GY=function(e){return VY(e)&&"[object Arguments]"==DX(e)},WY=Object.prototype,XY=WY.hasOwnProperty,YY=WY.propertyIsEnumerable,KY=GY(function(){return arguments}())?GY:function(e){return VY(e)&&XY.call(e,"callee")&&!YY.call(e,"callee")},qY=KY,ZY=Array.isArray;var $Y=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var QY=function(e){return null!=e&&$Y(e.length)&&!FX(e)};var JY=function(e){return VY(e)&&QY(e)};var eK=function(){return!1},tK="object"==typeof exports&&exports&&!exports.nodeType&&exports,nK=tK&&"object"==typeof module&&module&&!module.nodeType&&module,rK=nK&&nK.exports===tK?SX.Buffer:void 0,iK=(rK?rK.isBuffer:void 0)||eK,oK=Function.prototype,aK=Object.prototype,sK=oK.toString,lK=aK.hasOwnProperty,uK=sK.call(Object);var cK=function(e){if(!VY(e)||"[object Object]"!=DX(e))return!1;var t=UY(e);if(null===t)return!0;var n=lK.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&sK.call(n)==uK},hK={};hK["[object Float32Array]"]=hK["[object Float64Array]"]=hK["[object Int8Array]"]=hK["[object Int16Array]"]=hK["[object Int32Array]"]=hK["[object Uint8Array]"]=hK["[object Uint8ClampedArray]"]=hK["[object Uint16Array]"]=hK["[object Uint32Array]"]=!0,hK["[object Arguments]"]=hK["[object Array]"]=hK["[object ArrayBuffer]"]=hK["[object Boolean]"]=hK["[object DataView]"]=hK["[object Date]"]=hK["[object Error]"]=hK["[object Function]"]=hK["[object Map]"]=hK["[object Number]"]=hK["[object Object]"]=hK["[object RegExp]"]=hK["[object Set]"]=hK["[object String]"]=hK["[object WeakMap]"]=!1;var dK=function(e){return VY(e)&&$Y(e.length)&&!!hK[DX(e)]};var fK=function(e){return function(t){return e(t)}},pK="object"==typeof exports&&exports&&!exports.nodeType&&exports,vK=pK&&"object"==typeof module&&module&&!module.nodeType&&module,mK=vK&&vK.exports===pK&&wX.process,gK=function(){try{var e=vK&&vK.require&&vK.require("util").types;return e||mK&&mK.binding&&mK.binding("util")}catch(Pv){}}(),yK=gK&&gK.isTypedArray,bK=yK?fK(yK):dK;var _K=function(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]},xK=Object.prototype.hasOwnProperty;var EK=function(e,t,n){var r=e[t];xK.call(e,t)&&cX(r,n)&&(void 0!==n||t in e)||EY(e,t,n)};var wK=function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?EY(n,s,l):EK(n,s,l)}return n};var TK=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r},SK=/^(?:0|[1-9]\d*)$/;var kK=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&SK.test(e))&&e>-1&&e%1==0&&e<t},CK=Object.prototype.hasOwnProperty;var AK=function(e,t){var n=ZY(e),r=!n&&qY(e),i=!n&&!r&&iK(e),o=!n&&!r&&!i&&bK(e),a=n||r||i||o,s=a?TK(e.length,String):[],l=s.length;for(var u in e)!t&&!CK.call(e,u)||a&&("length"==u||i&&("offset"==u||"parent"==u)||o&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||kK(u,l))||s.push(u);return s};var IK=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t},OK=Object.prototype.hasOwnProperty;var PK=function(e){if(!LX(e))return IK(e);var t=jY(e),n=[];for(var r in e)("constructor"!=r||!t&&OK.call(e,r))&&n.push(r);return n};var MK=function(e){return QY(e)?AK(e,!0):PK(e)};var RK=function(e){return wK(e,MK(e))};var NK=function(e,t,n,r,i,o,a){var s=_K(e,n),l=_K(t,n),u=a.get(l);if(u)wY(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):void 0,h=void 0===c;if(h){var d=ZY(l),f=!d&&iK(l),p=!d&&!f&&bK(l);c=l,d||f||p?ZY(s)?c=s:JY(s)?c=NY(s):f?(h=!1,c=OY(l,!0)):p?(h=!1,c=RY(l,!0)):c=[]:cK(l)||qY(l)?(c=s,qY(s)?c=RK(s):LX(s)&&!FX(s)||(c=zY(l))):h=!1}h&&(a.set(l,c),i(c,l,r,o,a),a.delete(l)),wY(e,n,c)}};var DK=function e(t,n,r,i,o){t!==n&&SY(n,(function(a,s){if(o||(o=new _Y),LX(a))NK(t,n,s,r,e,i,o);else{var l=i?i(_K(t,s),a,s+"",t,n,o):void 0;void 0===l&&(l=a),wY(t,s,l)}}),MK)};var LK=function(e){return e};var FK=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)},BK=Math.max;var UK=function(e,t,n){return t=BK(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=BK(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),FK(e,this,s)}};var HK=function(e){return function(){return e}},jK=xY?function(e,t){return xY(e,"toString",{configurable:!0,enumerable:!1,value:HK(t),writable:!0})}:LK,zK=jK,VK=Date.now;var GK=function(e){var t=0,n=0;return function(){var r=VK(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},WK=GK(zK);var XK=function(e,t){return WK(UK(e,t,LK),e+"")};var YK=function(e,t,n){if(!LX(n))return!1;var r=typeof t;return!!("number"==r?QY(n)&&kK(t,n.length):"string"==r&&t in n)&&cX(n[t],e)};var KK=function(e){return XK((function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:void 0,a=i>2?n[2]:void 0;for(o=e.length>3&&"function"==typeof o?(i--,o):void 0,a&&YK(n[0],n[1],a)&&(o=i<3?void 0:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t}))},qK=KK((function(e,t,n){DK(e,t,n)})),ZK=qK,$K=function(e){var t=e.zDepth,n=e.radius,r=e.background,i=e.children,o=e.styles,s=void 0===o?{}:o,l=(0,jW.ZP)(ZK({default:{wrap:{position:"relative",display:"inline-block"},content:{position:"relative"},bg:{absolute:"0px 0px 0px 0px",boxShadow:"0 "+t+"px "+4*t+"px rgba(0,0,0,.24)",borderRadius:n,background:r}},"zDepth-0":{bg:{boxShadow:"none"}},"zDepth-1":{bg:{boxShadow:"0 2px 10px rgba(0,0,0,.12), 0 2px 5px rgba(0,0,0,.16)"}},"zDepth-2":{bg:{boxShadow:"0 6px 20px rgba(0,0,0,.19), 0 8px 17px rgba(0,0,0,.2)"}},"zDepth-3":{bg:{boxShadow:"0 17px 50px rgba(0,0,0,.19), 0 12px 15px rgba(0,0,0,.24)"}},"zDepth-4":{bg:{boxShadow:"0 25px 55px rgba(0,0,0,.21), 0 16px 28px rgba(0,0,0,.22)"}},"zDepth-5":{bg:{boxShadow:"0 40px 77px rgba(0,0,0,.22), 0 27px 24px rgba(0,0,0,.2)"}},square:{bg:{borderRadius:"0"}},circle:{bg:{borderRadius:"50%"}}},s),{"zDepth-1":1===t});return a.createElement("div",{style:l.wrap},a.createElement("div",{style:l.bg}),a.createElement("div",{style:l.content},i))};$K.propTypes={background:lX().string,zDepth:lX().oneOf([0,1,2,3,4,5]),radius:lX().number,styles:lX().object},$K.defaultProps={background:"#fff",zDepth:1,radius:2,styles:{}};var QK=$K,JK=function(){return SX.Date.now()},eq=/\s/;var tq=function(e){for(var t=e.length;t--&&eq.test(e.charAt(t)););return t},nq=/^\s+/;var rq=function(e){return e?e.slice(0,tq(e)+1).replace(nq,""):e};var iq=function(e){return"symbol"==typeof e||VY(e)&&"[object Symbol]"==DX(e)},oq=/^[-+]0x[0-9a-f]+$/i,aq=/^0b[01]+$/i,sq=/^0o[0-7]+$/i,lq=parseInt;var uq=function(e){if("number"==typeof e)return e;if(iq(e))return NaN;if(LX(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=LX(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=rq(e);var n=aq.test(e);return n||sq.test(e)?lq(e.slice(2),n?2:8):oq.test(e)?NaN:+e},cq=Math.max,hq=Math.min;var dq=function(e,t,n){var r,i,o,a,s,l,u=0,c=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function f(t){var n=r,o=i;return r=i=void 0,u=t,a=e.apply(o,n)}function p(e){var n=e-l;return void 0===l||n>=t||n<0||h&&e-u>=o}function v(){var e=JK();if(p(e))return m(e);s=setTimeout(v,function(e){var n=t-(e-l);return h?hq(n,o-(e-u)):n}(e))}function m(e){return s=void 0,d&&r?f(e):(r=i=void 0,a)}function g(){var e=JK(),n=p(e);if(r=arguments,i=this,l=e,n){if(void 0===s)return function(e){return u=e,s=setTimeout(v,t),c?f(e):a}(l);if(h)return clearTimeout(s),s=setTimeout(v,t),f(l)}return void 0===s&&(s=setTimeout(v,t)),a}return t=uq(t)||0,LX(n)&&(c=!!n.leading,o=(h="maxWait"in n)?cq(uq(n.maxWait)||0,t):o,d="trailing"in n?!!n.trailing:d),g.cancel=function(){void 0!==s&&clearTimeout(s),u=0,r=l=i=s=void 0},g.flush=function(){return void 0===s?a:m(JK())},g};var fq=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return LX(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),dq(e,t,{leading:r,maxWait:t,trailing:i})},pq=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var vq=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e){"function"===typeof n.props.onChange&&n.throttle(n.props.onChange,function(e,t,n){var r=n.getBoundingClientRect(),i=r.width,o=r.height,a="number"===typeof e.pageX?e.pageX:e.touches[0].pageX,s="number"===typeof e.pageY?e.pageY:e.touches[0].pageY,l=a-(n.getBoundingClientRect().left+window.pageXOffset),u=s-(n.getBoundingClientRect().top+window.pageYOffset);l<0?l=0:l>i&&(l=i),u<0?u=0:u>o&&(u=o);var c=l/i,h=1-u/o;return{h:t.h,s:c,v:h,a:t.a,source:"hsv"}}(e,n.props.hsl,n.container),e)},n.handleMouseDown=function(e){n.handleChange(e);var t=n.getContainerRenderWindow();t.addEventListener("mousemove",n.handleChange),t.addEventListener("mouseup",n.handleMouseUp)},n.handleMouseUp=function(){n.unbindEventListeners()},n.throttle=fq((function(e,t,n){e(t,n)}),50),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),pq(t,[{key:"componentWillUnmount",value:function(){this.throttle.cancel(),this.unbindEventListeners()}},{key:"getContainerRenderWindow",value:function(){for(var e=this.container,t=window;!t.document.contains(e)&&t.parent!==t;)t=t.parent;return t}},{key:"unbindEventListeners",value:function(){var e=this.getContainerRenderWindow();e.removeEventListener("mousemove",this.handleChange),e.removeEventListener("mouseup",this.handleMouseUp)}},{key:"render",value:function(){var e=this,t=this.props.style||{},n=t.color,r=t.white,i=t.black,o=t.pointer,s=t.circle,l=(0,jW.ZP)({default:{color:{absolute:"0px 0px 0px 0px",background:"hsl("+this.props.hsl.h+",100%, 50%)",borderRadius:this.props.radius},white:{absolute:"0px 0px 0px 0px",borderRadius:this.props.radius},black:{absolute:"0px 0px 0px 0px",boxShadow:this.props.shadow,borderRadius:this.props.radius},pointer:{position:"absolute",top:-100*this.props.hsv.v+100+"%",left:100*this.props.hsv.s+"%",cursor:"default"},circle:{width:"4px",height:"4px",boxShadow:"0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0,0,0,.3),\n            0 0 1px 2px rgba(0,0,0,.4)",borderRadius:"50%",cursor:"hand",transform:"translate(-2px, -2px)"}},custom:{color:n,white:r,black:i,pointer:o,circle:s}},{custom:!!this.props.style});return a.createElement("div",{style:l.color,ref:function(t){return e.container=t},onMouseDown:this.handleMouseDown,onTouchMove:this.handleChange,onTouchStart:this.handleChange},a.createElement("style",null,"\n          .saturation-white {\n            background: -webkit-linear-gradient(to right, #fff, rgba(255,255,255,0));\n            background: linear-gradient(to right, #fff, rgba(255,255,255,0));\n          }\n          .saturation-black {\n            background: -webkit-linear-gradient(to top, #000, rgba(0,0,0,0));\n            background: linear-gradient(to top, #000, rgba(0,0,0,0));\n          }\n        "),a.createElement("div",{style:l.white,className:"saturation-white"},a.createElement("div",{style:l.black,className:"saturation-black"}),a.createElement("div",{style:l.pointer},this.props.pointer?a.createElement(this.props.pointer,this.props):a.createElement("div",{style:l.circle}))))}}]),t}(a.PureComponent||a.Component),mq=vq;var gq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e},yq=BY(Object.keys,Object),bq=Object.prototype.hasOwnProperty;var _q=function(e){if(!jY(e))return yq(e);var t=[];for(var n in Object(e))bq.call(e,n)&&"constructor"!=n&&t.push(n);return t};var xq=function(e){return QY(e)?AK(e):_q(e)};var Eq=function(e,t){return e&&SY(e,t,xq)};var wq=function(e,t){return function(n,r){if(null==n)return n;if(!QY(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}},Tq=wq(Eq);var Sq=function(e){return"function"==typeof e?e:LK};var kq=function(e,t){return(ZY(e)?gq:Tq)(e,Sq(t))};function Cq(e){return Cq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Cq(e)}var Aq=/^\s+/,Iq=/\s+$/;function Oq(e,t){if(t=t||{},(e=e||"")instanceof Oq)return e;if(!(this instanceof Oq))return new Oq(e,t);var n=function(e){var t={r:0,g:0,b:0},n=1,r=null,i=null,o=null,a=!1,s=!1;"string"==typeof e&&(e=function(e){e=e.replace(Aq,"").replace(Iq,"").toLowerCase();var t,n=!1;if(Yq[e])e=Yq[e],n=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};if(t=rZ.rgb.exec(e))return{r:t[1],g:t[2],b:t[3]};if(t=rZ.rgba.exec(e))return{r:t[1],g:t[2],b:t[3],a:t[4]};if(t=rZ.hsl.exec(e))return{h:t[1],s:t[2],l:t[3]};if(t=rZ.hsla.exec(e))return{h:t[1],s:t[2],l:t[3],a:t[4]};if(t=rZ.hsv.exec(e))return{h:t[1],s:t[2],v:t[3]};if(t=rZ.hsva.exec(e))return{h:t[1],s:t[2],v:t[3],a:t[4]};if(t=rZ.hex8.exec(e))return{r:Qq(t[1]),g:Qq(t[2]),b:Qq(t[3]),a:nZ(t[4]),format:n?"name":"hex8"};if(t=rZ.hex6.exec(e))return{r:Qq(t[1]),g:Qq(t[2]),b:Qq(t[3]),format:n?"name":"hex"};if(t=rZ.hex4.exec(e))return{r:Qq(t[1]+""+t[1]),g:Qq(t[2]+""+t[2]),b:Qq(t[3]+""+t[3]),a:nZ(t[4]+""+t[4]),format:n?"name":"hex8"};if(t=rZ.hex3.exec(e))return{r:Qq(t[1]+""+t[1]),g:Qq(t[2]+""+t[2]),b:Qq(t[3]+""+t[3]),format:n?"name":"hex"};return!1}(e));"object"==Cq(e)&&(iZ(e.r)&&iZ(e.g)&&iZ(e.b)?(t=function(e,t,n){return{r:255*Zq(e,255),g:255*Zq(t,255),b:255*Zq(n,255)}}(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):iZ(e.h)&&iZ(e.s)&&iZ(e.v)?(r=eZ(e.s),i=eZ(e.v),t=function(e,t,n){e=6*Zq(e,360),t=Zq(t,100),n=Zq(n,100);var r=Math.floor(e),i=e-r,o=n*(1-t),a=n*(1-i*t),s=n*(1-(1-i)*t),l=r%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*u,g:255*c,b:255*h}}(e.h,r,i),a=!0,s="hsv"):iZ(e.h)&&iZ(e.s)&&iZ(e.l)&&(r=eZ(e.s),o=eZ(e.l),t=function(e,t,n){var r,i,o;function a(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}if(e=Zq(e,360),t=Zq(t,100),n=Zq(n,100),0===t)r=i=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=a(l,s,e+1/3),i=a(l,s,e),o=a(l,s,e-1/3)}return{r:255*r,g:255*i,b:255*o}}(e.h,r,o),a=!0,s="hsl"),e.hasOwnProperty("a")&&(n=e.a));return n=qq(n),{ok:a,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}(e);this._originalInput=e,this._r=n.r,this._g=n.g,this._b=n.b,this._a=n.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||n.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=n.ok}function Pq(e,t,n){e=Zq(e,255),t=Zq(t,255),n=Zq(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=(o+a)/2;if(o==a)r=i=0;else{var l=o-a;switch(i=s>.5?l/(2-o-a):l/(o+a),o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function Mq(e,t,n){e=Zq(e,255),t=Zq(t,255),n=Zq(n,255);var r,i,o=Math.max(e,t,n),a=Math.min(e,t,n),s=o,l=o-a;if(i=0===o?0:l/o,o==a)r=0;else{switch(o){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function Rq(e,t,n,r){var i=[Jq(Math.round(e).toString(16)),Jq(Math.round(t).toString(16)),Jq(Math.round(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function Nq(e,t,n,r){return[Jq(tZ(r)),Jq(Math.round(e).toString(16)),Jq(Math.round(t).toString(16)),Jq(Math.round(n).toString(16))].join("")}function Dq(e,t){t=0===t?0:t||10;var n=Oq(e).toHsl();return n.s-=t/100,n.s=$q(n.s),Oq(n)}function Lq(e,t){t=0===t?0:t||10;var n=Oq(e).toHsl();return n.s+=t/100,n.s=$q(n.s),Oq(n)}function Fq(e){return Oq(e).desaturate(100)}function Bq(e,t){t=0===t?0:t||10;var n=Oq(e).toHsl();return n.l+=t/100,n.l=$q(n.l),Oq(n)}function Uq(e,t){t=0===t?0:t||10;var n=Oq(e).toRgb();return n.r=Math.max(0,Math.min(255,n.r-Math.round(-t/100*255))),n.g=Math.max(0,Math.min(255,n.g-Math.round(-t/100*255))),n.b=Math.max(0,Math.min(255,n.b-Math.round(-t/100*255))),Oq(n)}function Hq(e,t){t=0===t?0:t||10;var n=Oq(e).toHsl();return n.l-=t/100,n.l=$q(n.l),Oq(n)}function jq(e,t){var n=Oq(e).toHsl(),r=(n.h+t)%360;return n.h=r<0?360+r:r,Oq(n)}function zq(e){var t=Oq(e).toHsl();return t.h=(t.h+180)%360,Oq(t)}function Vq(e,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var n=Oq(e).toHsl(),r=[Oq(e)],i=360/t,o=1;o<t;o++)r.push(Oq({h:(n.h+o*i)%360,s:n.s,l:n.l}));return r}function Gq(e){var t=Oq(e).toHsl(),n=t.h;return[Oq(e),Oq({h:(n+72)%360,s:t.s,l:t.l}),Oq({h:(n+216)%360,s:t.s,l:t.l})]}function Wq(e,t,n){t=t||6,n=n||30;var r=Oq(e).toHsl(),i=360/n,o=[Oq(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,o.push(Oq(r));return o}function Xq(e,t){t=t||6;for(var n=Oq(e).toHsv(),r=n.h,i=n.s,o=n.v,a=[],s=1/t;t--;)a.push(Oq({h:r,s:i,v:o})),o=(o+s)%1;return a}Oq.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e,t,n,r=this.toRgb();return e=r.r/255,t=r.g/255,n=r.b/255,.2126*(e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4))+.7152*(t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4))+.0722*(n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4))},setAlpha:function(e){return this._a=qq(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=Mq(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=Mq(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=Pq(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=Pq(this._r,this._g,this._b),t=Math.round(360*e.h),n=Math.round(100*e.s),r=Math.round(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return Rq(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return function(e,t,n,r,i){var o=[Jq(Math.round(e).toString(16)),Jq(Math.round(t).toString(16)),Jq(Math.round(n).toString(16)),Jq(tZ(r))];if(i&&o[0].charAt(0)==o[0].charAt(1)&&o[1].charAt(0)==o[1].charAt(1)&&o[2].charAt(0)==o[2].charAt(1)&&o[3].charAt(0)==o[3].charAt(1))return o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0)+o[3].charAt(0);return o.join("")}(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(100*Zq(this._r,255))+"%",g:Math.round(100*Zq(this._g,255))+"%",b:Math.round(100*Zq(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+Math.round(100*Zq(this._r,255))+"%, "+Math.round(100*Zq(this._g,255))+"%, "+Math.round(100*Zq(this._b,255))+"%)":"rgba("+Math.round(100*Zq(this._r,255))+"%, "+Math.round(100*Zq(this._g,255))+"%, "+Math.round(100*Zq(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(Kq[Rq(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+Nq(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=Oq(e);n="#"+Nq(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return Oq(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Bq,arguments)},brighten:function(){return this._applyModification(Uq,arguments)},darken:function(){return this._applyModification(Hq,arguments)},desaturate:function(){return this._applyModification(Dq,arguments)},saturate:function(){return this._applyModification(Lq,arguments)},greyscale:function(){return this._applyModification(Fq,arguments)},spin:function(){return this._applyModification(jq,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(Wq,arguments)},complement:function(){return this._applyCombination(zq,arguments)},monochromatic:function(){return this._applyCombination(Xq,arguments)},splitcomplement:function(){return this._applyCombination(Gq,arguments)},triad:function(){return this._applyCombination(Vq,[3])},tetrad:function(){return this._applyCombination(Vq,[4])}},Oq.fromRatio=function(e,t){if("object"==Cq(e)){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]="a"===r?e[r]:eZ(e[r]));e=n}return Oq(e,t)},Oq.equals=function(e,t){return!(!e||!t)&&Oq(e).toRgbString()==Oq(t).toRgbString()},Oq.random=function(){return Oq.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})},Oq.mix=function(e,t,n){n=0===n?0:n||50;var r=Oq(e).toRgb(),i=Oq(t).toRgb(),o=n/100;return Oq({r:(i.r-r.r)*o+r.r,g:(i.g-r.g)*o+r.g,b:(i.b-r.b)*o+r.b,a:(i.a-r.a)*o+r.a})},Oq.readability=function(e,t){var n=Oq(e),r=Oq(t);return(Math.max(n.getLuminance(),r.getLuminance())+.05)/(Math.min(n.getLuminance(),r.getLuminance())+.05)},Oq.isReadable=function(e,t,n){var r,i,o=Oq.readability(e,t);switch(i=!1,(r=function(e){var t,n;t=((e=e||{level:"AA",size:"small"}).level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA");"small"!==n&&"large"!==n&&(n="small");return{level:t,size:n}}(n)).level+r.size){case"AAsmall":case"AAAlarge":i=o>=4.5;break;case"AAlarge":i=o>=3;break;case"AAAsmall":i=o>=7}return i},Oq.mostReadable=function(e,t,n){var r,i,o,a,s=null,l=0;i=(n=n||{}).includeFallbackColors,o=n.level,a=n.size;for(var u=0;u<t.length;u++)(r=Oq.readability(e,t[u]))>l&&(l=r,s=Oq(t[u]));return Oq.isReadable(e,s,{level:o,size:a})||!i?s:(n.includeFallbackColors=!1,Oq.mostReadable(e,["#fff","#000"],n))};var Yq=Oq.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Kq=Oq.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(Yq);function qq(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function Zq(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var n=function(e){return"string"===typeof e&&-1!=e.indexOf("%")}(e);return e=Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),Math.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function $q(e){return Math.min(1,Math.max(0,e))}function Qq(e){return parseInt(e,16)}function Jq(e){return 1==e.length?"0"+e:""+e}function eZ(e){return e<=1&&(e=100*e+"%"),e}function tZ(e){return Math.round(255*parseFloat(e)).toString(16)}function nZ(e){return Qq(e)/255}var rZ=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function iZ(e){return!!rZ.CSS_UNIT.exec(e)}var oZ=function(e){var t=0,n=0;return kq(["r","g","b","a","h","s","l","v"],(function(r){if(e[r]&&(t+=1,isNaN(e[r])||(n+=1),"s"===r||"l"===r)){/^\d+%$/.test(e[r])&&(n+=1)}})),t===n&&e},aZ=function(e,t){var n=e.hex?Oq(e.hex):Oq(e),r=n.toHsl(),i=n.toHsv(),o=n.toRgb(),a=n.toHex();return 0===r.s&&(r.h=t||0,i.h=t||0),{hsl:r,hex:"000000"===a&&0===o.a?"transparent":"#"+a,rgb:o,hsv:i,oldHue:e.h||t||r.h,source:e.source}},sZ=function(e){if("transparent"===e)return!0;var t="#"===String(e).charAt(0)?1:0;return e.length!==4+t&&e.length<7+t&&Oq(e).isValid()},lZ=function(e){if(!e)return"#fff";var t=aZ(e);return"transparent"===t.hex?"rgba(0,0,0,0.4)":(299*t.rgb.r+587*t.rgb.g+114*t.rgb.b)/1e3>=128?"#000":"#fff"},uZ=function(e,t){return Oq(t+" ("+e.replace("\xb0","")+")")._ok},cZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hZ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var dZ=function(e){var t=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.handleChange=function(e,n){if(oZ(e)){var r=aZ(e,e.h||t.state.oldHue);t.setState(r),t.props.onChangeComplete&&t.debounce(t.props.onChangeComplete,r,n),t.props.onChange&&t.props.onChange(r,n)}},t.handleSwatchHover=function(e,n){if(oZ(e)){var r=aZ(e,e.h||t.state.oldHue);t.props.onSwatchHover&&t.props.onSwatchHover(r,n)}},t.state=cZ({},aZ(e.color,0)),t.debounce=dq((function(e,t,n){e(t,n)}),100),t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,t),hZ(n,[{key:"render",value:function(){var t={};return this.props.onSwatchHover&&(t.onSwatchHover=this.handleSwatchHover),a.createElement(e,cZ({},this.props,this.state,{onChange:this.handleChange},t))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return cZ({},aZ(e.color,t.oldHue))}}]),n}(a.PureComponent||a.Component);return t.propTypes=cZ({},e.propTypes),t.defaultProps=cZ({},e.defaultProps,{color:{h:250,s:.5,l:.2,a:1}}),t},fZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pZ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function vZ(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var mZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gZ=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"span";return function(n){function r(){var e,t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=n=vZ(this,(e=r.__proto__||Object.getPrototypeOf(r)).call.apply(e,[this].concat(o))),n.state={focus:!1},n.handleFocus=function(){return n.setState({focus:!0})},n.handleBlur=function(){return n.setState({focus:!1})},vZ(n,t)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),pZ(r,[{key:"render",value:function(){return a.createElement(t,{onFocus:this.handleFocus,onBlur:this.handleBlur},a.createElement(e,fZ({},this.props,this.state)))}}]),r}(a.Component)}((function(e){var t=e.color,n=e.style,r=e.onClick,i=void 0===r?function(){}:r,o=e.onHover,s=e.title,l=void 0===s?t:s,u=e.children,c=e.focus,h=e.focusStyle,d=void 0===h?{}:h,f="transparent"===t,p=(0,jW.ZP)({default:{swatch:mZ({background:t,height:"100%",width:"100%",cursor:"pointer",position:"relative",outline:"none"},n,c?d:{})}}),v={};return o&&(v.onMouseOver=function(e){return o(t,e)}),a.createElement("div",mZ({style:p.swatch,onClick:function(e){return i(t,e)},title:l,tabIndex:0,onKeyDown:function(e){return 13===e.keyCode&&i(t,e)}},v),u,f&&a.createElement(XW,{borderRadius:p.swatch.borderRadius,boxShadow:"inset 0 0 0 1px rgba(0,0,0,0.1)"}))})),yZ=function(e){var t=e.direction,n=(0,jW.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.createElement("div",{style:n.picker})},bZ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_Z=function(e){var t=e.rgb,n=e.hsl,r=e.width,i=e.height,o=e.onChange,s=e.direction,l=e.style,u=e.renderers,c=e.pointer,h=e.className,d=void 0===h?"":h,f=(0,jW.ZP)({default:{picker:{position:"relative",width:r,height:i},alpha:{radius:"2px",style:l}}});return a.createElement("div",{style:f.picker,className:"alpha-picker "+d},a.createElement($W,bZ({},f.alpha,{rgb:t,hsl:n,pointer:c,renderers:u,onChange:o,direction:s})))};_Z.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:yZ};dZ(_Z);var xZ=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var EZ=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var wZ=function(e){return this.__data__.has(e)};function TZ(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new gY;++t<n;)this.add(e[t])}TZ.prototype.add=TZ.prototype.push=EZ,TZ.prototype.has=wZ;var SZ=TZ;var kZ=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var CZ=function(e,t){return e.has(t)};var AZ=function(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var u=o.get(e),c=o.get(t);if(u&&c)return u==t&&c==e;var h=-1,d=!0,f=2&n?new SZ:void 0;for(o.set(e,t),o.set(t,e);++h<s;){var p=e[h],v=t[h];if(r)var m=a?r(v,p,h,t,e,o):r(p,v,h,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(f){if(!kZ(t,(function(e,t){if(!CZ(f,t)&&(p===e||i(p,e,n,r,o)))return f.push(t)}))){d=!1;break}}else if(p!==v&&!i(p,v,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d};var IZ=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var OZ=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},PZ=kX?kX.prototype:void 0,MZ=PZ?PZ.valueOf:void 0;var RZ=function(e,t,n,r,i,o,a){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new PY(e),new PY(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return cX(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=IZ;case"[object Set]":var l=1&r;if(s||(s=OZ),e.size!=t.size&&!l)return!1;var u=a.get(e);if(u)return u==t;r|=2,a.set(e,t);var c=AZ(s(e),s(t),r,i,o,a);return a.delete(e),c;case"[object Symbol]":if(MZ)return MZ.call(e)==MZ.call(t)}return!1};var NZ=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};var DZ=function(e,t,n){var r=t(e);return ZY(e)?r:NZ(r,n(e))};var LZ=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o};var FZ=function(){return[]},BZ=Object.prototype.propertyIsEnumerable,UZ=Object.getOwnPropertySymbols,HZ=UZ?function(e){return null==e?[]:(e=Object(e),LZ(UZ(e),(function(t){return BZ.call(e,t)})))}:FZ,jZ=HZ;var zZ=function(e){return DZ(e,xq,jZ)},VZ=Object.prototype.hasOwnProperty;var GZ=function(e,t,n,r,i,o){var a=1&n,s=zZ(e),l=s.length;if(l!=zZ(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:VZ.call(t,c)))return!1}var h=o.get(e),d=o.get(t);if(h&&d)return h==t&&d==e;var f=!0;o.set(e,t),o.set(t,e);for(var p=a;++u<l;){var v=e[c=s[u]],m=t[c];if(r)var g=a?r(m,v,c,t,e,o):r(v,m,c,e,t,o);if(!(void 0===g?v===m||i(v,m,n,r,o):g)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var y=e.constructor,b=t.constructor;y==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return o.delete(e),o.delete(t),f},WZ=$X(SX,"DataView"),XZ=$X(SX,"Promise"),YZ=$X(SX,"Set"),KZ=$X(SX,"WeakMap"),qZ="[object Map]",ZZ="[object Promise]",$Z="[object Set]",QZ="[object WeakMap]",JZ="[object DataView]",e$=zX(WZ),t$=zX(QX),n$=zX(XZ),r$=zX(YZ),i$=zX(KZ),o$=DX;(WZ&&o$(new WZ(new ArrayBuffer(1)))!=JZ||QX&&o$(new QX)!=qZ||XZ&&o$(XZ.resolve())!=ZZ||YZ&&o$(new YZ)!=$Z||KZ&&o$(new KZ)!=QZ)&&(o$=function(e){var t=DX(e),n="[object Object]"==t?e.constructor:void 0,r=n?zX(n):"";if(r)switch(r){case e$:return JZ;case t$:return qZ;case n$:return ZZ;case r$:return $Z;case i$:return QZ}return t});var a$=o$,s$="[object Arguments]",l$="[object Array]",u$="[object Object]",c$=Object.prototype.hasOwnProperty;var h$=function(e,t,n,r,i,o){var a=ZY(e),s=ZY(t),l=a?l$:a$(e),u=s?l$:a$(t),c=(l=l==s$?u$:l)==u$,h=(u=u==s$?u$:u)==u$,d=l==u;if(d&&iK(e)){if(!iK(t))return!1;a=!0,c=!1}if(d&&!c)return o||(o=new _Y),a||bK(e)?AZ(e,t,n,r,i,o):RZ(e,t,l,n,r,i,o);if(!(1&n)){var f=c&&c$.call(e,"__wrapped__"),p=h&&c$.call(t,"__wrapped__");if(f||p){var v=f?e.value():e,m=p?t.value():t;return o||(o=new _Y),i(v,m,n,r,o)}}return!!d&&(o||(o=new _Y),GZ(e,t,n,r,i,o))};var d$=function e(t,n,r,i,o){return t===n||(null==t||null==n||!VY(t)&&!VY(n)?t!==t&&n!==n:h$(t,n,r,i,e,o))};var f$=function(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(void 0===u&&!(l in e))return!1}else{var h=new _Y;if(r)var d=r(u,c,l,e,t,h);if(!(void 0===d?d$(c,u,3,r,h):d))return!1}}return!0};var p$=function(e){return e===e&&!LX(e)};var v$=function(e){for(var t=xq(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,p$(i)]}return t};var m$=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var g$=function(e){var t=v$(e);return 1==t.length&&t[0][2]?m$(t[0][0],t[0][1]):function(n){return n===e||f$(n,e,t)}},y$=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,b$=/^\w*$/;var _$=function(e,t){if(ZY(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!iq(e))||(b$.test(e)||!y$.test(e)||null!=t&&e in Object(t))};function x$(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(x$.Cache||gY),n}x$.Cache=gY;var E$=x$;var w$=function(e){var t=E$(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t},T$=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,S$=/\\(\\)?/g,k$=w$((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(T$,(function(e,n,r,i){t.push(r?i.replace(S$,"$1"):n||e)})),t})),C$=k$,A$=kX?kX.prototype:void 0,I$=A$?A$.toString:void 0;var O$=function e(t){if("string"==typeof t)return t;if(ZY(t))return xZ(t,e)+"";if(iq(t))return I$?I$.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var P$=function(e){return null==e?"":O$(e)};var M$=function(e,t){return ZY(e)?e:_$(e,t)?[e]:C$(P$(e))};var R$=function(e){if("string"==typeof e||iq(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var N$=function(e,t){for(var n=0,r=(t=M$(t,e)).length;null!=e&&n<r;)e=e[R$(t[n++])];return n&&n==r?e:void 0};var D$=function(e,t,n){var r=null==e?void 0:N$(e,t);return void 0===r?n:r};var L$=function(e,t){return null!=e&&t in Object(e)};var F$=function(e,t,n){for(var r=-1,i=(t=M$(t,e)).length,o=!1;++r<i;){var a=R$(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&$Y(i)&&kK(a,i)&&(ZY(e)||qY(e))};var B$=function(e,t){return null!=e&&F$(e,t,L$)};var U$=function(e,t){return _$(e)&&p$(t)?m$(R$(e),t):function(n){var r=D$(n,e);return void 0===r&&r===t?B$(n,e):d$(t,r,3)}};var H$=function(e){return function(t){return null==t?void 0:t[e]}};var j$=function(e){return function(t){return N$(t,e)}};var z$=function(e){return _$(e)?H$(R$(e)):j$(e)};var V$=function(e){return"function"==typeof e?e:null==e?LK:"object"==typeof e?ZY(e)?U$(e[0],e[1]):g$(e):z$(e)};var G$=function(e,t){var n=-1,r=QY(e)?Array(e.length):[];return Tq(e,(function(e,i,o){r[++n]=t(e,i,o)})),r};var W$=function(e,t){return(ZY(e)?xZ:G$)(e,V$(t,3))},X$=function(e){var t=e.colors,n=e.onClick,r=e.onSwatchHover,i=(0,jW.ZP)({default:{swatches:{marginRight:"-10px"},swatch:{width:"22px",height:"22px",float:"left",marginRight:"10px",marginBottom:"10px",borderRadius:"4px"},clear:{clear:"both"}}});return a.createElement("div",{style:i.swatches},W$(t,(function(e){return a.createElement(gZ,{key:e,color:e,style:i.swatch,onClick:n,onHover:r,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.createElement("div",{style:i.clear}))},Y$=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,s=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d="transparent"===r,f=function(e,n){sZ(e)&&t({hex:e,source:"hex"},n)},p=(0,jW.ZP)(ZK({default:{card:{width:o,background:"#fff",boxShadow:"0 1px rgba(0,0,0,.1)",borderRadius:"6px",position:"relative"},head:{height:"110px",background:r,borderRadius:"6px 6px 0 0",display:"flex",alignItems:"center",justifyContent:"center",position:"relative"},body:{padding:"10px"},label:{fontSize:"18px",color:lZ(r),position:"relative"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 10px 10px 10px",borderColor:"transparent transparent "+r+" transparent",position:"absolute",top:"-10px",left:"50%",marginLeft:"-10px"},input:{width:"100%",fontSize:"12px",color:"#666",border:"0px",outline:"none",height:"22px",boxShadow:"inset 0 0 0 1px #ddd",borderRadius:"4px",padding:"0 7px",boxSizing:"border-box"}},"hide-triangle":{triangle:{display:"none"}}},u),{"hide-triangle":"hide"===s});return a.createElement("div",{style:p.card,className:"block-picker "+h},a.createElement("div",{style:p.triangle}),a.createElement("div",{style:p.head},d&&a.createElement(XW,{borderRadius:"6px 6px 0 0"}),a.createElement("div",{style:p.label},r)),a.createElement("div",{style:p.body},a.createElement(X$,{colors:i,onClick:f,onSwatchHover:n}),a.createElement(nX,{style:{input:p.input},value:r,onChange:f})))};Y$.propTypes={width:lX().oneOfType([lX().string,lX().number]),colors:lX().arrayOf(lX().string),triangle:lX().oneOf(["top","hide"]),styles:lX().object},Y$.defaultProps={width:170,colors:["#D9E3F0","#F47373","#697689","#37D67A","#2CCCE4","#555555","#dce775","#ff8a65","#ba68c8"],triangle:"top",styles:{}};dZ(Y$);var K$={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},q$={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},Z$={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},$$={50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},Q$={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},J$={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},eQ={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},tQ={50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},nQ={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},rQ={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},iQ={50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},oQ={50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},aQ={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},sQ={50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},lQ={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},uQ={50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},cQ={50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},hQ={50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238"},dQ=function(e){var t=e.color,n=e.onClick,r=e.onSwatchHover,i=e.hover,o=e.active,s=e.circleSize,l=e.circleSpacing,u=(0,jW.ZP)({default:{swatch:{width:s,height:s,marginRight:l,marginBottom:l,transform:"scale(1)",transition:"100ms transform ease"},Swatch:{borderRadius:"50%",background:"transparent",boxShadow:"inset 0 0 0 "+(s/2+1)+"px "+t,transition:"100ms box-shadow ease"}},hover:{swatch:{transform:"scale(1.2)"}},active:{Swatch:{boxShadow:"inset 0 0 0 3px "+t}}},{hover:i,active:o});return a.createElement("div",{style:u.swatch},a.createElement(gZ,{style:u.Swatch,color:t,onClick:n,onHover:r,focusStyle:{boxShadow:u.Swatch.boxShadow+", 0 0 5px "+t}}))};dQ.defaultProps={circleSize:28,circleSpacing:14};var fQ=(0,jW.tz)(dQ),pQ=function(e){var t=e.width,n=e.onChange,r=e.onSwatchHover,i=e.colors,o=e.hex,s=e.circleSize,l=e.styles,u=void 0===l?{}:l,c=e.circleSpacing,h=e.className,d=void 0===h?"":h,f=(0,jW.ZP)(ZK({default:{card:{width:t,display:"flex",flexWrap:"wrap",marginRight:-c,marginBottom:-c}}},u)),p=function(e,t){return n({hex:e,source:"hex"},t)};return a.createElement("div",{style:f.card,className:"circle-picker "+d},W$(i,(function(e){return a.createElement(fQ,{key:e,color:e,onClick:p,onSwatchHover:r,active:o===e.toLowerCase(),circleSize:s,circleSpacing:c})})))};pQ.propTypes={width:lX().oneOfType([lX().string,lX().number]),circleSize:lX().number,circleSpacing:lX().number,styles:lX().object},pQ.defaultProps={width:252,circleSize:28,circleSpacing:14,colors:[K$[500],q$[500],Z$[500],$$[500],Q$[500],J$[500],eQ[500],tQ[500],nQ[500],rQ[500],iQ[500],oQ[500],aQ[500],sQ[500],lQ[500],uQ[500],cQ[500],hQ[500]],styles:{}};dZ(pQ);var vQ=function(e){return void 0===e},mQ=r(3050),gQ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var yQ=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.toggleViews=function(){"hex"===n.state.view?n.setState({view:"rgb"}):"rgb"===n.state.view?n.setState({view:"hsl"}):"hsl"===n.state.view&&(1===n.props.hsl.a?n.setState({view:"hex"}):n.setState({view:"rgb"}))},n.handleChange=function(e,t){e.hex?sZ(e.hex)&&n.props.onChange({hex:e.hex,source:"hex"},t):e.r||e.g||e.b?n.props.onChange({r:e.r||n.props.rgb.r,g:e.g||n.props.rgb.g,b:e.b||n.props.rgb.b,source:"rgb"},t):e.a?(e.a<0?e.a=0:e.a>1&&(e.a=1),n.props.onChange({h:n.props.hsl.h,s:n.props.hsl.s,l:n.props.hsl.l,a:Math.round(100*e.a)/100,source:"rgb"},t)):(e.h||e.s||e.l)&&("string"===typeof e.s&&e.s.includes("%")&&(e.s=e.s.replace("%","")),"string"===typeof e.l&&e.l.includes("%")&&(e.l=e.l.replace("%","")),1==e.s?e.s=.01:1==e.l&&(e.l=.01),n.props.onChange({h:e.h||n.props.hsl.h,s:Number(vQ(e.s)?n.props.hsl.s:e.s),l:Number(vQ(e.l)?n.props.hsl.l:e.l),source:"hsl"},t))},n.showHighlight=function(e){e.currentTarget.style.background="#eee"},n.hideHighlight=function(e){e.currentTarget.style.background="transparent"},1!==e.hsl.a&&"hex"===e.view?n.state={view:"rgb"}:n.state={view:e.view},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),gQ(t,[{key:"render",value:function(){var e=this,t=(0,jW.ZP)({default:{wrap:{paddingTop:"16px",display:"flex"},fields:{flex:"1",display:"flex",marginLeft:"-6px"},field:{paddingLeft:"6px",width:"100%"},alpha:{paddingLeft:"6px",width:"100%"},toggle:{width:"32px",textAlign:"right",position:"relative"},icon:{marginRight:"-4px",marginTop:"12px",cursor:"pointer",position:"relative"},iconHighlight:{position:"absolute",width:"24px",height:"28px",background:"#eee",borderRadius:"4px",top:"10px",left:"12px",display:"none"},input:{fontSize:"11px",color:"#333",width:"100%",borderRadius:"2px",border:"none",boxShadow:"inset 0 0 0 1px #dadada",height:"21px",textAlign:"center"},label:{textTransform:"uppercase",fontSize:"11px",lineHeight:"11px",color:"#969696",textAlign:"center",display:"block",marginTop:"12px"},svg:{fill:"#333",width:"24px",height:"24px",border:"1px transparent solid",borderRadius:"5px"}},disableAlpha:{alpha:{display:"none"}}},this.props,this.state),n=void 0;return"hex"===this.state.view?n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"hex",value:this.props.hex,onChange:this.handleChange}))):"rgb"===this.state.view?n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"r",value:this.props.rgb.r,onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"g",value:this.props.rgb.g,onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"b",value:this.props.rgb.b,onChange:this.handleChange})),a.createElement("div",{style:t.alpha},a.createElement(nX,{style:{input:t.input,label:t.label},label:"a",value:this.props.rgb.a,arrowOffset:.01,onChange:this.handleChange}))):"hsl"===this.state.view&&(n=a.createElement("div",{style:t.fields,className:"flexbox-fix"},a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"h",value:Math.round(this.props.hsl.h),onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"s",value:Math.round(100*this.props.hsl.s)+"%",onChange:this.handleChange})),a.createElement("div",{style:t.field},a.createElement(nX,{style:{input:t.input,label:t.label},label:"l",value:Math.round(100*this.props.hsl.l)+"%",onChange:this.handleChange})),a.createElement("div",{style:t.alpha},a.createElement(nX,{style:{input:t.input,label:t.label},label:"a",value:this.props.hsl.a,arrowOffset:.01,onChange:this.handleChange})))),a.createElement("div",{style:t.wrap,className:"flexbox-fix"},n,a.createElement("div",{style:t.toggle},a.createElement("div",{style:t.icon,onClick:this.toggleViews,ref:function(t){return e.icon=t}},a.createElement(mQ.Z,{style:t.svg,onMouseOver:this.showHighlight,onMouseEnter:this.showHighlight,onMouseOut:this.hideHighlight}))))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return 1!==e.hsl.a&&"hex"===t.view?{view:"rgb"}:null}}]),t}(a.Component);yQ.defaultProps={view:"hex"};var bQ=yQ,_Q=function(){var e=(0,jW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",transform:"translate(-6px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.createElement("div",{style:e.picker})},xQ=function(){var e=(0,jW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}}});return a.createElement("div",{style:e.picker})},EQ=function(e){var t=e.width,n=e.onChange,r=e.disableAlpha,i=e.rgb,o=e.hsl,s=e.hsv,l=e.hex,u=e.renderers,c=e.styles,h=void 0===c?{}:c,d=e.className,f=void 0===d?"":d,p=e.defaultView,v=(0,jW.ZP)(ZK({default:{picker:{width:t,background:"#fff",borderRadius:"2px",boxShadow:"0 0 2px rgba(0,0,0,.3), 0 4px 8px rgba(0,0,0,.3)",boxSizing:"initial",fontFamily:"Menlo"},saturation:{width:"100%",paddingBottom:"55%",position:"relative",borderRadius:"2px 2px 0 0",overflow:"hidden"},Saturation:{radius:"2px 2px 0 0"},body:{padding:"16px 16px 12px"},controls:{display:"flex"},color:{width:"32px"},swatch:{marginTop:"6px",width:"16px",height:"16px",borderRadius:"8px",position:"relative",overflow:"hidden"},active:{absolute:"0px 0px 0px 0px",borderRadius:"8px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.1)",background:"rgba("+i.r+", "+i.g+", "+i.b+", "+i.a+")",zIndex:"2"},toggles:{flex:"1"},hue:{height:"10px",position:"relative",marginBottom:"8px"},Hue:{radius:"2px"},alpha:{height:"10px",position:"relative"},Alpha:{radius:"2px"}},disableAlpha:{color:{width:"22px"},alpha:{display:"none"},hue:{marginBottom:"0px"},swatch:{width:"10px",height:"10px",marginTop:"0px"}}},h),{disableAlpha:r});return a.createElement("div",{style:v.picker,className:"chrome-picker "+f},a.createElement("div",{style:v.saturation},a.createElement(mq,{style:v.Saturation,hsl:o,hsv:s,pointer:xQ,onChange:n})),a.createElement("div",{style:v.body},a.createElement("div",{style:v.controls,className:"flexbox-fix"},a.createElement("div",{style:v.color},a.createElement("div",{style:v.swatch},a.createElement("div",{style:v.active}),a.createElement(XW,{renderers:u}))),a.createElement("div",{style:v.toggles},a.createElement("div",{style:v.hue},a.createElement(aX,{style:v.Hue,hsl:o,pointer:_Q,onChange:n})),a.createElement("div",{style:v.alpha},a.createElement($W,{style:v.Alpha,rgb:i,hsl:o,pointer:_Q,renderers:u,onChange:n})))),a.createElement(bQ,{rgb:i,hsl:o,hex:l,view:p,onChange:n,disableAlpha:r})))};EQ.propTypes={width:lX().oneOfType([lX().string,lX().number]),disableAlpha:lX().bool,styles:lX().object,defaultView:lX().oneOf(["hex","rgb","hsl"])},EQ.defaultProps={width:225,disableAlpha:!1,styles:{}};dZ(EQ);var wQ=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.active,s=(0,jW.ZP)({default:{color:{background:t,width:"15px",height:"15px",float:"left",marginRight:"5px",marginBottom:"5px",position:"relative",cursor:"pointer"},dot:{absolute:"5px 5px 5px 5px",background:lZ(t),borderRadius:"50%",opacity:"0"}},active:{dot:{opacity:"1"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},dot:{background:"#000"}},transparent:{dot:{background:"#000"}}},{active:o,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.createElement(gZ,{style:s.color,color:t,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},a.createElement("div",{style:s.dot}))},TQ=function(e){var t=e.hex,n=e.rgb,r=e.onChange,i=(0,jW.ZP)({default:{fields:{display:"flex",paddingBottom:"6px",paddingRight:"5px",position:"relative"},active:{position:"absolute",top:"6px",left:"5px",height:"9px",width:"9px",background:t},HEXwrap:{flex:"6",position:"relative"},HEXinput:{width:"80%",padding:"0px",paddingLeft:"20%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},HEXlabel:{display:"none"},RGBwrap:{flex:"3",position:"relative"},RGBinput:{width:"70%",padding:"0px",paddingLeft:"30%",border:"none",outline:"none",background:"none",fontSize:"12px",color:"#333",height:"16px"},RGBlabel:{position:"absolute",top:"3px",left:"0px",lineHeight:"16px",textTransform:"uppercase",fontSize:"12px",color:"#999"}}}),o=function(e,t){e.r||e.g||e.b?r({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},t):r({hex:e.hex,source:"hex"},t)};return a.createElement("div",{style:i.fields,className:"flexbox-fix"},a.createElement("div",{style:i.active}),a.createElement(nX,{style:{wrap:i.HEXwrap,input:i.HEXinput,label:i.HEXlabel},label:"hex",value:t,onChange:o}),a.createElement(nX,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"r",value:n.r,onChange:o}),a.createElement(nX,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"g",value:n.g,onChange:o}),a.createElement(nX,{style:{wrap:i.RGBwrap,input:i.RGBinput,label:i.RGBlabel},label:"b",value:n.b,onChange:o}))},SQ=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.colors,i=e.hex,o=e.rgb,s=e.styles,l=void 0===s?{}:s,u=e.className,c=void 0===u?"":u,h=(0,jW.ZP)(ZK({default:{Compact:{background:"#f6f6f6",radius:"4px"},compact:{paddingTop:"5px",paddingLeft:"5px",boxSizing:"initial",width:"240px"},clear:{clear:"both"}}},l)),d=function(e,n){e.hex?sZ(e.hex)&&t({hex:e.hex,source:"hex"},n):t(e,n)};return a.createElement(QK,{style:h.Compact,styles:l},a.createElement("div",{style:h.compact,className:"compact-picker "+c},a.createElement("div",null,W$(r,(function(e){return a.createElement(wQ,{key:e,color:e,active:e.toLowerCase()===i,onClick:d,onSwatchHover:n})})),a.createElement("div",{style:h.clear})),a.createElement(TQ,{hex:i,rgb:o,onChange:d})))};SQ.propTypes={colors:lX().arrayOf(lX().string),styles:lX().object},SQ.defaultProps={colors:["#4D4D4D","#999999","#FFFFFF","#F44E3B","#FE9200","#FCDC00","#DBDF00","#A4DD00","#68CCCA","#73D8FF","#AEA1FF","#FDA1FF","#333333","#808080","#cccccc","#D33115","#E27300","#FCC400","#B0BC00","#68BC00","#16A5A5","#009CE0","#7B64FF","#FA28FF","#000000","#666666","#B3B3B3","#9F0500","#C45100","#FB9E00","#808900","#194D33","#0C797D","#0062B1","#653294","#AB149E"],styles:{}};dZ(SQ);var kQ=(0,jW.tz)((function(e){var t=e.hover,n=e.color,r=e.onClick,i=e.onSwatchHover,o={position:"relative",zIndex:"2",outline:"2px solid #fff",boxShadow:"0 0 5px 2px rgba(0,0,0,0.25)"},s=(0,jW.ZP)({default:{swatch:{width:"25px",height:"25px",fontSize:"0"}},hover:{swatch:o}},{hover:t});return a.createElement("div",{style:s.swatch},a.createElement(gZ,{color:n,onClick:r,onHover:i,focusStyle:o}))})),CQ=function(e){var t=e.width,n=e.colors,r=e.onChange,i=e.onSwatchHover,o=e.triangle,s=e.styles,l=void 0===s?{}:s,u=e.className,c=void 0===u?"":u,h=(0,jW.ZP)(ZK({default:{card:{width:t,background:"#fff",border:"1px solid rgba(0,0,0,0.2)",boxShadow:"0 3px 12px rgba(0,0,0,0.15)",borderRadius:"4px",position:"relative",padding:"5px",display:"flex",flexWrap:"wrap"},triangle:{position:"absolute",border:"7px solid transparent",borderBottomColor:"#fff"},triangleShadow:{position:"absolute",border:"8px solid transparent",borderBottomColor:"rgba(0,0,0,0.15)"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-14px",left:"10px"},triangleShadow:{top:"-16px",left:"9px"}},"top-right-triangle":{triangle:{top:"-14px",right:"10px"},triangleShadow:{top:"-16px",right:"9px"}},"bottom-left-triangle":{triangle:{top:"35px",left:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",left:"9px",transform:"rotate(180deg)"}},"bottom-right-triangle":{triangle:{top:"35px",right:"10px",transform:"rotate(180deg)"},triangleShadow:{top:"37px",right:"9px",transform:"rotate(180deg)"}}},l),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o,"bottom-left-triangle":"bottom-left"===o,"bottom-right-triangle":"bottom-right"===o}),d=function(e,t){return r({hex:e,source:"hex"},t)};return a.createElement("div",{style:h.card,className:"github-picker "+c},a.createElement("div",{style:h.triangleShadow}),a.createElement("div",{style:h.triangle}),W$(n,(function(e){return a.createElement(kQ,{color:e,key:e,onClick:d,onSwatchHover:i})})))};CQ.propTypes={width:lX().oneOfType([lX().string,lX().number]),colors:lX().arrayOf(lX().string),triangle:lX().oneOf(["hide","top-left","top-right","bottom-left","bottom-right"]),styles:lX().object},CQ.defaultProps={width:200,colors:["#B80000","#DB3E00","#FCCB00","#008B02","#006B76","#1273DE","#004DCF","#5300EB","#EB9694","#FAD0C3","#FEF3BD","#C1E1C5","#BEDADC","#C4DEF6","#BED3F3","#D4C4FB"],triangle:"top-left",styles:{}};dZ(CQ);var AQ=function(e){var t=e.direction,n=(0,jW.ZP)({default:{picker:{width:"18px",height:"18px",borderRadius:"50%",transform:"translate(-9px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}},vertical:{picker:{transform:"translate(-3px, -9px)"}}},{vertical:"vertical"===t});return a.createElement("div",{style:n.picker})},IQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},OQ=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.hsl,o=e.direction,s=e.pointer,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,jW.ZP)(ZK({default:{picker:{position:"relative",width:t,height:n},hue:{radius:"2px"}}},u));return a.createElement("div",{style:d.picker,className:"hue-picker "+h},a.createElement(aX,IQ({},d.hue,{hsl:i,pointer:s,onChange:function(e){return r({a:1,h:e.h,l:.5,s:1})},direction:o})))};OQ.propTypes={styles:lX().object},OQ.defaultProps={width:"316px",height:"16px",direction:"horizontal",pointer:AQ,styles:{}};dZ(OQ),dZ((function(e){var t=e.onChange,n=e.hex,r=e.rgb,i=e.styles,o=void 0===i?{}:i,s=e.className,l=void 0===s?"":s,u=(0,jW.ZP)(ZK({default:{material:{width:"98px",height:"98px",padding:"16px",fontFamily:"Roboto"},HEXwrap:{position:"relative"},HEXinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"2px solid "+n,outline:"none",height:"30px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},Hex:{style:{}},RGBwrap:{position:"relative"},RGBinput:{width:"100%",marginTop:"12px",fontSize:"15px",color:"#333",padding:"0px",border:"0px",borderBottom:"1px solid #eee",outline:"none",height:"30px"},RGBlabel:{position:"absolute",top:"0px",left:"0px",fontSize:"11px",color:"#999999",textTransform:"capitalize"},split:{display:"flex",marginRight:"-10px",paddingTop:"11px"},third:{flex:"1",paddingRight:"10px"}}},o)),c=function(e,n){e.hex?sZ(e.hex)&&t({hex:e.hex,source:"hex"},n):(e.r||e.g||e.b)&&t({r:e.r||r.r,g:e.g||r.g,b:e.b||r.b,source:"rgb"},n)};return a.createElement(QK,{styles:o},a.createElement("div",{style:u.material,className:"material-picker "+l},a.createElement(nX,{style:{wrap:u.HEXwrap,input:u.HEXinput,label:u.HEXlabel},label:"hex",value:n,onChange:c}),a.createElement("div",{style:u.split,className:"flexbox-fix"},a.createElement("div",{style:u.third},a.createElement(nX,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"r",value:r.r,onChange:c})),a.createElement("div",{style:u.third},a.createElement(nX,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"g",value:r.g,onChange:c})),a.createElement("div",{style:u.third},a.createElement(nX,{style:{wrap:u.RGBwrap,input:u.RGBinput,label:u.RGBlabel},label:"b",value:r.b,onChange:c})))))}));var PQ=function(e){var t=e.onChange,n=e.rgb,r=e.hsv,i=e.hex,o=(0,jW.ZP)({default:{fields:{paddingTop:"5px",paddingBottom:"9px",width:"80px",position:"relative"},divider:{height:"5px"},RGBwrap:{position:"relative"},RGBinput:{marginLeft:"40%",width:"40%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"5px",fontSize:"13px",paddingLeft:"3px",marginRight:"10px"},RGBlabel:{left:"0px",top:"0px",width:"34px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px",position:"absolute"},HEXwrap:{position:"relative"},HEXinput:{marginLeft:"20%",width:"80%",height:"18px",border:"1px solid #888888",boxShadow:"inset 0 1px 1px rgba(0,0,0,.1), 0 1px 0 0 #ECECEC",marginBottom:"6px",fontSize:"13px",paddingLeft:"3px"},HEXlabel:{position:"absolute",top:"0px",left:"0px",width:"14px",textTransform:"uppercase",fontSize:"13px",height:"18px",lineHeight:"22px"},fieldSymbols:{position:"absolute",top:"5px",right:"-7px",fontSize:"13px"},symbol:{height:"20px",lineHeight:"22px",paddingBottom:"7px"}}}),s=function(e,i){e["#"]?sZ(e["#"])&&t({hex:e["#"],source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,source:"rgb"},i):(e.h||e.s||e.v)&&t({h:e.h||r.h,s:e.s||r.s,v:e.v||r.v,source:"hsv"},i)};return a.createElement("div",{style:o.fields},a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"h",value:Math.round(r.h),onChange:s}),a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"s",value:Math.round(100*r.s),onChange:s}),a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"v",value:Math.round(100*r.v),onChange:s}),a.createElement("div",{style:o.divider}),a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"r",value:n.r,onChange:s}),a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"g",value:n.g,onChange:s}),a.createElement(nX,{style:{wrap:o.RGBwrap,input:o.RGBinput,label:o.RGBlabel},label:"b",value:n.b,onChange:s}),a.createElement("div",{style:o.divider}),a.createElement(nX,{style:{wrap:o.HEXwrap,input:o.HEXinput,label:o.HEXlabel},label:"#",value:i.replace("#",""),onChange:s}),a.createElement("div",{style:o.fieldSymbols},a.createElement("div",{style:o.symbol},"\xb0"),a.createElement("div",{style:o.symbol},"%"),a.createElement("div",{style:o.symbol},"%")))},MQ=function(e){var t=e.hsl,n=(0,jW.ZP)({default:{picker:{width:"12px",height:"12px",borderRadius:"6px",boxShadow:"inset 0 0 0 1px #fff",transform:"translate(-6px, -6px)"}},"black-outline":{picker:{boxShadow:"inset 0 0 0 1px #000"}}},{"black-outline":t.l>.5});return a.createElement("div",{style:n.picker})},RQ=function(){var e=(0,jW.ZP)({default:{triangle:{width:0,height:0,borderStyle:"solid",borderWidth:"4px 0 4px 6px",borderColor:"transparent transparent transparent #fff",position:"absolute",top:"1px",left:"1px"},triangleBorder:{width:0,height:0,borderStyle:"solid",borderWidth:"5px 0 5px 8px",borderColor:"transparent transparent transparent #555"},left:{Extend:"triangleBorder",transform:"translate(-13px, -4px)"},leftInside:{Extend:"triangle",transform:"translate(-8px, -5px)"},right:{Extend:"triangleBorder",transform:"translate(20px, -14px) rotate(180deg)"},rightInside:{Extend:"triangle",transform:"translate(-8px, -5px)"}}});return a.createElement("div",{style:e.pointer},a.createElement("div",{style:e.left},a.createElement("div",{style:e.leftInside})),a.createElement("div",{style:e.right},a.createElement("div",{style:e.rightInside})))},NQ=function(e){var t=e.onClick,n=e.label,r=e.children,i=e.active,o=(0,jW.ZP)({default:{button:{backgroundImage:"linear-gradient(-180deg, #FFFFFF 0%, #E6E6E6 100%)",border:"1px solid #878787",borderRadius:"2px",height:"20px",boxShadow:"0 1px 0 0 #EAEAEA",fontSize:"14px",color:"#000",lineHeight:"20px",textAlign:"center",marginBottom:"10px",cursor:"pointer"}},active:{button:{boxShadow:"0 0 0 1px #878787"}}},{active:i});return a.createElement("div",{style:o.button,onClick:t},n||r)},DQ=function(e){var t=e.rgb,n=e.currentColor,r=(0,jW.ZP)({default:{swatches:{border:"1px solid #B3B3B3",borderBottom:"1px solid #F0F0F0",marginBottom:"2px",marginTop:"1px"},new:{height:"34px",background:"rgb("+t.r+","+t.g+", "+t.b+")",boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 1px 0 #000"},current:{height:"34px",background:n,boxShadow:"inset 1px 0 0 #000, inset -1px 0 0 #000, inset 0 -1px 0 #000"},label:{fontSize:"14px",color:"#000",textAlign:"center"}}});return a.createElement("div",null,a.createElement("div",{style:r.label},"new"),a.createElement("div",{style:r.swatches},a.createElement("div",{style:r.new}),a.createElement("div",{style:r.current})),a.createElement("div",{style:r.label},"current"))},LQ=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var FQ=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={currentColor:e.hex},n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),LQ(t,[{key:"render",value:function(){var e=this.props,t=e.styles,n=void 0===t?{}:t,r=e.className,i=void 0===r?"":r,o=(0,jW.ZP)(ZK({default:{picker:{background:"#DCDCDC",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.25), 0 8px 16px rgba(0,0,0,.15)",boxSizing:"initial",width:"513px"},head:{backgroundImage:"linear-gradient(-180deg, #F0F0F0 0%, #D4D4D4 100%)",borderBottom:"1px solid #B1B1B1",boxShadow:"inset 0 1px 0 0 rgba(255,255,255,.2), inset 0 -1px 0 0 rgba(0,0,0,.02)",height:"23px",lineHeight:"24px",borderRadius:"4px 4px 0 0",fontSize:"13px",color:"#4D4D4D",textAlign:"center"},body:{padding:"15px 15px 0",display:"flex"},saturation:{width:"256px",height:"256px",position:"relative",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0",overflow:"hidden"},hue:{position:"relative",height:"256px",width:"19px",marginLeft:"10px",border:"2px solid #B3B3B3",borderBottom:"2px solid #F0F0F0"},controls:{width:"180px",marginLeft:"10px"},top:{display:"flex"},previews:{width:"60px"},actions:{flex:"1",marginLeft:"20px"}}},n));return a.createElement("div",{style:o.picker,className:"photoshop-picker "+i},a.createElement("div",{style:o.head},this.props.header),a.createElement("div",{style:o.body,className:"flexbox-fix"},a.createElement("div",{style:o.saturation},a.createElement(mq,{hsl:this.props.hsl,hsv:this.props.hsv,pointer:MQ,onChange:this.props.onChange})),a.createElement("div",{style:o.hue},a.createElement(aX,{direction:"vertical",hsl:this.props.hsl,pointer:RQ,onChange:this.props.onChange})),a.createElement("div",{style:o.controls},a.createElement("div",{style:o.top,className:"flexbox-fix"},a.createElement("div",{style:o.previews},a.createElement(DQ,{rgb:this.props.rgb,currentColor:this.state.currentColor})),a.createElement("div",{style:o.actions},a.createElement(NQ,{label:"OK",onClick:this.props.onAccept,active:!0}),a.createElement(NQ,{label:"Cancel",onClick:this.props.onCancel}),a.createElement(PQ,{onChange:this.props.onChange,rgb:this.props.rgb,hsv:this.props.hsv,hex:this.props.hex}))))))}}]),t}(a.Component);FQ.propTypes={header:lX().string,styles:lX().object},FQ.defaultProps={header:"Color Picker",styles:{}};dZ(FQ);var BQ=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.disableAlpha,s=(0,jW.ZP)({default:{fields:{display:"flex",paddingTop:"4px"},single:{flex:"1",paddingLeft:"6px"},alpha:{flex:"1",paddingLeft:"6px"},double:{flex:"2"},input:{width:"80%",padding:"4px 10% 3px",border:"none",boxShadow:"inset 0 0 0 1px #ccc",fontSize:"11px"},label:{display:"block",textAlign:"center",fontSize:"11px",color:"#222",paddingTop:"3px",paddingBottom:"4px",textTransform:"capitalize"}},disableAlpha:{alpha:{display:"none"}}},{disableAlpha:o}),l=function(e,i){e.hex?sZ(e.hex)&&t({hex:e.hex,source:"hex"},i):e.r||e.g||e.b?t({r:e.r||n.r,g:e.g||n.g,b:e.b||n.b,a:n.a,source:"rgb"},i):e.a&&(e.a<0?e.a=0:e.a>100&&(e.a=100),e.a/=100,t({h:r.h,s:r.s,l:r.l,a:e.a,source:"rgb"},i))};return a.createElement("div",{style:s.fields,className:"flexbox-fix"},a.createElement("div",{style:s.double},a.createElement(nX,{style:{input:s.input,label:s.label},label:"hex",value:i.replace("#",""),onChange:l})),a.createElement("div",{style:s.single},a.createElement(nX,{style:{input:s.input,label:s.label},label:"r",value:n.r,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.single},a.createElement(nX,{style:{input:s.input,label:s.label},label:"g",value:n.g,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.single},a.createElement(nX,{style:{input:s.input,label:s.label},label:"b",value:n.b,onChange:l,dragLabel:"true",dragMax:"255"})),a.createElement("div",{style:s.alpha},a.createElement(nX,{style:{input:s.input,label:s.label},label:"a",value:Math.round(100*n.a),onChange:l,dragLabel:"true",dragMax:"100"})))},UQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HQ=function(e){var t=e.colors,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=(0,jW.ZP)({default:{colors:{margin:"0 -10px",padding:"10px 0 0 10px",borderTop:"1px solid #eee",display:"flex",flexWrap:"wrap",position:"relative"},swatchWrap:{width:"16px",height:"16px",margin:"0 10px 10px 0"},swatch:{borderRadius:"3px",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15)"}},"no-presets":{colors:{display:"none"}}},{"no-presets":!t||!t.length}),s=function(e,t){r({hex:e,source:"hex"},t)};return a.createElement("div",{style:o.colors,className:"flexbox-fix"},t.map((function(e){var t="string"===typeof e?{color:e}:e,n=""+t.color+(t.title||"");return a.createElement("div",{key:n,style:o.swatchWrap},a.createElement(gZ,UQ({},t,{style:o.swatch,onClick:s,onHover:i,focusStyle:{boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), 0 0 4px "+t.color}})))})))};HQ.propTypes={colors:lX().arrayOf(lX().oneOfType([lX().string,lX().shape({color:lX().string,title:lX().string})])).isRequired};var jQ=HQ,zQ=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VQ=function(e){var t=e.width,n=e.rgb,r=e.hex,i=e.hsv,o=e.hsl,s=e.onChange,l=e.onSwatchHover,u=e.disableAlpha,c=e.presetColors,h=e.renderers,d=e.styles,f=void 0===d?{}:d,p=e.className,v=void 0===p?"":p,m=(0,jW.ZP)(ZK({default:zQ({picker:{width:t,padding:"10px 10px 0",boxSizing:"initial",background:"#fff",borderRadius:"4px",boxShadow:"0 0 0 1px rgba(0,0,0,.15), 0 8px 16px rgba(0,0,0,.15)"},saturation:{width:"100%",paddingBottom:"75%",position:"relative",overflow:"hidden"},Saturation:{radius:"3px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},controls:{display:"flex"},sliders:{padding:"4px 0",flex:"1"},color:{width:"24px",height:"24px",position:"relative",marginTop:"4px",marginLeft:"4px",borderRadius:"3px"},activeColor:{absolute:"0px 0px 0px 0px",borderRadius:"2px",background:"rgba("+n.r+","+n.g+","+n.b+","+n.a+")",boxShadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},hue:{position:"relative",height:"10px",overflow:"hidden"},Hue:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"},alpha:{position:"relative",height:"10px",marginTop:"4px",overflow:"hidden"},Alpha:{radius:"2px",shadow:"inset 0 0 0 1px rgba(0,0,0,.15), inset 0 0 4px rgba(0,0,0,.25)"}},f),disableAlpha:{color:{height:"10px"},hue:{height:"10px"},alpha:{display:"none"}}},f),{disableAlpha:u});return a.createElement("div",{style:m.picker,className:"sketch-picker "+v},a.createElement("div",{style:m.saturation},a.createElement(mq,{style:m.Saturation,hsl:o,hsv:i,onChange:s})),a.createElement("div",{style:m.controls,className:"flexbox-fix"},a.createElement("div",{style:m.sliders},a.createElement("div",{style:m.hue},a.createElement(aX,{style:m.Hue,hsl:o,onChange:s})),a.createElement("div",{style:m.alpha},a.createElement($W,{style:m.Alpha,rgb:n,hsl:o,renderers:h,onChange:s}))),a.createElement("div",{style:m.color},a.createElement(XW,null),a.createElement("div",{style:m.activeColor}))),a.createElement(BQ,{rgb:n,hsl:o,hex:r,onChange:s,disableAlpha:u}),a.createElement(jQ,{colors:c,onClick:s,onSwatchHover:l}))};VQ.propTypes={disableAlpha:lX().bool,width:lX().oneOfType([lX().string,lX().number]),styles:lX().object},VQ.defaultProps={disableAlpha:!1,width:200,styles:{},presetColors:["#D0021B","#F5A623","#F8E71C","#8B572A","#7ED321","#417505","#BD10E0","#9013FE","#4A90E2","#50E3C2","#B8E986","#000000","#4A4A4A","#9B9B9B","#FFFFFF"]};var GQ=dZ(VQ),WQ=function(e){var t=e.hsl,n=e.offset,r=e.onClick,i=void 0===r?function(){}:r,o=e.active,s=e.first,l=e.last,u=(0,jW.ZP)({default:{swatch:{height:"12px",background:"hsl("+t.h+", 50%, "+100*n+"%)",cursor:"pointer"}},first:{swatch:{borderRadius:"2px 0 0 2px"}},last:{swatch:{borderRadius:"0 2px 2px 0"}},active:{swatch:{transform:"scaleY(1.8)",borderRadius:"3.6px/2px"}}},{active:o,first:s,last:l});return a.createElement("div",{style:u.swatch,onClick:function(e){return i({h:t.h,s:.5,l:n,source:"hsl"},e)}})},XQ=function(e){var t=e.onClick,n=e.hsl,r=(0,jW.ZP)({default:{swatches:{marginTop:"20px"},swatch:{boxSizing:"border-box",width:"20%",paddingRight:"1px",float:"left"},clear:{clear:"both"}}}),i=.1;return a.createElement("div",{style:r.swatches},a.createElement("div",{style:r.swatch},a.createElement(WQ,{hsl:n,offset:".80",active:Math.abs(n.l-.8)<i&&Math.abs(n.s-.5)<i,onClick:t,first:!0})),a.createElement("div",{style:r.swatch},a.createElement(WQ,{hsl:n,offset:".65",active:Math.abs(n.l-.65)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(WQ,{hsl:n,offset:".50",active:Math.abs(n.l-.5)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(WQ,{hsl:n,offset:".35",active:Math.abs(n.l-.35)<i&&Math.abs(n.s-.5)<i,onClick:t})),a.createElement("div",{style:r.swatch},a.createElement(WQ,{hsl:n,offset:".20",active:Math.abs(n.l-.2)<i&&Math.abs(n.s-.5)<i,onClick:t,last:!0})),a.createElement("div",{style:r.clear}))},YQ=function(){var e=(0,jW.ZP)({default:{picker:{width:"14px",height:"14px",borderRadius:"6px",transform:"translate(-7px, -1px)",backgroundColor:"rgb(248, 248, 248)",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.37)"}}});return a.createElement("div",{style:e.picker})},KQ=function(e){var t=e.hsl,n=e.onChange,r=e.pointer,i=e.styles,o=void 0===i?{}:i,s=e.className,l=void 0===s?"":s,u=(0,jW.ZP)(ZK({default:{hue:{height:"12px",position:"relative"},Hue:{radius:"2px"}}},o));return a.createElement("div",{style:u.wrap||{},className:"slider-picker "+l},a.createElement("div",{style:u.hue},a.createElement(aX,{style:u.Hue,hsl:t,pointer:r,onChange:n})),a.createElement("div",{style:u.swatches},a.createElement(XQ,{hsl:t,onClick:n})))};KQ.propTypes={styles:lX().object},KQ.defaultProps={pointer:YQ,styles:{}};dZ(KQ);var qQ=r(9932),ZQ=function(e){var t=e.color,n=e.onClick,r=void 0===n?function(){}:n,i=e.onSwatchHover,o=e.first,s=e.last,l=e.active,u=(0,jW.ZP)({default:{color:{width:"40px",height:"24px",cursor:"pointer",background:t,marginBottom:"1px"},check:{color:lZ(t),marginLeft:"8px",display:"none"}},first:{color:{overflow:"hidden",borderRadius:"2px 2px 0 0"}},last:{color:{overflow:"hidden",borderRadius:"0 0 2px 2px"}},active:{check:{display:"block"}},"color-#FFFFFF":{color:{boxShadow:"inset 0 0 0 1px #ddd"},check:{color:"#333"}},transparent:{check:{color:"#333"}}},{first:o,last:s,active:l,"color-#FFFFFF":"#FFFFFF"===t,transparent:"transparent"===t});return a.createElement(gZ,{color:t,style:u.color,onClick:r,onHover:i,focusStyle:{boxShadow:"0 0 4px "+t}},a.createElement("div",{style:u.check},a.createElement(qQ.Z,null)))},$Q=function(e){var t=e.onClick,n=e.onSwatchHover,r=e.group,i=e.active,o=(0,jW.ZP)({default:{group:{paddingBottom:"10px",width:"40px",float:"left",marginRight:"10px"}}});return a.createElement("div",{style:o.group},W$(r,(function(e,o){return a.createElement(ZQ,{key:e,color:e,active:e.toLowerCase()===i,first:0===o,last:o===r.length-1,onClick:t,onSwatchHover:n})})))},QQ=function(e){var t=e.width,n=e.height,r=e.onChange,i=e.onSwatchHover,o=e.colors,s=e.hex,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,jW.ZP)(ZK({default:{picker:{width:t,height:n},overflow:{height:n,overflowY:"scroll"},body:{padding:"16px 0 6px 16px"},clear:{clear:"both"}}},u)),f=function(e,t){return r({hex:e,source:"hex"},t)};return a.createElement("div",{style:d.picker,className:"swatches-picker "+h},a.createElement(QK,null,a.createElement("div",{style:d.overflow},a.createElement("div",{style:d.body},W$(o,(function(e){return a.createElement($Q,{key:e.toString(),group:e,active:s,onClick:f,onSwatchHover:i})})),a.createElement("div",{style:d.clear})))))};QQ.propTypes={width:lX().oneOfType([lX().string,lX().number]),height:lX().oneOfType([lX().string,lX().number]),colors:lX().arrayOf(lX().arrayOf(lX().string)),styles:lX().object},QQ.defaultProps={width:320,height:240,colors:[[K$[900],K$[700],K$[500],K$[300],K$[100]],[q$[900],q$[700],q$[500],q$[300],q$[100]],[Z$[900],Z$[700],Z$[500],Z$[300],Z$[100]],[$$[900],$$[700],$$[500],$$[300],$$[100]],[Q$[900],Q$[700],Q$[500],Q$[300],Q$[100]],[J$[900],J$[700],J$[500],J$[300],J$[100]],[eQ[900],eQ[700],eQ[500],eQ[300],eQ[100]],[tQ[900],tQ[700],tQ[500],tQ[300],tQ[100]],[nQ[900],nQ[700],nQ[500],nQ[300],nQ[100]],["#194D33",rQ[700],rQ[500],rQ[300],rQ[100]],[iQ[900],iQ[700],iQ[500],iQ[300],iQ[100]],[oQ[900],oQ[700],oQ[500],oQ[300],oQ[100]],[aQ[900],aQ[700],aQ[500],aQ[300],aQ[100]],[sQ[900],sQ[700],sQ[500],sQ[300],sQ[100]],[lQ[900],lQ[700],lQ[500],lQ[300],lQ[100]],[uQ[900],uQ[700],uQ[500],uQ[300],uQ[100]],[cQ[900],cQ[700],cQ[500],cQ[300],cQ[100]],[hQ[900],hQ[700],hQ[500],hQ[300],hQ[100]],["#000000","#525252","#969696","#D9D9D9","#FFFFFF"]],styles:{}};dZ(QQ);var JQ=function(e){var t=e.onChange,n=e.onSwatchHover,r=e.hex,i=e.colors,o=e.width,s=e.triangle,l=e.styles,u=void 0===l?{}:l,c=e.className,h=void 0===c?"":c,d=(0,jW.ZP)(ZK({default:{card:{width:o,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px"},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},u),{"hide-triangle":"hide"===s,"top-left-triangle":"top-left"===s,"top-right-triangle":"top-right"===s}),f=function(e,n){sZ(e)&&t({hex:e,source:"hex"},n)};return a.createElement("div",{style:d.card,className:"twitter-picker "+h},a.createElement("div",{style:d.triangleShadow}),a.createElement("div",{style:d.triangle}),a.createElement("div",{style:d.body},W$(i,(function(e,t){return a.createElement(gZ,{key:t,color:e,hex:e,style:d.swatch,onClick:f,onHover:n,focusStyle:{boxShadow:"0 0 4px "+e}})})),a.createElement("div",{style:d.hash},"#"),a.createElement(nX,{label:null,style:{input:d.input},value:r.replace("#",""),onChange:f}),a.createElement("div",{style:d.clear})))};JQ.propTypes={width:lX().oneOfType([lX().string,lX().number]),triangle:lX().oneOf(["hide","top-left","top-right"]),colors:lX().arrayOf(lX().string),styles:lX().object},JQ.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};dZ(JQ);var eJ=function(e){var t=(0,jW.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",border:"2px #fff solid",transform:"translate(-12px, -13px)",background:"hsl("+Math.round(e.hsl.h)+", "+Math.round(100*e.hsl.s)+"%, "+Math.round(100*e.hsl.l)+"%)"}}});return a.createElement("div",{style:t.picker})};eJ.propTypes={hsl:lX().shape({h:lX().number,s:lX().number,l:lX().number,a:lX().number})},eJ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var tJ=eJ,nJ=function(e){var t=(0,jW.ZP)({default:{picker:{width:"20px",height:"20px",borderRadius:"22px",transform:"translate(-10px, -7px)",background:"hsl("+Math.round(e.hsl.h)+", 100%, 50%)",border:"2px white solid"}}});return a.createElement("div",{style:t.picker})};nJ.propTypes={hsl:lX().shape({h:lX().number,s:lX().number,l:lX().number,a:lX().number})},nJ.defaultProps={hsl:{a:1,h:249.94,l:.2,s:.5}};var rJ=nJ,iJ=function(e){var t=e.onChange,n=e.rgb,r=e.hsl,i=e.hex,o=e.hsv,s=function(e,n){if(e.hex)sZ(e.hex)&&t({hex:e.hex,source:"hex"},n);else if(e.rgb){var r=e.rgb.split(",");uZ(e.rgb,"rgb")&&t({r:r[0],g:r[1],b:r[2],a:1,source:"rgb"},n)}else if(e.hsv){var i=e.hsv.split(",");uZ(e.hsv,"hsv")&&(i[2]=i[2].replace("%",""),i[1]=i[1].replace("%",""),i[0]=i[0].replace("\xb0",""),1==i[1]?i[1]=.01:1==i[2]&&(i[2]=.01),t({h:Number(i[0]),s:Number(i[1]),v:Number(i[2]),source:"hsv"},n))}else if(e.hsl){var o=e.hsl.split(",");uZ(e.hsl,"hsl")&&(o[2]=o[2].replace("%",""),o[1]=o[1].replace("%",""),o[0]=o[0].replace("\xb0",""),1==h[1]?h[1]=.01:1==h[2]&&(h[2]=.01),t({h:Number(o[0]),s:Number(o[1]),v:Number(o[2]),source:"hsl"},n))}},l=(0,jW.ZP)({default:{wrap:{display:"flex",height:"100px",marginTop:"4px"},fields:{width:"100%"},column:{paddingTop:"10px",display:"flex",justifyContent:"space-between"},double:{padding:"0px 4.4px",boxSizing:"border-box"},input:{width:"100%",height:"38px",boxSizing:"border-box",padding:"4px 10% 3px",textAlign:"center",border:"1px solid #dadce0",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",fontFamily:"Roboto,Arial,sans-serif"},input2:{height:"38px",width:"100%",border:"1px solid #dadce0",boxSizing:"border-box",fontSize:"11px",textTransform:"lowercase",borderRadius:"5px",outline:"none",paddingLeft:"10px",fontFamily:"Roboto,Arial,sans-serif"},label:{textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"35px",top:"-6px",left:"0",right:"0",marginLeft:"auto",marginRight:"auto",fontFamily:"Roboto,Arial,sans-serif"},label2:{left:"10px",textAlign:"center",fontSize:"12px",background:"#fff",position:"absolute",textTransform:"uppercase",color:"#3c4043",width:"32px",top:"-6px",fontFamily:"Roboto,Arial,sans-serif"},single:{flexGrow:"1",margin:"0px 4.4px"}}}),u=n.r+", "+n.g+", "+n.b,c=Math.round(r.h)+"\xb0, "+Math.round(100*r.s)+"%, "+Math.round(100*r.l)+"%",h=Math.round(o.h)+"\xb0, "+Math.round(100*o.s)+"%, "+Math.round(100*o.v)+"%";return a.createElement("div",{style:l.wrap,className:"flexbox-fix"},a.createElement("div",{style:l.fields},a.createElement("div",{style:l.double},a.createElement(nX,{style:{input:l.input,label:l.label},label:"hex",value:i,onChange:s})),a.createElement("div",{style:l.column},a.createElement("div",{style:l.single},a.createElement(nX,{style:{input:l.input2,label:l.label2},label:"rgb",value:u,onChange:s})),a.createElement("div",{style:l.single},a.createElement(nX,{style:{input:l.input2,label:l.label2},label:"hsv",value:h,onChange:s})),a.createElement("div",{style:l.single},a.createElement(nX,{style:{input:l.input2,label:l.label2},label:"hsl",value:c,onChange:s})))))},oJ=function(e){var t=e.width,n=e.onChange,r=e.rgb,i=e.hsl,o=e.hsv,s=e.hex,l=e.header,u=e.styles,c=void 0===u?{}:u,h=e.className,d=void 0===h?"":h,f=(0,jW.ZP)(ZK({default:{picker:{width:t,background:"#fff",border:"1px solid #dfe1e5",boxSizing:"initial",display:"flex",flexWrap:"wrap",borderRadius:"8px 8px 0px 0px"},head:{height:"57px",width:"100%",paddingTop:"16px",paddingBottom:"16px",paddingLeft:"16px",fontSize:"20px",boxSizing:"border-box",fontFamily:"Roboto-Regular,HelveticaNeue,Arial,sans-serif"},saturation:{width:"70%",padding:"0px",position:"relative",overflow:"hidden"},swatch:{width:"30%",height:"228px",padding:"0px",background:"rgba("+r.r+", "+r.g+", "+r.b+", 1)",position:"relative",overflow:"hidden"},body:{margin:"auto",width:"95%"},controls:{display:"flex",boxSizing:"border-box",height:"52px",paddingTop:"22px"},color:{width:"32px"},hue:{height:"8px",position:"relative",margin:"0px 16px 0px 16px",width:"100%"},Hue:{radius:"2px"}}},c));return a.createElement("div",{style:f.picker,className:"google-picker "+d},a.createElement("div",{style:f.head},l),a.createElement("div",{style:f.swatch}),a.createElement("div",{style:f.saturation},a.createElement(mq,{hsl:i,hsv:o,pointer:tJ,onChange:n})),a.createElement("div",{style:f.body},a.createElement("div",{style:f.controls,className:"flexbox-fix"},a.createElement("div",{style:f.hue},a.createElement(aX,{style:f.Hue,hsl:i,radius:"4px",pointer:rJ,onChange:n}))),a.createElement(iJ,{rgb:r,hsl:i,hex:s,hsv:o,onChange:n})))};oJ.propTypes={width:lX().oneOfType([lX().string,lX().number]),styles:lX().object,header:lX().string},oJ.defaultProps={width:652,styles:{},header:"Color picker"};dZ(oJ);var aJ=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.firstChange=!0,r.changed=!1,r.onClick=function(e){r.setState({showPicker:!r.state.showPicker})},r.onClose=function(e){r.setState({showPicker:!1}),r.changed&&r.props.continuousEndCallback&&r.props.continuousEndCallback("color"),r.firstChange=!0,r.changed=!1},r.onChangeComplete=function(e){},r.onChange=function(e){if(r.firstChange)return r.props.continuousStartCallback&&r.props.continuousStartCallback("color"),void(r.firstChange=!1);var t=vp.changeRGB2Color([e.rgb.r,e.rgb.g,e.rgb.b]),n=(vp.getColorString(t),r.props),i=n.value,o=n.onChange;i!==t&&o&&(o(t),r.changed=!0)},r.curValue=e.value,r.state={showPicker:!1,value:r.curValue,prevValue:r.curValue},r}return f(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"render",value:function(){var e=this.state,t=e.showPicker,n=e.value;e.prevValue;void 0===n&&(n=0);var r=vp.getColorString(n),i={backgroundColor:r};return(0,ff.jsxs)("div",{className:"color-input",children:[(0,ff.jsx)("div",{className:"color-input-swatch",onClick:this.onClick,children:(0,ff.jsx)("div",{className:"color-input-color",style:i})}),t?(0,ff.jsxs)("div",{className:"color-input-popover",children:[(0,ff.jsx)("div",{className:"color-input-cover",onClick:this.onClose}),(0,ff.jsx)(GQ,{color:r,onChange:this.onChange,onChangeComplete:this.onChangeComplete})]}):null]})}}]),n}(a.Component),sJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i._keydownHandler=void 0,i.refs=void 0,i.isMouseDown=!1,i.isMouseMoved=!1,i.isFocus=!1,i._mouseupHandler=i.onMouseUp.bind(g(i)),i._mousemoveHandler=i.onMouseMove.bind(g(i)),i._mousewheelHandler=i.onMouseWheel.bind(g(i)),i._keydownHandler=i.onKeyDown.bind(g(i)),i}return f(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){var t=isNaN(e)?"0":this.getRenderValue(e.toString()).toString();this.setState({value:t})}},{key:"continuous",get:function(){var e=this.props.continuous;return void 0===e&&(e=!0),e}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){return this.getFixNumber(e.value,e.fixed)}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue.toString()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e).toString();if(this.state.value!==t){this._invalid=!0;var n=this.getRenderValue(t).toString();this.setState({value:n})}}},{key:"render",value:function(){this._invalid=!1;var e=(this.props.width?this.props.width:50)+"px",t=this.state.value;this.props.multiMode&&(t=n.MULTI_DEFAULT_TEXT,null!=this.state.offValue&&""!==this.state.offValue&&(t=this.state.offValue));var r=this.props.disabled,i=this.isFocus?"text":"n-resize",o="property-input ";return this.props.className&&(o+=this.props.className),r&&(o="property-input disabled "+this.props.className),this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsx)("input",{className:o,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"})}):(0,ff.jsx)("input",{className:o,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"})}},{key:"onDrag",value:function(e){document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),e.preventDefault()}},{key:"onChange",value:function(e){if(!this.props.disabled){var t=e.target.value,n=!!(this.props&&this.props.fixed&&this.props.fixed>0),r=this.filterText(t,!n);if(r.value.toString()!==r.halfValue)this.setState({value:r.halfValue});else{var i=r.value;this.changeValue(i)}}}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"filterText",value:function(e,t){if(this.props.multiMode&&e===n.MULTI_DEFAULT_TEXT)return{value:NaN,halfValue:e};if(t){var r=new RegExp("[-]?[0-9]*"),i=e.match(r);if(null!=i){var o=i[0];return{value:"-"===o||""===o?NaN:this.getRenderValue(o),halfValue:o}}}else{var a=new RegExp("[-]?[0-9]+[.]?[0-9]*"),s=e.match(a);if(null!=s){var l=s[0];return{value:"-"===l||"."===l[l.length-1]||""===l?NaN:this.getRenderValue(l),halfValue:l}}if("-"===e||""===e)return{value:NaN,halfValue:e}}return{value:0,halfValue:"0"}}},{key:"addValue",value:function(e){isNaN(e)||this.props.onAdd&&this.props.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!isNaN(e)){e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue);var n=this.getRenderValue(e.toString()).toString();this.setState({value:n}),t&&this.props.onChange&&this.props.onChange(e)}}},{key:"onBlur",value:function(e){if(document.removeEventListener("keydown",this._keydownHandler),this.isFocus=!1,this.setState({}),!this.isMouseDown){var t=!!(this.props&&this.props.fixed&&this.props.fixed>0),n=this.filterText(e.target.value,!t).value||this.props.value;this.setState({value:n.toString()}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.props.onBlur&&this.props.onBlur(e)}}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.refs.numberInput&&this.refs.numberInput.blur()}},{key:"onFocus",value:function(e){document.addEventListener("keydown",this._keydownHandler),this.isMouseDown?this.refs.numberInput&&this.refs.numberInput.blur():(this.props.multiMode&&this.refs.numberInput.select(),this.props.onFocus&&this.props.onFocus(e),this.isFocus=!0,this.setState({}))}},{key:"onMouseWheel",value:function(e){e.wheelDelta>0?this.changeValue(this.props.value+this.step):this.changeValue(this.props.value-this.step)}},{key:"onMouseOver",value:function(e){this._over=!0,this.refs.numberInput.addEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseOut",value:function(e){this._over=!1,this.refs.numberInput.removeEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseDown",value:function(e){this.isFocus||this.props.disabled||(this.continuous&&this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._downX=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this._mousemoveHandler),document.addEventListener("mouseup",this._mouseupHandler))}},{key:"onMouseMove",value:function(e){if(0===this._downX)this._downX=e.clientY,this._downValue=this.getRenderValue(this.state.value);else{this.isMouseMoved=!0;var t=this.props.speedDuration||1,n=Math.ceil((e.clientY-this._downX)/t);if(this.props.dropReverse&&(n=-n),0!==(n*=this.step))if(this.props.multiMode){this.addValue(n);var r="";n>0?r="+"+n:n<0&&(r=n.toString()),this.setState({offValue:r})}else this.changeValue(this._downValue+n,this.continuous)}}},{key:"onMouseUp",value:function(e){var t=!1;!this.isMouseMoved&&this.isMouseDown&&(t=!0),this.isMouseDown=!1,this.isMouseMoved=!1,this.props.multiMode&&this.setState({offValue:""}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.continuous&&this.props.continuousEndCallback&&this.props.continuousEndCallback(),t&&this.refs.numberInput&&(this.refs.numberInput.focus(),this.refs.numberInput.select())}}]),n}(a.Component);sJ.defaultMax=Number.MAX_SAFE_INTEGER,sJ.defaultMin=Number.MIN_SAFE_INTEGER,sJ.MULTI_DEFAULT_TEXT="--";var lJ=function(e){return e[e.Print=0]="Print",e[e.Add=1]="Add",e[e.Added=2]="Added",e[e.Remove=3]="Remove",e[e.SetProperty=4]="SetProperty",e[e.Click=5]="Click",e[e.Express=6]="Express",e[e.IfGroup=7]="IfGroup",e[e.If=8]="If",e[e.ElseIf=9]="ElseIf",e[e.Else=10]="Else",e[e.DefineFunction=11]="DefineFunction",e[e.CallFunction=12]="CallFunction",e[e.AddEventListener=13]="AddEventListener",e[e.RemoveEventListener=14]="RemoveEventListener",e[e.EmitEvent=15]="EmitEvent",e[e.PlaySound=16]="PlaySound",e[e.PlayAnimation=17]="PlayAnimation",e[e.JumpToNextScene=18]="JumpToNextScene",e[e.JumpToPrevScene=19]="JumpToPrevScene",e[e.JumpToScene=20]="JumpToScene",e[e.ArrayInit=21]="ArrayInit",e[e.ArrayPop=22]="ArrayPop",e[e.ArrayPush=23]="ArrayPush",e[e.ArraySplice=24]="ArraySplice",e[e.ArrayRandom=25]="ArrayRandom",e[e.ArrayConcat=26]="ArrayConcat",e[e.ArrayShift=27]="ArrayShift",e[e.ArrayUnshift=28]="ArrayUnshift",e[e.AddEventListenerCall=29]="AddEventListenerCall",e[e.CallProtoFunction=30]="CallProtoFunction",e[e.GotoPlay=31]="GotoPlay",e[e.GotoStop=32]="GotoStop",e[e.PauseSound=33]="PauseSound",e[e.ResumeSound=34]="ResumeSound",e[e.Comment=35]="Comment",e[e.ActionList=36]="ActionList",e[e.DefineVariable=37]="DefineVariable",e[e.For=38]="For",e[e.Break=39]="Break",e[e.Wait=40]="Wait",e[e.SetTimeout=41]="SetTimeout",e[e.SetInterval=42]="SetInterval",e[e.EnterFrame=43]="EnterFrame",e[e.EnterFrameCall=44]="EnterFrameCall",e[e.StopAnimation=45]="StopAnimation",e[e.StopAllSound=46]="StopAllSound",e}({}),uJ=function(e){return e[e.CONST=0]="CONST",e[e.VARIABLE=1]="VARIABLE",e[e.RANDOM=2]="RANDOM",e[e.SYSTEM=3]="SYSTEM",e[e.PROPERTY=4]="PROPERTY",e[e.OPERATION=5]="OPERATION",e[e.ARRAY_LEN=6]="ARRAY_LEN",e[e.ARRAY_VALUE=7]="ARRAY_VALUE",e[e.OBJECT_VALUE=8]="OBJECT_VALUE",e[e.PARAM_VALUE=9]="PARAM_VALUE",e[e.ARRAY_FUNCTION=10]="ARRAY_FUNCTION",e[e.COMPONENT=11]="COMPONENT",e[e.STRING_FUNCTION=12]="STRING_FUNCTION",e[e.PARSE_INT=13]="PARSE_INT",e[e.PARSE_FLOAT=14]="PARSE_FLOAT",e[e.SHOT=15]="SHOT",e}({}),cJ=function(e){return e[e.TIME=0]="TIME",e[e.YEAR=1]="YEAR",e[e.MONTH=2]="MONTH",e[e.DAY=3]="DAY",e[e.DATE=4]="DATE",e[e.HOUR=5]="HOUR",e[e.MINUTE=6]="MINUTE",e[e.SECOND=7]="SECOND",e[e.MILLISECOND=8]="MILLISECOND",e}({}),hJ=function(e){return e.Add="Add",e.Added="Added",e.Remove="Remove",e.Click="click",e}({}),dJ=function(e){return e.STATUS="status",e.COMMAND="command",e.INFO="info",e.WARNING="warning",e.ERROR="error",e.NATIVE="native",e}({}),fJ=function(e){return e.NUMBER="number",e.STRING="string",e.BOOLEAN="boolean",e.ARRAY="array",e.OBJECT="object",e}({}),pJ=function(e){return e.EVENT_COMPLETE="EVENT_COMPLETE",e.EVENT_FAIL="EVENT_FAIL",e.EVENT_BREAK="EVENT_BREAK",e.FUNCTION_RUN_COMPLETE="FUNCTION_RUN_COMPLETE",e}({}),vJ=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._isRunning=!1,e._isPaused=!1,e._isCompleted=!1,e._isFailed=!1,e._asynchronous=!1,e}return f(n,[{key:"context",get:function(){return n._context}},{key:"run",value:function(){this._isRunning=!0,this._isCompleted=!1,this._isFailed=!1}},{key:"stop",value:function(){this._isRunning=!1}},{key:"pause",value:function(){this._isPaused=!0}},{key:"resume",value:function(){this._isPaused=!1}},{key:"break",value:function(){this._isRunning=!1,this.emit(pJ.EVENT_BREAK)}},{key:"complete",value:function(){this._isRunning=!1,this._isCompleted=!0,this.emit(pJ.EVENT_COMPLETE)}},{key:"fail",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._isRunning=!1,this._isFailed=!0,this.emit(pJ.EVENT_FAIL,t)}},{key:"asynchronous",get:function(){return this._asynchronous}},{key:"isRunning",get:function(){return this._isRunning}},{key:"isCompleted",get:function(){return this._isCompleted}},{key:"isFailed",get:function(){return this._isFailed}},{key:"isPaused",get:function(){return this._isPaused}}],[{key:"registContext",value:function(e){n._context=e}}]),n}(vv);vJ._context=void 0;var mJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager,t=e.getVariableByData(this.component,this.data.target),r=e.getVariableByData(this.component,this.data.concatArr);t&&r&&(this.data.value?t.value=r.value.concat(this.data.value):t.value=r.value.concat())}this.complete()}}]),n}(vJ),gJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&(e.value=this.data.value)}this.complete()}}]),n}(vJ),yJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&e.value.pop()}this.complete()}}]),n}(vJ),bJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e)e.value.push(this.data.value)}this.complete()}}]),n}(vJ),_J=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager,t=e.getVariableByData(this.component,this.data.target);if(t){var r=t.value;e.shuffle(r)}}this.complete()}}]),n}(vJ),xJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);e&&e.value.shift()}this.complete()}}]),n}(vJ),EJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e){var t=this.data.value;void 0!==t?e.value.splice(this.data.start,this.data.deleteCount||0,t):e.value.splice(this.data.start,this.data.deleteCount||0)}}this.complete()}}]),n}(vJ),wJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.data.target){var e=this.context.variableManager.getVariableByData(this.component,this.data.target);if(e)e.value.unshift(this.data.value)}this.complete()}}]),n}(vJ),TJ=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this)}return f(n,[{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this.break(),this.complete()}}]),n}(vJ);function SJ(e){return"number"===typeof e&&!isNaN(e)}var kJ=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this))._tasks=[],e._currentTask=null,e._curTaskIndex=0,e}return f(n,[{key:"tasks",get:function(){return this._tasks}},{key:"run",value:function(){this.isRunning||(this._curTaskIndex=0,jm(m(n.prototype),"run",this).call(this),this._nextTask())}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this._currentTask&&(this.clearEvent(this._currentTask),this._currentTask=null);for(var e=0,t=this._tasks.length;e<t;e++){var r=this._tasks[e];r&&r.stop()}this._curTaskIndex=Number.MAX_VALUE,this.off(pJ.EVENT_COMPLETE),this.off(pJ.EVENT_BREAK),this.off(pJ.EVENT_FAIL),this.complete()}},{key:"pause",value:function(){if(jm(m(n.prototype),"pause",this).call(this),this._tasks)for(var e=0,t=this._tasks.length;e<t;e++)this._tasks[e].pause()}},{key:"resume",value:function(){if(jm(m(n.prototype),"resume",this).call(this),this._tasks)for(var e=0,t=this._tasks.length;e<t;e++)this._tasks[e].resume()}},{key:"break",value:function(){jm(m(n.prototype),"break",this).call(this),this._currentTask&&(this.clearEvent(this._currentTask),this._currentTask.break(),this._currentTask=null),this._curTaskIndex=Number.MAX_VALUE,this.off(pJ.EVENT_COMPLETE),this.off(pJ.EVENT_BREAK),this.off(pJ.EVENT_FAIL),this.complete()}},{key:"addTask",value:function(e){if(!e)throw new Error("ArgumentError");if(e.asynchronous&&(this._asynchronous=!0),!(this._tasks.indexOf(e)<0))throw new Error("duplicate task");return this._tasks.push(e),e}},{key:"_nextTask",value:function(e){var t=null;this._curTaskIndex<this._tasks.length&&(t=this._tasks[this._curTaskIndex]),t?(this._currentTask=t,this._currentTask.on(pJ.EVENT_COMPLETE,this.onOneTaskComplete,this),this._currentTask.on(pJ.EVENT_FAIL,this.onOneTaskFail,this),this._currentTask.on(pJ.EVENT_BREAK,this.onOneTaskBreak,this),this._currentTask.run()):this.complete()}},{key:"clearEvent",value:function(e){e&&(e.off(pJ.EVENT_COMPLETE,this.onOneTaskComplete,this),e.off(pJ.EVENT_FAIL,this.onOneTaskFail,this),e.off(pJ.EVENT_BREAK,this.onOneTaskBreak,this))}},{key:"onOneTaskBreak",value:function(e){this._currentTask&&(this.clearEvent(this._currentTask),this.emit(pJ.EVENT_BREAK),this.complete())}},{key:"onOneTaskFail",value:function(e){if(!this._currentTask)throw new Error("no task");this.clearEvent(this._currentTask),this.fail(e.type,e.data)}},{key:"onOneTaskComplete",value:function(e){this.clearEvent(this._currentTask),this._curTaskIndex++,this._nextTask(this._currentTask)}}]),n}(vJ),CJ=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).loopTask=void 0,e.loopTask=new kJ,e.loopTask.on(pJ.EVENT_BREAK,e.onBreak,g(e)),e}return f(n,[{key:"addSubTask",value:function(e){this.loopTask&&(this.loopTask.addTask(e),this.loopTask.asynchronous&&(this._asynchronous=!0))}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.loopTask&&(this.loopTask.off(pJ.EVENT_BREAK),this.loopTask.stop())}},{key:"break",value:function(){jm(m(n.prototype),"break",this).call(this),this.loopTask&&(this.loopTask.off(pJ.EVENT_BREAK),this.loopTask.break())}},{key:"pause",value:function(){jm(m(n.prototype),"pause",this).call(this),this.loopTask&&this.loopTask.pause()}},{key:"resume",value:function(){jm(m(n.prototype),"resume",this).call(this),this.loopTask&&this.loopTask.resume()}},{key:"onBreak",value:function(e){this.break()}}]),n}(vJ),AJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.thisTarget=void 0,i.target=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i.thisTarget=e,i._loopComplete=!1,i.data=r,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this._loopComplete=!0,this.thisTarget)if(this.loopTask&&(this.loopTask.off(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(pJ.EVENT_COMPLETE,this.onLoopComplete,this)),this.system){var e=this.context.system;e&&(e.off(this.eventName,this.onTriger,this),e.on(this.eventName,this.onTriger,this))}else if(this.global){var t=this.context.global;t&&(t.off(this.eventName,this.onTriger,this),t.on(this.eventName,this.onTriger,this))}else this.target=this.context.variableManager.getExpressItemValue(this.thisTarget,this.data.target),this.target&&(this.target.off(this.eventName,this.onTriger,this),this.target.on(this.eventName,this.onTriger,this));this.complete()}},{key:"stop",value:function(){if(this.complete(),this.thisTarget)if(this.system){var e=this.context.system;e&&e.off(this.eventName,this.onTriger,this)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName,this.onTriger,this)}else this.target&&this.target.off(this.eventName,this.onTriger,this);this.loopTask&&(this.loopTask.off(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.complete()),jm(m(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),jm(m(n.prototype),"break",this).call(this)}},{key:"onLoopComplete",value:function(){this._loopComplete=!0}},{key:"onSystemTriger",value:function(e){e.code===this.eventName&&this.onTriger()}},{key:"onTriger",value:function(){this._isPaused||this.loopTask&&this._loopComplete&&(this._loopComplete=!1,this.loopTask.run())}}]),n}(CJ),IJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"target",get:function(){return this.context.variableManager.getTargetComponent(this.component,this.data.target)}},{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component){var e=this.context.variableManager,t=this.target,r=this.data.name;Array.isArray(r)&&(r=e.getExpressItemValue(this.component,r));var i=[];if(this.data.params)for(var o=0,a=this.data.params.length;o<a;o++){var s=e.getExpressItemValue(this.component,this.data.params[o]);i.push(s)}t&&r&&t[r]&&t[r].apply(t,i)}this.complete()}}]),n}(vJ),OJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.eventData=void 0,i.target=void 0,i.component=void 0,i.system=void 0,i.global=void 0,i.component=e,i.data=r,i.eventName=r.event,i.eventData=r.eventData,i.system=!0===r.system,i.global=!0===r.global,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component){var e=this.getEmitEventData();if(this.system){if(this.context.variableManager){var t=this.context.system;"object"===typeof e?(e.type=this.eventName,t.emit(this.eventName,e)):t.emit("S0003",[this.eventName,JSON.stringify(e)],dJ.WARNING,this)}}else this.global?this.context.global&&this.context.global.emit(this.eventName,e):(this.target=this.context.variableManager.getTargetComponent(this.component,this.data.target),this.target&&this.target.emit(this.eventName,e))}this.complete()}},{key:"stop",value:function(){this.complete(),jm(m(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),jm(m(n.prototype),"break",this).call(this)}},{key:"getEmitEventData",value:function(){if(Array.isArray(this.eventData)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.eventData);return this.eventData}}]),n}(vJ),PJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){(jm(m(n.prototype),"run",this).call(this),this.component&&this.context.variableManager)&&this.context.variableManager.caculateExpress(this.component,this.data.express);this.complete()}}]),n}(vJ),MJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i._totalTimes=0,i._curTimes=0,i._paramId="",i._paramIds=[],i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this._totalTimes=this.getforin(),this._curTimes=-1,this.loopTask&&(this.loopTask.on(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(pJ.EVENT_FAIL,this.onLoopComplete,this)),this.addParams(),this.runFor()}},{key:"break",value:function(){this._isRunning=!1,this.loopTask&&this.loopTask.stop(),this.complete()}},{key:"complete",value:function(){this.removeParams(),jm(m(n.prototype),"complete",this).call(this)}},{key:"injectParams",value:function(e){e&&e.length&&(this._paramIds=e)}},{key:"runFor",value:function(){if(this._totalTimes>0&&this._curTimes<this._totalTimes-1)if(this.loopTask){if(this._curTimes++,this.component){var e=this.context.variableManager.getGlobalVariable(this._paramId);e&&(e.value=this._curTimes)}this.loopTask.run()}else this.complete();else this.complete()}},{key:"getforin",value:function(){if(this.component){var e=this.context.variableManager.getExpressItemValue(this.component,this.data.forin);return Array.isArray(e)?e.length:parseInt(e,10)}return 0}},{key:"onLoopComplete",value:function(){this.runFor()}},{key:"addParams",value:function(){if(this.component){var e=this.context.variableManager,t=e.getFunctionId()+"_for";if(this._paramId=t,e.variableMap[UJ.GLOBAL_ID]||(e.variableMap[UJ.GLOBAL_ID]={}),e.variableMap[UJ.GLOBAL_ID][t]={id:t,type:fJ.OBJECT,value:0},this.loopTask){var n=this._paramIds.concat([this._paramId]);this.context.injectParamsToQueueTask(this.loopTask,n)}}}},{key:"removeParams",value:function(){if(this.component){var e=this.context.variableManager,t=this._paramId;delete e.variableMap[UJ.GLOBAL_ID][t]}}}]),n}(CJ),RJ=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this)).component=void 0,r.conditions=[],r.conditionsRun=[],r.elseRun=void 0,r.curRun=void 0,r.component=e,r}return f(n,[{key:"addCondition",value:function(e,t){e&&e.length?(this.conditions.push(e),this.conditionsRun.push(t)):this.addElse(t)}},{key:"addElse",value:function(e){this.elseRun=e}},{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this.curRun=this.findTask(),this.curRun?(this.curRun.on(pJ.EVENT_COMPLETE,this.onTaskComplete,this),this.curRun.on(pJ.EVENT_BREAK,this.onTaskBreak,this),this.curRun.run()):this.complete()}},{key:"findTask",value:function(){if(this.component){for(var e=this.context.variableManager,t=0,n=this.conditions.length;t<n;t++){var r=this.conditions[t];if(e.caculateExpress(this.component,r))return this.conditionsRun[t]}if(this.elseRun)return this.elseRun}}},{key:"onTaskComplete",value:function(e){this.curRun&&this.curRun.off(pJ.EVENT_COMPLETE,this.onTaskComplete,this),this.complete()}},{key:"onTaskBreak",value:function(e){this.break(),this.complete()}}]),n}(vJ),NJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).data=void 0,i.component=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){this.complete()}},{key:"getValue",value:function(){if(Array.isArray(this.data.value)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.data.value);return this.data.value}}]),n}(vJ),DJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).data=void 0,i.eventName=void 0,i.component=void 0,i._component=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i._loopComplete=!1,i.component=e,i.data=r,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component)if(this.system){var e=this.context.system;e&&e.off(this.eventName)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName)}else this._component=this.context.variableManager.getTargetComponent(this.component,this.data.target),this._component&&this._component.off(this.eventName);this.complete()}}]),n}(vJ),LJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this);var e=this.context.variableManager.getTargetComponent(this.component,this.data.target);e&&(e[this.data.property]=this.getValue()),this.complete()}},{key:"getValue",value:function(){if(Array.isArray(this.data.value)&&this.component)return this.context.variableManager.getExpressItemValue(this.component,this.data.value);return this.data.value}}]),n}(vJ),FJ=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).data=void 0,i.component=void 0,i.eventName=void 0,i.funName=void 0,i.target=void 0,i._loopComplete=void 0,i.system=void 0,i.global=void 0,i.runId=-1,i.callfun=void 0,i.callfunData=void 0,i._loopComplete=!1,i.data=r,i.component=e,i.eventName=r.event,i.system=!0===r.system,i.global=!0===r.global,i.funName=r.funName,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this._loopComplete=!0,0===this.loopTask.tasks.length&&this.component&&this.funName){this.callfunData={type:lJ.CallFunction,name:this.funName,params:[]};var e=new HJ(this.component,this.funName,this.callfunData);this.callfun=e,this.loopTask.addTask(e)}if(this.loopTask&&(this.loopTask.off(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(pJ.EVENT_COMPLETE,this.onLoopComplete,this)),this.component)if(this.system){var t=this.context.system;t&&(t.off(this.eventName,this.onTriger,this),t.on(this.eventName,this.onTriger,this))}else if(this.global){var r=this.context.global;r&&(r.off(this.eventName,this.onTriger,this),r.on(this.eventName,this.onTriger,this))}else this.target=this.context.variableManager.getTargetComponent(this.component,this.data.target),this.target&&(this.target.off(this.eventName,this.onTriger,this),this.target.on(this.eventName,this.onTriger,this));this.complete()}},{key:"stop",value:function(){if(this.complete(),this.component)if(this.system){var e=this.context.system;e&&e.off(this.eventName,this.onTriger,this)}else if(this.global){var t=this.context.global;t&&t.off(this.eventName,this.onTriger,this)}else this.target&&this.target.off(this.eventName,this.onTriger,this);this.loopTask&&(this.loopTask.off(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.complete()),jm(m(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),jm(m(n.prototype),"break",this).call(this)}},{key:"onLoopComplete",value:function(){this._loopComplete=!0}},{key:"onSystemTriger",value:function(e){e.code===this.eventName&&this.onTriger(e)}},{key:"onTriger",value:function(){if(!this._isPaused){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t&&t.length>0&&this.callfunData&&(this.callfunData.params=t),this.loopTask&&this._loopComplete&&(this._loopComplete=!1,this.loopTask.run())}}}]),n}(CJ),BJ=function(){function e(){u(this,e),this.variableManager=void 0,this.soundManager=void 0,this.global=void 0,this.system=void 0}return f(e,[{key:"initDefaultManager",value:function(){this.variableManager=new UJ,this.global=new vv,this.system=new vv}},{key:"injectParamsToQueueTask",value:function(e,t){var n=e.tasks;if(n)for(var r=0,i=n.length;r<i;r++)this.injectParamsToTask(n[r],t)}},{key:"injectParamsToTask",value:function(e,t){if(e instanceof PJ){var n=e.data.express;this.modifyParamValue(n,t)}else if(e instanceof RJ){for(var r=e.conditions,i=0,o=r.length;i<o;i++){var a=r[i];this.modifyParamValue(a,t)}if(e.conditionsRun)for(var s=e.conditionsRun,l=0,u=s.length;l<u;l++){var c=s[l];this.injectParamsToQueueTask(c,t)}e.elseRun&&this.injectParamsToQueueTask(e.elseRun,t)}else e instanceof LJ?e.data.value&&Array.isArray(e.data.value)&&this.modiyExpressItemParamValue(e.data.value,t):e instanceof HJ?(e.data&&e.data.params&&this.modifyParamValue(e.data.params,t),e.data&&e.data.target&&this.modiyExpressItemParamValue(e.data.target,t)):e instanceof NJ?e.data&&e.data.value&&this.modiyExpressItemParamValue(e.data.value,t):e instanceof MJ?e.injectParams(t):(e instanceof AJ||e instanceof FJ||e instanceof DJ||e instanceof OJ||e instanceof IJ)&&e.data&&e.data.target&&this.modiyExpressItemParamValue(e.data.target,t)}},{key:"modifyParamValue",value:function(e,t){if(e&&Array.isArray(e))for(var n=0,r=e.length;n<r;n++){var i=e[n];this.modiyExpressItemParamValue(i,t)}}},{key:"modiyExpressItemParamValue",value:function(e,t){if(e[0]===uJ.PARAM_VALUE){var n=e[1];t.length>n&&(e[2]=t[n])}else e[0]===uJ.ARRAY_VALUE?Array.isArray(e[3])&&this.modiyExpressItemParamValue(e[3],t):e[0]===uJ.ARRAY_FUNCTION&&("push"==e[3]||"unshift"==e[3]||"concat"==e[3]?Array.isArray(e[4])&&this.modiyExpressItemParamValue(e[4],t):"splice"==e[3]&&(Array.isArray(e[4])&&this.modiyExpressItemParamValue(e[4],t),Array.isArray(e[5])&&this.modiyExpressItemParamValue(e[5],t)))}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e,e._instance.initDefaultManager()),e._instance}}]),e}();BJ._instance=void 0;var UJ=function(){function e(){u(this,e),this.variableConfig={},this.variableMap={},this.runFunctionId=0,this.functionMap={}}return f(e,[{key:"shuffle",value:function(e){for(var t=e.length-1;t>=0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[n];e[n]=e[t],e[t]=r}}},{key:"clear",value:function(){this.variableMap={},this.functionMap={}}},{key:"getFunctionId",value:function(){return++this.runFunctionId}},{key:"getFunctionTask",value:function(e){return this.functionMap[e]}},{key:"setFunctionTask",value:function(e,t){this.functionMap[e]=t}},{key:"addVariableConfig",value:function(e,t){if(!this.variableConfig[e]){var n=this.normalizeVariableConfig(t);this.variableConfig[e]=n}}},{key:"normalizeVariableConfig",value:function(e){for(var t in e)if(e.hasOwnProperty(t)){var n=e[t],r=this.createIVariableData(t,n);e[t]=r}return e}},{key:"addVariableToGlobal",value:function(t){var n=e.GLOBAL_ID;if(this.variableMap[n]=this.deepCopy(t),this.variableConfig[n]){var r=this.variableConfig[n];this.variableMap[n]=this.deepCopy(r)}else if(this.addVariableConfig(n,t),this.variableConfig[n]){var i=this.variableConfig[n];this.variableMap[n]=this.deepCopy(i)}}},{key:"addVariableToContext",value:function(e){var t={};if(e.target)for(var n in e.target){var r=e.target[n];t[n]={id:n,type:fJ.OBJECT,value:r}}this.variableMap[e.id.toString()]=t}},{key:"clearVariableToContext",value:function(e){this.variableMap[e.id.toString()]=void 0,delete this.variableMap[e.id.toString()]}},{key:"addVariableToComponent",value:function(e){var t=e.libId;if(t&&this.variableConfig[t.toString()]){var n=this.variableConfig[t.toString()];this.variableMap[e.id.toString()]=this.deepCopy(n)}}},{key:"addVariableDataToComponent",value:function(e,t,n,r){var i=e.libId,o=e.id;this.addVariable(i,o,t,n,r)}},{key:"addVariableDataToGlobal",value:function(t,n,r){this.addVariable(e.GLOBAL_ID,e.GLOBAL_ID,t,n,r)}},{key:"addVariable",value:function(e,t,n,r,i){var o={id:n,type:r,value:i},a={id:n,type:r,value:i},s=this.variableConfig[e];s||(s={},this.variableConfig[e]=s),s[n]=o;var l=this.variableMap[t];l||(l={},this.variableMap[t]=l),l[n]=a}},{key:"getGlobalVariable",value:function(t){return this.getVariable(e.GLOBAL_ID,t)}},{key:"getVariable",value:function(e,t){var n=this.variableMap[e];if(n)return n[t]}},{key:"getTargetComponent",value:function(e,t){if(null==t||t.length<=0)return e;if(e&&Array.isArray(t)&&t.length>1&&(t[0]===uJ.VARIABLE||t[0]===uJ.PROPERTY||t[0]===uJ.ARRAY_VALUE||t[0]===uJ.PARAM_VALUE||t[0]===uJ.OBJECT_VALUE||t[0]===uJ.COMPONENT))return this.getExpressItemValue(e,t);for(var n=t.concat(),r=e;n.length>0;){var i=n.shift();if(!r||"function"!=typeof r.getChildById)return null;r=r.getChildById(i)}return r}},{key:"getVariableByData",value:function(t,n){if(n[0]===uJ.PARAM_VALUE)return this.getVariable(e.GLOBAL_ID,n[2]);var r=this.getTargetComponent(t,n[1]),i=r?r.id.toString():e.GLOBAL_ID;return this.getVariable(i,n[2])}},{key:"caculateExpress",value:function(t,n){for(var r=[],i=[],o=0,a=n.length;o<a;o++){var s=n[o];switch(s[0]){case uJ.CONST:case uJ.VARIABLE:case uJ.SYSTEM:case uJ.RANDOM:case uJ.PROPERTY:case uJ.ARRAY_LEN:case uJ.ARRAY_VALUE:case uJ.OBJECT_VALUE:case uJ.PARAM_VALUE:case uJ.ARRAY_FUNCTION:case uJ.STRING_FUNCTION:case uJ.PARSE_FLOAT:case uJ.PARSE_INT:case uJ.COMPONENT:r.push(s);break;case uJ.OPERATION:switch(s[1]){case"(":i.push(s);break;case")":for(var l=i.pop();l&&"("!==l[1];)r.push(l),l=i.pop();break;default:var u=s[1],c=e.OPERATE_PRIORITY[u];if(!c)return this.emitError(t,"E1001",[u],dJ.WARNING),0;if(i.length>0){var h=i[i.length-1],d=e.OPERATE_PRIORITY[h[1]];if(c>d)i.push(s);else{for(;c<=d&&(r.push(h),i.pop(),i.length>0);)h=i[i.length-1],d=e.OPERATE_PRIORITY[h[1]];i.push(s)}}else i.push(s)}}}if(i.length>0)for(;i.length>0;){var f=i.pop();f&&r.push(f)}return this.caculateExpressValue(t,r)}},{key:"getExpressItemValue",value:function(e,t){var n;switch(t[0]){case uJ.CONST:n=t[1];break;case uJ.VARIABLE:var r=this.getVariableByData(e,t);r?n=r.value:this.emitError(e,"E1002",[t.join(",")],dJ.WARNING);break;case uJ.SYSTEM:var i=new Date,o=0;switch(t[1]){case cJ.TIME:o=i.getTime();break;case cJ.YEAR:o=i.getFullYear();break;case cJ.MONTH:o=i.getMonth();break;case cJ.DAY:o=i.getDay();break;case cJ.DATE:o=i.getDate();break;case cJ.HOUR:o=i.getHours();break;case cJ.MINUTE:o=i.getMinutes();break;case cJ.SECOND:o=i.getSeconds();break;case cJ.MILLISECOND:o=i.getMilliseconds()}n=o;break;case uJ.RANDOM:var a=0;if(t.length>=3){var s=t[1],l=t[2];a=Math.round(Math.random()*(l-s))+s}else a=Math.random();n=a;break;case uJ.COMPONENT:var u=t[1];n=this.getTargetComponent(e,u);break;case uJ.PROPERTY:var c=t[1],h=this.getTargetComponent(e,c);if(h&&t.length>=3){for(var d=2,f=t.length;d<f;d++){var p=t[d];h&&void 0!==p&&(h=h[p])}n=h}else n=void 0;break;case uJ.ARRAY_LEN:var v=this.getVariableByData(e,t);v?n=v.value.length:this.emitError(e,"E1002",[t.join(",")],dJ.WARNING);break;case uJ.ARRAY_VALUE:var m=this.getVariableByData(e,t);if(m){var g=m.value,y=t[3];if(Array.isArray(y)){var b=this.getExpressItemValue(e,y);SJ(b)?y=b:(this.emitError(e,"E1003",[y],dJ.WARNING),y=0)}n=g[y],t.length>=5&&n&&(n=n[t[4]])}else this.emitError(e,"E1002",[t.join(",")],dJ.WARNING);break;case uJ.ARRAY_FUNCTION:var _=this.getVariableByData(e,t);if(_)if(Array.isArray(_.value)){var x=_.value;switch(t[3]){case"pop":n=x.pop();break;case"push":if(t.length>4){var E=this.getExpressItemValue(e,t[4]);n=x.push(E)}break;case"shift":n=x.shift();break;case"unshift":if(t.length>4){var w=this.getExpressItemValue(e,t[4]);n=x.unshift(w)}break;case"concat":if(t.length>3)if(t.length>4){var T=this.getExpressItemValue(e,t[4]);n=x.concat(T)}else n=x.concat();break;case"splice":if(5===t.length){var S=this.getExpressItemValue(e,t[4]);n=x.splice(S)}else if(6===t.length){var k=this.getExpressItemValue(e,t[4]),C=this.getExpressItemValue(e,t[5]);n=x.splice(k,C)}else if(t.length>6){var A=this.getExpressItemValue(e,t[4]),I=this.getExpressItemValue(e,t[5]),O=this.getExpressItemValue(e,t[6]);n=x.splice(A,I,O)}break;default:this.emitError(e,"E1004",[t[3]],dJ.WARNING)}}else this.emitError(e,"E1005",[t.join(",")],dJ.WARNING);else this.emitError(e,"E1002",[t.join(",")],dJ.WARNING);break;case uJ.OBJECT_VALUE:case uJ.PARAM_VALUE:var P=this.getVariableByData(e,t);if(P){for(var M=P.value,R=3,N=t.length;R<N;R++){var D=t[R];M&&void 0!==D&&(M=M[D])}n=M}break;case uJ.STRING_FUNCTION:var L=this.getVariableByData(e,t);if(L)if("string"===typeof L.value){var F=L.value;switch(t[3]){case"indexOf":if(t.length>=5){var B=this.getExpressItemValue(e,t[4]);n=F.indexOf(B)}else n=-1;break;case"replace":if(t.length>=6){var U=this.getExpressItemValue(e,t[4]),H=this.getExpressItemValue(e,t[5]);n=F.replace(U,H)}break;case"split":if(t.length>=5){var j=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.split(j);else{var z=this.getExpressItemValue(e,t[5]);n=F.split(j,z)}}break;case"substr":if(t.length>=5){var V=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.substr(V);else{var G=this.getExpressItemValue(e,t[5]);n=F.substr(V,G)}}break;case"substring":if(t.length>=5){var W=this.getExpressItemValue(e,t[4]);if(5===t.length)n=F.substring(W);else{var X=this.getExpressItemValue(e,t[5]);n=F.substring(W,X)}}break;default:this.emitError(e,"E1014",[t[3]],dJ.WARNING)}}else this.emitError(e,"E1015",[t.join(",")],dJ.WARNING);else this.emitError(e,"E1002",[t.join(",")],dJ.WARNING);break;case uJ.PARSE_INT:if(t.length>=2){var Y=this.getExpressItemValue(e,t[1]);if(2===t.length)n=parseInt(Y);else{var K=this.getExpressItemValue(e,t[2]);n=parseInt(Y,K)}}break;case uJ.PARSE_FLOAT:if(t.length>=2){var q=this.getExpressItemValue(e,t[1]);n=parseFloat(q)}}return n}},{key:"caculateExpressValue",value:function(e,t){var n=[];if(1===t.length)return this.getExpressItemValue(e,t[0]);for(var r=0,i=t.length;r<i;r++){var o=t[r];if(o[0]===uJ.OPERATION){var a=void 0,s=void 0;"!"===o[1]||(s=n.pop()),a=n.pop();var l=this.caculateOneExpress(e,o[1],a,s);n.push(l)}else n.push(o)}return 1===n.length?n[0][1]:(this.emitError(e,"E1006",void 0,dJ.WARNING),0)}},{key:"caculateOneExpress",value:function(e,t,n,r){var i,o,a,s=[uJ.CONST,0];switch(n&&(i=this.getExpressItemValue(e,n)),r&&(o=this.getExpressItemValue(e,r)),t){case"*":a=i*o;break;case"/":a=i/o;break;case"%":a=i%o;break;case"+":a=i+o;break;case"-":a=i-o;break;case">=":a=i>=o;break;case"<=":a=i<=o;break;case">":a=i>o;break;case"<":a=i<o;break;case"==":a=i==o;break;case"===":a=i===o;break;case"!=":a=i!=o;break;case"!==":a=i!==o;break;case"!":a=!i;break;case"&&":a=i&&o;break;case"||":a=i||o;break;case"=":if(a=o,n)switch(n[0]){case uJ.VARIABLE:var l=this.getVariableByData(e,n);l?l.value=a:this.emitError(e,"E1002",[n.join(",")],dJ.WARNING);break;case uJ.PROPERTY:var u=n[1],c=n[2],h=this.getTargetComponent(e,u);if(h&&n.length>=3){for(var d=h,f=c,p=2,v=n.length;p<v&&(f=n[p],p!==v-1);p++)d?d=d[f]:this.emitError(e,"E1007",[n.join(",")],dJ.WARNING);d&&f?d[f]=a:this.emitError(e,"E1007",[n.join(",")],dJ.WARNING)}break;case uJ.ARRAY_LEN:var m=this.getVariableByData(e,n);m?m.value.length=a:this.emitError(e,"E1002",[n.join(",")],dJ.WARNING);break;case uJ.ARRAY_VALUE:var g=this.getVariableByData(e,n);if(g){var y=g.value,b=n[3]||0;if(Array.isArray(b)){var _=this.getExpressItemValue(e,b);SJ(_)?b=_:(this.emitError(e,"E1003",[b],dJ.WARNING),b=0)}if(n.length>=5){for(var x,E=y[b],w=4,T=n.length;w<T;w++)x=n[w],w<T-1&&E[x]&&(E=E[x]);E&&void 0!==x&&(E[x]=a)}else y[b]=a}else this.emitError(e,"E1002",[n.join(",")],dJ.WARNING);break;case uJ.OBJECT_VALUE:case uJ.PARAM_VALUE:var S=this.getVariableByData(e,n);if(S){for(var k,C=S.value,A=3,I=n.length;A<I;A++)k=n[A],A<I-1&&C[k]&&(C=C[k]);C&&void 0!==k?C[k]=a:S.value=a}break;case uJ.CONST:this.emitError(e,"E1008",[n.join(",")],dJ.WARNING)}break;default:this.emitError(e,"E1001",[t],dJ.WARNING)}return s[1]=a,s}},{key:"deepCopy",value:function(e){var t=JSON.stringify(e);return JSON.parse(t)}},{key:"isIVariableData",value:function(e){return t=e,!("[object Object]"!==Object.prototype.toString.call(t)||!e.hasOwnProperty("type")||!e.hasOwnProperty("value")||e.type!==fJ.ARRAY&&e.type!==fJ.BOOLEAN&&e.type!==fJ.NUMBER&&e.type!==fJ.OBJECT&&e.type!==fJ.STRING);var t}},{key:"createIVariableData",value:function(e,t){if(this.isIVariableData(t))return t;var n={id:e,type:fJ.OBJECT,value:t};return"boolean"===typeof t?n.type=fJ.BOOLEAN:!function(e){return"string"===typeof e}(t)?SJ(t)?n.type=fJ.STRING:!function(e){return Array.isArray(e)}(t)?n.type=fJ.OBJECT:n.type=fJ.ARRAY:n.type=fJ.STRING,n}},{key:"emitError",value:function(e,t,n){arguments.length>3&&void 0!==arguments[3]||dJ.ERROR;throw BJ.instance.system.emit(t,n),new Error(t+": "+(null===n||void 0===n?void 0:n.join(" ")))}}]),e}();UJ.GLOBAL_ID="global",UJ.OPERATE_PRIORITY={"*":100,"/":100,"%":98,"+":97,"-":97,">=":95,"<=":94,">":93,"<":92,"==":91,"===":91,"!=":90,"!==":90,"!":89,"&&":88,"||":87,"=":86};var HJ=function(e){v(n,e);var t=y(n);function n(e,r,i){var o;return u(this,n),(o=t.call(this)).component=void 0,o.funName=void 0,o.data=void 0,o._component=void 0,o.runId=-1,o.fun=void 0,o.paramIds=[],o.component=e,o.funName=r,o.data=i,o}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this._component=this.context.variableManager.getTargetComponent(this.component,this.data.target),this._component&&this.context.variableManager){var e=this.context.variableManager,t=this.funName;if(this.runId=e.getFunctionId(),t=this._component.id+this.funName,this.fun=e.getFunctionTask(t),this.fun){if(this.paramIds.length=0,this.fun.formalParams){var r=this.fun.formalParams?this.fun.formalParams.length:0,i=this.data.params?this.data.params.length:0;if(r!=i)if(i>r)this.data.params&&(this.data.params.length=r);else{this.data.params||(this.data.params=[]);for(var o=i;o<r;o++)this.data.params.push([uJ.CONST,void 0])}}if(this.data.params){for(var a=[],s=0,l=this.data.params.length;s<l;s++){var u=this.data.params[s],c=u;if(Array.isArray(u))c=e.getExpressItemValue(this.component,u);a.push(c)}for(var h=0,d=a.length;h<d;h++){var f=t+this.runId+"param_"+h;this.paramIds.push(f),e.variableMap[UJ.GLOBAL_ID]||(e.variableMap[UJ.GLOBAL_ID]={}),e.variableMap[UJ.GLOBAL_ID][f]={id:f,type:fJ.OBJECT,value:a[h]}}}this.paramIds.length&&this.fun.injectParams(this.paramIds),this.fun.on(pJ.FUNCTION_RUN_COMPLETE,this.onRunComplete,this),this.fun.runWithId(this.runId)}else this.complete()}else{if(this.component){var p=this.context.variableManager,v=this._component,g=this.data.name;Array.isArray(g)&&(g=p.getExpressItemValue(this.component,g));var y=[];if(this.data.params)for(var b=0,_=this.data.params.length;b<_;b++){var x=p.getExpressItemValue(this.component,this.data.params[b]);y.push(x)}v&&g&&v[g]&&v[g].apply(v,y)}this.complete()}}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.fun&&this.fun.stopWithId(this.runId),this.complete()}},{key:"break",value:function(){jm(m(n.prototype),"break",this).call(this),this.fun&&this.fun.breakWithId(this.runId),this.complete()}},{key:"complete",value:function(){if(this.runId=0,this.fun&&this.fun.off(pJ.FUNCTION_RUN_COMPLETE,this.onRunComplete,this),this.paramIds.length&&this.component)for(var e=this.context.variableManager,t=0,r=this.paramIds.length;t<r;t++){var i=this.paramIds[t];delete e.variableMap[UJ.GLOBAL_ID][i]}jm(m(n.prototype),"complete",this).call(this)}},{key:"onRunComplete",value:function(e){e===this.runId&&this.complete()}}]),n}(vJ),jJ=function(e){return e[e.ExpressItem=0]="ExpressItem",e[e.Closure=1]="Closure",e[e.CallbackFunction=2]="CallbackFunction",e}(jJ||{}),zJ=function(e){return e.None="0",e.ActionList="a",e.Option="b",e.Equal="c",e.Block="d",e.DefaultVariable="e",e.Variable="f",e.String="g",e.Number="h",e.Boolean="i",e.Semicolon="j",e.Function="k",e.Bracket="l",e.This="m",e.If="n",e.Else="o",e.Child="q",e.Dot="r",e.Comma="s",e.Quotation="t",e.DoubleQuotation="u",e.SquareBracket="v",e.Print="w",e.Slash="x",e.NSFunction="y",e.Global="z",e.System="A",e.Random="B",e.ArrayFunction="C",e.Length="D",e.Colon="E",e.For="F",e.In="G",e.Break="H",e.Date="I",e.StringFunction="J",e.ParseInt="K",e.ParseFloat="L",e}(zJ||{}),VJ=function(e){return e.If="if",e.Else="else",e.DefineVariable="var",e.Function="function",e.AddListener="on",e.RemoveListener="off",e.PlaySound="playSound",e.PauseSound="pauseSound",e.ResumeSound="resumeSound",e.JumpToScene="jumpToScene",e.JumpToNextScene="jumpToNextScene",e.JumpToPrevScene="jumpToPrevScene",e.PlayAnimation="play",e.StopAnimation="stopAnimation",e.GotoPlay="gotoPlay",e.GotoStop="gotoStop",e.Emit="emit",e.True="true",e.False="false",e.Print="print",e.Trace="trace",e.This="this",e.Global="global",e.Date="Date",e.System="system",e.Random="random",e.Pop="pop",e.Push="push",e.Shift="shift",e.Unshift="unshift",e.Concat="concat",e.Splice="splice",e.Length="length",e.IndexOf="indexOf",e.Replace="replace",e.Split="split",e.Substr="substr",e.Substring="substring",e.ParseInt="parseInt",e.ParseFloat="parseFloat",e.For="for",e.In="in",e.Break="break",e.Wait="wait",e.SetTimeout="setTimeout",e.SetInterval="setInterval",e.SetEnterFrame="setEnterFrame",e.Enter="\n",e.Space=" ",e.At="@",e.Dollar="$",e.Sharp="#",e.Equal="=",e.Dot=".",e.Comma=",",e.Add="+",e.Minus="-",e.Star="*",e.Slash="/",e.Exclamation="!",e.Vertical="|",e.And="&",e.Backslash="\\",e.Percent="%",e.More=">",e.Less="<",e.BracketL="(",e.BracketR=")",e.SquareBracketL="[",e.SquareBracketR="]",e.BlockL="{",e.BlockR="}",e.SingleQuot="'",e.DoubleQuot='"',e.Semicolon=";",e.Colon=":",e}(VJ||{}),GJ=[VJ.Enter,VJ.Space,VJ.At,VJ.Dollar,VJ.Sharp,VJ.Equal,VJ.Dot,VJ.Comma,VJ.Add,VJ.Minus,VJ.Star,VJ.Slash,VJ.Exclamation,VJ.Vertical,VJ.And,VJ.Backslash,VJ.Percent,VJ.More,VJ.Less,VJ.BracketL,VJ.BracketR,VJ.SquareBracketL,VJ.SquareBracketR,VJ.BlockL,VJ.BlockR,VJ.SingleQuot,VJ.DoubleQuot,VJ.Semicolon,VJ.Colon],WJ=function(e){return e[e.DefineVariable=0]="DefineVariable",e[e.DefineFunction=1]="DefineFunction",e[e.Print=2]="Print",e[e.IfGroup=3]="IfGroup",e[e.Express=4]="Express",e[e.Comment=5]="Comment",e[e.NSFunction=6]="NSFunction",e[e.CusFunction=7]="CusFunction",e[e.ArrayRandom=8]="ArrayRandom",e[e.For=9]="For",e[e.Break=10]="Break",e}(WJ||{}),XJ="[0-9a-zA-Z]",YJ="(("+zJ.This+"|"+zJ.Global+")("+zJ.Child+"("+zJ.Number+"|"+zJ.String+"))*)",KJ="(("+YJ+"|"+zJ.Global+")?("+zJ.Variable+"("+zJ.Number+"|"+zJ.String+"))+)",qJ="(("+YJ+")("+zJ.Dot+zJ.String+")+)",ZJ="(("+KJ+")("+zJ.Dot+zJ.String+")+)",$J="(("+zJ.Quotation+XJ+"*"+zJ.Quotation+")|("+zJ.DoubleQuotation+XJ+"*"+zJ.DoubleQuotation+"))",QJ="("+zJ.SquareBracket+")+",JJ="("+$J+"|"+("("+zJ.Number+"|("+zJ.Option+zJ.Number+")|("+zJ.Option+zJ.Number+zJ.Dot+zJ.Number+")|("+zJ.Number+zJ.Dot+zJ.Number+"))")+"|"+zJ.Boolean+"|"+QJ+"|"+zJ.Block+")",e0="("+zJ.Date+zJ.Dot+zJ.String+")",t0="("+zJ.Option+"|"+zJ.Equal+"|"+zJ.Slash+")",n0="("+KJ+QJ+"("+zJ.Dot+zJ.String+")*)",r0="("+KJ+zJ.Dot+zJ.ArrayFunction+zJ.Bracket+")",i0="("+KJ+zJ.Dot+zJ.StringFunction+zJ.Bracket+")",o0="("+zJ.ParseInt+zJ.Bracket+")",a0="("+zJ.ParseFloat+zJ.Bracket+")",s0="("+KJ+zJ.Dot+zJ.Length+")",l0="("+KJ+"|"+qJ+"|"+ZJ+"|"+n0+"|"+r0+"|"+s0+"|"+e0+"|"+i0+"|"+o0+"|"+a0+"|"+zJ.Bracket+"|"+YJ+")",u0="("+KJ+zJ.Dot+zJ.Random+zJ.Bracket+")",c0=function(){function e(){u(this,e),this.debug=!1,this.skipComment=!0,this.regNumber=/^\d+$/,this.regDefineVariable=new RegExp(zJ.DefaultVariable+"("+zJ.Global+")?"+zJ.Variable+"["+zJ.String+zJ.Number+"]"+zJ.Equal+XJ+"+"),this.regDefineFunction=new RegExp(zJ.Function+zJ.String+zJ.Bracket+zJ.Block),this.regPrint=new RegExp(zJ.Print+zJ.Bracket),this.regIfGroup=new RegExp(zJ.If+zJ.Bracket+zJ.Block+"("+zJ.Else+zJ.If+zJ.Bracket+zJ.Block+")*("+zJ.Else+zJ.Block+")*"),this.regIf=new RegExp(zJ.If+zJ.Bracket+zJ.Block),this.regElseIf=new RegExp(zJ.Else+zJ.If+zJ.Bracket+zJ.Block),this.regElse=new RegExp(zJ.Else+zJ.Block),this.regExpress=new RegExp("("+r0+"|"+i0+"|"+o0+"|"+a0+"|(("+l0+"|"+JJ+")(("+t0+")+("+l0+"|"+JJ+"))+))"),this.regExpressItem=new RegExp(l0),this.regComment=new RegExp(zJ.Slash+zJ.Slash+XJ+"*"),this.regNSFunction=new RegExp("("+YJ+zJ.Dot+")?"+zJ.NSFunction+zJ.Bracket),this.regCusFunction=new RegExp("("+YJ+"|"+KJ+")"+zJ.Dot+zJ.String+zJ.Bracket),this.regClosureMaybe=new RegExp(zJ.Bracket+zJ.Equal+zJ.Option+zJ.Block),this.regEventListenerFun=new RegExp("("+YJ+zJ.Dot+zJ.String+")"),this.regArrayRandom=new RegExp(u0),this.regFor=new RegExp(zJ.For+zJ.Bracket+zJ.Block),this.regBreak=new RegExp(zJ.Break),this.actionRegs=[this.regDefineVariable,this.regDefineFunction,this.regPrint,this.regIfGroup,this.regExpress,this.regComment,this.regNSFunction,this.regCusFunction,this.regArrayRandom,this.regFor,this.regBreak],this.scriptStr="",this.functionParams=[]}return f(e,[{key:"parse",value:function(e){if(this.scriptStr=e,this.scriptStr){var t=this.splitWord(this.scriptStr);this.log("splitWords: ",t);var n=this.parseToken(t);this.log("tokens",n);var r=this.parseAst(n);return this.log(r),r}return[]}},{key:"isEnter",value:function(e){return"\n"===e||"\r"===e}},{key:"splitWord",value:function(e){for(var t=[],n=[],r=0,i=!1,o=!1,a=0,s=e.length;a<s;a++){var l=e.charAt(a);e.charCodeAt(a);if(2===r){if(!this.isEnter(l)){n.push(l);continue}l=";",r=0}else 1===r&&l!==VJ.Slash&&(r=0);if(i&&l!==VJ.SingleQuot||o&&l!==VJ.DoubleQuot)this.isEnter(l)||n.push(l);else if(this.isEnter(l)||" "===l||"\t"===l){if(n.length>0){var u=n.join("");t.push(u),n.length=0}}else if(GJ.indexOf(l)>=0){if(n.length>0){var c=n.join("");t.push(c),n.length=0}switch(l===VJ.SingleQuot?i=!i:l===VJ.DoubleQuot&&(o=!o),l){case"/n":case"/r":case" ":break;default:l===VJ.Slash&&r++,t.push(l)}}else n.push(l)}return t}},{key:"parseToken",value:function(e){for(var t,n=[],r=[],i=zJ.None,o=0,a=e.length;o<a;o++){var s=e[o],l={type:zJ.None,value:s};if(i===zJ.Quotation&&s!==VJ.SingleQuot||i===zJ.DoubleQuotation&&s!==VJ.DoubleQuot)l.type=zJ.String;else switch(s){case VJ.At:l.type=zJ.ActionList;break;case VJ.Equal:l.type=zJ.Equal;break;case VJ.DefineVariable:l.type=zJ.DefaultVariable;break;case VJ.SingleQuot:l.type=zJ.Quotation,i=i===zJ.None?zJ.Quotation:zJ.None;break;case VJ.DoubleQuot:l.type=zJ.DoubleQuotation,i=i===zJ.None?zJ.DoubleQuotation:zJ.None;break;case VJ.Function:l.type=zJ.Function;break;case VJ.If:l.type=zJ.If;break;case VJ.Else:l.type=zJ.Else;break;case VJ.Dollar:l.type=zJ.Variable;break;case VJ.Sharp:l.type=zJ.Child;break;case VJ.Dot:l.type=zJ.Dot;break;case VJ.Semicolon:l.type=zJ.Semicolon;break;case VJ.Slash:l.type=zJ.Slash;break;case VJ.True:case VJ.False:l.type=zJ.Boolean;break;case VJ.Comma:l.type=zJ.Comma;break;case VJ.Print:case VJ.Trace:l.type=zJ.Print;break;case VJ.This:l.type=zJ.This;break;case VJ.Global:l.type=zJ.Global;break;case VJ.System:l.type=zJ.System;break;case VJ.Random:l.type=zJ.Random;break;case VJ.Length:l.type=zJ.Length;break;case VJ.For:l.type=zJ.For;break;case VJ.In:l.type=zJ.In;break;case VJ.Break:l.type=zJ.Break;break;case VJ.Date:l.type=zJ.Date;break;case VJ.Pop:case VJ.Push:case VJ.Shift:case VJ.Unshift:case VJ.Concat:case VJ.Splice:l.type=zJ.ArrayFunction;break;case VJ.IndexOf:case VJ.Replace:case VJ.Split:case VJ.Substr:case VJ.Substring:l.type=zJ.StringFunction;break;case VJ.ParseInt:l.type=zJ.ParseInt;break;case VJ.ParseFloat:l.type=zJ.ParseFloat;break;case VJ.AddListener:case VJ.RemoveListener:case VJ.Emit:case VJ.PlaySound:case VJ.PauseSound:case VJ.ResumeSound:case VJ.JumpToScene:case VJ.JumpToNextScene:case VJ.JumpToPrevScene:case VJ.PlayAnimation:case VJ.StopAnimation:case VJ.GotoPlay:case VJ.GotoStop:case VJ.Wait:case VJ.SetTimeout:case VJ.SetInterval:case VJ.SetEnterFrame:l.type=zJ.NSFunction;break;case VJ.Add:case VJ.Minus:case VJ.Star:case VJ.Exclamation:case VJ.Vertical:case VJ.And:case VJ.Percent:case VJ.More:case VJ.Less:l.type=zJ.Option;break;case VJ.Colon:l.type=zJ.Colon;break;case VJ.BracketL:case VJ.BlockL:case VJ.SquareBracketL:l=void 0,t&&r.push(t),t=[];break;case VJ.BracketR:l.type=zJ.Bracket,l.value=t,t=r.length>0?r.pop():void 0;break;case VJ.BlockR:l.type=zJ.Block,l.value=t,t=r.length>0?r.pop():void 0;break;case VJ.SquareBracketR:l.type=zJ.SquareBracket,l.value=t,t=r.length>0?r.pop():void 0;break;default:this.regNumber.test(s)?l.type=zJ.Number:l.type=zJ.String}l&&(t?t.push(l):n.push(l))}return n}},{key:"parseAst",value:function(e){for(var t,n=[],r=[],i="",o=zJ.ActionList+zJ.String+zJ.Equal+zJ.Block,a=zJ.ActionList+zJ.Number+zJ.Equal+zJ.Block,s=zJ.ActionList+zJ.This+zJ.Equal+zJ.Block,l=0,u=e.length;l<u;l++){var c=e[l];c.type===zJ.Semicolon?(t=this.parseMainAst(r.concat(),i),r.length=0,i=""):(r.push(c),i+=c.type.toString()),i===o||i===a||i===s?(t=this.parseActionList(r.concat()),r.length=0,i=""):l===u-1&&(t=this.parseMainAst(r.concat(),i)),t&&(n.push(t),t=void 0)}return n}},{key:"parseMainAst",value:function(e,t){var n,r=zJ.ActionList+zJ.String+zJ.Equal+zJ.Block,i=zJ.ActionList+zJ.Number+zJ.Equal+zJ.Block,o=zJ.ActionList+zJ.This+zJ.Equal+zJ.Block;if(t===r||t===i||t===o)n=this.parseActionList(e.concat());else if(this.regComment.test(t))n=this.parseComment(e.concat());else if(this.regDefineVariable.test(t)){var a=this.parseDefineVariable(e.concat());a.length>0&&(n=a[0],a.length>1&&this.warn("define variable must be a simple const value"))}return n}},{key:"parseComment",value:function(e){if(!this.skipComment){for(var t={type:lJ.Comment,value:""},n=0,r=e.length;n<r;n++)t.value+=e[n].value;return t}}},{key:"parseActionList",value:function(e){return{type:lJ.ActionList,value:e[1].value,execute:this.parseBlock(e[3])}}},{key:"parseBlock",value:function(e){var t,n=[],r=[],i="",o=[],a=zJ.Function+zJ.String+zJ.Bracket+zJ.Block;if(e.type===zJ.Block&&(o=e.value),!o||0===o.length)return n;for(var s=0,l=o.length;s<l;s++){var u=o[s];if(u.type===zJ.Semicolon?(t=this.parseAction(r.concat(),i),r.length=0,i=""):(r.push(u),((i+=u.type.toString())===a||this.regNSFunction.test(i))&&(t=this.parseAction(r.concat(),i),r.length=0,i="")),s===l-1&&r.length>0&&(t=this.parseAction(r.concat(),i),r.length=0,i=""),t&&t.length){for(var c=0,h=t.length;c<h;c++)n.push(t[c]);t=void 0}}return n}},{key:"parseAction",value:function(e,t){var n=[];if(0===e.length)return n;this.log("parse action:",t);for(var r=0,i=this.actionRegs.length;r<i;r++){if(this.actionRegs[r].test(t)){var o=void 0;switch(r){case WJ.DefineVariable:var a=this.parseDefineVariable(e);2===a.length?(n.push(a[0]),o=a[1]):1===a.length&&(o=a[0]);break;case WJ.DefineFunction:o=this.parseDefineFunction(e);break;case WJ.Print:o=this.parsePrint(e);break;case WJ.IfGroup:o=this.parseIfGroup(e);break;case WJ.Express:o=this.parseExpressTask(e);break;case WJ.Comment:o=this.parseComment(e);break;case WJ.NSFunction:o=this.parseNSFunction(e);break;case WJ.CusFunction:o=this.parseCusFunction(e);break;case WJ.ArrayRandom:o=this.parseArrayRandom(e);break;case WJ.For:o=this.parseFor(e);break;case WJ.Break:o=this.parseBreak(e)}return o&&n.push(o),this.log("parse action result:",o),n}}return this.warn("parse action result: undefined",e),n}},{key:"parseDefineVariable",value:function(e){var t=2,n=4,r=!1;e.length>=6&&e[1].type===zJ.Global&&(t=3,n=5,r=!0);var i={type:lJ.DefineVariable,variableType:fJ.STRING,value:"",varId:e[t].value};r&&(i.target=[-1]);for(var o=e.concat(),a=0,s=n;a<s;a++)o.shift();var l=this.parseExpressType(o);if(1===l.length&&0===l[0][0])e[n].type===zJ.Number||e[n].type===zJ.String?(i.variableType=fJ.NUMBER,i.value=this.parseNumberFromTokens(e,n)):e[n].type===zJ.Quotation||e[n].type===zJ.DoubleQuotation?(i.variableType=fJ.STRING,i.value=this.parseStringFromTokens(e,n)):e[n].type===zJ.Boolean?(i.variableType=fJ.BOOLEAN,i.value=e[n].value===VJ.True):e[n].type===zJ.Block?(i.variableType=fJ.OBJECT,i.value=this.parseObjectFromBlock(e[n])):e[n].type===zJ.SquareBracket&&(i.variableType=fJ.ARRAY,i.value=this.parseArrayFromSquare(e[n]));else if(i.variableType=fJ.OBJECT,l.length>0)return l.unshift([5,"="]),r?l.unshift([1,[-1],i.varId]):l.unshift([1,[],i.varId]),[i,{type:lJ.Express,express:l}];return[i]}},{key:"parseDefineFunction",value:function(e){var t=this.parseFunctionParamFromBracket(e[2]);if(t&&t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n];if(i[0]!==uJ.VARIABLE)throw new Error("function params error:"+t.join(","));this.functionParams.push(i[2])}var o={type:lJ.DefineFunction,formalParams:t.concat(),name:e[1].value,execute:this.parseBlock(e[3])};return this.functionParams.length=0,o}},{key:"parsePrint",value:function(e){var t={type:lJ.Print,value:""};return!e[1].value||e[1].value[0]!==zJ.Quotation&&e[1].value[0]!==zJ.DoubleQuotation?t.value=this.parseExpressItemFromBracket(e[1]):t.value=this.parseStringFromBracket(e[1]),t}},{key:"parseIfGroup",value:function(e){for(var t,n={type:lJ.IfGroup,execute:[]},r=[],i=[],o="",a=0,s=e.length;a<s;a++){var l=e[a];i.push(l),o+=l.type.toString(),this.regElseIf.test(o)?(t=this.parseElseIf(i.concat()),i.length=0,o=""):this.regIf.test(o)?(t=this.parseIf(i.concat()),i.length=0,o=""):this.regElse.test(o)&&(t=this.parseElse(i.concat()),i.length=0,o=""),t&&(r.push(t),t=void 0)}return n.execute=r,n}},{key:"parseIf",value:function(e){return{type:lJ.If,condition:this.parseExpressFromBracket(e[1]),execute:this.parseBlock(e[2])}}},{key:"parseElseIf",value:function(e){return{type:lJ.ElseIf,condition:this.parseExpressFromBracket(e[2]),execute:this.parseBlock(e[3])}}},{key:"parseElse",value:function(e){return{type:lJ.Else,execute:this.parseBlock(e[1])}}},{key:"parseExpressTask",value:function(e){return{type:lJ.Express,express:this.parseExpressType(e)}}},{key:"parseNSFunction",value:function(e){for(var t,n,r=0,i=e.length;r<i;r++)if(e[r].type===zJ.NSFunction){n=e[r];break}if(this.log("parse function before\uff1a",n,e),n)switch(n.value){case VJ.AddListener:t=this.parseAddListener(e);break;case VJ.RemoveListener:t=this.parseRemoveListener(e);break;case VJ.Emit:t=this.parseEmit(e);break;case VJ.PlaySound:t=this.parsePlaySound(e);break;case VJ.PauseSound:t=this.parsePauseSound(e);break;case VJ.ResumeSound:t=this.parseResumeSound(e);break;case VJ.JumpToScene:t=this.parseJumpToScene(e);break;case VJ.JumpToNextScene:t=this.parseJumpToNextScene(e);break;case VJ.JumpToPrevScene:t=this.parseJumpToPrevScene(e);break;case VJ.PlayAnimation:t=this.parsePlayAnimation(e);break;case VJ.StopAnimation:t=this.parseStopAnimation(e);break;case VJ.GotoPlay:t=this.parseGotoPlay(e);break;case VJ.GotoStop:t=this.parseGotoStop(e);break;case VJ.Wait:t=this.parseWait(e);break;case VJ.SetTimeout:t=this.parseSetTimeout(e);break;case VJ.SetInterval:t=this.parseSetInterval(e);break;case VJ.SetEnterFrame:t=this.parseSetEnterFrame(e)}return this.log("parse n function after:",t),t}},{key:"parseNSFunctionTarget",value:function(e){for(var t=[],n=0,r=e.length-2;n<r&&e[n+2].type!==zJ.Bracket;n++)t.push(e[n]);if(t.length>0)return this.parseComponentOrExpressItem(t)}},{key:"parseAddListener",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===zJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseEventParamFromBracket(t);if(i.ok){var o={type:lJ.AddEventListener,event:i.eventName,target:n};return e.length&&(e[0].type===zJ.Global?o.global=!0:e[0].type===zJ.System&&(o.system=!0)),Array.isArray(i.function)?o.execute=i.function:(o.funName=i.function,o.type=lJ.AddEventListenerCall),o}}}},{key:"parseRemoveListener",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===zJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseEventParamFromBracket(t);if(i.eventName){var o={type:lJ.RemoveEventListener,event:i.eventName,target:n};return e.length&&(e[0].type===zJ.Global?o.global=!0:e[0].type===zJ.System&&(o.system=!0)),o}}}},{key:"parseEmit",value:function(e){for(var t,n=this.parseNSFunctionTarget(e),r=e.length-1;r>=0;r--)if(e[r].type===zJ.Bracket){t=e[r];break}if(n&&t){var i=this.parseExpressTypeFromBracket(t),o={type:lJ.EmitEvent,event:"",target:n};return e.length&&(e[0].type===zJ.Global?o.global=!0:e[0].type===zJ.System&&(o.system=!0)),i&&i.length&&(o.event=i[0][1],i.length>1&&(o.eventData=i[1])),o}}},{key:"parseJumpToScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:lJ.JumpToScene,value:t[0][1]};return t.length>1&&(n.transition=t[1][1]),n}}},{key:"parseJumpToNextScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]),n={type:lJ.JumpToNextScene};return t.length>0&&(n.transition=t[0][1]),n}},{key:"parseJumpToPrevScene",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]),n={type:lJ.JumpToPrevScene};return t.length>0&&(n.transition=t[0][1]),n}},{key:"parsePlaySound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:lJ.PlaySound,value:t[0],trackId:"-1"};if(t.length>1&&(n.trackId=t[1][1]),t.length>2){var r=t[2];if(r[0]===uJ.CONST){var i=r[1];if("[object Object]"===Object.prototype.toString.call(i))for(var o in i)i[o]&&(n[o]=i[o])}}return n}}},{key:"parsePauseSound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:lJ.PauseSound,value:t[0],trackId:"-1"};return t.length>1&&(n.trackId=t[1][1]),n}}},{key:"parseResumeSound",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length){var n={type:lJ.ResumeSound,value:t[0],trackId:"-1"};return t.length>1&&(n.trackId=t[1][1]),n}}},{key:"parsePlayAnimation",value:function(e){var t=this.parseCusFunction(e);return t.type=lJ.CallProtoFunction,t}},{key:"parseStopAnimation",value:function(e){var t=this.parseCusFunction(e);if(t&&t.target){var n={type:lJ.StopAnimation,target:t.target};return this.log("stopAnimation",n),n}}},{key:"parseCusFunction",value:function(e){var t={type:lJ.CallFunction,target:[],name:""},n=[],r=[],i=0,o=0;for(i=0,o=e.length-2;i<o&&e[i+2].type!==zJ.Bracket;i++)n.push(e[i]);for(o=e.length,i++;i<o;i++)r.push(e[i]);if(n.length>0&&r.length>0){var a=this.parseComponentOrExpressItem(n);if(t.target=a,r.length>=2&&(r[0].type===zJ.String||r[0].type===zJ.NSFunction)&&r[1].type===zJ.Bracket){var s=r[0].value,l=this.parseFunctionParamFromBracket(r[1]);return t.name=s,l.length>0&&(t.params=l),"tweenToPlay"===s&&(t.type=lJ.CallProtoFunction),t}}}},{key:"parseArrayRandom",value:function(e){var t,n={type:lJ.ArrayRandom,target:[]},r=[uJ.VARIABLE],i=[],o=0;for(o=0,t=e.length;o<t;o++)if(e[o].type!==zJ.This&&e[o].type!==zJ.Child)if(e[o].type===zJ.Global)i.push(-1);else if(e[o].type===zJ.String||e[o].type===zJ.Number)i.push(e[o].value);else if(e[o].type===zJ.Variable)break;if(r.push(i),o<t)for(;o<t;o++)if(e[o].type!==zJ.Variable)if(e[o].type===zJ.String||e[o].type===zJ.Number)r.push(e[o].value);else if(e[o].type===zJ.Dot)break;return n.target=r,n}},{key:"parseFor",value:function(e){var t=this.parseForinFromBracket(e[1]);if(t){var n={type:lJ.For,forin:t,execute:this.parseBlock(e[2])};return this.functionParams.length&&this.functionParams.pop(),n}}},{key:"parseBreak",value:function(e){return{type:lJ.Break}}},{key:"parseGotoPlay",value:function(e){var t=this.parseCusFunction(e);if(t)return t.type=lJ.CallProtoFunction,t.name="gotoPlay",t}},{key:"parseGotoStop",value:function(e){var t=this.parseCusFunction(e);if(t)return t.type=lJ.CallProtoFunction,t.name="gotoStop",t}},{key:"parseWait",value:function(e){var t=this.parseFunctionParamFromBracket(e[1]);if(0!==t.length)return{type:lJ.Wait,value:t[0]}}},{key:"parseSetTimeout",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===zJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=2){var i={type:lJ.SetTimeout};if(r[0].type===jJ.ExpressItem&&(i.value=r[0].value),r[1].type===jJ.Closure&&(i.execute=r[1].value),i.value&&i.execute)return i}}}},{key:"parseSetInterval",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===zJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=2){var i={type:lJ.SetInterval};if(r[0].type===jJ.ExpressItem&&(i.value=r[0].value),r[1].type===jJ.Closure?i.execute=r[1].value:r[1].type===jJ.ExpressItem&&(i.times=r[1].value),r.length>=3&&r[2].type===jJ.Closure&&(i.execute=r[2].value),i.value&&i.execute)return i}}}},{key:"parseSetEnterFrame",value:function(e){for(var t,n=e.length-1;n>=0;n--)if(e[n].type===zJ.Bracket){t=e[n];break}if(t){var r=this.parseFunctionParamFromBracket2(t);if(r&&r.length>=1){var i={type:lJ.EnterFrame};if(r[0].type===jJ.Closure)i.execute=r[0].value;else if(r[0].type===jJ.ExpressItem){var o="";return r[0].value[0]===uJ.PROPERTY&&(o=r[0].value[2]),i.type=lJ.EnterFrameCall,i.funName=o,i}if(i.execute)return i}}}},{key:"parseNumberFromTokens",value:function(e,t){var n="",r=e[t];if(n+=r.value,r.type===zJ.Option&&r.value===VJ.Minus)return-this.parseNumberFromTokens(e,t+1);if(e.length>t+2&&e[t+1].type===zJ.Dot&&e[t+2].type===zJ.Number)return n=n+"."+e[t+2].value,parseFloat(n);if(r.type===zJ.Number)return parseInt(n,10);if(r.type===zJ.String){if(0===n.indexOf("0x"))return parseInt(n,16);this.warn("parseNumber error:",r.value)}return this.warn("parseNumber error:",r),0}},{key:"parseStringFromTokens",value:function(e,t){for(var n="",r=0,i=t,o=e.length;i<o;i++){var a=e[i];if(a.type===zJ.Quotation||a.type===zJ.DoubleQuotation){if(++r>=2)break}else n+=a.value}return n}},{key:"parseObjectFromBlock",value:function(e){for(var t,n,r=[],i=[],o=e.value,a=!0,s={},l=0,u=o.length;l<u;l++){var c=o[l];c.type===zJ.Colon?a=!1:c.type===zJ.Comma?(a=!0,t=this.parseConst(r),n=this.parseConst(i),t&&n&&(s[t[1]]=n[1]),r.length=0,i.length=0):a?r.push(c):i.push(c)}return r.length>0&&i.length>0&&(t=this.parseConst(r),n=this.parseConst(i),t&&n&&(s[t[1]]=n[1]),r.length=0,i.length=0),s}},{key:"parseArrayFromSquare",value:function(e){for(var t=[],n=[],r=e.value,i=0,o=r.length;i<o;i++){var a=r[i];if(a.value===VJ.Comma){if(n.length){var s=this.parseConst(n);s&&t.push(s[1]),n.length=0}}else n.push(a)}if(n.length){var l=this.parseConst(n);l&&t.push(l[1]),n.length=0}return t}},{key:"parseStringFromBracket",value:function(e){if(e.type===zJ.Bracket)for(var t=e.value,n=0,r=t.length;n<r;n++){var i=t[n];if(i.type===zJ.Quotation||i.type===zJ.DoubleQuotation)return this.parseStringFromTokens(t,n)}return""}},{key:"parseExpressType",value:function(e){var t,n,r=[],i=[],o="",a=!1;if(!e||0===e.length)return r;for(var s=0,l=e.length;s<l;s++){var u=e[s];if(u.type!==zJ.Bracket||t&&(t.type===zJ.ArrayFunction||t.type===zJ.StringFunction||t.type===zJ.ParseInt||t.type===zJ.ParseFloat||t.type===zJ.Random)){if(u.type===zJ.Option||u.type===zJ.Slash||u.type===zJ.Equal){var c=!1;a?u.value===VJ.Exclamation?(n=this.parseOperate(i.concat(),o),i.length=0,o=""):u.value===VJ.Minus&&(n=this.parseOperate(i.concat(),o),i.length=0,o="",c=!0):(n=this.parseExpressItem(i.concat(),o),i.length=0,o=""),i.push(u),o+=u.type.toString(),a=!0,c&&(a=!1,c=!1)}else a&&(n=this.parseOperate(i.concat(),o),i.length=0,o=""),i.push(u),o+=u.type.toString(),a=!1;n&&(r.push(n),n=void 0)}else if(u.value&&Array.isArray(u.value)){var h=u.value,d=this.parseExpressType(h);if(d.length){o&&a&&(n=this.parseOperate(i.concat(),o),i.length=0,o="",a=!1,n&&(r.push(n),n=void 0)),r.push([5,"("]);for(var f=0,p=d.length;f<p;f++)r.push(d[f]);r.push([5,")"])}}t=u}return!a&&i.length>0&&(n=this.parseExpressItem(i.concat(),o),i.length=0,o=""),n&&(r.push(n),n=void 0),r}},{key:"parseExpressFromBracket",value:function(e){var t;return e.type===zJ.Bracket&&(t=e.value),t&&0!==t.length?this.parseExpressType(t):[]}},{key:"parseExpressItemFromBracket",value:function(e){var t;if(e.type===zJ.Bracket&&(t=e.value),!t||0===t.length)return[];for(var n="",r=0,i=t.length;r<i;r++)n+=t[r].type;return this.parseExpressItem(t,n)}},{key:"parseExpressItem",value:function(e,t){var n=[];if(e&&0!==e.length){var r=new RegExp(qJ),i=new RegExp(ZJ),o=new RegExp(JJ),a=new RegExp(KJ+"$"),s=new RegExp(n0),l=new RegExp(s0),u=new RegExp(r0),c=new RegExp(i0),h=new RegExp(YJ),d=new RegExp(e0),f=new RegExp(o0),p=new RegExp(a0);return this.log("pares express start:",e,t),s.test(t)?(this.log("parse array index"),this.parseArrayIndex(e)):l.test(t)?(this.log("parse array length"),this.parseArrayLength(e)):u.test(t)?(this.log("parse array function"),this.parseArrayFunction(e)):c.test(t)?(this.log("parse string function"),this.parseStringFunction(e)):f.test(t)?(this.log("parseP arseInt"),this.parseParseInt(e)):p.test(t)?(this.log("parse ParseFlot"),this.parseParseFloat(e)):a.test(t)?(this.log("parse variable"),this.parseVariable(e)):r.test(t)?(this.log("parse property"),this.parseProperty(e)):i.test(t)?(this.log("parse object "),this.parseVariable(e)):h.test(t)?(this.log("parse component"),this.parseComponentExpress(e)):o.test(t)?(this.log("parse const"),this.parseConst(e)):d.test(t)?this.parseDate(e):(this.log("pares express fail:",e,t),n.length>0?n:void 0)}}},{key:"parseOperate",value:function(e,t){for(var n="",r=0,i=e.length;r<i;r++)n+=e[r].value;return[uJ.OPERATION,n]}},{key:"parseConst",value:function(e){var t=[0];if(e[0].type===zJ.Quotation||e[0].type===zJ.DoubleQuotation||e[0].type===zJ.String?t.push(this.parseStringFromTokens(e,0)):e[0].type===zJ.Block?t.push(this.parseObjectFromBlock(e[0])):e[0].type===zJ.SquareBracket?t.push(this.parseArrayFromSquare(e[0])):e[0].type===zJ.Number||e[0].type===zJ.Option&&e[0].value===VJ.Minus?t.push(this.parseNumberFromTokens(e,0)):e[0].type===zJ.Boolean&&t.push("true"===e[0].value),t.length>1)return t}},{key:"parseDate",value:function(e){var t;if(e.length>=3&&e[0].type===zJ.Date&&e[1].type===zJ.Dot)switch(t=[uJ.SYSTEM],e[2].value){case"time":t.push(cJ.TIME);break;case"year":t.push(cJ.YEAR);break;case"month":t.push(cJ.MONTH);break;case"day":t.push(cJ.DAY);break;case"date":t.push(cJ.DATE);break;case"hour":t.push(cJ.HOUR);break;case"minute":t.push(cJ.MINUTE);break;case"second":t.push(cJ.SECOND);break;case"millisecond":t.push(cJ.MILLISECOND);break;default:t=void 0}return t}},{key:"parseVariable",value:function(e){var t,n=[uJ.VARIABLE],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==zJ.This&&e[i].type!==zJ.Child)if(e[i].type===zJ.Global)r.push(-1);else if(e[i].type===zJ.String||e[i].type===zJ.Number)r.push(e[i].value);else if(e[i].type===zJ.Variable)break;if(n.push(r),i<t)for(;i<t;i++)if(e[i].type!==zJ.Variable)if(e[i].type===zJ.String||e[i].type===zJ.Number)n.push(e[i].value);else if(e[i].type===zJ.Dot)break;if(i<t)for(n[0]=uJ.OBJECT_VALUE;i<t;i++)e[i].type!==zJ.Dot&&(e[i].type!==zJ.String&&e[i].type!==zJ.Number||(n.push(e[i].value),n[0]=uJ.OBJECT_VALUE));if(this.functionParams.length>0){var o=n[2],a=this.functionParams.indexOf(o);a>=0&&(n[0]=uJ.PARAM_VALUE,n[1]=a)}return n}},{key:"parseComponentExpress",value:function(e){var t,n=[uJ.COMPONENT],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==zJ.This&&e[i].type!==zJ.Child)if(e[i].type===zJ.Global)r.push(-1);else if(e[i].type===zJ.String||e[i].type===zJ.Number)r.push(e[i].value);else if(e[i].type===zJ.Dot)break;return n.push(r),n}},{key:"parseProperty",value:function(e){var t,n=[uJ.PROPERTY],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==zJ.This&&e[i].type!==zJ.Child)if(e[i].type===zJ.Global)r.push(-1);else if(e[i].type===zJ.String||e[i].type===zJ.Number)r.push(e[i].value);else if(e[i].type===zJ.Dot)break;if(n.push(r),i<t)for(;i<t;i++)e[i].type!==zJ.Dot&&(e[i].type!==zJ.String&&e[i].type!==zJ.Number||n.push(e[i].value));return n}},{key:"parseArrayIndex",value:function(e){var t,n=[uJ.ARRAY_VALUE],r=[],i=[],o=0;for(o=0,t=e.length;o<t;o++)if(e[o].type!==zJ.This&&e[o].type!==zJ.Child)if(e[o].type===zJ.Global)r.push(-1);else if(e[o].type===zJ.String||e[o].type===zJ.Number)r.push(e[o].value);else if(e[o].type===zJ.Variable)break;if(n.push(r),o<t)for(;o<t;o++)if(e[o].type!==zJ.Variable)if(e[o].type===zJ.String||e[o].type===zJ.Number)n.push(e[o].value);else if(e[o].type===zJ.SquareBracket){var a=this.parseExpressTypeFromBracket(e[o]);a&&a.length&&i.push(a[0])}else if(e[o].type===zJ.Dot)break;for(var s=0,l=i.length;s<l;s++)n.push(i[s]);if(o<t)for(;o<t;o++)e[o].type!==zJ.Dot&&(e[o].type!==zJ.String&&e[o].type!==zJ.Number||n.push(e[o].value));return n}},{key:"parseArrayLength",value:function(e){var t,n=[uJ.ARRAY_LEN],r=[],i=0;for(i=0,t=e.length;i<t;i++)if(e[i].type!==zJ.This&&e[i].type!==zJ.Child)if(e[i].type===zJ.Global)r.push(-1);else if(e[i].type===zJ.String||e[i].type===zJ.Number)r.push(e[i].value);else if(e[i].type===zJ.Variable)break;if(n.push(r),i<t)for(;i<t;i++)if(e[i].type!==zJ.Variable)if(e[i].type===zJ.String||e[i].type===zJ.Number)n.push(e[i].value);else if(e[i].type===zJ.Dot)break;return n}},{key:"parseArrayFunction",value:function(e){var t=[uJ.ARRAY_FUNCTION],n=[],r=[],i="",o=0,a=0;for(o=0,a=e.length;o<a;o++)if(e[o].type!==zJ.This&&e[o].type!==zJ.Child)if(e[o].type===zJ.Global)n.push(-1);else if(e[o].type===zJ.String||e[o].type===zJ.Number)n.push(e[o].value);else if(e[o].type===zJ.Variable)break;if(t.push(n),o<a)for(;o<a;o++)if(e[o].type!==zJ.Variable)if(e[o].type===zJ.String||e[o].type===zJ.Number)t.push(e[o].value);else if(e[o].type===zJ.Dot)break;if(o<a)for(;o<a;o++)e[o].type===zJ.ArrayFunction?i=e[o].value:e[o].type===zJ.Bracket&&(r=this.parseExpressTypeFromBracket(e[o]));if(t.push(i),r&&r.length)for(o=0,a=r.length;o<a;o++)t.push(r[o]);return t}},{key:"parseStringFunction",value:function(e){var t=[uJ.STRING_FUNCTION],n=[],r=[],i="",o=0,a=0;for(o=0,a=e.length;o<a;o++)if(e[o].type!==zJ.This&&e[o].type!==zJ.Child)if(e[o].type===zJ.Global)n.push(-1);else if(e[o].type===zJ.String||e[o].type===zJ.Number)n.push(e[o].value);else if(e[o].type===zJ.Variable)break;if(t.push(n),o<a)for(;o<a;o++)if(e[o].type!==zJ.Variable)if(e[o].type===zJ.String||e[o].type===zJ.Number)t.push(e[o].value);else if(e[o].type===zJ.Dot)break;if(o<a)for(;o<a;o++)e[o].type===zJ.StringFunction?i=e[o].value:e[o].type===zJ.Bracket&&(r=this.parseExpressTypeFromBracket(e[o]));if(t.push(i),r&&r.length)for(o=0,a=r.length;o<a;o++)t.push(r[o]);return t}},{key:"parseParseInt",value:function(e){var t=[uJ.PARSE_INT],n=0,r=e.length,i=[];if(n<r)for(;n<r;n++)e[n].type===zJ.Bracket&&(i=this.parseExpressTypeFromBracket(e[n]));if(i&&i.length)for(n=0,r=i.length;n<r;n++)t.push(i[n]);return t}},{key:"parseParseFloat",value:function(e){var t=[uJ.PARSE_FLOAT],n=0,r=e.length,i=[];if(n<r)for(;n<r;n++)e[n].type===zJ.Bracket&&(i=this.parseExpressTypeFromBracket(e[n]));if(i&&i.length)for(n=0,r=i.length;n<r;n++)t.push(i[n]);return t}},{key:"parseComponentOrExpressItem",value:function(e){for(var t="",n=0,r=e.length;n<r;n++){t+=e[n].type}return this.regExpressItem.test(t)?this.parseExpressItem(e,t):this.parseComponent(e)}},{key:"parseComponent",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n];i.type!==zJ.Number&&i.type!==zJ.String||t.push(i.value)}return t}},{key:"parseEventParamFromBracket",value:function(e){var t={ok:!1,eventName:"",function:""},n=[],r=[],i="",o=!1,a=!1,s=[];if(e.type!==zJ.Bracket)return t;for(var l=0,u=(s=e.value).length;l<u;l++){var c=s[l];o?(r.push(c),i+=c.type):c.type!==zJ.Comma?n.push(c):o=!0}if(3!==n.length||n[1].type!==zJ.String&&n[1].type!==zJ.Number||(t.eventName=n[1].value,a=!0),this.regClosureMaybe.test(i)&&r[2].value===VJ.More)t.function=this.parseBlock(r[3]),a&&(t.ok=!0);else if(this.regEventListenerFun.test(i)){for(var h=[],d=0,f=s.length;d<f;d++)if(s[d].type===zJ.Dot){if(d<f-1&&s[d+1].type===zJ.String){t.function=s[d+1].value,a&&(t.ok=!0);break}}else h.push(s[d]);this.parseTargetComponent(h)}return t}},{key:"parseFunctionParamFromBracket",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==zJ.Bracket)return t;for(var o=0,a=(i=e.value).length;o<a;o++){var s=i[o];if(s.type!==zJ.Comma)n.push(s),r+=s.type;else{var l=this.parseExpressItem(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(o>=a-1&&n.length>0){var u=this.parseExpressItem(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseFunctionParamFromBracket2",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==zJ.Bracket)return t;for(var o=0,a=(i=e.value).length;o<a;o++){var s=i[o];if(s.type!==zJ.Comma)n.push(s),r+=s.type;else{var l=this.parseFunctionOneParam(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(o>=a-1&&n.length>0){var u=this.parseFunctionOneParam(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseFunctionOneParam",value:function(e,t){if(this.regClosureMaybe.test(t)&&e[2].value===VJ.More){var n=this.parseBlock(e[3]);return{type:jJ.Closure,value:n}}var r=this.parseExpressItem(e,t);return{type:jJ.ExpressItem,value:r}}},{key:"parseExpressTypeFromBracket",value:function(e){var t=[],n=[],r="",i=[];if(e.type!==zJ.Bracket&&e.type!==zJ.SquareBracket)return t;for(var o=0,a=(i=e.value).length;o<a;o++){var s=i[o];if(s.type!==zJ.Comma)n.push(s),r+=s.type;else{var l=this.parseExpressItem(n.concat(),r);r="",n.length=0,l&&t.push(l)}if(o>=a-1&&n.length>0){var u=this.parseExpressItem(n.concat(),r);r="",n.length=0,u&&t.push(u)}}return t}},{key:"parseForinFromBracket",value:function(e){var t=[];if(e.type===zJ.Bracket||e.type===zJ.SquareBracket){if((t=e.value).length>=4&&t[2].type===zJ.In){var n=[t[0],t[1]],r=t.concat();r.splice(0,3);var i=this.parseVariable(n);return i&&i.length>=3&&i[0]===uJ.VARIABLE?(this.functionParams.push(i[2]),r.length>=2?this.parseVariable(r):1===r.length?this.parseConst(r):void this.warn("for in params wrong",t)):void this.warn("for in params wrong",t)}this.warn("for in params wrong",t)}}},{key:"parseTargetComponent",value:function(e){var t,n=[],r=0;for(r=0,t=e.length;r<t;r++)if(e[r].type!==zJ.This&&e[r].type!==zJ.Child)if(e[r].type===zJ.Global)n.push(-1);else{if(e[r].type!==zJ.String&&e[r].type!==zJ.Number)break;n.push(e[r].value)}return n}},{key:"log",value:function(e){if(this.debug){var t=[];e&&t.push(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r&&(t=t.concat(r))}}},{key:"warn",value:function(e){var t=[];e&&t.push(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];r&&(t=t.concat(r))}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();c0._instance=void 0;var h0=function(e){v(n,e);var t=y(n);function n(e,r,i,o){var a;return u(this,n),(a=t.call(this)).funName=void 0,a.component=void 0,a.fun=void 0,a.data=void 0,a.funId="",a.component=e,a.funName=r,a.fun=o,a.fun.formalParams=i.formalParams,a.data=i,a}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component){var e=this.context.variableManager,t=this.funName,r=e.getTargetComponent(this.component,this.data.target);r&&(t=r.id+this.funName),e.setFunctionTask(t,this.fun),this.complete()}else this.complete()}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.fun&&this.fun.stop()}}]),n}(vJ),d0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){if(jm(m(n.prototype),"run",this).call(this),this.component&&this.context.variableManager){var e=this.context.variableManager,t=e.getTargetComponent(this.component,this.data.target);t?e.addVariableDataToComponent(t,this.data.varId,this.data.variableType,this.data.value):e.addVariableDataToGlobal(this.data.varId,this.data.variableType,this.data.value)}this.complete()}}]),n}(vJ),f0=function(e){v(n,e);var t=y(n);function n(e,r){var i;if(u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.loopTaskComplete=!0,i.callfun=void 0,i.callfunData=void 0,i.curTime=0,i.lastTime=0,i.funName=void 0,i.component=e,i.data=r,i.funName=r.funName,i.funName){i.callfunData={type:lJ.CallFunction,name:i.funName,params:[]};var o=new HJ(i.component,i.funName,i.callfunData);i.callfun=o,i.loopTask.addTask(o)}return i}return f(n,[{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this.component&&this.component?(this.loopTask&&this.loopTask.addListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.curTime=(new Date).getTime(),this.lastTime=this.curTime,Nb.shared.add(this.tick,this)):this.complete()}},{key:"complete",value:function(){jm(m(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.component&&Nb.shared.remove(this.tick,this)}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.complete()}},{key:"pause",value:function(){jm(m(n.prototype),"pause",this).call(this),this.component&&Nb.shared.remove(this.tick,this)}},{key:"resume",value:function(){this._isPaused&&this.component&&Nb.shared.add(this.tick,this),jm(m(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0}},{key:"tick",value:function(){if(this.loopTaskComplete&&this.loopTask){this.curTime=(new Date).getTime();var e=this.curTime-this.lastTime;this.callfunData&&(this.callfunData.params=[e]),this.loopTaskComplete=!1,this.loopTask.run(),this.lastTime=this.curTime}}}]),n}(CJ),p0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.loopTaskComplete=!0,i.component=e,i.data=r,i}return f(n,[{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this.component?(this.loopTask&&this.loopTask.addListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this),Nb.shared.add(this.tick,this)):this.complete()}},{key:"complete",value:function(){jm(m(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this),Nb.shared.remove(this.tick,this)}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.complete()}},{key:"pause",value:function(){jm(m(n.prototype),"pause",this).call(this),Nb.shared.remove(this.tick,this)}},{key:"resume",value:function(){this._isPaused&&Nb.shared.add(this.tick,this),jm(m(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0}},{key:"tick",value:function(){this.loopTaskComplete&&this.loopTask&&this.loopTask.run()}}]),n}(CJ),v0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).funName=void 0,i.formalParams=void 0,i.component=void 0,i._loopComplete=void 0,i.callTargets=[],i._loopComplete=!1,i.component=e,i.funName=r,i}return f(n,[{key:"injectParams",value:function(e){this.loopTask&&this.context.injectParamsToQueueTask(this.loopTask,e)}},{key:"runWithId",value:function(e){this._isRunning||(this.callTargets.push(e),this.run())}},{key:"stopWithId",value:function(e){var t=this.callTargets.indexOf(e);t>=0&&(t>0?this.callTargets.splice(t,1):(this.callTargets.splice(t,1),this._isRunning&&this.loopTask.stop()))}},{key:"breakWithId",value:function(e){var t=this.callTargets.indexOf(e);t>=0&&(t>0?this.callTargets.splice(t,1):(this.callTargets.splice(t,1),this._isRunning&&this.loopTask.break()))}},{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this._loopComplete=!0,this.loopTask&&(this.loopTask.on(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.on(pJ.EVENT_BREAK,this.onBreak,this)),this.callTargets.length>0?this.loopTask.run():this.complete()}},{key:"stop",value:function(){this.complete(),jm(m(n.prototype),"stop",this).call(this)}},{key:"break",value:function(){this.complete(),jm(m(n.prototype),"break",this).call(this)}},{key:"complete",value:function(){this.callTargets.length=0,this.loopTask.off(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.loopTask.off(pJ.EVENT_BREAK,this.onBreak,this),jm(m(n.prototype),"complete",this).call(this)}},{key:"onLoopComplete",value:function(){if(this.callTargets.length>0){var e=this.callTargets[0];this.callTargets.shift(),this._isRunning=!1,this.emit(pJ.FUNCTION_RUN_COMPLETE,e)}this.callTargets.length>0?this.loopTask.run():this.complete()}}]),n}(CJ),m0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.lastTimes=0,i.loopTaskComplete=!0,i.intervalComplete=!0,i.timeoutHandler=void 0,i._timeout=0,i._times=1,i.component=e,i.data=r,i}return f(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return SJ(e)||(e=1),e}},{key:"times",get:function(){var e=0;Array.isArray(this.data.times)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.times)):e=void 0===this.data.times?0:this.data.times;return SJ(e)||(e=0),e}},{key:"run",value:function(){jm(m(n.prototype),"run",this).call(this),this._timeout=this.timeout,this._times=this.times,this.lastTimes=this._times,this.loopTask&&this.loopTask.addListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this),this.runOnce(this._timeout,this._times)}},{key:"complete",value:function(){jm(m(n.prototype),"complete",this).call(this),this.loopTask&&this.loopTask.removeListener(pJ.EVENT_COMPLETE,this.onLoopComplete,this)}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.complete()}},{key:"resume",value:function(){this._isPaused&&this.loopTaskComplete&&this.intervalComplete&&this.checkComplete(this._timeout,this._times),jm(m(n.prototype),"resume",this).call(this)}},{key:"onLoopComplete",value:function(){this.loopTaskComplete=!0,this.intervalComplete&&this.checkComplete(this._timeout,this._times)}},{key:"runOnce",value:function(e,t){var n=this;this.intervalComplete=!1,this.timeoutHandler=setTimeout((function(){n.intervalComplete=!0,n.timeoutHandler&&clearTimeout(n.timeoutHandler),n.loopTaskComplete&&n.intervalComplete&&n.checkComplete(e,t)}),e)}},{key:"checkComplete",value:function(e,t){if(!this._isPaused&&!this._isCompleted){t>0&&!(this.lastTimes>0)?this.complete():(this.lastTimes--,this.loopTask?(this.loopTaskComplete=!1,this.runOnce(e,t),this.loopTask.run()):this.complete())}}}]),n}(CJ),g0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.timeoutHandler=void 0,i.component=e,i.data=r,i}return f(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return SJ(e)||(e=1),e}},{key:"run",value:function(){var e=this;jm(m(n.prototype),"run",this).call(this);var t=this.timeout;this.timeoutHandler=setTimeout((function(){e.timeoutHandler&&(e.timeoutHandler.stop(),e.timeoutHandler=void 0),e.loopTask&&e.loopTask.run()}),t),this.complete()}},{key:"stop",value:function(){jm(m(n.prototype),"stop",this).call(this),this.complete(),this.timeoutHandler&&this.timeoutHandler.stop()}}]),n}(CJ),y0=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this)).component=void 0,i.data=void 0,i.timeoutHandler=void 0,i.component=e,i.data=r,i}return f(n,[{key:"timeout",get:function(){var e=0;Array.isArray(this.data.value)?this.component&&this.component&&(e=this.context.variableManager.getExpressItemValue(this.component,this.data.value)):e=this.data.value;return SJ(e)||(e=1),e}},{key:"run",value:function(){var e=this;jm(m(n.prototype),"run",this).call(this);var t=this.timeout;this.timeoutHandler=setTimeout((function(){e.timeoutHandler&&(e.timeoutHandler.stop(),e.timeoutHandler=void 0),e.complete()}),t)}}]),n}(vJ),b0=function(){function e(t,n){u(this,e),this.thisTarget=void 0,this.data=void 0,this._actionList=[],this.thisTarget=t,this.data=n,this.parseData()}return f(e,[{key:"context",get:function(){return BJ.instance}},{key:"runWithContext",value:function(e){this.thisTarget=e,this.context.variableManager.addVariableToContext(e),this.run(),this.context.variableManager.clearVariableToContext(e)}},{key:"run",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].run()}}},{key:"stop",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].stop()}}},{key:"pause",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].pause()}}},{key:"resume",value:function(){if(this._actionList&&this._actionList.length)for(var e=0,t=this._actionList.length;e<t;e++){this._actionList[e].resume()}}},{key:"parseData",value:function(){if(this.data)if(Array.isArray(this.data))this.parseAST(this.data);else{var e,t=c0.instance.parse(this.data);if(t.length)for(var n=0,r=t.length;n<r;n++){var i=t[n];switch(i.type){case lJ.DefineVariable:this.addGlobalVariable(i);break;case lJ.ActionList:"this"!==i.value&&this.thisTarget.libId.toString()!==i.value||(e=i.execute)}}e&&this.parseAST(e)}}},{key:"addGlobalVariable",value:function(e){this.context.variableManager.addVariableDataToGlobal(e.varId,e.variableType,e.value)}},{key:"parseAST",value:function(e){if(e)for(var t=0,n=e.length;t<n;t++){var r=this.parseAction(e[t]);r&&this._actionList.push(r)}}},{key:"parseAction",value:function(e){var t;switch(e.type){case lJ.Add:t=this.parseAddToStageBefore(e);break;case lJ.Added:t=this.parseAddToStage(e);break;case lJ.SetProperty:t=this.parseSetProperty(e);break;case lJ.Click:t=this.parseClick(e);break;case lJ.Express:t=this.parseExpress(e);break;case lJ.IfGroup:t=this.parseIf(e);break;case lJ.DefineFunction:t=this.parseDefineFunction(e);break;case lJ.CallFunction:t=this.parseCallFunction(e);break;case lJ.Print:t=this.parsePrint(e);break;case lJ.AddEventListener:t=this.parseAddEventListener(e);break;case lJ.RemoveEventListener:t=this.parseRemoveEventListener(e);break;case lJ.EmitEvent:t=this.parseEmitEvent(e);break;case lJ.ArrayInit:t=new gJ(this.thisTarget,e);break;case lJ.ArrayPop:t=new yJ(this.thisTarget,e);break;case lJ.ArrayPush:t=new bJ(this.thisTarget,e);break;case lJ.ArraySplice:t=new EJ(this.thisTarget,e);break;case lJ.ArrayRandom:t=new _J(this.thisTarget,e);break;case lJ.ArrayConcat:t=new mJ(this.thisTarget,e);break;case lJ.ArrayShift:t=new xJ(this.thisTarget,e);break;case lJ.ArrayUnshift:t=new wJ(this.thisTarget,e);break;case lJ.AddEventListenerCall:t=this.parseAddEventListenerCall(e);break;case lJ.DefineVariable:t=new d0(this.thisTarget,e);break;case lJ.CallProtoFunction:t=new IJ(this.thisTarget,e);break;case lJ.GotoPlay:var n=e,r={type:lJ.CallProtoFunction,target:n.target,name:"gotoPlay",params:[]};Array.isArray(n.name)?r.params.push(n.name):r.params.push([0,n.name]),Array.isArray(n.frame)?r.params.push(n.frame):r.params.push([0,n.frame]),Array.isArray(n.times)?r.params.push(n.times):r.params.push([0,n.times]),Array.isArray(n.trackId)?r.params.push(n.trackId):r.params.push([0,n.trackId||0]),t=new IJ(this.thisTarget,r);break;case lJ.GotoStop:var i=e,o={type:lJ.CallProtoFunction,target:i.target,name:"gotoStop",params:[]};Array.isArray(i.name)?o.params.push(i.name):o.params.push([0,i.name]),Array.isArray(i.frame)?o.params.push(i.frame):o.params.push([0,i.frame]),t=new IJ(this.thisTarget,o);break;case lJ.For:t=this.parseFor(e);break;case lJ.Break:t=new TJ;break;case lJ.Wait:t=new y0(this.thisTarget,e);break;case lJ.SetTimeout:t=this.parseSetTimeout(e);break;case lJ.SetInterval:t=this.parseSetInterval(e);break;case lJ.EnterFrame:t=this.parseEnterFrame(e);break;case lJ.EnterFrameCall:t=this.parseEnterFrameCall(e)}return t}},{key:"parseSubTask",value:function(e,t){if(t.execute)for(var n=0,r=t.execute.length;n<r;n++){var i=t.execute[n],o=this.parseAction(i);o&&e.addSubTask(o)}}},{key:"parseAddToStageBefore",value:function(e){var t={type:lJ.AddEventListener,event:hJ.Add,target:[]},n=new AJ(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseAddToStage",value:function(e){var t={type:lJ.AddEventListener,event:hJ.Added,target:[]},n=new AJ(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseSetProperty",value:function(e){return new LJ(this.thisTarget,e)}},{key:"parseClick",value:function(e){var t={event:hJ.Click,type:lJ.AddEventListener,target:e.target},n=new AJ(this.thisTarget,t);return this.parseSubTask(n,e),n}},{key:"parseExpress",value:function(e){return new PJ(this.thisTarget,e)}},{key:"parseIf",value:function(e){var t=new RJ(this.thisTarget);if(e.execute)for(var n=0,r=e.execute.length;n<r;n++){var i=e.execute[n];if(i.type===lJ.If||i.type===lJ.ElseIf||i.type===lJ.Else){var o=i.condition,a=new kJ;if(i.execute)for(var s=0,l=i.execute.length;s<l;s++){var u=this.parseAction(i.execute[s]);u&&a.addTask(u)}t.addCondition(o,a)}}return t}},{key:"parseDefineFunction",value:function(e){var t=new v0(this.thisTarget,e.name);return this.parseSubTask(t,e),new h0(this.thisTarget,e.name,e,t)}},{key:"parseCallFunction",value:function(e){return new HJ(this.thisTarget,e.name,e)}},{key:"parsePrint",value:function(e){return new NJ(this.thisTarget,e)}},{key:"parseAddEventListener",value:function(e){var t=new AJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseRemoveEventListener",value:function(e){return new DJ(this.thisTarget,e)}},{key:"parseEmitEvent",value:function(e){return new OJ(this.thisTarget,e)}},{key:"parseAddEventListenerCall",value:function(e){if(e.funName)return new FJ(this.thisTarget,e)}},{key:"parseFor",value:function(e){var t=new MJ(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseSetTimeout",value:function(e){var t=new g0(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseSetInterval",value:function(e){var t=new m0(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseEnterFrame",value:function(e){var t=new p0(this.thisTarget,e);return this.parseSubTask(t,e),t}},{key:"parseEnterFrameCall",value:function(e){return new f0(this.thisTarget,e)}}]),e}(),_0=function(){function e(){u(this,e),this._runMap={}}return f(e,[{key:"run",value:function(e,t){var n=this.getActionList(e,t);n&&n.runWithContext(t)}},{key:"getActionList",value:function(e,t){var n=this._runMap[e];return n||(n=new b0(t,e),this._runMap[e]=n),n}}],[{key:"toString",value:function(){return"ActionRuntime"}},{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}},{key:"run",value:function(t,n){var r="@this={".concat(t,"}"),i={target:n,libId:0,id:0};e.instance.run(r,i)}}]),e}();_0._instance=void 0;var x0=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),r=t.call(this,e);var i=e.value;return void 0===i&&(i=be(e.defaultValue)),r.state={value:i},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.reRender(e)}},{key:"getCurValue",value:function(){var e=this.state.value;return e||(e=this.props.defaultValue),e||(e={}),e}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;void 0===t&&(t=e.defaultValue),this.state.value!==t&&this.setState({value:t})}},{key:"reRender",value:function(e){var t=!1;if(this.props&&this.props.content)for(var n=0,r=this.props.content.length;n<r;n++){if(this.props.content[n].action){t=!0;break}}if(t)this.setState({value:e});else{var i=gmvc.ObjectUtil.diffObject(e,this.state.value);if(i&&i.length)for(var o=this.refs,a=0,s=i.length;a<s;a++){var l=i[a].split(".")[0];if(!o[l]){t=!0;break}var u=e[l];o[l].value=u}}t&&this.setState({value:e})}},{key:"render",value:function(){var e=this,t=(this.state.value,this.props.content);return(0,ff.jsx)("div",{className:"obj-input",children:t.map((function(t,n){return e.renderPropertyItem(t,n)}))})}},{key:"renderPropertyItem",value:function(e,t){var n=this;if(e){if(e.action){var r={config:e,target:this.state.value};_0.run(e.action,r)}if(!e.hide)return(0,ff.jsxs)("div",{className:"property-item",children:[(0,ff.jsx)("span",{className:"property-item-label",children:e.label}),(0,ff.jsx)("div",{className:"property-item-content",children:e.items.map((function(e,t){return n.renderPropertyOne(e,t)}))})]},t)}}},{key:"renderPropertyOne",value:function(e,t){if(e.hide)return null;var n=this.getCurValue();if(e.property){var r=n[e.property],i=e.mutation;e.componentProp.value!=r&&(e.componentProp.value=r),e.componentProp.onChange=this.getValueChangeFunction(n,e.property,i)}return e.componentProp.continuousStartCallback=this.props.continuousStartCallback,e.componentProp.continuousEndCallback=this.props.continuousEndCallback,e.componentProp.itemFunName&&this.props.context&&(e.componentProp.getItems=this.props.context[e.componentProp.itemFunName]),(0,a.createElement)(a1,Re(Re({},e),{},{key:t,ref:e.property}))}},{key:"getValueChangeFunction",value:function(e,t,n){var r=this;return function(e){var n=be(r.getCurValue());n[t]=e,r.props.onChange&&r.props.onChange(n)}}}]),n}(a.Component),E0=function(e){return e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Command=91]="Command",e[e.Number0=48]="Number0",e[e.Number1=49]="Number1",e[e.Number2=50]="Number2",e[e.Number3=51]="Number3",e[e.Number4=52]="Number4",e[e.Number5=53]="Number5",e[e.Number6=54]="Number6",e[e.Number7=55]="Number7",e[e.Number8=56]="Number8",e[e.Number9=57]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e}({}),w0=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.onFocus=function(e){var t=r.props.onFocus;t&&t(e),window.addEventListener("keydown",r.onEnterKeyDown)},r.onBlur=function(e){var t=r.props,n=t.onBlur,i=t.onChange;n&&n(e),r.state.value!==r.props.value&&i&&i(r.state.value),window.removeEventListener("keydown",r.onEnterKeyDown)},r.onChange=function(e){var t=e.target.value;r.setState({value:t})},r.curValue=e.value,r.state={value:r.curValue},r}return f(n,[{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.value;this.state.value!==t&&this.setState({value:t})}},{key:"render",value:function(){var e=this.state.value;return(0,ff.jsx)(Bd,{value:e,onFocus:this.onFocus,onBlur:this.onBlur,onChange:this.onChange})}},{key:"onEnterKeyDown",value:function(e){if(e.keyCode===E0.Enter){var t=e.target;t instanceof HTMLInputElement&&t.blur()}}}]),n}(a.Component),T0=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).curValue=void 0,r.onChange=function(e,t){},r.curValue="1",r.state={value:r.curValue,prevValue:r.curValue},r}return f(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.buttons,r=t.toggle,i=void 0!==r&&r;return(0,ff.jsx)("div",{className:"button-group",children:n.map((function(t,n){return(0,ff.jsx)(rI,{icon:t.icon,clickCallback:function(n){e.onChange(n,t.value)},toggle:i},n)}))})}}]),n}(a.Component),S0=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).onClick=function(e){e.stopPropagation();var t=!r.state.selected;r.props.toggle&&r.setState({selected:t}),r.props.onChange&&r.props.onChange(t)},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return f(n,[{key:"render",value:function(){var e=this.props.icon;return this.props.toggle&&this.state.selected&&this.props.selectedIcon&&(e=this.props.selectedIcon),this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsx)("div",{className:"icon-button",onClick:this.onClick,children:(0,ff.jsx)(KT,{type:e})})}):(0,ff.jsx)("div",{className:"icon-button",onClick:this.onClick,children:(0,ff.jsx)(KT,{type:e})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),k0=a.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0,keyboard:!0});function C0(e,t,n){return(e-t)/(n-t)}function A0(e,t,n,r){var i=C0(t,n,r),o={};switch(e){case"rtl":o.right="".concat(100*i,"%"),o.transform="translateX(50%)";break;case"btt":o.bottom="".concat(100*i,"%"),o.transform="translateY(50%)";break;case"ttb":o.top="".concat(100*i,"%"),o.transform="translateY(-50%)";break;default:o.left="".concat(100*i,"%"),o.transform="translateX(-50%)"}return o}function I0(e,t){return Array.isArray(e)?e[t]:e}var O0=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],P0=a.forwardRef((function(e,t){var n,r,i=e.prefixCls,o=e.value,s=e.valueIndex,l=e.onStartMove,u=e.style,c=e.render,h=e.dragging,d=e.onOffsetChange,f=Yn(e,O0),p=a.useContext(k0),v=p.min,m=p.max,g=p.direction,y=p.disabled,_=p.keyboard,x=p.range,E=p.tabIndex,w=p.ariaLabelForHandle,T=p.ariaLabelledByForHandle,S=p.ariaValueTextFormatterForHandle,k="".concat(i,"-handle"),C=function(e){y||l(e,s)},A=A0(g,o,v,m),I=a.createElement("div",Ut({ref:t,className:Ko()(k,(n={},b(n,"".concat(k,"-").concat(s+1),x),b(n,"".concat(k,"-dragging"),h),n)),style:Re(Re({},A),u),onMouseDown:C,onTouchStart:C,onKeyDown:function(e){if(!y&&_){var t=null;switch(e.which||e.keyCode){case Du.LEFT:t="ltr"===g||"btt"===g?-1:1;break;case Du.RIGHT:t="ltr"===g||"btt"===g?1:-1;break;case Du.UP:t="ttb"!==g?1:-1;break;case Du.DOWN:t="ttb"!==g?-1:1;break;case Du.HOME:t="min";break;case Du.END:t="max";break;case Du.PAGE_UP:t=2;break;case Du.PAGE_DOWN:t=-2}null!==t&&(e.preventDefault(),d(t,s))}},tabIndex:y?null:I0(E,s),role:"slider","aria-valuemin":v,"aria-valuemax":m,"aria-valuenow":o,"aria-disabled":y,"aria-label":I0(w,s),"aria-labelledby":I0(T,s),"aria-valuetext":null===(r=I0(S,s))||void 0===r?void 0:r(o)},f));return c&&(I=c(I,{index:s,prefixCls:i,value:o,dragging:h})),I}));var M0=P0,R0=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],N0=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.style,i=e.onStartMove,o=e.onOffsetChange,s=e.values,l=e.handleRender,u=e.draggingIndex,c=Yn(e,R0),h=a.useRef({});return a.useImperativeHandle(t,(function(){return{focus:function(e){var t;null===(t=h.current[e])||void 0===t||t.focus()}}})),a.createElement(a.Fragment,null,s.map((function(e,t){return a.createElement(M0,Ut({ref:function(e){e?h.current[t]=e:delete h.current[t]},dragging:u===t,prefixCls:n,style:I0(r,t),key:t,value:e,valueIndex:t,onStartMove:i,onOffsetChange:o,render:l},c))})))}));var D0=N0;function L0(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function F0(e){var t=e.prefixCls,n=e.style,r=e.start,i=e.end,o=e.index,s=e.onStartMove,l=a.useContext(k0),u=l.direction,c=l.min,h=l.max,d=l.disabled,f=l.range,p="".concat(t,"-track"),v=C0(r,c,h),m=C0(i,c,h),g=function(e){!d&&s&&s(e,-1)},y={};switch(u){case"rtl":y.right="".concat(100*v,"%"),y.width="".concat(100*m-100*v,"%");break;case"btt":y.bottom="".concat(100*v,"%"),y.height="".concat(100*m-100*v,"%");break;case"ttb":y.top="".concat(100*v,"%"),y.height="".concat(100*m-100*v,"%");break;default:y.left="".concat(100*v,"%"),y.width="".concat(100*m-100*v,"%")}return a.createElement("div",{className:Ko()(p,f&&"".concat(p,"-").concat(o+1)),style:Re(Re({},y),n),onMouseDown:g,onTouchStart:g})}function B0(e){var t=e.prefixCls,n=e.style,r=e.values,i=e.startPoint,o=e.onStartMove,s=a.useContext(k0),l=s.included,u=s.range,c=s.min,h=a.useMemo((function(){if(!u){if(0===r.length)return[];var e=null!==i&&void 0!==i?i:c,t=r[0];return[{start:Math.min(e,t),end:Math.max(e,t)}]}for(var n=[],o=0;o<r.length-1;o+=1)n.push({start:r[o],end:r[o+1]});return n}),[r,u,i,c]);return l?h.map((function(e,r){var i=e.start,s=e.end;return a.createElement(F0,{index:r,prefixCls:t,style:I0(n,r),start:i,end:s,key:r,onStartMove:o})})):null}function U0(e){var t=e.prefixCls,n=e.style,r=e.children,i=e.value,o=e.onClick,s=a.useContext(k0),l=s.min,u=s.max,c=s.direction,h=s.includedStart,d=s.includedEnd,f=s.included,p="".concat(t,"-text"),v=A0(c,i,l,u);return a.createElement("span",{className:Ko()(p,b({},"".concat(p,"-active"),f&&h<=i&&i<=d)),style:Re(Re({},v),n),onMouseDown:function(e){e.stopPropagation()},onClick:function(){o(i)}},r)}function H0(e){var t=e.prefixCls,n=e.marks,r=e.onClick,i="".concat(t,"-mark");return n.length?a.createElement("div",{className:i},n.map((function(e){var t=e.value,n=e.style,o=e.label;return a.createElement(U0,{key:t,prefixCls:i,style:n,value:t,onClick:r},o)}))):null}function j0(e){var t=e.prefixCls,n=e.value,r=e.style,i=e.activeStyle,o=a.useContext(k0),s=o.min,l=o.max,u=o.direction,c=o.included,h=o.includedStart,d=o.includedEnd,f="".concat(t,"-dot"),p=c&&h<=n&&n<=d,v=Re(Re({},A0(u,n,s,l)),"function"===typeof r?r(n):r);return p&&(v=Re(Re({},v),"function"===typeof i?i(n):i)),a.createElement("span",{className:Ko()(f,b({},"".concat(f,"-active"),p)),style:v})}function z0(e){var t=e.prefixCls,n=e.marks,r=e.dots,i=e.style,o=e.activeStyle,s=a.useContext(k0),l=s.min,u=s.max,c=s.step,h=a.useMemo((function(){var e=new Set;if(n.forEach((function(t){e.add(t.value)})),r&&null!==c)for(var t=l;t<=u;)e.add(t),t+=c;return Array.from(e)}),[l,u,c,r,n]);return a.createElement("div",{className:"".concat(t,"-step")},h.map((function(e){return a.createElement(j0,{prefixCls:t,key:e,value:e,style:i,activeStyle:o})})))}var V0=a.forwardRef((function(e,t){var n,r=e.prefixCls,i=void 0===r?"rc-slider":r,o=e.className,s=e.style,l=e.disabled,u=void 0!==l&&l,h=e.keyboard,d=void 0===h||h,f=e.autoFocus,p=e.onFocus,v=e.onBlur,m=e.min,g=void 0===m?0:m,y=e.max,_=void 0===y?100:y,x=e.step,E=void 0===x?1:x,w=e.value,T=e.defaultValue,S=e.range,k=e.count,C=e.onChange,A=e.onBeforeChange,I=e.onAfterChange,O=e.allowCross,P=void 0===O||O,M=e.pushable,R=void 0!==M&&M,N=e.draggableTrack,D=e.reverse,L=e.vertical,F=e.included,B=void 0===F||F,U=e.startPoint,H=e.trackStyle,j=e.handleStyle,z=e.railStyle,V=e.dotStyle,G=e.activeDotStyle,W=e.marks,X=e.dots,Y=e.handleRender,K=e.tabIndex,q=void 0===K?0:K,Z=e.ariaLabelForHandle,$=e.ariaLabelledByForHandle,Q=e.ariaValueTextFormatterForHandle,J=a.useRef(),ee=a.useRef(),te=a.useMemo((function(){return L?D?"ttb":"btt":D?"rtl":"ltr"}),[D,L]),ne=a.useMemo((function(){return isFinite(g)?g:0}),[g]),re=a.useMemo((function(){return isFinite(_)?_:100}),[_]),ie=a.useMemo((function(){return null!==E&&E<=0?1:E}),[E]),oe=a.useMemo((function(){return!0===R?ie:R>=0&&R}),[R,ie]),ae=a.useMemo((function(){return Object.keys(W||{}).map((function(e){var t=W[e],n={value:Number(e)};return t&&"object"===c(t)&&!a.isValidElement(t)&&("label"in t||"style"in t)?(n.style=t.style,n.label=t.label):n.label=t,n})).filter((function(e){var t=e.label;return t||"number"===typeof t})).sort((function(e,t){return e.value-t.value}))}),[W]),se=function(e,t,n,r,i,o){var s=a.useCallback((function(n){var r=isFinite(n)?n:e;return r=Math.min(t,n),Math.max(e,r)}),[e,t]),l=a.useCallback((function(r){if(null!==n){var i=e+Math.round((s(r)-e)/n)*n,o=function(e){return(String(e).split(".")[1]||"").length},a=Math.max(o(n),o(t),o(e)),l=Number(i.toFixed(a));return e<=l&&l<=t?l:null}return null}),[n,e,t,s]),u=a.useCallback((function(i){var o=s(i),a=r.map((function(e){return e.value}));null!==n&&a.push(l(i)),a.push(e,t);var u=a[0],c=t-e;return a.forEach((function(e){var t=Math.abs(o-e);t<=c&&(u=e,c=t)})),u}),[e,t,r,n,s,l]),c=function i(o,a,s){var u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit";if("number"===typeof a){var c,h=o[s],d=h+a,f=[];r.forEach((function(e){f.push(e.value)})),f.push(e,t),f.push(l(h));var p=a>0?1:-1;"unit"===u?f.push(l(h+p*n)):f.push(l(d)),f=f.filter((function(e){return null!==e})).filter((function(e){return a<0?e<=h:e>=h})),"unit"===u&&(f=f.filter((function(e){return e!==h})));var v="unit"===u?h:d;c=f[0];var m=Math.abs(c-v);if(f.forEach((function(e){var t=Math.abs(e-v);t<m&&(c=e,m=t)})),void 0===c)return a<0?e:t;if("dist"===u)return c;if(Math.abs(a)>1){var g=Pe(o);return g[s]=c,i(g,a-p,s,u)}return c}return"min"===a?e:"max"===a?t:void 0},h=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",i=e[n],o=c(e,t,n,r);return{value:o,changed:o!==i}},d=function(e){return null===o&&0===e||"number"===typeof o&&e<o};return[u,function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"unit",a=e.map(u),s=a[n],l=c(a,t,n,r);if(a[n]=l,!1===i){var f=o||0;n>0&&a[n-1]!==s&&(a[n]=Math.max(a[n],a[n-1]+f)),n<a.length-1&&a[n+1]!==s&&(a[n]=Math.min(a[n],a[n+1]-f))}else if("number"===typeof o||null===o){for(var p=n+1;p<a.length;p+=1)for(var v=!0;d(a[p]-a[p-1])&&v;){var m=h(a,1,p);a[p]=m.value,v=m.changed}for(var g=n;g>0;g-=1)for(var y=!0;d(a[g]-a[g-1])&&y;){var b=h(a,-1,g-1);a[g-1]=b.value,y=b.changed}for(var _=a.length-1;_>0;_-=1)for(var x=!0;d(a[_]-a[_-1])&&x;){var E=h(a,-1,_-1);a[_-1]=E.value,x=E.changed}for(var w=0;w<a.length-1;w+=1)for(var T=!0;d(a[w+1]-a[w])&&T;){var S=h(a,1,w+1);a[w+1]=S.value,T=S.changed}}return{value:a[n],values:a}}]}(ne,re,ie,ae,P,oe),le=Pt(se,2),ue=le[0],ce=le[1],he=Pt(yh(T,{value:w}),2),de=he[0],fe=he[1],pe=a.useMemo((function(){var e=null===de||void 0===de?[]:Array.isArray(de)?de:[de],t=Pt(e,1)[0],n=null===de?[]:[void 0===t?ne:t];if(S){if(n=Pe(e),k||void 0===de){var r=k>=0?k+1:2;for(n=n.slice(0,r);n.length<r;){var i;n.push(null!==(i=n[n.length-1])&&void 0!==i?i:ne)}}n.sort((function(e,t){return e-t}))}return n.forEach((function(e,t){n[t]=ue(e)})),n}),[de,S,ne,k,ue]),ve=a.useRef(pe);ve.current=pe;var me=function(e){return S?e:e[0]},ge=function(e){var t=Pe(e).sort((function(e,t){return e-t}));C&&!rt(t,ve.current,!0)&&C(me(t)),fe(t)},ye=function(e){if(!u){var t=0,n=re-ne;pe.forEach((function(r,i){var o=Math.abs(e-r);o<=n&&(n=o,t=i)}));var r=Pe(pe);r[t]=e,S&&!pe.length&&void 0===k&&r.push(e),null===A||void 0===A||A(me(r)),ge(r),null===I||void 0===I||I(me(r))}},be=Pt(a.useState(null),2),_e=be[0],xe=be[1];a.useEffect((function(){if(null!==_e){var e=pe.indexOf(_e);e>=0&&J.current.focus(e)}xe(null)}),[_e]);var Ee=a.useMemo((function(){return(!N||null!==ie)&&N}),[N,ie]),we=function(e,t,n,r,i,o,s,l,u){var c=Pt(a.useState(null),2),h=c[0],d=c[1],f=Pt(a.useState(-1),2),p=f[0],v=f[1],m=Pt(a.useState(n),2),g=m[0],y=m[1],b=Pt(a.useState(n),2),_=b[0],x=b[1],E=a.useRef(null),w=a.useRef(null);a.useEffect((function(){-1===p&&y(n)}),[n,p]),a.useEffect((function(){return function(){document.removeEventListener("mousemove",E.current),document.removeEventListener("mouseup",w.current),document.removeEventListener("touchmove",E.current),document.removeEventListener("touchend",w.current)}}),[]);var T=function(e,t){g.some((function(t,n){return t!==e[n]}))&&(void 0!==t&&d(t),y(e),s(e))},S=function(e,t){if(-1===e){var n=_[0],a=_[_.length-1],s=r-n,l=i-a,c=t*(i-r);c=Math.max(c,s),c=Math.min(c,l);var h=o(n+c);c=h-n;var d=_.map((function(e){return e+c}));T(d)}else{var f=(i-r)*t,p=Pe(g);p[e]=_[e];var v=u(p,f,e,"dist");T(v.values,v.value)}},k=a.useRef(S);k.current=S;var C=a.useMemo((function(){var e=Pe(n).sort((function(e,t){return e-t})),t=Pe(g).sort((function(e,t){return e-t}));return e.every((function(e,n){return e===t[n]}))?g:n}),[n,g]);return[p,h,C,function(r,i){r.stopPropagation();var o=n[i];v(i),d(o),x(n);var a=L0(r),s=a.pageX,u=a.pageY,c=function(n){n.preventDefault();var r,o=L0(n),a=o.pageX,l=o.pageY,c=a-s,h=l-u,d=e.current.getBoundingClientRect(),f=d.width,p=d.height;switch(t){case"btt":r=-h/p;break;case"ttb":r=h/p;break;case"rtl":r=-c/f;break;default:r=c/f}k.current(i,r)},h=function e(t){t.preventDefault(),document.removeEventListener("mouseup",e),document.removeEventListener("mousemove",c),document.removeEventListener("touchend",e),document.removeEventListener("touchmove",c),E.current=null,w.current=null,v(-1),l()};document.addEventListener("mouseup",h),document.addEventListener("mousemove",c),document.addEventListener("touchend",h),document.addEventListener("touchmove",c),E.current=c,w.current=h}]}(ee,te,pe,ne,re,ue,ge,(function(){null===I||void 0===I||I(me(ve.current))}),ce),Te=Pt(we,4),Se=Te[0],ke=Te[1],Ce=Te[2],Ae=Te[3],Ie=function(e,t){Ae(e,t),null===A||void 0===A||A(me(ve.current))},Oe=-1!==Se;a.useEffect((function(){if(!Oe){var e=pe.lastIndexOf(ke);J.current.focus(e)}}),[Oe]);var Me=a.useMemo((function(){return Pe(Ce).sort((function(e,t){return e-t}))}),[Ce]),Re=Pt(a.useMemo((function(){return S?[Me[0],Me[Me.length-1]]:[ne,Me[0]]}),[Me,S,ne]),2),Ne=Re[0],De=Re[1];a.useImperativeHandle(t,(function(){return{focus:function(){J.current.focus(0)},blur:function(){var e=document.activeElement;ee.current.contains(e)&&(null===e||void 0===e||e.blur())}}})),a.useEffect((function(){f&&J.current.focus(0)}),[]);var Le=a.useMemo((function(){return{min:ne,max:re,direction:te,disabled:u,keyboard:d,step:ie,included:B,includedStart:Ne,includedEnd:De,range:S,tabIndex:q,ariaLabelForHandle:Z,ariaLabelledByForHandle:$,ariaValueTextFormatterForHandle:Q}}),[ne,re,te,u,d,ie,B,Ne,De,S,q,Z,$,Q]);return a.createElement(k0.Provider,{value:Le},a.createElement("div",{ref:ee,className:Ko()(i,o,(n={},b(n,"".concat(i,"-disabled"),u),b(n,"".concat(i,"-vertical"),L),b(n,"".concat(i,"-horizontal"),!L),b(n,"".concat(i,"-with-marks"),ae.length),n)),style:s,onMouseDown:function(e){e.preventDefault();var t,n=ee.current.getBoundingClientRect(),r=n.width,i=n.height,o=n.left,a=n.top,s=n.bottom,l=n.right,u=e.clientX,c=e.clientY;switch(te){case"btt":t=(s-c)/i;break;case"ttb":t=(c-a)/i;break;case"rtl":t=(l-u)/r;break;default:t=(u-o)/r}ye(ue(ne+t*(re-ne)))}},a.createElement("div",{className:"".concat(i,"-rail"),style:z}),a.createElement(B0,{prefixCls:i,style:H,values:Me,startPoint:U,onStartMove:Ee?Ie:null}),a.createElement(z0,{prefixCls:i,marks:ae,dots:X,style:V,activeStyle:G}),a.createElement(D0,{ref:J,prefixCls:i,style:j,values:Ce,draggingIndex:Se,onStartMove:Ie,onOffsetChange:function(e,t){if(!u){var n=ce(pe,e,t);null===A||void 0===A||A(me(pe)),ge(n.values),null===I||void 0===I||I(me(n.values)),xe(n.value)}},onFocus:p,onBlur:v,handleRender:Y}),a.createElement(H0,{prefixCls:i,marks:ae,onClick:ye})))}));var G0=V0,W0=a.forwardRef((function(e,t){var n=e.open,r=(0,a.useRef)(null),i=(0,a.useRef)(null);function o(){Fa.cancel(i.current),i.current=null}return a.useEffect((function(){return n?i.current=Fa((function(){var e;null===(e=r.current)||void 0===e||e.forceAlign(),i.current=null})):o(),o}),[n,e.title]),a.createElement(JA,Object.assign({ref:Qo(r,t)},e))})),X0=function(e){var t,n,r,i,o=e.componentCls,a=e.controlSize,s=e.dotSize,l=e.marginFull,u=e.marginPart,c=e.colorFillContentHover;return b({},o,Object.assign(Object.assign({},as(e)),(b(i={position:"relative",height:a,margin:"".concat(u,"px ").concat(l,"px"),padding:0,cursor:"pointer",touchAction:"none"},"&-vertical",{margin:"".concat(l,"px ").concat(u,"px")}),b(i,"".concat(o,"-rail"),{position:"absolute",backgroundColor:e.colorFillTertiary,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(e.motionDurationMid)}),b(i,"".concat(o,"-track"),{position:"absolute",backgroundColor:e.colorPrimaryBorder,borderRadius:e.borderRadiusXS,transition:"background-color ".concat(e.motionDurationMid)}),b(i,"&:hover",(b(t={},"".concat(o,"-rail"),{backgroundColor:e.colorFillSecondary}),b(t,"".concat(o,"-track"),{backgroundColor:e.colorPrimaryBorderHover}),b(t,"".concat(o,"-dot"),{borderColor:c}),b(t,"".concat(o,"-handle::after"),{boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(e.colorPrimaryBorderHover)}),b(t,"".concat(o,"-dot-active"),{borderColor:e.colorPrimary}),t)),b(i,"".concat(o,"-handle"),(b(n={position:"absolute",width:e.handleSize,height:e.handleSize,outline:"none"},"".concat(o,"-dragging"),{zIndex:1}),b(n,"&::before",{content:'""',position:"absolute",insetInlineStart:-e.handleLineWidth,insetBlockStart:-e.handleLineWidth,width:e.handleSize+2*e.handleLineWidth,height:e.handleSize+2*e.handleLineWidth,backgroundColor:"transparent"}),b(n,"&::after",{content:'""',position:"absolute",insetBlockStart:0,insetInlineStart:0,width:e.handleSize,height:e.handleSize,backgroundColor:e.colorBgElevated,boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(e.colorPrimaryBorder),borderRadius:"50%",cursor:"pointer",transition:"\n            inset-inline-start ".concat(e.motionDurationMid,",\n            inset-block-start ").concat(e.motionDurationMid,",\n            width ").concat(e.motionDurationMid,",\n            height ").concat(e.motionDurationMid,",\n            box-shadow ").concat(e.motionDurationMid,"\n          ")}),b(n,"&:hover, &:active, &:focus",{"&::before":{insetInlineStart:-((e.handleSizeHover-e.handleSize)/2+e.handleLineWidthHover),insetBlockStart:-((e.handleSizeHover-e.handleSize)/2+e.handleLineWidthHover),width:e.handleSizeHover+2*e.handleLineWidthHover,height:e.handleSizeHover+2*e.handleLineWidthHover},"&::after":{boxShadow:"0 0 0 ".concat(e.handleLineWidthHover,"px ").concat(e.colorPrimary),width:e.handleSizeHover,height:e.handleSizeHover,insetInlineStart:(e.handleSize-e.handleSizeHover)/2,insetBlockStart:(e.handleSize-e.handleSizeHover)/2}}),n)),b(i,"".concat(o,"-mark"),{position:"absolute",fontSize:e.fontSize}),b(i,"".concat(o,"-mark-text"),{position:"absolute",display:"inline-block",color:e.colorTextDescription,textAlign:"center",wordBreak:"keep-all",cursor:"pointer",userSelect:"none","&-active":{color:e.colorText}}),b(i,"".concat(o,"-step"),{position:"absolute",background:"transparent",pointerEvents:"none"}),b(i,"".concat(o,"-dot"),{position:"absolute",width:s,height:s,backgroundColor:e.colorBgElevated,border:"".concat(e.handleLineWidth,"px solid ").concat(e.colorBorderSecondary),borderRadius:"50%",cursor:"pointer",transition:"border-color ".concat(e.motionDurationSlow),pointerEvents:"auto","&-active":{borderColor:e.colorPrimaryBorder}}),b(i,"&".concat(o,"-disabled"),(b(r={cursor:"not-allowed"},"".concat(o,"-rail"),{backgroundColor:"".concat(e.colorFillSecondary," !important")}),b(r,"".concat(o,"-track"),{backgroundColor:"".concat(e.colorTextDisabled," !important")}),b(r,"\n          ".concat(o,"-dot\n        "),{backgroundColor:e.colorBgElevated,borderColor:e.colorTextDisabled,boxShadow:"none",cursor:"not-allowed"}),b(r,"".concat(o,"-handle::after"),{backgroundColor:e.colorBgElevated,cursor:"not-allowed",width:e.handleSize,height:e.handleSize,boxShadow:"0 0 0 ".concat(e.handleLineWidth,"px ").concat(new yo(e.colorTextDisabled).onBackground(e.colorBgContainer).toHexShortString()),insetInlineStart:0,insetBlockStart:0}),b(r,"\n          ".concat(o,"-mark-text,\n          ").concat(o,"-dot\n        "),{cursor:"not-allowed !important"}),r)),i)))},Y0=function(e,t){var n,r,i,o,a=e.componentCls,s=e.railSize,l=e.handleSize,u=e.dotSize,c=t?"width":"height",h=t?"height":"width",d=t?"insetBlockStart":"insetInlineStart",f=t?"top":"insetInlineStart";return b(o={},t?"paddingBlock":"paddingInline",s),b(o,h,3*s),b(o,"".concat(a,"-rail"),(b(n={},c,"100%"),b(n,h,s),n)),b(o,"".concat(a,"-track"),b({},h,s)),b(o,"".concat(a,"-handle"),b({},d,(3*s-l)/2)),b(o,"".concat(a,"-mark"),(b(r={insetInlineStart:0,top:0},f,l),b(r,c,"100%"),r)),b(o,"".concat(a,"-step"),(b(i={insetInlineStart:0,top:0},f,s),b(i,c,"100%"),b(i,h,s),i)),b(o,"".concat(a,"-dot"),b({position:"absolute"},d,(s-u)/2)),o},K0=function(e){var t=e.componentCls,n=e.marginPartWithMark;return b({},"".concat(t,"-horizontal"),Object.assign(Object.assign({},Y0(e,!0)),b({},"&".concat(t,"-with-marks"),{marginBottom:n})))},q0=function(e){var t=e.componentCls;return b({},"".concat(t,"-vertical"),Object.assign(Object.assign({},Y0(e,!1)),{height:"100%"}))},Z0=ol("Slider",(function(e){var t=nl(e,{marginPart:(e.controlHeight-e.controlSize)/2,marginFull:e.controlSize/2,marginPartWithMark:e.controlHeightLG-e.controlSize});return[X0(t),K0(t),q0(t)]}),(function(e){var t=e.controlHeightLG/4;return{controlSize:t,railSize:4,handleSize:t,handleSizeHover:e.controlHeightSM/2,dotSize:8,handleLineWidth:e.lineWidth+1,handleLineWidthHover:e.lineWidth+3}})),$0=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n},Q0=function(e){return"number"===typeof e?e.toString():""},J0=a.forwardRef((function(e,t){var n=e.prefixCls,r=e.range,i=e.className,o=e.rootClassName,s=e.tooltipPrefixCls,l=e.tipFormatter,u=e.tooltipVisible,c=e.getTooltipPopupContainer,h=e.tooltipPlacement,d=$0(e,["prefixCls","range","className","rootClassName","tooltipPrefixCls","tipFormatter","tooltipVisible","getTooltipPopupContainer","tooltipPlacement"]),f=a.useContext(Lo),p=f.getPrefixCls,v=f.direction,m=f.getPopupContainer,g=Pt(a.useState({}),2),y=g[0],_=g[1],x=function(e,t){_((function(n){return Object.assign(Object.assign({},n),b({},e,t))}))},E=function(e,t){return e||(t?"rtl"===v?"left":"right":"top")},w=p("slider",n),T=Pt(Z0(w),2),S=T[0],k=T[1],C=Ko()(i,o,b({},"".concat(w,"-rtl"),"rtl"===v),k);"rtl"!==v||d.vertical||(d.reverse=!d.reverse);var A=Pt(a.useMemo((function(){return r?"object"===typeof r?[!0,r.draggableTrack]:[!0,!1]:[!1]}),[r]),2),I=A[0],O=A[1];return S(a.createElement(G0,Object.assign({},d,{step:d.step,range:I,draggableTrack:O,className:C,ref:t,prefixCls:w,handleRender:function(t,n){var r,i,o=n.index,d=n.dragging,f=e.tooltip,v=void 0===f?{}:f,g=e.vertical,b=Object.assign({},v),_=b.open,T=b.placement,S=b.getPopupContainer,k=b.prefixCls,C=b.formatter,A=!!(i=C||null===C?C:l||null===l?l:Q0)&&(y[o]||d),I=null!==(r=null!==_&&void 0!==_?_:u)&&void 0!==r?r:void 0===_&&A,O=Object.assign(Object.assign({},t.props),{onMouseEnter:function(){return x(o,!0)},onMouseLeave:function(){return x(o,!1)}}),P=p("tooltip",null!==k&&void 0!==k?k:s);return a.createElement(W0,{prefixCls:P,title:i?i(n.value):"",open:I,placement:E(null!==T&&void 0!==T?T:h,g),key:o,overlayClassName:"".concat(w,"-tooltip"),getPopupContainer:S||c||m},a.cloneElement(t,O))}})))}));var e1=J0,t1=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i.refs=void 0,i._sliderChange=!1,i}return f(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){this.setState({value:e})}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){return this.getFixNumber(e.value,e.fixed)}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e);this.state.value!==t&&(this._invalid=!0,this.setState({value:t}))}},{key:"render",value:function(){return(0,ff.jsx)(e1,{defaultValue:10,max:this.props.max,min:this.props.min,value:this.state.value,step:this.props.step,onChange:this.onChange.bind(this),onAfterChange:this.onSliderAfterChange.bind(this)})}},{key:"onChange",value:function(e){this._sliderChange||(this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._sliderChange=!0),this.props.onChange&&this.props.onChange(e)}},{key:"onSliderAfterChange",value:function(e){this._sliderChange&&(this.props.continuousEndCallback&&this.props.continuousEndCallback(),this._sliderChange=!1)}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setState({value:e}),t&&this.props.onChange&&this.props.onChange(e))}}]),n}(a.Component);t1.defaultMax=Number.MAX_SAFE_INTEGER,t1.defaultMin=Number.MIN_SAFE_INTEGER,t1.MULTI_DEFAULT_TEXT="--";var n1=function(e){v(n,e);var t=y(n);function n(e,r){var i;return u(this,n),(i=t.call(this,e,r))._invalid=!1,i._downValue=void 0,i._downX=void 0,i._over=void 0,i._mouseupHandler=void 0,i._mousemoveHandler=void 0,i._mousewheelHandler=void 0,i._sliderChange=!1,i.refs=void 0,i.isMouseDown=!1,i.isMouseMoved=!1,i.isFocus=!1,i._mouseupHandler=i.onMouseUp.bind(g(i)),i._mousemoveHandler=i.onMouseMove.bind(g(i)),i._mousewheelHandler=i.onMouseWheel.bind(g(i)),i}return f(n,[{key:"realValue",get:function(){return this.getValueFromProp(this.props)}},{key:"value",get:function(){return this.realValue},set:function(e){var t=isNaN(e)?"0":e.toString();this.setState({value:t})}},{key:"continuous",get:function(){var e=this.props.continuous;return void 0===e&&(e=!0),e}},{key:"maxValue",get:function(){var e=this.props.max;return isNaN(e)?n.defaultMax:e}},{key:"minValue",get:function(){var e=this.props.min;return isNaN(e)?n.defaultMin:e}},{key:"step",get:function(){var e=this.props.step;return isNaN(e)?1:e}},{key:"getValueFromProp",value:function(e){var t=e.value;this.props.percent&&(t*=100);var n=this.getFixNumber(t,e.fixed);return this.props.percent&&(n/=100),n}},{key:"getFixNumber",value:function(e,t){isNaN(t)&&(t=0);var n=Math.pow(10,t);return isNaN(e)&&(e=0),Math.round(e*n)/n}},{key:"getRenderValue",value:function(e){var t=parseFloat(e);return this.props.percent&&(t*=100),this.getFixNumber(t,this.props.fixed)}},{key:"UNSAFE_componentWillMount",value:function(){this.setState({value:this.realValue.toString()})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.getValueFromProp(e).toString();this.state.value!==t&&(this._invalid=!0,this.setState({value:t}))}},{key:"render",value:function(){this._invalid=!1;var e=(this.props.width?this.props.width:50)+"px",t=this.getRenderValue(this.state.value).toString();this.props.multiMode&&(t=n.MULTI_DEFAULT_TEXT,null!=this.state.offValue&&""!==this.state.offValue&&(t=this.state.offValue));var r=this.props.disabled,i=this.isFocus?"text":"n-resize",o="property-input ";return this.props.className&&(o+=this.props.className),r&&(o="property-input disabled "+this.props.className),(0,ff.jsxs)("div",{className:"number-slider-input",children:[(0,ff.jsx)(e1,{max:this.props.max,min:this.props.min,value:parseFloat(this.state.value),step:this.props.step,onChange:this.onSliderChange.bind(this),onAfterChange:this.onSliderAfterChange.bind(this)}),(0,ff.jsx)("input",{className:o,style:{width:e,cursor:i},disabled:r,step:this.props.step||1,value:t,onChange:this.onChange.bind(this),onMouseDown:this.onMouseDown.bind(this),onDrag:this.onDrag.bind(this),onBlur:this.onBlur.bind(this),onFocus:this.onFocus.bind(this),ref:"numberInput"}),this.props.percent?"%":""]})}},{key:"onDrag",value:function(e){document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),e.preventDefault()}},{key:"onSliderChange",value:function(e){this._sliderChange||(this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._sliderChange=!0),this.props.onChange&&this.props.onChange(e)}},{key:"onSliderAfterChange",value:function(e){this._sliderChange&&(this.props.continuousEndCallback&&this.props.continuousEndCallback(),this._sliderChange=!1)}},{key:"onChange",value:function(e){if(!this.props.disabled){var t=e.target.value,n=!!(this.props&&this.props.fixed&&this.props.fixed>0),r=this.filterText(t,!n);if(isNaN(r.value)||this.isLimit(r.value))this.setState({value:r.halfValue});else{var i=r.value;this.changeValue(i)}}}},{key:"isLimit",value:function(e){return null!=this.props.min&&!isNaN(this.props.min)&&e<this.props.min||null!=this.props.max&&!isNaN(this.props.max)&&e>this.props.max}},{key:"filterText",value:function(e,t){if(this.props.multiMode&&e===n.MULTI_DEFAULT_TEXT)return{value:NaN,halfValue:e};if(t){var r=new RegExp("[-]?[0-9]*"),i=e.match(r);if(null!=i){var o=i[0],a=NaN;return"-"===o||""===o?a=NaN:(this.props.percent&&(o=(parseInt(o)/100).toString()),a=this.getRenderValue(o),this.props.percent&&(a/=100)),{value:a,halfValue:o}}}else{var s=new RegExp("[-]?[0-9]+[.]?[0-9]*"),l=e.match(s);if(null!=l){var u=l[0];return{value:"-"===u||"."===u[u.length-1]||""===u?NaN:this.getRenderValue(u),halfValue:u}}if("-"===e||""===e)return{value:NaN,halfValue:e}}return{value:0,halfValue:"0"}}},{key:"addValue",value:function(e){isNaN(e)||this.props.onAdd&&this.props.onAdd(e)}},{key:"changeValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];isNaN(e)||(e<this.minValue&&(e=this.minValue),e>this.maxValue&&(e=this.maxValue),this.setState({value:e.toString()}),t&&this.props.onChange&&this.props.onChange(e))}},{key:"onBlur",value:function(e){if(this.isFocus=!1,this.setState({}),!this.isMouseDown){var t=!!(this.props&&this.props.fixed&&this.props.fixed>0),n=this.filterText(e.target.value,!t);(isNaN(n.value)||this.isLimit(n.value))&&this.setState({value:this.props.value.toString()}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.props.onBlur&&this.props.onBlur(e)}}},{key:"onFocus",value:function(e){this.isMouseDown?this.refs.numberInput.blur():(this.props.multiMode&&this.refs.numberInput.select(),this.props.onFocus&&this.props.onFocus(e),this.isFocus=!0,this.setState({}))}},{key:"onMouseWheel",value:function(e){e.wheelDelta>0?this.changeValue(this.props.value+this.step):this.changeValue(this.props.value-this.step)}},{key:"onMouseOver",value:function(e){this._over=!0,this.refs.numberInput.addEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseOut",value:function(e){this._over=!1,this.refs.numberInput.removeEventListener("mousewheel",this._mousewheelHandler)}},{key:"onMouseDown",value:function(e){this.isFocus||this.props.disabled||(this.continuous&&this.props.continuousStartCallback&&this.props.continuousStartCallback(),this._downX=0,this.isMouseDown=!0,this.isMouseMoved=!1,document.addEventListener("mousemove",this._mousemoveHandler),document.addEventListener("mouseup",this._mouseupHandler))}},{key:"onMouseMove",value:function(e){if(0===this._downX)this._downX=e.clientY,this._downValue=this.getRenderValue(this.state.value),this.props.percent&&(this._downValue=this._downValue/100);else{this.isMouseMoved=!0;var t=this.props.speedDuration||1,n=Math.ceil((e.clientY-this._downX)/t);if(this.props.dropReverse&&(n=-n),0!==(n*=this.step))if(this.props.multiMode){this.addValue(n);var r="";n>0?r="+"+n:n<0&&(r=n.toString()),this.setState({offValue:r})}else this.changeValue(this._downValue+n,this.continuous)}}},{key:"onMouseUp",value:function(e){var t=!1;!this.isMouseMoved&&this.isMouseDown&&(t=!0),this.isMouseDown=!1,this.isMouseMoved=!1,this.props.multiMode&&this.setState({offValue:""}),document.removeEventListener("mousemove",this._mousemoveHandler),document.removeEventListener("mouseup",this._mouseupHandler),this.continuous&&this.props.continuousEndCallback&&this.props.continuousEndCallback(),t&&(this.refs.numberInput.focus(),this.refs.numberInput.select())}}]),n}(a.Component);n1.defaultMax=Number.MAX_SAFE_INTEGER,n1.defaultMin=Number.MIN_SAFE_INTEGER,n1.MULTI_DEFAULT_TEXT="--";var r1,i1=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).onClick=function(e){e.stopPropagation();var t=!r.state.selected;r.props.toggle&&r.setState({selected:t}),r.props.onChange&&r.props.onChange(t)},r.state={selected:r.props.selected||!1,prevValue:r.props.selected||!1},r}return f(n,[{key:"value",get:function(){return this.state.selected},set:function(e){this.setState({selected:e})}},{key:"render",value:function(){var e=this.props.label,t="button-label";return this.state.selected&&(e+=" \u2713",t="button-label selected"),this.props.tooltip?(0,ff.jsx)(JA,{title:this.props.tooltip,mouseEnterDelay:.5,children:(0,ff.jsx)("div",{className:t,onClick:this.onClick,children:e})}):(0,ff.jsx)("div",{className:t,onClick:this.onClick,children:e})}}],[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.selected;return t.prevValue!==n&&(t.selected=n,t.prevValue=n),null}}]),n}(a.Component),o1=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e))._tempValue=void 0,r.state={data:r.props.value.bones,propData:r.props.value,selectedId:r.props.value.selectedId},r}return f(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({data:e.value.bones,selectedId:e.value.selectedId})}},{key:"value",get:function(){return this._tempValue||this.props},set:function(e){this._tempValue=e,this.setState({data:e.bones,selectedId:e.selectedId})}},{key:"deleteItem",value:function(e){this.props.onChange({action:"delete",id:e})}},{key:"onClick",value:function(e){this.props.onChange({action:"select",id:e})}},{key:"onOver",value:function(e){this.props.onChange({action:"over",id:e})}},{key:"onOut",value:function(e){this.props.onChange({action:"out",id:e})}},{key:"render",value:function(){var e=this;return this.state.data&&0!==this.state.data.length?(0,ff.jsx)("div",{className:"rigging-list",children:this.state.data.map((function(t,n){return(0,ff.jsxs)("div",{className:"rigging-list-item ".concat(t.id===e.state.selectedId?"selected":""),onClick:function(){e.onClick(t.id)},onMouseOver:function(){e.onOver(t.id)},onMouseOut:function(){e.onOut(t.id)},children:[(0,ff.jsx)("span",{className:"rigging-list-item-color",style:{backgroundColor:"".concat(vp.getColorString(t.color))}}),(0,ff.jsx)("span",{className:"rigging-list-item-id",children:t.id}),(0,ff.jsx)("span",{className:"rigging-list-item-name",children:t.name}),void 0!==t.weight&&(0,ff.jsx)("span",{className:"rigging-list-item-weight",children:(0,ff.jsx)(n1,{percent:!0,min:0,max:1,step:.01,fixed:0,width:22,speedDuration:2,value:t.weight,onChange:function(n){var r=Re(Re({},t),{},{weight:n,action:"changeWeight"});e.props.onChange(r)},continuousEndCallback:function(){e.props.onChange({action:"continuousEndCallback",id:"changeWeight"}),e.props.continuousEndCallback&&e.props.continuousEndCallback()},continuousStartCallback:function(){e.props.onChange({action:"continuousStartCallback",id:"changeWeight"}),e.props.continuousStartCallback&&e.props.continuousStartCallback()}})}),(0,ff.jsx)(S0,{icon:"icon-delete",value:"true",onChange:function(n){e.deleteItem(t.id)}})]},n)}))}):(0,ff.jsx)("div",{className:"rigging-list"})}}]),n}(a.Component),a1=function(e){v(n,e);var t=y(n);function n(e,r){return u(this,n),t.call(this,e,r)}return f(n,[{key:"value",get:function(){var e=this.refs[this.props.property];if(e)return e.value},set:function(e){var t=this.refs[this.props.property];t&&(t.value=e)}},{key:"render",value:function(){var e,t=this.props;if(t.hide)return null;if(t.isArray)e=(0,ff.jsx)(CW,Re(Re({},t),{},{ref:t.property}));else switch(t.componentType){case he.StringInput:e=(0,ff.jsx)(w0,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.IntInput:case he.FloatInput:e=(0,ff.jsx)(sJ,Re(Re({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case he.SliderInput:e=(0,ff.jsx)(t1,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.NumberSliderInput:e=(0,ff.jsx)(n1,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.Label:var n=t.componentProp.width||20,r=t.componentProp.align||"center";e=(0,ff.jsxs)("span",{className:"property-label",style:{width:n+"px",textAlign:r},children:[t.componentProp.value," "]});break;case he.DropdownInput:e=(0,ff.jsx)(JR,Re(Re({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case he.ObjectInput:e=(0,ff.jsx)(x0,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.BooleanInput:e=(0,ff.jsx)(eN,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.BooleanCheck:e=(0,ff.jsx)($U,Re(Re({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case he.BooleanSwitch:e=(0,ff.jsx)(HW,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.ColorInput:e=(0,ff.jsx)(aJ,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.ButtonGroup:e=(0,ff.jsx)(T0,Re(Re({},t.componentProp),{},{ref:t.property}));break;case he.Button:e=(0,ff.jsx)(S0,Re(Re({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case he.ButtonLabel:e=(0,ff.jsx)(i1,Re(Re({},t.componentProp),{},{ref:t.property,tooltip:t.tooltip}));break;case he.Gap:e=(0,ff.jsx)("span",{style:{width:"".concat(t.componentProp.width,"px")}});break;case he.RiggingList:e=(0,ff.jsx)(o1,Re(Re({},t.componentProp),{},{ref:t.property}));break;default:e=(0,ff.jsx)("div",{})}return e}}]),n}(a.Component),s1=function(e){return e[e.NO_KEY=1]="NO_KEY",e[e.KEY=2]="KEY",e[e.VIRTUAL_KEY=3]="VIRTUAL_KEY",e}({}),l1=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).onClick=function(){r.props&&r.props.onClick&&r.props.onClick(r.props.property)},r.state={state:e.state,preState:e.state},r}return f(n,[{key:"render",value:function(){var e="./assets/icon/flag4.png";switch(this.state.state){case s1.NO_KEY:e="./assets/icon/flag4.png";break;case s1.KEY:e="./assets/icon/flag4_red.png";break;case s1.VIRTUAL_KEY:e="./assets/icon/flag4_yellow.png"}return(0,ff.jsx)("div",{className:"property-key-flag",onClick:this.onClick,children:(0,ff.jsx)("img",{src:e,alt:""})})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e.state!==t.preState?{state:e.state,preState:e.state}:null}}]),n}(a.Component),u1=function(){function e(t){u(this,e),this.appStore=void 0,this.target=void 0,this.target=t,this.appStore=BT.instances}return f(e,[{key:"getProperty",value:function(e){if(this.target[e])return this.target[e]}},{key:"getFunction",value:function(e){if(this[e])return this[e].bind(this)}},{key:"getPropertyConfig",value:function(){return null}},{key:"setProperty",value:function(e,t){return null}},{key:"addKeyProperty",value:function(e){return null}},{key:"hasAnimationKey",value:function(e){return C.indexOf(e)>-1}},{key:"getKeyState",value:function(e){return s1.NO_KEY}}],[{key:"toString",value:function(){return"BasePropertyAdapter"}}]),e}(),c1=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"getProperty",value:function(e){if(this.target[e])return this.target[e]}},{key:"setProperty",value:function(e,t){var n=this;switch(e){case"name":if(this.target.name!==t)if(PT.checkArmatureNameConflict(e,this.appStore.rootState.runtime.dragonbones.armatureMap))yf.warn("\u9aa8\u67b6\u540d\u5b57\u51b2\u7a81"),this.appStore.dispatch(L.UPDATE_PROPERTIES);else{var r=this.target.id;this.appStore.commit(D.UPDATE_PROPERTIES,{armatureId:r,properties:b({},e,t)})}break;case"defaultAnimation":case"canvasShow":case"canvasX":case"canvasY":case"canvasWidth":case"canvasHeight":case"canvasColor":case"showCanvasColor":var i=this.target.id;this.appStore.commit(D.UPDATE_PROPERTIES,{armatureId:i,properties:b({},e,t)});break;case"addArmature":var o=PT.createArmatureName(fe,this.appStore.rootState.runtime.dragonbones.armatureMap),a=new RegExp("[`~!@#$^&*()=|{}':;',\\ [\\].<>/?~\uff01@#\uffe5\u2026\u2026&*\uff08\uff09\u2014\u2014|{}\u3010\u3011\u2018\uff1b\uff1a\u201d\u201c'\u3002\uff0c\u3001\uff1f]+","g");yf.rename("\u8bf7\u8f93\u5165\u9aa8\u67b6\u7684\u540d\u5b57",o,"\u8bf7\u8f93\u5165\u9aa8\u67b6\u7684\u540d\u5b57",(function(e,t){n.appStore.dispatch(L.ADD_ARMATURE,{name:e})}),(function(e,t){return e.length>16?"\u540d\u5b57\u4e0d\u80fd\u8d85\u8fc716\u4e2a\u5b57\u7b26":a.test(e)?"\u4e0d\u80fd\u5305\u542b\u7279\u6b8a\u5b57\u7b26":PT.checkArmatureNameConflict(e,n.appStore.rootState.runtime.dragonbones.armatureMap)?"\u5df2\u7ecf\u5b58\u5728\u540c\u540d\u7684\u52a8\u753b":""}));break;case"deleteArmature":var s=this.target.id;this.appStore.dispatch(L.DELETE_ARMATURES,{armatureIds:[s]})}}},{key:"getAllAnimationMenu",value:function(){for(var e=this.target.animations||[],t=this.appStore.rootState.runtime.dragonbones.animationMap,n=[],r=0,i=e.length;r<i;r++){var o=t[e[r]];o&&n.push({label:o.name,value:o.id})}return n}},{key:"getPropertyConfig",value:function(){return h1}}],[{key:"toString",value:function(){return"ArmaturePropertyAdapter"}}]),n}(u1),h1={name:"armature",type:"",targetId:1,mutation:"",operations:[{name:"addArmature",type:"button",componentProperties:{icon:"icon-zu",tooltip:"\u6dfb\u52a0\u9aa8\u67b6"}},{name:"deleteArmature",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u67b6"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"type",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9aa8\u67b6",width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5e27\u7387",items:[{property:"fps",type:ce.CONST,componentType:he.Label,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u9ed8\u8ba4\u64ad\u653e",items:[{property:"defaultAnimation",type:ce.CONST,componentType:he.DropdownInput,componentProp:{itemFunName:"getAllAnimationMenu"}}]}]}]},d1=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._armature=void 0,e.ik=void 0,e.ikTarget=void 0,e}return f(n,[{key:"getProperty",value:function(e){var t=this.target.transform,n=this.appStore.rootState.runtime.editing.editMode;switch(n===Y.ANIMATION&&(this.target.cacheTransform?t=this.target.cacheTransform:this.target.animatedTransform&&(t=this.target.animatedTransform)),e){case"inheritScale":return void 0===this.target.inheritScale||this.target.inheritScale;case"inheritRotation":return void 0===this.target.inheritRotation||this.target.inheritRotation;case"x":return t.x;case"y":return t.y;case"scaleX":return t.scaleX;case"scaleY":return t.scaleY;case"rotation":return vp.radio2Angle(t.skewX);case"clockwise":if(n===Y.ANIMATION){var r,i,o,a;if(null!==(r=this.target.cacheProperties)&&void 0!==r&&null!==(i=r.rotate)&&void 0!==i&&i.clockwise)return this.target.cacheProperties.rotate.clockwise;if(null!==(o=this.target.animatedProperties)&&void 0!==o&&null!==(a=o.rotate)&&void 0!==a&&a.clockwise)return this.target.animatedProperties.rotate.clockwise}return S.AUTO;case"clockwiseNum":if(n===Y.ANIMATION){var s,l,u,c;if(null!==(s=this.target.cacheProperties)&&void 0!==s&&null!==(l=s.rotate)&&void 0!==l&&l.clockwiseNum)return this.target.cacheProperties.rotate.clockwiseNum;if(null!==(u=this.target.animatedProperties)&&void 0!==u&&null!==(c=u.rotate)&&void 0!==c&&c.clockwiseNum)return this.target.animatedProperties.rotate.clockwiseNum}return 0;case"ikId":return this.ik.id;case"ikName":return this.ik.name;case"ikBones":var h=this._armature.bones.map[this.ik.parentId],d=this._armature.bones.map[this.ik.childId];return d?"".concat(h.name," -> ").concat(d.name):"".concat(h.name);case"ikTargetBoneName":return this._armature.bones.map[this.ik.targetId].name;case"ikBendPositive":if(n===Y.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.bendPositive;if(this.ik.animatedValue)return this.ik.animatedValue.bendPositive}return this.ik.bendPositive;case"ikWeight":if(n===Y.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.weight;if(this.ik.animatedValue)return this.ik.animatedValue.weight}return this.ik.weight;case"ikTargetId":return this.ikTarget.id;case"ikTargetName":return this.ikTarget.name;case"ikTargetBones":var f=this._armature.bones.map[this.ikTarget.parentId],p=this._armature.bones.map[this.ikTarget.childId];return p?"".concat(f.name," -> ").concat(p.name):"".concat(f.name);case"ikTargetBendPositive":if(n===Y.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.bendPositive;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.bendPositive}return this.ikTarget.bendPositive;case"ikTargetWeight":if(n===Y.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.weight;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.weight}return this.ikTarget.weight;default:return this.target[e]}}},{key:"armature",set:function(e){this._armature=e}},{key:"getPropertyConfig",value:function(){var e=this.appStore.rootState.runtime.editing.editMode,t=be(g1);if(e===Y.ANIMATION&&(t.panels[1].content[2].items=m1),this.ik=void 0,this.ikTarget=void 0,this._armature){var n=this._armature.constraint.ik;for(var r in n){var i=n[r];if(i&&(i.parentId!==this.target.id&&i.childId!==this.target.id||(this.ik=i),i.targetId!==this.target.id&&i.targetId!==this.target.id||(this.ikTarget=i),this.ik&&this.ikTarget))break}this.ik?t.panels.push(p1):this.target.parentId>0&&t.panels.push(f1),this.ikTarget&&t.panels.push(v1)}return t}},{key:"setProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("ikAuto"!==e)if("ikTarget"!==e)if("deleteIk"!==e)if("deleteIkTarget"!==e){if("ikAddKey"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:t,addKey:n});else{if("ikBendPositive"===e)return void this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{bendPositive:t}});if("ikWeight"===e)return void this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{weight:t}});if("ikTargetAddKey"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:t,addKey:n});else{if("ikTargetBendPositive"===e)return void this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{bendPositive:t}});if("ikTargetWeight"===e)return void this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{weight:t}});if("deleteBone"===e)return this.target.parentId<=0?void yf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u5220\u9664"):void this.appStore.dispatch(V.DELETE_BONES,{armatureId:this._armature.id,boneIds:[this.target.id]});if("setParent"===e)return this.target.parentId<=0?void yf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u8bbe\u7f6e\u7236\u7ea7"):void this.appStore.dispatch(V.PICK_BONE_PARENT,{})}}var r=this.target.transform;this.target.cacheTransform&&(r=this.target.cacheTransform),this.target.animatedTransform&&(r=this.target.animatedTransform);var i=Re({},r),o=[];if(["x","y","scaleX","scaleY","rotation","xy","scaleXY"].indexOf(e)>-1){switch(e){case"x":i.x=t,o.push(e);break;case"y":i.y=t,o.push(e);break;case"xy":i.x=t.x,i.y=t.y,o.push("x","y");break;case"scaleXY":i.scaleX=t.x,i.scaleY=t.y,o.push("scaleX","scaleY");break;case"scaleX":i.scaleX=t,o.push(e);break;case"scaleY":i.scaleY=t,o.push(e);break;case"rotation":i.skewX=vp.angle2Radio(t),i.skewY=vp.angle2Radio(t),o.push("skewX"),o.push("skewY")}this.appStore.dispatch(V.UPDATE_LOCAL_TRANSFORMS,b({},this.target.id,{local:i,diffKeys:o,addKey:n}))}else{var a=this.appStore.rootState.runtime.editing.editingArmatureId,s=this.appStore.rootState.runtime.dragonbones.armatureMap[a];if("name"===e){if(this.target.name!==t)if(PT.checkBoneNameConflict(t,s))return yf.warn("\u9aa8\u9abc\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(L.UPDATE_PROPERTIES)}else if("clockwise"===e||"clockwiseNum"===e)return void this.appStore.dispatch(V.UPDATE_ROTATE_FRAME,{armatureId:a,bones:b({},this.target.id,b({},e,t))});this.appStore.commit(G.UPDATE_PROPERTIES,{armatureId:a,bones:b({},this.target.id,b({},e,t))})}}else this.appStore.dispatch(V.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ikTarget.id]});else this.appStore.dispatch(V.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ik.id]});else this.appStore.dispatch(V.PICK_IK_TARGET);else{var l=this.appStore.rootState.runtime.editing.selectedBoneIds,u=this.appStore.rootState.runtime.dragonbones.armatureMap[this.appStore.rootState.runtime.editing.editingArmatureId];1===l.length?this.appStore.dispatch(V.ADD_IK_AT_TAIL,{armatureId:u.id,parentId:l[0]}):l.length}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==s1.KEY)if("x"===e||"y"===e){var t=this.getProperty("x"),n=this.getProperty("y");this.setProperty("xy",{x:t,y:n},!0)}else if("scaleX"===e||"scaleY"===e){var r=this.getProperty("scaleX"),i=this.getProperty("scaleY");this.setProperty("scaleXY",{x:r,y:i},!0)}else if("ikWeight"===e||"ikBendPositive"===e){var o=this.getProperty("ikWeight"),a=this.getProperty("ikBendPositive");this.setProperty("ikAddKey",{weight:o,bendPositive:a},!0)}else if("ikTargetWeight"===e||"ikTargetBendPositive"===e){var s=this.getProperty("ikTargetWeight"),l=this.getProperty("ikTargetBendPositive");this.setProperty("ikTargetAddKey",{weight:s,bendPositive:l},!0)}else{var u=this.getProperty(e);this.setProperty(e,u,!0)}}},{key:"hasAnimationKey",value:function(e){return"ikBendPositive"===e||"ikWeight"===e||"ikTargetBendPositive"===e||"ikTargetWeight"===e||jm(m(n.prototype),"hasAnimationKey",this).call(this,e)}},{key:"getKeyState",value:function(e){if("ikBendPositive"===e||"ikWeight"===e){if(this.ik){if(this.ik.cacheValue)return s1.VIRTUAL_KEY;if(this.ik.animatedValue){var t=this.appStore.state.editor.dopesheet.curTime,n=this.appStore.getCurArmatureCurAnimation();if(n)if(gp.hasKeyFrame(n,this.ik.id,k.IK,t))return s1.KEY}return s1.NO_KEY}}else if(("ikTargetBendPositive"===e||"ikTargetWeight"===e)&&this.ikTarget){if(this.ikTarget.cacheValue)return s1.VIRTUAL_KEY;if(this.ikTarget.animatedValue){var r=this.appStore.state.editor.dopesheet.curTime,i=this.appStore.getCurArmatureCurAnimation();if(i)if(gp.hasKeyFrame(i,this.ikTarget.id,k.IK,r))return s1.KEY}return s1.NO_KEY}if(this.target){if(gp.boneHasCacheProperty(this.target,e))return s1.VIRTUAL_KEY;var o=this.appStore.state.editor.dopesheet.curTime,a=this.appStore.getCurArmatureCurAnimation();if(a&&gp.hasKeyFrame(a,this.target.id,e,o))return s1.KEY}return s1.NO_KEY}}],[{key:"toString",value:function(){return"BonePropertyAdapter"}}]),n}(u1),f1={name:"constrain",label:"\u7ea6\u675f",content:[{type:ue.PROPERTY_ITEM,label:"IK",items:[{property:"ikAuto",type:ce.CONST,tooltip:"\u5728\u9aa8\u9abc\u672b\u7aef\u751f\u6210\u7ea6\u675f\u76ee\u6807",componentType:he.Button,componentProp:{icon:"icon-target-center-"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"ikTarget",type:ce.CONST,tooltip:"\u8bbe\u7f6eIK\u7ea6\u675f\u76ee\u6807",componentType:he.Button,componentProp:{icon:"icon-target"}}]}]},p1={name:"ikConstrain",label:"IK\u7ea6\u675f",content:[{type:ue.PROPERTY_ITEM,label:"id",items:[{property:"ikId",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikBones",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u76ee\u6807",items:[{property:"ikTargetBoneName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikBendPositive",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikWeight",type:ce.FLOAT,componentType:he.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:ue.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"deleteIk",type:ce.CONST,tooltip:"\u5220\u9664IK",componentType:he.Button,componentProp:{icon:"icon-delete"}}]}]},v1={name:"ikConstrainTarget",label:"IK\u7ea6\u675f\u76ee\u6807",content:[{type:ue.PROPERTY_ITEM,label:"id",items:[{property:"ikTargetId",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikTargetName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikTargetBones",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikTargetBendPositive",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikTargetWeight",type:ce.FLOAT,componentType:he.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:ue.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"deleteIkTarget",type:ce.CONST,tooltip:"\u5220\u9664IK",componentType:he.Button,componentProp:{icon:"icon-delete"}}]}]},m1=[{property:"rotation",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"clockwiseNum",type:ce.FLOAT,componentType:he.IntInput,componentProp:{step:1,min:0,max:99,width:16,speedDuration:20},tooltip:"\u65cb\u8f6c\u5708\u6570\uff0c\u5f53\u65cb\u8f6c\u7c7b\u578b\u662f\u2018\u987a\u65f6\u9488\u2019\u6216\u8005\u2018\u9006\u65f6\u9488\u2019\u65f6\u751f\u6548"},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"x"}},{property:"clockwise",type:ce.ENUM,componentType:he.DropdownInput,componentProp:{items:[{label:"\u81ea\u52a8",value:0},{label:"\u987a\u65f6\u9488",value:1},{label:"\u9006\u65f6\u9488",value:-1}],defaultValue:0,displayTextWhenEmpty:"\u81ea\u52a8"},tooltip:"\u65cb\u8f6c\u7c7b\u578b\uff0c\u2018\u81ea\u52a8\u2019\uff1a\u65cb\u8f6c\u65f6\u6309\u7167\u89d2\u5ea6\u6700\u5c0f\u7684\u65b9\u5411\u8fdb\u884c\u65cb\u8f6c"}],g1={name:"bone",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-dodeparent",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteBone",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u9abc"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9aa8\u9abc",width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u957f\u5ea6",items:[{property:"length",type:ce.INT,componentType:he.IntInput,componentProp:{step:1}}]},{type:ue.PROPERTY_ITEM,label:"\u7ee7\u627f",items:[{property:"inheritScale",tooltip:"\u7ee7\u627f\u7236\u9aa8\u9abc\u7684\u7f29\u653e",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u7f29\u653e"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"inheritRotation",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u65cb\u8f6c"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc\u989c\u8272",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:5}},{property:"clearBoneColor",type:ce.CONST,tooltip:"\u6e05\u9664\u81ea\u5b9a\u4e49\u9aa8\u9abc\u989c\u8272",componentType:he.Button,componentProp:{icon:"icon-delete"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"boneColor",type:ce.COLOR,componentType:he.ColorInput,componentProp:{}}]}]},{name:"transform",label:"\u5750\u6807\u53d8\u6362",content:[{type:ue.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"y",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"x",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.02,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"scaleX",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.02,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}}]}]}]},y1=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"getProperty",value:function(e){var t=this.appStore.rootState.runtime.editing.editMode,n={x:0,y:0,skewX:0,skewY:0,scaleX:1,scaleY:1};if(this.target.displayIndex>=0){var r=PT.getSlotCurDisplay(this.target);r&&(n=r.transform)}switch(e){case"x":return n.x;case"y":return n.y;case"scaleX":return n.scaleX;case"scaleY":return n.scaleY;case"rotation":return vp.radio2Angle(n.skewX);case"color":if(t===Y.ANIMATION){if(void 0!==this.target.cacheColor)return this.target.cacheColor;if(void 0!==this.target.animatedColor)return this.target.animatedColor}return this.target.color||16777215;case"alpha":if(t===Y.ANIMATION){if(void 0!==this.target.cacheAlpha)return this.target.cacheAlpha;if(void 0!==this.target.animatedAlpha)return this.target.animatedAlpha}return void 0===this.target.alpha?1:this.target.alpha;case"displayIndex":if(t===Y.ANIMATION){if(void 0!==this.target.cacheDisplayIndex)return this.target.cacheDisplayIndex;if(void 0!==this.target.animatedDisplayIndex)return this.target.animatedDisplayIndex}return this.target.displayIndex;case"displayName":return this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target).name:"";case"displayAssetName":var i=this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target):null;return i?this.appStore.getAssetById(i.assetId).name:"";case"isMesh":var o=this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target):null;return!!o&&o.type===T.MESH;case"editMesh":return this.appStore.rootState.runtime.editing.stageTool===J.MESH_EDIT_TOOL;case"ffdKeyPlaceholder":return!0;case"addBindingBones":return this.appStore.rootState.runtime.editing.stageTool===J.RIGGING_TOOL;case"autoBonesWeight":return!1;case"riggingBones":var a=this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target):null;if(a&&a.mesh&&a.mesh.bonePose){var s=[];for(var l in a.mesh.bonePose){var u=a.mesh.bonePose[l];if(u){var c=parseInt(l),h=this.appStore.getBoneById(c),d=u.color;s.push({id:c,name:h.name,color:d})}}return{bones:s}}return{bones:[]};default:return this.target[e]}}},{key:"setProperty",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=[];if(["x","y","scaleX","scaleY","rotation"].indexOf(e)>-1&&this.target.displayIndex>=0){var o=Re({},PT.getSlotCurDisplay(this.target).transform);switch(e){case"x":o.x=t,i.push(e);break;case"y":o.y=t,i.push(e);break;case"scaleX":o.scaleX=t,i.push(e);break;case"scaleY":o.scaleY=t,i.push(e);break;case"rotation":o.skewX=vp.angle2Radio(t),o.skewY=vp.angle2Radio(t),i.push("skewX"),i.push("skewY")}var a=this.target.parentId,s=this.appStore.getBoneById(a),l=vp.transformCross(s.globalTransform,o);this.appStore.dispatch(F.UPDATE_LOCAL_TRANSFORMS,b({},this.target.id,{local:o,global:l,diffKeys:i}))}else{var u=this.appStore.rootState.runtime.editing.editingArmatureId,c=this.appStore.rootState.runtime.dragonbones.armatureMap[u];if("name"===e){if(this.target.name!==t)if(PT.checkSlotNameConflict(t,c))return yf.warn("\u63d2\u69fd\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(L.UPDATE_PROPERTIES)}else{if("displayName"===e){var h=this.target.id,d=PT.getSlotCurDisplay(this.target);return void this.appStore.commit(j.UPDATE_PROPERTIES,{armatureId:u,slotId:h,displays:b({},d.id,b({},e,t))})}if("deleteSlot"===e){var f=this.target.id;return void this.appStore.dispatch(F.DELETE_SLOTS,{armatureId:u,slotIds:[f]})}if("setParent"===e)return void this.appStore.dispatch(F.PICK_SLOT_PARENT,{});if("isMesh"===e){var p=this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target):null,v=this.target.id,m=p.id,g=T.IMAGE;if(p.type===T.MESH)g=T.IMAGE;else{if(p.type!==T.IMAGE)return;if(g=T.MESH,!p.mesh){var y=function(e,t){var r=.5*e,i=.5*t,o={armatureId:u,slotId:v,displays:b({},m,{type:g,mesh:{points:{0:{vertices:[-r,-i],uvs:[0,0]},1:{vertices:[r,-i],uvs:[1,0]},2:{vertices:[-r,i],uvs:[0,1]},3:{vertices:[r,i],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]},width:e,height:t})};n.appStore.commit(j.UPDATE_PROPERTIES,o)},_=this.appStore.state.runtime.dragonbones.assetMap,x=this.appStore.state.library;return void(p.width&&p.height?y(p.width,p.height):PT.getDisplaySize(p,_,x).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];y(t,n)}})).catch((function(e){})))}}this.appStore.historyBeginMerge(),this.appStore.rootState.runtime.editing.selectedMeshPointIds.length&&this.appStore.commit(H.SELECT_MESH_POINTS,{points:[]});var E={armatureId:u,slotId:v,displays:b({},m,{type:g})};return this.appStore.commit(j.UPDATE_PROPERTIES,E),void this.appStore.historyEndMerge()}if("resetMesh"===e){if(this.appStore.rootState.runtime.editing.editMode===Y.POSE){var w=this.target.displayIndex>=0?PT.getSlotCurDisplay(this.target):null,S=this.target.id,k=w.id;if(w.mesh){var C=function(e,t){var r=be(w.mesh);for(var i in r.points){var o=r.points[i].uvs;r.points[i].vertices=[e*(o[0]-.5),t*(o[1]-.5)]}var a={armatureId:u,slotId:S,displays:b({},k,{mesh:r,width:e,height:t})};n.appStore.commit(j.UPDATE_PROPERTIES,a)};if(w.width&&w.height)C(w.width,w.height);else{var A=this.appStore.state.runtime.dragonbones.assetMap,I=this.appStore.state.library;PT.getDisplaySize(w,A,I).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];C(t,n)}})).catch((function(e){}))}}}return}if("editMesh"===e)return void(t?this.appStore.dispatch(X.OPEN_MESH_EDIT_TOOL,{}):this.appStore.dispatch(X.CLOSE_MESH_EDIT_TOOL,{}));if("autoBonesWeight"===e)return void this.appStore.dispatch(U.AUTO_WEIGHT,{armatureId:u,slotId:this.target.id,displayId:PT.getSlotCurDisplay(this.target).id});if("addBindingBones"===e)return void(t?this.appStore.dispatch(X.OPEN_RIGGING_TOOL,{}):this.appStore.dispatch(X.CLOSE_RIGGING_TOOL,{}));if("riggingBones"===e){var O=t.action,P=t.id;switch(O){case"delete":return void this.appStore.dispatch(U.DELETE_RIG_BONES,{armatureId:u,slotId:this.target.id,displayId:PT.getSlotCurDisplay(this.target).id,boneIds:[P]});case"select":return void(this.appStore.rootState.runtime.editing.stageTool===J.WEIGHT_TOOL&&this.appStore.commit(W.SELECT_RIGGING_BONE,{boneId:P}));case"over":return void this.appStore.commit(G.OVER_BONE,P);case"out":return void this.appStore.commit(G.OVER_BONE,0)}}}this.appStore.dispatch(F.UPDATE_PROPERTIES,{armatureId:u,slots:b({},this.target.id,b({},e,t)),addKey:r})}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==s1.KEY)if("ffdKeyPlaceholder"===e){var t=this.appStore.rootState.runtime.editing.editMode,n=PT.getSlotCurDisplay(this.target,t);if(n&&n.mesh){var r=n.mesh.cacheFFD||n.mesh.animatedFFD,i={armatureId:this.appStore.rootState.runtime.editing.editingArmatureId,slotId:this.target.id,displayId:n.id,mesh:{points:{}},addKey:!0};if(r)for(var o in r)i.mesh.points[o]={vertices:r[o]};this.appStore.dispatch(U.UPDATE_MESH,i)}}else{var a=this.getProperty(e);this.setProperty(e,a,!0)}}},{key:"getPropertyConfig",value:function(){if(!this.target)return null;var e,t,n=be(b1),r=this.appStore.rootState.runtime.editing.editMode,i=PT.getSlotCurDisplay(this.target,r);if(i){if(r===Y.POSE)(e=n.panels[2].content).push.apply(e,x1),i.type===T.MESH&&(t=n.panels[2].content).push.apply(t,E1);else if(r===Y.ANIMATION){var o;if(n.operations=[],i.type===T.MESH)(o=n.panels[2].content).push.apply(o,_1);n.panels.splice(1,1)}}else n.panels.length=1,n.panels[0].content.splice(3,3);return n}},{key:"hasAnimationKey",value:function(e){return["ffdKeyPlaceholder","color","alpha","displayIndex"].indexOf(e)>-1}},{key:"getAllDisplay",value:function(){for(var e=[{label:"\u7a7a",value:-1}],t=0;t<this.target.displays.ids.length;t++){var n=this.target.displays.ids[t],r=this.target.displays.map[n];e.push({label:r.name,value:t})}return e}},{key:"getKeyState",value:function(e){if("ffdKeyPlaceholder"===e){if(this.target){var t=PT.getSlotCurDisplay(this.target);if(t.mesh){if(t.mesh.cacheFFD)return s1.VIRTUAL_KEY;if(t.mesh.animatedFFD){var n=this.appStore.getCurArmatureCurAnimation();if(n){var r=this.appStore.state.editor.dopesheet.curTime;if(gp.hasKeyFrame(n,t.id,k.FFD,r))return s1.KEY}}}return s1.NO_KEY}}else if(this.target){var i=this.appStore.getCurArmatureCurAnimation();if(i){var o,a=this.appStore.state.editor.dopesheet.curTime;if("displayIndex"===e?o=k.DISPLAY_INDEX:"alpha"!==e&&"color"!==e||(o=k.COLOR),o){if("displayIndex"===e){if(void 0!==this.target.cacheDisplayIndex)return s1.VIRTUAL_KEY}else if("alpha"===e){if(void 0!==this.target.cacheAlpha)return s1.VIRTUAL_KEY}else if("color"===e&&void 0!==this.target.cacheColor)return s1.VIRTUAL_KEY;if(gp.hasKeyFrame(i,this.target.id,o,a))return s1.KEY}}}return s1.NO_KEY}}],[{key:"toString",value:function(){return"SlotPropertyAdapter"}}]),n}(u1),b1={name:"slot",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-dodeparent",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteSlot",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u63d2\u69fd"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u63d2\u69fd",width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u989c\u8272",items:[{property:"color",type:ce.COLOR,componentType:he.ColorInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u6df7\u5408",items:[{property:"blendMode",type:ce.ENUM,componentType:he.DropdownInput,componentProp:{items:[{label:"\u6b63\u5e38",value:w.Normal},{label:"\u53e0\u52a0",value:w.Add},{label:"\u64e6\u9664",value:w.Erase}],defaultValue:w.Normal}}]},{type:ue.PROPERTY_ITEM,label:"\u4e0d\u900f\u660e",items:[{property:"alpha",type:ce.FLOAT,componentType:he.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:ue.PROPERTY_ITEM,label:"\u663e\u793a\u8d44\u6e90",items:[{property:"displayIndex",type:ce.ENUM,componentType:he.DropdownInput,componentProp:{itemFunName:"getAllDisplay",displayTextWhenEmpty:"\u7a7a"}}]}]},{name:"transform",label:"\u5750\u6807\u53d8\u6362",content:[{type:ue.PROPERTY_ITEM,label:"\u4f4d\u7f6e",items:[{property:"y",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"x",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u7f29\u653e",items:[{property:"scaleY",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"Y"}},{property:"scaleX",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:.1,fixed:2}},{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"X"}}]},{type:ue.PROPERTY_ITEM,label:"\u65cb\u8f6c",items:[{property:"rotation",type:ce.FLOAT,componentType:he.FloatInput,componentProp:{step:1,fixed:2}}]}]},{name:"display",label:"\u8d44\u6e90\u5c5e\u6027",content:[{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"displayName",type:ce.CONST,componentType:he.Label,componentProp:{width:150,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u8d44\u6e90",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:5}},{property:"replaceAsset",type:ce.CONST,componentType:he.Button,tooltip:"\u66ff\u6362\u8d44\u6e90",componentProp:{icon:"icon-replace2"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"displayAssetName",type:ce.CONST,componentType:he.Label,componentProp:{width:100,align:"right"}}]}]}]},_1=[{type:ue.PROPERTY_ITEM,label:"FFD",items:[{property:"ffdKeyPlaceholder",type:ce.NONE,componentType:he.Gap,componentProp:{}}]}],x1=[{type:ue.PROPERTY_ITEM,label:"\u8f6c\u6210\u7f51\u683c",items:[{property:"isMesh",type:ce.BOOLEAN,componentType:he.BooleanSwitch,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7f51\u683c\u7f16\u8f91",visible:"isMesh",items:[{property:"resetMesh",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u91cd\u7f6e\u7f51\u683c",componentProp:{label:"\u91cd\u7f6e\u7f51\u683c"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"editMesh",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u7f16\u8f91\u7f51\u683c",componentProp:{label:"\u7f16\u8f91\u7f51\u683c",toggle:!0}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}}]}],E1=[{type:ue.PROPERTY_ITEM,label:"\u7ed1\u5b9a\u5de5\u5177",visible:"isMesh",items:[{property:"autoBonesWeight",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u81ea\u52a8\u6743\u91cd",componentProp:{label:"\u81ea\u52a8\u6743\u91cd"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"addBindingBones",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u6dfb\u52a0\u9aa8\u9abc",componentProp:{label:"\u6dfb\u52a0\u9aa8\u9abc",toggle:!0}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd\u9aa8\u9abc\u8868",visible:"isMesh",items:[{property:"",type:ce.NONE,componentType:he.Gap,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"",visible:"isMesh",items:[{property:"riggingBones",type:ce.ARRAY,componentType:he.RiggingList,componentProp:{}}]}],w1=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._cacheMeshWeight=null,e}return f(n,[{key:"getProperty",value:function(e){var t=this.target;switch(e){case"type":return t?n.DISPLAY_TYPE_NAME[t.type]:"";case"displayName":return this.target.name;case"displayAssetName":return t?this.appStore.getAssetById(t.assetId).name:"";case"isMesh":var r=this.target;return!!r&&r.type===T.MESH;case"editMesh":return this.appStore.rootState.runtime.editing.stageTool===J.MESH_EDIT_TOOL;case"ffdKeyPlaceholder":return!0;case"addBindingBones":return this.appStore.rootState.runtime.editing.stageTool===J.RIGGING_TOOL;case"autoBonesWeight":return!1;case"riggingBones":var i=this.appStore.rootState.runtime.editing.selectedMeshPointIds,o=this.appStore.rootState.runtime.editing.riggingSelectedBoneId,a=this.target;if(a&&a.mesh&&a.mesh.bonePose){var s=[];for(var l in a.mesh.bonePose){var u=a.mesh.bonePose[l].color,c=parseInt(l),h={id:c,name:this.appStore.getBoneById(c).name,color:u};if(1===i.length){var d=i[0],f=a.mesh.boneWeights[d][c];h.weight=f,h.vertexIndex=parseInt(d)}s.push(h)}return{bones:s,selectedId:o}}return{bones:[]};default:return this.target[e]}}},{key:"setProperty",value:function(e,t){var n=this,r=this.appStore.rootState.runtime.editing.editingArmatureId,i=this.appStore.rootState.runtime.dragonbones.armatureMap[r],o=PT.getSlotByDisplayId(i,this.target.id).id;if("name"===e){if(this.target.name!==t)if(PT.checkDisplayNameConflict(t,i))return yf.warn("\u663e\u793a\u5bf9\u8c61\u540d\u5b57\u51b2\u7a81:"+t),void this.appStore.dispatch(L.UPDATE_PROPERTIES)}else{if("displayName"===e){var a=this.target;return void this.appStore.commit(j.UPDATE_PROPERTIES,{armatureId:r,slotId:o,displays:b({},a.id,b({},e,t))})}if("deleteSlot"===e)return void this.appStore.dispatch(F.DELETE_SLOTS,{armatureId:r,slotIds:[o]});if("isMesh"===e){var s=this.target,l=s.id,u=T.IMAGE;if(s.type===T.MESH)u=T.IMAGE;else{if(s.type!==T.IMAGE)return;if(u=T.MESH,!s.mesh){var c=function(e,t){var i=.5*e,a=.5*t,s={armatureId:r,slotId:o,displays:b({},l,{type:u,mesh:{points:{0:{vertices:[-i,-a],uvs:[0,0]},1:{vertices:[i,-a],uvs:[1,0]},2:{vertices:[-i,a],uvs:[0,1]},3:{vertices:[i,a],uvs:[1,1]}},outlines:[0,1,1,3,3,2,2,0],userEdges:[],triangles:[0,1,2,1,3,2]},width:e,height:t})};n.appStore.commit(j.UPDATE_PROPERTIES,s)},h=this.appStore.state.runtime.dragonbones.assetMap,d=this.appStore.state.library;return void(s.width&&s.height?c(s.width,s.height):PT.getDisplaySize(s,h,d).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];c(t,n)}})).catch((function(e){})))}}this.appStore.historyBeginMerge(),this.appStore.rootState.runtime.editing.selectedMeshPointIds.length&&this.appStore.commit(H.SELECT_MESH_POINTS,{points:[]});var f={armatureId:r,slotId:o,displays:b({},l,{type:u})};return this.appStore.commit(j.UPDATE_PROPERTIES,f),void this.appStore.historyEndMerge()}if("resetMesh"===e){if(this.appStore.rootState.runtime.editing.editMode===Y.POSE){var p=this.target,v=p.id;if(p.mesh){var m=function(e,t){var i=be(p.mesh);for(var a in i.points){var s=i.points[a].uvs;i.points[a].vertices=[e*(s[0]-.5),t*(s[1]-.5)]}var l={armatureId:r,slotId:o,displays:b({},v,{mesh:i,width:e,height:t})};n.appStore.commit(j.UPDATE_PROPERTIES,l)};if(p.width&&p.height)m(p.width,p.height);else{var g=this.appStore.state.runtime.dragonbones.assetMap,y=this.appStore.state.library;PT.getDisplaySize(p,g,y).then((function(e){if(e&&2===e.length&&e[0]>0&&e[1]>0){var t=e[0],n=e[1];m(t,n)}})).catch((function(e){}))}}}return}if("editMesh"===e)return void(t?this.appStore.dispatch(X.OPEN_MESH_EDIT_TOOL,{}):this.appStore.dispatch(X.CLOSE_MESH_EDIT_TOOL,{}));if("autoBonesWeight"===e)return void this.appStore.dispatch(U.AUTO_WEIGHT,{armatureId:r,slotId:o,displayId:this.target.id});if("addBindingBones"===e)return void(t?this.appStore.dispatch(X.OPEN_RIGGING_TOOL,{}):this.appStore.dispatch(X.CLOSE_RIGGING_TOOL,{}));if("riggingBones"===e){var _=t.action,x=t.id;switch(_){case"delete":return void this.appStore.dispatch(U.DELETE_RIG_BONES,{armatureId:r,slotId:o,displayId:this.target.id,boneIds:[x]});case"select":return void(this.appStore.rootState.runtime.editing.stageTool===J.WEIGHT_TOOL&&this.appStore.commit(W.SELECT_RIGGING_BONE,{boneId:x}));case"over":return void this.appStore.commit(G.OVER_BONE,x);case"out":return void this.appStore.commit(G.OVER_BONE,0);case"continuousEndCallback":return void(this._cacheMeshWeight=null);case"continuousStartCallback":return;case"changeWeight":var E=t.vertexIndex,w=t.weight,S=t.id,k=this.target,C=this.target.id,A=S,I={armatureId:r,slotId:o,displayId:C},O={};return this._cacheMeshWeight||(this._cacheMeshWeight=be(k.mesh.boneWeights)),O[E]=PT.calculateBoneWeight(k.mesh.boneWeights,E,A,w,this._cacheMeshWeight),O[E][A]=w,I.boneWeights=O,void this.appStore.commit(H.UPDATE_RIG_BONE,I)}}}}},{key:"getPropertyConfig",value:function(){if(!this.target)return null;var e,t,n=be(T1),r=this.appStore.rootState.runtime.editing.editMode,i=this.target;if(r===Y.POSE)(e=n.panels[1].content).push.apply(e,k1),i.type===T.MESH&&(t=n.panels[1].content).push.apply(t,C1);else if(r===Y.ANIMATION){var o;if(n.operations=[],i.type===T.MESH)(o=n.panels[1].content).push.apply(o,S1)}return n}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==s1.KEY&&"ffdKeyPlaceholder"===e){this.appStore.rootState.runtime.editing.editMode;var t=this.target;if(t&&t.mesh){var n=this.appStore.rootState.runtime.editing.editingArmatureId,r=this.appStore.rootState.runtime.dragonbones.armatureMap[n],i=PT.getSlotByDisplayId(r,this.target.id).id,o=t.mesh.cacheFFD||t.mesh.animatedFFD,a={armatureId:n,slotId:i,displayId:t.id,mesh:{points:{}},addKey:!0};if(o)for(var s in o)a.mesh.points[s]={vertices:o[s]};this.appStore.dispatch(U.UPDATE_MESH,a)}}}},{key:"hasAnimationKey",value:function(e){return["ffdKeyPlaceholder"].indexOf(e)>-1}},{key:"getKeyState",value:function(e){if("ffdKeyPlaceholder"===e&&this.target){var t=this.target;if(t.mesh){if(t.mesh.cacheFFD)return s1.VIRTUAL_KEY;if(t.mesh.animatedFFD){var n=this.appStore.getCurArmatureCurAnimation();if(n){var r=this.appStore.state.editor.dopesheet.curTime;if(gp.hasKeyFrame(n,t.id,k.FFD,r))return s1.KEY}}}return s1.NO_KEY}return s1.NO_KEY}}],[{key:"toString",value:function(){return"DisplayPropertyAdapter"}}]),n}(u1);w1.DISPLAY_TYPE_NAME=(b(r1={},T.IMAGE,"\u56fe\u7247"),b(r1,T.ARMATURE,"\u9aa8\u67b6"),b(r1,T.MESH,"\u7f51\u683c"),b(r1,T.BOUND_BOX,"\u5305\u56f4\u76d2"),b(r1,T.SHAPE,"\u5f62\u72b6"),b(r1,T.TEXT,"\u6587\u672c"),r1);var T1={name:"display",type:"",targetId:1,mutation:"",operations:[{name:"deleteDisplay",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u663e\u793a\u5bf9\u8c61"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.StringInput,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:ce.CONST,componentType:he.Label,componentProp:{width:40,align:"right"}}]}]},{name:"display",label:"\u8d44\u6e90\u5c5e\u6027",content:[{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"displayName",type:ce.CONST,componentType:he.Label,componentProp:{width:150,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u8d44\u6e90",items:[{property:"replaceAsset",type:ce.CONST,componentType:he.Button,tooltip:"\u66ff\u6362\u8d44\u6e90",componentProp:{icon:"icon-replace2"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"displayAssetName",type:ce.CONST,componentType:he.Label,componentProp:{width:100,align:"right"}}]}]}]},S1=[{type:ue.PROPERTY_ITEM,label:"FFD",items:[{property:"ffdKeyPlaceholder",type:ce.NONE,componentType:he.Gap,componentProp:{}}]}],k1=[{type:ue.PROPERTY_ITEM,label:"\u8f6c\u6210\u7f51\u683c",items:[{property:"isMesh",type:ce.BOOLEAN,componentType:he.BooleanSwitch,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"\u7f51\u683c\u7f16\u8f91",visible:"isMesh",items:[{property:"resetMesh",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u91cd\u7f6e\u7f51\u683c",componentProp:{label:"\u91cd\u7f6e\u7f51\u683c"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"editMesh",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u7f16\u8f91\u7f51\u683c",componentProp:{label:"\u7f16\u8f91\u7f51\u683c",toggle:!0}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}}]}],C1=[{type:ue.PROPERTY_ITEM,label:"\u7ed1\u5b9a\u5de5\u5177",visible:"isMesh",items:[{property:"autoBonesWeight",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u81ea\u52a8\u6743\u91cd",componentProp:{label:"\u81ea\u52a8\u6743\u91cd"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"addBindingBones",type:ce.CONST,componentType:he.ButtonLabel,tooltip:"\u6dfb\u52a0\u9aa8\u9abc",componentProp:{label:"\u6dfb\u52a0\u9aa8\u9abc",toggle:!0}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd\u9aa8\u9abc\u8868",visible:"isMesh",items:[{property:"",type:ce.NONE,componentType:he.Gap,componentProp:{}}]},{type:ue.PROPERTY_ITEM,label:"",visible:"isMesh",items:[{property:"riggingBones",type:ce.ARRAY,componentType:he.RiggingList,componentProp:{}}]}],A1=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i)))._armature=void 0,e.ik=void 0,e.ikTarget=void 0,e}return f(n,[{key:"getProperty",value:function(e){var t=this.appStore.rootState.runtime.editing.editMode;switch(e){case"inheritScale":case"inheritRotation":return!0;case"name":var n=[];return this.target.forEach((function(e){n.push(e.name)})),n.join(",");case"id":var r=[];return this.target.forEach((function(e){r.push(e.id)})),r.join(",");case"ikId":return this.ik.id;case"ikName":return this.ik.name;case"ikBones":var i=this._armature.bones.map[this.ik.parentId],o=this._armature.bones.map[this.ik.childId];return o?"".concat(i.name," -> ").concat(o.name):"".concat(i.name);case"ikTargetBoneName":return this._armature.bones.map[this.ik.targetId].name;case"ikBendPositive":if(t===Y.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.bendPositive;if(this.ik.animatedValue)return this.ik.animatedValue.bendPositive}return this.ik.bendPositive;case"ikWeight":if(t===Y.ANIMATION){if(this.ik.cacheValue)return this.ik.cacheValue.weight;if(this.ik.animatedValue)return this.ik.animatedValue.weight}return this.ik.weight;case"ikTargetId":return this.ikTarget.id;case"ikTargetName":return this.ikTarget.name;case"ikTargetBones":return"".concat(this.ikTarget.parentId," -> ").concat(this.ikTarget.childId);case"ikTargetBendPositive":if(t===Y.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.bendPositive;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.bendPositive}return this.ikTarget.bendPositive;case"ikTargetWeight":if(t===Y.ANIMATION){if(this.ikTarget.cacheValue)return this.ikTarget.cacheValue.weight;if(this.ikTarget.animatedValue)return this.ikTarget.animatedValue.weight}return this.ikTarget.weight}}},{key:"armature",set:function(e){this._armature=e}},{key:"getPropertyConfig",value:function(){var e=be(P1);if(this.checkIKEnable()){if(this.ik=void 0,this.ikTarget=void 0,this._armature){var t=this._armature.constraint.ik;for(var n in t){var r=t[n];if(r&&(r.parentId===this.target[0].id||r.parentId===this.target[1].id||r.childId===this.target[0].id||r.childId===this.target[1].id?this.ik=r:r.targetId!==this.target[0].id&&r.targetId!==this.target[1].id||(this.ikTarget=r),this.ik&&this.ikTarget))break}this.ik&&(e.panels.splice(1,1),e.panels.push(I1)),this.ikTarget&&e.panels.push(O1)}}else e.panels.splice(1,1);return e}},{key:"checkIKEnable",value:function(){if(2!==this.target.length)return!1;var e=this.target[0],t=this.target[1];return!(e.parentId<=0||t.parentId<=0)&&(e.parentId===t.id||t.parentId===e.id)}},{key:"setProperty",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("ikAuto"!==e)if("ikTarget"===e)this.appStore.dispatch(V.PICK_IK_TARGET);else if("deleteIk"===e)this.appStore.dispatch(V.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ik.id]});else if("deleteIkTarget"===e)this.appStore.dispatch(V.DELETE_IKS,{armatureId:this._armature.id,ikIds:[this.ikTarget.id]});else if("ikAddKey"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:t,addKey:n});else if("ikBendPositive"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{bendPositive:t}});else if("ikWeight"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ik.id,properties:{weight:t}});else if("ikTargetAddKey"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:t,addKey:n});else if("ikTargetBendPositive"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{bendPositive:t}});else if("ikTargetWeight"===e)this.appStore.dispatch(V.UPDATE_IK,{armatureId:this._armature.id,ikId:this.ikTarget.id,properties:{weight:t}});else{if("deleteBone"===e){for(var r=0,i=this.target.length;r<i;r++){if(this.target[r].parentId<=0)return void yf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u5220\u9664")}for(var o=[],a=0,s=this.target.length;a<s;a++){var l=this.target[a];o.push(l.id)}return void this.appStore.dispatch(V.DELETE_BONES,{armatureId:this._armature.id,boneIds:o})}if("setParent"===e){for(var u=0,c=this.target.length;u<c;u++){if(this.target[u].parentId<=0)return void yf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u8bbe\u7f6e\u7236\u7ea7")}return void this.appStore.dispatch(V.PICK_BONE_PARENT,{})}}else{var h=this.appStore.rootState.runtime.dragonbones.armatureMap[this.appStore.rootState.runtime.editing.editingArmatureId];if(2===this.target.length){var d,f,p=this.target[0],v=this.target[1];if(p.parentId<=0||v.parentId<=0)return void yf.warn("\u6839\u9aa8\u9abc\u4e0d\u80fd\u6dfb\u52a0IK\u7ea6\u675f");if(p.parentId===v.id)d=v,f=p;else{if(v.parentId!==p.id)return void yf.warn("IK\u7ea6\u675f\u53ea\u80fd\u5728\u4e24\u4e2a\u7236\u5b50\u9aa8\u9abc\u4e4b\u95f4");d=p,f=v}d&&f&&this.appStore.dispatch(V.ADD_IK_AT_TAIL,{armatureId:h.id,parentId:d.id,childId:f.id})}else yf.warn("IK\u7ea6\u675f\u53ea\u80fd\u5728\u4e24\u4e2a\u9aa8\u9abc\u4e4b\u95f4")}}},{key:"addKeyProperty",value:function(e){if(this.getKeyState(e)!==s1.KEY)if("ikWeight"===e||"ikBendPositive"===e){var t=this.getProperty("ikWeight"),n=this.getProperty("ikBendPositive");this.setProperty("ikAddKey",{weight:t,bendPositive:n},!0)}else if("ikTargetWeight"===e||"ikTargetBendPositive"===e){var r=this.getProperty("ikTargetWeight"),i=this.getProperty("ikTargetBendPositive");this.setProperty("ikTargetAddKey",{weight:r,bendPositive:i},!0)}}},{key:"hasAnimationKey",value:function(e){return"ikBendPositive"===e||"ikWeight"===e||"ikTargetBendPositive"===e||"ikTargetWeight"===e||jm(m(n.prototype),"hasAnimationKey",this).call(this,e)}},{key:"getKeyState",value:function(e){if("ikBendPositive"===e||"ikWeight"===e){if(this.ik){if(this.ik.cacheValue)return s1.VIRTUAL_KEY;if(this.ik.animatedValue){var t=this.appStore.state.editor.dopesheet.curTime,n=this.appStore.getCurArmatureCurAnimation();if(n)if(gp.hasKeyFrame(n,this.ik.id,k.IK,t))return s1.KEY}return s1.NO_KEY}}else if(("ikTargetBendPositive"===e||"ikTargetWeight"===e)&&this.ikTarget){if(this.ikTarget.cacheValue)return s1.VIRTUAL_KEY;if(this.ikTarget.animatedValue){var r=this.appStore.state.editor.dopesheet.curTime,i=this.appStore.getCurArmatureCurAnimation();if(i)if(gp.hasKeyFrame(i,this.ikTarget.id,k.IK,r))return s1.KEY}return s1.NO_KEY}return s1.NO_KEY}}],[{key:"toString",value:function(){return"BonesPropertyAdapter"}}]),n}(u1),I1={name:"ikConstrain",label:"IK\u7ea6\u675f",content:[{type:ue.PROPERTY_ITEM,label:"id",items:[{property:"ikId",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikBones",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u76ee\u6807",items:[{property:"ikTargetBoneName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikBendPositive",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikWeight",type:ce.FLOAT,componentType:he.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:ue.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"deleteIk",type:ce.CONST,tooltip:"\u5220\u9664IK",componentType:he.Button,componentProp:{icon:"icon-delete"}}]}]},O1={name:"ikConstrainTarget",label:"IK\u7ea6\u675f\u76ee\u6807",content:[{type:ue.PROPERTY_ITEM,label:"id",items:[{property:"ikTargetId",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u79f0",items:[{property:"ikTargetName",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc",items:[{property:"ikTargetBones",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u5f2f\u66f2",items:[{property:"ikTargetBendPositive",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u6b63\u5411"}}]},{type:ue.PROPERTY_ITEM,label:"\u6743\u91cd",items:[{property:"ikTargetWeight",type:ce.FLOAT,componentType:he.NumberSliderInput,componentProp:{step:.01,fixed:2,max:1,min:0}}]},{type:ue.PROPERTY_ITEM,label:"\u64cd\u4f5c",items:[{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"deleteIkTarget",type:ce.CONST,tooltip:"\u5220\u9664IK",componentType:he.Button,componentProp:{icon:"icon-delete"}}]}]},P1={name:"bones",type:"",targetId:1,mutation:"",operations:[{name:"setParent",type:"button",componentProperties:{icon:"icon-add",tooltip:"\u8bbe\u7f6e\u7236\u7ea7"}},{name:"deleteBone",type:"button",componentProperties:{icon:"icon-delete",tooltip:"\u5220\u9664\u9aa8\u9abc"}}],panels:[{name:"basic",label:"\u663e\u793a",content:[{type:ue.PROPERTY_ITEM,label:"ID",items:[{property:"id",type:ce.CONST,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u540d\u5b57",items:[{property:"name",type:ce.STRING,componentType:he.Label,componentProp:{width:200,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u7c7b\u578b",items:[{property:"",type:ce.CONST,componentType:he.Label,componentProp:{value:"\u9aa8\u9abc",width:40,align:"right"}}]},{type:ue.PROPERTY_ITEM,label:"\u7ee7\u627f",items:[{property:"inheritScale",tooltip:"\u7ee7\u627f\u7236\u9aa8\u9abc\u7684\u7f29\u653e",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u7f29\u653e"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"inheritRotation",type:ce.BOOLEAN,componentType:he.BooleanCheck,componentProp:{label:"\u65cb\u8f6c"}}]},{type:ue.PROPERTY_ITEM,label:"\u9aa8\u9abc\u989c\u8272",items:[{property:"clearBoneColor",type:ce.CONST,tooltip:"\u6e05\u9664\u81ea\u5b9a\u4e49\u9aa8\u9abc\u989c\u8272",componentType:he.Button,componentProp:{icon:"icon-delete"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"boneColor",type:ce.COLOR,componentType:he.ColorInput,componentProp:{}}]}]},{name:"constrain",label:"\u7ea6\u675f",content:[{type:ue.PROPERTY_ITEM,label:"IK",items:[{property:"ikAuto",type:ce.CONST,tooltip:"\u5728\u9aa8\u9abc\u672b\u7aef\u751f\u6210\u7ea6\u675f\u76ee\u6807",componentType:he.Button,componentProp:{icon:"icon-target-center-"}},{property:"",type:ce.CONST,componentType:he.Gap,componentProp:{width:10}},{property:"ikTarget",type:ce.CONST,tooltip:"\u8bbe\u7f6eIK\u7ea6\u675f\u76ee\u6807",componentType:he.Button,componentProp:{icon:"icon-target"}}]}]}]},M1=kW.Panel,R1=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:N1,label:"\u5c5e\u6027",icon:"icon-icon_animation_settings"})}return f(n,null,[{key:"toString",value:function(){return"PropertyPanel"}}]),n}(QT),N1=function(e){v(n,e);var t=y(n);function n(e){var r,i;return u(this,n),(i=t.call(this,e)).refs={},i.transforming=!1,i.curArmature=void 0,i.bone=void 0,i.armatureAdapter=new c1,i.boneAdapter=new d1,i.bonesAdapter=new A1,i.slotAdapter=new y1,i.displayAdapter=new w1,i.curAdapter=void 0,i.lastSlot=!1,i.lastSlotDisplayIndex=-1,i.defaultRenderData=(b(r={},I.BONE,me),b(r,I.SLOT,ge),b(r,I.ARMATURE,ye),r),i.openDialog=function(){yf.rename("\u6539\u540d\u5b57","kakaka","\u8bf7\u8f93\u5165\u540d\u5b57",(function(e,t){}),(function(e,t){return e.length>8?"\u592a\u957f\u4e86":""}))},i.onPanelOpen=function(e){var t=Array.isArray(e)?e:[e];i.setState({openPanelNames:t})},i.clickItem=function(e){},i.onAddKey=function(e){i.curAdapter&&i.curAdapter.addKeyProperty(e)},i.getArmatureAnimationList=function(){var e=i.props.store.state,t=i.state.armatureId,n=(i.state.renderData.target,[{label:"\u505c\u6b62",value:0}]),r=e.runtime.dragonbones.armatureMap[t];if(r)for(var o=e.runtime.dragonbones.animationMap,a=r.animations,s=0,l=a.length;s<l;s++){var u=a[s],c=o[u];c&&n.push({label:c.name,value:u})}return n},i.state={openPanelNames:[],lastSelectId:-1},i.init(),i}return f(n,[{key:"store",get:function(){return this.props.store}},{key:"init",value:function(){this.props.eventBus.on(G.SELECT_BONES,this.updateSelectedItems,this),this.props.eventBus.on(B.SELECT_SLOTS,this.updateSelectedItems,this),this.props.eventBus.on(j.SELECT_DISPLAY,this.updateSelectedItems,this),this.props.eventBus.on(Q.UPDATE_FRAME,this.updateMoveFrame,this),this.props.eventBus.on(P.UPDATE_ANIMATED_PROPERTY,this.updateMoveFrame,this),this.props.eventBus.on(G.UPDATE_CACHE_TRANSFORMS,this.updateMoveFrame,this),this.props.eventBus.on(G.UPDATE_LOCAL_TRANSFORMS,this.updateSelectedItems,this),this.props.eventBus.on(L.UPDATE_PROPERTIES,this.forceRender,this),this.props.eventBus.on(D.UPDATE_PROPERTIES,this.updateArmature,this),this.props.eventBus.on(G.UPDATE_PROPERTIES,this.fastRender,this),this.props.eventBus.on(B.UPDATE_PROPERTIES,this.updateSlot,this),this.props.eventBus.on(M.AUTO_KEY,this.onAutoKey,this),this.props.eventBus.on(B.UPDATE_CACHE_PROPERTIES,this.updateSlot,this),this.props.eventBus.on(j.UPDATE_PROPERTIES,this.updateDisplay,this),this.props.eventBus.on(G.ADD_IK,this.forceRender,this),this.props.eventBus.on(G.DELETE_IKS,this.forceRender,this),this.props.eventBus.on(G.UPDATE_IK,this.fastRender,this),this.props.eventBus.on(G.UPDATE_CACHE_IK,this.fastRender,this),this.props.eventBus.on(H.UPDATE_CACHE_FFD,this.fastRender,this),this.props.eventBus.on(gmvc.GHistoryMutation.MERGE_START,this.checkMouseDisable,this),this.props.eventBus.on(gmvc.GHistoryMutation.MERGE_END,this.checkMouseDisableEnd,this),this.props.eventBus.on(W.SWITCH_TOOL,this.fastRender,this),this.props.eventBus.on(H.UPDATE_RIG_BONE,this.fastRender,this),this.props.eventBus.on(H.SELECT_MESH_POINTS,this.fastRender,this),this.props.eventBus.on(W.SELECT_RIGGING_BONE,this.fastRender,this),this.props.eventBus.on(W.SWITCH_MODE,this.forceRender,this),this.props.eventBus.on(D.SELECT_ARMATURE,this.forceRender,this),this.props.eventBus.on(W.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"componentDidMount",value:function(){this.reRender()}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"onAutoKey",value:function(e){var t,n,r,i=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.timelineInfo)||void 0===r?void 0:r.slot,o=!1;if(i)for(var a in i){if(i[a].displayIndex){o=!0;break}}o?this.forceRender():this.fastRender()}},{key:"updateSlot",value:function(e){var t,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.slots,i=!1;if(r)for(var o in r){if(r[o].hasOwnProperty("displayIndex")){i=!0;break}}i?this.forceRender():this.fastRender()}},{key:"updateDisplay",value:function(e){var t,n,r=null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.displays,i=!1;if(r)for(var o in r){if(r[o].type>=0){i=!0;break}}i?this.forceRender():this.fastRender()}},{key:"refresStage",value:function(e){this.reRender(!1)}},{key:"checkMouseDisable",value:function(e){var t=this.props.store.getHistoryMergeName();t&&"color"!==t&&this.setState({mouseDisable:!0})}},{key:"checkMouseDisableEnd",value:function(e){var t=this.props.store.getHistoryMergeName();t&&"color"!==t||this.setState({mouseDisable:!1})}},{key:"onTranformStrart",value:function(){this.transforming=!0}},{key:"onTranformEnd",value:function(){this.transforming=!1,this.refreshAsset()}},{key:"refreshAsset",value:function(){this.transforming,this.reRender()}},{key:"updateMoveFrame",value:function(){this.reRender(!1,!0)}},{key:"updateSelectedItems",value:function(){this.reRender()}},{key:"updateArmature",value:function(e){var t,n,r,i,o,a;void 0!==(null===e||void 0===e||null===(t=e.data)||void 0===t||null===(n=t.data)||void 0===n||null===(r=n.properties)||void 0===r?void 0:r.canvasShow)||void 0!==(null===e||void 0===e||null===(i=e.data)||void 0===i||null===(o=i.data)||void 0===o||null===(a=o.properties)||void 0===a?void 0:a.showCanvasColor)?this.reRender(!0):this.reRender()}},{key:"fastRender",value:function(){var e=this.props.store.state.runtime.editing.editMode===Y.ANIMATION;this.reRender(!1,e)}},{key:"forceRender",value:function(){var e=this.props.store.state.runtime.editing.editMode===Y.ANIMATION;this.reRender(!0,e)}},{key:"getDiffItems",value:function(e,t){for(var n=[],r=0,i=e.panels.length;r<i;r++)for(var o=e.panels[r],a=0,s=o.content.length;a<s;a++){var l=o.content[a];if(l&&l.items)for(var u=0,c=l.items.length;u<c;u++){var h=l.items[u];h.property&&h.componentProp.value!==t.getProperty(h.property)&&n.push(h)}}return n}},{key:"reRenderBtnKey",value:function(e,t){if(e){var n=e,r=this.curAdapter.getKeyState(t);n.state.state!==r&&n.setState({state:r})}}},{key:"getPropertyRenderData",value:function(e){return this.defaultRenderData[e]}},{key:"reRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.store;this.curArmature=n.getCurArmature();var r,i=n.state.runtime.editing.editMode,o=n.state.runtime.editing.selectedBoneIds,a=n.state.runtime.editing.selectedSlotIds,s=n.state.runtime.editing.selectedDisplayId,l=!0,u=o.length+a.length;if(0===u&&(this.curAdapter=this.armatureAdapter,this.armatureAdapter.target=this.curArmature,(r=this.armatureAdapter.getPropertyConfig()).target=this.armatureAdapter,r.targetId=-2),u>1){if(0===a.length&&s<=0&&o.length>1){this.curAdapter=this.bonesAdapter;for(var c=[],h=0,d=o.length;h<d;h++){var f=this.curArmature.bones.map[o[h]];c.push(f)}this.bonesAdapter.armature=this.curArmature,this.bonesAdapter.target=c,(r=this.bonesAdapter.getPropertyConfig()).target=this.bonesAdapter,r.targetId=-1,e=!0}this.lastSlot=!1}else if(o.length>0)this.bone=this.curArmature.bones.map[o[0]],this.bone&&(this.boneAdapter.armature=this.curArmature,this.boneAdapter.target=this.bone,this.curAdapter=this.boneAdapter,(r=this.boneAdapter.getPropertyConfig()).target=this.boneAdapter,r.targetId=this.bone.id),this.lastSlot=!1;else if(a.length>0){var p=this.curArmature.slots.map[a[0]];if(p){if(s>0)for(var v=0,m=p.displays.ids.length;v<m;v++){var g=p.displays.ids[v],y=p.displays.map[g];if(y.id===s){this.curAdapter=this.displayAdapter,this.displayAdapter.target=y,(r=this.displayAdapter.getPropertyConfig())&&(r.target=this.displayAdapter,r.targetId=y.id);break}}else this.curAdapter=this.slotAdapter,this.slotAdapter.target=p,(r=this.slotAdapter.getPropertyConfig())&&(r.target=this.slotAdapter,r.targetId=p.id);if(i===Y.ANIMATION){if(this.lastSlot)this.curAdapter.getProperty("displayIndex")!==this.lastSlotDisplayIndex&&(e=!0);this.lastSlot=!0,this.lastSlotDisplayIndex=this.curAdapter.getProperty("displayIndex")}else this.lastSlot=!1}}if(r){l=r.targetId!==this.state.lastSelectId||e;var b=i===Y.ANIMATION;if(l){for(var _=[],x=0,E=r.panels.length;x<E;x++){var w=r.panels[x];_.push(w.name)}this.setState({renderData:r,armatureId:this.curArmature.id,openPanelNames:_,lastSelectId:r.targetId})}else{for(var T=r.target,S=this.getDiffItems(this.state.renderData,T),k=this.refs,C=0,A=S.length;C<A;C++){var I=S[C],O=I.property;if(k[O]){var P=T.getProperty(O);k[O].value=P,I.componentProp.value=P,b&&k[O+"Key"]&&this.reRenderBtnKey(k[O+"Key"],O)}}if(b&&t)for(var M in this.refs)if(M.endsWith("Key")){var R=M.substr(0,M.length-3);this.reRenderBtnKey(this.refs[M],R)}}}else this.setState({renderData:void 0,lastSelectId:-3})}},{key:"renderPropertyOne",value:function(e,t){var n,r=this.state.renderData.target;if(e.property){var i=r.getProperty(e.property),o=e.mutation;o||(o=this.state.renderData.mutation),e.componentProp.value!==i&&(e.componentProp.value=i),e.componentProp.onChange=this.getValueChangeFunction(this.state.armatureId,r,e.property,o)}if(e.componentProp.continuousStartCallback=this.historyMergeStart.bind(this),e.componentProp.continuousEndCallback=this.historyMergeEnd.bind(this),e.componentProp.context=this,e.componentProp.itemFunName&&(e.componentProp.getItems=r.getFunction(e.componentProp.itemFunName)),n=(0,a.createElement)(a1,Re(Re({},e),{},{key:t,ref:e.property})),this.store.state.runtime.editing.editMode===Y.ANIMATION&&this.curAdapter.hasAnimationKey(e.property)){var s=this.curAdapter.getKeyState(e.property);return(0,ff.jsxs)("div",{className:"animation-property",children:[n,(0,ff.jsx)(l1,{state:s,ref:e.property+"Key",property:e.property,onClick:this.onAddKey})]},t)}return n}},{key:"getPropertyKeyState",value:function(e){if(this.bone){if(gp.boneHasCacheProperty(this.bone,e))return s1.VIRTUAL_KEY;var t=this.store.state.editor.dopesheet.curTime,n=this.store.getCurArmatureCurAnimation();if(n&&gp.hasKeyFrame(n,this.bone.id,e,t))return s1.KEY}return s1.NO_KEY}},{key:"historyMergeStart",value:function(e){this.store.historyBeginMerge(e)}},{key:"historyMergeEnd",value:function(e){this.store.historyEndMerge(e)}},{key:"getValueChangeFunction",value:function(e,t,n,r){return function(e){t.setProperty(n,e)}}},{key:"getVisibleValue",value:function(e){for(var t=e.split(","),n=0;n<t.length;n++){var r=t[n];if(r.startsWith("!")){if(this.state.renderData.target.getProperty(r.substr(1)))return!1}else if(!this.state.renderData.target.getProperty(r))return!1}return!0}},{key:"renderPropertyItem",value:function(e,t){var n=this;if(e){if(e.type===ue.SPLIT_LINE)return(0,ff.jsx)("div",{className:"property-split"},t);if(e.visible)if(!this.getVisibleValue(e.visible))return null;return(0,ff.jsxs)("div",{className:"property-item",children:[e.label&&(0,ff.jsx)("span",{className:"property-item-label",children:e.label}),(0,ff.jsx)("div",{className:"property-item-content",children:e.items.map((function(e,t){return n.renderPropertyOne(e,t)}))})]},t)}}},{key:"renderOperations",value:function(e){var t=this;return(0,ff.jsx)("div",{className:"property-operations",children:e.map((function(e,n){return(0,ff.jsx)("div",{className:"property-operation",children:"button"===e.type&&(0,ff.jsx)(S0,Re(Re({},e.componentProperties),{},{value:1,onChange:t.getValueChangeFunction(t.state.armatureId,t.curAdapter,e.name,"")}))},e.name)}))})}},{key:"renderPanels",value:function(e){var t=this;if(e&&e.panels){var n=e.panels,r=this.state.openPanelNames;return(0,ff.jsxs)("div",{className:"property-area",children:[e.operations&&this.renderOperations(e.operations),(0,ff.jsx)("div",{className:"property-panel-box"+(this.state.mouseDisable||this.state.disabled?" panel-mouse-forbid panel-disabled":""),children:(0,ff.jsx)(kW,{activeKey:r,onChange:this.onPanelOpen,children:n.map((function(e,n){return(0,ff.jsx)(M1,{header:e.label,children:e.content.map((function(e,n){return t.renderPropertyItem(e,n)}))},e.name)}))})})]})}}},{key:"getTestItems",value:function(){return[{label:"aa1",value:"aa1"},{label:"bb2",value:"bb2"},{label:"cc3",value:"cc3"}]}},{key:"render",value:function(){var e=this.state.renderData,t=this.renderPanels(e);return(0,ff.jsx)("div",{className:"property-panel",children:t})}}]),n}(a.Component),D1=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.getIcon=function(e){switch(e.data.type){case I.SLOT:return(0,ff.jsx)(KT,{type:"icon-image3"});case I.BONE:return(0,ff.jsx)(KT,{type:"icon-bone"});case I.DISPLAY:var t=e.data.data;if(t)switch(t.type){case T.IMAGE:return(0,ff.jsx)(KT,{type:"icon-image"});case T.BOUND_BOX:return(0,ff.jsx)(KT,{type:"icon-sharpicons_rectangular-shape"});case T.ARMATURE:return(0,ff.jsx)(KT,{type:"icon-man"});case T.MESH:return(0,ff.jsx)(KT,{type:"icon-mesh"})}}},r.onDoubleClick=function(e){r.props.disabled},r.onDragStart=function(e){r.props.disabled||(e.stopPropagation(),r.props.dragStartCallback&&r.props.dragStartCallback(e,r.props.data))},r.onDragEnter=function(e){if(!r.props.disabled&&(e.stopPropagation(),r.props.dragEnterCallback)){var t=r.props.dragEnterCallback(e,r.props.data);r.setState({canDrop:t})}},r.onDragLeave=function(e){r.props.disabled||(e.stopPropagation(),r.props.dragLeaveCallback&&r.props.dragLeaveCallback(e,r.props.data),r.setState({canDrop:!1}))},r.onDrop=function(e){r.props.disabled||(e.stopPropagation(),r.props.dropCallback&&r.props.dropCallback(e,r.props.data),r.setState({canDrop:!1}))},r.state={canDrop:!1},r}return f(n,[{key:"render",value:function(){var e=this.props.data;return(0,ff.jsxs)("div",{className:"outline-item"+(this.props.selected?" selected":"")+(this.props.over?" over":"")+(this.state.canDrop?" drop":""),ref:"outlineItem","data-draggable":this.props.disabled?"false":"true",onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,children:[this.getIcon(e),(0,ff.jsx)("div",{className:"item-name",children:e.name}),(e.data.type===I.BONE||e.data.type===I.SLOT)&&(0,ff.jsxs)("span",{children:[(0,ff.jsx)(rI,{icon:"icon-dot1",selectedIcon:"icon-eye",changeCallback:this.props.getVisibleOneCallback,selected:this.props.hidden||!1,disabled:this.props.disabled,toggle:!0}),(0,ff.jsx)(rI,{icon:"icon-dot1",selectedIcon:"icon-lock",changeCallback:this.props.getLockOneCallback,selected:this.props.locked||!1,disabled:this.props.disabled,toggle:!0})]})]})}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.outlineItem)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.outlineItem)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.outlineItem)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),L1=function(e){v(n,e);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).refs={},e.getIcon=function(e){if(!e.children)return(0,ff.jsx)(KT,{type:"icon-code"})},e.onDoubleClick=function(e){},e.onDragStart=function(e){},e.onDragEnter=function(e){},e}return f(n,[{key:"render",value:function(){var e=this.props.data;return(0,ff.jsxs)("div",{className:"outline-item",ref:"outlineHead","data-draggable":!1,onDoubleClick:this.onDoubleClick,onDragStart:this.onDragStart,children:[(0,ff.jsx)("div",{children:e.name}),(0,ff.jsx)(rI,{icon:"icon-unlock",selectedIcon:"icon-lock",changeCallback:this.props.getLockOneCallback,selected:this.props.locked,disabled:this.props.disabled,toggle:!0}),(0,ff.jsx)(rI,{icon:"icon-eye1",selectedIcon:"icon-eye",changeCallback:this.props.getVisibleOneCallback,selected:this.props.hidden,disabled:this.props.disabled,toggle:!0})]})}},{key:"componentDidMount",value:function(){var e,t;null===(e=this.refs.outlineHead)||void 0===e||e.addEventListener("dragstart",this.onDragStart),null===(t=this.refs.outlineHead)||void 0===t||t.addEventListener("dragenter",this.onDragEnter)}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.refs.outlineHead)||void 0===e||e.removeEventListener("dragstart",this.onDragStart)}}]),n}(a.Component),F1=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:B1,label:"\u5927\u7eb2",icon:"icon-LinkOutline"})}return f(n,[{key:"resize",value:function(e,t){this.eventBus.dispatchEventWidth("outlineResize",{})}}],[{key:"toString",value:function(){return"OutlinePanel"}}]),n}(QT),B1=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).dragData=void 0,r.refs={},r.onItemOut=function(e){r.props.store.commit(G.OVER_BONE,0),r.props.store.commit(B.OVER_SLOT,0)},r.onItemOver=function(e){var t,n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.type,i=null===e||void 0===e?void 0:e.id;switch(n){case I.BONE:r.props.store.commit(G.OVER_BONE,i);break;case I.SLOT:r.props.store.commit(B.OVER_SLOT,i);break;case I.DISPLAY:var o=r.props.store.getCurArmature(),a=PT.getSlotByDisplayId(o,i);r.props.store.commit(B.OVER_SLOT,a.id)}},r.onItemSelect=function(e){var t;if(!r.props.disabled&&!r.state.disabled){var n=null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.type,i=null===e||void 0===e?void 0:e.id;switch(r.props.store.historyBeginMerge(),n){case I.BONE:r.props.store.commit(B.SELECT_SLOTS,[]),r.props.store.commit(G.SELECT_BONES,[i]);break;case I.SLOT:r.props.store.commit(G.SELECT_BONES,[]),r.props.store.commit(B.SELECT_SLOTS,[i]);break;case I.DISPLAY:var o=r.props.store.getCurArmature(),a=PT.getSlotByDisplayId(o,i);r.props.store.commit(G.SELECT_BONES,[]),r.props.store.commit(j.SELECT_DISPLAY,{slotId:a.id,displayId:i})}r.props.store.historyEndMerge()}},r.getLockOneCallback=function(e){return function(t){if(!r.props.disabled&&!r.state.disabled){var n=r.props.store.state.runtime.editing.lockBoneSlotIds;t?r.props.store.commit(X.LOCK_ITEMS,r.arrayAdd(n,e)):r.props.store.commit(X.LOCK_ITEMS,r.arrayRemove(n,e))}}},r.getVisibleOneCallback=function(e){return function(t){if(!r.props.disabled&&!r.state.disabled){var n=r.props.store.state.runtime.editing.hideBoneSlotIds;t?r.props.store.commit(X.HIDE_ITEMS,r.arrayAdd(n,e)):r.props.store.commit(X.HIDE_ITEMS,r.arrayRemove(n,e))}}},r.onLockAll=function(e){if(!r.state.disabled&&!r.props.disabled)if(e){var t=r.props.store.getCurArmature().bones.ids.concat(r.props.store.getCurArmature().slots.ids);r.props.store.commit(X.LOCK_ITEMS,t)}else r.props.store.commit(X.LOCK_ITEMS,[])},r.onVisibleAll=function(e){if(!r.state.disabled&&!r.props.disabled)if(e){var t=r.props.store.getCurArmature().bones.ids.concat(r.props.store.getCurArmature().slots.ids);r.props.store.commit(X.HIDE_ITEMS,t)}else r.props.store.commit(X.HIDE_ITEMS,[])},r.onSortEnd=function(e){e.oldIndex,e.newIndex},r.onSearch=function(){},r.onOverItem=function(e){},r.onOutItem=function(e){},r.onClickItem=function(e){},r.onDragEnter=function(e,t){if(!r.props.disabled&&!r.state.disabled)return r.checkCanDrop(r.dragData,t)},r.onDragLeave=function(e,t){!r.props.disabled&&r.state.disabled},r.onDragStart=function(e,t){r.props.disabled||r.state.disabled||(r.dragData=t)},r.onDrop=function(e,t){var n,i,o;if(!r.props.disabled&&!r.state.disabled&&r.checkCanDrop(r.dragData,t))if((null===(n=r.dragData.data)||void 0===n?void 0:n.type)===I.DISPLAY&&(null===(i=t.data)||void 0===i?void 0:i.type)===I.SLOT){var a=r.props.store.getCurArmature(),s=t.data.data,l=r.dragData.data.data,u=PT.getSlotByDisplayId(a,l.id);r.props.store.dispatch(z.SET_PARENT,{armatureId:a.id,displays:[{slotId:u.id,displayId:l.id,parentId:s.id}]})}else if((null===(o=t.data)||void 0===o?void 0:o.type)===I.BONE){var c,h=r.props.store.getCurArmature();if((null===(c=r.dragData.data)||void 0===c?void 0:c.type)===I.SLOT){var d=r.dragData.data.data,f=t.data.data;r.props.store.dispatch(F.SET_PARENT,{armatureId:h.id,slotIds:[d.id],parentId:f.id})}else{var p=r.dragData.data.data,v=t.data.data;r.props.store.dispatch(V.SET_PARENT,{armatureId:h.id,boneIds:[p.id],parentId:v.id})}}},r.checkCanDrop=function(e,t){var n,i,o,a,s;if((null===(n=e.data)||void 0===n?void 0:n.type)===I.DISPLAY&&(null===(i=t.data)||void 0===i?void 0:i.type)===I.SLOT)return!t.data.data.displays.map[e.id];if((null===(o=e.data)||void 0===o?void 0:o.type)===I.DISPLAY)return!1;if((null===(a=t.data)||void 0===a?void 0:a.type)!==I.BONE)return!1;if((null===(s=e.data)||void 0===s?void 0:s.type)===I.SLOT){var l=t.data.data;return e.data.data.parentId!==l.id}var u=t.data.data,c=e.data.data;if(c.parentId===u.id)return!1;var h=r.props.store.getCurArmature();return!PT.isDescendantBone(h,c.id,u.id)};var i=r.getTreeData(),o=r.props.store.state.editor.over.overBone||r.props.store.state.editor.over.overSlotId,a=r.props.store.state.runtime.editing.selectedBoneIds.concat(r.props.store.state.runtime.editing.selectedSlotIds),s=n.getAllItemIds(i);return r.state={children:i,overId:o,selectedIds:a,noShowIds:r.getNoShowIds(),lockIds:r.getLockIds(),openIds:s,disabled:!1},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(D.SELECT_ARMATURE,this.refreshArmature,this),this.props.eventBus.on(G.SELECT_BONES,this.refreshSelect,this),this.props.eventBus.on(B.SELECT_SLOTS,this.refreshSelect,this),this.props.eventBus.on(j.SELECT_DISPLAY,this.refreshSelect,this),this.props.eventBus.on(G.OVER_BONE,this.refreshOver,this),this.props.eventBus.on(B.OVER_SLOT,this.refreshOver,this),this.props.eventBus.on(X.HIDE_ITEMS,this.refreshVisible,this),this.props.eventBus.on(X.LOCK_ITEMS,this.refreshLock,this),this.props.eventBus.on(D.UPDATE_PROPERTIES,this.refreshChildren,this),this.props.eventBus.on(G.UPDATE_PROPERTIES,this.refreshChildren,this),this.props.eventBus.on(G.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(G.ADD_BONE,this.refreshChildren,this),this.props.eventBus.on(G.DELETE_BONES,this.refreshChildren,this),this.props.eventBus.on(G.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(B.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(j.SET_PARENT,this.refreshChildren,this),this.props.eventBus.on(B.ADD_SLOT,this.refreshChildren,this),this.props.eventBus.on(B.DELETE_SLOTS,this.refreshChildren,this),this.props.eventBus.on(W.SWITCH_TOOL,this.onSwitchTool,this),this.props.eventBus.on("outlineResize",this.checkScroll,this)}},{key:"componentDidUpdate",value:function(e,t,n){this.checkScroll()}},{key:"checkScroll",value:function(){if(this.refs.outlineRef){var e=this.refs.outlineRef.getElementsByClassName("v-tree");if(e&&e[0]){var t=e[0],n=!1,r=(n=t.scrollHeight>t.clientHeight)?"outline-armature-scroll":"outline-armature";return this.refs.armatureRef.className=r,n}}}},{key:"getBoneChildren",value:function(e,t,n){for(var r=[],i=0,o=t.slots.ids.length;i<o;i++){var a=t.slots.ids[i],s=t.slots.map[a];if(s.parentId===e.id){var l={id:s.id,name:s.name,data:{type:I.SLOT,data:s},children:[]};if(!n||1!==s.displays.ids.length)for(var u=0,c=s.displays.ids.length;u<c;u++){var h=s.displays.ids[u],d=s.displays.map[h],f={id:d.id,name:d.name,data:{type:I.DISPLAY,data:d}};l.children.push(f)}r.push(l)}}for(var p=0,v=t.bones.ids.length;p<v;p++){var m=t.bones.ids[p],g=t.bones.map[m];if(g.parentId===e.id){var y={id:g.id,name:g.name,data:{type:I.BONE,data:g},children:this.getBoneChildren(g,t,n)};r.push(y)}}return r}},{key:"getTreeData",value:function(){var e=this.props.store.getCurArmature(),t=PT.getRootBone(e),n={id:t.id,name:t.name,data:{type:I.BONE,data:t},children:[]};return n.children=this.getBoneChildren(t,e,!1),[n]}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"refreshChildren",value:function(){var e=this.getTreeData();this.setState({children:e})}},{key:"refreshLock",value:function(){this.setState({lockIds:this.getLockIds()})}},{key:"refreshVisible",value:function(){this.setState({noShowIds:this.getNoShowIds()})}},{key:"refreshArmature",value:function(){var e=this.getTreeData(),t=n.getAllItemIds(e);this.setState({children:e,openIds:t})}},{key:"refreshSelect",value:function(){var e=this.props.store.state.runtime.editing.selectedBoneIds.concat(this.props.store.state.runtime.editing.selectedSlotIds);this.props.store.state.runtime.editing.selectedDisplayId>0&&e.push(this.props.store.state.runtime.editing.selectedDisplayId),this.setState({selectedIds:e})}},{key:"refreshOver",value:function(){var e=this.props.store.state.editor.over.overBone||this.props.store.state.editor.over.overSlotId;this.setState({overId:e})}},{key:"getNoShowIds",value:function(){return this.props.store.state.runtime.editing.hideBoneSlotIds}},{key:"getLockIds",value:function(){return this.props.store.state.runtime.editing.lockBoneSlotIds}},{key:"isLocked",value:function(e){return this.props.store.state.runtime.editing.lockBoneSlotIds.indexOf(e)>=0}},{key:"isNoshow",value:function(e){return this.props.store.state.runtime.editing.hideBoneSlotIds.indexOf(e)>=0}},{key:"isLockAll",value:function(){var e=this.props.store.state.runtime.editing.lockBoneSlotIds;return this.props.store.getCurArmature().bones.ids.concat(this.props.store.getCurArmature().slots.ids).length===e.length}},{key:"isNoshowAll",value:function(){var e=this.props.store.state.runtime.editing.hideBoneSlotIds;return this.props.store.getCurArmature().bones.ids.concat(this.props.store.getCurArmature().slots.ids).length===e.length}},{key:"isSelected",value:function(e){var t=this.state.selectedIds;return!!t&&(t&&t.indexOf(e)>=0)}},{key:"isOver",value:function(e){return this.state.overId===e}},{key:"getClassName",value:function(e){var t=["outline-item"];return this.isSelected(e)?t.push("selected"):this.isOver(e)&&t.push("over"),t.join(" ")}},{key:"render",value:function(){var e=this,t=this.props.store.getCurArmature();t.id,t.name,I.ARMATURE;return(0,ff.jsxs)("div",{className:"outline"+(this.state.disabled?" panel-disabled":""),ref:"outlineRef",children:[(0,ff.jsxs)("div",{className:"header",children:[(0,ff.jsx)("input",{className:"search",onChange:this.onSearch}),(0,ff.jsx)("span",{children:"\u641c\u7d22"})]}),(0,ff.jsx)("div",{className:"outline-armature",ref:"armatureRef",children:(0,ff.jsx)(L1,{data:t,store:this.props.store,eventBus:this.props.eventBus,locked:this.isLockAll(),hidden:this.isNoshowAll(),getLockOneCallback:this.onLockAll,getVisibleOneCallback:this.onVisibleAll,disabled:this.state.disabled})}),(0,ff.jsx)(ZT,{value:this.state.children,openAll:!0,openIds:this.state.openIds,onItemOut:this.onItemOut,onItemOver:this.onItemOver,onItemSelect:this.onItemSelect,foldByIcon:!0,selectedIds:this.state.selectedIds,gap:12,onlyView:this.state.disabled,children:function(t){return(0,ff.jsx)(D1,{data:t,store:e.props.store,eventBus:e.props.eventBus,locked:e.state.lockIds&&e.state.lockIds.includes(t.id),hidden:e.state.noShowIds&&e.state.noShowIds.includes(t.id),dragEnterCallback:e.onDragEnter,dragLeaveCallback:e.onDragLeave,dragStartCallback:e.onDragStart,dropCallback:e.onDrop,getLockOneCallback:e.getLockOneCallback(t.id),getVisibleOneCallback:e.getVisibleOneCallback(t.id),over:e.state.overId===t.id,selected:e.state.selectedIds.includes(t.id),disabled:e.state.disabled})}})]})}},{key:"arrayRemove",value:function(e,t){return e.filter((function(e){return e!==t}))}},{key:"arrayAdd",value:function(e,t){return e.indexOf(t)<0&&e.push(t),e}}],[{key:"getAllItemIds",value:function(e){var t=[];if(e)for(var n=0,r=e.length;n<r;n++){var i=e[n];this.getItemIds(i,t)}return t}},{key:"getItemIds",value:function(e,t){if(t.push(e.id),e.children)for(var n=0,r=e.children.length;n<r;n++){var i=e.children[n];this.getItemIds(i,t)}}}]),n}(a.Component);function U1(e,t,n){return(e=e.slice()).splice(n<0?e.length+n:n,0,e.splice(t,1)[0]),e}var H1={end:["touchend","touchcancel","mouseup"],move:["touchmove","mousemove"],start:["touchstart","mousedown"]},j1=function(){if("undefined"===typeof window||"undefined"===typeof document)return"";var e=window.getComputedStyle(document.documentElement,"")||["-moz-hidden-iframe"],t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return"ms"===t?"ms":t&&t.length?t[0].toUpperCase()+t.substr(1):""}();function z1(e,t){Object.keys(t).forEach((function(n){e.style[n]=t[n]}))}function V1(e,t){e.style["".concat(j1,"Transform")]=null==t?"":"translate3d(".concat(t.x,"px,").concat(t.y,"px,0)")}function G1(e,t){e.style["".concat(j1,"TransitionDuration")]=null==t?"":"".concat(t,"ms")}function W1(e,t){for(;e;){if(t(e))return e;e=e.parentNode}return null}function X1(e,t,n){return Math.max(e,Math.min(n,t))}function Y1(e){return"px"===e.substr(-2)?parseFloat(e):0}function K1(e){var t=window.getComputedStyle(e);return{bottom:Y1(t.marginBottom),left:Y1(t.marginLeft),right:Y1(t.marginRight),top:Y1(t.marginTop)}}function q1(e,t){var n=t.displayName||t.name;return n?"".concat(e,"(").concat(n,")"):e}function Z1(e,t){var n=e.getBoundingClientRect();return{top:n.top+t.top,left:n.left+t.left}}function $1(e){return e.touches&&e.touches.length?{x:e.touches[0].pageX,y:e.touches[0].pageY}:e.changedTouches&&e.changedTouches.length?{x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY}:{x:e.pageX,y:e.pageY}}function Q1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{left:0,top:0};if(e){var r={left:n.left+e.offsetLeft,top:n.top+e.offsetTop};return e.parentNode===t?r:Q1(e.parentNode,t,r)}}function J1(e){var t=e.lockOffset,n=e.width,r=e.height,i=t,o=t,a="px";if("string"===typeof t){var s=/^[+-]?\d*(?:\.\d*)?(px|%)$/.exec(t);i=parseFloat(t),o=parseFloat(t),a=s[1]}return"%"===a&&(i=i*n/100,o=o*r/100),{x:i,y:o}}function e2(e){return e instanceof HTMLElement?function(e){var t=window.getComputedStyle(e),n=/(auto|scroll)/;return["overflow","overflowX","overflowY"].find((function(e){return n.test(t[e])}))}(e)?e:e2(e.parentNode):null}function t2(e){var t=window.getComputedStyle(e);return"grid"===t.display?{x:Y1(t.gridColumnGap),y:Y1(t.gridRowGap)}:{x:0,y:0}}var n2=27,r2=32,i2=37,o2=38,a2=39,s2=40,l2={Anchor:"A",Button:"BUTTON",Canvas:"CANVAS",Input:"INPUT",Option:"OPTION",Textarea:"TEXTAREA",Select:"SELECT"};function u2(e){var t="input, textarea, select, canvas, [contenteditable]",n=e.querySelectorAll(t),r=e.cloneNode(!0);return Pe(r.querySelectorAll(t)).forEach((function(e,t){("file"!==e.type&&(e.value=n[t].value),"radio"===e.type&&e.name&&(e.name="__sortableClone__".concat(e.name)),e.tagName===l2.Canvas&&n[t].width>0&&n[t].height>0)&&e.getContext("2d").drawImage(n[t],0,0)})),r}function c2(e){return null!=e.sortableHandle}var h2=function(){function e(t,n){u(this,e),this.container=void 0,this.onScrollCallback=void 0,this.interval=void 0,this.isAutoScrolling=void 0,this.container=t,this.onScrollCallback=n}return f(e,[{key:"clear",value:function(){null!=this.interval&&(clearInterval(this.interval),this.interval=null)}},{key:"update",value:function(e){var t=this,n=e.translate,r=e.minTranslate,i=e.maxTranslate,o=e.width,a=e.height,s={x:0,y:0},l={x:1,y:1},u=10,c=10,h=this.container,d=h.scrollTop,f=h.scrollLeft,p=h.scrollHeight,v=h.scrollWidth,m=0===d,g=p-d-h.clientHeight===0,y=0===f,b=v-f-h.clientWidth===0;n.y>=i.y-a/2&&!g?(s.y=1,l.y=c*Math.abs((i.y-a/2-n.y)/a)):n.x>=i.x-o/2&&!b?(s.x=1,l.x=u*Math.abs((i.x-o/2-n.x)/o)):n.y<=r.y+a/2&&!m?(s.y=-1,l.y=c*Math.abs((n.y-a/2-r.y)/a)):n.x<=r.x+o/2&&!y&&(s.x=-1,l.x=u*Math.abs((n.x-o/2-r.x)/o)),this.interval&&(this.clear(),this.isAutoScrolling=!1),0===s.x&&0===s.y||(this.interval=setInterval((function(){t.isAutoScrolling=!0;var e={left:l.x*s.x,top:l.y*s.y};t.container.scrollTop+=e.top,t.container.scrollLeft+=e.left,t.onScrollCallback(e)}),5))}}]),e}();var d2={lift:[r2],drop:[r2],cancel:[n2],up:[o2,i2],down:[s2,a2]},f2={axis:"y",disableAutoscroll:!1,distance:0,getHelperDimensions:function(e){var t=e.node;return{height:t.offsetHeight,width:t.offsetWidth}},hideSortableGhost:!0,lockOffset:"50%",lockToContainerEdges:!1,pressDelay:0,pressThreshold:5,keyCodes:d2,shouldCancelStart:function(e){return-1!==[l2.Input,l2.Textarea,l2.Select,l2.Option,l2.Button].indexOf(e.target.tagName)||!!W1(e.target,(function(e){return"true"===e.contentEditable}))},transitionDuration:300,useWindowAsScrollContainer:!1};var p2=function(){function e(){u(this,e),this.refs={},this.active=void 0}return f(e,[{key:"add",value:function(e,t){this.refs[e]||(this.refs[e]=[]),this.refs[e].push(t)}},{key:"remove",value:function(e,t){var n=this.getIndex(e,t);-1!==n&&this.refs[e].splice(n,1)}},{key:"isActive",value:function(){return this.active}},{key:"getActive",value:function(){var e=this;return this.refs[this.active.collection].find((function(t){return t.node.sortableInfo.index==e.active.index}))}},{key:"getIndex",value:function(e,t){return this.refs[e].indexOf(t)}},{key:"getOrderedRefs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.active.collection;return this.refs[e].sort(v2)}}]),e}();function v2(e,t){return e.node.sortableInfo.index-t.node.sortableInfo.index}function m2(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=function(t){v(i,t);var r=y(i);function i(e){var t;return u(this,i),(t=r.call(this,e)).manager=void 0,t.events=void 0,t.container=void 0,t.document=void 0,t._window=void 0,t.scrollContainer=void 0,t._touched=!1,t._pos=void 0,t._delta=void 0,t.pressTimer=void 0,t.cancelTimer=void 0,t.node=void 0,t.margin=void 0,t.width=void 0,t.height=void 0,t.marginOffset=void 0,t.boundingClientRect=void 0,t.containerBoundingRect=void 0,t.index=void 0,t.newIndex=void 0,t._axis=void 0,t.offsetEdge=void 0,t.initialOffset=void 0,t.initialScroll=void 0,t.initialWindowScroll=void 0,t.helper=void 0,t.sortableGhost=void 0,t.translate=void 0,t.minTranslate=void 0,t.maxTranslate=void 0,t.listenerNode=void 0,t.autoscrollInterval=void 0,t.isAutoScrolling=void 0,t.sorting=!1,t.sortingIndex=null,t.contentWindow=void 0,t.autoScroller=void 0,t.touched=!1,t.position=void 0,t._awaitingUpdateBeforeSortStart=void 0,t.delta=void 0,t.gridGap=void 0,t.axis=void 0,t.prevIndex=void 0,t.initialFocusedNode=void 0,t._helpNodeNumber=0,t.handleStart=function(e){if(!t.props.disabled){var n=t.props,r=n.distance,i=n.shouldCancelStart;if(2!==e.button&&!i(e)){t.touched=!0,t.position=$1(e);var o=W1(e.target,(function(e){return null!=e.sortableInfo}));if(o&&o.sortableInfo&&t.nodeIsChild(o)&&!t.state.sorting){var a=t.props.useDragHandle,s=o.sortableInfo,l=s.index,u=s.collection;if(s.disabled)return;if(a&&!W1(e.target,c2))return;t.manager.active={collection:u,index:l},function(e){return e.touches&&e.touches.length||e.changedTouches&&e.changedTouches.length}(e)||e.target.tagName!==l2.Anchor||e.preventDefault(),r||(0===t.props.pressDelay?t.handlePress(e):t.pressTimer=setTimeout((function(){t.handlePress(e)}),t.props.pressDelay))}}}},t.nodeIsChild=function(e){return e.sortableInfo.manager===t.manager},t.handleMove=function(e){if(!t.props.disabled){var n=t.props,r=n.distance,i=n.pressThreshold;if(0===t._helpNodeNumber&&!t.state.sorting&&t.touched&&!t._awaitingUpdateBeforeSortStart){var o=$1(e),a={x:t.position.x-o.x,y:t.position.y-o.y},s=Math.abs(a.x)+Math.abs(a.y);t.delta=a,r||i&&!(s>=i)?r&&s>=r&&t.manager.isActive()&&t.handlePress(e):(clearTimeout(t.cancelTimer),t.cancelTimer=setTimeout(t.cancel,0))}}},t.handleEnd=function(){t.props.disabled||(t.touched=!1,t.cancel())},t.cancel=function(){var e=t.props.distance;t.state.sorting||(e||clearTimeout(t.pressTimer),t.manager.active=null)},t.handlePress=function(){var e=Ee(_e().mark((function e(n){var r,i,o,a,s,l,u,c,h,d,f,p,v,m,g,y,b,_,x,E,w,T,S,k,C;return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.props.disabled){e.next=2;break}return e.abrupt("return");case 2:if(!(r=t.manager.getActive())){e.next=50;break}if(i=t.props,o=i.axis,a=i.getHelperDimensions,s=i.helperClass,l=i.hideSortableGhost,u=i.updateBeforeSortStart,c=i.onSortStart,h=i.useWindowAsScrollContainer,d=r.node,f=r.collection,p=t.manager.isKeySorting,"function"!==typeof u){e.next=16;break}return t._awaitingUpdateBeforeSortStart=!0,e.prev=9,v=d.sortableInfo.index,e.next=13,u({collection:f,index:v,node:d,isKeySorting:p},n);case 13:return e.prev=13,t._awaitingUpdateBeforeSortStart=!1,e.finish(13);case 16:m=d.sortableInfo.index,g=K1(d),y=t2(t.container),b=t.scrollContainer.getBoundingClientRect(),_=a({index:m,node:d,collection:f}),t.node=d,t.margin=g,t.gridGap=y,t.width=_.width,t.height=_.height,t.marginOffset={x:t.margin.left+t.margin.right+t.gridGap.x,y:Math.max(t.margin.top,t.margin.bottom,t.gridGap.y)},t.boundingClientRect=d.getBoundingClientRect(),t.containerBoundingRect=b,t.index=m,t.newIndex=m,t.axis={x:o.indexOf("x")>=0,y:o.indexOf("y")>=0},t.offsetEdge=Q1(d,t.container),t.initialOffset=$1(p?Re(Re({},n),{},{pageX:t.boundingClientRect.left,pageY:t.boundingClientRect.top}):n),t.initialScroll={left:t.scrollContainer.scrollLeft,top:t.scrollContainer.scrollTop},t.initialWindowScroll={left:window.pageXOffset,top:window.pageYOffset},t.helper=t.helperContainer.appendChild(u2(d)),t._helpNodeNumber++,z1(t.helper,{boxSizing:"border-box",height:"".concat(t.height,"px"),left:"".concat(t.boundingClientRect.left-g.left,"px"),pointerEvents:"none",position:"fixed",top:"".concat(t.boundingClientRect.top-g.top,"px"),width:"".concat(t.width,"px")}),p&&t.helper.focus(),l&&(t.sortableGhost=d,z1(d,{opacity:0,visibility:"hidden"})),t.minTranslate={},t.maxTranslate={},p?(x=h?{top:0,left:0,width:t.contentWindow.innerWidth,height:t.contentWindow.innerHeight}:t.containerBoundingRect,E=x.top,w=x.left,T=x.width,S=x.height,k=E+S,C=w+T,t.axis.x&&(t.minTranslate.x=w-t.boundingClientRect.left,t.maxTranslate.x=C-(t.boundingClientRect.left+t.width)),t.axis.y&&(t.minTranslate.y=E-t.boundingClientRect.top,t.maxTranslate.y=k-(t.boundingClientRect.top+t.height))):(t.axis.x&&(t.minTranslate.x=(h?0:b.left)-t.boundingClientRect.left-t.width/2,t.maxTranslate.x=(h?t.contentWindow.innerWidth:b.left+b.width)-t.boundingClientRect.left-t.width/2),t.axis.y&&(t.minTranslate.y=(h?0:b.top)-t.boundingClientRect.top-t.height/2,t.maxTranslate.y=(h?t.contentWindow.innerHeight:b.top+b.height)-t.boundingClientRect.top-t.height/2)),s&&s.split(" ").forEach((function(e){return t.helper.classList.add(e)})),t.listenerNode=n.touches?d:t.contentWindow,p?(t.listenerNode.addEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.addEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.addEventListener("keydown",t.handleKeyDown)):(H1.move.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortMove,!1)})),H1.end.forEach((function(e){return t.listenerNode.addEventListener(e,t.handleSortEnd,!1)}))),t.setState({sorting:!0,sortingIndex:m}),c&&c({node:d,index:m,collection:f,isKeySorting:p,nodes:t.manager.getOrderedRefs(),helper:t.helper},n),p&&t.keyMove(0);case 50:case"end":return e.stop()}}),e,null,[[9,,13,16]])})));return function(t){return e.apply(this,arguments)}}(),t.handleSortMove=function(e){var n=t.props.onSortMove;"function"===typeof e.preventDefault&&e.preventDefault(),t.updateHelperPosition(e),t.animateNodes(),t.autoscroll(),n&&n(e)},t.handleSortEnd=function(e){var n=t.props,r=n.hideSortableGhost,i=n.onSortEnd,o=t.manager,a=o.active.collection,s=o.isKeySorting,l=t.manager.getOrderedRefs();t.listenerNode&&(s?(t.listenerNode.removeEventListener("wheel",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("mousedown",t.handleKeyEnd,!0),t.listenerNode.removeEventListener("keydown",t.handleKeyDown)):(H1.move.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortMove)})),H1.end.forEach((function(e){return t.listenerNode.removeEventListener(e,t.handleSortEnd)})))),t.helper.parentNode.removeChild(t.helper),t._helpNodeNumber--,r&&t.sortableGhost&&z1(t.sortableGhost,{opacity:"",visibility:""});for(var u=0,c=l.length;u<c;u++){var h=l[u],d=h.node;h.edgeOffset=null,h.boundingClientRect=null,V1(d,null),G1(d,null),h.translate=null}t.autoScroller.clear(),t.manager.active=null,t.manager.isKeySorting=!1,t.setState({sorting:!1,sortingIndex:null}),"function"===typeof i&&i({collection:a,newIndex:t.newIndex,oldIndex:t.index,isKeySorting:s,nodes:l},e),t.touched=!1},t.autoscroll=function(){var e=t.props.disableAutoscroll,n=t.manager.isKeySorting;if(e)t.autoScroller.clear();else{if(n){var r=Re({},t.translate),i=0,o=0;return t.axis.x&&(r.x=Math.min(t.maxTranslate.x,Math.max(t.minTranslate.x,t.translate.x)),i=t.translate.x-r.x),t.axis.y&&(r.y=Math.min(t.maxTranslate.y,Math.max(t.minTranslate.y,t.translate.y)),o=t.translate.y-r.y),t.translate=r,V1(t.helper,t.translate),t.scrollContainer.scrollLeft+=i,void(t.scrollContainer.scrollTop+=o)}t.autoScroller.update({height:t.height,maxTranslate:t.maxTranslate,minTranslate:t.minTranslate,translate:t.translate,width:t.width})}},t.onAutoScroll=function(e){t.translate.x+=e.left,t.translate.y+=e.top,t.animateNodes()},t.handleKeyDown=function(e){var n=e.keyCode,r=t.props,i=r.shouldCancelStart,o=r.keyCodes,a=void 0===o?{}:o,s=Re(Re({},d2),a);t.manager.active&&!t.manager.isKeySorting||!(t.manager.active||s.lift.includes(n)&&!i(e)&&t.isValidSortingTarget(e))||(e.stopPropagation(),e.preventDefault(),s.lift.includes(n)&&!t.manager.active?t.keyLift(e):s.drop.includes(n)&&t.manager.active?t.keyDrop(e):s.cancel.includes(n)?(t.newIndex=t.manager.active.index,t.keyDrop(e)):s.up.includes(n)?t.keyMove(-1):s.down.includes(n)&&t.keyMove(1))},t.keyLift=function(e){var n=e.target,r=W1(n,(function(e){return null!=e.sortableInfo})).sortableInfo,i=r.index,o=r.collection;t.initialFocusedNode=n,t.manager.isKeySorting=!0,t.manager.active={index:i,collection:o},t.handlePress(e)},t.keyMove=function(e){var n=t.manager.getOrderedRefs(),r=n[n.length-1].node.sortableInfo.index,i=t.newIndex+e,o=t.newIndex;if(!(i<0||i>r)){t.prevIndex=o,t.newIndex=i;var a=function(e,t,n){return e<n&&e>t?e-1:e>n&&e<t?e+1:e}(t.newIndex,t.prevIndex,t.index),s=n.find((function(e){return e.node.sortableInfo.index===a})),l=s.node,u=t.containerScrollDelta,c=s.boundingClientRect||Z1(l,u),h=s.translate||{x:0,y:0},d=c.top+h.y-u.top,f=c.left+h.x-u.left,p=o<i,v=p&&t.axis.x?l.offsetWidth-t.width:0,m=p&&t.axis.y?l.offsetHeight-t.height:0;t.handleSortMove({pageX:f+v,pageY:d+m,ignoreTransition:0===e})}},t.keyDrop=function(e){t.handleSortEnd(e),t.initialFocusedNode&&t.initialFocusedNode.focus()},t.handleKeyEnd=function(e){t.manager.active&&t.keyDrop(e)},t.isValidSortingTarget=function(e){var n=t.props.useDragHandle,r=e.target,i=W1(r,(function(e){return null!=e.sortableInfo}));return i&&i.sortableInfo&&!i.sortableInfo.disabled&&(n?c2(r):r.sortableInfo)},t.manager=new p2,t.events={end:t.handleEnd,move:t.handleMove,start:t.handleStart},t.state={},t.context={manager:t.manager},t}return f(i,[{key:"getChildContext",value:function(){return{manager:this.manager}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.useWindowAsScrollContainer,n=this.getContainer();Promise.resolve(n).then((function(n){e.container=n,e.document=e.container.ownerDocument||document;var r=e.props.contentWindow||e.document.defaultView||window;e.contentWindow="function"===typeof r?r():r,e.scrollContainer=t?e.document.scrollingElement||e.document.documentElement:e2(e.container)||e.container,e.autoScroller=new h2(e.scrollContainer,e.onAutoScroll),Object.keys(e.events).forEach((function(t){return H1[t].forEach((function(n){return e.container.addEventListener(n,e.events[t],!1)}))})),e.container.addEventListener("keydown",e.handleKeyDown)}))}},{key:"componentWillUnmount",value:function(){var e=this;this.helper&&this.helper.parentNode&&(this.helper.parentNode.removeChild(this.helper),this._helpNodeNumber--),this.container&&(Object.keys(this.events).forEach((function(t){return H1[t].forEach((function(n){return e.container.removeEventListener(n,e.events[t])}))})),this.container.removeEventListener("keydown",this.handleKeyDown))}},{key:"updateHelperPosition",value:function(e){var t=this.props,n=t.lockAxis,r=t.lockOffset,i=t.lockToContainerEdges,o=t.transitionDuration,a=t.keyboardSortingTransitionDuration,s=void 0===a?o:a,l=this.manager.isKeySorting,u=e.ignoreTransition,c=$1(e),h={x:c.x-this.initialOffset.x,y:c.y-this.initialOffset.y};if(h.y-=window.pageYOffset-this.initialWindowScroll.top,h.x-=window.pageXOffset-this.initialWindowScroll.left,this.translate=h,i){var d=function(e){var t=e.height,n=e.width,r=e.lockOffset,i=Pt(Array.isArray(r)?r:[r,r],2),o=i[0],a=i[1];return[J1({height:t,lockOffset:o,width:n}),J1({height:t,lockOffset:a,width:n})]}({height:this.height,lockOffset:r,width:this.width}),f=Pt(d,2),p=f[0],v=f[1],m={x:this.width/2-p.x,y:this.height/2-p.y},g={x:this.width/2-v.x,y:this.height/2-v.y};h.x=X1(this.minTranslate.x+m.x,this.maxTranslate.x-g.x,h.x),h.y=X1(this.minTranslate.y+m.y,this.maxTranslate.y-g.y,h.y)}"x"===n?h.y=0:"y"===n&&(h.x=0),l&&s&&!u&&G1(this.helper,s),V1(this.helper,h)}},{key:"animateNodes",value:function(){var e=this.props,t=e.transitionDuration,n=e.hideSortableGhost,r=e.onSortOver,i=this.containerScrollDelta,o=this.windowScrollDelta,a=this.manager.getOrderedRefs(),s=this.offsetEdge.left+this.translate.x+i.left,l=this.offsetEdge.top+this.translate.y+i.top,u=this.manager.isKeySorting,c=this.newIndex;this.newIndex=null;for(var h=0,d=a.length;h<d;h++){var f=a[h].node,p=f.sortableInfo.index,v=f.offsetWidth,m=f.offsetHeight,g={height:this.height>m?m/2:this.height/2,width:this.width>v?v/2:this.width/2},y=u&&p>this.index&&p<=c,b=u&&p<this.index&&p>=c,_={x:0,y:0},x=a[h].edgeOffset;x||(x=Q1(f,this.container),a[h].edgeOffset=x,u&&(a[h].boundingClientRect=Z1(f,i)));var E=h<a.length-1&&a[h+1],w=h>0&&a[h-1];E&&!E.edgeOffset&&(E.edgeOffset=Q1(E.node,this.container),u&&(E.boundingClientRect=Z1(E.node,i))),p!==this.index?(t&&G1(f,t),this.axis.x?this.axis.y?b||p<this.index&&(s+o.left-g.width<=x.left&&l+o.top<=x.top+g.height||l+o.top+g.height<=x.top)?(_.x=this.width+this.marginOffset.x,x.left+_.x>this.containerBoundingRect.width-g.width&&E&&(_.x=E.edgeOffset.left-x.left,_.y=E.edgeOffset.top-x.top),null===this.newIndex&&(this.newIndex=p)):(y||p>this.index&&(s+o.left+g.width>=x.left&&l+o.top+g.height>=x.top||l+o.top+g.height>=x.top+m))&&(_.x=-(this.width+this.marginOffset.x),x.left+_.x<this.containerBoundingRect.left+g.width&&w&&(_.x=w.edgeOffset.left-x.left,_.y=w.edgeOffset.top-x.top),this.newIndex=p):y||p>this.index&&s+o.left+g.width>=x.left?(_.x=-(this.width+this.marginOffset.x),this.newIndex=p):(b||p<this.index&&s+o.left<=x.left+g.width)&&(_.x=this.width+this.marginOffset.x,null==this.newIndex&&(this.newIndex=p)):this.axis.y&&(y||p>this.index&&l+o.top+g.height>=x.top?(_.y=-(this.height+this.marginOffset.y),this.newIndex=p):(b||p<this.index&&l+o.top<=x.top+g.height)&&(_.y=this.height+this.marginOffset.y,null==this.newIndex&&(this.newIndex=p))),V1(f,_),a[h].translate=_):n&&(this.sortableGhost=f,z1(f,{opacity:0,visibility:"hidden"}))}null==this.newIndex&&(this.newIndex=this.index),u&&(this.newIndex=c);var T=u?this.prevIndex:c;r&&this.newIndex!==T&&r({collection:this.manager.active.collection,index:this.index,newIndex:this.newIndex,oldIndex:T,isKeySorting:u,nodes:a,helper:this.helper})}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}},{key:"getContainer",value:function(){var e=this.props.getContainer;return"function"!==typeof e?(0,De.findDOMNode)(this):e(n.withRef?this.getWrappedInstance():void 0)}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,ff.jsx)(e,Re({ref:t},this.props))}},{key:"helperContainer",get:function(){var e=this.props.helperContainer;return"function"===typeof e?e():this.props.helperContainer||this.document.body}},{key:"containerScrollDelta",get:function(){return this.props.useWindowAsScrollContainer?{left:0,top:0}:{left:this.scrollContainer.scrollLeft-this.initialScroll.left,top:this.scrollContainer.scrollTop-this.initialScroll.top}}},{key:"windowScrollDelta",get:function(){return{left:this.contentWindow.pageXOffset-this.initialWindowScroll.left,top:this.contentWindow.pageYOffset-this.initialWindowScroll.top}}}]),i}(a.Component),t.displayName=q1("sortableList",e),t.defaultProps=f2,t.childContextTypes={manager:function(){return null}},t}var g2=function(e){v(n,e);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this,{componentClass:y2,label:"\u5c42\u7ea7",icon:"icon-layers-fill"})).toolBarElement=document.createElement("span"),(0,l.createRoot)(e.toolBarElement).render((0,ff.jsx)(b2,{store:e.store,eventBus:e.eventBus})),e}return f(n,null,[{key:"toString",value:function(){return"OrderPanel"}}]),n}(QT),y2=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).SortableItem=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withRef:!1};return t=function(t){v(i,t);var r=y(i);function i(){var e;u(this,i);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return(e=r.call.apply(r,[this].concat(n))).node=void 0,e.ref=void 0,e}return f(i,[{key:"componentDidMount",value:function(){this.register()}},{key:"componentDidUpdate",value:function(e){this.node&&(e.index!==this.props.index&&(this.node.sortableInfo.index=this.props.index),e.disabled!==this.props.disabled&&(this.node.sortableInfo.disabled=this.props.disabled)),e.collection!==this.props.collection&&(this.unregister(e.collection),this.register())}},{key:"componentWillUnmount",value:function(){this.unregister()}},{key:"register",value:function(){var e=this.props,t=e.collection,n=e.disabled,r=e.index,i=(0,De.findDOMNode)(this),o=this.context.manager;i.sortableInfo={collection:t,disabled:n,index:r,manager:o},this.node=i,this.ref={node:i},o.add(t,this.ref)}},{key:"unregister",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.collection;this.context.manager.remove(e,this.ref)}},{key:"getWrappedInstance",value:function(){return this.refs.wrappedInstance}},{key:"render",value:function(){var t=n.withRef?"wrappedInstance":null;return(0,ff.jsx)(e,Re({ref:t},this.props))}}]),i}(a.Component),t.defaultProps={index:0,collection:"",disabled:!1,value:null},t.displayName=q1("sortableElement",e),t.contextTypes={manager:function(){return null}},t}((function(e){var t=e.value.data;return(0,ff.jsxs)("div",{className:r.getClassName(t.slot.id),onClick:r.onClickItem,onMouseOver:r.onOverItem,onMouseOut:r.onOutItem,id:t.slot.id.toString(),children:[(0,ff.jsx)("div",{style:{width:"20px"}}),(0,ff.jsx)(KT,{type:t.rank?t.rank>0?"icon-arrowdown":"icon-arrowup":"empty"}),(0,ff.jsx)(KT,{type:"icon-image3"}),(0,ff.jsx)("div",{className:"display-name",children:t.slot.name})]})})),r.SortableContainer=m2((function(e){var t=e.items,n=g(r);return(0,ff.jsx)("div",{className:"display-list",children:t.map((function(e,t){return(0,ff.jsx)(n.SortableItem,{index:t,value:{data:e}},"item-".concat(e.slot.id))}))})})),r.onSortEnd=function(e){var t=e.oldIndex,n=e.newIndex;if(!r.state.disabled){var i=r.props.store.getCurArmature(),o=i.slots.ids.length,a=o-t-1,s=o-n-1,l=U1(r.getCurZOrder(),a,s);r.props.store.dispatch(L.CHANGE_SLOT_ORDER,{id:i.id,newOrder:l})}},r.onOverItem=function(e){var t=parseInt(e.currentTarget.getAttribute("id"));r.props.store.commit(B.OVER_SLOT,t)},r.onOutItem=function(e){r.props.store.commit(B.OVER_SLOT,0)},r.onClickItem=function(e){if(!r.state.disabled){e.stopPropagation();var t=parseInt(e.currentTarget.getAttribute("id"));r.props.store.dispatch(F.SELECT_SLOTS,[t])}};var i=r.getAllDisplay(),o=r.props.store.state.editor.over.overSlotId,s=r.props.store.state.runtime.editing.selectedSlotIds;return r.state={children:i,overId:o,selectedIds:s,disabled:!1},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(D.SELECT_ARMATURE,this.refreshOrder,this),this.props.eventBus.on(B.OVER_SLOT,this.refreshOver,this),this.props.eventBus.on(B.SELECT_SLOTS,this.refreshSelect,this),this.props.eventBus.on(j.SELECT_DISPLAY,this.refreshSelect,this),this.props.eventBus.on(D.CHANGE_SLOT_ORDER,this.refreshOrder,this),this.props.eventBus.on(P.UPDATE_ANIMATED_PROPERTY,this.refreshOrder,this),this.props.eventBus.on(Q.UPDATE_FRAME,this.refreshOrder,this),this.props.eventBus.on(D.CACHE_SLOT_ORDER,this.refreshOrder,this),this.props.eventBus.on(B.ADD_SLOT,this.refreshOrder,this),this.props.eventBus.on(W.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"getCurZOrder",value:function(){var e=this.props.store.getCurArmature();if(this.props.store.state.runtime.editing.editMode===Y.ANIMATION){if(e.cacheZOrder)return e.cacheZOrder;if(e.animatedZOrder)return e.animatedZOrder}return e.slots.ids}},{key:"getAllDisplay",value:function(){var e=this.props.store.getCurArmature(),t=this.props.store.rootState.runtime.editing.editMode,n=PT.getAllSlotDisplay(e,t);if(t===Y.ANIMATION){var r=e.slots.ids,i={};r.forEach((function(e,t){i[e]=t}));var o=this.getCurZOrder(),a=[];o.forEach((function(e){a.push(i[e])}));for(var s=vp.relativeZOrder(a),l=0,u=s.length;l<u;l+=2)for(var c=s[l],h=0===s[l+1]?0:s[l+1]>0?-1:1,d=r[c],f=0,p=n.length;f<p;f++)if(n[f].slot.id===d){n[f].rank=h;break}}return n}},{key:"refreshOrder",value:function(){var e=this.getAllDisplay();this.setState({children:e})}},{key:"refreshSelect",value:function(){var e=this.props.store.state.runtime.editing.selectedSlotIds;this.setState({selectedIds:e})}},{key:"refreshOver",value:function(){var e=this.props.store.state.editor.over.overSlotId;this.setState({overId:e})}},{key:"isSelected",value:function(e){var t=this.state.selectedIds;return!!t&&(t&&t.indexOf(e)>=0)}},{key:"isOver",value:function(e){return this.state.overId===e}},{key:"getClassName",value:function(e){var t=["order-item"];return this.isSelected(e)?t.push("selected"):this.isOver(e)&&t.push("over"),t.join(" ")}},{key:"render",value:function(){var e=this.state.children,t=this.SortableContainer;return(0,ff.jsx)("div",{className:"z-order"+(this.state.disabled?" panel-disabled":""),children:(0,ff.jsx)(t,{collection:"order-list",lockAxis:"y",distance:5,onSortEnd:this.onSortEnd,items:e,disabled:this.state.disabled})})}}]),n}(a.Component),b2=function(e){v(n,e);var t=y(n);function n(e){var r;u(this,n),(r=t.call(this,e)).refreshFrame=function(){var e=r.getKeyState();r.setState({keyState:e})},r.onSwitchMode=function(){var e=r.props.store.state.runtime.editing.editMode;r.setState({mode:e})},r.onMoveUp=function(){var e=r.props.store.getCurArmature().slots.ids.length,t=r.getSelectSlotIndex();t<e-1&&r.moveSelectedSlotTo(t+1)},r.onMoveDown=function(){var e=r.getSelectSlotIndex();e>0&&r.moveSelectedSlotTo(e-1)},r.onMoveBottom=function(){var e=r.props.store.getCurArmature(),t=r.getSelectSlotId();if(t){var n=r.getCurZOrder(),i=n.indexOf(t);if(0!==i){var o=U1(n,i,0);r.props.store.dispatch(L.CHANGE_SLOT_ORDER,{id:e.id,newOrder:o})}}},r.onMoveTop=function(){var e=r.props.store.getCurArmature(),t=e.slots.ids.length,n=r.getSelectSlotId();if(n){var i=r.getCurZOrder(),o=i.indexOf(n),a=t-1;if(o!==a){var s=U1(i,o,a);r.props.store.dispatch(L.CHANGE_SLOT_ORDER,{id:e.id,newOrder:s})}}},r.onAddOrderFrame=function(){if(r.getKeyState()!==s1.KEY){var e=r.getCurZOrder(),t=r.props.store.getCurArmature();r.props.store.dispatch(L.CHANGE_SLOT_ORDER,{id:t.id,newOrder:e})}};var i=r.props.store.state.runtime.editing.editMode,o=r.getKeyState();return r.state={mode:i,keyState:o,disabled:!1},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(W.SWITCH_MODE,this.onSwitchMode,this),this.props.eventBus.on(P.UPDATE_ANIMATED_PROPERTY,this.refreshFrame,this),this.props.eventBus.on(Q.UPDATE_FRAME,this.refreshFrame,this),this.props.eventBus.on(D.CACHE_SLOT_ORDER,this.refreshFrame,this),this.props.eventBus.on(W.SWITCH_TOOL,this.onSwitchTool,this)}},{key:"onSwitchTool",value:function(e){this.props.store.state.runtime.editing.stageTool===J.MESH_EDIT_TOOL?this.setState({disabled:!0}):this.setState({disabled:!1})}},{key:"getKeyState",value:function(){var e=s1.NO_KEY;if(this.props.store.state.runtime.editing.editMode!==Y.ANIMATION)return e;var t=this.props.store.getCurArmature(),n=this.props.store.getCurAnimation(t),r=this.props.store.state.editor.dopesheet.curTime;return n&&n.zOrder&&(e=t.cacheZOrder?s1.VIRTUAL_KEY:gp.hasKeyFrame(n,t.id,k.Z_ORDER,r)?s1.KEY:s1.NO_KEY),e}},{key:"getSelectSlotId",value:function(){var e=this.props.store.state.runtime.editing.selectedSlotIds;if(e&&e.length>0)return e[0]}},{key:"getCurZOrder",value:function(){var e=this.props.store.getCurArmature();if(this.props.store.state.runtime.editing.editMode===Y.ANIMATION){if(e.cacheZOrder)return e.cacheZOrder;if(e.animatedZOrder)return e.animatedZOrder}return e.slots.ids}},{key:"getSelectSlotIndex",value:function(){var e=this.getSelectSlotId();if(e)return this.getCurZOrder().indexOf(e)}},{key:"moveSelectedSlotTo",value:function(e){var t=this.props.store.getCurArmature(),n=this.getSelectSlotId();if(n){var r=this.getCurZOrder(),i=r.indexOf(n),o=U1(r,i,e);this.props.store.dispatch(L.CHANGE_SLOT_ORDER,{id:t.id,newOrder:o})}}},{key:"render",value:function(){var e=this.props.store.state.runtime.editing.editMode;return(0,ff.jsxs)("span",{className:"order-tool"+(this.state.disabled?" panel-disabled panel-mouse-forbid":""),style:{position:"absolute",top:"2px"},children:[e===Y.ANIMATION&&(0,ff.jsxs)("span",{children:[(0,ff.jsx)(l1,{state:this.state.keyState,property:"zOder",onClick:this.onAddOrderFrame}),(0,ff.jsx)(aW,{})]}),(0,ff.jsx)(eI,{normal:"layer-up",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveUp}),(0,ff.jsx)(eI,{normal:"layer-down",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveDown}),(0,ff.jsx)(eI,{normal:"layer_top",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveTop}),(0,ff.jsx)(eI,{normal:"layer_bottom",downColor:"#999999",overColor:"#DDDDDD",toggle:!1,onClick:this.onMoveBottom})]})}}]),n}(a.Component),_2=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:x2,label:"\u52a8\u753b",icon:"icon-tab_icon_animation_22_n"})}return f(n,null,[{key:"toString",value:function(){return"AnimationPanel"}}]),n}(QT),x2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e))._searchText="",r.onSearch=function(e){r._searchText=e.target.value||"",r.refreshAnimation()},r.onSelectAnimation=function(e){r.state.selectedId!==e&&r.props.store.commit(M.SELECT_ANIMATION,{animationId:e})},r.onAddAnimation=function(){var e=r.props.store.getCurArmature();r.props.store.dispatch(P.ADD_ANIMATION_INTERACTIVE,e.id)},r.onRenameAnimation=function(e){var t=r.props.store.getCurArmature(),n=e;r.props.store.dispatch(P.RENAME_ANIMATION_INTERACTIVE,{armatureId:t.id,animationId:n})},r.onCloneAnimation=function(){r.props.store.dispatch(P.CLONE_ANIMATION_INTERACTIVE,{})},r.onDeleteAnimation=function(e){var t=r.props.store.getCurArmature(),n=t.id,i=r.props.store.state.runtime.editing.selectedAnimationId;if(e!==i){var o={animationId:e,armatureId:n};r.props.store.dispatch(P.REMOVE_ANIMATION_INTERACTIVE,o)}else{for(var a=-1,s=0,l=t.animations.length;s<l;s++){var u=t.animations[s];if(u!==i){a=u;break}}var c={animationId:e,armatureId:n,nextAnimationId:a};r.props.store.dispatch(P.REMOVE_ANIMATION_INTERACTIVE,c)}},r.state={animations:r.getAnimationData(),selectedId:r.getSelectedAniamtionId()},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(M.ADD_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(M.REMOVE_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(M.RENAME_ANIMATION,this.refreshAnimation,this),this.props.eventBus.on(M.SELECT_ANIMATION,this.refreshSelect,this),this.props.eventBus.on(D.SELECT_ARMATURE,this.refreshAll,this)}},{key:"refreshAnimation",value:function(){this.setState({animations:this.getAnimationData()})}},{key:"refreshSelect",value:function(){this.setState({selectedId:this.getSelectedAniamtionId()})}},{key:"refreshAll",value:function(){this.setState({animations:this.getAnimationData(),selectedId:this.getSelectedAniamtionId()})}},{key:"getAnimationData",value:function(){var e=[],t=this.props.store.getCurArmature(),n=this.props.store.state.runtime.dragonbones.animationMap;this.props.store.state.runtime.editing.selectedAnimationId;if(t&&t.animations)for(var r=0,i=t.animations.length;r<i;r++){var o=t.animations[r],a=n[o];this._searchText&&-1===a.name.indexOf(this._searchText)||e.push({id:o,name:a.name})}return e}},{key:"getSelectedAniamtionId",value:function(){return this.props.store.state.runtime.editing.selectedAnimationId}},{key:"render",value:function(){var e=this;return(0,ff.jsxs)("div",{className:"animation-panel",children:[(0,ff.jsxs)("div",{className:"header",children:[(0,ff.jsx)("input",{className:"search",onChange:this.onSearch}),(0,ff.jsx)("span",{children:"\u641c\u7d22"}),(0,ff.jsxs)("span",{className:"animation-tool",children:[(0,ff.jsx)(eI,{className:"animation-btn",normal:"animation/add",normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:this.onAddAnimation,tooltip:"\u6dfb\u52a0\u52a8\u753b"}),(0,ff.jsx)(eI,{className:"animation-btn",normal:"dopesheet/timeline_copy",normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:this.onCloneAnimation,tooltip:"\u514b\u9686\u52a8\u753b"})]})]}),(0,ff.jsx)("div",{className:"animation-list",ref:"armatureRef",children:this.state.animations.map((function(t,n){return(0,ff.jsxs)("div",{className:e.state.selectedId===t.id?"animation-item selected":"animation-item",onClick:function(){return e.onSelectAnimation(t.id)},onDoubleClick:function(){e.onRenameAnimation(t.id)},children:[t.name,(0,ff.jsx)(KT,{className:"animation-delete",type:"icon-delete",onClick:function(n){n.stopPropagation(),e.onDeleteAnimation(t.id)}})]},n)}))})]})}}]),n}(a.Component),E2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,{width:512,height:512,backgroundColor:yp.CURVE_BOX_BG}))._parentHtml=void 0,r._model=void 0,r._stageHeight=0,r._stageWidth=0,r._bgGraphics=void 0,r._curveGraphics=void 0,r._curveData=[],r._overPointIndex=-1,r._mouseDownPos={x:0,y:0},r._selectedPointIndex=-1,r._mousePressing=!1,r.onUpHandler=void 0,r.firstDispatch=!1,r._overCurvePoint=null,r._isDrawHandle=!1,r._model=e,r.stage.interactive=!0,r._bgGraphics=new iw,r.stage.addChild(r._bgGraphics),r._curveGraphics=new iw,r.stage.addChild(r._curveGraphics),r.onUpHandler=r.onUp.bind(g(r)),r.initControl(),r}return f(n,[{key:"model",get:function(){return this._model},set:function(e){this._model=e}},{key:"boxWidth",get:function(){return this._stageWidth-n.left-n.right}},{key:"boxHeight",get:function(){return this._stageHeight-n.top-n.bottom}},{key:"rowHeight",get:function(){return this.boxHeight/n.row}},{key:"colWidth",get:function(){return this.boxWidth/n.col}},{key:"boxMiddleHeight",get:function(){return 5*this.rowHeight}},{key:"centerX",get:function(){return n.left}},{key:"centerY",get:function(){return n.top+10*this.rowHeight}},{key:"initControl",value:function(){this.stage.addEventListener("pointermove",this.onMove.bind(this)),this.stage.addEventListener("pointerdown",this.onDown.bind(this)),this.stage.addEventListener("rightdown",this.onRightDown.bind(this)),this.stage.addEventListener("pointerenter",this.onEnter.bind(this)),this.stage.addEventListener("pointerleave",this.onLeave.bind(this))}},{key:"overCurvePoint",set:function(e){this._overCurvePoint!==e&&(this._overCurvePoint=e,this.drawCurve())}},{key:"overPointIndex",set:function(e){this._overPointIndex!==e&&(this._overPointIndex=e,this.drawCurve())}},{key:"isDrawHandle",set:function(e){this._isDrawHandle!==e&&(this._isDrawHandle=e,this.drawCurve())}},{key:"onEnter",value:function(e){this.isDrawHandle=!0}},{key:"onLeave",value:function(e){this.isDrawHandle=!1}},{key:"onMove",value:function(e){var t=e.globalX-this.centerX,n=-(e.globalY-this.centerY);this._mousePressing?this._selectedPointIndex>=0?this.onChangeHandle(t,n):this._overPointIndex>=0&&(this._selectedPointIndex=this._overPointIndex):this.checkOverHandler(t,n)}},{key:"onChangeHandle",value:function(e,t){if(-1!==this._selectedPointIndex){var n=this._curveData,r=this._selectedPointIndex;if(1===n.length);else{var i={x:0,y:0},o=!1,a=!1,s=!1,l=0,u=1,c=0,h=1,d=-1;if(4===n.length)0===this._selectedPointIndex?(i.x=0,i.y=0,o=!0,l=0,u=1):1===this._selectedPointIndex&&(i.x=1,i.y=1,a=!0,l=0,u=1);else{var f=n.length/2;if(0===r){i.x=0,i.y=0,o=!0,l=0;u=n[4]}else if(r===f-1){i.x=1,i.y=1,a=!0,u=1,l=n[n.length-6]}else{var p=Math.floor((r-1)/3)+1;o=(r-1)%3===0,a=(r-1)%3===2,s=(r-1)%3===1;var v=6*(p-1)+4,m=6*(p-1)+5;if(i.x=n[v],i.y=n[m],o){if(d=r+2,1===p)l=0;else l=n[6*(p-1-1)+4];u=i.x;var g=6*(p+1-1)+4;h=g<n.length?n[g]:1,c=i.x}else if(a){d=r-2;var y=6*(p+1-1)+4;if(u=y<n.length?n[y]:1,l=i.x,1===p)c=0;else c=n[6*(p-1-1)+4];h=i.x}else if(s){var b=p-1,_=6*(b-1)+4;if(0===b)l=0;else{if(!(_>0&&_<n.length))throw new Error("prevBezierPointXIndex error");l=n[_]}var x=6*(p+1-1)+4;u=x<n.length?n[x]:1;var E=n[v-2],w=n[v+2],T=E-l;l=i.x-T;var S=u-w;u=i.x+S;var k=n[v-4];l=Math.max(k,l);var C=n[v+4];u=Math.min(C,u)}}}var A=e/this.boxWidth,I=t/this.boxMiddleHeight;A<l&&(A=l),A>u&&(A=u),I<-1&&(I=-1),I>2&&(I=2);var O=this._curveData.concat(),M=A-O[2*r],R=I-O[2*r+1];if(O[2*r]=A,O[2*r+1]=I,d>=0){var N=Kf({x:A,y:I},i,{x:O[2*d],y:O[2*d+1]},h,c);O[2*d]=N.x,O[2*d+1]=N.y}s&&(O[2*r-2]+=M,O[2*r-1]+=R,O[2*r+2]+=M,O[2*r+3]+=R),this.firstDispatch||(this.firstDispatch=!0,this.model.historyBeginMerge()),this._model&&O&&this._model.dispatch(P.MODIFY_FRAMES_CURVE,{curve:O})}}}},{key:"onDown",value:function(e){if(0===e.button){var t=e.globalX-this.centerX,n=-(e.globalY-this.centerY);this._mouseDownPos.x=t,this._mouseDownPos.y=n,this._mousePressing=!0,this._overCurvePoint&&this.addPoint(this._overCurvePoint.x,this._overCurvePoint.y),this._overCurvePoint=null,document.addEventListener("mouseup",this.onUpHandler)}}},{key:"onRightDown",value:function(e){if(2===e.button&&this._curveData.length>4&&this._overPointIndex>0){var t=this._overPointIndex,n=6*(Math.floor((t-1)/3)+1-1)+2;if((t-1)%3===1){var r=this._curveData.concat();r.splice(n,6),this.model.dispatch(P.MODIFY_FRAMES_CURVE,{curve:r})}}}},{key:"onUp",value:function(e){this._mouseDownPos.x=0,this._mouseDownPos.y=0,this._mousePressing=!1,this._selectedPointIndex=-1,this.overPointIndex=-1,document.removeEventListener("mouseup",this.onUpHandler),this.firstDispatch&&(this.firstDispatch=!1,this.model.historyEndMerge())}},{key:"getPointPosAndIndex",value:function(){}},{key:"checkOverHandler",value:function(e,t){var n=this._curveData,r=[];if(this.overPointIndex=-1,this.overCurvePoint=null,1===n.length)r.push({x:0,y:0,index:0}),r.push({x:0+this.boxWidth,y:this.boxMiddleHeight,index:1});else if(n.length>=4)for(var i=0,o=n.length;i<o;i+=2){var a=i/2;r.push({x:this.boxWidth*n[i],y:this.boxMiddleHeight*n[i+1],index:a})}if(0!==r.length){for(var s=0,l=r.length;s<l;s++){var u=r[s],c=u.x,h=u.y;if(Math.abs(e-c)<5&&Math.abs(t-h)<5)return void(this.overPointIndex=u.index)}var d=e/this.boxWidth,f=Wf(n,d);Math.abs(t-f*this.boxMiddleHeight)<5&&(this.overCurvePoint={x:d,y:f})}}},{key:"removePoint",value:function(e){}},{key:"addPoint",value:function(e,t){var n=0;if(4===this._curveData.length)n=2;else for(var r=0,i=this._curveData.length;r<i;r+=6){var o=r+4,a=1;if(o<i&&(a=this._curveData[o]),e<a){n=r+2;break}}var s=Yf(this._curveData,e),l=this._curveData.concat();l.splice(n,2),l.splice(n-2,2),l.splice.apply(l,[n-2,0].concat(Pe(s))),this.model.dispatch(P.MODIFY_FRAMES_CURVE,{curve:l}),this.overCurvePoint=null}},{key:"addToContainer",value:function(e){e&&(this._parentHtml=e,e.appendChild(this.view))}},{key:"resizeStage",value:function(e,t){this._stageHeight=t-100,this._stageWidth=e,this.renderer.resize(this._stageWidth,this._stageHeight),this.draw()}},{key:"updateData",value:function(e){this._curveData=e,this.draw()}},{key:"draw",value:function(){this.drawGrid(),this.drawCurve()}},{key:"drawGrid",value:function(){this._bgGraphics.clear(),this._bgGraphics.removeChildren();var e=this._bgGraphics,t=this.boxWidth,r=this.boxHeight,i=this.rowHeight,o=this.colWidth,a=n.left,s=n.top;e.lineStyle(0,yp.CURVE_BOX_GRID,1),e.beginFill(16777215,1),e.drawRect(0,0,this._stageWidth,this._stageHeight),e.endFill(),e.beginFill(yp.CURVE_BOX_BG_MIDDLE,1),e.drawRect(a,s+5*i,t,5*i),e.endFill(),e.lineStyle(1,yp.CURVE_BOX_GRID,1);for(var l=0;l<=15;l++)e.moveTo(a,s+l*i),e.lineTo(a+t,s+l*i);for(var u=0;u<=10;u++)e.moveTo(a+u*o,s),e.lineTo(a+u*o,s+r);for(var c=0;c<=15;c++){var h=200-20*c+"",d=new Rw(h,{fontSize:12,fill:yp.CURVE_BOX_TEXT,align:"right",wordWrap:!0,wordWrapWidth:100});d.x=5*(4-h.length)+10,d.y=s+c*i-8,e.addChild(d)}}},{key:"drawCurve",value:function(){if(this._curveData){if(1===this._curveData.length?this.drawStepCurve():this._curveData.length>=4?this.drawBezier(this._isDrawHandle):this._curveGraphics.clear(),this._overCurvePoint){this._curveGraphics.beginFill(yp.CURVE_BOX_OVER,1),this._curveGraphics.drawCircle(this.centerX+this._overCurvePoint.x*this.boxWidth,this.centerY-this._overCurvePoint.y*this.boxMiddleHeight,5),this._curveGraphics.endFill()}}else this._curveGraphics.clear()}},{key:"drawBezier",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._curveData,r=this._curveGraphics,i=(this.boxWidth,this.colWidth*n.col),o=5*this.rowHeight,a=3;r.clear(),r.lineStyle(1,yp.CURVE_BOX_CURVE,1,0,!1),r.moveTo(this.centerX,this.centerY);for(var s=0;s<t.length;s+=6){var l=this.centerX+i*t[s],u=this.centerY-o*t[s+1],c=this.centerX+i*t[s+2],h=this.centerY-o*t[s+3],d=0,f=0;s+4>=t.length?(d=this.centerX+i,f=this.centerY-o):(d=this.centerX+i*t[s+4],f=this.centerY-o*t[s+5]),r.bezierCurveTo(l,u,c,h,d,f)}r.beginFill(yp.CURVE_BOX_CURVE,1),r.drawCircle(this.centerX,this.centerY,a);for(var p={x:this.centerX,y:this.centerY},v={x:this.centerX+i*t[0],y:this.centerY-o*t[1]},m=0;m<t.length;m+=6)m+4>=t.length?(v.x=this.centerX+i,v.y=this.centerY-o):(v.x=this.centerX+i*t[m+4],v.y=this.centerY-o*t[m+5]),p.x=v.x,p.y=v.y,2*this._overPointIndex===m+4&&(a=6),r.drawCircle(v.x,v.y,a),a=3;if(r.drawCircle(this.centerX+i,this.centerY-o,a),r.endFill(),e){r.lineStyle(1,yp.CURVE_BOX_HANDLE,1,0,!1);for(var g={x:this.centerX,y:this.centerY},y={x:this.centerX+i*t[0],y:this.centerY-o*t[1]},b=0;b<t.length;b+=6){var _=this.centerX+i*t[b],x=this.centerY-o*t[b+1],E=this.centerX+i*t[b+2],w=this.centerY-o*t[b+3];b+4>=t.length?(y.x=this.centerX+i,y.y=this.centerY-o):(y.x=this.centerX+i*t[b+4],y.y=this.centerY-o*t[b+5]),r.moveTo(g.x,g.y),r.lineTo(_,x),r.moveTo(y.x,y.y),r.lineTo(E,w),g.x=y.x,g.y=y.y,r.beginFill(yp.CURVE_BOX_HANDLE,1),a=2*this._overPointIndex===b?6:3,r.drawCircle(_,x,a),a=2*this._overPointIndex===b+2?6:3,r.drawCircle(E,w,a)}}}},{key:"drawStepCurve",value:function(){var e=this._curveGraphics,t=(this.boxWidth,this.colWidth*n.col),r=5*this.rowHeight;e.clear(),e.lineStyle(2,yp.CURVE_BOX_CURVE,1,0,!1),e.moveTo(this.centerX,this.centerY),e.lineTo(this.centerX+t,this.centerY),e.lineTo(this.centerX+t,this.centerY-r),e.beginFill(yp.CURVE_BOX_CURVE,1),e.drawCircle(this.centerX,this.centerY,3),e.drawCircle(this.centerX+t,this.centerY-r,3),e.endFill()}}]),n}(G_);E2.left=40,E2.right=10,E2.top=10,E2.bottom=10,E2.row=15,E2.col=10;var w2=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.call(this,{componentClass:T2,label:"\u66f2\u7ebf",icon:"icon-curvedchart"})}return f(n,[{key:"resize",value:function(e,t){this.store.commit($.UPDATE_SIZE,{width:e,height:t})}}],[{key:"toString",value:function(){return"CurvePanel"}}]),n}(QT),T2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.presetCurves=[{name:"\u53f0\u9636",icon:"curve/none",value:[0]},{name:"\u7ebf\u6027",icon:"curve/linear",value:[1]},{name:"\u6e10\u5165",icon:"curve/easeIn",value:[2]},{name:"\u6e10\u51fa",icon:"curve/easeOut",value:[3]},{name:"\u6e10\u5165\u6e10\u51fa",icon:"curve/easeInOut",value:[4]}],r.curveBox=void 0,r.state={curve:r.getCurCurve()},r.init(),r}return f(n,[{key:"init",value:function(){this.props.eventBus.on(Q.SELECT_FRAME,this.refreshCurve,this),this.props.eventBus.on(M.MODIFY_FRAMES,this.refreshCurve,this),this.props.eventBus.on(M.AUTO_KEY,this.refreshCurve,this),this.props.eventBus.on($.UPDATE_SIZE,this.updateSize,this)}},{key:"refreshCurve",value:function(){this.setState({curve:this.getCurCurve()}),this.curveBox&&this.curveBox.updateData(this.getCurveToBezier(this.getCurCurve()))}},{key:"getCurCurve",value:function(){var e=this.getSelectedFrames();return 0===e.length?[]:e[0].curve||[1]}},{key:"getSelectedFrames",value:function(){for(var e=this.props.store.state.runtime.editing.selectedFrameIds,t=this.props.store.state.runtime.editing.selectedAnimationId,n=this.props.store.state.runtime.dragonbones.animationMap[t],r=[],i=0,o=e.length;i<o;i++){var a=e[i],s=gp.getFrameById(n,a);s&&r.push(s)}return r}},{key:"onModifyFrameCurve",value:function(e){0!==this.getSelectedFrames().length&&this.props.store.dispatch(P.MODIFY_FRAMES_CURVE,{curve:e})}},{key:"getCurveToBezier",value:function(e){if(1===e.length)switch(e[0]){case 0:return[0];case 1:return[0,0,1,1];case 2:return[.5,0,1,1];case 3:return[0,0,.5,1];case 4:return[.5,0,.5,1]}return e}},{key:"getCurveName",value:function(e){if(e)if(1===e.length)switch(e[0]){case 0:return"\u53f0\u9636";case 1:return"\u7ebf\u6027";case 2:return"\u6e10\u5165";case 3:return"\u6e10\u51fa";case 4:return"\u6e10\u5165\u6e10\u51fa"}else if(e.length>=4)return"\u8d1d\u585e\u5c14\u66f2\u7ebf";return""}},{key:"initCurveApplication",value:function(e){this.curveBox=new E2(e),this.curveBox.addToContainer(this.refs.curveContainer)}},{key:"updateSize",value:function(){var e=this.props.store.state.editor.curveBox,t=e.width,n=e.height;this.curveBox&&this.curveBox.resizeStage(t,n)}},{key:"componentDidMount",value:function(){this.initCurveApplication(this.props.store),this.refs.curveContainer,this.updateSize()}},{key:"render",value:function(){var e=this;return(0,ff.jsxs)("div",{className:"curve-panel",children:[(0,ff.jsxs)("div",{className:"curve-control",children:[(0,ff.jsx)("span",{className:"curve-label",children:"\u5f53\u524d\u5e27\u7684\u66f2\u7ebf:"}),(0,ff.jsx)("span",{className:"curve-value",children:"".concat(this.getCurveName(this.state.curve))})]}),(0,ff.jsx)("div",{className:"curve-container",id:"curvetContainer",ref:"curveContainer"}),(0,ff.jsx)("div",{className:"curve-btns",children:this.presetCurves.map((function(t,n){return(0,ff.jsx)(eI,{className:"curve-btn",normal:t.icon,normalColor:"#DDDDDD",downColor:"#999999",overColor:"#EEEEEE",toggle:!1,onClick:function(){e.onModifyFrameCurve(t.value)},tooltip:t.name},n)}))})]})}}]),n}(a.Component),S2=function(e){return e.libraryPanel="libraryPanel",e.stagePanel="stagePanel",e.propertyPanel="propertyPanel",e.dopesheetPanel="dopesheetPanel",e.outlinePanel="outlinePanel",e.scenePanel="scenePanel",e.actionPanel="actionPanel",e.animationPanel="animationPanel",e.curvePanel="curvePanel",e}({}),k2=function(e){v(n,gmvc.ModelController);var t=y(n);function n(){var e;return u(this,n),(e=t.call(this)).store=$2.instance.store,e._curMode=Y.POSE,e.layout=void 0,e.container=void 0,e.layout=new gboxLayout.GBoxLayout,e}return f(n,[{key:"focus",get:function(){return this.layout.focusBox}},{key:"onLayoutChange",value:function(){this.store.rootState.editor.layoutChange||this.store.commit(W.LAYOUT_CHANGE,{})}},{key:"initLayout",value:function(e){var t,n,r,i,o,a=this;this.container=e;var s=this.store.state;gboxLayout.GBoxLayout.GAP=1;var l=this.container,u=(null===(t=s.editor)||void 0===t||null===(n=t.layout)||void 0===n?void 0:n.animationLayout)||le,c=(null===(r=s.editor)||void 0===r||null===(i=r.layout)||void 0===i?void 0:i.poseLayout)||ae,h=u;this._curMode=s.runtime.editing.editMode;var d=(b(o={},Y.POSE,c),b(o,Y.ANIMATION,h),o)[this._curMode]||c;this.layout.registPanel(S2.libraryPanel,new JT),this.layout.registPanel(S2.stagePanel,new vG),this.layout.registPanel(S2.propertyPanel,new R1),this.layout.registPanel(S2.dopesheetPanel,new sW),this.layout.registPanel(S2.outlinePanel,new F1),this.layout.registPanel(S2.scenePanel,new g2),this.layout.registPanel(S2.animationPanel,new _2),this.layout.registPanel(S2.curvePanel,new w2),this.layout.setContainer(l),this.layout.setData(d),this.layout.changeCallback=this.onLayoutChange.bind(this),window.printLayout=function(){a.layout.getData()}}},{key:"start",value:function(){this._addNotification(W.SWITCH_MODE,this.onSwitchMode),this._addNotification(x.SAVE_LAYOUT,this.saveLayout)}},{key:"stop",value:function(){this._removeNotification(W.SWITCH_MODE,this.onSwitchMode)}},{key:"saveLayout",value:function(){this.store.state;var e=this.layout.getData(),t={animationLayout:void 0,poseLayout:void 0};this._curMode===Y.ANIMATION?t.animationLayout=e:this._curMode===Y.POSE&&(t.poseLayout=e),this.store.commit(W.UPDATE_LAYOUT,t)}},{key:"onSwitchMode",value:function(e){var t=this.store.state,n=t.runtime.editing.editMode;if(this._curMode!==n){if(t.editor.layoutChange){var r=this.layout.getData(),i={animationLayout:void 0,poseLayout:void 0};this._curMode===Y.ANIMATION?i.animationLayout=r:this._curMode===Y.POSE&&(i.poseLayout=r),this.store.commit(W.UPDATE_LAYOUT,i)}this._curMode=n;var o=t.editor.layout.poseLayout,a=t.editor.layout.animationLayout;switch(n){case Y.ANIMATION:this.layout.setData(a);break;case Y.POSE:this.layout.setData(o)}}}}],[{key:"toString",value:function(){return"LayoutController"}}]),n}(),C2=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=document.getElementById("container");if(e){var t=k2.getInstance(k2);t.initLayout(e),t.start()}}}]),n}(),A2=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;this._retain(),Ce.instance.init().then((function(t){t?e._release(!0):e._release(!1)}))}}]),n}(),I2={};I2.write=function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.writeText(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I2.read=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",navigator.clipboard.readText());case 1:case"end":return e.stop()}}),e)}))),I2.readSync=function(){throw new Error("`.readSync()` is not supported in browsers!")},I2.writeSync=function(){throw new Error("`.writeSync()` is not supported in browsers!")};var O2=I2,P2=function(){function e(){u(this,e)}return f(e,null,[{key:"setData",value:function(e,t){this.type=e,this.data=t}},{key:"getData",value:function(e){return e===this.type?this.data:void 0}},{key:"setToNative",value:function(){var e=Ee(_e().mark((function e(t){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O2.write(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFromNative",value:function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O2.read();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();P2.data=void 0,P2.type=void 0;var M2=function(e){return e[e.BackSpace=8]="BackSpace",e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.Left=37]="Left",e[e.Up=38]="Up",e[e.Right=39]="Right",e[e.Down=40]="Down",e[e.Command=91]="Command",e[e.Number0=48]="Number0",e[e.Number1=49]="Number1",e[e.Number2=50]="Number2",e[e.Number3=51]="Number3",e[e.Number4=52]="Number4",e[e.Number5=53]="Number5",e[e.Number6=54]="Number6",e[e.Number7=55]="Number7",e[e.Number8=56]="Number8",e[e.Number9=57]="Number9",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.F1=112]="F1",e[e.F2=113]="F2",e[e.F3=114]="F3",e[e.F4=115]="F4",e[e.F5=116]="F5",e[e.F6=117]="F6",e[e.F7=118]="F7",e[e.F8=119]="F8",e[e.F9=120]="F9",e[e.F10=121]="F10",e[e.F11=122]="F11",e[e.F12=123]="F12",e}({}),R2=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){$2.instance.eventBus;var e=gmvc.ShortcutController.getInstance(gmvc.ShortcutController),t=[{keycodes:[gmvc.Shortcut.CTRL,gmvc.Shortcut.Z],type:FC.UNDO},{keycodes:[gmvc.Shortcut.CTRL,gmvc.Shortcut.Y],type:FC.REDO},{keycodes:[gmvc.Shortcut.CTRL,M2.C],type:FC.COPY},{keycodes:[gmvc.Shortcut.CTRL,M2.V],type:FC.PASTE},{keycodes:[gmvc.Shortcut.CTRL,M2.X],type:FC.COPY},{keycodes:[gmvc.Shortcut.DEL],type:FC.DELETE},{keycodes:[gmvc.Shortcut.CTRL,M2.F8],type:FC.CREATE_MOVIECLIP},{keycodes:[M2.F2],type:FC.SWITCH_MODE},{keycodes:[M2.Number1],type:FC.SWITCH_MODE_POSE},{keycodes:[M2.Number2],type:FC.SWITCH_MODE_ANIMATION},{keycodes:[M2.BackSpace],type:FC.DELETE}],n=new gmvc.Shortcut(t),r=k2.getInstance(k2);e.checkoutFocus=function(e){var t=r.focus;if(!t)return!1;var n=t.panelIndex;return!!(t&&t.panels&&t.panels.length>n&&t.panels[n].name===e.focus)},e.init(n),e.addRegister(FC.UNDO,this.undo),e.addRegister(FC.REDO,this.redo),e.addRegister(FC.SWITCH_MODE,this.switchMode),e.addRegister(FC.SWITCH_MODE_POSE,this.switchModePose),e.addRegister(FC.SWITCH_MODE_ANIMATION,this.switchModeAnimation),e.addRegister(FC.CREATE_MOVIECLIP,this.createMovieclip),e.addRegister(FC.DELETE,this.onDeleteStage,S2.stagePanel),e.addRegister(FC.DELETE,this.onDeleteDopesheet,S2.dopesheetPanel),e.addRegister(FC.DELETE,this.onDeleteLibrary,S2.libraryPanel),e.addRegister(FC.DELETE,this.onDeleteOutline,S2.outlinePanel),e.addRegister(FC.DELETE,this.onDeleteScene,S2.scenePanel),e.addRegister(FC.COPY,this.onCopyStage,S2.stagePanel),e.addRegister(FC.COPY,this.onCopyDopesheet,S2.dopesheetPanel),e.addRegister(FC.PASTE,this.onPasteStage,S2.stagePanel),e.addRegister(FC.PASTE,this.onPasteDopesheet,S2.dopesheetPanel)}},{key:"undo",value:function(){$2.instance.store.dispatch(X.UNDO)}},{key:"redo",value:function(){$2.instance.store.dispatch(X.REDO)}},{key:"switchMode",value:function(){switch($2.instance.store.state.runtime.editing.editMode){case Y.ANIMATION:$2.instance.store.dispatch(X.SWITCH_MODE,{mode:Y.POSE});break;case Y.POSE:$2.instance.store.dispatch(X.SWITCH_MODE,{mode:Y.ANIMATION})}}},{key:"switchModePose",value:function(){$2.instance.store.state.runtime.editing.editMode!==Y.POSE&&$2.instance.store.dispatch(X.SWITCH_MODE,{mode:Y.POSE})}},{key:"switchModeAnimation",value:function(){$2.instance.store.state.runtime.editing.editMode!==Y.ANIMATION&&$2.instance.store.dispatch(X.SWITCH_MODE,{mode:Y.ANIMATION})}},{key:"createMovieclip",value:function(){}},{key:"onDeleteStage",value:function(){$2.instance.store.dispatch(X.DELETE_SELECTED_BONES_AND_SLOTS)}},{key:"onDeleteDopesheet",value:function(){$2.instance.store.dispatch(P.DELETE_FRAMES)}},{key:"onDeleteLibrary",value:function(){}},{key:"onDeleteOutline",value:function(){$2.instance.store.dispatch(X.DELETE_SELECTED_BONES_AND_SLOTS)}},{key:"onDeleteScene",value:function(){}},{key:"onCopyStage",value:function(){P2.setData("bone",{bone:"from clipboard"}),P2.setToNative("copy to native")}},{key:"onCopyDopesheet",value:function(){}},{key:"onPasteStage",value:function(){var e=Ee(_e().mark((function e(){return _e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P2.getData("bone"),e.next=4,P2.getFromNative();case 4:e.sent;case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"onPasteDopesheet",value:function(){}}]),n}(),N2=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;document.addEventListener("dragover",(function(e){return e.preventDefault(),!1}),!1),document.addEventListener("drop",(function(e){return e.preventDefault(),!1}),!1),setTimeout((function(){e._sendNotification(X.RESET_SCALE,void 0)}),300)}}]),n}(),D2={type:"button",icon:"mdi-lastpass",label:"\u66f4\u591a",action:""},L2={history:{name:"history",type:"group",btns:[{icon:"icon-undo",type:"button",label:"\u64a4\u9500",action:W.UNDO},{icon:"icon-redo",type:"button",label:"\u91cd\u505a",action:W.REDO}]},allEditMode:{name:"allEditMode",type:"group",btns:[{name:"poseMode",icon:"icon-skeleton",type:"button",label:"\u9aa8\u67b6\u6a21\u5f0f",action:X.SWITCH_MODE,actionValue:{mode:Y.POSE}},{icon:"icon-layer-skeleton",type:"button",label:"\u52a8\u753b\u6a21\u5f0f",action:X.SWITCH_MODE,actionValue:{mode:Y.ANIMATION}}]},fullScreen:{name:"fullScreen",icon:"icon-fullscreen",type:"button",label:"\u5168\u5c4f",action:X.SWITCH_FULL_SCREEN,actionValue:{}},animationMode:{name:"animationMode",icon:"layer-movieclip",type:"button",label:"\u52a8\u753b\u6a21\u5f0f",action:X.SWITCH_MODE,actionValue:{mode:Y.ANIMATION}},poseMode:{name:"poseMode",icon:"layer-movieclip",type:"button",label:"\u7f16\u8f91\u6a21\u5f0f",action:X.SWITCH_MODE,actionValue:{mode:Y.POSE}},questionType:{name:"questionType",icon:"qbs",type:"list",label:"\u9898\u578b",list:[{name:"singleSelect",label:"\u5355\u9009\u9898",action:"",icon:"mdi-gesture-tap"},{name:"multSelect",label:"\u591a\u9009\u9898",action:"",icon:"mdi-gesture-two-double-tap"}]},postil:{name:"postil",icon:"annotation",type:"button",label:"\u6279\u6ce8"},image:{name:"image",icon:"layer-image",type:"button",label:"\u56fe\u7247",action:"",actionValue:""},shape:{name:"shape",icon:"layer-shape",type:"list",label:"\u5f62\u72b6",list:[{icon:"mdi-rectangle-outline",name:"rect",label:"\u77e9\u5f62",action:"",actionValue:""},{icon:"mdi-circle-outline",name:"circle",label:"\u5706\u5f62",action:"",actionValue:""},{icon:"mdi-ellipse-outline",name:"ellipse",label:"\u692d\u5706",action:"",actionValue:""},{icon:"mdi-star-outline",name:"star",label:"\u661f\u5f62",action:"",actionValue:""},{icon:"mdi-pentagon-outline",name:"isosceles",label:"\u68af\u5f62",action:"",actionValue:""},{icon:"mdi-arrow-right-bold-outline",name:"arrow",label:"\u7bad\u5934",action:"",actionValue:""}]},text:{name:"text",icon:"layer-text",type:"button",label:"\u6587\u672c",action:"ADD_TEXT_CHILD",actionValue:""},audio:{name:"audio",icon:"layer-audio",type:"button",label:"\u97f3\u9891",action:"",actionValue:""},video:{name:"video",icon:"layer-video",type:"button",label:"\u89c6\u9891",action:"",actionValue:""},movieclip:{name:"movieclip",icon:"layer-movieclip",type:"button",label:"\u5f71\u7247\u526a\u8f91",action:"CREATE_MOVIECLIP_INTERACTION",actionValue:""},myLib:{name:"myLib",icon:"bag",type:"button",label:"\u6211\u7684\u4ed3\u5e93"},viewScale:{name:"viewScale",icon:"layout",type:"list",label:"\u89c6\u56fe\u7f29\u653e",list:[{icon:"mdi-resize",name:"originalSize",label:"\u5b9e\u9645\u5c3a\u5bf8",action:""},{icon:"mdi-fit-to-page-outline",name:"fitSize",label:"\u9002\u5e94\u753b\u5e03",action:""}]},layout:{name:"layout",icon:"layout",type:"list",label:"\u5e03\u5c40",list:[{name:"showMenu",label:"\u663e\u793a\u83dc\u5355",action:"",checked:!0},{name:"showRuler",label:"\u663e\u793a\u6807\u5c3a",action:"",checked:!0},{name:"showRefercenceLine",label:"\u663e\u793a\u53c2\u8003\u7ebf",action:"",checked:!0},{name:"showRight",label:"\u663e\u793a\u53f3\u4fa7\u680f",action:"",checked:!0}]},cooperation:{name:"cooperation",icon:"team-add",type:"button",label:"\u534f\u4f5c"},preview:{name:"preview",icon:"icon-preview",type:"button",label:"\u9884\u89c8",action:"MUTATION_OPEN_PREVIEW_WINDOW",actionValue:!0},cast:{name:"cast",icon:"cast",type:"button",label:"\u6295\u5c4f",action:"VF_PLAYER_CAST"},save:{name:"save",icon:"icon-save",type:"button",label:"\u4fdd\u5b58",action:"SAVE",actionValue:!0},export:{name:"export",icon:"icon-export",type:"button",label:"\u5bfc\u51fa",action:"MUTATION_OPEN_EXPORT_WINDOW"},import:{name:"import",icon:"icon-import",type:"button",label:"\u5bfc\u5165",action:"MUTATION_OPEN_IMPORT_WINDOW"},public:{name:"public",icon:"publish",type:"button",label:"\u53d1\u5e03"},clearLocal:{name:"clearLocal",icon:"icon-delete",type:"button",label:"\u6e05\u9664\u6570\u636e",trigger:"ACTION",action:"ACTION_CLEAR_LOCAL_DATA"},language:{name:"language",icon:"locale",type:"list",label:"\u8bed\u8a00",list:[{name:"zh",label:"\u4e2d\u6587",action:"CHANGE_LANGUAGE",actionValue:"zh-cn",checked:!0},{name:"en",label:"English",action:"CHANGE_LANGUAGE",actionValue:"en-us",checked:!1}]},autoGap:{type:"autoGap"},gap5:{type:"gap",gap:5},gap10:{type:"gap",gap:10},gap15:{type:"gap",gap:15},gap20:{type:"gap",gap:20},gap30:{type:"gap",gap:30},gap40:{type:"gap",gap:40},gap50:{type:"gap",gap:50},logo:{type:"label",gap:50,label:"DragonBones Web"},version:{type:"version",gap:50,label:"v0.0.6"}},F2=["gap50","history","gap50","allEditMode","fullScreen","import","autoGap","logo","version","autoGap","gap20","clearLocal","gap20","save","gap20","export","gap20","preview"],B2=["gap50","history","gap50","allEditMode","fullScreen","autoGap","autoGap","autoGap","autoGap","drawAnimBezierTools","autoGap","save","gap50","preview"],U2=["gap50","history","gap50","animationMode","autoGap","modifyAnimationBezierTools","autoGap","save","gap50"],H2=["gap50","history","gap50","poseMode","autoGap","modifyBezierTools","autoGap","save","gap50"],j2=["gap50","history","gap50","allEditMode","autoGap","autoGap","save","gap50","preview"];var z2=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"getClassName",value:function(){var e="";return e=this.props.pos?this.props.pos:"alone",this.props.move&&(e+=" move"),e}},{key:"onClick",value:function(e){this.props.editor||this.props.disable||this.props.clickCallback&&this.props.clickCallback(this.props.data)}},{key:"render",value:function(){var e,t="tool-btn "+(this.props.pos?this.props.pos:"alone"),n="bg "+this.getClassName();return e=(0,ff.jsxs)("div",{className:"icon",children:[(0,ff.jsx)(KT,{type:this.props.data.icon||"",className:"icon-add"}),"list"===this.props.data.type&&(0,ff.jsx)(KT,{type:"icon-angle-down",className:"list"})]}),(0,ff.jsxs)("div",{className:t,onClick:this.onClick.bind(this),children:[(0,ff.jsx)("div",{className:n,children:e}),!1!==this.props.showText&&(0,ff.jsx)("div",{className:"label",children:this.props.data.label})]})}},{key:"componentDidMount",value:function(){}}]),n}(a.Component),V2=function(e){v(n,e);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"getDelay",value:function(){return this.props.delay<=0?Math.random()+.05:this.props.delay}},{key:"getPos",value:function(e,t){var n=t.length;if(n>1){if(0===e)return"left";if(e===n-1)return"right"}return"middle"}},{key:"render",value:function(){var e,t=this;return(0,ff.jsx)("div",{className:"tool-btn-group",children:null===(e=this.props.data.btns)||void 0===e?void 0:e.map((function(e,n){return(0,ff.jsx)(z2,{pos:t.getPos(n,t.props.data.btns||[]),disable:t.props.disable,editor:t.props.editor,move:t.props.move,showText:t.props.showText,delay:t.getDelay(),clickCallback:t.props.clickCallback,data:e},n)}))})}}]),n}(a.Component),G2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).onClickItem=function(e){var t=e.currentTarget.dataset.index,n=r.props.data.list&&r.props.data.list[t];r.props.clickCallback&&r.props.clickCallback(n)},r.onClick=function(e){var t=!r.state.showList;r.setState({showList:t})},r.onMouseDown=function(e){r.setState({showList:!1})},r.state={showList:!1},r}return f(n,[{key:"render",value:function(){var e=this,t=this.props.data.list;return(0,ff.jsxs)("div",{className:"tool-btn-list",children:[(0,ff.jsx)(z2,{pos:this.props.pos,disable:this.props.disable,editor:this.props.editor,move:this.props.move,showText:this.props.showText,data:this.props.data,clickCallback:this.onClick}),this.state.showList&&(0,ff.jsx)("div",{className:"btn-list",children:null===t||void 0===t?void 0:t.map((function(t,n){return(0,ff.jsxs)("div",{children:["gap"===t.name&&(0,ff.jsx)("div",{className:"gap"}),"gap"!==t.name&&(0,ff.jsxs)("div",{className:"btn-list-item","data-index":n,onMouseDown:e.onClickItem,children:[t.icon&&(0,ff.jsx)(KT,{type:t.icon}),t.checked&&(0,ff.jsx)(KT,{type:"checked"}),!t.icon&&!t.checked&&(0,ff.jsx)("div",{className:"no-check"}),(0,ff.jsx)("div",{className:"label",children:t.label})]})]},n)}))})]})}},{key:"componentDidUpdate",value:function(){this.state.showList?window.addEventListener("mousedown",this.onMouseDown):window.removeEventListener("mousedown",this.onMouseDown)}}]),n}(a.Component),W2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.overItem=!1,r.onClick=function(e){var t=r.props.data;t.list&&t.list.length>0||"gap"===t.name||r.props.clickCallback&&r.props.clickCallback(t)},r.onMouseOver=function(e){r.overItem=!0,r.props.data.list&&r.props.data.list.length&&r.setState({showList:!0})},r.onMouseOut=function(e){r.overItem=!1;var t=r.refs.btnSubList;if(t){var n=e.clientX,i=e.clientY,o=!1,a=t.getBoundingClientRect();n>a.x&&n<a.x+a.width&&i>a.y&&i<a.y+a.height&&(o=!0),o||r.setState({showList:!1})}},r.state={showList:!1},r}return f(n,[{key:"isGap",get:function(){return"gap"===this.props.data.name}},{key:"render",value:function(){var e=this,t=this.props.data,r=t.list;return(0,ff.jsxs)("div",{className:"",children:[(0,ff.jsxs)("div",{className:"tool-btn-more-list",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,onMouseDown:this.onClick,children:[this.isGap&&(0,ff.jsx)("div",{className:"gap"}),!this.isGap&&(0,ff.jsx)("div",{className:"btn-more-label"}),t.icon&&(0,ff.jsx)(KT,{type:t.icon}),t.checked&&(0,ff.jsx)(KT,{type:"checked"}),!t.icon&&!t.checked&&(0,ff.jsx)("div",{className:"no-check"}),(0,ff.jsxs)("div",{className:"label",children:[" ",t.label]})]}),this.state.showList&&(0,ff.jsx)("div",{className:"btn-more-list",ref:"btnSubList",onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut,children:r.map((function(t,r){return(0,ff.jsx)(n,{data:t,clickCallback:e.props.clickCallback},r)}))})]})}},{key:"alignSubList",value:function(){var e=this.refs.btnSubList;e&&e.offsetWidth>0&&(e.style.left=-e.offsetWidth+"px")}},{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){this.alignSubList()}}]),n}(a.Component),X2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).buttonData=D2,r.onClick=function(e){var t=!r.state.showList;r.setState({showList:t})},r.onMouseDown=function(e){r.setState({showList:!1})},r.state={showList:!1},r}return f(n,[{key:"dataList",get:function(){var e=[],t=this.props.data;for(var n in t)if("group"===t[n].type){if(t[n].btns)for(var r in t[n].btns)e.push(t[n].btns[r])}else e.push(t[n]);return e}},{key:"render",value:function(){var e=this,t=this.dataList,n=this.buttonData;return(0,ff.jsxs)("div",{className:"tool-btn-more tool-btn-list",children:[(0,ff.jsx)(z2,{pos:this.props.pos,disable:this.props.disable,editor:this.props.editor,move:this.props.move,showText:this.props.showText,data:n,clickCallback:this.onClick}),this.state.showList&&(0,ff.jsx)("div",{className:"btn-list",children:t.map((function(t,n){return(0,ff.jsxs)("div",{children:["gap"===t.name&&(0,ff.jsx)("div",{className:"gap"}),"gap"!==t.name&&(0,ff.jsx)(W2,{data:t,clickCallback:e.props.clickCallback})]},n)}))})]})}},{key:"componentDidUpdate",value:function(){this.state.showList?window.addEventListener("mousedown",this.onMouseDown):window.removeEventListener("mousedown",this.onMouseDown)}}]),n}(a.Component),Y2=function(e){v(n,e);var t=y(n);function n(e){var r,i;return u(this,n),(i=t.call(this,e)).refs={},i.toolbarWidth=0,i.autoGapWidth=1,i.moreLayout=[],i.waitMeasure=!1,i.toolbarMap=(b(r={},Y.POSE,F2),b(r,Y.ANIMATION,B2),b(r,Y.DRAW_SHAPE,H2),b(r,Y.ANIMATION_DRAW_SHAPE,U2),b(r,Y.ACTION,j2),r),i.clickToolbar=function(e){e.action&&(e.action===X.SWITCH_FULL_SCREEN?document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():document.documentElement.requestFullscreen():i.props.store.dispatch(_.TOOLBAR_COMMAND,{action:e.action,data:e.actionValue,trigger:e.trigger}))},i.init(),i}return f(n,[{key:"init",value:function(){this.props.eventBus.on(W.SWITCH_MODE,this.refresh,this)}},{key:"refresh",value:function(){this.setState({})}},{key:"toolbarData",get:function(){var e=Y.POSE,t=function(e){for(var t=[],n=0,r=e.length;n<r;n++)t.push(L2[e[n]]);return t}(this.toolbarMap[e]||[]);if(this.toolbarWidth<=0)return t;for(var n=t,r=[],i=[],o=[],a=0,s=0,l=n.length;s<l;s++){var u=Re({},n[s]);(a+=this.getToolBarItemWidth(u))<=this.toolbarWidth-60?("autoGap"===u.type&&o.push(u),r.push(u)):"gap"!==u.type&&"autoGap"!==u.type&&i.push(u)}if(o.length>0){var c=(this.toolbarWidth-a)/o.length;for(var h in this.autoGapWidth=c,this.autoGapWidth<0&&(this.autoGapWidth=0),o)o[h].gap=this.autoGapWidth}else this.autoGapWidth=this.toolbarWidth-a;return this.moreLayout=i,r}},{key:"getToolBarItemWidth",value:function(e){var t;return"gap"===e.type?e.gap||0:"autoGap"===e.type?0:"group"===e.type?60*((null===(t=e.btns)||void 0===t?void 0:t.length)||0):60}},{key:"render",value:function(){var e=this,t=this.toolbarData,n=this.moreLayout;return(0,ff.jsxs)("div",{className:"toolbar",ref:"toolbar",children:[t.map((function(t,n){return t&&(0,ff.jsxs)("div",{children:["group"===t.type&&(0,ff.jsx)(V2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar,delay:0}),"button"===t.type&&(0,ff.jsx)(z2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar}),"list"===t.type&&(0,ff.jsx)(G2,{data:t,showText:!e.props.hideText,clickCallback:e.clickToolbar}),"gap"===t.type&&(0,ff.jsx)("div",{className:t.type,style:{width:t.gap+"px"}}),"autoGap"===t.type&&(0,ff.jsx)("div",{className:t.type,style:{width:t.gap+"px"}}),"label"===t.type&&(0,ff.jsx)("div",{className:t.type,style:{width:t.gap+"px",whiteSpace:"nowrap",lineHeight:"50px"},children:t.label}),"version"===t.type&&(0,ff.jsx)("div",{className:t.type,style:{width:t.gap+"px",whiteSpace:"nowrap",lineHeight:"50px",marginTop:"15px",color:"#999999"},children:t.label})]},n)})),n&&n.length>0&&(0,ff.jsx)(X2,{data:n,clickCallback:this.clickToolbar,children:" "})]})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.onResize.bind(this)),this.measureWdith()}},{key:"onResize",value:function(){this.measureWdith()}},{key:"measureWdith",value:function(){var e=this.refs.toolbar;e?(e.offsetWidth!==this.toolbarWidth&&(this.toolbarWidth=e.offsetWidth,this.setState({})),this.waitMeasure=!1):this.waitMeasure=!0}}]),n}(a.Component),K2=function(e){v(n,gmvc.Command);var t=y(n);function n(){var e;u(this,n);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).toolbarRoot=void 0,e}return f(n,[{key:"execute",value:function(){var e=document.getElementById("toolbar");if(e){var t;this.toolbarRoot||(this.toolbarRoot=(0,l.createRoot)(e));var n=$2.instance,r=n.store,i=n.eventBus;null===(t=this.toolbarRoot)||void 0===t||t.render((0,ff.jsx)(Y2,{store:r,eventBus:i}))}}}]),n}(),q2=function(e){v(n,gmvc.Command);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"execute",value:function(){var e=this;this._retain(),$2.instance.eventBus.once(K.USER_LOGIN_SUCCESS,(function(){e._release(!0)}),this),$2.instance.store.dispatch(K.USER_LOGIN)}}]),n}(),Z2=function(e){v(n,gmvc.QueueCommand);var t=y(n);function n(){return u(this,n),t.apply(this,arguments)}return f(n,[{key:"_initialize",value:function(){this._addCommand(ie),this._addCommand(A2),this._addCommand(q2),this._addCommand(re),this._addCommand(ne),this._addCommand(te),this._addCommand(UT),this._addCommand(C2),this._addCommand(K2),this._addCommand(N2),this._addCommand(HT),this._addCommand(R2)}}]),n}(),$2=function(){function e(){u(this,e),this._activated=!1,this.store=new BT,this.eventBus=gmvc.context,this.res=new WC(this.store),e._instance=this}return f(e,[{key:"start",value:function(){this._activated||(this._activated=!0,gmvc.controller.register(PC.INIT,Z2),gmvc.context.sendNotification(PC.INIT,null,null))}},{key:"initViewController",value:function(e,t){var n=gmvc.BaseObject.getInstance(e);n.initialize(this.store,t),n.enable=!0}}],[{key:"instance",get:function(){return e._instance||(e._instance=new e),e._instance}}]),e}();$2._instance=void 0,$2.isDebug=!0;var Q2=function(e){return e[e.NONE=0]="NONE",e[e.PRE=1]="PRE",e[e.START=2]="START",e[e.END=3]="END",e}(Q2||{}),J2=function(e){v(n,e);var t=y(n);function n(e){var r;return u(this,n),(r=t.call(this,e)).refs={},r.enabled=!1,r.status=Q2.NONE,r.dataTransfer=new e3,r.dragTarget=void 0,r.dragCurrentTarget=void 0,r.offX=0,r.offY=0,r.downX=0,r.downY=0,r.mouseX=0,r.mouseY=0,r.eventOver=new Event("dragover",{bubbles:!0}),r.eventLeave=new Event("dragleave",{bubbles:!0}),r.eventEnter=new Event("dragenter",{bubbles:!0}),r.eventEnd=new Event("dragend",{bubbles:!0}),r.eventDrop=new Event("drop",{bubbles:!0}),r.mouseEventHandler=function(e){switch(e.type){case"mousedown":for(var t=e.target;t;){if("true"===t.draggable){r.preDrag(e.clientX,e.clientY,t);break}if(t.dataset&&"true"===t.dataset.draggable){r.preDrag(e.clientX,e.clientY,t);break}t=t.parentNode}break;case"mouseup":e.stopImmediatePropagation(),window.removeEventListener("mousemove",r.onMouseMove),window.removeEventListener("mouseup",r.mouseEventHandler),r.status===Q2.START&&r.endDrag()}},r.preDrag=function(e,t,n){r.status=Q2.PRE,r.dragTarget=n,r.dragCurrentTarget=n,r.downX=e,r.downY=t,r.offX=0,r.offY=0,window.addEventListener("mousemove",r.onMouseMove),window.addEventListener("mouseup",r.mouseEventHandler)},r.onMouseMove=function(e){if(r.dragTarget&&r.dragCurrentTarget){var t=e.clientX,n=e.clientY;if(r.mouseX=t,r.mouseY=n,r.status===Q2.PRE)vp.distanceBetweenPoints({x:t,y:n},{x:r.downX,y:r.downY})>5&&(r.status=Q2.START,r.startDrag(t,n,r.dragTarget,e.offsetX,e.offsetY));else if(r.status===Q2.START){var i=e.target;if(i!==r.dragCurrentTarget){var o=r.eventLeave;o.dataTransfer=r.dataTransfer,r.dragTarget.dispatchEvent(o),r.dragCurrentTarget.dispatchEvent(o),r.dragCurrentTarget=i;var a=r.eventEnter;r.dataTransfer.target=r.dragCurrentTarget,r.dataTransfer.currentTarget=r.dragTarget,a.dataTransfer=r.dataTransfer,r.dragTarget.dispatchEvent(a),r.dragCurrentTarget&&r.dragCurrentTarget.dispatchEvent(a)}var s=r.eventOver;s.offsetX=e.offsetX,s.offsetY=e.offsetY,s.dataTransfer=r.dataTransfer,r.dataTransfer.target=r.dragCurrentTarget,r.dataTransfer.currentTarget=r.dragTarget,r.dragCurrentTarget&&r.dragCurrentTarget.dispatchEvent(s),r.dragTarget.dispatchEvent(s);var l=r.refs.gDrag;l&&(l.style.left=t-r.offX+"px",l.style.top=n-r.offY+"px")}}},r}return f(n,[{key:"render",value:function(){return(0,ff.jsx)("div",{className:"g-drag",ref:"gDrag",style:{overflow:"visible",position:"absolute",pointerEvents:"none",zIndex:200}})}},{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.mouseEventHandler),this.dataTransfer.setDragImageCallback=this.setDragImage.bind(this),this.dataTransfer.setDragSizeCallback=this.setDragSize.bind(this),this.dataTransfer.setDragAlphaCallback=this.setDragAlpha.bind(this),this.dataTransfer.setDragScaleCallback=this.setDragScale.bind(this)}},{key:"endDrag",value:function(){if(this.dataTransfer.clearCursor(),this.dragCurrentTarget){var e=this.eventDrop;e.clientX=this.mouseX,e.clientY=this.mouseY,e.dataTransfer=this.dataTransfer,this.dragCurrentTarget.dispatchEvent(e)}if(this.dragTarget){var t=this.eventEnd;t.dataTransfer=this.dataTransfer,this.dragTarget.dispatchEvent(t)}this.status=Q2.NONE,CU(this.refs.gDrag),this.dataTransfer.clearData()}},{key:"startDrag",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=this.refs.gDrag;if(o){o.style.left=e+"px",o.style.top=t+"px";var a=n.cloneNode(!0);a.style.opacity=.5,this.setDragImage(a,r||0,i||0);var s=new Event("dragstart");s.offsetX=r||0,s.offsetY=i||0,s.clientX=e||0,s.clientY=t||0,s.dataTransfer=this.dataTransfer,n.dispatchEvent(s)}}},{key:"setDragImage",value:function(e,t,n){this.offX=t,this.offY=n;var r=this.refs.gDrag;r&&(r.style.left=this.mouseX-this.offX+"px",r.style.top=this.mouseY-this.offY+"px",CU(r),r.appendChild(e))}},{key:"setDragAlpha",value:function(e){var t=this.refs.gDrag;t&&(t.children[0].style.opacity=e)}},{key:"setDragSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(n)||(this.offX=n),isNaN(r)||(this.offY=r);var i=this.refs.gDrag;i&&(i.style.left=this.mouseX-this.offX+"px",i.style.top=this.mouseY-this.offY+"px",i.firstChild&&(i.firstChild.style.width=e+"px",i.firstChild.style.height=t+"px"))}},{key:"setDragScale",value:function(e){var t=this.refs.gDrag;t&&t.firstChild&&(t.firstChild.style.scale=e+"")}}]),n}(a.Component),e3=function(){function e(){u(this,e),this.setDragImageCallback=void 0,this.setDragSizeCallback=void 0,this.setDragAlphaCallback=void 0,this.setDragScaleCallback=void 0,this.types=[],this.target=void 0,this.currentTarget=void 0,this._data={},this.lastCursor="",this.lastCursorTarget=void 0}return f(e,[{key:"dropEffect",set:function(e){if(this.target)switch(e){case"copy":this.setCursor(this.target,"copy");break;case"none":this.setCursor(this.target,"not-allowed");break;default:this.clearCursor()}}},{key:"setCursor",value:function(e,t){this.clearCursor(),e&&(this.lastCursor=e.style.cursor,e.style.cursor=t,this.lastCursorTarget=e)}},{key:"clearCursor",value:function(){this.lastCursorTarget&&(this.lastCursor?this.lastCursorTarget.style.cursor=this.lastCursor:this.lastCursorTarget.style.cursor="default",this.lastCursorTarget=void 0,this.lastCursor=void 0)}},{key:"clearData",value:function(){this._data={}}},{key:"setData",value:function(e,t){this.types.push(e),this._data[e]=t}},{key:"getData",value:function(e){return this._data[e]}},{key:"setDragImage",value:function(e,t,n){this.setDragImageCallback&&this.setDragImageCallback(e,t,n)}},{key:"setDragSize",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;this.setDragSizeCallback&&this.setDragSizeCallback(e,t,n,r)}},{key:"setDragAlpha",value:function(e){this.setDragAlphaCallback&&this.setDragAlphaCallback(e)}},{key:"setDragScale",value:function(e){this.setDragScaleCallback&&this.setDragScaleCallback(e)}}]),e}();var t3=function(){return(0,a.useEffect)((function(){$2.instance.start()}),[]),(0,ff.jsxs)("div",{className:"editor",children:[(0,ff.jsx)(J2,{}),(0,ff.jsx)("div",{className:"toolbar-container",id:"toolbar"}),(0,ff.jsx)("div",{className:"container",id:"container"})]})},n3=function(e){e&&e instanceof Function&&r.e(27).then(r.bind(r,4027)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))};l.createRoot(document.getElementById("root")).render((0,ff.jsx)(t3,{})),n3()}()}();